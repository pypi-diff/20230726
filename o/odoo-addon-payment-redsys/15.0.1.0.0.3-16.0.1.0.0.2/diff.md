# Comparing `tmp/odoo_addon_payment_redsys-15.0.1.0.0.3-py3-none-any.whl.zip` & `tmp/odoo_addon_payment_redsys-16.0.1.0.0.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,40 +1,39 @@
-Zip file size: 71230 bytes, number of entries: 38
--rw-r--r--  2.0 unx     5706 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/README.rst
--rw-r--r--  2.0 unx      114 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/__init__.py
--rw-r--r--  2.0 unx      659 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/__manifest__.py
--rw-r--r--  2.0 unx       19 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/controllers/__init__.py
--rw-r--r--  2.0 unx     1455 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/controllers/main.py
--rw-r--r--  2.0 unx     1838 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/data/payment_redsys.xml
--rw-r--r--  2.0 unx     9176 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/i18n/bg.po
--rw-r--r--  2.0 unx    11786 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/i18n/ca.po
--rw-r--r--  2.0 unx    13674 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/i18n/es.po
--rw-r--r--  2.0 unx    10738 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/i18n/fr.po
--rw-r--r--  2.0 unx     9558 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/i18n/gl.po
--rw-r--r--  2.0 unx     9132 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/i18n/hr.po
--rw-r--r--  2.0 unx     7868 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/i18n/payment_redsys.pot
--rw-r--r--  2.0 unx     9210 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/i18n/pt_BR.po
--rw-r--r--  2.0 unx     9247 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/i18n/sl.po
--rw-r--r--  2.0 unx      463 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/migrations/15.0.1.0.0/post-migration.py
--rw-r--r--  2.0 unx      102 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/models/__init__.py
--rw-r--r--  2.0 unx      463 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/models/account_payment_method.py
--rw-r--r--  2.0 unx     7962 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/models/payment_acquirer.py
--rw-r--r--  2.0 unx     5848 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/models/payment_transaction.py
--rw-r--r--  2.0 unx     1730 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      364 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      190 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      168 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/readme/INSTALL.rst
--rw-r--r--  2.0 unx      621 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/readme/ROADMAP.rst
--rw-r--r--  2.0 unx     8505 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/static/description/icon.png
--rw-r--r--  2.0 unx    16382 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/static/description/index.html
--rw-r--r--  2.0 unx     4959 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/static/img/bizum.png
--rw-r--r--  2.0 unx    11108 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/static/src/img/redsys_icon.png
--rw-r--r--  2.0 unx       47 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/tests/__init__.py
--rw-r--r--  2.0 unx     1125 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/tests/common.py
--rw-r--r--  2.0 unx     5910 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/tests/test_redsys.py
--rw-r--r--  2.0 unx     3088 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/views/payment_acquirer.xml
--rw-r--r--  2.0 unx      954 b- defN 23-May-20 08:31 odoo/addons/payment_redsys/views/payment_redsys_templates.xml
--rw-r--r--  2.0 unx     6283 b- defN 23-May-20 08:31 odoo_addon_payment_redsys-15.0.1.0.0.3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-20 08:31 odoo_addon_payment_redsys-15.0.1.0.0.3.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-May-20 08:31 odoo_addon_payment_redsys-15.0.1.0.0.3.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3914 b- defN 23-May-20 08:31 odoo_addon_payment_redsys-15.0.1.0.0.3.dist-info/RECORD
-38 files, 180463 bytes uncompressed, 64688 bytes compressed:  64.2%
+Zip file size: 70706 bytes, number of entries: 37
+-rw-r--r--  2.0 unx     5790 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/README.rst
+-rw-r--r--  2.0 unx      114 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/__init__.py
+-rw-r--r--  2.0 unx      659 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/__manifest__.py
+-rw-r--r--  2.0 unx       19 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/controllers/__init__.py
+-rw-r--r--  2.0 unx     1459 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/controllers/main.py
+-rw-r--r--  2.0 unx     1564 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/data/payment_redsys.xml
+-rw-r--r--  2.0 unx     9176 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/i18n/bg.po
+-rw-r--r--  2.0 unx    11786 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/i18n/ca.po
+-rw-r--r--  2.0 unx    13674 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/i18n/es.po
+-rw-r--r--  2.0 unx    10738 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/i18n/fr.po
+-rw-r--r--  2.0 unx     9558 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/i18n/gl.po
+-rw-r--r--  2.0 unx     9132 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/i18n/hr.po
+-rw-r--r--  2.0 unx     7902 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/i18n/payment_redsys.pot
+-rw-r--r--  2.0 unx     9210 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/i18n/pt_BR.po
+-rw-r--r--  2.0 unx     9247 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/i18n/sl.po
+-rw-r--r--  2.0 unx      102 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/models/__init__.py
+-rw-r--r--  2.0 unx      463 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/models/account_payment_method.py
+-rw-r--r--  2.0 unx     7955 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/models/payment_provider.py
+-rw-r--r--  2.0 unx     5784 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/models/payment_transaction.py
+-rw-r--r--  2.0 unx     1730 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx      448 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      190 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      168 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/readme/INSTALL.rst
+-rw-r--r--  2.0 unx      621 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx     8505 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/static/description/icon.png
+-rw-r--r--  2.0 unx    16608 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/static/description/index.html
+-rw-r--r--  2.0 unx     4959 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/static/img/bizum.png
+-rw-r--r--  2.0 unx    11108 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/static/src/img/redsys_icon.png
+-rw-r--r--  2.0 unx       47 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/tests/__init__.py
+-rw-r--r--  2.0 unx     1063 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/tests/common.py
+-rw-r--r--  2.0 unx     6034 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/tests/test_redsys.py
+-rw-r--r--  2.0 unx     3060 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/views/payment_provider.xml
+-rw-r--r--  2.0 unx      954 b- defN 23-Jul-25 15:48 odoo/addons/payment_redsys/views/payment_redsys_templates.xml
+-rw-r--r--  2.0 unx     6368 b- defN 23-Jul-25 15:49 odoo_addon_payment_redsys-16.0.1.0.0.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-25 15:49 odoo_addon_payment_redsys-16.0.1.0.0.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jul-25 15:49 odoo_addon_payment_redsys-16.0.1.0.0.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3792 b- defN 23-Jul-25 15:49 odoo_addon_payment_redsys-16.0.1.0.0.2.dist-info/RECORD
+37 files, 180084 bytes uncompressed, 64372 bytes compressed:  64.3%
```

## zipnote {}

```diff
@@ -39,24 +39,21 @@
 
 Filename: odoo/addons/payment_redsys/i18n/pt_BR.po
 Comment: 
 
 Filename: odoo/addons/payment_redsys/i18n/sl.po
 Comment: 
 
-Filename: odoo/addons/payment_redsys/migrations/15.0.1.0.0/post-migration.py
-Comment: 
-
 Filename: odoo/addons/payment_redsys/models/__init__.py
 Comment: 
 
 Filename: odoo/addons/payment_redsys/models/account_payment_method.py
 Comment: 
 
-Filename: odoo/addons/payment_redsys/models/payment_acquirer.py
+Filename: odoo/addons/payment_redsys/models/payment_provider.py
 Comment: 
 
 Filename: odoo/addons/payment_redsys/models/payment_transaction.py
 Comment: 
 
 Filename: odoo/addons/payment_redsys/readme/CONFIGURE.rst
 Comment: 
@@ -90,26 +87,26 @@
 
 Filename: odoo/addons/payment_redsys/tests/common.py
 Comment: 
 
 Filename: odoo/addons/payment_redsys/tests/test_redsys.py
 Comment: 
 
-Filename: odoo/addons/payment_redsys/views/payment_acquirer.xml
+Filename: odoo/addons/payment_redsys/views/payment_provider.xml
 Comment: 
 
 Filename: odoo/addons/payment_redsys/views/payment_redsys_templates.xml
 Comment: 
 
-Filename: odoo_addon_payment_redsys-15.0.1.0.0.3.dist-info/METADATA
+Filename: odoo_addon_payment_redsys-16.0.1.0.0.2.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_payment_redsys-15.0.1.0.0.3.dist-info/WHEEL
+Filename: odoo_addon_payment_redsys-16.0.1.0.0.2.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_payment_redsys-15.0.1.0.0.3.dist-info/top_level.txt
+Filename: odoo_addon_payment_redsys-16.0.1.0.0.2.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_payment_redsys-15.0.1.0.0.3.dist-info/RECORD
+Filename: odoo_addon_payment_redsys-16.0.1.0.0.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/payment_redsys/README.rst

```diff
@@ -10,21 +10,21 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fl10n--spain-lightgray.png?logo=github
-    :target: https://github.com/OCA/l10n-spain/tree/15.0/payment_redsys
+    :target: https://github.com/OCA/l10n-spain/tree/16.0/payment_redsys
     :alt: OCA/l10n-spain
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/l10n-spain-15-0/l10n-spain-15-0-payment_redsys
+    :target: https://translation.odoo-community.org/projects/l10n-spain-16-0/l10n-spain-16-0-payment_redsys
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/189/15.0
+    :target: https://runbot.odoo-community.org/runbot/189/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 Este módulo añade la opción de pago a través de la pasarela de Redsys, pudiendo
 seleccionar entre los métodos de pago: pago con tarjeta, pago por transferencia,
 domiciliación y Bizum.
@@ -107,15 +107,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/l10n-spain/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/l10n-spain/issues/new?body=module:%20payment_redsys%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/l10n-spain/issues/new?body=module:%20payment_redsys%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -139,23 +139,27 @@
 
   * Ignacio Ibeas <ignacio@acysos.com>
 
 * `Planes Asesoria y Soluciones Informaticas  S.L. <https://www.planesnet.com>`_:
 
   * Luis Planes <luis@planesnet.com>
 
+* `Studio73 <https://www.studio73.es/>`_:
+
+  * Rafa Ferri <rafa.ferri@studio73.es>
+
 Maintainers
 ~~~~~~~~~~~
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 
-This module is part of the `OCA/l10n-spain <https://github.com/OCA/l10n-spain/tree/15.0/payment_redsys>`_ project on GitHub.
+This module is part of the `OCA/l10n-spain <https://github.com/OCA/l10n-spain/tree/16.0/payment_redsys>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## odoo/addons/payment_redsys/__manifest__.py

```diff
@@ -1,20 +1,20 @@
 # Copyright 2017 Tecnativa - Sergio Teruel
 # Copyright 2020 Tecnativa - João Marques
 
 {
     "name": "Pasarela de pago Redsys",
     "category": "Payment Acquirer",
     "summary": "Payment Acquirer: Redsys Implementation",
-    "version": "15.0.1.0.0",
+    "version": "16.0.1.0.0",
     "author": "Tecnativa, Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/l10n-spain",
     "depends": ["payment", "website_sale"],
     "external_dependencies": {"python": ["pycryptodome"]},
     "data": [
-        "views/payment_acquirer.xml",
+        "views/payment_provider.xml",
         "views/payment_redsys_templates.xml",
         "data/payment_redsys.xml",
     ],
     "license": "AGPL-3",
     "installable": True,
 }
```

## odoo/addons/payment_redsys/controllers/main.py

```diff
@@ -31,15 +31,15 @@
     )
     def redsys_return(self, **post):
         """Redsys."""
         _logger.info(
             "Redsys: entering form_feedback with post data %s", pprint.pformat(post)
         )
         if post:
-            request.env["payment.transaction"].sudo()._handle_feedback_data(
+            request.env["payment.transaction"].sudo()._handle_notification_data(
                 "redsys", post
             )
             return request.redirect("/payment/status")
 
     @http.route(
         ["/payment/redsys/result/<page>"],
         type="http",
```

## odoo/addons/payment_redsys/data/payment_redsys.xml

### odoo/addons/payment_redsys/data/payment_redsys.xml

```diff
@@ -1,31 +1,22 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!-- Copyright 2016-2017 Tecnativa - Sergio Teruel
      License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl-3). -->
 <odoo noupdate="1">
-  <record id="payment_acquirer_redsys" model="payment.acquirer">
+  <record id="payment_provider_redsys" model="payment.provider">
     <field name="name">Redsys</field>
     <field name="image_128" type="base64" file="payment_redsys/static/description/icon.png"/>
-    <field name="provider">redsys</field>
+    <field name="code">redsys</field>
     <field name="company_id" ref="base.main_company"/>
     <field name="redirect_form_view_id" ref="redsys_form"/>
     <field name="redsys_merchant_name">Bussines name</field>
     <field name="redsys_merchant_code">8888888</field>
     <field name="redsys_merchant_description">Bussines description</field>
     <field name="redsys_secret_key">xxxxxxxxxxxx -- SHA256</field>
-    <field name="description" type="html">
-      <field name="module_id" ref="base.module_payment_redsys"/>
-      <p>A payment gateway to accept online payments via credit cards.</p>
-      <ul>
-        <li>
-          <i class="fa fa-check"/>
-          eCommerce
-        </li>
-      </ul>
-    </field>
+    <field name="module_id" ref="base.module_payment_redsys"/>
     <field name="pre_msg"><![CDATA[
 <p>You will be redirected to the Redsys payment gateway after clicking on the payment button.</p>]]></field>
   </record>
   <record id="payment_icon_cc_bizum" model="payment.icon">
     <field name="name">Bizum</field>
     <field name="image" type="base64" file="payment_redsys/static/img/bizum.png"/>
   </record>
```

## odoo/addons/payment_redsys/i18n/payment_redsys.pot

```diff
@@ -1,248 +1,252 @@
 # Translation of Odoo Server.
 # This file contains the translation of the following modules:
 # 	* payment_redsys
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Odoo Server 15.0\n"
+"Project-Id-Version: Odoo Server 16.0\n"
 "Report-Msgid-Bugs-To: \n"
 "Last-Translator: \n"
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_merchant_lang__005
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_merchant_lang__005
 msgid "Alemán"
 msgstr ""
 
 #. module: payment_redsys
+#. odoo-python
 #: code:addons/payment_redsys/models/payment_transaction.py:0
 #, python-format
 msgid "Bank Error: %(status_code)s (%(error_code)s)"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_pay_method__z
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_pay_method__z
 msgid "Bizum"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_merchant_lang__001
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_merchant_lang__001
 msgid "Castellano"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_merchant_lang__003
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_merchant_lang__003
 msgid "Catalán"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields,field_description:payment_redsys.field_payment_acquirer__redsys_currency
+#: model:ir.model.fields,field_description:payment_redsys.field_payment_provider__code
+msgid "Code"
+msgstr ""
+
+#. module: payment_redsys
+#: model:ir.model.fields,field_description:payment_redsys.field_payment_provider__redsys_currency
 msgid "Currency"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_pay_method__d
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_pay_method__d
 msgid "Domiciliacion"
 msgstr ""
 
 #. module: payment_redsys
+#. odoo-python
 #: code:addons/payment_redsys/models/payment_transaction.py:0
 #, python-format
 msgid "Error: %(status_code)s (%(error_code)s)"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_merchant_lang__013
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_merchant_lang__013
 msgid "Euskera"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_merchant_lang__004
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_merchant_lang__004
 msgid "Francés"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_merchant_lang__012
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_merchant_lang__012
 msgid "Gallego"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_signature_version__hmac_sha256_v1
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_signature_version__hmac_sha256_v1
 msgid "HMAC SHA256 V1"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_merchant_lang__006
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_merchant_lang__006
 msgid "Holandés"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_merchant_lang__002
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_merchant_lang__002
 msgid "Inglés"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_merchant_lang__007
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_merchant_lang__007
 msgid "Italiano"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields,field_description:payment_redsys.field_payment_acquirer__redsys_merchant_lang
+#: model:ir.model.fields,field_description:payment_redsys.field_payment_provider__redsys_merchant_lang
 msgid "Merchant Consumer Language"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields,field_description:payment_redsys.field_payment_acquirer__redsys_merchant_data
+#: model:ir.model.fields,field_description:payment_redsys.field_payment_provider__redsys_merchant_data
 msgid "Merchant Data"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields,field_description:payment_redsys.field_payment_acquirer__redsys_merchant_name
+#: model:ir.model.fields,field_description:payment_redsys.field_payment_provider__redsys_merchant_name
 msgid "Merchant Name"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields,field_description:payment_redsys.field_payment_acquirer__redsys_merchant_code
+#: model:ir.model.fields,field_description:payment_redsys.field_payment_provider__redsys_merchant_code
 msgid "Merchant code"
 msgstr ""
 
 #. module: payment_redsys
+#. odoo-python
 #: code:addons/payment_redsys/models/payment_transaction.py:0
 #, python-format
 msgid "Ok: %s"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_pay_method__t
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_pay_method__t
 msgid "Pago con Tarjeta"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_pay_method__r
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_pay_method__r
 msgid "Pago por Transferencia"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model,name:payment_redsys.model_payment_acquirer
-msgid "Payment Acquirer"
-msgstr ""
-
-#. module: payment_redsys
-#: model:ir.model.fields,field_description:payment_redsys.field_payment_acquirer__redsys_pay_method
+#: model:ir.model.fields,field_description:payment_redsys.field_payment_provider__redsys_pay_method
 msgid "Payment Method"
 msgstr ""
 
 #. module: payment_redsys
 #: model:ir.model,name:payment_redsys.model_account_payment_method
 msgid "Payment Methods"
 msgstr ""
 
 #. module: payment_redsys
+#: model:ir.model,name:payment_redsys.model_payment_provider
+msgid "Payment Provider"
+msgstr ""
+
+#. module: payment_redsys
 #: model:ir.model,name:payment_redsys.model_payment_transaction
 msgid "Payment Transaction"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_merchant_lang__011
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_merchant_lang__011
 msgid "Polaco"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_merchant_lang__009
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_merchant_lang__009
 msgid "Portugués"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields,field_description:payment_redsys.field_payment_acquirer__redsys_merchant_description
+#: model:ir.model.fields,field_description:payment_redsys.field_payment_provider__redsys_merchant_description
 msgid "Product Description"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields,field_description:payment_redsys.field_payment_acquirer__provider
-msgid "Provider"
-msgstr ""
-
-#. module: payment_redsys
 #: model:account.payment.method,name:payment_redsys.payment_method_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__provider__redsys
-#: model:payment.acquirer,name:payment_redsys.payment_acquirer_redsys
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__code__redsys
+#: model:payment.provider,name:payment_redsys.payment_provider_redsys
 msgid "Redsys"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields,field_description:payment_redsys.field_payment_acquirer__redsys_signature_version
+#: model:ir.model.fields,field_description:payment_redsys.field_payment_provider__redsys_signature_version
 msgid "Redsys Signature Version"
 msgstr ""
 
 #. module: payment_redsys
+#. odoo-python
 #: code:addons/payment_redsys/models/payment_transaction.py:0
 #, python-format
 msgid "Redsys: feedback error: %(status_code)s (%(error_code)s)"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields,field_description:payment_redsys.field_payment_acquirer__redsys_secret_key
+#: model:ir.model.fields,field_description:payment_redsys.field_payment_provider__redsys_secret_key
 msgid "Secret Key"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_merchant_lang__008
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_merchant_lang__008
 msgid "Sueco"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields,field_description:payment_redsys.field_payment_acquirer__redsys_terminal
+#: model:ir.model.fields,field_description:payment_redsys.field_payment_provider__redsys_terminal
 msgid "Terminal"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields,help:payment_redsys.field_payment_acquirer__provider
-msgid "The Payment Service Provider to use with this acquirer"
+#: model:ir.model.fields,help:payment_redsys.field_payment_provider__code
+msgid "The technical code of this payment provider."
 msgstr ""
 
 #. module: payment_redsys
 #: model:ir.model.fields,field_description:payment_redsys.field_payment_transaction__redsys_txnid
 msgid "Transaction ID"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields,field_description:payment_redsys.field_payment_acquirer__redsys_transaction_type
+#: model:ir.model.fields,field_description:payment_redsys.field_payment_provider__redsys_transaction_type
 msgid "Transtaction Type"
 msgstr ""
 
 #. module: payment_redsys
-#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_acquirer__redsys_merchant_lang__010
+#: model:ir.model.fields.selection,name:payment_redsys.selection__payment_provider__redsys_merchant_lang__010
 msgid "Valenciano"
 msgstr ""
 
 #. module: payment_redsys
-#: model_terms:payment.acquirer,pre_msg:payment_redsys.payment_acquirer_redsys
+#: model_terms:payment.provider,pre_msg:payment_redsys.payment_provider_redsys
 msgid ""
 "You will be redirected to the Redsys payment gateway after clicking on the "
 "payment button."
 msgstr ""
 
 #. module: payment_redsys
-#: model_terms:payment.acquirer,auth_msg:payment_redsys.payment_acquirer_redsys
+#: model_terms:payment.provider,auth_msg:payment_redsys.payment_provider_redsys
 msgid "Your payment has been authorized."
 msgstr ""
 
 #. module: payment_redsys
-#: model_terms:payment.acquirer,cancel_msg:payment_redsys.payment_acquirer_redsys
+#: model_terms:payment.provider,cancel_msg:payment_redsys.payment_provider_redsys
 msgid "Your payment has been cancelled."
 msgstr ""
 
 #. module: payment_redsys
-#: model_terms:payment.acquirer,pending_msg:payment_redsys.payment_acquirer_redsys
+#: model_terms:payment.provider,pending_msg:payment_redsys.payment_provider_redsys
 msgid ""
 "Your payment has been successfully processed but is waiting for approval."
 msgstr ""
 
 #. module: payment_redsys
-#: model_terms:payment.acquirer,done_msg:payment_redsys.payment_acquirer_redsys
+#: model_terms:payment.provider,done_msg:payment_redsys.payment_provider_redsys
 msgid "Your payment has been successfully processed. Thank you!"
 msgstr ""
```

## odoo/addons/payment_redsys/models/__init__.py

```diff
@@ -1,3 +1,3 @@
 from . import account_payment_method
-from . import payment_acquirer
+from . import payment_provider
 from . import payment_transaction
```

## odoo/addons/payment_redsys/models/payment_transaction.py

```diff
@@ -5,18 +5,18 @@
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 import base64
 import json
 import logging
 import urllib
 
-from odoo import _, api, fields, http, models
+from odoo import _, api, fields, models
 from odoo.tools import config
 
-from odoo.addons.payment.models.payment_acquirer import ValidationError
+from odoo.addons.payment.models.payment_provider import ValidationError
 
 _logger = logging.getLogger(__name__)
 
 
 class TxRedsys(models.Model):
     _inherit = "payment.transaction"
 
@@ -27,18 +27,18 @@
         return json.loads(base64.b64decode(parameters).decode())
 
     # --------------------------------------------------
     # FORM RELATED METHODS
     # --------------------------------------------------
 
     @api.model
-    def _get_tx_from_feedback_data(self, provider, data):
+    def _get_tx_from_notification_data(self, provider, data):
         """Given a data dict coming from redsys, verify it and
         find the related transaction record."""
-        tx = super()._get_tx_from_feedback_data(provider, data)
+        tx = super()._get_tx_from_notification_data(provider, data)
         if provider != "redsys":
             return tx
 
         parameters = data.get("Ds_MerchantParameters", "")
         parameters_dic = json.loads(base64.b64decode(parameters).decode())
         reference = urllib.parse.unquote(parameters_dic.get("Ds_Order", ""))
         pay_id = parameters_dic.get("Ds_AuthorisationCode")
@@ -48,29 +48,27 @@
             error_msg = (
                 "Redsys: received data with missing reference"
                 " (%s) or pay_id (%s) or shashign (%s)" % (reference, pay_id, shasign)
             )
             if not test_env:
                 _logger.info(error_msg)
                 raise ValidationError(error_msg)
-            # For tests
-            http.OpenERPSession.tx_error = True
         tx = self.search([("reference", "=", reference)])
         if not tx or len(tx) > 1:
             error_msg = "Redsys: received data for reference %s" % (reference)
             if not tx:
                 error_msg += "; no order found"
             else:
                 error_msg += "; multiple order found"
             _logger.info(error_msg)
             raise ValidationError(error_msg)
         if tx and not test_env:
             # verify shasign
-            shasign_check = tx.acquirer_id.sign_parameters(
-                tx.acquirer_id.redsys_secret_key, parameters
+            shasign_check = tx.provider_id.sign_parameters(
+                tx.provider_id.redsys_secret_key, parameters
             )
             if shasign_check != shasign:
                 error_msg = (
                     "Redsys: invalid shasign, received %s, computed %s, "
                     "for data %s" % (shasign, shasign_check, data)
                 )
                 _logger.info(error_msg)
@@ -84,17 +82,17 @@
         elif status_code <= 203:
             return "pending"
         elif 912 <= status_code <= 9912:
             return "cancel"
         else:
             return "error"
 
-    def _process_feedback_data(self, data):
-        super()._process_feedback_data(data)
-        if self.provider != "redsys":
+    def _process_notification_data(self, data):
+        super()._process_notification_data(data)
+        if self.provider_code != "redsys":
             return
 
         params = self.merchant_params_json2dict(data)
         status_code = int(params.get("Ds_Response", "29999"))
         state = self._get_redsys_state(status_code)
 
         vals = {
@@ -130,24 +128,24 @@
                 _logger.warning(vals["state_message"])
             if feedback_error:
                 self._set_error(state_message)
         self.write(vals)
 
     def _get_specific_rendering_values(self, processing_values):
         res = super()._get_specific_rendering_values(processing_values)
-        if self.acquirer_id.provider != "redsys":
+        if self.provider_code != "redsys":
             return res
         redsys_values = dict(processing_values)
-        merchant_parameters = self.acquirer_id._prepare_merchant_parameters(
+        merchant_parameters = self.provider_id._prepare_merchant_parameters(
             processing_values
         )
         redsys_values.update(
             {
-                "api_url": self.acquirer_id._redsys_get_api_url(),
-                "Ds_SignatureVersion": str(self.acquirer_id.redsys_signature_version),
+                "api_url": self.provider_id._redsys_get_api_url(),
+                "Ds_SignatureVersion": str(self.provider_id.redsys_signature_version),
                 "Ds_MerchantParameters": merchant_parameters,
-                "Ds_Signature": self.acquirer_id.sign_parameters(
-                    self.acquirer_id.redsys_secret_key, merchant_parameters
+                "Ds_Signature": self.provider_id.sign_parameters(
+                    self.provider_id.redsys_secret_key, merchant_parameters
                 ),
             }
         )
         return redsys_values
```

## odoo/addons/payment_redsys/readme/CONTRIBUTORS.rst

```diff
@@ -10,7 +10,11 @@
 * `Acysos S.L. <https://www.acysos.com>`_:
 
   * Ignacio Ibeas <ignacio@acysos.com>
 
 * `Planes Asesoria y Soluciones Informaticas  S.L. <https://www.planesnet.com>`_:
 
   * Luis Planes <luis@planesnet.com>
+
+* `Studio73 <https://www.studio73.es/>`_:
+
+  * Rafa Ferri <rafa.ferri@studio73.es>
```

## odoo/addons/payment_redsys/static/description/index.html

### odoo/addons/payment_redsys/static/description/index.html

```diff
@@ -367,21 +367,21 @@
       <p>
         <a class="reference external" href="https://odoo-community.org/page/development-status">
           <img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png"/>
         </a>
         <a class="reference external" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html">
           <img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png"/>
         </a>
-        <a class="reference external" href="https://github.com/OCA/l10n-spain/tree/15.0/payment_redsys">
+        <a class="reference external" href="https://github.com/OCA/l10n-spain/tree/16.0/payment_redsys">
           <img alt="OCA/l10n-spain" src="https://img.shields.io/badge/github-OCA%2Fl10n--spain-lightgray.png?logo=github"/>
         </a>
-        <a class="reference external" href="https://translation.odoo-community.org/projects/l10n-spain-15-0/l10n-spain-15-0-payment_redsys">
+        <a class="reference external" href="https://translation.odoo-community.org/projects/l10n-spain-16-0/l10n-spain-16-0-payment_redsys">
           <img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png"/>
         </a>
-        <a class="reference external" href="https://runbot.odoo-community.org/runbot/189/15.0">
+        <a class="reference external" href="https://runbot.odoo-community.org/runbot/189/16.0">
           <img alt="Try me on Runbot" src="https://img.shields.io/badge/runbot-Try%20me-875A7B.png"/>
         </a>
       </p>
       <p>Este módulo añade la opción de pago a través de la pasarela de Redsys, pudiendo
 seleccionar entre los métodos de pago: pago con tarjeta, pago por transferencia,
 domiciliación y Bizum.</p>
       <p>
@@ -540,15 +540,15 @@
         </h1>
         <p>
           Bugs are tracked on
           <a class="reference external" href="https://github.com/OCA/l10n-spain/issues">GitHub Issues</a>
           .
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-          <a class="reference external" href="https://github.com/OCA/l10n-spain/issues/new?body=module:%20payment_redsys%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
+          <a class="reference external" href="https://github.com/OCA/l10n-spain/issues/new?body=module:%20payment_redsys%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
           .
         </p>
         <p>Do not contact contributors directly about support or help with technical issues.</p>
       </div>
       <div class="section" id="credits">
         <h1>
           <a class="toc-backref" href="#id7">Credits</a>
@@ -599,14 +599,25 @@
                 <li>
                   Luis Planes &lt;
                   <a class="reference external" href="mailto:luis@planesnet.com">luis@planesnet.com</a>
                   &gt;
                 </li>
               </ul>
             </li>
+            <li>
+              <a class="reference external" href="https://www.studio73.es/">Studio73</a>
+              :
+              <ul>
+                <li>
+                  Rafa Ferri &lt;
+                  <a class="reference external" href="mailto:rafa.ferri@studio73.es">rafa.ferri@studio73.es</a>
+                  &gt;
+                </li>
+              </ul>
+            </li>
           </ul>
         </div>
         <div class="section" id="maintainers">
           <h2>
             <a class="toc-backref" href="#id10">Maintainers</a>
           </h2>
           <p>This module is maintained by the OCA.</p>
@@ -614,15 +625,15 @@
             <img alt="Odoo Community Association" src="https://odoo-community.org/logo.png"/>
           </a>
           <p>OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.</p>
           <p>
             This module is part of the
-            <a class="reference external" href="https://github.com/OCA/l10n-spain/tree/15.0/payment_redsys">OCA/l10n-spain</a>
+            <a class="reference external" href="https://github.com/OCA/l10n-spain/tree/16.0/payment_redsys">OCA/l10n-spain</a>
             project on GitHub.
           </p>
           <p>
             You are welcome to contribute. To learn how please visit
             <a class="reference external" href="https://odoo-community.org/page/Contribute">https://odoo-community.org/page/Contribute</a>
             .
           </p>
```

## odoo/addons/payment_redsys/tests/common.py

```diff
@@ -2,26 +2,26 @@
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 from odoo.addons.payment.tests.common import PaymentCommon
 
 
 class RedsysCommon(PaymentCommon):
     @classmethod
-    def setUpClass(cls, chart_template_ref=None):
-        super().setUpClass(chart_template_ref=chart_template_ref)
-        cls.redsys = cls._prepare_acquirer(
+    def setUpClass(cls):
+        super().setUpClass()
+        cls.redsys = cls._prepare_provider(
             "redsys",
             update_values={
-                # Set values for create a new acquirer Redsys
-                "redsys_merchant_name": "Redsys test acquirer",
+                # Set values for create a new provider Redsys
+                "redsys_merchant_name": "Redsys test provider",
                 "redsys_merchant_code": "069611024",
-                "redsys_merchant_description": "Product description for Redsys test acquirer",
+                "redsys_merchant_description": "Product description for Redsys test provider",
                 "redsys_secret_key": "sq7HjrUOBfKmC576ILgskD5srU870gJ8",
                 "redsys_merchant_data": "Merchant data",
             },
         )
         # Override default values
-        cls.acquirer = cls.redsys
+        cls.provider = cls.redsys
         cls.currency = cls.currency_euro
         cls.country_spain = cls.env.ref("base.es")
         cls.country = cls.country_spain
         cls.company = cls.env.company
```

## odoo/addons/payment_redsys/tests/test_redsys.py

```diff
@@ -29,24 +29,25 @@
         return {
             "data_set": None,
             "Ds_SignatureVersion": rendering_values["Ds_SignatureVersion"],
             "Ds_MerchantParameters": rendering_values["Ds_MerchantParameters"],
             "Ds_Signature": rendering_values["Ds_Signature"],
         }
 
-    def test_compatible_acquirers(self):
-        acquirers = self.env["payment.acquirer"]._get_compatible_acquirers(
+    def test_compatible_providers(self):
+        providers = self.env["payment.provider"]._get_compatible_providers(
             partner_id=self.partner.id,
+            amount=0,
             currency_id=self.currency_euro.id,
             company_id=self.company.id,
         )
-        self.assertIn(self.redsys, acquirers)
+        self.assertIn(self.redsys, providers)
 
     def test_redirect_form_values(self):
-        tx = self.create_transaction(flow="redirect", reference="Valid transaction")
+        tx = self._create_transaction(flow="redirect", reference="Valid transaction")
         expected_values = self._get_expected_values(tx.reference)
 
         with mute_logger("odoo.addons.payment.models.payment_transaction"):
             processing_values = tx._get_processing_values()
 
         form_info = self._extract_values_from_html_form(
             processing_values["redirect_form_html"]
@@ -68,93 +69,97 @@
         return {
             "Ds_MerchantParameters": merchant_parameters,
             "Ds_Signature": self.redsys.sign_parameters(
                 self.redsys.redsys_secret_key, merchant_parameters.decode("utf8")
             ),
         }
 
-    def test_process_feedback_data(self):
-        tx = self.create_transaction(flow="redirect", reference="Valid transaction")
+    def test_process_notification_data(self):
+        tx = self._create_transaction(flow="redirect", reference="Valid transaction")
         values = {
             "Ds_Order": tx.reference,
             "Ds_AuthorisationCode": "999999",
             "Ds_Response": "100",
         }
         post_data = self._prepare_post_data(values)
 
-        tx = self.env["payment.transaction"]._get_tx_from_feedback_data(
+        tx = self.env["payment.transaction"]._get_tx_from_notification_data(
             "redsys", post_data
         )
-        tx._process_feedback_data(post_data)
+        tx._process_notification_data(post_data)
         self.assertEqual(
             tx.state, "done", "Redsys: validation did not put tx into done state"
         )
 
     def test_unknown_transaction(self):
         # typical data posted by Redsys after client has successfully paid
         # unknown transaction
         values = {
             "Ds_Order": "unknown transaction",
             "Ds_AuthorisationCode": "999999",
         }
         post_data = self._prepare_post_data(values)
         with self.assertRaises(ValidationError):
-            self.env["payment.transaction"]._handle_feedback_data("redsys", post_data)
+            self.env["payment.transaction"]._handle_notification_data(
+                "redsys", post_data
+            )
 
     def test_feedback_processing(self):
         # typical data posted by Redsys after client has successfully paid
 
         # redsys not authorisation code
         values = {
             "Ds_Order": "Valid transaction",
             "Ds_AuthorisationCode": "",
         }
         post_data = self._prepare_post_data(values)
         with self.assertRaises(ValidationError):
-            self.env["payment.transaction"]._handle_feedback_data("redsys", post_data)
+            self.env["payment.transaction"]._handle_notification_data(
+                "redsys", post_data
+            )
 
         # Valid transaction. status: done
-        tx = self.create_transaction(flow="redirect", reference="Valid transaction")
+        tx = self._create_transaction(flow="redirect", reference="Valid transaction")
         values = {
             "Ds_Order": tx.reference,
             "Ds_AuthorisationCode": "999999",
             "Ds_Response": "100",
         }
         post_data = self._prepare_post_data(values)
 
-        tx._handle_feedback_data("redsys", post_data)
+        tx._handle_notification_data("redsys", post_data)
         self.assertEqual(
             tx.state, "done", "Redsys: validation did not put tx into done state"
         )
 
         # No valid card transaction. status: pending
-        tx = self.create_transaction(flow="redirect", reference="Pending transaction")
+        tx = self._create_transaction(flow="redirect", reference="Pending transaction")
         values = {
             "Ds_Order": tx.reference,
             "Ds_AuthorisationCode": "999999",
             "Ds_Response": "203",
         }
         post_data = self._prepare_post_data(values)
-        tx._handle_feedback_data("redsys", post_data)
+        tx._handle_notification_data("redsys", post_data)
         self.assertEqual(tx.state, "pending", "Redsys: pending transaction status")
 
         # Cancel status
-        tx = self.create_transaction(flow="redirect", reference="Cancel transaction")
+        tx = self._create_transaction(flow="redirect", reference="Cancel transaction")
         values = {
             "Ds_Order": tx.reference,
             "Ds_AuthorisationCode": "999999",
             "Ds_Response": "913",
         }
         post_data = self._prepare_post_data(values)
-        tx._handle_feedback_data("redsys", post_data)
+        tx._handle_notification_data("redsys", post_data)
         self.assertEqual(tx.state, "cancel", "Redsys: 913-9912 generic invalid card")
 
         # Error transction status
-        tx = self.create_transaction(flow="redirect", reference="Error transaction")
+        tx = self._create_transaction(flow="redirect", reference="Error transaction")
         values = {
             "Ds_Order": tx.reference,
             "Ds_AuthorisationCode": "999999",
             "Ds_Response": "9999",
         }
         post_data = self._prepare_post_data(values)
-        tx._handle_feedback_data("redsys", post_data)
+        tx._handle_notification_data("redsys", post_data)
         self.assertEqual(tx.state, "error", "Redsys: response error")
```

## Comparing `odoo/addons/payment_redsys/models/payment_acquirer.py` & `odoo/addons/payment_redsys/models/payment_provider.py`

 * *Files 2% similar despite different names*

```diff
@@ -16,24 +16,24 @@
 
 from odoo import api, fields, http, models
 from odoo.tools import config
 
 _logger = logging.getLogger(__name__)
 
 
-class AcquirerRedsys(models.Model):
-    _inherit = "payment.acquirer"
+class PaymentProvider(models.Model):
+    _inherit = "payment.provider"
 
     def _redsys_get_api_url(self):
         if self.state == "enabled":
             return "https://sis.redsys.es/sis/realizarPago/"
         else:  # test environment
             return "https://sis-t.redsys.es:25443/sis/realizarPago/"
 
-    provider = fields.Selection(
+    code = fields.Selection(
         selection_add=[("redsys", "Redsys")], ondelete={"redsys": "set default"}
     )
     redsys_merchant_name = fields.Char("Merchant Name", required_if_provider="redsys")
     redsys_merchant_code = fields.Char("Merchant code", required_if_provider="redsys")
     redsys_merchant_description = fields.Char(
         "Product Description", required_if_provider="redsys"
     )
@@ -192,10 +192,10 @@
         if sale_order:
             description = "|".join(x.name for x in sale_order.order_line)
             res = description[:125]
         return res
 
     def _get_default_payment_method_id(self):
         self.ensure_one()
-        if self.provider != "redsys":
+        if self.code != "redsys":
             return super()._get_default_payment_method_id()
         return self.env.ref("payment_redsys.payment_method_redsys").id
```

## Comparing `odoo/addons/payment_redsys/views/payment_acquirer.xml` & `odoo/addons/payment_redsys/views/payment_provider.xml`

 * *Files 24% similar despite different names*

### Comparing `odoo/addons/payment_redsys/views/payment_acquirer.xml` & `odoo/addons/payment_redsys/views/payment_provider.xml`

```diff
@@ -1,35 +1,35 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!-- Copyright 2017 Tecnativa - Sergio Teruel
      License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl-3). -->
 <odoo>
-  <record id="acquirer_form_redsys" model="ir.ui.view">
-    <field name="name">acquirer.form.redsys</field>
-    <field name="model">payment.acquirer</field>
-    <field name="inherit_id" ref="payment.payment_acquirer_form"/>
+  <record id="provider_form_redsys" model="ir.ui.view">
+    <field name="name">payment.provider.form.redsys</field>
+    <field name="model">payment.provider</field>
+    <field name="inherit_id" ref="payment.payment_provider_form"/>
     <field name="arch" type="xml">
-      <xpath expr="//group[@name=&quot;acquirer&quot;]" position="inside">
-        <group attrs="{'invisible': [('provider', '!=', 'redsys')]}">
-          <field name="redsys_merchant_name" attrs="{'required': [('provider', '=', 'redsys')]}"/>
-          <field name="redsys_merchant_code" attrs="{'required': [('provider', '=', 'redsys')]}"/>
-          <field name="redsys_secret_key" attrs="{'required': [('provider', '=', 'redsys')]}"/>
-          <field name="redsys_terminal" attrs="{'required': [('provider', '=', 'redsys')]}"/>
-          <field name="redsys_currency" attrs="{'required': [('provider', '=', 'redsys')]}"/>
-          <field name="redsys_transaction_type" attrs="{'required': [('provider', '=', 'redsys')]}"/>
-          <field name="redsys_merchant_lang" attrs="{'required': [('provider', '=', 'redsys')]}"/>
-          <field name="redsys_pay_method" attrs="{'required': [('provider', '=', 'redsys')]}"/>
-          <field name="redsys_merchant_data" attrs="{'required': [('provider', '=', 'redsys')]}"/>
-          <field name="redsys_merchant_description" attrs="{'required': [('provider', '=', 'redsys')]}"/>
-          <field name="redsys_signature_version" attrs="{'required': [('provider', '=', 'redsys')]}"/>
+      <xpath expr="//group[@name=&quot;provider_credentials&quot;]" position="inside">
+        <group attrs="{'invisible': [('code', '!=', 'redsys')]}">
+          <field name="redsys_merchant_name" attrs="{'required': [('code', '=', 'redsys')]}"/>
+          <field name="redsys_merchant_code" attrs="{'required': [('code', '=', 'redsys')]}"/>
+          <field name="redsys_secret_key" attrs="{'required': [('code', '=', 'redsys')]}"/>
+          <field name="redsys_terminal" attrs="{'required': [('code', '=', 'redsys')]}"/>
+          <field name="redsys_currency" attrs="{'required': [('code', '=', 'redsys')]}"/>
+          <field name="redsys_transaction_type" attrs="{'required': [('code', '=', 'redsys')]}"/>
+          <field name="redsys_merchant_lang" attrs="{'required': [('code', '=', 'redsys')]}"/>
+          <field name="redsys_pay_method" attrs="{'required': [('code', '=', 'redsys')]}"/>
+          <field name="redsys_merchant_data" attrs="{'required': [('code', '=', 'redsys')]}"/>
+          <field name="redsys_merchant_description" attrs="{'required': [('code', '=', 'redsys')]}"/>
+          <field name="redsys_signature_version" attrs="{'required': [('code', '=', 'redsys')]}"/>
         </group>
       </xpath>
     </field>
   </record>
   <record id="transaction_form_redsys" model="ir.ui.view">
-    <field name="name">acquirer.transaction.form.redsys</field>
+    <field name="name">provider.transaction.form.redsys</field>
     <field name="model">payment.transaction</field>
     <field name="inherit_id" ref="payment.payment_transaction_form"/>
     <field name="arch" type="xml">
       <field name="create_date" position="after">
         <field name="redsys_txnid"/>
       </field>
     </field>
```

## Comparing `odoo_addon_payment_redsys-15.0.1.0.0.3.dist-info/METADATA` & `odoo_addon_payment_redsys-16.0.1.0.0.2.dist-info/METADATA`

 * *Files 4% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 Metadata-Version: 2.1
 Name: odoo-addon-payment-redsys
-Version: 15.0.1.0.0.3
+Version: 16.0.1.0.0.2
 Summary: Payment Acquirer: Redsys Implementation
 Home-page: https://github.com/OCA/l10n-spain
 Author: Tecnativa, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
-Classifier: Framework :: Odoo :: 15.0
+Classifier: Framework :: Odoo :: 16.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
-Requires-Python: >=3.8
-Requires-Dist: odoo (<15.1dev,>=15.0a)
+Requires-Python: >=3.10
+Requires-Dist: odoo (<16.1dev,>=16.0a)
 Requires-Dist: pycryptodome
 
 =======================
 Pasarela de pago Redsys
 =======================
 
 .. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
@@ -27,21 +27,21 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fl10n--spain-lightgray.png?logo=github
-    :target: https://github.com/OCA/l10n-spain/tree/15.0/payment_redsys
+    :target: https://github.com/OCA/l10n-spain/tree/16.0/payment_redsys
     :alt: OCA/l10n-spain
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/l10n-spain-15-0/l10n-spain-15-0-payment_redsys
+    :target: https://translation.odoo-community.org/projects/l10n-spain-16-0/l10n-spain-16-0-payment_redsys
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/189/15.0
+    :target: https://runbot.odoo-community.org/runbot/189/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 Este módulo añade la opción de pago a través de la pasarela de Redsys, pudiendo
 seleccionar entre los métodos de pago: pago con tarjeta, pago por transferencia,
 domiciliación y Bizum.
@@ -124,15 +124,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/l10n-spain/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/l10n-spain/issues/new?body=module:%20payment_redsys%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/l10n-spain/issues/new?body=module:%20payment_redsys%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -156,25 +156,29 @@
 
   * Ignacio Ibeas <ignacio@acysos.com>
 
 * `Planes Asesoria y Soluciones Informaticas  S.L. <https://www.planesnet.com>`_:
 
   * Luis Planes <luis@planesnet.com>
 
+* `Studio73 <https://www.studio73.es/>`_:
+
+  * Rafa Ferri <rafa.ferri@studio73.es>
+
 Maintainers
 ~~~~~~~~~~~
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 
-This module is part of the `OCA/l10n-spain <https://github.com/OCA/l10n-spain/tree/15.0/payment_redsys>`_ project on GitHub.
+This module is part of the `OCA/l10n-spain <https://github.com/OCA/l10n-spain/tree/16.0/payment_redsys>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## Comparing `odoo_addon_payment_redsys-15.0.1.0.0.3.dist-info/RECORD` & `odoo_addon_payment_redsys-16.0.1.0.0.2.dist-info/RECORD`

 * *Files 16% similar despite different names*

```diff
@@ -1,38 +1,37 @@
-odoo/addons/payment_redsys/README.rst,sha256=CmbsjPHrzybxiYsKHQcBlfDOXfOx0XlraJDCvmQvTE4,5706
+odoo/addons/payment_redsys/README.rst,sha256=Lwq-M3K75j1_ru0er1dxPbf-OwpHO4jUiLuO7lPHmXw,5790
 odoo/addons/payment_redsys/__init__.py,sha256=MAqr9ygjBvC-shFo7c4VFnO93b_8SYg2o5411qKNQyA,114
-odoo/addons/payment_redsys/__manifest__.py,sha256=ogIulYvck_1Outdq9sNPmliJqs3DEW7wSUyxJzOflpQ,659
+odoo/addons/payment_redsys/__manifest__.py,sha256=39gj_pEgpxTKoqIucLms40QoNYLNB1gk8_4KoiJ0Vik,659
 odoo/addons/payment_redsys/controllers/__init__.py,sha256=4KFqEP2QHFbPN66eQJMdGsmNz2v7ywWv_FR1pW_kkLk,19
-odoo/addons/payment_redsys/controllers/main.py,sha256=dT-V23wr8bi4HOoZx4Lzg8B72DP2Sd-jdohqw8vhYQ0,1455
-odoo/addons/payment_redsys/data/payment_redsys.xml,sha256=KGsIzz_RrrIVzy1ocG2NBn2Ao8oEXrhsrSfipfaV1MA,1838
+odoo/addons/payment_redsys/controllers/main.py,sha256=XJuXLHqaKYPARD_yvpnfHx5FDoAag1PaopFqUuoq9yI,1459
+odoo/addons/payment_redsys/data/payment_redsys.xml,sha256=0rCn7g0csx5EK0JM8dwKraInmv08mf7vhMeNp1-vYuI,1564
 odoo/addons/payment_redsys/i18n/bg.po,sha256=L2ckSmrTqEuGmpkhQalyp_Vvk7P0imRzFAZ0Jm852lk,9176
 odoo/addons/payment_redsys/i18n/ca.po,sha256=BcwnNYUsWfrh6A4R-sBVyybGV7q0uYehO7Gjo2aJ8B4,11786
 odoo/addons/payment_redsys/i18n/es.po,sha256=L8W30G0zSqspbD7-yt_WqNxuaPJp1bMlvQluu6EJ81o,13674
 odoo/addons/payment_redsys/i18n/fr.po,sha256=fHqKCIZFdjgzrVEJV4p4QYAEzMmwODmUddGF8K1G5R4,10738
 odoo/addons/payment_redsys/i18n/gl.po,sha256=2MkhKi2Cj5JgRuALgC-6fP5leXi2TWUaLxHrb5uEltg,9558
 odoo/addons/payment_redsys/i18n/hr.po,sha256=vDKnkDQX7u21NvBzIsCyt1suBQF-jk11N3dEmvf0I2I,9132
-odoo/addons/payment_redsys/i18n/payment_redsys.pot,sha256=rvxTdqNSSvoKG0WNFATOdDV1MZXTa484O-4k5MPXHYE,7868
+odoo/addons/payment_redsys/i18n/payment_redsys.pot,sha256=erG7Sbh8h3zgqn3sTf7U5sWm_sF2sS9qRCnMjkg_E0Y,7902
 odoo/addons/payment_redsys/i18n/pt_BR.po,sha256=g5R0g3ynPdehtzZ5gAnGmC04cYRLwHgPzP8xNKyc-es,9210
 odoo/addons/payment_redsys/i18n/sl.po,sha256=tQg_GHfKrsf6iVrpPAumjro6NM7vDll0gt_OzVUwn7E,9247
-odoo/addons/payment_redsys/migrations/15.0.1.0.0/post-migration.py,sha256=7v_cLXeLY_E8APyMf5k9606qeoB4a3hpV50TYfklfSU,463
-odoo/addons/payment_redsys/models/__init__.py,sha256=LAtZoc5_fKGaP1OKnKgs5gJQUIZeFcvQYyMz9_-8zys,102
+odoo/addons/payment_redsys/models/__init__.py,sha256=7yylik5FyZwfyYK4X-mYqsTr-DdfnLvlmjO7a8N5Ffg,102
 odoo/addons/payment_redsys/models/account_payment_method.py,sha256=7H7IARPbdvuuceJLAU8j9zLV_fmaHlhV91h0MBEokHE,463
-odoo/addons/payment_redsys/models/payment_acquirer.py,sha256=XiWW2PpKQkGAbEETr3eiZ8KYG32GUjZ9lmu_hCNZz6A,7962
-odoo/addons/payment_redsys/models/payment_transaction.py,sha256=gCtLR6kxLFxP7X8lFzNlirFhBwZVUa3MmxaEHSPpPEk,5848
+odoo/addons/payment_redsys/models/payment_provider.py,sha256=wHS3udPfteUw5wuzsii_fQ2KZDrwqTvjhWJQx9s5UiM,7955
+odoo/addons/payment_redsys/models/payment_transaction.py,sha256=LBumWVP4PwDVXZS5Qn_JBp7k2S7ixrOX3WyQ828V45c,5784
 odoo/addons/payment_redsys/readme/CONFIGURE.rst,sha256=hgcNc9stNwj1NLIooIKjo04URfuF3Wdkme8g5NqNuFE,1730
-odoo/addons/payment_redsys/readme/CONTRIBUTORS.rst,sha256=JXCawSlMI85y0lZOipaU5bS9cR9Rh15c6LJFRXoafqo,364
+odoo/addons/payment_redsys/readme/CONTRIBUTORS.rst,sha256=UMt0T4VblHmQSeM0PM39SSTT957CVX99j7tcUC3ykY4,448
 odoo/addons/payment_redsys/readme/DESCRIPTION.rst,sha256=Uoz2qz8bqL9U8RQF47ZByyHriPExRD2WMuSTGlMiYc0,190
 odoo/addons/payment_redsys/readme/INSTALL.rst,sha256=231Jd5uq0RvTsuLg3Oq7Eudkq8FE4NY6CNZVNc1ZJyQ,168
 odoo/addons/payment_redsys/readme/ROADMAP.rst,sha256=vxhd_lsfI0q4TKhWGJSqh2lN-PyyzRY232Cv0s-KLs4,621
 odoo/addons/payment_redsys/static/description/icon.png,sha256=FKMauijq0MnKb-myYHqJYo8qQBfTI8knxkZNPy6jFYQ,8505
-odoo/addons/payment_redsys/static/description/index.html,sha256=Cqv5haumRrEdYVDClZHuk8MFwtVxyH46CUtzlOdxm0k,16382
+odoo/addons/payment_redsys/static/description/index.html,sha256=NR1V4srTekucg3IuG8fJpTjVdPosu8GJ79iuvkmcCeg,16608
 odoo/addons/payment_redsys/static/img/bizum.png,sha256=vo645u0qxfcMKi0KFu1uWKnORPpU_BKJKbXvd0gJ99k,4959
 odoo/addons/payment_redsys/static/src/img/redsys_icon.png,sha256=EKecW153lIfEuJOiLDW5_dQbEcKh5oiRmvHEjK26S0Y,11108
 odoo/addons/payment_redsys/tests/__init__.py,sha256=wfskC0_I-bnXIMpvNi4jeCE8flTTMr0C7qzCQcAh-gk,47
-odoo/addons/payment_redsys/tests/common.py,sha256=81_ss2_gmmrCYZvx33PwkNDhEODOU6Sxe-1Tt7xi-mQ,1125
-odoo/addons/payment_redsys/tests/test_redsys.py,sha256=QdeyG78vyWadaq_LIMeyX2RD2DOs0Bi8iZTDTBMxBq8,5910
-odoo/addons/payment_redsys/views/payment_acquirer.xml,sha256=G1SL14XFAQSJqUtuHxcHxZd25ZnU06T5Xn_5WTI8e_U,3088
+odoo/addons/payment_redsys/tests/common.py,sha256=sRL-FwoCBjtU-apQvUsDxS8mhx9abYJP57PbeOlTHio,1063
+odoo/addons/payment_redsys/tests/test_redsys.py,sha256=Ugk70kkuUWcv3zeyp1GMqULPXZQLp4UulLH5Wnhs-Jw,6034
+odoo/addons/payment_redsys/views/payment_provider.xml,sha256=vlPb3to5n4_DrsgijZ-MhmR6m401vRMg5bnFverjVhA,3060
 odoo/addons/payment_redsys/views/payment_redsys_templates.xml,sha256=6JvP5SgoQJ77_fY4-KdQyAaWNmVYMS7Zd7YSurlVoAA,954
-odoo_addon_payment_redsys-15.0.1.0.0.3.dist-info/METADATA,sha256=8t4YKJNJmRLxRuOfbmtL2-pqQRNGHM4qU67BIpARZrc,6283
-odoo_addon_payment_redsys-15.0.1.0.0.3.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo_addon_payment_redsys-15.0.1.0.0.3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_payment_redsys-15.0.1.0.0.3.dist-info/RECORD,,
+odoo_addon_payment_redsys-16.0.1.0.0.2.dist-info/METADATA,sha256=puU5E-hZLsEBjDPe3x0FlJWlRjcUItrqZZxELaue3n0,6368
+odoo_addon_payment_redsys-16.0.1.0.0.2.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo_addon_payment_redsys-16.0.1.0.0.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_payment_redsys-16.0.1.0.0.2.dist-info/RECORD,,
```


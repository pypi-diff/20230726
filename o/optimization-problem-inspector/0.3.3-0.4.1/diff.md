# Comparing `tmp/optimization_problem_inspector-0.3.3-py3-none-any.whl.zip` & `tmp/optimization_problem_inspector-0.4.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,31 +1,31 @@
-Zip file size: 1055393 bytes, number of entries: 29
+Zip file size: 1056994 bytes, number of entries: 29
 -rw-r--r--  2.0 unx       53 b- defN 20-Feb-02 00:00 optimization_problem_inspector/__about__.py
 -rw-r--r--  2.0 unx       31 b- defN 20-Feb-02 00:00 optimization_problem_inspector/__init__.py
--rw-r--r--  2.0 unx    36778 b- defN 20-Feb-02 00:00 optimization_problem_inspector/app.py
--rw-r--r--  2.0 unx     2307 b- defN 20-Feb-02 00:00 optimization_problem_inspector/app_strings.py
--rw-r--r--  2.0 unx     8608 b- defN 20-Feb-02 00:00 optimization_problem_inspector/coco_interface.py
+-rw-r--r--  2.0 unx    43093 b- defN 20-Feb-02 00:00 optimization_problem_inspector/app.py
+-rw-r--r--  2.0 unx     2407 b- defN 20-Feb-02 00:00 optimization_problem_inspector/app_strings.py
+-rw-r--r--  2.0 unx     8648 b- defN 20-Feb-02 00:00 optimization_problem_inspector/coco_interface.py
 -rw-r--r--  2.0 unx     1608 b- defN 20-Feb-02 00:00 optimization_problem_inspector/config.py
 -rw-r--r--  2.0 unx      116 b- defN 20-Feb-02 00:00 optimization_problem_inspector/errors.py
--rw-r--r--  2.0 unx    15342 b- defN 20-Feb-02 00:00 optimization_problem_inspector/features.py
+-rw-r--r--  2.0 unx    15434 b- defN 20-Feb-02 00:00 optimization_problem_inspector/features.py
 -rw-r--r--  2.0 unx      259 b- defN 20-Feb-02 00:00 optimization_problem_inspector/logger.py
 -rw-r--r--  2.0 unx     4836 b- defN 20-Feb-02 00:00 optimization_problem_inspector/models.py
--rw-r--r--  2.0 unx    19332 b- defN 20-Feb-02 00:00 optimization_problem_inspector/problem.py
--rw-r--r--  2.0 unx     9459 b- defN 20-Feb-02 00:00 optimization_problem_inspector/sampling.py
+-rw-r--r--  2.0 unx    19559 b- defN 20-Feb-02 00:00 optimization_problem_inspector/problem.py
+-rw-r--r--  2.0 unx    12174 b- defN 20-Feb-02 00:00 optimization_problem_inspector/sampling.py
 -rw-r--r--  2.0 unx     4925 b- defN 20-Feb-02 00:00 optimization_problem_inspector/serialization.py
 -rw-r--r--  2.0 unx       86 b- defN 20-Feb-02 00:00 optimization_problem_inspector/assets/gui-help.md
 -rw-r--r--  2.0 unx      578 b- defN 20-Feb-02 00:00 optimization_problem_inspector/assets/typography.css
 -rw-r--r--  2.0 unx       59 b- defN 20-Feb-02 00:00 optimization_problem_inspector/bbob_functions/__init__.py
 -rw-r--r--  2.0 unx   952012 b- defN 20-Feb-02 00:00 optimization_problem_inspector/bbob_functions/bbob_functions.c
 -rwxr-xr-x  2.0 unx  1580320 b- defN 20-Feb-02 00:00 optimization_problem_inspector/bbob_functions/bbob_functions.cpython-310-x86_64-linux-gnu.so
 -rwxr-xr-x  2.0 unx  1580168 b- defN 20-Feb-02 00:00 optimization_problem_inspector/bbob_functions/bbob_functions.cpython-311-x86_64-linux-gnu.so
 -rw-r--r--  2.0 unx     5312 b- defN 20-Feb-02 00:00 optimization_problem_inspector/bbob_functions/bbob_functions.pyx
 -rw-r--r--  2.0 unx  1452355 b- defN 20-Feb-02 00:00 optimization_problem_inspector/bbob_functions/coco.c
 -rw-r--r--  2.0 unx    20789 b- defN 20-Feb-02 00:00 optimization_problem_inspector/bbob_functions/coco.h
 -rw-r--r--  2.0 unx      793 b- defN 20-Feb-02 00:00 optimization_problem_inspector/bbob_functions/exceptions.py
 -rw-r--r--  2.0 unx      317 b- defN 20-Feb-02 00:00 optimization_problem_inspector/bbob_functions/install_bbob_functions.py
-?rw-r--r--  2.0 unx     4140 b- defN 20-Feb-02 00:00 optimization_problem_inspector-0.3.3.dist-info/METADATA
-?rw-r--r--  2.0 unx       87 b- defN 20-Feb-02 00:00 optimization_problem_inspector-0.3.3.dist-info/WHEEL
-?rw-r--r--  2.0 unx       68 b- defN 20-Feb-02 00:00 optimization_problem_inspector-0.3.3.dist-info/entry_points.txt
-?rw-r--r--  2.0 unx     1157 b- defN 20-Feb-02 00:00 optimization_problem_inspector-0.3.3.dist-info/licenses/LICENSE.txt
-?rw-r--r--  2.0 unx     3136 b- defN 20-Feb-02 00:00 optimization_problem_inspector-0.3.3.dist-info/RECORD
-29 files, 5705031 bytes uncompressed, 1050089 bytes compressed:  81.6%
+?rw-r--r--  2.0 unx     4140 b- defN 20-Feb-02 00:00 optimization_problem_inspector-0.4.1.dist-info/METADATA
+?rw-r--r--  2.0 unx       87 b- defN 20-Feb-02 00:00 optimization_problem_inspector-0.4.1.dist-info/WHEEL
+?rw-r--r--  2.0 unx       68 b- defN 20-Feb-02 00:00 optimization_problem_inspector-0.4.1.dist-info/entry_points.txt
+?rw-r--r--  2.0 unx     1157 b- defN 20-Feb-02 00:00 optimization_problem_inspector-0.4.1.dist-info/licenses/LICENSE.txt
+?rw-r--r--  2.0 unx     3137 b- defN 20-Feb-02 00:00 optimization_problem_inspector-0.4.1.dist-info/RECORD
+29 files, 5714521 bytes uncompressed, 1051690 bytes compressed:  81.6%
```

## zipnote {}

```diff
@@ -66,23 +66,23 @@
 
 Filename: optimization_problem_inspector/bbob_functions/exceptions.py
 Comment: 
 
 Filename: optimization_problem_inspector/bbob_functions/install_bbob_functions.py
 Comment: 
 
-Filename: optimization_problem_inspector-0.3.3.dist-info/METADATA
+Filename: optimization_problem_inspector-0.4.1.dist-info/METADATA
 Comment: 
 
-Filename: optimization_problem_inspector-0.3.3.dist-info/WHEEL
+Filename: optimization_problem_inspector-0.4.1.dist-info/WHEEL
 Comment: 
 
-Filename: optimization_problem_inspector-0.3.3.dist-info/entry_points.txt
+Filename: optimization_problem_inspector-0.4.1.dist-info/entry_points.txt
 Comment: 
 
-Filename: optimization_problem_inspector-0.3.3.dist-info/licenses/LICENSE.txt
+Filename: optimization_problem_inspector-0.4.1.dist-info/licenses/LICENSE.txt
 Comment: 
 
-Filename: optimization_problem_inspector-0.3.3.dist-info/RECORD
+Filename: optimization_problem_inspector-0.4.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## optimization_problem_inspector/__about__.py

```diff
@@ -1,2 +1,2 @@
 # SPDX-License-Identifier: MIT
-__version__ = '0.3.3'
+__version__ = '0.4.1'
```

## optimization_problem_inspector/app.py

```diff
@@ -2,28 +2,31 @@
 # visit http://127.0.0.1:8050/ in your web browser.
 
 # TODO: in need of refactoring
 
 import base64
 import datetime
 import io
+import warnings
 from pathlib import Path
 from time import time
 
 import dash_bootstrap_components as dbc
 import pandas as pd
 import plotly.express as px
 import plotly.graph_objects as go
 import yaml
 from dash import Dash, dash_table, dcc, html
 from dash.dependencies import Input, Output, State
 from dash.development.base_component import Component
+from dash.exceptions import PreventUpdate
 
 from optimization_problem_inspector import (
     features,
+    models,
     problem,
     sampling,
     serialization,
 )
 from optimization_problem_inspector.app_strings import (
     REFERENCE_BBOB_NAMES,
     TEXT,
@@ -126,20 +129,27 @@
         help_text = f.read()
 
     return help_text.format(
         APP_NAME=TEXT.APP_NAME,
     )
 
 
+def validate_data_is_ok(memory_store):
+    memory_store = memory_store or {}
+    if memory_store.get("data-error"):
+        raise PreventUpdate
+
+
 app = Dash(
     __name__, title=TEXT.APP_NAME, external_stylesheets=[dbc.themes.BOOTSTRAP]
 )
 
 app.layout = html.Div(
     children=[
+        dcc.Store(id="memory-store"),
         html.Div(
             children=[
                 html.H1(children=TEXT.APP_NAME),
             ],
             style={
                 "margin": "10px",
             },
@@ -355,14 +365,18 @@
                         f.__name__
                         for f in features.FEATURES_LIST
                         if not (
                             f.__name__.endswith("_N") or "neigh" in f.__name__
                         )
                     ],
                 ),
+                dbc.Button(
+                    TEXT.SEC_REF_FEATURES_PLOT,
+                    id="btn-reference-plot",
+                ),
                 dcc.Loading(
                     id="reference-container-loading",
                     children=[
                         html.Div(
                             [
                                 html.Div(id="reference-container"),
                             ],
@@ -390,18 +404,42 @@
                             id="visualization-method-select",
                         ),
                         dbc.Label(TEXT.SEC_VIZUALIZATION_DIMENSION_SELECT),
                         dcc.Dropdown(
                             id="visualization-plot-options-columns",
                             multi=True,
                         ),
-                        dbc.Label(TEXT.SEC_VIZUALIZATION_COLOR_SELECT),
-                        dcc.Dropdown(
-                            id="visualization-plot-options-color",
-                            multi=False,
+                        dbc.Accordion(
+                            [
+                                dbc.AccordionItem(
+                                    [
+                                        html.Pre(
+                                            html.Code(
+                                                dcc.Textarea(
+                                                    id="vizualization-plot-specifications",  # noqa
+                                                    value="",
+                                                    style={
+                                                        "width": "100%",
+                                                        "height": 300,
+                                                    },
+                                                ),
+                                            )
+                                        )
+                                    ],
+                                    title=TEXT.SEC_VIZUALIZATION_SPECIFICATION,
+                                ),
+                            ],
+                            start_collapsed=False,
+                            style={
+                                "margin-top": "10px",
+                            },
+                        ),
+                        dbc.Button(
+                            TEXT.SEC_VIZUALIZATION_PLOT,
+                            id="btn-vizualization-plot",
                         ),
                         dcc.Loading(
                             id="visualization-container-loading",
                             children=[
                                 html.Div(
                                     [
                                         html.Div(id="visualization-container"),
@@ -513,39 +551,70 @@
 
     with io.StringIO(decoded) as f:
         serialization.load_spec(f)
 
     return (children, decoded)
 
 
+def validate_data_df(data_df: pd.DataFrame, specs: models.Spec):
+    variables = []
+    constraints = []
+    objectives = []
+    for param in specs.dataSpec.parameters:
+        if param.name not in data_df.columns:
+            continue
+        if param.parameterGroup == models.ParameterGroup.VARIABLES:
+            variables.append(param.name)
+        elif param.parameterGroup == models.ParameterGroup.CONSTRAINTS:
+            constraints.append(param.name)
+        elif param.parameterGroup == models.ParameterGroup.OBJECTIVES:
+            objectives.append(param.name)
+
+    is_valid = True
+
+    distinct_vars = data_df[variables].drop_duplicates().shape[0]
+    not_stables = []
+    for stable in constraints + objectives:
+        distinct_stables = (
+            data_df[variables + [stable]].drop_duplicates().shape[0]
+        )
+        if distinct_stables != distinct_vars:
+            not_stables.append(stable)
+            is_valid = False
+
+    return is_valid, {"not_stable_columns": not_stables}
+
+
 @app.callback(
     Output("data-table", "data"),
     Output("data-table", "columns"),
     Output("upload-data-alerting", "children"),
     Output("reference-container-alerting", "children"),
-    Input("upload-problem-spec", "contents"),
+    Output("memory-store", "data"),
+    Input("problem-specification", "data"),
     Input("upload-data", "contents"),
     Input("sample-generation-N-select", "value"),
     Input("sample-generation-method-select", "value"),
     Input("sampling-parameters", "value"),
+    State("memory-store", "data"),
 )
 @logg_function_call
 def update_data_in_problem_data_table(
     spec_contents,
     data_contents,
     sample_n,
     sample_method_name,
     sampling_parameters_dump,
+    memory_store,
 ):
+    memory_store = memory_store or {}
     if spec_contents is None:
         specs = DEFAULT_PROBLEM.spec
     else:
-        _, spec_content_string = spec_contents.split(",")
-        spec_decoded = base64.b64decode(spec_content_string).decode("utf-8")
-        with io.StringIO(spec_decoded) as f:
+        with io.StringIO(spec_contents) as f:
             specs = serialization.load_spec(f)
     spec_columns = specs.get_columns()
     sampling_parameters = load_sampling_parameters(sampling_parameters_dump)
 
     df = None
     if data_contents is None:
         sample_generation_method = getattr(sampling, sample_method_name)
@@ -560,32 +629,60 @@
         _, content_string = data_contents.split(",")
         decoded = base64.b64decode(content_string).decode("utf-8")
         with io.StringIO(decoded) as f:
             df = pd.read_csv(f)
             df_columns = [c for c in spec_columns if c in df.columns]
             df = df[df_columns]
 
-    alert_div = None
+    alert_div = []
+    data_error = False
     if df is not None:
         if df.columns.to_list() != spec_columns:
             msg = f"Mismatch {df.columns.to_list() = } <> {spec_columns = }"
-            alert_div = dbc.Alert(
-                msg,
-                color="danger",
+            alert_div.append(
+                dbc.Alert(
+                    msg,
+                    color="danger",
+                )
             )
             logger.warning(msg)
+            data_error = True
+        data_is_valid, data_error_dict = validate_data_df(df, specs)
+        if not data_is_valid:
+            variable_names = [
+                c.name
+                for c in specs.dataSpec.parameters
+                if c.parameterGroup == models.ParameterGroup.VARIABLES
+                and c.name in df.columns
+            ]
+            msg_validation = (
+                "The following columns are not stable (for the same input"
+                ", different value was produced):"
+                f"{data_error_dict['not_stable_columns']}"
+                " Duplicated variables will be dropped from further analysis."
+            )
+            alert_div.append(
+                dbc.Alert(
+                    msg_validation,
+                    color="danger",
+                )
+            )
+            logger.warning(msg_validation)
+            df.drop_duplicates(subset=variable_names, inplace=True, keep=False)
         logger.debug(df.to_csv(index=False))
+        memory_store["data-error"] = data_error
         return (
             df.to_dict("records"),
             [{"name": i, "id": i} for i in df.columns],
             alert_div,
             alert_div,
+            memory_store,
         )
     else:
-        return None, None, None, None
+        return None, None, None, None, memory_store
 
 
 @app.callback(
     Output("download-text", "data"),
     Input("btn-download-txt", "n_clicks"),
     State("sample-generation-N-select", "value"),
     State("sample-generation-method-select", "value"),
@@ -620,17 +717,18 @@
     sample = sample[[c for c in spec_columns if c in sample.columns]]
     return dict(content=sample.to_csv(index=False), filename="data.csv")
 
 
 @app.callback(
     Output("reference-problem-definitions", "value"),
     Input("problem-specification", "data"),
+    State("memory-store", "data"),
 )
 @logg_function_call
-def update_reference_problem_specs(problem_spec):
+def update_reference_problem_specs(problem_spec, memory_store):
     objs = problem_spec.count("OBJECTIVES")
     dims = problem_spec.count("VARIABLES")
     constraints = problem_spec.count("CONSTRAINTS")
     ref_problems = problem.ReferenceProblemsGBBOB.from_simple_input(
         dimensions=dims, objectives=objs, constraints=constraints
     )
     ref_problems_dump = ref_problems.dumps()
@@ -673,53 +771,61 @@
         logger.warning(f"{extra = }")
         raise ValueError(f"Unknown features defined: {extra}")
     return feature_parameters
 
 
 @app.callback(
     Output("reference-container", "children"),
-    Input("data-table", "data"),
-    Input("reference-problem-definitions", "value"),
-    Input("features-parameters", "value"),
+    Input("btn-reference-plot", "n_clicks"),
+    State("data-table", "data"),
+    State("reference-problem-definitions", "value"),
+    State("features-parameters", "value"),
     State("problem-specification", "data"),
     State("sample-generation-N-select", "value"),
     State("sample-generation-method-select", "value"),
     State("sampling-parameters", "value"),
-    Input("reference-feature-selection", "value"),
+    State("reference-feature-selection", "value"),
+    State("memory-store", "data"),
+    prevent_initial_call=True,
 )
 @logg_function_call
 def update_reference_problems_and_features(
+    n_clicks,
     problem_data,
     ref_problem_definitions,
     feature_parameters_dump,
     problem_spec,
     n,
     sample_method_name,
     sampling_parameters_dump,
     feature_list_names,
+    memory_store,
 ):
+    validate_data_is_ok(memory_store)
     features_to_use = [getattr(features, f) for f in feature_list_names]
     df = pd.DataFrame(problem_data)
     logger.debug(f"{df.shape = }")
     try:
-        spec = serialization.load_spec(problem_spec)
+        with io.StringIO(problem_spec) as f:
+            spec = serialization.load_spec(f)
     except Exception as e:
         raise ValueError(
             f"Could not load specification because {type(e).__name__}: {e}."
             " Is the specification format correct?"
         )
     try:
         ref_problems = problem.ReferenceProblemsGBBOB.loads(
             ref_problem_definitions
         )
     except Exception as e:
         raise ValueError(
             "Could not load reference problems because"
             f" {type(e).__name__}: {e}. Is the specification format correct?"
         )
+    logger.info(f"{ref_problems = }")
     feature_parameters = load_feature_parameters(feature_parameters_dump)
 
     this_data_feature_makers = []
     for feature_to_use in features_to_use:
         ff_params = feature_parameters.get(feature_to_use.__name__)
         if ff_params is None:
             ff_params = {}
@@ -742,14 +848,15 @@
         sample_generation_method
     )
     samples = ref_problems.get_problem_samples(
         sample_generation_method, N=n, sampler_kwargs=selected_sampling_params
     )
 
     def get_function_index(problem):
+        return problem.name
         try:
             fi = int(problem.name.split("__")[-1].replace("fi_", ""))
             logger.info(f"{problem.name = } -> {fi}")
             return fi
         except ValueError:
             for i in range(24):
                 if f"f{i}_" in problem.name:
@@ -984,23 +1091,23 @@
         get_data_download_button(rows_data_long, data_id="reference-values"),
     ]
 
 
 @app.callback(
     Output("visualization-plot-options-columns", "options"),
     Output("visualization-plot-options-columns", "value"),
-    Output("visualization-plot-options-color", "options"),
-    Output("visualization-plot-options-color", "value"),
     Input("data-table", "data"),
+    Input("memory-store", "data"),
 )
 @logg_function_call
-def update_plot_options_columns(problem_data):
+def update_plot_options_columns(problem_data, memory_store):
+    # validate_data_is_ok(memory_store)
     df = pd.DataFrame(problem_data)
     values = df.columns.to_list()
-    return values, values, values, values[-1]
+    return values, values
 
 
 def get_html_figure_encoded(fig: go.Figure) -> str:
     """Generate base64 encoded html export of the plotly figure.
 
     We need this so we can inline the whole html document in the button link.
 
@@ -1053,42 +1160,124 @@
         id=fig_id,
         href="data:text/html;base64," + get_html_figure_encoded(fig=fig),
         download=f"plotly_graph_{fig_id}.html",
     )
 
 
 @app.callback(
-    Output("visualization-container", "children"),
-    Input("visualization-method-select", "value"),
+    Output("vizualization-plot-specifications", "value"),
     Input("data-table", "data"),
-    Input("visualization-plot-options-columns", "value"),
-    Input("visualization-plot-options-color", "value"),
+    Input("memory-store", "data"),
+)
+def update_plot_specifications(problem_data, memory_store):
+    # validate_data_is_ok(memory_store)
+
+    if problem_data is None:
+        raise PreventUpdate
+
+    df = pd.DataFrame(problem_data)
+    last_column = df.columns[-1]
+    return f"""
+# This is an example of a plot specification.
+# You can edit this file to change the plot.
+bounds:
+    {last_column}:
+        min: {df[last_column].min()}
+        max: {df[last_column].max()}
+display:
+    color-dimension: {last_column}
+    z-order:
+        dimension: {last_column}
+        ascending: true
+    color-map: plasma
+
+    """
+
+
+def apply_bounds(df, vizualization_specs):
+    bounds = vizualization_specs.get("bounds", {})
+    masks = []
+    for column, bounds_spec in bounds.items():
+        masks.append(
+            (df[column] >= float(bounds_spec["min"]))
+            & (df[column] <= float(bounds_spec["max"]))
+        )
+    if masks:
+        mask = masks[0]
+        for m in masks[1:]:
+            mask = mask & m
+        return df[mask]
+    return df
+
+
+@app.callback(
+    Output("visualization-container", "children"),
+    Input("btn-vizualization-plot", "n_clicks"),
+    State("visualization-method-select", "value"),
+    State("data-table", "data"),
+    State("visualization-plot-options-columns", "value"),
+    State("vizualization-plot-specifications", "value"),
+    State("memory-store", "data"),
 )
 def update_plot(
-    plot_method, problem_data, visualization_plot_options_columns, color_column
+    n_clicks,
+    plot_method,
+    problem_data,
+    visualization_plot_options_columns,
+    vizualization_specs_dump,
+    memory_store,
 ):
+    validate_data_is_ok(memory_store)
+    if plot_method is None or visualization_plot_options_columns is None:
+        raise PreventUpdate
+
+    with io.StringIO(vizualization_specs_dump) as f:
+        vizualization_specs = yaml.safe_load(f)
+
+    logger.debug(vizualization_specs)
+
     logger.debug(f"{plot_method = }")
     df = pd.DataFrame(problem_data)
     ordered_columns = [
         c for c in df.columns if c in visualization_plot_options_columns
     ]
     logger.debug(f"{df.shape = }")
     if plot_method == "parallel_coordinates":
         fig_height = PLOT_HEIGHT_STATIC_DEFAULT
     else:
         fig_height = (
             len(ordered_columns) * PLOT_HEIGHT_MULTIPLIER + PLOT_MARGIN
         )
+    fig_width = len(ordered_columns) * PLOT_WIDTH_MULTIPLIER + PLOT_MARGIN
+    logger.info(f"{fig_height = }, {fig_width = }")
     plot_method = getattr(px, plot_method)
+    df_to_plot = apply_bounds(df, vizualization_specs)
+    z_order_ascending = (
+        vizualization_specs.get("display", {})
+        .get("z-order", {})
+        .get("ascending", True)
+    )
+    df_to_plot.sort_values(
+        by=vizualization_specs.get("display", {})
+        .get("z-order", {})
+        .get("dimension", ""),
+        inplace=True,
+        ascending=z_order_ascending,
+        na_position="first",
+    )
+
     fig = plot_method(
-        df,
+        df_to_plot,
         dimensions=ordered_columns,
-        width=len(ordered_columns) * PLOT_WIDTH_MULTIPLIER + PLOT_MARGIN,
+        width=fig_width,
         height=fig_height,
-        color=color_column,
+        color=vizualization_specs.get("display", {}).get("color-dimension"),
+        color_continuous_scale=vizualization_specs.get("display", {}).get(
+            "color-map"
+        ),
     )
 
     return [
         dcc.Graph(figure=fig),
         generate_download_button(fig=fig, fig_id="visualize-data"),
     ]
 
@@ -1101,12 +1290,13 @@
     app.run_server(
         host="0.0.0.0",
         debug=True,
     )
 
 
 if __name__ == "__main__":
+    warnings.filterwarnings("ignore")  # setting ignore as a parameter
     while True:
         try:
             main()
         except KeyboardInterrupt:
             raise
```

## optimization_problem_inspector/app_strings.py

```diff
@@ -36,23 +36,25 @@
         " may not be as expected."
     )
     SAMPLE_GENERATION_BUTTON = "Generate sample and download"
     SEC_DATA = "Data"
     SEC_REFERENCE_PROBLEMS = "Compare to Reference Problems"
     SEC_REF_FEATURES_SELECT = "Features to compute"
     SEC_REF_FEATURES_PARAMETERS = "Features parameters"
+    SEC_REF_FEATURES_PLOT = "Compute and visualize features"
     REF_PROBLEM_TABLE_NAME = "Feature values table"
     REF_PROBLEM_THIS_PROBLEM_NAME = "This problem"
     REF_PROBLEM_DEFINITIONS_LABEL = "Reference problem definitions"
     REF_PROBLEM_TABLE_PROBLEM_NAME = "Problem name"
     REF_PROBLEM_TABLE_FEATURE_NAME = "Feature name"
     REF_PROBLEM_TABLE_FEATURE_VALUE = "Feature value"
     SEC_VIZUALIZATION = "Visualization of Data"
     SEC_VIZUALIZATION_DIMENSION_SELECT = "Dimensions to plot"
-    SEC_VIZUALIZATION_COLOR_SELECT = "Color dimension"
+    SEC_VIZUALIZATION_SPECIFICATION = "Plot options"
+    SEC_VIZUALIZATION_PLOT = "Visualize"
     SEC_HELP = "Help"
     FOOTNOTE = (
         "Optimization Problem Inspector, &copy;"
         ' "Jožef Stefan" Institute,'
         "Department of Intelligent Systems, 2023"
     )
     DRAG_AND_DROP_OR_SELECT_FILES = "Drag and Drop or Select Files"
```

## optimization_problem_inspector/coco_interface.py

```diff
@@ -1,7 +1,9 @@
+from typing import Optional
+
 import numpy as np
 
 from optimization_problem_inspector.bbob_functions import BenchmarkFunction
 
 
 class GBBOB:
     """A General BBOB problem with any number of variables and objectives and either without constraints or with one
@@ -31,22 +33,22 @@
     :param feas_n_samples: Number of samples used to determine the degree of feasibility for the inequality constraint.
     """  # noqa E501
 
     def __init__(
         self,
         n_var: int,
         objs: list,
-        ineq_const: list | None = None,
+        ineq_const: Optional[list] = None,
         feas_degree: float = 0.5,
         feas_n_samples: int = 100,
     ):
         def _check_func_inst(
             func_inst: list,
-            min_len: int | None = None,
-            max_len: int | None = None,
+            min_len: Optional[list] = None,
+            max_len: Optional[list] = None,
         ):
             if min_len is not None and len(func_inst) < min_len:
                 raise ValueError(
                     f"The list of function instances {func_inst}"
                     f" must contain at least {min_len} items."
                 )
             if max_len is not None and len(func_inst) > max_len:
```

## optimization_problem_inspector/features.py

```diff
@@ -394,14 +394,15 @@
 
         df2 = df[self.objectives]
         df2["constr"] = df[self.constraints].sum(axis=1)
 
         corrs = df2.corr()
 
         feats["corr_cobj_min"] = corrs["constr"].min()
+        np.fill_diagonal(corrs.values, -2)
         feats["corr_cobj_max"] = corrs["constr"].max()
 
         return feats
 
 
 class H_MAX(OPIFeature):
     def __init__(
@@ -426,18 +427,19 @@
                 models.ParameterReal,
                 models.ParameterInt,
             ),
         }
 
     def compute(self, df: pd.DataFrame, **kwargs) -> Dict[str, float]:
         feats = {}
-
         for obj in self.objectives:
             feats["h_max_" + obj] = calculate_information_content(
-                df[self.variables], df[obj]
+                df[self.variables],
+                df[obj],
+                ic_sorting="nn",
             )["ic.h_max"]
         return feats
 
 
 def OPIFeatureFactory(
     opi_feature: Type[OPIFeature],
     problem_spec: models.Spec,
```

## optimization_problem_inspector/problem.py

```diff
@@ -453,14 +453,21 @@
         """
         self.gbbob_definitions = gbbob_definitions
         self.problem_factories = [
             GBBOBProblemFactory(gbbob_definition=gbbob_definition)
             for gbbob_definition in gbbob_definitions.gbbob_definitions
         ]
 
+    def __repr__(self) -> str:
+        problems = [pf.name for pf in self.problem_factories]
+        return f"ReferenceProblemsGBBOB(problem_factories={problems})"
+
+    def __str__(self) -> str:
+        return self.__repr__()
+
     def get_problem_samples(
         self,
         sampler: Type[OPISampler],
         N: int,
         sampler_kwargs: Optional[Dict] = None,
     ) -> List[ProblemData]:
         """Get problem samples for each GBBOB problem within the
```

## optimization_problem_inspector/sampling.py

```diff
@@ -127,77 +127,159 @@
 
 
 class SobolSampler(OPISampler):
     """Sampling method for real-type variables."""
 
     def __init__(
         self,
-        real_variables: List[Tuple[str, float, float]],
+        real_variables: List[Tuple[str, float, float, float]],
+        integer_variables: List[Tuple[str, int, int, int]],
         random_seed: Optional[int] = None,
         *args,
         **kwargs,
     ) -> None:
         """Use sampling from scipy.stats.qmc.Sobol to generate real-type
         samples.
 
         Args:
             real_variables (List[Tuple[str, float, float, float]]):
                 List of real variables (name, start, end, step).
+            integer_variables (List[Tuple[str, int, int, int]]):
+                List of integer variables (name, start, end, step).
             random_seed (Optional[int], optional): The random seed to set
                 before sampling. Defaults to None.
         """
         self.real_variables = (
             real_variables if real_variables is not None else []
         )
-        self.random_seed = random_seed
+        self.integer_variables = (
+            integer_variables if integer_variables is not None else []
+        )
 
     def sample(self, N: int, **kwargs) -> pd.DataFrame:
-        self.reset_random_seed()
-        sampler = sampler = qmc.Sobol(d=len(self.real_variables))
+        sampler = qmc.Sobol(
+            d=len(self.real_variables) + len(self.integer_variables)
+        )
         sample = sampler.random(n=N)
 
-        res = pd.DataFrame(sample, columns=[x[0] for x in self.real_variables])
+        res = pd.DataFrame(
+            sample,
+            columns=[
+                x[0] for x in self.real_variables + self.integer_variables
+            ],
+        )
 
         for var in self.real_variables:
-            res[var[0]] = res[var[0]] * (var[2] - var[1]) + var[1]
+            if var[3] is None:
+                res[var[0]] = res[var[0]] * (var[2] - var[1]) + var[1]
+            else:
+                res[var[0]] = (
+                    round(
+                        (
+                            res[var[0]] * (var[2] - var[1] + var[3])
+                            + var[1]
+                            - var[3] / 2
+                        )
+                        / var[3]
+                    )
+                    * var[3]
+                )
+
+        for var in self.integer_variables:
+            if var[3] is None:
+                res[var[0]] = round(res[var[0]] * (var[2] - var[1]) + var[1])
+            else:
+                res[var[0]] = (
+                    round(
+                        (
+                            res[var[0]] * (var[2] - var[1] + var[3])
+                            + var[1]
+                            - var[3] / 2
+                        )
+                        / var[3]
+                    )
+                    * var[3]
+                )
 
         return res
 
 
 class LHSSampler(OPISampler):
     def __init__(
         self,
         real_variables: List[Tuple[str, float, float]],
+        integer_variables: List[Tuple[str, int, int, int]],
         random_seed: Optional[int] = None,
         *args,
         **kwargs,
     ) -> None:
         """Use sampling from scipy.stats.qmc.LatinHypercube to
         generate real-type samples.
 
         Args:
             real_variables (List[Tuple[str, float, float, float]]):
                 List of real variables (name, start, end, step).
+            integer_variables (List[Tuple[str, int, int, int]]):
+                List of integer variables (name, start, end, step).
             random_seed (Optional[int], optional): The random seed to set
                 before sampling. Defaults to None.
         """
         self.real_variables = (
             real_variables if real_variables is not None else []
         )
+        self.integer_variables = (
+            integer_variables if integer_variables is not None else []
+        )
         self.random_seed = random_seed
 
     def sample(self, N: int, **kwargs) -> pd.DataFrame:
         self.reset_random_seed()
-        sampler = qmc.LatinHypercube(d=len(self.real_variables))
+        sampler = qmc.LatinHypercube(
+            d=len(self.real_variables) + len(self.integer_variables)
+        )
         sample = sampler.random(n=N)
 
-        res = pd.DataFrame(sample, columns=[x[0] for x in self.real_variables])
+        res = pd.DataFrame(
+            sample,
+            columns=[
+                x[0] for x in self.real_variables + self.integer_variables
+            ],
+        )
 
         for var in self.real_variables:
-            res[var[0]] = res[var[0]] * (var[2] - var[1]) + var[1]
+            if var[3] is None:
+                res[var[0]] = res[var[0]] * (var[2] - var[1]) + var[1]
+            else:
+                res[var[0]] = (
+                    round(
+                        (
+                            res[var[0]] * (var[2] - var[1] + var[3])
+                            + var[1]
+                            - var[3] / 2
+                        )
+                        / var[3]
+                    )
+                    * var[3]
+                )
+
+        for var in self.integer_variables:
+            if var[3] is None:
+                res[var[0]] = round(res[var[0]] * (var[2] - var[1]) + var[1])
+            else:
+                res[var[0]] = (
+                    round(
+                        (
+                            res[var[0]] * (var[2] - var[1] + var[3])
+                            + var[1]
+                            - var[3] / 2
+                        )
+                        / var[3]
+                    )
+                    * var[3]
+                )
 
         return res
 
 
 def OPISamplerFactory(
     opi_sampler: Type[OPISampler],
     problem_spec: models.Spec,
```

## Comparing `optimization_problem_inspector-0.3.3.dist-info/METADATA` & `optimization_problem_inspector-0.4.1.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: optimization-problem-inspector
-Version: 0.3.3
+Version: 0.4.1
 Summary: A tool for analysis of industrial optimization problems and their solutions
 Project-URL: Documentation, https://github.com/unknown/optimization-problem-inspector#readme
 Project-URL: Issues, https://github.com/unknown/optimization-problem-inspector/issues
 Project-URL: Source, https://github.com/unknown/optimization-problem-inspector
 Author-email: Jernej Zupančič <88.jernej@gmail.com>
 License-Expression: MIT
 License-File: LICENSE.txt
```

## Comparing `optimization_problem_inspector-0.3.3.dist-info/licenses/LICENSE.txt` & `optimization_problem_inspector-0.4.1.dist-info/licenses/LICENSE.txt`

 * *Files identical despite different names*

## Comparing `optimization_problem_inspector-0.3.3.dist-info/RECORD` & `optimization_problem_inspector-0.4.1.dist-info/RECORD`

 * *Files 8% similar despite different names*

```diff
@@ -1,29 +1,29 @@
-optimization_problem_inspector/__about__.py,sha256=yYN3Z3zy7T_cLgChPU3Hsx3MR8jDpbHPEkgzh8lynFY,53
+optimization_problem_inspector/__about__.py,sha256=ivcvsWhUELos3IiKckbsisuKY1AFl9ImOI0CmtH0AMw,53
 optimization_problem_inspector/__init__.py,sha256=W-Iw-hOna0MxXOaE4ehJxxBNt6owr2n32RFEtLZl4tM,31
-optimization_problem_inspector/app.py,sha256=eH2vBLVY-raRDZJgjvr5ZfOoVX1UHxRUzpLUaavso0c,36778
-optimization_problem_inspector/app_strings.py,sha256=qTYAKB01ZSjbYVOEHCNso2jrHp2IeE14s7D9hLA72Wk,2307
-optimization_problem_inspector/coco_interface.py,sha256=h4z2vEDj8SwALlb3tz5_Ri4Flc76nT2_N4b2KXA27lE,8608
+optimization_problem_inspector/app.py,sha256=cCEoGqxr3gcJJhT8kD3oBV14yipdRqDwRlYa9hjPUJQ,43093
+optimization_problem_inspector/app_strings.py,sha256=5F8a3_nUAY0YjmQNaLFbPAm2NvmvkVQZTw34MGR2Bic,2407
+optimization_problem_inspector/coco_interface.py,sha256=24z583pbTCn93Abab_pJ18oCeU2C-raxg-jX2bDFlpg,8648
 optimization_problem_inspector/config.py,sha256=dSQ99a4en6xDZELCDsa8_ewlVqQQuuilwfa-dqxzC00,1608
 optimization_problem_inspector/errors.py,sha256=r2RHeO9B5edBo8LHUMohLdB_HE_jNjAAvfkRcXE_KAw,116
-optimization_problem_inspector/features.py,sha256=-lOlZIMhh0ridtVwcFStZHf37Okow7_1iKCZi1f9cPg,15342
+optimization_problem_inspector/features.py,sha256=xsumHkShkYIkhT4SjZlAF40lt0VihUWsWDxFuwS_VNY,15434
 optimization_problem_inspector/logger.py,sha256=Sp4yYifCT9YLdJIPn8lFaDmZoIbGFo45b21cLsNI4Lw,259
 optimization_problem_inspector/models.py,sha256=zJesjXbpYxw4nT0lsUPpXzXXwqFlDy1kXAUmraCmk3k,4836
-optimization_problem_inspector/problem.py,sha256=Bno_xSKpfEi4TesDO_VJ5pZpfnnRhTaOWk-13LW0i9E,19332
-optimization_problem_inspector/sampling.py,sha256=NfLfh1EHuTYBQVEK4IRiFvDQh-spnZTG2QKltYEG4yI,9459
+optimization_problem_inspector/problem.py,sha256=m8xGkYj8pz2hQhwh2AmAaliV1lKFuNGfIEHDyCgkXQY,19559
+optimization_problem_inspector/sampling.py,sha256=pfYesOqrcIzlBPPCTU8lmkwyqMiNLUp4TYZk9Gb3C3s,12174
 optimization_problem_inspector/serialization.py,sha256=QUraACAkt2HPpVoDQuoiaDfFDLlHhlEWozVRgaldMwI,4925
 optimization_problem_inspector/assets/gui-help.md,sha256=V1e1bEYqx48qhYnlxnqtMpAfKPLGxMty_Yye5KXCCnQ,86
 optimization_problem_inspector/assets/typography.css,sha256=JIrxZjJIZl8VySS-ao-HdCcZDpfeU9H1j87zQh6Moyw,578
 optimization_problem_inspector/bbob_functions/__init__.py,sha256=gNf69OBEtZ5TqL8VfZ6iHB9TGb55kEnip7YwTbpdsxU,59
 optimization_problem_inspector/bbob_functions/bbob_functions.c,sha256=3FEJWd53jMYmoKPoYfEkXYjWiALzGaw4p5Iuf5QScB4,952012
 optimization_problem_inspector/bbob_functions/bbob_functions.cpython-310-x86_64-linux-gnu.so,sha256=RAmyDNx-sAVo2jXtw4RLzrhq5ba8ttAP5UAWgfFT6LM,1580320
 optimization_problem_inspector/bbob_functions/bbob_functions.cpython-311-x86_64-linux-gnu.so,sha256=KalC5co-m-APXIXwpgA-b59GbcyYIrVI9Vh1JsJUeDU,1580168
 optimization_problem_inspector/bbob_functions/bbob_functions.pyx,sha256=HocZJ60QFOCRaWC1PgyLFVmwt7nOk24R_Xcvwi208fw,5312
 optimization_problem_inspector/bbob_functions/coco.c,sha256=7aIzyqIpToDfiu-he4sYIzMgQ7u9MNFABiXeDmY4x90,1452355
 optimization_problem_inspector/bbob_functions/coco.h,sha256=nAyqd0iEHTOQpgxlNPiq0w6iM5OYznAhMx_-HOhGGNI,20789
 optimization_problem_inspector/bbob_functions/exceptions.py,sha256=Zo5UxZpk2w_M_2IfjkZiS7zvga1RvLAjepsf2RPM1yw,793
 optimization_problem_inspector/bbob_functions/install_bbob_functions.py,sha256=bq-GwghxVTzsVBIIiw4IDfdfe7LiyRH-RZorjP2SjHY,317
-optimization_problem_inspector-0.3.3.dist-info/METADATA,sha256=RChO7lO8qH-elJAPdfaSKiB1HCA2gjf_NKBPhHYn2RA,4140
-optimization_problem_inspector-0.3.3.dist-info/WHEEL,sha256=KGYbc1zXlYddvwxnNty23BeaKzh7YuoSIvIMO4jEhvw,87
-optimization_problem_inspector-0.3.3.dist-info/entry_points.txt,sha256=CBKAxN7Me5VbviWhbuzvvxNQVo6YB_7mitq8A5m3GMY,68
-optimization_problem_inspector-0.3.3.dist-info/licenses/LICENSE.txt,sha256=o_AcDderANEapBiEJuuDouZOWs9IH3_c2SUyfEcTVPk,1157
-optimization_problem_inspector-0.3.3.dist-info/RECORD,,
+optimization_problem_inspector-0.4.1.dist-info/METADATA,sha256=V1-hIVv7AqecfnYn2DFpS_ub_wRPb6pb0PgB_9kCHFk,4140
+optimization_problem_inspector-0.4.1.dist-info/WHEEL,sha256=9QBuHhg6FNW7lppboF2vKVbCGTVzsFykgRQjjlajrhA,87
+optimization_problem_inspector-0.4.1.dist-info/entry_points.txt,sha256=CBKAxN7Me5VbviWhbuzvvxNQVo6YB_7mitq8A5m3GMY,68
+optimization_problem_inspector-0.4.1.dist-info/licenses/LICENSE.txt,sha256=o_AcDderANEapBiEJuuDouZOWs9IH3_c2SUyfEcTVPk,1157
+optimization_problem_inspector-0.4.1.dist-info/RECORD,,
```


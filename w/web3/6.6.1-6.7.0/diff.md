# Comparing `tmp/web3-6.6.1.tar.gz` & `tmp/web3-6.7.0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "web3-6.6.1.tar", last modified: Wed Jul 12 22:14:03 2023, max compression
+gzip compressed data, was "web3-6.7.0.tar", last modified: Wed Jul 26 18:44:05 2023, max compression
```

## Comparing `web3-6.6.1.tar` & `web3-6.7.0.tar`

### file list

```diff
@@ -1,343 +1,347 @@
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.697481 web3-6.6.1/
--rw-r--r--   0 fselmo     (501) staff       (20)     1090 2023-07-12 17:40:11.000000 web3-6.6.1/LICENSE
--rw-r--r--   0 fselmo     (501) staff       (20)      291 2023-07-12 22:11:00.000000 web3-6.6.1/MANIFEST.in
--rw-r--r--   0 fselmo     (501) staff       (20)     2198 2023-07-12 22:14:03.696772 web3-6.6.1/PKG-INFO
--rw-r--r--   0 fselmo     (501) staff       (20)     1294 2023-07-06 23:00:21.000000 web3-6.6.1/README.md
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.298303 web3-6.6.1/ens/
--rw-r--r--   0 fselmo     (501) staff       (20)      285 2023-07-11 21:56:12.000000 web3-6.6.1/ens/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)    17017 2023-07-12 17:40:11.000000 web3-6.6.1/ens/_normalization.py
--rw-r--r--   0 fselmo     (501) staff       (20)    34745 2023-07-12 17:40:11.000000 web3-6.6.1/ens/abis.py
--rw-r--r--   0 fselmo     (501) staff       (20)    20926 2023-07-12 22:07:02.000000 web3-6.6.1/ens/async_ens.py
--rw-r--r--   0 fselmo     (501) staff       (20)       41 2023-07-06 23:00:21.000000 web3-6.6.1/ens/auto.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3477 2023-07-12 22:07:02.000000 web3-6.6.1/ens/base_ens.py
--rw-r--r--   0 fselmo     (501) staff       (20)      601 2023-07-12 20:52:31.000000 web3-6.6.1/ens/constants.py
--rw-r--r--   0 fselmo     (501) staff       (20)   199089 2023-07-12 20:52:31.000000 web3-6.6.1/ens/contract_data.py
--rw-r--r--   0 fselmo     (501) staff       (20)    20020 2023-07-12 22:07:02.000000 web3-6.6.1/ens/ens.py
--rw-r--r--   0 fselmo     (501) staff       (20)     2390 2023-07-06 23:00:21.000000 web3-6.6.1/ens/exceptions.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.300562 web3-6.6.1/ens/specs/
--rw-r--r--   0 fselmo     (501) staff       (20)    48402 2023-07-12 17:40:11.000000 web3-6.6.1/ens/specs/nf.json
--rw-r--r--   0 fselmo     (501) staff       (20)  3115333 2023-07-12 17:40:11.000000 web3-6.6.1/ens/specs/normalization_spec.json
--rw-r--r--   0 fselmo     (501) staff       (20)     9279 2023-07-12 22:07:02.000000 web3-6.6.1/ens/utils.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.318993 web3-6.6.1/ethpm/
--rw-r--r--   0 fselmo     (501) staff       (20)      580 2023-07-12 17:40:11.000000 web3-6.6.1/ethpm/__init__.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.328175 web3-6.6.1/ethpm/_utils/
--rw-r--r--   0 fselmo     (501) staff       (20)        0 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/_utils/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)     2511 2023-07-06 23:00:21.000000 web3-6.6.1/ethpm/_utils/backend.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1477 2023-03-13 21:36:03.000000 web3-6.6.1/ethpm/_utils/cache.py
--rw-r--r--   0 fselmo     (501) staff       (20)     2848 2023-03-13 21:36:03.000000 web3-6.6.1/ethpm/_utils/chains.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1030 2022-08-03 17:01:33.000000 web3-6.6.1/ethpm/_utils/contract.py
--rw-r--r--   0 fselmo     (501) staff       (20)     5263 2023-03-13 21:36:03.000000 web3-6.6.1/ethpm/_utils/deployments.py
--rw-r--r--   0 fselmo     (501) staff       (20)     2717 2023-07-06 23:00:21.000000 web3-6.6.1/ethpm/_utils/ipfs.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.329867 web3-6.6.1/ethpm/_utils/protobuf/
--rw-r--r--   0 fselmo     (501) staff       (20)        0 2022-11-22 17:31:20.000000 web3-6.6.1/ethpm/_utils/protobuf/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1938 2023-07-06 23:00:21.000000 web3-6.6.1/ethpm/_utils/protobuf/ipfs_file_pb2.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1488 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/_utils/registry.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.332655 web3-6.6.1/ethpm/assets/
--rw-r--r--   0 fselmo     (501) staff       (20)        0 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/__init__.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.334230 web3-6.6.1/ethpm/assets/ens/
--rw-r--r--   0 fselmo     (501) staff       (20)    74682 2022-08-03 17:01:33.000000 web3-6.6.1/ethpm/assets/ens/v3.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.336282 web3-6.6.1/ethpm/assets/escrow/
--rw-r--r--   0 fselmo     (501) staff       (20)     8007 2022-08-03 17:01:33.000000 web3-6.6.1/ethpm/assets/escrow/with_bytecode_v3.json
--rw-r--r--   0 fselmo     (501) staff       (20)      760 2023-03-13 21:36:03.000000 web3-6.6.1/ethpm/assets/ipfs_file.proto
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.338291 web3-6.6.1/ethpm/assets/owned/
--rw-r--r--   0 fselmo     (501) staff       (20)     2655 2022-08-03 17:01:33.000000 web3-6.6.1/ethpm/assets/owned/output_v3.json
--rw-r--r--   0 fselmo     (501) staff       (20)      746 2022-08-03 17:01:33.000000 web3-6.6.1/ethpm/assets/owned/with_contract_type_v3.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.345587 web3-6.6.1/ethpm/assets/registry/
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.355250 web3-6.6.1/ethpm/assets/registry/contracts/
--rw-r--r--   0 fselmo     (501) staff       (20)     3129 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/registry/contracts/Authority.sol
--rw-r--r--   0 fselmo     (501) staff       (20)     2876 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/registry/contracts/IndexedOrderedSetLib.sol
--rw-r--r--   0 fselmo     (501) staff       (20)     6380 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/registry/contracts/PackageDB.sol
--rw-r--r--   0 fselmo     (501) staff       (20)    10553 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/registry/contracts/PackageRegistry.sol
--rw-r--r--   0 fselmo     (501) staff       (20)     2966 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/registry/contracts/PackageRegistryInterface.sol
--rw-r--r--   0 fselmo     (501) staff       (20)     9041 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/registry/contracts/ReleaseDB.sol
--rw-r--r--   0 fselmo     (501) staff       (20)     4980 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/registry/contracts/ReleaseValidator.sol
--rw-r--r--   0 fselmo     (501) staff       (20)     1046 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/registry/solc_input.json
--rw-r--r--   0 fselmo     (501) staff       (20)   727775 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/registry/solc_output.json
--rw-r--r--   0 fselmo     (501) staff       (20)   270218 2022-08-03 17:01:33.000000 web3-6.6.1/ethpm/assets/registry/v3.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.356188 web3-6.6.1/ethpm/assets/safe-math-lib/
--rw-r--r--   0 fselmo     (501) staff       (20)     2845 2022-08-03 17:01:33.000000 web3-6.6.1/ethpm/assets/safe-math-lib/v3-strict-no-deployments.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.360517 web3-6.6.1/ethpm/assets/simple-registry/
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.364998 web3-6.6.1/ethpm/assets/simple-registry/contracts/
--rw-r--r--   0 fselmo     (501) staff       (20)     1841 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/simple-registry/contracts/Ownable.sol
--rw-r--r--   0 fselmo     (501) staff       (20)    12350 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/simple-registry/contracts/PackageRegistry.sol
--rw-r--r--   0 fselmo     (501) staff       (20)     3278 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/simple-registry/contracts/PackageRegistryInterface.sol
--rw-r--r--   0 fselmo     (501) staff       (20)      950 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/simple-registry/solc_input.json
--rw-r--r--   0 fselmo     (501) staff       (20)   199338 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/simple-registry/solc_output.json
--rw-r--r--   0 fselmo     (501) staff       (20)    75677 2022-08-03 17:01:33.000000 web3-6.6.1/ethpm/assets/simple-registry/v3.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.367271 web3-6.6.1/ethpm/assets/standard-token/
--rw-r--r--   0 fselmo     (501) staff       (20)    22292 2022-08-03 17:01:33.000000 web3-6.6.1/ethpm/assets/standard-token/output_v3.json
--rw-r--r--   0 fselmo     (501) staff       (20)     8765 2022-08-03 17:01:33.000000 web3-6.6.1/ethpm/assets/standard-token/with_bytecode_v3.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.371671 web3-6.6.1/ethpm/assets/vyper_registry/
--rw-r--r--   0 fselmo     (501) staff       (20)    81363 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/vyper_registry/0.1.0.json
--rw-r--r--   0 fselmo     (501) staff       (20)     6339 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/vyper_registry/registry.vy
--rw-r--r--   0 fselmo     (501) staff       (20)     7596 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/assets/vyper_registry/registry_with_delete.vy
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.422039 web3-6.6.1/ethpm/backends/
--rw-r--r--   0 fselmo     (501) staff       (20)        0 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/backends/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)      956 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/backends/base.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3006 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/backends/http.py
--rw-r--r--   0 fselmo     (501) staff       (20)     6551 2023-07-06 23:00:21.000000 web3-6.6.1/ethpm/backends/ipfs.py
--rw-r--r--   0 fselmo     (501) staff       (20)     4174 2023-07-06 23:00:21.000000 web3-6.6.1/ethpm/backends/registry.py
--rw-r--r--   0 fselmo     (501) staff       (20)      405 2023-07-06 23:00:21.000000 web3-6.6.1/ethpm/constants.py
--rw-r--r--   0 fselmo     (501) staff       (20)     6303 2023-07-12 17:40:11.000000 web3-6.6.1/ethpm/contract.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1890 2022-08-03 17:01:33.000000 web3-6.6.1/ethpm/dependencies.py
--rw-r--r--   0 fselmo     (501) staff       (20)     2134 2023-03-13 21:36:03.000000 web3-6.6.1/ethpm/deployments.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.277935 web3-6.6.1/ethpm/ethpm-spec/
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.277064 web3-6.6.1/ethpm/ethpm-spec/examples/
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.429280 web3-6.6.1/ethpm/ethpm-spec/examples/escrow/
--rw-r--r--   0 fselmo     (501) staff       (20)     6810 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/escrow/1.0.0-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)     5361 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/escrow/1.0.0.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.431392 web3-6.6.1/ethpm/ethpm-spec/examples/escrow/contracts/
--rw-r--r--   0 fselmo     (501) staff       (20)      888 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/escrow/contracts/Escrow.sol
--rw-r--r--   0 fselmo     (501) staff       (20)      644 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/escrow/contracts/SafeSendLib.sol
--rw-r--r--   0 fselmo     (501) staff       (20)    11598 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/escrow/v3-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)     8669 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/escrow/v3.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.434966 web3-6.6.1/ethpm/ethpm-spec/examples/owned/
--rw-r--r--   0 fselmo     (501) staff       (20)      544 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/owned/1.0.0-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)      443 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/owned/1.0.0.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.436208 web3-6.6.1/ethpm/ethpm-spec/examples/owned/contracts/
--rw-r--r--   0 fselmo     (501) staff       (20)      222 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/owned/contracts/Owned.sol
--rw-r--r--   0 fselmo     (501) staff       (20)      728 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/owned/v3-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)      478 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/owned/v3.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.439516 web3-6.6.1/ethpm/ethpm-spec/examples/piper-coin/
--rw-r--r--   0 fselmo     (501) staff       (20)     5272 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/piper-coin/1.0.0-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)     5030 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/piper-coin/1.0.0.json
--rw-r--r--   0 fselmo     (501) staff       (20)     5220 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/piper-coin/v3-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)     4993 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/piper-coin/v3.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.443126 web3-6.6.1/ethpm/ethpm-spec/examples/safe-math-lib/
--rw-r--r--   0 fselmo     (501) staff       (20)     3976 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/safe-math-lib/1.0.0-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)     3143 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/safe-math-lib/1.0.0.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.443937 web3-6.6.1/ethpm/ethpm-spec/examples/safe-math-lib/contracts/
--rw-r--r--   0 fselmo     (501) staff       (20)      802 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/safe-math-lib/contracts/SafeMathLib.sol
--rw-r--r--   0 fselmo     (501) staff       (20)     5517 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/safe-math-lib/v3-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)     3289 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/safe-math-lib/v3.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.448072 web3-6.6.1/ethpm/ethpm-spec/examples/standard-token/
--rw-r--r--   0 fselmo     (501) staff       (20)     3794 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/standard-token/1.0.0-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)     3238 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/standard-token/1.0.0.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.449921 web3-6.6.1/ethpm/ethpm-spec/examples/standard-token/contracts/
--rw-r--r--   0 fselmo     (501) staff       (20)     1155 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/standard-token/contracts/AbstractToken.sol
--rw-r--r--   0 fselmo     (501) staff       (20)     2949 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/standard-token/contracts/StandardToken.sol
--rw-r--r--   0 fselmo     (501) staff       (20)    17129 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/standard-token/v3-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)     6100 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/standard-token/v3.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.453652 web3-6.6.1/ethpm/ethpm-spec/examples/transferable/
--rw-r--r--   0 fselmo     (501) staff       (20)      590 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/transferable/1.0.0-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)      507 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/transferable/1.0.0.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.461600 web3-6.6.1/ethpm/ethpm-spec/examples/transferable/contracts/
--rw-r--r--   0 fselmo     (501) staff       (20)      396 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/transferable/contracts/Transferable.sol
--rw-r--r--   0 fselmo     (501) staff       (20)      786 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/transferable/v3-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)      548 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/transferable/v3.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.507544 web3-6.6.1/ethpm/ethpm-spec/examples/wallet/
--rw-r--r--   0 fselmo     (501) staff       (20)     6669 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/wallet/1.0.0-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)     5456 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/wallet/1.0.0.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.511195 web3-6.6.1/ethpm/ethpm-spec/examples/wallet/contracts/
--rw-r--r--   0 fselmo     (501) staff       (20)     1454 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/wallet/contracts/Wallet.sol
--rw-r--r--   0 fselmo     (501) staff       (20)     9710 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/wallet/v3-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)     7326 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/wallet/v3.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.509912 web3-6.6.1/ethpm/ethpm-spec/examples/wallet-with-send/
--rw-r--r--   0 fselmo     (501) staff       (20)     8052 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/wallet-with-send/1.0.0-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)     6657 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/wallet-with-send/1.0.0.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.510589 web3-6.6.1/ethpm/ethpm-spec/examples/wallet-with-send/contracts/
--rw-r--r--   0 fselmo     (501) staff       (20)      621 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/wallet-with-send/contracts/WalletWithSend.sol
--rw-r--r--   0 fselmo     (501) staff       (20)    12191 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/wallet-with-send/v3-pretty.json
--rw-r--r--   0 fselmo     (501) staff       (20)     9503 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/examples/wallet-with-send/v3.json
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.512624 web3-6.6.1/ethpm/ethpm-spec/spec/
--rw-r--r--   0 fselmo     (501) staff       (20)    10302 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/spec/package.spec.json
--rw-r--r--   0 fselmo     (501) staff       (20)    12879 2023-01-03 18:30:11.000000 web3-6.6.1/ethpm/ethpm-spec/spec/v3.spec.json
--rw-r--r--   0 fselmo     (501) staff       (20)     1194 2023-07-06 23:00:21.000000 web3-6.6.1/ethpm/exceptions.py
--rw-r--r--   0 fselmo     (501) staff       (20)    14493 2023-07-06 23:00:21.000000 web3-6.6.1/ethpm/package.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.515844 web3-6.6.1/ethpm/tools/
--rw-r--r--   0 fselmo     (501) staff       (20)      103 2023-03-13 21:36:03.000000 web3-6.6.1/ethpm/tools/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)    27045 2023-03-13 21:36:03.000000 web3-6.6.1/ethpm/tools/builder.py
--rw-r--r--   0 fselmo     (501) staff       (20)    10373 2023-07-06 23:00:21.000000 web3-6.6.1/ethpm/tools/checker.py
--rw-r--r--   0 fselmo     (501) staff       (20)      475 2023-03-13 21:36:03.000000 web3-6.6.1/ethpm/tools/get_manifest.py
--rw-r--r--   0 fselmo     (501) staff       (20)     4368 2023-03-13 21:36:03.000000 web3-6.6.1/ethpm/uri.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.519028 web3-6.6.1/ethpm/validation/
--rw-r--r--   0 fselmo     (501) staff       (20)        0 2021-11-01 21:09:29.000000 web3-6.6.1/ethpm/validation/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)     4716 2023-03-13 21:36:03.000000 web3-6.6.1/ethpm/validation/manifest.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1072 2023-07-06 23:00:21.000000 web3-6.6.1/ethpm/validation/misc.py
--rw-r--r--   0 fselmo     (501) staff       (20)     2317 2022-08-03 17:01:33.000000 web3-6.6.1/ethpm/validation/package.py
--rw-r--r--   0 fselmo     (501) staff       (20)     4873 2023-07-06 23:00:21.000000 web3-6.6.1/ethpm/validation/uri.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1202 2023-07-06 23:00:21.000000 web3-6.6.1/pyproject.toml
--rw-r--r--   0 fselmo     (501) staff       (20)       38 2023-07-12 22:14:03.697705 web3-6.6.1/setup.cfg
--rw-r--r--   0 fselmo     (501) staff       (20)     3076 2023-07-12 22:13:44.000000 web3-6.6.1/setup.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.534529 web3-6.6.1/web3/
--rw-r--r--   0 fselmo     (501) staff       (20)      752 2023-07-12 22:01:15.000000 web3-6.6.1/web3/__init__.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.583037 web3-6.6.1/web3/_utils/
--rw-r--r--   0 fselmo     (501) staff       (20)        0 2021-06-07 18:31:01.000000 web3-6.6.1/web3/_utils/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)    31000 2023-07-12 22:07:02.000000 web3-6.6.1/web3/_utils/abi.py
--rw-r--r--   0 fselmo     (501) staff       (20)      456 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/async_caching.py
--rw-r--r--   0 fselmo     (501) staff       (20)     8123 2023-07-12 17:40:11.000000 web3-6.6.1/web3/_utils/async_transactions.py
--rw-r--r--   0 fselmo     (501) staff       (20)     2059 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/blocks.py
--rw-r--r--   0 fselmo     (501) staff       (20)      992 2023-03-13 21:36:03.000000 web3-6.6.1/web3/_utils/caching.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.584113 web3-6.6.1/web3/_utils/compat/
--rw-r--r--   0 fselmo     (501) staff       (20)      580 2023-07-12 17:40:11.000000 web3-6.6.1/web3/_utils/compat/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)     5195 2023-07-12 17:40:11.000000 web3-6.6.1/web3/_utils/contract_error_handling.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.586174 web3-6.6.1/web3/_utils/contract_sources/
--rw-r--r--   0 fselmo     (501) staff       (20)        0 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)     6492 2023-07-12 17:40:11.000000 web3-6.6.1/web3/_utils/contract_sources/compile_contracts.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.613529 web3-6.6.1/web3/_utils/contract_sources/contract_data/
--rw-r--r--   0 fselmo     (501) staff       (20)        0 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)      517 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/_custom_contract_data.py
--rw-r--r--   0 fselmo     (501) staff       (20)     5344 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/address_reflector.py
--rw-r--r--   0 fselmo     (501) staff       (20)    18852 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/arrays_contract.py
--rw-r--r--   0 fselmo     (501) staff       (20)    14783 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/bytes_contracts.py
--rw-r--r--   0 fselmo     (501) staff       (20)     6089 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/constructor_contracts.py
--rw-r--r--   0 fselmo     (501) staff       (20)     6334 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/contract_caller_tester.py
--rw-r--r--   0 fselmo     (501) staff       (20)    37881 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/emitter_contract.py
--rw-r--r--   0 fselmo     (501) staff       (20)     5573 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/event_contracts.py
--rw-r--r--   0 fselmo     (501) staff       (20)    15824 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/extended_resolver.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1651 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/fallback_function_contract.py
--rw-r--r--   0 fselmo     (501) staff       (20)     7637 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/math_contract.py
--rw-r--r--   0 fselmo     (501) staff       (20)    16716 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/offchain_lookup.py
--rw-r--r--   0 fselmo     (501) staff       (20)    32645 2023-07-07 18:03:19.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/offchain_resolver.py
--rw-r--r--   0 fselmo     (501) staff       (20)    15579 2023-07-12 17:40:11.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/panic_errors_contract.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1825 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/payable_tester.py
--rw-r--r--   0 fselmo     (501) staff       (20)    17290 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/receive_function_contracts.py
--rw-r--r--   0 fselmo     (501) staff       (20)     5264 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/reflector_contracts.py
--rw-r--r--   0 fselmo     (501) staff       (20)     4264 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/revert_contract.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3555 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/simple_resolver.py
--rw-r--r--   0 fselmo     (501) staff       (20)     8238 2023-07-12 17:40:11.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/storage_contract.py
--rw-r--r--   0 fselmo     (501) staff       (20)    11586 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/string_contract.py
--rw-r--r--   0 fselmo     (501) staff       (20)    23180 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/contract_sources/contract_data/tuple_contracts.py
--rw-r--r--   0 fselmo     (501) staff       (20)    14980 2023-07-07 21:28:03.000000 web3-6.6.1/web3/_utils/contracts.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1640 2023-03-13 21:36:03.000000 web3-6.6.1/web3/_utils/datatypes.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1738 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/decorators.py
--rw-r--r--   0 fselmo     (501) staff       (20)      144 2023-03-13 21:36:03.000000 web3-6.6.1/web3/_utils/empty.py
--rw-r--r--   0 fselmo     (501) staff       (20)     9065 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/encoding.py
--rw-r--r--   0 fselmo     (501) staff       (20)     2388 2023-07-12 22:07:02.000000 web3-6.6.1/web3/_utils/ens.py
--rw-r--r--   0 fselmo     (501) staff       (20)    17198 2023-07-12 17:40:11.000000 web3-6.6.1/web3/_utils/events.py
--rw-r--r--   0 fselmo     (501) staff       (20)     2113 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/fee_utils.py
--rw-r--r--   0 fselmo     (501) staff       (20)    11886 2023-07-07 21:28:03.000000 web3-6.6.1/web3/_utils/filters.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3071 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/formatters.py
--rw-r--r--   0 fselmo     (501) staff       (20)       55 2022-01-11 17:23:55.000000 web3-6.6.1/web3/_utils/function_identifiers.py
--rw-r--r--   0 fselmo     (501) staff       (20)      195 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/http.py
--rw-r--r--   0 fselmo     (501) staff       (20)      209 2023-03-13 21:36:03.000000 web3-6.6.1/web3/_utils/hypothesis.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1047 2023-03-13 21:36:03.000000 web3-6.6.1/web3/_utils/math.py
--rw-r--r--   0 fselmo     (501) staff       (20)    29330 2023-07-12 22:01:15.000000 web3-6.6.1/web3/_utils/method_formatters.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1146 2023-03-13 21:36:03.000000 web3-6.6.1/web3/_utils/miner.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3147 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/module.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.623726 web3-6.6.1/web3/_utils/module_testing/
--rw-r--r--   0 fselmo     (501) staff       (20)      539 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/module_testing/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)   176335 2023-07-12 17:40:11.000000 web3-6.6.1/web3/_utils/module_testing/eth_module.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3406 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/module_testing/go_ethereum_admin_module.py
--rw-r--r--   0 fselmo     (501) staff       (20)    10338 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/module_testing/go_ethereum_personal_module.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1176 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/module_testing/go_ethereum_txpool_module.py
--rw-r--r--   0 fselmo     (501) staff       (20)     4825 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/module_testing/module_testing_utils.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1272 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/module_testing/net_module.py
--rw-r--r--   0 fselmo     (501) staff       (20)     9613 2023-07-12 22:07:02.000000 web3-6.6.1/web3/_utils/module_testing/web3_module.py
--rw-r--r--   0 fselmo     (501) staff       (20)     7447 2023-07-12 22:07:02.000000 web3-6.6.1/web3/_utils/normalizers.py
--rw-r--r--   0 fselmo     (501) staff       (20)     8833 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/request.py
--rw-r--r--   0 fselmo     (501) staff       (20)     9509 2023-07-12 22:07:02.000000 web3-6.6.1/web3/_utils/rpc_abi.py
--rw-r--r--   0 fselmo     (501) staff       (20)     4207 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/threads.py
--rw-r--r--   0 fselmo     (501) staff       (20)     8737 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/transactions.py
--rw-r--r--   0 fselmo     (501) staff       (20)      816 2023-07-06 23:00:21.000000 web3-6.6.1/web3/_utils/type_conversion.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1669 2023-03-13 21:36:03.000000 web3-6.6.1/web3/_utils/utility_methods.py
--rw-r--r--   0 fselmo     (501) staff       (20)     6291 2023-07-07 21:28:03.000000 web3-6.6.1/web3/_utils/validation.py
--rw-r--r--   0 fselmo     (501) staff       (20)      994 2023-03-13 21:36:03.000000 web3-6.6.1/web3/_utils/windows.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.625275 web3-6.6.1/web3/auto/
--rw-r--r--   0 fselmo     (501) staff       (20)       44 2023-07-06 23:00:21.000000 web3-6.6.1/web3/auto/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)      263 2023-02-18 04:25:14.000000 web3-6.6.1/web3/auto/gethdev.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.629709 web3-6.6.1/web3/beacon/
--rw-r--r--   0 fselmo     (501) staff       (20)       91 2023-07-06 23:00:21.000000 web3-6.6.1/web3/beacon/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1516 2023-07-06 23:00:21.000000 web3-6.6.1/web3/beacon/api_endpoints.py
--rw-r--r--   0 fselmo     (501) staff       (20)     5421 2023-07-06 23:00:21.000000 web3-6.6.1/web3/beacon/async_beacon.py
--rw-r--r--   0 fselmo     (501) staff       (20)     4772 2023-07-06 23:00:21.000000 web3-6.6.1/web3/beacon/main.py
--rw-r--r--   0 fselmo     (501) staff       (20)      396 2023-03-13 21:36:03.000000 web3-6.6.1/web3/constants.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.635328 web3-6.6.1/web3/contract/
--rw-r--r--   0 fselmo     (501) staff       (20)      215 2023-07-06 23:00:21.000000 web3-6.6.1/web3/contract/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)    19820 2023-07-12 17:40:11.000000 web3-6.6.1/web3/contract/async_contract.py
--rw-r--r--   0 fselmo     (501) staff       (20)    35727 2023-07-12 17:40:11.000000 web3-6.6.1/web3/contract/base_contract.py
--rw-r--r--   0 fselmo     (501) staff       (20)    18940 2023-07-12 17:40:11.000000 web3-6.6.1/web3/contract/contract.py
--rw-r--r--   0 fselmo     (501) staff       (20)    12309 2023-07-12 17:40:11.000000 web3-6.6.1/web3/contract/utils.py
--rw-r--r--   0 fselmo     (501) staff       (20)     9104 2023-07-06 23:00:21.000000 web3-6.6.1/web3/datastructures.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.640950 web3-6.6.1/web3/eth/
--rw-r--r--   0 fselmo     (501) staff       (20)      166 2023-07-06 23:00:21.000000 web3-6.6.1/web3/eth/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)    20588 2023-07-12 22:01:15.000000 web3-6.6.1/web3/eth/async_eth.py
--rw-r--r--   0 fselmo     (501) staff       (20)     5943 2023-07-06 23:00:21.000000 web3-6.6.1/web3/eth/base_eth.py
--rw-r--r--   0 fselmo     (501) staff       (20)    19339 2023-07-12 17:40:11.000000 web3-6.6.1/web3/eth/eth.py
--rw-r--r--   0 fselmo     (501) staff       (20)     6445 2023-07-12 17:40:11.000000 web3-6.6.1/web3/exceptions.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.644427 web3-6.6.1/web3/gas_strategies/
--rw-r--r--   0 fselmo     (501) staff       (20)        0 2021-06-07 18:31:01.000000 web3-6.6.1/web3/gas_strategies/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)      430 2023-07-06 23:00:21.000000 web3-6.6.1/web3/gas_strategies/rpc.py
--rw-r--r--   0 fselmo     (501) staff       (20)     9010 2023-07-06 23:00:21.000000 web3-6.6.1/web3/gas_strategies/time_based.py
--rw-r--r--   0 fselmo     (501) staff       (20)    11826 2023-07-06 23:00:21.000000 web3-6.6.1/web3/geth.py
--rw-r--r--   0 fselmo     (501) staff       (20)      198 2022-09-26 17:05:32.000000 web3-6.6.1/web3/logs.py
--rw-r--r--   0 fselmo     (501) staff       (20)    12797 2023-07-12 22:07:02.000000 web3-6.6.1/web3/main.py
--rw-r--r--   0 fselmo     (501) staff       (20)     7888 2023-07-12 22:07:02.000000 web3-6.6.1/web3/manager.py
--rw-r--r--   0 fselmo     (501) staff       (20)     8430 2023-07-06 23:00:21.000000 web3-6.6.1/web3/method.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.664016 web3-6.6.1/web3/middleware/
--rw-r--r--   0 fselmo     (501) staff       (20)     3848 2023-07-12 22:07:02.000000 web3-6.6.1/web3/middleware/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)      239 2023-01-31 22:25:40.000000 web3-6.6.1/web3/middleware/abi.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3222 2023-07-12 17:40:11.000000 web3-6.6.1/web3/middleware/async_cache.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1779 2023-07-12 22:01:15.000000 web3-6.6.1/web3/middleware/attrdict.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1785 2023-07-06 23:00:21.000000 web3-6.6.1/web3/middleware/buffered_gas_estimate.py
--rw-r--r--   0 fselmo     (501) staff       (20)    12880 2023-07-12 17:40:11.000000 web3-6.6.1/web3/middleware/cache.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1167 2023-03-13 21:36:03.000000 web3-6.6.1/web3/middleware/exception_handling.py
--rw-r--r--   0 fselmo     (501) staff       (20)     4453 2023-07-12 17:40:11.000000 web3-6.6.1/web3/middleware/exception_retry_request.py
--rw-r--r--   0 fselmo     (501) staff       (20)    21131 2023-07-06 23:00:21.000000 web3-6.6.1/web3/middleware/filter.py
--rw-r--r--   0 fselmo     (501) staff       (20)     5396 2023-07-12 17:40:11.000000 web3-6.6.1/web3/middleware/fixture.py
--rw-r--r--   0 fselmo     (501) staff       (20)     4829 2023-07-12 22:01:15.000000 web3-6.6.1/web3/middleware/formatting.py
--rw-r--r--   0 fselmo     (501) staff       (20)     4212 2023-07-06 23:00:21.000000 web3-6.6.1/web3/middleware/gas_price_strategy.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1657 2023-07-06 23:00:21.000000 web3-6.6.1/web3/middleware/geth_poa.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3336 2023-07-12 22:07:02.000000 web3-6.6.1/web3/middleware/names.py
--rw-r--r--   0 fselmo     (501) staff       (20)      246 2022-12-08 21:12:34.000000 web3-6.6.1/web3/middleware/normalize_request_parameters.py
--rw-r--r--   0 fselmo     (501) staff       (20)      351 2023-02-03 21:22:38.000000 web3-6.6.1/web3/middleware/pythonic.py
--rw-r--r--   0 fselmo     (501) staff       (20)     6605 2023-07-12 17:40:11.000000 web3-6.6.1/web3/middleware/signing.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1014 2023-07-06 23:00:21.000000 web3-6.6.1/web3/middleware/simulate_unmined_transaction.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3739 2023-07-06 23:00:21.000000 web3-6.6.1/web3/middleware/stalecheck.py
--rw-r--r--   0 fselmo     (501) staff       (20)     4548 2023-07-12 22:07:02.000000 web3-6.6.1/web3/middleware/validation.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3615 2023-07-12 22:01:15.000000 web3-6.6.1/web3/module.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1562 2023-03-13 21:36:03.000000 web3-6.6.1/web3/net.py
--rw-r--r--   0 fselmo     (501) staff       (20)    21609 2023-07-06 23:00:21.000000 web3-6.6.1/web3/pm.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.671257 web3-6.6.1/web3/providers/
--rw-r--r--   0 fselmo     (501) staff       (20)      432 2023-07-12 22:01:15.000000 web3-6.6.1/web3/providers/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)     4178 2023-07-12 22:01:15.000000 web3-6.6.1/web3/providers/async_base.py
--rw-r--r--   0 fselmo     (501) staff       (20)     2879 2023-07-12 17:40:11.000000 web3-6.6.1/web3/providers/async_rpc.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3447 2023-07-06 23:00:21.000000 web3-6.6.1/web3/providers/auto.py
--rw-r--r--   0 fselmo     (501) staff       (20)     4111 2023-07-06 23:00:21.000000 web3-6.6.1/web3/providers/base.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.675281 web3-6.6.1/web3/providers/eth_tester/
--rw-r--r--   0 fselmo     (501) staff       (20)       97 2023-07-06 23:00:21.000000 web3-6.6.1/web3/providers/eth_tester/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)    14740 2023-07-12 22:07:02.000000 web3-6.6.1/web3/providers/eth_tester/defaults.py
--rw-r--r--   0 fselmo     (501) staff       (20)     5512 2023-07-06 23:00:21.000000 web3-6.6.1/web3/providers/eth_tester/main.py
--rw-r--r--   0 fselmo     (501) staff       (20)    12861 2023-07-06 23:00:21.000000 web3-6.6.1/web3/providers/eth_tester/middleware.py
--rw-r--r--   0 fselmo     (501) staff       (20)     6399 2023-07-12 17:40:11.000000 web3-6.6.1/web3/providers/ipc.py
--rw-r--r--   0 fselmo     (501) staff       (20)     2686 2023-03-13 21:36:03.000000 web3-6.6.1/web3/providers/rpc.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3919 2023-07-06 23:00:21.000000 web3-6.6.1/web3/providers/websocket.py
--rw-r--r--   0 fselmo     (501) staff       (20)        0 2022-01-11 17:23:55.000000 web3-6.6.1/web3/py.typed
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.676180 web3-6.6.1/web3/scripts/
--rw-r--r--   0 fselmo     (501) staff       (20)        0 2022-01-11 17:23:55.000000 web3-6.6.1/web3/scripts/__init__.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.677470 web3-6.6.1/web3/scripts/release/
--rw-r--r--   0 fselmo     (501) staff       (20)        0 2022-01-11 17:23:55.000000 web3-6.6.1/web3/scripts/release/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1534 2023-03-13 21:36:03.000000 web3-6.6.1/web3/scripts/release/test_package.py
--rw-r--r--   0 fselmo     (501) staff       (20)      951 2023-03-13 21:36:03.000000 web3-6.6.1/web3/testing.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.678477 web3-6.6.1/web3/tools/
--rw-r--r--   0 fselmo     (501) staff       (20)       73 2022-09-26 17:05:32.000000 web3-6.6.1/web3/tools/__init__.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.682996 web3-6.6.1/web3/tools/benchmark/
--rw-r--r--   0 fselmo     (501) staff       (20)        0 2022-08-03 17:01:33.000000 web3-6.6.1/web3/tools/benchmark/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)     5886 2023-07-06 23:00:21.000000 web3-6.6.1/web3/tools/benchmark/main.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3435 2023-07-12 17:40:11.000000 web3-6.6.1/web3/tools/benchmark/node.py
--rw-r--r--   0 fselmo     (501) staff       (20)      912 2023-03-13 21:36:03.000000 web3-6.6.1/web3/tools/benchmark/reporting.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1722 2023-02-13 20:41:33.000000 web3-6.6.1/web3/tools/benchmark/utils.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.690432 web3-6.6.1/web3/tools/pytest_ethereum/
--rw-r--r--   0 fselmo     (501) staff       (20)        0 2021-11-01 21:09:29.000000 web3-6.6.1/web3/tools/pytest_ethereum/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)     4158 2023-07-06 23:00:21.000000 web3-6.6.1/web3/tools/pytest_ethereum/_utils.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1423 2023-07-06 23:00:21.000000 web3-6.6.1/web3/tools/pytest_ethereum/deployer.py
--rw-r--r--   0 fselmo     (501) staff       (20)      380 2021-11-01 21:09:29.000000 web3-6.6.1/web3/tools/pytest_ethereum/exceptions.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3927 2023-03-13 21:36:03.000000 web3-6.6.1/web3/tools/pytest_ethereum/linker.py
--rw-r--r--   0 fselmo     (501) staff       (20)      645 2023-07-06 23:00:21.000000 web3-6.6.1/web3/tools/pytest_ethereum/plugins.py
--rw-r--r--   0 fselmo     (501) staff       (20)     2968 2023-07-06 23:00:21.000000 web3-6.6.1/web3/tracing.py
--rw-r--r--   0 fselmo     (501) staff       (20)    10909 2023-07-12 22:01:15.000000 web3-6.6.1/web3/types.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.695822 web3-6.6.1/web3/utils/
--rw-r--r--   0 fselmo     (501) staff       (20)      454 2023-07-06 23:00:21.000000 web3-6.6.1/web3/utils/__init__.py
--rw-r--r--   0 fselmo     (501) staff       (20)      498 2023-03-13 21:36:03.000000 web3-6.6.1/web3/utils/abi.py
--rw-r--r--   0 fselmo     (501) staff       (20)      967 2023-07-06 23:00:21.000000 web3-6.6.1/web3/utils/address.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3096 2023-07-06 23:00:21.000000 web3-6.6.1/web3/utils/async_exception_handling.py
--rw-r--r--   0 fselmo     (501) staff       (20)     1521 2023-07-06 23:00:21.000000 web3-6.6.1/web3/utils/caching.py
--rw-r--r--   0 fselmo     (501) staff       (20)     3052 2023-07-06 23:00:21.000000 web3-6.6.1/web3/utils/exception_handling.py
-drwxr-xr-x   0 fselmo     (501) staff       (20)        0 2023-07-12 22:14:03.542810 web3-6.6.1/web3.egg-info/
--rw-r--r--   0 fselmo     (501) staff       (20)     2198 2023-07-12 22:14:03.000000 web3-6.6.1/web3.egg-info/PKG-INFO
--rw-r--r--   0 fselmo     (501) staff       (20)     9921 2023-07-12 22:14:03.000000 web3-6.6.1/web3.egg-info/SOURCES.txt
--rw-r--r--   0 fselmo     (501) staff       (20)        1 2023-07-12 22:14:03.000000 web3-6.6.1/web3.egg-info/dependency_links.txt
--rw-r--r--   0 fselmo     (501) staff       (20)       64 2023-07-12 22:14:03.000000 web3-6.6.1/web3.egg-info/entry_points.txt
--rw-r--r--   0 fselmo     (501) staff       (20)        1 2023-07-12 22:12:07.000000 web3-6.6.1/web3.egg-info/not-zip-safe
--rw-r--r--   0 fselmo     (501) staff       (20)     1139 2023-07-12 22:14:03.000000 web3-6.6.1/web3.egg-info/requires.txt
--rw-r--r--   0 fselmo     (501) staff       (20)       15 2023-07-12 22:14:03.000000 web3-6.6.1/web3.egg-info/top_level.txt
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.608199 web3-6.7.0/
+-rw-r--r--   0 eve        (501) staff       (20)     1090 2023-07-26 18:35:55.000000 web3-6.7.0/LICENSE
+-rw-r--r--   0 eve        (501) staff       (20)      249 2023-07-26 18:35:55.000000 web3-6.7.0/MANIFEST.in
+-rw-r--r--   0 eve        (501) staff       (20)     2198 2023-07-26 18:44:05.608037 web3-6.7.0/PKG-INFO
+-rw-r--r--   0 eve        (501) staff       (20)     1294 2023-06-26 17:45:20.000000 web3-6.7.0/README.md
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.547500 web3-6.7.0/ens/
+-rw-r--r--   0 eve        (501) staff       (20)      285 2023-06-26 17:45:20.000000 web3-6.7.0/ens/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)    17017 2023-07-26 18:35:55.000000 web3-6.7.0/ens/_normalization.py
+-rw-r--r--   0 eve        (501) staff       (20)    34745 2023-07-26 18:35:55.000000 web3-6.7.0/ens/abis.py
+-rw-r--r--   0 eve        (501) staff       (20)    22277 2023-07-26 18:35:55.000000 web3-6.7.0/ens/async_ens.py
+-rw-r--r--   0 eve        (501) staff       (20)       41 2023-06-26 17:45:20.000000 web3-6.7.0/ens/auto.py
+-rw-r--r--   0 eve        (501) staff       (20)     3477 2023-07-26 18:35:55.000000 web3-6.7.0/ens/base_ens.py
+-rw-r--r--   0 eve        (501) staff       (20)      913 2023-07-26 18:35:55.000000 web3-6.7.0/ens/constants.py
+-rw-r--r--   0 eve        (501) staff       (20)   148604 2023-07-26 18:35:55.000000 web3-6.7.0/ens/contract_data.py
+-rw-r--r--   0 eve        (501) staff       (20)    21517 2023-07-26 18:35:55.000000 web3-6.7.0/ens/ens.py
+-rw-r--r--   0 eve        (501) staff       (20)     2390 2023-06-26 17:45:20.000000 web3-6.7.0/ens/exceptions.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.547959 web3-6.7.0/ens/specs/
+-rw-r--r--   0 eve        (501) staff       (20)    48402 2023-07-26 18:35:55.000000 web3-6.7.0/ens/specs/nf.json
+-rw-r--r--   0 eve        (501) staff       (20)  3115333 2023-07-26 18:35:55.000000 web3-6.7.0/ens/specs/normalization_spec.json
+-rw-r--r--   0 eve        (501) staff       (20)     9279 2023-07-26 18:35:55.000000 web3-6.7.0/ens/utils.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.552050 web3-6.7.0/ethpm/
+-rw-r--r--   0 eve        (501) staff       (20)      580 2023-06-07 20:55:14.000000 web3-6.7.0/ethpm/__init__.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.553295 web3-6.7.0/ethpm/_utils/
+-rw-r--r--   0 eve        (501) staff       (20)        0 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/_utils/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)     2511 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/_utils/backend.py
+-rw-r--r--   0 eve        (501) staff       (20)     1477 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/_utils/cache.py
+-rw-r--r--   0 eve        (501) staff       (20)     2848 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/_utils/chains.py
+-rw-r--r--   0 eve        (501) staff       (20)     1030 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/_utils/contract.py
+-rw-r--r--   0 eve        (501) staff       (20)     5263 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/_utils/deployments.py
+-rw-r--r--   0 eve        (501) staff       (20)     2717 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/_utils/ipfs.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.553664 web3-6.7.0/ethpm/_utils/protobuf/
+-rw-r--r--   0 eve        (501) staff       (20)        0 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/_utils/protobuf/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)     1938 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/_utils/protobuf/ipfs_file_pb2.py
+-rw-r--r--   0 eve        (501) staff       (20)     1488 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/_utils/registry.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.553895 web3-6.7.0/ethpm/assets/
+-rw-r--r--   0 eve        (501) staff       (20)        0 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/__init__.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.554025 web3-6.7.0/ethpm/assets/ens/
+-rw-r--r--   0 eve        (501) staff       (20)    74682 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/ens/v3.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.554543 web3-6.7.0/ethpm/assets/escrow/
+-rw-r--r--   0 eve        (501) staff       (20)     8007 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/escrow/with_bytecode_v3.json
+-rw-r--r--   0 eve        (501) staff       (20)      760 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/assets/ipfs_file.proto
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.554826 web3-6.7.0/ethpm/assets/owned/
+-rw-r--r--   0 eve        (501) staff       (20)     2655 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/owned/output_v3.json
+-rw-r--r--   0 eve        (501) staff       (20)      746 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/owned/with_contract_type_v3.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.556747 web3-6.7.0/ethpm/assets/registry/
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.560820 web3-6.7.0/ethpm/assets/registry/contracts/
+-rw-r--r--   0 eve        (501) staff       (20)     3129 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/registry/contracts/Authority.sol
+-rw-r--r--   0 eve        (501) staff       (20)     2876 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/registry/contracts/IndexedOrderedSetLib.sol
+-rw-r--r--   0 eve        (501) staff       (20)     6380 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/registry/contracts/PackageDB.sol
+-rw-r--r--   0 eve        (501) staff       (20)    10553 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/registry/contracts/PackageRegistry.sol
+-rw-r--r--   0 eve        (501) staff       (20)     2966 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/registry/contracts/PackageRegistryInterface.sol
+-rw-r--r--   0 eve        (501) staff       (20)     9041 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/registry/contracts/ReleaseDB.sol
+-rw-r--r--   0 eve        (501) staff       (20)     4980 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/registry/contracts/ReleaseValidator.sol
+-rw-r--r--   0 eve        (501) staff       (20)     1046 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/registry/solc_input.json
+-rw-r--r--   0 eve        (501) staff       (20)   727775 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/registry/solc_output.json
+-rw-r--r--   0 eve        (501) staff       (20)   270218 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/registry/v3.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.560959 web3-6.7.0/ethpm/assets/safe-math-lib/
+-rw-r--r--   0 eve        (501) staff       (20)     2845 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/safe-math-lib/v3-strict-no-deployments.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.562403 web3-6.7.0/ethpm/assets/simple-registry/
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.563590 web3-6.7.0/ethpm/assets/simple-registry/contracts/
+-rw-r--r--   0 eve        (501) staff       (20)     1841 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/simple-registry/contracts/Ownable.sol
+-rw-r--r--   0 eve        (501) staff       (20)    12350 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/simple-registry/contracts/PackageRegistry.sol
+-rw-r--r--   0 eve        (501) staff       (20)     3278 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/simple-registry/contracts/PackageRegistryInterface.sol
+-rw-r--r--   0 eve        (501) staff       (20)      950 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/simple-registry/solc_input.json
+-rw-r--r--   0 eve        (501) staff       (20)   199338 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/simple-registry/solc_output.json
+-rw-r--r--   0 eve        (501) staff       (20)    75677 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/simple-registry/v3.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.564254 web3-6.7.0/ethpm/assets/standard-token/
+-rw-r--r--   0 eve        (501) staff       (20)    22292 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/standard-token/output_v3.json
+-rw-r--r--   0 eve        (501) staff       (20)     8765 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/standard-token/with_bytecode_v3.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.565067 web3-6.7.0/ethpm/assets/vyper_registry/
+-rw-r--r--   0 eve        (501) staff       (20)    81363 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/vyper_registry/0.1.0.json
+-rw-r--r--   0 eve        (501) staff       (20)     6339 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/vyper_registry/registry.vy
+-rw-r--r--   0 eve        (501) staff       (20)     7596 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/assets/vyper_registry/registry_with_delete.vy
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.565717 web3-6.7.0/ethpm/backends/
+-rw-r--r--   0 eve        (501) staff       (20)        0 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/backends/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)      956 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/backends/base.py
+-rw-r--r--   0 eve        (501) staff       (20)     3006 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/backends/http.py
+-rw-r--r--   0 eve        (501) staff       (20)     6551 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/backends/ipfs.py
+-rw-r--r--   0 eve        (501) staff       (20)     4174 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/backends/registry.py
+-rw-r--r--   0 eve        (501) staff       (20)      405 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/constants.py
+-rw-r--r--   0 eve        (501) staff       (20)     6303 2023-07-26 18:35:55.000000 web3-6.7.0/ethpm/contract.py
+-rw-r--r--   0 eve        (501) staff       (20)     1890 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/dependencies.py
+-rw-r--r--   0 eve        (501) staff       (20)     2134 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/deployments.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.541802 web3-6.7.0/ethpm/ethpm-spec/
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.541572 web3-6.7.0/ethpm/ethpm-spec/examples/
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.566440 web3-6.7.0/ethpm/ethpm-spec/examples/escrow/
+-rw-r--r--   0 eve        (501) staff       (20)     6810 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/escrow/1.0.0-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)     5361 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/escrow/1.0.0.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.566719 web3-6.7.0/ethpm/ethpm-spec/examples/escrow/contracts/
+-rw-r--r--   0 eve        (501) staff       (20)      888 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/escrow/contracts/Escrow.sol
+-rw-r--r--   0 eve        (501) staff       (20)      644 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/escrow/contracts/SafeSendLib.sol
+-rw-r--r--   0 eve        (501) staff       (20)    11598 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/escrow/v3-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)     8669 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/escrow/v3.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.567270 web3-6.7.0/ethpm/ethpm-spec/examples/owned/
+-rw-r--r--   0 eve        (501) staff       (20)      544 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/owned/1.0.0-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)      443 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/owned/1.0.0.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.567410 web3-6.7.0/ethpm/ethpm-spec/examples/owned/contracts/
+-rw-r--r--   0 eve        (501) staff       (20)      222 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/owned/contracts/Owned.sol
+-rw-r--r--   0 eve        (501) staff       (20)      728 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/owned/v3-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)      478 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/owned/v3.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.567901 web3-6.7.0/ethpm/ethpm-spec/examples/piper-coin/
+-rw-r--r--   0 eve        (501) staff       (20)     5272 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/piper-coin/1.0.0-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)     5030 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/piper-coin/1.0.0.json
+-rw-r--r--   0 eve        (501) staff       (20)     5220 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/piper-coin/v3-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)     4993 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/piper-coin/v3.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.568557 web3-6.7.0/ethpm/ethpm-spec/examples/safe-math-lib/
+-rw-r--r--   0 eve        (501) staff       (20)     3976 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/safe-math-lib/1.0.0-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)     3143 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/safe-math-lib/1.0.0.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.568812 web3-6.7.0/ethpm/ethpm-spec/examples/safe-math-lib/contracts/
+-rw-r--r--   0 eve        (501) staff       (20)      802 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/safe-math-lib/contracts/SafeMathLib.sol
+-rw-r--r--   0 eve        (501) staff       (20)     5517 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/safe-math-lib/v3-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)     3289 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/safe-math-lib/v3.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.569366 web3-6.7.0/ethpm/ethpm-spec/examples/standard-token/
+-rw-r--r--   0 eve        (501) staff       (20)     3794 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/standard-token/1.0.0-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)     3238 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/standard-token/1.0.0.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.569620 web3-6.7.0/ethpm/ethpm-spec/examples/standard-token/contracts/
+-rw-r--r--   0 eve        (501) staff       (20)     1155 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/standard-token/contracts/AbstractToken.sol
+-rw-r--r--   0 eve        (501) staff       (20)     2949 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/standard-token/contracts/StandardToken.sol
+-rw-r--r--   0 eve        (501) staff       (20)    17129 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/standard-token/v3-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)     6100 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/standard-token/v3.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.570248 web3-6.7.0/ethpm/ethpm-spec/examples/transferable/
+-rw-r--r--   0 eve        (501) staff       (20)      590 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/transferable/1.0.0-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)      507 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/transferable/1.0.0.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.570481 web3-6.7.0/ethpm/ethpm-spec/examples/transferable/contracts/
+-rw-r--r--   0 eve        (501) staff       (20)      396 2022-04-27 21:13:00.000000 web3-6.7.0/ethpm/ethpm-spec/examples/transferable/contracts/Transferable.sol
+-rw-r--r--   0 eve        (501) staff       (20)      786 2022-04-27 21:13:00.000000 web3-6.7.0/ethpm/ethpm-spec/examples/transferable/v3-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)      548 2022-04-27 21:13:00.000000 web3-6.7.0/ethpm/ethpm-spec/examples/transferable/v3.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.571215 web3-6.7.0/ethpm/ethpm-spec/examples/wallet/
+-rw-r--r--   0 eve        (501) staff       (20)     6669 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/wallet/1.0.0-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)     5456 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/wallet/1.0.0.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.572073 web3-6.7.0/ethpm/ethpm-spec/examples/wallet/contracts/
+-rw-r--r--   0 eve        (501) staff       (20)     1454 2022-04-27 21:13:00.000000 web3-6.7.0/ethpm/ethpm-spec/examples/wallet/contracts/Wallet.sol
+-rw-r--r--   0 eve        (501) staff       (20)     9710 2022-04-27 21:13:00.000000 web3-6.7.0/ethpm/ethpm-spec/examples/wallet/v3-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)     7326 2022-04-27 21:13:00.000000 web3-6.7.0/ethpm/ethpm-spec/examples/wallet/v3.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.571800 web3-6.7.0/ethpm/ethpm-spec/examples/wallet-with-send/
+-rw-r--r--   0 eve        (501) staff       (20)     8052 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/wallet-with-send/1.0.0-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)     6657 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/examples/wallet-with-send/1.0.0.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.571938 web3-6.7.0/ethpm/ethpm-spec/examples/wallet-with-send/contracts/
+-rw-r--r--   0 eve        (501) staff       (20)      621 2022-04-27 21:13:00.000000 web3-6.7.0/ethpm/ethpm-spec/examples/wallet-with-send/contracts/WalletWithSend.sol
+-rw-r--r--   0 eve        (501) staff       (20)    12191 2022-04-27 21:13:00.000000 web3-6.7.0/ethpm/ethpm-spec/examples/wallet-with-send/v3-pretty.json
+-rw-r--r--   0 eve        (501) staff       (20)     9503 2022-04-27 21:13:00.000000 web3-6.7.0/ethpm/ethpm-spec/examples/wallet-with-send/v3.json
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.572458 web3-6.7.0/ethpm/ethpm-spec/spec/
+-rw-r--r--   0 eve        (501) staff       (20)    10302 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/spec/package.spec.json
+-rw-r--r--   0 eve        (501) staff       (20)    12879 2021-02-11 20:53:14.000000 web3-6.7.0/ethpm/ethpm-spec/spec/v3.spec.json
+-rw-r--r--   0 eve        (501) staff       (20)     1194 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/exceptions.py
+-rw-r--r--   0 eve        (501) staff       (20)    14494 2023-07-26 18:35:55.000000 web3-6.7.0/ethpm/package.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.575742 web3-6.7.0/ethpm/tools/
+-rw-r--r--   0 eve        (501) staff       (20)      103 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/tools/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)    27045 2023-07-26 18:35:55.000000 web3-6.7.0/ethpm/tools/builder.py
+-rw-r--r--   0 eve        (501) staff       (20)    10373 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/tools/checker.py
+-rw-r--r--   0 eve        (501) staff       (20)      475 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/tools/get_manifest.py
+-rw-r--r--   0 eve        (501) staff       (20)     4368 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/uri.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.576580 web3-6.7.0/ethpm/validation/
+-rw-r--r--   0 eve        (501) staff       (20)        0 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/validation/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)     4716 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/validation/manifest.py
+-rw-r--r--   0 eve        (501) staff       (20)     1072 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/validation/misc.py
+-rw-r--r--   0 eve        (501) staff       (20)     2317 2023-04-06 21:34:13.000000 web3-6.7.0/ethpm/validation/package.py
+-rw-r--r--   0 eve        (501) staff       (20)     4873 2023-06-26 17:45:20.000000 web3-6.7.0/ethpm/validation/uri.py
+-rw-r--r--   0 eve        (501) staff       (20)     1202 2023-07-07 17:27:16.000000 web3-6.7.0/pyproject.toml
+-rw-r--r--   0 eve        (501) staff       (20)       38 2023-07-26 18:44:05.608233 web3-6.7.0/setup.cfg
+-rw-r--r--   0 eve        (501) staff       (20)     3076 2023-07-26 18:43:59.000000 web3-6.7.0/setup.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.580173 web3-6.7.0/web3/
+-rw-r--r--   0 eve        (501) staff       (20)      804 2023-07-26 18:35:55.000000 web3-6.7.0/web3/__init__.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.587592 web3-6.7.0/web3/_utils/
+-rw-r--r--   0 eve        (501) staff       (20)        0 2023-04-06 21:34:13.000000 web3-6.7.0/web3/_utils/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)    31000 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/abi.py
+-rw-r--r--   0 eve        (501) staff       (20)      456 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/async_caching.py
+-rw-r--r--   0 eve        (501) staff       (20)     8123 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/async_transactions.py
+-rw-r--r--   0 eve        (501) staff       (20)     2059 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/blocks.py
+-rw-r--r--   0 eve        (501) staff       (20)     1489 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/caching.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.587742 web3-6.7.0/web3/_utils/compat/
+-rw-r--r--   0 eve        (501) staff       (20)      580 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/compat/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)     5425 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/contract_error_handling.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.587988 web3-6.7.0/web3/_utils/contract_sources/
+-rw-r--r--   0 eve        (501) staff       (20)        0 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/contract_sources/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)     6492 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/contract_sources/compile_contracts.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.592210 web3-6.7.0/web3/_utils/contract_sources/contract_data/
+-rw-r--r--   0 eve        (501) staff       (20)        0 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)      517 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/_custom_contract_data.py
+-rw-r--r--   0 eve        (501) staff       (20)     5344 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/address_reflector.py
+-rw-r--r--   0 eve        (501) staff       (20)    18852 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/arrays_contract.py
+-rw-r--r--   0 eve        (501) staff       (20)    14783 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/bytes_contracts.py
+-rw-r--r--   0 eve        (501) staff       (20)     6089 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/constructor_contracts.py
+-rw-r--r--   0 eve        (501) staff       (20)     6334 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/contract_caller_tester.py
+-rw-r--r--   0 eve        (501) staff       (20)    37881 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/emitter_contract.py
+-rw-r--r--   0 eve        (501) staff       (20)     5573 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/event_contracts.py
+-rw-r--r--   0 eve        (501) staff       (20)    15824 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/extended_resolver.py
+-rw-r--r--   0 eve        (501) staff       (20)     1651 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/fallback_function_contract.py
+-rw-r--r--   0 eve        (501) staff       (20)     7637 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/math_contract.py
+-rw-r--r--   0 eve        (501) staff       (20)    16716 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/offchain_lookup.py
+-rw-r--r--   0 eve        (501) staff       (20)    32645 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/offchain_resolver.py
+-rw-r--r--   0 eve        (501) staff       (20)    15579 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/panic_errors_contract.py
+-rw-r--r--   0 eve        (501) staff       (20)     1825 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/payable_tester.py
+-rw-r--r--   0 eve        (501) staff       (20)    17290 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/receive_function_contracts.py
+-rw-r--r--   0 eve        (501) staff       (20)     5264 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/reflector_contracts.py
+-rw-r--r--   0 eve        (501) staff       (20)     4264 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/revert_contract.py
+-rw-r--r--   0 eve        (501) staff       (20)     3555 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/simple_resolver.py
+-rw-r--r--   0 eve        (501) staff       (20)     8238 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/storage_contract.py
+-rw-r--r--   0 eve        (501) staff       (20)    11586 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/string_contract.py
+-rw-r--r--   0 eve        (501) staff       (20)    23180 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/contract_sources/contract_data/tuple_contracts.py
+-rw-r--r--   0 eve        (501) staff       (20)    14980 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/contracts.py
+-rw-r--r--   0 eve        (501) staff       (20)     1640 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/datatypes.py
+-rw-r--r--   0 eve        (501) staff       (20)     1738 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/decorators.py
+-rw-r--r--   0 eve        (501) staff       (20)      144 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/empty.py
+-rw-r--r--   0 eve        (501) staff       (20)     9065 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/encoding.py
+-rw-r--r--   0 eve        (501) staff       (20)     2388 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/ens.py
+-rw-r--r--   0 eve        (501) staff       (20)    17198 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/events.py
+-rw-r--r--   0 eve        (501) staff       (20)     2113 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/fee_utils.py
+-rw-r--r--   0 eve        (501) staff       (20)    11886 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/filters.py
+-rw-r--r--   0 eve        (501) staff       (20)     3071 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/formatters.py
+-rw-r--r--   0 eve        (501) staff       (20)       55 2023-04-06 21:34:13.000000 web3-6.7.0/web3/_utils/function_identifiers.py
+-rw-r--r--   0 eve        (501) staff       (20)      195 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/http.py
+-rw-r--r--   0 eve        (501) staff       (20)      209 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/hypothesis.py
+-rw-r--r--   0 eve        (501) staff       (20)     1047 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/math.py
+-rw-r--r--   0 eve        (501) staff       (20)    31322 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/method_formatters.py
+-rw-r--r--   0 eve        (501) staff       (20)     1146 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/miner.py
+-rw-r--r--   0 eve        (501) staff       (20)     3147 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/module.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.594779 web3-6.7.0/web3/_utils/module_testing/
+-rw-r--r--   0 eve        (501) staff       (20)      539 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/module_testing/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)   179917 2023-07-26 18:36:00.000000 web3-6.7.0/web3/_utils/module_testing/eth_module.py
+-rw-r--r--   0 eve        (501) staff       (20)     3406 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/module_testing/go_ethereum_admin_module.py
+-rw-r--r--   0 eve        (501) staff       (20)    10432 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/module_testing/go_ethereum_personal_module.py
+-rw-r--r--   0 eve        (501) staff       (20)     1176 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/module_testing/go_ethereum_txpool_module.py
+-rw-r--r--   0 eve        (501) staff       (20)     4825 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/module_testing/module_testing_utils.py
+-rw-r--r--   0 eve        (501) staff       (20)     1272 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/module_testing/net_module.py
+-rw-r--r--   0 eve        (501) staff       (20)     9613 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/module_testing/web3_module.py
+-rw-r--r--   0 eve        (501) staff       (20)     7447 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/normalizers.py
+-rw-r--r--   0 eve        (501) staff       (20)     8833 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/request.py
+-rw-r--r--   0 eve        (501) staff       (20)     9611 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/rpc_abi.py
+-rw-r--r--   0 eve        (501) staff       (20)     4207 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/threads.py
+-rw-r--r--   0 eve        (501) staff       (20)     8737 2023-07-07 17:27:16.000000 web3-6.7.0/web3/_utils/transactions.py
+-rw-r--r--   0 eve        (501) staff       (20)      816 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/type_conversion.py
+-rw-r--r--   0 eve        (501) staff       (20)     2279 2023-07-26 18:35:55.000000 web3-6.7.0/web3/_utils/utility_methods.py
+-rw-r--r--   0 eve        (501) staff       (20)     6291 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/validation.py
+-rw-r--r--   0 eve        (501) staff       (20)      994 2023-06-26 17:45:20.000000 web3-6.7.0/web3/_utils/windows.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.595146 web3-6.7.0/web3/auto/
+-rw-r--r--   0 eve        (501) staff       (20)       44 2023-06-26 17:45:20.000000 web3-6.7.0/web3/auto/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)      263 2023-07-26 18:35:55.000000 web3-6.7.0/web3/auto/gethdev.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.595646 web3-6.7.0/web3/beacon/
+-rw-r--r--   0 eve        (501) staff       (20)       91 2023-06-26 17:45:20.000000 web3-6.7.0/web3/beacon/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)     1516 2023-06-26 17:45:20.000000 web3-6.7.0/web3/beacon/api_endpoints.py
+-rw-r--r--   0 eve        (501) staff       (20)     5421 2023-06-26 17:45:20.000000 web3-6.7.0/web3/beacon/async_beacon.py
+-rw-r--r--   0 eve        (501) staff       (20)     4772 2023-06-26 17:45:20.000000 web3-6.7.0/web3/beacon/main.py
+-rw-r--r--   0 eve        (501) staff       (20)      396 2023-06-26 17:45:20.000000 web3-6.7.0/web3/constants.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.596310 web3-6.7.0/web3/contract/
+-rw-r--r--   0 eve        (501) staff       (20)      215 2023-06-26 17:45:20.000000 web3-6.7.0/web3/contract/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)    19820 2023-07-26 18:35:55.000000 web3-6.7.0/web3/contract/async_contract.py
+-rw-r--r--   0 eve        (501) staff       (20)    35727 2023-07-26 18:35:55.000000 web3-6.7.0/web3/contract/base_contract.py
+-rw-r--r--   0 eve        (501) staff       (20)    18940 2023-07-26 18:35:55.000000 web3-6.7.0/web3/contract/contract.py
+-rw-r--r--   0 eve        (501) staff       (20)    12309 2023-07-26 18:35:55.000000 web3-6.7.0/web3/contract/utils.py
+-rw-r--r--   0 eve        (501) staff       (20)     9104 2023-07-07 17:27:16.000000 web3-6.7.0/web3/datastructures.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.597072 web3-6.7.0/web3/eth/
+-rw-r--r--   0 eve        (501) staff       (20)      166 2023-06-26 17:45:20.000000 web3-6.7.0/web3/eth/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)    22466 2023-07-26 18:35:55.000000 web3-6.7.0/web3/eth/async_eth.py
+-rw-r--r--   0 eve        (501) staff       (20)     5943 2023-06-26 17:45:20.000000 web3-6.7.0/web3/eth/base_eth.py
+-rw-r--r--   0 eve        (501) staff       (20)    19339 2023-07-26 18:35:55.000000 web3-6.7.0/web3/eth/eth.py
+-rw-r--r--   0 eve        (501) staff       (20)     6445 2023-07-26 18:35:55.000000 web3-6.7.0/web3/exceptions.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.597538 web3-6.7.0/web3/gas_strategies/
+-rw-r--r--   0 eve        (501) staff       (20)        0 2023-04-06 21:34:13.000000 web3-6.7.0/web3/gas_strategies/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)      352 2023-07-26 18:36:00.000000 web3-6.7.0/web3/gas_strategies/rpc.py
+-rw-r--r--   0 eve        (501) staff       (20)     9010 2023-06-26 17:45:20.000000 web3-6.7.0/web3/gas_strategies/time_based.py
+-rw-r--r--   0 eve        (501) staff       (20)    11826 2023-06-26 17:45:20.000000 web3-6.7.0/web3/geth.py
+-rw-r--r--   0 eve        (501) staff       (20)      198 2023-04-06 21:34:13.000000 web3-6.7.0/web3/logs.py
+-rw-r--r--   0 eve        (501) staff       (20)    15049 2023-07-26 18:35:55.000000 web3-6.7.0/web3/main.py
+-rw-r--r--   0 eve        (501) staff       (20)    12170 2023-07-26 18:35:55.000000 web3-6.7.0/web3/manager.py
+-rw-r--r--   0 eve        (501) staff       (20)     8430 2023-07-07 17:27:26.000000 web3-6.7.0/web3/method.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.601775 web3-6.7.0/web3/middleware/
+-rw-r--r--   0 eve        (501) staff       (20)     3848 2023-07-26 18:35:55.000000 web3-6.7.0/web3/middleware/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)      239 2023-04-06 21:34:13.000000 web3-6.7.0/web3/middleware/abi.py
+-rw-r--r--   0 eve        (501) staff       (20)     3222 2023-07-07 17:27:16.000000 web3-6.7.0/web3/middleware/async_cache.py
+-rw-r--r--   0 eve        (501) staff       (20)     2630 2023-07-26 18:35:55.000000 web3-6.7.0/web3/middleware/attrdict.py
+-rw-r--r--   0 eve        (501) staff       (20)     1785 2023-06-26 17:45:20.000000 web3-6.7.0/web3/middleware/buffered_gas_estimate.py
+-rw-r--r--   0 eve        (501) staff       (20)    12880 2023-07-07 17:27:16.000000 web3-6.7.0/web3/middleware/cache.py
+-rw-r--r--   0 eve        (501) staff       (20)     1167 2023-06-26 17:45:20.000000 web3-6.7.0/web3/middleware/exception_handling.py
+-rw-r--r--   0 eve        (501) staff       (20)     4453 2023-07-26 18:35:55.000000 web3-6.7.0/web3/middleware/exception_retry_request.py
+-rw-r--r--   0 eve        (501) staff       (20)    21131 2023-06-26 17:45:20.000000 web3-6.7.0/web3/middleware/filter.py
+-rw-r--r--   0 eve        (501) staff       (20)     6434 2023-07-26 18:35:55.000000 web3-6.7.0/web3/middleware/fixture.py
+-rw-r--r--   0 eve        (501) staff       (20)     5647 2023-07-26 18:35:55.000000 web3-6.7.0/web3/middleware/formatting.py
+-rw-r--r--   0 eve        (501) staff       (20)     4317 2023-07-26 18:36:00.000000 web3-6.7.0/web3/middleware/gas_price_strategy.py
+-rw-r--r--   0 eve        (501) staff       (20)     1657 2023-06-26 17:45:20.000000 web3-6.7.0/web3/middleware/geth_poa.py
+-rw-r--r--   0 eve        (501) staff       (20)     3336 2023-07-26 18:35:55.000000 web3-6.7.0/web3/middleware/names.py
+-rw-r--r--   0 eve        (501) staff       (20)      246 2023-06-15 16:48:05.000000 web3-6.7.0/web3/middleware/normalize_request_parameters.py
+-rw-r--r--   0 eve        (501) staff       (20)      351 2023-06-15 16:48:05.000000 web3-6.7.0/web3/middleware/pythonic.py
+-rw-r--r--   0 eve        (501) staff       (20)     6605 2023-07-26 18:35:55.000000 web3-6.7.0/web3/middleware/signing.py
+-rw-r--r--   0 eve        (501) staff       (20)     1014 2023-06-26 17:45:20.000000 web3-6.7.0/web3/middleware/simulate_unmined_transaction.py
+-rw-r--r--   0 eve        (501) staff       (20)     3739 2023-06-26 17:45:20.000000 web3-6.7.0/web3/middleware/stalecheck.py
+-rw-r--r--   0 eve        (501) staff       (20)     4548 2023-07-26 18:35:55.000000 web3-6.7.0/web3/middleware/validation.py
+-rw-r--r--   0 eve        (501) staff       (20)     4516 2023-07-26 18:35:55.000000 web3-6.7.0/web3/module.py
+-rw-r--r--   0 eve        (501) staff       (20)     1562 2023-06-26 17:45:20.000000 web3-6.7.0/web3/net.py
+-rw-r--r--   0 eve        (501) staff       (20)    21608 2023-07-26 18:35:55.000000 web3-6.7.0/web3/pm.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.603016 web3-6.7.0/web3/providers/
+-rw-r--r--   0 eve        (501) staff       (20)      529 2023-07-26 18:35:55.000000 web3-6.7.0/web3/providers/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)     4381 2023-07-26 18:35:55.000000 web3-6.7.0/web3/providers/async_base.py
+-rw-r--r--   0 eve        (501) staff       (20)     2879 2023-07-26 18:35:55.000000 web3-6.7.0/web3/providers/async_rpc.py
+-rw-r--r--   0 eve        (501) staff       (20)     3447 2023-07-12 20:46:12.000000 web3-6.7.0/web3/providers/auto.py
+-rw-r--r--   0 eve        (501) staff       (20)     4149 2023-07-26 18:35:55.000000 web3-6.7.0/web3/providers/base.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.603844 web3-6.7.0/web3/providers/eth_tester/
+-rw-r--r--   0 eve        (501) staff       (20)       97 2023-06-26 17:45:20.000000 web3-6.7.0/web3/providers/eth_tester/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)    14740 2023-07-26 18:35:55.000000 web3-6.7.0/web3/providers/eth_tester/defaults.py
+-rw-r--r--   0 eve        (501) staff       (20)     5512 2023-07-07 17:27:16.000000 web3-6.7.0/web3/providers/eth_tester/main.py
+-rw-r--r--   0 eve        (501) staff       (20)    12861 2023-07-07 17:27:16.000000 web3-6.7.0/web3/providers/eth_tester/middleware.py
+-rw-r--r--   0 eve        (501) staff       (20)     6374 2023-07-26 18:35:55.000000 web3-6.7.0/web3/providers/ipc.py
+-rw-r--r--   0 eve        (501) staff       (20)     6513 2023-07-26 18:35:55.000000 web3-6.7.0/web3/providers/persistent.py
+-rw-r--r--   0 eve        (501) staff       (20)     2686 2023-06-26 17:45:20.000000 web3-6.7.0/web3/providers/rpc.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.604420 web3-6.7.0/web3/providers/websocket/
+-rw-r--r--   0 eve        (501) staff       (20)      133 2023-07-26 18:35:55.000000 web3-6.7.0/web3/providers/websocket/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)     3929 2023-07-26 18:35:55.000000 web3-6.7.0/web3/providers/websocket/websocket.py
+-rw-r--r--   0 eve        (501) staff       (20)     3809 2023-07-26 18:35:55.000000 web3-6.7.0/web3/providers/websocket/websocket_v2.py
+-rw-r--r--   0 eve        (501) staff       (20)        0 2023-04-06 21:34:13.000000 web3-6.7.0/web3/py.typed
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.604548 web3-6.7.0/web3/scripts/
+-rw-r--r--   0 eve        (501) staff       (20)        0 2023-04-06 21:34:13.000000 web3-6.7.0/web3/scripts/__init__.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.604722 web3-6.7.0/web3/scripts/release/
+-rw-r--r--   0 eve        (501) staff       (20)        0 2023-04-06 21:34:13.000000 web3-6.7.0/web3/scripts/release/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)     1534 2023-06-26 17:45:20.000000 web3-6.7.0/web3/scripts/release/test_package.py
+-rw-r--r--   0 eve        (501) staff       (20)      951 2023-04-06 21:34:13.000000 web3-6.7.0/web3/testing.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.604866 web3-6.7.0/web3/tools/
+-rw-r--r--   0 eve        (501) staff       (20)       73 2023-04-06 21:34:13.000000 web3-6.7.0/web3/tools/__init__.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.605765 web3-6.7.0/web3/tools/benchmark/
+-rw-r--r--   0 eve        (501) staff       (20)        0 2023-04-06 21:34:13.000000 web3-6.7.0/web3/tools/benchmark/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)     5886 2023-07-20 21:55:14.000000 web3-6.7.0/web3/tools/benchmark/main.py
+-rw-r--r--   0 eve        (501) staff       (20)     3435 2023-07-26 18:35:55.000000 web3-6.7.0/web3/tools/benchmark/node.py
+-rw-r--r--   0 eve        (501) staff       (20)      912 2023-06-26 17:45:20.000000 web3-6.7.0/web3/tools/benchmark/reporting.py
+-rw-r--r--   0 eve        (501) staff       (20)     1722 2023-07-20 21:55:14.000000 web3-6.7.0/web3/tools/benchmark/utils.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.606789 web3-6.7.0/web3/tools/pytest_ethereum/
+-rw-r--r--   0 eve        (501) staff       (20)        0 2023-04-06 21:34:13.000000 web3-6.7.0/web3/tools/pytest_ethereum/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)     4158 2023-06-26 17:45:20.000000 web3-6.7.0/web3/tools/pytest_ethereum/_utils.py
+-rw-r--r--   0 eve        (501) staff       (20)     1423 2023-06-26 17:45:20.000000 web3-6.7.0/web3/tools/pytest_ethereum/deployer.py
+-rw-r--r--   0 eve        (501) staff       (20)      380 2023-04-06 21:34:13.000000 web3-6.7.0/web3/tools/pytest_ethereum/exceptions.py
+-rw-r--r--   0 eve        (501) staff       (20)     3927 2023-06-26 17:45:20.000000 web3-6.7.0/web3/tools/pytest_ethereum/linker.py
+-rw-r--r--   0 eve        (501) staff       (20)      645 2023-06-26 17:45:20.000000 web3-6.7.0/web3/tools/pytest_ethereum/plugins.py
+-rw-r--r--   0 eve        (501) staff       (20)     2968 2023-07-07 17:27:16.000000 web3-6.7.0/web3/tracing.py
+-rw-r--r--   0 eve        (501) staff       (20)    12459 2023-07-26 18:35:55.000000 web3-6.7.0/web3/types.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.607829 web3-6.7.0/web3/utils/
+-rw-r--r--   0 eve        (501) staff       (20)      454 2023-06-26 17:45:20.000000 web3-6.7.0/web3/utils/__init__.py
+-rw-r--r--   0 eve        (501) staff       (20)      498 2023-06-26 17:45:20.000000 web3-6.7.0/web3/utils/abi.py
+-rw-r--r--   0 eve        (501) staff       (20)      967 2023-06-26 17:45:20.000000 web3-6.7.0/web3/utils/address.py
+-rw-r--r--   0 eve        (501) staff       (20)     3096 2023-06-26 17:45:20.000000 web3-6.7.0/web3/utils/async_exception_handling.py
+-rw-r--r--   0 eve        (501) staff       (20)     1662 2023-07-26 18:35:55.000000 web3-6.7.0/web3/utils/caching.py
+-rw-r--r--   0 eve        (501) staff       (20)     3052 2023-06-26 17:45:20.000000 web3-6.7.0/web3/utils/exception_handling.py
+drwxr-xr-x   0 eve        (501) staff       (20)        0 2023-07-26 18:44:05.581031 web3-6.7.0/web3.egg-info/
+-rw-r--r--   0 eve        (501) staff       (20)     2198 2023-07-26 18:44:05.000000 web3-6.7.0/web3.egg-info/PKG-INFO
+-rw-r--r--   0 eve        (501) staff       (20)    10038 2023-07-26 18:44:05.000000 web3-6.7.0/web3.egg-info/SOURCES.txt
+-rw-r--r--   0 eve        (501) staff       (20)        1 2023-07-26 18:44:05.000000 web3-6.7.0/web3.egg-info/dependency_links.txt
+-rw-r--r--   0 eve        (501) staff       (20)       64 2023-07-26 18:44:05.000000 web3-6.7.0/web3.egg-info/entry_points.txt
+-rw-r--r--   0 eve        (501) staff       (20)        1 2023-07-26 18:44:05.000000 web3-6.7.0/web3.egg-info/not-zip-safe
+-rw-r--r--   0 eve        (501) staff       (20)     1139 2023-07-26 18:44:05.000000 web3-6.7.0/web3.egg-info/requires.txt
+-rw-r--r--   0 eve        (501) staff       (20)       15 2023-07-26 18:44:05.000000 web3-6.7.0/web3.egg-info/top_level.txt
```

### Comparing `web3-6.6.1/LICENSE` & `web3-6.7.0/LICENSE`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/PKG-INFO` & `web3-6.7.0/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: web3
-Version: 6.6.1
+Version: 6.7.0
 Summary: web3.py
 Home-page: https://github.com/ethereum/web3.py
 Author: The Ethereum Foundation
 Author-email: snakecharmers@ethereum.org
 License: MIT
 Keywords: ethereum
 Classifier: Development Status :: 5 - Production/Stable
```

### Comparing `web3-6.6.1/README.md` & `web3-6.7.0/README.md`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ens/_normalization.py` & `web3-6.7.0/ens/_normalization.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ens/abis.py` & `web3-6.7.0/ens/abis.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ens/async_ens.py` & `web3-6.7.0/ens/async_ens.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,12 +1,13 @@
 from copy import (
     deepcopy,
 )
 from typing import (
     TYPE_CHECKING,
+    Any,
     Optional,
     Sequence,
     Tuple,
     Union,
     cast,
 )
 
@@ -33,17 +34,18 @@
     abis,
 )
 from ens.base_ens import (
     BaseENS,
 )
 from ens.constants import (
     EMPTY_ADDR_HEX,
+    ENS_EXTENDED_RESOLVER_INTERFACE_ID,
     ENS_MAINNET_ADDR,
-    EXTENDED_RESOLVER_INTERFACE_ID,
-    GET_TEXT_INTERFACE_ID,
+    ENS_MULTICHAIN_ADDRESS_INTERFACE_ID,
+    ENS_TEXT_INTERFACE_ID,
     REVERSE_REGISTRAR_DOMAIN,
 )
 from ens.exceptions import (
     AddressMismatch,
     ResolverNotFound,
     UnauthorizedError,
     UnownedName,
@@ -60,16 +62,17 @@
     label_to_hash,
     normal_name_to_hash,
     normalize_name,
     raw_name_to_hash,
 )
 
 if TYPE_CHECKING:
-    from web3.contract import (  # noqa: F401
+    from web3.contract.async_contract import (  # noqa: F401
         AsyncContract,
+        AsyncContractFunction,
     )
     from web3.main import AsyncWeb3  # noqa: F401
     from web3.providers import (  # noqa: F401
         AsyncBaseProvider,
         BaseProvider,
     )
     from web3.types import (  # noqa: F401
@@ -130,29 +133,48 @@
         )
 
         # inherit strict bytes checking from w3 instance
         ns.strict_bytes_type_checking = w3.strict_bytes_type_checking
 
         return ns
 
-    async def address(self, name: str) -> Optional[ChecksumAddress]:
+    async def address(
+        self,
+        name: str,
+        coin_type: Optional[int] = None,
+    ) -> Optional[ChecksumAddress]:
         """
         Look up the Ethereum address that `name` currently points to.
 
         :param str name: an ENS name to look up
+        :param int coin_type: if provided, look up the address for this coin type
         :raises InvalidName: if `name` has invalid syntax
         """
-        return cast(ChecksumAddress, await self._resolve(name, "addr"))
+        r = await self.resolver(name)
+        if coin_type is None:
+            # don't validate `addr(bytes32)` interface id since extended resolvers
+            # can implement a "resolve" function as of ENSIP-10
+            return cast(ChecksumAddress, await self._resolve(name, "addr"))
+        else:
+            await _async_validate_resolver_and_interface_id(
+                name, r, ENS_MULTICHAIN_ADDRESS_INTERFACE_ID, "addr(bytes32,uint256)"
+            )
+            node = raw_name_to_hash(name)
+            address_as_bytes = await r.caller.addr(node, coin_type)
+            if is_none_or_zero_address(address_as_bytes):
+                return None
+            return to_checksum_address(address_as_bytes)
 
     async def setup_address(
         self,
         name: str,
         address: Union[Address, ChecksumAddress, HexAddress] = cast(
             ChecksumAddress, default
         ),
+        coin_type: Optional[int] = None,
         transact: Optional["TxParams"] = None,
     ) -> Optional[HexBytes]:
         """
         Set up the name to point to the supplied address.
         The sender of the transaction must own the name, or
         its parent name.
 
@@ -160,14 +182,15 @@
         and calls this method with ``sub.parentname.eth``,
         then ``sub`` will be created as part of this call.
 
         :param str name: ENS name to set up
         :param str address: name will point to this address, in checksum format.
             If ``None``, erase the record. If not specified, name will point
             to the owner's address.
+        :param int coin_type: if provided, set up the address for this coin type
         :param dict transact: the transaction configuration, like in
             :meth:`~web3.eth.Eth.send_transaction`
         :raises InvalidName: if ``name`` has invalid syntax
         :raises UnauthorizedError: if ``'from'`` in `transact` does not own `name`
         """
         if not transact:
             transact = {}
@@ -185,17 +208,22 @@
         if await self.address(name) == address:
             return None
         if address is None:
             address = EMPTY_ADDR_HEX
         transact["from"] = owner
 
         resolver: "AsyncContract" = await self._set_resolver(name, transact=transact)
-        return await resolver.functions.setAddr(
-            raw_name_to_hash(name), address
-        ).transact(transact)
+        node = raw_name_to_hash(name)
+
+        if coin_type is None:
+            return await resolver.functions.setAddr(node, address).transact(transact)
+        else:
+            return await resolver.functions.setAddr(node, coin_type, address).transact(
+                transact
+            )
 
     async def name(self, address: ChecksumAddress) -> Optional[str]:
         """
         Look up the name that the address points to, using a
         reverse lookup. Reverse lookup is opt-in for name owners.
 
         :param address:
@@ -218,15 +246,15 @@
     ) -> HexBytes:
         """
         Set up the address for reverse lookup, aka "caller ID".
         After successful setup, the method :meth:`~ens.ENS.name` will return
         `name` when supplied with `address`.
 
         :param str name: ENS name that address will point to
-        :param str address: to set up, in checksum format
+        :param str address: address to set up, in checksum format
         :param dict transact: the transaction configuration, like in
             :meth:`~web3.eth.send_transaction`
         :raises AddressMismatch: if the name does not already point to the address
         :raises InvalidName: if `name` has invalid syntax
         :raises UnauthorizedError: if ``'from'`` in `transact` does not own `name`
         :raises UnownedName: if no one owns `name`
         """
@@ -338,14 +366,16 @@
 
     async def reverser(
         self, target_address: ChecksumAddress
     ) -> Optional["AsyncContract"]:
         reversed_domain = address_to_reverse_domain(target_address)
         return await self.resolver(reversed_domain)
 
+    # -- text records -- #
+
     async def get_text(self, name: str, key: str) -> str:
         """
         Get the value of a text record by key from an ENS name.
 
         :param str name: ENS name to look up
         :param str key: ENS name's text record key
         :return: ENS name's text record value
@@ -353,72 +383,51 @@
         :raises UnsupportedFunction: If the resolver does not support
             the "0x59d1d43c" interface id
         :raises ResolverNotFound: If no resolver is found for the provided name
         """
         node = raw_name_to_hash(name)
 
         r = await self.resolver(name)
-        if r:
-            if await _async_resolver_supports_interface(r, GET_TEXT_INTERFACE_ID):
-                return await r.caller.text(node, key)
-            else:
-                raise UnsupportedFunction(
-                    f"Resolver for name {name} does not support `text` function."
-                )
-        else:
-            raise ResolverNotFound(
-                f"No resolver found for name `{name}`. It is likely the name "
-                "contains an unsupported top level domain (tld)."
-            )
+        await _async_validate_resolver_and_interface_id(
+            name, r, ENS_TEXT_INTERFACE_ID, "text"
+        )
+        return await r.caller.text(node, key)
 
     async def set_text(
         self,
         name: str,
         key: str,
         value: str,
         transact: "TxParams" = None,
     ) -> HexBytes:
         """
         Set the value of a text record of an ENS name.
 
         :param str name: ENS name
-        :param str key: Name of the attribute to set
+        :param str key: The name of the attribute to set
         :param str value: Value to set the attribute to
         :param dict transact: The transaction configuration, like in
             :meth:`~web3.eth.Eth.send_transaction`
         :return: Transaction hash
         :rtype: HexBytes
         :raises UnsupportedFunction: If the resolver does not support
             the "0x59d1d43c" interface id
         :raises ResolverNotFound: If no resolver is found for the provided name
         """
-        if not transact:
-            transact = {}
-
-        owner = await self.owner(name)
+        r = await self.resolver(name)
+        await _async_validate_resolver_and_interface_id(
+            name, r, ENS_TEXT_INTERFACE_ID, "setText"
+        )
         node = raw_name_to_hash(name)
-        normal_name = normalize_name(name)
 
-        transaction_dict = merge({"from": owner}, transact)
+        return await self._set_property(
+            name, r.functions.setText, (node, key, value), transact
+        )
 
-        r = await self.resolver(normal_name)
-        if r:
-            if await _async_resolver_supports_interface(r, GET_TEXT_INTERFACE_ID):
-                return await r.functions.setText(node, key, value).transact(
-                    transaction_dict
-                )
-            else:
-                raise UnsupportedFunction(
-                    f"Resolver for name `{name}` does not support `text` function"
-                )
-        else:
-            raise ResolverNotFound(
-                f"No resolver found for name `{name}`. It is likely the name contains "
-                "an unsupported top level domain (tld)."
-            )
+    # -- private methods -- #
 
     async def _get_resolver(
         self,
         normal_name: str,
         fn_name: str = "addr",
     ) -> Tuple[Optional["AsyncContract"], str]:
         current_name = normal_name
@@ -473,15 +482,15 @@
         if not resolver:
             return None
 
         node = self.namehash(normal_name)
 
         # handle extended resolver case
         if await _async_resolver_supports_interface(
-            resolver, EXTENDED_RESOLVER_INTERFACE_ID
+            resolver, ENS_EXTENDED_RESOLVER_INTERFACE_ID
         ):
             contract_func_with_args = (fn_name, [node])
 
             calldata = resolver.encodeABI(*contract_func_with_args)
             contract_call_result = await resolver.caller.resolve(
                 ens_encode_name(normal_name),
                 calldata,
@@ -564,15 +573,48 @@
 
     async def _reverse_registrar(self) -> "AsyncContract":
         addr = await self.ens.caller.owner(
             normal_name_to_hash(REVERSE_REGISTRAR_DOMAIN)
         )
         return self.w3.eth.contract(address=addr, abi=abis.REVERSE_REGISTRAR)
 
+    async def _set_property(
+        self,
+        name: str,
+        func: "AsyncContractFunction",
+        args: Sequence[Any],
+        transact: "TxParams" = None,
+    ) -> HexBytes:
+        if not transact:
+            transact = {}
+
+        owner = await self.owner(name)
+        transact_from_owner = merge({"from": owner}, transact)
+
+        return await func(*args).transact(transact_from_owner)
+
 
 async def _async_resolver_supports_interface(
     resolver: "AsyncContract",
     interface_id: HexStr,
 ) -> bool:
-    if not any("supportsInterface" in repr(func) for func in resolver.all_functions()):
-        return False
-    return await resolver.caller.supportsInterface(interface_id)
+    return any(
+        "supportsInterface" in repr(func) for func in resolver.all_functions()
+    ) and await resolver.caller.supportsInterface(interface_id)
+
+
+async def _async_validate_resolver_and_interface_id(
+    ens_name: str,
+    resolver: "AsyncContract",
+    ens_interface_id: HexStr,
+    interface_name: str,
+) -> None:
+    if not resolver:
+        raise ResolverNotFound(
+            f"No resolver found for name `{ens_name}`. It is likely the name "
+            "contains an unsupported top level domain (tld)."
+        )
+    elif not await _async_resolver_supports_interface(resolver, ens_interface_id):
+        raise UnsupportedFunction(
+            f"Resolver for name `{ens_name}` does not support the `{interface_name}` "
+            f"interface."
+        )
```

### Comparing `web3-6.6.1/ens/base_ens.py` & `web3-6.7.0/ens/base_ens.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ens/contract_data.py` & `web3-6.7.0/ens/contract_data.py`

 * *Files 14% similar despite different names*

```diff
@@ -1,10 +1,18 @@
 # flake8: noqa
 import json
 
+"""
+This contract data is taken from the actual ENS contracts deployed on mainnet.
+The information was taken from etherscan.io and may need to be updated as the ENS 
+contracts are updated. 
+
+https://etherscan.io/accounts/label/ens
+"""
+
 # ENS Default Registrar
 registrar_abi = json.loads(
     '[{"inputs":[{"internalType":"contract ENS","name":"_ens","type":"address"},{"internalType":"bytes32","name":"_baseNode","type":"bytes32"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"controller","type":"address"}],"name":"ControllerAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"controller","type":"address"}],"name":"ControllerRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"expires","type":"uint256"}],"name":"NameMigrated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"expires","type":"uint256"}],"name":"NameRegistered","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"expires","type":"uint256"}],"name":"NameRenewed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"constant":true,"inputs":[],"name":"GRACE_PERIOD","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"controller","type":"address"}],"name":"addController","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"available","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"baseNode","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"controllers","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"ens","outputs":[{"internalType":"contract ENS","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"nameExpires","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"address","name":"owner","type":"address"}],"name":"reclaim","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"duration","type":"uint256"}],"name":"register","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"duration","type":"uint256"}],"name":"registerOnly","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"controller","type":"address"}],"name":"removeController","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"duration","type":"uint256"}],"name":"renew","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"renounceOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"resolver","type":"address"}],"name":"setResolver","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"bytes4","name":"interfaceID","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]'
 )
 registrar_bytecode = "60806040523480156200001157600080fd5b5060405160408062002e71833981018060405260408110156200003357600080fd5b8101908080519060200190929190805190602001909291905050506200008b6301ffc9a77c010000000000000000000000000000000000000000000000000000000002620001d6640100000000026401000000009004565b33600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a3620001866380ac58cd7c010000000000000000000000000000000000000000000000000000000002620001d6640100000000026401000000009004565b81600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600381905550505062000294565b63ffffffff7c010000000000000000000000000000000000000000000000000000000002817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916141515156200022857600080fd5b6001600080837bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19167bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b612bcd80620002a46000396000f3fe60806040526004361061015f576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806301ffc9a714610164578063081812fc146101d6578063095ea7b3146102515780630e297b45146102ac57806323b872dd1461032557806328ed4f6c146103a05780633f15457f146103fb57806342842e0e146104525780634e543b26146104cd5780636352211e1461051e57806370a0823114610599578063715018a6146105fe5780638da5cb5b146106155780638f32d59b1461066c57806396e494e81461069b578063a22cb465146106ee578063a7fc7a071461074b578063b88d4fde1461079c578063c1a287e2146108ae578063c475abff146108d9578063d6e4fa8614610932578063da8c229e14610981578063ddf7fcb0146109ea578063e985e9c514610a15578063f2fde38b14610a9e578063f6a74ed714610aef578063fca247ac14610b40575b600080fd5b34801561017057600080fd5b506101bc6004803603602081101561018757600080fd5b8101908080357bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19169060200190929190505050610bb9565b604051808215151515815260200191505060405180910390f35b3480156101e257600080fd5b5061020f600480360360208110156101f957600080fd5b8101908080359060200190929190505050610f82565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561025d57600080fd5b506102aa6004803603604081101561027457600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610fd3565b005b3480156102b857600080fd5b5061030f600480360360608110156102cf57600080fd5b8101908080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611118565b6040518082815260200191505060405180910390f35b34801561033157600080fd5b5061039e6004803603606081101561034857600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611130565b005b3480156103ac57600080fd5b506103f9600480360360408110156103c357600080fd5b8101908080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611155565b005b34801561040757600080fd5b50610410611381565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561045e57600080fd5b506104cb6004803603606081101561047557600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506113a7565b005b3480156104d957600080fd5b5061051c600480360360208110156104f057600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506113c8565b005b34801561052a57600080fd5b506105576004803603602081101561054157600080fd5b81019080803590602001909291905050506114bd565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156105a557600080fd5b506105e8600480360360208110156105bc57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506114f0565b6040518082815260200191505060405180910390f35b34801561060a57600080fd5b50610613611574565b005b34801561062157600080fd5b5061062a611648565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561067857600080fd5b50610681611672565b604051808215151515815260200191505060405180910390f35b3480156106a757600080fd5b506106d4600480360360208110156106be57600080fd5b81019080803590602001909291905050506116ca565b604051808215151515815260200191505060405180910390f35b3480156106fa57600080fd5b506107496004803603604081101561071157600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035151590602001909291905050506116ee565b005b34801561075757600080fd5b5061079a6004803603602081101561076e57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061182a565b005b3480156107a857600080fd5b506108ac600480360360808110156107bf57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291908035906020019064010000000081111561082657600080fd5b82018360208201111561083857600080fd5b8035906020019184600183028401116401000000008311171561085a57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192905050506118db565b005b3480156108ba57600080fd5b506108c3611903565b6040518082815260200191505060405180910390f35b3480156108e557600080fd5b5061091c600480360360408110156108fc57600080fd5b81019080803590602001909291908035906020019092919050505061190a565b6040518082815260200191505060405180910390f35b34801561093e57600080fd5b5061096b6004803603602081101561095557600080fd5b8101908080359060200190929190505050611b45565b6040518082815260200191505060405180910390f35b34801561098d57600080fd5b506109d0600480360360208110156109a457600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611b62565b604051808215151515815260200191505060405180910390f35b3480156109f657600080fd5b506109ff611b82565b6040518082815260200191505060405180910390f35b348015610a2157600080fd5b50610a8460048036036040811015610a3857600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611b88565b604051808215151515815260200191505060405180910390f35b348015610aaa57600080fd5b50610aed60048036036020811015610ac157600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611c1c565b005b348015610afb57600080fd5b50610b3e60048036036020811015610b1257600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611c3b565b005b348015610b4c57600080fd5b50610ba360048036036060811015610b6357600080fd5b8101908080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611cec565b6040518082815260200191505060405180910390f35b600060405180807f737570706f727473496e74657266616365286279746573342900000000000000815250601901905060405180910390207bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161480610efe575060405180807f736166655472616e7366657246726f6d28616464726573732c6164647265737381526020017f2c75696e743235362c6279746573290000000000000000000000000000000000815250602f019050604051809103902060405180807f736166655472616e7366657246726f6d28616464726573732c6164647265737381526020017f2c75696e743235362900000000000000000000000000000000000000000000008152506029019050604051809103902060405180807f7472616e7366657246726f6d28616464726573732c616464726573732c75696e81526020017f74323536290000000000000000000000000000000000000000000000000000008152506025019050604051809103902060405180807f6973417070726f766564466f72416c6c28616464726573732c6164647265737381526020017f29000000000000000000000000000000000000000000000000000000000000008152506021019050604051809103902060405180807f736574417070726f76616c466f72416c6c28616464726573732c626f6f6c2900815250601f019050604051809103902060405180807f676574417070726f7665642875696e74323536290000000000000000000000008152506014019050604051809103902060405180807f617070726f766528616464726573732c75696e743235362900000000000000008152506018019050604051809103902060405180807f6f776e65724f662875696e7432353629000000000000000000000000000000008152506010019050604051809103902060405180807f62616c616e63654f6628616464726573732900000000000000000000000000008152506012019050604051809103902018181818181818187bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b80610f7b575060405180807f7265636c61696d2875696e743235362c61646472657373290000000000000000815250601801905060405180910390207bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b9050919050565b6000610f8d82611d04565b1515610f9857600080fd5b6006600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b6000610fde826114bd565b90508073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415151561101b57600080fd5b8073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16148061105b575061105a8133611b88565b5b151561106657600080fd5b826006600084815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550818373ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a4505050565b60006111278484846000611d76565b90509392505050565b61113a33826120b2565b151561114557600080fd5b611150838383612147565b505050565b3073ffffffffffffffffffffffffffffffffffffffff16600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166302571be36003546040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018082815260200191505060206040518083038186803b1580156111fd57600080fd5b505afa158015611211573d6000803e3d6000fd5b505050506040513d602081101561122757600080fd5b810190808051906020019092919050505073ffffffffffffffffffffffffffffffffffffffff1614151561125a57600080fd5b61126433836120b2565b151561126f57600080fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166306ab592360035484600102846040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808481526020018381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019350505050602060405180830381600087803b15801561134157600080fd5b505af1158015611355573d6000803e3d6000fd5b505050506040513d602081101561136b57600080fd5b8101908080519060200190929190505050505050565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6113c383838360206040519081016040528060008152506118db565b505050565b6113d0611672565b15156113db57600080fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16631896f70a600354836040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b1580156114a257600080fd5b505af11580156114b6573d6000803e3d6000fd5b5050505050565b60004260096000848152602001908152602001600020541115156114e057600080fd5b6114e9826123ac565b9050919050565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415151561152d57600080fd5b600760008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b61157c611672565b151561158757600080fd5b600073ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a36000600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550565b6000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614905090565b6000426276a700600960008581526020019081526020016000205401109050919050565b3373ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415151561172957600080fd5b80600860003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c3183604051808215151515815260200191505060405180910390a35050565b611832611672565b151561183d57600080fd5b6001600460008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508073ffffffffffffffffffffffffffffffffffffffff167f0a8bb31534c0ed46f380cb867bd5c803a189ced9a764e30b3a4991a9901d747460405160405180910390a250565b6118e6848484611130565b6118f28484848461242a565b15156118fd57600080fd5b50505050565b6276a70081565b60003073ffffffffffffffffffffffffffffffffffffffff16600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166302571be36003546040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018082815260200191505060206040518083038186803b1580156119b457600080fd5b505afa1580156119c8573d6000803e3d6000fd5b505050506040513d60208110156119de57600080fd5b810190808051906020019092919050505073ffffffffffffffffffffffffffffffffffffffff16141515611a1157600080fd5b600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515611a6957600080fd5b426276a70060096000868152602001908152602001600020540110151515611a9057600080fd5b6276a70082016276a7008360096000878152602001908152602001600020540101111515611abd57600080fd5b816009600085815260200190815260200160002060008282540192505081905550827f9b87a00e30f1ac65d898f070f8a3488fe60517182d0a2098e1b4b93a54aa9bd660096000868152602001908152602001600020546040518082815260200191505060405180910390a26009600084815260200190815260200160002054905092915050565b600060096000838152602001908152602001600020549050919050565b60046020528060005260406000206000915054906101000a900460ff1681565b60035481565b6000600860008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b611c24611672565b1515611c2f57600080fd5b611c388161264d565b50565b611c43611672565b1515611c4e57600080fd5b6000600460008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508073ffffffffffffffffffffffffffffffffffffffff167f33d83959be2573f5453b12eb9d43b3499bc57d96bd2f067ba44803c859e8111360405160405180910390a250565b6000611cfb8484846001611d76565b90509392505050565b6000806005600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415915050919050565b60003073ffffffffffffffffffffffffffffffffffffffff16600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166302571be36003546040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018082815260200191505060206040518083038186803b158015611e2057600080fd5b505afa158015611e34573d6000803e3d6000fd5b505050506040513d6020811015611e4a57600080fd5b810190808051906020019092919050505073ffffffffffffffffffffffffffffffffffffffff16141515611e7d57600080fd5b600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515611ed557600080fd5b611ede856116ca565b1515611ee957600080fd5b6276a70042016276a70084420101111515611f0357600080fd5b8242016009600087815260200190815260200160002081905550611f2685611d04565b15611f3557611f3485612749565b5b611f3f848661275e565b811561205457600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166306ab592360035487600102876040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808481526020018381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019350505050602060405180830381600087803b15801561201757600080fd5b505af115801561202b573d6000803e3d6000fd5b505050506040513d602081101561204157600080fd5b8101908080519060200190929190505050505b8373ffffffffffffffffffffffffffffffffffffffff16857fb3d987963d01b2f68493b4bdb130988f157ea43070d4ad840fee0466ed9370d98542016040518082815260200191505060405180910390a38242019050949350505050565b6000806120be836114bd565b90508073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16148061212d57508373ffffffffffffffffffffffffffffffffffffffff1661211584610f82565b73ffffffffffffffffffffffffffffffffffffffff16145b8061213e575061213d8185611b88565b5b91505092915050565b8273ffffffffffffffffffffffffffffffffffffffff16612167826114bd565b73ffffffffffffffffffffffffffffffffffffffff1614151561218957600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16141515156121c557600080fd5b6121ce816128f7565b6122216001600760008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546129b790919063ffffffff16565b600760008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506122b76001600760008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546129d990919063ffffffff16565b600760008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550816005600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4505050565b6000806005600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415151561242157600080fd5b80915050919050565b600061244b8473ffffffffffffffffffffffffffffffffffffffff166129fa565b151561245a5760019050612645565b60008473ffffffffffffffffffffffffffffffffffffffff1663150b7a02338887876040518563ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200183815260200180602001828103825283818151815260200191508051906020019080838360005b83811015612551578082015181840152602081019050612536565b50505050905090810190601f16801561257e5780820380516001836020036101000a031916815260200191505b5095505050505050602060405180830381600087803b1580156125a057600080fd5b505af11580156125b4573d6000803e3d6000fd5b505050506040513d60208110156125ca57600080fd5b8101908080519060200190929190505050905063150b7a027c0100000000000000000000000000000000000000000000000000000000027bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149150505b949350505050565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415151561268957600080fd5b8073ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a380600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b61275b612755826114bd565b82612a0d565b50565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415151561279a57600080fd5b6127a381611d04565b1515156127af57600080fd5b816005600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506128546001600760008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546129d990919063ffffffff16565b600760008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550808273ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a45050565b600073ffffffffffffffffffffffffffffffffffffffff166006600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415156129b45760006006600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b50565b60008282111515156129c857600080fd5b600082840390508091505092915050565b60008082840190508381101515156129f057600080fd5b8091505092915050565b600080823b905060008111915050919050565b8173ffffffffffffffffffffffffffffffffffffffff16612a2d826114bd565b73ffffffffffffffffffffffffffffffffffffffff16141515612a4f57600080fd5b612a58816128f7565b612aab6001600760008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546129b790919063ffffffff16565b600760008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555060006005600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4505056fea165627a7a72305820af9388697026a32fc11fae5e11a7544e431f49880e9dccb1eb61220f2ec18abc0029"
 registrar_bytecode_runtime = "60806040526004361061015f576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806301ffc9a714610164578063081812fc146101d6578063095ea7b3146102515780630e297b45146102ac57806323b872dd1461032557806328ed4f6c146103a05780633f15457f146103fb57806342842e0e146104525780634e543b26146104cd5780636352211e1461051e57806370a0823114610599578063715018a6146105fe5780638da5cb5b146106155780638f32d59b1461066c57806396e494e81461069b578063a22cb465146106ee578063a7fc7a071461074b578063b88d4fde1461079c578063c1a287e2146108ae578063c475abff146108d9578063d6e4fa8614610932578063da8c229e14610981578063ddf7fcb0146109ea578063e985e9c514610a15578063f2fde38b14610a9e578063f6a74ed714610aef578063fca247ac14610b40575b600080fd5b34801561017057600080fd5b506101bc6004803603602081101561018757600080fd5b8101908080357bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19169060200190929190505050610bb9565b604051808215151515815260200191505060405180910390f35b3480156101e257600080fd5b5061020f600480360360208110156101f957600080fd5b8101908080359060200190929190505050610f82565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561025d57600080fd5b506102aa6004803603604081101561027457600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610fd3565b005b3480156102b857600080fd5b5061030f600480360360608110156102cf57600080fd5b8101908080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611118565b6040518082815260200191505060405180910390f35b34801561033157600080fd5b5061039e6004803603606081101561034857600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611130565b005b3480156103ac57600080fd5b506103f9600480360360408110156103c357600080fd5b8101908080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611155565b005b34801561040757600080fd5b50610410611381565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561045e57600080fd5b506104cb6004803603606081101561047557600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506113a7565b005b3480156104d957600080fd5b5061051c600480360360208110156104f057600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506113c8565b005b34801561052a57600080fd5b506105576004803603602081101561054157600080fd5b81019080803590602001909291905050506114bd565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156105a557600080fd5b506105e8600480360360208110156105bc57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506114f0565b6040518082815260200191505060405180910390f35b34801561060a57600080fd5b50610613611574565b005b34801561062157600080fd5b5061062a611648565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561067857600080fd5b50610681611672565b604051808215151515815260200191505060405180910390f35b3480156106a757600080fd5b506106d4600480360360208110156106be57600080fd5b81019080803590602001909291905050506116ca565b604051808215151515815260200191505060405180910390f35b3480156106fa57600080fd5b506107496004803603604081101561071157600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035151590602001909291905050506116ee565b005b34801561075757600080fd5b5061079a6004803603602081101561076e57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061182a565b005b3480156107a857600080fd5b506108ac600480360360808110156107bf57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291908035906020019064010000000081111561082657600080fd5b82018360208201111561083857600080fd5b8035906020019184600183028401116401000000008311171561085a57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192905050506118db565b005b3480156108ba57600080fd5b506108c3611903565b6040518082815260200191505060405180910390f35b3480156108e557600080fd5b5061091c600480360360408110156108fc57600080fd5b81019080803590602001909291908035906020019092919050505061190a565b6040518082815260200191505060405180910390f35b34801561093e57600080fd5b5061096b6004803603602081101561095557600080fd5b8101908080359060200190929190505050611b45565b6040518082815260200191505060405180910390f35b34801561098d57600080fd5b506109d0600480360360208110156109a457600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611b62565b604051808215151515815260200191505060405180910390f35b3480156109f657600080fd5b506109ff611b82565b6040518082815260200191505060405180910390f35b348015610a2157600080fd5b50610a8460048036036040811015610a3857600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611b88565b604051808215151515815260200191505060405180910390f35b348015610aaa57600080fd5b50610aed60048036036020811015610ac157600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611c1c565b005b348015610afb57600080fd5b50610b3e60048036036020811015610b1257600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611c3b565b005b348015610b4c57600080fd5b50610ba360048036036060811015610b6357600080fd5b8101908080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611cec565b6040518082815260200191505060405180910390f35b600060405180807f737570706f727473496e74657266616365286279746573342900000000000000815250601901905060405180910390207bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161480610efe575060405180807f736166655472616e7366657246726f6d28616464726573732c6164647265737381526020017f2c75696e743235362c6279746573290000000000000000000000000000000000815250602f019050604051809103902060405180807f736166655472616e7366657246726f6d28616464726573732c6164647265737381526020017f2c75696e743235362900000000000000000000000000000000000000000000008152506029019050604051809103902060405180807f7472616e7366657246726f6d28616464726573732c616464726573732c75696e81526020017f74323536290000000000000000000000000000000000000000000000000000008152506025019050604051809103902060405180807f6973417070726f766564466f72416c6c28616464726573732c6164647265737381526020017f29000000000000000000000000000000000000000000000000000000000000008152506021019050604051809103902060405180807f736574417070726f76616c466f72416c6c28616464726573732c626f6f6c2900815250601f019050604051809103902060405180807f676574417070726f7665642875696e74323536290000000000000000000000008152506014019050604051809103902060405180807f617070726f766528616464726573732c75696e743235362900000000000000008152506018019050604051809103902060405180807f6f776e65724f662875696e7432353629000000000000000000000000000000008152506010019050604051809103902060405180807f62616c616e63654f6628616464726573732900000000000000000000000000008152506012019050604051809103902018181818181818187bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b80610f7b575060405180807f7265636c61696d2875696e743235362c61646472657373290000000000000000815250601801905060405180910390207bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b9050919050565b6000610f8d82611d04565b1515610f9857600080fd5b6006600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b6000610fde826114bd565b90508073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415151561101b57600080fd5b8073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16148061105b575061105a8133611b88565b5b151561106657600080fd5b826006600084815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550818373ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a4505050565b60006111278484846000611d76565b90509392505050565b61113a33826120b2565b151561114557600080fd5b611150838383612147565b505050565b3073ffffffffffffffffffffffffffffffffffffffff16600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166302571be36003546040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018082815260200191505060206040518083038186803b1580156111fd57600080fd5b505afa158015611211573d6000803e3d6000fd5b505050506040513d602081101561122757600080fd5b810190808051906020019092919050505073ffffffffffffffffffffffffffffffffffffffff1614151561125a57600080fd5b61126433836120b2565b151561126f57600080fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166306ab592360035484600102846040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808481526020018381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019350505050602060405180830381600087803b15801561134157600080fd5b505af1158015611355573d6000803e3d6000fd5b505050506040513d602081101561136b57600080fd5b8101908080519060200190929190505050505050565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6113c383838360206040519081016040528060008152506118db565b505050565b6113d0611672565b15156113db57600080fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16631896f70a600354836040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b1580156114a257600080fd5b505af11580156114b6573d6000803e3d6000fd5b5050505050565b60004260096000848152602001908152602001600020541115156114e057600080fd5b6114e9826123ac565b9050919050565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415151561152d57600080fd5b600760008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b61157c611672565b151561158757600080fd5b600073ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a36000600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550565b6000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614905090565b6000426276a700600960008581526020019081526020016000205401109050919050565b3373ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415151561172957600080fd5b80600860003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c3183604051808215151515815260200191505060405180910390a35050565b611832611672565b151561183d57600080fd5b6001600460008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508073ffffffffffffffffffffffffffffffffffffffff167f0a8bb31534c0ed46f380cb867bd5c803a189ced9a764e30b3a4991a9901d747460405160405180910390a250565b6118e6848484611130565b6118f28484848461242a565b15156118fd57600080fd5b50505050565b6276a70081565b60003073ffffffffffffffffffffffffffffffffffffffff16600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166302571be36003546040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018082815260200191505060206040518083038186803b1580156119b457600080fd5b505afa1580156119c8573d6000803e3d6000fd5b505050506040513d60208110156119de57600080fd5b810190808051906020019092919050505073ffffffffffffffffffffffffffffffffffffffff16141515611a1157600080fd5b600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515611a6957600080fd5b426276a70060096000868152602001908152602001600020540110151515611a9057600080fd5b6276a70082016276a7008360096000878152602001908152602001600020540101111515611abd57600080fd5b816009600085815260200190815260200160002060008282540192505081905550827f9b87a00e30f1ac65d898f070f8a3488fe60517182d0a2098e1b4b93a54aa9bd660096000868152602001908152602001600020546040518082815260200191505060405180910390a26009600084815260200190815260200160002054905092915050565b600060096000838152602001908152602001600020549050919050565b60046020528060005260406000206000915054906101000a900460ff1681565b60035481565b6000600860008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b611c24611672565b1515611c2f57600080fd5b611c388161264d565b50565b611c43611672565b1515611c4e57600080fd5b6000600460008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508073ffffffffffffffffffffffffffffffffffffffff167f33d83959be2573f5453b12eb9d43b3499bc57d96bd2f067ba44803c859e8111360405160405180910390a250565b6000611cfb8484846001611d76565b90509392505050565b6000806005600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415915050919050565b60003073ffffffffffffffffffffffffffffffffffffffff16600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166302571be36003546040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018082815260200191505060206040518083038186803b158015611e2057600080fd5b505afa158015611e34573d6000803e3d6000fd5b505050506040513d6020811015611e4a57600080fd5b810190808051906020019092919050505073ffffffffffffffffffffffffffffffffffffffff16141515611e7d57600080fd5b600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515611ed557600080fd5b611ede856116ca565b1515611ee957600080fd5b6276a70042016276a70084420101111515611f0357600080fd5b8242016009600087815260200190815260200160002081905550611f2685611d04565b15611f3557611f3485612749565b5b611f3f848661275e565b811561205457600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166306ab592360035487600102876040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808481526020018381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019350505050602060405180830381600087803b15801561201757600080fd5b505af115801561202b573d6000803e3d6000fd5b505050506040513d602081101561204157600080fd5b8101908080519060200190929190505050505b8373ffffffffffffffffffffffffffffffffffffffff16857fb3d987963d01b2f68493b4bdb130988f157ea43070d4ad840fee0466ed9370d98542016040518082815260200191505060405180910390a38242019050949350505050565b6000806120be836114bd565b90508073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16148061212d57508373ffffffffffffffffffffffffffffffffffffffff1661211584610f82565b73ffffffffffffffffffffffffffffffffffffffff16145b8061213e575061213d8185611b88565b5b91505092915050565b8273ffffffffffffffffffffffffffffffffffffffff16612167826114bd565b73ffffffffffffffffffffffffffffffffffffffff1614151561218957600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16141515156121c557600080fd5b6121ce816128f7565b6122216001600760008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546129b790919063ffffffff16565b600760008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506122b76001600760008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546129d990919063ffffffff16565b600760008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550816005600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4505050565b6000806005600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415151561242157600080fd5b80915050919050565b600061244b8473ffffffffffffffffffffffffffffffffffffffff166129fa565b151561245a5760019050612645565b60008473ffffffffffffffffffffffffffffffffffffffff1663150b7a02338887876040518563ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200183815260200180602001828103825283818151815260200191508051906020019080838360005b83811015612551578082015181840152602081019050612536565b50505050905090810190601f16801561257e5780820380516001836020036101000a031916815260200191505b5095505050505050602060405180830381600087803b1580156125a057600080fd5b505af11580156125b4573d6000803e3d6000fd5b505050506040513d60208110156125ca57600080fd5b8101908080519060200190929190505050905063150b7a027c0100000000000000000000000000000000000000000000000000000000027bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149150505b949350505050565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415151561268957600080fd5b8073ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a380600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b61275b612755826114bd565b82612a0d565b50565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415151561279a57600080fd5b6127a381611d04565b1515156127af57600080fd5b816005600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506128546001600760008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546129d990919063ffffffff16565b600760008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550808273ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a45050565b600073ffffffffffffffffffffffffffffffffffffffff166006600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415156129b45760006006600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b50565b60008282111515156129c857600080fd5b600082840390508091505092915050565b60008082840190508381101515156129f057600080fd5b8091505092915050565b600080823b905060008111915050919050565b8173ffffffffffffffffffffffffffffffffffffffff16612a2d826114bd565b73ffffffffffffffffffffffffffffffffffffffff16141515612a4f57600080fd5b612a58816128f7565b612aab6001600760008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546129b790919063ffffffff16565b600760008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555060006005600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4505056fea165627a7a72305820af9388697026a32fc11fae5e11a7544e431f49880e9dccb1eb61220f2ec18abc0029"
 
@@ -23,29 +31,7 @@
 
 # ENS Default Reverse Resolver
 reverse_resolver_abi = json.loads(
     '[{"inputs":[{"internalType":"contract ENS","name":"ensAddr","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"constant":true,"inputs":[],"name":"ens","outputs":[{"internalType":"contract ENS","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"bytes32","name":"node","type":"bytes32"},{"internalType":"string","name":"_name","type":"string"}],"name":"setName","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]'
 )
 reverse_resolver_bytecode = "608060405234801561001057600080fd5b5060405160208061079f8339810180604052602081101561003057600080fd5b8101908080519060200190929190505050806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166302571be37f91d1777781884d03a6757a803996e38de2a42967fb37eeaca72729271025a9e26001026040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018082815260200191505060206040518083038186803b15801561013457600080fd5b505afa158015610148573d6000803e3d6000fd5b505050506040513d602081101561015e57600080fd5b81019080805190602001909291905050509050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151561027f578073ffffffffffffffffffffffffffffffffffffffff16631e83409a336040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15801561024257600080fd5b505af1158015610256573d6000803e3d6000fd5b505050506040513d602081101561026c57600080fd5b8101908080519060200190929190505050505b505061050f806102906000396000f3fe608060405260043610610057576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680633f15457f1461005c578063691f3431146100b35780637737221314610167575b600080fd5b34801561006857600080fd5b50610071610239565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156100bf57600080fd5b506100ec600480360360208110156100d657600080fd5b810190808035906020019092919050505061025e565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561012c578082015181840152602081019050610111565b50505050905090810190601f1680156101595780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561017357600080fd5b506102376004803603604081101561018a57600080fd5b8101908080359060200190929190803590602001906401000000008111156101b157600080fd5b8201836020820111156101c357600080fd5b803590602001918460018302840111640100000000831117156101e557600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050919291929050505061030e565b005b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60016020528060005260406000206000915090508054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156103065780601f106102db57610100808354040283529160200191610306565b820191906000526020600020905b8154815290600101906020018083116102e957829003601f168201915b505050505081565b816000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166302571be3826040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018082815260200191505060206040518083038186803b15801561039d57600080fd5b505afa1580156103b1573d6000803e3d6000fd5b505050506040513d60208110156103c757600080fd5b810190808051906020019092919050505073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561041157600080fd5b8160016000858152602001908152602001600020908051906020019061043892919061043e565b50505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061047f57805160ff19168380011785556104ad565b828001600101855582156104ad579182015b828111156104ac578251825591602001919060010190610491565b5b5090506104ba91906104be565b5090565b6104e091905b808211156104dc5760008160009055506001016104c4565b5090565b9056fea165627a7a72305820f326fd97e1fac0bcd89f007846301e41c2ad494c12d70b2b50dd61e62ffc906a0029"
 reverse_resolver_bytecode_runtime = "608060405234801561001057600080fd5b506004361061004c5760003560e01c806301ffc9a7146100515780633e9ce794146100815780639061b9231461009d578063f86bc879146100cd575b600080fd5b61006b6004803603810190610066919061051e565b6100fd565b6040516100789190610566565b60405180910390f35b61009b60048036038101906100969190610641565b61015e565b005b6100b760048036038101906100b291906106f9565b610245565b6040516100c49190610813565b60405180910390f35b6100e760048036038101906100e29190610835565b61042f565b6040516100f49190610566565b60405180910390f35b6000639061b92360e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061015757506101568261046b565b5b9050919050565b806001600085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055507fe1c5610a6e0cbe10764ecd182adcef1ec338dc4e199c99c32ce98f38e12791df8333848460405161023894939291906108a6565b60405180910390a1505050565b60606040518060400160405280601781526020017f11657874656e6465642d7265736f6c766572036574680000000000000000000081525080519060200120858560405161029492919061092a565b60405180910390201480156102ad575060248383905010155b15610328577ff0a378cc2afe91730d0105e67d6bb037cc5b8b6bfec5b5962d9b637ff6497e5560001b83836004906024926102ea9392919061094d565b906102f591906109a0565b146102ff57600080fd5b61beef60405160200161031291906109ff565b6040516020818303038152906040529050610427565b60008585600081811061033e5761033d610a1a565b5b9050013560f81c60f81b60f81c60ff1690506040518060400160405280601781526020017f11657874656e6465642d7265736f6c766572036574680000000000000000000081525080519060200120868683600161039c9190610a82565b9080926103ab9392919061094d565b6040516103b9929190610ad8565b604051809103902014610401576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103f890610b28565b60405180910390fd5b61dead60405160200161041491906109ff565b6040516020818303038152906040529150505b949350505050565b6001602052826000526040600020602052816000526040600020602052806000526040600020600092509250509054906101000a900460ff1681565b60006301ffc9a760e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b600080fd5b600080fd5b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b6104fb816104c6565b811461050657600080fd5b50565b600081359050610518816104f2565b92915050565b600060208284031215610534576105336104bc565b5b600061054284828501610509565b91505092915050565b60008115159050919050565b6105608161054b565b82525050565b600060208201905061057b6000830184610557565b92915050565b6000819050919050565b61059481610581565b811461059f57600080fd5b50565b6000813590506105b18161058b565b92915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006105e2826105b7565b9050919050565b6105f2816105d7565b81146105fd57600080fd5b50565b60008135905061060f816105e9565b92915050565b61061e8161054b565b811461062957600080fd5b50565b60008135905061063b81610615565b92915050565b60008060006060848603121561065a576106596104bc565b5b6000610668868287016105a2565b935050602061067986828701610600565b925050604061068a8682870161062c565b9150509250925092565b600080fd5b600080fd5b600080fd5b60008083601f8401126106b9576106b8610694565b5b8235905067ffffffffffffffff8111156106d6576106d5610699565b5b6020830191508360018202830111156106f2576106f161069e565b5b9250929050565b60008060008060408587031215610713576107126104bc565b5b600085013567ffffffffffffffff811115610731576107306104c1565b5b61073d878288016106a3565b9450945050602085013567ffffffffffffffff8111156107605761075f6104c1565b5b61076c878288016106a3565b925092505092959194509250565b600081519050919050565b600082825260208201905092915050565b60005b838110156107b4578082015181840152602081019050610799565b838111156107c3576000848401525b50505050565b6000601f19601f8301169050919050565b60006107e58261077a565b6107ef8185610785565b93506107ff818560208601610796565b610808816107c9565b840191505092915050565b6000602082019050818103600083015261082d81846107da565b905092915050565b60008060006060848603121561084e5761084d6104bc565b5b600061085c868287016105a2565b935050602061086d86828701610600565b925050604061087e86828701610600565b9150509250925092565b61089181610581565b82525050565b6108a0816105d7565b82525050565b60006080820190506108bb6000830187610888565b6108c86020830186610897565b6108d56040830185610897565b6108e26060830184610557565b95945050505050565b600081905092915050565b82818337600083830152505050565b600061091183856108eb565b935061091e8385846108f6565b82840190509392505050565b6000610937828486610905565b91508190509392505050565b600080fd5b600080fd5b6000808585111561096157610960610943565b5b8386111561097257610971610948565b5b6001850283019150848603905094509492505050565b600082905092915050565b600082821b905092915050565b60006109ac8383610988565b826109b78135610581565b925060208210156109f7576109f27fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff83602003600802610993565b831692505b505092915050565b6000602082019050610a146000830184610897565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6000819050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000610a8d82610a49565b9150610a9883610a49565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff03821115610acd57610acc610a53565b5b828201905092915050565b6000610ae5828486610905565b91508190509392505050565b600082825260208201905092915050565b50565b6000610b12600083610af1565b9150610b1d82610b02565b600082019050919050565b60006020820190508181036000830152610b4181610b05565b905091905056fea264697066735822122053f3072486d953b17f72555d93bae38d3607f573e572c03ca3b10c082471640064736f6c634300080d0033"
-
-# ENSIP-10 - Extended Resolver for Wildcard Resolution
-# compiled from `web3/_utils/contract_sources/ExtendedResolver.sol`
-extended_resolver_abi = '[{"inputs": [{"internalType": "contract ENS","name": "_ens","type": "address"}],"stateMutability": "nonpayable","type": "constructor"},{"anonymous": false,"inputs": [{"indexed": false,"internalType": "bytes32","name": "node","type": "bytes32"},{"indexed": false,"internalType": "address","name": "owner","type": "address"},{"indexed": false,"internalType": "address","name": "target","type": "address"},{"indexed": false,"internalType": "bool","name": "isAuthorised","type": "bool"}],"name": "AuthorisationChanged","type": "event"},{"inputs": [{"internalType": "bytes32", "name": "", "type": "bytes32"},{"internalType": "address", "name": "", "type": "address"},{"internalType": "address", "name": "", "type": "address"}],"name": "authorisations","outputs": [{"internalType": "bool", "name": "", "type": "bool"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "bytes", "name": "dnsName", "type": "bytes"},{"internalType": "bytes", "name": "data", "type": "bytes"}],"name": "resolve","outputs": [{"internalType": "bytes", "name": "", "type": "bytes"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "bytes32", "name": "node", "type": "bytes32"},{"internalType": "address", "name": "target", "type": "address"},{"internalType": "bool", "name": "isAuthorised", "type": "bool"}],"name": "setAuthorisation","outputs": [],"stateMutability": "nonpayable","type": "function"},{"inputs": [{"internalType": "bytes4","name": "interfaceID","type": "bytes4"}],"name": "supportsInterface","outputs": [{"internalType": "bool", "name": "", "type": "bool"}],"stateMutability": "pure","type": "function"}]'
-extended_resolver_bytecode = "608060405234801561001057600080fd5b50604051610dbb380380610dbb833981810160405281019061003291906100ed565b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505061011a565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006100a88261007d565b9050919050565b60006100ba8261009d565b9050919050565b6100ca816100af565b81146100d557600080fd5b50565b6000815190506100e7816100c1565b92915050565b60006020828403121561010357610102610078565b5b6000610111848285016100d8565b91505092915050565b610c92806101296000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c806301ffc9a7146100515780633e9ce794146100815780639061b9231461009d578063f86bc879146100cd575b600080fd5b61006b60048036038101906100669190610554565b6100fd565b604051610078919061059c565b60405180910390f35b61009b60048036038101906100969190610677565b61015e565b005b6100b760048036038101906100b2919061072f565b610245565b6040516100c49190610849565b60405180910390f35b6100e760048036038101906100e2919061086b565b610465565b6040516100f4919061059c565b60405180910390f35b6000639061b92360e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614806101575750610156826104a1565b5b9050919050565b806001600085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055507fe1c5610a6e0cbe10764ecd182adcef1ec338dc4e199c99c32ce98f38e12791df8333848460405161023894939291906108dc565b60405180910390a1505050565b60606040518060400160405280601781526020017f11657874656e6465642d7265736f6c7665720365746800000000000000000000815250805190602001208585604051610294929190610960565b60405180910390201480156102ad575060248383905010155b1561035e577ff0a378cc2afe91730d0105e67d6bb037cc5b8b6bfec5b5962d9b637ff6497e5560001b83836004906024926102ea93929190610983565b906102f591906109d6565b14610335576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161032c90610ab8565b60405180910390fd5b61beef6040516020016103489190610ad8565b604051602081830303815290604052905061045d565b60008585600081811061037457610373610af3565b5b9050013560f81c60f81b60f81c60ff1690506040518060400160405280601781526020017f11657874656e6465642d7265736f6c76657203657468000000000000000000008152508051906020012086868360016103d29190610b5b565b9080926103e193929190610983565b6040516103ef929190610bb1565b604051809103902014610437576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161042e90610c3c565b60405180910390fd5b61dead60405160200161044a9190610ad8565b6040516020818303038152906040529150505b949350505050565b6001602052826000526040600020602052816000526040600020602052806000526040600020600092509250509054906101000a900460ff1681565b60006301ffc9a760e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b600080fd5b600080fd5b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b610531816104fc565b811461053c57600080fd5b50565b60008135905061054e81610528565b92915050565b60006020828403121561056a576105696104f2565b5b60006105788482850161053f565b91505092915050565b60008115159050919050565b61059681610581565b82525050565b60006020820190506105b1600083018461058d565b92915050565b6000819050919050565b6105ca816105b7565b81146105d557600080fd5b50565b6000813590506105e7816105c1565b92915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610618826105ed565b9050919050565b6106288161060d565b811461063357600080fd5b50565b6000813590506106458161061f565b92915050565b61065481610581565b811461065f57600080fd5b50565b6000813590506106718161064b565b92915050565b6000806000606084860312156106905761068f6104f2565b5b600061069e868287016105d8565b93505060206106af86828701610636565b92505060406106c086828701610662565b9150509250925092565b600080fd5b600080fd5b600080fd5b60008083601f8401126106ef576106ee6106ca565b5b8235905067ffffffffffffffff81111561070c5761070b6106cf565b5b602083019150836001820283011115610728576107276106d4565b5b9250929050565b60008060008060408587031215610749576107486104f2565b5b600085013567ffffffffffffffff811115610767576107666104f7565b5b610773878288016106d9565b9450945050602085013567ffffffffffffffff811115610796576107956104f7565b5b6107a2878288016106d9565b925092505092959194509250565b600081519050919050565b600082825260208201905092915050565b60005b838110156107ea5780820151818401526020810190506107cf565b838111156107f9576000848401525b50505050565b6000601f19601f8301169050919050565b600061081b826107b0565b61082581856107bb565b93506108358185602086016107cc565b61083e816107ff565b840191505092915050565b600060208201905081810360008301526108638184610810565b905092915050565b600080600060608486031215610884576108836104f2565b5b6000610892868287016105d8565b93505060206108a386828701610636565b92505060406108b486828701610636565b9150509250925092565b6108c7816105b7565b82525050565b6108d68161060d565b82525050565b60006080820190506108f160008301876108be565b6108fe60208301866108cd565b61090b60408301856108cd565b610918606083018461058d565b95945050505050565b600081905092915050565b82818337600083830152505050565b60006109478385610921565b935061095483858461092c565b82840190509392505050565b600061096d82848661093b565b91508190509392505050565b600080fd5b600080fd5b6000808585111561099757610996610979565b5b838611156109a8576109a761097e565b5b6001850283019150848603905094509492505050565b600082905092915050565b600082821b905092915050565b60006109e283836109be565b826109ed81356105b7565b92506020821015610a2d57610a287fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff836020036008026109c9565b831692505b505092915050565b600082825260208201905092915050565b7f706172656e7420646f6d61696e206e6f742076616c696461746564206170707260008201527f6f7072696174656c790000000000000000000000000000000000000000000000602082015250565b6000610aa2602983610a35565b9150610aad82610a46565b604082019050919050565b60006020820190508181036000830152610ad181610a95565b9050919050565b6000602082019050610aed60008301846108cd565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6000819050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000610b6682610b22565b9150610b7183610b22565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff03821115610ba657610ba5610b2c565b5b828201905092915050565b6000610bbe82848661093b565b91508190509392505050565b7f737562646f6d61696e206e6f742076616c69646174656420617070726f70726960008201527f6174656c79000000000000000000000000000000000000000000000000000000602082015250565b6000610c26602583610a35565b9150610c3182610bca565b604082019050919050565b60006020820190508181036000830152610c5581610c19565b905091905056fea26469706673582212209fff87be19ed85e754d5e2791de6ed052e7e653185e1d47fa94515f851becd2f64736f6c634300080d0033"
-extended_resolver_bytecode_runtime = "608060405234801561001057600080fd5b506004361061004c5760003560e01c806301ffc9a7146100515780633e9ce794146100815780639061b9231461009d578063f86bc879146100cd575b600080fd5b61006b60048036038101906100669190610554565b6100fd565b604051610078919061059c565b60405180910390f35b61009b60048036038101906100969190610677565b61015e565b005b6100b760048036038101906100b2919061072f565b610245565b6040516100c49190610849565b60405180910390f35b6100e760048036038101906100e2919061086b565b610465565b6040516100f4919061059c565b60405180910390f35b6000639061b92360e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614806101575750610156826104a1565b5b9050919050565b806001600085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055507fe1c5610a6e0cbe10764ecd182adcef1ec338dc4e199c99c32ce98f38e12791df8333848460405161023894939291906108dc565b60405180910390a1505050565b60606040518060400160405280601781526020017f11657874656e6465642d7265736f6c7665720365746800000000000000000000815250805190602001208585604051610294929190610960565b60405180910390201480156102ad575060248383905010155b1561035e577ff0a378cc2afe91730d0105e67d6bb037cc5b8b6bfec5b5962d9b637ff6497e5560001b83836004906024926102ea93929190610983565b906102f591906109d6565b14610335576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161032c90610ab8565b60405180910390fd5b61beef6040516020016103489190610ad8565b604051602081830303815290604052905061045d565b60008585600081811061037457610373610af3565b5b9050013560f81c60f81b60f81c60ff1690506040518060400160405280601781526020017f11657874656e6465642d7265736f6c76657203657468000000000000000000008152508051906020012086868360016103d29190610b5b565b9080926103e193929190610983565b6040516103ef929190610bb1565b604051809103902014610437576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161042e90610c3c565b60405180910390fd5b61dead60405160200161044a9190610ad8565b6040516020818303038152906040529150505b949350505050565b6001602052826000526040600020602052816000526040600020602052806000526040600020600092509250509054906101000a900460ff1681565b60006301ffc9a760e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b600080fd5b600080fd5b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b610531816104fc565b811461053c57600080fd5b50565b60008135905061054e81610528565b92915050565b60006020828403121561056a576105696104f2565b5b60006105788482850161053f565b91505092915050565b60008115159050919050565b61059681610581565b82525050565b60006020820190506105b1600083018461058d565b92915050565b6000819050919050565b6105ca816105b7565b81146105d557600080fd5b50565b6000813590506105e7816105c1565b92915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610618826105ed565b9050919050565b6106288161060d565b811461063357600080fd5b50565b6000813590506106458161061f565b92915050565b61065481610581565b811461065f57600080fd5b50565b6000813590506106718161064b565b92915050565b6000806000606084860312156106905761068f6104f2565b5b600061069e868287016105d8565b93505060206106af86828701610636565b92505060406106c086828701610662565b9150509250925092565b600080fd5b600080fd5b600080fd5b60008083601f8401126106ef576106ee6106ca565b5b8235905067ffffffffffffffff81111561070c5761070b6106cf565b5b602083019150836001820283011115610728576107276106d4565b5b9250929050565b60008060008060408587031215610749576107486104f2565b5b600085013567ffffffffffffffff811115610767576107666104f7565b5b610773878288016106d9565b9450945050602085013567ffffffffffffffff811115610796576107956104f7565b5b6107a2878288016106d9565b925092505092959194509250565b600081519050919050565b600082825260208201905092915050565b60005b838110156107ea5780820151818401526020810190506107cf565b838111156107f9576000848401525b50505050565b6000601f19601f8301169050919050565b600061081b826107b0565b61082581856107bb565b93506108358185602086016107cc565b61083e816107ff565b840191505092915050565b600060208201905081810360008301526108638184610810565b905092915050565b600080600060608486031215610884576108836104f2565b5b6000610892868287016105d8565b93505060206108a386828701610636565b92505060406108b486828701610636565b9150509250925092565b6108c7816105b7565b82525050565b6108d68161060d565b82525050565b60006080820190506108f160008301876108be565b6108fe60208301866108cd565b61090b60408301856108cd565b610918606083018461058d565b95945050505050565b600081905092915050565b82818337600083830152505050565b60006109478385610921565b935061095483858461092c565b82840190509392505050565b600061096d82848661093b565b91508190509392505050565b600080fd5b600080fd5b6000808585111561099757610996610979565b5b838611156109a8576109a761097e565b5b6001850283019150848603905094509492505050565b600082905092915050565b600082821b905092915050565b60006109e283836109be565b826109ed81356105b7565b92506020821015610a2d57610a287fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff836020036008026109c9565b831692505b505092915050565b600082825260208201905092915050565b7f706172656e7420646f6d61696e206e6f742076616c696461746564206170707260008201527f6f7072696174656c790000000000000000000000000000000000000000000000602082015250565b6000610aa2602983610a35565b9150610aad82610a46565b604082019050919050565b60006020820190508181036000830152610ad181610a95565b9050919050565b6000602082019050610aed60008301846108cd565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6000819050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000610b6682610b22565b9150610b7183610b22565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff03821115610ba657610ba5610b2c565b5b828201905092915050565b6000610bbe82848661093b565b91508190509392505050565b7f737562646f6d61696e206e6f742076616c69646174656420617070726f70726960008201527f6174656c79000000000000000000000000000000000000000000000000000000602082015250565b6000610c26602583610a35565b9150610c3182610bca565b604082019050919050565b60006020820190508181036000830152610c5581610c19565b905091905056fea26469706673582212209fff87be19ed85e754d5e2791de6ed052e7e653185e1d47fa94515f851becd2f64736f6c634300080d0033"
-
-# Simple resolver with no support for interfaces like getText(), etc
-# compiled from `web3/_utils/contract_sources/SimpleResolver.sol`
-simple_resolver_abi = json.loads(
-    '[{"inputs":[{"internalType":"bytes32","name":"nodeID","type":"bytes32"}],"name":"addr","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceID","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]'
-)
-simple_resolver_bytecode = "608060405234801561001057600080fd5b5061028c806100206000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c806301ffc9a71461003b5780633b3b57de1461006b575b600080fd5b61005560048036038101906100509190610134565b61009b565b604051610062919061017c565b60405180910390f35b610085600480360381019061008091906101cd565b6100cd565b604051610092919061023b565b60405180910390f35b6000633b3b57de60e01b827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b6000309050919050565b600080fd5b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b610111816100dc565b811461011c57600080fd5b50565b60008135905061012e81610108565b92915050565b60006020828403121561014a576101496100d7565b5b60006101588482850161011f565b91505092915050565b60008115159050919050565b61017681610161565b82525050565b6000602082019050610191600083018461016d565b92915050565b6000819050919050565b6101aa81610197565b81146101b557600080fd5b50565b6000813590506101c7816101a1565b92915050565b6000602082840312156101e3576101e26100d7565b5b60006101f1848285016101b8565b91505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610225826101fa565b9050919050565b6102358161021a565b82525050565b6000602082019050610250600083018461022c565b9291505056fea2646970667358221220e9d34e70193fa6e99d9be00bd7b1e4b63dc6fd9c84934a35350d8b2c4215974964736f6c634300080d0033"
-simple_resolver_bytecode_runtime = "608060405234801561001057600080fd5b50600436106100365760003560e01c806301ffc9a71461003b5780633b3b57de1461006b575b600080fd5b61005560048036038101906100509190610134565b61009b565b604051610062919061017c565b60405180910390f35b610085600480360381019061008091906101cd565b6100cd565b604051610092919061023b565b60405180910390f35b6000633b3b57de60e01b827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b6000309050919050565b600080fd5b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b610111816100dc565b811461011c57600080fd5b50565b60008135905061012e81610108565b92915050565b60006020828403121561014a576101496100d7565b5b60006101588482850161011f565b91505092915050565b60008115159050919050565b61017681610161565b82525050565b6000602082019050610191600083018461016d565b92915050565b6000819050919050565b6101aa81610197565b81146101b557600080fd5b50565b6000813590506101c7816101a1565b92915050565b6000602082840312156101e3576101e26100d7565b5b60006101f1848285016101b8565b91505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610225826101fa565b9050919050565b6102358161021a565b82525050565b6000602082019050610250600083018461022c565b9291505056fea2646970667358221220e9d34e70193fa6e99d9be00bd7b1e4b63dc6fd9c84934a35350d8b2c4215974964736f6c634300080d0033"
-
-# Offchain Resolver for offchain resolution w/ CCIP Read as described in EIP-3668
-# compiled from `web3/_utils/contract_sources/OffchainResolver.sol`
-offchain_resolver_abi = json.loads(
-    '[{"inputs":[{"internalType":"string[]","name":"_urls","type":"string[]"},{"internalType":"address[]","name":"_signers","type":"address[]"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"string[]","name":"urls","type":"string[]"},{"internalType":"bytes","name":"callData","type":"bytes"},{"internalType":"bytes4","name":"callbackFunction","type":"bytes4"},{"internalType":"bytes","name":"extraData","type":"bytes"}],"name":"OffchainLookup","type":"error"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address[]","name":"signers","type":"address[]"}],"name":"NewSigners","type":"event"},{"inputs":[{"internalType":"address","name":"target","type":"address"},{"internalType":"uint64","name":"expires","type":"uint64"},{"internalType":"bytes","name":"request","type":"bytes"},{"internalType":"bytes","name":"result","type":"bytes"}],"name":"makeSignatureHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"bytes","name":"name","type":"bytes"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"resolve","outputs":[{"internalType":"bytes","name":"","type":"bytes"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes","name":"response","type":"bytes"},{"internalType":"bytes","name":"extraData","type":"bytes"}],"name":"resolveWithProof","outputs":[{"internalType":"bytes","name":"","type":"bytes"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"signers","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceID","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"url","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]'
-)
-offchain_resolver_bytecode = "60806040523480156200001157600080fd5b506040516200219038038062002190833981810160405281019062000037919062000511565b81600090805190602001906200004f929190620001a4565b5060005b81518110156200010b5760018060008484815181106200009c577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001015173ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508080620001029062000813565b91505062000053565b5060018060003073ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055507fab0b9cc3a46b568cb08d985497cde8ab7e18892d01f58db7dc7f0d2af859b2d78160405162000194919062000619565b60405180910390a1505062000919565b828054828255906000526020600020908101928215620001f8579160200282015b82811115620001f7578251829080519060200190620001e69291906200020b565b5091602001919060010190620001c5565b5b5090506200020791906200029c565b5090565b8280546200021990620007a7565b90600052602060002090601f0160209004810192826200023d576000855562000289565b82601f106200025857805160ff191683800117855562000289565b8280016001018555821562000289579182015b82811115620002885782518255916020019190600101906200026b565b5b509050620002989190620002c4565b5090565b5b80821115620002c05760008181620002b69190620002e3565b506001016200029d565b5090565b5b80821115620002df576000816000905550600101620002c5565b5090565b508054620002f190620007a7565b6000825580601f1062000305575062000326565b601f016020900490600052602060002090810190620003259190620002c4565b5b50565b6000620003406200033a8462000666565b6200063d565b905080838252602082019050828560208602820111156200036057600080fd5b60005b8581101562000394578162000379888262000473565b84526020840193506020830192505060018101905062000363565b5050509392505050565b6000620003b5620003af8462000695565b6200063d565b90508083825260208201905082856020860282011115620003d557600080fd5b60005b858110156200042457815167ffffffffffffffff811115620003f957600080fd5b808601620004088982620004e4565b85526020850194506020840193505050600181019050620003d8565b5050509392505050565b6000620004456200043f84620006c4565b6200063d565b9050828152602081018484840111156200045e57600080fd5b6200046b84828562000771565b509392505050565b6000815190506200048481620008ff565b92915050565b600082601f8301126200049c57600080fd5b8151620004ae84826020860162000329565b91505092915050565b600082601f830112620004c957600080fd5b8151620004db8482602086016200039e565b91505092915050565b600082601f830112620004f657600080fd5b8151620005088482602086016200042e565b91505092915050565b600080604083850312156200052557600080fd5b600083015167ffffffffffffffff8111156200054057600080fd5b6200054e85828601620004b7565b925050602083015167ffffffffffffffff8111156200056c57600080fd5b6200057a858286016200048a565b9150509250929050565b60006200059283836200059e565b60208301905092915050565b620005a98162000733565b82525050565b6000620005bc826200070a565b620005c8818562000722565b9350620005d583620006fa565b8060005b838110156200060c578151620005f0888262000584565b9750620005fd8362000715565b925050600181019050620005d9565b5085935050505092915050565b60006020820190508181036000830152620006358184620005af565b905092915050565b6000620006496200065c565b9050620006578282620007dd565b919050565b6000604051905090565b600067ffffffffffffffff821115620006845762000683620008bf565b5b602082029050602081019050919050565b600067ffffffffffffffff821115620006b357620006b2620008bf565b5b602082029050602081019050919050565b600067ffffffffffffffff821115620006e257620006e1620008bf565b5b620006ed82620008ee565b9050602081019050919050565b6000819050602082019050919050565b600081519050919050565b6000602082019050919050565b600082825260208201905092915050565b6000620007408262000747565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b60005b838110156200079157808201518184015260208101905062000774565b83811115620007a1576000848401525b50505050565b60006002820490506001821680620007c057607f821691505b60208210811415620007d757620007d662000890565b5b50919050565b620007e882620008ee565b810181811067ffffffffffffffff821117156200080a5762000809620008bf565b5b80604052505050565b6000620008208262000767565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82141562000856576200085562000861565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b6200090a8162000733565b81146200091657600080fd5b50565b61186780620009296000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c806301ffc9a7146100675780631dcfea0914610097578063736c0d5b146100c7578063796676be146100f75780639061b92314610127578063f4d4d2f814610157575b600080fd5b610081600480360381019061007c9190610cb9565b610187565b60405161008e91906111c9565b60405180910390f35b6100b160048036038101906100ac9190610c26565b610201565b6040516100be91906111e4565b60405180910390f35b6100e160048036038101906100dc9190610bfd565b610219565b6040516100ee91906111c9565b60405180910390f35b610111600480360381019061010c9190610dd6565b610239565b60405161011e91906112a1565b60405180910390f35b610141600480360381019061013c9190610ce2565b6102e5565b60405161014e919061127f565b60405180910390f35b610171600480360381019061016c9190610ce2565b6103b4565b60405161017e919061127f565b60405180910390f35b60007f9061b923000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614806101fa57506101f982610462565b5b9050919050565b600061020f858585856104cc565b9050949350505050565b60016020528060005260406000206000915054906101000a900460ff1681565b6000818154811061024957600080fd5b90600052602060002001600091509050805461026490611541565b80601f016020809104026020016040519081016040528092919081815260200182805461029090611541565b80156102dd5780601f106102b2576101008083540402835291602001916102dd565b820191906000526020600020905b8154815290600101906020018083116102c057829003601f168201915b505050505081565b60606000639061b92360e01b868686866040516024016103089493929190611244565b604051602081830303815290604052907bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505090503060008263f4d4d2f860e01b846040517f556f18300000000000000000000000000000000000000000000000000000000081526004016103ab959493929190611161565b60405180910390fd5b60606000806103c585858989610513565b91509150600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16610455576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161044c90611323565b60405180910390fd5b8092505050949350505050565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b60008484848051906020012084805190602001206040516020016104f39493929190611108565b604051602081830303815290604052805190602001209050949350505050565b600060606000806000868681019061052b9190610d57565b925092509250600061058c61058630858d8d8080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050886104cc565b836105a1565b90508084955095505050505094509492505050565b60008060006105b085856105c8565b915091506105bd8161064b565b819250505092915050565b60008060418351141561060a5760008060006020860151925060408601519150606086015160001a90506105fe8782858561099c565b94509450505050610644565b60408351141561063b576000806020850151915060408501519050610630868383610aa9565b935093505050610644565b60006002915091505b9250929050565b60006004811115610685577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b8160048111156106be577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b14156106c957610999565b60016004811115610703577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b81600481111561073c577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b141561077d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610774906112c3565b60405180910390fd5b600260048111156107b7577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b8160048111156107f0577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b1415610831576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610828906112e3565b60405180910390fd5b6003600481111561086b577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b8160048111156108a4577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b14156108e5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108dc90611303565b60405180910390fd5b60048081111561091e577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b816004811115610957577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b1415610998576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161098f90611343565b60405180910390fd5b5b50565b6000807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08360001c11156109d7576000600391509150610aa0565b601b8560ff16141580156109ef5750601c8560ff1614155b15610a01576000600491509150610aa0565b600060018787878760405160008152602001604052604051610a2694939291906111ff565b6020604051602081039080840390855afa158015610a48573d6000803e3d6000fd5b505050602060405103519050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415610a9757600060019250925050610aa0565b80600092509250505b94509492505050565b6000806000807f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff85169150601b8560ff1c019050610ae98782888561099c565b935093505050935093915050565b6000610b0a610b0584611388565b611363565b905082815260208101848484011115610b2257600080fd5b610b2d8482856114ff565b509392505050565b600081359050610b44816117d5565b92915050565b600081359050610b59816117ec565b92915050565b60008083601f840112610b7157600080fd5b8235905067ffffffffffffffff811115610b8a57600080fd5b602083019150836001820283011115610ba257600080fd5b9250929050565b600082601f830112610bba57600080fd5b8135610bca848260208601610af7565b91505092915050565b600081359050610be281611803565b92915050565b600081359050610bf78161181a565b92915050565b600060208284031215610c0f57600080fd5b6000610c1d84828501610b35565b91505092915050565b60008060008060808587031215610c3c57600080fd5b6000610c4a87828801610b35565b9450506020610c5b87828801610be8565b935050604085013567ffffffffffffffff811115610c7857600080fd5b610c8487828801610ba9565b925050606085013567ffffffffffffffff811115610ca157600080fd5b610cad87828801610ba9565b91505092959194509250565b600060208284031215610ccb57600080fd5b6000610cd984828501610b4a565b91505092915050565b60008060008060408587031215610cf857600080fd5b600085013567ffffffffffffffff811115610d1257600080fd5b610d1e87828801610b5f565b9450945050602085013567ffffffffffffffff811115610d3d57600080fd5b610d4987828801610b5f565b925092505092959194509250565b600080600060608486031215610d6c57600080fd5b600084013567ffffffffffffffff811115610d8657600080fd5b610d9286828701610ba9565b9350506020610da386828701610be8565b925050604084013567ffffffffffffffff811115610dc057600080fd5b610dcc86828701610ba9565b9150509250925092565b600060208284031215610de857600080fd5b6000610df684828501610bd3565b91505092915050565b6000610e0b8383610f90565b905092915050565b610e1c81611460565b82525050565b610e33610e2e82611460565b6115a4565b82525050565b6000610e44826113e3565b610e4e8185611411565b935083602082028501610e60856113b9565b8060005b85811015610e9b57848403895281610e7c8582610dff565b9450610e8783611404565b925060208a01995050600181019050610e64565b50829750879550505050505092915050565b610eb681611472565b82525050565b610ec58161147e565b82525050565b610edc610ed78261147e565b6115b6565b82525050565b610eeb81611488565b82525050565b6000610efd8385611422565b9350610f0a8385846114ff565b610f1383611642565b840190509392505050565b6000610f29826113ee565b610f338185611422565b9350610f4381856020860161150e565b610f4c81611642565b840191505092915050565b6000610f62826113f9565b610f6c8185611444565b9350610f7c81856020860161150e565b610f8581611642565b840191505092915050565b60008154610f9d81611541565b610fa78186611433565b94506001821660008114610fc25760018114610fd457611007565b60ff1983168652602086019350611007565b610fdd856113ce565b60005b83811015610fff57815481890152600182019150602081019050610fe0565b808801955050505b50505092915050565b600061101d601883611444565b91506110288261166d565b602082019050919050565b6000611040601f83611444565b915061104b82611696565b602082019050919050565b6000611063602283611444565b915061106e826116bf565b604082019050919050565b6000611086602483611444565b91506110918261170e565b604082019050919050565b60006110a9600283611455565b91506110b48261175d565b600282019050919050565b60006110cc602283611444565b91506110d782611786565b604082019050919050565b6110f36110ee826114de565b6115d2565b82525050565b611102816114f2565b82525050565b60006111138261109c565b915061111f8287610e22565b60148201915061112f82866110e2565b60088201915061113f8285610ecb565b60208201915061114f8284610ecb565b60208201915081905095945050505050565b600060a0820190506111766000830188610e13565b81810360208301526111888187610e39565b9050818103604083015261119c8186610f1e565b90506111ab6060830185610ee2565b81810360808301526111bd8184610f1e565b90509695505050505050565b60006020820190506111de6000830184610ead565b92915050565b60006020820190506111f96000830184610ebc565b92915050565b60006080820190506112146000830187610ebc565b61122160208301866110f9565b61122e6040830185610ebc565b61123b6060830184610ebc565b95945050505050565b6000604082019050818103600083015261125f818688610ef1565b90508181036020830152611274818486610ef1565b905095945050505050565b600060208201905081810360008301526112998184610f1e565b905092915050565b600060208201905081810360008301526112bb8184610f57565b905092915050565b600060208201905081810360008301526112dc81611010565b9050919050565b600060208201905081810360008301526112fc81611033565b9050919050565b6000602082019050818103600083015261131c81611056565b9050919050565b6000602082019050818103600083015261133c81611079565b9050919050565b6000602082019050818103600083015261135c816110bf565b9050919050565b600061136d61137e565b90506113798282611573565b919050565b6000604051905090565b600067ffffffffffffffff8211156113a3576113a2611613565b5b6113ac82611642565b9050602081019050919050565b60008190508160005260206000209050919050565b60008190508160005260206000209050919050565b600081549050919050565b600081519050919050565b600081519050919050565b6000600182019050919050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600081905092915050565b600061146b826114b4565b9050919050565b60008115159050919050565b6000819050919050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b600067ffffffffffffffff82169050919050565b600060ff82169050919050565b82818337600083830152505050565b60005b8381101561152c578082015181840152602081019050611511565b8381111561153b576000848401525b50505050565b6000600282049050600182168061155957607f821691505b6020821081141561156d5761156c6115e4565b5b50919050565b61157c82611642565b810181811067ffffffffffffffff8211171561159b5761159a611613565b5b80604052505050565b60006115af826115c0565b9050919050565b6000819050919050565b60006115cb82611660565b9050919050565b60006115dd82611653565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b60008160c01b9050919050565b60008160601b9050919050565b7f45434453413a20696e76616c6964207369676e61747572650000000000000000600082015250565b7f45434453413a20696e76616c6964207369676e6174757265206c656e67746800600082015250565b7f45434453413a20696e76616c6964207369676e6174757265202773272076616c60008201527f7565000000000000000000000000000000000000000000000000000000000000602082015250565b7f5369676e617475726556657269666965723a20496e76616c6964207369676e6160008201527f7475726500000000000000000000000000000000000000000000000000000000602082015250565b7f1900000000000000000000000000000000000000000000000000000000000000600082015250565b7f45434453413a20696e76616c6964207369676e6174757265202776272076616c60008201527f7565000000000000000000000000000000000000000000000000000000000000602082015250565b6117de81611460565b81146117e957600080fd5b50565b6117f581611488565b811461180057600080fd5b50565b61180c816114d4565b811461181757600080fd5b50565b611823816114de565b811461182e57600080fd5b5056fea2646970667358221220e5f1e91619d2bc52c11e1bd99d0dabfdbeca91f7eac25e3122f6117fc623900b64736f6c63430008040033"
-offchain_resolver_bytecode_runtime = "608060405234801561001057600080fd5b50600436106100625760003560e01c806301ffc9a7146100675780631dcfea0914610097578063736c0d5b146100c7578063796676be146100f75780639061b92314610127578063f4d4d2f814610157575b600080fd5b610081600480360381019061007c9190610cb9565b610187565b60405161008e91906111c9565b60405180910390f35b6100b160048036038101906100ac9190610c26565b610201565b6040516100be91906111e4565b60405180910390f35b6100e160048036038101906100dc9190610bfd565b610219565b6040516100ee91906111c9565b60405180910390f35b610111600480360381019061010c9190610dd6565b610239565b60405161011e91906112a1565b60405180910390f35b610141600480360381019061013c9190610ce2565b6102e5565b60405161014e919061127f565b60405180910390f35b610171600480360381019061016c9190610ce2565b6103b4565b60405161017e919061127f565b60405180910390f35b60007f9061b923000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614806101fa57506101f982610462565b5b9050919050565b600061020f858585856104cc565b9050949350505050565b60016020528060005260406000206000915054906101000a900460ff1681565b6000818154811061024957600080fd5b90600052602060002001600091509050805461026490611541565b80601f016020809104026020016040519081016040528092919081815260200182805461029090611541565b80156102dd5780601f106102b2576101008083540402835291602001916102dd565b820191906000526020600020905b8154815290600101906020018083116102c057829003601f168201915b505050505081565b60606000639061b92360e01b868686866040516024016103089493929190611244565b604051602081830303815290604052907bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505090503060008263f4d4d2f860e01b846040517f556f18300000000000000000000000000000000000000000000000000000000081526004016103ab959493929190611161565b60405180910390fd5b60606000806103c585858989610513565b91509150600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16610455576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161044c90611323565b60405180910390fd5b8092505050949350505050565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b60008484848051906020012084805190602001206040516020016104f39493929190611108565b604051602081830303815290604052805190602001209050949350505050565b600060606000806000868681019061052b9190610d57565b925092509250600061058c61058630858d8d8080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050886104cc565b836105a1565b90508084955095505050505094509492505050565b60008060006105b085856105c8565b915091506105bd8161064b565b819250505092915050565b60008060418351141561060a5760008060006020860151925060408601519150606086015160001a90506105fe8782858561099c565b94509450505050610644565b60408351141561063b576000806020850151915060408501519050610630868383610aa9565b935093505050610644565b60006002915091505b9250929050565b60006004811115610685577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b8160048111156106be577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b14156106c957610999565b60016004811115610703577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b81600481111561073c577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b141561077d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610774906112c3565b60405180910390fd5b600260048111156107b7577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b8160048111156107f0577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b1415610831576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610828906112e3565b60405180910390fd5b6003600481111561086b577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b8160048111156108a4577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b14156108e5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108dc90611303565b60405180910390fd5b60048081111561091e577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b816004811115610957577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b1415610998576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161098f90611343565b60405180910390fd5b5b50565b6000807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08360001c11156109d7576000600391509150610aa0565b601b8560ff16141580156109ef5750601c8560ff1614155b15610a01576000600491509150610aa0565b600060018787878760405160008152602001604052604051610a2694939291906111ff565b6020604051602081039080840390855afa158015610a48573d6000803e3d6000fd5b505050602060405103519050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415610a9757600060019250925050610aa0565b80600092509250505b94509492505050565b6000806000807f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff85169150601b8560ff1c019050610ae98782888561099c565b935093505050935093915050565b6000610b0a610b0584611388565b611363565b905082815260208101848484011115610b2257600080fd5b610b2d8482856114ff565b509392505050565b600081359050610b44816117d5565b92915050565b600081359050610b59816117ec565b92915050565b60008083601f840112610b7157600080fd5b8235905067ffffffffffffffff811115610b8a57600080fd5b602083019150836001820283011115610ba257600080fd5b9250929050565b600082601f830112610bba57600080fd5b8135610bca848260208601610af7565b91505092915050565b600081359050610be281611803565b92915050565b600081359050610bf78161181a565b92915050565b600060208284031215610c0f57600080fd5b6000610c1d84828501610b35565b91505092915050565b60008060008060808587031215610c3c57600080fd5b6000610c4a87828801610b35565b9450506020610c5b87828801610be8565b935050604085013567ffffffffffffffff811115610c7857600080fd5b610c8487828801610ba9565b925050606085013567ffffffffffffffff811115610ca157600080fd5b610cad87828801610ba9565b91505092959194509250565b600060208284031215610ccb57600080fd5b6000610cd984828501610b4a565b91505092915050565b60008060008060408587031215610cf857600080fd5b600085013567ffffffffffffffff811115610d1257600080fd5b610d1e87828801610b5f565b9450945050602085013567ffffffffffffffff811115610d3d57600080fd5b610d4987828801610b5f565b925092505092959194509250565b600080600060608486031215610d6c57600080fd5b600084013567ffffffffffffffff811115610d8657600080fd5b610d9286828701610ba9565b9350506020610da386828701610be8565b925050604084013567ffffffffffffffff811115610dc057600080fd5b610dcc86828701610ba9565b9150509250925092565b600060208284031215610de857600080fd5b6000610df684828501610bd3565b91505092915050565b6000610e0b8383610f90565b905092915050565b610e1c81611460565b82525050565b610e33610e2e82611460565b6115a4565b82525050565b6000610e44826113e3565b610e4e8185611411565b935083602082028501610e60856113b9565b8060005b85811015610e9b57848403895281610e7c8582610dff565b9450610e8783611404565b925060208a01995050600181019050610e64565b50829750879550505050505092915050565b610eb681611472565b82525050565b610ec58161147e565b82525050565b610edc610ed78261147e565b6115b6565b82525050565b610eeb81611488565b82525050565b6000610efd8385611422565b9350610f0a8385846114ff565b610f1383611642565b840190509392505050565b6000610f29826113ee565b610f338185611422565b9350610f4381856020860161150e565b610f4c81611642565b840191505092915050565b6000610f62826113f9565b610f6c8185611444565b9350610f7c81856020860161150e565b610f8581611642565b840191505092915050565b60008154610f9d81611541565b610fa78186611433565b94506001821660008114610fc25760018114610fd457611007565b60ff1983168652602086019350611007565b610fdd856113ce565b60005b83811015610fff57815481890152600182019150602081019050610fe0565b808801955050505b50505092915050565b600061101d601883611444565b91506110288261166d565b602082019050919050565b6000611040601f83611444565b915061104b82611696565b602082019050919050565b6000611063602283611444565b915061106e826116bf565b604082019050919050565b6000611086602483611444565b91506110918261170e565b604082019050919050565b60006110a9600283611455565b91506110b48261175d565b600282019050919050565b60006110cc602283611444565b91506110d782611786565b604082019050919050565b6110f36110ee826114de565b6115d2565b82525050565b611102816114f2565b82525050565b60006111138261109c565b915061111f8287610e22565b60148201915061112f82866110e2565b60088201915061113f8285610ecb565b60208201915061114f8284610ecb565b60208201915081905095945050505050565b600060a0820190506111766000830188610e13565b81810360208301526111888187610e39565b9050818103604083015261119c8186610f1e565b90506111ab6060830185610ee2565b81810360808301526111bd8184610f1e565b90509695505050505050565b60006020820190506111de6000830184610ead565b92915050565b60006020820190506111f96000830184610ebc565b92915050565b60006080820190506112146000830187610ebc565b61122160208301866110f9565b61122e6040830185610ebc565b61123b6060830184610ebc565b95945050505050565b6000604082019050818103600083015261125f818688610ef1565b90508181036020830152611274818486610ef1565b905095945050505050565b600060208201905081810360008301526112998184610f1e565b905092915050565b600060208201905081810360008301526112bb8184610f57565b905092915050565b600060208201905081810360008301526112dc81611010565b9050919050565b600060208201905081810360008301526112fc81611033565b9050919050565b6000602082019050818103600083015261131c81611056565b9050919050565b6000602082019050818103600083015261133c81611079565b9050919050565b6000602082019050818103600083015261135c816110bf565b9050919050565b600061136d61137e565b90506113798282611573565b919050565b6000604051905090565b600067ffffffffffffffff8211156113a3576113a2611613565b5b6113ac82611642565b9050602081019050919050565b60008190508160005260206000209050919050565b60008190508160005260206000209050919050565b600081549050919050565b600081519050919050565b600081519050919050565b6000600182019050919050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600081905092915050565b600061146b826114b4565b9050919050565b60008115159050919050565b6000819050919050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b600067ffffffffffffffff82169050919050565b600060ff82169050919050565b82818337600083830152505050565b60005b8381101561152c578082015181840152602081019050611511565b8381111561153b576000848401525b50505050565b6000600282049050600182168061155957607f821691505b6020821081141561156d5761156c6115e4565b5b50919050565b61157c82611642565b810181811067ffffffffffffffff8211171561159b5761159a611613565b5b80604052505050565b60006115af826115c0565b9050919050565b6000819050919050565b60006115cb82611660565b9050919050565b60006115dd82611653565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b60008160c01b9050919050565b60008160601b9050919050565b7f45434453413a20696e76616c6964207369676e61747572650000000000000000600082015250565b7f45434453413a20696e76616c6964207369676e6174757265206c656e67746800600082015250565b7f45434453413a20696e76616c6964207369676e6174757265202773272076616c60008201527f7565000000000000000000000000000000000000000000000000000000000000602082015250565b7f5369676e617475726556657269666965723a20496e76616c6964207369676e6160008201527f7475726500000000000000000000000000000000000000000000000000000000602082015250565b7f1900000000000000000000000000000000000000000000000000000000000000600082015250565b7f45434453413a20696e76616c6964207369676e6174757265202776272076616c60008201527f7565000000000000000000000000000000000000000000000000000000000000602082015250565b6117de81611460565b81146117e957600080fd5b50565b6117f581611488565b811461180057600080fd5b50565b61180c816114d4565b811461181757600080fd5b50565b611823816114de565b811461182e57600080fd5b5056fea2646970667358221220e5f1e91619d2bc52c11e1bd99d0dabfdbeca91f7eac25e3122f6117fc623900b64736f6c63430008040033"
```

### Comparing `web3-6.6.1/ens/ens.py` & `web3-6.7.0/ens/ens.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,12 +1,13 @@
 from copy import (
     deepcopy,
 )
 from typing import (
     TYPE_CHECKING,
+    Any,
     Optional,
     Sequence,
     Tuple,
     Union,
     cast,
 )
 
@@ -33,17 +34,18 @@
     abis,
 )
 from .base_ens import (
     BaseENS,
 )
 from .constants import (
     EMPTY_ADDR_HEX,
+    ENS_EXTENDED_RESOLVER_INTERFACE_ID,
     ENS_MAINNET_ADDR,
-    EXTENDED_RESOLVER_INTERFACE_ID,
-    GET_TEXT_INTERFACE_ID,
+    ENS_MULTICHAIN_ADDRESS_INTERFACE_ID,
+    ENS_TEXT_INTERFACE_ID,
     REVERSE_REGISTRAR_DOMAIN,
 )
 from .exceptions import (
     AddressMismatch,
     ResolverNotFound,
     UnauthorizedError,
     UnownedName,
@@ -61,16 +63,17 @@
     normal_name_to_hash,
     normalize_name,
     raw_name_to_hash,
 )
 
 if TYPE_CHECKING:
     from web3 import Web3  # noqa: F401
-    from web3.contract import (  # noqa: F401
+    from web3.contract.contract import (  # noqa: F401
         Contract,
+        ContractFunction,
     )
     from web3.providers import (  # noqa: F401
         BaseProvider,
     )
     from web3.types import (  # noqa: F401
         Middleware,
         TxParams,
@@ -128,29 +131,51 @@
         ns = cls(cast("BaseProvider", provider), addr=addr, middlewares=middlewares)
 
         # inherit strict bytes checking from w3 instance
         ns.strict_bytes_type_checking = w3.strict_bytes_type_checking
 
         return ns
 
-    def address(self, name: str) -> Optional[ChecksumAddress]:
+    def address(
+        self,
+        name: str,
+        coin_type: Optional[int] = None,
+    ) -> Optional[ChecksumAddress]:
         """
         Look up the Ethereum address that `name` currently points to.
 
         :param str name: an ENS name to look up
+        :param int coin_type: if provided, look up the address for this coin type
         :raises InvalidName: if `name` has invalid syntax
+        :raises ResolverNotFound: if no resolver found for `name`
+        :raises UnsupportedFunction: if the resolver does not support the ``addr()``
+                function
         """
-        return cast(ChecksumAddress, self._resolve(name, "addr"))
+        r = self.resolver(name)
+        if coin_type is None:
+            # don't validate `addr(bytes32)` interface id since extended resolvers
+            # can implement a "resolve" function as of ENSIP-10
+            return cast(ChecksumAddress, self._resolve(name, "addr"))
+        else:
+            _validate_resolver_and_interface_id(
+                name, r, ENS_MULTICHAIN_ADDRESS_INTERFACE_ID, "addr(bytes32,uint256)"
+            )
+            node = raw_name_to_hash(name)
+            address_as_bytes = r.caller.addr(node, coin_type)
+            if is_none_or_zero_address(address_as_bytes):
+                return None
+            return to_checksum_address(address_as_bytes)
 
     def setup_address(
         self,
         name: str,
         address: Union[Address, ChecksumAddress, HexAddress] = cast(
             ChecksumAddress, default
         ),
+        coin_type: Optional[int] = None,
         transact: Optional["TxParams"] = None,
     ) -> Optional[HexBytes]:
         """
         Set up the name to point to the supplied address.
         The sender of the transaction must own the name, or
         its parent name.
 
@@ -158,21 +183,23 @@
         and calls this method with ``sub.parentname.eth``,
         then ``sub`` will be created as part of this call.
 
         :param str name: ENS name to set up
         :param str address: name will point to this address, in checksum format.
             If ``None``, erase the record. If not specified, name will point
             to the owner's address.
+        :param int coin_type: if provided, set up the address for this coin type
         :param dict transact: the transaction configuration, like in
             :meth:`~web3.eth.Eth.send_transaction`
         :raises InvalidName: if ``name`` has invalid syntax
         :raises UnauthorizedError: if ``'from'`` in `transact` does not own `name`
         """
         if not transact:
             transact = {}
+
         transact = deepcopy(transact)
         owner = self.setup_owner(name, transact=transact)
         self._assert_control(owner, name)
         if is_none_or_zero_address(address):
             address = None
         elif address is default:
             address = owner
@@ -183,17 +210,22 @@
         if self.address(name) == address:
             return None
         if address is None:
             address = EMPTY_ADDR_HEX
         transact["from"] = owner
 
         resolver: "Contract" = self._set_resolver(name, transact=transact)
-        return resolver.functions.setAddr(raw_name_to_hash(name), address).transact(
-            transact
-        )
+        node = raw_name_to_hash(name)
+
+        if coin_type is None:
+            return resolver.functions.setAddr(node, address).transact(transact)
+        else:
+            return resolver.functions.setAddr(node, coin_type, address).transact(
+                transact
+            )
 
     def name(self, address: ChecksumAddress) -> Optional[str]:
         """
         Look up the name that the address points to, using a
         reverse lookup. Reverse lookup is opt-in for name owners.
 
         :param address:
@@ -214,15 +246,15 @@
     ) -> HexBytes:
         """
         Set up the address for reverse lookup, aka "caller ID".
         After successful setup, the method :meth:`~ens.ENS.name` will return
         `name` when supplied with `address`.
 
         :param str name: ENS name that address will point to
-        :param str address: to set up, in checksum format
+        :param str address: address to set up, in checksum format
         :param dict transact: the transaction configuration, like in
             :meth:`~web3.eth.send_transaction`
         :raises AddressMismatch: if the name does not already point to the address
         :raises InvalidName: if `name` has invalid syntax
         :raises UnauthorizedError: if ``'from'`` in `transact` does not own `name`
         :raises UnownedName: if no one owns `name`
         """
@@ -298,14 +330,15 @@
             :meth:`~web3.eth.Eth.send_transaction`
         :raises InvalidName: if `name` has invalid syntax
         :raises UnauthorizedError: if ``'from'`` in `transact` does not own `name`
         :returns: the new owner's address
         """
         if not transact:
             transact = {}
+
         transact = deepcopy(transact)
         (super_owner, unowned, owned) = self._first_owner(name)
         if new_owner is default:
             new_owner = super_owner
         elif not new_owner:
             new_owner = ChecksumAddress(EMPTY_ADDR_HEX)
         else:
@@ -331,14 +364,16 @@
         normal_name = normalize_name(name)
         return self._get_resolver(normal_name)[0]
 
     def reverser(self, target_address: ChecksumAddress) -> Optional["Contract"]:
         reversed_domain = address_to_reverse_domain(target_address)
         return self.resolver(reversed_domain)
 
+    # -- text records -- #
+
     def get_text(self, name: str, key: str) -> str:
         """
         Get the value of a text record by key from an ENS name.
 
         :param str name: ENS name to look up
         :param str key: ENS name's text record key
         :return: ENS name's text record value
@@ -346,26 +381,16 @@
         :raises UnsupportedFunction: If the resolver does not support
             the "0x59d1d43c" interface id
         :raises ResolverNotFound: If no resolver is found for the provided name
         """
         node = raw_name_to_hash(name)
 
         r = self.resolver(name)
-        if r:
-            if _resolver_supports_interface(r, GET_TEXT_INTERFACE_ID):
-                return r.caller.text(node, key)
-            else:
-                raise UnsupportedFunction(
-                    f"Resolver for name {name} does not support `text` function."
-                )
-        else:
-            raise ResolverNotFound(
-                f"No resolver found for name `{name}`. It is likely the name "
-                "contains an unsupported top level domain (tld)."
-            )
+        _validate_resolver_and_interface_id(name, r, ENS_TEXT_INTERFACE_ID, "text")
+        return r.caller.text(node, key)
 
     def set_text(
         self,
         name: str,
         key: str,
         value: str,
         transact: "TxParams" = None,
@@ -380,35 +405,23 @@
             :meth:`~web3.eth.Eth.send_transaction`
         :return: Transaction hash
         :rtype: HexBytes
         :raises UnsupportedFunction: If the resolver does not support
             the "0x59d1d43c" interface id
         :raises ResolverNotFound: If no resolver is found for the provided name
         """
-        if not transact:
-            transact = {}
-
-        owner = self.owner(name)
+        r = self.resolver(name)
+        _validate_resolver_and_interface_id(name, r, ENS_TEXT_INTERFACE_ID, "text")
         node = raw_name_to_hash(name)
 
-        transaction_dict = merge({"from": owner}, transact)
+        return self._set_property(
+            name, r.functions.setText, (node, key, value), transact
+        )
 
-        r = self.resolver(name)
-        if r:
-            if _resolver_supports_interface(r, GET_TEXT_INTERFACE_ID):
-                return r.functions.setText(node, key, value).transact(transaction_dict)
-            else:
-                raise UnsupportedFunction(
-                    f"Resolver for name `{name}` does not support `text` function"
-                )
-        else:
-            raise ResolverNotFound(
-                f"No resolver found for name `{name}`. It is likely the name contains "
-                "an unsupported top level domain (tld)."
-            )
+    # -- private methods -- #
 
     def _get_resolver(
         self,
         normal_name: str,
         fn_name: str = "addr",
     ) -> Tuple[Optional["Contract"], str]:
         current_name = normal_name
@@ -448,23 +461,22 @@
             self.ens.functions.setResolver(namehash, resolver_addr).transact(transact)
         return cast("Contract", self._resolver_contract(address=resolver_addr))
 
     def _resolve(
         self, name: str, fn_name: str = "addr"
     ) -> Optional[Union[ChecksumAddress, str]]:
         normal_name = normalize_name(name)
-
         resolver, current_name = self._get_resolver(normal_name, fn_name)
         if not resolver:
             return None
 
         node = self.namehash(normal_name)
 
         # handle extended resolver case
-        if _resolver_supports_interface(resolver, EXTENDED_RESOLVER_INTERFACE_ID):
+        if _resolver_supports_interface(resolver, ENS_EXTENDED_RESOLVER_INTERFACE_ID):
             contract_func_with_args = (fn_name, [node])
 
             calldata = resolver.encodeABI(*contract_func_with_args)
             contract_call_result = resolver.caller.resolve(
                 ens_encode_name(normal_name),
                 calldata,
             )
@@ -543,12 +555,48 @@
         transact["from"] = address
         return self._reverse_registrar().functions.setName(name).transact(transact)
 
     def _reverse_registrar(self) -> "Contract":
         addr = self.ens.caller.owner(normal_name_to_hash(REVERSE_REGISTRAR_DOMAIN))
         return self.w3.eth.contract(address=addr, abi=abis.REVERSE_REGISTRAR)
 
+    def _set_property(
+        self,
+        name: str,
+        func: "ContractFunction",
+        args: Sequence[Any],
+        transact: "TxParams" = None,
+    ) -> HexBytes:
+        if not transact:
+            transact = {}
+
+        owner = self.owner(name)
+        transact_from_owner = merge({"from": owner}, transact)
+
+        return func(*args).transact(transact_from_owner)
+
+
+def _validate_resolver_and_interface_id(
+    ens_name: str,
+    resolver: "Contract",
+    ens_interface_id: HexStr,
+    interface_name: str,
+) -> None:
+    if not resolver:
+        raise ResolverNotFound(
+            f"No resolver found for name `{ens_name}`. It is likely the name "
+            "contains an unsupported top level domain (tld)."
+        )
+    elif not _resolver_supports_interface(resolver, ens_interface_id):
+        raise UnsupportedFunction(
+            f"Resolver for name `{ens_name}` does not support the `{interface_name}` "
+            f"interface."
+        )
+
 
-def _resolver_supports_interface(resolver: "Contract", interface_id: HexStr) -> bool:
-    if not any("supportsInterface" in repr(func) for func in resolver.all_functions()):
-        return False
-    return resolver.caller.supportsInterface(interface_id)
+def _resolver_supports_interface(
+    resolver: "Contract",
+    ens_interface_id: HexStr,
+) -> bool:
+    return any(
+        "supportsInterface" in repr(func) for func in resolver.all_functions()
+    ) and resolver.caller.supportsInterface(ens_interface_id)
```

### Comparing `web3-6.6.1/ens/exceptions.py` & `web3-6.7.0/ens/exceptions.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ens/specs/nf.json` & `web3-6.7.0/ens/specs/nf.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ens/specs/normalization_spec.json` & `web3-6.7.0/ens/specs/normalization_spec.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ens/utils.py` & `web3-6.7.0/ens/utils.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/__init__.py` & `web3-6.7.0/ethpm/__init__.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/_utils/backend.py` & `web3-6.7.0/ethpm/_utils/backend.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/_utils/cache.py` & `web3-6.7.0/ethpm/_utils/cache.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/_utils/chains.py` & `web3-6.7.0/ethpm/_utils/chains.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/_utils/contract.py` & `web3-6.7.0/ethpm/_utils/contract.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/_utils/deployments.py` & `web3-6.7.0/ethpm/_utils/deployments.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/_utils/ipfs.py` & `web3-6.7.0/ethpm/_utils/ipfs.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/_utils/protobuf/ipfs_file_pb2.py` & `web3-6.7.0/ethpm/_utils/protobuf/ipfs_file_pb2.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/_utils/registry.py` & `web3-6.7.0/ethpm/_utils/registry.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/ens/v3.json` & `web3-6.7.0/ethpm/assets/ens/v3.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/escrow/with_bytecode_v3.json` & `web3-6.7.0/ethpm/assets/escrow/with_bytecode_v3.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/ipfs_file.proto` & `web3-6.7.0/ethpm/assets/ipfs_file.proto`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/owned/output_v3.json` & `web3-6.7.0/ethpm/assets/owned/output_v3.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/owned/with_contract_type_v3.json` & `web3-6.7.0/ethpm/assets/owned/with_contract_type_v3.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/registry/contracts/Authority.sol` & `web3-6.7.0/ethpm/assets/registry/contracts/Authority.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/registry/contracts/IndexedOrderedSetLib.sol` & `web3-6.7.0/ethpm/assets/registry/contracts/IndexedOrderedSetLib.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/registry/contracts/PackageDB.sol` & `web3-6.7.0/ethpm/assets/registry/contracts/PackageDB.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/registry/contracts/PackageRegistry.sol` & `web3-6.7.0/ethpm/assets/registry/contracts/PackageRegistry.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/registry/contracts/PackageRegistryInterface.sol` & `web3-6.7.0/ethpm/assets/registry/contracts/PackageRegistryInterface.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/registry/contracts/ReleaseDB.sol` & `web3-6.7.0/ethpm/assets/registry/contracts/ReleaseDB.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/registry/contracts/ReleaseValidator.sol` & `web3-6.7.0/ethpm/assets/registry/contracts/ReleaseValidator.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/registry/solc_input.json` & `web3-6.7.0/ethpm/assets/registry/solc_input.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/registry/solc_output.json` & `web3-6.7.0/ethpm/assets/registry/solc_output.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/registry/v3.json` & `web3-6.7.0/ethpm/assets/registry/v3.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/safe-math-lib/v3-strict-no-deployments.json` & `web3-6.7.0/ethpm/assets/safe-math-lib/v3-strict-no-deployments.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/simple-registry/contracts/Ownable.sol` & `web3-6.7.0/ethpm/assets/simple-registry/contracts/Ownable.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/simple-registry/contracts/PackageRegistry.sol` & `web3-6.7.0/ethpm/assets/simple-registry/contracts/PackageRegistry.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/simple-registry/contracts/PackageRegistryInterface.sol` & `web3-6.7.0/ethpm/assets/simple-registry/contracts/PackageRegistryInterface.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/simple-registry/solc_input.json` & `web3-6.7.0/ethpm/assets/simple-registry/solc_input.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/simple-registry/solc_output.json` & `web3-6.7.0/ethpm/assets/simple-registry/solc_output.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/simple-registry/v3.json` & `web3-6.7.0/ethpm/assets/simple-registry/v3.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/standard-token/output_v3.json` & `web3-6.7.0/ethpm/assets/standard-token/output_v3.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/standard-token/with_bytecode_v3.json` & `web3-6.7.0/ethpm/assets/standard-token/with_bytecode_v3.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/vyper_registry/0.1.0.json` & `web3-6.7.0/ethpm/assets/vyper_registry/0.1.0.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/vyper_registry/registry.vy` & `web3-6.7.0/ethpm/assets/vyper_registry/registry.vy`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/assets/vyper_registry/registry_with_delete.vy` & `web3-6.7.0/ethpm/assets/vyper_registry/registry_with_delete.vy`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/backends/base.py` & `web3-6.7.0/ethpm/backends/base.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/backends/http.py` & `web3-6.7.0/ethpm/backends/http.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/backends/ipfs.py` & `web3-6.7.0/ethpm/backends/ipfs.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/backends/registry.py` & `web3-6.7.0/ethpm/backends/registry.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/contract.py` & `web3-6.7.0/ethpm/contract.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/dependencies.py` & `web3-6.7.0/ethpm/dependencies.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/deployments.py` & `web3-6.7.0/ethpm/deployments.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/escrow/1.0.0-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/escrow/1.0.0-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/escrow/1.0.0.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/escrow/1.0.0.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/escrow/contracts/Escrow.sol` & `web3-6.7.0/ethpm/ethpm-spec/examples/escrow/contracts/Escrow.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/escrow/contracts/SafeSendLib.sol` & `web3-6.7.0/ethpm/ethpm-spec/examples/escrow/contracts/SafeSendLib.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/escrow/v3-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/escrow/v3-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/escrow/v3.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/escrow/v3.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/owned/1.0.0-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/owned/1.0.0-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/owned/v3-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/owned/v3-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/piper-coin/1.0.0-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/piper-coin/1.0.0-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/piper-coin/1.0.0.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/piper-coin/1.0.0.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/piper-coin/v3-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/piper-coin/v3-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/piper-coin/v3.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/piper-coin/v3.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/safe-math-lib/1.0.0-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/safe-math-lib/1.0.0-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/safe-math-lib/1.0.0.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/safe-math-lib/1.0.0.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/safe-math-lib/contracts/SafeMathLib.sol` & `web3-6.7.0/ethpm/ethpm-spec/examples/safe-math-lib/contracts/SafeMathLib.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/safe-math-lib/v3-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/safe-math-lib/v3-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/safe-math-lib/v3.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/safe-math-lib/v3.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/standard-token/1.0.0-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/standard-token/1.0.0-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/standard-token/1.0.0.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/standard-token/1.0.0.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/standard-token/contracts/AbstractToken.sol` & `web3-6.7.0/ethpm/ethpm-spec/examples/standard-token/contracts/AbstractToken.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/standard-token/contracts/StandardToken.sol` & `web3-6.7.0/ethpm/ethpm-spec/examples/standard-token/contracts/StandardToken.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/standard-token/v3-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/standard-token/v3-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/standard-token/v3.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/standard-token/v3.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/transferable/1.0.0-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/transferable/1.0.0-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/transferable/v3-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/transferable/v3-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/transferable/v3.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/transferable/v3.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/wallet/1.0.0-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/wallet/1.0.0-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/wallet/1.0.0.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/wallet/1.0.0.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/wallet/contracts/Wallet.sol` & `web3-6.7.0/ethpm/ethpm-spec/examples/wallet/contracts/Wallet.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/wallet/v3-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/wallet/v3-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/wallet/v3.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/wallet/v3.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/wallet-with-send/1.0.0-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/wallet-with-send/1.0.0-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/wallet-with-send/1.0.0.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/wallet-with-send/1.0.0.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/wallet-with-send/contracts/WalletWithSend.sol` & `web3-6.7.0/ethpm/ethpm-spec/examples/wallet-with-send/contracts/WalletWithSend.sol`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/wallet-with-send/v3-pretty.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/wallet-with-send/v3-pretty.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/examples/wallet-with-send/v3.json` & `web3-6.7.0/ethpm/ethpm-spec/examples/wallet-with-send/v3.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/spec/package.spec.json` & `web3-6.7.0/ethpm/ethpm-spec/spec/package.spec.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/ethpm-spec/spec/v3.spec.json` & `web3-6.7.0/ethpm/ethpm-spec/spec/v3.spec.json`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/exceptions.py` & `web3-6.7.0/ethpm/exceptions.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/package.py` & `web3-6.7.0/ethpm/package.py`

 * *Files 0% similar despite different names*

```diff
@@ -243,15 +243,15 @@
     #
     # Contracts
     #
 
     def get_contract_factory(self, name: ContractName) -> LinkableContract:
         """
         Return the contract factory for a given contract type, generated from
-        the data vailable in ``Package.manifest``. Contract factories are
+        the data available in ``Package.manifest``. Contract factories are
         accessible from the package class.
 
         .. code:: python
 
            Owned = OwnedPackage.get_contract_factory('owned')
 
         In cases where a contract uses a library, the contract factory will have
```

### Comparing `web3-6.6.1/ethpm/tools/builder.py` & `web3-6.7.0/ethpm/tools/builder.py`

 * *Files 0% similar despite different names*

```diff
@@ -821,15 +821,15 @@
 
 
 @curry
 def init_manifest(
     package_name: str, version: str, manifest_version: Optional[str] = "ethpm/3"
 ) -> Dict[str, Any]:
     """
-    Returns an initial dict with the minimal requried fields for a valid manifest.
+    Returns an initial dict with the minimal required fields for a valid manifest.
     Should only be used as the first fn to be piped into a `build()` pipeline.
     """
     return {
         "name": package_name,
         "version": version,
         "manifest": manifest_version,
     }
```

### Comparing `web3-6.6.1/ethpm/tools/checker.py` & `web3-6.7.0/ethpm/tools/checker.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/uri.py` & `web3-6.7.0/ethpm/uri.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/validation/manifest.py` & `web3-6.7.0/ethpm/validation/manifest.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/validation/misc.py` & `web3-6.7.0/ethpm/validation/misc.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/validation/package.py` & `web3-6.7.0/ethpm/validation/package.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/ethpm/validation/uri.py` & `web3-6.7.0/ethpm/validation/uri.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/pyproject.toml` & `web3-6.7.0/pyproject.toml`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/setup.py` & `web3-6.7.0/setup.py`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 from setuptools import (
     find_packages,
     setup,
 )
 
 extras_require = {
     "tester": [
-        "eth-tester[py-evm]==v0.9.0-b.2",
+        "eth-tester[py-evm]==v0.9.1-b.1",
         "py-geth>=3.11.0",
     ],
     "linter": [
         "black>=22.1.0",
         "flake8==3.8.3",
         "isort>=5.11.0",
         "mypy>=1.0.0",
@@ -55,15 +55,15 @@
 
 with open("./README.md") as readme:
     long_description = readme.read()
 
 setup(
     name="web3",
     # *IMPORTANT*: Don't manually change the version here. Use the 'bumpversion' utility.
-    version="6.6.1",
+    version="6.7.0",
     description="""web3.py""",
     long_description_content_type="text/markdown",
     long_description=long_description,
     author="The Ethereum Foundation",
     author_email="snakecharmers@ethereum.org",
     url="https://github.com/ethereum/web3.py",
     include_package_data=True,
```

### Comparing `web3-6.6.1/web3/__init__.py` & `web3-6.7.0/web3/__init__.py`

 * *Files 22% similar despite different names*

```diff
@@ -15,22 +15,24 @@
     IPCProvider,
 )
 from web3.providers.rpc import (  # noqa: E402
     HTTPProvider,
 )
 from web3.providers.websocket import (  # noqa: E402
     WebsocketProvider,
+    WebsocketProviderV2,
 )
 
 __version__ = pkg_resources.get_distribution("web3").version
 
 __all__ = [
     "__version__",
     "AsyncWeb3",
     "Web3",
     "HTTPProvider",
     "IPCProvider",
     "WebsocketProvider",
+    "WebsocketProviderV2",
     "EthereumTesterProvider",
     "Account",
     "AsyncHTTPProvider",
 ]
```

### Comparing `web3-6.6.1/web3/_utils/abi.py` & `web3-6.7.0/web3/_utils/abi.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/async_transactions.py` & `web3-6.7.0/web3/_utils/async_transactions.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/blocks.py` & `web3-6.7.0/web3/_utils/blocks.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/compat/__init__.py` & `web3-6.7.0/web3/_utils/compat/__init__.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_error_handling.py` & `web3-6.7.0/web3/_utils/contract_error_handling.py`

 * *Files 11% similar despite different names*

```diff
@@ -61,20 +61,29 @@
 
     See also https://solidity.readthedocs.io/en/v0.6.3/control-structures.html#revert
     """
     if not isinstance(response["error"], dict):
         raise ValueError("Error expected to be a dict")
 
     data = response["error"].get("data", "")
+    message = response["error"].get("message", "")
+
+    message_present = message is not None and message != ""
+
+    if data is None:
+        if message_present:
+            raise ContractLogicError(message)
+        elif not message_present:
+            raise ContractLogicError("execution reverted")
+        else:
+            raise Exception("Unreachable")
 
     # Ganache case:
-    if isinstance(data, dict) and response["error"].get("message"):
-        raise ContractLogicError(
-            f'execution reverted: {response["error"]["message"]}', data=data
-        )
+    if isinstance(data, dict) and message_present:
+        raise ContractLogicError(f"execution reverted: {message}", data=data)
 
     # Parity/OpenEthereum case:
     if data.startswith("Reverted "):
         # "Reverted", function selector and offset are always the same for revert errors
         prefix = f"Reverted {SOLIDITY_ERROR_FUNC_SELECTOR}"
         data_offset = ("00" * 31) + "20"  # 0x0000...0020 (32 bytes)
         revert_pattern = prefix + data_offset
@@ -122,16 +131,14 @@
     if len(data) >= 10 and not data[:10] == SOLIDITY_ERROR_FUNC_SELECTOR:
         # Raise with data as both the message and the data for backwards
         # compatibility and so that data can be accessed via 'data' attribute
         # on the ContractCustomError exception
         raise ContractCustomError(data, data=data)
 
     # Geth case:
-    if "message" in response["error"] and response["error"].get("code", "") == 3:
-        message = response["error"]["message"]
+    if message_present and response["error"].get("code", "") == 3:
         raise ContractLogicError(message, data=data)
-
     # Geth Revert without error message case:
-    if "execution reverted" in response["error"].get("message"):
+    if message_present and "execution reverted" in message:
         raise ContractLogicError("execution reverted", data=data)
 
     return response
```

### Comparing `web3-6.6.1/web3/_utils/contract_sources/compile_contracts.py` & `web3-6.7.0/web3/_utils/contract_sources/compile_contracts.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/_custom_contract_data.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/_custom_contract_data.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/address_reflector.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/address_reflector.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/arrays_contract.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/arrays_contract.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/bytes_contracts.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/bytes_contracts.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/constructor_contracts.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/constructor_contracts.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/contract_caller_tester.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/contract_caller_tester.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/emitter_contract.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/emitter_contract.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/event_contracts.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/event_contracts.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/extended_resolver.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/extended_resolver.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/fallback_function_contract.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/fallback_function_contract.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/math_contract.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/math_contract.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/offchain_lookup.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/offchain_lookup.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/offchain_resolver.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/offchain_resolver.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/panic_errors_contract.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/panic_errors_contract.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/payable_tester.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/payable_tester.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/receive_function_contracts.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/receive_function_contracts.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/reflector_contracts.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/reflector_contracts.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/revert_contract.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/revert_contract.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/simple_resolver.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/simple_resolver.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/storage_contract.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/storage_contract.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/string_contract.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/string_contract.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contract_sources/contract_data/tuple_contracts.py` & `web3-6.7.0/web3/_utils/contract_sources/contract_data/tuple_contracts.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/contracts.py` & `web3-6.7.0/web3/_utils/contracts.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/datatypes.py` & `web3-6.7.0/web3/_utils/datatypes.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/decorators.py` & `web3-6.7.0/web3/_utils/decorators.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/encoding.py` & `web3-6.7.0/web3/_utils/encoding.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/ens.py` & `web3-6.7.0/web3/_utils/ens.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/events.py` & `web3-6.7.0/web3/_utils/events.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/fee_utils.py` & `web3-6.7.0/web3/_utils/fee_utils.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/filters.py` & `web3-6.7.0/web3/_utils/filters.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/formatters.py` & `web3-6.7.0/web3/_utils/formatters.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/math.py` & `web3-6.7.0/web3/_utils/math.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/method_formatters.py` & `web3-6.7.0/web3/_utils/method_formatters.py`

 * *Files 3% similar despite different names*

```diff
@@ -81,14 +81,17 @@
     RPC,
     RPC_ABIS,
     abi_request_formatters,
 )
 from web3._utils.type_conversion import (
     to_hex_if_bytes,
 )
+from web3._utils.utility_methods import (
+    either_set_is_a_subset,
+)
 from web3.datastructures import (
     AttributeDict,
     ReadableAttributeDict,
 )
 from web3.exceptions import (
     BlockNotFound,
     TransactionNotFound,
@@ -197,14 +200,25 @@
     "s": apply_formatter_if(is_not_null, to_hexbytes(32, variable_length=True)),
     "to": apply_formatter_if(is_address, to_checksum_address),
     "hash": to_hexbytes(32),
     "v": apply_formatter_if(is_not_null, to_integer_if_hex),
     "standardV": apply_formatter_if(is_not_null, to_integer_if_hex),
     "type": apply_formatter_if(is_not_null, to_integer_if_hex),
     "chainId": apply_formatter_if(is_not_null, to_integer_if_hex),
+    "accessList": apply_formatter_if(
+        is_not_null,
+        apply_formatter_to_array(
+            type_aware_apply_formatters_to_dict(
+                {
+                    "address": to_checksum_address,
+                }
+            )
+        ),
+    ),
+    "input": HexBytes,
 }
 
 
 transaction_result_formatter = type_aware_apply_formatters_to_dict(
     TRANSACTION_RESULT_FORMATTERS
 )
 
@@ -303,18 +317,19 @@
 SYNCING_FORMATTERS = {
     "startingBlock": to_integer_if_hex,
     "currentBlock": to_integer_if_hex,
     "highestBlock": to_integer_if_hex,
     "knownStates": to_integer_if_hex,
     "pulledStates": to_integer_if_hex,
 }
-
-
 syncing_formatter = type_aware_apply_formatters_to_dict(SYNCING_FORMATTERS)
 
+GETH_SYNCING_SUBSCRIPTION_FORMATTERS = {
+    "status": SYNCING_FORMATTERS,
+}
 
 TRANSACTION_POOL_CONTENT_FORMATTERS = {
     "pending": compose(
         curried.keymap(to_ascii_if_bytes),
         curried.valmap(transaction_result_formatter),
     ),
     "queued": compose(
@@ -590,14 +605,54 @@
     {
         "trace": apply_formatter_if(is_not_null, trace_list_result_formatter),
         "output": HexBytes,
         "transactionHash": HexBytes,  # trace_replayBlockTransactions
     }
 )
 
+
+# -- eth_subscribe -- #
+def subscription_formatter(value: Any) -> Union[HexBytes, HexStr, Dict[str, Any]]:
+    if is_string(value):
+        if len(value.replace("0x", "")) == 64:
+            # transaction hash, from `newPendingTransactions` subscription w/o full_txs
+            return HexBytes(value)
+
+        # subscription id from the original subscription request
+        return HexStr(value)
+
+    response_key_set = set(value.keys())
+
+    # handle dict subscription responses
+    if either_set_is_a_subset(response_key_set, set(BLOCK_FORMATTERS.keys())):
+        # block format, newHeads
+        return block_formatter(value)
+
+    elif either_set_is_a_subset(response_key_set, set(LOG_ENTRY_FORMATTERS.keys())):
+        # logs
+        return log_entry_formatter(value)
+
+    elif either_set_is_a_subset(
+        response_key_set, set(TRANSACTION_RESULT_FORMATTERS.keys())
+    ):
+        # transaction subscription type (newPendingTransactions), full transactions
+        return transaction_result_formatter(value)
+
+    elif any(_ in response_key_set for _ in {"syncing", "status"}):
+        # geth syncing response
+        return type_aware_apply_formatters_to_dict(GETH_SYNCING_SUBSCRIPTION_FORMATTERS)
+
+    elif either_set_is_a_subset(response_key_set, set(SYNCING_FORMATTERS.keys())):
+        # syncing response object
+        return syncing_formatter
+
+    # fallback to returning the value as-is
+    return value
+
+
 PYTHONIC_RESULT_FORMATTERS: Dict[RPCEndpoint, Callable[..., Any]] = {
     # Eth
     RPC.eth_accounts: apply_list_to_array_formatter(to_checksum_address),
     RPC.eth_blockNumber: to_integer_if_hex,
     RPC.eth_chainId: to_integer_if_hex,
     RPC.eth_coinbase: to_checksum_address,
     RPC.eth_call: HexBytes,
@@ -668,14 +723,19 @@
     RPC.trace_transaction: trace_list_result_formatter,
     RPC.trace_rawTransaction: common_tracing_result_formatter,
     RPC.trace_replayTransaction: common_tracing_result_formatter,
     RPC.trace_replayBlockTransactions: apply_formatter_to_array(
         common_tracing_result_formatter
     ),
     RPC.trace_filter: trace_list_result_formatter,
+    # Subscriptions (websockets)
+    RPC.eth_subscribe: apply_formatter_if(
+        is_not_null,
+        subscription_formatter,
+    ),
 }
 
 METHOD_NORMALIZERS: Dict[RPCEndpoint, Callable[..., Any]] = {
     RPC.eth_getLogs: apply_formatter_at_index(FILTER_PARAM_NORMALIZERS, 0),
     RPC.eth_newFilter: apply_formatter_at_index(FILTER_PARAM_NORMALIZERS, 0),
 }
```

### Comparing `web3-6.6.1/web3/_utils/miner.py` & `web3-6.7.0/web3/_utils/miner.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/module.py` & `web3-6.7.0/web3/_utils/module.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/module_testing/__init__.py` & `web3-6.7.0/web3/_utils/module_testing/__init__.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/module_testing/eth_module.py` & `web3-6.7.0/web3/_utils/module_testing/eth_module.py`

 * *Files 3% similar despite different names*

```diff
@@ -316,10706 +316,10930 @@
 000013b0: 7465 6420 6973 2054 7275 650a 0a20 2020  ted is True..   
 000013c0: 2040 7079 7465 7374 2e6d 6172 6b2e 6173   @pytest.mark.as
 000013d0: 796e 6369 6f0a 2020 2020 6173 796e 6320  yncio.    async 
 000013e0: 6465 6620 7465 7374 5f65 7468 5f73 656e  def test_eth_sen
 000013f0: 645f 7472 616e 7361 6374 696f 6e5f 6c65  d_transaction_le
 00001400: 6761 6379 280a 2020 2020 2020 2020 7365  gacy(.        se
 00001410: 6c66 2c20 6173 796e 635f 7733 3a20 2241  lf, async_w3: "A
-00001420: 7379 6e63 5765 6233 222c 2075 6e6c 6f63  syncWeb3", unloc
-00001430: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
-00001440: 5f74 7970 653a 2043 6865 636b 7375 6d41  _type: ChecksumA
-00001450: 6464 7265 7373 0a20 2020 2029 202d 3e20  ddress.    ) -> 
-00001460: 4e6f 6e65 3a0a 2020 2020 2020 2020 7478  None:.        tx
-00001470: 6e5f 7061 7261 6d73 3a20 5478 5061 7261  n_params: TxPara
-00001480: 6d73 203d 207b 0a20 2020 2020 2020 2020  ms = {.         
-00001490: 2020 2022 6672 6f6d 223a 2075 6e6c 6f63     "from": unloc
-000014a0: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
-000014b0: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
-000014c0: 2020 2022 746f 223a 2075 6e6c 6f63 6b65     "to": unlocke
-000014d0: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-000014e0: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
-000014f0: 2022 7661 6c75 6522 3a20 5765 6928 3129   "value": Wei(1)
-00001500: 2c0a 2020 2020 2020 2020 2020 2020 2267  ,.            "g
-00001510: 6173 223a 2032 3130 3030 2c0a 2020 2020  as": 21000,.    
-00001520: 2020 2020 2020 2020 2267 6173 5072 6963          "gasPric
-00001530: 6522 3a20 6177 6169 7420 6173 796e 635f  e": await async_
-00001540: 7733 2e65 7468 2e67 6173 5f70 7269 6365  w3.eth.gas_price
-00001550: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
-00001560: 2020 2020 7478 6e5f 6861 7368 203d 2061      txn_hash = a
-00001570: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
-00001580: 682e 7365 6e64 5f74 7261 6e73 6163 7469  h.send_transacti
-00001590: 6f6e 2874 786e 5f70 6172 616d 7329 0a20  on(txn_params). 
-000015a0: 2020 2020 2020 2074 786e 203d 2061 7761         txn = awa
-000015b0: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
-000015c0: 6765 745f 7472 616e 7361 6374 696f 6e28  get_transaction(
-000015d0: 7478 6e5f 6861 7368 290a 0a20 2020 2020  txn_hash)..     
-000015e0: 2020 2061 7373 6572 7420 6973 5f73 616d     assert is_sam
-000015f0: 655f 6164 6472 6573 7328 7478 6e5b 2266  e_address(txn["f
-00001600: 726f 6d22 5d2c 2063 6173 7428 4368 6563  rom"], cast(Chec
-00001610: 6b73 756d 4164 6472 6573 732c 2074 786e  ksumAddress, txn
-00001620: 5f70 6172 616d 735b 2266 726f 6d22 5d29  _params["from"])
-00001630: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-00001640: 2069 735f 7361 6d65 5f61 6464 7265 7373   is_same_address
-00001650: 2874 786e 5b22 746f 225d 2c20 6361 7374  (txn["to"], cast
-00001660: 2843 6865 636b 7375 6d41 6464 7265 7373  (ChecksumAddress
-00001670: 2c20 7478 6e5f 7061 7261 6d73 5b22 746f  , txn_params["to
-00001680: 225d 2929 0a20 2020 2020 2020 2061 7373  "])).        ass
-00001690: 6572 7420 7478 6e5b 2276 616c 7565 225d  ert txn["value"]
-000016a0: 203d 3d20 310a 2020 2020 2020 2020 6173   == 1.        as
-000016b0: 7365 7274 2074 786e 5b22 6761 7322 5d20  sert txn["gas"] 
-000016c0: 3d3d 2032 3130 3030 0a20 2020 2020 2020  == 21000.       
-000016d0: 2061 7373 6572 7420 7478 6e5b 2267 6173   assert txn["gas
-000016e0: 5072 6963 6522 5d20 3d3d 2074 786e 5f70  Price"] == txn_p
-000016f0: 6172 616d 735b 2267 6173 5072 6963 6522  arams["gasPrice"
-00001700: 5d0a 0a20 2020 2040 7079 7465 7374 2e6d  ]..    @pytest.m
-00001710: 6172 6b2e 6173 796e 6369 6f0a 2020 2020  ark.asyncio.    
-00001720: 6173 796e 6320 6465 6620 7465 7374 5f65  async def test_e
-00001730: 7468 5f6d 6f64 6966 795f 7472 616e 7361  th_modify_transa
-00001740: 6374 696f 6e5f 6c65 6761 6379 280a 2020  ction_legacy(.  
-00001750: 2020 2020 2020 7365 6c66 2c20 6173 796e        self, asyn
-00001760: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
-00001770: 222c 2075 6e6c 6f63 6b65 645f 6163 636f  ", unlocked_acco
-00001780: 756e 743a 2043 6865 636b 7375 6d41 6464  unt: ChecksumAdd
-00001790: 7265 7373 0a20 2020 2029 202d 3e20 4e6f  ress.    ) -> No
-000017a0: 6e65 3a0a 2020 2020 2020 2020 7478 6e5f  ne:.        txn_
-000017b0: 7061 7261 6d73 3a20 5478 5061 7261 6d73  params: TxParams
-000017c0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-000017d0: 2022 6672 6f6d 223a 2075 6e6c 6f63 6b65   "from": unlocke
-000017e0: 645f 6163 636f 756e 742c 0a20 2020 2020  d_account,.     
-000017f0: 2020 2020 2020 2022 746f 223a 2075 6e6c         "to": unl
-00001800: 6f63 6b65 645f 6163 636f 756e 742c 0a20  ocked_account,. 
-00001810: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
-00001820: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
-00001830: 2020 2020 2020 2020 2267 6173 223a 2032          "gas": 2
-00001840: 3130 3030 2c0a 2020 2020 2020 2020 2020  1000,.          
-00001850: 2020 2267 6173 5072 6963 6522 3a20 6173    "gasPrice": as
-00001860: 796e 635f 7733 2e74 6f5f 7765 6928 0a20  ync_w3.to_wei(. 
-00001870: 2020 2020 2020 2020 2020 2020 2020 2031                 1
-00001880: 2c20 2267 7765 6922 0a20 2020 2020 2020  , "gwei".       
-00001890: 2020 2020 2029 2c20 2023 206d 7573 7420       ),  # must 
-000018a0: 6265 2067 7265 6174 6572 2074 6861 6e20  be greater than 
-000018b0: 6261 7365 5f66 6565 2070 6f73 7420 4c6f  base_fee post Lo
-000018c0: 6e64 6f6e 0a20 2020 2020 2020 207d 0a20  ndon.        }. 
-000018d0: 2020 2020 2020 2074 786e 5f68 6173 6820         txn_hash 
-000018e0: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
-000018f0: 2e65 7468 2e73 656e 645f 7472 616e 7361  .eth.send_transa
-00001900: 6374 696f 6e28 7478 6e5f 7061 7261 6d73  ction(txn_params
-00001910: 290a 0a20 2020 2020 2020 206d 6f64 6966  )..        modif
-00001920: 6965 645f 7478 6e5f 6861 7368 203d 2061  ied_txn_hash = a
-00001930: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
-00001940: 682e 6d6f 6469 6679 5f74 7261 6e73 6163  h.modify_transac
-00001950: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
-00001960: 2020 7478 6e5f 6861 7368 2c20 6761 7350    txn_hash, gasP
-00001970: 7269 6365 3d28 6361 7374 2869 6e74 2c20  rice=(cast(int, 
-00001980: 7478 6e5f 7061 7261 6d73 5b22 6761 7350  txn_params["gasP
-00001990: 7269 6365 225d 2920 2a20 3229 2c20 7661  rice"]) * 2), va
-000019a0: 6c75 653d 320a 2020 2020 2020 2020 290a  lue=2.        ).
-000019b0: 2020 2020 2020 2020 6d6f 6469 6669 6564          modified
-000019c0: 5f74 786e 203d 2061 7761 6974 2061 7379  _txn = await asy
-000019d0: 6e63 5f77 332e 6574 682e 6765 745f 7472  nc_w3.eth.get_tr
-000019e0: 616e 7361 6374 696f 6e28 6d6f 6469 6669  ansaction(modifi
-000019f0: 6564 5f74 786e 5f68 6173 6829 0a0a 2020  ed_txn_hash)..  
-00001a00: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
-00001a10: 7361 6d65 5f61 6464 7265 7373 280a 2020  same_address(.  
-00001a20: 2020 2020 2020 2020 2020 6d6f 6469 6669            modifi
-00001a30: 6564 5f74 786e 5b22 6672 6f6d 225d 2c20  ed_txn["from"], 
-00001a40: 6361 7374 2843 6865 636b 7375 6d41 6464  cast(ChecksumAdd
-00001a50: 7265 7373 2c20 7478 6e5f 7061 7261 6d73  ress, txn_params
-00001a60: 5b22 6672 6f6d 225d 290a 2020 2020 2020  ["from"]).      
-00001a70: 2020 290a 2020 2020 2020 2020 6173 7365    ).        asse
-00001a80: 7274 2069 735f 7361 6d65 5f61 6464 7265  rt is_same_addre
-00001a90: 7373 280a 2020 2020 2020 2020 2020 2020  ss(.            
-00001aa0: 6d6f 6469 6669 6564 5f74 786e 5b22 746f  modified_txn["to
-00001ab0: 225d 2c20 6361 7374 2843 6865 636b 7375  "], cast(Checksu
-00001ac0: 6d41 6464 7265 7373 2c20 7478 6e5f 7061  mAddress, txn_pa
-00001ad0: 7261 6d73 5b22 746f 225d 290a 2020 2020  rams["to"]).    
-00001ae0: 2020 2020 290a 2020 2020 2020 2020 6173      ).        as
-00001af0: 7365 7274 206d 6f64 6966 6965 645f 7478  sert modified_tx
-00001b00: 6e5b 2276 616c 7565 225d 203d 3d20 320a  n["value"] == 2.
-00001b10: 2020 2020 2020 2020 6173 7365 7274 206d          assert m
-00001b20: 6f64 6966 6965 645f 7478 6e5b 2267 6173  odified_txn["gas
-00001b30: 225d 203d 3d20 3231 3030 300a 2020 2020  "] == 21000.    
-00001b40: 2020 2020 6173 7365 7274 206d 6f64 6966      assert modif
-00001b50: 6965 645f 7478 6e5b 2267 6173 5072 6963  ied_txn["gasPric
-00001b60: 6522 5d20 3d3d 2063 6173 7428 696e 742c  e"] == cast(int,
-00001b70: 2074 786e 5f70 6172 616d 735b 2267 6173   txn_params["gas
-00001b80: 5072 6963 6522 5d29 202a 2032 0a0a 2020  Price"]) * 2..  
-00001b90: 2020 4070 7974 6573 742e 6d61 726b 2e61    @pytest.mark.a
-00001ba0: 7379 6e63 696f 0a20 2020 2061 7379 6e63  syncio.    async
-00001bb0: 2064 6566 2074 6573 745f 6574 685f 6d6f   def test_eth_mo
-00001bc0: 6469 6679 5f74 7261 6e73 6163 7469 6f6e  dify_transaction
-00001bd0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-00001be0: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
-00001bf0: 5765 6233 222c 2075 6e6c 6f63 6b65 645f  Web3", unlocked_
-00001c00: 6163 636f 756e 743a 2043 6865 636b 7375  account: Checksu
-00001c10: 6d41 6464 7265 7373 0a20 2020 2029 202d  mAddress.    ) -
-00001c20: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-00001c30: 7478 6e5f 7061 7261 6d73 3a20 5478 5061  txn_params: TxPa
-00001c40: 7261 6d73 203d 207b 0a20 2020 2020 2020  rams = {.       
-00001c50: 2020 2020 2022 6672 6f6d 223a 2075 6e6c       "from": unl
-00001c60: 6f63 6b65 645f 6163 636f 756e 742c 0a20  ocked_account,. 
-00001c70: 2020 2020 2020 2020 2020 2022 746f 223a             "to":
-00001c80: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-00001c90: 742c 0a20 2020 2020 2020 2020 2020 2022  t,.            "
-00001ca0: 7661 6c75 6522 3a20 5765 6928 3129 2c0a  value": Wei(1),.
-00001cb0: 2020 2020 2020 2020 2020 2020 2267 6173              "gas
-00001cc0: 223a 2032 3130 3030 2c0a 2020 2020 2020  ": 21000,.      
-00001cd0: 2020 2020 2020 226d 6178 5072 696f 7269        "maxPriori
-00001ce0: 7479 4665 6550 6572 4761 7322 3a20 6173  tyFeePerGas": as
-00001cf0: 796e 635f 7733 2e74 6f5f 7765 6928 312c  ync_w3.to_wei(1,
-00001d00: 2022 6777 6569 2229 2c0a 2020 2020 2020   "gwei"),.      
-00001d10: 2020 2020 2020 226d 6178 4665 6550 6572        "maxFeePer
-00001d20: 4761 7322 3a20 6173 796e 635f 7733 2e74  Gas": async_w3.t
-00001d30: 6f5f 7765 6928 322c 2022 6777 6569 2229  o_wei(2, "gwei")
-00001d40: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
-00001d50: 2020 2020 7478 6e5f 6861 7368 203d 2061      txn_hash = a
-00001d60: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
-00001d70: 682e 7365 6e64 5f74 7261 6e73 6163 7469  h.send_transacti
-00001d80: 6f6e 2874 786e 5f70 6172 616d 7329 0a0a  on(txn_params)..
-00001d90: 2020 2020 2020 2020 6d6f 6469 6669 6564          modified
-00001da0: 5f74 786e 5f68 6173 6820 3d20 6177 6169  _txn_hash = awai
-00001db0: 7420 6173 796e 635f 7733 2e65 7468 2e6d  t async_w3.eth.m
-00001dc0: 6f64 6966 795f 7472 616e 7361 6374 696f  odify_transactio
-00001dd0: 6e28 0a20 2020 2020 2020 2020 2020 2074  n(.            t
-00001de0: 786e 5f68 6173 682c 0a20 2020 2020 2020  xn_hash,.       
-00001df0: 2020 2020 2076 616c 7565 3d32 2c0a 2020       value=2,.  
-00001e00: 2020 2020 2020 2020 2020 6d61 7850 7269            maxPri
-00001e10: 6f72 6974 7946 6565 5065 7247 6173 3d28  orityFeePerGas=(
-00001e20: 6361 7374 2857 6569 2c20 7478 6e5f 7061  cast(Wei, txn_pa
-00001e30: 7261 6d73 5b22 6d61 7850 7269 6f72 6974  rams["maxPriorit
-00001e40: 7946 6565 5065 7247 6173 225d 2920 2a20  yFeePerGas"]) * 
-00001e50: 3229 2c0a 2020 2020 2020 2020 2020 2020  2),.            
-00001e60: 6d61 7846 6565 5065 7247 6173 3d28 6361  maxFeePerGas=(ca
-00001e70: 7374 2857 6569 2c20 7478 6e5f 7061 7261  st(Wei, txn_para
-00001e80: 6d73 5b22 6d61 7846 6565 5065 7247 6173  ms["maxFeePerGas
-00001e90: 225d 2920 2a20 3229 2c0a 2020 2020 2020  "]) * 2),.      
-00001ea0: 2020 290a 2020 2020 2020 2020 6d6f 6469    ).        modi
-00001eb0: 6669 6564 5f74 786e 203d 2061 7761 6974  fied_txn = await
-00001ec0: 2061 7379 6e63 5f77 332e 6574 682e 6765   async_w3.eth.ge
-00001ed0: 745f 7472 616e 7361 6374 696f 6e28 6d6f  t_transaction(mo
-00001ee0: 6469 6669 6564 5f74 786e 5f68 6173 6829  dified_txn_hash)
-00001ef0: 0a0a 2020 2020 2020 2020 6173 7365 7274  ..        assert
-00001f00: 2069 735f 7361 6d65 5f61 6464 7265 7373   is_same_address
-00001f10: 280a 2020 2020 2020 2020 2020 2020 6d6f  (.            mo
-00001f20: 6469 6669 6564 5f74 786e 5b22 6672 6f6d  dified_txn["from
-00001f30: 225d 2c20 6361 7374 2843 6865 636b 7375  "], cast(Checksu
-00001f40: 6d41 6464 7265 7373 2c20 7478 6e5f 7061  mAddress, txn_pa
-00001f50: 7261 6d73 5b22 6672 6f6d 225d 290a 2020  rams["from"]).  
-00001f60: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00001f70: 6173 7365 7274 2069 735f 7361 6d65 5f61  assert is_same_a
-00001f80: 6464 7265 7373 280a 2020 2020 2020 2020  ddress(.        
-00001f90: 2020 2020 6d6f 6469 6669 6564 5f74 786e      modified_txn
-00001fa0: 5b22 746f 225d 2c20 6361 7374 2843 6865  ["to"], cast(Che
-00001fb0: 636b 7375 6d41 6464 7265 7373 2c20 7478  cksumAddress, tx
-00001fc0: 6e5f 7061 7261 6d73 5b22 746f 225d 290a  n_params["to"]).
-00001fd0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00001fe0: 2020 6173 7365 7274 206d 6f64 6966 6965    assert modifie
-00001ff0: 645f 7478 6e5b 2276 616c 7565 225d 203d  d_txn["value"] =
-00002000: 3d20 320a 2020 2020 2020 2020 6173 7365  = 2.        asse
-00002010: 7274 206d 6f64 6966 6965 645f 7478 6e5b  rt modified_txn[
-00002020: 2267 6173 225d 203d 3d20 3231 3030 300a  "gas"] == 21000.
-00002030: 2020 2020 2020 2020 6173 7365 7274 2028          assert (
-00002040: 0a20 2020 2020 2020 2020 2020 206d 6f64  .            mod
-00002050: 6966 6965 645f 7478 6e5b 226d 6178 5072  ified_txn["maxPr
-00002060: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
-00002070: 5d0a 2020 2020 2020 2020 2020 2020 3d3d  ].            ==
-00002080: 2063 6173 7428 5765 692c 2074 786e 5f70   cast(Wei, txn_p
-00002090: 6172 616d 735b 226d 6178 5072 696f 7269  arams["maxPriori
-000020a0: 7479 4665 6550 6572 4761 7322 5d29 202a  tyFeePerGas"]) *
-000020b0: 2032 0a20 2020 2020 2020 2029 0a20 2020   2.        ).   
-000020c0: 2020 2020 2061 7373 6572 7420 6d6f 6469       assert modi
-000020d0: 6669 6564 5f74 786e 5b22 6d61 7846 6565  fied_txn["maxFee
-000020e0: 5065 7247 6173 225d 203d 3d20 6361 7374  PerGas"] == cast
-000020f0: 2857 6569 2c20 7478 6e5f 7061 7261 6d73  (Wei, txn_params
-00002100: 5b22 6d61 7846 6565 5065 7247 6173 225d  ["maxFeePerGas"]
-00002110: 2920 2a20 320a 0a20 2020 2040 7079 7465  ) * 2..    @pyte
-00002120: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
-00002130: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
-00002140: 7374 5f61 7379 6e63 5f65 7468 5f73 6967  st_async_eth_sig
-00002150: 6e5f 7472 616e 7361 6374 696f 6e28 0a20  n_transaction(. 
-00002160: 2020 2020 2020 2073 656c 662c 2061 7379         self, asy
-00002170: 6e63 5f77 333a 2022 4173 796e 6357 6562  nc_w3: "AsyncWeb
-00002180: 3322 2c20 756e 6c6f 636b 6564 5f61 6363  3", unlocked_acc
-00002190: 6f75 6e74 3a20 4368 6563 6b73 756d 4164  ount: ChecksumAd
-000021a0: 6472 6573 730a 2020 2020 2920 2d3e 204e  dress.    ) -> N
-000021b0: 6f6e 653a 0a20 2020 2020 2020 2074 786e  one:.        txn
-000021c0: 5f70 6172 616d 733a 2054 7850 6172 616d  _params: TxParam
-000021d0: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
-000021e0: 2020 2266 726f 6d22 3a20 756e 6c6f 636b    "from": unlock
-000021f0: 6564 5f61 6363 6f75 6e74 2c0a 2020 2020  ed_account,.    
-00002200: 2020 2020 2020 2020 2274 6f22 3a20 756e          "to": un
-00002210: 6c6f 636b 6564 5f61 6363 6f75 6e74 2c0a  locked_account,.
-00002220: 2020 2020 2020 2020 2020 2020 2276 616c              "val
-00002230: 7565 223a 2057 6569 2831 292c 0a20 2020  ue": Wei(1),.   
-00002240: 2020 2020 2020 2020 2022 6761 7322 3a20           "gas": 
-00002250: 3231 3030 302c 0a20 2020 2020 2020 2020  21000,.         
-00002260: 2020 2022 6d61 7846 6565 5065 7247 6173     "maxFeePerGas
-00002270: 223a 2061 7379 6e63 5f77 332e 746f 5f77  ": async_w3.to_w
-00002280: 6569 2832 2c20 2267 7765 6922 292c 0a20  ei(2, "gwei"),. 
-00002290: 2020 2020 2020 2020 2020 2022 6d61 7850             "maxP
-000022a0: 7269 6f72 6974 7946 6565 5065 7247 6173  riorityFeePerGas
-000022b0: 223a 2061 7379 6e63 5f77 332e 746f 5f77  ": async_w3.to_w
-000022c0: 6569 2831 2c20 2267 7765 6922 292c 0a20  ei(1, "gwei"),. 
-000022d0: 2020 2020 2020 2020 2020 2022 6e6f 6e63             "nonc
-000022e0: 6522 3a20 4e6f 6e63 6528 3029 2c0a 2020  e": Nonce(0),.  
-000022f0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00002300: 7265 7375 6c74 203d 2061 7761 6974 2061  result = await a
-00002310: 7379 6e63 5f77 332e 6574 682e 7369 676e  sync_w3.eth.sign
-00002320: 5f74 7261 6e73 6163 7469 6f6e 2874 786e  _transaction(txn
-00002330: 5f70 6172 616d 7329 0a20 2020 2020 2020  _params).       
-00002340: 2073 6967 6e61 746f 7279 5f61 6363 6f75   signatory_accou
-00002350: 6e74 203d 2061 7379 6e63 5f77 332e 6574  nt = async_w3.et
-00002360: 682e 6163 636f 756e 742e 7265 636f 7665  h.account.recove
-00002370: 725f 7472 616e 7361 6374 696f 6e28 7265  r_transaction(re
-00002380: 7375 6c74 5b22 7261 7722 5d29 0a20 2020  sult["raw"]).   
-00002390: 2020 2020 2061 7373 6572 7420 756e 6c6f       assert unlo
-000023a0: 636b 6564 5f61 6363 6f75 6e74 203d 3d20  cked_account == 
-000023b0: 7369 676e 6174 6f72 795f 6163 636f 756e  signatory_accoun
-000023c0: 740a 2020 2020 2020 2020 6173 7365 7274  t.        assert
-000023d0: 2072 6573 756c 745b 2274 7822 5d5b 2274   result["tx"]["t
-000023e0: 6f22 5d20 3d3d 2074 786e 5f70 6172 616d  o"] == txn_param
-000023f0: 735b 2274 6f22 5d0a 2020 2020 2020 2020  s["to"].        
-00002400: 6173 7365 7274 2072 6573 756c 745b 2274  assert result["t
-00002410: 7822 5d5b 2276 616c 7565 225d 203d 3d20  x"]["value"] == 
-00002420: 7478 6e5f 7061 7261 6d73 5b22 7661 6c75  txn_params["valu
-00002430: 6522 5d0a 2020 2020 2020 2020 6173 7365  e"].        asse
-00002440: 7274 2072 6573 756c 745b 2274 7822 5d5b  rt result["tx"][
-00002450: 2267 6173 225d 203d 3d20 7478 6e5f 7061  "gas"] == txn_pa
-00002460: 7261 6d73 5b22 6761 7322 5d0a 2020 2020  rams["gas"].    
-00002470: 2020 2020 6173 7365 7274 2072 6573 756c      assert resul
-00002480: 745b 2274 7822 5d5b 226d 6178 4665 6550  t["tx"]["maxFeeP
-00002490: 6572 4761 7322 5d20 3d3d 2074 786e 5f70  erGas"] == txn_p
-000024a0: 6172 616d 735b 226d 6178 4665 6550 6572  arams["maxFeePer
-000024b0: 4761 7322 5d0a 2020 2020 2020 2020 6173  Gas"].        as
-000024c0: 7365 7274 2028 0a20 2020 2020 2020 2020  sert (.         
-000024d0: 2020 2072 6573 756c 745b 2274 7822 5d5b     result["tx"][
-000024e0: 226d 6178 5072 696f 7269 7479 4665 6550  "maxPriorityFeeP
-000024f0: 6572 4761 7322 5d20 3d3d 2074 786e 5f70  erGas"] == txn_p
-00002500: 6172 616d 735b 226d 6178 5072 696f 7269  arams["maxPriori
-00002510: 7479 4665 6550 6572 4761 7322 5d0a 2020  tyFeePerGas"].  
-00002520: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00002530: 6173 7365 7274 2072 6573 756c 745b 2274  assert result["t
-00002540: 7822 5d5b 226e 6f6e 6365 225d 203d 3d20  x"]["nonce"] == 
-00002550: 7478 6e5f 7061 7261 6d73 5b22 6e6f 6e63  txn_params["nonc
-00002560: 6522 5d0a 0a20 2020 2040 7079 7465 7374  e"]..    @pytest
-00002570: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
-00002580: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
-00002590: 5f65 7468 5f73 6967 6e5f 7479 7065 645f  _eth_sign_typed_
-000025a0: 6461 7461 280a 2020 2020 2020 2020 7365  data(.        se
-000025b0: 6c66 2c0a 2020 2020 2020 2020 6173 796e  lf,.        asyn
-000025c0: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
-000025d0: 222c 0a20 2020 2020 2020 2075 6e6c 6f63  ",.        unloc
-000025e0: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
-000025f0: 5f74 7970 653a 2043 6865 636b 7375 6d41  _type: ChecksumA
-00002600: 6464 7265 7373 2c0a 2020 2020 2020 2020  ddress,.        
-00002610: 6173 796e 635f 736b 6970 5f69 665f 7465  async_skip_if_te
-00002620: 7374 7270 633a 2043 616c 6c61 626c 655b  strpc: Callable[
-00002630: 5b22 4173 796e 6357 6562 3322 5d2c 204e  ["AsyncWeb3"], N
-00002640: 6f6e 655d 2c0a 2020 2020 2920 2d3e 204e  one],.    ) -> N
-00002650: 6f6e 653a 0a20 2020 2020 2020 2076 616c  one:.        val
-00002660: 6964 4a53 4f4e 4d65 7373 6167 6520 3d20  idJSONMessage = 
-00002670: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
-00002680: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-00002690: 2020 2274 7970 6573 223a 207b 0a20 2020    "types": {.   
-000026a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000026b0: 2022 4549 5037 3132 446f 6d61 696e 223a   "EIP712Domain":
-000026c0: 205b 0a20 2020 2020 2020 2020 2020 2020   [.             
-000026d0: 2020 2020 2020 2020 2020 207b 226e 616d             {"nam
-000026e0: 6522 3a20 226e 616d 6522 2c20 2274 7970  e": "name", "typ
-000026f0: 6522 3a20 2273 7472 696e 6722 7d2c 0a20  e": "string"},. 
-00002700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002710: 2020 2020 2020 207b 226e 616d 6522 3a20         {"name": 
-00002720: 2276 6572 7369 6f6e 222c 2022 7479 7065  "version", "type
-00002730: 223a 2022 7374 7269 6e67 227d 2c0a 2020  ": "string"},.  
-00002740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002750: 2020 2020 2020 7b22 6e61 6d65 223a 2022        {"name": "
-00002760: 6368 6169 6e49 6422 2c20 2274 7970 6522  chainId", "type"
-00002770: 3a20 2275 696e 7432 3536 227d 2c0a 2020  : "uint256"},.  
-00002780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002790: 2020 2020 2020 7b22 6e61 6d65 223a 2022        {"name": "
-000027a0: 7665 7269 6679 696e 6743 6f6e 7472 6163  verifyingContrac
-000027b0: 7422 2c20 2274 7970 6522 3a20 2261 6464  t", "type": "add
-000027c0: 7265 7373 227d 0a20 2020 2020 2020 2020  ress"}.         
-000027d0: 2020 2020 2020 2020 2020 205d 2c0a 2020             ],.  
-000027e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000027f0: 2020 2250 6572 736f 6e22 3a20 5b0a 2020    "Person": [.  
-00002800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002810: 2020 2020 2020 7b22 6e61 6d65 223a 2022        {"name": "
-00002820: 6e61 6d65 222c 2022 7479 7065 223a 2022  name", "type": "
-00002830: 7374 7269 6e67 227d 2c0a 2020 2020 2020  string"},.      
-00002840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002850: 2020 7b22 6e61 6d65 223a 2022 7761 6c6c    {"name": "wall
-00002860: 6574 222c 2022 7479 7065 223a 2022 6164  et", "type": "ad
-00002870: 6472 6573 7322 7d0a 2020 2020 2020 2020  dress"}.        
-00002880: 2020 2020 2020 2020 2020 2020 5d2c 0a20              ],. 
+00001420: 7379 6e63 5765 6233 222c 2061 7379 6e63  syncWeb3", async
+00001430: 5f75 6e6c 6f63 6b65 645f 6163 636f 756e  _unlocked_accoun
+00001440: 745f 6475 616c 5f74 7970 653a 2043 6865  t_dual_type: Che
+00001450: 636b 7375 6d41 6464 7265 7373 0a20 2020  cksumAddress.   
+00001460: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
+00001470: 2020 2020 7478 6e5f 7061 7261 6d73 3a20      txn_params: 
+00001480: 5478 5061 7261 6d73 203d 207b 0a20 2020  TxParams = {.   
+00001490: 2020 2020 2020 2020 2022 6672 6f6d 223a           "from":
+000014a0: 2061 7379 6e63 5f75 6e6c 6f63 6b65 645f   async_unlocked_
+000014b0: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
+000014c0: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
+000014d0: 746f 223a 2061 7379 6e63 5f75 6e6c 6f63  to": async_unloc
+000014e0: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+000014f0: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
+00001500: 2020 2022 7661 6c75 6522 3a20 5765 6928     "value": Wei(
+00001510: 3129 2c0a 2020 2020 2020 2020 2020 2020  1),.            
+00001520: 2267 6173 223a 2032 3130 3030 2c0a 2020  "gas": 21000,.  
+00001530: 2020 2020 2020 2020 2020 2267 6173 5072            "gasPr
+00001540: 6963 6522 3a20 6177 6169 7420 6173 796e  ice": await asyn
+00001550: 635f 7733 2e65 7468 2e67 6173 5f70 7269  c_w3.eth.gas_pri
+00001560: 6365 2c0a 2020 2020 2020 2020 7d0a 2020  ce,.        }.  
+00001570: 2020 2020 2020 7478 6e5f 6861 7368 203d        txn_hash =
+00001580: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
+00001590: 6574 682e 7365 6e64 5f74 7261 6e73 6163  eth.send_transac
+000015a0: 7469 6f6e 2874 786e 5f70 6172 616d 7329  tion(txn_params)
+000015b0: 0a20 2020 2020 2020 2074 786e 203d 2061  .        txn = a
+000015c0: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
+000015d0: 682e 6765 745f 7472 616e 7361 6374 696f  h.get_transactio
+000015e0: 6e28 7478 6e5f 6861 7368 290a 0a20 2020  n(txn_hash)..   
+000015f0: 2020 2020 2061 7373 6572 7420 6973 5f73       assert is_s
+00001600: 616d 655f 6164 6472 6573 7328 7478 6e5b  ame_address(txn[
+00001610: 2266 726f 6d22 5d2c 2063 6173 7428 4368  "from"], cast(Ch
+00001620: 6563 6b73 756d 4164 6472 6573 732c 2074  ecksumAddress, t
+00001630: 786e 5f70 6172 616d 735b 2266 726f 6d22  xn_params["from"
+00001640: 5d29 290a 2020 2020 2020 2020 6173 7365  ])).        asse
+00001650: 7274 2069 735f 7361 6d65 5f61 6464 7265  rt is_same_addre
+00001660: 7373 2874 786e 5b22 746f 225d 2c20 6361  ss(txn["to"], ca
+00001670: 7374 2843 6865 636b 7375 6d41 6464 7265  st(ChecksumAddre
+00001680: 7373 2c20 7478 6e5f 7061 7261 6d73 5b22  ss, txn_params["
+00001690: 746f 225d 2929 0a20 2020 2020 2020 2061  to"])).        a
+000016a0: 7373 6572 7420 7478 6e5b 2276 616c 7565  ssert txn["value
+000016b0: 225d 203d 3d20 310a 2020 2020 2020 2020  "] == 1.        
+000016c0: 6173 7365 7274 2074 786e 5b22 6761 7322  assert txn["gas"
+000016d0: 5d20 3d3d 2032 3130 3030 0a20 2020 2020  ] == 21000.     
+000016e0: 2020 2061 7373 6572 7420 7478 6e5b 2267     assert txn["g
+000016f0: 6173 5072 6963 6522 5d20 3d3d 2074 786e  asPrice"] == txn
+00001700: 5f70 6172 616d 735b 2267 6173 5072 6963  _params["gasPric
+00001710: 6522 5d0a 0a20 2020 2040 7079 7465 7374  e"]..    @pytest
+00001720: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
+00001730: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
+00001740: 5f65 7468 5f6d 6f64 6966 795f 7472 616e  _eth_modify_tran
+00001750: 7361 6374 696f 6e5f 6c65 6761 6379 280a  saction_legacy(.
+00001760: 2020 2020 2020 2020 7365 6c66 2c20 6173          self, as
+00001770: 796e 635f 7733 3a20 2241 7379 6e63 5765  ync_w3: "AsyncWe
+00001780: 6233 222c 2061 7379 6e63 5f75 6e6c 6f63  b3", async_unloc
+00001790: 6b65 645f 6163 636f 756e 743a 2043 6865  ked_account: Che
+000017a0: 636b 7375 6d41 6464 7265 7373 0a20 2020  cksumAddress.   
+000017b0: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
+000017c0: 2020 2020 7478 6e5f 7061 7261 6d73 3a20      txn_params: 
+000017d0: 5478 5061 7261 6d73 203d 207b 0a20 2020  TxParams = {.   
+000017e0: 2020 2020 2020 2020 2022 6672 6f6d 223a           "from":
+000017f0: 2061 7379 6e63 5f75 6e6c 6f63 6b65 645f   async_unlocked_
+00001800: 6163 636f 756e 742c 0a20 2020 2020 2020  account,.       
+00001810: 2020 2020 2022 746f 223a 2061 7379 6e63       "to": async
+00001820: 5f75 6e6c 6f63 6b65 645f 6163 636f 756e  _unlocked_accoun
+00001830: 742c 0a20 2020 2020 2020 2020 2020 2022  t,.            "
+00001840: 7661 6c75 6522 3a20 5765 6928 3129 2c0a  value": Wei(1),.
+00001850: 2020 2020 2020 2020 2020 2020 2267 6173              "gas
+00001860: 223a 2032 3130 3030 2c0a 2020 2020 2020  ": 21000,.      
+00001870: 2020 2020 2020 2267 6173 5072 6963 6522        "gasPrice"
+00001880: 3a20 6173 796e 635f 7733 2e74 6f5f 7765  : async_w3.to_we
+00001890: 6928 0a20 2020 2020 2020 2020 2020 2020  i(.             
+000018a0: 2020 2031 2c20 2267 7765 6922 0a20 2020     1, "gwei".   
+000018b0: 2020 2020 2020 2020 2029 2c20 2023 206d           ),  # m
+000018c0: 7573 7420 6265 2067 7265 6174 6572 2074  ust be greater t
+000018d0: 6861 6e20 6261 7365 5f66 6565 2070 6f73  han base_fee pos
+000018e0: 7420 4c6f 6e64 6f6e 0a20 2020 2020 2020  t London.       
+000018f0: 207d 0a20 2020 2020 2020 2074 786e 5f68   }.        txn_h
+00001900: 6173 6820 3d20 6177 6169 7420 6173 796e  ash = await asyn
+00001910: 635f 7733 2e65 7468 2e73 656e 645f 7472  c_w3.eth.send_tr
+00001920: 616e 7361 6374 696f 6e28 7478 6e5f 7061  ansaction(txn_pa
+00001930: 7261 6d73 290a 0a20 2020 2020 2020 206d  rams)..        m
+00001940: 6f64 6966 6965 645f 7478 6e5f 6861 7368  odified_txn_hash
+00001950: 203d 2061 7761 6974 2061 7379 6e63 5f77   = await async_w
+00001960: 332e 6574 682e 6d6f 6469 6679 5f74 7261  3.eth.modify_tra
+00001970: 6e73 6163 7469 6f6e 280a 2020 2020 2020  nsaction(.      
+00001980: 2020 2020 2020 7478 6e5f 6861 7368 2c20        txn_hash, 
+00001990: 6761 7350 7269 6365 3d28 6361 7374 2869  gasPrice=(cast(i
+000019a0: 6e74 2c20 7478 6e5f 7061 7261 6d73 5b22  nt, txn_params["
+000019b0: 6761 7350 7269 6365 225d 2920 2a20 3229  gasPrice"]) * 2)
+000019c0: 2c20 7661 6c75 653d 320a 2020 2020 2020  , value=2.      
+000019d0: 2020 290a 2020 2020 2020 2020 6d6f 6469    ).        modi
+000019e0: 6669 6564 5f74 786e 203d 2061 7761 6974  fied_txn = await
+000019f0: 2061 7379 6e63 5f77 332e 6574 682e 6765   async_w3.eth.ge
+00001a00: 745f 7472 616e 7361 6374 696f 6e28 6d6f  t_transaction(mo
+00001a10: 6469 6669 6564 5f74 786e 5f68 6173 6829  dified_txn_hash)
+00001a20: 0a0a 2020 2020 2020 2020 6173 7365 7274  ..        assert
+00001a30: 2069 735f 7361 6d65 5f61 6464 7265 7373   is_same_address
+00001a40: 280a 2020 2020 2020 2020 2020 2020 6d6f  (.            mo
+00001a50: 6469 6669 6564 5f74 786e 5b22 6672 6f6d  dified_txn["from
+00001a60: 225d 2c20 6361 7374 2843 6865 636b 7375  "], cast(Checksu
+00001a70: 6d41 6464 7265 7373 2c20 7478 6e5f 7061  mAddress, txn_pa
+00001a80: 7261 6d73 5b22 6672 6f6d 225d 290a 2020  rams["from"]).  
+00001a90: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00001aa0: 6173 7365 7274 2069 735f 7361 6d65 5f61  assert is_same_a
+00001ab0: 6464 7265 7373 280a 2020 2020 2020 2020  ddress(.        
+00001ac0: 2020 2020 6d6f 6469 6669 6564 5f74 786e      modified_txn
+00001ad0: 5b22 746f 225d 2c20 6361 7374 2843 6865  ["to"], cast(Che
+00001ae0: 636b 7375 6d41 6464 7265 7373 2c20 7478  cksumAddress, tx
+00001af0: 6e5f 7061 7261 6d73 5b22 746f 225d 290a  n_params["to"]).
+00001b00: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00001b10: 2020 6173 7365 7274 206d 6f64 6966 6965    assert modifie
+00001b20: 645f 7478 6e5b 2276 616c 7565 225d 203d  d_txn["value"] =
+00001b30: 3d20 320a 2020 2020 2020 2020 6173 7365  = 2.        asse
+00001b40: 7274 206d 6f64 6966 6965 645f 7478 6e5b  rt modified_txn[
+00001b50: 2267 6173 225d 203d 3d20 3231 3030 300a  "gas"] == 21000.
+00001b60: 2020 2020 2020 2020 6173 7365 7274 206d          assert m
+00001b70: 6f64 6966 6965 645f 7478 6e5b 2267 6173  odified_txn["gas
+00001b80: 5072 6963 6522 5d20 3d3d 2063 6173 7428  Price"] == cast(
+00001b90: 696e 742c 2074 786e 5f70 6172 616d 735b  int, txn_params[
+00001ba0: 2267 6173 5072 6963 6522 5d29 202a 2032  "gasPrice"]) * 2
+00001bb0: 0a0a 2020 2020 4070 7974 6573 742e 6d61  ..    @pytest.ma
+00001bc0: 726b 2e61 7379 6e63 696f 0a20 2020 2061  rk.asyncio.    a
+00001bd0: 7379 6e63 2064 6566 2074 6573 745f 6574  sync def test_et
+00001be0: 685f 6d6f 6469 6679 5f74 7261 6e73 6163  h_modify_transac
+00001bf0: 7469 6f6e 280a 2020 2020 2020 2020 7365  tion(.        se
+00001c00: 6c66 2c20 6173 796e 635f 7733 3a20 2241  lf, async_w3: "A
+00001c10: 7379 6e63 5765 6233 222c 2061 7379 6e63  syncWeb3", async
+00001c20: 5f75 6e6c 6f63 6b65 645f 6163 636f 756e  _unlocked_accoun
+00001c30: 743a 2043 6865 636b 7375 6d41 6464 7265  t: ChecksumAddre
+00001c40: 7373 0a20 2020 2029 202d 3e20 4e6f 6e65  ss.    ) -> None
+00001c50: 3a0a 2020 2020 2020 2020 7478 6e5f 7061  :.        txn_pa
+00001c60: 7261 6d73 3a20 5478 5061 7261 6d73 203d  rams: TxParams =
+00001c70: 207b 0a20 2020 2020 2020 2020 2020 2022   {.            "
+00001c80: 6672 6f6d 223a 2061 7379 6e63 5f75 6e6c  from": async_unl
+00001c90: 6f63 6b65 645f 6163 636f 756e 742c 0a20  ocked_account,. 
+00001ca0: 2020 2020 2020 2020 2020 2022 746f 223a             "to":
+00001cb0: 2061 7379 6e63 5f75 6e6c 6f63 6b65 645f   async_unlocked_
+00001cc0: 6163 636f 756e 742c 0a20 2020 2020 2020  account,.       
+00001cd0: 2020 2020 2022 7661 6c75 6522 3a20 5765       "value": We
+00001ce0: 6928 3129 2c0a 2020 2020 2020 2020 2020  i(1),.          
+00001cf0: 2020 2267 6173 223a 2032 3130 3030 2c0a    "gas": 21000,.
+00001d00: 2020 2020 2020 2020 2020 2020 226d 6178              "max
+00001d10: 5072 696f 7269 7479 4665 6550 6572 4761  PriorityFeePerGa
+00001d20: 7322 3a20 6173 796e 635f 7733 2e74 6f5f  s": async_w3.to_
+00001d30: 7765 6928 312c 2022 6777 6569 2229 2c0a  wei(1, "gwei"),.
+00001d40: 2020 2020 2020 2020 2020 2020 226d 6178              "max
+00001d50: 4665 6550 6572 4761 7322 3a20 6173 796e  FeePerGas": asyn
+00001d60: 635f 7733 2e74 6f5f 7765 6928 322c 2022  c_w3.to_wei(2, "
+00001d70: 6777 6569 2229 2c0a 2020 2020 2020 2020  gwei"),.        
+00001d80: 7d0a 2020 2020 2020 2020 7478 6e5f 6861  }.        txn_ha
+00001d90: 7368 203d 2061 7761 6974 2061 7379 6e63  sh = await async
+00001da0: 5f77 332e 6574 682e 7365 6e64 5f74 7261  _w3.eth.send_tra
+00001db0: 6e73 6163 7469 6f6e 2874 786e 5f70 6172  nsaction(txn_par
+00001dc0: 616d 7329 0a0a 2020 2020 2020 2020 6d6f  ams)..        mo
+00001dd0: 6469 6669 6564 5f74 786e 5f68 6173 6820  dified_txn_hash 
+00001de0: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
+00001df0: 2e65 7468 2e6d 6f64 6966 795f 7472 616e  .eth.modify_tran
+00001e00: 7361 6374 696f 6e28 0a20 2020 2020 2020  saction(.       
+00001e10: 2020 2020 2074 786e 5f68 6173 682c 0a20       txn_hash,. 
+00001e20: 2020 2020 2020 2020 2020 2076 616c 7565             value
+00001e30: 3d32 2c0a 2020 2020 2020 2020 2020 2020  =2,.            
+00001e40: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
+00001e50: 7247 6173 3d28 6361 7374 2857 6569 2c20  rGas=(cast(Wei, 
+00001e60: 7478 6e5f 7061 7261 6d73 5b22 6d61 7850  txn_params["maxP
+00001e70: 7269 6f72 6974 7946 6565 5065 7247 6173  riorityFeePerGas
+00001e80: 225d 2920 2a20 3229 2c0a 2020 2020 2020  "]) * 2),.      
+00001e90: 2020 2020 2020 6d61 7846 6565 5065 7247        maxFeePerG
+00001ea0: 6173 3d28 6361 7374 2857 6569 2c20 7478  as=(cast(Wei, tx
+00001eb0: 6e5f 7061 7261 6d73 5b22 6d61 7846 6565  n_params["maxFee
+00001ec0: 5065 7247 6173 225d 2920 2a20 3229 2c0a  PerGas"]) * 2),.
+00001ed0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00001ee0: 2020 6d6f 6469 6669 6564 5f74 786e 203d    modified_txn =
+00001ef0: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
+00001f00: 6574 682e 6765 745f 7472 616e 7361 6374  eth.get_transact
+00001f10: 696f 6e28 6d6f 6469 6669 6564 5f74 786e  ion(modified_txn
+00001f20: 5f68 6173 6829 0a0a 2020 2020 2020 2020  _hash)..        
+00001f30: 6173 7365 7274 2069 735f 7361 6d65 5f61  assert is_same_a
+00001f40: 6464 7265 7373 280a 2020 2020 2020 2020  ddress(.        
+00001f50: 2020 2020 6d6f 6469 6669 6564 5f74 786e      modified_txn
+00001f60: 5b22 6672 6f6d 225d 2c20 6361 7374 2843  ["from"], cast(C
+00001f70: 6865 636b 7375 6d41 6464 7265 7373 2c20  hecksumAddress, 
+00001f80: 7478 6e5f 7061 7261 6d73 5b22 6672 6f6d  txn_params["from
+00001f90: 225d 290a 2020 2020 2020 2020 290a 2020  "]).        ).  
+00001fa0: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+00001fb0: 7361 6d65 5f61 6464 7265 7373 280a 2020  same_address(.  
+00001fc0: 2020 2020 2020 2020 2020 6d6f 6469 6669            modifi
+00001fd0: 6564 5f74 786e 5b22 746f 225d 2c20 6361  ed_txn["to"], ca
+00001fe0: 7374 2843 6865 636b 7375 6d41 6464 7265  st(ChecksumAddre
+00001ff0: 7373 2c20 7478 6e5f 7061 7261 6d73 5b22  ss, txn_params["
+00002000: 746f 225d 290a 2020 2020 2020 2020 290a  to"]).        ).
+00002010: 2020 2020 2020 2020 6173 7365 7274 206d          assert m
+00002020: 6f64 6966 6965 645f 7478 6e5b 2276 616c  odified_txn["val
+00002030: 7565 225d 203d 3d20 320a 2020 2020 2020  ue"] == 2.      
+00002040: 2020 6173 7365 7274 206d 6f64 6966 6965    assert modifie
+00002050: 645f 7478 6e5b 2267 6173 225d 203d 3d20  d_txn["gas"] == 
+00002060: 3231 3030 300a 2020 2020 2020 2020 6173  21000.        as
+00002070: 7365 7274 2028 0a20 2020 2020 2020 2020  sert (.         
+00002080: 2020 206d 6f64 6966 6965 645f 7478 6e5b     modified_txn[
+00002090: 226d 6178 5072 696f 7269 7479 4665 6550  "maxPriorityFeeP
+000020a0: 6572 4761 7322 5d0a 2020 2020 2020 2020  erGas"].        
+000020b0: 2020 2020 3d3d 2063 6173 7428 5765 692c      == cast(Wei,
+000020c0: 2074 786e 5f70 6172 616d 735b 226d 6178   txn_params["max
+000020d0: 5072 696f 7269 7479 4665 6550 6572 4761  PriorityFeePerGa
+000020e0: 7322 5d29 202a 2032 0a20 2020 2020 2020  s"]) * 2.       
+000020f0: 2029 0a20 2020 2020 2020 2061 7373 6572   ).        asser
+00002100: 7420 6d6f 6469 6669 6564 5f74 786e 5b22  t modified_txn["
+00002110: 6d61 7846 6565 5065 7247 6173 225d 203d  maxFeePerGas"] =
+00002120: 3d20 6361 7374 2857 6569 2c20 7478 6e5f  = cast(Wei, txn_
+00002130: 7061 7261 6d73 5b22 6d61 7846 6565 5065  params["maxFeePe
+00002140: 7247 6173 225d 2920 2a20 320a 0a20 2020  rGas"]) * 2..   
+00002150: 2040 7079 7465 7374 2e6d 6172 6b2e 6173   @pytest.mark.as
+00002160: 796e 6369 6f0a 2020 2020 6173 796e 6320  yncio.    async 
+00002170: 6465 6620 7465 7374 5f61 7379 6e63 5f65  def test_async_e
+00002180: 7468 5f73 6967 6e5f 7472 616e 7361 6374  th_sign_transact
+00002190: 696f 6e28 0a20 2020 2020 2020 2073 656c  ion(.        sel
+000021a0: 662c 2061 7379 6e63 5f77 333a 2022 4173  f, async_w3: "As
+000021b0: 796e 6357 6562 3322 2c20 6173 796e 635f  yncWeb3", async_
+000021c0: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+000021d0: 3a20 4368 6563 6b73 756d 4164 6472 6573  : ChecksumAddres
+000021e0: 730a 2020 2020 2920 2d3e 204e 6f6e 653a  s.    ) -> None:
+000021f0: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
+00002200: 616d 733a 2054 7850 6172 616d 7320 3d20  ams: TxParams = 
+00002210: 7b0a 2020 2020 2020 2020 2020 2020 2266  {.            "f
+00002220: 726f 6d22 3a20 6173 796e 635f 756e 6c6f  rom": async_unlo
+00002230: 636b 6564 5f61 6363 6f75 6e74 2c0a 2020  cked_account,.  
+00002240: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
+00002250: 6173 796e 635f 756e 6c6f 636b 6564 5f61  async_unlocked_a
+00002260: 6363 6f75 6e74 2c0a 2020 2020 2020 2020  ccount,.        
+00002270: 2020 2020 2276 616c 7565 223a 2057 6569      "value": Wei
+00002280: 2831 292c 0a20 2020 2020 2020 2020 2020  (1),.           
+00002290: 2022 6761 7322 3a20 3231 3030 302c 0a20   "gas": 21000,. 
+000022a0: 2020 2020 2020 2020 2020 2022 6d61 7846             "maxF
+000022b0: 6565 5065 7247 6173 223a 2061 7379 6e63  eePerGas": async
+000022c0: 5f77 332e 746f 5f77 6569 2832 2c20 2267  _w3.to_wei(2, "g
+000022d0: 7765 6922 292c 0a20 2020 2020 2020 2020  wei"),.         
+000022e0: 2020 2022 6d61 7850 7269 6f72 6974 7946     "maxPriorityF
+000022f0: 6565 5065 7247 6173 223a 2061 7379 6e63  eePerGas": async
+00002300: 5f77 332e 746f 5f77 6569 2831 2c20 2267  _w3.to_wei(1, "g
+00002310: 7765 6922 292c 0a20 2020 2020 2020 2020  wei"),.         
+00002320: 2020 2022 6e6f 6e63 6522 3a20 4e6f 6e63     "nonce": Nonc
+00002330: 6528 3029 2c0a 2020 2020 2020 2020 7d0a  e(0),.        }.
+00002340: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00002350: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
+00002360: 6574 682e 7369 676e 5f74 7261 6e73 6163  eth.sign_transac
+00002370: 7469 6f6e 2874 786e 5f70 6172 616d 7329  tion(txn_params)
+00002380: 0a20 2020 2020 2020 2073 6967 6e61 746f  .        signato
+00002390: 7279 5f61 6363 6f75 6e74 203d 2061 7379  ry_account = asy
+000023a0: 6e63 5f77 332e 6574 682e 6163 636f 756e  nc_w3.eth.accoun
+000023b0: 742e 7265 636f 7665 725f 7472 616e 7361  t.recover_transa
+000023c0: 6374 696f 6e28 7265 7375 6c74 5b22 7261  ction(result["ra
+000023d0: 7722 5d29 0a20 2020 2020 2020 2061 7373  w"]).        ass
+000023e0: 6572 7420 6173 796e 635f 756e 6c6f 636b  ert async_unlock
+000023f0: 6564 5f61 6363 6f75 6e74 203d 3d20 7369  ed_account == si
+00002400: 676e 6174 6f72 795f 6163 636f 756e 740a  gnatory_account.
+00002410: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
+00002420: 6573 756c 745b 2274 7822 5d5b 2274 6f22  esult["tx"]["to"
+00002430: 5d20 3d3d 2074 786e 5f70 6172 616d 735b  ] == txn_params[
+00002440: 2274 6f22 5d0a 2020 2020 2020 2020 6173  "to"].        as
+00002450: 7365 7274 2072 6573 756c 745b 2274 7822  sert result["tx"
+00002460: 5d5b 2276 616c 7565 225d 203d 3d20 7478  ]["value"] == tx
+00002470: 6e5f 7061 7261 6d73 5b22 7661 6c75 6522  n_params["value"
+00002480: 5d0a 2020 2020 2020 2020 6173 7365 7274  ].        assert
+00002490: 2072 6573 756c 745b 2274 7822 5d5b 2267   result["tx"]["g
+000024a0: 6173 225d 203d 3d20 7478 6e5f 7061 7261  as"] == txn_para
+000024b0: 6d73 5b22 6761 7322 5d0a 2020 2020 2020  ms["gas"].      
+000024c0: 2020 6173 7365 7274 2072 6573 756c 745b    assert result[
+000024d0: 2274 7822 5d5b 226d 6178 4665 6550 6572  "tx"]["maxFeePer
+000024e0: 4761 7322 5d20 3d3d 2074 786e 5f70 6172  Gas"] == txn_par
+000024f0: 616d 735b 226d 6178 4665 6550 6572 4761  ams["maxFeePerGa
+00002500: 7322 5d0a 2020 2020 2020 2020 6173 7365  s"].        asse
+00002510: 7274 2028 0a20 2020 2020 2020 2020 2020  rt (.           
+00002520: 2072 6573 756c 745b 2274 7822 5d5b 226d   result["tx"]["m
+00002530: 6178 5072 696f 7269 7479 4665 6550 6572  axPriorityFeePer
+00002540: 4761 7322 5d20 3d3d 2074 786e 5f70 6172  Gas"] == txn_par
+00002550: 616d 735b 226d 6178 5072 696f 7269 7479  ams["maxPriority
+00002560: 4665 6550 6572 4761 7322 5d0a 2020 2020  FeePerGas"].    
+00002570: 2020 2020 290a 2020 2020 2020 2020 6173      ).        as
+00002580: 7365 7274 2072 6573 756c 745b 2274 7822  sert result["tx"
+00002590: 5d5b 226e 6f6e 6365 225d 203d 3d20 7478  ]["nonce"] == tx
+000025a0: 6e5f 7061 7261 6d73 5b22 6e6f 6e63 6522  n_params["nonce"
+000025b0: 5d0a 0a20 2020 2040 7079 7465 7374 2e6d  ]..    @pytest.m
+000025c0: 6172 6b2e 6173 796e 6369 6f0a 2020 2020  ark.asyncio.    
+000025d0: 6173 796e 6320 6465 6620 7465 7374 5f65  async def test_e
+000025e0: 7468 5f73 6967 6e5f 7479 7065 645f 6461  th_sign_typed_da
+000025f0: 7461 280a 2020 2020 2020 2020 7365 6c66  ta(.        self
+00002600: 2c0a 2020 2020 2020 2020 6173 796e 635f  ,.        async_
+00002610: 7733 3a20 2241 7379 6e63 5765 6233 222c  w3: "AsyncWeb3",
+00002620: 0a20 2020 2020 2020 2061 7379 6e63 5f75  .        async_u
+00002630: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
+00002640: 6475 616c 5f74 7970 653a 2043 6865 636b  dual_type: Check
+00002650: 7375 6d41 6464 7265 7373 2c0a 2020 2020  sumAddress,.    
+00002660: 2020 2020 6173 796e 635f 736b 6970 5f69      async_skip_i
+00002670: 665f 7465 7374 7270 633a 2043 616c 6c61  f_testrpc: Calla
+00002680: 626c 655b 5b22 4173 796e 6357 6562 3322  ble[["AsyncWeb3"
+00002690: 5d2c 204e 6f6e 655d 2c0a 2020 2020 2920  ], None],.    ) 
+000026a0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+000026b0: 2076 616c 6964 4a53 4f4e 4d65 7373 6167   validJSONMessag
+000026c0: 6520 3d20 2222 220a 2020 2020 2020 2020  e = """.        
+000026d0: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+000026e0: 2020 2020 2020 2274 7970 6573 223a 207b        "types": {
+000026f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002700: 2020 2020 2022 4549 5037 3132 446f 6d61       "EIP712Doma
+00002710: 696e 223a 205b 0a20 2020 2020 2020 2020  in": [.         
+00002720: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+00002730: 226e 616d 6522 3a20 226e 616d 6522 2c20  "name": "name", 
+00002740: 2274 7970 6522 3a20 2273 7472 696e 6722  "type": "string"
+00002750: 7d2c 0a20 2020 2020 2020 2020 2020 2020  },.             
+00002760: 2020 2020 2020 2020 2020 207b 226e 616d             {"nam
+00002770: 6522 3a20 2276 6572 7369 6f6e 222c 2022  e": "version", "
+00002780: 7479 7065 223a 2022 7374 7269 6e67 227d  type": "string"}
+00002790: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000027a0: 2020 2020 2020 2020 2020 7b22 6e61 6d65            {"name
+000027b0: 223a 2022 6368 6169 6e49 6422 2c20 2274  ": "chainId", "t
+000027c0: 7970 6522 3a20 2275 696e 7432 3536 227d  ype": "uint256"}
+000027d0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000027e0: 2020 2020 2020 2020 2020 7b22 6e61 6d65            {"name
+000027f0: 223a 2022 7665 7269 6679 696e 6743 6f6e  ": "verifyingCon
+00002800: 7472 6163 7422 2c20 2274 7970 6522 3a20  tract", "type": 
+00002810: 2261 6464 7265 7373 227d 0a20 2020 2020  "address"}.     
+00002820: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+00002830: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00002840: 2020 2020 2020 2250 6572 736f 6e22 3a20        "Person": 
+00002850: 5b0a 2020 2020 2020 2020 2020 2020 2020  [.              
+00002860: 2020 2020 2020 2020 2020 7b22 6e61 6d65            {"name
+00002870: 223a 2022 6e61 6d65 222c 2022 7479 7065  ": "name", "type
+00002880: 223a 2022 7374 7269 6e67 227d 2c0a 2020  ": "string"},.  
 00002890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000028a0: 2020 2022 4d61 696c 223a 205b 0a20 2020     "Mail": [.   
-000028b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000028c0: 2020 2020 207b 226e 616d 6522 3a20 2266       {"name": "f
-000028d0: 726f 6d22 2c20 2274 7970 6522 3a20 2250  rom", "type": "P
-000028e0: 6572 736f 6e22 7d2c 0a20 2020 2020 2020  erson"},.       
-000028f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002900: 207b 226e 616d 6522 3a20 2274 6f22 2c20   {"name": "to", 
-00002910: 2274 7970 6522 3a20 2250 6572 736f 6e22  "type": "Person"
-00002920: 7d2c 0a20 2020 2020 2020 2020 2020 2020  },.             
-00002930: 2020 2020 2020 2020 2020 207b 226e 616d             {"nam
-00002940: 6522 3a20 2263 6f6e 7465 6e74 7322 2c20  e": "contents", 
-00002950: 2274 7970 6522 3a20 2273 7472 696e 6722  "type": "string"
-00002960: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
-00002970: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
-00002980: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
-00002990: 2020 2020 2020 2020 2020 2022 7072 696d             "prim
-000029a0: 6172 7954 7970 6522 3a20 224d 6169 6c22  aryType": "Mail"
-000029b0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000029c0: 2020 2264 6f6d 6169 6e22 3a20 7b0a 2020    "domain": {.  
-000029d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000029e0: 2020 226e 616d 6522 3a20 2245 7468 6572    "name": "Ether
-000029f0: 204d 6169 6c22 2c0a 2020 2020 2020 2020   Mail",.        
-00002a00: 2020 2020 2020 2020 2020 2020 2276 6572              "ver
-00002a10: 7369 6f6e 223a 2022 3122 2c0a 2020 2020  sion": "1",.    
-00002a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002a30: 2263 6861 696e 4964 223a 2022 3078 3031  "chainId": "0x01
-00002a40: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-00002a50: 2020 2020 2020 2022 7665 7269 6679 696e         "verifyin
-00002a60: 6743 6f6e 7472 6163 7422 3a20 2230 7843  gContract": "0xC
-00002a70: 6343 4363 6363 6343 4343 4363 4343 4343  cCCccccCCCCcCCCC
-00002a80: 4343 6343 6343 6363 4363 4343 4363 4363  CCcCcCccCcCCCcCc
-00002a90: 6363 6363 6363 4322 0a20 2020 2020 2020  ccccccC".       
-00002aa0: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
-00002ab0: 2020 2020 2020 2020 2020 2020 226d 6573              "mes
-00002ac0: 7361 6765 223a 207b 0a20 2020 2020 2020  sage": {.       
-00002ad0: 2020 2020 2020 2020 2020 2020 2022 6672               "fr
-00002ae0: 6f6d 223a 207b 0a20 2020 2020 2020 2020  om": {.         
-00002af0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00002b00: 6e61 6d65 223a 2022 436f 7722 2c0a 2020  name": "Cow",.  
-00002b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002b20: 2020 2020 2020 2277 616c 6c65 7422 3a20        "wallet": 
-00002b30: 2230 7843 4432 6133 6439 4639 3338 4531  "0xCD2a3d9F938E1
-00002b40: 3343 4439 3437 4563 3035 4162 4337 4645  3CD947Ec05AbC7FE
-00002b50: 3733 3444 6638 4444 3832 3622 0a20 2020  734Df8DD826".   
-00002b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002b70: 207d 2c0a 2020 2020 2020 2020 2020 2020   },.            
-00002b80: 2020 2020 2020 2020 2274 6f22 3a20 7b0a          "to": {.
-00002b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002ba0: 2020 2020 2020 2020 226e 616d 6522 3a20          "name": 
-00002bb0: 2242 6f62 222c 0a20 2020 2020 2020 2020  "Bob",.         
-00002bc0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00002bd0: 7761 6c6c 6574 223a 2022 3078 6242 6242  wallet": "0xbBbB
-00002be0: 4242 4262 6242 4242 6262 6242 6262 4262  BBBbbBBBbbbBbbBb
-00002bf0: 6262 6242 4262 4262 6262 6242 6242 6262  bbbBBbBbbbbBbBbb
-00002c00: 4242 6242 220a 2020 2020 2020 2020 2020  BBbB".          
-00002c10: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
-00002c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002c30: 2022 636f 6e74 656e 7473 223a 2022 4865   "contents": "He
-00002c40: 6c6c 6f2c 2042 6f62 2122 0a20 2020 2020  llo, Bob!".     
-00002c50: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-00002c60: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-00002c70: 2020 2022 2222 0a20 2020 2020 2020 2061     """.        a
-00002c80: 7379 6e63 5f73 6b69 705f 6966 5f74 6573  sync_skip_if_tes
-00002c90: 7472 7063 2861 7379 6e63 5f77 3329 0a20  trpc(async_w3). 
-00002ca0: 2020 2020 2020 2073 6967 6e61 7475 7265         signature
-00002cb0: 203d 2048 6578 4279 7465 7328 0a20 2020   = HexBytes(.   
-00002cc0: 2020 2020 2020 2020 2061 7761 6974 2061           await a
-00002cd0: 7379 6e63 5f77 332e 6574 682e 7369 676e  sync_w3.eth.sign
-00002ce0: 5f74 7970 6564 5f64 6174 6128 0a20 2020  _typed_data(.   
-00002cf0: 2020 2020 2020 2020 2020 2020 2075 6e6c               unl
-00002d00: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
-00002d10: 616c 5f74 7970 652c 206a 736f 6e2e 6c6f  al_type, json.lo
-00002d20: 6164 7328 7661 6c69 644a 534f 4e4d 6573  ads(validJSONMes
-00002d30: 7361 6765 290a 2020 2020 2020 2020 2020  sage).          
-00002d40: 2020 290a 2020 2020 2020 2020 290a 2020    ).        ).  
-00002d50: 2020 2020 2020 6173 7365 7274 206c 656e        assert len
-00002d60: 2873 6967 6e61 7475 7265 2920 3d3d 2033  (signature) == 3
-00002d70: 3220 2b20 3332 202b 2031 0a0a 2020 2020  2 + 32 + 1..    
-00002d80: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
-00002d90: 6e63 696f 0a20 2020 2061 7379 6e63 2064  ncio.    async d
-00002da0: 6566 2074 6573 745f 696e 7661 6c69 645f  ef test_invalid_
-00002db0: 6574 685f 7369 676e 5f74 7970 6564 5f64  eth_sign_typed_d
-00002dc0: 6174 6128 0a20 2020 2020 2020 2073 656c  ata(.        sel
-00002dd0: 662c 0a20 2020 2020 2020 2061 7379 6e63  f,.        async
-00002de0: 5f77 333a 2022 4173 796e 6357 6562 3322  _w3: "AsyncWeb3"
-00002df0: 2c0a 2020 2020 2020 2020 756e 6c6f 636b  ,.        unlock
-00002e00: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
-00002e10: 7479 7065 3a20 4368 6563 6b73 756d 4164  type: ChecksumAd
-00002e20: 6472 6573 732c 0a20 2020 2020 2020 2061  dress,.        a
-00002e30: 7379 6e63 5f73 6b69 705f 6966 5f74 6573  sync_skip_if_tes
-00002e40: 7472 7063 3a20 4361 6c6c 6162 6c65 5b5b  trpc: Callable[[
-00002e50: 2241 7379 6e63 5765 6233 225d 2c20 4e6f  "AsyncWeb3"], No
-00002e60: 6e65 5d2c 0a20 2020 2029 202d 3e20 4e6f  ne],.    ) -> No
-00002e70: 6e65 3a0a 2020 2020 2020 2020 6173 796e  ne:.        asyn
-00002e80: 635f 736b 6970 5f69 665f 7465 7374 7270  c_skip_if_testrp
-00002e90: 6328 6173 796e 635f 7733 290a 2020 2020  c(async_w3).    
-00002ea0: 2020 2020 696e 7661 6c69 645f 7479 7065      invalid_type
-00002eb0: 645f 6d65 7373 6167 6520 3d20 2222 220a  d_message = """.
-00002ec0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-00002ed0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00002ee0: 7970 6573 223a 207b 0a20 2020 2020 2020  ypes": {.       
-00002ef0: 2020 2020 2020 2020 2020 2020 2022 4549               "EI
-00002f00: 5037 3132 446f 6d61 696e 223a 205b 0a20  P712Domain": [. 
-00002f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002f20: 2020 2020 2020 207b 226e 616d 6522 3a20         {"name": 
-00002f30: 226e 616d 6522 2c20 2274 7970 6522 3a20  "name", "type": 
-00002f40: 2273 7472 696e 6722 7d2c 0a20 2020 2020  "string"},.     
-00002f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002f60: 2020 207b 226e 616d 6522 3a20 2276 6572     {"name": "ver
-00002f70: 7369 6f6e 222c 2022 7479 7065 223a 2022  sion", "type": "
-00002f80: 7374 7269 6e67 227d 2c0a 2020 2020 2020  string"},.      
-00002f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002fa0: 2020 7b22 6e61 6d65 223a 2022 6368 6169    {"name": "chai
-00002fb0: 6e49 6422 2c20 2274 7970 6522 3a20 2275  nId", "type": "u
-00002fc0: 696e 7432 3536 227d 2c0a 2020 2020 2020  int256"},.      
-00002fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002fe0: 2020 7b22 6e61 6d65 223a 2022 7665 7269    {"name": "veri
-00002ff0: 6679 696e 6743 6f6e 7472 6163 7422 2c20  fyingContract", 
-00003000: 2274 7970 6522 3a20 2261 6464 7265 7373  "type": "address
-00003010: 227d 0a20 2020 2020 2020 2020 2020 2020  "}.             
-00003020: 2020 2020 2020 205d 2c0a 2020 2020 2020         ],.      
-00003030: 2020 2020 2020 2020 2020 2020 2020 2250                "P
-00003040: 6572 736f 6e22 3a20 5b0a 2020 2020 2020  erson": [.      
-00003050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003060: 2020 7b22 6e61 6d65 223a 2022 6e61 6d65    {"name": "name
-00003070: 222c 2022 7479 7065 223a 2022 7374 7269  ", "type": "stri
-00003080: 6e67 227d 2c0a 2020 2020 2020 2020 2020  ng"},.          
-00003090: 2020 2020 2020 2020 2020 2020 2020 7b22                {"
-000030a0: 6e61 6d65 223a 2022 7761 6c6c 6574 222c  name": "wallet",
-000030b0: 2022 7479 7065 223a 2022 6164 6472 6573   "type": "addres
-000030c0: 7322 7d0a 2020 2020 2020 2020 2020 2020  s"}.            
-000030d0: 2020 2020 2020 2020 5d2c 0a20 2020 2020          ],.     
-000030e0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000030f0: 4d61 696c 223a 205b 0a20 2020 2020 2020  Mail": [.       
-00003100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003110: 207b 226e 616d 6522 3a20 2266 726f 6d22   {"name": "from"
-00003120: 2c20 2274 7970 6522 3a20 2250 6572 736f  , "type": "Perso
-00003130: 6e22 7d2c 0a20 2020 2020 2020 2020 2020  n"},.           
-00003140: 2020 2020 2020 2020 2020 2020 207b 226e               {"n
-00003150: 616d 6522 3a20 2274 6f22 2c20 2274 7970  ame": "to", "typ
-00003160: 6522 3a20 2250 6572 736f 6e5b 325d 227d  e": "Person[2]"}
-00003170: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00003180: 2020 2020 2020 2020 2020 7b22 6e61 6d65            {"name
-00003190: 223a 2022 636f 6e74 656e 7473 222c 2022  ": "contents", "
-000031a0: 7479 7065 223a 2022 7374 7269 6e67 227d  type": "string"}
-000031b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000031c0: 2020 2020 205d 0a20 2020 2020 2020 2020       ].         
-000031d0: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
-000031e0: 2020 2020 2020 2020 2020 2270 7269 6d61            "prima
-000031f0: 7279 5479 7065 223a 2022 4d61 696c 222c  ryType": "Mail",
-00003200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003210: 2022 646f 6d61 696e 223a 207b 0a20 2020   "domain": {.   
-00003220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003230: 2022 6e61 6d65 223a 2022 4574 6865 7220   "name": "Ether 
-00003240: 4d61 696c 222c 0a20 2020 2020 2020 2020  Mail",.         
-00003250: 2020 2020 2020 2020 2020 2022 7665 7273             "vers
-00003260: 696f 6e22 3a20 2231 222c 0a20 2020 2020  ion": "1",.     
-00003270: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00003280: 6368 6169 6e49 6422 3a20 2230 7830 3122  chainId": "0x01"
-00003290: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000032a0: 2020 2020 2020 2276 6572 6966 7969 6e67        "verifying
-000032b0: 436f 6e74 7261 6374 223a 2022 3078 4363  Contract": "0xCc
-000032c0: 4343 6363 6363 4343 4343 6343 4343 4343  CCccccCCCCcCCCCC
-000032d0: 4363 4363 4363 6343 6343 4343 6343 6363  CcCcCccCcCCCcCcc
-000032e0: 6363 6363 6343 220a 2020 2020 2020 2020  cccccC".        
-000032f0: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
-00003300: 2020 2020 2020 2020 2020 2022 6d65 7373             "mess
-00003310: 6167 6522 3a20 7b0a 2020 2020 2020 2020  age": {.        
-00003320: 2020 2020 2020 2020 2020 2020 2266 726f              "fro
-00003330: 6d22 3a20 7b0a 2020 2020 2020 2020 2020  m": {.          
-00003340: 2020 2020 2020 2020 2020 2020 2020 226e                "n
-00003350: 616d 6522 3a20 2243 6f77 222c 0a20 2020  ame": "Cow",.   
-00003360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003370: 2020 2020 2022 7761 6c6c 6574 223a 2022       "wallet": "
-00003380: 3078 4344 3261 3364 3946 3933 3845 3133  0xCD2a3d9F938E13
-00003390: 4344 3934 3745 6330 3541 6243 3746 4537  CD947Ec05AbC7FE7
-000033a0: 3334 4466 3844 4438 3236 220a 2020 2020  34Df8DD826".    
-000033b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000033c0: 7d2c 0a20 2020 2020 2020 2020 2020 2020  },.             
-000033d0: 2020 2020 2020 2022 746f 223a 205b 7b0a         "to": [{.
-000033e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000033f0: 2020 2020 2020 2020 226e 616d 6522 3a20          "name": 
-00003400: 2242 6f62 222c 0a20 2020 2020 2020 2020  "Bob",.         
-00003410: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00003420: 7761 6c6c 6574 223a 2022 3078 6242 6242  wallet": "0xbBbB
-00003430: 4242 4262 6242 4242 6262 6242 6262 4262  BBBbbBBBbbbBbbBb
-00003440: 6262 6242 4262 4262 6262 6242 6242 6262  bbbBBbBbbbbBbBbb
-00003450: 4242 6242 220a 2020 2020 2020 2020 2020  BBbB".          
-00003460: 2020 2020 2020 2020 2020 7d5d 2c0a 2020            }],.  
-00003470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003480: 2020 2263 6f6e 7465 6e74 7322 3a20 2248    "contents": "H
-00003490: 656c 6c6f 2c20 426f 6221 220a 2020 2020  ello, Bob!".    
-000034a0: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-000034b0: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-000034c0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-000034d0: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
-000034e0: 6573 280a 2020 2020 2020 2020 2020 2020  es(.            
-000034f0: 5661 6c75 6545 7272 6f72 2c0a 2020 2020  ValueError,.    
-00003500: 2020 2020 2020 2020 6d61 7463 683d 7222          match=r"
-00003510: 2e2a 4578 7065 6374 6564 2032 2069 7465  .*Expected 2 ite
-00003520: 6d73 2066 6f72 2061 7272 6179 2074 7970  ms for array typ
-00003530: 6520 5065 7273 6f6e 5c5b 325c 5d2c 2067  e Person\[2\], g
-00003540: 6f74 2031 2069 7465 6d73 2e2a 222c 0a20  ot 1 items.*",. 
-00003550: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
-00003560: 2020 2020 2020 6177 6169 7420 6173 796e        await asyn
-00003570: 635f 7733 2e65 7468 2e73 6967 6e5f 7479  c_w3.eth.sign_ty
-00003580: 7065 645f 6461 7461 280a 2020 2020 2020  ped_data(.      
-00003590: 2020 2020 2020 2020 2020 756e 6c6f 636b            unlock
-000035a0: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
-000035b0: 7479 7065 2c20 6a73 6f6e 2e6c 6f61 6473  type, json.loads
-000035c0: 2869 6e76 616c 6964 5f74 7970 6564 5f6d  (invalid_typed_m
-000035d0: 6573 7361 6765 290a 2020 2020 2020 2020  essage).        
-000035e0: 2020 2020 290a 0a20 2020 2040 7079 7465      )..    @pyte
-000035f0: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
-00003600: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
-00003610: 7374 5f61 7379 6e63 5f65 7468 5f73 6967  st_async_eth_sig
-00003620: 6e5f 7472 616e 7361 6374 696f 6e5f 6c65  n_transaction_le
-00003630: 6761 6379 280a 2020 2020 2020 2020 7365  gacy(.        se
-00003640: 6c66 2c20 6173 796e 635f 7733 3a20 2241  lf, async_w3: "A
-00003650: 7379 6e63 5765 6233 222c 2075 6e6c 6f63  syncWeb3", unloc
-00003660: 6b65 645f 6163 636f 756e 743a 2043 6865  ked_account: Che
-00003670: 636b 7375 6d41 6464 7265 7373 0a20 2020  cksumAddress.   
-00003680: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-00003690: 2020 2020 7478 6e5f 7061 7261 6d73 3a20      txn_params: 
-000036a0: 5478 5061 7261 6d73 203d 207b 0a20 2020  TxParams = {.   
-000036b0: 2020 2020 2020 2020 2022 6672 6f6d 223a           "from":
-000036c0: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-000036d0: 742c 0a20 2020 2020 2020 2020 2020 2022  t,.            "
-000036e0: 746f 223a 2075 6e6c 6f63 6b65 645f 6163  to": unlocked_ac
-000036f0: 636f 756e 742c 0a20 2020 2020 2020 2020  count,.         
-00003700: 2020 2022 7661 6c75 6522 3a20 5765 6928     "value": Wei(
-00003710: 3129 2c0a 2020 2020 2020 2020 2020 2020  1),.            
-00003720: 2267 6173 223a 2032 3130 3030 2c0a 2020  "gas": 21000,.  
-00003730: 2020 2020 2020 2020 2020 2267 6173 5072            "gasPr
-00003740: 6963 6522 3a20 6177 6169 7420 6173 796e  ice": await asyn
-00003750: 635f 7733 2e65 7468 2e67 6173 5f70 7269  c_w3.eth.gas_pri
-00003760: 6365 2c0a 2020 2020 2020 2020 2020 2020  ce,.            
-00003770: 226e 6f6e 6365 223a 204e 6f6e 6365 2830  "nonce": Nonce(0
-00003780: 292c 0a20 2020 2020 2020 207d 0a20 2020  ),.        }.   
-00003790: 2020 2020 2072 6573 756c 7420 3d20 6177       result = aw
-000037a0: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
-000037b0: 2e73 6967 6e5f 7472 616e 7361 6374 696f  .sign_transactio
-000037c0: 6e28 7478 6e5f 7061 7261 6d73 290a 2020  n(txn_params).  
-000037d0: 2020 2020 2020 7369 676e 6174 6f72 795f        signatory_
-000037e0: 6163 636f 756e 7420 3d20 6173 796e 635f  account = async_
-000037f0: 7733 2e65 7468 2e61 6363 6f75 6e74 2e72  w3.eth.account.r
-00003800: 6563 6f76 6572 5f74 7261 6e73 6163 7469  ecover_transacti
-00003810: 6f6e 2872 6573 756c 745b 2272 6177 225d  on(result["raw"]
-00003820: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-00003830: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-00003840: 7420 3d3d 2073 6967 6e61 746f 7279 5f61  t == signatory_a
-00003850: 6363 6f75 6e74 0a20 2020 2020 2020 2061  ccount.        a
-00003860: 7373 6572 7420 7265 7375 6c74 5b22 7478  ssert result["tx
-00003870: 225d 5b22 746f 225d 203d 3d20 7478 6e5f  "]["to"] == txn_
-00003880: 7061 7261 6d73 5b22 746f 225d 0a20 2020  params["to"].   
-00003890: 2020 2020 2061 7373 6572 7420 7265 7375       assert resu
-000038a0: 6c74 5b22 7478 225d 5b22 7661 6c75 6522  lt["tx"]["value"
-000038b0: 5d20 3d3d 2074 786e 5f70 6172 616d 735b  ] == txn_params[
-000038c0: 2276 616c 7565 225d 0a20 2020 2020 2020  "value"].       
-000038d0: 2061 7373 6572 7420 7265 7375 6c74 5b22   assert result["
-000038e0: 7478 225d 5b22 6761 7322 5d20 3d3d 2074  tx"]["gas"] == t
-000038f0: 786e 5f70 6172 616d 735b 2267 6173 225d  xn_params["gas"]
-00003900: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00003910: 7265 7375 6c74 5b22 7478 225d 5b22 6761  result["tx"]["ga
-00003920: 7350 7269 6365 225d 203d 3d20 7478 6e5f  sPrice"] == txn_
-00003930: 7061 7261 6d73 5b22 6761 7350 7269 6365  params["gasPrice
-00003940: 225d 0a20 2020 2020 2020 2061 7373 6572  "].        asser
-00003950: 7420 7265 7375 6c74 5b22 7478 225d 5b22  t result["tx"]["
-00003960: 6e6f 6e63 6522 5d20 3d3d 2074 786e 5f70  nonce"] == txn_p
-00003970: 6172 616d 735b 226e 6f6e 6365 225d 0a0a  arams["nonce"]..
-00003980: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
-00003990: 2e61 7379 6e63 696f 0a20 2020 2061 7379  .asyncio.    asy
-000039a0: 6e63 2064 6566 2074 6573 745f 6173 796e  nc def test_asyn
-000039b0: 635f 6574 685f 7369 676e 5f74 7261 6e73  c_eth_sign_trans
-000039c0: 6163 7469 6f6e 5f68 6578 5f66 6565 7328  action_hex_fees(
-000039d0: 0a20 2020 2020 2020 2073 656c 662c 2061  .        self, a
-000039e0: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
-000039f0: 6562 3322 2c20 756e 6c6f 636b 6564 5f61  eb3", unlocked_a
-00003a00: 6363 6f75 6e74 3a20 4368 6563 6b73 756d  ccount: Checksum
-00003a10: 4164 6472 6573 730a 2020 2020 2920 2d3e  Address.    ) ->
-00003a20: 204e 6f6e 653a 0a20 2020 2020 2020 2074   None:.        t
-00003a30: 786e 5f70 6172 616d 733a 2054 7850 6172  xn_params: TxPar
-00003a40: 616d 7320 3d20 7b0a 2020 2020 2020 2020  ams = {.        
-00003a50: 2020 2020 2266 726f 6d22 3a20 756e 6c6f      "from": unlo
-00003a60: 636b 6564 5f61 6363 6f75 6e74 2c0a 2020  cked_account,.  
-00003a70: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
-00003a80: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-00003a90: 2c0a 2020 2020 2020 2020 2020 2020 2276  ,.            "v
-00003aa0: 616c 7565 223a 2057 6569 2831 292c 0a20  alue": Wei(1),. 
-00003ab0: 2020 2020 2020 2020 2020 2022 6761 7322             "gas"
-00003ac0: 3a20 3231 3030 302c 0a20 2020 2020 2020  : 21000,.       
-00003ad0: 2020 2020 2022 6d61 7846 6565 5065 7247       "maxFeePerG
-00003ae0: 6173 223a 2068 6578 2861 7379 6e63 5f77  as": hex(async_w
-00003af0: 332e 746f 5f77 6569 2832 2c20 2267 7765  3.to_wei(2, "gwe
-00003b00: 6922 2929 2c0a 2020 2020 2020 2020 2020  i")),.          
-00003b10: 2020 226d 6178 5072 696f 7269 7479 4665    "maxPriorityFe
-00003b20: 6550 6572 4761 7322 3a20 6865 7828 6173  ePerGas": hex(as
-00003b30: 796e 635f 7733 2e74 6f5f 7765 6928 312c  ync_w3.to_wei(1,
-00003b40: 2022 6777 6569 2229 292c 0a20 2020 2020   "gwei")),.     
-00003b50: 2020 2020 2020 2022 6e6f 6e63 6522 3a20         "nonce": 
-00003b60: 4e6f 6e63 6528 3029 2c0a 2020 2020 2020  Nonce(0),.      
-00003b70: 2020 7d0a 2020 2020 2020 2020 7265 7375    }.        resu
-00003b80: 6c74 203d 2061 7761 6974 2061 7379 6e63  lt = await async
-00003b90: 5f77 332e 6574 682e 7369 676e 5f74 7261  _w3.eth.sign_tra
-00003ba0: 6e73 6163 7469 6f6e 2874 786e 5f70 6172  nsaction(txn_par
-00003bb0: 616d 7329 0a20 2020 2020 2020 2073 6967  ams).        sig
-00003bc0: 6e61 746f 7279 5f61 6363 6f75 6e74 203d  natory_account =
-00003bd0: 2061 7379 6e63 5f77 332e 6574 682e 6163   async_w3.eth.ac
-00003be0: 636f 756e 742e 7265 636f 7665 725f 7472  count.recover_tr
-00003bf0: 616e 7361 6374 696f 6e28 7265 7375 6c74  ansaction(result
-00003c00: 5b22 7261 7722 5d29 0a20 2020 2020 2020  ["raw"]).       
-00003c10: 2061 7373 6572 7420 756e 6c6f 636b 6564   assert unlocked
-00003c20: 5f61 6363 6f75 6e74 203d 3d20 7369 676e  _account == sign
-00003c30: 6174 6f72 795f 6163 636f 756e 740a 2020  atory_account.  
-00003c40: 2020 2020 2020 6173 7365 7274 2072 6573        assert res
-00003c50: 756c 745b 2274 7822 5d5b 2274 6f22 5d20  ult["tx"]["to"] 
-00003c60: 3d3d 2074 786e 5f70 6172 616d 735b 2274  == txn_params["t
-00003c70: 6f22 5d0a 2020 2020 2020 2020 6173 7365  o"].        asse
-00003c80: 7274 2072 6573 756c 745b 2274 7822 5d5b  rt result["tx"][
-00003c90: 2276 616c 7565 225d 203d 3d20 7478 6e5f  "value"] == txn_
-00003ca0: 7061 7261 6d73 5b22 7661 6c75 6522 5d0a  params["value"].
-00003cb0: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
-00003cc0: 6573 756c 745b 2274 7822 5d5b 2267 6173  esult["tx"]["gas
-00003cd0: 225d 203d 3d20 7478 6e5f 7061 7261 6d73  "] == txn_params
-00003ce0: 5b22 6761 7322 5d0a 2020 2020 2020 2020  ["gas"].        
-00003cf0: 6173 7365 7274 2072 6573 756c 745b 2274  assert result["t
-00003d00: 7822 5d5b 226d 6178 4665 6550 6572 4761  x"]["maxFeePerGa
-00003d10: 7322 5d20 3d3d 2069 6e74 2873 7472 2874  s"] == int(str(t
-00003d20: 786e 5f70 6172 616d 735b 226d 6178 4665  xn_params["maxFe
-00003d30: 6550 6572 4761 7322 5d29 2c20 3136 290a  ePerGas"]), 16).
-00003d40: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
-00003d50: 6573 756c 745b 2274 7822 5d5b 226d 6178  esult["tx"]["max
-00003d60: 5072 696f 7269 7479 4665 6550 6572 4761  PriorityFeePerGa
-00003d70: 7322 5d20 3d3d 2069 6e74 280a 2020 2020  s"] == int(.    
-00003d80: 2020 2020 2020 2020 7374 7228 7478 6e5f          str(txn_
-00003d90: 7061 7261 6d73 5b22 6d61 7850 7269 6f72  params["maxPrior
-00003da0: 6974 7946 6565 5065 7247 6173 225d 292c  ityFeePerGas"]),
-00003db0: 2031 360a 2020 2020 2020 2020 290a 2020   16.        ).  
-00003dc0: 2020 2020 2020 6173 7365 7274 2072 6573        assert res
-00003dd0: 756c 745b 2274 7822 5d5b 226e 6f6e 6365  ult["tx"]["nonce
-00003de0: 225d 203d 3d20 7478 6e5f 7061 7261 6d73  "] == txn_params
-00003df0: 5b22 6e6f 6e63 6522 5d0a 0a20 2020 2040  ["nonce"]..    @
-00003e00: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
-00003e10: 6369 6f0a 2020 2020 4070 7974 6573 742e  cio.    @pytest.
-00003e20: 6d61 726b 2e78 6661 696c 280a 2020 2020  mark.xfail(.    
-00003e30: 2020 2020 7265 6173 6f6e 3d22 6173 796e      reason="asyn
-00003e40: 6320 6e61 6d65 5f74 6f5f 6164 6472 6573  c name_to_addres
-00003e50: 735f 6d69 6464 6c65 7761 7265 2068 6173  s_middleware has
-00003e60: 206e 6f74 2062 6565 6e20 696d 706c 656d   not been implem
-00003e70: 656e 7465 6420 7965 7422 0a20 2020 2029  ented yet".    )
-00003e80: 0a20 2020 2061 7379 6e63 2064 6566 2074  .    async def t
-00003e90: 6573 745f 6173 796e 635f 6574 685f 7369  est_async_eth_si
-00003ea0: 676e 5f74 7261 6e73 6163 7469 6f6e 5f65  gn_transaction_e
-00003eb0: 6e73 5f6e 616d 6573 280a 2020 2020 2020  ns_names(.      
-00003ec0: 2020 7365 6c66 2c20 6173 796e 635f 7733    self, async_w3
-00003ed0: 3a20 2241 7379 6e63 5765 6233 222c 2075  : "AsyncWeb3", u
-00003ee0: 6e6c 6f63 6b65 645f 6163 636f 756e 743a  nlocked_account:
-00003ef0: 2043 6865 636b 7375 6d41 6464 7265 7373   ChecksumAddress
-00003f00: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-00003f10: 2020 2020 2020 2020 7769 7468 2065 6e73          with ens
-00003f20: 5f61 6464 7265 7373 6573 2861 7379 6e63  _addresses(async
-00003f30: 5f77 332c 207b 2275 6e6c 6f63 6b65 642d  _w3, {"unlocked-
-00003f40: 6163 636f 756e 742e 6574 6822 3a20 756e  account.eth": un
-00003f50: 6c6f 636b 6564 5f61 6363 6f75 6e74 7d29  locked_account})
-00003f60: 3a0a 2020 2020 2020 2020 2020 2020 7478  :.            tx
-00003f70: 6e5f 7061 7261 6d73 3a20 5478 5061 7261  n_params: TxPara
-00003f80: 6d73 203d 207b 0a20 2020 2020 2020 2020  ms = {.         
-00003f90: 2020 2020 2020 2022 6672 6f6d 223a 2022         "from": "
-00003fa0: 756e 6c6f 636b 6564 2d61 6363 6f75 6e74  unlocked-account
-00003fb0: 2e65 7468 222c 0a20 2020 2020 2020 2020  .eth",.         
-00003fc0: 2020 2020 2020 2022 746f 223a 2022 756e         "to": "un
-00003fd0: 6c6f 636b 6564 2d61 6363 6f75 6e74 2e65  locked-account.e
-00003fe0: 7468 222c 0a20 2020 2020 2020 2020 2020  th",.           
-00003ff0: 2020 2020 2022 7661 6c75 6522 3a20 5765       "value": We
-00004000: 6928 3129 2c0a 2020 2020 2020 2020 2020  i(1),.          
-00004010: 2020 2020 2020 2267 6173 223a 2032 3130        "gas": 210
-00004020: 3030 2c0a 2020 2020 2020 2020 2020 2020  00,.            
-00004030: 2020 2020 226d 6178 4665 6550 6572 4761      "maxFeePerGa
-00004040: 7322 3a20 6173 796e 635f 7733 2e74 6f5f  s": async_w3.to_
-00004050: 7765 6928 322c 2022 6777 6569 2229 2c0a  wei(2, "gwei"),.
-00004060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004070: 226d 6178 5072 696f 7269 7479 4665 6550  "maxPriorityFeeP
-00004080: 6572 4761 7322 3a20 6173 796e 635f 7733  erGas": async_w3
-00004090: 2e74 6f5f 7765 6928 312c 2022 6777 6569  .to_wei(1, "gwei
-000040a0: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
-000040b0: 2020 2020 226e 6f6e 6365 223a 204e 6f6e      "nonce": Non
-000040c0: 6365 2830 292c 0a20 2020 2020 2020 2020  ce(0),.         
-000040d0: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-000040e0: 2072 6573 756c 7420 3d20 6177 6169 7420   result = await 
-000040f0: 6173 796e 635f 7733 2e65 7468 2e73 6967  async_w3.eth.sig
-00004100: 6e5f 7472 616e 7361 6374 696f 6e28 7478  n_transaction(tx
-00004110: 6e5f 7061 7261 6d73 290a 2020 2020 2020  n_params).      
-00004120: 2020 2020 2020 7369 676e 6174 6f72 795f        signatory_
-00004130: 6163 636f 756e 7420 3d20 6173 796e 635f  account = async_
-00004140: 7733 2e65 7468 2e61 6363 6f75 6e74 2e72  w3.eth.account.r
-00004150: 6563 6f76 6572 5f74 7261 6e73 6163 7469  ecover_transacti
-00004160: 6f6e 2872 6573 756c 745b 2272 6177 225d  on(result["raw"]
-00004170: 290a 2020 2020 2020 2020 2020 2020 6173  ).            as
-00004180: 7365 7274 2075 6e6c 6f63 6b65 645f 6163  sert unlocked_ac
-00004190: 636f 756e 7420 3d3d 2073 6967 6e61 746f  count == signato
-000041a0: 7279 5f61 6363 6f75 6e74 0a20 2020 2020  ry_account.     
-000041b0: 2020 2020 2020 2061 7373 6572 7420 7265         assert re
-000041c0: 7375 6c74 5b22 7478 225d 5b22 746f 225d  sult["tx"]["to"]
-000041d0: 203d 3d20 756e 6c6f 636b 6564 5f61 6363   == unlocked_acc
-000041e0: 6f75 6e74 0a20 2020 2020 2020 2020 2020  ount.           
-000041f0: 2061 7373 6572 7420 7265 7375 6c74 5b22   assert result["
-00004200: 7478 225d 5b22 7661 6c75 6522 5d20 3d3d  tx"]["value"] ==
-00004210: 2074 786e 5f70 6172 616d 735b 2276 616c   txn_params["val
-00004220: 7565 225d 0a20 2020 2020 2020 2020 2020  ue"].           
-00004230: 2061 7373 6572 7420 7265 7375 6c74 5b22   assert result["
-00004240: 7478 225d 5b22 6761 7322 5d20 3d3d 2074  tx"]["gas"] == t
-00004250: 786e 5f70 6172 616d 735b 2267 6173 225d  xn_params["gas"]
-00004260: 0a20 2020 2020 2020 2020 2020 2061 7373  .            ass
-00004270: 6572 7420 7265 7375 6c74 5b22 7478 225d  ert result["tx"]
-00004280: 5b22 6d61 7846 6565 5065 7247 6173 225d  ["maxFeePerGas"]
-00004290: 203d 3d20 7478 6e5f 7061 7261 6d73 5b22   == txn_params["
-000042a0: 6d61 7846 6565 5065 7247 6173 225d 0a20  maxFeePerGas"]. 
-000042b0: 2020 2020 2020 2020 2020 2061 7373 6572             asser
-000042c0: 7420 280a 2020 2020 2020 2020 2020 2020  t (.            
-000042d0: 2020 2020 7265 7375 6c74 5b22 7478 225d      result["tx"]
-000042e0: 5b22 6d61 7850 7269 6f72 6974 7946 6565  ["maxPriorityFee
-000042f0: 5065 7247 6173 225d 0a20 2020 2020 2020  PerGas"].       
-00004300: 2020 2020 2020 2020 203d 3d20 7478 6e5f           == txn_
-00004310: 7061 7261 6d73 5b22 6d61 7850 7269 6f72  params["maxPrior
-00004320: 6974 7946 6565 5065 7247 6173 225d 0a20  ityFeePerGas"]. 
-00004330: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00004340: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-00004350: 7265 7375 6c74 5b22 7478 225d 5b22 6e6f  result["tx"]["no
-00004360: 6e63 6522 5d20 3d3d 2074 786e 5f70 6172  nce"] == txn_par
-00004370: 616d 735b 226e 6f6e 6365 225d 0a0a 2020  ams["nonce"]..  
-00004380: 2020 4070 7974 6573 742e 6d61 726b 2e61    @pytest.mark.a
-00004390: 7379 6e63 696f 0a20 2020 2061 7379 6e63  syncio.    async
-000043a0: 2064 6566 2074 6573 745f 6574 685f 7365   def test_eth_se
-000043b0: 6e64 5f74 7261 6e73 6163 7469 6f6e 280a  nd_transaction(.
-000043c0: 2020 2020 2020 2020 7365 6c66 2c20 6173          self, as
-000043d0: 796e 635f 7733 3a20 2241 7379 6e63 5765  ync_w3: "AsyncWe
-000043e0: 6233 222c 2075 6e6c 6f63 6b65 645f 6163  b3", unlocked_ac
-000043f0: 636f 756e 745f 6475 616c 5f74 7970 653a  count_dual_type:
-00004400: 2043 6865 636b 7375 6d41 6464 7265 7373   ChecksumAddress
-00004410: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-00004420: 2020 2020 2020 2020 7478 6e5f 7061 7261          txn_para
-00004430: 6d73 3a20 5478 5061 7261 6d73 203d 207b  ms: TxParams = {
-00004440: 0a20 2020 2020 2020 2020 2020 2022 6672  .            "fr
-00004450: 6f6d 223a 2075 6e6c 6f63 6b65 645f 6163  om": unlocked_ac
-00004460: 636f 756e 745f 6475 616c 5f74 7970 652c  count_dual_type,
-00004470: 0a20 2020 2020 2020 2020 2020 2022 746f  .            "to
-00004480: 223a 2075 6e6c 6f63 6b65 645f 6163 636f  ": unlocked_acco
-00004490: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
-000044a0: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
-000044b0: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
-000044c0: 2020 2020 2020 2020 2267 6173 223a 2032          "gas": 2
-000044d0: 3130 3030 2c0a 2020 2020 2020 2020 2020  1000,.          
-000044e0: 2020 226d 6178 4665 6550 6572 4761 7322    "maxFeePerGas"
-000044f0: 3a20 6173 796e 635f 7733 2e74 6f5f 7765  : async_w3.to_we
-00004500: 6928 332c 2022 6777 6569 2229 2c0a 2020  i(3, "gwei"),.  
-00004510: 2020 2020 2020 2020 2020 226d 6178 5072            "maxPr
-00004520: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
-00004530: 3a20 6173 796e 635f 7733 2e74 6f5f 7765  : async_w3.to_we
-00004540: 6928 312c 2022 6777 6569 2229 2c0a 2020  i(1, "gwei"),.  
-00004550: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00004560: 7478 6e5f 6861 7368 203d 2061 7761 6974  txn_hash = await
-00004570: 2061 7379 6e63 5f77 332e 6574 682e 7365   async_w3.eth.se
-00004580: 6e64 5f74 7261 6e73 6163 7469 6f6e 2874  nd_transaction(t
-00004590: 786e 5f70 6172 616d 7329 0a20 2020 2020  xn_params).     
-000045a0: 2020 2074 786e 203d 2061 7761 6974 2061     txn = await a
-000045b0: 7379 6e63 5f77 332e 6574 682e 6765 745f  sync_w3.eth.get_
-000045c0: 7472 616e 7361 6374 696f 6e28 7478 6e5f  transaction(txn_
-000045d0: 6861 7368 290a 0a20 2020 2020 2020 2061  hash)..        a
-000045e0: 7373 6572 7420 6973 5f73 616d 655f 6164  ssert is_same_ad
-000045f0: 6472 6573 7328 7478 6e5b 2266 726f 6d22  dress(txn["from"
-00004600: 5d2c 2063 6173 7428 4368 6563 6b73 756d  ], cast(Checksum
-00004610: 4164 6472 6573 732c 2074 786e 5f70 6172  Address, txn_par
-00004620: 616d 735b 2266 726f 6d22 5d29 290a 2020  ams["from"])).  
-00004630: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
-00004640: 7361 6d65 5f61 6464 7265 7373 2874 786e  same_address(txn
-00004650: 5b22 746f 225d 2c20 6361 7374 2843 6865  ["to"], cast(Che
-00004660: 636b 7375 6d41 6464 7265 7373 2c20 7478  cksumAddress, tx
-00004670: 6e5f 7061 7261 6d73 5b22 746f 225d 2929  n_params["to"]))
-00004680: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00004690: 7478 6e5b 2276 616c 7565 225d 203d 3d20  txn["value"] == 
-000046a0: 310a 2020 2020 2020 2020 6173 7365 7274  1.        assert
-000046b0: 2074 786e 5b22 6761 7322 5d20 3d3d 2032   txn["gas"] == 2
-000046c0: 3130 3030 0a20 2020 2020 2020 2061 7373  1000.        ass
-000046d0: 6572 7420 7478 6e5b 226d 6178 4665 6550  ert txn["maxFeeP
-000046e0: 6572 4761 7322 5d20 3d3d 2074 786e 5f70  erGas"] == txn_p
-000046f0: 6172 616d 735b 226d 6178 4665 6550 6572  arams["maxFeePer
-00004700: 4761 7322 5d0a 2020 2020 2020 2020 6173  Gas"].        as
-00004710: 7365 7274 2074 786e 5b22 6d61 7850 7269  sert txn["maxPri
-00004720: 6f72 6974 7946 6565 5065 7247 6173 225d  orityFeePerGas"]
-00004730: 203d 3d20 7478 6e5f 7061 7261 6d73 5b22   == txn_params["
-00004740: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
-00004750: 7247 6173 225d 0a20 2020 2020 2020 2061  rGas"].        a
-00004760: 7373 6572 7420 7478 6e5b 2267 6173 5072  ssert txn["gasPr
-00004770: 6963 6522 5d20 3d3d 2074 786e 5f70 6172  ice"] == txn_par
-00004780: 616d 735b 226d 6178 4665 6550 6572 4761  ams["maxFeePerGa
-00004790: 7322 5d0a 0a20 2020 2040 7079 7465 7374  s"]..    @pytest
-000047a0: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
-000047b0: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
-000047c0: 5f65 7468 5f73 656e 645f 7472 616e 7361  _eth_send_transa
-000047d0: 6374 696f 6e5f 6465 6661 756c 745f 6665  ction_default_fe
-000047e0: 6573 280a 2020 2020 2020 2020 7365 6c66  es(.        self
-000047f0: 2c20 6173 796e 635f 7733 3a20 2241 7379  , async_w3: "Asy
-00004800: 6e63 5765 6233 222c 2075 6e6c 6f63 6b65  ncWeb3", unlocke
-00004810: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-00004820: 7970 653a 2043 6865 636b 7375 6d41 6464  ype: ChecksumAdd
-00004830: 7265 7373 0a20 2020 2029 202d 3e20 4e6f  ress.    ) -> No
-00004840: 6e65 3a0a 2020 2020 2020 2020 7478 6e5f  ne:.        txn_
-00004850: 7061 7261 6d73 3a20 5478 5061 7261 6d73  params: TxParams
-00004860: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-00004870: 2022 6672 6f6d 223a 2075 6e6c 6f63 6b65   "from": unlocke
-00004880: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-00004890: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
-000048a0: 2022 746f 223a 2075 6e6c 6f63 6b65 645f   "to": unlocked_
-000048b0: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
-000048c0: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
-000048d0: 7661 6c75 6522 3a20 5765 6928 3129 2c0a  value": Wei(1),.
-000048e0: 2020 2020 2020 2020 2020 2020 2267 6173              "gas
-000048f0: 223a 2032 3130 3030 2c0a 2020 2020 2020  ": 21000,.      
-00004900: 2020 7d0a 2020 2020 2020 2020 7478 6e5f    }.        txn_
-00004910: 6861 7368 203d 2061 7761 6974 2061 7379  hash = await asy
-00004920: 6e63 5f77 332e 6574 682e 7365 6e64 5f74  nc_w3.eth.send_t
-00004930: 7261 6e73 6163 7469 6f6e 2874 786e 5f70  ransaction(txn_p
-00004940: 6172 616d 7329 0a20 2020 2020 2020 2074  arams).        t
-00004950: 786e 203d 2061 7761 6974 2061 7379 6e63  xn = await async
-00004960: 5f77 332e 6574 682e 6765 745f 7472 616e  _w3.eth.get_tran
-00004970: 7361 6374 696f 6e28 7478 6e5f 6861 7368  saction(txn_hash
-00004980: 290a 0a20 2020 2020 2020 2061 7373 6572  )..        asser
-00004990: 7420 6973 5f73 616d 655f 6164 6472 6573  t is_same_addres
-000049a0: 7328 7478 6e5b 2266 726f 6d22 5d2c 2063  s(txn["from"], c
-000049b0: 6173 7428 4368 6563 6b73 756d 4164 6472  ast(ChecksumAddr
-000049c0: 6573 732c 2074 786e 5f70 6172 616d 735b  ess, txn_params[
-000049d0: 2266 726f 6d22 5d29 290a 2020 2020 2020  "from"])).      
-000049e0: 2020 6173 7365 7274 2069 735f 7361 6d65    assert is_same
-000049f0: 5f61 6464 7265 7373 2874 786e 5b22 746f  _address(txn["to
-00004a00: 225d 2c20 6361 7374 2843 6865 636b 7375  "], cast(Checksu
-00004a10: 6d41 6464 7265 7373 2c20 7478 6e5f 7061  mAddress, txn_pa
-00004a20: 7261 6d73 5b22 746f 225d 2929 0a20 2020  rams["to"])).   
-00004a30: 2020 2020 2061 7373 6572 7420 7478 6e5b       assert txn[
-00004a40: 2276 616c 7565 225d 203d 3d20 310a 2020  "value"] == 1.  
-00004a50: 2020 2020 2020 6173 7365 7274 2074 786e        assert txn
-00004a60: 5b22 6761 7322 5d20 3d3d 2032 3130 3030  ["gas"] == 21000
-00004a70: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00004a80: 7478 6e5b 226d 6178 5072 696f 7269 7479  txn["maxPriority
-00004a90: 4665 6550 6572 4761 7322 5d20 3d3d 2031  FeePerGas"] == 1
-00004aa0: 202a 2031 302a 2a39 0a20 2020 2020 2020   * 10**9.       
-00004ab0: 2061 7373 6572 7420 7478 6e5b 226d 6178   assert txn["max
-00004ac0: 4665 6550 6572 4761 7322 5d20 3e3d 2031  FeePerGas"] >= 1
-00004ad0: 202a 2031 302a 2a39 0a20 2020 2020 2020   * 10**9.       
-00004ae0: 2061 7373 6572 7420 7478 6e5b 2267 6173   assert txn["gas
-00004af0: 5072 6963 6522 5d20 3d3d 2074 786e 5b22  Price"] == txn["
-00004b00: 6d61 7846 6565 5065 7247 6173 225d 0a0a  maxFeePerGas"]..
-00004b10: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
-00004b20: 2e61 7379 6e63 696f 0a20 2020 2061 7379  .asyncio.    asy
-00004b30: 6e63 2064 6566 2074 6573 745f 6574 685f  nc def test_eth_
-00004b40: 7365 6e64 5f74 7261 6e73 6163 7469 6f6e  send_transaction
-00004b50: 5f68 6578 5f66 6565 7328 0a20 2020 2020  _hex_fees(.     
-00004b60: 2020 2073 656c 662c 2061 7379 6e63 5f77     self, async_w
-00004b70: 333a 2022 4173 796e 6357 6562 3322 2c20  3: "AsyncWeb3", 
-00004b80: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-00004b90: 5f64 7561 6c5f 7479 7065 3a20 4368 6563  _dual_type: Chec
-00004ba0: 6b73 756d 4164 6472 6573 730a 2020 2020  ksumAddress.    
-00004bb0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-00004bc0: 2020 2074 786e 5f70 6172 616d 733a 2054     txn_params: T
-00004bd0: 7850 6172 616d 7320 3d20 7b0a 2020 2020  xParams = {.    
-00004be0: 2020 2020 2020 2020 2266 726f 6d22 3a20          "from": 
-00004bf0: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-00004c00: 5f64 7561 6c5f 7479 7065 2c0a 2020 2020  _dual_type,.    
-00004c10: 2020 2020 2020 2020 2274 6f22 3a20 756e          "to": un
-00004c20: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
-00004c30: 7561 6c5f 7479 7065 2c0a 2020 2020 2020  ual_type,.      
-00004c40: 2020 2020 2020 2276 616c 7565 223a 2057        "value": W
-00004c50: 6569 2831 292c 0a20 2020 2020 2020 2020  ei(1),.         
-00004c60: 2020 2022 6761 7322 3a20 3231 3030 302c     "gas": 21000,
-00004c70: 0a20 2020 2020 2020 2020 2020 2022 6d61  .            "ma
-00004c80: 7846 6565 5065 7247 6173 223a 2068 6578  xFeePerGas": hex
-00004c90: 2832 3530 202a 2031 302a 2a39 292c 0a20  (250 * 10**9),. 
-00004ca0: 2020 2020 2020 2020 2020 2022 6d61 7850             "maxP
-00004cb0: 7269 6f72 6974 7946 6565 5065 7247 6173  riorityFeePerGas
-00004cc0: 223a 2068 6578 2832 202a 2031 302a 2a39  ": hex(2 * 10**9
-00004cd0: 292c 0a20 2020 2020 2020 207d 0a20 2020  ),.        }.   
-00004ce0: 2020 2020 2074 786e 5f68 6173 6820 3d20       txn_hash = 
-00004cf0: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
-00004d00: 7468 2e73 656e 645f 7472 616e 7361 6374  th.send_transact
-00004d10: 696f 6e28 7478 6e5f 7061 7261 6d73 290a  ion(txn_params).
-00004d20: 2020 2020 2020 2020 7478 6e20 3d20 6177          txn = aw
-00004d30: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
-00004d40: 2e67 6574 5f74 7261 6e73 6163 7469 6f6e  .get_transaction
-00004d50: 2874 786e 5f68 6173 6829 0a0a 2020 2020  (txn_hash)..    
-00004d60: 2020 2020 6173 7365 7274 2069 735f 7361      assert is_sa
-00004d70: 6d65 5f61 6464 7265 7373 2874 786e 5b22  me_address(txn["
-00004d80: 6672 6f6d 225d 2c20 6361 7374 2843 6865  from"], cast(Che
-00004d90: 636b 7375 6d41 6464 7265 7373 2c20 7478  cksumAddress, tx
-00004da0: 6e5f 7061 7261 6d73 5b22 6672 6f6d 225d  n_params["from"]
-00004db0: 2929 0a20 2020 2020 2020 2061 7373 6572  )).        asser
-00004dc0: 7420 6973 5f73 616d 655f 6164 6472 6573  t is_same_addres
-00004dd0: 7328 7478 6e5b 2274 6f22 5d2c 2063 6173  s(txn["to"], cas
-00004de0: 7428 4368 6563 6b73 756d 4164 6472 6573  t(ChecksumAddres
-00004df0: 732c 2074 786e 5f70 6172 616d 735b 2274  s, txn_params["t
-00004e00: 6f22 5d29 290a 2020 2020 2020 2020 6173  o"])).        as
-00004e10: 7365 7274 2074 786e 5b22 7661 6c75 6522  sert txn["value"
-00004e20: 5d20 3d3d 2031 0a20 2020 2020 2020 2061  ] == 1.        a
-00004e30: 7373 6572 7420 7478 6e5b 2267 6173 225d  ssert txn["gas"]
-00004e40: 203d 3d20 3231 3030 300a 2020 2020 2020   == 21000.      
-00004e50: 2020 6173 7365 7274 2074 786e 5b22 6d61    assert txn["ma
-00004e60: 7846 6565 5065 7247 6173 225d 203d 3d20  xFeePerGas"] == 
-00004e70: 3235 3020 2a20 3130 2a2a 390a 2020 2020  250 * 10**9.    
-00004e80: 2020 2020 6173 7365 7274 2074 786e 5b22      assert txn["
-00004e90: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
-00004ea0: 7247 6173 225d 203d 3d20 3220 2a20 3130  rGas"] == 2 * 10
-00004eb0: 2a2a 390a 0a20 2020 2040 7079 7465 7374  **9..    @pytest
-00004ec0: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
-00004ed0: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
-00004ee0: 5f65 7468 5f73 656e 645f 7472 616e 7361  _eth_send_transa
-00004ef0: 6374 696f 6e5f 6e6f 5f67 6173 280a 2020  ction_no_gas(.  
-00004f00: 2020 2020 2020 7365 6c66 2c20 6173 796e        self, asyn
-00004f10: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
-00004f20: 222c 2075 6e6c 6f63 6b65 645f 6163 636f  ", unlocked_acco
-00004f30: 756e 745f 6475 616c 5f74 7970 653a 2043  unt_dual_type: C
-00004f40: 6865 636b 7375 6d41 6464 7265 7373 0a20  hecksumAddress. 
-00004f50: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-00004f60: 2020 2020 2020 7478 6e5f 7061 7261 6d73        txn_params
-00004f70: 3a20 5478 5061 7261 6d73 203d 207b 0a20  : TxParams = {. 
-00004f80: 2020 2020 2020 2020 2020 2022 6672 6f6d             "from
-00004f90: 223a 2075 6e6c 6f63 6b65 645f 6163 636f  ": unlocked_acco
-00004fa0: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
-00004fb0: 2020 2020 2020 2020 2020 2022 746f 223a             "to":
-00004fc0: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-00004fd0: 745f 6475 616c 5f74 7970 652c 0a20 2020  t_dual_type,.   
-00004fe0: 2020 2020 2020 2020 2022 7661 6c75 6522           "value"
-00004ff0: 3a20 5765 6928 3129 2c0a 2020 2020 2020  : Wei(1),.      
-00005000: 2020 2020 2020 226d 6178 4665 6550 6572        "maxFeePer
-00005010: 4761 7322 3a20 5765 6928 3235 3020 2a20  Gas": Wei(250 * 
-00005020: 3130 2a2a 3929 2c0a 2020 2020 2020 2020  10**9),.        
-00005030: 2020 2020 226d 6178 5072 696f 7269 7479      "maxPriority
-00005040: 4665 6550 6572 4761 7322 3a20 5765 6928  FeePerGas": Wei(
-00005050: 3220 2a20 3130 2a2a 3929 2c0a 2020 2020  2 * 10**9),.    
-00005060: 2020 2020 7d0a 2020 2020 2020 2020 7478      }.        tx
-00005070: 6e5f 6861 7368 203d 2061 7761 6974 2061  n_hash = await a
-00005080: 7379 6e63 5f77 332e 6574 682e 7365 6e64  sync_w3.eth.send
-00005090: 5f74 7261 6e73 6163 7469 6f6e 2874 786e  _transaction(txn
-000050a0: 5f70 6172 616d 7329 0a20 2020 2020 2020  _params).       
-000050b0: 2074 786e 203d 2061 7761 6974 2061 7379   txn = await asy
-000050c0: 6e63 5f77 332e 6574 682e 6765 745f 7472  nc_w3.eth.get_tr
-000050d0: 616e 7361 6374 696f 6e28 7478 6e5f 6861  ansaction(txn_ha
-000050e0: 7368 290a 0a20 2020 2020 2020 2061 7373  sh)..        ass
-000050f0: 6572 7420 6973 5f73 616d 655f 6164 6472  ert is_same_addr
-00005100: 6573 7328 7478 6e5b 2266 726f 6d22 5d2c  ess(txn["from"],
-00005110: 2063 6173 7428 4368 6563 6b73 756d 4164   cast(ChecksumAd
-00005120: 6472 6573 732c 2074 786e 5f70 6172 616d  dress, txn_param
-00005130: 735b 2266 726f 6d22 5d29 290a 2020 2020  s["from"])).    
-00005140: 2020 2020 6173 7365 7274 2069 735f 7361      assert is_sa
-00005150: 6d65 5f61 6464 7265 7373 2874 786e 5b22  me_address(txn["
-00005160: 746f 225d 2c20 6361 7374 2843 6865 636b  to"], cast(Check
-00005170: 7375 6d41 6464 7265 7373 2c20 7478 6e5f  sumAddress, txn_
-00005180: 7061 7261 6d73 5b22 746f 225d 2929 0a20  params["to"])). 
-00005190: 2020 2020 2020 2061 7373 6572 7420 7478         assert tx
-000051a0: 6e5b 2276 616c 7565 225d 203d 3d20 310a  n["value"] == 1.
-000051b0: 2020 2020 2020 2020 6173 7365 7274 2074          assert t
-000051c0: 786e 5b22 6761 7322 5d20 3d3d 2031 3231  xn["gas"] == 121
-000051d0: 3030 3020 2023 2032 3130 3030 202b 2062  000  # 21000 + b
-000051e0: 7566 6665 720a 0a20 2020 2040 7079 7465  uffer..    @pyte
-000051f0: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
-00005200: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
-00005210: 7374 5f65 7468 5f73 656e 645f 7472 616e  st_eth_send_tran
-00005220: 7361 6374 696f 6e5f 7769 7468 5f67 6173  saction_with_gas
-00005230: 5f70 7269 6365 280a 2020 2020 2020 2020  _price(.        
-00005240: 7365 6c66 2c20 6173 796e 635f 7733 3a20  self, async_w3: 
-00005250: 2241 7379 6e63 5765 6233 222c 2075 6e6c  "AsyncWeb3", unl
-00005260: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
-00005270: 616c 5f74 7970 653a 2043 6865 636b 7375  al_type: Checksu
-00005280: 6d41 6464 7265 7373 0a20 2020 2029 202d  mAddress.    ) -
-00005290: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-000052a0: 7478 6e5f 7061 7261 6d73 3a20 5478 5061  txn_params: TxPa
-000052b0: 7261 6d73 203d 207b 0a20 2020 2020 2020  rams = {.       
-000052c0: 2020 2020 2022 6672 6f6d 223a 2075 6e6c       "from": unl
-000052d0: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
-000052e0: 616c 5f74 7970 652c 0a20 2020 2020 2020  al_type,.       
-000052f0: 2020 2020 2022 746f 223a 2075 6e6c 6f63       "to": unloc
-00005300: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
-00005310: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
-00005320: 2020 2022 7661 6c75 6522 3a20 5765 6928     "value": Wei(
-00005330: 3129 2c0a 2020 2020 2020 2020 2020 2020  1),.            
-00005340: 2267 6173 223a 2032 3130 3030 2c0a 2020  "gas": 21000,.  
-00005350: 2020 2020 2020 2020 2020 2267 6173 5072            "gasPr
-00005360: 6963 6522 3a20 5765 6928 3129 2c0a 2020  ice": Wei(1),.  
-00005370: 2020 2020 2020 2020 2020 226d 6178 4665            "maxFe
-00005380: 6550 6572 4761 7322 3a20 5765 6928 3235  ePerGas": Wei(25
-00005390: 3020 2a20 3130 2a2a 3929 2c0a 2020 2020  0 * 10**9),.    
-000053a0: 2020 2020 2020 2020 226d 6178 5072 696f          "maxPrio
-000053b0: 7269 7479 4665 6550 6572 4761 7322 3a20  rityFeePerGas": 
-000053c0: 5765 6928 3220 2a20 3130 2a2a 3929 2c0a  Wei(2 * 10**9),.
-000053d0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-000053e0: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
-000053f0: 6973 6573 2854 7261 6e73 6163 7469 6f6e  ises(Transaction
-00005400: 5479 7065 4d69 736d 6174 6368 293a 0a20  TypeMismatch):. 
-00005410: 2020 2020 2020 2020 2020 2061 7761 6974             await
-00005420: 2061 7379 6e63 5f77 332e 6574 682e 7365   async_w3.eth.se
-00005430: 6e64 5f74 7261 6e73 6163 7469 6f6e 2874  nd_transaction(t
-00005440: 786e 5f70 6172 616d 7329 0a0a 2020 2020  xn_params)..    
-00005450: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
-00005460: 6e63 696f 0a20 2020 2061 7379 6e63 2064  ncio.    async d
-00005470: 6566 2074 6573 745f 6574 685f 7365 6e64  ef test_eth_send
-00005480: 5f74 7261 6e73 6163 7469 6f6e 5f6e 6f5f  _transaction_no_
-00005490: 7072 696f 7269 7479 5f66 6565 280a 2020  priority_fee(.  
-000054a0: 2020 2020 2020 7365 6c66 2c20 6173 796e        self, asyn
-000054b0: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
-000054c0: 222c 2075 6e6c 6f63 6b65 645f 6163 636f  ", unlocked_acco
-000054d0: 756e 745f 6475 616c 5f74 7970 653a 2043  unt_dual_type: C
-000054e0: 6865 636b 7375 6d41 6464 7265 7373 0a20  hecksumAddress. 
-000054f0: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-00005500: 2020 2020 2020 7478 6e5f 7061 7261 6d73        txn_params
-00005510: 3a20 5478 5061 7261 6d73 203d 207b 0a20  : TxParams = {. 
-00005520: 2020 2020 2020 2020 2020 2022 6672 6f6d             "from
-00005530: 223a 2075 6e6c 6f63 6b65 645f 6163 636f  ": unlocked_acco
-00005540: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
-00005550: 2020 2020 2020 2020 2020 2022 746f 223a             "to":
-00005560: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-00005570: 745f 6475 616c 5f74 7970 652c 0a20 2020  t_dual_type,.   
-00005580: 2020 2020 2020 2020 2022 7661 6c75 6522           "value"
-00005590: 3a20 5765 6928 3129 2c0a 2020 2020 2020  : Wei(1),.      
-000055a0: 2020 2020 2020 2267 6173 223a 2032 3130        "gas": 210
-000055b0: 3030 2c0a 2020 2020 2020 2020 2020 2020  00,.            
-000055c0: 226d 6178 4665 6550 6572 4761 7322 3a20  "maxFeePerGas": 
-000055d0: 5765 6928 3235 3020 2a20 3130 2a2a 3929  Wei(250 * 10**9)
-000055e0: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
-000055f0: 2020 2020 7769 7468 2070 7974 6573 742e      with pytest.
-00005600: 7261 6973 6573 280a 2020 2020 2020 2020  raises(.        
-00005610: 2020 2020 496e 7661 6c69 6454 7261 6e73      InvalidTrans
-00005620: 6163 7469 6f6e 2c20 6d61 7463 683d 226d  action, match="m
-00005630: 6178 5072 696f 7269 7479 4665 6550 6572  axPriorityFeePer
-00005640: 4761 7320 6d75 7374 2062 6520 6465 6669  Gas must be defi
-00005650: 6e65 6422 0a20 2020 2020 2020 2029 3a0a  ned".        ):.
-00005660: 2020 2020 2020 2020 2020 2020 6177 6169              awai
-00005670: 7420 6173 796e 635f 7733 2e65 7468 2e73  t async_w3.eth.s
-00005680: 656e 645f 7472 616e 7361 6374 696f 6e28  end_transaction(
-00005690: 7478 6e5f 7061 7261 6d73 290a 0a20 2020  txn_params)..   
-000056a0: 2040 7079 7465 7374 2e6d 6172 6b2e 6173   @pytest.mark.as
-000056b0: 796e 6369 6f0a 2020 2020 6173 796e 6320  yncio.    async 
-000056c0: 6465 6620 7465 7374 5f65 7468 5f73 656e  def test_eth_sen
-000056d0: 645f 7472 616e 7361 6374 696f 6e5f 6e6f  d_transaction_no
-000056e0: 5f6d 6178 5f66 6565 280a 2020 2020 2020  _max_fee(.      
-000056f0: 2020 7365 6c66 2c20 6173 796e 635f 7733    self, async_w3
-00005700: 3a20 2241 7379 6e63 5765 6233 222c 2075  : "AsyncWeb3", u
-00005710: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
-00005720: 6475 616c 5f74 7970 653a 2043 6865 636b  dual_type: Check
-00005730: 7375 6d41 6464 7265 7373 0a20 2020 2029  sumAddress.    )
-00005740: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-00005750: 2020 6d61 7850 7269 6f72 6974 7946 6565    maxPriorityFee
-00005760: 5065 7247 6173 203d 2061 7379 6e63 5f77  PerGas = async_w
-00005770: 332e 746f 5f77 6569 2832 2c20 2267 7765  3.to_wei(2, "gwe
-00005780: 6922 290a 2020 2020 2020 2020 7478 6e5f  i").        txn_
-00005790: 7061 7261 6d73 3a20 5478 5061 7261 6d73  params: TxParams
-000057a0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-000057b0: 2022 6672 6f6d 223a 2075 6e6c 6f63 6b65   "from": unlocke
-000057c0: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-000057d0: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
-000057e0: 2022 746f 223a 2075 6e6c 6f63 6b65 645f   "to": unlocked_
-000057f0: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
-00005800: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
-00005810: 7661 6c75 6522 3a20 5765 6928 3129 2c0a  value": Wei(1),.
-00005820: 2020 2020 2020 2020 2020 2020 2267 6173              "gas
-00005830: 223a 2032 3130 3030 2c0a 2020 2020 2020  ": 21000,.      
-00005840: 2020 2020 2020 226d 6178 5072 696f 7269        "maxPriori
-00005850: 7479 4665 6550 6572 4761 7322 3a20 6d61  tyFeePerGas": ma
-00005860: 7850 7269 6f72 6974 7946 6565 5065 7247  xPriorityFeePerG
-00005870: 6173 2c0a 2020 2020 2020 2020 7d0a 2020  as,.        }.  
-00005880: 2020 2020 2020 7478 6e5f 6861 7368 203d        txn_hash =
-00005890: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
-000058a0: 6574 682e 7365 6e64 5f74 7261 6e73 6163  eth.send_transac
-000058b0: 7469 6f6e 2874 786e 5f70 6172 616d 7329  tion(txn_params)
-000058c0: 0a20 2020 2020 2020 2074 786e 203d 2061  .        txn = a
-000058d0: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
-000058e0: 682e 6765 745f 7472 616e 7361 6374 696f  h.get_transactio
-000058f0: 6e28 7478 6e5f 6861 7368 290a 0a20 2020  n(txn_hash)..   
-00005900: 2020 2020 2061 7373 6572 7420 6973 5f73       assert is_s
-00005910: 616d 655f 6164 6472 6573 7328 7478 6e5b  ame_address(txn[
-00005920: 2266 726f 6d22 5d2c 2063 6173 7428 4368  "from"], cast(Ch
-00005930: 6563 6b73 756d 4164 6472 6573 732c 2074  ecksumAddress, t
-00005940: 786e 5f70 6172 616d 735b 2266 726f 6d22  xn_params["from"
-00005950: 5d29 290a 2020 2020 2020 2020 6173 7365  ])).        asse
-00005960: 7274 2069 735f 7361 6d65 5f61 6464 7265  rt is_same_addre
-00005970: 7373 2874 786e 5b22 746f 225d 2c20 6361  ss(txn["to"], ca
-00005980: 7374 2843 6865 636b 7375 6d41 6464 7265  st(ChecksumAddre
-00005990: 7373 2c20 7478 6e5f 7061 7261 6d73 5b22  ss, txn_params["
-000059a0: 746f 225d 2929 0a20 2020 2020 2020 2061  to"])).        a
-000059b0: 7373 6572 7420 7478 6e5b 2276 616c 7565  ssert txn["value
-000059c0: 225d 203d 3d20 310a 2020 2020 2020 2020  "] == 1.        
-000059d0: 6173 7365 7274 2074 786e 5b22 6761 7322  assert txn["gas"
-000059e0: 5d20 3d3d 2032 3130 3030 0a0a 2020 2020  ] == 21000..    
-000059f0: 2020 2020 626c 6f63 6b20 3d20 6177 6169      block = awai
-00005a00: 7420 6173 796e 635f 7733 2e65 7468 2e67  t async_w3.eth.g
-00005a10: 6574 5f62 6c6f 636b 2822 6c61 7465 7374  et_block("latest
-00005a20: 2229 0a20 2020 2020 2020 2061 7373 6572  ").        asser
-00005a30: 7420 7478 6e5b 226d 6178 4665 6550 6572  t txn["maxFeePer
-00005a40: 4761 7322 5d20 3d3d 206d 6178 5072 696f  Gas"] == maxPrio
-00005a50: 7269 7479 4665 6550 6572 4761 7320 2b20  rityFeePerGas + 
-00005a60: 3220 2a20 626c 6f63 6b5b 2262 6173 6546  2 * block["baseF
-00005a70: 6565 5065 7247 6173 225d 0a0a 2020 2020  eePerGas"]..    
-00005a80: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
-00005a90: 6e63 696f 0a20 2020 2061 7379 6e63 2064  ncio.    async d
-00005aa0: 6566 2074 6573 745f 6574 685f 7365 6e64  ef test_eth_send
-00005ab0: 5f74 7261 6e73 6163 7469 6f6e 5f6d 6178  _transaction_max
-00005ac0: 5f66 6565 5f6c 6573 735f 7468 616e 5f74  _fee_less_than_t
-00005ad0: 6970 280a 2020 2020 2020 2020 7365 6c66  ip(.        self
-00005ae0: 2c20 6173 796e 635f 7733 3a20 2241 7379  , async_w3: "Asy
-00005af0: 6e63 5765 6233 222c 2075 6e6c 6f63 6b65  ncWeb3", unlocke
-00005b00: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-00005b10: 7970 653a 2043 6865 636b 7375 6d41 6464  ype: ChecksumAdd
-00005b20: 7265 7373 0a20 2020 2029 202d 3e20 4e6f  ress.    ) -> No
-00005b30: 6e65 3a0a 2020 2020 2020 2020 7478 6e5f  ne:.        txn_
-00005b40: 7061 7261 6d73 3a20 5478 5061 7261 6d73  params: TxParams
-00005b50: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-00005b60: 2022 6672 6f6d 223a 2075 6e6c 6f63 6b65   "from": unlocke
-00005b70: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-00005b80: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
-00005b90: 2022 746f 223a 2075 6e6c 6f63 6b65 645f   "to": unlocked_
-00005ba0: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
-00005bb0: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
-00005bc0: 7661 6c75 6522 3a20 5765 6928 3129 2c0a  value": Wei(1),.
-00005bd0: 2020 2020 2020 2020 2020 2020 2267 6173              "gas
-00005be0: 223a 2032 3130 3030 2c0a 2020 2020 2020  ": 21000,.      
-00005bf0: 2020 2020 2020 226d 6178 4665 6550 6572        "maxFeePer
-00005c00: 4761 7322 3a20 5765 6928 3120 2a20 3130  Gas": Wei(1 * 10
-00005c10: 2a2a 3929 2c0a 2020 2020 2020 2020 2020  **9),.          
-00005c20: 2020 226d 6178 5072 696f 7269 7479 4665    "maxPriorityFe
-00005c30: 6550 6572 4761 7322 3a20 5765 6928 3220  ePerGas": Wei(2 
-00005c40: 2a20 3130 2a2a 3929 2c0a 2020 2020 2020  * 10**9),.      
-00005c50: 2020 7d0a 2020 2020 2020 2020 7769 7468    }.        with
-00005c60: 2070 7974 6573 742e 7261 6973 6573 280a   pytest.raises(.
-00005c70: 2020 2020 2020 2020 2020 2020 496e 7661              Inva
-00005c80: 6c69 6454 7261 6e73 6163 7469 6f6e 2c20  lidTransaction, 
-00005c90: 6d61 7463 683d 226d 6178 4665 6550 6572  match="maxFeePer
-00005ca0: 4761 7320 6d75 7374 2062 6520 3e3d 206d  Gas must be >= m
-00005cb0: 6178 5072 696f 7269 7479 4665 6550 6572  axPriorityFeePer
-00005cc0: 4761 7322 0a20 2020 2020 2020 2029 3a0a  Gas".        ):.
-00005cd0: 2020 2020 2020 2020 2020 2020 6177 6169              awai
-00005ce0: 7420 6173 796e 635f 7733 2e65 7468 2e73  t async_w3.eth.s
-00005cf0: 656e 645f 7472 616e 7361 6374 696f 6e28  end_transaction(
-00005d00: 7478 6e5f 7061 7261 6d73 290a 0a20 2020  txn_params)..   
-00005d10: 2040 7079 7465 7374 2e6d 6172 6b2e 6173   @pytest.mark.as
-00005d20: 796e 6369 6f0a 2020 2020 6173 796e 6320  yncio.    async 
-00005d30: 6465 6620 7465 7374 5f76 616c 6964 6174  def test_validat
-00005d40: 696f 6e5f 6d69 6464 6c65 7761 7265 5f63  ion_middleware_c
-00005d50: 6861 696e 5f69 645f 6d69 736d 6174 6368  hain_id_mismatch
-00005d60: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-00005d70: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
-00005d80: 5765 6233 222c 2075 6e6c 6f63 6b65 645f  Web3", unlocked_
-00005d90: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
-00005da0: 653a 2043 6865 636b 7375 6d41 6464 7265  e: ChecksumAddre
-00005db0: 7373 0a20 2020 2029 202d 3e20 4e6f 6e65  ss.    ) -> None
-00005dc0: 3a0a 2020 2020 2020 2020 7772 6f6e 675f  :.        wrong_
-00005dd0: 6368 6169 6e5f 6964 203d 2031 3233 3435  chain_id = 12345
-00005de0: 3637 3839 300a 2020 2020 2020 2020 6163  67890.        ac
-00005df0: 7475 616c 5f63 6861 696e 5f69 6420 3d20  tual_chain_id = 
-00005e00: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
-00005e10: 7468 2e63 6861 696e 5f69 640a 0a20 2020  th.chain_id..   
-00005e20: 2020 2020 2074 786e 5f70 6172 616d 733a       txn_params:
-00005e30: 2054 7850 6172 616d 7320 3d20 7b0a 2020   TxParams = {.  
-00005e40: 2020 2020 2020 2020 2020 2266 726f 6d22            "from"
-00005e50: 3a20 756e 6c6f 636b 6564 5f61 6363 6f75  : unlocked_accou
-00005e60: 6e74 5f64 7561 6c5f 7479 7065 2c0a 2020  nt_dual_type,.  
-00005e70: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
-00005e80: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-00005e90: 5f64 7561 6c5f 7479 7065 2c0a 2020 2020  _dual_type,.    
-00005ea0: 2020 2020 2020 2020 2276 616c 7565 223a          "value":
-00005eb0: 2057 6569 2831 292c 0a20 2020 2020 2020   Wei(1),.       
-00005ec0: 2020 2020 2022 6761 7322 3a20 5765 6928       "gas": Wei(
-00005ed0: 3231 3030 3029 2c0a 2020 2020 2020 2020  21000),.        
-00005ee0: 2020 2020 226d 6178 4665 6550 6572 4761      "maxFeePerGa
-00005ef0: 7322 3a20 6173 796e 635f 7733 2e74 6f5f  s": async_w3.to_
-00005f00: 7765 6928 322c 2022 6777 6569 2229 2c0a  wei(2, "gwei"),.
-00005f10: 2020 2020 2020 2020 2020 2020 226d 6178              "max
-00005f20: 5072 696f 7269 7479 4665 6550 6572 4761  PriorityFeePerGa
-00005f30: 7322 3a20 6173 796e 635f 7733 2e74 6f5f  s": async_w3.to_
-00005f40: 7765 6928 312c 2022 6777 6569 2229 2c0a  wei(1, "gwei"),.
-00005f50: 2020 2020 2020 2020 2020 2020 2263 6861              "cha
-00005f60: 696e 4964 223a 2077 726f 6e67 5f63 6861  inId": wrong_cha
-00005f70: 696e 5f69 642c 0a20 2020 2020 2020 207d  in_id,.        }
-00005f80: 0a20 2020 2020 2020 2077 6974 6820 7079  .        with py
-00005f90: 7465 7374 2e72 6169 7365 7328 0a20 2020  test.raises(.   
-00005fa0: 2020 2020 2020 2020 2057 6562 3356 616c           Web3Val
-00005fb0: 6964 6174 696f 6e45 7272 6f72 2c0a 2020  idationError,.  
-00005fc0: 2020 2020 2020 2020 2020 6d61 7463 683d            match=
-00005fd0: 6622 5468 6520 7472 616e 7361 6374 696f  f"The transactio
-00005fe0: 6e20 6465 636c 6172 6564 2063 6861 696e  n declared chain
-00005ff0: 2049 4420 7b77 726f 6e67 5f63 6861 696e   ID {wrong_chain
-00006000: 5f69 647d 2c20 220a 2020 2020 2020 2020  _id}, ".        
-00006010: 2020 2020 6622 6275 7420 7468 6520 636f      f"but the co
-00006020: 6e6e 6563 7465 6420 6e6f 6465 2069 7320  nnected node is 
-00006030: 6f6e 207b 6163 7475 616c 5f63 6861 696e  on {actual_chain
-00006040: 5f69 647d 222c 0a20 2020 2020 2020 2029  _id}",.        )
-00006050: 3a0a 2020 2020 2020 2020 2020 2020 6177  :.            aw
-00006060: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
-00006070: 2e73 656e 645f 7472 616e 7361 6374 696f  .send_transactio
-00006080: 6e28 7478 6e5f 7061 7261 6d73 290a 0a20  n(txn_params).. 
-00006090: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
-000060a0: 6173 796e 6369 6f0a 2020 2020 6173 796e  asyncio.    asyn
-000060b0: 6320 6465 6620 7465 7374 5f67 6574 685f  c def test_geth_
-000060c0: 706f 615f 6d69 6464 6c65 7761 7265 2873  poa_middleware(s
-000060d0: 656c 662c 2061 7379 6e63 5f77 333a 2022  elf, async_w3: "
-000060e0: 4173 796e 6357 6562 3322 2920 2d3e 204e  AsyncWeb3") -> N
-000060f0: 6f6e 653a 0a20 2020 2020 2020 2072 6574  one:.        ret
-00006100: 7572 6e5f 626c 6f63 6b5f 7769 7468 5f6c  urn_block_with_l
-00006110: 6f6e 675f 6578 7472 615f 6461 7461 203d  ong_extra_data =
-00006120: 2028 0a20 2020 2020 2020 2020 2020 2061   (.            a
-00006130: 7761 6974 2061 7379 6e63 5f63 6f6e 7374  wait async_const
-00006140: 7275 6374 5f72 6573 756c 745f 6765 6e65  ruct_result_gene
-00006150: 7261 746f 725f 6d69 6464 6c65 7761 7265  rator_middleware
-00006160: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00006170: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-00006180: 2020 2020 2020 2020 5250 4345 6e64 706f          RPCEndpo
-00006190: 696e 7428 2265 7468 5f67 6574 426c 6f63  int("eth_getBloc
-000061a0: 6b42 794e 756d 6265 7222 293a 206c 616d  kByNumber"): lam
-000061b0: 6264 6120 2a5f 3a20 7b0a 2020 2020 2020  bda *_: {.      
-000061c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000061d0: 2020 2265 7874 7261 4461 7461 223a 2022    "extraData": "
-000061e0: 3078 2220 2b20 2266 6622 202a 2033 330a  0x" + "ff" * 33.
-000061f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006200: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
-00006210: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00006220: 2020 2020 2029 0a20 2020 2020 2020 2029       ).        )
-00006230: 0a20 2020 2020 2020 2061 7379 6e63 5f77  .        async_w
-00006240: 332e 6d69 6464 6c65 7761 7265 5f6f 6e69  3.middleware_oni
-00006250: 6f6e 2e69 6e6a 6563 7428 6173 796e 635f  on.inject(async_
-00006260: 6765 7468 5f70 6f61 5f6d 6964 646c 6577  geth_poa_middlew
-00006270: 6172 652c 2022 706f 6122 2c20 6c61 7965  are, "poa", laye
-00006280: 723d 3029 0a20 2020 2020 2020 2061 7379  r=0).        asy
-00006290: 6e63 5f77 332e 6d69 6464 6c65 7761 7265  nc_w3.middleware
-000062a0: 5f6f 6e69 6f6e 2e69 6e6a 6563 7428 0a20  _onion.inject(. 
-000062b0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000062c0: 6e5f 626c 6f63 6b5f 7769 7468 5f6c 6f6e  n_block_with_lon
-000062d0: 675f 6578 7472 615f 6461 7461 2c20 2265  g_extra_data, "e
-000062e0: 7874 7261 6461 7461 222c 206c 6179 6572  xtradata", layer
-000062f0: 3d30 0a20 2020 2020 2020 2029 0a20 2020  =0.        ).   
-00006300: 2020 2020 2062 6c6f 636b 203d 2061 7761       block = awa
-00006310: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
-00006320: 6765 745f 626c 6f63 6b28 226c 6174 6573  get_block("lates
-00006330: 7422 290a 2020 2020 2020 2020 6173 7365  t").        asse
-00006340: 7274 2022 6578 7472 6144 6174 6122 206e  rt "extraData" n
-00006350: 6f74 2069 6e20 626c 6f63 6b0a 2020 2020  ot in block.    
-00006360: 2020 2020 6173 7365 7274 2062 6c6f 636b      assert block
-00006370: 5b22 7072 6f6f 664f 6641 7574 686f 7269  ["proofOfAuthori
-00006380: 7479 4461 7461 225d 203d 3d20 6222 5c78  tyData"] == b"\x
-00006390: 6666 2220 2a20 3333 0a0a 2020 2020 2020  ff" * 33..      
-000063a0: 2020 2320 636c 6561 6e20 7570 0a20 2020    # clean up.   
-000063b0: 2020 2020 2061 7379 6e63 5f77 332e 6d69       async_w3.mi
-000063c0: 6464 6c65 7761 7265 5f6f 6e69 6f6e 2e72  ddleware_onion.r
-000063d0: 656d 6f76 6528 2270 6f61 2229 0a20 2020  emove("poa").   
-000063e0: 2020 2020 2061 7379 6e63 5f77 332e 6d69       async_w3.mi
-000063f0: 6464 6c65 7761 7265 5f6f 6e69 6f6e 2e72  ddleware_onion.r
-00006400: 656d 6f76 6528 2265 7874 7261 6461 7461  emove("extradata
-00006410: 2229 0a0a 2020 2020 4070 7974 6573 742e  ")..    @pytest.
-00006420: 6d61 726b 2e61 7379 6e63 696f 0a20 2020  mark.asyncio.   
-00006430: 2061 7379 6e63 2064 6566 2074 6573 745f   async def test_
-00006440: 6574 685f 7365 6e64 5f72 6177 5f74 7261  eth_send_raw_tra
-00006450: 6e73 6163 7469 6f6e 2873 656c 662c 2061  nsaction(self, a
-00006460: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
-00006470: 6562 3322 2920 2d3e 204e 6f6e 653a 0a20  eb3") -> None:. 
-00006480: 2020 2020 2020 2023 2070 7269 7661 7465         # private
-00006490: 206b 6579 2030 7833 6332 6162 3465 3866   key 0x3c2ab4e8f
-000064a0: 3137 6137 6465 6131 3931 6238 6339 3931  17a7dea191b8c991
-000064b0: 3532 3236 3630 3132 3664 3638 3130 3339  522660126d681039
-000064c0: 3530 3964 6333 6262 3331 6166 3763 3962  509dc3bb31af7c9b
-000064d0: 6462 3633 3531 380a 2020 2020 2020 2020  db63518.        
-000064e0: 2320 5468 6973 2069 7320 616e 2075 6e66  # This is an unf
-000064f0: 756e 6465 6420 6163 636f 756e 742c 2062  unded account, b
-00006500: 7574 2074 6865 2074 7261 6e73 6163 7469  ut the transacti
-00006510: 6f6e 2068 6173 2061 2030 2067 6173 2070  on has a 0 gas p
-00006520: 7269 6365 2c20 736f 2069 730a 2020 2020  rice, so is.    
-00006530: 2020 2020 2320 7661 6c69 642e 2049 7420      # valid. It 
-00006540: 6e65 7665 7220 6e65 6564 7320 746f 2062  never needs to b
-00006550: 6520 6d69 6e65 642c 2077 6520 6a75 7374  e mined, we just
-00006560: 2077 616e 7420 7468 6520 7472 616e 7361   want the transa
-00006570: 6374 696f 6e20 6861 7368 2062 6163 6b0a  ction hash back.
-00006580: 2020 2020 2020 2020 2320 746f 2063 6f6e          # to con
-00006590: 6669 726d 2e0a 2020 2020 2020 2020 2320  firm..        # 
-000065a0: 7478 203d 207b 2774 6f27 3a20 2730 7830  tx = {'to': '0x0
-000065b0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-000065c0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-000065d0: 3030 3030 3030 3027 2c20 2776 616c 7565  0000000', 'value
-000065e0: 273a 2030 2c20 2027 6e6f 6e63 6527 3a20  ': 0,  'nonce': 
-000065f0: 312c 2027 6761 7327 3a20 3231 3030 302c  1, 'gas': 21000,
-00006600: 2027 6761 7350 7269 6365 273a 2030 2c20   'gasPrice': 0, 
-00006610: 2763 6861 696e 4964 273a 2031 3331 3237  'chainId': 13127
-00006620: 3733 3232 3934 3035 3337 7d20 2023 206e  7322940537}  # n
-00006630: 6f71 613a 2045 3530 310a 2020 2020 2020  oqa: E501.      
-00006640: 2020 2320 4e4f 5445 3a20 6e6f 6e63 653d    # NOTE: nonce=
-00006650: 3120 746f 206d 616b 6520 7478 6e20 756e  1 to make txn un
-00006660: 6971 7565 2066 726f 6d20 7468 6520 6e6f  ique from the no
-00006670: 6e2d 6173 796e 6320 7665 7273 696f 6e20  n-async version 
-00006680: 6f66 2074 6869 7320 7465 7374 0a20 2020  of this test.   
-00006690: 2020 2020 2072 6177 5f74 786e 203d 2048       raw_txn = H
-000066a0: 6578 4279 7465 7328 0a20 2020 2020 2020  exBytes(.       
-000066b0: 2020 2020 2022 3078 6638 3635 3031 3830       "0xf8650180
-000066c0: 3832 3532 3038 3934 3030 3030 3030 3030  8252089400000000
-000066d0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-000066e0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-000066f0: 3830 3830 3836 6565 6361 6334 3636 6531  808086eecac466e1
-00006700: 3135 6130 6666 6464 3432 6437 6465 6534  15a0ffdd42d7dee4
-00006710: 6163 3835 3432 3734 3638 6263 3631 3638  ac85427468bc6168
-00006720: 3132 6534 3934 3332 6532 3835 6534 6538  12e49432e285e4e8
-00006730: 6635 6364 3933 3831 3136 3361 6333 6232  f5cd9381163ac3b2
-00006740: 3831 3038 6130 3465 6336 6230 6438 3965  8108a04ec6b0d89e
-00006750: 6362 6435 6538 3962 3033 3939 6633 3336  cbd5e89b0399f336
-00006760: 6164 3530 6632 3833 6661 6664 3730 6538  ad50f283fafd70e8
-00006770: 3635 3933 3235 3062 6635 6132 6164 6662  6593250bf5a2adfb
-00006780: 3933 6431 3765 2220 2023 206e 6f71 613a  93d17e"  # noqa:
-00006790: 2045 3530 310a 2020 2020 2020 2020 290a   E501.        ).
-000067a0: 2020 2020 2020 2020 6578 7065 6374 6564          expected
-000067b0: 5f68 6173 6820 3d20 4865 7853 7472 280a  _hash = HexStr(.
-000067c0: 2020 2020 2020 2020 2020 2020 2230 7835              "0x5
-000067d0: 3262 3066 6639 6362 3437 3266 3235 3837  2b0ff9cb472f2587
-000067e0: 3266 6138 6563 3661 3632 6661 3539 3435  2fa8ec6a62fa5945
-000067f0: 3466 6332 6165 3739 3031 6366 6363 3663  4fc2ae7901cfcc6c
-00006800: 6338 3964 3039 3666 3439 6238 6663 3122  c89d096f49b8fc1"
-00006810: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00006820: 2020 2074 786e 5f68 6173 6820 3d20 6177     txn_hash = aw
-00006830: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
-00006840: 2e73 656e 645f 7261 775f 7472 616e 7361  .send_raw_transa
-00006850: 6374 696f 6e28 7261 775f 7478 6e29 0a20  ction(raw_txn). 
-00006860: 2020 2020 2020 2061 7373 6572 7420 7478         assert tx
-00006870: 6e5f 6861 7368 203d 3d20 6173 796e 635f  n_hash == async_
-00006880: 7733 2e74 6f5f 6279 7465 7328 6865 7873  w3.to_bytes(hexs
-00006890: 7472 3d65 7870 6563 7465 645f 6861 7368  tr=expected_hash
-000068a0: 290a 0a20 2020 2040 7079 7465 7374 2e6d  )..    @pytest.m
-000068b0: 6172 6b2e 6173 796e 6369 6f0a 2020 2020  ark.asyncio.    
-000068c0: 6173 796e 6320 6465 6620 7465 7374 5f67  async def test_g
-000068d0: 6173 5f70 7269 6365 5f73 7472 6174 6567  as_price_strateg
-000068e0: 795f 6d69 6464 6c65 7761 7265 280a 2020  y_middleware(.  
-000068f0: 2020 2020 2020 7365 6c66 2c20 6173 796e        self, asyn
-00006900: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
-00006910: 222c 2075 6e6c 6f63 6b65 645f 6163 636f  ", unlocked_acco
-00006920: 756e 745f 6475 616c 5f74 7970 653a 2043  unt_dual_type: C
-00006930: 6865 636b 7375 6d41 6464 7265 7373 0a20  hecksumAddress. 
-00006940: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-00006950: 2020 2020 2020 7478 6e5f 7061 7261 6d73        txn_params
-00006960: 3a20 5478 5061 7261 6d73 203d 207b 0a20  : TxParams = {. 
-00006970: 2020 2020 2020 2020 2020 2022 6672 6f6d             "from
-00006980: 223a 2075 6e6c 6f63 6b65 645f 6163 636f  ": unlocked_acco
-00006990: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
-000069a0: 2020 2020 2020 2020 2020 2022 746f 223a             "to":
-000069b0: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-000069c0: 745f 6475 616c 5f74 7970 652c 0a20 2020  t_dual_type,.   
-000069d0: 2020 2020 2020 2020 2022 7661 6c75 6522           "value"
-000069e0: 3a20 5765 6928 3129 2c0a 2020 2020 2020  : Wei(1),.      
-000069f0: 2020 2020 2020 2267 6173 223a 2032 3130        "gas": 210
-00006a00: 3030 2c0a 2020 2020 2020 2020 7d0a 2020  00,.        }.  
-00006a10: 2020 2020 2020 7477 6f5f 6777 6569 5f69        two_gwei_i
-00006a20: 6e5f 7765 6920 3d20 6173 796e 635f 7733  n_wei = async_w3
-00006a30: 2e74 6f5f 7765 6928 322c 2022 6777 6569  .to_wei(2, "gwei
-00006a40: 2229 0a0a 2020 2020 2020 2020 6465 6620  ")..        def 
-00006a50: 6761 735f 7072 6963 655f 7374 7261 7465  gas_price_strate
-00006a60: 6779 2877 333a 2022 5765 6233 222c 2074  gy(w3: "Web3", t
-00006a70: 786e 3a20 5478 5061 7261 6d73 2920 2d3e  xn: TxParams) ->
-00006a80: 2057 6569 3a0a 2020 2020 2020 2020 2020   Wei:.          
-00006a90: 2020 7265 7475 726e 2074 776f 5f67 7765    return two_gwe
-00006aa0: 695f 696e 5f77 6569 0a0a 2020 2020 2020  i_in_wei..      
-00006ab0: 2020 6173 796e 635f 7733 2e65 7468 2e73    async_w3.eth.s
-00006ac0: 6574 5f67 6173 5f70 7269 6365 5f73 7472  et_gas_price_str
-00006ad0: 6174 6567 7928 6761 735f 7072 6963 655f  ategy(gas_price_
-00006ae0: 7374 7261 7465 6779 290a 0a20 2020 2020  strategy)..     
-00006af0: 2020 2074 786e 5f68 6173 6820 3d20 6177     txn_hash = aw
-00006b00: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
-00006b10: 2e73 656e 645f 7472 616e 7361 6374 696f  .send_transactio
-00006b20: 6e28 7478 6e5f 7061 7261 6d73 290a 2020  n(txn_params).  
-00006b30: 2020 2020 2020 7478 6e20 3d20 6177 6169        txn = awai
-00006b40: 7420 6173 796e 635f 7733 2e65 7468 2e67  t async_w3.eth.g
-00006b50: 6574 5f74 7261 6e73 6163 7469 6f6e 2874  et_transaction(t
-00006b60: 786e 5f68 6173 6829 0a0a 2020 2020 2020  xn_hash)..      
-00006b70: 2020 6173 7365 7274 2074 786e 5b22 6761    assert txn["ga
-00006b80: 7350 7269 6365 225d 203d 3d20 7477 6f5f  sPrice"] == two_
-00006b90: 6777 6569 5f69 6e5f 7765 690a 2020 2020  gwei_in_wei.    
-00006ba0: 2020 2020 6173 796e 635f 7733 2e65 7468      async_w3.eth
-00006bb0: 2e73 6574 5f67 6173 5f70 7269 6365 5f73  .set_gas_price_s
-00006bc0: 7472 6174 6567 7928 4e6f 6e65 2920 2023  trategy(None)  #
-00006bd0: 2072 6573 6574 2073 7472 6174 6567 790a   reset strategy.
-00006be0: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
-00006bf0: 6b2e 6173 796e 6369 6f0a 2020 2020 4070  k.asyncio.    @p
-00006c00: 7974 6573 742e 6d61 726b 2e70 6172 616d  ytest.mark.param
-00006c10: 6574 7269 7a65 280a 2020 2020 2020 2020  etrize(.        
-00006c20: 226d 6178 5f66 6565 222c 2028 3130 3030  "max_fee", (1000
-00006c30: 3030 3030 3030 2c20 4e6f 6e65 292c 2069  000000, None), i
-00006c40: 6473 3d5b 2277 6974 685f 6d61 785f 6665  ds=["with_max_fe
-00006c50: 6522 2c20 2277 6974 686f 7574 5f6d 6178  e", "without_max
-00006c60: 5f66 6565 225d 0a20 2020 2029 0a20 2020  _fee"].    ).   
-00006c70: 2061 7379 6e63 2064 6566 2074 6573 745f   async def test_
-00006c80: 6761 735f 7072 6963 655f 6672 6f6d 5f73  gas_price_from_s
-00006c90: 7472 6174 6567 795f 6279 7061 7373 6564  trategy_bypassed
-00006ca0: 5f66 6f72 5f64 796e 616d 6963 5f66 6565  _for_dynamic_fee
-00006cb0: 5f74 786e 280a 2020 2020 2020 2020 7365  _txn(.        se
-00006cc0: 6c66 2c0a 2020 2020 2020 2020 6173 796e  lf,.        asyn
-00006cd0: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
-00006ce0: 222c 0a20 2020 2020 2020 2075 6e6c 6f63  ",.        unloc
-00006cf0: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
-00006d00: 5f74 7970 653a 2043 6865 636b 7375 6d41  _type: ChecksumA
-00006d10: 6464 7265 7373 2c0a 2020 2020 2020 2020  ddress,.        
-00006d20: 6d61 785f 6665 653a 2057 6569 2c0a 2020  max_fee: Wei,.  
-00006d30: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-00006d40: 2020 2020 206d 6178 5f70 7269 6f72 6974       max_priorit
-00006d50: 795f 6665 6520 3d20 6173 796e 635f 7733  y_fee = async_w3
-00006d60: 2e74 6f5f 7765 6928 312c 2022 6777 6569  .to_wei(1, "gwei
-00006d70: 2229 0a20 2020 2020 2020 2074 786e 5f70  ").        txn_p
-00006d80: 6172 616d 733a 2054 7850 6172 616d 7320  arams: TxParams 
-00006d90: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00006da0: 2266 726f 6d22 3a20 756e 6c6f 636b 6564  "from": unlocked
-00006db0: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
-00006dc0: 7065 2c0a 2020 2020 2020 2020 2020 2020  pe,.            
-00006dd0: 2274 6f22 3a20 756e 6c6f 636b 6564 5f61  "to": unlocked_a
-00006de0: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
-00006df0: 2c0a 2020 2020 2020 2020 2020 2020 2276  ,.            "v
-00006e00: 616c 7565 223a 2057 6569 2831 292c 0a20  alue": Wei(1),. 
-00006e10: 2020 2020 2020 2020 2020 2022 6761 7322             "gas"
-00006e20: 3a20 3231 3030 302c 0a20 2020 2020 2020  : 21000,.       
-00006e30: 2020 2020 2022 6d61 7850 7269 6f72 6974       "maxPriorit
-00006e40: 7946 6565 5065 7247 6173 223a 206d 6178  yFeePerGas": max
-00006e50: 5f70 7269 6f72 6974 795f 6665 652c 0a20  _priority_fee,. 
-00006e60: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00006e70: 2069 6620 6d61 785f 6665 6520 6973 206e   if max_fee is n
-00006e80: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00006e90: 2020 2020 2074 786e 5f70 6172 616d 7320       txn_params 
-00006ea0: 3d20 6173 736f 6328 7478 6e5f 7061 7261  = assoc(txn_para
-00006eb0: 6d73 2c20 226d 6178 4665 6550 6572 4761  ms, "maxFeePerGa
-00006ec0: 7322 2c20 6d61 785f 6665 6529 0a0a 2020  s", max_fee)..  
-00006ed0: 2020 2020 2020 6465 6620 6761 735f 7072        def gas_pr
-00006ee0: 6963 655f 7374 7261 7465 6779 2877 333a  ice_strategy(w3:
-00006ef0: 2022 5765 6233 222c 2074 786e 3a20 5478   "Web3", txn: Tx
-00006f00: 5061 7261 6d73 2920 2d3e 2057 6569 3a0a  Params) -> Wei:.
-00006f10: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00006f20: 726e 2061 7379 6e63 5f77 332e 746f 5f77  rn async_w3.to_w
-00006f30: 6569 2832 2c20 2267 7765 6922 290a 0a20  ei(2, "gwei").. 
-00006f40: 2020 2020 2020 2061 7379 6e63 5f77 332e         async_w3.
-00006f50: 6574 682e 7365 745f 6761 735f 7072 6963  eth.set_gas_pric
-00006f60: 655f 7374 7261 7465 6779 2867 6173 5f70  e_strategy(gas_p
-00006f70: 7269 6365 5f73 7472 6174 6567 7929 0a0a  rice_strategy)..
-00006f80: 2020 2020 2020 2020 7478 6e5f 6861 7368          txn_hash
-00006f90: 203d 2061 7761 6974 2061 7379 6e63 5f77   = await async_w
-00006fa0: 332e 6574 682e 7365 6e64 5f74 7261 6e73  3.eth.send_trans
-00006fb0: 6163 7469 6f6e 2874 786e 5f70 6172 616d  action(txn_param
-00006fc0: 7329 0a20 2020 2020 2020 2074 786e 203d  s).        txn =
+000028a0: 2020 2020 2020 7b22 6e61 6d65 223a 2022        {"name": "
+000028b0: 7761 6c6c 6574 222c 2022 7479 7065 223a  wallet", "type":
+000028c0: 2022 6164 6472 6573 7322 7d0a 2020 2020   "address"}.    
+000028d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000028e0: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
+000028f0: 2020 2020 2020 2022 4d61 696c 223a 205b         "Mail": [
+00002900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002910: 2020 2020 2020 2020 207b 226e 616d 6522           {"name"
+00002920: 3a20 2266 726f 6d22 2c20 2274 7970 6522  : "from", "type"
+00002930: 3a20 2250 6572 736f 6e22 7d2c 0a20 2020  : "Person"},.   
+00002940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002950: 2020 2020 207b 226e 616d 6522 3a20 2274       {"name": "t
+00002960: 6f22 2c20 2274 7970 6522 3a20 2250 6572  o", "type": "Per
+00002970: 736f 6e22 7d2c 0a20 2020 2020 2020 2020  son"},.         
+00002980: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+00002990: 226e 616d 6522 3a20 2263 6f6e 7465 6e74  "name": "content
+000029a0: 7322 2c20 2274 7970 6522 3a20 2273 7472  s", "type": "str
+000029b0: 696e 6722 7d0a 2020 2020 2020 2020 2020  ing"}.          
+000029c0: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
+000029d0: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+000029e0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000029f0: 7072 696d 6172 7954 7970 6522 3a20 224d  primaryType": "M
+00002a00: 6169 6c22 2c0a 2020 2020 2020 2020 2020  ail",.          
+00002a10: 2020 2020 2020 2264 6f6d 6169 6e22 3a20        "domain": 
+00002a20: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+00002a30: 2020 2020 2020 226e 616d 6522 3a20 2245        "name": "E
+00002a40: 7468 6572 204d 6169 6c22 2c0a 2020 2020  ther Mail",.    
+00002a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002a60: 2276 6572 7369 6f6e 223a 2022 3122 2c0a  "version": "1",.
+00002a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002a80: 2020 2020 2263 6861 696e 4964 223a 2022      "chainId": "
+00002a90: 3078 3031 222c 0a20 2020 2020 2020 2020  0x01",.         
+00002aa0: 2020 2020 2020 2020 2020 2022 7665 7269             "veri
+00002ab0: 6679 696e 6743 6f6e 7472 6163 7422 3a20  fyingContract": 
+00002ac0: 2230 7843 6343 4363 6363 6343 4343 4363  "0xCcCCccccCCCCc
+00002ad0: 4343 4343 4343 6343 6343 6363 4363 4343  CCCCCCcCcCccCcCC
+00002ae0: 4363 4363 6363 6363 6363 4322 0a20 2020  CcCcccccccC".   
+00002af0: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
+00002b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002b10: 226d 6573 7361 6765 223a 207b 0a20 2020  "message": {.   
+00002b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002b30: 2022 6672 6f6d 223a 207b 0a20 2020 2020   "from": {.     
+00002b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002b50: 2020 2022 6e61 6d65 223a 2022 436f 7722     "name": "Cow"
+00002b60: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00002b70: 2020 2020 2020 2020 2020 2277 616c 6c65            "walle
+00002b80: 7422 3a20 2230 7843 4432 6133 6439 4639  t": "0xCD2a3d9F9
+00002b90: 3338 4531 3343 4439 3437 4563 3035 4162  38E13CD947Ec05Ab
+00002ba0: 4337 4645 3733 3444 6638 4444 3832 3622  C7FE734Df8DD826"
+00002bb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002bc0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+00002bd0: 2020 2020 2020 2020 2020 2020 2274 6f22              "to"
+00002be0: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
+00002bf0: 2020 2020 2020 2020 2020 2020 226e 616d              "nam
+00002c00: 6522 3a20 2242 6f62 222c 0a20 2020 2020  e": "Bob",.     
+00002c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002c20: 2020 2022 7761 6c6c 6574 223a 2022 3078     "wallet": "0x
+00002c30: 6242 6242 4242 4262 6242 4242 6262 6242  bBbBBBBbbBBBbbbB
+00002c40: 6262 4262 6262 6242 4262 4262 6262 6242  bbBbbbbBBbBbbbbB
+00002c50: 6242 6262 4242 6242 220a 2020 2020 2020  bBbbBBbB".      
+00002c60: 2020 2020 2020 2020 2020 2020 2020 7d2c                },
+00002c70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002c80: 2020 2020 2022 636f 6e74 656e 7473 223a       "contents":
+00002c90: 2022 4865 6c6c 6f2c 2042 6f62 2122 0a20   "Hello, Bob!". 
+00002ca0: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00002cb0: 0a20 2020 2020 2020 2020 2020 207d 0a20  .            }. 
+00002cc0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00002cd0: 2020 2061 7379 6e63 5f73 6b69 705f 6966     async_skip_if
+00002ce0: 5f74 6573 7472 7063 2861 7379 6e63 5f77  _testrpc(async_w
+00002cf0: 3329 0a20 2020 2020 2020 2073 6967 6e61  3).        signa
+00002d00: 7475 7265 203d 2048 6578 4279 7465 7328  ture = HexBytes(
+00002d10: 0a20 2020 2020 2020 2020 2020 2061 7761  .            awa
+00002d20: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
+00002d30: 7369 676e 5f74 7970 6564 5f64 6174 6128  sign_typed_data(
+00002d40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002d50: 2061 7379 6e63 5f75 6e6c 6f63 6b65 645f   async_unlocked_
+00002d60: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
+00002d70: 652c 206a 736f 6e2e 6c6f 6164 7328 7661  e, json.loads(va
+00002d80: 6c69 644a 534f 4e4d 6573 7361 6765 290a  lidJSONMessage).
+00002d90: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00002da0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00002db0: 6173 7365 7274 206c 656e 2873 6967 6e61  assert len(signa
+00002dc0: 7475 7265 2920 3d3d 2033 3220 2b20 3332  ture) == 32 + 32
+00002dd0: 202b 2031 0a0a 2020 2020 4070 7974 6573   + 1..    @pytes
+00002de0: 742e 6d61 726b 2e61 7379 6e63 696f 0a20  t.mark.asyncio. 
+00002df0: 2020 2061 7379 6e63 2064 6566 2074 6573     async def tes
+00002e00: 745f 696e 7661 6c69 645f 6574 685f 7369  t_invalid_eth_si
+00002e10: 676e 5f74 7970 6564 5f64 6174 6128 0a20  gn_typed_data(. 
+00002e20: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+00002e30: 2020 2020 2061 7379 6e63 5f77 333a 2022       async_w3: "
+00002e40: 4173 796e 6357 6562 3322 2c0a 2020 2020  AsyncWeb3",.    
+00002e50: 2020 2020 6173 796e 635f 756e 6c6f 636b      async_unlock
+00002e60: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
+00002e70: 7479 7065 3a20 4368 6563 6b73 756d 4164  type: ChecksumAd
+00002e80: 6472 6573 732c 0a20 2020 2020 2020 2061  dress,.        a
+00002e90: 7379 6e63 5f73 6b69 705f 6966 5f74 6573  sync_skip_if_tes
+00002ea0: 7472 7063 3a20 4361 6c6c 6162 6c65 5b5b  trpc: Callable[[
+00002eb0: 2241 7379 6e63 5765 6233 225d 2c20 4e6f  "AsyncWeb3"], No
+00002ec0: 6e65 5d2c 0a20 2020 2029 202d 3e20 4e6f  ne],.    ) -> No
+00002ed0: 6e65 3a0a 2020 2020 2020 2020 6173 796e  ne:.        asyn
+00002ee0: 635f 736b 6970 5f69 665f 7465 7374 7270  c_skip_if_testrp
+00002ef0: 6328 6173 796e 635f 7733 290a 2020 2020  c(async_w3).    
+00002f00: 2020 2020 696e 7661 6c69 645f 7479 7065      invalid_type
+00002f10: 645f 6d65 7373 6167 6520 3d20 2222 220a  d_message = """.
+00002f20: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00002f30: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00002f40: 7970 6573 223a 207b 0a20 2020 2020 2020  ypes": {.       
+00002f50: 2020 2020 2020 2020 2020 2020 2022 4549               "EI
+00002f60: 5037 3132 446f 6d61 696e 223a 205b 0a20  P712Domain": [. 
+00002f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002f80: 2020 2020 2020 207b 226e 616d 6522 3a20         {"name": 
+00002f90: 226e 616d 6522 2c20 2274 7970 6522 3a20  "name", "type": 
+00002fa0: 2273 7472 696e 6722 7d2c 0a20 2020 2020  "string"},.     
+00002fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002fc0: 2020 207b 226e 616d 6522 3a20 2276 6572     {"name": "ver
+00002fd0: 7369 6f6e 222c 2022 7479 7065 223a 2022  sion", "type": "
+00002fe0: 7374 7269 6e67 227d 2c0a 2020 2020 2020  string"},.      
+00002ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003000: 2020 7b22 6e61 6d65 223a 2022 6368 6169    {"name": "chai
+00003010: 6e49 6422 2c20 2274 7970 6522 3a20 2275  nId", "type": "u
+00003020: 696e 7432 3536 227d 2c0a 2020 2020 2020  int256"},.      
+00003030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003040: 2020 7b22 6e61 6d65 223a 2022 7665 7269    {"name": "veri
+00003050: 6679 696e 6743 6f6e 7472 6163 7422 2c20  fyingContract", 
+00003060: 2274 7970 6522 3a20 2261 6464 7265 7373  "type": "address
+00003070: 227d 0a20 2020 2020 2020 2020 2020 2020  "}.             
+00003080: 2020 2020 2020 205d 2c0a 2020 2020 2020         ],.      
+00003090: 2020 2020 2020 2020 2020 2020 2020 2250                "P
+000030a0: 6572 736f 6e22 3a20 5b0a 2020 2020 2020  erson": [.      
+000030b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000030c0: 2020 7b22 6e61 6d65 223a 2022 6e61 6d65    {"name": "name
+000030d0: 222c 2022 7479 7065 223a 2022 7374 7269  ", "type": "stri
+000030e0: 6e67 227d 2c0a 2020 2020 2020 2020 2020  ng"},.          
+000030f0: 2020 2020 2020 2020 2020 2020 2020 7b22                {"
+00003100: 6e61 6d65 223a 2022 7761 6c6c 6574 222c  name": "wallet",
+00003110: 2022 7479 7065 223a 2022 6164 6472 6573   "type": "addres
+00003120: 7322 7d0a 2020 2020 2020 2020 2020 2020  s"}.            
+00003130: 2020 2020 2020 2020 5d2c 0a20 2020 2020          ],.     
+00003140: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00003150: 4d61 696c 223a 205b 0a20 2020 2020 2020  Mail": [.       
+00003160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003170: 207b 226e 616d 6522 3a20 2266 726f 6d22   {"name": "from"
+00003180: 2c20 2274 7970 6522 3a20 2250 6572 736f  , "type": "Perso
+00003190: 6e22 7d2c 0a20 2020 2020 2020 2020 2020  n"},.           
+000031a0: 2020 2020 2020 2020 2020 2020 207b 226e               {"n
+000031b0: 616d 6522 3a20 2274 6f22 2c20 2274 7970  ame": "to", "typ
+000031c0: 6522 3a20 2250 6572 736f 6e5b 325d 227d  e": "Person[2]"}
+000031d0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000031e0: 2020 2020 2020 2020 2020 7b22 6e61 6d65            {"name
+000031f0: 223a 2022 636f 6e74 656e 7473 222c 2022  ": "contents", "
+00003200: 7479 7065 223a 2022 7374 7269 6e67 227d  type": "string"}
+00003210: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003220: 2020 2020 205d 0a20 2020 2020 2020 2020       ].         
+00003230: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+00003240: 2020 2020 2020 2020 2020 2270 7269 6d61            "prima
+00003250: 7279 5479 7065 223a 2022 4d61 696c 222c  ryType": "Mail",
+00003260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003270: 2022 646f 6d61 696e 223a 207b 0a20 2020   "domain": {.   
+00003280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003290: 2022 6e61 6d65 223a 2022 4574 6865 7220   "name": "Ether 
+000032a0: 4d61 696c 222c 0a20 2020 2020 2020 2020  Mail",.         
+000032b0: 2020 2020 2020 2020 2020 2022 7665 7273             "vers
+000032c0: 696f 6e22 3a20 2231 222c 0a20 2020 2020  ion": "1",.     
+000032d0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000032e0: 6368 6169 6e49 6422 3a20 2230 7830 3122  chainId": "0x01"
+000032f0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00003300: 2020 2020 2020 2276 6572 6966 7969 6e67        "verifying
+00003310: 436f 6e74 7261 6374 223a 2022 3078 4363  Contract": "0xCc
+00003320: 4343 6363 6363 4343 4343 6343 4343 4343  CCccccCCCCcCCCCC
+00003330: 4363 4363 4363 6343 6343 4343 6343 6363  CcCcCccCcCCCcCcc
+00003340: 6363 6363 6343 220a 2020 2020 2020 2020  cccccC".        
+00003350: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+00003360: 2020 2020 2020 2020 2020 2022 6d65 7373             "mess
+00003370: 6167 6522 3a20 7b0a 2020 2020 2020 2020  age": {.        
+00003380: 2020 2020 2020 2020 2020 2020 2266 726f              "fro
+00003390: 6d22 3a20 7b0a 2020 2020 2020 2020 2020  m": {.          
+000033a0: 2020 2020 2020 2020 2020 2020 2020 226e                "n
+000033b0: 616d 6522 3a20 2243 6f77 222c 0a20 2020  ame": "Cow",.   
+000033c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000033d0: 2020 2020 2022 7761 6c6c 6574 223a 2022       "wallet": "
+000033e0: 3078 4344 3261 3364 3946 3933 3845 3133  0xCD2a3d9F938E13
+000033f0: 4344 3934 3745 6330 3541 6243 3746 4537  CD947Ec05AbC7FE7
+00003400: 3334 4466 3844 4438 3236 220a 2020 2020  34Df8DD826".    
+00003410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003420: 7d2c 0a20 2020 2020 2020 2020 2020 2020  },.             
+00003430: 2020 2020 2020 2022 746f 223a 205b 7b0a         "to": [{.
+00003440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003450: 2020 2020 2020 2020 226e 616d 6522 3a20          "name": 
+00003460: 2242 6f62 222c 0a20 2020 2020 2020 2020  "Bob",.         
+00003470: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00003480: 7761 6c6c 6574 223a 2022 3078 6242 6242  wallet": "0xbBbB
+00003490: 4242 4262 6242 4242 6262 6242 6262 4262  BBBbbBBBbbbBbbBb
+000034a0: 6262 6242 4262 4262 6262 6242 6242 6262  bbbBBbBbbbbBbBbb
+000034b0: 4242 6242 220a 2020 2020 2020 2020 2020  BBbB".          
+000034c0: 2020 2020 2020 2020 2020 7d5d 2c0a 2020            }],.  
+000034d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000034e0: 2020 2263 6f6e 7465 6e74 7322 3a20 2248    "contents": "H
+000034f0: 656c 6c6f 2c20 426f 6221 220a 2020 2020  ello, Bob!".    
+00003500: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+00003510: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+00003520: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00003530: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
+00003540: 6573 280a 2020 2020 2020 2020 2020 2020  es(.            
+00003550: 5661 6c75 6545 7272 6f72 2c0a 2020 2020  ValueError,.    
+00003560: 2020 2020 2020 2020 6d61 7463 683d 7222          match=r"
+00003570: 2e2a 4578 7065 6374 6564 2032 2069 7465  .*Expected 2 ite
+00003580: 6d73 2066 6f72 2061 7272 6179 2074 7970  ms for array typ
+00003590: 6520 5065 7273 6f6e 5c5b 325c 5d2c 2067  e Person\[2\], g
+000035a0: 6f74 2031 2069 7465 6d73 2e2a 222c 0a20  ot 1 items.*",. 
+000035b0: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
+000035c0: 2020 2020 2020 6177 6169 7420 6173 796e        await asyn
+000035d0: 635f 7733 2e65 7468 2e73 6967 6e5f 7479  c_w3.eth.sign_ty
+000035e0: 7065 645f 6461 7461 280a 2020 2020 2020  ped_data(.      
+000035f0: 2020 2020 2020 2020 2020 6173 796e 635f            async_
+00003600: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+00003610: 5f64 7561 6c5f 7479 7065 2c20 6a73 6f6e  _dual_type, json
+00003620: 2e6c 6f61 6473 2869 6e76 616c 6964 5f74  .loads(invalid_t
+00003630: 7970 6564 5f6d 6573 7361 6765 290a 2020  yped_message).  
+00003640: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
+00003650: 2040 7079 7465 7374 2e6d 6172 6b2e 6173   @pytest.mark.as
+00003660: 796e 6369 6f0a 2020 2020 6173 796e 6320  yncio.    async 
+00003670: 6465 6620 7465 7374 5f61 7379 6e63 5f65  def test_async_e
+00003680: 7468 5f73 6967 6e5f 7472 616e 7361 6374  th_sign_transact
+00003690: 696f 6e5f 6c65 6761 6379 280a 2020 2020  ion_legacy(.    
+000036a0: 2020 2020 7365 6c66 2c20 6173 796e 635f      self, async_
+000036b0: 7733 3a20 2241 7379 6e63 5765 6233 222c  w3: "AsyncWeb3",
+000036c0: 2061 7379 6e63 5f75 6e6c 6f63 6b65 645f   async_unlocked_
+000036d0: 6163 636f 756e 743a 2043 6865 636b 7375  account: Checksu
+000036e0: 6d41 6464 7265 7373 0a20 2020 2029 202d  mAddress.    ) -
+000036f0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00003700: 7478 6e5f 7061 7261 6d73 3a20 5478 5061  txn_params: TxPa
+00003710: 7261 6d73 203d 207b 0a20 2020 2020 2020  rams = {.       
+00003720: 2020 2020 2022 6672 6f6d 223a 2061 7379       "from": asy
+00003730: 6e63 5f75 6e6c 6f63 6b65 645f 6163 636f  nc_unlocked_acco
+00003740: 756e 742c 0a20 2020 2020 2020 2020 2020  unt,.           
+00003750: 2022 746f 223a 2061 7379 6e63 5f75 6e6c   "to": async_unl
+00003760: 6f63 6b65 645f 6163 636f 756e 742c 0a20  ocked_account,. 
+00003770: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
+00003780: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
+00003790: 2020 2020 2020 2020 2267 6173 223a 2032          "gas": 2
+000037a0: 3130 3030 2c0a 2020 2020 2020 2020 2020  1000,.          
+000037b0: 2020 2267 6173 5072 6963 6522 3a20 6177    "gasPrice": aw
+000037c0: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
+000037d0: 2e67 6173 5f70 7269 6365 2c0a 2020 2020  .gas_price,.    
+000037e0: 2020 2020 2020 2020 226e 6f6e 6365 223a          "nonce":
+000037f0: 204e 6f6e 6365 2830 292c 0a20 2020 2020   Nonce(0),.     
+00003800: 2020 207d 0a20 2020 2020 2020 2072 6573     }.        res
+00003810: 756c 7420 3d20 6177 6169 7420 6173 796e  ult = await asyn
+00003820: 635f 7733 2e65 7468 2e73 6967 6e5f 7472  c_w3.eth.sign_tr
+00003830: 616e 7361 6374 696f 6e28 7478 6e5f 7061  ansaction(txn_pa
+00003840: 7261 6d73 290a 2020 2020 2020 2020 7369  rams).        si
+00003850: 676e 6174 6f72 795f 6163 636f 756e 7420  gnatory_account 
+00003860: 3d20 6173 796e 635f 7733 2e65 7468 2e61  = async_w3.eth.a
+00003870: 6363 6f75 6e74 2e72 6563 6f76 6572 5f74  ccount.recover_t
+00003880: 7261 6e73 6163 7469 6f6e 2872 6573 756c  ransaction(resul
+00003890: 745b 2272 6177 225d 290a 2020 2020 2020  t["raw"]).      
+000038a0: 2020 6173 7365 7274 2061 7379 6e63 5f75    assert async_u
+000038b0: 6e6c 6f63 6b65 645f 6163 636f 756e 7420  nlocked_account 
+000038c0: 3d3d 2073 6967 6e61 746f 7279 5f61 6363  == signatory_acc
+000038d0: 6f75 6e74 0a20 2020 2020 2020 2061 7373  ount.        ass
+000038e0: 6572 7420 7265 7375 6c74 5b22 7478 225d  ert result["tx"]
+000038f0: 5b22 746f 225d 203d 3d20 7478 6e5f 7061  ["to"] == txn_pa
+00003900: 7261 6d73 5b22 746f 225d 0a20 2020 2020  rams["to"].     
+00003910: 2020 2061 7373 6572 7420 7265 7375 6c74     assert result
+00003920: 5b22 7478 225d 5b22 7661 6c75 6522 5d20  ["tx"]["value"] 
+00003930: 3d3d 2074 786e 5f70 6172 616d 735b 2276  == txn_params["v
+00003940: 616c 7565 225d 0a20 2020 2020 2020 2061  alue"].        a
+00003950: 7373 6572 7420 7265 7375 6c74 5b22 7478  ssert result["tx
+00003960: 225d 5b22 6761 7322 5d20 3d3d 2074 786e  "]["gas"] == txn
+00003970: 5f70 6172 616d 735b 2267 6173 225d 0a20  _params["gas"]. 
+00003980: 2020 2020 2020 2061 7373 6572 7420 7265         assert re
+00003990: 7375 6c74 5b22 7478 225d 5b22 6761 7350  sult["tx"]["gasP
+000039a0: 7269 6365 225d 203d 3d20 7478 6e5f 7061  rice"] == txn_pa
+000039b0: 7261 6d73 5b22 6761 7350 7269 6365 225d  rams["gasPrice"]
+000039c0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+000039d0: 7265 7375 6c74 5b22 7478 225d 5b22 6e6f  result["tx"]["no
+000039e0: 6e63 6522 5d20 3d3d 2074 786e 5f70 6172  nce"] == txn_par
+000039f0: 616d 735b 226e 6f6e 6365 225d 0a0a 2020  ams["nonce"]..  
+00003a00: 2020 4070 7974 6573 742e 6d61 726b 2e61    @pytest.mark.a
+00003a10: 7379 6e63 696f 0a20 2020 2061 7379 6e63  syncio.    async
+00003a20: 2064 6566 2074 6573 745f 6173 796e 635f   def test_async_
+00003a30: 6574 685f 7369 676e 5f74 7261 6e73 6163  eth_sign_transac
+00003a40: 7469 6f6e 5f68 6578 5f66 6565 7328 0a20  tion_hex_fees(. 
+00003a50: 2020 2020 2020 2073 656c 662c 2061 7379         self, asy
+00003a60: 6e63 5f77 333a 2022 4173 796e 6357 6562  nc_w3: "AsyncWeb
+00003a70: 3322 2c20 6173 796e 635f 756e 6c6f 636b  3", async_unlock
+00003a80: 6564 5f61 6363 6f75 6e74 3a20 4368 6563  ed_account: Chec
+00003a90: 6b73 756d 4164 6472 6573 730a 2020 2020  ksumAddress.    
+00003aa0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+00003ab0: 2020 2074 786e 5f70 6172 616d 733a 2054     txn_params: T
+00003ac0: 7850 6172 616d 7320 3d20 7b0a 2020 2020  xParams = {.    
+00003ad0: 2020 2020 2020 2020 2266 726f 6d22 3a20          "from": 
+00003ae0: 6173 796e 635f 756e 6c6f 636b 6564 5f61  async_unlocked_a
+00003af0: 6363 6f75 6e74 2c0a 2020 2020 2020 2020  ccount,.        
+00003b00: 2020 2020 2274 6f22 3a20 6173 796e 635f      "to": async_
+00003b10: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+00003b20: 2c0a 2020 2020 2020 2020 2020 2020 2276  ,.            "v
+00003b30: 616c 7565 223a 2057 6569 2831 292c 0a20  alue": Wei(1),. 
+00003b40: 2020 2020 2020 2020 2020 2022 6761 7322             "gas"
+00003b50: 3a20 3231 3030 302c 0a20 2020 2020 2020  : 21000,.       
+00003b60: 2020 2020 2022 6d61 7846 6565 5065 7247       "maxFeePerG
+00003b70: 6173 223a 2068 6578 2861 7379 6e63 5f77  as": hex(async_w
+00003b80: 332e 746f 5f77 6569 2832 2c20 2267 7765  3.to_wei(2, "gwe
+00003b90: 6922 2929 2c0a 2020 2020 2020 2020 2020  i")),.          
+00003ba0: 2020 226d 6178 5072 696f 7269 7479 4665    "maxPriorityFe
+00003bb0: 6550 6572 4761 7322 3a20 6865 7828 6173  ePerGas": hex(as
+00003bc0: 796e 635f 7733 2e74 6f5f 7765 6928 312c  ync_w3.to_wei(1,
+00003bd0: 2022 6777 6569 2229 292c 0a20 2020 2020   "gwei")),.     
+00003be0: 2020 2020 2020 2022 6e6f 6e63 6522 3a20         "nonce": 
+00003bf0: 4e6f 6e63 6528 3029 2c0a 2020 2020 2020  Nonce(0),.      
+00003c00: 2020 7d0a 2020 2020 2020 2020 7265 7375    }.        resu
+00003c10: 6c74 203d 2061 7761 6974 2061 7379 6e63  lt = await async
+00003c20: 5f77 332e 6574 682e 7369 676e 5f74 7261  _w3.eth.sign_tra
+00003c30: 6e73 6163 7469 6f6e 2874 786e 5f70 6172  nsaction(txn_par
+00003c40: 616d 7329 0a20 2020 2020 2020 2073 6967  ams).        sig
+00003c50: 6e61 746f 7279 5f61 6363 6f75 6e74 203d  natory_account =
+00003c60: 2061 7379 6e63 5f77 332e 6574 682e 6163   async_w3.eth.ac
+00003c70: 636f 756e 742e 7265 636f 7665 725f 7472  count.recover_tr
+00003c80: 616e 7361 6374 696f 6e28 7265 7375 6c74  ansaction(result
+00003c90: 5b22 7261 7722 5d29 0a20 2020 2020 2020  ["raw"]).       
+00003ca0: 2061 7373 6572 7420 6173 796e 635f 756e   assert async_un
+00003cb0: 6c6f 636b 6564 5f61 6363 6f75 6e74 203d  locked_account =
+00003cc0: 3d20 7369 676e 6174 6f72 795f 6163 636f  = signatory_acco
+00003cd0: 756e 740a 2020 2020 2020 2020 6173 7365  unt.        asse
+00003ce0: 7274 2072 6573 756c 745b 2274 7822 5d5b  rt result["tx"][
+00003cf0: 2274 6f22 5d20 3d3d 2074 786e 5f70 6172  "to"] == txn_par
+00003d00: 616d 735b 2274 6f22 5d0a 2020 2020 2020  ams["to"].      
+00003d10: 2020 6173 7365 7274 2072 6573 756c 745b    assert result[
+00003d20: 2274 7822 5d5b 2276 616c 7565 225d 203d  "tx"]["value"] =
+00003d30: 3d20 7478 6e5f 7061 7261 6d73 5b22 7661  = txn_params["va
+00003d40: 6c75 6522 5d0a 2020 2020 2020 2020 6173  lue"].        as
+00003d50: 7365 7274 2072 6573 756c 745b 2274 7822  sert result["tx"
+00003d60: 5d5b 2267 6173 225d 203d 3d20 7478 6e5f  ]["gas"] == txn_
+00003d70: 7061 7261 6d73 5b22 6761 7322 5d0a 2020  params["gas"].  
+00003d80: 2020 2020 2020 6173 7365 7274 2072 6573        assert res
+00003d90: 756c 745b 2274 7822 5d5b 226d 6178 4665  ult["tx"]["maxFe
+00003da0: 6550 6572 4761 7322 5d20 3d3d 2069 6e74  ePerGas"] == int
+00003db0: 2873 7472 2874 786e 5f70 6172 616d 735b  (str(txn_params[
+00003dc0: 226d 6178 4665 6550 6572 4761 7322 5d29  "maxFeePerGas"])
+00003dd0: 2c20 3136 290a 2020 2020 2020 2020 6173  , 16).        as
+00003de0: 7365 7274 2072 6573 756c 745b 2274 7822  sert result["tx"
+00003df0: 5d5b 226d 6178 5072 696f 7269 7479 4665  ]["maxPriorityFe
+00003e00: 6550 6572 4761 7322 5d20 3d3d 2069 6e74  ePerGas"] == int
+00003e10: 280a 2020 2020 2020 2020 2020 2020 7374  (.            st
+00003e20: 7228 7478 6e5f 7061 7261 6d73 5b22 6d61  r(txn_params["ma
+00003e30: 7850 7269 6f72 6974 7946 6565 5065 7247  xPriorityFeePerG
+00003e40: 6173 225d 292c 2031 360a 2020 2020 2020  as"]), 16.      
+00003e50: 2020 290a 2020 2020 2020 2020 6173 7365    ).        asse
+00003e60: 7274 2072 6573 756c 745b 2274 7822 5d5b  rt result["tx"][
+00003e70: 226e 6f6e 6365 225d 203d 3d20 7478 6e5f  "nonce"] == txn_
+00003e80: 7061 7261 6d73 5b22 6e6f 6e63 6522 5d0a  params["nonce"].
+00003e90: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
+00003ea0: 6b2e 6173 796e 6369 6f0a 2020 2020 4070  k.asyncio.    @p
+00003eb0: 7974 6573 742e 6d61 726b 2e78 6661 696c  ytest.mark.xfail
+00003ec0: 280a 2020 2020 2020 2020 7265 6173 6f6e  (.        reason
+00003ed0: 3d22 6173 796e 6320 6e61 6d65 5f74 6f5f  ="async name_to_
+00003ee0: 6164 6472 6573 735f 6d69 6464 6c65 7761  address_middlewa
+00003ef0: 7265 2068 6173 206e 6f74 2062 6565 6e20  re has not been 
+00003f00: 696d 706c 656d 656e 7465 6420 7965 7422  implemented yet"
+00003f10: 0a20 2020 2029 0a20 2020 2061 7379 6e63  .    ).    async
+00003f20: 2064 6566 2074 6573 745f 6173 796e 635f   def test_async_
+00003f30: 6574 685f 7369 676e 5f74 7261 6e73 6163  eth_sign_transac
+00003f40: 7469 6f6e 5f65 6e73 5f6e 616d 6573 280a  tion_ens_names(.
+00003f50: 2020 2020 2020 2020 7365 6c66 2c20 6173          self, as
+00003f60: 796e 635f 7733 3a20 2241 7379 6e63 5765  ync_w3: "AsyncWe
+00003f70: 6233 222c 2061 7379 6e63 5f75 6e6c 6f63  b3", async_unloc
+00003f80: 6b65 645f 6163 636f 756e 743a 2043 6865  ked_account: Che
+00003f90: 636b 7375 6d41 6464 7265 7373 0a20 2020  cksumAddress.   
+00003fa0: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
+00003fb0: 2020 2020 7769 7468 2065 6e73 5f61 6464      with ens_add
+00003fc0: 7265 7373 6573 2861 7379 6e63 5f77 332c  resses(async_w3,
+00003fd0: 207b 2275 6e6c 6f63 6b65 642d 6163 636f   {"unlocked-acco
+00003fe0: 756e 742e 6574 6822 3a20 6173 796e 635f  unt.eth": async_
+00003ff0: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+00004000: 7d29 3a0a 2020 2020 2020 2020 2020 2020  }):.            
+00004010: 7478 6e5f 7061 7261 6d73 3a20 5478 5061  txn_params: TxPa
+00004020: 7261 6d73 203d 207b 0a20 2020 2020 2020  rams = {.       
+00004030: 2020 2020 2020 2020 2022 6672 6f6d 223a           "from":
+00004040: 2022 756e 6c6f 636b 6564 2d61 6363 6f75   "unlocked-accou
+00004050: 6e74 2e65 7468 222c 0a20 2020 2020 2020  nt.eth",.       
+00004060: 2020 2020 2020 2020 2022 746f 223a 2022           "to": "
+00004070: 756e 6c6f 636b 6564 2d61 6363 6f75 6e74  unlocked-account
+00004080: 2e65 7468 222c 0a20 2020 2020 2020 2020  .eth",.         
+00004090: 2020 2020 2020 2022 7661 6c75 6522 3a20         "value": 
+000040a0: 5765 6928 3129 2c0a 2020 2020 2020 2020  Wei(1),.        
+000040b0: 2020 2020 2020 2020 2267 6173 223a 2032          "gas": 2
+000040c0: 3130 3030 2c0a 2020 2020 2020 2020 2020  1000,.          
+000040d0: 2020 2020 2020 226d 6178 4665 6550 6572        "maxFeePer
+000040e0: 4761 7322 3a20 6173 796e 635f 7733 2e74  Gas": async_w3.t
+000040f0: 6f5f 7765 6928 322c 2022 6777 6569 2229  o_wei(2, "gwei")
+00004100: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00004110: 2020 226d 6178 5072 696f 7269 7479 4665    "maxPriorityFe
+00004120: 6550 6572 4761 7322 3a20 6173 796e 635f  ePerGas": async_
+00004130: 7733 2e74 6f5f 7765 6928 312c 2022 6777  w3.to_wei(1, "gw
+00004140: 6569 2229 2c0a 2020 2020 2020 2020 2020  ei"),.          
+00004150: 2020 2020 2020 226e 6f6e 6365 223a 204e        "nonce": N
+00004160: 6f6e 6365 2830 292c 0a20 2020 2020 2020  once(0),.       
+00004170: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+00004180: 2020 2072 6573 756c 7420 3d20 6177 6169     result = awai
+00004190: 7420 6173 796e 635f 7733 2e65 7468 2e73  t async_w3.eth.s
+000041a0: 6967 6e5f 7472 616e 7361 6374 696f 6e28  ign_transaction(
+000041b0: 7478 6e5f 7061 7261 6d73 290a 2020 2020  txn_params).    
+000041c0: 2020 2020 2020 2020 7369 676e 6174 6f72          signator
+000041d0: 795f 6163 636f 756e 7420 3d20 6173 796e  y_account = asyn
+000041e0: 635f 7733 2e65 7468 2e61 6363 6f75 6e74  c_w3.eth.account
+000041f0: 2e72 6563 6f76 6572 5f74 7261 6e73 6163  .recover_transac
+00004200: 7469 6f6e 2872 6573 756c 745b 2272 6177  tion(result["raw
+00004210: 225d 290a 2020 2020 2020 2020 2020 2020  "]).            
+00004220: 6173 7365 7274 2061 7379 6e63 5f75 6e6c  assert async_unl
+00004230: 6f63 6b65 645f 6163 636f 756e 7420 3d3d  ocked_account ==
+00004240: 2073 6967 6e61 746f 7279 5f61 6363 6f75   signatory_accou
+00004250: 6e74 0a20 2020 2020 2020 2020 2020 2061  nt.            a
+00004260: 7373 6572 7420 7265 7375 6c74 5b22 7478  ssert result["tx
+00004270: 225d 5b22 746f 225d 203d 3d20 6173 796e  "]["to"] == asyn
+00004280: 635f 756e 6c6f 636b 6564 5f61 6363 6f75  c_unlocked_accou
+00004290: 6e74 0a20 2020 2020 2020 2020 2020 2061  nt.            a
+000042a0: 7373 6572 7420 7265 7375 6c74 5b22 7478  ssert result["tx
+000042b0: 225d 5b22 7661 6c75 6522 5d20 3d3d 2074  "]["value"] == t
+000042c0: 786e 5f70 6172 616d 735b 2276 616c 7565  xn_params["value
+000042d0: 225d 0a20 2020 2020 2020 2020 2020 2061  "].            a
+000042e0: 7373 6572 7420 7265 7375 6c74 5b22 7478  ssert result["tx
+000042f0: 225d 5b22 6761 7322 5d20 3d3d 2074 786e  "]["gas"] == txn
+00004300: 5f70 6172 616d 735b 2267 6173 225d 0a20  _params["gas"]. 
+00004310: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+00004320: 7420 7265 7375 6c74 5b22 7478 225d 5b22  t result["tx"]["
+00004330: 6d61 7846 6565 5065 7247 6173 225d 203d  maxFeePerGas"] =
+00004340: 3d20 7478 6e5f 7061 7261 6d73 5b22 6d61  = txn_params["ma
+00004350: 7846 6565 5065 7247 6173 225d 0a20 2020  xFeePerGas"].   
+00004360: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
+00004370: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00004380: 2020 7265 7375 6c74 5b22 7478 225d 5b22    result["tx"]["
+00004390: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
+000043a0: 7247 6173 225d 0a20 2020 2020 2020 2020  rGas"].         
+000043b0: 2020 2020 2020 203d 3d20 7478 6e5f 7061         == txn_pa
+000043c0: 7261 6d73 5b22 6d61 7850 7269 6f72 6974  rams["maxPriorit
+000043d0: 7946 6565 5065 7247 6173 225d 0a20 2020  yFeePerGas"].   
+000043e0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+000043f0: 2020 2020 2020 2061 7373 6572 7420 7265         assert re
+00004400: 7375 6c74 5b22 7478 225d 5b22 6e6f 6e63  sult["tx"]["nonc
+00004410: 6522 5d20 3d3d 2074 786e 5f70 6172 616d  e"] == txn_param
+00004420: 735b 226e 6f6e 6365 225d 0a0a 2020 2020  s["nonce"]..    
+00004430: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
+00004440: 6e63 696f 0a20 2020 2061 7379 6e63 2064  ncio.    async d
+00004450: 6566 2074 6573 745f 6574 685f 7365 6e64  ef test_eth_send
+00004460: 5f74 7261 6e73 6163 7469 6f6e 280a 2020  _transaction(.  
+00004470: 2020 2020 2020 7365 6c66 2c20 6173 796e        self, asyn
+00004480: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
+00004490: 222c 2061 7379 6e63 5f75 6e6c 6f63 6b65  ", async_unlocke
+000044a0: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
+000044b0: 7970 653a 2043 6865 636b 7375 6d41 6464  ype: ChecksumAdd
+000044c0: 7265 7373 0a20 2020 2029 202d 3e20 4e6f  ress.    ) -> No
+000044d0: 6e65 3a0a 2020 2020 2020 2020 7478 6e5f  ne:.        txn_
+000044e0: 7061 7261 6d73 3a20 5478 5061 7261 6d73  params: TxParams
+000044f0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+00004500: 2022 6672 6f6d 223a 2061 7379 6e63 5f75   "from": async_u
+00004510: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
+00004520: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
+00004530: 2020 2020 2020 2022 746f 223a 2061 7379         "to": asy
+00004540: 6e63 5f75 6e6c 6f63 6b65 645f 6163 636f  nc_unlocked_acco
+00004550: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
+00004560: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
+00004570: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
+00004580: 2020 2020 2020 2020 2267 6173 223a 2032          "gas": 2
+00004590: 3130 3030 2c0a 2020 2020 2020 2020 2020  1000,.          
+000045a0: 2020 226d 6178 4665 6550 6572 4761 7322    "maxFeePerGas"
+000045b0: 3a20 6173 796e 635f 7733 2e74 6f5f 7765  : async_w3.to_we
+000045c0: 6928 332c 2022 6777 6569 2229 2c0a 2020  i(3, "gwei"),.  
+000045d0: 2020 2020 2020 2020 2020 226d 6178 5072            "maxPr
+000045e0: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
+000045f0: 3a20 6173 796e 635f 7733 2e74 6f5f 7765  : async_w3.to_we
+00004600: 6928 312c 2022 6777 6569 2229 2c0a 2020  i(1, "gwei"),.  
+00004610: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00004620: 7478 6e5f 6861 7368 203d 2061 7761 6974  txn_hash = await
+00004630: 2061 7379 6e63 5f77 332e 6574 682e 7365   async_w3.eth.se
+00004640: 6e64 5f74 7261 6e73 6163 7469 6f6e 2874  nd_transaction(t
+00004650: 786e 5f70 6172 616d 7329 0a20 2020 2020  xn_params).     
+00004660: 2020 2074 786e 203d 2061 7761 6974 2061     txn = await a
+00004670: 7379 6e63 5f77 332e 6574 682e 6765 745f  sync_w3.eth.get_
+00004680: 7472 616e 7361 6374 696f 6e28 7478 6e5f  transaction(txn_
+00004690: 6861 7368 290a 0a20 2020 2020 2020 2061  hash)..        a
+000046a0: 7373 6572 7420 6973 5f73 616d 655f 6164  ssert is_same_ad
+000046b0: 6472 6573 7328 7478 6e5b 2266 726f 6d22  dress(txn["from"
+000046c0: 5d2c 2063 6173 7428 4368 6563 6b73 756d  ], cast(Checksum
+000046d0: 4164 6472 6573 732c 2074 786e 5f70 6172  Address, txn_par
+000046e0: 616d 735b 2266 726f 6d22 5d29 290a 2020  ams["from"])).  
+000046f0: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+00004700: 7361 6d65 5f61 6464 7265 7373 2874 786e  same_address(txn
+00004710: 5b22 746f 225d 2c20 6361 7374 2843 6865  ["to"], cast(Che
+00004720: 636b 7375 6d41 6464 7265 7373 2c20 7478  cksumAddress, tx
+00004730: 6e5f 7061 7261 6d73 5b22 746f 225d 2929  n_params["to"]))
+00004740: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00004750: 7478 6e5b 2276 616c 7565 225d 203d 3d20  txn["value"] == 
+00004760: 310a 2020 2020 2020 2020 6173 7365 7274  1.        assert
+00004770: 2074 786e 5b22 6761 7322 5d20 3d3d 2032   txn["gas"] == 2
+00004780: 3130 3030 0a20 2020 2020 2020 2061 7373  1000.        ass
+00004790: 6572 7420 7478 6e5b 226d 6178 4665 6550  ert txn["maxFeeP
+000047a0: 6572 4761 7322 5d20 3d3d 2074 786e 5f70  erGas"] == txn_p
+000047b0: 6172 616d 735b 226d 6178 4665 6550 6572  arams["maxFeePer
+000047c0: 4761 7322 5d0a 2020 2020 2020 2020 6173  Gas"].        as
+000047d0: 7365 7274 2074 786e 5b22 6d61 7850 7269  sert txn["maxPri
+000047e0: 6f72 6974 7946 6565 5065 7247 6173 225d  orityFeePerGas"]
+000047f0: 203d 3d20 7478 6e5f 7061 7261 6d73 5b22   == txn_params["
+00004800: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
+00004810: 7247 6173 225d 0a20 2020 2020 2020 2061  rGas"].        a
+00004820: 7373 6572 7420 7478 6e5b 2267 6173 5072  ssert txn["gasPr
+00004830: 6963 6522 5d20 3d3d 2074 786e 5f70 6172  ice"] == txn_par
+00004840: 616d 735b 226d 6178 4665 6550 6572 4761  ams["maxFeePerGa
+00004850: 7322 5d0a 0a20 2020 2040 7079 7465 7374  s"]..    @pytest
+00004860: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
+00004870: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
+00004880: 5f65 7468 5f73 656e 645f 7472 616e 7361  _eth_send_transa
+00004890: 6374 696f 6e5f 6465 6661 756c 745f 6665  ction_default_fe
+000048a0: 6573 280a 2020 2020 2020 2020 7365 6c66  es(.        self
+000048b0: 2c20 6173 796e 635f 7733 3a20 2241 7379  , async_w3: "Asy
+000048c0: 6e63 5765 6233 222c 2061 7379 6e63 5f75  ncWeb3", async_u
+000048d0: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
+000048e0: 6475 616c 5f74 7970 653a 2043 6865 636b  dual_type: Check
+000048f0: 7375 6d41 6464 7265 7373 0a20 2020 2029  sumAddress.    )
+00004900: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+00004910: 2020 7478 6e5f 7061 7261 6d73 3a20 5478    txn_params: Tx
+00004920: 5061 7261 6d73 203d 207b 0a20 2020 2020  Params = {.     
+00004930: 2020 2020 2020 2022 6672 6f6d 223a 2061         "from": a
+00004940: 7379 6e63 5f75 6e6c 6f63 6b65 645f 6163  sync_unlocked_ac
+00004950: 636f 756e 745f 6475 616c 5f74 7970 652c  count_dual_type,
+00004960: 0a20 2020 2020 2020 2020 2020 2022 746f  .            "to
+00004970: 223a 2061 7379 6e63 5f75 6e6c 6f63 6b65  ": async_unlocke
+00004980: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
+00004990: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
+000049a0: 2022 7661 6c75 6522 3a20 5765 6928 3129   "value": Wei(1)
+000049b0: 2c0a 2020 2020 2020 2020 2020 2020 2267  ,.            "g
+000049c0: 6173 223a 2032 3130 3030 2c0a 2020 2020  as": 21000,.    
+000049d0: 2020 2020 7d0a 2020 2020 2020 2020 7478      }.        tx
+000049e0: 6e5f 6861 7368 203d 2061 7761 6974 2061  n_hash = await a
+000049f0: 7379 6e63 5f77 332e 6574 682e 7365 6e64  sync_w3.eth.send
+00004a00: 5f74 7261 6e73 6163 7469 6f6e 2874 786e  _transaction(txn
+00004a10: 5f70 6172 616d 7329 0a20 2020 2020 2020  _params).       
+00004a20: 2074 786e 203d 2061 7761 6974 2061 7379   txn = await asy
+00004a30: 6e63 5f77 332e 6574 682e 6765 745f 7472  nc_w3.eth.get_tr
+00004a40: 616e 7361 6374 696f 6e28 7478 6e5f 6861  ansaction(txn_ha
+00004a50: 7368 290a 0a20 2020 2020 2020 2061 7373  sh)..        ass
+00004a60: 6572 7420 6973 5f73 616d 655f 6164 6472  ert is_same_addr
+00004a70: 6573 7328 7478 6e5b 2266 726f 6d22 5d2c  ess(txn["from"],
+00004a80: 2063 6173 7428 4368 6563 6b73 756d 4164   cast(ChecksumAd
+00004a90: 6472 6573 732c 2074 786e 5f70 6172 616d  dress, txn_param
+00004aa0: 735b 2266 726f 6d22 5d29 290a 2020 2020  s["from"])).    
+00004ab0: 2020 2020 6173 7365 7274 2069 735f 7361      assert is_sa
+00004ac0: 6d65 5f61 6464 7265 7373 2874 786e 5b22  me_address(txn["
+00004ad0: 746f 225d 2c20 6361 7374 2843 6865 636b  to"], cast(Check
+00004ae0: 7375 6d41 6464 7265 7373 2c20 7478 6e5f  sumAddress, txn_
+00004af0: 7061 7261 6d73 5b22 746f 225d 2929 0a20  params["to"])). 
+00004b00: 2020 2020 2020 2061 7373 6572 7420 7478         assert tx
+00004b10: 6e5b 2276 616c 7565 225d 203d 3d20 310a  n["value"] == 1.
+00004b20: 2020 2020 2020 2020 6173 7365 7274 2074          assert t
+00004b30: 786e 5b22 6761 7322 5d20 3d3d 2032 3130  xn["gas"] == 210
+00004b40: 3030 0a20 2020 2020 2020 2061 7373 6572  00.        asser
+00004b50: 7420 7478 6e5b 226d 6178 5072 696f 7269  t txn["maxPriori
+00004b60: 7479 4665 6550 6572 4761 7322 5d20 3d3d  tyFeePerGas"] ==
+00004b70: 2031 202a 2031 302a 2a39 0a20 2020 2020   1 * 10**9.     
+00004b80: 2020 2061 7373 6572 7420 7478 6e5b 226d     assert txn["m
+00004b90: 6178 4665 6550 6572 4761 7322 5d20 3e3d  axFeePerGas"] >=
+00004ba0: 2031 202a 2031 302a 2a39 0a20 2020 2020   1 * 10**9.     
+00004bb0: 2020 2061 7373 6572 7420 7478 6e5b 2267     assert txn["g
+00004bc0: 6173 5072 6963 6522 5d20 3d3d 2074 786e  asPrice"] == txn
+00004bd0: 5b22 6d61 7846 6565 5065 7247 6173 225d  ["maxFeePerGas"]
+00004be0: 0a0a 2020 2020 4070 7974 6573 742e 6d61  ..    @pytest.ma
+00004bf0: 726b 2e61 7379 6e63 696f 0a20 2020 2061  rk.asyncio.    a
+00004c00: 7379 6e63 2064 6566 2074 6573 745f 6574  sync def test_et
+00004c10: 685f 7365 6e64 5f74 7261 6e73 6163 7469  h_send_transacti
+00004c20: 6f6e 5f68 6578 5f66 6565 7328 0a20 2020  on_hex_fees(.   
+00004c30: 2020 2020 2073 656c 662c 2061 7379 6e63       self, async
+00004c40: 5f77 333a 2022 4173 796e 6357 6562 3322  _w3: "AsyncWeb3"
+00004c50: 2c20 6173 796e 635f 756e 6c6f 636b 6564  , async_unlocked
+00004c60: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
+00004c70: 7065 3a20 4368 6563 6b73 756d 4164 6472  pe: ChecksumAddr
+00004c80: 6573 730a 2020 2020 2920 2d3e 204e 6f6e  ess.    ) -> Non
+00004c90: 653a 0a20 2020 2020 2020 2074 786e 5f70  e:.        txn_p
+00004ca0: 6172 616d 733a 2054 7850 6172 616d 7320  arams: TxParams 
+00004cb0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+00004cc0: 2266 726f 6d22 3a20 6173 796e 635f 756e  "from": async_un
+00004cd0: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
+00004ce0: 7561 6c5f 7479 7065 2c0a 2020 2020 2020  ual_type,.      
+00004cf0: 2020 2020 2020 2274 6f22 3a20 6173 796e        "to": asyn
+00004d00: 635f 756e 6c6f 636b 6564 5f61 6363 6f75  c_unlocked_accou
+00004d10: 6e74 5f64 7561 6c5f 7479 7065 2c0a 2020  nt_dual_type,.  
+00004d20: 2020 2020 2020 2020 2020 2276 616c 7565            "value
+00004d30: 223a 2057 6569 2831 292c 0a20 2020 2020  ": Wei(1),.     
+00004d40: 2020 2020 2020 2022 6761 7322 3a20 3231         "gas": 21
+00004d50: 3030 302c 0a20 2020 2020 2020 2020 2020  000,.           
+00004d60: 2022 6d61 7846 6565 5065 7247 6173 223a   "maxFeePerGas":
+00004d70: 2068 6578 2832 3530 202a 2031 302a 2a39   hex(250 * 10**9
+00004d80: 292c 0a20 2020 2020 2020 2020 2020 2022  ),.            "
+00004d90: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
+00004da0: 7247 6173 223a 2068 6578 2832 202a 2031  rGas": hex(2 * 1
+00004db0: 302a 2a39 292c 0a20 2020 2020 2020 207d  0**9),.        }
+00004dc0: 0a20 2020 2020 2020 2074 786e 5f68 6173  .        txn_has
+00004dd0: 6820 3d20 6177 6169 7420 6173 796e 635f  h = await async_
+00004de0: 7733 2e65 7468 2e73 656e 645f 7472 616e  w3.eth.send_tran
+00004df0: 7361 6374 696f 6e28 7478 6e5f 7061 7261  saction(txn_para
+00004e00: 6d73 290a 2020 2020 2020 2020 7478 6e20  ms).        txn 
+00004e10: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
+00004e20: 2e65 7468 2e67 6574 5f74 7261 6e73 6163  .eth.get_transac
+00004e30: 7469 6f6e 2874 786e 5f68 6173 6829 0a0a  tion(txn_hash)..
+00004e40: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+00004e50: 735f 7361 6d65 5f61 6464 7265 7373 2874  s_same_address(t
+00004e60: 786e 5b22 6672 6f6d 225d 2c20 6361 7374  xn["from"], cast
+00004e70: 2843 6865 636b 7375 6d41 6464 7265 7373  (ChecksumAddress
+00004e80: 2c20 7478 6e5f 7061 7261 6d73 5b22 6672  , txn_params["fr
+00004e90: 6f6d 225d 2929 0a20 2020 2020 2020 2061  om"])).        a
+00004ea0: 7373 6572 7420 6973 5f73 616d 655f 6164  ssert is_same_ad
+00004eb0: 6472 6573 7328 7478 6e5b 2274 6f22 5d2c  dress(txn["to"],
+00004ec0: 2063 6173 7428 4368 6563 6b73 756d 4164   cast(ChecksumAd
+00004ed0: 6472 6573 732c 2074 786e 5f70 6172 616d  dress, txn_param
+00004ee0: 735b 2274 6f22 5d29 290a 2020 2020 2020  s["to"])).      
+00004ef0: 2020 6173 7365 7274 2074 786e 5b22 7661    assert txn["va
+00004f00: 6c75 6522 5d20 3d3d 2031 0a20 2020 2020  lue"] == 1.     
+00004f10: 2020 2061 7373 6572 7420 7478 6e5b 2267     assert txn["g
+00004f20: 6173 225d 203d 3d20 3231 3030 300a 2020  as"] == 21000.  
+00004f30: 2020 2020 2020 6173 7365 7274 2074 786e        assert txn
+00004f40: 5b22 6d61 7846 6565 5065 7247 6173 225d  ["maxFeePerGas"]
+00004f50: 203d 3d20 3235 3020 2a20 3130 2a2a 390a   == 250 * 10**9.
+00004f60: 2020 2020 2020 2020 6173 7365 7274 2074          assert t
+00004f70: 786e 5b22 6d61 7850 7269 6f72 6974 7946  xn["maxPriorityF
+00004f80: 6565 5065 7247 6173 225d 203d 3d20 3220  eePerGas"] == 2 
+00004f90: 2a20 3130 2a2a 390a 0a20 2020 2040 7079  * 10**9..    @py
+00004fa0: 7465 7374 2e6d 6172 6b2e 6173 796e 6369  test.mark.asynci
+00004fb0: 6f0a 2020 2020 6173 796e 6320 6465 6620  o.    async def 
+00004fc0: 7465 7374 5f65 7468 5f73 656e 645f 7472  test_eth_send_tr
+00004fd0: 616e 7361 6374 696f 6e5f 6e6f 5f67 6173  ansaction_no_gas
+00004fe0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+00004ff0: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
+00005000: 5765 6233 222c 2061 7379 6e63 5f75 6e6c  Web3", async_unl
+00005010: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
+00005020: 616c 5f74 7970 653a 2043 6865 636b 7375  al_type: Checksu
+00005030: 6d41 6464 7265 7373 0a20 2020 2029 202d  mAddress.    ) -
+00005040: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00005050: 7478 6e5f 7061 7261 6d73 3a20 5478 5061  txn_params: TxPa
+00005060: 7261 6d73 203d 207b 0a20 2020 2020 2020  rams = {.       
+00005070: 2020 2020 2022 6672 6f6d 223a 2061 7379       "from": asy
+00005080: 6e63 5f75 6e6c 6f63 6b65 645f 6163 636f  nc_unlocked_acco
+00005090: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
+000050a0: 2020 2020 2020 2020 2020 2022 746f 223a             "to":
+000050b0: 2061 7379 6e63 5f75 6e6c 6f63 6b65 645f   async_unlocked_
+000050c0: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
+000050d0: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
+000050e0: 7661 6c75 6522 3a20 5765 6928 3129 2c0a  value": Wei(1),.
+000050f0: 2020 2020 2020 2020 2020 2020 226d 6178              "max
+00005100: 4665 6550 6572 4761 7322 3a20 5765 6928  FeePerGas": Wei(
+00005110: 3235 3020 2a20 3130 2a2a 3929 2c0a 2020  250 * 10**9),.  
+00005120: 2020 2020 2020 2020 2020 226d 6178 5072            "maxPr
+00005130: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
+00005140: 3a20 5765 6928 3220 2a20 3130 2a2a 3929  : Wei(2 * 10**9)
+00005150: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+00005160: 2020 2020 7478 6e5f 6861 7368 203d 2061      txn_hash = a
+00005170: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
+00005180: 682e 7365 6e64 5f74 7261 6e73 6163 7469  h.send_transacti
+00005190: 6f6e 2874 786e 5f70 6172 616d 7329 0a20  on(txn_params). 
+000051a0: 2020 2020 2020 2074 786e 203d 2061 7761         txn = awa
+000051b0: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
+000051c0: 6765 745f 7472 616e 7361 6374 696f 6e28  get_transaction(
+000051d0: 7478 6e5f 6861 7368 290a 0a20 2020 2020  txn_hash)..     
+000051e0: 2020 2061 7373 6572 7420 6973 5f73 616d     assert is_sam
+000051f0: 655f 6164 6472 6573 7328 7478 6e5b 2266  e_address(txn["f
+00005200: 726f 6d22 5d2c 2063 6173 7428 4368 6563  rom"], cast(Chec
+00005210: 6b73 756d 4164 6472 6573 732c 2074 786e  ksumAddress, txn
+00005220: 5f70 6172 616d 735b 2266 726f 6d22 5d29  _params["from"])
+00005230: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+00005240: 2069 735f 7361 6d65 5f61 6464 7265 7373   is_same_address
+00005250: 2874 786e 5b22 746f 225d 2c20 6361 7374  (txn["to"], cast
+00005260: 2843 6865 636b 7375 6d41 6464 7265 7373  (ChecksumAddress
+00005270: 2c20 7478 6e5f 7061 7261 6d73 5b22 746f  , txn_params["to
+00005280: 225d 2929 0a20 2020 2020 2020 2061 7373  "])).        ass
+00005290: 6572 7420 7478 6e5b 2276 616c 7565 225d  ert txn["value"]
+000052a0: 203d 3d20 310a 2020 2020 2020 2020 6173   == 1.        as
+000052b0: 7365 7274 2074 786e 5b22 6761 7322 5d20  sert txn["gas"] 
+000052c0: 3d3d 2031 3231 3030 3020 2023 2032 3130  == 121000  # 210
+000052d0: 3030 202b 2062 7566 6665 720a 0a20 2020  00 + buffer..   
+000052e0: 2040 7079 7465 7374 2e6d 6172 6b2e 6173   @pytest.mark.as
+000052f0: 796e 6369 6f0a 2020 2020 6173 796e 6320  yncio.    async 
+00005300: 6465 6620 7465 7374 5f65 7468 5f73 656e  def test_eth_sen
+00005310: 645f 7472 616e 7361 6374 696f 6e5f 7769  d_transaction_wi
+00005320: 7468 5f67 6173 5f70 7269 6365 280a 2020  th_gas_price(.  
+00005330: 2020 2020 2020 7365 6c66 2c20 6173 796e        self, asyn
+00005340: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
+00005350: 222c 2061 7379 6e63 5f75 6e6c 6f63 6b65  ", async_unlocke
+00005360: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
+00005370: 7970 653a 2043 6865 636b 7375 6d41 6464  ype: ChecksumAdd
+00005380: 7265 7373 0a20 2020 2029 202d 3e20 4e6f  ress.    ) -> No
+00005390: 6e65 3a0a 2020 2020 2020 2020 7478 6e5f  ne:.        txn_
+000053a0: 7061 7261 6d73 3a20 5478 5061 7261 6d73  params: TxParams
+000053b0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+000053c0: 2022 6672 6f6d 223a 2061 7379 6e63 5f75   "from": async_u
+000053d0: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
+000053e0: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
+000053f0: 2020 2020 2020 2022 746f 223a 2061 7379         "to": asy
+00005400: 6e63 5f75 6e6c 6f63 6b65 645f 6163 636f  nc_unlocked_acco
+00005410: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
+00005420: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
+00005430: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
+00005440: 2020 2020 2020 2020 2267 6173 223a 2032          "gas": 2
+00005450: 3130 3030 2c0a 2020 2020 2020 2020 2020  1000,.          
+00005460: 2020 2267 6173 5072 6963 6522 3a20 5765    "gasPrice": We
+00005470: 6928 3129 2c0a 2020 2020 2020 2020 2020  i(1),.          
+00005480: 2020 226d 6178 4665 6550 6572 4761 7322    "maxFeePerGas"
+00005490: 3a20 5765 6928 3235 3020 2a20 3130 2a2a  : Wei(250 * 10**
+000054a0: 3929 2c0a 2020 2020 2020 2020 2020 2020  9),.            
+000054b0: 226d 6178 5072 696f 7269 7479 4665 6550  "maxPriorityFeeP
+000054c0: 6572 4761 7322 3a20 5765 6928 3220 2a20  erGas": Wei(2 * 
+000054d0: 3130 2a2a 3929 2c0a 2020 2020 2020 2020  10**9),.        
+000054e0: 7d0a 2020 2020 2020 2020 7769 7468 2070  }.        with p
+000054f0: 7974 6573 742e 7261 6973 6573 2854 7261  ytest.raises(Tra
+00005500: 6e73 6163 7469 6f6e 5479 7065 4d69 736d  nsactionTypeMism
+00005510: 6174 6368 293a 0a20 2020 2020 2020 2020  atch):.         
+00005520: 2020 2061 7761 6974 2061 7379 6e63 5f77     await async_w
+00005530: 332e 6574 682e 7365 6e64 5f74 7261 6e73  3.eth.send_trans
+00005540: 6163 7469 6f6e 2874 786e 5f70 6172 616d  action(txn_param
+00005550: 7329 0a0a 2020 2020 4070 7974 6573 742e  s)..    @pytest.
+00005560: 6d61 726b 2e61 7379 6e63 696f 0a20 2020  mark.asyncio.   
+00005570: 2061 7379 6e63 2064 6566 2074 6573 745f   async def test_
+00005580: 6574 685f 7365 6e64 5f74 7261 6e73 6163  eth_send_transac
+00005590: 7469 6f6e 5f6e 6f5f 7072 696f 7269 7479  tion_no_priority
+000055a0: 5f66 6565 280a 2020 2020 2020 2020 7365  _fee(.        se
+000055b0: 6c66 2c20 6173 796e 635f 7733 3a20 2241  lf, async_w3: "A
+000055c0: 7379 6e63 5765 6233 222c 2061 7379 6e63  syncWeb3", async
+000055d0: 5f75 6e6c 6f63 6b65 645f 6163 636f 756e  _unlocked_accoun
+000055e0: 745f 6475 616c 5f74 7970 653a 2043 6865  t_dual_type: Che
+000055f0: 636b 7375 6d41 6464 7265 7373 0a20 2020  cksumAddress.   
+00005600: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
+00005610: 2020 2020 7478 6e5f 7061 7261 6d73 3a20      txn_params: 
+00005620: 5478 5061 7261 6d73 203d 207b 0a20 2020  TxParams = {.   
+00005630: 2020 2020 2020 2020 2022 6672 6f6d 223a           "from":
+00005640: 2061 7379 6e63 5f75 6e6c 6f63 6b65 645f   async_unlocked_
+00005650: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
+00005660: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
+00005670: 746f 223a 2061 7379 6e63 5f75 6e6c 6f63  to": async_unloc
+00005680: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+00005690: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
+000056a0: 2020 2022 7661 6c75 6522 3a20 5765 6928     "value": Wei(
+000056b0: 3129 2c0a 2020 2020 2020 2020 2020 2020  1),.            
+000056c0: 2267 6173 223a 2032 3130 3030 2c0a 2020  "gas": 21000,.  
+000056d0: 2020 2020 2020 2020 2020 226d 6178 4665            "maxFe
+000056e0: 6550 6572 4761 7322 3a20 5765 6928 3235  ePerGas": Wei(25
+000056f0: 3020 2a20 3130 2a2a 3929 2c0a 2020 2020  0 * 10**9),.    
+00005700: 2020 2020 7d0a 2020 2020 2020 2020 7769      }.        wi
+00005710: 7468 2070 7974 6573 742e 7261 6973 6573  th pytest.raises
+00005720: 280a 2020 2020 2020 2020 2020 2020 496e  (.            In
+00005730: 7661 6c69 6454 7261 6e73 6163 7469 6f6e  validTransaction
+00005740: 2c20 6d61 7463 683d 226d 6178 5072 696f  , match="maxPrio
+00005750: 7269 7479 4665 6550 6572 4761 7320 6d75  rityFeePerGas mu
+00005760: 7374 2062 6520 6465 6669 6e65 6422 0a20  st be defined". 
+00005770: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
+00005780: 2020 2020 2020 6177 6169 7420 6173 796e        await asyn
+00005790: 635f 7733 2e65 7468 2e73 656e 645f 7472  c_w3.eth.send_tr
+000057a0: 616e 7361 6374 696f 6e28 7478 6e5f 7061  ansaction(txn_pa
+000057b0: 7261 6d73 290a 0a20 2020 2040 7079 7465  rams)..    @pyte
+000057c0: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
+000057d0: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
+000057e0: 7374 5f65 7468 5f73 656e 645f 7472 616e  st_eth_send_tran
+000057f0: 7361 6374 696f 6e5f 6e6f 5f6d 6178 5f66  saction_no_max_f
+00005800: 6565 280a 2020 2020 2020 2020 7365 6c66  ee(.        self
+00005810: 2c20 6173 796e 635f 7733 3a20 2241 7379  , async_w3: "Asy
+00005820: 6e63 5765 6233 222c 2061 7379 6e63 5f75  ncWeb3", async_u
+00005830: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
+00005840: 6475 616c 5f74 7970 653a 2043 6865 636b  dual_type: Check
+00005850: 7375 6d41 6464 7265 7373 0a20 2020 2029  sumAddress.    )
+00005860: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+00005870: 2020 6d61 7850 7269 6f72 6974 7946 6565    maxPriorityFee
+00005880: 5065 7247 6173 203d 2061 7379 6e63 5f77  PerGas = async_w
+00005890: 332e 746f 5f77 6569 2832 2c20 2267 7765  3.to_wei(2, "gwe
+000058a0: 6922 290a 2020 2020 2020 2020 7478 6e5f  i").        txn_
+000058b0: 7061 7261 6d73 3a20 5478 5061 7261 6d73  params: TxParams
+000058c0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+000058d0: 2022 6672 6f6d 223a 2061 7379 6e63 5f75   "from": async_u
+000058e0: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
+000058f0: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
+00005900: 2020 2020 2020 2022 746f 223a 2061 7379         "to": asy
+00005910: 6e63 5f75 6e6c 6f63 6b65 645f 6163 636f  nc_unlocked_acco
+00005920: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
+00005930: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
+00005940: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
+00005950: 2020 2020 2020 2020 2267 6173 223a 2032          "gas": 2
+00005960: 3130 3030 2c0a 2020 2020 2020 2020 2020  1000,.          
+00005970: 2020 226d 6178 5072 696f 7269 7479 4665    "maxPriorityFe
+00005980: 6550 6572 4761 7322 3a20 6d61 7850 7269  ePerGas": maxPri
+00005990: 6f72 6974 7946 6565 5065 7247 6173 2c0a  orityFeePerGas,.
+000059a0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+000059b0: 2020 7478 6e5f 6861 7368 203d 2061 7761    txn_hash = awa
+000059c0: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
+000059d0: 7365 6e64 5f74 7261 6e73 6163 7469 6f6e  send_transaction
+000059e0: 2874 786e 5f70 6172 616d 7329 0a20 2020  (txn_params).   
+000059f0: 2020 2020 2074 786e 203d 2061 7761 6974       txn = await
+00005a00: 2061 7379 6e63 5f77 332e 6574 682e 6765   async_w3.eth.ge
+00005a10: 745f 7472 616e 7361 6374 696f 6e28 7478  t_transaction(tx
+00005a20: 6e5f 6861 7368 290a 0a20 2020 2020 2020  n_hash)..       
+00005a30: 2061 7373 6572 7420 6973 5f73 616d 655f   assert is_same_
+00005a40: 6164 6472 6573 7328 7478 6e5b 2266 726f  address(txn["fro
+00005a50: 6d22 5d2c 2063 6173 7428 4368 6563 6b73  m"], cast(Checks
+00005a60: 756d 4164 6472 6573 732c 2074 786e 5f70  umAddress, txn_p
+00005a70: 6172 616d 735b 2266 726f 6d22 5d29 290a  arams["from"])).
+00005a80: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+00005a90: 735f 7361 6d65 5f61 6464 7265 7373 2874  s_same_address(t
+00005aa0: 786e 5b22 746f 225d 2c20 6361 7374 2843  xn["to"], cast(C
+00005ab0: 6865 636b 7375 6d41 6464 7265 7373 2c20  hecksumAddress, 
+00005ac0: 7478 6e5f 7061 7261 6d73 5b22 746f 225d  txn_params["to"]
+00005ad0: 2929 0a20 2020 2020 2020 2061 7373 6572  )).        asser
+00005ae0: 7420 7478 6e5b 2276 616c 7565 225d 203d  t txn["value"] =
+00005af0: 3d20 310a 2020 2020 2020 2020 6173 7365  = 1.        asse
+00005b00: 7274 2074 786e 5b22 6761 7322 5d20 3d3d  rt txn["gas"] ==
+00005b10: 2032 3130 3030 0a0a 2020 2020 2020 2020   21000..        
+00005b20: 626c 6f63 6b20 3d20 6177 6169 7420 6173  block = await as
+00005b30: 796e 635f 7733 2e65 7468 2e67 6574 5f62  ync_w3.eth.get_b
+00005b40: 6c6f 636b 2822 6c61 7465 7374 2229 0a20  lock("latest"). 
+00005b50: 2020 2020 2020 2061 7373 6572 7420 7478         assert tx
+00005b60: 6e5b 226d 6178 4665 6550 6572 4761 7322  n["maxFeePerGas"
+00005b70: 5d20 3d3d 206d 6178 5072 696f 7269 7479  ] == maxPriority
+00005b80: 4665 6550 6572 4761 7320 2b20 3220 2a20  FeePerGas + 2 * 
+00005b90: 626c 6f63 6b5b 2262 6173 6546 6565 5065  block["baseFeePe
+00005ba0: 7247 6173 225d 0a0a 2020 2020 4070 7974  rGas"]..    @pyt
+00005bb0: 6573 742e 6d61 726b 2e61 7379 6e63 696f  est.mark.asyncio
+00005bc0: 0a20 2020 2061 7379 6e63 2064 6566 2074  .    async def t
+00005bd0: 6573 745f 6574 685f 7365 6e64 5f74 7261  est_eth_send_tra
+00005be0: 6e73 6163 7469 6f6e 5f6d 6178 5f66 6565  nsaction_max_fee
+00005bf0: 5f6c 6573 735f 7468 616e 5f74 6970 280a  _less_than_tip(.
+00005c00: 2020 2020 2020 2020 7365 6c66 2c20 6173          self, as
+00005c10: 796e 635f 7733 3a20 2241 7379 6e63 5765  ync_w3: "AsyncWe
+00005c20: 6233 222c 2061 7379 6e63 5f75 6e6c 6f63  b3", async_unloc
+00005c30: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+00005c40: 5f74 7970 653a 2043 6865 636b 7375 6d41  _type: ChecksumA
+00005c50: 6464 7265 7373 0a20 2020 2029 202d 3e20  ddress.    ) -> 
+00005c60: 4e6f 6e65 3a0a 2020 2020 2020 2020 7478  None:.        tx
+00005c70: 6e5f 7061 7261 6d73 3a20 5478 5061 7261  n_params: TxPara
+00005c80: 6d73 203d 207b 0a20 2020 2020 2020 2020  ms = {.         
+00005c90: 2020 2022 6672 6f6d 223a 2061 7379 6e63     "from": async
+00005ca0: 5f75 6e6c 6f63 6b65 645f 6163 636f 756e  _unlocked_accoun
+00005cb0: 745f 6475 616c 5f74 7970 652c 0a20 2020  t_dual_type,.   
+00005cc0: 2020 2020 2020 2020 2022 746f 223a 2061           "to": a
+00005cd0: 7379 6e63 5f75 6e6c 6f63 6b65 645f 6163  sync_unlocked_ac
+00005ce0: 636f 756e 745f 6475 616c 5f74 7970 652c  count_dual_type,
+00005cf0: 0a20 2020 2020 2020 2020 2020 2022 7661  .            "va
+00005d00: 6c75 6522 3a20 5765 6928 3129 2c0a 2020  lue": Wei(1),.  
+00005d10: 2020 2020 2020 2020 2020 2267 6173 223a            "gas":
+00005d20: 2032 3130 3030 2c0a 2020 2020 2020 2020   21000,.        
+00005d30: 2020 2020 226d 6178 4665 6550 6572 4761      "maxFeePerGa
+00005d40: 7322 3a20 5765 6928 3120 2a20 3130 2a2a  s": Wei(1 * 10**
+00005d50: 3929 2c0a 2020 2020 2020 2020 2020 2020  9),.            
+00005d60: 226d 6178 5072 696f 7269 7479 4665 6550  "maxPriorityFeeP
+00005d70: 6572 4761 7322 3a20 5765 6928 3220 2a20  erGas": Wei(2 * 
+00005d80: 3130 2a2a 3929 2c0a 2020 2020 2020 2020  10**9),.        
+00005d90: 7d0a 2020 2020 2020 2020 7769 7468 2070  }.        with p
+00005da0: 7974 6573 742e 7261 6973 6573 280a 2020  ytest.raises(.  
+00005db0: 2020 2020 2020 2020 2020 496e 7661 6c69            Invali
+00005dc0: 6454 7261 6e73 6163 7469 6f6e 2c20 6d61  dTransaction, ma
+00005dd0: 7463 683d 226d 6178 4665 6550 6572 4761  tch="maxFeePerGa
+00005de0: 7320 6d75 7374 2062 6520 3e3d 206d 6178  s must be >= max
+00005df0: 5072 696f 7269 7479 4665 6550 6572 4761  PriorityFeePerGa
+00005e00: 7322 0a20 2020 2020 2020 2029 3a0a 2020  s".        ):.  
+00005e10: 2020 2020 2020 2020 2020 6177 6169 7420            await 
+00005e20: 6173 796e 635f 7733 2e65 7468 2e73 656e  async_w3.eth.sen
+00005e30: 645f 7472 616e 7361 6374 696f 6e28 7478  d_transaction(tx
+00005e40: 6e5f 7061 7261 6d73 290a 0a20 2020 2040  n_params)..    @
+00005e50: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
+00005e60: 6369 6f0a 2020 2020 6173 796e 6320 6465  cio.    async de
+00005e70: 6620 7465 7374 5f76 616c 6964 6174 696f  f test_validatio
+00005e80: 6e5f 6d69 6464 6c65 7761 7265 5f63 6861  n_middleware_cha
+00005e90: 696e 5f69 645f 6d69 736d 6174 6368 280a  in_id_mismatch(.
+00005ea0: 2020 2020 2020 2020 7365 6c66 2c20 6173          self, as
+00005eb0: 796e 635f 7733 3a20 2241 7379 6e63 5765  ync_w3: "AsyncWe
+00005ec0: 6233 222c 2061 7379 6e63 5f75 6e6c 6f63  b3", async_unloc
+00005ed0: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+00005ee0: 5f74 7970 653a 2043 6865 636b 7375 6d41  _type: ChecksumA
+00005ef0: 6464 7265 7373 0a20 2020 2029 202d 3e20  ddress.    ) -> 
+00005f00: 4e6f 6e65 3a0a 2020 2020 2020 2020 7772  None:.        wr
+00005f10: 6f6e 675f 6368 6169 6e5f 6964 203d 2031  ong_chain_id = 1
+00005f20: 3233 3435 3637 3839 300a 2020 2020 2020  234567890.      
+00005f30: 2020 6163 7475 616c 5f63 6861 696e 5f69    actual_chain_i
+00005f40: 6420 3d20 6177 6169 7420 6173 796e 635f  d = await async_
+00005f50: 7733 2e65 7468 2e63 6861 696e 5f69 640a  w3.eth.chain_id.
+00005f60: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
+00005f70: 616d 733a 2054 7850 6172 616d 7320 3d20  ams: TxParams = 
+00005f80: 7b0a 2020 2020 2020 2020 2020 2020 2266  {.            "f
+00005f90: 726f 6d22 3a20 6173 796e 635f 756e 6c6f  rom": async_unlo
+00005fa0: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
+00005fb0: 6c5f 7479 7065 2c0a 2020 2020 2020 2020  l_type,.        
+00005fc0: 2020 2020 2274 6f22 3a20 6173 796e 635f      "to": async_
+00005fd0: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+00005fe0: 5f64 7561 6c5f 7479 7065 2c0a 2020 2020  _dual_type,.    
+00005ff0: 2020 2020 2020 2020 2276 616c 7565 223a          "value":
+00006000: 2057 6569 2831 292c 0a20 2020 2020 2020   Wei(1),.       
+00006010: 2020 2020 2022 6761 7322 3a20 5765 6928       "gas": Wei(
+00006020: 3231 3030 3029 2c0a 2020 2020 2020 2020  21000),.        
+00006030: 2020 2020 226d 6178 4665 6550 6572 4761      "maxFeePerGa
+00006040: 7322 3a20 6173 796e 635f 7733 2e74 6f5f  s": async_w3.to_
+00006050: 7765 6928 322c 2022 6777 6569 2229 2c0a  wei(2, "gwei"),.
+00006060: 2020 2020 2020 2020 2020 2020 226d 6178              "max
+00006070: 5072 696f 7269 7479 4665 6550 6572 4761  PriorityFeePerGa
+00006080: 7322 3a20 6173 796e 635f 7733 2e74 6f5f  s": async_w3.to_
+00006090: 7765 6928 312c 2022 6777 6569 2229 2c0a  wei(1, "gwei"),.
+000060a0: 2020 2020 2020 2020 2020 2020 2263 6861              "cha
+000060b0: 696e 4964 223a 2077 726f 6e67 5f63 6861  inId": wrong_cha
+000060c0: 696e 5f69 642c 0a20 2020 2020 2020 207d  in_id,.        }
+000060d0: 0a20 2020 2020 2020 2077 6974 6820 7079  .        with py
+000060e0: 7465 7374 2e72 6169 7365 7328 0a20 2020  test.raises(.   
+000060f0: 2020 2020 2020 2020 2057 6562 3356 616c           Web3Val
+00006100: 6964 6174 696f 6e45 7272 6f72 2c0a 2020  idationError,.  
+00006110: 2020 2020 2020 2020 2020 6d61 7463 683d            match=
+00006120: 6622 5468 6520 7472 616e 7361 6374 696f  f"The transactio
+00006130: 6e20 6465 636c 6172 6564 2063 6861 696e  n declared chain
+00006140: 2049 4420 7b77 726f 6e67 5f63 6861 696e   ID {wrong_chain
+00006150: 5f69 647d 2c20 220a 2020 2020 2020 2020  _id}, ".        
+00006160: 2020 2020 6622 6275 7420 7468 6520 636f      f"but the co
+00006170: 6e6e 6563 7465 6420 6e6f 6465 2069 7320  nnected node is 
+00006180: 6f6e 207b 6163 7475 616c 5f63 6861 696e  on {actual_chain
+00006190: 5f69 647d 222c 0a20 2020 2020 2020 2029  _id}",.        )
+000061a0: 3a0a 2020 2020 2020 2020 2020 2020 6177  :.            aw
+000061b0: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
+000061c0: 2e73 656e 645f 7472 616e 7361 6374 696f  .send_transactio
+000061d0: 6e28 7478 6e5f 7061 7261 6d73 290a 0a20  n(txn_params).. 
+000061e0: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
+000061f0: 6173 796e 6369 6f0a 2020 2020 6173 796e  asyncio.    asyn
+00006200: 6320 6465 6620 7465 7374 5f67 6574 685f  c def test_geth_
+00006210: 706f 615f 6d69 6464 6c65 7761 7265 2873  poa_middleware(s
+00006220: 656c 662c 2061 7379 6e63 5f77 333a 2022  elf, async_w3: "
+00006230: 4173 796e 6357 6562 3322 2920 2d3e 204e  AsyncWeb3") -> N
+00006240: 6f6e 653a 0a20 2020 2020 2020 2072 6574  one:.        ret
+00006250: 7572 6e5f 626c 6f63 6b5f 7769 7468 5f6c  urn_block_with_l
+00006260: 6f6e 675f 6578 7472 615f 6461 7461 203d  ong_extra_data =
+00006270: 2028 0a20 2020 2020 2020 2020 2020 2061   (.            a
+00006280: 7761 6974 2061 7379 6e63 5f63 6f6e 7374  wait async_const
+00006290: 7275 6374 5f72 6573 756c 745f 6765 6e65  ruct_result_gene
+000062a0: 7261 746f 725f 6d69 6464 6c65 7761 7265  rator_middleware
+000062b0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000062c0: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+000062d0: 2020 2020 2020 2020 5250 4345 6e64 706f          RPCEndpo
+000062e0: 696e 7428 2265 7468 5f67 6574 426c 6f63  int("eth_getBloc
+000062f0: 6b42 794e 756d 6265 7222 293a 206c 616d  kByNumber"): lam
+00006300: 6264 6120 2a5f 3a20 7b0a 2020 2020 2020  bda *_: {.      
+00006310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006320: 2020 2265 7874 7261 4461 7461 223a 2022    "extraData": "
+00006330: 3078 2220 2b20 2266 6622 202a 2033 330a  0x" + "ff" * 33.
+00006340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006350: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
+00006360: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00006370: 2020 2020 2029 0a20 2020 2020 2020 2029       ).        )
+00006380: 0a20 2020 2020 2020 2061 7379 6e63 5f77  .        async_w
+00006390: 332e 6d69 6464 6c65 7761 7265 5f6f 6e69  3.middleware_oni
+000063a0: 6f6e 2e69 6e6a 6563 7428 6173 796e 635f  on.inject(async_
+000063b0: 6765 7468 5f70 6f61 5f6d 6964 646c 6577  geth_poa_middlew
+000063c0: 6172 652c 2022 706f 6122 2c20 6c61 7965  are, "poa", laye
+000063d0: 723d 3029 0a20 2020 2020 2020 2061 7379  r=0).        asy
+000063e0: 6e63 5f77 332e 6d69 6464 6c65 7761 7265  nc_w3.middleware
+000063f0: 5f6f 6e69 6f6e 2e69 6e6a 6563 7428 0a20  _onion.inject(. 
+00006400: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00006410: 6e5f 626c 6f63 6b5f 7769 7468 5f6c 6f6e  n_block_with_lon
+00006420: 675f 6578 7472 615f 6461 7461 2c20 2265  g_extra_data, "e
+00006430: 7874 7261 6461 7461 222c 206c 6179 6572  xtradata", layer
+00006440: 3d30 0a20 2020 2020 2020 2029 0a20 2020  =0.        ).   
+00006450: 2020 2020 2062 6c6f 636b 203d 2061 7761       block = awa
+00006460: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
+00006470: 6765 745f 626c 6f63 6b28 226c 6174 6573  get_block("lates
+00006480: 7422 290a 2020 2020 2020 2020 6173 7365  t").        asse
+00006490: 7274 2022 6578 7472 6144 6174 6122 206e  rt "extraData" n
+000064a0: 6f74 2069 6e20 626c 6f63 6b0a 2020 2020  ot in block.    
+000064b0: 2020 2020 6173 7365 7274 2062 6c6f 636b      assert block
+000064c0: 5b22 7072 6f6f 664f 6641 7574 686f 7269  ["proofOfAuthori
+000064d0: 7479 4461 7461 225d 203d 3d20 6222 5c78  tyData"] == b"\x
+000064e0: 6666 2220 2a20 3333 0a0a 2020 2020 2020  ff" * 33..      
+000064f0: 2020 2320 636c 6561 6e20 7570 0a20 2020    # clean up.   
+00006500: 2020 2020 2061 7379 6e63 5f77 332e 6d69       async_w3.mi
+00006510: 6464 6c65 7761 7265 5f6f 6e69 6f6e 2e72  ddleware_onion.r
+00006520: 656d 6f76 6528 2270 6f61 2229 0a20 2020  emove("poa").   
+00006530: 2020 2020 2061 7379 6e63 5f77 332e 6d69       async_w3.mi
+00006540: 6464 6c65 7761 7265 5f6f 6e69 6f6e 2e72  ddleware_onion.r
+00006550: 656d 6f76 6528 2265 7874 7261 6461 7461  emove("extradata
+00006560: 2229 0a0a 2020 2020 4070 7974 6573 742e  ")..    @pytest.
+00006570: 6d61 726b 2e61 7379 6e63 696f 0a20 2020  mark.asyncio.   
+00006580: 2061 7379 6e63 2064 6566 2074 6573 745f   async def test_
+00006590: 6574 685f 7365 6e64 5f72 6177 5f74 7261  eth_send_raw_tra
+000065a0: 6e73 6163 7469 6f6e 2873 656c 662c 2061  nsaction(self, a
+000065b0: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
+000065c0: 6562 3322 2920 2d3e 204e 6f6e 653a 0a20  eb3") -> None:. 
+000065d0: 2020 2020 2020 2023 2070 7269 7661 7465         # private
+000065e0: 206b 6579 2030 7833 6332 6162 3465 3866   key 0x3c2ab4e8f
+000065f0: 3137 6137 6465 6131 3931 6238 6339 3931  17a7dea191b8c991
+00006600: 3532 3236 3630 3132 3664 3638 3130 3339  522660126d681039
+00006610: 3530 3964 6333 6262 3331 6166 3763 3962  509dc3bb31af7c9b
+00006620: 6462 3633 3531 380a 2020 2020 2020 2020  db63518.        
+00006630: 2320 5468 6973 2069 7320 616e 2075 6e66  # This is an unf
+00006640: 756e 6465 6420 6163 636f 756e 742c 2062  unded account, b
+00006650: 7574 2074 6865 2074 7261 6e73 6163 7469  ut the transacti
+00006660: 6f6e 2068 6173 2061 2030 2067 6173 2070  on has a 0 gas p
+00006670: 7269 6365 2c20 736f 2069 730a 2020 2020  rice, so is.    
+00006680: 2020 2020 2320 7661 6c69 642e 2049 7420      # valid. It 
+00006690: 6e65 7665 7220 6e65 6564 7320 746f 2062  never needs to b
+000066a0: 6520 6d69 6e65 642c 2077 6520 6a75 7374  e mined, we just
+000066b0: 2077 616e 7420 7468 6520 7472 616e 7361   want the transa
+000066c0: 6374 696f 6e20 6861 7368 2062 6163 6b0a  ction hash back.
+000066d0: 2020 2020 2020 2020 2320 746f 2063 6f6e          # to con
+000066e0: 6669 726d 2e0a 2020 2020 2020 2020 2320  firm..        # 
+000066f0: 7478 203d 207b 2774 6f27 3a20 2730 7830  tx = {'to': '0x0
+00006700: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+00006710: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+00006720: 3030 3030 3030 3027 2c20 2776 616c 7565  0000000', 'value
+00006730: 273a 2030 2c20 2027 6e6f 6e63 6527 3a20  ': 0,  'nonce': 
+00006740: 312c 2027 6761 7327 3a20 3231 3030 302c  1, 'gas': 21000,
+00006750: 2027 6761 7350 7269 6365 273a 2030 2c20   'gasPrice': 0, 
+00006760: 2763 6861 696e 4964 273a 2031 3331 3237  'chainId': 13127
+00006770: 3733 3232 3934 3035 3337 7d20 2023 206e  7322940537}  # n
+00006780: 6f71 613a 2045 3530 310a 2020 2020 2020  oqa: E501.      
+00006790: 2020 2320 4e4f 5445 3a20 6e6f 6e63 653d    # NOTE: nonce=
+000067a0: 3120 746f 206d 616b 6520 7478 6e20 756e  1 to make txn un
+000067b0: 6971 7565 2066 726f 6d20 7468 6520 6e6f  ique from the no
+000067c0: 6e2d 6173 796e 6320 7665 7273 696f 6e20  n-async version 
+000067d0: 6f66 2074 6869 7320 7465 7374 0a20 2020  of this test.   
+000067e0: 2020 2020 2072 6177 5f74 786e 203d 2048       raw_txn = H
+000067f0: 6578 4279 7465 7328 0a20 2020 2020 2020  exBytes(.       
+00006800: 2020 2020 2022 3078 6638 3635 3031 3830       "0xf8650180
+00006810: 3832 3532 3038 3934 3030 3030 3030 3030  8252089400000000
+00006820: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+00006830: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+00006840: 3830 3830 3836 6565 6361 6334 3636 6531  808086eecac466e1
+00006850: 3135 6130 6666 6464 3432 6437 6465 6534  15a0ffdd42d7dee4
+00006860: 6163 3835 3432 3734 3638 6263 3631 3638  ac85427468bc6168
+00006870: 3132 6534 3934 3332 6532 3835 6534 6538  12e49432e285e4e8
+00006880: 6635 6364 3933 3831 3136 3361 6333 6232  f5cd9381163ac3b2
+00006890: 3831 3038 6130 3465 6336 6230 6438 3965  8108a04ec6b0d89e
+000068a0: 6362 6435 6538 3962 3033 3939 6633 3336  cbd5e89b0399f336
+000068b0: 6164 3530 6632 3833 6661 6664 3730 6538  ad50f283fafd70e8
+000068c0: 3635 3933 3235 3062 6635 6132 6164 6662  6593250bf5a2adfb
+000068d0: 3933 6431 3765 2220 2023 206e 6f71 613a  93d17e"  # noqa:
+000068e0: 2045 3530 310a 2020 2020 2020 2020 290a   E501.        ).
+000068f0: 2020 2020 2020 2020 6578 7065 6374 6564          expected
+00006900: 5f68 6173 6820 3d20 4865 7853 7472 280a  _hash = HexStr(.
+00006910: 2020 2020 2020 2020 2020 2020 2230 7835              "0x5
+00006920: 3262 3066 6639 6362 3437 3266 3235 3837  2b0ff9cb472f2587
+00006930: 3266 6138 6563 3661 3632 6661 3539 3435  2fa8ec6a62fa5945
+00006940: 3466 6332 6165 3739 3031 6366 6363 3663  4fc2ae7901cfcc6c
+00006950: 6338 3964 3039 3666 3439 6238 6663 3122  c89d096f49b8fc1"
+00006960: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00006970: 2020 2074 786e 5f68 6173 6820 3d20 6177     txn_hash = aw
+00006980: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
+00006990: 2e73 656e 645f 7261 775f 7472 616e 7361  .send_raw_transa
+000069a0: 6374 696f 6e28 7261 775f 7478 6e29 0a20  ction(raw_txn). 
+000069b0: 2020 2020 2020 2061 7373 6572 7420 7478         assert tx
+000069c0: 6e5f 6861 7368 203d 3d20 6173 796e 635f  n_hash == async_
+000069d0: 7733 2e74 6f5f 6279 7465 7328 6865 7873  w3.to_bytes(hexs
+000069e0: 7472 3d65 7870 6563 7465 645f 6861 7368  tr=expected_hash
+000069f0: 290a 0a20 2020 2040 7079 7465 7374 2e6d  )..    @pytest.m
+00006a00: 6172 6b2e 6173 796e 6369 6f0a 2020 2020  ark.asyncio.    
+00006a10: 6173 796e 6320 6465 6620 7465 7374 5f67  async def test_g
+00006a20: 6173 5f70 7269 6365 5f73 7472 6174 6567  as_price_strateg
+00006a30: 795f 6d69 6464 6c65 7761 7265 280a 2020  y_middleware(.  
+00006a40: 2020 2020 2020 7365 6c66 2c20 6173 796e        self, asyn
+00006a50: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
+00006a60: 222c 2061 7379 6e63 5f75 6e6c 6f63 6b65  ", async_unlocke
+00006a70: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
+00006a80: 7970 653a 2043 6865 636b 7375 6d41 6464  ype: ChecksumAdd
+00006a90: 7265 7373 0a20 2020 2029 202d 3e20 4e6f  ress.    ) -> No
+00006aa0: 6e65 3a0a 2020 2020 2020 2020 7478 6e5f  ne:.        txn_
+00006ab0: 7061 7261 6d73 3a20 5478 5061 7261 6d73  params: TxParams
+00006ac0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+00006ad0: 2022 6672 6f6d 223a 2061 7379 6e63 5f75   "from": async_u
+00006ae0: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
+00006af0: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
+00006b00: 2020 2020 2020 2022 746f 223a 2061 7379         "to": asy
+00006b10: 6e63 5f75 6e6c 6f63 6b65 645f 6163 636f  nc_unlocked_acco
+00006b20: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
+00006b30: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
+00006b40: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
+00006b50: 2020 2020 2020 2020 2267 6173 223a 2032          "gas": 2
+00006b60: 3130 3030 2c0a 2020 2020 2020 2020 7d0a  1000,.        }.
+00006b70: 2020 2020 2020 2020 7477 6f5f 6777 6569          two_gwei
+00006b80: 5f69 6e5f 7765 6920 3d20 6173 796e 635f  _in_wei = async_
+00006b90: 7733 2e74 6f5f 7765 6928 322c 2022 6777  w3.to_wei(2, "gw
+00006ba0: 6569 2229 0a0a 2020 2020 2020 2020 6465  ei")..        de
+00006bb0: 6620 6761 735f 7072 6963 655f 7374 7261  f gas_price_stra
+00006bc0: 7465 6779 2877 333a 2022 5765 6233 222c  tegy(w3: "Web3",
+00006bd0: 2074 786e 3a20 5478 5061 7261 6d73 2920   txn: TxParams) 
+00006be0: 2d3e 2057 6569 3a0a 2020 2020 2020 2020  -> Wei:.        
+00006bf0: 2020 2020 7265 7475 726e 2074 776f 5f67      return two_g
+00006c00: 7765 695f 696e 5f77 6569 0a0a 2020 2020  wei_in_wei..    
+00006c10: 2020 2020 6173 796e 635f 7733 2e65 7468      async_w3.eth
+00006c20: 2e73 6574 5f67 6173 5f70 7269 6365 5f73  .set_gas_price_s
+00006c30: 7472 6174 6567 7928 6761 735f 7072 6963  trategy(gas_pric
+00006c40: 655f 7374 7261 7465 6779 290a 0a20 2020  e_strategy)..   
+00006c50: 2020 2020 2074 786e 5f68 6173 6820 3d20       txn_hash = 
+00006c60: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
+00006c70: 7468 2e73 656e 645f 7472 616e 7361 6374  th.send_transact
+00006c80: 696f 6e28 7478 6e5f 7061 7261 6d73 290a  ion(txn_params).
+00006c90: 2020 2020 2020 2020 7478 6e20 3d20 6177          txn = aw
+00006ca0: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
+00006cb0: 2e67 6574 5f74 7261 6e73 6163 7469 6f6e  .get_transaction
+00006cc0: 2874 786e 5f68 6173 6829 0a0a 2020 2020  (txn_hash)..    
+00006cd0: 2020 2020 6173 7365 7274 2074 786e 5b22      assert txn["
+00006ce0: 6761 7350 7269 6365 225d 203d 3d20 7477  gasPrice"] == tw
+00006cf0: 6f5f 6777 6569 5f69 6e5f 7765 690a 2020  o_gwei_in_wei.  
+00006d00: 2020 2020 2020 6173 796e 635f 7733 2e65        async_w3.e
+00006d10: 7468 2e73 6574 5f67 6173 5f70 7269 6365  th.set_gas_price
+00006d20: 5f73 7472 6174 6567 7928 4e6f 6e65 2920  _strategy(None) 
+00006d30: 2023 2072 6573 6574 2073 7472 6174 6567   # reset strateg
+00006d40: 790a 0a20 2020 2040 7079 7465 7374 2e6d  y..    @pytest.m
+00006d50: 6172 6b2e 6173 796e 6369 6f0a 2020 2020  ark.asyncio.    
+00006d60: 6173 796e 6320 6465 6620 7465 7374 5f67  async def test_g
+00006d70: 6173 5f70 7269 6365 5f73 7472 6174 6567  as_price_strateg
+00006d80: 795f 6d69 6464 6c65 7761 7265 5f68 6578  y_middleware_hex
+00006d90: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
+00006da0: 7365 6c66 2c20 6173 796e 635f 7733 3a20  self, async_w3: 
+00006db0: 2241 7379 6e63 5765 6233 222c 2061 7379  "AsyncWeb3", asy
+00006dc0: 6e63 5f75 6e6c 6f63 6b65 645f 6163 636f  nc_unlocked_acco
+00006dd0: 756e 745f 6475 616c 5f74 7970 653a 2043  unt_dual_type: C
+00006de0: 6865 636b 7375 6d41 6464 7265 7373 0a20  hecksumAddress. 
+00006df0: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
+00006e00: 2020 2020 2020 7478 6e5f 7061 7261 6d73        txn_params
+00006e10: 3a20 5478 5061 7261 6d73 203d 207b 0a20  : TxParams = {. 
+00006e20: 2020 2020 2020 2020 2020 2022 6672 6f6d             "from
+00006e30: 223a 2061 7379 6e63 5f75 6e6c 6f63 6b65  ": async_unlocke
+00006e40: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
+00006e50: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
+00006e60: 2022 746f 223a 2061 7379 6e63 5f75 6e6c   "to": async_unl
+00006e70: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
+00006e80: 616c 5f74 7970 652c 0a20 2020 2020 2020  al_type,.       
+00006e90: 2020 2020 2022 7661 6c75 6522 3a20 5765       "value": We
+00006ea0: 6928 3129 2c0a 2020 2020 2020 2020 2020  i(1),.          
+00006eb0: 2020 2267 6173 223a 2032 3130 3030 2c0a    "gas": 21000,.
+00006ec0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00006ed0: 2020 7477 6f5f 6777 6569 5f69 6e5f 7765    two_gwei_in_we
+00006ee0: 6920 3d20 6173 796e 635f 7733 2e74 6f5f  i = async_w3.to_
+00006ef0: 7765 6928 322c 2022 6777 6569 2229 0a0a  wei(2, "gwei")..
+00006f00: 2020 2020 2020 2020 6465 6620 6761 735f          def gas_
+00006f10: 7072 6963 655f 7374 7261 7465 6779 285f  price_strategy(_
+00006f20: 7733 3a20 2257 6562 3322 2c20 5f74 786e  w3: "Web3", _txn
+00006f30: 3a20 5478 5061 7261 6d73 2920 2d3e 2073  : TxParams) -> s
+00006f40: 7472 3a0a 2020 2020 2020 2020 2020 2020  tr:.            
+00006f50: 7265 7475 726e 2068 6578 2874 776f 5f67  return hex(two_g
+00006f60: 7765 695f 696e 5f77 6569 290a 0a20 2020  wei_in_wei)..   
+00006f70: 2020 2020 2061 7379 6e63 5f77 332e 6574       async_w3.et
+00006f80: 682e 7365 745f 6761 735f 7072 6963 655f  h.set_gas_price_
+00006f90: 7374 7261 7465 6779 2867 6173 5f70 7269  strategy(gas_pri
+00006fa0: 6365 5f73 7472 6174 6567 7929 2020 2320  ce_strategy)  # 
+00006fb0: 7479 7065 3a20 6967 6e6f 7265 0a0a 2020  type: ignore..  
+00006fc0: 2020 2020 2020 7478 6e5f 6861 7368 203d        txn_hash =
 00006fd0: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
-00006fe0: 6574 682e 6765 745f 7472 616e 7361 6374  eth.get_transact
-00006ff0: 696f 6e28 7478 6e5f 6861 7368 290a 0a20  ion(txn_hash).. 
-00007000: 2020 2020 2020 206c 6174 6573 745f 626c         latest_bl
-00007010: 6f63 6b20 3d20 6177 6169 7420 6173 796e  ock = await asyn
-00007020: 635f 7733 2e65 7468 2e67 6574 5f62 6c6f  c_w3.eth.get_blo
-00007030: 636b 2822 6c61 7465 7374 2229 0a20 2020  ck("latest").   
-00007040: 2020 2020 2061 7373 6572 7420 280a 2020       assert (.  
-00007050: 2020 2020 2020 2020 2020 7478 6e5b 226d            txn["m
-00007060: 6178 4665 6550 6572 4761 7322 5d20 3d3d  axFeePerGas"] ==
-00007070: 206d 6178 5f66 6565 0a20 2020 2020 2020   max_fee.       
-00007080: 2020 2020 2069 6620 6d61 785f 6665 6520       if max_fee 
-00007090: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
-000070a0: 2020 2020 2020 2020 656c 7365 2032 202a          else 2 *
-000070b0: 206c 6174 6573 745f 626c 6f63 6b5b 2262   latest_block["b
-000070c0: 6173 6546 6565 5065 7247 6173 225d 202b  aseFeePerGas"] +
-000070d0: 206d 6178 5f70 7269 6f72 6974 795f 6665   max_priority_fe
-000070e0: 650a 2020 2020 2020 2020 290a 2020 2020  e.        ).    
-000070f0: 2020 2020 6173 7365 7274 2074 786e 5b22      assert txn["
-00007100: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
-00007110: 7247 6173 225d 203d 3d20 6d61 785f 7072  rGas"] == max_pr
-00007120: 696f 7269 7479 5f66 6565 0a20 2020 2020  iority_fee.     
-00007130: 2020 2061 7373 6572 7420 7478 6e5b 2267     assert txn["g
-00007140: 6173 5072 6963 6522 5d20 3d3d 2074 786e  asPrice"] == txn
-00007150: 5b22 6d61 7846 6565 5065 7247 6173 225d  ["maxFeePerGas"]
-00007160: 0a0a 2020 2020 2020 2020 6173 796e 635f  ..        async_
-00007170: 7733 2e65 7468 2e73 6574 5f67 6173 5f70  w3.eth.set_gas_p
-00007180: 7269 6365 5f73 7472 6174 6567 7928 4e6f  rice_strategy(No
-00007190: 6e65 2920 2023 2072 6573 6574 2073 7472  ne)  # reset str
-000071a0: 6174 6567 790a 0a20 2020 2040 7079 7465  ategy..    @pyte
-000071b0: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
-000071c0: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
-000071d0: 7374 5f67 6173 5f70 7269 6365 5f66 726f  st_gas_price_fro
-000071e0: 6d5f 7374 7261 7465 6779 5f62 7970 6173  m_strategy_bypas
-000071f0: 7365 645f 666f 725f 6479 6e61 6d69 635f  sed_for_dynamic_
-00007200: 6665 655f 7478 6e5f 6e6f 5f74 6970 280a  fee_txn_no_tip(.
-00007210: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-00007220: 2020 2020 2020 6173 796e 635f 7733 3a20        async_w3: 
-00007230: 2241 7379 6e63 5765 6233 222c 0a20 2020  "AsyncWeb3",.   
-00007240: 2020 2020 2075 6e6c 6f63 6b65 645f 6163       unlocked_ac
-00007250: 636f 756e 745f 6475 616c 5f74 7970 653a  count_dual_type:
-00007260: 2043 6865 636b 7375 6d41 6464 7265 7373   ChecksumAddress
-00007270: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
-00007280: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
-00007290: 616d 733a 2054 7850 6172 616d 7320 3d20  ams: TxParams = 
-000072a0: 7b0a 2020 2020 2020 2020 2020 2020 2266  {.            "f
-000072b0: 726f 6d22 3a20 756e 6c6f 636b 6564 5f61  rom": unlocked_a
-000072c0: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
-000072d0: 2c0a 2020 2020 2020 2020 2020 2020 2274  ,.            "t
-000072e0: 6f22 3a20 756e 6c6f 636b 6564 5f61 6363  o": unlocked_acc
-000072f0: 6f75 6e74 5f64 7561 6c5f 7479 7065 2c0a  ount_dual_type,.
-00007300: 2020 2020 2020 2020 2020 2020 2276 616c              "val
-00007310: 7565 223a 2057 6569 2831 292c 0a20 2020  ue": Wei(1),.   
-00007320: 2020 2020 2020 2020 2022 6761 7322 3a20           "gas": 
-00007330: 3231 3030 302c 0a20 2020 2020 2020 2020  21000,.         
-00007340: 2020 2022 6d61 7846 6565 5065 7247 6173     "maxFeePerGas
-00007350: 223a 2057 6569 2831 3030 3030 3030 3030  ": Wei(100000000
-00007360: 3029 2c0a 2020 2020 2020 2020 7d0a 0a20  0),.        }.. 
-00007370: 2020 2020 2020 2064 6566 2067 6173 5f70         def gas_p
-00007380: 7269 6365 5f73 7472 6174 6567 7928 5f77  rice_strategy(_w
-00007390: 333a 2022 5765 6233 222c 205f 7478 6e3a  3: "Web3", _txn:
-000073a0: 2054 7850 6172 616d 7329 202d 3e20 5765   TxParams) -> We
-000073b0: 693a 0a20 2020 2020 2020 2020 2020 2072  i:.            r
-000073c0: 6574 7572 6e20 6173 796e 635f 7733 2e74  eturn async_w3.t
-000073d0: 6f5f 7765 6928 322c 2022 6777 6569 2229  o_wei(2, "gwei")
-000073e0: 0a0a 2020 2020 2020 2020 6173 796e 635f  ..        async_
-000073f0: 7733 2e65 7468 2e73 6574 5f67 6173 5f70  w3.eth.set_gas_p
-00007400: 7269 6365 5f73 7472 6174 6567 7928 6761  rice_strategy(ga
-00007410: 735f 7072 6963 655f 7374 7261 7465 6779  s_price_strategy
-00007420: 290a 0a20 2020 2020 2020 2077 6974 6820  )..        with 
-00007430: 7079 7465 7374 2e72 6169 7365 7328 0a20  pytest.raises(. 
-00007440: 2020 2020 2020 2020 2020 2049 6e76 616c             Inval
-00007450: 6964 5472 616e 7361 6374 696f 6e2c 206d  idTransaction, m
-00007460: 6174 6368 3d22 6d61 7850 7269 6f72 6974  atch="maxPriorit
-00007470: 7946 6565 5065 7247 6173 206d 7573 7420  yFeePerGas must 
-00007480: 6265 2064 6566 696e 6564 220a 2020 2020  be defined".    
-00007490: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
-000074a0: 2020 2061 7761 6974 2061 7379 6e63 5f77     await async_w
-000074b0: 332e 6574 682e 7365 6e64 5f74 7261 6e73  3.eth.send_trans
-000074c0: 6163 7469 6f6e 2874 786e 5f70 6172 616d  action(txn_param
-000074d0: 7329 0a0a 2020 2020 2020 2020 6173 796e  s)..        asyn
-000074e0: 635f 7733 2e65 7468 2e73 6574 5f67 6173  c_w3.eth.set_gas
-000074f0: 5f70 7269 6365 5f73 7472 6174 6567 7928  _price_strategy(
-00007500: 4e6f 6e65 2920 2023 2072 6573 6574 2073  None)  # reset s
-00007510: 7472 6174 6567 790a 0a20 2020 2040 7079  trategy..    @py
-00007520: 7465 7374 2e6d 6172 6b2e 6173 796e 6369  test.mark.asynci
-00007530: 6f0a 2020 2020 6173 796e 6320 6465 6620  o.    async def 
-00007540: 7465 7374 5f65 7468 5f65 7374 696d 6174  test_eth_estimat
-00007550: 655f 6761 7328 0a20 2020 2020 2020 2073  e_gas(.        s
-00007560: 656c 662c 2061 7379 6e63 5f77 333a 2022  elf, async_w3: "
-00007570: 4173 796e 6357 6562 3322 2c20 756e 6c6f  AsyncWeb3", unlo
-00007580: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
-00007590: 6c5f 7479 7065 3a20 4368 6563 6b73 756d  l_type: Checksum
-000075a0: 4164 6472 6573 730a 2020 2020 2920 2d3e  Address.    ) ->
-000075b0: 204e 6f6e 653a 0a20 2020 2020 2020 2067   None:.        g
-000075c0: 6173 5f65 7374 696d 6174 6520 3d20 6177  as_estimate = aw
-000075d0: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
-000075e0: 2e65 7374 696d 6174 655f 6761 7328 0a20  .estimate_gas(. 
-000075f0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-00007600: 2020 2020 2020 2020 2020 2020 2022 6672               "fr
-00007610: 6f6d 223a 2075 6e6c 6f63 6b65 645f 6163  om": unlocked_ac
-00007620: 636f 756e 745f 6475 616c 5f74 7970 652c  count_dual_type,
-00007630: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007640: 2022 746f 223a 2075 6e6c 6f63 6b65 645f   "to": unlocked_
-00007650: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
-00007660: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-00007670: 2020 2022 7661 6c75 6522 3a20 5765 6928     "value": Wei(
-00007680: 3129 2c0a 2020 2020 2020 2020 2020 2020  1),.            
-00007690: 7d0a 2020 2020 2020 2020 290a 2020 2020  }.        ).    
-000076a0: 2020 2020 6173 7365 7274 2069 735f 696e      assert is_in
-000076b0: 7465 6765 7228 6761 735f 6573 7469 6d61  teger(gas_estima
-000076c0: 7465 290a 2020 2020 2020 2020 6173 7365  te).        asse
-000076d0: 7274 2067 6173 5f65 7374 696d 6174 6520  rt gas_estimate 
-000076e0: 3e20 300a 0a20 2020 2040 7079 7465 7374  > 0..    @pytest
-000076f0: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
-00007700: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
-00007710: 5f65 7468 5f66 6565 5f68 6973 746f 7279  _eth_fee_history
-00007720: 2873 656c 662c 2061 7379 6e63 5f77 333a  (self, async_w3:
-00007730: 2022 4173 796e 6357 6562 3322 2920 2d3e   "AsyncWeb3") ->
-00007740: 204e 6f6e 653a 0a20 2020 2020 2020 2066   None:.        f
-00007750: 6565 5f68 6973 746f 7279 203d 2061 7761  ee_history = awa
-00007760: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
-00007770: 6665 655f 6869 7374 6f72 7928 312c 2022  fee_history(1, "
-00007780: 6c61 7465 7374 222c 205b 3530 5d29 0a20  latest", [50]). 
-00007790: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
-000077a0: 5f6c 6973 745f 6c69 6b65 2866 6565 5f68  _list_like(fee_h
-000077b0: 6973 746f 7279 5b22 6261 7365 4665 6550  istory["baseFeeP
-000077c0: 6572 4761 7322 5d29 0a20 2020 2020 2020  erGas"]).       
-000077d0: 2061 7373 6572 7420 6973 5f6c 6973 745f   assert is_list_
-000077e0: 6c69 6b65 2866 6565 5f68 6973 746f 7279  like(fee_history
-000077f0: 5b22 6761 7355 7365 6452 6174 696f 225d  ["gasUsedRatio"]
-00007800: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-00007810: 2069 735f 696e 7465 6765 7228 6665 655f   is_integer(fee_
-00007820: 6869 7374 6f72 795b 226f 6c64 6573 7442  history["oldestB
-00007830: 6c6f 636b 225d 290a 2020 2020 2020 2020  lock"]).        
-00007840: 6173 7365 7274 2066 6565 5f68 6973 746f  assert fee_histo
-00007850: 7279 5b22 6f6c 6465 7374 426c 6f63 6b22  ry["oldestBlock"
-00007860: 5d20 3e3d 2030 0a20 2020 2020 2020 2061  ] >= 0.        a
-00007870: 7373 6572 7420 6973 5f6c 6973 745f 6c69  ssert is_list_li
-00007880: 6b65 2866 6565 5f68 6973 746f 7279 5b22  ke(fee_history["
-00007890: 7265 7761 7264 225d 290a 2020 2020 2020  reward"]).      
-000078a0: 2020 6173 7365 7274 2069 735f 6c69 7374    assert is_list
-000078b0: 5f6c 696b 6528 6665 655f 6869 7374 6f72  _like(fee_histor
-000078c0: 795b 2272 6577 6172 6422 5d5b 305d 290a  y["reward"][0]).
-000078d0: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
-000078e0: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
-000078f0: 796e 6320 6465 6620 7465 7374 5f65 7468  ync def test_eth
-00007900: 5f66 6565 5f68 6973 746f 7279 5f77 6974  _fee_history_wit
-00007910: 685f 696e 7465 6765 7228 0a20 2020 2020  h_integer(.     
-00007920: 2020 2073 656c 662c 2061 7379 6e63 5f77     self, async_w
-00007930: 333a 2022 4173 796e 6357 6562 3322 2c20  3: "AsyncWeb3", 
-00007940: 656d 7074 795f 626c 6f63 6b3a 2042 6c6f  empty_block: Blo
-00007950: 636b 4461 7461 0a20 2020 2029 202d 3e20  ckData.    ) -> 
-00007960: 4e6f 6e65 3a0a 2020 2020 2020 2020 6665  None:.        fe
-00007970: 655f 6869 7374 6f72 7920 3d20 6177 6169  e_history = awai
-00007980: 7420 6173 796e 635f 7733 2e65 7468 2e66  t async_w3.eth.f
-00007990: 6565 5f68 6973 746f 7279 2831 2c20 656d  ee_history(1, em
-000079a0: 7074 795f 626c 6f63 6b5b 226e 756d 6265  pty_block["numbe
-000079b0: 7222 5d2c 205b 3530 5d29 0a20 2020 2020  r"], [50]).     
-000079c0: 2020 2061 7373 6572 7420 6973 5f6c 6973     assert is_lis
-000079d0: 745f 6c69 6b65 2866 6565 5f68 6973 746f  t_like(fee_histo
-000079e0: 7279 5b22 6261 7365 4665 6550 6572 4761  ry["baseFeePerGa
-000079f0: 7322 5d29 0a20 2020 2020 2020 2061 7373  s"]).        ass
-00007a00: 6572 7420 6973 5f6c 6973 745f 6c69 6b65  ert is_list_like
-00007a10: 2866 6565 5f68 6973 746f 7279 5b22 6761  (fee_history["ga
-00007a20: 7355 7365 6452 6174 696f 225d 290a 2020  sUsedRatio"]).  
-00007a30: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
-00007a40: 696e 7465 6765 7228 6665 655f 6869 7374  integer(fee_hist
-00007a50: 6f72 795b 226f 6c64 6573 7442 6c6f 636b  ory["oldestBlock
-00007a60: 225d 290a 2020 2020 2020 2020 6173 7365  "]).        asse
-00007a70: 7274 2066 6565 5f68 6973 746f 7279 5b22  rt fee_history["
-00007a80: 6f6c 6465 7374 426c 6f63 6b22 5d20 3e3d  oldestBlock"] >=
-00007a90: 2030 0a20 2020 2020 2020 2061 7373 6572   0.        asser
-00007aa0: 7420 6973 5f6c 6973 745f 6c69 6b65 2866  t is_list_like(f
-00007ab0: 6565 5f68 6973 746f 7279 5b22 7265 7761  ee_history["rewa
-00007ac0: 7264 225d 290a 2020 2020 2020 2020 6173  rd"]).        as
-00007ad0: 7365 7274 2069 735f 6c69 7374 5f6c 696b  sert is_list_lik
-00007ae0: 6528 6665 655f 6869 7374 6f72 795b 2272  e(fee_history["r
-00007af0: 6577 6172 6422 5d5b 305d 290a 0a20 2020  eward"][0])..   
-00007b00: 2040 7079 7465 7374 2e6d 6172 6b2e 6173   @pytest.mark.as
-00007b10: 796e 6369 6f0a 2020 2020 6173 796e 6320  yncio.    async 
-00007b20: 6465 6620 7465 7374 5f65 7468 5f66 6565  def test_eth_fee
-00007b30: 5f68 6973 746f 7279 5f6e 6f5f 7265 7761  _history_no_rewa
-00007b40: 7264 5f70 6572 6365 6e74 696c 6573 280a  rd_percentiles(.
-00007b50: 2020 2020 2020 2020 7365 6c66 2c20 6173          self, as
-00007b60: 796e 635f 7733 3a20 2241 7379 6e63 5765  ync_w3: "AsyncWe
-00007b70: 6233 220a 2020 2020 2920 2d3e 204e 6f6e  b3".    ) -> Non
-00007b80: 653a 0a20 2020 2020 2020 2066 6565 5f68  e:.        fee_h
-00007b90: 6973 746f 7279 203d 2061 7761 6974 2061  istory = await a
-00007ba0: 7379 6e63 5f77 332e 6574 682e 6665 655f  sync_w3.eth.fee_
-00007bb0: 6869 7374 6f72 7928 312c 2022 6c61 7465  history(1, "late
-00007bc0: 7374 2229 0a20 2020 2020 2020 2061 7373  st").        ass
-00007bd0: 6572 7420 6973 5f6c 6973 745f 6c69 6b65  ert is_list_like
-00007be0: 2866 6565 5f68 6973 746f 7279 5b22 6261  (fee_history["ba
-00007bf0: 7365 4665 6550 6572 4761 7322 5d29 0a20  seFeePerGas"]). 
-00007c00: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
-00007c10: 5f6c 6973 745f 6c69 6b65 2866 6565 5f68  _list_like(fee_h
-00007c20: 6973 746f 7279 5b22 6761 7355 7365 6452  istory["gasUsedR
-00007c30: 6174 696f 225d 290a 2020 2020 2020 2020  atio"]).        
-00007c40: 6173 7365 7274 2069 735f 696e 7465 6765  assert is_intege
-00007c50: 7228 6665 655f 6869 7374 6f72 795b 226f  r(fee_history["o
-00007c60: 6c64 6573 7442 6c6f 636b 225d 290a 2020  ldestBlock"]).  
-00007c70: 2020 2020 2020 6173 7365 7274 2066 6565        assert fee
-00007c80: 5f68 6973 746f 7279 5b22 6f6c 6465 7374  _history["oldest
-00007c90: 426c 6f63 6b22 5d20 3e3d 2030 0a0a 2020  Block"] >= 0..  
-00007ca0: 2020 4070 7974 6573 742e 6d61 726b 2e61    @pytest.mark.a
-00007cb0: 7379 6e63 696f 0a20 2020 2061 7379 6e63  syncio.    async
-00007cc0: 2064 6566 2074 6573 745f 6574 685f 6d61   def test_eth_ma
-00007cd0: 785f 7072 696f 7269 7479 5f66 6565 2873  x_priority_fee(s
-00007ce0: 656c 662c 2061 7379 6e63 5f77 333a 2022  elf, async_w3: "
-00007cf0: 4173 796e 6357 6562 3322 2920 2d3e 204e  AsyncWeb3") -> N
-00007d00: 6f6e 653a 0a20 2020 2020 2020 206d 6178  one:.        max
-00007d10: 5f70 7269 6f72 6974 795f 6665 6520 3d20  _priority_fee = 
-00007d20: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
-00007d30: 7468 2e6d 6178 5f70 7269 6f72 6974 795f  th.max_priority_
-00007d40: 6665 650a 2020 2020 2020 2020 6173 7365  fee.        asse
-00007d50: 7274 2069 735f 696e 7465 6765 7228 6d61  rt is_integer(ma
-00007d60: 785f 7072 696f 7269 7479 5f66 6565 290a  x_priority_fee).
-00007d70: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
-00007d80: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
-00007d90: 796e 6320 6465 6620 7465 7374 5f65 7468  ync def test_eth
-00007da0: 5f6d 6178 5f70 7269 6f72 6974 795f 6665  _max_priority_fe
-00007db0: 655f 7769 7468 5f66 6565 5f68 6973 746f  e_with_fee_histo
-00007dc0: 7279 5f63 616c 6375 6c61 7469 6f6e 5f65  ry_calculation_e
-00007dd0: 7272 6f72 5f64 6963 7428 0a20 2020 2020  rror_dict(.     
-00007de0: 2020 2073 656c 662c 2077 333a 2022 5765     self, w3: "We
-00007df0: 6233 220a 2020 2020 2920 2d3e 204e 6f6e  b3".    ) -> Non
-00007e00: 653a 0a20 2020 2020 2020 2066 6169 6c5f  e:.        fail_
-00007e10: 6d61 785f 7072 696f 5f6d 6964 646c 6577  max_prio_middlew
-00007e20: 6172 6520 3d20 636f 6e73 7472 7563 745f  are = construct_
-00007e30: 6572 726f 725f 6765 6e65 7261 746f 725f  error_generator_
-00007e40: 6d69 6464 6c65 7761 7265 280a 2020 2020  middleware(.    
-00007e50: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-00007e60: 2020 2020 2020 2020 2020 5250 4345 6e64            RPCEnd
-00007e70: 706f 696e 7428 2265 7468 5f6d 6178 5072  point("eth_maxPr
-00007e80: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
-00007e90: 293a 206c 616d 6264 6120 2a5f 3a20 7b0a  ): lambda *_: {.
-00007ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007eb0: 2020 2020 2265 7272 6f72 223a 207b 0a20      "error": {. 
-00007ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007ed0: 2020 2020 2020 2022 636f 6465 223a 202d         "code": -
-00007ee0: 3332 3630 312c 0a20 2020 2020 2020 2020  32601,.         
-00007ef0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00007f00: 6d65 7373 6167 6522 3a20 280a 2020 2020  message": (.    
-00007f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007f20: 2020 2020 2020 2020 2254 6865 206d 6574          "The met
-00007f30: 686f 6420 6574 685f 6d61 7850 7269 6f72  hod eth_maxPrior
-00007f40: 6974 7946 6565 5065 7247 6173 2064 6f65  ityFeePerGas doe
-00007f50: 7320 220a 2020 2020 2020 2020 2020 2020  s ".            
-00007f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007f70: 226e 6f74 2065 7869 7374 2f69 7320 6e6f  "not exist/is no
-00007f80: 7420 6176 6169 6c61 626c 6522 0a20 2020  t available".   
-00007f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007fa0: 2020 2020 2029 2c0a 2020 2020 2020 2020       ),.        
-00007fb0: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-00007fc0: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-00007fd0: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-00007fe0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00007ff0: 7733 2e6d 6964 646c 6577 6172 655f 6f6e  w3.middleware_on
-00008000: 696f 6e2e 6164 6428 0a20 2020 2020 2020  ion.add(.       
-00008010: 2020 2020 2066 6169 6c5f 6d61 785f 7072       fail_max_pr
-00008020: 696f 5f6d 6964 646c 6577 6172 652c 206e  io_middleware, n
-00008030: 616d 653d 2266 6169 6c5f 6d61 785f 7072  ame="fail_max_pr
-00008040: 696f 5f6d 6964 646c 6577 6172 6522 0a20  io_middleware". 
-00008050: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-00008060: 2020 7769 7468 2070 7974 6573 742e 7761    with pytest.wa
-00008070: 726e 7328 0a20 2020 2020 2020 2020 2020  rns(.           
-00008080: 2055 7365 7257 6172 6e69 6e67 2c0a 2020   UserWarning,.  
-00008090: 2020 2020 2020 2020 2020 6d61 7463 683d            match=
-000080a0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-000080b0: 2020 2254 6865 7265 2077 6173 2061 6e20    "There was an 
-000080c0: 6973 7375 6520 7769 7468 2074 6865 206d  issue with the m
-000080d0: 6574 686f 6420 6574 685f 6d61 7850 7269  ethod eth_maxPri
-000080e0: 6f72 6974 7946 6565 5065 7247 6173 2e22  orityFeePerGas."
-000080f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008100: 2022 2043 616c 6375 6c61 7469 6e67 2075   " Calculating u
-00008110: 7369 6e67 2065 7468 5f66 6565 4869 7374  sing eth_feeHist
-00008120: 6f72 792e 220a 2020 2020 2020 2020 2020  ory.".          
-00008130: 2020 292c 0a20 2020 2020 2020 2029 3a0a    ),.        ):.
-00008140: 2020 2020 2020 2020 2020 2020 7733 2e65              w3.e
-00008150: 7468 2e6d 6178 5f70 7269 6f72 6974 795f  th.max_priority_
-00008160: 6665 650a 0a20 2020 2020 2020 2077 332e  fee..        w3.
-00008170: 6d69 6464 6c65 7761 7265 5f6f 6e69 6f6e  middleware_onion
-00008180: 2e72 656d 6f76 6528 2266 6169 6c5f 6d61  .remove("fail_ma
-00008190: 785f 7072 696f 5f6d 6964 646c 6577 6172  x_prio_middlewar
-000081a0: 6522 2920 2023 2063 6c65 616e 2075 700a  e")  # clean up.
-000081b0: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
-000081c0: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
-000081d0: 796e 6320 6465 6620 7465 7374 5f65 7468  ync def test_eth
-000081e0: 5f6d 6178 5f70 7269 6f72 6974 795f 6665  _max_priority_fe
-000081f0: 655f 7769 7468 5f66 6565 5f68 6973 746f  e_with_fee_histo
-00008200: 7279 5f63 616c 6375 6c61 7469 6f6e 280a  ry_calculation(.
-00008210: 2020 2020 2020 2020 7365 6c66 2c20 6173          self, as
-00008220: 796e 635f 7733 3a20 2241 7379 6e63 5765  ync_w3: "AsyncWe
-00008230: 6233 220a 2020 2020 2920 2d3e 204e 6f6e  b3".    ) -> Non
-00008240: 653a 0a20 2020 2020 2020 2066 6169 6c5f  e:.        fail_
-00008250: 6d61 785f 7072 696f 5f6d 6964 646c 6577  max_prio_middlew
-00008260: 6172 6520 3d20 6177 6169 7420 6173 796e  are = await asyn
-00008270: 635f 636f 6e73 7472 7563 745f 6572 726f  c_construct_erro
-00008280: 725f 6765 6e65 7261 746f 725f 6d69 6464  r_generator_midd
-00008290: 6c65 7761 7265 280a 2020 2020 2020 2020  leware(.        
-000082a0: 2020 2020 7b52 5043 456e 6470 6f69 6e74      {RPCEndpoint
-000082b0: 2822 6574 685f 6d61 7850 7269 6f72 6974  ("eth_maxPriorit
-000082c0: 7946 6565 5065 7247 6173 2229 3a20 6c61  yFeePerGas"): la
-000082d0: 6d62 6461 202a 5f3a 2022 227d 0a20 2020  mbda *_: ""}.   
-000082e0: 2020 2020 2029 0a20 2020 2020 2020 2061       ).        a
-000082f0: 7379 6e63 5f77 332e 6d69 6464 6c65 7761  sync_w3.middlewa
-00008300: 7265 5f6f 6e69 6f6e 2e61 6464 280a 2020  re_onion.add(.  
-00008310: 2020 2020 2020 2020 2020 6661 696c 5f6d            fail_m
-00008320: 6178 5f70 7269 6f5f 6d69 6464 6c65 7761  ax_prio_middlewa
-00008330: 7265 2c20 6e61 6d65 3d22 6661 696c 5f6d  re, name="fail_m
-00008340: 6178 5f70 7269 6f5f 6d69 6464 6c65 7761  ax_prio_middlewa
-00008350: 7265 220a 2020 2020 2020 2020 290a 0a20  re".        ).. 
-00008360: 2020 2020 2020 2077 6974 6820 7079 7465         with pyte
-00008370: 7374 2e77 6172 6e73 280a 2020 2020 2020  st.warns(.      
-00008380: 2020 2020 2020 5573 6572 5761 726e 696e        UserWarnin
-00008390: 672c 0a20 2020 2020 2020 2020 2020 206d  g,.            m
-000083a0: 6174 6368 3d28 0a20 2020 2020 2020 2020  atch=(.         
-000083b0: 2020 2020 2020 2022 5468 6572 6520 7761         "There wa
-000083c0: 7320 616e 2069 7373 7565 2077 6974 6820  s an issue with 
-000083d0: 7468 6520 6d65 7468 6f64 2065 7468 5f6d  the method eth_m
-000083e0: 6178 5072 696f 7269 7479 4665 6550 6572  axPriorityFeePer
-000083f0: 4761 732e 2022 0a20 2020 2020 2020 2020  Gas. ".         
-00008400: 2020 2020 2020 2022 4361 6c63 756c 6174         "Calculat
-00008410: 696e 6720 7573 696e 6720 6574 685f 6665  ing using eth_fe
-00008420: 6548 6973 746f 7279 2e22 0a20 2020 2020  eHistory.".     
-00008430: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
-00008440: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
-00008450: 206d 6178 5f70 7269 6f72 6974 795f 6665   max_priority_fe
-00008460: 6520 3d20 6177 6169 7420 6173 796e 635f  e = await async_
-00008470: 7733 2e65 7468 2e6d 6178 5f70 7269 6f72  w3.eth.max_prior
-00008480: 6974 795f 6665 650a 2020 2020 2020 2020  ity_fee.        
-00008490: 2020 2020 6173 7365 7274 2069 735f 696e      assert is_in
-000084a0: 7465 6765 7228 6d61 785f 7072 696f 7269  teger(max_priori
-000084b0: 7479 5f66 6565 290a 0a20 2020 2020 2020  ty_fee)..       
-000084c0: 2061 7379 6e63 5f77 332e 6d69 6464 6c65   async_w3.middle
-000084d0: 7761 7265 5f6f 6e69 6f6e 2e72 656d 6f76  ware_onion.remov
-000084e0: 6528 2266 6169 6c5f 6d61 785f 7072 696f  e("fail_max_prio
-000084f0: 5f6d 6964 646c 6577 6172 6522 2920 2023  _middleware")  #
-00008500: 2063 6c65 616e 2075 700a 0a20 2020 2040   clean up..    @
-00008510: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
-00008520: 6369 6f0a 2020 2020 6173 796e 6320 6465  cio.    async de
-00008530: 6620 7465 7374 5f65 7468 5f67 6574 426c  f test_eth_getBl
-00008540: 6f63 6b42 7948 6173 6828 0a20 2020 2020  ockByHash(.     
-00008550: 2020 2073 656c 662c 2061 7379 6e63 5f77     self, async_w
-00008560: 333a 2022 4173 796e 6357 6562 3322 2c20  3: "AsyncWeb3", 
-00008570: 656d 7074 795f 626c 6f63 6b3a 2042 6c6f  empty_block: Blo
-00008580: 636b 4461 7461 0a20 2020 2029 202d 3e20  ckData.    ) -> 
-00008590: 4e6f 6e65 3a0a 2020 2020 2020 2020 626c  None:.        bl
-000085a0: 6f63 6b20 3d20 6177 6169 7420 6173 796e  ock = await asyn
-000085b0: 635f 7733 2e65 7468 2e67 6574 5f62 6c6f  c_w3.eth.get_blo
-000085c0: 636b 2865 6d70 7479 5f62 6c6f 636b 5b22  ck(empty_block["
-000085d0: 6861 7368 225d 290a 2020 2020 2020 2020  hash"]).        
-000085e0: 6173 7365 7274 2062 6c6f 636b 5b22 6861  assert block["ha
-000085f0: 7368 225d 203d 3d20 656d 7074 795f 626c  sh"] == empty_bl
-00008600: 6f63 6b5b 2268 6173 6822 5d0a 0a20 2020  ock["hash"]..   
-00008610: 2040 7079 7465 7374 2e6d 6172 6b2e 6173   @pytest.mark.as
-00008620: 796e 6369 6f0a 2020 2020 6173 796e 6320  yncio.    async 
-00008630: 6465 6620 7465 7374 5f65 7468 5f67 6574  def test_eth_get
-00008640: 426c 6f63 6b42 7948 6173 685f 6e6f 745f  BlockByHash_not_
-00008650: 666f 756e 6428 7365 6c66 2c20 6173 796e  found(self, asyn
-00008660: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
-00008670: 2229 202d 3e20 4e6f 6e65 3a0a 2020 2020  ") -> None:.    
-00008680: 2020 2020 7769 7468 2070 7974 6573 742e      with pytest.
-00008690: 7261 6973 6573 2842 6c6f 636b 4e6f 7446  raises(BlockNotF
-000086a0: 6f75 6e64 293a 0a20 2020 2020 2020 2020  ound):.         
-000086b0: 2020 2061 7761 6974 2061 7379 6e63 5f77     await async_w
-000086c0: 332e 6574 682e 6765 745f 626c 6f63 6b28  3.eth.get_block(
-000086d0: 554e 4b4e 4f57 4e5f 4841 5348 290a 0a20  UNKNOWN_HASH).. 
-000086e0: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
-000086f0: 6173 796e 6369 6f0a 2020 2020 6173 796e  asyncio.    asyn
-00008700: 6320 6465 6620 7465 7374 5f65 7468 5f67  c def test_eth_g
-00008710: 6574 426c 6f63 6b42 7948 6173 685f 7065  etBlockByHash_pe
-00008720: 6e64 696e 6728 7365 6c66 2c20 6173 796e  nding(self, asyn
-00008730: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
-00008740: 2229 202d 3e20 4e6f 6e65 3a0a 2020 2020  ") -> None:.    
-00008750: 2020 2020 626c 6f63 6b20 3d20 6177 6169      block = awai
-00008760: 7420 6173 796e 635f 7733 2e65 7468 2e67  t async_w3.eth.g
-00008770: 6574 5f62 6c6f 636b 2822 7065 6e64 696e  et_block("pendin
-00008780: 6722 290a 2020 2020 2020 2020 6173 7365  g").        asse
-00008790: 7274 2062 6c6f 636b 5b22 6861 7368 225d  rt block["hash"]
-000087a0: 2069 7320 4e6f 6e65 0a0a 2020 2020 4070   is None..    @p
-000087b0: 7974 6573 742e 6d61 726b 2e61 7379 6e63  ytest.mark.async
-000087c0: 696f 0a20 2020 2061 7379 6e63 2064 6566  io.    async def
-000087d0: 2074 6573 745f 6574 685f 6765 7442 6c6f   test_eth_getBlo
-000087e0: 636b 4279 4e75 6d62 6572 5f77 6974 685f  ckByNumber_with_
-000087f0: 696e 7465 6765 7228 0a20 2020 2020 2020  integer(.       
-00008800: 2073 656c 662c 2061 7379 6e63 5f77 333a   self, async_w3:
-00008810: 2022 4173 796e 6357 6562 3322 2c20 656d   "AsyncWeb3", em
-00008820: 7074 795f 626c 6f63 6b3a 2042 6c6f 636b  pty_block: Block
-00008830: 4461 7461 0a20 2020 2029 202d 3e20 4e6f  Data.    ) -> No
-00008840: 6e65 3a0a 2020 2020 2020 2020 626c 6f63  ne:.        bloc
-00008850: 6b20 3d20 6177 6169 7420 6173 796e 635f  k = await async_
-00008860: 7733 2e65 7468 2e67 6574 5f62 6c6f 636b  w3.eth.get_block
-00008870: 2865 6d70 7479 5f62 6c6f 636b 5b22 6e75  (empty_block["nu
-00008880: 6d62 6572 225d 290a 2020 2020 2020 2020  mber"]).        
-00008890: 6173 7365 7274 2062 6c6f 636b 5b22 6e75  assert block["nu
-000088a0: 6d62 6572 225d 203d 3d20 656d 7074 795f  mber"] == empty_
-000088b0: 626c 6f63 6b5b 226e 756d 6265 7222 5d0a  block["number"].
-000088c0: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
-000088d0: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
-000088e0: 796e 6320 6465 6620 7465 7374 5f65 7468  ync def test_eth
-000088f0: 5f67 6574 426c 6f63 6b42 794e 756d 6265  _getBlockByNumbe
-00008900: 725f 6c61 7465 7374 280a 2020 2020 2020  r_latest(.      
-00008910: 2020 7365 6c66 2c20 6173 796e 635f 7733    self, async_w3
-00008920: 3a20 2241 7379 6e63 5765 6233 222c 2065  : "AsyncWeb3", e
-00008930: 6d70 7479 5f62 6c6f 636b 3a20 426c 6f63  mpty_block: Bloc
-00008940: 6b44 6174 610a 2020 2020 2920 2d3e 204e  kData.    ) -> N
-00008950: 6f6e 653a 0a20 2020 2020 2020 2063 7572  one:.        cur
-00008960: 7265 6e74 5f62 6c6f 636b 5f6e 756d 6265  rent_block_numbe
-00008970: 7220 3d20 6177 6169 7420 6173 796e 635f  r = await async_
-00008980: 7733 2e65 7468 2e62 6c6f 636b 5f6e 756d  w3.eth.block_num
-00008990: 6265 720a 2020 2020 2020 2020 626c 6f63  ber.        bloc
-000089a0: 6b20 3d20 6177 6169 7420 6173 796e 635f  k = await async_
-000089b0: 7733 2e65 7468 2e67 6574 5f62 6c6f 636b  w3.eth.get_block
-000089c0: 2822 6c61 7465 7374 2229 0a20 2020 2020  ("latest").     
-000089d0: 2020 2061 7373 6572 7420 626c 6f63 6b5b     assert block[
-000089e0: 226e 756d 6265 7222 5d20 3d3d 2063 7572  "number"] == cur
-000089f0: 7265 6e74 5f62 6c6f 636b 5f6e 756d 6265  rent_block_numbe
-00008a00: 720a 0a20 2020 2040 7079 7465 7374 2e6d  r..    @pytest.m
-00008a10: 6172 6b2e 6173 796e 6369 6f0a 2020 2020  ark.asyncio.    
-00008a20: 6173 796e 6320 6465 6620 7465 7374 5f65  async def test_e
-00008a30: 7468 5f67 6574 426c 6f63 6b42 794e 756d  th_getBlockByNum
-00008a40: 6265 725f 6e6f 745f 666f 756e 6428 0a20  ber_not_found(. 
-00008a50: 2020 2020 2020 2073 656c 662c 2061 7379         self, asy
-00008a60: 6e63 5f77 333a 2022 4173 796e 6357 6562  nc_w3: "AsyncWeb
-00008a70: 3322 2c20 656d 7074 795f 626c 6f63 6b3a  3", empty_block:
-00008a80: 2042 6c6f 636b 4461 7461 0a20 2020 2029   BlockData.    )
-00008a90: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-00008aa0: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
-00008ab0: 6973 6573 2842 6c6f 636b 4e6f 7446 6f75  ises(BlockNotFou
-00008ac0: 6e64 293a 0a20 2020 2020 2020 2020 2020  nd):.           
-00008ad0: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
-00008ae0: 6574 682e 6765 745f 626c 6f63 6b28 426c  eth.get_block(Bl
-00008af0: 6f63 6b4e 756d 6265 7228 3132 3334 3529  ockNumber(12345)
-00008b00: 290a 0a20 2020 2040 7079 7465 7374 2e6d  )..    @pytest.m
-00008b10: 6172 6b2e 6173 796e 6369 6f0a 2020 2020  ark.asyncio.    
-00008b20: 6173 796e 6320 6465 6620 7465 7374 5f65  async def test_e
-00008b30: 7468 5f67 6574 426c 6f63 6b42 794e 756d  th_getBlockByNum
-00008b40: 6265 725f 7065 6e64 696e 6728 0a20 2020  ber_pending(.   
-00008b50: 2020 2020 2073 656c 662c 2061 7379 6e63       self, async
-00008b60: 5f77 333a 2022 4173 796e 6357 6562 3322  _w3: "AsyncWeb3"
-00008b70: 2c20 656d 7074 795f 626c 6f63 6b3a 2042  , empty_block: B
-00008b80: 6c6f 636b 4461 7461 0a20 2020 2029 202d  lockData.    ) -
-00008b90: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-00008ba0: 6375 7272 656e 745f 626c 6f63 6b5f 6e75  current_block_nu
-00008bb0: 6d62 6572 203d 2061 7761 6974 2061 7379  mber = await asy
-00008bc0: 6e63 5f77 332e 6574 682e 626c 6f63 6b5f  nc_w3.eth.block_
-00008bd0: 6e75 6d62 6572 0a20 2020 2020 2020 2062  number.        b
-00008be0: 6c6f 636b 203d 2061 7761 6974 2061 7379  lock = await asy
-00008bf0: 6e63 5f77 332e 6574 682e 6765 745f 626c  nc_w3.eth.get_bl
-00008c00: 6f63 6b28 2270 656e 6469 6e67 2229 0a20  ock("pending"). 
-00008c10: 2020 2020 2020 2061 7373 6572 7420 626c         assert bl
-00008c20: 6f63 6b5b 226e 756d 6265 7222 5d20 3d3d  ock["number"] ==
-00008c30: 2063 7572 7265 6e74 5f62 6c6f 636b 5f6e   current_block_n
-00008c40: 756d 6265 7220 2b20 310a 0a20 2020 2040  umber + 1..    @
+00006fe0: 6574 682e 7365 6e64 5f74 7261 6e73 6163  eth.send_transac
+00006ff0: 7469 6f6e 2874 786e 5f70 6172 616d 7329  tion(txn_params)
+00007000: 0a20 2020 2020 2020 2074 786e 203d 2061  .        txn = a
+00007010: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
+00007020: 682e 6765 745f 7472 616e 7361 6374 696f  h.get_transactio
+00007030: 6e28 7478 6e5f 6861 7368 290a 0a20 2020  n(txn_hash)..   
+00007040: 2020 2020 2061 7373 6572 7420 7478 6e5b       assert txn[
+00007050: 2267 6173 5072 6963 6522 5d20 3d3d 2074  "gasPrice"] == t
+00007060: 776f 5f67 7765 695f 696e 5f77 6569 0a20  wo_gwei_in_wei. 
+00007070: 2020 2020 2020 2061 7379 6e63 5f77 332e         async_w3.
+00007080: 6574 682e 7365 745f 6761 735f 7072 6963  eth.set_gas_pric
+00007090: 655f 7374 7261 7465 6779 284e 6f6e 6529  e_strategy(None)
+000070a0: 2020 2320 7265 7365 7420 7374 7261 7465    # reset strate
+000070b0: 6779 0a0a 2020 2020 4070 7974 6573 742e  gy..    @pytest.
+000070c0: 6d61 726b 2e61 7379 6e63 696f 0a20 2020  mark.asyncio.   
+000070d0: 2040 7079 7465 7374 2e6d 6172 6b2e 7061   @pytest.mark.pa
+000070e0: 7261 6d65 7472 697a 6528 0a20 2020 2020  rametrize(.     
+000070f0: 2020 2022 6d61 785f 6665 6522 2c20 2831     "max_fee", (1
+00007100: 3030 3030 3030 3030 302c 204e 6f6e 6529  000000000, None)
+00007110: 2c20 6964 733d 5b22 7769 7468 5f6d 6178  , ids=["with_max
+00007120: 5f66 6565 222c 2022 7769 7468 6f75 745f  _fee", "without_
+00007130: 6d61 785f 6665 6522 5d0a 2020 2020 290a  max_fee"].    ).
+00007140: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
+00007150: 7374 5f67 6173 5f70 7269 6365 5f66 726f  st_gas_price_fro
+00007160: 6d5f 7374 7261 7465 6779 5f62 7970 6173  m_strategy_bypas
+00007170: 7365 645f 666f 725f 6479 6e61 6d69 635f  sed_for_dynamic_
+00007180: 6665 655f 7478 6e28 0a20 2020 2020 2020  fee_txn(.       
+00007190: 2073 656c 662c 0a20 2020 2020 2020 2061   self,.        a
+000071a0: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
+000071b0: 6562 3322 2c0a 2020 2020 2020 2020 6173  eb3",.        as
+000071c0: 796e 635f 756e 6c6f 636b 6564 5f61 6363  ync_unlocked_acc
+000071d0: 6f75 6e74 5f64 7561 6c5f 7479 7065 3a20  ount_dual_type: 
+000071e0: 4368 6563 6b73 756d 4164 6472 6573 732c  ChecksumAddress,
+000071f0: 0a20 2020 2020 2020 206d 6178 5f66 6565  .        max_fee
+00007200: 3a20 5765 692c 0a20 2020 2029 202d 3e20  : Wei,.    ) -> 
+00007210: 4e6f 6e65 3a0a 2020 2020 2020 2020 6d61  None:.        ma
+00007220: 785f 7072 696f 7269 7479 5f66 6565 203d  x_priority_fee =
+00007230: 2061 7379 6e63 5f77 332e 746f 5f77 6569   async_w3.to_wei
+00007240: 2831 2c20 2267 7765 6922 290a 2020 2020  (1, "gwei").    
+00007250: 2020 2020 7478 6e5f 7061 7261 6d73 3a20      txn_params: 
+00007260: 5478 5061 7261 6d73 203d 207b 0a20 2020  TxParams = {.   
+00007270: 2020 2020 2020 2020 2022 6672 6f6d 223a           "from":
+00007280: 2061 7379 6e63 5f75 6e6c 6f63 6b65 645f   async_unlocked_
+00007290: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
+000072a0: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
+000072b0: 746f 223a 2061 7379 6e63 5f75 6e6c 6f63  to": async_unloc
+000072c0: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+000072d0: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
+000072e0: 2020 2022 7661 6c75 6522 3a20 5765 6928     "value": Wei(
+000072f0: 3129 2c0a 2020 2020 2020 2020 2020 2020  1),.            
+00007300: 2267 6173 223a 2032 3130 3030 2c0a 2020  "gas": 21000,.  
+00007310: 2020 2020 2020 2020 2020 226d 6178 5072            "maxPr
+00007320: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
+00007330: 3a20 6d61 785f 7072 696f 7269 7479 5f66  : max_priority_f
+00007340: 6565 2c0a 2020 2020 2020 2020 7d0a 2020  ee,.        }.  
+00007350: 2020 2020 2020 6966 206d 6178 5f66 6565        if max_fee
+00007360: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00007370: 2020 2020 2020 2020 2020 7478 6e5f 7061            txn_pa
+00007380: 7261 6d73 203d 2061 7373 6f63 2874 786e  rams = assoc(txn
+00007390: 5f70 6172 616d 732c 2022 6d61 7846 6565  _params, "maxFee
+000073a0: 5065 7247 6173 222c 206d 6178 5f66 6565  PerGas", max_fee
+000073b0: 290a 0a20 2020 2020 2020 2064 6566 2067  )..        def g
+000073c0: 6173 5f70 7269 6365 5f73 7472 6174 6567  as_price_strateg
+000073d0: 7928 7733 3a20 2257 6562 3322 2c20 7478  y(w3: "Web3", tx
+000073e0: 6e3a 2054 7850 6172 616d 7329 202d 3e20  n: TxParams) -> 
+000073f0: 5765 693a 0a20 2020 2020 2020 2020 2020  Wei:.           
+00007400: 2072 6574 7572 6e20 6173 796e 635f 7733   return async_w3
+00007410: 2e74 6f5f 7765 6928 322c 2022 6777 6569  .to_wei(2, "gwei
+00007420: 2229 0a0a 2020 2020 2020 2020 6173 796e  ")..        asyn
+00007430: 635f 7733 2e65 7468 2e73 6574 5f67 6173  c_w3.eth.set_gas
+00007440: 5f70 7269 6365 5f73 7472 6174 6567 7928  _price_strategy(
+00007450: 6761 735f 7072 6963 655f 7374 7261 7465  gas_price_strate
+00007460: 6779 290a 0a20 2020 2020 2020 2074 786e  gy)..        txn
+00007470: 5f68 6173 6820 3d20 6177 6169 7420 6173  _hash = await as
+00007480: 796e 635f 7733 2e65 7468 2e73 656e 645f  ync_w3.eth.send_
+00007490: 7472 616e 7361 6374 696f 6e28 7478 6e5f  transaction(txn_
+000074a0: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+000074b0: 7478 6e20 3d20 6177 6169 7420 6173 796e  txn = await asyn
+000074c0: 635f 7733 2e65 7468 2e67 6574 5f74 7261  c_w3.eth.get_tra
+000074d0: 6e73 6163 7469 6f6e 2874 786e 5f68 6173  nsaction(txn_has
+000074e0: 6829 0a0a 2020 2020 2020 2020 6c61 7465  h)..        late
+000074f0: 7374 5f62 6c6f 636b 203d 2061 7761 6974  st_block = await
+00007500: 2061 7379 6e63 5f77 332e 6574 682e 6765   async_w3.eth.ge
+00007510: 745f 626c 6f63 6b28 226c 6174 6573 7422  t_block("latest"
+00007520: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+00007530: 2028 0a20 2020 2020 2020 2020 2020 2074   (.            t
+00007540: 786e 5b22 6d61 7846 6565 5065 7247 6173  xn["maxFeePerGas
+00007550: 225d 203d 3d20 6d61 785f 6665 650a 2020  "] == max_fee.  
+00007560: 2020 2020 2020 2020 2020 6966 206d 6178            if max
+00007570: 5f66 6565 2069 7320 6e6f 7420 4e6f 6e65  _fee is not None
+00007580: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00007590: 6520 3220 2a20 6c61 7465 7374 5f62 6c6f  e 2 * latest_blo
+000075a0: 636b 5b22 6261 7365 4665 6550 6572 4761  ck["baseFeePerGa
+000075b0: 7322 5d20 2b20 6d61 785f 7072 696f 7269  s"] + max_priori
+000075c0: 7479 5f66 6565 0a20 2020 2020 2020 2029  ty_fee.        )
+000075d0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+000075e0: 7478 6e5b 226d 6178 5072 696f 7269 7479  txn["maxPriority
+000075f0: 4665 6550 6572 4761 7322 5d20 3d3d 206d  FeePerGas"] == m
+00007600: 6178 5f70 7269 6f72 6974 795f 6665 650a  ax_priority_fee.
+00007610: 2020 2020 2020 2020 6173 7365 7274 2074          assert t
+00007620: 786e 5b22 6761 7350 7269 6365 225d 203d  xn["gasPrice"] =
+00007630: 3d20 7478 6e5b 226d 6178 4665 6550 6572  = txn["maxFeePer
+00007640: 4761 7322 5d0a 0a20 2020 2020 2020 2061  Gas"]..        a
+00007650: 7379 6e63 5f77 332e 6574 682e 7365 745f  sync_w3.eth.set_
+00007660: 6761 735f 7072 6963 655f 7374 7261 7465  gas_price_strate
+00007670: 6779 284e 6f6e 6529 2020 2320 7265 7365  gy(None)  # rese
+00007680: 7420 7374 7261 7465 6779 0a0a 2020 2020  t strategy..    
+00007690: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
+000076a0: 6e63 696f 0a20 2020 2061 7379 6e63 2064  ncio.    async d
+000076b0: 6566 2074 6573 745f 6761 735f 7072 6963  ef test_gas_pric
+000076c0: 655f 6672 6f6d 5f73 7472 6174 6567 795f  e_from_strategy_
+000076d0: 6279 7061 7373 6564 5f66 6f72 5f64 796e  bypassed_for_dyn
+000076e0: 616d 6963 5f66 6565 5f74 786e 5f6e 6f5f  amic_fee_txn_no_
+000076f0: 7469 7028 0a20 2020 2020 2020 2073 656c  tip(.        sel
+00007700: 662c 0a20 2020 2020 2020 2061 7379 6e63  f,.        async
+00007710: 5f77 333a 2022 4173 796e 6357 6562 3322  _w3: "AsyncWeb3"
+00007720: 2c0a 2020 2020 2020 2020 6173 796e 635f  ,.        async_
+00007730: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+00007740: 5f64 7561 6c5f 7479 7065 3a20 4368 6563  _dual_type: Chec
+00007750: 6b73 756d 4164 6472 6573 732c 0a20 2020  ksumAddress,.   
+00007760: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
+00007770: 2020 2020 7478 6e5f 7061 7261 6d73 3a20      txn_params: 
+00007780: 5478 5061 7261 6d73 203d 207b 0a20 2020  TxParams = {.   
+00007790: 2020 2020 2020 2020 2022 6672 6f6d 223a           "from":
+000077a0: 2061 7379 6e63 5f75 6e6c 6f63 6b65 645f   async_unlocked_
+000077b0: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
+000077c0: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
+000077d0: 746f 223a 2061 7379 6e63 5f75 6e6c 6f63  to": async_unloc
+000077e0: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+000077f0: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
+00007800: 2020 2022 7661 6c75 6522 3a20 5765 6928     "value": Wei(
+00007810: 3129 2c0a 2020 2020 2020 2020 2020 2020  1),.            
+00007820: 2267 6173 223a 2032 3130 3030 2c0a 2020  "gas": 21000,.  
+00007830: 2020 2020 2020 2020 2020 226d 6178 4665            "maxFe
+00007840: 6550 6572 4761 7322 3a20 5765 6928 3130  ePerGas": Wei(10
+00007850: 3030 3030 3030 3030 292c 0a20 2020 2020  00000000),.     
+00007860: 2020 207d 0a0a 2020 2020 2020 2020 6465     }..        de
+00007870: 6620 6761 735f 7072 6963 655f 7374 7261  f gas_price_stra
+00007880: 7465 6779 285f 7733 3a20 2257 6562 3322  tegy(_w3: "Web3"
+00007890: 2c20 5f74 786e 3a20 5478 5061 7261 6d73  , _txn: TxParams
+000078a0: 2920 2d3e 2057 6569 3a0a 2020 2020 2020  ) -> Wei:.      
+000078b0: 2020 2020 2020 7265 7475 726e 2061 7379        return asy
+000078c0: 6e63 5f77 332e 746f 5f77 6569 2832 2c20  nc_w3.to_wei(2, 
+000078d0: 2267 7765 6922 290a 0a20 2020 2020 2020  "gwei")..       
+000078e0: 2061 7379 6e63 5f77 332e 6574 682e 7365   async_w3.eth.se
+000078f0: 745f 6761 735f 7072 6963 655f 7374 7261  t_gas_price_stra
+00007900: 7465 6779 2867 6173 5f70 7269 6365 5f73  tegy(gas_price_s
+00007910: 7472 6174 6567 7929 0a0a 2020 2020 2020  trategy)..      
+00007920: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
+00007930: 6973 6573 280a 2020 2020 2020 2020 2020  ises(.          
+00007940: 2020 496e 7661 6c69 6454 7261 6e73 6163    InvalidTransac
+00007950: 7469 6f6e 2c20 6d61 7463 683d 226d 6178  tion, match="max
+00007960: 5072 696f 7269 7479 4665 6550 6572 4761  PriorityFeePerGa
+00007970: 7320 6d75 7374 2062 6520 6465 6669 6e65  s must be define
+00007980: 6422 0a20 2020 2020 2020 2029 3a0a 2020  d".        ):.  
+00007990: 2020 2020 2020 2020 2020 6177 6169 7420            await 
+000079a0: 6173 796e 635f 7733 2e65 7468 2e73 656e  async_w3.eth.sen
+000079b0: 645f 7472 616e 7361 6374 696f 6e28 7478  d_transaction(tx
+000079c0: 6e5f 7061 7261 6d73 290a 0a20 2020 2020  n_params)..     
+000079d0: 2020 2061 7379 6e63 5f77 332e 6574 682e     async_w3.eth.
+000079e0: 7365 745f 6761 735f 7072 6963 655f 7374  set_gas_price_st
+000079f0: 7261 7465 6779 284e 6f6e 6529 2020 2320  rategy(None)  # 
+00007a00: 7265 7365 7420 7374 7261 7465 6779 0a0a  reset strategy..
+00007a10: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
+00007a20: 2e61 7379 6e63 696f 0a20 2020 2061 7379  .asyncio.    asy
+00007a30: 6e63 2064 6566 2074 6573 745f 6574 685f  nc def test_eth_
+00007a40: 6573 7469 6d61 7465 5f67 6173 280a 2020  estimate_gas(.  
+00007a50: 2020 2020 2020 7365 6c66 2c20 6173 796e        self, asyn
+00007a60: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
+00007a70: 222c 2061 7379 6e63 5f75 6e6c 6f63 6b65  ", async_unlocke
+00007a80: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
+00007a90: 7970 653a 2043 6865 636b 7375 6d41 6464  ype: ChecksumAdd
+00007aa0: 7265 7373 0a20 2020 2029 202d 3e20 4e6f  ress.    ) -> No
+00007ab0: 6e65 3a0a 2020 2020 2020 2020 6761 735f  ne:.        gas_
+00007ac0: 6573 7469 6d61 7465 203d 2061 7761 6974  estimate = await
+00007ad0: 2061 7379 6e63 5f77 332e 6574 682e 6573   async_w3.eth.es
+00007ae0: 7469 6d61 7465 5f67 6173 280a 2020 2020  timate_gas(.    
+00007af0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+00007b00: 2020 2020 2020 2020 2020 2266 726f 6d22            "from"
+00007b10: 3a20 6173 796e 635f 756e 6c6f 636b 6564  : async_unlocked
+00007b20: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
+00007b30: 7065 2c0a 2020 2020 2020 2020 2020 2020  pe,.            
+00007b40: 2020 2020 2274 6f22 3a20 6173 796e 635f      "to": async_
+00007b50: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+00007b60: 5f64 7561 6c5f 7479 7065 2c0a 2020 2020  _dual_type,.    
+00007b70: 2020 2020 2020 2020 2020 2020 2276 616c              "val
+00007b80: 7565 223a 2057 6569 2831 292c 0a20 2020  ue": Wei(1),.   
+00007b90: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+00007ba0: 2020 2029 0a20 2020 2020 2020 2061 7373     ).        ass
+00007bb0: 6572 7420 6973 5f69 6e74 6567 6572 2867  ert is_integer(g
+00007bc0: 6173 5f65 7374 696d 6174 6529 0a20 2020  as_estimate).   
+00007bd0: 2020 2020 2061 7373 6572 7420 6761 735f       assert gas_
+00007be0: 6573 7469 6d61 7465 203e 2030 0a0a 2020  estimate > 0..  
+00007bf0: 2020 4070 7974 6573 742e 6d61 726b 2e61    @pytest.mark.a
+00007c00: 7379 6e63 696f 0a20 2020 2061 7379 6e63  syncio.    async
+00007c10: 2064 6566 2074 6573 745f 6574 685f 6665   def test_eth_fe
+00007c20: 655f 6869 7374 6f72 7928 7365 6c66 2c20  e_history(self, 
+00007c30: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
+00007c40: 5765 6233 2229 202d 3e20 4e6f 6e65 3a0a  Web3") -> None:.
+00007c50: 2020 2020 2020 2020 6665 655f 6869 7374          fee_hist
+00007c60: 6f72 7920 3d20 6177 6169 7420 6173 796e  ory = await asyn
+00007c70: 635f 7733 2e65 7468 2e66 6565 5f68 6973  c_w3.eth.fee_his
+00007c80: 746f 7279 2831 2c20 226c 6174 6573 7422  tory(1, "latest"
+00007c90: 2c20 5b35 305d 290a 2020 2020 2020 2020  , [50]).        
+00007ca0: 6173 7365 7274 2069 735f 6c69 7374 5f6c  assert is_list_l
+00007cb0: 696b 6528 6665 655f 6869 7374 6f72 795b  ike(fee_history[
+00007cc0: 2262 6173 6546 6565 5065 7247 6173 225d  "baseFeePerGas"]
+00007cd0: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+00007ce0: 2069 735f 6c69 7374 5f6c 696b 6528 6665   is_list_like(fe
+00007cf0: 655f 6869 7374 6f72 795b 2267 6173 5573  e_history["gasUs
+00007d00: 6564 5261 7469 6f22 5d29 0a20 2020 2020  edRatio"]).     
+00007d10: 2020 2061 7373 6572 7420 6973 5f69 6e74     assert is_int
+00007d20: 6567 6572 2866 6565 5f68 6973 746f 7279  eger(fee_history
+00007d30: 5b22 6f6c 6465 7374 426c 6f63 6b22 5d29  ["oldestBlock"])
+00007d40: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00007d50: 6665 655f 6869 7374 6f72 795b 226f 6c64  fee_history["old
+00007d60: 6573 7442 6c6f 636b 225d 203e 3d20 300a  estBlock"] >= 0.
+00007d70: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+00007d80: 735f 6c69 7374 5f6c 696b 6528 6665 655f  s_list_like(fee_
+00007d90: 6869 7374 6f72 795b 2272 6577 6172 6422  history["reward"
+00007da0: 5d29 0a20 2020 2020 2020 2061 7373 6572  ]).        asser
+00007db0: 7420 6973 5f6c 6973 745f 6c69 6b65 2866  t is_list_like(f
+00007dc0: 6565 5f68 6973 746f 7279 5b22 7265 7761  ee_history["rewa
+00007dd0: 7264 225d 5b30 5d29 0a0a 2020 2020 4070  rd"][0])..    @p
+00007de0: 7974 6573 742e 6d61 726b 2e61 7379 6e63  ytest.mark.async
+00007df0: 696f 0a20 2020 2061 7379 6e63 2064 6566  io.    async def
+00007e00: 2074 6573 745f 6574 685f 6665 655f 6869   test_eth_fee_hi
+00007e10: 7374 6f72 795f 7769 7468 5f69 6e74 6567  story_with_integ
+00007e20: 6572 280a 2020 2020 2020 2020 7365 6c66  er(.        self
+00007e30: 2c20 6173 796e 635f 7733 3a20 2241 7379  , async_w3: "Asy
+00007e40: 6e63 5765 6233 222c 2061 7379 6e63 5f65  ncWeb3", async_e
+00007e50: 6d70 7479 5f62 6c6f 636b 3a20 426c 6f63  mpty_block: Bloc
+00007e60: 6b44 6174 610a 2020 2020 2920 2d3e 204e  kData.    ) -> N
+00007e70: 6f6e 653a 0a20 2020 2020 2020 2066 6565  one:.        fee
+00007e80: 5f68 6973 746f 7279 203d 2061 7761 6974  _history = await
+00007e90: 2061 7379 6e63 5f77 332e 6574 682e 6665   async_w3.eth.fe
+00007ea0: 655f 6869 7374 6f72 7928 0a20 2020 2020  e_history(.     
+00007eb0: 2020 2020 2020 2031 2c20 6173 796e 635f         1, async_
+00007ec0: 656d 7074 795f 626c 6f63 6b5b 226e 756d  empty_block["num
+00007ed0: 6265 7222 5d2c 205b 3530 5d0a 2020 2020  ber"], [50].    
+00007ee0: 2020 2020 290a 2020 2020 2020 2020 6173      ).        as
+00007ef0: 7365 7274 2069 735f 6c69 7374 5f6c 696b  sert is_list_lik
+00007f00: 6528 6665 655f 6869 7374 6f72 795b 2262  e(fee_history["b
+00007f10: 6173 6546 6565 5065 7247 6173 225d 290a  aseFeePerGas"]).
+00007f20: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+00007f30: 735f 6c69 7374 5f6c 696b 6528 6665 655f  s_list_like(fee_
+00007f40: 6869 7374 6f72 795b 2267 6173 5573 6564  history["gasUsed
+00007f50: 5261 7469 6f22 5d29 0a20 2020 2020 2020  Ratio"]).       
+00007f60: 2061 7373 6572 7420 6973 5f69 6e74 6567   assert is_integ
+00007f70: 6572 2866 6565 5f68 6973 746f 7279 5b22  er(fee_history["
+00007f80: 6f6c 6465 7374 426c 6f63 6b22 5d29 0a20  oldestBlock"]). 
+00007f90: 2020 2020 2020 2061 7373 6572 7420 6665         assert fe
+00007fa0: 655f 6869 7374 6f72 795b 226f 6c64 6573  e_history["oldes
+00007fb0: 7442 6c6f 636b 225d 203e 3d20 300a 2020  tBlock"] >= 0.  
+00007fc0: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+00007fd0: 6c69 7374 5f6c 696b 6528 6665 655f 6869  list_like(fee_hi
+00007fe0: 7374 6f72 795b 2272 6577 6172 6422 5d29  story["reward"])
+00007ff0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00008000: 6973 5f6c 6973 745f 6c69 6b65 2866 6565  is_list_like(fee
+00008010: 5f68 6973 746f 7279 5b22 7265 7761 7264  _history["reward
+00008020: 225d 5b30 5d29 0a0a 2020 2020 4070 7974  "][0])..    @pyt
+00008030: 6573 742e 6d61 726b 2e61 7379 6e63 696f  est.mark.asyncio
+00008040: 0a20 2020 2061 7379 6e63 2064 6566 2074  .    async def t
+00008050: 6573 745f 6574 685f 6665 655f 6869 7374  est_eth_fee_hist
+00008060: 6f72 795f 6e6f 5f72 6577 6172 645f 7065  ory_no_reward_pe
+00008070: 7263 656e 7469 6c65 7328 0a20 2020 2020  rcentiles(.     
+00008080: 2020 2073 656c 662c 2061 7379 6e63 5f77     self, async_w
+00008090: 333a 2022 4173 796e 6357 6562 3322 0a20  3: "AsyncWeb3". 
+000080a0: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
+000080b0: 2020 2020 2020 6665 655f 6869 7374 6f72        fee_histor
+000080c0: 7920 3d20 6177 6169 7420 6173 796e 635f  y = await async_
+000080d0: 7733 2e65 7468 2e66 6565 5f68 6973 746f  w3.eth.fee_histo
+000080e0: 7279 2831 2c20 226c 6174 6573 7422 290a  ry(1, "latest").
+000080f0: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+00008100: 735f 6c69 7374 5f6c 696b 6528 6665 655f  s_list_like(fee_
+00008110: 6869 7374 6f72 795b 2262 6173 6546 6565  history["baseFee
+00008120: 5065 7247 6173 225d 290a 2020 2020 2020  PerGas"]).      
+00008130: 2020 6173 7365 7274 2069 735f 6c69 7374    assert is_list
+00008140: 5f6c 696b 6528 6665 655f 6869 7374 6f72  _like(fee_histor
+00008150: 795b 2267 6173 5573 6564 5261 7469 6f22  y["gasUsedRatio"
+00008160: 5d29 0a20 2020 2020 2020 2061 7373 6572  ]).        asser
+00008170: 7420 6973 5f69 6e74 6567 6572 2866 6565  t is_integer(fee
+00008180: 5f68 6973 746f 7279 5b22 6f6c 6465 7374  _history["oldest
+00008190: 426c 6f63 6b22 5d29 0a20 2020 2020 2020  Block"]).       
+000081a0: 2061 7373 6572 7420 6665 655f 6869 7374   assert fee_hist
+000081b0: 6f72 795b 226f 6c64 6573 7442 6c6f 636b  ory["oldestBlock
+000081c0: 225d 203e 3d20 300a 0a20 2020 2040 7079  "] >= 0..    @py
+000081d0: 7465 7374 2e6d 6172 6b2e 6173 796e 6369  test.mark.asynci
+000081e0: 6f0a 2020 2020 6173 796e 6320 6465 6620  o.    async def 
+000081f0: 7465 7374 5f65 7468 5f6d 6178 5f70 7269  test_eth_max_pri
+00008200: 6f72 6974 795f 6665 6528 7365 6c66 2c20  ority_fee(self, 
+00008210: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
+00008220: 5765 6233 2229 202d 3e20 4e6f 6e65 3a0a  Web3") -> None:.
+00008230: 2020 2020 2020 2020 6d61 785f 7072 696f          max_prio
+00008240: 7269 7479 5f66 6565 203d 2061 7761 6974  rity_fee = await
+00008250: 2061 7379 6e63 5f77 332e 6574 682e 6d61   async_w3.eth.ma
+00008260: 785f 7072 696f 7269 7479 5f66 6565 0a20  x_priority_fee. 
+00008270: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+00008280: 5f69 6e74 6567 6572 286d 6178 5f70 7269  _integer(max_pri
+00008290: 6f72 6974 795f 6665 6529 0a0a 2020 2020  ority_fee)..    
+000082a0: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
+000082b0: 6e63 696f 0a20 2020 2061 7379 6e63 2064  ncio.    async d
+000082c0: 6566 2074 6573 745f 6574 685f 6d61 785f  ef test_eth_max_
+000082d0: 7072 696f 7269 7479 5f66 6565 5f77 6974  priority_fee_wit
+000082e0: 685f 6665 655f 6869 7374 6f72 795f 6361  h_fee_history_ca
+000082f0: 6c63 756c 6174 696f 6e5f 6572 726f 725f  lculation_error_
+00008300: 6469 6374 280a 2020 2020 2020 2020 7365  dict(.        se
+00008310: 6c66 2c20 6173 796e 635f 7733 3a20 2241  lf, async_w3: "A
+00008320: 7379 6e63 5765 6233 220a 2020 2020 2920  syncWeb3".    ) 
+00008330: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+00008340: 2066 6169 6c5f 6d61 785f 7072 696f 5f6d   fail_max_prio_m
+00008350: 6964 646c 6577 6172 6520 3d20 6177 6169  iddleware = awai
+00008360: 7420 6173 796e 635f 636f 6e73 7472 7563  t async_construc
+00008370: 745f 6572 726f 725f 6765 6e65 7261 746f  t_error_generato
+00008380: 725f 6d69 6464 6c65 7761 7265 280a 2020  r_middleware(.  
+00008390: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+000083a0: 2020 2020 2020 2020 2020 2020 5250 4345              RPCE
+000083b0: 6e64 706f 696e 7428 2265 7468 5f6d 6178  ndpoint("eth_max
+000083c0: 5072 696f 7269 7479 4665 6550 6572 4761  PriorityFeePerGa
+000083d0: 7322 293a 206c 616d 6264 6120 2a5f 3a20  s"): lambda *_: 
+000083e0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+000083f0: 2020 2020 2020 2265 7272 6f72 223a 207b        "error": {
+00008400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008410: 2020 2020 2020 2020 2022 636f 6465 223a           "code":
+00008420: 202d 3332 3630 312c 0a20 2020 2020 2020   -32601,.       
+00008430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008440: 2022 6d65 7373 6167 6522 3a20 280a 2020   "message": (.  
+00008450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008460: 2020 2020 2020 2020 2020 2254 6865 206d            "The m
+00008470: 6574 686f 6420 6574 685f 6d61 7850 7269  ethod eth_maxPri
+00008480: 6f72 6974 7946 6565 5065 7247 6173 2064  orityFeePerGas d
+00008490: 6f65 7320 220a 2020 2020 2020 2020 2020  oes ".          
+000084a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000084b0: 2020 226e 6f74 2065 7869 7374 2f69 7320    "not exist/is 
+000084c0: 6e6f 7420 6176 6169 6c61 626c 6522 0a20  not available". 
+000084d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000084e0: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
+000084f0: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+00008500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008510: 7d0a 2020 2020 2020 2020 2020 2020 7d0a  }.            }.
+00008520: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00008530: 2020 6173 796e 635f 7733 2e6d 6964 646c    async_w3.middl
+00008540: 6577 6172 655f 6f6e 696f 6e2e 6164 6428  eware_onion.add(
+00008550: 0a20 2020 2020 2020 2020 2020 2066 6169  .            fai
+00008560: 6c5f 6d61 785f 7072 696f 5f6d 6964 646c  l_max_prio_middl
+00008570: 6577 6172 652c 206e 616d 653d 2266 6169  eware, name="fai
+00008580: 6c5f 6d61 785f 7072 696f 5f6d 6964 646c  l_max_prio_middl
+00008590: 6577 6172 6522 0a20 2020 2020 2020 2029  eware".        )
+000085a0: 0a0a 2020 2020 2020 2020 7769 7468 2070  ..        with p
+000085b0: 7974 6573 742e 7761 726e 7328 0a20 2020  ytest.warns(.   
+000085c0: 2020 2020 2020 2020 2055 7365 7257 6172           UserWar
+000085d0: 6e69 6e67 2c0a 2020 2020 2020 2020 2020  ning,.          
+000085e0: 2020 6d61 7463 683d 280a 2020 2020 2020    match=(.      
+000085f0: 2020 2020 2020 2020 2020 2254 6865 7265            "There
+00008600: 2077 6173 2061 6e20 6973 7375 6520 7769   was an issue wi
+00008610: 7468 2074 6865 206d 6574 686f 6420 6574  th the method et
+00008620: 685f 6d61 7850 7269 6f72 6974 7946 6565  h_maxPriorityFee
+00008630: 5065 7247 6173 2e22 0a20 2020 2020 2020  PerGas.".       
+00008640: 2020 2020 2020 2020 2022 2043 616c 6375           " Calcu
+00008650: 6c61 7469 6e67 2075 7369 6e67 2065 7468  lating using eth
+00008660: 5f66 6565 4869 7374 6f72 792e 220a 2020  _feeHistory.".  
+00008670: 2020 2020 2020 2020 2020 292c 0a20 2020            ),.   
+00008680: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
+00008690: 2020 2020 6177 6169 7420 6173 796e 635f      await async_
+000086a0: 7733 2e65 7468 2e6d 6178 5f70 7269 6f72  w3.eth.max_prior
+000086b0: 6974 795f 6665 650a 0a20 2020 2020 2020  ity_fee..       
+000086c0: 2061 7379 6e63 5f77 332e 6d69 6464 6c65   async_w3.middle
+000086d0: 7761 7265 5f6f 6e69 6f6e 2e72 656d 6f76  ware_onion.remov
+000086e0: 6528 2266 6169 6c5f 6d61 785f 7072 696f  e("fail_max_prio
+000086f0: 5f6d 6964 646c 6577 6172 6522 2920 2023  _middleware")  #
+00008700: 2063 6c65 616e 2075 700a 0a20 2020 2040   clean up..    @
+00008710: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
+00008720: 6369 6f0a 2020 2020 6173 796e 6320 6465  cio.    async de
+00008730: 6620 7465 7374 5f65 7468 5f6d 6178 5f70  f test_eth_max_p
+00008740: 7269 6f72 6974 795f 6665 655f 7769 7468  riority_fee_with
+00008750: 5f66 6565 5f68 6973 746f 7279 5f63 616c  _fee_history_cal
+00008760: 6375 6c61 7469 6f6e 280a 2020 2020 2020  culation(.      
+00008770: 2020 7365 6c66 2c20 6173 796e 635f 7733    self, async_w3
+00008780: 3a20 2241 7379 6e63 5765 6233 220a 2020  : "AsyncWeb3".  
+00008790: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+000087a0: 2020 2020 2066 6169 6c5f 6d61 785f 7072       fail_max_pr
+000087b0: 696f 5f6d 6964 646c 6577 6172 6520 3d20  io_middleware = 
+000087c0: 6177 6169 7420 6173 796e 635f 636f 6e73  await async_cons
+000087d0: 7472 7563 745f 6572 726f 725f 6765 6e65  truct_error_gene
+000087e0: 7261 746f 725f 6d69 6464 6c65 7761 7265  rator_middleware
+000087f0: 280a 2020 2020 2020 2020 2020 2020 7b52  (.            {R
+00008800: 5043 456e 6470 6f69 6e74 2822 6574 685f  PCEndpoint("eth_
+00008810: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
+00008820: 7247 6173 2229 3a20 6c61 6d62 6461 202a  rGas"): lambda *
+00008830: 5f3a 2022 227d 0a20 2020 2020 2020 2029  _: ""}.        )
+00008840: 0a20 2020 2020 2020 2061 7379 6e63 5f77  .        async_w
+00008850: 332e 6d69 6464 6c65 7761 7265 5f6f 6e69  3.middleware_oni
+00008860: 6f6e 2e61 6464 280a 2020 2020 2020 2020  on.add(.        
+00008870: 2020 2020 6661 696c 5f6d 6178 5f70 7269      fail_max_pri
+00008880: 6f5f 6d69 6464 6c65 7761 7265 2c20 6e61  o_middleware, na
+00008890: 6d65 3d22 6661 696c 5f6d 6178 5f70 7269  me="fail_max_pri
+000088a0: 6f5f 6d69 6464 6c65 7761 7265 220a 2020  o_middleware".  
+000088b0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+000088c0: 2077 6974 6820 7079 7465 7374 2e77 6172   with pytest.war
+000088d0: 6e73 280a 2020 2020 2020 2020 2020 2020  ns(.            
+000088e0: 5573 6572 5761 726e 696e 672c 0a20 2020  UserWarning,.   
+000088f0: 2020 2020 2020 2020 206d 6174 6368 3d28           match=(
+00008900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008910: 2022 5468 6572 6520 7761 7320 616e 2069   "There was an i
+00008920: 7373 7565 2077 6974 6820 7468 6520 6d65  ssue with the me
+00008930: 7468 6f64 2065 7468 5f6d 6178 5072 696f  thod eth_maxPrio
+00008940: 7269 7479 4665 6550 6572 4761 732e 2022  rityFeePerGas. "
+00008950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008960: 2022 4361 6c63 756c 6174 696e 6720 7573   "Calculating us
+00008970: 696e 6720 6574 685f 6665 6548 6973 746f  ing eth_feeHisto
+00008980: 7279 2e22 0a20 2020 2020 2020 2020 2020  ry.".           
+00008990: 2029 2c0a 2020 2020 2020 2020 293a 0a20   ),.        ):. 
+000089a0: 2020 2020 2020 2020 2020 206d 6178 5f70             max_p
+000089b0: 7269 6f72 6974 795f 6665 6520 3d20 6177  riority_fee = aw
+000089c0: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
+000089d0: 2e6d 6178 5f70 7269 6f72 6974 795f 6665  .max_priority_fe
+000089e0: 650a 2020 2020 2020 2020 2020 2020 6173  e.            as
+000089f0: 7365 7274 2069 735f 696e 7465 6765 7228  sert is_integer(
+00008a00: 6d61 785f 7072 696f 7269 7479 5f66 6565  max_priority_fee
+00008a10: 290a 0a20 2020 2020 2020 2061 7379 6e63  )..        async
+00008a20: 5f77 332e 6d69 6464 6c65 7761 7265 5f6f  _w3.middleware_o
+00008a30: 6e69 6f6e 2e72 656d 6f76 6528 2266 6169  nion.remove("fai
+00008a40: 6c5f 6d61 785f 7072 696f 5f6d 6964 646c  l_max_prio_middl
+00008a50: 6577 6172 6522 2920 2023 2063 6c65 616e  eware")  # clean
+00008a60: 2075 700a 0a20 2020 2040 7079 7465 7374   up..    @pytest
+00008a70: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
+00008a80: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
+00008a90: 5f65 7468 5f67 6574 426c 6f63 6b42 7948  _eth_getBlockByH
+00008aa0: 6173 6828 0a20 2020 2020 2020 2073 656c  ash(.        sel
+00008ab0: 662c 2061 7379 6e63 5f77 333a 2022 4173  f, async_w3: "As
+00008ac0: 796e 6357 6562 3322 2c20 6173 796e 635f  yncWeb3", async_
+00008ad0: 656d 7074 795f 626c 6f63 6b3a 2042 6c6f  empty_block: Blo
+00008ae0: 636b 4461 7461 0a20 2020 2029 202d 3e20  ckData.    ) -> 
+00008af0: 4e6f 6e65 3a0a 2020 2020 2020 2020 626c  None:.        bl
+00008b00: 6f63 6b20 3d20 6177 6169 7420 6173 796e  ock = await asyn
+00008b10: 635f 7733 2e65 7468 2e67 6574 5f62 6c6f  c_w3.eth.get_blo
+00008b20: 636b 2861 7379 6e63 5f65 6d70 7479 5f62  ck(async_empty_b
+00008b30: 6c6f 636b 5b22 6861 7368 225d 290a 2020  lock["hash"]).  
+00008b40: 2020 2020 2020 6173 7365 7274 2062 6c6f        assert blo
+00008b50: 636b 5b22 6861 7368 225d 203d 3d20 6173  ck["hash"] == as
+00008b60: 796e 635f 656d 7074 795f 626c 6f63 6b5b  ync_empty_block[
+00008b70: 2268 6173 6822 5d0a 0a20 2020 2040 7079  "hash"]..    @py
+00008b80: 7465 7374 2e6d 6172 6b2e 6173 796e 6369  test.mark.asynci
+00008b90: 6f0a 2020 2020 6173 796e 6320 6465 6620  o.    async def 
+00008ba0: 7465 7374 5f65 7468 5f67 6574 426c 6f63  test_eth_getBloc
+00008bb0: 6b42 7948 6173 685f 6e6f 745f 666f 756e  kByHash_not_foun
+00008bc0: 6428 7365 6c66 2c20 6173 796e 635f 7733  d(self, async_w3
+00008bd0: 3a20 2241 7379 6e63 5765 6233 2229 202d  : "AsyncWeb3") -
+00008be0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00008bf0: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
+00008c00: 6573 2842 6c6f 636b 4e6f 7446 6f75 6e64  es(BlockNotFound
+00008c10: 293a 0a20 2020 2020 2020 2020 2020 2061  ):.            a
+00008c20: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
+00008c30: 682e 6765 745f 626c 6f63 6b28 554e 4b4e  h.get_block(UNKN
+00008c40: 4f57 4e5f 4841 5348 290a 0a20 2020 2040  OWN_HASH)..    @
 00008c50: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
 00008c60: 6369 6f0a 2020 2020 6173 796e 6320 6465  cio.    async de
 00008c70: 6620 7465 7374 5f65 7468 5f67 6574 426c  f test_eth_getBl
-00008c80: 6f63 6b42 794e 756d 6265 725f 6561 726c  ockByNumber_earl
-00008c90: 6965 7374 280a 2020 2020 2020 2020 7365  iest(.        se
-00008ca0: 6c66 2c20 6173 796e 635f 7733 3a20 2241  lf, async_w3: "A
-00008cb0: 7379 6e63 5765 6233 222c 2065 6d70 7479  syncWeb3", empty
-00008cc0: 5f62 6c6f 636b 3a20 426c 6f63 6b44 6174  _block: BlockDat
-00008cd0: 610a 2020 2020 2920 2d3e 204e 6f6e 653a  a.    ) -> None:
-00008ce0: 0a20 2020 2020 2020 2067 656e 6573 6973  .        genesis
-00008cf0: 5f62 6c6f 636b 203d 2061 7761 6974 2061  _block = await a
-00008d00: 7379 6e63 5f77 332e 6574 682e 6765 745f  sync_w3.eth.get_
-00008d10: 626c 6f63 6b28 426c 6f63 6b4e 756d 6265  block(BlockNumbe
-00008d20: 7228 3029 290a 2020 2020 2020 2020 626c  r(0)).        bl
-00008d30: 6f63 6b20 3d20 6177 6169 7420 6173 796e  ock = await asyn
-00008d40: 635f 7733 2e65 7468 2e67 6574 5f62 6c6f  c_w3.eth.get_blo
-00008d50: 636b 2822 6561 726c 6965 7374 2229 0a20  ck("earliest"). 
-00008d60: 2020 2020 2020 2061 7373 6572 7420 626c         assert bl
-00008d70: 6f63 6b5b 226e 756d 6265 7222 5d20 3d3d  ock["number"] ==
-00008d80: 2030 0a20 2020 2020 2020 2061 7373 6572   0.        asser
-00008d90: 7420 626c 6f63 6b5b 2268 6173 6822 5d20  t block["hash"] 
-00008da0: 3d3d 2067 656e 6573 6973 5f62 6c6f 636b  == genesis_block
-00008db0: 5b22 6861 7368 225d 0a0a 2020 2020 4070  ["hash"]..    @p
-00008dc0: 7974 6573 742e 6d61 726b 2e61 7379 6e63  ytest.mark.async
-00008dd0: 696f 0a20 2020 2040 7079 7465 7374 2e6d  io.    @pytest.m
-00008de0: 6172 6b2e 7866 6169 6c28 7265 6173 6f6e  ark.xfail(reason
-00008df0: 3d22 496e 7465 6772 6174 696f 6e20 7465  ="Integration te
-00008e00: 7374 2073 7569 7465 206e 6f74 2079 6574  st suite not yet
-00008e10: 2073 6574 2075 7020 666f 7220 506f 5322   set up for PoS"
-00008e20: 290a 2020 2020 6173 796e 6320 6465 6620  ).    async def 
-00008e30: 7465 7374 5f65 7468 5f67 6574 426c 6f63  test_eth_getBloc
-00008e40: 6b42 794e 756d 6265 725f 7361 6665 280a  kByNumber_safe(.
-00008e50: 2020 2020 2020 2020 7365 6c66 2c20 6173          self, as
-00008e60: 796e 635f 7733 3a20 2241 7379 6e63 5765  ync_w3: "AsyncWe
-00008e70: 6233 222c 2065 6d70 7479 5f62 6c6f 636b  b3", empty_block
-00008e80: 3a20 426c 6f63 6b44 6174 610a 2020 2020  : BlockData.    
-00008e90: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-00008ea0: 2020 2062 6c6f 636b 203d 2061 7761 6974     block = await
-00008eb0: 2061 7379 6e63 5f77 332e 6574 682e 6765   async_w3.eth.ge
-00008ec0: 745f 626c 6f63 6b28 2273 6166 6522 290a  t_block("safe").
-00008ed0: 2020 2020 2020 2020 6173 7365 7274 2062          assert b
-00008ee0: 6c6f 636b 2069 7320 6e6f 7420 4e6f 6e65  lock is not None
-00008ef0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00008f00: 6973 696e 7374 616e 6365 2862 6c6f 636b  isinstance(block
-00008f10: 5b22 6e75 6d62 6572 225d 2c20 696e 7429  ["number"], int)
-00008f20: 0a0a 2020 2020 4070 7974 6573 742e 6d61  ..    @pytest.ma
-00008f30: 726b 2e61 7379 6e63 696f 0a20 2020 2040  rk.asyncio.    @
-00008f40: 7079 7465 7374 2e6d 6172 6b2e 7866 6169  pytest.mark.xfai
-00008f50: 6c28 7265 6173 6f6e 3d22 496e 7465 6772  l(reason="Integr
-00008f60: 6174 696f 6e20 7465 7374 2073 7569 7465  ation test suite
-00008f70: 206e 6f74 2079 6574 2073 6574 2075 7020   not yet set up 
-00008f80: 666f 7220 506f 5322 290a 2020 2020 6173  for PoS").    as
-00008f90: 796e 6320 6465 6620 7465 7374 5f65 7468  ync def test_eth
-00008fa0: 5f67 6574 426c 6f63 6b42 794e 756d 6265  _getBlockByNumbe
-00008fb0: 725f 6669 6e61 6c69 7a65 6428 0a20 2020  r_finalized(.   
-00008fc0: 2020 2020 2073 656c 662c 2061 7379 6e63       self, async
-00008fd0: 5f77 333a 2022 4173 796e 6357 6562 3322  _w3: "AsyncWeb3"
-00008fe0: 2c20 656d 7074 795f 626c 6f63 6b3a 2042  , empty_block: B
-00008ff0: 6c6f 636b 4461 7461 0a20 2020 2029 202d  lockData.    ) -
-00009000: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-00009010: 626c 6f63 6b20 3d20 6177 6169 7420 6173  block = await as
-00009020: 796e 635f 7733 2e65 7468 2e67 6574 5f62  ync_w3.eth.get_b
-00009030: 6c6f 636b 2822 6669 6e61 6c69 7a65 6422  lock("finalized"
-00009040: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-00009050: 2062 6c6f 636b 2069 7320 6e6f 7420 4e6f   block is not No
-00009060: 6e65 0a20 2020 2020 2020 2061 7373 6572  ne.        asser
-00009070: 7420 6973 696e 7374 616e 6365 2862 6c6f  t isinstance(blo
-00009080: 636b 5b22 6e75 6d62 6572 225d 2c20 696e  ck["number"], in
-00009090: 7429 0a0a 2020 2020 4070 7974 6573 742e  t)..    @pytest.
-000090a0: 6d61 726b 2e61 7379 6e63 696f 0a20 2020  mark.asyncio.   
-000090b0: 2061 7379 6e63 2064 6566 2074 6573 745f   async def test_
-000090c0: 6574 685f 6765 745f 626c 6f63 6b5f 6279  eth_get_block_by
-000090d0: 5f6e 756d 6265 725f 6675 6c6c 5f74 7261  _number_full_tra
-000090e0: 6e73 6163 7469 6f6e 7328 0a20 2020 2020  nsactions(.     
-000090f0: 2020 2073 656c 662c 2061 7379 6e63 5f77     self, async_w
-00009100: 333a 2022 4173 796e 6357 6562 3322 2c20  3: "AsyncWeb3", 
-00009110: 626c 6f63 6b5f 7769 7468 5f74 786e 3a20  block_with_txn: 
-00009120: 426c 6f63 6b44 6174 610a 2020 2020 2920  BlockData.    ) 
-00009130: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-00009140: 2062 6c6f 636b 203d 2061 7761 6974 2061   block = await a
-00009150: 7379 6e63 5f77 332e 6574 682e 6765 745f  sync_w3.eth.get_
-00009160: 626c 6f63 6b28 626c 6f63 6b5f 7769 7468  block(block_with
-00009170: 5f74 786e 5b22 6e75 6d62 6572 225d 2c20  _txn["number"], 
-00009180: 5472 7565 290a 2020 2020 2020 2020 7472  True).        tr
-00009190: 616e 7361 6374 696f 6e20 3d20 6361 7374  ansaction = cast
-000091a0: 2854 7844 6174 612c 2062 6c6f 636b 5b22  (TxData, block["
-000091b0: 7472 616e 7361 6374 696f 6e73 225d 5b30  transactions"][0
-000091c0: 5d29 0a20 2020 2020 2020 2061 7373 6572  ]).        asser
-000091d0: 7420 7472 616e 7361 6374 696f 6e5b 2268  t transaction["h
-000091e0: 6173 6822 5d20 3d3d 2062 6c6f 636b 5f77  ash"] == block_w
-000091f0: 6974 685f 7478 6e5b 2274 7261 6e73 6163  ith_txn["transac
-00009200: 7469 6f6e 7322 5d5b 305d 0a0a 2020 2020  tions"][0]..    
-00009210: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
-00009220: 6e63 696f 0a20 2020 2061 7379 6e63 2064  ncio.    async d
-00009230: 6566 2074 6573 745f 6574 685f 6765 745f  ef test_eth_get_
-00009240: 7261 775f 7472 616e 7361 6374 696f 6e28  raw_transaction(
-00009250: 0a20 2020 2020 2020 2073 656c 662c 2061  .        self, a
-00009260: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
-00009270: 6562 3322 2c20 6d69 6e65 645f 7478 6e5f  eb3", mined_txn_
-00009280: 6861 7368 3a20 4865 7853 7472 0a20 2020  hash: HexStr.   
-00009290: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-000092a0: 2020 2020 7261 775f 7472 616e 7361 6374      raw_transact
-000092b0: 696f 6e20 3d20 6177 6169 7420 6173 796e  ion = await asyn
-000092c0: 635f 7733 2e65 7468 2e67 6574 5f72 6177  c_w3.eth.get_raw
-000092d0: 5f74 7261 6e73 6163 7469 6f6e 286d 696e  _transaction(min
-000092e0: 6564 5f74 786e 5f68 6173 6829 0a20 2020  ed_txn_hash).   
-000092f0: 2020 2020 2061 7373 6572 7420 6973 5f62       assert is_b
-00009300: 7974 6573 2872 6177 5f74 7261 6e73 6163  ytes(raw_transac
-00009310: 7469 6f6e 290a 0a20 2020 2040 7079 7465  tion)..    @pyte
-00009320: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
-00009330: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
-00009340: 7374 5f65 7468 5f67 6574 5f72 6177 5f74  st_eth_get_raw_t
-00009350: 7261 6e73 6163 7469 6f6e 5f72 6169 7365  ransaction_raise
-00009360: 735f 6572 726f 7228 0a20 2020 2020 2020  s_error(.       
-00009370: 2073 656c 662c 2061 7379 6e63 5f77 333a   self, async_w3:
-00009380: 2022 4173 796e 6357 6562 3322 0a20 2020   "AsyncWeb3".   
-00009390: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-000093a0: 2020 2020 7769 7468 2070 7974 6573 742e      with pytest.
-000093b0: 7261 6973 6573 280a 2020 2020 2020 2020  raises(.        
-000093c0: 2020 2020 5472 616e 7361 6374 696f 6e4e      TransactionN
-000093d0: 6f74 466f 756e 642c 206d 6174 6368 3d66  otFound, match=f
-000093e0: 2254 7261 6e73 6163 7469 6f6e 2077 6974  "Transaction wit
-000093f0: 6820 6861 7368 3a20 277b 554e 4b4e 4f57  h hash: '{UNKNOW
-00009400: 4e5f 4841 5348 7d27 220a 2020 2020 2020  N_HASH}'".      
-00009410: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
-00009420: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
-00009430: 6574 682e 6765 745f 7261 775f 7472 616e  eth.get_raw_tran
-00009440: 7361 6374 696f 6e28 554e 4b4e 4f57 4e5f  saction(UNKNOWN_
-00009450: 4841 5348 290a 0a20 2020 2040 7079 7465  HASH)..    @pyte
-00009460: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
-00009470: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
-00009480: 7374 5f65 7468 5f67 6574 5f72 6177 5f74  st_eth_get_raw_t
-00009490: 7261 6e73 6163 7469 6f6e 5f62 795f 626c  ransaction_by_bl
-000094a0: 6f63 6b28 0a20 2020 2020 2020 2073 656c  ock(.        sel
-000094b0: 662c 0a20 2020 2020 2020 2061 7379 6e63  f,.        async
-000094c0: 5f77 333a 2022 4173 796e 6357 6562 3322  _w3: "AsyncWeb3"
-000094d0: 2c0a 2020 2020 2020 2020 626c 6f63 6b5f  ,.        block_
-000094e0: 7769 7468 5f74 786e 3a20 426c 6f63 6b44  with_txn: BlockD
-000094f0: 6174 612c 0a20 2020 2020 2020 2075 6e6c  ata,.        unl
-00009500: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
-00009510: 616c 5f74 7970 653a 2043 6865 636b 7375  al_type: Checksu
-00009520: 6d41 6464 7265 7373 2c0a 2020 2020 2920  mAddress,.    ) 
-00009530: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-00009540: 2023 2065 7468 5f67 6574 5261 7754 7261   # eth_getRawTra
-00009550: 6e73 6163 7469 6f6e 4279 426c 6f63 6b4e  nsactionByBlockN
-00009560: 756d 6265 7241 6e64 496e 6465 783a 2062  umberAndIndex: b
-00009570: 6c6f 636b 2069 6465 6e74 6966 6965 720a  lock identifier.
-00009580: 2020 2020 2020 2020 2320 7365 6e64 2061          # send a
-00009590: 2074 786e 2074 6f20 6d61 6b65 2073 7572   txn to make sur
-000095a0: 6520 7065 6e64 696e 6720 626c 6f63 6b20  e pending block 
-000095b0: 6861 7320 6174 206c 6561 7374 206f 6e65  has at least one
-000095c0: 2074 786e 0a20 2020 2020 2020 2061 7761   txn.        awa
-000095d0: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
-000095e0: 7365 6e64 5f74 7261 6e73 6163 7469 6f6e  send_transaction
-000095f0: 280a 2020 2020 2020 2020 2020 2020 7b0a  (.            {.
-00009600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009610: 2266 726f 6d22 3a20 756e 6c6f 636b 6564  "from": unlocked
-00009620: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
-00009630: 7065 2c0a 2020 2020 2020 2020 2020 2020  pe,.            
-00009640: 2020 2020 2274 6f22 3a20 756e 6c6f 636b      "to": unlock
-00009650: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
-00009660: 7479 7065 2c0a 2020 2020 2020 2020 2020  type,.          
-00009670: 2020 2020 2020 2276 616c 7565 223a 2057        "value": W
-00009680: 6569 2831 292c 0a20 2020 2020 2020 2020  ei(1),.         
-00009690: 2020 207d 0a20 2020 2020 2020 2029 0a20     }.        ). 
-000096a0: 2020 2020 2020 2070 656e 6469 6e67 5f62         pending_b
-000096b0: 6c6f 636b 203d 2061 7761 6974 2061 7379  lock = await asy
-000096c0: 6e63 5f77 332e 6574 682e 6765 745f 626c  nc_w3.eth.get_bl
-000096d0: 6f63 6b28 2270 656e 6469 6e67 2229 0a20  ock("pending"). 
-000096e0: 2020 2020 2020 206c 6173 745f 7065 6e64         last_pend
-000096f0: 696e 675f 7478 6e5f 696e 6465 7820 3d20  ing_txn_index = 
-00009700: 6c65 6e28 7065 6e64 696e 675f 626c 6f63  len(pending_bloc
-00009710: 6b5b 2274 7261 6e73 6163 7469 6f6e 7322  k["transactions"
-00009720: 5d29 202d 2031 0a20 2020 2020 2020 2072  ]) - 1.        r
-00009730: 6177 5f74 786e 203d 2061 7761 6974 2061  aw_txn = await a
-00009740: 7379 6e63 5f77 332e 6574 682e 6765 745f  sync_w3.eth.get_
-00009750: 7261 775f 7472 616e 7361 6374 696f 6e5f  raw_transaction_
-00009760: 6279 5f62 6c6f 636b 280a 2020 2020 2020  by_block(.      
-00009770: 2020 2020 2020 2270 656e 6469 6e67 222c        "pending",
-00009780: 206c 6173 745f 7065 6e64 696e 675f 7478   last_pending_tx
-00009790: 6e5f 696e 6465 780a 2020 2020 2020 2020  n_index.        
-000097a0: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-000097b0: 2069 735f 6279 7465 7328 7261 775f 7478   is_bytes(raw_tx
-000097c0: 6e29 0a0a 2020 2020 2020 2020 2320 6574  n)..        # et
-000097d0: 685f 6765 7452 6177 5472 616e 7361 6374  h_getRawTransact
-000097e0: 696f 6e42 7942 6c6f 636b 4e75 6d62 6572  ionByBlockNumber
-000097f0: 416e 6449 6e64 6578 3a20 626c 6f63 6b20  AndIndex: block 
-00009800: 6e75 6d62 6572 0a20 2020 2020 2020 2062  number.        b
-00009810: 6c6f 636b 5f77 6974 685f 7478 6e5f 6e75  lock_with_txn_nu
-00009820: 6d62 6572 203d 2062 6c6f 636b 5f77 6974  mber = block_wit
-00009830: 685f 7478 6e5b 226e 756d 6265 7222 5d0a  h_txn["number"].
-00009840: 2020 2020 2020 2020 7261 775f 7472 616e          raw_tran
-00009850: 7361 6374 696f 6e20 3d20 6177 6169 7420  saction = await 
-00009860: 6173 796e 635f 7733 2e65 7468 2e67 6574  async_w3.eth.get
-00009870: 5f72 6177 5f74 7261 6e73 6163 7469 6f6e  _raw_transaction
-00009880: 5f62 795f 626c 6f63 6b28 0a20 2020 2020  _by_block(.     
-00009890: 2020 2020 2020 2062 6c6f 636b 5f77 6974         block_wit
-000098a0: 685f 7478 6e5f 6e75 6d62 6572 2c20 300a  h_txn_number, 0.
-000098b0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-000098c0: 2020 6173 7365 7274 2069 735f 6279 7465    assert is_byte
-000098d0: 7328 7261 775f 7472 616e 7361 6374 696f  s(raw_transactio
-000098e0: 6e29 0a0a 2020 2020 2020 2020 2320 6574  n)..        # et
-000098f0: 685f 6765 7452 6177 5472 616e 7361 6374  h_getRawTransact
-00009900: 696f 6e42 7942 6c6f 636b 4861 7368 416e  ionByBlockHashAn
-00009910: 6449 6e64 6578 3a20 626c 6f63 6b20 6861  dIndex: block ha
-00009920: 7368 0a20 2020 2020 2020 2062 6c6f 636b  sh.        block
-00009930: 5f77 6974 685f 7478 6e5f 6861 7368 203d  _with_txn_hash =
-00009940: 2062 6c6f 636b 5f77 6974 685f 7478 6e5b   block_with_txn[
-00009950: 2268 6173 6822 5d0a 2020 2020 2020 2020  "hash"].        
-00009960: 7261 775f 7472 616e 7361 6374 696f 6e20  raw_transaction 
-00009970: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
-00009980: 2e65 7468 2e67 6574 5f72 6177 5f74 7261  .eth.get_raw_tra
-00009990: 6e73 6163 7469 6f6e 5f62 795f 626c 6f63  nsaction_by_bloc
-000099a0: 6b28 0a20 2020 2020 2020 2020 2020 2062  k(.            b
-000099b0: 6c6f 636b 5f77 6974 685f 7478 6e5f 6861  lock_with_txn_ha
-000099c0: 7368 2c20 300a 2020 2020 2020 2020 290a  sh, 0.        ).
-000099d0: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-000099e0: 735f 6279 7465 7328 7261 775f 7472 616e  s_bytes(raw_tran
-000099f0: 7361 6374 696f 6e29 0a0a 2020 2020 4070  saction)..    @p
-00009a00: 7974 6573 742e 6d61 726b 2e61 7379 6e63  ytest.mark.async
-00009a10: 696f 0a20 2020 2040 7079 7465 7374 2e6d  io.    @pytest.m
-00009a20: 6172 6b2e 7061 7261 6d65 7472 697a 6528  ark.parametrize(
-00009a30: 2275 6e6b 6e6f 776e 5f62 6c6f 636b 5f6e  "unknown_block_n
-00009a40: 756d 5f6f 725f 6861 7368 222c 2028 3132  um_or_hash", (12
-00009a50: 3334 3536 3738 3939 3939 392c 2055 4e4b  34567899999, UNK
-00009a60: 4e4f 574e 5f48 4153 4829 290a 2020 2020  NOWN_HASH)).    
-00009a70: 6173 796e 6320 6465 6620 7465 7374 5f65  async def test_e
-00009a80: 7468 5f67 6574 5f72 6177 5f74 7261 6e73  th_get_raw_trans
-00009a90: 6163 7469 6f6e 5f62 795f 626c 6f63 6b5f  action_by_block_
-00009aa0: 7261 6973 6573 5f65 7272 6f72 280a 2020  raises_error(.  
-00009ab0: 2020 2020 2020 7365 6c66 2c20 6173 796e        self, asyn
-00009ac0: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
-00009ad0: 222c 2075 6e6b 6e6f 776e 5f62 6c6f 636b  ", unknown_block
-00009ae0: 5f6e 756d 5f6f 725f 6861 7368 3a20 556e  _num_or_hash: Un
-00009af0: 696f 6e5b 696e 742c 2048 6578 4279 7465  ion[int, HexByte
-00009b00: 735d 0a20 2020 2029 202d 3e20 4e6f 6e65  s].    ) -> None
-00009b10: 3a0a 2020 2020 2020 2020 7769 7468 2070  :.        with p
-00009b20: 7974 6573 742e 7261 6973 6573 280a 2020  ytest.raises(.  
-00009b30: 2020 2020 2020 2020 2020 5472 616e 7361            Transa
-00009b40: 6374 696f 6e4e 6f74 466f 756e 642c 0a20  ctionNotFound,. 
-00009b50: 2020 2020 2020 2020 2020 206d 6174 6368             match
-00009b60: 3d28 0a20 2020 2020 2020 2020 2020 2020  =(.             
-00009b70: 2020 2066 2254 7261 6e73 6163 7469 6f6e     f"Transaction
-00009b80: 2069 6e64 6578 3a20 3020 6f6e 2062 6c6f   index: 0 on blo
-00009b90: 636b 2069 643a 2022 0a20 2020 2020 2020  ck id: ".       
-00009ba0: 2020 2020 2020 2020 2066 227b 746f 5f68           f"{to_h
-00009bb0: 6578 5f69 665f 696e 7465 6765 7228 756e  ex_if_integer(un
-00009bc0: 6b6e 6f77 6e5f 626c 6f63 6b5f 6e75 6d5f  known_block_num_
-00009bd0: 6f72 5f68 6173 6829 2172 7d20 220a 2020  or_hash)!r} ".  
-00009be0: 2020 2020 2020 2020 2020 2020 2020 6622                f"
-00009bf0: 6e6f 7420 666f 756e 642e 220a 2020 2020  not found.".    
-00009c00: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
-00009c10: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-00009c20: 2020 6177 6169 7420 6173 796e 635f 7733    await async_w3
-00009c30: 2e65 7468 2e67 6574 5f72 6177 5f74 7261  .eth.get_raw_tra
-00009c40: 6e73 6163 7469 6f6e 5f62 795f 626c 6f63  nsaction_by_bloc
-00009c50: 6b28 0a20 2020 2020 2020 2020 2020 2020  k(.             
-00009c60: 2020 2075 6e6b 6e6f 776e 5f62 6c6f 636b     unknown_block
-00009c70: 5f6e 756d 5f6f 725f 6861 7368 2c20 300a  _num_or_hash, 0.
-00009c80: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
-00009c90: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
-00009ca0: 6173 796e 6369 6f0a 2020 2020 6173 796e  asyncio.    asyn
-00009cb0: 6320 6465 6620 7465 7374 5f65 7468 5f67  c def test_eth_g
-00009cc0: 6574 5f72 6177 5f74 7261 6e73 6163 7469  et_raw_transacti
-00009cd0: 6f6e 5f62 795f 626c 6f63 6b5f 7261 6973  on_by_block_rais
-00009ce0: 6573 5f65 7272 6f72 5f62 6c6f 636b 5f69  es_error_block_i
-00009cf0: 6465 6e74 6966 6965 7228 0a20 2020 2020  dentifier(.     
-00009d00: 2020 2073 656c 662c 2061 7379 6e63 5f77     self, async_w
-00009d10: 333a 2022 4173 796e 6357 6562 3322 0a20  3: "AsyncWeb3". 
-00009d20: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-00009d30: 2020 2020 2020 756e 6b6e 6f77 6e5f 6964        unknown_id
-00009d40: 656e 7469 6669 6572 203d 2022 756e 6b6e  entifier = "unkn
-00009d50: 6f77 6e22 0a20 2020 2020 2020 2077 6974  own".        wit
-00009d60: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
-00009d70: 0a20 2020 2020 2020 2020 2020 2056 616c  .            Val
-00009d80: 7565 4572 726f 722c 0a20 2020 2020 2020  ueError,.       
-00009d90: 2020 2020 206d 6174 6368 3d28 0a20 2020       match=(.   
-00009da0: 2020 2020 2020 2020 2020 2020 2022 5661               "Va
-00009db0: 6c75 6520 6469 6420 6e6f 7420 6d61 7463  lue did not matc
-00009dc0: 6820 616e 7920 6f66 2074 6865 2072 6563  h any of the rec
-00009dd0: 6f67 6e69 7a65 6420 626c 6f63 6b20 6964  ognized block id
-00009de0: 656e 7469 6669 6572 733a 2022 0a20 2020  entifiers: ".   
-00009df0: 2020 2020 2020 2020 2020 2020 2066 227b               f"{
-00009e00: 756e 6b6e 6f77 6e5f 6964 656e 7469 6669  unknown_identifi
-00009e10: 6572 7d22 0a20 2020 2020 2020 2020 2020  er}".           
-00009e20: 2029 2c0a 2020 2020 2020 2020 293a 0a20   ),.        ):. 
-00009e30: 2020 2020 2020 2020 2020 2061 7761 6974             await
-00009e40: 2061 7379 6e63 5f77 332e 6574 682e 6765   async_w3.eth.ge
-00009e50: 745f 7261 775f 7472 616e 7361 6374 696f  t_raw_transactio
-00009e60: 6e5f 6279 5f62 6c6f 636b 280a 2020 2020  n_by_block(.    
-00009e70: 2020 2020 2020 2020 2020 2020 756e 6b6e              unkn
-00009e80: 6f77 6e5f 6964 656e 7469 6669 6572 2c20  own_identifier, 
-00009e90: 3020 2023 2074 7970 653a 2069 676e 6f72  0  # type: ignor
-00009ea0: 650a 2020 2020 2020 2020 2020 2020 290a  e.            ).
-00009eb0: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
-00009ec0: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
-00009ed0: 796e 6320 6465 6620 7465 7374 5f65 7468  ync def test_eth
-00009ee0: 5f67 6574 5f62 616c 616e 6365 2873 656c  _get_balance(sel
-00009ef0: 662c 2061 7379 6e63 5f77 333a 2022 4173  f, async_w3: "As
-00009f00: 796e 6357 6562 3322 2920 2d3e 204e 6f6e  yncWeb3") -> Non
-00009f10: 653a 0a20 2020 2020 2020 2063 6f69 6e62  e:.        coinb
-00009f20: 6173 6520 3d20 6177 6169 7420 6173 796e  ase = await asyn
-00009f30: 635f 7733 2e65 7468 2e63 6f69 6e62 6173  c_w3.eth.coinbas
-00009f40: 650a 0a20 2020 2020 2020 2077 6974 6820  e..        with 
-00009f50: 7079 7465 7374 2e72 6169 7365 7328 496e  pytest.raises(In
-00009f60: 7661 6c69 6441 6464 7265 7373 293a 0a20  validAddress):. 
-00009f70: 2020 2020 2020 2020 2020 2061 7761 6974             await
-00009f80: 2061 7379 6e63 5f77 332e 6574 682e 6765   async_w3.eth.ge
-00009f90: 745f 6261 6c61 6e63 6528 0a20 2020 2020  t_balance(.     
-00009fa0: 2020 2020 2020 2020 2020 2043 6865 636b             Check
-00009fb0: 7375 6d41 6464 7265 7373 2848 6578 4164  sumAddress(HexAd
-00009fc0: 6472 6573 7328 4865 7853 7472 2863 6f69  dress(HexStr(coi
-00009fd0: 6e62 6173 652e 6c6f 7765 7228 2929 2929  nbase.lower())))
-00009fe0: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
-00009ff0: 2020 2020 2020 2020 6261 6c61 6e63 6520          balance 
-0000a000: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
-0000a010: 2e65 7468 2e67 6574 5f62 616c 616e 6365  .eth.get_balance
-0000a020: 2863 6f69 6e62 6173 6529 0a0a 2020 2020  (coinbase)..    
-0000a030: 2020 2020 6173 7365 7274 2069 735f 696e      assert is_in
-0000a040: 7465 6765 7228 6261 6c61 6e63 6529 0a20  teger(balance). 
-0000a050: 2020 2020 2020 2061 7373 6572 7420 6261         assert ba
-0000a060: 6c61 6e63 6520 3e3d 2030 0a0a 2020 2020  lance >= 0..    
-0000a070: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
-0000a080: 6e63 696f 0a20 2020 2061 7379 6e63 2064  ncio.    async d
-0000a090: 6566 2074 6573 745f 6574 685f 6765 745f  ef test_eth_get_
-0000a0a0: 636f 6465 280a 2020 2020 2020 2020 7365  code(.        se
-0000a0b0: 6c66 2c20 6173 796e 635f 7733 3a20 2241  lf, async_w3: "A
-0000a0c0: 7379 6e63 5765 6233 222c 206d 6174 685f  syncWeb3", math_
-0000a0d0: 636f 6e74 7261 6374 5f61 6464 7265 7373  contract_address
-0000a0e0: 3a20 4368 6563 6b73 756d 4164 6472 6573  : ChecksumAddres
-0000a0f0: 730a 2020 2020 2920 2d3e 204e 6f6e 653a  s.    ) -> None:
-0000a100: 0a20 2020 2020 2020 2063 6f64 6520 3d20  .        code = 
-0000a110: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
-0000a120: 7468 2e67 6574 5f63 6f64 6528 6d61 7468  th.get_code(math
-0000a130: 5f63 6f6e 7472 6163 745f 6164 6472 6573  _contract_addres
-0000a140: 7329 0a20 2020 2020 2020 2061 7373 6572  s).        asser
-0000a150: 7420 6973 696e 7374 616e 6365 2863 6f64  t isinstance(cod
-0000a160: 652c 2048 6578 4279 7465 7329 0a20 2020  e, HexBytes).   
-0000a170: 2020 2020 2061 7373 6572 7420 6c65 6e28       assert len(
-0000a180: 636f 6465 2920 3e20 300a 0a20 2020 2040  code) > 0..    @
-0000a190: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
-0000a1a0: 6369 6f0a 2020 2020 6173 796e 6320 6465  cio.    async de
-0000a1b0: 6620 7465 7374 5f65 7468 5f67 6574 5f63  f test_eth_get_c
-0000a1c0: 6f64 655f 696e 7661 6c69 645f 6164 6472  ode_invalid_addr
-0000a1d0: 6573 7328 0a20 2020 2020 2020 2073 656c  ess(.        sel
-0000a1e0: 662c 0a20 2020 2020 2020 2061 7379 6e63  f,.        async
-0000a1f0: 5f77 333a 2022 4173 796e 6357 6562 3322  _w3: "AsyncWeb3"
-0000a200: 2c0a 2020 2020 2020 2020 6d61 7468 5f63  ,.        math_c
-0000a210: 6f6e 7472 6163 743a 2022 436f 6e74 7261  ontract: "Contra
-0000a220: 6374 222c 0a20 2020 2029 202d 3e20 4e6f  ct",.    ) -> No
-0000a230: 6e65 3a0a 2020 2020 2020 2020 7769 7468  ne:.        with
-0000a240: 2070 7974 6573 742e 7261 6973 6573 2849   pytest.raises(I
-0000a250: 6e76 616c 6964 4164 6472 6573 7329 3a0a  nvalidAddress):.
-0000a260: 2020 2020 2020 2020 2020 2020 6177 6169              awai
-0000a270: 7420 6173 796e 635f 7733 2e65 7468 2e67  t async_w3.eth.g
-0000a280: 6574 5f63 6f64 6528 0a20 2020 2020 2020  et_code(.       
-0000a290: 2020 2020 2020 2020 2043 6865 636b 7375           Checksu
-0000a2a0: 6d41 6464 7265 7373 2848 6578 4164 6472  mAddress(HexAddr
-0000a2b0: 6573 7328 4865 7853 7472 286d 6174 685f  ess(HexStr(math_
-0000a2c0: 636f 6e74 7261 6374 2e61 6464 7265 7373  contract.address
-0000a2d0: 2e6c 6f77 6572 2829 2929 290a 2020 2020  .lower()))).    
-0000a2e0: 2020 2020 2020 2020 290a 0a20 2020 2040          )..    @
-0000a2f0: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
-0000a300: 6369 6f0a 2020 2020 6173 796e 6320 6465  cio.    async de
-0000a310: 6620 7465 7374 5f65 7468 5f67 6574 5f63  f test_eth_get_c
-0000a320: 6f64 655f 7769 7468 5f62 6c6f 636b 5f69  ode_with_block_i
-0000a330: 6465 6e74 6966 6965 7228 0a20 2020 2020  dentifier(.     
-0000a340: 2020 2073 656c 662c 2061 7379 6e63 5f77     self, async_w
-0000a350: 333a 2022 4173 796e 6357 6562 3322 2c20  3: "AsyncWeb3", 
-0000a360: 656d 6974 7465 725f 636f 6e74 7261 6374  emitter_contract
-0000a370: 3a20 2243 6f6e 7472 6163 7422 0a20 2020  : "Contract".   
-0000a380: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-0000a390: 2020 2020 626c 6f63 6b5f 6964 203d 2061      block_id = a
-0000a3a0: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
-0000a3b0: 682e 626c 6f63 6b5f 6e75 6d62 6572 0a20  h.block_number. 
-0000a3c0: 2020 2020 2020 2063 6f64 6520 3d20 6177         code = aw
-0000a3d0: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
-0000a3e0: 2e67 6574 5f63 6f64 6528 656d 6974 7465  .get_code(emitte
-0000a3f0: 725f 636f 6e74 7261 6374 2e61 6464 7265  r_contract.addre
-0000a400: 7373 2c20 626c 6f63 6b5f 6964 290a 2020  ss, block_id).  
-0000a410: 2020 2020 2020 6173 7365 7274 2069 7369        assert isi
-0000a420: 6e73 7461 6e63 6528 636f 6465 2c20 4865  nstance(code, He
-0000a430: 7842 7974 6573 290a 2020 2020 2020 2020  xBytes).        
-0000a440: 6173 7365 7274 206c 656e 2863 6f64 6529  assert len(code)
-0000a450: 203e 2030 0a0a 2020 2020 4070 7974 6573   > 0..    @pytes
-0000a460: 742e 6d61 726b 2e61 7379 6e63 696f 0a20  t.mark.asyncio. 
-0000a470: 2020 2061 7379 6e63 2064 6566 2074 6573     async def tes
-0000a480: 745f 6574 685f 6765 745f 7472 616e 7361  t_eth_get_transa
-0000a490: 6374 696f 6e5f 636f 756e 7428 0a20 2020  ction_count(.   
-0000a4a0: 2020 2020 2073 656c 662c 2061 7379 6e63       self, async
-0000a4b0: 5f77 333a 2022 4173 796e 6357 6562 3322  _w3: "AsyncWeb3"
-0000a4c0: 2c20 756e 6c6f 636b 6564 5f61 6363 6f75  , unlocked_accou
-0000a4d0: 6e74 5f64 7561 6c5f 7479 7065 3a20 4368  nt_dual_type: Ch
-0000a4e0: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
-0000a4f0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-0000a500: 2020 2020 2074 7261 6e73 6163 7469 6f6e       transaction
-0000a510: 5f63 6f75 6e74 203d 2061 7761 6974 2061  _count = await a
-0000a520: 7379 6e63 5f77 332e 6574 682e 6765 745f  sync_w3.eth.get_
-0000a530: 7472 616e 7361 6374 696f 6e5f 636f 756e  transaction_coun
-0000a540: 7428 0a20 2020 2020 2020 2020 2020 2075  t(.            u
-0000a550: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
-0000a560: 6475 616c 5f74 7970 650a 2020 2020 2020  dual_type.      
-0000a570: 2020 290a 2020 2020 2020 2020 6173 7365    ).        asse
-0000a580: 7274 2069 735f 696e 7465 6765 7228 7472  rt is_integer(tr
-0000a590: 616e 7361 6374 696f 6e5f 636f 756e 7429  ansaction_count)
-0000a5a0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-0000a5b0: 7472 616e 7361 6374 696f 6e5f 636f 756e  transaction_coun
-0000a5c0: 7420 3e3d 2030 0a0a 2020 2020 4070 7974  t >= 0..    @pyt
-0000a5d0: 6573 742e 6d61 726b 2e61 7379 6e63 696f  est.mark.asyncio
-0000a5e0: 0a20 2020 2061 7379 6e63 2064 6566 2074  .    async def t
-0000a5f0: 6573 745f 6574 685f 6361 6c6c 280a 2020  est_eth_call(.  
-0000a600: 2020 2020 2020 7365 6c66 2c20 6173 796e        self, asyn
-0000a610: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
-0000a620: 222c 206d 6174 685f 636f 6e74 7261 6374  ", math_contract
-0000a630: 3a20 2243 6f6e 7472 6163 7422 0a20 2020  : "Contract".   
-0000a640: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-0000a650: 2020 2020 636f 696e 6261 7365 203d 2061      coinbase = a
-0000a660: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
-0000a670: 682e 636f 696e 6261 7365 0a20 2020 2020  h.coinbase.     
-0000a680: 2020 2074 786e 5f70 6172 616d 7320 3d20     txn_params = 
-0000a690: 6d61 7468 5f63 6f6e 7472 6163 742e 5f70  math_contract._p
-0000a6a0: 7265 7061 7265 5f74 7261 6e73 6163 7469  repare_transacti
-0000a6b0: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
-0000a6c0: 666e 5f6e 616d 653d 2261 6464 222c 0a20  fn_name="add",. 
-0000a6d0: 2020 2020 2020 2020 2020 2066 6e5f 6172             fn_ar
-0000a6e0: 6773 3d28 372c 2031 3129 2c0a 2020 2020  gs=(7, 11),.    
-0000a6f0: 2020 2020 2020 2020 7472 616e 7361 6374          transact
-0000a700: 696f 6e3d 7b22 6672 6f6d 223a 2063 6f69  ion={"from": coi
-0000a710: 6e62 6173 652c 2022 746f 223a 206d 6174  nbase, "to": mat
-0000a720: 685f 636f 6e74 7261 6374 2e61 6464 7265  h_contract.addre
-0000a730: 7373 7d2c 0a20 2020 2020 2020 2029 0a20  ss},.        ). 
-0000a740: 2020 2020 2020 2063 616c 6c5f 7265 7375         call_resu
-0000a750: 6c74 203d 2061 7761 6974 2061 7379 6e63  lt = await async
-0000a760: 5f77 332e 6574 682e 6361 6c6c 2874 786e  _w3.eth.call(txn
-0000a770: 5f70 6172 616d 7329 0a20 2020 2020 2020  _params).       
-0000a780: 2061 7373 6572 7420 6973 5f73 7472 696e   assert is_strin
-0000a790: 6728 6361 6c6c 5f72 6573 756c 7429 0a20  g(call_result). 
-0000a7a0: 2020 2020 2020 2028 7265 7375 6c74 2c29         (result,)
-0000a7b0: 203d 2061 7379 6e63 5f77 332e 636f 6465   = async_w3.code
-0000a7c0: 632e 6465 636f 6465 285b 2275 696e 7432  c.decode(["uint2
-0000a7d0: 3536 225d 2c20 6361 6c6c 5f72 6573 756c  56"], call_resul
-0000a7e0: 7429 0a20 2020 2020 2020 2061 7373 6572  t).        asser
-0000a7f0: 7420 7265 7375 6c74 203d 3d20 3138 0a0a  t result == 18..
-0000a800: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
-0000a810: 2e61 7379 6e63 696f 0a20 2020 2061 7379  .asyncio.    asy
-0000a820: 6e63 2064 6566 2074 6573 745f 6574 685f  nc def test_eth_
-0000a830: 6361 6c6c 5f77 6974 685f 6f76 6572 7269  call_with_overri
-0000a840: 6465 5f63 6f64 6528 0a20 2020 2020 2020  de_code(.       
-0000a850: 2073 656c 662c 0a20 2020 2020 2020 2061   self,.        a
-0000a860: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
-0000a870: 6562 3322 2c0a 2020 2020 2020 2020 7265  eb3",.        re
-0000a880: 7665 7274 5f63 6f6e 7472 6163 743a 2022  vert_contract: "
-0000a890: 436f 6e74 7261 6374 222c 0a20 2020 2029  Contract",.    )
-0000a8a0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-0000a8b0: 2020 636f 696e 6261 7365 203d 2061 7761    coinbase = awa
-0000a8c0: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
-0000a8d0: 636f 696e 6261 7365 0a20 2020 2020 2020  coinbase.       
-0000a8e0: 2074 786e 5f70 6172 616d 7320 3d20 7265   txn_params = re
-0000a8f0: 7665 7274 5f63 6f6e 7472 6163 742e 5f70  vert_contract._p
-0000a900: 7265 7061 7265 5f74 7261 6e73 6163 7469  repare_transacti
-0000a910: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
-0000a920: 666e 5f6e 616d 653d 226e 6f72 6d61 6c46  fn_name="normalF
-0000a930: 756e 6374 696f 6e22 2c0a 2020 2020 2020  unction",.      
-0000a940: 2020 2020 2020 7472 616e 7361 6374 696f        transactio
-0000a950: 6e3d 7b22 6672 6f6d 223a 2063 6f69 6e62  n={"from": coinb
-0000a960: 6173 652c 2022 746f 223a 2072 6576 6572  ase, "to": rever
-0000a970: 745f 636f 6e74 7261 6374 2e61 6464 7265  t_contract.addre
-0000a980: 7373 7d2c 0a20 2020 2020 2020 2029 0a20  ss},.        ). 
-0000a990: 2020 2020 2020 2063 616c 6c5f 7265 7375         call_resu
-0000a9a0: 6c74 203d 2061 7761 6974 2061 7379 6e63  lt = await async
-0000a9b0: 5f77 332e 6574 682e 6361 6c6c 2874 786e  _w3.eth.call(txn
-0000a9c0: 5f70 6172 616d 7329 0a20 2020 2020 2020  _params).       
-0000a9d0: 2028 7265 7375 6c74 2c29 203d 2061 7379   (result,) = asy
-0000a9e0: 6e63 5f77 332e 636f 6465 632e 6465 636f  nc_w3.codec.deco
-0000a9f0: 6465 285b 2262 6f6f 6c22 5d2c 2063 616c  de(["bool"], cal
-0000aa00: 6c5f 7265 7375 6c74 290a 2020 2020 2020  l_result).      
-0000aa10: 2020 6173 7365 7274 2072 6573 756c 7420    assert result 
-0000aa20: 6973 2054 7275 650a 0a20 2020 2020 2020  is True..       
-0000aa30: 2023 206f 7665 7272 6964 6520 7275 6e74   # override runt
-0000aa40: 696d 6520 6279 7465 636f 6465 3a20 606e  ime bytecode: `n
-0000aa50: 6f72 6d61 6c46 756e 6374 696f 6e60 2072  ormalFunction` r
-0000aa60: 6574 7572 6e73 2060 6661 6c73 6560 0a20  eturns `false`. 
-0000aa70: 2020 2020 2020 206f 7665 7272 6964 655f         override_
-0000aa80: 636f 6465 203d 2048 6578 5374 7228 0a20  code = HexStr(. 
-0000aa90: 2020 2020 2020 2020 2020 2022 3078 3630             "0x60
-0000aaa0: 3830 3630 3430 3532 3334 3830 3135 3630  8060405234801560
-0000aab0: 3066 3537 3630 3030 3830 6664 3562 3530  0f57600080fd5b50
-0000aac0: 3630 3034 3336 3130 3630 3363 3537 3630  60043610603c5760
-0000aad0: 3030 3335 3630 6530 3163 3830 3633 3138  003560e01c806318
-0000aae0: 3563 3338 6134 3134 3630 3431 3537 3830  5c38a41460415780
-0000aaf0: 3633 6330 3661 3937 6362 3134 3630 3439  63c06a97cb146049
-0000ab00: 3537 3830 3633 6436 3765 3462 3834 3134  578063d67e4b8414
-0000ab10: 3630 3531 3537 3562 3630 3030 3830 6664  6051575b600080fd
-0000ab20: 3562 3630 3437 3630 3731 3536 3562 3030  5b60476071565b00
-0000ab30: 3562 3630 3466 3630 6466 3536 3562 3030  5b604f60df565b00
-0000ab40: 3562 3630 3537 3630 6534 3536 3562 3630  5b605760e4565b60
-0000ab50: 3430 3531 3830 3832 3135 3135 3135 3135  4051808215151515
-0000ab60: 3831 3532 3630 3230 3031 3931 3530 3530  8152602001915050
-0000ab70: 3630 3430 3531 3830 3931 3033 3930 6633  60405180910390f3
-0000ab80: 3562 3630 3430 3531 3766 3038 6333 3739  5b6040517f08c379
-0000ab90: 6130 3030 3030 3030 3030 3030 3030 3030  a000000000000000
-0000aba0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-0000abb0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-0000abc0: 3030 3030 3030 3030 3030 3831 3532 3630  0000000000815260
-0000abd0: 3034 3031 3830 3830 3630 3230 3031 3832  0401808060200182
-0000abe0: 3831 3033 3832 3532 3630 3162 3831 3532  81038252601b8152
-0000abf0: 3630 3230 3031 3830 3766 3436 3735 3665  602001807f46756e
-0000ac00: 3633 3734 3639 3666 3665 3230 3638 3631  6374696f6e206861
-0000ac10: 3733 3230 3632 3635 3635 3665 3230 3732  73206265656e2072
-0000ac20: 3635 3736 3635 3732 3734 3635 3634 3265  657665727465642e
-0000ac30: 3030 3030 3030 3030 3030 3831 3532 3530  0000000000815250
-0000ac40: 3630 3230 3031 3931 3530 3530 3630 3430  6020019150506040
-0000ac50: 3531 3830 3931 3033 3930 6664 3562 3630  5180910390fd5b60
-0000ac60: 3030 3830 6664 3562 3630 3030 3830 3930  0080fd5b60008090
-0000ac70: 3530 3930 3536 6665 6132 3634 3639 3730  509056fea2646970
-0000ac80: 3636 3733 3538 3232 3132 3230 6262 3731  667358221220bb71
-0000ac90: 6539 6539 6132 6532 3731 6364 3066 6265  e9e9a2e271cd0fbe
-0000aca0: 3833 3335 3234 6133 6561 3637 6466 3935  833524a3ea67df95
-0000acb0: 6632 3565 6131 3361 6566 3562 3061 3736  f25ea13aef5b0a76
-0000acc0: 3166 6135 3262 3533 3866 3130 3634 3733  1fa52b538f106473
-0000acd0: 3666 3663 3633 3433 3030 3036 3031 3030  6f6c634300060100
-0000ace0: 3333 2220 2023 206e 6f71 613a 2045 3530  33"  # noqa: E50
-0000acf0: 310a 2020 2020 2020 2020 290a 2020 2020  1.        ).    
-0000ad00: 2020 2020 6361 6c6c 5f72 6573 756c 7420      call_result 
-0000ad10: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
-0000ad20: 2e65 7468 2e63 616c 6c28 0a20 2020 2020  .eth.call(.     
-0000ad30: 2020 2020 2020 2074 786e 5f70 6172 616d         txn_param
-0000ad40: 732c 2022 6c61 7465 7374 222c 207b 7265  s, "latest", {re
-0000ad50: 7665 7274 5f63 6f6e 7472 6163 742e 6164  vert_contract.ad
-0000ad60: 6472 6573 733a 207b 2263 6f64 6522 3a20  dress: {"code": 
-0000ad70: 6f76 6572 7269 6465 5f63 6f64 657d 7d0a  override_code}}.
-0000ad80: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0000ad90: 2020 2872 6573 756c 742c 2920 3d20 6173    (result,) = as
-0000ada0: 796e 635f 7733 2e63 6f64 6563 2e64 6563  ync_w3.codec.dec
-0000adb0: 6f64 6528 5b22 626f 6f6c 225d 2c20 6361  ode(["bool"], ca
-0000adc0: 6c6c 5f72 6573 756c 7429 0a20 2020 2020  ll_result).     
-0000add0: 2020 2061 7373 6572 7420 7265 7375 6c74     assert result
-0000ade0: 2069 7320 4661 6c73 650a 0a20 2020 2020   is False..     
-0000adf0: 2020 2023 2074 6573 7420 6279 7465 730a     # test bytes.
-0000ae00: 0a20 2020 2020 2020 2062 7974 6573 5f63  .        bytes_c
-0000ae10: 616c 6c5f 7265 7375 6c74 203d 2061 7761  all_result = awa
-0000ae20: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
-0000ae30: 6361 6c6c 280a 2020 2020 2020 2020 2020  call(.          
-0000ae40: 2020 7478 6e5f 7061 7261 6d73 2c0a 2020    txn_params,.  
-0000ae50: 2020 2020 2020 2020 2020 226c 6174 6573            "lates
-0000ae60: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
-0000ae70: 7b72 6576 6572 745f 636f 6e74 7261 6374  {revert_contract
-0000ae80: 2e61 6464 7265 7373 3a20 7b22 636f 6465  .address: {"code
-0000ae90: 223a 2074 6f5f 6279 7465 7328 6865 7873  ": to_bytes(hexs
-0000aea0: 7472 3d6f 7665 7272 6964 655f 636f 6465  tr=override_code
-0000aeb0: 297d 7d2c 0a20 2020 2020 2020 2029 0a20  )}},.        ). 
-0000aec0: 2020 2020 2020 2028 6279 7465 735f 7265         (bytes_re
-0000aed0: 7375 6c74 2c29 203d 2061 7379 6e63 5f77  sult,) = async_w
-0000aee0: 332e 636f 6465 632e 6465 636f 6465 285b  3.codec.decode([
-0000aef0: 2262 6f6f 6c22 5d2c 2062 7974 6573 5f63  "bool"], bytes_c
-0000af00: 616c 6c5f 7265 7375 6c74 290a 2020 2020  all_result).    
-0000af10: 2020 2020 6173 7365 7274 2062 7974 6573      assert bytes
-0000af20: 5f72 6573 756c 7420 6973 2046 616c 7365  _result is False
-0000af30: 0a0a 2020 2020 4070 7974 6573 742e 6d61  ..    @pytest.ma
-0000af40: 726b 2e61 7379 6e63 696f 0a20 2020 2040  rk.asyncio.    @
-0000af50: 7079 7465 7374 2e6d 6172 6b2e 7061 7261  pytest.mark.para
-0000af60: 6d65 7472 697a 6528 0a20 2020 2020 2020  metrize(.       
-0000af70: 2022 7061 7261 6d73 222c 0a20 2020 2020   "params",.     
-0000af80: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
-0000af90: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-0000afa0: 2020 2022 6e6f 6e63 6522 3a20 312c 2020     "nonce": 1,  
-0000afb0: 2320 696e 740a 2020 2020 2020 2020 2020  # int.          
-0000afc0: 2020 2020 2020 2262 616c 616e 6365 223a        "balance":
-0000afd0: 2031 2c20 2023 2069 6e74 0a20 2020 2020   1,  # int.     
-0000afe0: 2020 2020 2020 2020 2020 2022 636f 6465             "code
-0000aff0: 223a 2048 6578 5374 7228 2230 7822 292c  ": HexStr("0x"),
-0000b000: 2020 2320 4865 7853 7472 0a20 2020 2020    # HexStr.     
-0000b010: 2020 2020 2020 2020 2020 2023 2077 6974             # wit
-0000b020: 6820 7374 6174 650a 2020 2020 2020 2020  h state.        
-0000b030: 2020 2020 2020 2020 2273 7461 7465 223a          "state":
-0000b040: 207b 4865 7853 7472 2866 2230 787b 2730   {HexStr(f"0x{'0
-0000b050: 3027 202a 2033 327d 2229 3a20 4865 7853  0' * 32}"): HexS
-0000b060: 7472 2866 2230 787b 2730 3027 202a 2033  tr(f"0x{'00' * 3
-0000b070: 327d 2229 7d2c 0a20 2020 2020 2020 2020  2}")},.         
-0000b080: 2020 207d 2c0a 2020 2020 2020 2020 2020     },.          
-0000b090: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-0000b0a0: 2020 2020 226e 6f6e 6365 223a 2048 6578      "nonce": Hex
-0000b0b0: 5374 7228 2230 7831 2229 2c20 2023 2048  Str("0x1"),  # H
-0000b0c0: 6578 5374 720a 2020 2020 2020 2020 2020  exStr.          
-0000b0d0: 2020 2020 2020 2262 616c 616e 6365 223a        "balance":
-0000b0e0: 2048 6578 5374 7228 2230 7831 2229 2c20   HexStr("0x1"), 
-0000b0f0: 2023 2048 6578 5374 720a 2020 2020 2020   # HexStr.      
-0000b100: 2020 2020 2020 2020 2020 2263 6f64 6522            "code"
-0000b110: 3a20 6222 5c78 3030 222c 2020 2320 6279  : b"\x00",  # by
-0000b120: 7465 730a 2020 2020 2020 2020 2020 2020  tes.            
-0000b130: 2020 2020 2320 7769 7468 2073 7461 7465      # with state
-0000b140: 4469 6666 0a20 2020 2020 2020 2020 2020  Diff.           
-0000b150: 2020 2020 2022 7374 6174 6544 6966 6622       "stateDiff"
-0000b160: 3a20 7b48 6578 5374 7228 6622 3078 7b27  : {HexStr(f"0x{'
-0000b170: 3030 2720 2a20 3332 7d22 293a 2048 6578  00' * 32}"): Hex
-0000b180: 5374 7228 6622 3078 7b27 3030 2720 2a20  Str(f"0x{'00' * 
-0000b190: 3332 7d22 297d 2c0a 2020 2020 2020 2020  32}")},.        
-0000b1a0: 2020 2020 7d2c 0a20 2020 2020 2020 2029      },.        )
-0000b1b0: 2c0a 2020 2020 290a 2020 2020 6173 796e  ,.    ).    asyn
-0000b1c0: 6320 6465 6620 7465 7374 5f65 7468 5f63  c def test_eth_c
-0000b1d0: 616c 6c5f 7769 7468 5f6f 7665 7272 6964  all_with_overrid
-0000b1e0: 655f 7061 7261 6d5f 7479 7065 5f63 6865  e_param_type_che
-0000b1f0: 636b 280a 2020 2020 2020 2020 7365 6c66  ck(.        self
-0000b200: 2c0a 2020 2020 2020 2020 6173 796e 635f  ,.        async_
-0000b210: 7733 3a20 2241 7379 6e63 5765 6233 222c  w3: "AsyncWeb3",
-0000b220: 0a20 2020 2020 2020 206d 6174 685f 636f  .        math_co
-0000b230: 6e74 7261 6374 3a20 2243 6f6e 7472 6163  ntract: "Contrac
-0000b240: 7422 2c0a 2020 2020 2020 2020 7061 7261  t",.        para
-0000b250: 6d73 3a20 4361 6c6c 4f76 6572 7269 6465  ms: CallOverride
-0000b260: 5061 7261 6d73 2c0a 2020 2020 2920 2d3e  Params,.    ) ->
-0000b270: 204e 6f6e 653a 0a20 2020 2020 2020 2063   None:.        c
-0000b280: 6f69 6e62 6173 6520 3d20 6177 6169 7420  oinbase = await 
-0000b290: 6173 796e 635f 7733 2e65 7468 2e63 6f69  async_w3.eth.coi
-0000b2a0: 6e62 6173 650a 2020 2020 2020 2020 7478  nbase.        tx
-0000b2b0: 6e5f 7061 7261 6d73 3a20 5478 5061 7261  n_params: TxPara
-0000b2c0: 6d73 203d 207b 2266 726f 6d22 3a20 636f  ms = {"from": co
-0000b2d0: 696e 6261 7365 7d0a 0a20 2020 2020 2020  inbase}..       
-0000b2e0: 2023 2061 7373 6572 7420 646f 6573 206e   # assert does n
-0000b2f0: 6f74 2072 6169 7365 0a20 2020 2020 2020  ot raise.       
-0000b300: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
-0000b310: 6574 682e 6361 6c6c 2874 786e 5f70 6172  eth.call(txn_par
-0000b320: 616d 732c 2022 6c61 7465 7374 222c 207b  ams, "latest", {
-0000b330: 6d61 7468 5f63 6f6e 7472 6163 742e 6164  math_contract.ad
-0000b340: 6472 6573 733a 2070 6172 616d 737d 290a  dress: params}).
-0000b350: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
-0000b360: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
-0000b370: 796e 6320 6465 6620 7465 7374 5f65 7468  ync def test_eth
-0000b380: 5f63 616c 6c5f 7769 7468 5f30 5f72 6573  _call_with_0_res
-0000b390: 756c 7428 0a20 2020 2020 2020 2073 656c  ult(.        sel
-0000b3a0: 662c 2061 7379 6e63 5f77 333a 2022 4173  f, async_w3: "As
-0000b3b0: 796e 6357 6562 3322 2c20 6d61 7468 5f63  yncWeb3", math_c
-0000b3c0: 6f6e 7472 6163 743a 2022 436f 6e74 7261  ontract: "Contra
-0000b3d0: 6374 220a 2020 2020 2920 2d3e 204e 6f6e  ct".    ) -> Non
-0000b3e0: 653a 0a20 2020 2020 2020 2063 6f69 6e62  e:.        coinb
-0000b3f0: 6173 6520 3d20 6177 6169 7420 6173 796e  ase = await asyn
-0000b400: 635f 7733 2e65 7468 2e63 6f69 6e62 6173  c_w3.eth.coinbas
-0000b410: 650a 2020 2020 2020 2020 7478 6e5f 7061  e.        txn_pa
-0000b420: 7261 6d73 203d 206d 6174 685f 636f 6e74  rams = math_cont
-0000b430: 7261 6374 2e5f 7072 6570 6172 655f 7472  ract._prepare_tr
-0000b440: 616e 7361 6374 696f 6e28 0a20 2020 2020  ansaction(.     
-0000b450: 2020 2020 2020 2066 6e5f 6e61 6d65 3d22         fn_name="
-0000b460: 6164 6422 2c0a 2020 2020 2020 2020 2020  add",.          
-0000b470: 2020 666e 5f61 7267 733d 2830 2c20 3029    fn_args=(0, 0)
-0000b480: 2c0a 2020 2020 2020 2020 2020 2020 7472  ,.            tr
-0000b490: 616e 7361 6374 696f 6e3d 7b22 6672 6f6d  ansaction={"from
-0000b4a0: 223a 2063 6f69 6e62 6173 652c 2022 746f  ": coinbase, "to
-0000b4b0: 223a 206d 6174 685f 636f 6e74 7261 6374  ": math_contract
-0000b4c0: 2e61 6464 7265 7373 7d2c 0a20 2020 2020  .address},.     
-0000b4d0: 2020 2029 0a20 2020 2020 2020 2063 616c     ).        cal
-0000b4e0: 6c5f 7265 7375 6c74 203d 2061 7761 6974  l_result = await
-0000b4f0: 2061 7379 6e63 5f77 332e 6574 682e 6361   async_w3.eth.ca
-0000b500: 6c6c 2874 786e 5f70 6172 616d 7329 0a20  ll(txn_params). 
-0000b510: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
-0000b520: 5f73 7472 696e 6728 6361 6c6c 5f72 6573  _string(call_res
-0000b530: 756c 7429 0a20 2020 2020 2020 2028 7265  ult).        (re
-0000b540: 7375 6c74 2c29 203d 2061 7379 6e63 5f77  sult,) = async_w
-0000b550: 332e 636f 6465 632e 6465 636f 6465 285b  3.codec.decode([
-0000b560: 2275 696e 7432 3536 225d 2c20 6361 6c6c  "uint256"], call
-0000b570: 5f72 6573 756c 7429 0a20 2020 2020 2020  _result).       
-0000b580: 2061 7373 6572 7420 7265 7375 6c74 203d   assert result =
-0000b590: 3d20 300a 0a20 2020 2040 7079 7465 7374  = 0..    @pytest
-0000b5a0: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
-0000b5b0: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
-0000b5c0: 5f65 7468 5f63 616c 6c5f 7265 7665 7274  _eth_call_revert
-0000b5d0: 5f77 6974 685f 6d73 6728 0a20 2020 2020  _with_msg(.     
-0000b5e0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-0000b5f0: 2061 7379 6e63 5f77 333a 2022 4173 796e   async_w3: "Asyn
-0000b600: 6357 6562 3322 2c0a 2020 2020 2020 2020  cWeb3",.        
-0000b610: 7265 7665 7274 5f63 6f6e 7472 6163 743a  revert_contract:
-0000b620: 2022 436f 6e74 7261 6374 222c 0a20 2020   "Contract",.   
-0000b630: 2020 2020 2075 6e6c 6f63 6b65 645f 6163       unlocked_ac
-0000b640: 636f 756e 743a 2043 6865 636b 7375 6d41  count: ChecksumA
-0000b650: 6464 7265 7373 2c0a 2020 2020 2920 2d3e  ddress,.    ) ->
-0000b660: 204e 6f6e 653a 0a20 2020 2020 2020 2074   None:.        t
-0000b670: 786e 5f70 6172 616d 7320 3d20 7265 7665  xn_params = reve
-0000b680: 7274 5f63 6f6e 7472 6163 742e 5f70 7265  rt_contract._pre
-0000b690: 7061 7265 5f74 7261 6e73 6163 7469 6f6e  pare_transaction
-0000b6a0: 280a 2020 2020 2020 2020 2020 2020 666e  (.            fn
-0000b6b0: 5f6e 616d 653d 2272 6576 6572 7457 6974  _name="revertWit
-0000b6c0: 684d 6573 7361 6765 222c 0a20 2020 2020  hMessage",.     
-0000b6d0: 2020 2020 2020 2074 7261 6e73 6163 7469         transacti
-0000b6e0: 6f6e 3d7b 0a20 2020 2020 2020 2020 2020  on={.           
-0000b6f0: 2020 2020 2022 6672 6f6d 223a 2075 6e6c       "from": unl
-0000b700: 6f63 6b65 645f 6163 636f 756e 742c 0a20  ocked_account,. 
-0000b710: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000b720: 746f 223a 2072 6576 6572 745f 636f 6e74  to": revert_cont
-0000b730: 7261 6374 2e61 6464 7265 7373 2c0a 2020  ract.address,.  
-0000b740: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
-0000b750: 2020 2020 2029 0a20 2020 2020 2020 2077       ).        w
-0000b760: 6974 6820 7079 7465 7374 2e72 6169 7365  ith pytest.raise
-0000b770: 7328 0a20 2020 2020 2020 2020 2020 2043  s(.            C
-0000b780: 6f6e 7472 6163 744c 6f67 6963 4572 726f  ontractLogicErro
-0000b790: 722c 206d 6174 6368 3d22 6578 6563 7574  r, match="execut
-0000b7a0: 696f 6e20 7265 7665 7274 6564 3a20 4675  ion reverted: Fu
-0000b7b0: 6e63 7469 6f6e 2068 6173 2062 6565 6e20  nction has been 
-0000b7c0: 7265 7665 7274 6564 220a 2020 2020 2020  reverted".      
-0000b7d0: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
-0000b7e0: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
-0000b7f0: 6574 682e 6361 6c6c 2874 786e 5f70 6172  eth.call(txn_par
-0000b800: 616d 7329 0a0a 2020 2020 4070 7974 6573  ams)..    @pytes
-0000b810: 742e 6d61 726b 2e61 7379 6e63 696f 0a20  t.mark.asyncio. 
-0000b820: 2020 2061 7379 6e63 2064 6566 2074 6573     async def tes
-0000b830: 745f 6574 685f 6361 6c6c 5f72 6576 6572  t_eth_call_rever
-0000b840: 745f 7769 7468 6f75 745f 6d73 6728 0a20  t_without_msg(. 
-0000b850: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
-0000b860: 2020 2020 2061 7379 6e63 5f77 333a 2022       async_w3: "
-0000b870: 4173 796e 6357 6562 3322 2c0a 2020 2020  AsyncWeb3",.    
-0000b880: 2020 2020 7265 7665 7274 5f63 6f6e 7472      revert_contr
-0000b890: 6163 743a 2022 436f 6e74 7261 6374 222c  act: "Contract",
-0000b8a0: 0a20 2020 2020 2020 2075 6e6c 6f63 6b65  .        unlocke
-0000b8b0: 645f 6163 636f 756e 743a 2043 6865 636b  d_account: Check
-0000b8c0: 7375 6d41 6464 7265 7373 2c0a 2020 2020  sumAddress,.    
-0000b8d0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-0000b8e0: 2020 2077 6974 6820 7079 7465 7374 2e72     with pytest.r
-0000b8f0: 6169 7365 7328 436f 6e74 7261 6374 4c6f  aises(ContractLo
-0000b900: 6769 6345 7272 6f72 2c20 6d61 7463 683d  gicError, match=
-0000b910: 2265 7865 6375 7469 6f6e 2072 6576 6572  "execution rever
-0000b920: 7465 6422 293a 0a20 2020 2020 2020 2020  ted"):.         
-0000b930: 2020 2074 786e 5f70 6172 616d 7320 3d20     txn_params = 
-0000b940: 7265 7665 7274 5f63 6f6e 7472 6163 742e  revert_contract.
-0000b950: 5f70 7265 7061 7265 5f74 7261 6e73 6163  _prepare_transac
-0000b960: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
-0000b970: 2020 2020 2020 666e 5f6e 616d 653d 2272        fn_name="r
-0000b980: 6576 6572 7457 6974 686f 7574 4d65 7373  evertWithoutMess
-0000b990: 6167 6522 2c0a 2020 2020 2020 2020 2020  age",.          
-0000b9a0: 2020 2020 2020 7472 616e 7361 6374 696f        transactio
-0000b9b0: 6e3d 7b0a 2020 2020 2020 2020 2020 2020  n={.            
-0000b9c0: 2020 2020 2020 2020 2266 726f 6d22 3a20          "from": 
-0000b9d0: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-0000b9e0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0000b9f0: 2020 2020 2020 2274 6f22 3a20 7265 7665        "to": reve
-0000ba00: 7274 5f63 6f6e 7472 6163 742e 6164 6472  rt_contract.addr
-0000ba10: 6573 732c 0a20 2020 2020 2020 2020 2020  ess,.           
-0000ba20: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-0000ba30: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-0000ba40: 2020 6177 6169 7420 6173 796e 635f 7733    await async_w3
-0000ba50: 2e65 7468 2e63 616c 6c28 7478 6e5f 7061  .eth.call(txn_pa
-0000ba60: 7261 6d73 290a 0a20 2020 2040 7079 7465  rams)..    @pyte
-0000ba70: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
-0000ba80: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
-0000ba90: 7374 5f65 7468 5f63 616c 6c5f 7265 7665  st_eth_call_reve
-0000baa0: 7274 5f63 7573 746f 6d5f 6572 726f 725f  rt_custom_error_
-0000bab0: 7769 7468 5f6d 7367 280a 2020 2020 2020  with_msg(.      
-0000bac0: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-0000bad0: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
-0000bae0: 5765 6233 222c 0a20 2020 2020 2020 2072  Web3",.        r
-0000baf0: 6576 6572 745f 636f 6e74 7261 6374 3a20  evert_contract: 
-0000bb00: 2243 6f6e 7472 6163 7422 2c0a 2020 2020  "Contract",.    
-0000bb10: 2020 2020 756e 6c6f 636b 6564 5f61 6363      unlocked_acc
-0000bb20: 6f75 6e74 3a20 4368 6563 6b73 756d 4164  ount: ChecksumAd
-0000bb30: 6472 6573 732c 0a20 2020 2029 202d 3e20  dress,.    ) -> 
-0000bb40: 4e6f 6e65 3a0a 2020 2020 2020 2020 6461  None:.        da
-0000bb50: 7461 203d 2072 6576 6572 745f 636f 6e74  ta = revert_cont
-0000bb60: 7261 6374 2e65 6e63 6f64 6541 4249 280a  ract.encodeABI(.
-0000bb70: 2020 2020 2020 2020 2020 2020 666e 5f6e              fn_n
-0000bb80: 616d 653d 2255 6e61 7574 686f 7269 7a65  ame="Unauthorize
-0000bb90: 6457 6974 684d 6573 7361 6765 222c 2061  dWithMessage", a
-0000bba0: 7267 733d 5b22 596f 7520 6172 6520 6e6f  rgs=["You are no
-0000bbb0: 7420 6175 7468 6f72 697a 6564 225d 0a20  t authorized"]. 
-0000bbc0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0000bbd0: 2074 786e 5f70 6172 616d 7320 3d20 7265   txn_params = re
-0000bbe0: 7665 7274 5f63 6f6e 7472 6163 742e 5f70  vert_contract._p
-0000bbf0: 7265 7061 7265 5f74 7261 6e73 6163 7469  repare_transacti
-0000bc00: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
-0000bc10: 666e 5f6e 616d 653d 2263 7573 746f 6d45  fn_name="customE
-0000bc20: 7272 6f72 5769 7468 4d65 7373 6167 6522  rrorWithMessage"
-0000bc30: 2c0a 2020 2020 2020 2020 2020 2020 7472  ,.            tr
-0000bc40: 616e 7361 6374 696f 6e3d 7b0a 2020 2020  ansaction={.    
-0000bc50: 2020 2020 2020 2020 2020 2020 2266 726f              "fro
-0000bc60: 6d22 3a20 756e 6c6f 636b 6564 5f61 6363  m": unlocked_acc
-0000bc70: 6f75 6e74 2c0a 2020 2020 2020 2020 2020  ount,.          
-0000bc80: 2020 2020 2020 2274 6f22 3a20 7265 7665        "to": reve
-0000bc90: 7274 5f63 6f6e 7472 6163 742e 6164 6472  rt_contract.addr
-0000bca0: 6573 732c 0a20 2020 2020 2020 2020 2020  ess,.           
-0000bcb0: 207d 2c0a 2020 2020 2020 2020 290a 2020   },.        ).  
-0000bcc0: 2020 2020 2020 7769 7468 2070 7974 6573        with pytes
-0000bcd0: 742e 7261 6973 6573 2843 6f6e 7472 6163  t.raises(Contrac
-0000bce0: 7443 7573 746f 6d45 7272 6f72 2c20 6d61  tCustomError, ma
-0000bcf0: 7463 683d 6461 7461 293a 0a20 2020 2020  tch=data):.     
-0000bd00: 2020 2020 2020 2061 7761 6974 2061 7379         await asy
-0000bd10: 6e63 5f77 332e 6574 682e 6361 6c6c 2874  nc_w3.eth.call(t
-0000bd20: 786e 5f70 6172 616d 7329 0a0a 2020 2020  xn_params)..    
-0000bd30: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
-0000bd40: 6e63 696f 0a20 2020 2061 7379 6e63 2064  ncio.    async d
-0000bd50: 6566 2074 6573 745f 6574 685f 6361 6c6c  ef test_eth_call
-0000bd60: 5f72 6576 6572 745f 6375 7374 6f6d 5f65  _revert_custom_e
-0000bd70: 7272 6f72 5f77 6974 686f 7574 5f6d 7367  rror_without_msg
-0000bd80: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
-0000bd90: 2020 2020 2020 2020 6173 796e 635f 7733          async_w3
-0000bda0: 3a20 2241 7379 6e63 5765 6233 222c 0a20  : "AsyncWeb3",. 
-0000bdb0: 2020 2020 2020 2072 6576 6572 745f 636f         revert_co
-0000bdc0: 6e74 7261 6374 3a20 2243 6f6e 7472 6163  ntract: "Contrac
-0000bdd0: 7422 2c0a 2020 2020 2020 2020 756e 6c6f  t",.        unlo
-0000bde0: 636b 6564 5f61 6363 6f75 6e74 3a20 4368  cked_account: Ch
-0000bdf0: 6563 6b73 756d 4164 6472 6573 732c 0a20  ecksumAddress,. 
-0000be00: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-0000be10: 2020 2020 2020 6461 7461 203d 2072 6576        data = rev
-0000be20: 6572 745f 636f 6e74 7261 6374 2e65 6e63  ert_contract.enc
-0000be30: 6f64 6541 4249 2866 6e5f 6e61 6d65 3d22  odeABI(fn_name="
-0000be40: 556e 6175 7468 6f72 697a 6564 2229 0a20  Unauthorized"). 
-0000be50: 2020 2020 2020 2074 786e 5f70 6172 616d         txn_param
-0000be60: 7320 3d20 7265 7665 7274 5f63 6f6e 7472  s = revert_contr
-0000be70: 6163 742e 5f70 7265 7061 7265 5f74 7261  act._prepare_tra
-0000be80: 6e73 6163 7469 6f6e 280a 2020 2020 2020  nsaction(.      
-0000be90: 2020 2020 2020 666e 5f6e 616d 653d 2263        fn_name="c
-0000bea0: 7573 746f 6d45 7272 6f72 5769 7468 6f75  ustomErrorWithou
-0000beb0: 744d 6573 7361 6765 222c 0a20 2020 2020  tMessage",.     
-0000bec0: 2020 2020 2020 2074 7261 6e73 6163 7469         transacti
-0000bed0: 6f6e 3d7b 0a20 2020 2020 2020 2020 2020  on={.           
-0000bee0: 2020 2020 2022 6672 6f6d 223a 2075 6e6c       "from": unl
-0000bef0: 6f63 6b65 645f 6163 636f 756e 742c 0a20  ocked_account,. 
-0000bf00: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000bf10: 746f 223a 2072 6576 6572 745f 636f 6e74  to": revert_cont
-0000bf20: 7261 6374 2e61 6464 7265 7373 2c0a 2020  ract.address,.  
-0000bf30: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
-0000bf40: 2020 2020 2029 0a20 2020 2020 2020 2077       ).        w
-0000bf50: 6974 6820 7079 7465 7374 2e72 6169 7365  ith pytest.raise
-0000bf60: 7328 436f 6e74 7261 6374 4375 7374 6f6d  s(ContractCustom
-0000bf70: 4572 726f 722c 206d 6174 6368 3d64 6174  Error, match=dat
-0000bf80: 6129 3a0a 2020 2020 2020 2020 2020 2020  a):.            
-0000bf90: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
-0000bfa0: 7468 2e63 616c 6c28 7478 6e5f 7061 7261  th.call(txn_para
-0000bfb0: 6d73 290a 0a20 2020 2040 7079 7465 7374  ms)..    @pytest
-0000bfc0: 2e6d 6172 6b2e 7061 7261 6d65 7472 697a  .mark.parametriz
-0000bfd0: 6528 0a20 2020 2020 2020 2022 7061 6e69  e(.        "pani
-0000bfe0: 635f 6572 726f 722c 7061 7261 6d73 222c  c_error,params",
-0000bff0: 0a20 2020 2020 2020 2028 0a20 2020 2020  .        (.     
-0000c000: 2020 2020 2020 2028 2230 3122 2c20 5b5d         ("01", []
-0000c010: 292c 0a20 2020 2020 2020 2020 2020 2028  ),.            (
-0000c020: 2231 3122 2c20 5b5d 292c 0a20 2020 2020  "11", []),.     
-0000c030: 2020 2020 2020 2028 2231 3222 2c20 5b30         ("12", [0
-0000c040: 5d29 2c0a 2020 2020 2020 2020 2020 2020  ]),.            
-0000c050: 2822 3231 222c 205b 2d31 5d29 2c0a 2020  ("21", [-1]),.  
-0000c060: 2020 2020 2020 2020 2020 2822 3232 222c            ("22",
-0000c070: 205b 5d29 2c0a 2020 2020 2020 2020 2020   []),.          
-0000c080: 2020 2822 3331 222c 205b 5d29 2c0a 2020    ("31", []),.  
-0000c090: 2020 2020 2020 2020 2020 2822 3332 222c            ("32",
-0000c0a0: 205b 5d29 2c0a 2020 2020 2020 2020 2020   []),.          
-0000c0b0: 2020 2822 3431 222c 205b 5d29 2c0a 2020    ("41", []),.  
-0000c0c0: 2020 2020 2020 2020 2020 2822 3531 222c            ("51",
-0000c0d0: 205b 5d29 2c0a 2020 2020 2020 2020 292c   []),.        ),
-0000c0e0: 0a20 2020 2029 0a20 2020 2040 7079 7465  .    ).    @pyte
-0000c0f0: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
-0000c100: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
-0000c110: 7374 5f63 6f6e 7472 6163 745f 7061 6e69  st_contract_pani
-0000c120: 635f 6572 726f 7273 280a 2020 2020 2020  c_errors(.      
-0000c130: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-0000c140: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
-0000c150: 5765 6233 222c 0a20 2020 2020 2020 2061  Web3",.        a
-0000c160: 7379 6e63 5f70 616e 6963 5f65 7272 6f72  sync_panic_error
-0000c170: 735f 636f 6e74 7261 6374 3a20 2243 6f6e  s_contract: "Con
-0000c180: 7472 6163 7422 2c0a 2020 2020 2020 2020  tract",.        
-0000c190: 7061 6e69 635f 6572 726f 723a 2073 7472  panic_error: str
-0000c1a0: 2c0a 2020 2020 2020 2020 7061 7261 6d73  ,.        params
-0000c1b0: 3a20 4c69 7374 5b41 6e79 5d2c 0a20 2020  : List[Any],.   
-0000c1c0: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-0000c1d0: 2020 2020 6d65 7468 6f64 203d 2067 6574      method = get
-0000c1e0: 6174 7472 280a 2020 2020 2020 2020 2020  attr(.          
-0000c1f0: 2020 6173 796e 635f 7061 6e69 635f 6572    async_panic_er
-0000c200: 726f 7273 5f63 6f6e 7472 6163 742e 6675  rors_contract.fu
-0000c210: 6e63 7469 6f6e 732c 0a20 2020 2020 2020  nctions,.       
-0000c220: 2020 2020 2066 2265 7272 6f72 436f 6465       f"errorCode
-0000c230: 7b70 616e 6963 5f65 7272 6f72 7d22 2c0a  {panic_error}",.
-0000c240: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0000c250: 2020 6572 726f 725f 6d73 6720 3d20 5041    error_msg = PA
-0000c260: 4e49 435f 4552 524f 525f 434f 4445 535b  NIC_ERROR_CODES[
-0000c270: 7061 6e69 635f 6572 726f 725d 0a0a 2020  panic_error]..  
-0000c280: 2020 2020 2020 7769 7468 2070 7974 6573        with pytes
-0000c290: 742e 7261 6973 6573 2843 6f6e 7472 6163  t.raises(Contrac
-0000c2a0: 7450 616e 6963 4572 726f 722c 206d 6174  tPanicError, mat
-0000c2b0: 6368 3d72 652e 6573 6361 7065 2865 7272  ch=re.escape(err
-0000c2c0: 6f72 5f6d 7367 2929 3a0a 2020 2020 2020  or_msg)):.      
-0000c2d0: 2020 2020 2020 6177 6169 7420 6d65 7468        await meth
-0000c2e0: 6f64 282a 7061 7261 6d73 292e 6361 6c6c  od(*params).call
-0000c2f0: 2829 0a0a 2020 2020 4070 7974 6573 742e  ()..    @pytest.
-0000c300: 6d61 726b 2e61 7379 6e63 696f 0a20 2020  mark.asyncio.   
-0000c310: 2061 7379 6e63 2064 6566 2074 6573 745f   async def test_
-0000c320: 6574 685f 6361 6c6c 5f6f 6666 6368 6169  eth_call_offchai
-0000c330: 6e5f 6c6f 6f6b 7570 280a 2020 2020 2020  n_lookup(.      
-0000c340: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-0000c350: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
-0000c360: 5765 6233 222c 0a20 2020 2020 2020 2061  Web3",.        a
-0000c370: 7379 6e63 5f6f 6666 6368 6169 6e5f 6c6f  sync_offchain_lo
-0000c380: 6f6b 7570 5f63 6f6e 7472 6163 743a 2022  okup_contract: "
-0000c390: 436f 6e74 7261 6374 222c 0a20 2020 2020  Contract",.     
-0000c3a0: 2020 2075 6e6c 6f63 6b65 645f 6163 636f     unlocked_acco
-0000c3b0: 756e 743a 2043 6865 636b 7375 6d41 6464  unt: ChecksumAdd
-0000c3c0: 7265 7373 2c0a 2020 2020 2020 2020 6d6f  ress,.        mo
-0000c3d0: 6e6b 6579 7061 7463 683a 2022 4d6f 6e6b  nkeypatch: "Monk
-0000c3e0: 6579 5061 7463 6822 2c0a 2020 2020 2920  eyPatch",.    ) 
-0000c3f0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-0000c400: 206e 6f72 6d61 6c69 7a65 645f 636f 6e74   normalized_cont
-0000c410: 7261 6374 5f61 6464 7265 7373 203d 2074  ract_address = t
-0000c420: 6f5f 6865 785f 6966 5f62 7974 6573 280a  o_hex_if_bytes(.
-0000c430: 2020 2020 2020 2020 2020 2020 6173 796e              asyn
-0000c440: 635f 6f66 6663 6861 696e 5f6c 6f6f 6b75  c_offchain_looku
-0000c450: 705f 636f 6e74 7261 6374 2e61 6464 7265  p_contract.addre
-0000c460: 7373 0a20 2020 2020 2020 2029 2e6c 6f77  ss.        ).low
-0000c470: 6572 2829 0a0a 2020 2020 2020 2020 6173  er()..        as
-0000c480: 796e 635f 6d6f 636b 5f6f 6666 6368 6169  ync_mock_offchai
-0000c490: 6e5f 6c6f 6f6b 7570 5f72 6571 7565 7374  n_lookup_request
-0000c4a0: 5f72 6573 706f 6e73 6528 0a20 2020 2020  _response(.     
-0000c4b0: 2020 2020 2020 206d 6f6e 6b65 7970 6174         monkeypat
-0000c4c0: 6368 2c0a 2020 2020 2020 2020 2020 2020  ch,.            
-0000c4d0: 6d6f 636b 6564 5f72 6571 7565 7374 5f75  mocked_request_u
-0000c4e0: 726c 3d66 2268 7474 7073 3a2f 2f77 6562  rl=f"https://web
-0000c4f0: 332e 7079 2f67 6174 6577 6179 2f7b 6e6f  3.py/gateway/{no
-0000c500: 726d 616c 697a 6564 5f63 6f6e 7472 6163  rmalized_contrac
-0000c510: 745f 6164 6472 6573 737d 2f7b 4f46 4643  t_address}/{OFFC
-0000c520: 4841 494e 5f4c 4f4f 4b55 505f 5445 5354  HAIN_LOOKUP_TEST
-0000c530: 5f44 4154 417d 2e6a 736f 6e22 2c20 2023  _DATA}.json",  #
-0000c540: 206e 6f71 613a 2045 3530 310a 2020 2020   noqa: E501.    
-0000c550: 2020 2020 2020 2020 6d6f 636b 6564 5f6a          mocked_j
-0000c560: 736f 6e5f 6461 7461 3d57 4542 3350 595f  son_data=WEB3PY_
-0000c570: 4153 5f48 4558 4259 5445 532c 0a20 2020  AS_HEXBYTES,.   
-0000c580: 2020 2020 2029 0a20 2020 2020 2020 2072       ).        r
-0000c590: 6573 706f 6e73 655f 6361 6c6c 6572 203d  esponse_caller =
-0000c5a0: 2061 7761 6974 2061 7379 6e63 5f6f 6666   await async_off
-0000c5b0: 6368 6169 6e5f 6c6f 6f6b 7570 5f63 6f6e  chain_lookup_con
-0000c5c0: 7472 6163 742e 6361 6c6c 6572 2829 2e74  tract.caller().t
-0000c5d0: 6573 744f 6666 6368 6169 6e4c 6f6f 6b75  estOffchainLooku
-0000c5e0: 7028 2020 2320 6e6f 7161 3a20 4535 3031  p(  # noqa: E501
-0000c5f0: 2074 7970 653a 2069 676e 6f72 650a 2020   type: ignore.  
-0000c600: 2020 2020 2020 2020 2020 4f46 4643 4841            OFFCHA
-0000c610: 494e 5f4c 4f4f 4b55 505f 5445 5354 5f44  IN_LOOKUP_TEST_D
-0000c620: 4154 410a 2020 2020 2020 2020 290a 2020  ATA.        ).  
-0000c630: 2020 2020 2020 7265 7370 6f6e 7365 5f66        response_f
-0000c640: 756e 6374 696f 6e5f 6361 6c6c 203d 2061  unction_call = a
-0000c650: 7761 6974 2061 7379 6e63 5f6f 6666 6368  wait async_offch
-0000c660: 6169 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472  ain_lookup_contr
-0000c670: 6163 742e 6675 6e63 7469 6f6e 732e 7465  act.functions.te
-0000c680: 7374 4f66 6663 6861 696e 4c6f 6f6b 7570  stOffchainLookup
-0000c690: 2820 2023 206e 6f71 613a 2045 3530 3120  (  # noqa: E501 
-0000c6a0: 7479 7065 3a20 6967 6e6f 7265 0a20 2020  type: ignore.   
-0000c6b0: 2020 2020 2020 2020 204f 4646 4348 4149           OFFCHAI
-0000c6c0: 4e5f 4c4f 4f4b 5550 5f54 4553 545f 4441  N_LOOKUP_TEST_DA
-0000c6d0: 5441 0a20 2020 2020 2020 2029 2e63 616c  TA.        ).cal
-0000c6e0: 6c28 290a 2020 2020 2020 2020 6173 7365  l().        asse
-0000c6f0: 7274 2061 7379 6e63 5f77 332e 636f 6465  rt async_w3.code
-0000c700: 632e 6465 636f 6465 285b 2273 7472 696e  c.decode(["strin
-0000c710: 6722 5d2c 2072 6573 706f 6e73 655f 6361  g"], response_ca
-0000c720: 6c6c 6572 295b 305d 203d 3d20 2277 6562  ller)[0] == "web
-0000c730: 3370 7922 0a20 2020 2020 2020 2061 7373  3py".        ass
-0000c740: 6572 7420 6173 796e 635f 7733 2e63 6f64  ert async_w3.cod
-0000c750: 6563 2e64 6563 6f64 6528 5b22 7374 7269  ec.decode(["stri
-0000c760: 6e67 225d 2c20 7265 7370 6f6e 7365 5f66  ng"], response_f
-0000c770: 756e 6374 696f 6e5f 6361 6c6c 295b 305d  unction_call)[0]
-0000c780: 203d 3d20 2277 6562 3370 7922 0a0a 2020   == "web3py"..  
-0000c790: 2020 4070 7974 6573 742e 6d61 726b 2e61    @pytest.mark.a
-0000c7a0: 7379 6e63 696f 0a20 2020 2061 7379 6e63  syncio.    async
-0000c7b0: 2064 6566 2074 6573 745f 6574 685f 6361   def test_eth_ca
-0000c7c0: 6c6c 5f6f 6666 6368 6169 6e5f 6c6f 6f6b  ll_offchain_look
-0000c7d0: 7570 5f72 6169 7365 735f 7768 656e 5f63  up_raises_when_c
-0000c7e0: 6369 705f 7265 6164 5f69 735f 6469 7361  cip_read_is_disa
-0000c7f0: 626c 6564 280a 2020 2020 2020 2020 7365  bled(.        se
-0000c800: 6c66 2c0a 2020 2020 2020 2020 6173 796e  lf,.        asyn
-0000c810: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
-0000c820: 222c 0a20 2020 2020 2020 2061 7379 6e63  ",.        async
-0000c830: 5f6f 6666 6368 6169 6e5f 6c6f 6f6b 7570  _offchain_lookup
-0000c840: 5f63 6f6e 7472 6163 743a 2022 436f 6e74  _contract: "Cont
-0000c850: 7261 6374 222c 0a20 2020 2029 202d 3e20  ract",.    ) -> 
-0000c860: 4e6f 6e65 3a0a 2020 2020 2020 2020 7265  None:.        re
-0000c870: 7475 726e 5f64 6174 6120 3d20 280a 2020  turn_data = (.  
-0000c880: 2020 2020 2020 2020 2020 4f46 4643 4841            OFFCHA
-0000c890: 494e 5f4c 4f4f 4b55 505f 3442 5954 455f  IN_LOOKUP_4BYTE_
-0000c8a0: 4441 5441 0a20 2020 2020 2020 2020 2020  DATA.           
-0000c8b0: 202b 2061 6269 5f65 6e63 6f64 6564 5f6f   + abi_encoded_o
-0000c8c0: 6666 6368 6169 6e5f 6c6f 6f6b 7570 5f63  ffchain_lookup_c
-0000c8d0: 6f6e 7472 6163 745f 6164 6472 6573 7328  ontract_address(
-0000c8e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c8f0: 2061 7379 6e63 5f77 332c 2061 7379 6e63   async_w3, async
-0000c900: 5f6f 6666 6368 6169 6e5f 6c6f 6f6b 7570  _offchain_lookup
-0000c910: 5f63 6f6e 7472 6163 740a 2020 2020 2020  _contract.      
-0000c920: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0000c930: 2020 2020 2b20 4f46 4643 4841 494e 5f4c      + OFFCHAIN_L
-0000c940: 4f4f 4b55 505f 5245 5455 524e 5f44 4154  OOKUP_RETURN_DAT
-0000c950: 410a 2020 2020 2020 2020 290a 2020 2020  A.        ).    
-0000c960: 2020 2020 2320 7465 7374 2041 7379 6e63      # test Async
-0000c970: 436f 6e74 7261 6374 4361 6c6c 6572 0a20  ContractCaller. 
-0000c980: 2020 2020 2020 2077 6974 6820 7079 7465         with pyte
-0000c990: 7374 2e72 6169 7365 7328 4f66 6663 6861  st.raises(Offcha
-0000c9a0: 696e 4c6f 6f6b 7570 2920 6173 2065 3a0a  inLookup) as e:.
-0000c9b0: 2020 2020 2020 2020 2020 2020 6177 6169              awai
-0000c9c0: 7420 6173 796e 635f 6f66 6663 6861 696e  t async_offchain
-0000c9d0: 5f6c 6f6f 6b75 705f 636f 6e74 7261 6374  _lookup_contract
-0000c9e0: 2e63 616c 6c65 7228 0a20 2020 2020 2020  .caller(.       
-0000c9f0: 2020 2020 2020 2020 2063 6369 705f 7265           ccip_re
-0000ca00: 6164 5f65 6e61 626c 6564 3d46 616c 7365  ad_enabled=False
-0000ca10: 0a20 2020 2020 2020 2020 2020 2029 2e74  .            ).t
-0000ca20: 6573 744f 6666 6368 6169 6e4c 6f6f 6b75  estOffchainLooku
-0000ca30: 7028 4f46 4643 4841 494e 5f4c 4f4f 4b55  p(OFFCHAIN_LOOKU
-0000ca40: 505f 5445 5354 5f44 4154 4129 0a20 2020  P_TEST_DATA).   
-0000ca50: 2020 2020 2061 7373 6572 7420 652e 7661       assert e.va
-0000ca60: 6c75 652e 6461 7461 203d 3d20 7265 7475  lue.data == retu
-0000ca70: 726e 5f64 6174 610a 0a20 2020 2020 2020  rn_data..       
-0000ca80: 2023 2074 6573 7420 4173 796e 6343 6f6e   # test AsyncCon
-0000ca90: 7472 6163 7446 756e 6374 696f 6e20 6361  tractFunction ca
-0000caa0: 6c6c 0a20 2020 2020 2020 2077 6974 6820  ll.        with 
-0000cab0: 7079 7465 7374 2e72 6169 7365 7328 4f66  pytest.raises(Of
-0000cac0: 6663 6861 696e 4c6f 6f6b 7570 2920 6173  fchainLookup) as
-0000cad0: 2065 7863 696e 666f 3a0a 2020 2020 2020   excinfo:.      
-0000cae0: 2020 2020 2020 6177 6169 7420 6173 796e        await asyn
-0000caf0: 635f 6f66 6663 6861 696e 5f6c 6f6f 6b75  c_offchain_looku
-0000cb00: 705f 636f 6e74 7261 6374 2e66 756e 6374  p_contract.funct
-0000cb10: 696f 6e73 2e74 6573 744f 6666 6368 6169  ions.testOffchai
-0000cb20: 6e4c 6f6f 6b75 7028 0a20 2020 2020 2020  nLookup(.       
-0000cb30: 2020 2020 2020 2020 204f 4646 4348 4149           OFFCHAI
-0000cb40: 4e5f 4c4f 4f4b 5550 5f54 4553 545f 4441  N_LOOKUP_TEST_DA
-0000cb50: 5441 0a20 2020 2020 2020 2020 2020 2029  TA.            )
-0000cb60: 2e63 616c 6c28 6363 6970 5f72 6561 645f  .call(ccip_read_
-0000cb70: 656e 6162 6c65 643d 4661 6c73 6529 0a20  enabled=False). 
-0000cb80: 2020 2020 2020 2061 7373 6572 7420 6578         assert ex
-0000cb90: 6369 6e66 6f2e 7661 6c75 652e 6461 7461  cinfo.value.data
-0000cba0: 203d 3d20 7265 7475 726e 5f64 6174 610a   == return_data.
-0000cbb0: 0a20 2020 2020 2020 2023 2074 6573 7420  .        # test 
-0000cbc0: 676c 6f62 616c 2066 6c61 6720 6f6e 2074  global flag on t
-0000cbd0: 6865 2070 726f 7669 6465 720a 2020 2020  he provider.    
-0000cbe0: 2020 2020 6173 796e 635f 7733 2e70 726f      async_w3.pro
-0000cbf0: 7669 6465 722e 676c 6f62 616c 5f63 6369  vider.global_cci
-0000cc00: 705f 7265 6164 5f65 6e61 626c 6564 203d  p_read_enabled =
-0000cc10: 2046 616c 7365 0a0a 2020 2020 2020 2020   False..        
-0000cc20: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
-0000cc30: 6573 284f 6666 6368 6169 6e4c 6f6f 6b75  es(OffchainLooku
-0000cc40: 7029 2061 7320 6578 635f 696e 666f 3a0a  p) as exc_info:.
-0000cc50: 2020 2020 2020 2020 2020 2020 6177 6169              awai
-0000cc60: 7420 6173 796e 635f 6f66 6663 6861 696e  t async_offchain
-0000cc70: 5f6c 6f6f 6b75 705f 636f 6e74 7261 6374  _lookup_contract
-0000cc80: 2e66 756e 6374 696f 6e73 2e74 6573 744f  .functions.testO
-0000cc90: 6666 6368 6169 6e4c 6f6f 6b75 7028 2020  ffchainLookup(  
-0000cca0: 2320 6e6f 7161 3a20 4535 3031 2074 7970  # noqa: E501 typ
-0000ccb0: 653a 2069 676e 6f72 650a 2020 2020 2020  e: ignore.      
-0000ccc0: 2020 2020 2020 2020 2020 4f46 4643 4841            OFFCHA
-0000ccd0: 494e 5f4c 4f4f 4b55 505f 5445 5354 5f44  IN_LOOKUP_TEST_D
-0000cce0: 4154 410a 2020 2020 2020 2020 2020 2020  ATA.            
-0000ccf0: 292e 6361 6c6c 2829 0a20 2020 2020 2020  ).call().       
-0000cd00: 2061 7373 6572 7420 6578 635f 696e 666f   assert exc_info
-0000cd10: 2e76 616c 7565 2e64 6174 6120 3d3d 2072  .value.data == r
-0000cd20: 6574 7572 6e5f 6461 7461 0a0a 2020 2020  eturn_data..    
-0000cd30: 2020 2020 6173 796e 635f 7733 2e70 726f      async_w3.pro
-0000cd40: 7669 6465 722e 676c 6f62 616c 5f63 6369  vider.global_cci
-0000cd50: 705f 7265 6164 5f65 6e61 626c 6564 203d  p_read_enabled =
-0000cd60: 2054 7275 6520 2023 2063 6c65 616e 7570   True  # cleanup
-0000cd70: 0a0a 2020 2020 4070 7974 6573 742e 6d61  ..    @pytest.ma
-0000cd80: 726b 2e61 7379 6e63 696f 0a20 2020 2061  rk.asyncio.    a
-0000cd90: 7379 6e63 2064 6566 2074 6573 745f 6574  sync def test_et
-0000cda0: 685f 6361 6c6c 5f6f 6666 6368 6169 6e5f  h_call_offchain_
-0000cdb0: 6c6f 6f6b 7570 5f63 616c 6c5f 666c 6167  lookup_call_flag
-0000cdc0: 5f6f 7665 7272 6964 6573 5f70 726f 7669  _overrides_provi
-0000cdd0: 6465 725f 666c 6167 280a 2020 2020 2020  der_flag(.      
-0000cde0: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-0000cdf0: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
-0000ce00: 5765 6233 222c 0a20 2020 2020 2020 2061  Web3",.        a
-0000ce10: 7379 6e63 5f6f 6666 6368 6169 6e5f 6c6f  sync_offchain_lo
-0000ce20: 6f6b 7570 5f63 6f6e 7472 6163 743a 2022  okup_contract: "
-0000ce30: 436f 6e74 7261 6374 222c 0a20 2020 2020  Contract",.     
-0000ce40: 2020 2075 6e6c 6f63 6b65 645f 6163 636f     unlocked_acco
-0000ce50: 756e 743a 2043 6865 636b 7375 6d41 6464  unt: ChecksumAdd
-0000ce60: 7265 7373 2c0a 2020 2020 2020 2020 6d6f  ress,.        mo
-0000ce70: 6e6b 6579 7061 7463 683a 2022 4d6f 6e6b  nkeypatch: "Monk
-0000ce80: 6579 5061 7463 6822 2c0a 2020 2020 2920  eyPatch",.    ) 
-0000ce90: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-0000cea0: 206e 6f72 6d61 6c69 7a65 645f 636f 6e74   normalized_cont
-0000ceb0: 7261 6374 5f61 6464 7265 7373 203d 2074  ract_address = t
-0000cec0: 6f5f 6865 785f 6966 5f62 7974 6573 280a  o_hex_if_bytes(.
-0000ced0: 2020 2020 2020 2020 2020 2020 6173 796e              asyn
-0000cee0: 635f 6f66 6663 6861 696e 5f6c 6f6f 6b75  c_offchain_looku
-0000cef0: 705f 636f 6e74 7261 6374 2e61 6464 7265  p_contract.addre
-0000cf00: 7373 0a20 2020 2020 2020 2029 2e6c 6f77  ss.        ).low
-0000cf10: 6572 2829 0a0a 2020 2020 2020 2020 6173  er()..        as
-0000cf20: 796e 635f 6d6f 636b 5f6f 6666 6368 6169  ync_mock_offchai
-0000cf30: 6e5f 6c6f 6f6b 7570 5f72 6571 7565 7374  n_lookup_request
-0000cf40: 5f72 6573 706f 6e73 6528 0a20 2020 2020  _response(.     
-0000cf50: 2020 2020 2020 206d 6f6e 6b65 7970 6174         monkeypat
-0000cf60: 6368 2c0a 2020 2020 2020 2020 2020 2020  ch,.            
-0000cf70: 6d6f 636b 6564 5f72 6571 7565 7374 5f75  mocked_request_u
-0000cf80: 726c 3d66 2268 7474 7073 3a2f 2f77 6562  rl=f"https://web
-0000cf90: 332e 7079 2f67 6174 6577 6179 2f7b 6e6f  3.py/gateway/{no
-0000cfa0: 726d 616c 697a 6564 5f63 6f6e 7472 6163  rmalized_contrac
-0000cfb0: 745f 6164 6472 6573 737d 2f7b 4f46 4643  t_address}/{OFFC
-0000cfc0: 4841 494e 5f4c 4f4f 4b55 505f 5445 5354  HAIN_LOOKUP_TEST
-0000cfd0: 5f44 4154 417d 2e6a 736f 6e22 2c20 2023  _DATA}.json",  #
-0000cfe0: 206e 6f71 613a 2045 3530 310a 2020 2020   noqa: E501.    
-0000cff0: 2020 2020 2020 2020 6d6f 636b 6564 5f6a          mocked_j
-0000d000: 736f 6e5f 6461 7461 3d57 4542 3350 595f  son_data=WEB3PY_
-0000d010: 4153 5f48 4558 4259 5445 532c 0a20 2020  AS_HEXBYTES,.   
-0000d020: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-0000d030: 6173 796e 635f 7733 2e70 726f 7669 6465  async_w3.provide
-0000d040: 722e 676c 6f62 616c 5f63 6369 705f 7265  r.global_ccip_re
-0000d050: 6164 5f65 6e61 626c 6564 203d 2046 616c  ad_enabled = Fal
-0000d060: 7365 0a0a 2020 2020 2020 2020 7265 7370  se..        resp
-0000d070: 6f6e 7365 203d 2061 7761 6974 2061 7379  onse = await asy
-0000d080: 6e63 5f6f 6666 6368 6169 6e5f 6c6f 6f6b  nc_offchain_look
-0000d090: 7570 5f63 6f6e 7472 6163 742e 6675 6e63  up_contract.func
-0000d0a0: 7469 6f6e 732e 7465 7374 4f66 6663 6861  tions.testOffcha
-0000d0b0: 696e 4c6f 6f6b 7570 280a 2020 2020 2020  inLookup(.      
-0000d0c0: 2020 2020 2020 4f46 4643 4841 494e 5f4c        OFFCHAIN_L
-0000d0d0: 4f4f 4b55 505f 5445 5354 5f44 4154 410a  OOKUP_TEST_DATA.
-0000d0e0: 2020 2020 2020 2020 292e 6361 6c6c 2863          ).call(c
-0000d0f0: 6369 705f 7265 6164 5f65 6e61 626c 6564  cip_read_enabled
-0000d100: 3d54 7275 6529 0a20 2020 2020 2020 2061  =True).        a
-0000d110: 7373 6572 7420 6173 796e 635f 7733 2e63  ssert async_w3.c
-0000d120: 6f64 6563 2e64 6563 6f64 6528 5b22 7374  odec.decode(["st
-0000d130: 7269 6e67 225d 2c20 7265 7370 6f6e 7365  ring"], response
-0000d140: 295b 305d 203d 3d20 2277 6562 3370 7922  )[0] == "web3py"
-0000d150: 0a0a 2020 2020 2020 2020 6173 796e 635f  ..        async_
-0000d160: 7733 2e70 726f 7669 6465 722e 676c 6f62  w3.provider.glob
-0000d170: 616c 5f63 6369 705f 7265 6164 5f65 6e61  al_ccip_read_ena
-0000d180: 626c 6564 203d 2054 7275 6520 2023 2063  bled = True  # c
-0000d190: 6c65 616e 7570 0a0a 2020 2020 4070 7974  leanup..    @pyt
-0000d1a0: 6573 742e 6d61 726b 2e61 7379 6e63 696f  est.mark.asyncio
-0000d1b0: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
-0000d1c0: 6b2e 7061 7261 6d65 7472 697a 6528 226d  k.parametrize("m
-0000d1d0: 6178 5f72 6564 6972 6563 7473 222c 2072  ax_redirects", r
-0000d1e0: 616e 6765 282d 312c 2034 2929 0a20 2020  ange(-1, 4)).   
-0000d1f0: 2061 7379 6e63 2064 6566 2074 6573 745f   async def test_
-0000d200: 6574 685f 6361 6c6c 5f6f 6666 6368 6169  eth_call_offchai
-0000d210: 6e5f 6c6f 6f6b 7570 5f72 6169 7365 735f  n_lookup_raises_
-0000d220: 6966 5f6d 6178 5f72 6564 6972 6563 7473  if_max_redirects
-0000d230: 5f69 735f 6c65 7373 5f74 6861 6e5f 3428  _is_less_than_4(
-0000d240: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
-0000d250: 2020 2020 2020 2061 7379 6e63 5f77 333a         async_w3:
-0000d260: 2022 4173 796e 6357 6562 3322 2c0a 2020   "AsyncWeb3",.  
-0000d270: 2020 2020 2020 6173 796e 635f 6f66 6663        async_offc
-0000d280: 6861 696e 5f6c 6f6f 6b75 705f 636f 6e74  hain_lookup_cont
-0000d290: 7261 6374 3a20 2243 6f6e 7472 6163 7422  ract: "Contract"
-0000d2a0: 2c0a 2020 2020 2020 2020 6d61 785f 7265  ,.        max_re
-0000d2b0: 6469 7265 6374 733a 2069 6e74 2c0a 2020  directs: int,.  
-0000d2c0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-0000d2d0: 2020 2020 2064 6566 6175 6c74 5f6d 6178       default_max
-0000d2e0: 5f72 6564 6972 6563 7473 203d 2061 7379  _redirects = asy
-0000d2f0: 6e63 5f77 332e 7072 6f76 6964 6572 2e63  nc_w3.provider.c
-0000d300: 6369 705f 7265 6164 5f6d 6178 5f72 6564  cip_read_max_red
-0000d310: 6972 6563 7473 0a0a 2020 2020 2020 2020  irects..        
-0000d320: 6173 796e 635f 7733 2e70 726f 7669 6465  async_w3.provide
-0000d330: 722e 6363 6970 5f72 6561 645f 6d61 785f  r.ccip_read_max_
-0000d340: 7265 6469 7265 6374 7320 3d20 6d61 785f  redirects = max_
-0000d350: 7265 6469 7265 6374 730a 2020 2020 2020  redirects.      
-0000d360: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
-0000d370: 6973 6573 2856 616c 7565 4572 726f 722c  ises(ValueError,
-0000d380: 206d 6174 6368 3d22 6174 206c 6561 7374   match="at least
-0000d390: 2034 2229 3a0a 2020 2020 2020 2020 2020   4"):.          
-0000d3a0: 2020 6177 6169 7420 6173 796e 635f 6f66    await async_of
-0000d3b0: 6663 6861 696e 5f6c 6f6f 6b75 705f 636f  fchain_lookup_co
-0000d3c0: 6e74 7261 6374 2e63 616c 6c65 7228 292e  ntract.caller().
-0000d3d0: 7465 7374 4f66 6663 6861 696e 4c6f 6f6b  testOffchainLook
-0000d3e0: 7570 280a 2020 2020 2020 2020 2020 2020  up(.            
-0000d3f0: 2020 2020 4f46 4643 4841 494e 5f4c 4f4f      OFFCHAIN_LOO
-0000d400: 4b55 505f 5445 5354 5f44 4154 410a 2020  KUP_TEST_DATA.  
-0000d410: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
-0000d420: 2020 2020 2061 7379 6e63 5f77 332e 7072       async_w3.pr
-0000d430: 6f76 6964 6572 2e63 6369 705f 7265 6164  ovider.ccip_read
-0000d440: 5f6d 6178 5f72 6564 6972 6563 7473 203d  _max_redirects =
-0000d450: 2064 6566 6175 6c74 5f6d 6178 5f72 6564   default_max_red
-0000d460: 6972 6563 7473 2020 2320 636c 6561 6e75  irects  # cleanu
-0000d470: 700a 0a20 2020 2040 7079 7465 7374 2e6d  p..    @pytest.m
-0000d480: 6172 6b2e 6173 796e 6369 6f0a 2020 2020  ark.asyncio.    
-0000d490: 6173 796e 6320 6465 6620 7465 7374 5f65  async def test_e
-0000d4a0: 7468 5f63 616c 6c5f 6f66 6663 6861 696e  th_call_offchain
-0000d4b0: 5f6c 6f6f 6b75 705f 7261 6973 6573 5f66  _lookup_raises_f
-0000d4c0: 6f72 5f69 6d70 726f 7065 726c 795f 666f  or_improperly_fo
-0000d4d0: 726d 6174 7465 645f 7265 7374 5f72 6571  rmatted_rest_req
-0000d4e0: 7565 7374 5f72 6573 706f 6e73 6528 2020  uest_response(  
-0000d4f0: 2320 6e6f 7161 3a20 4535 3031 0a20 2020  # noqa: E501.   
-0000d500: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-0000d510: 2020 2061 7379 6e63 5f77 333a 2022 4173     async_w3: "As
-0000d520: 796e 6357 6562 3322 2c0a 2020 2020 2020  yncWeb3",.      
-0000d530: 2020 6173 796e 635f 6f66 6663 6861 696e    async_offchain
-0000d540: 5f6c 6f6f 6b75 705f 636f 6e74 7261 6374  _lookup_contract
-0000d550: 3a20 2243 6f6e 7472 6163 7422 2c0a 2020  : "Contract",.  
-0000d560: 2020 2020 2020 756e 6c6f 636b 6564 5f61        unlocked_a
-0000d570: 6363 6f75 6e74 3a20 4368 6563 6b73 756d  ccount: Checksum
-0000d580: 4164 6472 6573 732c 0a20 2020 2020 2020  Address,.       
-0000d590: 206d 6f6e 6b65 7970 6174 6368 3a20 224d   monkeypatch: "M
-0000d5a0: 6f6e 6b65 7950 6174 6368 222c 0a20 2020  onkeyPatch",.   
-0000d5b0: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-0000d5c0: 2020 2020 6e6f 726d 616c 697a 6564 5f63      normalized_c
-0000d5d0: 6f6e 7472 6163 745f 6164 6472 6573 7320  ontract_address 
-0000d5e0: 3d20 746f 5f68 6578 5f69 665f 6279 7465  = to_hex_if_byte
-0000d5f0: 7328 0a20 2020 2020 2020 2020 2020 2061  s(.            a
-0000d600: 7379 6e63 5f6f 6666 6368 6169 6e5f 6c6f  sync_offchain_lo
-0000d610: 6f6b 7570 5f63 6f6e 7472 6163 742e 6164  okup_contract.ad
-0000d620: 6472 6573 730a 2020 2020 2020 2020 292e  dress.        ).
-0000d630: 6c6f 7765 7228 290a 0a20 2020 2020 2020  lower()..       
-0000d640: 2061 7379 6e63 5f6d 6f63 6b5f 6f66 6663   async_mock_offc
-0000d650: 6861 696e 5f6c 6f6f 6b75 705f 7265 7175  hain_lookup_requ
-0000d660: 6573 745f 7265 7370 6f6e 7365 280a 2020  est_response(.  
-0000d670: 2020 2020 2020 2020 2020 6d6f 6e6b 6579            monkey
-0000d680: 7061 7463 682c 0a20 2020 2020 2020 2020  patch,.         
-0000d690: 2020 206d 6f63 6b65 645f 7265 7175 6573     mocked_reques
-0000d6a0: 745f 7572 6c3d 6622 6874 7470 733a 2f2f  t_url=f"https://
-0000d6b0: 7765 6233 2e70 792f 6761 7465 7761 792f  web3.py/gateway/
-0000d6c0: 7b6e 6f72 6d61 6c69 7a65 645f 636f 6e74  {normalized_cont
-0000d6d0: 7261 6374 5f61 6464 7265 7373 7d2f 7b4f  ract_address}/{O
-0000d6e0: 4646 4348 4149 4e5f 4c4f 4f4b 5550 5f54  FFCHAIN_LOOKUP_T
-0000d6f0: 4553 545f 4441 5441 7d2e 6a73 6f6e 222c  EST_DATA}.json",
-0000d700: 2020 2320 6e6f 7161 3a20 4535 3031 0a20    # noqa: E501. 
-0000d710: 2020 2020 2020 2020 2020 206d 6f63 6b65             mocke
-0000d720: 645f 6a73 6f6e 5f64 6174 613d 5745 4233  d_json_data=WEB3
-0000d730: 5059 5f41 535f 4845 5842 5954 4553 2c0a  PY_AS_HEXBYTES,.
-0000d740: 2020 2020 2020 2020 2020 2020 6a73 6f6e              json
-0000d750: 5f64 6174 615f 6669 656c 643d 226e 6f74  _data_field="not
-0000d760: 5f64 6174 6122 2c0a 2020 2020 2020 2020  _data",.        
-0000d770: 290a 2020 2020 2020 2020 7769 7468 2070  ).        with p
-0000d780: 7974 6573 742e 7261 6973 6573 2857 6562  ytest.raises(Web
-0000d790: 3356 616c 6964 6174 696f 6e45 7272 6f72  3ValidationError
-0000d7a0: 2c20 6d61 7463 683d 226d 6973 7369 6e67  , match="missing
-0000d7b0: 2027 6461 7461 2720 6669 656c 6422 293a   'data' field"):
-0000d7c0: 0a20 2020 2020 2020 2020 2020 2061 7761  .            awa
-0000d7d0: 6974 2061 7379 6e63 5f6f 6666 6368 6169  it async_offchai
-0000d7e0: 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472 6163  n_lookup_contrac
-0000d7f0: 742e 6361 6c6c 6572 2829 2e74 6573 744f  t.caller().testO
-0000d800: 6666 6368 6169 6e4c 6f6f 6b75 7028 0a20  ffchainLookup(. 
-0000d810: 2020 2020 2020 2020 2020 2020 2020 204f                 O
-0000d820: 4646 4348 4149 4e5f 4c4f 4f4b 5550 5f54  FFCHAIN_LOOKUP_T
-0000d830: 4553 545f 4441 5441 0a20 2020 2020 2020  EST_DATA.       
-0000d840: 2020 2020 2029 0a0a 2020 2020 4070 7974       )..    @pyt
-0000d850: 6573 742e 6d61 726b 2e61 7379 6e63 696f  est.mark.asyncio
-0000d860: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
-0000d870: 6b2e 7061 7261 6d65 7472 697a 6528 2273  k.parametrize("s
-0000d880: 7461 7475 735f 636f 6465 5f6e 6f6e 5f34  tatus_code_non_4
-0000d890: 7878 5f65 7272 6f72 222c 205b 3130 302c  xx_error", [100,
-0000d8a0: 2033 3030 2c20 3530 302c 2036 3030 5d29   300, 500, 600])
-0000d8b0: 0a20 2020 2061 7379 6e63 2064 6566 2074  .    async def t
-0000d8c0: 6573 745f 6574 685f 6361 6c6c 5f6f 6666  est_eth_call_off
-0000d8d0: 6368 6169 6e5f 6c6f 6f6b 7570 5f74 7269  chain_lookup_tri
-0000d8e0: 6573 5f6e 6578 745f 7572 6c5f 666f 725f  es_next_url_for_
-0000d8f0: 6e6f 6e5f 3478 785f 6572 726f 725f 7374  non_4xx_error_st
-0000d900: 6174 7573 5f61 6e64 5f74 6573 7473 5f50  atus_and_tests_P
-0000d910: 4f53 5428 2020 2320 6e6f 7161 3a20 4535  OST(  # noqa: E5
-0000d920: 3031 0a20 2020 2020 2020 2073 656c 662c  01.        self,
-0000d930: 0a20 2020 2020 2020 2061 7379 6e63 5f77  .        async_w
-0000d940: 333a 2022 4173 796e 6357 6562 3322 2c0a  3: "AsyncWeb3",.
-0000d950: 2020 2020 2020 2020 6173 796e 635f 6f66          async_of
-0000d960: 6663 6861 696e 5f6c 6f6f 6b75 705f 636f  fchain_lookup_co
-0000d970: 6e74 7261 6374 3a20 2243 6f6e 7472 6163  ntract: "Contrac
-0000d980: 7422 2c0a 2020 2020 2020 2020 756e 6c6f  t",.        unlo
-0000d990: 636b 6564 5f61 6363 6f75 6e74 3a20 4368  cked_account: Ch
-0000d9a0: 6563 6b73 756d 4164 6472 6573 732c 0a20  ecksumAddress,. 
-0000d9b0: 2020 2020 2020 206d 6f6e 6b65 7970 6174         monkeypat
-0000d9c0: 6368 3a20 224d 6f6e 6b65 7950 6174 6368  ch: "MonkeyPatch
-0000d9d0: 222c 0a20 2020 2020 2020 2073 7461 7475  ",.        statu
-0000d9e0: 735f 636f 6465 5f6e 6f6e 5f34 7878 5f65  s_code_non_4xx_e
-0000d9f0: 7272 6f72 3a20 696e 742c 0a20 2020 2029  rror: int,.    )
-0000da00: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-0000da10: 2020 6e6f 726d 616c 697a 6564 5f63 6f6e    normalized_con
-0000da20: 7472 6163 745f 6164 6472 6573 7320 3d20  tract_address = 
-0000da30: 746f 5f68 6578 5f69 665f 6279 7465 7328  to_hex_if_bytes(
-0000da40: 0a20 2020 2020 2020 2020 2020 2061 7379  .            asy
-0000da50: 6e63 5f6f 6666 6368 6169 6e5f 6c6f 6f6b  nc_offchain_look
-0000da60: 7570 5f63 6f6e 7472 6163 742e 6164 6472  up_contract.addr
-0000da70: 6573 730a 2020 2020 2020 2020 292e 6c6f  ess.        ).lo
-0000da80: 7765 7228 290a 0a20 2020 2020 2020 2023  wer()..        #
-0000da90: 2054 6865 206e 6578 7420 7572 6c20 696e   The next url in
-0000daa0: 206f 7572 2074 6573 7420 636f 6e74 7261   our test contra
-0000dab0: 6374 2064 6f65 736e 2774 2063 6f6e 7461  ct doesn't conta
-0000dac0: 696e 2027 7b64 6174 617d 272c 2074 7269  in '{data}', tri
-0000dad0: 6767 6572 696e 670a 2020 2020 2020 2020  ggering.        
-0000dae0: 2320 7468 6520 504f 5354 2072 6571 7565  # the POST reque
-0000daf0: 7374 206c 6f67 6963 2e20 5468 6520 6964  st logic. The id
-0000db00: 6561 2068 6572 6520 6973 2074 6f20 7265  ea here is to re
-0000db10: 7475 726e 2061 2062 6164 2073 7461 7475  turn a bad statu
-0000db20: 7320 666f 7220 7468 650a 2020 2020 2020  s for the.      
-0000db30: 2020 2320 6669 7273 7420 7572 6c20 2847    # first url (G
-0000db40: 4554 2920 616e 6420 6120 7375 6363 6573  ET) and a succes
-0000db50: 7320 7374 6174 7573 2066 6f72 2074 6865  s status for the
-0000db60: 2073 6563 6f6e 6420 6361 6c6c 2028 504f   second call (PO
-0000db70: 5354 2920 746f 2074 6573 740a 2020 2020  ST) to test.    
-0000db80: 2020 2020 2320 626f 7468 2074 6861 7420      # both that 
-0000db90: 7765 206d 6f76 6520 6f6e 2074 6f20 7468  we move on to th
-0000dba0: 6520 6e65 7874 2075 726c 2077 6974 6820  e next url with 
-0000dbb0: 6e6f 6e2d 3478 7820 7374 6174 7573 2061  non-4xx status a
-0000dbc0: 6e64 2074 6861 7420 7468 650a 2020 2020  nd that the.    
-0000dbd0: 2020 2020 2320 504f 5354 206c 6f67 6963      # POST logic
-0000dbe0: 2069 7320 616c 736f 2077 6f72 6b69 6e67   is also working
-0000dbf0: 2061 7320 6578 7065 6374 6564 2e0a 2020   as expected..  
-0000dc00: 2020 2020 2020 6173 796e 635f 6d6f 636b        async_mock
-0000dc10: 5f6f 6666 6368 6169 6e5f 6c6f 6f6b 7570  _offchain_lookup
-0000dc20: 5f72 6571 7565 7374 5f72 6573 706f 6e73  _request_respons
-0000dc30: 6528 0a20 2020 2020 2020 2020 2020 206d  e(.            m
-0000dc40: 6f6e 6b65 7970 6174 6368 2c0a 2020 2020  onkeypatch,.    
-0000dc50: 2020 2020 2020 2020 6d6f 636b 6564 5f72          mocked_r
-0000dc60: 6571 7565 7374 5f75 726c 3d66 2268 7474  equest_url=f"htt
-0000dc70: 7073 3a2f 2f77 6562 332e 7079 2f67 6174  ps://web3.py/gat
-0000dc80: 6577 6179 2f7b 6e6f 726d 616c 697a 6564  eway/{normalized
-0000dc90: 5f63 6f6e 7472 6163 745f 6164 6472 6573  _contract_addres
-0000dca0: 737d 2f7b 4f46 4643 4841 494e 5f4c 4f4f  s}/{OFFCHAIN_LOO
-0000dcb0: 4b55 505f 5445 5354 5f44 4154 417d 2e6a  KUP_TEST_DATA}.j
-0000dcc0: 736f 6e22 2c20 2023 206e 6f71 613a 2045  son",  # noqa: E
-0000dcd0: 3530 310a 2020 2020 2020 2020 2020 2020  501.            
-0000dce0: 6d6f 636b 6564 5f73 7461 7475 735f 636f  mocked_status_co
-0000dcf0: 6465 3d73 7461 7475 735f 636f 6465 5f6e  de=status_code_n
-0000dd00: 6f6e 5f34 7878 5f65 7272 6f72 2c0a 2020  on_4xx_error,.  
-0000dd10: 2020 2020 2020 2020 2020 6d6f 636b 6564            mocked
-0000dd20: 5f6a 736f 6e5f 6461 7461 3d57 4542 3350  _json_data=WEB3P
-0000dd30: 595f 4153 5f48 4558 4259 5445 532c 0a20  Y_AS_HEXBYTES,. 
-0000dd40: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0000dd50: 2061 7379 6e63 5f6d 6f63 6b5f 6f66 6663   async_mock_offc
-0000dd60: 6861 696e 5f6c 6f6f 6b75 705f 7265 7175  hain_lookup_requ
-0000dd70: 6573 745f 7265 7370 6f6e 7365 280a 2020  est_response(.  
-0000dd80: 2020 2020 2020 2020 2020 6d6f 6e6b 6579            monkey
-0000dd90: 7061 7463 682c 0a20 2020 2020 2020 2020  patch,.         
-0000dda0: 2020 2068 7474 705f 6d65 7468 6f64 3d22     http_method="
-0000ddb0: 504f 5354 222c 0a20 2020 2020 2020 2020  POST",.         
-0000ddc0: 2020 206d 6f63 6b65 645f 7265 7175 6573     mocked_reques
-0000ddd0: 745f 7572 6c3d 6622 6874 7470 733a 2f2f  t_url=f"https://
-0000dde0: 7765 6233 2e70 792f 6761 7465 7761 792f  web3.py/gateway/
-0000ddf0: 7b6e 6f72 6d61 6c69 7a65 645f 636f 6e74  {normalized_cont
-0000de00: 7261 6374 5f61 6464 7265 7373 7d2e 6a73  ract_address}.js
-0000de10: 6f6e 222c 2020 2320 6e6f 7161 3a20 4535  on",  # noqa: E5
-0000de20: 3031 0a20 2020 2020 2020 2020 2020 206d  01.            m
-0000de30: 6f63 6b65 645f 7374 6174 7573 5f63 6f64  ocked_status_cod
-0000de40: 653d 3230 302c 0a20 2020 2020 2020 2020  e=200,.         
-0000de50: 2020 206d 6f63 6b65 645f 6a73 6f6e 5f64     mocked_json_d
-0000de60: 6174 613d 5745 4233 5059 5f41 535f 4845  ata=WEB3PY_AS_HE
-0000de70: 5842 5954 4553 2c0a 2020 2020 2020 2020  XBYTES,.        
-0000de80: 2020 2020 7365 6e64 6572 3d6e 6f72 6d61      sender=norma
-0000de90: 6c69 7a65 645f 636f 6e74 7261 6374 5f61  lized_contract_a
-0000dea0: 6464 7265 7373 2c0a 2020 2020 2020 2020  ddress,.        
-0000deb0: 2020 2020 6361 6c6c 6461 7461 3d4f 4646      calldata=OFF
-0000dec0: 4348 4149 4e5f 4c4f 4f4b 5550 5f54 4553  CHAIN_LOOKUP_TES
-0000ded0: 545f 4441 5441 2c0a 2020 2020 2020 2020  T_DATA,.        
-0000dee0: 290a 2020 2020 2020 2020 7265 7370 6f6e  ).        respon
-0000def0: 7365 203d 2061 7761 6974 2061 7379 6e63  se = await async
-0000df00: 5f6f 6666 6368 6169 6e5f 6c6f 6f6b 7570  _offchain_lookup
-0000df10: 5f63 6f6e 7472 6163 742e 6361 6c6c 6572  _contract.caller
-0000df20: 2829 2e74 6573 744f 6666 6368 6169 6e4c  ().testOffchainL
-0000df30: 6f6f 6b75 7028 0a20 2020 2020 2020 2020  ookup(.         
-0000df40: 2020 204f 4646 4348 4149 4e5f 4c4f 4f4b     OFFCHAIN_LOOK
-0000df50: 5550 5f54 4553 545f 4441 5441 0a20 2020  UP_TEST_DATA.   
-0000df60: 2020 2020 2029 0a20 2020 2020 2020 2061       ).        a
-0000df70: 7373 6572 7420 6173 796e 635f 7733 2e63  ssert async_w3.c
-0000df80: 6f64 6563 2e64 6563 6f64 6528 5b22 7374  odec.decode(["st
-0000df90: 7269 6e67 225d 2c20 7265 7370 6f6e 7365  ring"], response
-0000dfa0: 295b 305d 203d 3d20 2277 6562 3370 7922  )[0] == "web3py"
-0000dfb0: 0a0a 2020 2020 4070 7974 6573 742e 6d61  ..    @pytest.ma
-0000dfc0: 726b 2e61 7379 6e63 696f 0a20 2020 2061  rk.asyncio.    a
-0000dfd0: 7379 6e63 2064 6566 2074 6573 745f 6574  sync def test_et
-0000dfe0: 685f 6361 6c6c 5f6f 6666 6368 6169 6e5f  h_call_offchain_
-0000dff0: 6c6f 6f6b 7570 5f63 616c 6c73 5f72 6169  lookup_calls_rai
-0000e000: 7365 5f66 6f72 5f73 7461 7475 735f 666f  se_for_status_fo
-0000e010: 725f 3478 785f 7374 6174 7573 5f63 6f64  r_4xx_status_cod
-0000e020: 6528 0a20 2020 2020 2020 2073 656c 662c  e(.        self,
-0000e030: 0a20 2020 2020 2020 2061 7379 6e63 5f77  .        async_w
-0000e040: 333a 2022 4173 796e 6357 6562 3322 2c0a  3: "AsyncWeb3",.
-0000e050: 2020 2020 2020 2020 6173 796e 635f 6f66          async_of
-0000e060: 6663 6861 696e 5f6c 6f6f 6b75 705f 636f  fchain_lookup_co
-0000e070: 6e74 7261 6374 3a20 2243 6f6e 7472 6163  ntract: "Contrac
-0000e080: 7422 2c0a 2020 2020 2020 2020 756e 6c6f  t",.        unlo
-0000e090: 636b 6564 5f61 6363 6f75 6e74 3a20 4368  cked_account: Ch
-0000e0a0: 6563 6b73 756d 4164 6472 6573 732c 0a20  ecksumAddress,. 
-0000e0b0: 2020 2020 2020 206d 6f6e 6b65 7970 6174         monkeypat
-0000e0c0: 6368 3a20 224d 6f6e 6b65 7950 6174 6368  ch: "MonkeyPatch
-0000e0d0: 222c 0a20 2020 2029 202d 3e20 4e6f 6e65  ",.    ) -> None
-0000e0e0: 3a0a 2020 2020 2020 2020 6e6f 726d 616c  :.        normal
-0000e0f0: 697a 6564 5f63 6f6e 7472 6163 745f 6164  ized_contract_ad
-0000e100: 6472 6573 7320 3d20 746f 5f68 6578 5f69  dress = to_hex_i
-0000e110: 665f 6279 7465 7328 0a20 2020 2020 2020  f_bytes(.       
-0000e120: 2020 2020 2061 7379 6e63 5f6f 6666 6368       async_offch
-0000e130: 6169 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472  ain_lookup_contr
-0000e140: 6163 742e 6164 6472 6573 730a 2020 2020  act.address.    
-0000e150: 2020 2020 292e 6c6f 7765 7228 290a 0a20      ).lower().. 
-0000e160: 2020 2020 2020 2061 7379 6e63 5f6d 6f63         async_moc
-0000e170: 6b5f 6f66 6663 6861 696e 5f6c 6f6f 6b75  k_offchain_looku
-0000e180: 705f 7265 7175 6573 745f 7265 7370 6f6e  p_request_respon
-0000e190: 7365 280a 2020 2020 2020 2020 2020 2020  se(.            
-0000e1a0: 6d6f 6e6b 6579 7061 7463 682c 0a20 2020  monkeypatch,.   
-0000e1b0: 2020 2020 2020 2020 206d 6f63 6b65 645f           mocked_
-0000e1c0: 7265 7175 6573 745f 7572 6c3d 6622 6874  request_url=f"ht
-0000e1d0: 7470 733a 2f2f 7765 6233 2e70 792f 6761  tps://web3.py/ga
-0000e1e0: 7465 7761 792f 7b6e 6f72 6d61 6c69 7a65  teway/{normalize
-0000e1f0: 645f 636f 6e74 7261 6374 5f61 6464 7265  d_contract_addre
-0000e200: 7373 7d2f 7b4f 4646 4348 4149 4e5f 4c4f  ss}/{OFFCHAIN_LO
-0000e210: 4f4b 5550 5f54 4553 545f 4441 5441 7d2e  OKUP_TEST_DATA}.
-0000e220: 6a73 6f6e 222c 2020 2320 6e6f 7161 3a20  json",  # noqa: 
-0000e230: 4535 3031 0a20 2020 2020 2020 2020 2020  E501.           
-0000e240: 206d 6f63 6b65 645f 7374 6174 7573 5f63   mocked_status_c
-0000e250: 6f64 653d 7261 6e64 696e 7428 3430 302c  ode=randint(400,
-0000e260: 2034 3939 292c 0a20 2020 2020 2020 2020   499),.         
-0000e270: 2020 206d 6f63 6b65 645f 6a73 6f6e 5f64     mocked_json_d
-0000e280: 6174 613d 5745 4233 5059 5f41 535f 4845  ata=WEB3PY_AS_HE
-0000e290: 5842 5954 4553 2c0a 2020 2020 2020 2020  XBYTES,.        
-0000e2a0: 290a 2020 2020 2020 2020 7769 7468 2070  ).        with p
-0000e2b0: 7974 6573 742e 7261 6973 6573 2845 7863  ytest.raises(Exc
-0000e2c0: 6570 7469 6f6e 2c20 6d61 7463 683d 2263  eption, match="c
-0000e2d0: 616c 6c65 6420 7261 6973 655f 666f 725f  alled raise_for_
-0000e2e0: 7374 6174 7573 5c5c 285c 5c29 2229 3a0a  status\\(\\)"):.
-0000e2f0: 2020 2020 2020 2020 2020 2020 6177 6169              awai
-0000e300: 7420 6173 796e 635f 6f66 6663 6861 696e  t async_offchain
-0000e310: 5f6c 6f6f 6b75 705f 636f 6e74 7261 6374  _lookup_contract
-0000e320: 2e63 616c 6c65 7228 292e 7465 7374 4f66  .caller().testOf
-0000e330: 6663 6861 696e 4c6f 6f6b 7570 280a 2020  fchainLookup(.  
-0000e340: 2020 2020 2020 2020 2020 2020 2020 4f46                OF
-0000e350: 4643 4841 494e 5f4c 4f4f 4b55 505f 5445  FCHAIN_LOOKUP_TE
-0000e360: 5354 5f44 4154 410a 2020 2020 2020 2020  ST_DATA.        
-0000e370: 2020 2020 290a 0a20 2020 2040 7079 7465      )..    @pyte
-0000e380: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
-0000e390: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
-0000e3a0: 7374 5f65 7468 5f63 616c 6c5f 6f66 6663  st_eth_call_offc
-0000e3b0: 6861 696e 5f6c 6f6f 6b75 705f 7261 6973  hain_lookup_rais
-0000e3c0: 6573 5f77 6865 6e5f 616c 6c5f 7375 7070  es_when_all_supp
-0000e3d0: 6c69 6564 5f75 726c 735f 6661 696c 280a  lied_urls_fail(.
-0000e3e0: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-0000e3f0: 2020 2020 2020 6173 796e 635f 7733 3a20        async_w3: 
-0000e400: 2241 7379 6e63 5765 6233 222c 0a20 2020  "AsyncWeb3",.   
-0000e410: 2020 2020 2061 7379 6e63 5f6f 6666 6368       async_offch
-0000e420: 6169 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472  ain_lookup_contr
-0000e430: 6163 743a 2022 436f 6e74 7261 6374 222c  act: "Contract",
-0000e440: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-0000e450: 2020 2020 2020 2020 2320 4745 5420 616e          # GET an
-0000e460: 6420 504f 5354 2072 6571 7565 7374 7320  d POST requests 
-0000e470: 7368 6f75 6c64 2066 6169 6c20 7369 6e63  should fail sinc
-0000e480: 6520 7265 7370 6f6e 7365 7320 6172 6520  e responses are 
-0000e490: 6e6f 7420 6d6f 636b 6564 0a20 2020 2020  not mocked.     
-0000e4a0: 2020 2077 6974 6820 7079 7465 7374 2e72     with pytest.r
-0000e4b0: 6169 7365 7328 0a20 2020 2020 2020 2020  aises(.         
-0000e4c0: 2020 204d 756c 7469 706c 6546 6169 6c65     MultipleFaile
-0000e4d0: 6452 6571 7565 7374 732c 206d 6174 6368  dRequests, match
-0000e4e0: 3d22 4f66 6663 6861 696e 206c 6f6f 6b75  ="Offchain looku
-0000e4f0: 7020 6661 696c 6564 2066 6f72 2073 7570  p failed for sup
-0000e500: 706c 6965 6420 7572 6c73 220a 2020 2020  plied urls".    
-0000e510: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
-0000e520: 2020 2061 7761 6974 2061 7379 6e63 5f6f     await async_o
-0000e530: 6666 6368 6169 6e5f 6c6f 6f6b 7570 5f63  ffchain_lookup_c
-0000e540: 6f6e 7472 6163 742e 6361 6c6c 6572 2829  ontract.caller()
-0000e550: 2e74 6573 744f 6666 6368 6169 6e4c 6f6f  .testOffchainLoo
-0000e560: 6b75 7028 0a20 2020 2020 2020 2020 2020  kup(.           
-0000e570: 2020 2020 204f 4646 4348 4149 4e5f 4c4f       OFFCHAIN_LO
-0000e580: 4f4b 5550 5f54 4553 545f 4441 5441 0a20  OKUP_TEST_DATA. 
-0000e590: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-0000e5a0: 2020 4070 7974 6573 742e 6d61 726b 2e61    @pytest.mark.a
-0000e5b0: 7379 6e63 696f 0a20 2020 2061 7379 6e63  syncio.    async
-0000e5c0: 2064 6566 2074 6573 745f 6574 685f 6361   def test_eth_ca
-0000e5d0: 6c6c 5f63 6f6e 7469 6e75 6f75 735f 6f66  ll_continuous_of
-0000e5e0: 6663 6861 696e 5f6c 6f6f 6b75 705f 7261  fchain_lookup_ra
-0000e5f0: 6973 6573 5f77 6974 685f 746f 6f5f 6d61  ises_with_too_ma
-0000e600: 6e79 5f72 6571 7565 7374 7328 0a20 2020  ny_requests(.   
-0000e610: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-0000e620: 2020 2061 7379 6e63 5f77 333a 2022 4173     async_w3: "As
-0000e630: 796e 6357 6562 3322 2c0a 2020 2020 2020  yncWeb3",.      
-0000e640: 2020 6173 796e 635f 6f66 6663 6861 696e    async_offchain
-0000e650: 5f6c 6f6f 6b75 705f 636f 6e74 7261 6374  _lookup_contract
-0000e660: 3a20 2243 6f6e 7472 6163 7422 2c0a 2020  : "Contract",.  
-0000e670: 2020 2020 2020 756e 6c6f 636b 6564 5f61        unlocked_a
-0000e680: 6363 6f75 6e74 3a20 4368 6563 6b73 756d  ccount: Checksum
-0000e690: 4164 6472 6573 732c 0a20 2020 2020 2020  Address,.       
-0000e6a0: 206d 6f6e 6b65 7970 6174 6368 3a20 224d   monkeypatch: "M
-0000e6b0: 6f6e 6b65 7950 6174 6368 222c 0a20 2020  onkeyPatch",.   
-0000e6c0: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-0000e6d0: 2020 2020 6e6f 726d 616c 697a 6564 5f63      normalized_c
-0000e6e0: 6f6e 7472 6163 745f 6164 6472 6573 7320  ontract_address 
-0000e6f0: 3d20 746f 5f68 6578 5f69 665f 6279 7465  = to_hex_if_byte
-0000e700: 7328 0a20 2020 2020 2020 2020 2020 2061  s(.            a
-0000e710: 7379 6e63 5f6f 6666 6368 6169 6e5f 6c6f  sync_offchain_lo
-0000e720: 6f6b 7570 5f63 6f6e 7472 6163 742e 6164  okup_contract.ad
-0000e730: 6472 6573 730a 2020 2020 2020 2020 292e  dress.        ).
-0000e740: 6c6f 7765 7228 290a 0a20 2020 2020 2020  lower()..       
-0000e750: 2061 7379 6e63 5f6d 6f63 6b5f 6f66 6663   async_mock_offc
-0000e760: 6861 696e 5f6c 6f6f 6b75 705f 7265 7175  hain_lookup_requ
-0000e770: 6573 745f 7265 7370 6f6e 7365 280a 2020  est_response(.  
-0000e780: 2020 2020 2020 2020 2020 6d6f 6e6b 6579            monkey
-0000e790: 7061 7463 682c 0a20 2020 2020 2020 2020  patch,.         
-0000e7a0: 2020 206d 6f63 6b65 645f 7265 7175 6573     mocked_reques
-0000e7b0: 745f 7572 6c3d 6622 6874 7470 733a 2f2f  t_url=f"https://
-0000e7c0: 7765 6233 2e70 792f 6761 7465 7761 792f  web3.py/gateway/
-0000e7d0: 7b6e 6f72 6d61 6c69 7a65 645f 636f 6e74  {normalized_cont
-0000e7e0: 7261 6374 5f61 6464 7265 7373 7d2f 3078  ract_address}/0x
-0000e7f0: 2e6a 736f 6e22 2c20 2023 206e 6f71 613a  .json",  # noqa:
-0000e800: 2045 3530 310a 2020 2020 2020 2020 290a   E501.        ).
-0000e810: 2020 2020 2020 2020 7769 7468 2070 7974          with pyt
-0000e820: 6573 742e 7261 6973 6573 2854 6f6f 4d61  est.raises(TooMa
-0000e830: 6e79 5265 7175 6573 7473 2c20 6d61 7463  nyRequests, matc
-0000e840: 683d 2254 6f6f 206d 616e 7920 4343 4950  h="Too many CCIP
-0000e850: 2072 6561 6420 7265 6469 7265 6374 7322   read redirects"
-0000e860: 293a 0a20 2020 2020 2020 2020 2020 2061  ):.            a
-0000e870: 7761 6974 2061 7379 6e63 5f6f 6666 6368  wait async_offch
-0000e880: 6169 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472  ain_lookup_contr
-0000e890: 6163 742e 6361 6c6c 6572 2829 2e63 6f6e  act.caller().con
-0000e8a0: 7469 6e75 6f75 734f 6666 6368 6169 6e4c  tinuousOffchainL
-0000e8b0: 6f6f 6b75 7028 2920 2023 206e 6f71 613a  ookup()  # noqa:
-0000e8c0: 2045 3530 3120 7479 7065 3a20 6967 6e6f   E501 type: igno
-0000e8d0: 7265 0a0a 2020 2020 4070 7974 6573 742e  re..    @pytest.
-0000e8e0: 6d61 726b 2e61 7379 6e63 696f 0a20 2020  mark.asyncio.   
-0000e8f0: 2061 7379 6e63 2064 6566 2074 6573 745f   async def test_
-0000e900: 6173 796e 635f 6574 685f 6861 7368 7261  async_eth_hashra
-0000e910: 7465 2873 656c 662c 2061 7379 6e63 5f77  te(self, async_w
-0000e920: 333a 2022 4173 796e 6357 6562 3322 2920  3: "AsyncWeb3") 
-0000e930: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-0000e940: 2068 6173 6872 6174 6520 3d20 6177 6169   hashrate = awai
-0000e950: 7420 6173 796e 635f 7733 2e65 7468 2e68  t async_w3.eth.h
-0000e960: 6173 6872 6174 650a 2020 2020 2020 2020  ashrate.        
-0000e970: 6173 7365 7274 2069 735f 696e 7465 6765  assert is_intege
-0000e980: 7228 6861 7368 7261 7465 290a 2020 2020  r(hashrate).    
-0000e990: 2020 2020 6173 7365 7274 2068 6173 6872      assert hashr
-0000e9a0: 6174 6520 3e3d 2030 0a0a 2020 2020 4070  ate >= 0..    @p
-0000e9b0: 7974 6573 742e 6d61 726b 2e61 7379 6e63  ytest.mark.async
-0000e9c0: 696f 0a20 2020 2061 7379 6e63 2064 6566  io.    async def
-0000e9d0: 2074 6573 745f 6173 796e 635f 6574 685f   test_async_eth_
-0000e9e0: 6368 6169 6e5f 6964 2873 656c 662c 2061  chain_id(self, a
-0000e9f0: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
-0000ea00: 6562 3322 2920 2d3e 204e 6f6e 653a 0a20  eb3") -> None:. 
-0000ea10: 2020 2020 2020 2063 6861 696e 5f69 6420         chain_id 
-0000ea20: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
-0000ea30: 2e65 7468 2e63 6861 696e 5f69 640a 2020  .eth.chain_id.  
-0000ea40: 2020 2020 2020 2320 6368 6169 6e20 6964        # chain id
-0000ea50: 2076 616c 7565 2066 726f 6d20 6765 7468   value from geth
-0000ea60: 2066 6978 7475 7265 2067 656e 6573 6973   fixture genesis
-0000ea70: 2066 696c 650a 2020 2020 2020 2020 6173   file.        as
-0000ea80: 7365 7274 2063 6861 696e 5f69 6420 3d3d  sert chain_id ==
-0000ea90: 2031 3331 3237 3733 3232 3934 3035 3337   131277322940537
-0000eaa0: 0a0a 2020 2020 4070 7974 6573 742e 6d61  ..    @pytest.ma
-0000eab0: 726b 2e61 7379 6e63 696f 0a20 2020 2061  rk.asyncio.    a
-0000eac0: 7379 6e63 2064 6566 2074 6573 745f 6173  sync def test_as
-0000ead0: 796e 635f 6574 685f 6d69 6e69 6e67 2873  ync_eth_mining(s
-0000eae0: 656c 662c 2061 7379 6e63 5f77 333a 2022  elf, async_w3: "
-0000eaf0: 4173 796e 6357 6562 3322 2920 2d3e 204e  AsyncWeb3") -> N
-0000eb00: 6f6e 653a 0a20 2020 2020 2020 206d 696e  one:.        min
-0000eb10: 696e 6720 3d20 6177 6169 7420 6173 796e  ing = await asyn
-0000eb20: 635f 7733 2e65 7468 2e6d 696e 696e 670a  c_w3.eth.mining.
-0000eb30: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-0000eb40: 735f 626f 6f6c 6561 6e28 6d69 6e69 6e67  s_boolean(mining
-0000eb50: 290a 0a20 2020 2040 7079 7465 7374 2e6d  )..    @pytest.m
-0000eb60: 6172 6b2e 6173 796e 6369 6f0a 2020 2020  ark.asyncio.    
-0000eb70: 6173 796e 6320 6465 6620 7465 7374 5f61  async def test_a
-0000eb80: 7379 6e63 5f65 7468 5f67 6574 5f74 7261  sync_eth_get_tra
-0000eb90: 6e73 6163 7469 6f6e 5f72 6563 6569 7074  nsaction_receipt
-0000eba0: 5f6d 696e 6564 280a 2020 2020 2020 2020  _mined(.        
-0000ebb0: 7365 6c66 2c20 6173 796e 635f 7733 3a20  self, async_w3: 
-0000ebc0: 2241 7379 6e63 5765 6233 222c 2062 6c6f  "AsyncWeb3", blo
-0000ebd0: 636b 5f77 6974 685f 7478 6e3a 2042 6c6f  ck_with_txn: Blo
-0000ebe0: 636b 4461 7461 2c20 6d69 6e65 645f 7478  ckData, mined_tx
-0000ebf0: 6e5f 6861 7368 3a20 4865 7853 7472 0a20  n_hash: HexStr. 
-0000ec00: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-0000ec10: 2020 2020 2020 7265 6365 6970 7420 3d20        receipt = 
-0000ec20: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
-0000ec30: 7468 2e67 6574 5f74 7261 6e73 6163 7469  th.get_transacti
-0000ec40: 6f6e 5f72 6563 6569 7074 286d 696e 6564  on_receipt(mined
-0000ec50: 5f74 786e 5f68 6173 6829 0a20 2020 2020  _txn_hash).     
-0000ec60: 2020 2061 7373 6572 7420 6973 5f64 6963     assert is_dic
-0000ec70: 7428 7265 6365 6970 7429 0a20 2020 2020  t(receipt).     
-0000ec80: 2020 2061 7373 6572 7420 7265 6365 6970     assert receip
-0000ec90: 745b 2262 6c6f 636b 4e75 6d62 6572 225d  t["blockNumber"]
-0000eca0: 203d 3d20 626c 6f63 6b5f 7769 7468 5f74   == block_with_t
-0000ecb0: 786e 5b22 6e75 6d62 6572 225d 0a20 2020  xn["number"].   
-0000ecc0: 2020 2020 2061 7373 6572 7420 7265 6365       assert rece
-0000ecd0: 6970 745b 2262 6c6f 636b 4861 7368 225d  ipt["blockHash"]
-0000ece0: 203d 3d20 626c 6f63 6b5f 7769 7468 5f74   == block_with_t
-0000ecf0: 786e 5b22 6861 7368 225d 0a20 2020 2020  xn["hash"].     
-0000ed00: 2020 2061 7373 6572 7420 7265 6365 6970     assert receip
-0000ed10: 745b 2274 7261 6e73 6163 7469 6f6e 496e  t["transactionIn
-0000ed20: 6465 7822 5d20 3d3d 2030 0a20 2020 2020  dex"] == 0.     
-0000ed30: 2020 2061 7373 6572 7420 7265 6365 6970     assert receip
-0000ed40: 745b 2274 7261 6e73 6163 7469 6f6e 4861  t["transactionHa
-0000ed50: 7368 225d 203d 3d20 4865 7842 7974 6573  sh"] == HexBytes
-0000ed60: 286d 696e 6564 5f74 786e 5f68 6173 6829  (mined_txn_hash)
-0000ed70: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-0000ed80: 6973 5f63 6865 636b 7375 6d5f 6164 6472  is_checksum_addr
-0000ed90: 6573 7328 7265 6365 6970 745b 2274 6f22  ess(receipt["to"
-0000eda0: 5d29 0a20 2020 2020 2020 2061 7373 6572  ]).        asser
-0000edb0: 7420 7265 6365 6970 745b 2266 726f 6d22  t receipt["from"
-0000edc0: 5d20 6973 206e 6f74 204e 6f6e 650a 2020  ] is not None.  
-0000edd0: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
-0000ede0: 6368 6563 6b73 756d 5f61 6464 7265 7373  checksum_address
-0000edf0: 2872 6563 6569 7074 5b22 6672 6f6d 225d  (receipt["from"]
-0000ee00: 290a 0a20 2020 2020 2020 2065 6666 6563  )..        effec
-0000ee10: 7469 7665 5f67 6173 5f70 7269 6365 203d  tive_gas_price =
-0000ee20: 2072 6563 6569 7074 5b22 6566 6665 6374   receipt["effect
-0000ee30: 6976 6547 6173 5072 6963 6522 5d0a 2020  iveGasPrice"].  
-0000ee40: 2020 2020 2020 6173 7365 7274 2069 7369        assert isi
-0000ee50: 6e73 7461 6e63 6528 6566 6665 6374 6976  nstance(effectiv
-0000ee60: 655f 6761 735f 7072 6963 652c 2069 6e74  e_gas_price, int
-0000ee70: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-0000ee80: 2065 6666 6563 7469 7665 5f67 6173 5f70   effective_gas_p
-0000ee90: 7269 6365 203e 2030 0a0a 2020 2020 4070  rice > 0..    @p
-0000eea0: 7974 6573 742e 6d61 726b 2e61 7379 6e63  ytest.mark.async
-0000eeb0: 696f 0a20 2020 2061 7379 6e63 2064 6566  io.    async def
-0000eec0: 2074 6573 745f 6173 796e 635f 6574 685f   test_async_eth_
-0000eed0: 6765 745f 7472 616e 7361 6374 696f 6e5f  get_transaction_
-0000eee0: 7265 6365 6970 745f 756e 6d69 6e65 6428  receipt_unmined(
-0000eef0: 0a20 2020 2020 2020 2073 656c 662c 2061  .        self, a
-0000ef00: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
-0000ef10: 6562 3322 2c20 756e 6c6f 636b 6564 5f61  eb3", unlocked_a
-0000ef20: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
-0000ef30: 3a20 4368 6563 6b73 756d 4164 6472 6573  : ChecksumAddres
-0000ef40: 730a 2020 2020 2920 2d3e 204e 6f6e 653a  s.    ) -> None:
-0000ef50: 0a20 2020 2020 2020 2074 786e 5f68 6173  .        txn_has
-0000ef60: 6820 3d20 6177 6169 7420 6173 796e 635f  h = await async_
-0000ef70: 7733 2e65 7468 2e73 656e 645f 7472 616e  w3.eth.send_tran
-0000ef80: 7361 6374 696f 6e28 0a20 2020 2020 2020  saction(.       
-0000ef90: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-0000efa0: 2020 2020 2020 2022 6672 6f6d 223a 2075         "from": u
-0000efb0: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
-0000efc0: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
-0000efd0: 2020 2020 2020 2020 2020 2022 746f 223a             "to":
-0000efe0: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-0000eff0: 745f 6475 616c 5f74 7970 652c 0a20 2020  t_dual_type,.   
-0000f000: 2020 2020 2020 2020 2020 2020 2022 7661               "va
-0000f010: 6c75 6522 3a20 5765 6928 3129 2c0a 2020  lue": Wei(1),.  
-0000f020: 2020 2020 2020 2020 2020 2020 2020 2267                "g
-0000f030: 6173 223a 2032 3130 3030 2c0a 2020 2020  as": 21000,.    
-0000f040: 2020 2020 2020 2020 2020 2020 226d 6178              "max
-0000f050: 4665 6550 6572 4761 7322 3a20 6173 796e  FeePerGas": asyn
-0000f060: 635f 7733 2e74 6f5f 7765 6928 332c 2022  c_w3.to_wei(3, "
-0000f070: 6777 6569 2229 2c0a 2020 2020 2020 2020  gwei"),.        
-0000f080: 2020 2020 2020 2020 226d 6178 5072 696f          "maxPrio
-0000f090: 7269 7479 4665 6550 6572 4761 7322 3a20  rityFeePerGas": 
-0000f0a0: 6173 796e 635f 7733 2e74 6f5f 7765 6928  async_w3.to_wei(
-0000f0b0: 312c 2022 6777 6569 2229 2c0a 2020 2020  1, "gwei"),.    
-0000f0c0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0000f0d0: 2020 290a 2020 2020 2020 2020 7769 7468    ).        with
-0000f0e0: 2070 7974 6573 742e 7261 6973 6573 2854   pytest.raises(T
-0000f0f0: 7261 6e73 6163 7469 6f6e 4e6f 7446 6f75  ransactionNotFou
-0000f100: 6e64 293a 0a20 2020 2020 2020 2020 2020  nd):.           
-0000f110: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
-0000f120: 6574 682e 6765 745f 7472 616e 7361 6374  eth.get_transact
-0000f130: 696f 6e5f 7265 6365 6970 7428 7478 6e5f  ion_receipt(txn_
-0000f140: 6861 7368 290a 0a20 2020 2040 7079 7465  hash)..    @pyte
-0000f150: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
-0000f160: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
-0000f170: 7374 5f61 7379 6e63 5f65 7468 5f67 6574  st_async_eth_get
-0000f180: 5f74 7261 6e73 6163 7469 6f6e 5f72 6563  _transaction_rec
-0000f190: 6569 7074 5f77 6974 685f 6c6f 675f 656e  eipt_with_log_en
-0000f1a0: 7472 7928 0a20 2020 2020 2020 2073 656c  try(.        sel
-0000f1b0: 662c 0a20 2020 2020 2020 2061 7379 6e63  f,.        async
-0000f1c0: 5f77 333a 2022 4173 796e 6357 6562 3322  _w3: "AsyncWeb3"
-0000f1d0: 2c0a 2020 2020 2020 2020 626c 6f63 6b5f  ,.        block_
-0000f1e0: 7769 7468 5f74 786e 5f77 6974 685f 6c6f  with_txn_with_lo
-0000f1f0: 673a 2042 6c6f 636b 4461 7461 2c0a 2020  g: BlockData,.  
-0000f200: 2020 2020 2020 656d 6974 7465 725f 636f        emitter_co
-0000f210: 6e74 7261 6374 3a20 2243 6f6e 7472 6163  ntract: "Contrac
-0000f220: 7422 2c0a 2020 2020 2020 2020 7478 6e5f  t",.        txn_
-0000f230: 6861 7368 5f77 6974 685f 6c6f 673a 2048  hash_with_log: H
-0000f240: 6578 5374 722c 0a20 2020 2029 202d 3e20  exStr,.    ) -> 
-0000f250: 4e6f 6e65 3a0a 2020 2020 2020 2020 7265  None:.        re
-0000f260: 6365 6970 7420 3d20 6177 6169 7420 6173  ceipt = await as
-0000f270: 796e 635f 7733 2e65 7468 2e77 6169 745f  ync_w3.eth.wait_
-0000f280: 666f 725f 7472 616e 7361 6374 696f 6e5f  for_transaction_
-0000f290: 7265 6365 6970 7428 7478 6e5f 6861 7368  receipt(txn_hash
-0000f2a0: 5f77 6974 685f 6c6f 6729 0a20 2020 2020  _with_log).     
-0000f2b0: 2020 2061 7373 6572 7420 6973 5f64 6963     assert is_dic
-0000f2c0: 7428 7265 6365 6970 7429 0a20 2020 2020  t(receipt).     
-0000f2d0: 2020 2061 7373 6572 7420 7265 6365 6970     assert receip
-0000f2e0: 745b 2262 6c6f 636b 4e75 6d62 6572 225d  t["blockNumber"]
-0000f2f0: 203d 3d20 626c 6f63 6b5f 7769 7468 5f74   == block_with_t
-0000f300: 786e 5f77 6974 685f 6c6f 675b 226e 756d  xn_with_log["num
-0000f310: 6265 7222 5d0a 2020 2020 2020 2020 6173  ber"].        as
-0000f320: 7365 7274 2072 6563 6569 7074 5b22 626c  sert receipt["bl
-0000f330: 6f63 6b48 6173 6822 5d20 3d3d 2062 6c6f  ockHash"] == blo
-0000f340: 636b 5f77 6974 685f 7478 6e5f 7769 7468  ck_with_txn_with
-0000f350: 5f6c 6f67 5b22 6861 7368 225d 0a20 2020  _log["hash"].   
-0000f360: 2020 2020 2061 7373 6572 7420 7265 6365       assert rece
-0000f370: 6970 745b 2274 7261 6e73 6163 7469 6f6e  ipt["transaction
-0000f380: 496e 6465 7822 5d20 3d3d 2030 0a20 2020  Index"] == 0.   
-0000f390: 2020 2020 2061 7373 6572 7420 7265 6365       assert rece
-0000f3a0: 6970 745b 2274 7261 6e73 6163 7469 6f6e  ipt["transaction
-0000f3b0: 4861 7368 225d 203d 3d20 4865 7842 7974  Hash"] == HexByt
-0000f3c0: 6573 2874 786e 5f68 6173 685f 7769 7468  es(txn_hash_with
-0000f3d0: 5f6c 6f67 290a 0a20 2020 2020 2020 2061  _log)..        a
-0000f3e0: 7373 6572 7420 6c65 6e28 7265 6365 6970  ssert len(receip
-0000f3f0: 745b 226c 6f67 7322 5d29 203d 3d20 310a  t["logs"]) == 1.
-0000f400: 2020 2020 2020 2020 6c6f 675f 656e 7472          log_entr
-0000f410: 7920 3d20 7265 6365 6970 745b 226c 6f67  y = receipt["log
-0000f420: 7322 5d5b 305d 0a0a 2020 2020 2020 2020  s"][0]..        
-0000f430: 6173 7365 7274 206c 6f67 5f65 6e74 7279  assert log_entry
-0000f440: 5b22 626c 6f63 6b4e 756d 6265 7222 5d20  ["blockNumber"] 
-0000f450: 3d3d 2062 6c6f 636b 5f77 6974 685f 7478  == block_with_tx
-0000f460: 6e5f 7769 7468 5f6c 6f67 5b22 6e75 6d62  n_with_log["numb
-0000f470: 6572 225d 0a20 2020 2020 2020 2061 7373  er"].        ass
-0000f480: 6572 7420 6c6f 675f 656e 7472 795b 2262  ert log_entry["b
-0000f490: 6c6f 636b 4861 7368 225d 203d 3d20 626c  lockHash"] == bl
-0000f4a0: 6f63 6b5f 7769 7468 5f74 786e 5f77 6974  ock_with_txn_wit
-0000f4b0: 685f 6c6f 675b 2268 6173 6822 5d0a 2020  h_log["hash"].  
-0000f4c0: 2020 2020 2020 6173 7365 7274 206c 6f67        assert log
-0000f4d0: 5f65 6e74 7279 5b22 6c6f 6749 6e64 6578  _entry["logIndex
-0000f4e0: 225d 203d 3d20 300a 2020 2020 2020 2020  "] == 0.        
-0000f4f0: 6173 7365 7274 2069 735f 7361 6d65 5f61  assert is_same_a
-0000f500: 6464 7265 7373 286c 6f67 5f65 6e74 7279  ddress(log_entry
-0000f510: 5b22 6164 6472 6573 7322 5d2c 2065 6d69  ["address"], emi
-0000f520: 7474 6572 5f63 6f6e 7472 6163 742e 6164  tter_contract.ad
-0000f530: 6472 6573 7329 0a20 2020 2020 2020 2061  dress).        a
-0000f540: 7373 6572 7420 6c6f 675f 656e 7472 795b  ssert log_entry[
-0000f550: 2274 7261 6e73 6163 7469 6f6e 496e 6465  "transactionInde
-0000f560: 7822 5d20 3d3d 2030 0a20 2020 2020 2020  x"] == 0.       
-0000f570: 2061 7373 6572 7420 6c6f 675f 656e 7472   assert log_entr
-0000f580: 795b 2274 7261 6e73 6163 7469 6f6e 4861  y["transactionHa
-0000f590: 7368 225d 203d 3d20 4865 7842 7974 6573  sh"] == HexBytes
-0000f5a0: 2874 786e 5f68 6173 685f 7769 7468 5f6c  (txn_hash_with_l
-0000f5b0: 6f67 290a 0a20 2020 2040 7079 7465 7374  og)..    @pytest
-0000f5c0: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
-0000f5d0: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
-0000f5e0: 5f61 7379 6e63 5f65 7468 5f77 6169 745f  _async_eth_wait_
-0000f5f0: 666f 725f 7472 616e 7361 6374 696f 6e5f  for_transaction_
-0000f600: 7265 6365 6970 745f 6d69 6e65 6428 0a20  receipt_mined(. 
-0000f610: 2020 2020 2020 2073 656c 662c 2061 7379         self, asy
-0000f620: 6e63 5f77 333a 2022 4173 796e 6357 6562  nc_w3: "AsyncWeb
-0000f630: 3322 2c20 626c 6f63 6b5f 7769 7468 5f74  3", block_with_t
-0000f640: 786e 3a20 426c 6f63 6b44 6174 612c 206d  xn: BlockData, m
-0000f650: 696e 6564 5f74 786e 5f68 6173 683a 2048  ined_txn_hash: H
-0000f660: 6578 5374 720a 2020 2020 2920 2d3e 204e  exStr.    ) -> N
-0000f670: 6f6e 653a 0a20 2020 2020 2020 2072 6563  one:.        rec
-0000f680: 6569 7074 203d 2061 7761 6974 2061 7379  eipt = await asy
-0000f690: 6e63 5f77 332e 6574 682e 7761 6974 5f66  nc_w3.eth.wait_f
-0000f6a0: 6f72 5f74 7261 6e73 6163 7469 6f6e 5f72  or_transaction_r
-0000f6b0: 6563 6569 7074 286d 696e 6564 5f74 786e  eceipt(mined_txn
-0000f6c0: 5f68 6173 6829 0a20 2020 2020 2020 2061  _hash).        a
-0000f6d0: 7373 6572 7420 6973 5f64 6963 7428 7265  ssert is_dict(re
-0000f6e0: 6365 6970 7429 0a20 2020 2020 2020 2061  ceipt).        a
-0000f6f0: 7373 6572 7420 7265 6365 6970 745b 2262  ssert receipt["b
-0000f700: 6c6f 636b 4e75 6d62 6572 225d 203d 3d20  lockNumber"] == 
-0000f710: 626c 6f63 6b5f 7769 7468 5f74 786e 5b22  block_with_txn["
-0000f720: 6e75 6d62 6572 225d 0a20 2020 2020 2020  number"].       
-0000f730: 2061 7373 6572 7420 7265 6365 6970 745b   assert receipt[
-0000f740: 2262 6c6f 636b 4861 7368 225d 203d 3d20  "blockHash"] == 
-0000f750: 626c 6f63 6b5f 7769 7468 5f74 786e 5b22  block_with_txn["
-0000f760: 6861 7368 225d 0a20 2020 2020 2020 2061  hash"].        a
-0000f770: 7373 6572 7420 7265 6365 6970 745b 2274  ssert receipt["t
-0000f780: 7261 6e73 6163 7469 6f6e 496e 6465 7822  ransactionIndex"
-0000f790: 5d20 3d3d 2030 0a20 2020 2020 2020 2061  ] == 0.        a
-0000f7a0: 7373 6572 7420 7265 6365 6970 745b 2274  ssert receipt["t
-0000f7b0: 7261 6e73 6163 7469 6f6e 4861 7368 225d  ransactionHash"]
-0000f7c0: 203d 3d20 4865 7842 7974 6573 286d 696e   == HexBytes(min
-0000f7d0: 6564 5f74 786e 5f68 6173 6829 0a20 2020  ed_txn_hash).   
-0000f7e0: 2020 2020 2061 7373 6572 7420 6973 5f63       assert is_c
-0000f7f0: 6865 636b 7375 6d5f 6164 6472 6573 7328  hecksum_address(
-0000f800: 7265 6365 6970 745b 2274 6f22 5d29 0a20  receipt["to"]). 
-0000f810: 2020 2020 2020 2061 7373 6572 7420 7265         assert re
-0000f820: 6365 6970 745b 2266 726f 6d22 5d20 6973  ceipt["from"] is
-0000f830: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
-0000f840: 2020 6173 7365 7274 2069 735f 6368 6563    assert is_chec
-0000f850: 6b73 756d 5f61 6464 7265 7373 2872 6563  ksum_address(rec
-0000f860: 6569 7074 5b22 6672 6f6d 225d 290a 0a20  eipt["from"]).. 
-0000f870: 2020 2020 2020 2065 6666 6563 7469 7665         effective
-0000f880: 5f67 6173 5f70 7269 6365 203d 2072 6563  _gas_price = rec
-0000f890: 6569 7074 5b22 6566 6665 6374 6976 6547  eipt["effectiveG
-0000f8a0: 6173 5072 6963 6522 5d0a 2020 2020 2020  asPrice"].      
-0000f8b0: 2020 6173 7365 7274 2069 7369 6e73 7461    assert isinsta
-0000f8c0: 6e63 6528 6566 6665 6374 6976 655f 6761  nce(effective_ga
-0000f8d0: 735f 7072 6963 652c 2069 6e74 290a 2020  s_price, int).  
-0000f8e0: 2020 2020 2020 6173 7365 7274 2065 6666        assert eff
-0000f8f0: 6563 7469 7665 5f67 6173 5f70 7269 6365  ective_gas_price
-0000f900: 203e 2030 0a0a 2020 2020 4070 7974 6573   > 0..    @pytes
-0000f910: 742e 6d61 726b 2e61 7379 6e63 696f 0a20  t.mark.asyncio. 
-0000f920: 2020 2061 7379 6e63 2064 6566 2074 6573     async def tes
-0000f930: 745f 6173 796e 635f 6574 685f 7761 6974  t_async_eth_wait
-0000f940: 5f66 6f72 5f74 7261 6e73 6163 7469 6f6e  _for_transaction
-0000f950: 5f72 6563 6569 7074 5f75 6e6d 696e 6564  _receipt_unmined
-0000f960: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-0000f970: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
-0000f980: 5765 6233 222c 2075 6e6c 6f63 6b65 645f  Web3", unlocked_
-0000f990: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
-0000f9a0: 653a 2043 6865 636b 7375 6d41 6464 7265  e: ChecksumAddre
-0000f9b0: 7373 0a20 2020 2029 202d 3e20 4e6f 6e65  ss.    ) -> None
-0000f9c0: 3a0a 2020 2020 2020 2020 7478 6e5f 6861  :.        txn_ha
-0000f9d0: 7368 203d 2061 7761 6974 2061 7379 6e63  sh = await async
-0000f9e0: 5f77 332e 6574 682e 7365 6e64 5f74 7261  _w3.eth.send_tra
-0000f9f0: 6e73 6163 7469 6f6e 280a 2020 2020 2020  nsaction(.      
-0000fa00: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-0000fa10: 2020 2020 2020 2020 2266 726f 6d22 3a20          "from": 
-0000fa20: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-0000fa30: 5f64 7561 6c5f 7479 7065 2c0a 2020 2020  _dual_type,.    
-0000fa40: 2020 2020 2020 2020 2020 2020 2274 6f22              "to"
-0000fa50: 3a20 756e 6c6f 636b 6564 5f61 6363 6f75  : unlocked_accou
-0000fa60: 6e74 5f64 7561 6c5f 7479 7065 2c0a 2020  nt_dual_type,.  
-0000fa70: 2020 2020 2020 2020 2020 2020 2020 2276                "v
-0000fa80: 616c 7565 223a 2057 6569 2831 292c 0a20  alue": Wei(1),. 
-0000fa90: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000faa0: 6761 7322 3a20 3231 3030 302c 0a20 2020  gas": 21000,.   
-0000fab0: 2020 2020 2020 2020 2020 2020 2022 6d61               "ma
-0000fac0: 7846 6565 5065 7247 6173 223a 2061 7379  xFeePerGas": asy
-0000fad0: 6e63 5f77 332e 746f 5f77 6569 2833 2c20  nc_w3.to_wei(3, 
-0000fae0: 2267 7765 6922 292c 0a20 2020 2020 2020  "gwei"),.       
-0000faf0: 2020 2020 2020 2020 2022 6d61 7850 7269           "maxPri
-0000fb00: 6f72 6974 7946 6565 5065 7247 6173 223a  orityFeePerGas":
-0000fb10: 2061 7379 6e63 5f77 332e 746f 5f77 6569   async_w3.to_wei
-0000fb20: 2831 2c20 2267 7765 6922 292c 0a20 2020  (1, "gwei"),.   
-0000fb30: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-0000fb40: 2020 2029 0a0a 2020 2020 2020 2020 7469     )..        ti
-0000fb50: 6d65 6f75 7420 3d20 320a 2020 2020 2020  meout = 2.      
-0000fb60: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
-0000fb70: 6973 6573 2854 696d 6545 7868 6175 7374  ises(TimeExhaust
-0000fb80: 6564 2920 6173 2065 7863 5f69 6e66 6f3a  ed) as exc_info:
-0000fb90: 0a20 2020 2020 2020 2020 2020 2061 7761  .            awa
-0000fba0: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
-0000fbb0: 7761 6974 5f66 6f72 5f74 7261 6e73 6163  wait_for_transac
-0000fbc0: 7469 6f6e 5f72 6563 6569 7074 2874 786e  tion_receipt(txn
-0000fbd0: 5f68 6173 682c 2074 696d 656f 7574 3d74  _hash, timeout=t
-0000fbe0: 696d 656f 7574 290a 0a20 2020 2020 2020  imeout)..       
-0000fbf0: 2061 7373 6572 7420 285f 2069 6e20 7374   assert (_ in st
-0000fc00: 7228 6578 635f 696e 666f 2920 666f 7220  r(exc_info) for 
-0000fc10: 5f20 696e 205b 7265 7072 2874 786e 5f68  _ in [repr(txn_h
-0000fc20: 6173 6829 2c20 7469 6d65 6f75 745d 290a  ash), timeout]).
-0000fc30: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
-0000fc40: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
-0000fc50: 796e 6320 6465 6620 7465 7374 5f61 7379  ync def test_asy
-0000fc60: 6e63 5f65 7468 5f77 6169 745f 666f 725f  nc_eth_wait_for_
-0000fc70: 7472 616e 7361 6374 696f 6e5f 7265 6365  transaction_rece
-0000fc80: 6970 745f 7769 7468 5f6c 6f67 5f65 6e74  ipt_with_log_ent
-0000fc90: 7279 280a 2020 2020 2020 2020 7365 6c66  ry(.        self
-0000fca0: 2c0a 2020 2020 2020 2020 6173 796e 635f  ,.        async_
-0000fcb0: 7733 3a20 2241 7379 6e63 5765 6233 222c  w3: "AsyncWeb3",
-0000fcc0: 0a20 2020 2020 2020 2062 6c6f 636b 5f77  .        block_w
-0000fcd0: 6974 685f 7478 6e5f 7769 7468 5f6c 6f67  ith_txn_with_log
-0000fce0: 3a20 426c 6f63 6b44 6174 612c 0a20 2020  : BlockData,.   
-0000fcf0: 2020 2020 2065 6d69 7474 6572 5f63 6f6e       emitter_con
-0000fd00: 7472 6163 743a 2022 436f 6e74 7261 6374  tract: "Contract
-0000fd10: 222c 0a20 2020 2020 2020 2074 786e 5f68  ",.        txn_h
-0000fd20: 6173 685f 7769 7468 5f6c 6f67 3a20 4865  ash_with_log: He
-0000fd30: 7853 7472 2c0a 2020 2020 2920 2d3e 204e  xStr,.    ) -> N
-0000fd40: 6f6e 653a 0a20 2020 2020 2020 2072 6563  one:.        rec
-0000fd50: 6569 7074 203d 2061 7761 6974 2061 7379  eipt = await asy
-0000fd60: 6e63 5f77 332e 6574 682e 7761 6974 5f66  nc_w3.eth.wait_f
-0000fd70: 6f72 5f74 7261 6e73 6163 7469 6f6e 5f72  or_transaction_r
-0000fd80: 6563 6569 7074 2874 786e 5f68 6173 685f  eceipt(txn_hash_
-0000fd90: 7769 7468 5f6c 6f67 290a 2020 2020 2020  with_log).      
-0000fda0: 2020 6173 7365 7274 2069 735f 6469 6374    assert is_dict
-0000fdb0: 2872 6563 6569 7074 290a 2020 2020 2020  (receipt).      
-0000fdc0: 2020 6173 7365 7274 2072 6563 6569 7074    assert receipt
-0000fdd0: 5b22 626c 6f63 6b4e 756d 6265 7222 5d20  ["blockNumber"] 
-0000fde0: 3d3d 2062 6c6f 636b 5f77 6974 685f 7478  == block_with_tx
-0000fdf0: 6e5f 7769 7468 5f6c 6f67 5b22 6e75 6d62  n_with_log["numb
-0000fe00: 6572 225d 0a20 2020 2020 2020 2061 7373  er"].        ass
-0000fe10: 6572 7420 7265 6365 6970 745b 2262 6c6f  ert receipt["blo
-0000fe20: 636b 4861 7368 225d 203d 3d20 626c 6f63  ckHash"] == bloc
-0000fe30: 6b5f 7769 7468 5f74 786e 5f77 6974 685f  k_with_txn_with_
-0000fe40: 6c6f 675b 2268 6173 6822 5d0a 2020 2020  log["hash"].    
-0000fe50: 2020 2020 6173 7365 7274 2072 6563 6569      assert recei
-0000fe60: 7074 5b22 7472 616e 7361 6374 696f 6e49  pt["transactionI
-0000fe70: 6e64 6578 225d 203d 3d20 300a 2020 2020  ndex"] == 0.    
-0000fe80: 2020 2020 6173 7365 7274 2072 6563 6569      assert recei
-0000fe90: 7074 5b22 7472 616e 7361 6374 696f 6e48  pt["transactionH
-0000fea0: 6173 6822 5d20 3d3d 2048 6578 4279 7465  ash"] == HexByte
-0000feb0: 7328 7478 6e5f 6861 7368 5f77 6974 685f  s(txn_hash_with_
-0000fec0: 6c6f 6729 0a0a 2020 2020 2020 2020 6173  log)..        as
-0000fed0: 7365 7274 206c 656e 2872 6563 6569 7074  sert len(receipt
-0000fee0: 5b22 6c6f 6773 225d 2920 3d3d 2031 0a20  ["logs"]) == 1. 
-0000fef0: 2020 2020 2020 206c 6f67 5f65 6e74 7279         log_entry
-0000ff00: 203d 2072 6563 6569 7074 5b22 6c6f 6773   = receipt["logs
-0000ff10: 225d 5b30 5d0a 0a20 2020 2020 2020 2061  "][0]..        a
-0000ff20: 7373 6572 7420 6c6f 675f 656e 7472 795b  ssert log_entry[
-0000ff30: 2262 6c6f 636b 4e75 6d62 6572 225d 203d  "blockNumber"] =
-0000ff40: 3d20 626c 6f63 6b5f 7769 7468 5f74 786e  = block_with_txn
-0000ff50: 5f77 6974 685f 6c6f 675b 226e 756d 6265  _with_log["numbe
-0000ff60: 7222 5d0a 2020 2020 2020 2020 6173 7365  r"].        asse
-0000ff70: 7274 206c 6f67 5f65 6e74 7279 5b22 626c  rt log_entry["bl
-0000ff80: 6f63 6b48 6173 6822 5d20 3d3d 2062 6c6f  ockHash"] == blo
-0000ff90: 636b 5f77 6974 685f 7478 6e5f 7769 7468  ck_with_txn_with
-0000ffa0: 5f6c 6f67 5b22 6861 7368 225d 0a20 2020  _log["hash"].   
-0000ffb0: 2020 2020 2061 7373 6572 7420 6c6f 675f       assert log_
-0000ffc0: 656e 7472 795b 226c 6f67 496e 6465 7822  entry["logIndex"
-0000ffd0: 5d20 3d3d 2030 0a20 2020 2020 2020 2061  ] == 0.        a
-0000ffe0: 7373 6572 7420 6973 5f73 616d 655f 6164  ssert is_same_ad
-0000fff0: 6472 6573 7328 6c6f 675f 656e 7472 795b  dress(log_entry[
-00010000: 2261 6464 7265 7373 225d 2c20 656d 6974  "address"], emit
-00010010: 7465 725f 636f 6e74 7261 6374 2e61 6464  ter_contract.add
-00010020: 7265 7373 290a 2020 2020 2020 2020 6173  ress).        as
-00010030: 7365 7274 206c 6f67 5f65 6e74 7279 5b22  sert log_entry["
-00010040: 7472 616e 7361 6374 696f 6e49 6e64 6578  transactionIndex
-00010050: 225d 203d 3d20 300a 2020 2020 2020 2020  "] == 0.        
-00010060: 6173 7365 7274 206c 6f67 5f65 6e74 7279  assert log_entry
-00010070: 5b22 7472 616e 7361 6374 696f 6e48 6173  ["transactionHas
-00010080: 6822 5d20 3d3d 2048 6578 4279 7465 7328  h"] == HexBytes(
-00010090: 7478 6e5f 6861 7368 5f77 6974 685f 6c6f  txn_hash_with_lo
-000100a0: 6729 0a0a 2020 2020 4070 7974 6573 742e  g)..    @pytest.
-000100b0: 6d61 726b 2e61 7379 6e63 696f 0a20 2020  mark.asyncio.   
-000100c0: 2061 7379 6e63 2064 6566 2074 6573 745f   async def test_
-000100d0: 6173 796e 635f 6574 685f 6163 636f 756e  async_eth_accoun
-000100e0: 7473 2873 656c 662c 2061 7379 6e63 5f77  ts(self, async_w
-000100f0: 333a 2022 4173 796e 6357 6562 3322 2920  3: "AsyncWeb3") 
-00010100: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-00010110: 2061 6363 6f75 6e74 7320 3d20 6177 6169   accounts = awai
-00010120: 7420 6173 796e 635f 7733 2e65 7468 2e61  t async_w3.eth.a
-00010130: 6363 6f75 6e74 730a 2020 2020 2020 2020  ccounts.        
-00010140: 6173 7365 7274 2069 735f 6c69 7374 5f6c  assert is_list_l
-00010150: 696b 6528 6163 636f 756e 7473 290a 2020  ike(accounts).  
-00010160: 2020 2020 2020 6173 7365 7274 206c 656e        assert len
-00010170: 2861 6363 6f75 6e74 7329 2021 3d20 300a  (accounts) != 0.
-00010180: 2020 2020 2020 2020 6173 7365 7274 2061          assert a
-00010190: 6c6c 2828 6973 5f63 6865 636b 7375 6d5f  ll((is_checksum_
-000101a0: 6164 6472 6573 7328 6163 636f 756e 7429  address(account)
-000101b0: 2066 6f72 2061 6363 6f75 6e74 2069 6e20   for account in 
-000101c0: 6163 636f 756e 7473 2929 0a20 2020 2020  accounts)).     
-000101d0: 2020 2061 7373 6572 7420 6177 6169 7420     assert await 
-000101e0: 6173 796e 635f 7733 2e65 7468 2e63 6f69  async_w3.eth.coi
-000101f0: 6e62 6173 6520 696e 2061 6363 6f75 6e74  nbase in account
-00010200: 730a 0a20 2020 2040 7079 7465 7374 2e6d  s..    @pytest.m
-00010210: 6172 6b2e 6173 796e 6369 6f0a 2020 2020  ark.asyncio.    
-00010220: 6173 796e 6320 6465 6620 7465 7374 5f61  async def test_a
-00010230: 7379 6e63 5f65 7468 5f67 6574 5f6c 6f67  sync_eth_get_log
-00010240: 735f 7769 7468 6f75 745f 6c6f 6773 280a  s_without_logs(.
-00010250: 2020 2020 2020 2020 7365 6c66 2c20 6173          self, as
-00010260: 796e 635f 7733 3a20 2241 7379 6e63 5765  ync_w3: "AsyncWe
-00010270: 6233 222c 2062 6c6f 636b 5f77 6974 685f  b3", block_with_
-00010280: 7478 6e5f 7769 7468 5f6c 6f67 3a20 426c  txn_with_log: Bl
-00010290: 6f63 6b44 6174 610a 2020 2020 2920 2d3e  ockData.    ) ->
-000102a0: 204e 6f6e 653a 0a20 2020 2020 2020 2023   None:.        #
-000102b0: 2054 6573 7420 7769 7468 2062 6c6f 636b   Test with block
-000102c0: 2072 616e 6765 0a0a 2020 2020 2020 2020   range..        
-000102d0: 6669 6c74 6572 5f70 6172 616d 733a 2046  filter_params: F
-000102e0: 696c 7465 7250 6172 616d 7320 3d20 7b0a  ilterParams = {.
-000102f0: 2020 2020 2020 2020 2020 2020 2266 726f              "fro
-00010300: 6d42 6c6f 636b 223a 2042 6c6f 636b 4e75  mBlock": BlockNu
-00010310: 6d62 6572 2830 292c 0a20 2020 2020 2020  mber(0),.       
-00010320: 2020 2020 2022 746f 426c 6f63 6b22 3a20       "toBlock": 
-00010330: 426c 6f63 6b4e 756d 6265 7228 626c 6f63  BlockNumber(bloc
-00010340: 6b5f 7769 7468 5f74 786e 5f77 6974 685f  k_with_txn_with_
-00010350: 6c6f 675b 226e 756d 6265 7222 5d20 2d20  log["number"] - 
-00010360: 3129 2c0a 2020 2020 2020 2020 7d0a 2020  1),.        }.  
-00010370: 2020 2020 2020 7265 7375 6c74 203d 2061        result = a
-00010380: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
-00010390: 682e 6765 745f 6c6f 6773 2866 696c 7465  h.get_logs(filte
-000103a0: 725f 7061 7261 6d73 290a 2020 2020 2020  r_params).      
-000103b0: 2020 6173 7365 7274 206c 656e 2872 6573    assert len(res
-000103c0: 756c 7429 203d 3d20 300a 0a20 2020 2020  ult) == 0..     
-000103d0: 2020 2023 2074 6865 2072 616e 6765 2069     # the range i
-000103e0: 7320 7772 6f6e 670a 2020 2020 2020 2020  s wrong.        
-000103f0: 6669 6c74 6572 5f70 6172 616d 7320 3d20  filter_params = 
-00010400: 7b0a 2020 2020 2020 2020 2020 2020 2266  {.            "f
-00010410: 726f 6d42 6c6f 636b 223a 2062 6c6f 636b  romBlock": block
-00010420: 5f77 6974 685f 7478 6e5f 7769 7468 5f6c  _with_txn_with_l
-00010430: 6f67 5b22 6e75 6d62 6572 225d 2c0a 2020  og["number"],.  
-00010440: 2020 2020 2020 2020 2020 2274 6f42 6c6f            "toBlo
-00010450: 636b 223a 2042 6c6f 636b 4e75 6d62 6572  ck": BlockNumber
-00010460: 2862 6c6f 636b 5f77 6974 685f 7478 6e5f  (block_with_txn_
-00010470: 7769 7468 5f6c 6f67 5b22 6e75 6d62 6572  with_log["number
-00010480: 225d 202d 2031 292c 0a20 2020 2020 2020  "] - 1),.       
-00010490: 207d 0a20 2020 2020 2020 2072 6573 756c   }.        resul
-000104a0: 7420 3d20 6177 6169 7420 6173 796e 635f  t = await async_
-000104b0: 7733 2e65 7468 2e67 6574 5f6c 6f67 7328  w3.eth.get_logs(
-000104c0: 6669 6c74 6572 5f70 6172 616d 7329 0a20  filter_params). 
-000104d0: 2020 2020 2020 2061 7373 6572 7420 6c65         assert le
-000104e0: 6e28 7265 7375 6c74 2920 3d3d 2030 0a0a  n(result) == 0..
-000104f0: 2020 2020 2020 2020 2320 5465 7374 2077          # Test w
-00010500: 6974 6820 6061 6464 7265 7373 600a 0a20  ith `address`.. 
-00010510: 2020 2020 2020 2023 2066 696c 7465 7220         # filter 
-00010520: 7769 7468 206f 7468 6572 2061 6464 7265  with other addre
-00010530: 7373 0a20 2020 2020 2020 2066 696c 7465  ss.        filte
-00010540: 725f 7061 7261 6d73 203d 207b 0a20 2020  r_params = {.   
-00010550: 2020 2020 2020 2020 2022 6672 6f6d 426c           "fromBl
-00010560: 6f63 6b22 3a20 426c 6f63 6b4e 756d 6265  ock": BlockNumbe
-00010570: 7228 3029 2c0a 2020 2020 2020 2020 2020  r(0),.          
-00010580: 2020 2261 6464 7265 7373 223a 2055 4e4b    "address": UNK
-00010590: 4e4f 574e 5f41 4444 5245 5353 2c0a 2020  NOWN_ADDRESS,.  
-000105a0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-000105b0: 7265 7375 6c74 203d 2061 7761 6974 2061  result = await a
-000105c0: 7379 6e63 5f77 332e 6574 682e 6765 745f  sync_w3.eth.get_
-000105d0: 6c6f 6773 2866 696c 7465 725f 7061 7261  logs(filter_para
-000105e0: 6d73 290a 2020 2020 2020 2020 6173 7365  ms).        asse
-000105f0: 7274 206c 656e 2872 6573 756c 7429 203d  rt len(result) =
-00010600: 3d20 300a 0a20 2020 2020 2020 2023 2054  = 0..        # T
-00010610: 6573 7420 7769 7468 206d 756c 7469 706c  est with multipl
-00010620: 6520 6061 6464 7265 7373 600a 0a20 2020  e `address`..   
-00010630: 2020 2020 2023 2066 696c 7465 7220 7769       # filter wi
-00010640: 7468 206f 7468 6572 2061 6464 7265 7373  th other address
-00010650: 0a20 2020 2020 2020 2066 696c 7465 725f  .        filter_
-00010660: 7061 7261 6d73 203d 207b 0a20 2020 2020  params = {.     
-00010670: 2020 2020 2020 2022 6672 6f6d 426c 6f63         "fromBloc
-00010680: 6b22 3a20 426c 6f63 6b4e 756d 6265 7228  k": BlockNumber(
-00010690: 3029 2c0a 2020 2020 2020 2020 2020 2020  0),.            
-000106a0: 2261 6464 7265 7373 223a 205b 554e 4b4e  "address": [UNKN
-000106b0: 4f57 4e5f 4144 4452 4553 532c 2055 4e4b  OWN_ADDRESS, UNK
-000106c0: 4e4f 574e 5f41 4444 5245 5353 5d2c 0a20  NOWN_ADDRESS],. 
-000106d0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-000106e0: 2072 6573 756c 7420 3d20 6177 6169 7420   result = await 
-000106f0: 6173 796e 635f 7733 2e65 7468 2e67 6574  async_w3.eth.get
-00010700: 5f6c 6f67 7328 6669 6c74 6572 5f70 6172  _logs(filter_par
-00010710: 616d 7329 0a20 2020 2020 2020 2061 7373  ams).        ass
-00010720: 6572 7420 6c65 6e28 7265 7375 6c74 2920  ert len(result) 
-00010730: 3d3d 2030 0a0a 2020 2020 4070 7974 6573  == 0..    @pytes
-00010740: 742e 6d61 726b 2e61 7379 6e63 696f 0a20  t.mark.asyncio. 
-00010750: 2020 2061 7379 6e63 2064 6566 2074 6573     async def tes
-00010760: 745f 6173 796e 635f 6574 685f 6765 745f  t_async_eth_get_
-00010770: 6c6f 6773 5f77 6974 685f 6c6f 6773 280a  logs_with_logs(.
-00010780: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-00010790: 2020 2020 2020 6173 796e 635f 7733 3a20        async_w3: 
-000107a0: 2241 7379 6e63 5765 6233 222c 0a20 2020  "AsyncWeb3",.   
-000107b0: 2020 2020 2062 6c6f 636b 5f77 6974 685f       block_with_
-000107c0: 7478 6e5f 7769 7468 5f6c 6f67 3a20 426c  txn_with_log: Bl
-000107d0: 6f63 6b44 6174 612c 0a20 2020 2020 2020  ockData,.       
-000107e0: 2065 6d69 7474 6572 5f63 6f6e 7472 6163   emitter_contrac
-000107f0: 745f 6164 6472 6573 733a 2043 6865 636b  t_address: Check
-00010800: 7375 6d41 6464 7265 7373 2c0a 2020 2020  sumAddress,.    
-00010810: 2020 2020 7478 6e5f 6861 7368 5f77 6974      txn_hash_wit
-00010820: 685f 6c6f 673a 2048 6578 5374 722c 0a20  h_log: HexStr,. 
-00010830: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-00010840: 2020 2020 2020 2320 5465 7374 2077 6974        # Test wit
-00010850: 6820 626c 6f63 6b20 7261 6e67 650a 0a20  h block range.. 
-00010860: 2020 2020 2020 2023 2074 6865 2072 616e         # the ran
-00010870: 6765 2069 6e63 6c75 6465 7320 7468 6520  ge includes the 
-00010880: 626c 6f63 6b20 7768 6572 6520 7468 6520  block where the 
-00010890: 6c6f 6720 7265 7369 6465 7320 696e 0a20  log resides in. 
-000108a0: 2020 2020 2020 2066 696c 7465 725f 7061         filter_pa
-000108b0: 7261 6d73 3a20 4669 6c74 6572 5061 7261  rams: FilterPara
-000108c0: 6d73 203d 207b 0a20 2020 2020 2020 2020  ms = {.         
-000108d0: 2020 2022 6672 6f6d 426c 6f63 6b22 3a20     "fromBlock": 
-000108e0: 626c 6f63 6b5f 7769 7468 5f74 786e 5f77  block_with_txn_w
-000108f0: 6974 685f 6c6f 675b 226e 756d 6265 7222  ith_log["number"
-00010900: 5d2c 0a20 2020 2020 2020 2020 2020 2022  ],.            "
-00010910: 746f 426c 6f63 6b22 3a20 626c 6f63 6b5f  toBlock": block_
-00010920: 7769 7468 5f74 786e 5f77 6974 685f 6c6f  with_txn_with_lo
-00010930: 675b 226e 756d 6265 7222 5d2c 0a20 2020  g["number"],.   
-00010940: 2020 2020 207d 0a20 2020 2020 2020 2072       }.        r
-00010950: 6573 756c 7420 3d20 6177 6169 7420 6173  esult = await as
-00010960: 796e 635f 7733 2e65 7468 2e67 6574 5f6c  ync_w3.eth.get_l
-00010970: 6f67 7328 6669 6c74 6572 5f70 6172 616d  ogs(filter_param
-00010980: 7329 0a20 2020 2020 2020 2061 7373 6572  s).        asser
-00010990: 745f 636f 6e74 6169 6e73 5f6c 6f67 280a  t_contains_log(.
-000109a0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-000109b0: 6c74 2c20 626c 6f63 6b5f 7769 7468 5f74  lt, block_with_t
-000109c0: 786e 5f77 6974 685f 6c6f 672c 2065 6d69  xn_with_log, emi
-000109d0: 7474 6572 5f63 6f6e 7472 6163 745f 6164  tter_contract_ad
-000109e0: 6472 6573 732c 2074 786e 5f68 6173 685f  dress, txn_hash_
-000109f0: 7769 7468 5f6c 6f67 0a20 2020 2020 2020  with_log.       
-00010a00: 2029 0a0a 2020 2020 2020 2020 2320 7370   )..        # sp
-00010a10: 6563 6966 7920 6f6e 6c79 2060 6672 6f6d  ecify only `from
-00010a20: 5f62 6c6f 636b 602e 2062 7920 6465 6661  _block`. by defa
-00010a30: 756c 7420 6074 6f5f 626c 6f63 6b60 2073  ult `to_block` s
-00010a40: 686f 756c 6420 6265 2027 6c61 7465 7374  hould be 'latest
-00010a50: 270a 2020 2020 2020 2020 6669 6c74 6572  '.        filter
-00010a60: 5f70 6172 616d 7320 3d20 7b0a 2020 2020  _params = {.    
-00010a70: 2020 2020 2020 2020 2266 726f 6d42 6c6f          "fromBlo
-00010a80: 636b 223a 2042 6c6f 636b 4e75 6d62 6572  ck": BlockNumber
-00010a90: 2830 292c 0a20 2020 2020 2020 207d 0a20  (0),.        }. 
-00010aa0: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00010ab0: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
-00010ac0: 7468 2e67 6574 5f6c 6f67 7328 6669 6c74  th.get_logs(filt
-00010ad0: 6572 5f70 6172 616d 7329 0a20 2020 2020  er_params).     
-00010ae0: 2020 2061 7373 6572 745f 636f 6e74 6169     assert_contai
-00010af0: 6e73 5f6c 6f67 280a 2020 2020 2020 2020  ns_log(.        
-00010b00: 2020 2020 7265 7375 6c74 2c20 626c 6f63      result, bloc
-00010b10: 6b5f 7769 7468 5f74 786e 5f77 6974 685f  k_with_txn_with_
-00010b20: 6c6f 672c 2065 6d69 7474 6572 5f63 6f6e  log, emitter_con
-00010b30: 7472 6163 745f 6164 6472 6573 732c 2074  tract_address, t
-00010b40: 786e 5f68 6173 685f 7769 7468 5f6c 6f67  xn_hash_with_log
-00010b50: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-00010b60: 2020 2020 2320 5465 7374 2077 6974 6820      # Test with 
-00010b70: 6061 6464 7265 7373 600a 0a20 2020 2020  `address`..     
-00010b80: 2020 2023 2066 696c 7465 7220 7769 7468     # filter with
-00010b90: 2065 6d69 7474 6572 5f63 6f6e 7472 6163   emitter_contrac
-00010ba0: 742e 6164 6472 6573 730a 2020 2020 2020  t.address.      
-00010bb0: 2020 6669 6c74 6572 5f70 6172 616d 7320    filter_params 
-00010bc0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00010bd0: 2266 726f 6d42 6c6f 636b 223a 2042 6c6f  "fromBlock": Blo
-00010be0: 636b 4e75 6d62 6572 2830 292c 0a20 2020  ckNumber(0),.   
-00010bf0: 2020 2020 2020 2020 2022 6164 6472 6573           "addres
-00010c00: 7322 3a20 656d 6974 7465 725f 636f 6e74  s": emitter_cont
-00010c10: 7261 6374 5f61 6464 7265 7373 2c0a 2020  ract_address,.  
-00010c20: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00010c30: 7265 7375 6c74 203d 2061 7761 6974 2061  result = await a
-00010c40: 7379 6e63 5f77 332e 6574 682e 6765 745f  sync_w3.eth.get_
-00010c50: 6c6f 6773 2866 696c 7465 725f 7061 7261  logs(filter_para
-00010c60: 6d73 290a 2020 2020 2020 2020 6173 7365  ms).        asse
-00010c70: 7274 5f63 6f6e 7461 696e 735f 6c6f 6728  rt_contains_log(
-00010c80: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00010c90: 756c 742c 2062 6c6f 636b 5f77 6974 685f  ult, block_with_
-00010ca0: 7478 6e5f 7769 7468 5f6c 6f67 2c20 656d  txn_with_log, em
-00010cb0: 6974 7465 725f 636f 6e74 7261 6374 5f61  itter_contract_a
-00010cc0: 6464 7265 7373 2c20 7478 6e5f 6861 7368  ddress, txn_hash
-00010cd0: 5f77 6974 685f 6c6f 670a 2020 2020 2020  _with_log.      
-00010ce0: 2020 290a 0a20 2020 2040 7079 7465 7374    )..    @pytest
-00010cf0: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
-00010d00: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
-00010d10: 5f61 7379 6e63 5f65 7468 5f67 6574 5f6c  _async_eth_get_l
-00010d20: 6f67 735f 7769 7468 5f6c 6f67 735f 746f  ogs_with_logs_to
-00010d30: 7069 635f 6172 6773 280a 2020 2020 2020  pic_args(.      
-00010d40: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-00010d50: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
-00010d60: 5765 6233 222c 0a20 2020 2020 2020 2062  Web3",.        b
-00010d70: 6c6f 636b 5f77 6974 685f 7478 6e5f 7769  lock_with_txn_wi
-00010d80: 7468 5f6c 6f67 3a20 426c 6f63 6b44 6174  th_log: BlockDat
-00010d90: 612c 0a20 2020 2020 2020 2065 6d69 7474  a,.        emitt
-00010da0: 6572 5f63 6f6e 7472 6163 745f 6164 6472  er_contract_addr
-00010db0: 6573 733a 2043 6865 636b 7375 6d41 6464  ess: ChecksumAdd
-00010dc0: 7265 7373 2c0a 2020 2020 2020 2020 7478  ress,.        tx
-00010dd0: 6e5f 6861 7368 5f77 6974 685f 6c6f 673a  n_hash_with_log:
-00010de0: 2048 6578 5374 722c 0a20 2020 2029 202d   HexStr,.    ) -
-00010df0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-00010e00: 2320 5465 7374 2077 6974 6820 4e6f 6e65  # Test with None
-00010e10: 2065 7665 6e74 2073 6967 0a0a 2020 2020   event sig..    
-00010e20: 2020 2020 6669 6c74 6572 5f70 6172 616d      filter_param
-00010e30: 733a 2046 696c 7465 7250 6172 616d 7320  s: FilterParams 
-00010e40: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00010e50: 2266 726f 6d42 6c6f 636b 223a 2042 6c6f  "fromBlock": Blo
-00010e60: 636b 4e75 6d62 6572 2830 292c 0a20 2020  ckNumber(0),.   
-00010e70: 2020 2020 2020 2020 2022 746f 7069 6373           "topics
-00010e80: 223a 205b 0a20 2020 2020 2020 2020 2020  ": [.           
-00010e90: 2020 2020 204e 6f6e 652c 0a20 2020 2020       None,.     
-00010ea0: 2020 2020 2020 2020 2020 2048 6578 5374             HexSt
-00010eb0: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
-00010ec0: 2020 2020 2020 2022 3078 3030 3030 3030         "0x000000
-00010ed0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00010ee0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00010ef0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00010f00: 3030 3030 3030 6434 3331 220a 2020 2020  000000d431".    
-00010f10: 2020 2020 2020 2020 2020 2020 292c 0a20              ),. 
-00010f20: 2020 2020 2020 2020 2020 205d 2c0a 2020             ],.  
-00010f30: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
-00010f40: 2072 6573 756c 7420 3d20 6177 6169 7420   result = await 
-00010f50: 6173 796e 635f 7733 2e65 7468 2e67 6574  async_w3.eth.get
-00010f60: 5f6c 6f67 7328 6669 6c74 6572 5f70 6172  _logs(filter_par
-00010f70: 616d 7329 0a20 2020 2020 2020 2061 7373  ams).        ass
-00010f80: 6572 745f 636f 6e74 6169 6e73 5f6c 6f67  ert_contains_log
-00010f90: 280a 2020 2020 2020 2020 2020 2020 7265  (.            re
-00010fa0: 7375 6c74 2c20 626c 6f63 6b5f 7769 7468  sult, block_with
-00010fb0: 5f74 786e 5f77 6974 685f 6c6f 672c 2065  _txn_with_log, e
-00010fc0: 6d69 7474 6572 5f63 6f6e 7472 6163 745f  mitter_contract_
-00010fd0: 6164 6472 6573 732c 2074 786e 5f68 6173  address, txn_has
-00010fe0: 685f 7769 7468 5f6c 6f67 0a20 2020 2020  h_with_log.     
-00010ff0: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
-00011000: 5465 7374 2077 6974 6820 4e6f 6e65 2069  Test with None i
-00011010: 6e64 6578 6564 2061 7267 0a20 2020 2020  ndexed arg.     
-00011020: 2020 2066 696c 7465 725f 7061 7261 6d73     filter_params
-00011030: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-00011040: 2022 6672 6f6d 426c 6f63 6b22 3a20 426c   "fromBlock": Bl
-00011050: 6f63 6b4e 756d 6265 7228 3029 2c0a 2020  ockNumber(0),.  
-00011060: 2020 2020 2020 2020 2020 2274 6f70 6963            "topic
-00011070: 7322 3a20 5b0a 2020 2020 2020 2020 2020  s": [.          
-00011080: 2020 2020 2020 4865 7853 7472 280a 2020        HexStr(.  
-00011090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000110a0: 2020 2230 7830 3537 6263 3332 3832 3666    "0x057bc32826f
-000110b0: 6265 3136 3164 6131 6331 3130 6166 6364  be161da1c110afcd
-000110c0: 6361 6537 6331 3039 6138 6236 3931 3439  cae7c109a8b69149
-000110d0: 6637 3237 6663 3337 6136 3033 6336 3065  f727fc37a603c60e
-000110e0: 6639 3463 6122 0a20 2020 2020 2020 2020  f94ca".         
-000110f0: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
-00011100: 2020 2020 2020 2020 2020 4e6f 6e65 2c0a            None,.
-00011110: 2020 2020 2020 2020 2020 2020 5d2c 0a20              ],. 
-00011120: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00011130: 2072 6573 756c 7420 3d20 6177 6169 7420   result = await 
-00011140: 6173 796e 635f 7733 2e65 7468 2e67 6574  async_w3.eth.get
-00011150: 5f6c 6f67 7328 6669 6c74 6572 5f70 6172  _logs(filter_par
-00011160: 616d 7329 0a20 2020 2020 2020 2061 7373  ams).        ass
-00011170: 6572 745f 636f 6e74 6169 6e73 5f6c 6f67  ert_contains_log
-00011180: 280a 2020 2020 2020 2020 2020 2020 7265  (.            re
-00011190: 7375 6c74 2c20 626c 6f63 6b5f 7769 7468  sult, block_with
-000111a0: 5f74 786e 5f77 6974 685f 6c6f 672c 2065  _txn_with_log, e
-000111b0: 6d69 7474 6572 5f63 6f6e 7472 6163 745f  mitter_contract_
-000111c0: 6164 6472 6573 732c 2074 786e 5f68 6173  address, txn_has
-000111d0: 685f 7769 7468 5f6c 6f67 0a20 2020 2020  h_with_log.     
-000111e0: 2020 2029 0a0a 2020 2020 4070 7974 6573     )..    @pytes
-000111f0: 742e 6d61 726b 2e61 7379 6e63 696f 0a20  t.mark.asyncio. 
-00011200: 2020 2061 7379 6e63 2064 6566 2074 6573     async def tes
-00011210: 745f 6173 796e 635f 6574 685f 6765 745f  t_async_eth_get_
-00011220: 6c6f 6773 5f77 6974 685f 6c6f 6773 5f6e  logs_with_logs_n
-00011230: 6f6e 655f 746f 7069 635f 6172 6773 280a  one_topic_args(.
-00011240: 2020 2020 2020 2020 7365 6c66 2c20 6173          self, as
-00011250: 796e 635f 7733 3a20 2241 7379 6e63 5765  ync_w3: "AsyncWe
-00011260: 6233 220a 2020 2020 2920 2d3e 204e 6f6e  b3".    ) -> Non
-00011270: 653a 0a20 2020 2020 2020 2023 2054 6573  e:.        # Tes
-00011280: 7420 7769 7468 204e 6f6e 6520 6f76 6572  t with None over
-00011290: 666c 6f77 696e 670a 2020 2020 2020 2020  flowing.        
-000112a0: 6669 6c74 6572 5f70 6172 616d 733a 2046  filter_params: F
-000112b0: 696c 7465 7250 6172 616d 7320 3d20 7b0a  ilterParams = {.
-000112c0: 2020 2020 2020 2020 2020 2020 2266 726f              "fro
-000112d0: 6d42 6c6f 636b 223a 2042 6c6f 636b 4e75  mBlock": BlockNu
-000112e0: 6d62 6572 2830 292c 0a20 2020 2020 2020  mber(0),.       
-000112f0: 2020 2020 2022 746f 7069 6373 223a 205b       "topics": [
-00011300: 4e6f 6e65 2c20 4e6f 6e65 2c20 4e6f 6e65  None, None, None
-00011310: 5d2c 0a20 2020 2020 2020 207d 0a0a 2020  ],.        }..  
-00011320: 2020 2020 2020 7265 7375 6c74 203d 2061        result = a
-00011330: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
-00011340: 682e 6765 745f 6c6f 6773 2866 696c 7465  h.get_logs(filte
-00011350: 725f 7061 7261 6d73 290a 2020 2020 2020  r_params).      
-00011360: 2020 6173 7365 7274 206c 656e 2872 6573    assert len(res
-00011370: 756c 7429 203d 3d20 300a 0a20 2020 2040  ult) == 0..    @
-00011380: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
-00011390: 6369 6f0a 2020 2020 6173 796e 6320 6465  cio.    async de
-000113a0: 6620 7465 7374 5f61 7379 6e63 5f65 7468  f test_async_eth
-000113b0: 5f73 796e 6369 6e67 2873 656c 662c 2061  _syncing(self, a
-000113c0: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
-000113d0: 6562 3322 2920 2d3e 204e 6f6e 653a 0a20  eb3") -> None:. 
-000113e0: 2020 2020 2020 2073 796e 6369 6e67 203d         syncing =
-000113f0: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
-00011400: 6574 682e 7379 6e63 696e 670a 0a20 2020  eth.syncing..   
-00011410: 2020 2020 2061 7373 6572 7420 6973 5f62       assert is_b
-00011420: 6f6f 6c65 616e 2873 796e 6369 6e67 2920  oolean(syncing) 
-00011430: 6f72 2069 735f 6469 6374 2873 796e 6369  or is_dict(synci
-00011440: 6e67 290a 0a20 2020 2020 2020 2069 6620  ng)..        if 
-00011450: 6973 5f62 6f6f 6c65 616e 2873 796e 6369  is_boolean(synci
-00011460: 6e67 293a 0a20 2020 2020 2020 2020 2020  ng):.           
-00011470: 2061 7373 6572 7420 7379 6e63 696e 6720   assert syncing 
-00011480: 6973 2046 616c 7365 0a20 2020 2020 2020  is False.       
-00011490: 2065 6c69 6620 6973 5f64 6963 7428 7379   elif is_dict(sy
-000114a0: 6e63 696e 6729 3a0a 2020 2020 2020 2020  ncing):.        
-000114b0: 2020 2020 7379 6e63 5f64 6963 7420 3d20      sync_dict = 
-000114c0: 6361 7374 2853 796e 6353 7461 7475 732c  cast(SyncStatus,
-000114d0: 2073 796e 6369 6e67 290a 2020 2020 2020   syncing).      
-000114e0: 2020 2020 2020 6173 7365 7274 2022 7374        assert "st
-000114f0: 6172 7469 6e67 426c 6f63 6b22 2069 6e20  artingBlock" in 
-00011500: 7379 6e63 5f64 6963 740a 2020 2020 2020  sync_dict.      
-00011510: 2020 2020 2020 6173 7365 7274 2022 6375        assert "cu
-00011520: 7272 656e 7442 6c6f 636b 2220 696e 2073  rrentBlock" in s
-00011530: 796e 635f 6469 6374 0a20 2020 2020 2020  ync_dict.       
-00011540: 2020 2020 2061 7373 6572 7420 2268 6967       assert "hig
-00011550: 6865 7374 426c 6f63 6b22 2069 6e20 7379  hestBlock" in sy
-00011560: 6e63 5f64 6963 740a 0a20 2020 2020 2020  nc_dict..       
-00011570: 2020 2020 2061 7373 6572 7420 6973 5f69       assert is_i
-00011580: 6e74 6567 6572 2873 796e 635f 6469 6374  nteger(sync_dict
-00011590: 5b22 7374 6172 7469 6e67 426c 6f63 6b22  ["startingBlock"
-000115a0: 5d29 0a20 2020 2020 2020 2020 2020 2061  ]).            a
-000115b0: 7373 6572 7420 6973 5f69 6e74 6567 6572  ssert is_integer
-000115c0: 2873 796e 635f 6469 6374 5b22 6375 7272  (sync_dict["curr
-000115d0: 656e 7442 6c6f 636b 225d 290a 2020 2020  entBlock"]).    
-000115e0: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-000115f0: 735f 696e 7465 6765 7228 7379 6e63 5f64  s_integer(sync_d
-00011600: 6963 745b 2268 6967 6865 7374 426c 6f63  ict["highestBloc
-00011610: 6b22 5d29 0a0a 2020 2020 4070 7974 6573  k"])..    @pytes
-00011620: 742e 6d61 726b 2e61 7379 6e63 696f 0a20  t.mark.asyncio. 
-00011630: 2020 2061 7379 6e63 2064 6566 2074 6573     async def tes
-00011640: 745f 6173 796e 635f 6574 685f 6765 745f  t_async_eth_get_
-00011650: 7374 6f72 6167 655f 6174 280a 2020 2020  storage_at(.    
-00011660: 2020 2020 7365 6c66 2c20 6173 796e 635f      self, async_
-00011670: 7733 3a20 2241 7379 6e63 5765 6233 222c  w3: "AsyncWeb3",
-00011680: 2073 746f 7261 6765 5f63 6f6e 7472 6163   storage_contrac
-00011690: 743a 2022 436f 6e74 7261 6374 220a 2020  t: "Contract".  
-000116a0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-000116b0: 2020 2020 2073 746f 7261 6765 5f63 6f6e       storage_con
-000116c0: 7472 6163 745f 6164 6472 6573 7320 3d20  tract_address = 
-000116d0: 7374 6f72 6167 655f 636f 6e74 7261 6374  storage_contract
-000116e0: 2e61 6464 7265 7373 0a0a 2020 2020 2020  .address..      
-000116f0: 2020 736c 6f74 5f30 203d 2061 7761 6974    slot_0 = await
-00011700: 2061 7379 6e63 5f77 332e 6574 682e 6765   async_w3.eth.ge
-00011710: 745f 7374 6f72 6167 655f 6174 2873 746f  t_storage_at(sto
-00011720: 7261 6765 5f63 6f6e 7472 6163 745f 6164  rage_contract_ad
-00011730: 6472 6573 732c 2030 290a 2020 2020 2020  dress, 0).      
-00011740: 2020 6173 7365 7274 2073 6c6f 745f 3020    assert slot_0 
-00011750: 3d3d 2048 6578 4279 7465 7328 6622 3078  == HexBytes(f"0x
-00011760: 7b27 3030 2720 2a20 3332 7d22 290a 0a20  {'00' * 32}").. 
-00011770: 2020 2020 2020 2073 6c6f 745f 3120 3d20         slot_1 = 
-00011780: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
-00011790: 7468 2e67 6574 5f73 746f 7261 6765 5f61  th.get_storage_a
-000117a0: 7428 7374 6f72 6167 655f 636f 6e74 7261  t(storage_contra
-000117b0: 6374 5f61 6464 7265 7373 2c20 3129 0a20  ct_address, 1). 
-000117c0: 2020 2020 2020 2061 7373 6572 7420 736c         assert sl
-000117d0: 6f74 5f31 203d 3d20 4865 7842 7974 6573  ot_1 == HexBytes
-000117e0: 2866 2230 787b 2730 3027 202a 2033 317d  (f"0x{'00' * 31}
-000117f0: 3031 2229 0a0a 2020 2020 2020 2020 736c  01")..        sl
-00011800: 6f74 5f32 203d 2061 7761 6974 2061 7379  ot_2 = await asy
-00011810: 6e63 5f77 332e 6574 682e 6765 745f 7374  nc_w3.eth.get_st
-00011820: 6f72 6167 655f 6174 2873 746f 7261 6765  orage_at(storage
-00011830: 5f63 6f6e 7472 6163 745f 6164 6472 6573  _contract_addres
-00011840: 732c 2032 290a 2020 2020 2020 2020 6173  s, 2).        as
-00011850: 7365 7274 2073 6c6f 745f 3220 3d3d 2048  sert slot_2 == H
-00011860: 6578 4279 7465 7328 6622 3078 7b27 3030  exBytes(f"0x{'00
-00011870: 2720 2a20 3331 7d30 3222 290a 0a20 2020  ' * 31}02")..   
-00011880: 2020 2020 2073 6c6f 745f 3320 3d20 6177       slot_3 = aw
-00011890: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
-000118a0: 2e67 6574 5f73 746f 7261 6765 5f61 7428  .get_storage_at(
-000118b0: 7374 6f72 6167 655f 636f 6e74 7261 6374  storage_contract
-000118c0: 5f61 6464 7265 7373 2c20 3329 0a20 2020  _address, 3).   
-000118d0: 2020 2020 2061 7373 6572 7420 736c 6f74       assert slot
-000118e0: 5f33 203d 3d20 4865 7842 7974 6573 280a  _3 == HexBytes(.
-000118f0: 2020 2020 2020 2020 2020 2020 2230 7837              "0x7
-00011900: 3436 3837 3236 3536 3530 3030 3030 3030  4687265650000000
-00011910: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00011920: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00011930: 3030 3030 3030 3030 3030 3030 3030 6122  00000000000000a"
-00011940: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00011950: 2020 2061 7373 6572 7420 6279 7465 7328     assert bytes(
-00011960: 736c 6f74 5f33 5b3a 355d 2920 3d3d 2062  slot_3[:5]) == b
-00011970: 2274 6872 6565 220a 0a20 2020 2020 2020  "three"..       
-00011980: 2073 6c6f 745f 3420 3d20 6177 6169 7420   slot_4 = await 
-00011990: 6173 796e 635f 7733 2e65 7468 2e67 6574  async_w3.eth.get
-000119a0: 5f73 746f 7261 6765 5f61 7428 7374 6f72  _storage_at(stor
-000119b0: 6167 655f 636f 6e74 7261 6374 5f61 6464  age_contract_add
-000119c0: 7265 7373 2c20 3429 0a20 2020 2020 2020  ress, 4).       
-000119d0: 2061 7373 6572 7420 736c 6f74 5f34 203d   assert slot_4 =
-000119e0: 3d20 4865 7842 7974 6573 280a 2020 2020  = HexBytes(.    
-000119f0: 2020 2020 2020 2020 2230 7836 3636 6637          "0x666f7
-00011a00: 3537 3230 3030 3030 3030 3030 3030 3030  5720000000000000
-00011a10: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00011a20: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00011a30: 3030 3030 3030 3030 3030 3822 0a20 2020  00000000008".   
-00011a40: 2020 2020 2029 0a20 2020 2020 2020 2061       ).        a
-00011a50: 7373 6572 7420 6279 7465 7328 736c 6f74  ssert bytes(slot
-00011a60: 5f34 5b3a 345d 2920 3d3d 2062 2266 6f75  _4[:4]) == b"fou
-00011a70: 7222 0a0a 2020 2020 4070 7974 6573 742e  r"..    @pytest.
-00011a80: 6d61 726b 2e61 7379 6e63 696f 0a20 2020  mark.asyncio.   
-00011a90: 2040 7079 7465 7374 2e6d 6172 6b2e 7866   @pytest.mark.xf
-00011aa0: 6169 6c0a 2020 2020 6173 796e 6320 6465  ail.    async de
-00011ab0: 6620 7465 7374 5f61 7379 6e63 5f65 7468  f test_async_eth
-00011ac0: 5f67 6574 5f73 746f 7261 6765 5f61 745f  _get_storage_at_
-00011ad0: 656e 735f 6e61 6d65 280a 2020 2020 2020  ens_name(.      
-00011ae0: 2020 7365 6c66 2c20 6173 796e 635f 7733    self, async_w3
-00011af0: 3a20 2241 7379 6e63 5765 6233 222c 2073  : "AsyncWeb3", s
-00011b00: 746f 7261 6765 5f63 6f6e 7472 6163 743a  torage_contract:
-00011b10: 2022 436f 6e74 7261 6374 220a 2020 2020   "Contract".    
-00011b20: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-00011b30: 2020 2077 6974 6820 656e 735f 6164 6472     with ens_addr
-00011b40: 6573 7365 7328 6173 796e 635f 7733 2c20  esses(async_w3, 
-00011b50: 7b22 7374 6f72 6167 652e 6574 6822 3a20  {"storage.eth": 
-00011b60: 7374 6f72 6167 655f 636f 6e74 7261 6374  storage_contract
-00011b70: 2e61 6464 7265 7373 7d29 3a0a 2020 2020  .address}):.    
-00011b80: 2020 2020 2020 2020 7374 6f72 6167 6520          storage 
-00011b90: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
-00011ba0: 2e65 7468 2e67 6574 5f73 746f 7261 6765  .eth.get_storage
-00011bb0: 5f61 7428 454e 5328 2273 746f 7261 6765  _at(ENS("storage
-00011bc0: 2e65 7468 2229 2c20 3129 0a20 2020 2020  .eth"), 1).     
-00011bd0: 2020 2020 2020 2061 7373 6572 7420 7374         assert st
-00011be0: 6f72 6167 6520 3d3d 2048 6578 4279 7465  orage == HexByte
-00011bf0: 7328 6622 3078 7b27 3030 2720 2a20 3331  s(f"0x{'00' * 31
-00011c00: 7d30 3122 290a 0a20 2020 2040 7079 7465  }01")..    @pyte
-00011c10: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
-00011c20: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
-00011c30: 7374 5f61 7379 6e63 5f65 7468 5f67 6574  st_async_eth_get
-00011c40: 5f73 746f 7261 6765 5f61 745f 696e 7661  _storage_at_inva
-00011c50: 6c69 645f 6164 6472 6573 7328 0a20 2020  lid_address(.   
-00011c60: 2020 2020 2073 656c 662c 2061 7379 6e63       self, async
-00011c70: 5f77 333a 2022 4173 796e 6357 6562 3322  _w3: "AsyncWeb3"
-00011c80: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-00011c90: 2020 2020 2020 2020 636f 696e 6261 7365          coinbase
-00011ca0: 203d 2061 7761 6974 2061 7379 6e63 5f77   = await async_w
-00011cb0: 332e 6574 682e 636f 696e 6261 7365 0a20  3.eth.coinbase. 
-00011cc0: 2020 2020 2020 2077 6974 6820 7079 7465         with pyte
-00011cd0: 7374 2e72 6169 7365 7328 496e 7661 6c69  st.raises(Invali
-00011ce0: 6441 6464 7265 7373 293a 0a20 2020 2020  dAddress):.     
-00011cf0: 2020 2020 2020 2061 7761 6974 2061 7379         await asy
-00011d00: 6e63 5f77 332e 6574 682e 6765 745f 7374  nc_w3.eth.get_st
-00011d10: 6f72 6167 655f 6174 280a 2020 2020 2020  orage_at(.      
-00011d20: 2020 2020 2020 2020 2020 4368 6563 6b73            Checks
-00011d30: 756d 4164 6472 6573 7328 4865 7841 6464  umAddress(HexAdd
-00011d40: 7265 7373 2848 6578 5374 7228 636f 696e  ress(HexStr(coin
-00011d50: 6261 7365 2e6c 6f77 6572 2829 2929 292c  base.lower()))),
-00011d60: 2030 0a20 2020 2020 2020 2020 2020 2029   0.            )
-00011d70: 0a0a 2020 2020 6465 6620 7465 7374 5f61  ..    def test_a
-00011d80: 7379 6e63 5f70 726f 7669 6465 725f 6465  sync_provider_de
-00011d90: 6661 756c 745f 6163 636f 756e 7428 0a20  fault_account(. 
-00011da0: 2020 2020 2020 2073 656c 662c 2061 7379         self, asy
-00011db0: 6e63 5f77 333a 2022 4173 796e 6357 6562  nc_w3: "AsyncWeb
-00011dc0: 3322 2c20 756e 6c6f 636b 6564 5f61 6363  3", unlocked_acc
-00011dd0: 6f75 6e74 5f64 7561 6c5f 7479 7065 3a20  ount_dual_type: 
-00011de0: 4368 6563 6b73 756d 4164 6472 6573 730a  ChecksumAddress.
-00011df0: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
-00011e00: 2020 2020 2020 2023 2063 6865 636b 2064         # check d
-00011e10: 6566 6175 6c74 7320 746f 2065 6d70 7479  efaults to empty
-00011e20: 0a20 2020 2020 2020 2064 6566 6175 6c74  .        default
-00011e30: 5f61 6363 6f75 6e74 203d 2061 7379 6e63  _account = async
-00011e40: 5f77 332e 6574 682e 6465 6661 756c 745f  _w3.eth.default_
-00011e50: 6163 636f 756e 740a 2020 2020 2020 2020  account.        
-00011e60: 6173 7365 7274 2064 6566 6175 6c74 5f61  assert default_a
-00011e70: 6363 6f75 6e74 2069 7320 656d 7074 790a  ccount is empty.
-00011e80: 0a20 2020 2020 2020 2023 2063 6865 636b  .        # check
-00011e90: 2073 6574 7465 720a 2020 2020 2020 2020   setter.        
-00011ea0: 6173 796e 635f 7733 2e65 7468 2e64 6566  async_w3.eth.def
-00011eb0: 6175 6c74 5f61 6363 6f75 6e74 203d 2075  ault_account = u
-00011ec0: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
-00011ed0: 6475 616c 5f74 7970 650a 2020 2020 2020  dual_type.      
-00011ee0: 2020 6465 6661 756c 745f 6163 636f 756e    default_accoun
-00011ef0: 7420 3d20 6173 796e 635f 7733 2e65 7468  t = async_w3.eth
-00011f00: 2e64 6566 6175 6c74 5f61 6363 6f75 6e74  .default_account
-00011f10: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00011f20: 6465 6661 756c 745f 6163 636f 756e 7420  default_account 
-00011f30: 3d3d 2075 6e6c 6f63 6b65 645f 6163 636f  == unlocked_acco
-00011f40: 756e 745f 6475 616c 5f74 7970 650a 0a20  unt_dual_type.. 
-00011f50: 2020 2020 2020 2023 2072 6573 6574 2074         # reset t
-00011f60: 6f20 6465 6661 756c 740a 2020 2020 2020  o default.      
-00011f70: 2020 6173 796e 635f 7733 2e65 7468 2e64    async_w3.eth.d
-00011f80: 6566 6175 6c74 5f61 6363 6f75 6e74 203d  efault_account =
-00011f90: 2065 6d70 7479 0a0a 2020 2020 6465 6620   empty..    def 
-00011fa0: 7465 7374 5f61 7379 6e63 5f70 726f 7669  test_async_provi
-00011fb0: 6465 725f 6465 6661 756c 745f 626c 6f63  der_default_bloc
-00011fc0: 6b28 0a20 2020 2020 2020 2073 656c 662c  k(.        self,
-00011fd0: 0a20 2020 2020 2020 2061 7379 6e63 5f77  .        async_w
-00011fe0: 333a 2022 4173 796e 6357 6562 3322 2c0a  3: "AsyncWeb3",.
-00011ff0: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
-00012000: 2020 2020 2020 2023 2063 6865 636b 2064         # check d
-00012010: 6566 6175 6c74 7320 746f 2027 6c61 7465  efaults to 'late
-00012020: 7374 270a 2020 2020 2020 2020 6465 6661  st'.        defa
-00012030: 756c 745f 626c 6f63 6b20 3d20 6173 796e  ult_block = asyn
-00012040: 635f 7733 2e65 7468 2e64 6566 6175 6c74  c_w3.eth.default
-00012050: 5f62 6c6f 636b 0a20 2020 2020 2020 2061  _block.        a
-00012060: 7373 6572 7420 6465 6661 756c 745f 626c  ssert default_bl
-00012070: 6f63 6b20 3d3d 2022 6c61 7465 7374 220a  ock == "latest".
-00012080: 0a20 2020 2020 2020 2023 2063 6865 636b  .        # check
-00012090: 2073 6574 7465 720a 2020 2020 2020 2020   setter.        
-000120a0: 6173 796e 635f 7733 2e65 7468 2e64 6566  async_w3.eth.def
-000120b0: 6175 6c74 5f62 6c6f 636b 203d 2042 6c6f  ault_block = Blo
-000120c0: 636b 4e75 6d62 6572 2831 3233 3435 290a  ckNumber(12345).
-000120d0: 2020 2020 2020 2020 6465 6661 756c 745f          default_
-000120e0: 626c 6f63 6b20 3d20 6173 796e 635f 7733  block = async_w3
-000120f0: 2e65 7468 2e64 6566 6175 6c74 5f62 6c6f  .eth.default_blo
-00012100: 636b 0a20 2020 2020 2020 2061 7373 6572  ck.        asser
-00012110: 7420 6465 6661 756c 745f 626c 6f63 6b20  t default_block 
-00012120: 3d3d 2042 6c6f 636b 4e75 6d62 6572 2831  == BlockNumber(1
-00012130: 3233 3435 290a 0a20 2020 2020 2020 2023  2345)..        #
-00012140: 2072 6573 6574 2074 6f20 6465 6661 756c   reset to defaul
-00012150: 740a 2020 2020 2020 2020 6173 796e 635f  t.        async_
-00012160: 7733 2e65 7468 2e64 6566 6175 6c74 5f62  w3.eth.default_b
-00012170: 6c6f 636b 203d 2022 6c61 7465 7374 220a  lock = "latest".
-00012180: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
-00012190: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
-000121a0: 796e 6320 6465 6620 7465 7374 5f65 7468  ync def test_eth
-000121b0: 5f67 6574 426c 6f63 6b54 7261 6e73 6163  _getBlockTransac
-000121c0: 7469 6f6e 436f 756e 7442 7948 6173 685f  tionCountByHash_
-000121d0: 656d 7074 795f 626c 6f63 6b28 0a20 2020  empty_block(.   
-000121e0: 2020 2020 2073 656c 662c 2061 7379 6e63       self, async
-000121f0: 5f77 333a 2022 4173 796e 6357 6562 3322  _w3: "AsyncWeb3"
-00012200: 2c20 656d 7074 795f 626c 6f63 6b3a 2042  , empty_block: B
-00012210: 6c6f 636b 4461 7461 0a20 2020 2029 202d  lockData.    ) -
-00012220: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-00012230: 7472 616e 7361 6374 696f 6e5f 636f 756e  transaction_coun
-00012240: 7420 3d20 6177 6169 7420 6173 796e 635f  t = await async_
-00012250: 7733 2e65 7468 2e67 6574 5f62 6c6f 636b  w3.eth.get_block
-00012260: 5f74 7261 6e73 6163 7469 6f6e 5f63 6f75  _transaction_cou
-00012270: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
-00012280: 656d 7074 795f 626c 6f63 6b5b 2268 6173  empty_block["has
-00012290: 6822 5d0a 2020 2020 2020 2020 290a 0a20  h"].        ).. 
-000122a0: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
-000122b0: 5f69 6e74 6567 6572 2874 7261 6e73 6163  _integer(transac
-000122c0: 7469 6f6e 5f63 6f75 6e74 290a 2020 2020  tion_count).    
-000122d0: 2020 2020 6173 7365 7274 2074 7261 6e73      assert trans
-000122e0: 6163 7469 6f6e 5f63 6f75 6e74 203d 3d20  action_count == 
-000122f0: 300a 0a20 2020 2040 7079 7465 7374 2e6d  0..    @pytest.m
-00012300: 6172 6b2e 6173 796e 6369 6f0a 2020 2020  ark.asyncio.    
-00012310: 6173 796e 6320 6465 6620 7465 7374 5f65  async def test_e
-00012320: 7468 5f67 6574 426c 6f63 6b54 7261 6e73  th_getBlockTrans
-00012330: 6163 7469 6f6e 436f 756e 7442 794e 756d  actionCountByNum
-00012340: 6265 725f 656d 7074 795f 626c 6f63 6b28  ber_empty_block(
-00012350: 0a20 2020 2020 2020 2073 656c 662c 2061  .        self, a
-00012360: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
-00012370: 6562 3322 2c20 656d 7074 795f 626c 6f63  eb3", empty_bloc
-00012380: 6b3a 2042 6c6f 636b 4461 7461 0a20 2020  k: BlockData.   
-00012390: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-000123a0: 2020 2020 7472 616e 7361 6374 696f 6e5f      transaction_
-000123b0: 636f 756e 7420 3d20 6177 6169 7420 6173  count = await as
-000123c0: 796e 635f 7733 2e65 7468 2e67 6574 5f62  ync_w3.eth.get_b
-000123d0: 6c6f 636b 5f74 7261 6e73 6163 7469 6f6e  lock_transaction
-000123e0: 5f63 6f75 6e74 280a 2020 2020 2020 2020  _count(.        
-000123f0: 2020 2020 656d 7074 795f 626c 6f63 6b5b      empty_block[
-00012400: 226e 756d 6265 7222 5d0a 2020 2020 2020  "number"].      
-00012410: 2020 290a 0a20 2020 2020 2020 2061 7373    )..        ass
-00012420: 6572 7420 6973 5f69 6e74 6567 6572 2874  ert is_integer(t
-00012430: 7261 6e73 6163 7469 6f6e 5f63 6f75 6e74  ransaction_count
-00012440: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-00012450: 2074 7261 6e73 6163 7469 6f6e 5f63 6f75   transaction_cou
-00012460: 6e74 203d 3d20 300a 0a20 2020 2040 7079  nt == 0..    @py
-00012470: 7465 7374 2e6d 6172 6b2e 6173 796e 6369  test.mark.asynci
-00012480: 6f0a 2020 2020 6173 796e 6320 6465 6620  o.    async def 
-00012490: 7465 7374 5f65 7468 5f67 6574 426c 6f63  test_eth_getBloc
-000124a0: 6b54 7261 6e73 6163 7469 6f6e 436f 756e  kTransactionCoun
-000124b0: 7442 7948 6173 685f 626c 6f63 6b5f 7769  tByHash_block_wi
-000124c0: 7468 5f74 786e 280a 2020 2020 2020 2020  th_txn(.        
-000124d0: 7365 6c66 2c20 6173 796e 635f 7733 3a20  self, async_w3: 
-000124e0: 2241 7379 6e63 5765 6233 222c 2062 6c6f  "AsyncWeb3", blo
-000124f0: 636b 5f77 6974 685f 7478 6e3a 2042 6c6f  ck_with_txn: Blo
-00012500: 636b 4461 7461 0a20 2020 2029 202d 3e20  ckData.    ) -> 
-00012510: 4e6f 6e65 3a0a 2020 2020 2020 2020 7472  None:.        tr
-00012520: 616e 7361 6374 696f 6e5f 636f 756e 7420  ansaction_count 
-00012530: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
-00012540: 2e65 7468 2e67 6574 5f62 6c6f 636b 5f74  .eth.get_block_t
-00012550: 7261 6e73 6163 7469 6f6e 5f63 6f75 6e74  ransaction_count
-00012560: 280a 2020 2020 2020 2020 2020 2020 626c  (.            bl
-00012570: 6f63 6b5f 7769 7468 5f74 786e 5b22 6861  ock_with_txn["ha
-00012580: 7368 225d 0a20 2020 2020 2020 2029 0a0a  sh"].        )..
-00012590: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-000125a0: 735f 696e 7465 6765 7228 7472 616e 7361  s_integer(transa
-000125b0: 6374 696f 6e5f 636f 756e 7429 0a20 2020  ction_count).   
-000125c0: 2020 2020 2061 7373 6572 7420 7472 616e       assert tran
-000125d0: 7361 6374 696f 6e5f 636f 756e 7420 3e3d  saction_count >=
-000125e0: 2031 0a0a 2020 2020 4070 7974 6573 742e   1..    @pytest.
-000125f0: 6d61 726b 2e61 7379 6e63 696f 0a20 2020  mark.asyncio.   
-00012600: 2061 7379 6e63 2064 6566 2074 6573 745f   async def test_
-00012610: 6574 685f 6765 7455 6e63 6c65 436f 756e  eth_getUncleCoun
-00012620: 7442 7942 6c6f 636b 4861 7368 280a 2020  tByBlockHash(.  
-00012630: 2020 2020 2020 7365 6c66 2c20 6173 796e        self, asyn
-00012640: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
-00012650: 222c 2065 6d70 7479 5f62 6c6f 636b 3a20  ", empty_block: 
-00012660: 426c 6f63 6b44 6174 610a 2020 2020 2920  BlockData.    ) 
-00012670: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-00012680: 2075 6e63 6c65 5f63 6f75 6e74 203d 2061   uncle_count = a
-00012690: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
-000126a0: 682e 6765 745f 756e 636c 655f 636f 756e  h.get_uncle_coun
-000126b0: 7428 656d 7074 795f 626c 6f63 6b5b 2268  t(empty_block["h
-000126c0: 6173 6822 5d29 0a0a 2020 2020 2020 2020  ash"])..        
-000126d0: 6173 7365 7274 2069 735f 696e 7465 6765  assert is_intege
-000126e0: 7228 756e 636c 655f 636f 756e 7429 0a20  r(uncle_count). 
-000126f0: 2020 2020 2020 2061 7373 6572 7420 756e         assert un
-00012700: 636c 655f 636f 756e 7420 3d3d 2030 0a0a  cle_count == 0..
-00012710: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
-00012720: 2e61 7379 6e63 696f 0a20 2020 2061 7379  .asyncio.    asy
-00012730: 6e63 2064 6566 2074 6573 745f 6574 685f  nc def test_eth_
-00012740: 6765 7455 6e63 6c65 436f 756e 7442 7942  getUncleCountByB
-00012750: 6c6f 636b 4e75 6d62 6572 280a 2020 2020  lockNumber(.    
-00012760: 2020 2020 7365 6c66 2c20 6173 796e 635f      self, async_
-00012770: 7733 3a20 2241 7379 6e63 5765 6233 222c  w3: "AsyncWeb3",
-00012780: 2065 6d70 7479 5f62 6c6f 636b 3a20 426c   empty_block: Bl
-00012790: 6f63 6b44 6174 610a 2020 2020 2920 2d3e  ockData.    ) ->
-000127a0: 204e 6f6e 653a 0a20 2020 2020 2020 2075   None:.        u
-000127b0: 6e63 6c65 5f63 6f75 6e74 203d 2061 7761  ncle_count = awa
-000127c0: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
-000127d0: 6765 745f 756e 636c 655f 636f 756e 7428  get_uncle_count(
-000127e0: 656d 7074 795f 626c 6f63 6b5b 226e 756d  empty_block["num
-000127f0: 6265 7222 5d29 0a0a 2020 2020 2020 2020  ber"])..        
-00012800: 6173 7365 7274 2069 735f 696e 7465 6765  assert is_intege
-00012810: 7228 756e 636c 655f 636f 756e 7429 0a20  r(uncle_count). 
-00012820: 2020 2020 2020 2061 7373 6572 7420 756e         assert un
-00012830: 636c 655f 636f 756e 7420 3d3d 2030 0a0a  cle_count == 0..
-00012840: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
-00012850: 2e61 7379 6e63 696f 0a20 2020 2061 7379  .asyncio.    asy
-00012860: 6e63 2064 6566 2074 6573 745f 6574 685f  nc def test_eth_
-00012870: 6765 7442 6c6f 636b 5472 616e 7361 6374  getBlockTransact
-00012880: 696f 6e43 6f75 6e74 4279 4e75 6d62 6572  ionCountByNumber
-00012890: 5f62 6c6f 636b 5f77 6974 685f 7478 6e28  _block_with_txn(
-000128a0: 0a20 2020 2020 2020 2073 656c 662c 2061  .        self, a
-000128b0: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
-000128c0: 6562 3322 2c20 626c 6f63 6b5f 7769 7468  eb3", block_with
-000128d0: 5f74 786e 3a20 426c 6f63 6b44 6174 610a  _txn: BlockData.
-000128e0: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
-000128f0: 2020 2020 2020 2074 7261 6e73 6163 7469         transacti
-00012900: 6f6e 5f63 6f75 6e74 203d 2061 7761 6974  on_count = await
-00012910: 2061 7379 6e63 5f77 332e 6574 682e 6765   async_w3.eth.ge
-00012920: 745f 626c 6f63 6b5f 7472 616e 7361 6374  t_block_transact
-00012930: 696f 6e5f 636f 756e 7428 0a20 2020 2020  ion_count(.     
-00012940: 2020 2020 2020 2062 6c6f 636b 5f77 6974         block_wit
-00012950: 685f 7478 6e5b 226e 756d 6265 7222 5d0a  h_txn["number"].
-00012960: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-00012970: 2020 2061 7373 6572 7420 6973 5f69 6e74     assert is_int
-00012980: 6567 6572 2874 7261 6e73 6163 7469 6f6e  eger(transaction
-00012990: 5f63 6f75 6e74 290a 2020 2020 2020 2020  _count).        
-000129a0: 6173 7365 7274 2074 7261 6e73 6163 7469  assert transacti
-000129b0: 6f6e 5f63 6f75 6e74 203e 3d20 310a 0a20  on_count >= 1.. 
-000129c0: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
-000129d0: 6173 796e 6369 6f0a 2020 2020 6173 796e  asyncio.    asyn
-000129e0: 6320 6465 6620 7465 7374 5f61 7379 6e63  c def test_async
-000129f0: 5f65 7468 5f73 6967 6e28 0a20 2020 2020  _eth_sign(.     
-00012a00: 2020 2073 656c 662c 2061 7379 6e63 5f77     self, async_w
-00012a10: 333a 2022 4173 796e 6357 6562 3322 2c20  3: "AsyncWeb3", 
-00012a20: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-00012a30: 5f64 7561 6c5f 7479 7065 3a20 4368 6563  _dual_type: Chec
-00012a40: 6b73 756d 4164 6472 6573 730a 2020 2020  ksumAddress.    
-00012a50: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-00012a60: 2020 2073 6967 6e61 7475 7265 203d 2061     signature = a
-00012a70: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
-00012a80: 682e 7369 676e 280a 2020 2020 2020 2020  h.sign(.        
-00012a90: 2020 2020 756e 6c6f 636b 6564 5f61 6363      unlocked_acc
-00012aa0: 6f75 6e74 5f64 7561 6c5f 7479 7065 2c20  ount_dual_type, 
-00012ab0: 7465 7874 3d22 4d65 7373 6167 6520 74c3  text="Message t.
-00012ac0: b620 7369 676e 2e20 4c6f 6e67 6572 2074  . sign. Longer t
-00012ad0: 6861 6e20 6861 7368 2122 0a20 2020 2020  han hash!".     
-00012ae0: 2020 2029 0a20 2020 2020 2020 2061 7373     ).        ass
-00012af0: 6572 7420 6973 5f62 7974 6573 2873 6967  ert is_bytes(sig
-00012b00: 6e61 7475 7265 290a 2020 2020 2020 2020  nature).        
-00012b10: 6173 7365 7274 206c 656e 2873 6967 6e61  assert len(signa
-00012b20: 7475 7265 2920 3d3d 2033 3220 2b20 3332  ture) == 32 + 32
-00012b30: 202b 2031 0a0a 2020 2020 2020 2020 2320   + 1..        # 
-00012b40: 7465 7374 206f 7468 6572 2066 6f72 6d61  test other forma
-00012b50: 7473 0a20 2020 2020 2020 2068 6578 7369  ts.        hexsi
-00012b60: 676e 203d 2061 7761 6974 2061 7379 6e63  gn = await async
-00012b70: 5f77 332e 6574 682e 7369 676e 280a 2020  _w3.eth.sign(.  
-00012b80: 2020 2020 2020 2020 2020 756e 6c6f 636b            unlock
-00012b90: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
-00012ba0: 7479 7065 2c0a 2020 2020 2020 2020 2020  type,.          
-00012bb0: 2020 6865 7873 7472 3d48 6578 5374 7228    hexstr=HexStr(
-00012bc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012bd0: 2022 3078 3464 3635 3733 3733 3631 3637   "0x4d6573736167
-00012be0: 3635 3230 3734 6333 6236 3230 3733 3639  652074c3b6207369
-00012bf0: 3637 3665 3265 3230 3463 3666 3665 3637  676e2e204c6f6e67
-00012c00: 3635 3732 3230 3734 3638 3631 3665 3230  6572207468616e20
-00012c10: 3638 3631 3733 3638 3231 2220 2023 206e  6861736821"  # n
-00012c20: 6f71 613a 2045 3530 310a 2020 2020 2020  oqa: E501.      
-00012c30: 2020 2020 2020 292c 0a20 2020 2020 2020        ),.       
-00012c40: 2029 0a20 2020 2020 2020 2061 7373 6572   ).        asser
-00012c50: 7420 6865 7873 6967 6e20 3d3d 2073 6967  t hexsign == sig
-00012c60: 6e61 7475 7265 0a0a 2020 2020 2020 2020  nature..        
-00012c70: 696e 7473 6967 6e20 3d20 6177 6169 7420  intsign = await 
-00012c80: 6173 796e 635f 7733 2e65 7468 2e73 6967  async_w3.eth.sig
-00012c90: 6e28 0a20 2020 2020 2020 2020 2020 2075  n(.            u
-00012ca0: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
-00012cb0: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
-00012cc0: 2020 2020 2020 2030 7834 4436 3537 3337         0x4D65737
-00012cd0: 3336 3136 3736 3532 3037 3443 3342 3632  36167652074C3B62
-00012ce0: 3037 3336 3936 3736 4532 4532 3034 4336  07369676E2E204C6
-00012cf0: 4636 4536 3736 3537 3232 3037 3436 3836  F6E6765722074686
-00012d00: 3136 4532 3036 3836 3137 3336 3832 312c  16E206861736821,
-00012d10: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00012d20: 2020 2061 7373 6572 7420 696e 7473 6967     assert intsig
-00012d30: 6e20 3d3d 2073 6967 6e61 7475 7265 0a0a  n == signature..
-00012d40: 2020 2020 2020 2020 6279 7465 7373 6967          bytessig
-00012d50: 6e20 3d20 6177 6169 7420 6173 796e 635f  n = await async_
-00012d60: 7733 2e65 7468 2e73 6967 6e28 0a20 2020  w3.eth.sign(.   
-00012d70: 2020 2020 2020 2020 2075 6e6c 6f63 6b65           unlocke
-00012d80: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-00012d90: 7970 652c 2062 224d 6573 7361 6765 2074  ype, b"Message t
-00012da0: 5c78 6333 5c78 6236 2073 6967 6e2e 204c  \xc3\xb6 sign. L
-00012db0: 6f6e 6765 7220 7468 616e 2068 6173 6821  onger than hash!
-00012dc0: 220a 2020 2020 2020 2020 290a 2020 2020  ".        ).    
-00012dd0: 2020 2020 6173 7365 7274 2062 7974 6573      assert bytes
-00012de0: 7369 676e 203d 3d20 7369 676e 6174 7572  sign == signatur
-00012df0: 650a 0a20 2020 2020 2020 206e 6577 5f73  e..        new_s
-00012e00: 6967 6e61 7475 7265 203d 2061 7761 6974  ignature = await
-00012e10: 2061 7379 6e63 5f77 332e 6574 682e 7369   async_w3.eth.si
-00012e20: 676e 280a 2020 2020 2020 2020 2020 2020  gn(.            
-00012e30: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-00012e40: 5f64 7561 6c5f 7479 7065 2c20 7465 7874  _dual_type, text
-00012e50: 3d22 6469 6666 6572 656e 7420 6d65 7373  ="different mess
-00012e60: 6167 6520 6973 2064 6966 6665 7265 6e74  age is different
-00012e70: 220a 2020 2020 2020 2020 290a 2020 2020  ".        ).    
-00012e80: 2020 2020 6173 7365 7274 206e 6577 5f73      assert new_s
-00012e90: 6967 6e61 7475 7265 2021 3d20 7369 676e  ignature != sign
-00012ea0: 6174 7572 650a 0a20 2020 2040 7079 7465  ature..    @pyte
-00012eb0: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
-00012ec0: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
-00012ed0: 2e78 6661 696c 280a 2020 2020 2020 2020  .xfail(.        
-00012ee0: 7265 6173 6f6e 3d22 4173 796e 6320 6d69  reason="Async mi
-00012ef0: 6464 6c65 7761 7265 2074 6f20 636f 6e76  ddleware to conv
-00012f00: 6572 7420 454e 5320 6e61 6d65 7320 746f  ert ENS names to
-00012f10: 2061 6464 7265 7373 6573 2069 7320 6d69   addresses is mi
-00012f20: 7373 696e 6722 0a20 2020 2029 0a20 2020  ssing".    ).   
-00012f30: 2061 7379 6e63 2064 6566 2074 6573 745f   async def test_
-00012f40: 6173 796e 635f 6574 685f 7369 676e 5f65  async_eth_sign_e
-00012f50: 6e73 5f6e 616d 6573 280a 2020 2020 2020  ns_names(.      
-00012f60: 2020 7365 6c66 2c20 6173 796e 635f 7733    self, async_w3
-00012f70: 3a20 2241 7379 6e63 5765 6233 222c 2075  : "AsyncWeb3", u
-00012f80: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
-00012f90: 6475 616c 5f74 7970 653a 2043 6865 636b  dual_type: Check
-00012fa0: 7375 6d41 6464 7265 7373 0a20 2020 2029  sumAddress.    )
-00012fb0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-00012fc0: 2020 7769 7468 2065 6e73 5f61 6464 7265    with ens_addre
-00012fd0: 7373 6573 2861 7379 6e63 5f77 332c 207b  sses(async_w3, {
-00012fe0: 2275 6e6c 6f63 6b65 642d 6163 6374 2e65  "unlocked-acct.e
-00012ff0: 7468 223a 2075 6e6c 6f63 6b65 645f 6163  th": unlocked_ac
-00013000: 636f 756e 745f 6475 616c 5f74 7970 657d  count_dual_type}
-00013010: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
-00013020: 6967 6e61 7475 7265 203d 2061 7761 6974  ignature = await
-00013030: 2061 7379 6e63 5f77 332e 6574 682e 7369   async_w3.eth.si
-00013040: 676e 280a 2020 2020 2020 2020 2020 2020  gn(.            
-00013050: 2020 2020 454e 5328 2275 6e6c 6f63 6b65      ENS("unlocke
-00013060: 642d 6163 6374 2e65 7468 2229 2c20 7465  d-acct.eth"), te
-00013070: 7874 3d22 4d65 7373 6167 6520 74c3 b620  xt="Message t.. 
-00013080: 7369 676e 2e20 4c6f 6e67 6572 2074 6861  sign. Longer tha
-00013090: 6e20 6861 7368 2122 0a20 2020 2020 2020  n hash!".       
-000130a0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-000130b0: 2020 2061 7373 6572 7420 6973 5f62 7974     assert is_byt
-000130c0: 6573 2873 6967 6e61 7475 7265 290a 2020  es(signature).  
-000130d0: 2020 2020 2020 2020 2020 6173 7365 7274            assert
-000130e0: 206c 656e 2873 6967 6e61 7475 7265 2920   len(signature) 
-000130f0: 3d3d 2033 3220 2b20 3332 202b 2031 0a0a  == 32 + 32 + 1..
-00013100: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
-00013110: 2e61 7379 6e63 696f 0a20 2020 2061 7379  .asyncio.    asy
-00013120: 6e63 2064 6566 2074 6573 745f 6173 796e  nc def test_asyn
-00013130: 635f 6574 685f 7265 706c 6163 655f 7472  c_eth_replace_tr
-00013140: 616e 7361 6374 696f 6e5f 6c65 6761 6379  ansaction_legacy
-00013150: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-00013160: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
-00013170: 5765 6233 222c 2075 6e6c 6f63 6b65 645f  Web3", unlocked_
-00013180: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
-00013190: 653a 2043 6865 636b 7375 6d41 6464 7265  e: ChecksumAddre
-000131a0: 7373 0a20 2020 2029 202d 3e20 4e6f 6e65  ss.    ) -> None
-000131b0: 3a0a 2020 2020 2020 2020 7478 6e5f 7061  :.        txn_pa
-000131c0: 7261 6d73 3a20 5478 5061 7261 6d73 203d  rams: TxParams =
-000131d0: 207b 0a20 2020 2020 2020 2020 2020 2022   {.            "
-000131e0: 6672 6f6d 223a 2075 6e6c 6f63 6b65 645f  from": unlocked_
-000131f0: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
-00013200: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
-00013210: 746f 223a 2075 6e6c 6f63 6b65 645f 6163  to": unlocked_ac
-00013220: 636f 756e 745f 6475 616c 5f74 7970 652c  count_dual_type,
-00013230: 0a20 2020 2020 2020 2020 2020 2022 7661  .            "va
-00013240: 6c75 6522 3a20 5765 6928 3129 2c0a 2020  lue": Wei(1),.  
-00013250: 2020 2020 2020 2020 2020 2267 6173 223a            "gas":
-00013260: 2032 3130 3030 2c0a 2020 2020 2020 2020   21000,.        
-00013270: 2020 2020 2267 6173 5072 6963 6522 3a20      "gasPrice": 
-00013280: 6173 796e 635f 7733 2e74 6f5f 7765 6928  async_w3.to_wei(
-00013290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000132a0: 2031 2c20 2267 7765 6922 0a20 2020 2020   1, "gwei".     
-000132b0: 2020 2020 2020 2029 2c20 2023 206d 7573         ),  # mus
-000132c0: 7420 6265 2067 7265 6174 6572 2074 6861  t be greater tha
-000132d0: 6e20 6261 7365 5f66 6565 2070 6f73 7420  n base_fee post 
-000132e0: 4c6f 6e64 6f6e 0a20 2020 2020 2020 207d  London.        }
-000132f0: 0a20 2020 2020 2020 2074 786e 5f68 6173  .        txn_has
-00013300: 6820 3d20 6177 6169 7420 6173 796e 635f  h = await async_
-00013310: 7733 2e65 7468 2e73 656e 645f 7472 616e  w3.eth.send_tran
-00013320: 7361 6374 696f 6e28 7478 6e5f 7061 7261  saction(txn_para
-00013330: 6d73 290a 0a20 2020 2020 2020 2074 786e  ms)..        txn
-00013340: 5f70 6172 616d 735b 2267 6173 5072 6963  _params["gasPric
-00013350: 6522 5d20 3d20 6173 796e 635f 7733 2e74  e"] = async_w3.t
-00013360: 6f5f 7765 6928 322c 2022 6777 6569 2229  o_wei(2, "gwei")
-00013370: 0a20 2020 2020 2020 2072 6570 6c61 6365  .        replace
-00013380: 5f74 786e 5f68 6173 6820 3d20 6177 6169  _txn_hash = awai
-00013390: 7420 6173 796e 635f 7733 2e65 7468 2e72  t async_w3.eth.r
-000133a0: 6570 6c61 6365 5f74 7261 6e73 6163 7469  eplace_transacti
-000133b0: 6f6e 2874 786e 5f68 6173 682c 2074 786e  on(txn_hash, txn
-000133c0: 5f70 6172 616d 7329 0a20 2020 2020 2020  _params).       
-000133d0: 2072 6570 6c61 6365 5f74 786e 203d 2061   replace_txn = a
-000133e0: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
-000133f0: 682e 6765 745f 7472 616e 7361 6374 696f  h.get_transactio
-00013400: 6e28 7265 706c 6163 655f 7478 6e5f 6861  n(replace_txn_ha
-00013410: 7368 290a 0a20 2020 2020 2020 2061 7373  sh)..        ass
-00013420: 6572 7420 6973 5f73 616d 655f 6164 6472  ert is_same_addr
-00013430: 6573 7328 0a20 2020 2020 2020 2020 2020  ess(.           
-00013440: 2072 6570 6c61 6365 5f74 786e 5b22 6672   replace_txn["fr
-00013450: 6f6d 225d 2c20 6361 7374 2843 6865 636b  om"], cast(Check
-00013460: 7375 6d41 6464 7265 7373 2c20 7478 6e5f  sumAddress, txn_
-00013470: 7061 7261 6d73 5b22 6672 6f6d 225d 290a  params["from"]).
-00013480: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00013490: 2020 6173 7365 7274 2069 735f 7361 6d65    assert is_same
-000134a0: 5f61 6464 7265 7373 280a 2020 2020 2020  _address(.      
-000134b0: 2020 2020 2020 7265 706c 6163 655f 7478        replace_tx
-000134c0: 6e5b 2274 6f22 5d2c 2063 6173 7428 4368  n["to"], cast(Ch
-000134d0: 6563 6b73 756d 4164 6472 6573 732c 2074  ecksumAddress, t
-000134e0: 786e 5f70 6172 616d 735b 2274 6f22 5d29  xn_params["to"])
-000134f0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00013500: 2020 2061 7373 6572 7420 7265 706c 6163     assert replac
-00013510: 655f 7478 6e5b 2276 616c 7565 225d 203d  e_txn["value"] =
-00013520: 3d20 310a 2020 2020 2020 2020 6173 7365  = 1.        asse
-00013530: 7274 2072 6570 6c61 6365 5f74 786e 5b22  rt replace_txn["
-00013540: 6761 7322 5d20 3d3d 2032 3130 3030 0a20  gas"] == 21000. 
-00013550: 2020 2020 2020 2061 7373 6572 7420 7265         assert re
-00013560: 706c 6163 655f 7478 6e5b 2267 6173 5072  place_txn["gasPr
-00013570: 6963 6522 5d20 3d3d 2074 786e 5f70 6172  ice"] == txn_par
-00013580: 616d 735b 2267 6173 5072 6963 6522 5d0a  ams["gasPrice"].
-00013590: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
-000135a0: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
-000135b0: 796e 6320 6465 6620 7465 7374 5f61 7379  ync def test_asy
-000135c0: 6e63 5f65 7468 5f72 6570 6c61 6365 5f74  nc_eth_replace_t
-000135d0: 7261 6e73 6163 7469 6f6e 280a 2020 2020  ransaction(.    
-000135e0: 2020 2020 7365 6c66 2c20 6173 796e 635f      self, async_
-000135f0: 7733 3a20 2241 7379 6e63 5765 6233 222c  w3: "AsyncWeb3",
-00013600: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-00013610: 745f 6475 616c 5f74 7970 653a 2043 6865  t_dual_type: Che
-00013620: 636b 7375 6d41 6464 7265 7373 0a20 2020  cksumAddress.   
-00013630: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-00013640: 2020 2020 7477 6f5f 6777 6569 5f69 6e5f      two_gwei_in_
-00013650: 7765 6920 3d20 6173 796e 635f 7733 2e74  wei = async_w3.t
-00013660: 6f5f 7765 6928 322c 2022 6777 6569 2229  o_wei(2, "gwei")
-00013670: 0a20 2020 2020 2020 2074 6872 6565 5f67  .        three_g
-00013680: 7765 695f 696e 5f77 6569 203d 2061 7379  wei_in_wei = asy
-00013690: 6e63 5f77 332e 746f 5f77 6569 2833 2c20  nc_w3.to_wei(3, 
-000136a0: 2267 7765 6922 290a 0a20 2020 2020 2020  "gwei")..       
-000136b0: 2074 786e 5f70 6172 616d 733a 2054 7850   txn_params: TxP
-000136c0: 6172 616d 7320 3d20 7b0a 2020 2020 2020  arams = {.      
-000136d0: 2020 2020 2020 2266 726f 6d22 3a20 756e        "from": un
-000136e0: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
-000136f0: 7561 6c5f 7479 7065 2c0a 2020 2020 2020  ual_type,.      
-00013700: 2020 2020 2020 2274 6f22 3a20 756e 6c6f        "to": unlo
-00013710: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
-00013720: 6c5f 7479 7065 2c0a 2020 2020 2020 2020  l_type,.        
-00013730: 2020 2020 2276 616c 7565 223a 2057 6569      "value": Wei
-00013740: 2831 292c 0a20 2020 2020 2020 2020 2020  (1),.           
-00013750: 2022 6761 7322 3a20 3231 3030 302c 0a20   "gas": 21000,. 
-00013760: 2020 2020 2020 2020 2020 2022 6d61 7846             "maxF
-00013770: 6565 5065 7247 6173 223a 2074 776f 5f67  eePerGas": two_g
-00013780: 7765 695f 696e 5f77 6569 2c0a 2020 2020  wei_in_wei,.    
-00013790: 2020 2020 2020 2020 226d 6178 5072 696f          "maxPrio
-000137a0: 7269 7479 4665 6550 6572 4761 7322 3a20  rityFeePerGas": 
-000137b0: 6173 796e 635f 7733 2e74 6f5f 7765 6928  async_w3.to_wei(
-000137c0: 312c 2022 6777 6569 2229 2c0a 2020 2020  1, "gwei"),.    
-000137d0: 2020 2020 7d0a 2020 2020 2020 2020 7478      }.        tx
-000137e0: 6e5f 6861 7368 203d 2061 7761 6974 2061  n_hash = await a
-000137f0: 7379 6e63 5f77 332e 6574 682e 7365 6e64  sync_w3.eth.send
-00013800: 5f74 7261 6e73 6163 7469 6f6e 2874 786e  _transaction(txn
-00013810: 5f70 6172 616d 7329 0a0a 2020 2020 2020  _params)..      
-00013820: 2020 7478 6e5f 7061 7261 6d73 5b22 6d61    txn_params["ma
-00013830: 7846 6565 5065 7247 6173 225d 203d 2074  xFeePerGas"] = t
-00013840: 6872 6565 5f67 7765 695f 696e 5f77 6569  hree_gwei_in_wei
-00013850: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
-00013860: 616d 735b 226d 6178 5072 696f 7269 7479  ams["maxPriority
-00013870: 4665 6550 6572 4761 7322 5d20 3d20 7477  FeePerGas"] = tw
-00013880: 6f5f 6777 6569 5f69 6e5f 7765 690a 0a20  o_gwei_in_wei.. 
-00013890: 2020 2020 2020 2072 6570 6c61 6365 5f74         replace_t
-000138a0: 786e 5f68 6173 6820 3d20 6177 6169 7420  xn_hash = await 
-000138b0: 6173 796e 635f 7733 2e65 7468 2e72 6570  async_w3.eth.rep
-000138c0: 6c61 6365 5f74 7261 6e73 6163 7469 6f6e  lace_transaction
-000138d0: 2874 786e 5f68 6173 682c 2074 786e 5f70  (txn_hash, txn_p
-000138e0: 6172 616d 7329 0a20 2020 2020 2020 2072  arams).        r
-000138f0: 6570 6c61 6365 5f74 786e 203d 2061 7761  eplace_txn = awa
-00013900: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
-00013910: 6765 745f 7472 616e 7361 6374 696f 6e28  get_transaction(
-00013920: 7265 706c 6163 655f 7478 6e5f 6861 7368  replace_txn_hash
-00013930: 290a 0a20 2020 2020 2020 2061 7373 6572  )..        asser
-00013940: 7420 6973 5f73 616d 655f 6164 6472 6573  t is_same_addres
-00013950: 7328 0a20 2020 2020 2020 2020 2020 2072  s(.            r
-00013960: 6570 6c61 6365 5f74 786e 5b22 6672 6f6d  eplace_txn["from
-00013970: 225d 2c20 6361 7374 2843 6865 636b 7375  "], cast(Checksu
-00013980: 6d41 6464 7265 7373 2c20 7478 6e5f 7061  mAddress, txn_pa
-00013990: 7261 6d73 5b22 6672 6f6d 225d 290a 2020  rams["from"]).  
-000139a0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-000139b0: 6173 7365 7274 2069 735f 7361 6d65 5f61  assert is_same_a
-000139c0: 6464 7265 7373 280a 2020 2020 2020 2020  ddress(.        
-000139d0: 2020 2020 7265 706c 6163 655f 7478 6e5b      replace_txn[
-000139e0: 2274 6f22 5d2c 2063 6173 7428 4368 6563  "to"], cast(Chec
-000139f0: 6b73 756d 4164 6472 6573 732c 2074 786e  ksumAddress, txn
-00013a00: 5f70 6172 616d 735b 2274 6f22 5d29 0a20  _params["to"]). 
-00013a10: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00013a20: 2061 7373 6572 7420 7265 706c 6163 655f   assert replace_
-00013a30: 7478 6e5b 2276 616c 7565 225d 203d 3d20  txn["value"] == 
-00013a40: 310a 2020 2020 2020 2020 6173 7365 7274  1.        assert
-00013a50: 2072 6570 6c61 6365 5f74 786e 5b22 6761   replace_txn["ga
-00013a60: 7322 5d20 3d3d 2032 3130 3030 0a20 2020  s"] == 21000.   
-00013a70: 2020 2020 2061 7373 6572 7420 7265 706c       assert repl
-00013a80: 6163 655f 7478 6e5b 226d 6178 4665 6550  ace_txn["maxFeeP
-00013a90: 6572 4761 7322 5d20 3d3d 2074 6872 6565  erGas"] == three
-00013aa0: 5f67 7765 695f 696e 5f77 6569 0a20 2020  _gwei_in_wei.   
-00013ab0: 2020 2020 2061 7373 6572 7420 7265 706c       assert repl
-00013ac0: 6163 655f 7478 6e5b 226d 6178 5072 696f  ace_txn["maxPrio
-00013ad0: 7269 7479 4665 6550 6572 4761 7322 5d20  rityFeePerGas"] 
-00013ae0: 3d3d 2074 776f 5f67 7765 695f 696e 5f77  == two_gwei_in_w
-00013af0: 6569 0a0a 2020 2020 4070 7974 6573 742e  ei..    @pytest.
-00013b00: 6d61 726b 2e61 7379 6e63 696f 0a20 2020  mark.asyncio.   
-00013b10: 2061 7379 6e63 2064 6566 2074 6573 745f   async def test_
-00013b20: 6173 796e 635f 6574 685f 7265 706c 6163  async_eth_replac
-00013b30: 655f 7472 616e 7361 6374 696f 6e5f 756e  e_transaction_un
-00013b40: 6465 7270 7269 6365 6428 0a20 2020 2020  derpriced(.     
-00013b50: 2020 2073 656c 662c 2061 7379 6e63 5f77     self, async_w
-00013b60: 333a 2022 4173 796e 6357 6562 3322 2c20  3: "AsyncWeb3", 
-00013b70: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-00013b80: 5f64 7561 6c5f 7479 7065 3a20 4368 6563  _dual_type: Chec
-00013b90: 6b73 756d 4164 6472 6573 730a 2020 2020  ksumAddress.    
-00013ba0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-00013bb0: 2020 2074 786e 5f70 6172 616d 733a 2054     txn_params: T
-00013bc0: 7850 6172 616d 7320 3d20 7b0a 2020 2020  xParams = {.    
-00013bd0: 2020 2020 2020 2020 2266 726f 6d22 3a20          "from": 
-00013be0: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-00013bf0: 5f64 7561 6c5f 7479 7065 2c0a 2020 2020  _dual_type,.    
-00013c00: 2020 2020 2020 2020 2274 6f22 3a20 756e          "to": un
-00013c10: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
-00013c20: 7561 6c5f 7479 7065 2c0a 2020 2020 2020  ual_type,.      
-00013c30: 2020 2020 2020 2276 616c 7565 223a 2057        "value": W
-00013c40: 6569 2831 292c 0a20 2020 2020 2020 2020  ei(1),.         
-00013c50: 2020 2022 6761 7322 3a20 3231 3030 302c     "gas": 21000,
-00013c60: 0a20 2020 2020 2020 2020 2020 2022 6d61  .            "ma
-00013c70: 7846 6565 5065 7247 6173 223a 2061 7379  xFeePerGas": asy
-00013c80: 6e63 5f77 332e 746f 5f77 6569 2833 2c20  nc_w3.to_wei(3, 
-00013c90: 2267 7765 6922 292c 0a20 2020 2020 2020  "gwei"),.       
-00013ca0: 2020 2020 2022 6d61 7850 7269 6f72 6974       "maxPriorit
-00013cb0: 7946 6565 5065 7247 6173 223a 2061 7379  yFeePerGas": asy
-00013cc0: 6e63 5f77 332e 746f 5f77 6569 2832 2c20  nc_w3.to_wei(2, 
-00013cd0: 2267 7765 6922 292c 0a20 2020 2020 2020  "gwei"),.       
-00013ce0: 207d 0a20 2020 2020 2020 2074 786e 5f68   }.        txn_h
-00013cf0: 6173 6820 3d20 6177 6169 7420 6173 796e  ash = await asyn
-00013d00: 635f 7733 2e65 7468 2e73 656e 645f 7472  c_w3.eth.send_tr
-00013d10: 616e 7361 6374 696f 6e28 7478 6e5f 7061  ansaction(txn_pa
-00013d20: 7261 6d73 290a 0a20 2020 2020 2020 206f  rams)..        o
-00013d30: 6e65 5f67 7765 695f 696e 5f77 6569 203d  ne_gwei_in_wei =
-00013d40: 2061 7379 6e63 5f77 332e 746f 5f77 6569   async_w3.to_wei
-00013d50: 2831 2c20 2267 7765 6922 290a 2020 2020  (1, "gwei").    
-00013d60: 2020 2020 7478 6e5f 7061 7261 6d73 5b22      txn_params["
-00013d70: 6d61 7846 6565 5065 7247 6173 225d 203d  maxFeePerGas"] =
-00013d80: 206f 6e65 5f67 7765 695f 696e 5f77 6569   one_gwei_in_wei
-00013d90: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
-00013da0: 616d 735b 226d 6178 5072 696f 7269 7479  ams["maxPriority
-00013db0: 4665 6550 6572 4761 7322 5d20 3d20 6f6e  FeePerGas"] = on
-00013dc0: 655f 6777 6569 5f69 6e5f 7765 690a 0a20  e_gwei_in_wei.. 
-00013dd0: 2020 2020 2020 2077 6974 6820 7079 7465         with pyte
-00013de0: 7374 2e72 6169 7365 7328 5661 6c75 6545  st.raises(ValueE
-00013df0: 7272 6f72 2c20 6d61 7463 683d 2272 6570  rror, match="rep
-00013e00: 6c61 6365 6d65 6e74 2074 7261 6e73 6163  lacement transac
-00013e10: 7469 6f6e 2075 6e64 6572 7072 6963 6564  tion underpriced
-00013e20: 2229 3a0a 2020 2020 2020 2020 2020 2020  "):.            
+00008c80: 6f63 6b42 7948 6173 685f 7065 6e64 696e  ockByHash_pendin
+00008c90: 6728 7365 6c66 2c20 6173 796e 635f 7733  g(self, async_w3
+00008ca0: 3a20 2241 7379 6e63 5765 6233 2229 202d  : "AsyncWeb3") -
+00008cb0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00008cc0: 626c 6f63 6b20 3d20 6177 6169 7420 6173  block = await as
+00008cd0: 796e 635f 7733 2e65 7468 2e67 6574 5f62  ync_w3.eth.get_b
+00008ce0: 6c6f 636b 2822 7065 6e64 696e 6722 290a  lock("pending").
+00008cf0: 2020 2020 2020 2020 6173 7365 7274 2062          assert b
+00008d00: 6c6f 636b 5b22 6861 7368 225d 2069 7320  lock["hash"] is 
+00008d10: 4e6f 6e65 0a0a 2020 2020 4070 7974 6573  None..    @pytes
+00008d20: 742e 6d61 726b 2e61 7379 6e63 696f 0a20  t.mark.asyncio. 
+00008d30: 2020 2061 7379 6e63 2064 6566 2074 6573     async def tes
+00008d40: 745f 6574 685f 6765 7442 6c6f 636b 4279  t_eth_getBlockBy
+00008d50: 4e75 6d62 6572 5f77 6974 685f 696e 7465  Number_with_inte
+00008d60: 6765 7228 0a20 2020 2020 2020 2073 656c  ger(.        sel
+00008d70: 662c 2061 7379 6e63 5f77 333a 2022 4173  f, async_w3: "As
+00008d80: 796e 6357 6562 3322 2c20 6173 796e 635f  yncWeb3", async_
+00008d90: 656d 7074 795f 626c 6f63 6b3a 2042 6c6f  empty_block: Blo
+00008da0: 636b 4461 7461 0a20 2020 2029 202d 3e20  ckData.    ) -> 
+00008db0: 4e6f 6e65 3a0a 2020 2020 2020 2020 626c  None:.        bl
+00008dc0: 6f63 6b20 3d20 6177 6169 7420 6173 796e  ock = await asyn
+00008dd0: 635f 7733 2e65 7468 2e67 6574 5f62 6c6f  c_w3.eth.get_blo
+00008de0: 636b 2861 7379 6e63 5f65 6d70 7479 5f62  ck(async_empty_b
+00008df0: 6c6f 636b 5b22 6e75 6d62 6572 225d 290a  lock["number"]).
+00008e00: 2020 2020 2020 2020 6173 7365 7274 2062          assert b
+00008e10: 6c6f 636b 5b22 6e75 6d62 6572 225d 203d  lock["number"] =
+00008e20: 3d20 6173 796e 635f 656d 7074 795f 626c  = async_empty_bl
+00008e30: 6f63 6b5b 226e 756d 6265 7222 5d0a 0a20  ock["number"].. 
+00008e40: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
+00008e50: 6173 796e 6369 6f0a 2020 2020 6173 796e  asyncio.    asyn
+00008e60: 6320 6465 6620 7465 7374 5f65 7468 5f67  c def test_eth_g
+00008e70: 6574 426c 6f63 6b42 794e 756d 6265 725f  etBlockByNumber_
+00008e80: 6c61 7465 7374 280a 2020 2020 2020 2020  latest(.        
+00008e90: 7365 6c66 2c20 6173 796e 635f 7733 3a20  self, async_w3: 
+00008ea0: 2241 7379 6e63 5765 6233 222c 2061 7379  "AsyncWeb3", asy
+00008eb0: 6e63 5f65 6d70 7479 5f62 6c6f 636b 3a20  nc_empty_block: 
+00008ec0: 426c 6f63 6b44 6174 610a 2020 2020 2920  BlockData.    ) 
+00008ed0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+00008ee0: 2063 7572 7265 6e74 5f62 6c6f 636b 5f6e   current_block_n
+00008ef0: 756d 6265 7220 3d20 6177 6169 7420 6173  umber = await as
+00008f00: 796e 635f 7733 2e65 7468 2e62 6c6f 636b  ync_w3.eth.block
+00008f10: 5f6e 756d 6265 720a 2020 2020 2020 2020  _number.        
+00008f20: 626c 6f63 6b20 3d20 6177 6169 7420 6173  block = await as
+00008f30: 796e 635f 7733 2e65 7468 2e67 6574 5f62  ync_w3.eth.get_b
+00008f40: 6c6f 636b 2822 6c61 7465 7374 2229 0a20  lock("latest"). 
+00008f50: 2020 2020 2020 2061 7373 6572 7420 626c         assert bl
+00008f60: 6f63 6b5b 226e 756d 6265 7222 5d20 3d3d  ock["number"] ==
+00008f70: 2063 7572 7265 6e74 5f62 6c6f 636b 5f6e   current_block_n
+00008f80: 756d 6265 720a 0a20 2020 2040 7079 7465  umber..    @pyte
+00008f90: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
+00008fa0: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
+00008fb0: 7374 5f65 7468 5f67 6574 426c 6f63 6b42  st_eth_getBlockB
+00008fc0: 794e 756d 6265 725f 6e6f 745f 666f 756e  yNumber_not_foun
+00008fd0: 6428 0a20 2020 2020 2020 2073 656c 662c  d(.        self,
+00008fe0: 2061 7379 6e63 5f77 333a 2022 4173 796e   async_w3: "Asyn
+00008ff0: 6357 6562 3322 2c20 6173 796e 635f 656d  cWeb3", async_em
+00009000: 7074 795f 626c 6f63 6b3a 2042 6c6f 636b  pty_block: Block
+00009010: 4461 7461 0a20 2020 2029 202d 3e20 4e6f  Data.    ) -> No
+00009020: 6e65 3a0a 2020 2020 2020 2020 7769 7468  ne:.        with
+00009030: 2070 7974 6573 742e 7261 6973 6573 2842   pytest.raises(B
+00009040: 6c6f 636b 4e6f 7446 6f75 6e64 293a 0a20  lockNotFound):. 
+00009050: 2020 2020 2020 2020 2020 2061 7761 6974             await
+00009060: 2061 7379 6e63 5f77 332e 6574 682e 6765   async_w3.eth.ge
+00009070: 745f 626c 6f63 6b28 426c 6f63 6b4e 756d  t_block(BlockNum
+00009080: 6265 7228 3132 3334 3529 290a 0a20 2020  ber(12345))..   
+00009090: 2040 7079 7465 7374 2e6d 6172 6b2e 6173   @pytest.mark.as
+000090a0: 796e 6369 6f0a 2020 2020 6173 796e 6320  yncio.    async 
+000090b0: 6465 6620 7465 7374 5f65 7468 5f67 6574  def test_eth_get
+000090c0: 426c 6f63 6b42 794e 756d 6265 725f 7065  BlockByNumber_pe
+000090d0: 6e64 696e 6728 0a20 2020 2020 2020 2073  nding(.        s
+000090e0: 656c 662c 2061 7379 6e63 5f77 333a 2022  elf, async_w3: "
+000090f0: 4173 796e 6357 6562 3322 2c20 6173 796e  AsyncWeb3", asyn
+00009100: 635f 656d 7074 795f 626c 6f63 6b3a 2042  c_empty_block: B
+00009110: 6c6f 636b 4461 7461 0a20 2020 2029 202d  lockData.    ) -
+00009120: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00009130: 6375 7272 656e 745f 626c 6f63 6b5f 6e75  current_block_nu
+00009140: 6d62 6572 203d 2061 7761 6974 2061 7379  mber = await asy
+00009150: 6e63 5f77 332e 6574 682e 626c 6f63 6b5f  nc_w3.eth.block_
+00009160: 6e75 6d62 6572 0a20 2020 2020 2020 2062  number.        b
+00009170: 6c6f 636b 203d 2061 7761 6974 2061 7379  lock = await asy
+00009180: 6e63 5f77 332e 6574 682e 6765 745f 626c  nc_w3.eth.get_bl
+00009190: 6f63 6b28 2270 656e 6469 6e67 2229 0a20  ock("pending"). 
+000091a0: 2020 2020 2020 2061 7373 6572 7420 626c         assert bl
+000091b0: 6f63 6b5b 226e 756d 6265 7222 5d20 3d3d  ock["number"] ==
+000091c0: 2063 7572 7265 6e74 5f62 6c6f 636b 5f6e   current_block_n
+000091d0: 756d 6265 7220 2b20 310a 0a20 2020 2040  umber + 1..    @
+000091e0: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
+000091f0: 6369 6f0a 2020 2020 6173 796e 6320 6465  cio.    async de
+00009200: 6620 7465 7374 5f65 7468 5f67 6574 426c  f test_eth_getBl
+00009210: 6f63 6b42 794e 756d 6265 725f 6561 726c  ockByNumber_earl
+00009220: 6965 7374 280a 2020 2020 2020 2020 7365  iest(.        se
+00009230: 6c66 2c20 6173 796e 635f 7733 3a20 2241  lf, async_w3: "A
+00009240: 7379 6e63 5765 6233 222c 2061 7379 6e63  syncWeb3", async
+00009250: 5f65 6d70 7479 5f62 6c6f 636b 3a20 426c  _empty_block: Bl
+00009260: 6f63 6b44 6174 610a 2020 2020 2920 2d3e  ockData.    ) ->
+00009270: 204e 6f6e 653a 0a20 2020 2020 2020 2067   None:.        g
+00009280: 656e 6573 6973 5f62 6c6f 636b 203d 2061  enesis_block = a
+00009290: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
+000092a0: 682e 6765 745f 626c 6f63 6b28 426c 6f63  h.get_block(Bloc
+000092b0: 6b4e 756d 6265 7228 3029 290a 2020 2020  kNumber(0)).    
+000092c0: 2020 2020 626c 6f63 6b20 3d20 6177 6169      block = awai
+000092d0: 7420 6173 796e 635f 7733 2e65 7468 2e67  t async_w3.eth.g
+000092e0: 6574 5f62 6c6f 636b 2822 6561 726c 6965  et_block("earlie
+000092f0: 7374 2229 0a20 2020 2020 2020 2061 7373  st").        ass
+00009300: 6572 7420 626c 6f63 6b5b 226e 756d 6265  ert block["numbe
+00009310: 7222 5d20 3d3d 2030 0a20 2020 2020 2020  r"] == 0.       
+00009320: 2061 7373 6572 7420 626c 6f63 6b5b 2268   assert block["h
+00009330: 6173 6822 5d20 3d3d 2067 656e 6573 6973  ash"] == genesis
+00009340: 5f62 6c6f 636b 5b22 6861 7368 225d 0a0a  _block["hash"]..
+00009350: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
+00009360: 2e61 7379 6e63 696f 0a20 2020 2040 7079  .asyncio.    @py
+00009370: 7465 7374 2e6d 6172 6b2e 7866 6169 6c28  test.mark.xfail(
+00009380: 7265 6173 6f6e 3d22 496e 7465 6772 6174  reason="Integrat
+00009390: 696f 6e20 7465 7374 2073 7569 7465 206e  ion test suite n
+000093a0: 6f74 2079 6574 2073 6574 2075 7020 666f  ot yet set up fo
+000093b0: 7220 506f 5322 290a 2020 2020 6173 796e  r PoS").    asyn
+000093c0: 6320 6465 6620 7465 7374 5f65 7468 5f67  c def test_eth_g
+000093d0: 6574 426c 6f63 6b42 794e 756d 6265 725f  etBlockByNumber_
+000093e0: 7361 6665 280a 2020 2020 2020 2020 7365  safe(.        se
+000093f0: 6c66 2c20 6173 796e 635f 7733 3a20 2241  lf, async_w3: "A
+00009400: 7379 6e63 5765 6233 222c 2061 7379 6e63  syncWeb3", async
+00009410: 5f65 6d70 7479 5f62 6c6f 636b 3a20 426c  _empty_block: Bl
+00009420: 6f63 6b44 6174 610a 2020 2020 2920 2d3e  ockData.    ) ->
+00009430: 204e 6f6e 653a 0a20 2020 2020 2020 2062   None:.        b
+00009440: 6c6f 636b 203d 2061 7761 6974 2061 7379  lock = await asy
+00009450: 6e63 5f77 332e 6574 682e 6765 745f 626c  nc_w3.eth.get_bl
+00009460: 6f63 6b28 2273 6166 6522 290a 2020 2020  ock("safe").    
+00009470: 2020 2020 6173 7365 7274 2062 6c6f 636b      assert block
+00009480: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
+00009490: 2020 2020 2061 7373 6572 7420 6973 696e       assert isin
+000094a0: 7374 616e 6365 2862 6c6f 636b 5b22 6e75  stance(block["nu
+000094b0: 6d62 6572 225d 2c20 696e 7429 0a0a 2020  mber"], int)..  
+000094c0: 2020 4070 7974 6573 742e 6d61 726b 2e61    @pytest.mark.a
+000094d0: 7379 6e63 696f 0a20 2020 2040 7079 7465  syncio.    @pyte
+000094e0: 7374 2e6d 6172 6b2e 7866 6169 6c28 7265  st.mark.xfail(re
+000094f0: 6173 6f6e 3d22 496e 7465 6772 6174 696f  ason="Integratio
+00009500: 6e20 7465 7374 2073 7569 7465 206e 6f74  n test suite not
+00009510: 2079 6574 2073 6574 2075 7020 666f 7220   yet set up for 
+00009520: 506f 5322 290a 2020 2020 6173 796e 6320  PoS").    async 
+00009530: 6465 6620 7465 7374 5f65 7468 5f67 6574  def test_eth_get
+00009540: 426c 6f63 6b42 794e 756d 6265 725f 6669  BlockByNumber_fi
+00009550: 6e61 6c69 7a65 6428 0a20 2020 2020 2020  nalized(.       
+00009560: 2073 656c 662c 2061 7379 6e63 5f77 333a   self, async_w3:
+00009570: 2022 4173 796e 6357 6562 3322 2c20 6173   "AsyncWeb3", as
+00009580: 796e 635f 656d 7074 795f 626c 6f63 6b3a  ync_empty_block:
+00009590: 2042 6c6f 636b 4461 7461 0a20 2020 2029   BlockData.    )
+000095a0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+000095b0: 2020 626c 6f63 6b20 3d20 6177 6169 7420    block = await 
+000095c0: 6173 796e 635f 7733 2e65 7468 2e67 6574  async_w3.eth.get
+000095d0: 5f62 6c6f 636b 2822 6669 6e61 6c69 7a65  _block("finalize
+000095e0: 6422 290a 2020 2020 2020 2020 6173 7365  d").        asse
+000095f0: 7274 2062 6c6f 636b 2069 7320 6e6f 7420  rt block is not 
+00009600: 4e6f 6e65 0a20 2020 2020 2020 2061 7373  None.        ass
+00009610: 6572 7420 6973 696e 7374 616e 6365 2862  ert isinstance(b
+00009620: 6c6f 636b 5b22 6e75 6d62 6572 225d 2c20  lock["number"], 
+00009630: 696e 7429 0a0a 2020 2020 4070 7974 6573  int)..    @pytes
+00009640: 742e 6d61 726b 2e61 7379 6e63 696f 0a20  t.mark.asyncio. 
+00009650: 2020 2061 7379 6e63 2064 6566 2074 6573     async def tes
+00009660: 745f 6574 685f 6765 745f 626c 6f63 6b5f  t_eth_get_block_
+00009670: 6279 5f6e 756d 6265 725f 6675 6c6c 5f74  by_number_full_t
+00009680: 7261 6e73 6163 7469 6f6e 7328 0a20 2020  ransactions(.   
+00009690: 2020 2020 2073 656c 662c 2061 7379 6e63       self, async
+000096a0: 5f77 333a 2022 4173 796e 6357 6562 3322  _w3: "AsyncWeb3"
+000096b0: 2c20 6173 796e 635f 626c 6f63 6b5f 7769  , async_block_wi
+000096c0: 7468 5f74 786e 3a20 426c 6f63 6b44 6174  th_txn: BlockDat
+000096d0: 610a 2020 2020 2920 2d3e 204e 6f6e 653a  a.    ) -> None:
+000096e0: 0a20 2020 2020 2020 2062 6c6f 636b 203d  .        block =
+000096f0: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
+00009700: 6574 682e 6765 745f 626c 6f63 6b28 6173  eth.get_block(as
+00009710: 796e 635f 626c 6f63 6b5f 7769 7468 5f74  ync_block_with_t
+00009720: 786e 5b22 6e75 6d62 6572 225d 2c20 5472  xn["number"], Tr
+00009730: 7565 290a 2020 2020 2020 2020 7472 616e  ue).        tran
+00009740: 7361 6374 696f 6e20 3d20 6361 7374 2854  saction = cast(T
+00009750: 7844 6174 612c 2062 6c6f 636b 5b22 7472  xData, block["tr
+00009760: 616e 7361 6374 696f 6e73 225d 5b30 5d29  ansactions"][0])
+00009770: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00009780: 7472 616e 7361 6374 696f 6e5b 2268 6173  transaction["has
+00009790: 6822 5d20 3d3d 2061 7379 6e63 5f62 6c6f  h"] == async_blo
+000097a0: 636b 5f77 6974 685f 7478 6e5b 2274 7261  ck_with_txn["tra
+000097b0: 6e73 6163 7469 6f6e 7322 5d5b 305d 0a0a  nsactions"][0]..
+000097c0: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
+000097d0: 2e61 7379 6e63 696f 0a20 2020 2061 7379  .asyncio.    asy
+000097e0: 6e63 2064 6566 2074 6573 745f 6574 685f  nc def test_eth_
+000097f0: 6765 745f 7261 775f 7472 616e 7361 6374  get_raw_transact
+00009800: 696f 6e28 0a20 2020 2020 2020 2073 656c  ion(.        sel
+00009810: 662c 2061 7379 6e63 5f77 333a 2022 4173  f, async_w3: "As
+00009820: 796e 6357 6562 3322 2c20 6d69 6e65 645f  yncWeb3", mined_
+00009830: 7478 6e5f 6861 7368 3a20 4865 7853 7472  txn_hash: HexStr
+00009840: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+00009850: 2020 2020 2020 2020 7261 775f 7472 616e          raw_tran
+00009860: 7361 6374 696f 6e20 3d20 6177 6169 7420  saction = await 
+00009870: 6173 796e 635f 7733 2e65 7468 2e67 6574  async_w3.eth.get
+00009880: 5f72 6177 5f74 7261 6e73 6163 7469 6f6e  _raw_transaction
+00009890: 286d 696e 6564 5f74 786e 5f68 6173 6829  (mined_txn_hash)
+000098a0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+000098b0: 6973 5f62 7974 6573 2872 6177 5f74 7261  is_bytes(raw_tra
+000098c0: 6e73 6163 7469 6f6e 290a 0a20 2020 2040  nsaction)..    @
+000098d0: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
+000098e0: 6369 6f0a 2020 2020 6173 796e 6320 6465  cio.    async de
+000098f0: 6620 7465 7374 5f65 7468 5f67 6574 5f72  f test_eth_get_r
+00009900: 6177 5f74 7261 6e73 6163 7469 6f6e 5f72  aw_transaction_r
+00009910: 6169 7365 735f 6572 726f 7228 0a20 2020  aises_error(.   
+00009920: 2020 2020 2073 656c 662c 2061 7379 6e63       self, async
+00009930: 5f77 333a 2022 4173 796e 6357 6562 3322  _w3: "AsyncWeb3"
+00009940: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+00009950: 2020 2020 2020 2020 7769 7468 2070 7974          with pyt
+00009960: 6573 742e 7261 6973 6573 280a 2020 2020  est.raises(.    
+00009970: 2020 2020 2020 2020 5472 616e 7361 6374          Transact
+00009980: 696f 6e4e 6f74 466f 756e 642c 206d 6174  ionNotFound, mat
+00009990: 6368 3d66 2254 7261 6e73 6163 7469 6f6e  ch=f"Transaction
+000099a0: 2077 6974 6820 6861 7368 3a20 277b 554e   with hash: '{UN
+000099b0: 4b4e 4f57 4e5f 4841 5348 7d27 220a 2020  KNOWN_HASH}'".  
+000099c0: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
+000099d0: 2020 2020 2061 7761 6974 2061 7379 6e63       await async
+000099e0: 5f77 332e 6574 682e 6765 745f 7261 775f  _w3.eth.get_raw_
+000099f0: 7472 616e 7361 6374 696f 6e28 554e 4b4e  transaction(UNKN
+00009a00: 4f57 4e5f 4841 5348 290a 0a20 2020 2040  OWN_HASH)..    @
+00009a10: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
+00009a20: 6369 6f0a 2020 2020 6173 796e 6320 6465  cio.    async de
+00009a30: 6620 7465 7374 5f65 7468 5f67 6574 5f72  f test_eth_get_r
+00009a40: 6177 5f74 7261 6e73 6163 7469 6f6e 5f62  aw_transaction_b
+00009a50: 795f 626c 6f63 6b28 0a20 2020 2020 2020  y_block(.       
+00009a60: 2073 656c 662c 0a20 2020 2020 2020 2061   self,.        a
+00009a70: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
+00009a80: 6562 3322 2c0a 2020 2020 2020 2020 6173  eb3",.        as
+00009a90: 796e 635f 626c 6f63 6b5f 7769 7468 5f74  ync_block_with_t
+00009aa0: 786e 3a20 426c 6f63 6b44 6174 612c 0a20  xn: BlockData,. 
+00009ab0: 2020 2020 2020 2061 7379 6e63 5f75 6e6c         async_unl
+00009ac0: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
+00009ad0: 616c 5f74 7970 653a 2043 6865 636b 7375  al_type: Checksu
+00009ae0: 6d41 6464 7265 7373 2c0a 2020 2020 2920  mAddress,.    ) 
+00009af0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+00009b00: 2023 2065 7468 5f67 6574 5261 7754 7261   # eth_getRawTra
+00009b10: 6e73 6163 7469 6f6e 4279 426c 6f63 6b4e  nsactionByBlockN
+00009b20: 756d 6265 7241 6e64 496e 6465 783a 2062  umberAndIndex: b
+00009b30: 6c6f 636b 2069 6465 6e74 6966 6965 720a  lock identifier.
+00009b40: 2020 2020 2020 2020 2320 7365 6e64 2061          # send a
+00009b50: 2074 786e 2074 6f20 6d61 6b65 2073 7572   txn to make sur
+00009b60: 6520 7065 6e64 696e 6720 626c 6f63 6b20  e pending block 
+00009b70: 6861 7320 6174 206c 6561 7374 206f 6e65  has at least one
+00009b80: 2074 786e 0a20 2020 2020 2020 2061 7761   txn.        awa
+00009b90: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
+00009ba0: 7365 6e64 5f74 7261 6e73 6163 7469 6f6e  send_transaction
+00009bb0: 280a 2020 2020 2020 2020 2020 2020 7b0a  (.            {.
+00009bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009bd0: 2266 726f 6d22 3a20 6173 796e 635f 756e  "from": async_un
+00009be0: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
+00009bf0: 7561 6c5f 7479 7065 2c0a 2020 2020 2020  ual_type,.      
+00009c00: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
+00009c10: 6173 796e 635f 756e 6c6f 636b 6564 5f61  async_unlocked_a
+00009c20: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
+00009c30: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00009c40: 2020 2276 616c 7565 223a 2057 6569 2831    "value": Wei(1
+00009c50: 292c 0a20 2020 2020 2020 2020 2020 207d  ),.            }
+00009c60: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00009c70: 2020 2070 656e 6469 6e67 5f62 6c6f 636b     pending_block
+00009c80: 203d 2061 7761 6974 2061 7379 6e63 5f77   = await async_w
+00009c90: 332e 6574 682e 6765 745f 626c 6f63 6b28  3.eth.get_block(
+00009ca0: 2270 656e 6469 6e67 2229 0a20 2020 2020  "pending").     
+00009cb0: 2020 206c 6173 745f 7065 6e64 696e 675f     last_pending_
+00009cc0: 7478 6e5f 696e 6465 7820 3d20 6c65 6e28  txn_index = len(
+00009cd0: 7065 6e64 696e 675f 626c 6f63 6b5b 2274  pending_block["t
+00009ce0: 7261 6e73 6163 7469 6f6e 7322 5d29 202d  ransactions"]) -
+00009cf0: 2031 0a20 2020 2020 2020 2072 6177 5f74   1.        raw_t
+00009d00: 786e 203d 2061 7761 6974 2061 7379 6e63  xn = await async
+00009d10: 5f77 332e 6574 682e 6765 745f 7261 775f  _w3.eth.get_raw_
+00009d20: 7472 616e 7361 6374 696f 6e5f 6279 5f62  transaction_by_b
+00009d30: 6c6f 636b 280a 2020 2020 2020 2020 2020  lock(.          
+00009d40: 2020 2270 656e 6469 6e67 222c 206c 6173    "pending", las
+00009d50: 745f 7065 6e64 696e 675f 7478 6e5f 696e  t_pending_txn_in
+00009d60: 6465 780a 2020 2020 2020 2020 290a 2020  dex.        ).  
+00009d70: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+00009d80: 6279 7465 7328 7261 775f 7478 6e29 0a0a  bytes(raw_txn)..
+00009d90: 2020 2020 2020 2020 2320 6574 685f 6765          # eth_ge
+00009da0: 7452 6177 5472 616e 7361 6374 696f 6e42  tRawTransactionB
+00009db0: 7942 6c6f 636b 4e75 6d62 6572 416e 6449  yBlockNumberAndI
+00009dc0: 6e64 6578 3a20 626c 6f63 6b20 6e75 6d62  ndex: block numb
+00009dd0: 6572 0a20 2020 2020 2020 2061 7379 6e63  er.        async
+00009de0: 5f62 6c6f 636b 5f77 6974 685f 7478 6e5f  _block_with_txn_
+00009df0: 6e75 6d62 6572 203d 2061 7379 6e63 5f62  number = async_b
+00009e00: 6c6f 636b 5f77 6974 685f 7478 6e5b 226e  lock_with_txn["n
+00009e10: 756d 6265 7222 5d0a 2020 2020 2020 2020  umber"].        
+00009e20: 7261 775f 7472 616e 7361 6374 696f 6e20  raw_transaction 
+00009e30: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
+00009e40: 2e65 7468 2e67 6574 5f72 6177 5f74 7261  .eth.get_raw_tra
+00009e50: 6e73 6163 7469 6f6e 5f62 795f 626c 6f63  nsaction_by_bloc
+00009e60: 6b28 0a20 2020 2020 2020 2020 2020 2061  k(.            a
+00009e70: 7379 6e63 5f62 6c6f 636b 5f77 6974 685f  sync_block_with_
+00009e80: 7478 6e5f 6e75 6d62 6572 2c20 300a 2020  txn_number, 0.  
+00009e90: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00009ea0: 6173 7365 7274 2069 735f 6279 7465 7328  assert is_bytes(
+00009eb0: 7261 775f 7472 616e 7361 6374 696f 6e29  raw_transaction)
+00009ec0: 0a0a 2020 2020 2020 2020 2320 6574 685f  ..        # eth_
+00009ed0: 6765 7452 6177 5472 616e 7361 6374 696f  getRawTransactio
+00009ee0: 6e42 7942 6c6f 636b 4861 7368 416e 6449  nByBlockHashAndI
+00009ef0: 6e64 6578 3a20 626c 6f63 6b20 6861 7368  ndex: block hash
+00009f00: 0a20 2020 2020 2020 2061 7379 6e63 5f62  .        async_b
+00009f10: 6c6f 636b 5f77 6974 685f 7478 6e5f 6861  lock_with_txn_ha
+00009f20: 7368 203d 2061 7379 6e63 5f62 6c6f 636b  sh = async_block
+00009f30: 5f77 6974 685f 7478 6e5b 2268 6173 6822  _with_txn["hash"
+00009f40: 5d0a 2020 2020 2020 2020 7261 775f 7472  ].        raw_tr
+00009f50: 616e 7361 6374 696f 6e20 3d20 6177 6169  ansaction = awai
+00009f60: 7420 6173 796e 635f 7733 2e65 7468 2e67  t async_w3.eth.g
+00009f70: 6574 5f72 6177 5f74 7261 6e73 6163 7469  et_raw_transacti
+00009f80: 6f6e 5f62 795f 626c 6f63 6b28 0a20 2020  on_by_block(.   
+00009f90: 2020 2020 2020 2020 2061 7379 6e63 5f62           async_b
+00009fa0: 6c6f 636b 5f77 6974 685f 7478 6e5f 6861  lock_with_txn_ha
+00009fb0: 7368 2c20 300a 2020 2020 2020 2020 290a  sh, 0.        ).
+00009fc0: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+00009fd0: 735f 6279 7465 7328 7261 775f 7472 616e  s_bytes(raw_tran
+00009fe0: 7361 6374 696f 6e29 0a0a 2020 2020 4070  saction)..    @p
+00009ff0: 7974 6573 742e 6d61 726b 2e61 7379 6e63  ytest.mark.async
+0000a000: 696f 0a20 2020 2040 7079 7465 7374 2e6d  io.    @pytest.m
+0000a010: 6172 6b2e 7061 7261 6d65 7472 697a 6528  ark.parametrize(
+0000a020: 2275 6e6b 6e6f 776e 5f62 6c6f 636b 5f6e  "unknown_block_n
+0000a030: 756d 5f6f 725f 6861 7368 222c 2028 3132  um_or_hash", (12
+0000a040: 3334 3536 3738 3939 3939 392c 2055 4e4b  34567899999, UNK
+0000a050: 4e4f 574e 5f48 4153 4829 290a 2020 2020  NOWN_HASH)).    
+0000a060: 6173 796e 6320 6465 6620 7465 7374 5f65  async def test_e
+0000a070: 7468 5f67 6574 5f72 6177 5f74 7261 6e73  th_get_raw_trans
+0000a080: 6163 7469 6f6e 5f62 795f 626c 6f63 6b5f  action_by_block_
+0000a090: 7261 6973 6573 5f65 7272 6f72 280a 2020  raises_error(.  
+0000a0a0: 2020 2020 2020 7365 6c66 2c20 6173 796e        self, asyn
+0000a0b0: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
+0000a0c0: 222c 2075 6e6b 6e6f 776e 5f62 6c6f 636b  ", unknown_block
+0000a0d0: 5f6e 756d 5f6f 725f 6861 7368 3a20 556e  _num_or_hash: Un
+0000a0e0: 696f 6e5b 696e 742c 2048 6578 4279 7465  ion[int, HexByte
+0000a0f0: 735d 0a20 2020 2029 202d 3e20 4e6f 6e65  s].    ) -> None
+0000a100: 3a0a 2020 2020 2020 2020 7769 7468 2070  :.        with p
+0000a110: 7974 6573 742e 7261 6973 6573 280a 2020  ytest.raises(.  
+0000a120: 2020 2020 2020 2020 2020 5472 616e 7361            Transa
+0000a130: 6374 696f 6e4e 6f74 466f 756e 642c 0a20  ctionNotFound,. 
+0000a140: 2020 2020 2020 2020 2020 206d 6174 6368             match
+0000a150: 3d28 0a20 2020 2020 2020 2020 2020 2020  =(.             
+0000a160: 2020 2066 2254 7261 6e73 6163 7469 6f6e     f"Transaction
+0000a170: 2069 6e64 6578 3a20 3020 6f6e 2062 6c6f   index: 0 on blo
+0000a180: 636b 2069 643a 2022 0a20 2020 2020 2020  ck id: ".       
+0000a190: 2020 2020 2020 2020 2066 227b 746f 5f68           f"{to_h
+0000a1a0: 6578 5f69 665f 696e 7465 6765 7228 756e  ex_if_integer(un
+0000a1b0: 6b6e 6f77 6e5f 626c 6f63 6b5f 6e75 6d5f  known_block_num_
+0000a1c0: 6f72 5f68 6173 6829 2172 7d20 220a 2020  or_hash)!r} ".  
+0000a1d0: 2020 2020 2020 2020 2020 2020 2020 6622                f"
+0000a1e0: 6e6f 7420 666f 756e 642e 220a 2020 2020  not found.".    
+0000a1f0: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
+0000a200: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
+0000a210: 2020 6177 6169 7420 6173 796e 635f 7733    await async_w3
+0000a220: 2e65 7468 2e67 6574 5f72 6177 5f74 7261  .eth.get_raw_tra
+0000a230: 6e73 6163 7469 6f6e 5f62 795f 626c 6f63  nsaction_by_bloc
+0000a240: 6b28 0a20 2020 2020 2020 2020 2020 2020  k(.             
+0000a250: 2020 2075 6e6b 6e6f 776e 5f62 6c6f 636b     unknown_block
+0000a260: 5f6e 756d 5f6f 725f 6861 7368 2c20 300a  _num_or_hash, 0.
+0000a270: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
+0000a280: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
+0000a290: 6173 796e 6369 6f0a 2020 2020 6173 796e  asyncio.    asyn
+0000a2a0: 6320 6465 6620 7465 7374 5f65 7468 5f67  c def test_eth_g
+0000a2b0: 6574 5f72 6177 5f74 7261 6e73 6163 7469  et_raw_transacti
+0000a2c0: 6f6e 5f62 795f 626c 6f63 6b5f 7261 6973  on_by_block_rais
+0000a2d0: 6573 5f65 7272 6f72 5f62 6c6f 636b 5f69  es_error_block_i
+0000a2e0: 6465 6e74 6966 6965 7228 0a20 2020 2020  dentifier(.     
+0000a2f0: 2020 2073 656c 662c 2061 7379 6e63 5f77     self, async_w
+0000a300: 333a 2022 4173 796e 6357 6562 3322 0a20  3: "AsyncWeb3". 
+0000a310: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
+0000a320: 2020 2020 2020 756e 6b6e 6f77 6e5f 6964        unknown_id
+0000a330: 656e 7469 6669 6572 203d 2022 756e 6b6e  entifier = "unkn
+0000a340: 6f77 6e22 0a20 2020 2020 2020 2077 6974  own".        wit
+0000a350: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
+0000a360: 0a20 2020 2020 2020 2020 2020 2056 616c  .            Val
+0000a370: 7565 4572 726f 722c 0a20 2020 2020 2020  ueError,.       
+0000a380: 2020 2020 206d 6174 6368 3d28 0a20 2020       match=(.   
+0000a390: 2020 2020 2020 2020 2020 2020 2022 5661               "Va
+0000a3a0: 6c75 6520 6469 6420 6e6f 7420 6d61 7463  lue did not matc
+0000a3b0: 6820 616e 7920 6f66 2074 6865 2072 6563  h any of the rec
+0000a3c0: 6f67 6e69 7a65 6420 626c 6f63 6b20 6964  ognized block id
+0000a3d0: 656e 7469 6669 6572 733a 2022 0a20 2020  entifiers: ".   
+0000a3e0: 2020 2020 2020 2020 2020 2020 2066 227b               f"{
+0000a3f0: 756e 6b6e 6f77 6e5f 6964 656e 7469 6669  unknown_identifi
+0000a400: 6572 7d22 0a20 2020 2020 2020 2020 2020  er}".           
+0000a410: 2029 2c0a 2020 2020 2020 2020 293a 0a20   ),.        ):. 
+0000a420: 2020 2020 2020 2020 2020 2061 7761 6974             await
+0000a430: 2061 7379 6e63 5f77 332e 6574 682e 6765   async_w3.eth.ge
+0000a440: 745f 7261 775f 7472 616e 7361 6374 696f  t_raw_transactio
+0000a450: 6e5f 6279 5f62 6c6f 636b 280a 2020 2020  n_by_block(.    
+0000a460: 2020 2020 2020 2020 2020 2020 756e 6b6e              unkn
+0000a470: 6f77 6e5f 6964 656e 7469 6669 6572 2c20  own_identifier, 
+0000a480: 3020 2023 2074 7970 653a 2069 676e 6f72  0  # type: ignor
+0000a490: 650a 2020 2020 2020 2020 2020 2020 290a  e.            ).
+0000a4a0: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
+0000a4b0: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
+0000a4c0: 796e 6320 6465 6620 7465 7374 5f65 7468  ync def test_eth
+0000a4d0: 5f67 6574 5f62 616c 616e 6365 2873 656c  _get_balance(sel
+0000a4e0: 662c 2061 7379 6e63 5f77 333a 2022 4173  f, async_w3: "As
+0000a4f0: 796e 6357 6562 3322 2920 2d3e 204e 6f6e  yncWeb3") -> Non
+0000a500: 653a 0a20 2020 2020 2020 2063 6f69 6e62  e:.        coinb
+0000a510: 6173 6520 3d20 6177 6169 7420 6173 796e  ase = await asyn
+0000a520: 635f 7733 2e65 7468 2e63 6f69 6e62 6173  c_w3.eth.coinbas
+0000a530: 650a 0a20 2020 2020 2020 2077 6974 6820  e..        with 
+0000a540: 7079 7465 7374 2e72 6169 7365 7328 496e  pytest.raises(In
+0000a550: 7661 6c69 6441 6464 7265 7373 293a 0a20  validAddress):. 
+0000a560: 2020 2020 2020 2020 2020 2061 7761 6974             await
+0000a570: 2061 7379 6e63 5f77 332e 6574 682e 6765   async_w3.eth.ge
+0000a580: 745f 6261 6c61 6e63 6528 0a20 2020 2020  t_balance(.     
+0000a590: 2020 2020 2020 2020 2020 2043 6865 636b             Check
+0000a5a0: 7375 6d41 6464 7265 7373 2848 6578 4164  sumAddress(HexAd
+0000a5b0: 6472 6573 7328 4865 7853 7472 2863 6f69  dress(HexStr(coi
+0000a5c0: 6e62 6173 652e 6c6f 7765 7228 2929 2929  nbase.lower())))
+0000a5d0: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
+0000a5e0: 2020 2020 2020 2020 6261 6c61 6e63 6520          balance 
+0000a5f0: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
+0000a600: 2e65 7468 2e67 6574 5f62 616c 616e 6365  .eth.get_balance
+0000a610: 2863 6f69 6e62 6173 6529 0a0a 2020 2020  (coinbase)..    
+0000a620: 2020 2020 6173 7365 7274 2069 735f 696e      assert is_in
+0000a630: 7465 6765 7228 6261 6c61 6e63 6529 0a20  teger(balance). 
+0000a640: 2020 2020 2020 2061 7373 6572 7420 6261         assert ba
+0000a650: 6c61 6e63 6520 3e3d 2030 0a0a 2020 2020  lance >= 0..    
+0000a660: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
+0000a670: 6e63 696f 0a20 2020 2061 7379 6e63 2064  ncio.    async d
+0000a680: 6566 2074 6573 745f 6574 685f 6765 745f  ef test_eth_get_
+0000a690: 636f 6465 280a 2020 2020 2020 2020 7365  code(.        se
+0000a6a0: 6c66 2c20 6173 796e 635f 7733 3a20 2241  lf, async_w3: "A
+0000a6b0: 7379 6e63 5765 6233 222c 2061 7379 6e63  syncWeb3", async
+0000a6c0: 5f6d 6174 685f 636f 6e74 7261 6374 5f61  _math_contract_a
+0000a6d0: 6464 7265 7373 3a20 4368 6563 6b73 756d  ddress: Checksum
+0000a6e0: 4164 6472 6573 730a 2020 2020 2920 2d3e  Address.    ) ->
+0000a6f0: 204e 6f6e 653a 0a20 2020 2020 2020 2063   None:.        c
+0000a700: 6f64 6520 3d20 6177 6169 7420 6173 796e  ode = await asyn
+0000a710: 635f 7733 2e65 7468 2e67 6574 5f63 6f64  c_w3.eth.get_cod
+0000a720: 6528 6173 796e 635f 6d61 7468 5f63 6f6e  e(async_math_con
+0000a730: 7472 6163 745f 6164 6472 6573 7329 0a20  tract_address). 
+0000a740: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+0000a750: 696e 7374 616e 6365 2863 6f64 652c 2048  instance(code, H
+0000a760: 6578 4279 7465 7329 0a20 2020 2020 2020  exBytes).       
+0000a770: 2061 7373 6572 7420 6c65 6e28 636f 6465   assert len(code
+0000a780: 2920 3e20 300a 0a20 2020 2040 7079 7465  ) > 0..    @pyte
+0000a790: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
+0000a7a0: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
+0000a7b0: 7374 5f65 7468 5f67 6574 5f63 6f64 655f  st_eth_get_code_
+0000a7c0: 696e 7661 6c69 645f 6164 6472 6573 7328  invalid_address(
+0000a7d0: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
+0000a7e0: 2020 2020 2020 2061 7379 6e63 5f77 333a         async_w3:
+0000a7f0: 2022 4173 796e 6357 6562 3322 2c0a 2020   "AsyncWeb3",.  
+0000a800: 2020 2020 2020 6173 796e 635f 6d61 7468        async_math
+0000a810: 5f63 6f6e 7472 6163 743a 2022 436f 6e74  _contract: "Cont
+0000a820: 7261 6374 222c 0a20 2020 2029 202d 3e20  ract",.    ) -> 
+0000a830: 4e6f 6e65 3a0a 2020 2020 2020 2020 7769  None:.        wi
+0000a840: 7468 2070 7974 6573 742e 7261 6973 6573  th pytest.raises
+0000a850: 2849 6e76 616c 6964 4164 6472 6573 7329  (InvalidAddress)
+0000a860: 3a0a 2020 2020 2020 2020 2020 2020 6177  :.            aw
+0000a870: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
+0000a880: 2e67 6574 5f63 6f64 6528 0a20 2020 2020  .get_code(.     
+0000a890: 2020 2020 2020 2020 2020 2043 6865 636b             Check
+0000a8a0: 7375 6d41 6464 7265 7373 2848 6578 4164  sumAddress(HexAd
+0000a8b0: 6472 6573 7328 4865 7853 7472 2861 7379  dress(HexStr(asy
+0000a8c0: 6e63 5f6d 6174 685f 636f 6e74 7261 6374  nc_math_contract
+0000a8d0: 2e61 6464 7265 7373 2e6c 6f77 6572 2829  .address.lower()
+0000a8e0: 2929 290a 2020 2020 2020 2020 2020 2020  ))).            
+0000a8f0: 290a 0a20 2020 2040 7079 7465 7374 2e6d  )..    @pytest.m
+0000a900: 6172 6b2e 6173 796e 6369 6f0a 2020 2020  ark.asyncio.    
+0000a910: 6173 796e 6320 6465 6620 7465 7374 5f65  async def test_e
+0000a920: 7468 5f67 6574 5f63 6f64 655f 7769 7468  th_get_code_with
+0000a930: 5f62 6c6f 636b 5f69 6465 6e74 6966 6965  _block_identifie
+0000a940: 7228 0a20 2020 2020 2020 2073 656c 662c  r(.        self,
+0000a950: 2061 7379 6e63 5f77 333a 2022 4173 796e   async_w3: "Asyn
+0000a960: 6357 6562 3322 2c20 6173 796e 635f 656d  cWeb3", async_em
+0000a970: 6974 7465 725f 636f 6e74 7261 6374 3a20  itter_contract: 
+0000a980: 2243 6f6e 7472 6163 7422 0a20 2020 2029  "Contract".    )
+0000a990: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+0000a9a0: 2020 626c 6f63 6b5f 6964 203d 2061 7761    block_id = awa
+0000a9b0: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
+0000a9c0: 626c 6f63 6b5f 6e75 6d62 6572 0a20 2020  block_number.   
+0000a9d0: 2020 2020 2063 6f64 6520 3d20 6177 6169       code = awai
+0000a9e0: 7420 6173 796e 635f 7733 2e65 7468 2e67  t async_w3.eth.g
+0000a9f0: 6574 5f63 6f64 6528 6173 796e 635f 656d  et_code(async_em
+0000aa00: 6974 7465 725f 636f 6e74 7261 6374 2e61  itter_contract.a
+0000aa10: 6464 7265 7373 2c20 626c 6f63 6b5f 6964  ddress, block_id
+0000aa20: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+0000aa30: 2069 7369 6e73 7461 6e63 6528 636f 6465   isinstance(code
+0000aa40: 2c20 4865 7842 7974 6573 290a 2020 2020  , HexBytes).    
+0000aa50: 2020 2020 6173 7365 7274 206c 656e 2863      assert len(c
+0000aa60: 6f64 6529 203e 2030 0a0a 2020 2020 4070  ode) > 0..    @p
+0000aa70: 7974 6573 742e 6d61 726b 2e61 7379 6e63  ytest.mark.async
+0000aa80: 696f 0a20 2020 2061 7379 6e63 2064 6566  io.    async def
+0000aa90: 2074 6573 745f 6574 685f 6765 745f 7472   test_eth_get_tr
+0000aaa0: 616e 7361 6374 696f 6e5f 636f 756e 7428  ansaction_count(
+0000aab0: 0a20 2020 2020 2020 2073 656c 662c 2061  .        self, a
+0000aac0: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
+0000aad0: 6562 3322 2c20 6173 796e 635f 756e 6c6f  eb3", async_unlo
+0000aae0: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
+0000aaf0: 6c5f 7479 7065 3a20 4368 6563 6b73 756d  l_type: Checksum
+0000ab00: 4164 6472 6573 730a 2020 2020 2920 2d3e  Address.    ) ->
+0000ab10: 204e 6f6e 653a 0a20 2020 2020 2020 2074   None:.        t
+0000ab20: 7261 6e73 6163 7469 6f6e 5f63 6f75 6e74  ransaction_count
+0000ab30: 203d 2061 7761 6974 2061 7379 6e63 5f77   = await async_w
+0000ab40: 332e 6574 682e 6765 745f 7472 616e 7361  3.eth.get_transa
+0000ab50: 6374 696f 6e5f 636f 756e 7428 0a20 2020  ction_count(.   
+0000ab60: 2020 2020 2020 2020 2061 7379 6e63 5f75           async_u
+0000ab70: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
+0000ab80: 6475 616c 5f74 7970 650a 2020 2020 2020  dual_type.      
+0000ab90: 2020 290a 2020 2020 2020 2020 6173 7365    ).        asse
+0000aba0: 7274 2069 735f 696e 7465 6765 7228 7472  rt is_integer(tr
+0000abb0: 616e 7361 6374 696f 6e5f 636f 756e 7429  ansaction_count)
+0000abc0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+0000abd0: 7472 616e 7361 6374 696f 6e5f 636f 756e  transaction_coun
+0000abe0: 7420 3e3d 2030 0a0a 2020 2020 4070 7974  t >= 0..    @pyt
+0000abf0: 6573 742e 6d61 726b 2e61 7379 6e63 696f  est.mark.asyncio
+0000ac00: 0a20 2020 2061 7379 6e63 2064 6566 2074  .    async def t
+0000ac10: 6573 745f 6574 685f 6361 6c6c 280a 2020  est_eth_call(.  
+0000ac20: 2020 2020 2020 7365 6c66 2c20 6173 796e        self, asyn
+0000ac30: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
+0000ac40: 222c 2061 7379 6e63 5f6d 6174 685f 636f  ", async_math_co
+0000ac50: 6e74 7261 6374 3a20 2243 6f6e 7472 6163  ntract: "Contrac
+0000ac60: 7422 0a20 2020 2029 202d 3e20 4e6f 6e65  t".    ) -> None
+0000ac70: 3a0a 2020 2020 2020 2020 636f 696e 6261  :.        coinba
+0000ac80: 7365 203d 2061 7761 6974 2061 7379 6e63  se = await async
+0000ac90: 5f77 332e 6574 682e 636f 696e 6261 7365  _w3.eth.coinbase
+0000aca0: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
+0000acb0: 616d 7320 3d20 6173 796e 635f 6d61 7468  ams = async_math
+0000acc0: 5f63 6f6e 7472 6163 742e 5f70 7265 7061  _contract._prepa
+0000acd0: 7265 5f74 7261 6e73 6163 7469 6f6e 280a  re_transaction(.
+0000ace0: 2020 2020 2020 2020 2020 2020 666e 5f6e              fn_n
+0000acf0: 616d 653d 2261 6464 222c 0a20 2020 2020  ame="add",.     
+0000ad00: 2020 2020 2020 2066 6e5f 6172 6773 3d28         fn_args=(
+0000ad10: 372c 2031 3129 2c0a 2020 2020 2020 2020  7, 11),.        
+0000ad20: 2020 2020 7472 616e 7361 6374 696f 6e3d      transaction=
+0000ad30: 7b22 6672 6f6d 223a 2063 6f69 6e62 6173  {"from": coinbas
+0000ad40: 652c 2022 746f 223a 2061 7379 6e63 5f6d  e, "to": async_m
+0000ad50: 6174 685f 636f 6e74 7261 6374 2e61 6464  ath_contract.add
+0000ad60: 7265 7373 7d2c 0a20 2020 2020 2020 2029  ress},.        )
+0000ad70: 0a20 2020 2020 2020 2063 616c 6c5f 7265  .        call_re
+0000ad80: 7375 6c74 203d 2061 7761 6974 2061 7379  sult = await asy
+0000ad90: 6e63 5f77 332e 6574 682e 6361 6c6c 2874  nc_w3.eth.call(t
+0000ada0: 786e 5f70 6172 616d 7329 0a20 2020 2020  xn_params).     
+0000adb0: 2020 2061 7373 6572 7420 6973 5f73 7472     assert is_str
+0000adc0: 696e 6728 6361 6c6c 5f72 6573 756c 7429  ing(call_result)
+0000add0: 0a20 2020 2020 2020 2028 7265 7375 6c74  .        (result
+0000ade0: 2c29 203d 2061 7379 6e63 5f77 332e 636f  ,) = async_w3.co
+0000adf0: 6465 632e 6465 636f 6465 285b 2275 696e  dec.decode(["uin
+0000ae00: 7432 3536 225d 2c20 6361 6c6c 5f72 6573  t256"], call_res
+0000ae10: 756c 7429 0a20 2020 2020 2020 2061 7373  ult).        ass
+0000ae20: 6572 7420 7265 7375 6c74 203d 3d20 3138  ert result == 18
+0000ae30: 0a0a 2020 2020 4070 7974 6573 742e 6d61  ..    @pytest.ma
+0000ae40: 726b 2e61 7379 6e63 696f 0a20 2020 2061  rk.asyncio.    a
+0000ae50: 7379 6e63 2064 6566 2074 6573 745f 6574  sync def test_et
+0000ae60: 685f 6361 6c6c 5f77 6974 685f 6f76 6572  h_call_with_over
+0000ae70: 7269 6465 5f63 6f64 6528 0a20 2020 2020  ride_code(.     
+0000ae80: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+0000ae90: 2061 7379 6e63 5f77 333a 2022 4173 796e   async_w3: "Asyn
+0000aea0: 6357 6562 3322 2c0a 2020 2020 2020 2020  cWeb3",.        
+0000aeb0: 6173 796e 635f 7265 7665 7274 5f63 6f6e  async_revert_con
+0000aec0: 7472 6163 743a 2022 436f 6e74 7261 6374  tract: "Contract
+0000aed0: 222c 0a20 2020 2029 202d 3e20 4e6f 6e65  ",.    ) -> None
+0000aee0: 3a0a 2020 2020 2020 2020 636f 696e 6261  :.        coinba
+0000aef0: 7365 203d 2061 7761 6974 2061 7379 6e63  se = await async
+0000af00: 5f77 332e 6574 682e 636f 696e 6261 7365  _w3.eth.coinbase
+0000af10: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
+0000af20: 616d 7320 3d20 6173 796e 635f 7265 7665  ams = async_reve
+0000af30: 7274 5f63 6f6e 7472 6163 742e 5f70 7265  rt_contract._pre
+0000af40: 7061 7265 5f74 7261 6e73 6163 7469 6f6e  pare_transaction
+0000af50: 280a 2020 2020 2020 2020 2020 2020 666e  (.            fn
+0000af60: 5f6e 616d 653d 226e 6f72 6d61 6c46 756e  _name="normalFun
+0000af70: 6374 696f 6e22 2c0a 2020 2020 2020 2020  ction",.        
+0000af80: 2020 2020 7472 616e 7361 6374 696f 6e3d      transaction=
+0000af90: 7b22 6672 6f6d 223a 2063 6f69 6e62 6173  {"from": coinbas
+0000afa0: 652c 2022 746f 223a 2061 7379 6e63 5f72  e, "to": async_r
+0000afb0: 6576 6572 745f 636f 6e74 7261 6374 2e61  evert_contract.a
+0000afc0: 6464 7265 7373 7d2c 0a20 2020 2020 2020  ddress},.       
+0000afd0: 2029 0a20 2020 2020 2020 2063 616c 6c5f   ).        call_
+0000afe0: 7265 7375 6c74 203d 2061 7761 6974 2061  result = await a
+0000aff0: 7379 6e63 5f77 332e 6574 682e 6361 6c6c  sync_w3.eth.call
+0000b000: 2874 786e 5f70 6172 616d 7329 0a20 2020  (txn_params).   
+0000b010: 2020 2020 2028 7265 7375 6c74 2c29 203d       (result,) =
+0000b020: 2061 7379 6e63 5f77 332e 636f 6465 632e   async_w3.codec.
+0000b030: 6465 636f 6465 285b 2262 6f6f 6c22 5d2c  decode(["bool"],
+0000b040: 2063 616c 6c5f 7265 7375 6c74 290a 2020   call_result).  
+0000b050: 2020 2020 2020 6173 7365 7274 2072 6573        assert res
+0000b060: 756c 7420 6973 2054 7275 650a 0a20 2020  ult is True..   
+0000b070: 2020 2020 2023 206f 7665 7272 6964 6520       # override 
+0000b080: 7275 6e74 696d 6520 6279 7465 636f 6465  runtime bytecode
+0000b090: 3a20 606e 6f72 6d61 6c46 756e 6374 696f  : `normalFunctio
+0000b0a0: 6e60 2072 6574 7572 6e73 2060 6661 6c73  n` returns `fals
+0000b0b0: 6560 0a20 2020 2020 2020 206f 7665 7272  e`.        overr
+0000b0c0: 6964 655f 636f 6465 203d 2048 6578 5374  ide_code = HexSt
+0000b0d0: 7228 0a20 2020 2020 2020 2020 2020 2022  r(.            "
+0000b0e0: 3078 3630 3830 3630 3430 3532 3334 3830  0x60806040523480
+0000b0f0: 3135 3630 3066 3537 3630 3030 3830 6664  15600f57600080fd
+0000b100: 3562 3530 3630 3034 3336 3130 3630 3363  5b5060043610603c
+0000b110: 3537 3630 3030 3335 3630 6530 3163 3830  5760003560e01c80
+0000b120: 3633 3138 3563 3338 6134 3134 3630 3431  63185c38a4146041
+0000b130: 3537 3830 3633 6330 3661 3937 6362 3134  578063c06a97cb14
+0000b140: 3630 3439 3537 3830 3633 6436 3765 3462  6049578063d67e4b
+0000b150: 3834 3134 3630 3531 3537 3562 3630 3030  84146051575b6000
+0000b160: 3830 6664 3562 3630 3437 3630 3731 3536  80fd5b6047607156
+0000b170: 3562 3030 3562 3630 3466 3630 6466 3536  5b005b604f60df56
+0000b180: 3562 3030 3562 3630 3537 3630 6534 3536  5b005b605760e456
+0000b190: 3562 3630 3430 3531 3830 3832 3135 3135  5b60405180821515
+0000b1a0: 3135 3135 3831 3532 3630 3230 3031 3931  1515815260200191
+0000b1b0: 3530 3530 3630 3430 3531 3830 3931 3033  5050604051809103
+0000b1c0: 3930 6633 3562 3630 3430 3531 3766 3038  90f35b6040517f08
+0000b1d0: 6333 3739 6130 3030 3030 3030 3030 3030  c379a00000000000
+0000b1e0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+0000b1f0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+0000b200: 3030 3030 3030 3030 3030 3030 3030 3831  0000000000000081
+0000b210: 3532 3630 3034 3031 3830 3830 3630 3230  5260040180806020
+0000b220: 3031 3832 3831 3033 3832 3532 3630 3162  018281038252601b
+0000b230: 3831 3532 3630 3230 3031 3830 3766 3436  8152602001807f46
+0000b240: 3735 3665 3633 3734 3639 3666 3665 3230  756e6374696f6e20
+0000b250: 3638 3631 3733 3230 3632 3635 3635 3665  686173206265656e
+0000b260: 3230 3732 3635 3736 3635 3732 3734 3635  2072657665727465
+0000b270: 3634 3265 3030 3030 3030 3030 3030 3831  642e000000000081
+0000b280: 3532 3530 3630 3230 3031 3931 3530 3530  5250602001915050
+0000b290: 3630 3430 3531 3830 3931 3033 3930 6664  60405180910390fd
+0000b2a0: 3562 3630 3030 3830 6664 3562 3630 3030  5b600080fd5b6000
+0000b2b0: 3830 3930 3530 3930 3536 6665 6132 3634  8090509056fea264
+0000b2c0: 3639 3730 3636 3733 3538 3232 3132 3230  6970667358221220
+0000b2d0: 6262 3731 6539 6539 6132 6532 3731 6364  bb71e9e9a2e271cd
+0000b2e0: 3066 6265 3833 3335 3234 6133 6561 3637  0fbe833524a3ea67
+0000b2f0: 6466 3935 6632 3565 6131 3361 6566 3562  df95f25ea13aef5b
+0000b300: 3061 3736 3166 6135 3262 3533 3866 3130  0a761fa52b538f10
+0000b310: 3634 3733 3666 3663 3633 3433 3030 3036  64736f6c63430006
+0000b320: 3031 3030 3333 2220 2023 206e 6f71 613a  010033"  # noqa:
+0000b330: 2045 3530 310a 2020 2020 2020 2020 290a   E501.        ).
+0000b340: 2020 2020 2020 2020 6361 6c6c 5f72 6573          call_res
+0000b350: 756c 7420 3d20 6177 6169 7420 6173 796e  ult = await asyn
+0000b360: 635f 7733 2e65 7468 2e63 616c 6c28 0a20  c_w3.eth.call(. 
+0000b370: 2020 2020 2020 2020 2020 2074 786e 5f70             txn_p
+0000b380: 6172 616d 732c 0a20 2020 2020 2020 2020  arams,.         
+0000b390: 2020 2022 6c61 7465 7374 222c 0a20 2020     "latest",.   
+0000b3a0: 2020 2020 2020 2020 207b 6173 796e 635f           {async_
+0000b3b0: 7265 7665 7274 5f63 6f6e 7472 6163 742e  revert_contract.
+0000b3c0: 6164 6472 6573 733a 207b 2263 6f64 6522  address: {"code"
+0000b3d0: 3a20 6f76 6572 7269 6465 5f63 6f64 657d  : override_code}
+0000b3e0: 7d2c 0a20 2020 2020 2020 2029 0a20 2020  },.        ).   
+0000b3f0: 2020 2020 2028 7265 7375 6c74 2c29 203d       (result,) =
+0000b400: 2061 7379 6e63 5f77 332e 636f 6465 632e   async_w3.codec.
+0000b410: 6465 636f 6465 285b 2262 6f6f 6c22 5d2c  decode(["bool"],
+0000b420: 2063 616c 6c5f 7265 7375 6c74 290a 2020   call_result).  
+0000b430: 2020 2020 2020 6173 7365 7274 2072 6573        assert res
+0000b440: 756c 7420 6973 2046 616c 7365 0a0a 2020  ult is False..  
+0000b450: 2020 2020 2020 2320 7465 7374 2062 7974        # test byt
+0000b460: 6573 0a0a 2020 2020 2020 2020 6279 7465  es..        byte
+0000b470: 735f 6361 6c6c 5f72 6573 756c 7420 3d20  s_call_result = 
+0000b480: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
+0000b490: 7468 2e63 616c 6c28 0a20 2020 2020 2020  th.call(.       
+0000b4a0: 2020 2020 2074 786e 5f70 6172 616d 732c       txn_params,
+0000b4b0: 0a20 2020 2020 2020 2020 2020 2022 6c61  .            "la
+0000b4c0: 7465 7374 222c 0a20 2020 2020 2020 2020  test",.         
+0000b4d0: 2020 207b 6173 796e 635f 7265 7665 7274     {async_revert
+0000b4e0: 5f63 6f6e 7472 6163 742e 6164 6472 6573  _contract.addres
+0000b4f0: 733a 207b 2263 6f64 6522 3a20 746f 5f62  s: {"code": to_b
+0000b500: 7974 6573 2868 6578 7374 723d 6f76 6572  ytes(hexstr=over
+0000b510: 7269 6465 5f63 6f64 6529 7d7d 2c0a 2020  ride_code)}},.  
+0000b520: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0000b530: 2862 7974 6573 5f72 6573 756c 742c 2920  (bytes_result,) 
+0000b540: 3d20 6173 796e 635f 7733 2e63 6f64 6563  = async_w3.codec
+0000b550: 2e64 6563 6f64 6528 5b22 626f 6f6c 225d  .decode(["bool"]
+0000b560: 2c20 6279 7465 735f 6361 6c6c 5f72 6573  , bytes_call_res
+0000b570: 756c 7429 0a20 2020 2020 2020 2061 7373  ult).        ass
+0000b580: 6572 7420 6279 7465 735f 7265 7375 6c74  ert bytes_result
+0000b590: 2069 7320 4661 6c73 650a 0a20 2020 2040   is False..    @
+0000b5a0: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
+0000b5b0: 6369 6f0a 2020 2020 4070 7974 6573 742e  cio.    @pytest.
+0000b5c0: 6d61 726b 2e70 6172 616d 6574 7269 7a65  mark.parametrize
+0000b5d0: 280a 2020 2020 2020 2020 2270 6172 616d  (.        "param
+0000b5e0: 7322 2c0a 2020 2020 2020 2020 280a 2020  s",.        (.  
+0000b5f0: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+0000b600: 2020 2020 2020 2020 2020 2020 226e 6f6e              "non
+0000b610: 6365 223a 2031 2c20 2023 2069 6e74 0a20  ce": 1,  # int. 
+0000b620: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000b630: 6261 6c61 6e63 6522 3a20 312c 2020 2320  balance": 1,  # 
+0000b640: 696e 740a 2020 2020 2020 2020 2020 2020  int.            
+0000b650: 2020 2020 2263 6f64 6522 3a20 4865 7853      "code": HexS
+0000b660: 7472 2822 3078 2229 2c20 2023 2048 6578  tr("0x"),  # Hex
+0000b670: 5374 720a 2020 2020 2020 2020 2020 2020  Str.            
+0000b680: 2020 2020 2320 7769 7468 2073 7461 7465      # with state
+0000b690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b6a0: 2022 7374 6174 6522 3a20 7b48 6578 5374   "state": {HexSt
+0000b6b0: 7228 6622 3078 7b27 3030 2720 2a20 3332  r(f"0x{'00' * 32
+0000b6c0: 7d22 293a 2048 6578 5374 7228 6622 3078  }"): HexStr(f"0x
+0000b6d0: 7b27 3030 2720 2a20 3332 7d22 297d 2c0a  {'00' * 32}")},.
+0000b6e0: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+0000b6f0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+0000b700: 2020 2020 2020 2020 2020 2020 2022 6e6f               "no
+0000b710: 6e63 6522 3a20 4865 7853 7472 2822 3078  nce": HexStr("0x
+0000b720: 3122 292c 2020 2320 4865 7853 7472 0a20  1"),  # HexStr. 
+0000b730: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000b740: 6261 6c61 6e63 6522 3a20 4865 7853 7472  balance": HexStr
+0000b750: 2822 3078 3122 292c 2020 2320 4865 7853  ("0x1"),  # HexS
+0000b760: 7472 0a20 2020 2020 2020 2020 2020 2020  tr.             
+0000b770: 2020 2022 636f 6465 223a 2062 225c 7830     "code": b"\x0
+0000b780: 3022 2c20 2023 2062 7974 6573 0a20 2020  0",  # bytes.   
+0000b790: 2020 2020 2020 2020 2020 2020 2023 2077               # w
+0000b7a0: 6974 6820 7374 6174 6544 6966 660a 2020  ith stateDiff.  
+0000b7b0: 2020 2020 2020 2020 2020 2020 2020 2273                "s
+0000b7c0: 7461 7465 4469 6666 223a 207b 4865 7853  tateDiff": {HexS
+0000b7d0: 7472 2866 2230 787b 2730 3027 202a 2033  tr(f"0x{'00' * 3
+0000b7e0: 327d 2229 3a20 4865 7853 7472 2866 2230  2}"): HexStr(f"0
+0000b7f0: 787b 2730 3027 202a 2033 327d 2229 7d2c  x{'00' * 32}")},
+0000b800: 0a20 2020 2020 2020 2020 2020 207d 2c0a  .            },.
+0000b810: 2020 2020 2020 2020 292c 0a20 2020 2029          ),.    )
+0000b820: 0a20 2020 2061 7379 6e63 2064 6566 2074  .    async def t
+0000b830: 6573 745f 6574 685f 6361 6c6c 5f77 6974  est_eth_call_wit
+0000b840: 685f 6f76 6572 7269 6465 5f70 6172 616d  h_override_param
+0000b850: 5f74 7970 655f 6368 6563 6b28 0a20 2020  _type_check(.   
+0000b860: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+0000b870: 2020 2061 7379 6e63 5f77 333a 2022 4173     async_w3: "As
+0000b880: 796e 6357 6562 3322 2c0a 2020 2020 2020  yncWeb3",.      
+0000b890: 2020 6173 796e 635f 6d61 7468 5f63 6f6e    async_math_con
+0000b8a0: 7472 6163 743a 2022 436f 6e74 7261 6374  tract: "Contract
+0000b8b0: 222c 0a20 2020 2020 2020 2070 6172 616d  ",.        param
+0000b8c0: 733a 2043 616c 6c4f 7665 7272 6964 6550  s: CallOverrideP
+0000b8d0: 6172 616d 732c 0a20 2020 2029 202d 3e20  arams,.    ) -> 
+0000b8e0: 4e6f 6e65 3a0a 2020 2020 2020 2020 636f  None:.        co
+0000b8f0: 696e 6261 7365 203d 2061 7761 6974 2061  inbase = await a
+0000b900: 7379 6e63 5f77 332e 6574 682e 636f 696e  sync_w3.eth.coin
+0000b910: 6261 7365 0a20 2020 2020 2020 2074 786e  base.        txn
+0000b920: 5f70 6172 616d 733a 2054 7850 6172 616d  _params: TxParam
+0000b930: 7320 3d20 7b22 6672 6f6d 223a 2063 6f69  s = {"from": coi
+0000b940: 6e62 6173 657d 0a0a 2020 2020 2020 2020  nbase}..        
+0000b950: 2320 6173 7365 7274 2064 6f65 7320 6e6f  # assert does no
+0000b960: 7420 7261 6973 650a 2020 2020 2020 2020  t raise.        
+0000b970: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
+0000b980: 7468 2e63 616c 6c28 0a20 2020 2020 2020  th.call(.       
+0000b990: 2020 2020 2074 786e 5f70 6172 616d 732c       txn_params,
+0000b9a0: 2022 6c61 7465 7374 222c 207b 6173 796e   "latest", {asyn
+0000b9b0: 635f 6d61 7468 5f63 6f6e 7472 6163 742e  c_math_contract.
+0000b9c0: 6164 6472 6573 733a 2070 6172 616d 737d  address: params}
+0000b9d0: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+0000b9e0: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
+0000b9f0: 6e63 696f 0a20 2020 2061 7379 6e63 2064  ncio.    async d
+0000ba00: 6566 2074 6573 745f 6574 685f 6361 6c6c  ef test_eth_call
+0000ba10: 5f77 6974 685f 305f 7265 7375 6c74 280a  _with_0_result(.
+0000ba20: 2020 2020 2020 2020 7365 6c66 2c20 6173          self, as
+0000ba30: 796e 635f 7733 3a20 2241 7379 6e63 5765  ync_w3: "AsyncWe
+0000ba40: 6233 222c 2061 7379 6e63 5f6d 6174 685f  b3", async_math_
+0000ba50: 636f 6e74 7261 6374 3a20 2243 6f6e 7472  contract: "Contr
+0000ba60: 6163 7422 0a20 2020 2029 202d 3e20 4e6f  act".    ) -> No
+0000ba70: 6e65 3a0a 2020 2020 2020 2020 636f 696e  ne:.        coin
+0000ba80: 6261 7365 203d 2061 7761 6974 2061 7379  base = await asy
+0000ba90: 6e63 5f77 332e 6574 682e 636f 696e 6261  nc_w3.eth.coinba
+0000baa0: 7365 0a20 2020 2020 2020 2074 786e 5f70  se.        txn_p
+0000bab0: 6172 616d 7320 3d20 6173 796e 635f 6d61  arams = async_ma
+0000bac0: 7468 5f63 6f6e 7472 6163 742e 5f70 7265  th_contract._pre
+0000bad0: 7061 7265 5f74 7261 6e73 6163 7469 6f6e  pare_transaction
+0000bae0: 280a 2020 2020 2020 2020 2020 2020 666e  (.            fn
+0000baf0: 5f6e 616d 653d 2261 6464 222c 0a20 2020  _name="add",.   
+0000bb00: 2020 2020 2020 2020 2066 6e5f 6172 6773           fn_args
+0000bb10: 3d28 302c 2030 292c 0a20 2020 2020 2020  =(0, 0),.       
+0000bb20: 2020 2020 2074 7261 6e73 6163 7469 6f6e       transaction
+0000bb30: 3d7b 2266 726f 6d22 3a20 636f 696e 6261  ={"from": coinba
+0000bb40: 7365 2c20 2274 6f22 3a20 6173 796e 635f  se, "to": async_
+0000bb50: 6d61 7468 5f63 6f6e 7472 6163 742e 6164  math_contract.ad
+0000bb60: 6472 6573 737d 2c0a 2020 2020 2020 2020  dress},.        
+0000bb70: 290a 2020 2020 2020 2020 6361 6c6c 5f72  ).        call_r
+0000bb80: 6573 756c 7420 3d20 6177 6169 7420 6173  esult = await as
+0000bb90: 796e 635f 7733 2e65 7468 2e63 616c 6c28  ync_w3.eth.call(
+0000bba0: 7478 6e5f 7061 7261 6d73 290a 2020 2020  txn_params).    
+0000bbb0: 2020 2020 6173 7365 7274 2069 735f 7374      assert is_st
+0000bbc0: 7269 6e67 2863 616c 6c5f 7265 7375 6c74  ring(call_result
+0000bbd0: 290a 2020 2020 2020 2020 2872 6573 756c  ).        (resul
+0000bbe0: 742c 2920 3d20 6173 796e 635f 7733 2e63  t,) = async_w3.c
+0000bbf0: 6f64 6563 2e64 6563 6f64 6528 5b22 7569  odec.decode(["ui
+0000bc00: 6e74 3235 3622 5d2c 2063 616c 6c5f 7265  nt256"], call_re
+0000bc10: 7375 6c74 290a 2020 2020 2020 2020 6173  sult).        as
+0000bc20: 7365 7274 2072 6573 756c 7420 3d3d 2030  sert result == 0
+0000bc30: 0a0a 2020 2020 4070 7974 6573 742e 6d61  ..    @pytest.ma
+0000bc40: 726b 2e61 7379 6e63 696f 0a20 2020 2061  rk.asyncio.    a
+0000bc50: 7379 6e63 2064 6566 2074 6573 745f 6574  sync def test_et
+0000bc60: 685f 6361 6c6c 5f72 6576 6572 745f 7769  h_call_revert_wi
+0000bc70: 7468 5f6d 7367 280a 2020 2020 2020 2020  th_msg(.        
+0000bc80: 7365 6c66 2c0a 2020 2020 2020 2020 6173  self,.        as
+0000bc90: 796e 635f 7733 3a20 2241 7379 6e63 5765  ync_w3: "AsyncWe
+0000bca0: 6233 222c 0a20 2020 2020 2020 2061 7379  b3",.        asy
+0000bcb0: 6e63 5f72 6576 6572 745f 636f 6e74 7261  nc_revert_contra
+0000bcc0: 6374 3a20 2243 6f6e 7472 6163 7422 2c0a  ct: "Contract",.
+0000bcd0: 2020 2020 2020 2020 6173 796e 635f 756e          async_un
+0000bce0: 6c6f 636b 6564 5f61 6363 6f75 6e74 3a20  locked_account: 
+0000bcf0: 4368 6563 6b73 756d 4164 6472 6573 732c  ChecksumAddress,
+0000bd00: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+0000bd10: 2020 2020 2020 2020 7478 6e5f 7061 7261          txn_para
+0000bd20: 6d73 203d 2061 7379 6e63 5f72 6576 6572  ms = async_rever
+0000bd30: 745f 636f 6e74 7261 6374 2e5f 7072 6570  t_contract._prep
+0000bd40: 6172 655f 7472 616e 7361 6374 696f 6e28  are_transaction(
+0000bd50: 0a20 2020 2020 2020 2020 2020 2066 6e5f  .            fn_
+0000bd60: 6e61 6d65 3d22 7265 7665 7274 5769 7468  name="revertWith
+0000bd70: 4d65 7373 6167 6522 2c0a 2020 2020 2020  Message",.      
+0000bd80: 2020 2020 2020 7472 616e 7361 6374 696f        transactio
+0000bd90: 6e3d 7b0a 2020 2020 2020 2020 2020 2020  n={.            
+0000bda0: 2020 2020 2266 726f 6d22 3a20 6173 796e      "from": asyn
+0000bdb0: 635f 756e 6c6f 636b 6564 5f61 6363 6f75  c_unlocked_accou
+0000bdc0: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
+0000bdd0: 2020 2020 2274 6f22 3a20 6173 796e 635f      "to": async_
+0000bde0: 7265 7665 7274 5f63 6f6e 7472 6163 742e  revert_contract.
+0000bdf0: 6164 6472 6573 732c 0a20 2020 2020 2020  address,.       
+0000be00: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+0000be10: 290a 2020 2020 2020 2020 7769 7468 2070  ).        with p
+0000be20: 7974 6573 742e 7261 6973 6573 280a 2020  ytest.raises(.  
+0000be30: 2020 2020 2020 2020 2020 436f 6e74 7261            Contra
+0000be40: 6374 4c6f 6769 6345 7272 6f72 2c20 6d61  ctLogicError, ma
+0000be50: 7463 683d 2265 7865 6375 7469 6f6e 2072  tch="execution r
+0000be60: 6576 6572 7465 643a 2046 756e 6374 696f  everted: Functio
+0000be70: 6e20 6861 7320 6265 656e 2072 6576 6572  n has been rever
+0000be80: 7465 6422 0a20 2020 2020 2020 2029 3a0a  ted".        ):.
+0000be90: 2020 2020 2020 2020 2020 2020 6177 6169              awai
+0000bea0: 7420 6173 796e 635f 7733 2e65 7468 2e63  t async_w3.eth.c
+0000beb0: 616c 6c28 7478 6e5f 7061 7261 6d73 290a  all(txn_params).
+0000bec0: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
+0000bed0: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
+0000bee0: 796e 6320 6465 6620 7465 7374 5f65 7468  ync def test_eth
+0000bef0: 5f63 616c 6c5f 7265 7665 7274 5f77 6974  _call_revert_wit
+0000bf00: 686f 7574 5f6d 7367 280a 2020 2020 2020  hout_msg(.      
+0000bf10: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+0000bf20: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
+0000bf30: 5765 6233 222c 0a20 2020 2020 2020 2061  Web3",.        a
+0000bf40: 7379 6e63 5f72 6576 6572 745f 636f 6e74  sync_revert_cont
+0000bf50: 7261 6374 3a20 2243 6f6e 7472 6163 7422  ract: "Contract"
+0000bf60: 2c0a 2020 2020 2020 2020 6173 796e 635f  ,.        async_
+0000bf70: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+0000bf80: 3a20 4368 6563 6b73 756d 4164 6472 6573  : ChecksumAddres
+0000bf90: 732c 0a20 2020 2029 202d 3e20 4e6f 6e65  s,.    ) -> None
+0000bfa0: 3a0a 2020 2020 2020 2020 7769 7468 2070  :.        with p
+0000bfb0: 7974 6573 742e 7261 6973 6573 2843 6f6e  ytest.raises(Con
+0000bfc0: 7472 6163 744c 6f67 6963 4572 726f 722c  tractLogicError,
+0000bfd0: 206d 6174 6368 3d22 6578 6563 7574 696f   match="executio
+0000bfe0: 6e20 7265 7665 7274 6564 2229 3a0a 2020  n reverted"):.  
+0000bff0: 2020 2020 2020 2020 2020 7478 6e5f 7061            txn_pa
+0000c000: 7261 6d73 203d 2061 7379 6e63 5f72 6576  rams = async_rev
+0000c010: 6572 745f 636f 6e74 7261 6374 2e5f 7072  ert_contract._pr
+0000c020: 6570 6172 655f 7472 616e 7361 6374 696f  epare_transactio
+0000c030: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+0000c040: 2020 2066 6e5f 6e61 6d65 3d22 7265 7665     fn_name="reve
+0000c050: 7274 5769 7468 6f75 744d 6573 7361 6765  rtWithoutMessage
+0000c060: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+0000c070: 2020 2074 7261 6e73 6163 7469 6f6e 3d7b     transaction={
+0000c080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c090: 2020 2020 2022 6672 6f6d 223a 2061 7379       "from": asy
+0000c0a0: 6e63 5f75 6e6c 6f63 6b65 645f 6163 636f  nc_unlocked_acco
+0000c0b0: 756e 742c 0a20 2020 2020 2020 2020 2020  unt,.           
+0000c0c0: 2020 2020 2020 2020 2022 746f 223a 2061           "to": a
+0000c0d0: 7379 6e63 5f72 6576 6572 745f 636f 6e74  sync_revert_cont
+0000c0e0: 7261 6374 2e61 6464 7265 7373 2c0a 2020  ract.address,.  
+0000c0f0: 2020 2020 2020 2020 2020 2020 2020 7d2c                },
+0000c100: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+0000c110: 2020 2020 2020 2020 2020 2061 7761 6974             await
+0000c120: 2061 7379 6e63 5f77 332e 6574 682e 6361   async_w3.eth.ca
+0000c130: 6c6c 2874 786e 5f70 6172 616d 7329 0a0a  ll(txn_params)..
+0000c140: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
+0000c150: 2e61 7379 6e63 696f 0a20 2020 2061 7379  .asyncio.    asy
+0000c160: 6e63 2064 6566 2074 6573 745f 6574 685f  nc def test_eth_
+0000c170: 6361 6c6c 5f72 6576 6572 745f 6375 7374  call_revert_cust
+0000c180: 6f6d 5f65 7272 6f72 5f77 6974 685f 6d73  om_error_with_ms
+0000c190: 6728 0a20 2020 2020 2020 2073 656c 662c  g(.        self,
+0000c1a0: 0a20 2020 2020 2020 2061 7379 6e63 5f77  .        async_w
+0000c1b0: 333a 2022 4173 796e 6357 6562 3322 2c0a  3: "AsyncWeb3",.
+0000c1c0: 2020 2020 2020 2020 6173 796e 635f 7265          async_re
+0000c1d0: 7665 7274 5f63 6f6e 7472 6163 743a 2022  vert_contract: "
+0000c1e0: 436f 6e74 7261 6374 222c 0a20 2020 2020  Contract",.     
+0000c1f0: 2020 2061 7379 6e63 5f75 6e6c 6f63 6b65     async_unlocke
+0000c200: 645f 6163 636f 756e 743a 2043 6865 636b  d_account: Check
+0000c210: 7375 6d41 6464 7265 7373 2c0a 2020 2020  sumAddress,.    
+0000c220: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+0000c230: 2020 2064 6174 6120 3d20 6173 796e 635f     data = async_
+0000c240: 7265 7665 7274 5f63 6f6e 7472 6163 742e  revert_contract.
+0000c250: 656e 636f 6465 4142 4928 0a20 2020 2020  encodeABI(.     
+0000c260: 2020 2020 2020 2066 6e5f 6e61 6d65 3d22         fn_name="
+0000c270: 556e 6175 7468 6f72 697a 6564 5769 7468  UnauthorizedWith
+0000c280: 4d65 7373 6167 6522 2c20 6172 6773 3d5b  Message", args=[
+0000c290: 2259 6f75 2061 7265 206e 6f74 2061 7574  "You are not aut
+0000c2a0: 686f 7269 7a65 6422 5d0a 2020 2020 2020  horized"].      
+0000c2b0: 2020 290a 2020 2020 2020 2020 7478 6e5f    ).        txn_
+0000c2c0: 7061 7261 6d73 203d 2061 7379 6e63 5f72  params = async_r
+0000c2d0: 6576 6572 745f 636f 6e74 7261 6374 2e5f  evert_contract._
+0000c2e0: 7072 6570 6172 655f 7472 616e 7361 6374  prepare_transact
+0000c2f0: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
+0000c300: 2066 6e5f 6e61 6d65 3d22 6375 7374 6f6d   fn_name="custom
+0000c310: 4572 726f 7257 6974 684d 6573 7361 6765  ErrorWithMessage
+0000c320: 222c 0a20 2020 2020 2020 2020 2020 2074  ",.            t
+0000c330: 7261 6e73 6163 7469 6f6e 3d7b 0a20 2020  ransaction={.   
+0000c340: 2020 2020 2020 2020 2020 2020 2022 6672               "fr
+0000c350: 6f6d 223a 2061 7379 6e63 5f75 6e6c 6f63  om": async_unloc
+0000c360: 6b65 645f 6163 636f 756e 742c 0a20 2020  ked_account,.   
+0000c370: 2020 2020 2020 2020 2020 2020 2022 746f               "to
+0000c380: 223a 2061 7379 6e63 5f72 6576 6572 745f  ": async_revert_
+0000c390: 636f 6e74 7261 6374 2e61 6464 7265 7373  contract.address
+0000c3a0: 2c0a 2020 2020 2020 2020 2020 2020 7d2c  ,.            },
+0000c3b0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+0000c3c0: 2020 2077 6974 6820 7079 7465 7374 2e72     with pytest.r
+0000c3d0: 6169 7365 7328 436f 6e74 7261 6374 4375  aises(ContractCu
+0000c3e0: 7374 6f6d 4572 726f 722c 206d 6174 6368  stomError, match
+0000c3f0: 3d64 6174 6129 3a0a 2020 2020 2020 2020  =data):.        
+0000c400: 2020 2020 6177 6169 7420 6173 796e 635f      await async_
+0000c410: 7733 2e65 7468 2e63 616c 6c28 7478 6e5f  w3.eth.call(txn_
+0000c420: 7061 7261 6d73 290a 0a20 2020 2040 7079  params)..    @py
+0000c430: 7465 7374 2e6d 6172 6b2e 6173 796e 6369  test.mark.asynci
+0000c440: 6f0a 2020 2020 6173 796e 6320 6465 6620  o.    async def 
+0000c450: 7465 7374 5f65 7468 5f63 616c 6c5f 7265  test_eth_call_re
+0000c460: 7665 7274 5f63 7573 746f 6d5f 6572 726f  vert_custom_erro
+0000c470: 725f 7769 7468 6f75 745f 6d73 6728 0a20  r_without_msg(. 
+0000c480: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+0000c490: 2020 2020 2061 7379 6e63 5f77 333a 2022       async_w3: "
+0000c4a0: 4173 796e 6357 6562 3322 2c0a 2020 2020  AsyncWeb3",.    
+0000c4b0: 2020 2020 6173 796e 635f 7265 7665 7274      async_revert
+0000c4c0: 5f63 6f6e 7472 6163 743a 2022 436f 6e74  _contract: "Cont
+0000c4d0: 7261 6374 222c 0a20 2020 2020 2020 2061  ract",.        a
+0000c4e0: 7379 6e63 5f75 6e6c 6f63 6b65 645f 6163  sync_unlocked_ac
+0000c4f0: 636f 756e 743a 2043 6865 636b 7375 6d41  count: ChecksumA
+0000c500: 6464 7265 7373 2c0a 2020 2020 2920 2d3e  ddress,.    ) ->
+0000c510: 204e 6f6e 653a 0a20 2020 2020 2020 2064   None:.        d
+0000c520: 6174 6120 3d20 6173 796e 635f 7265 7665  ata = async_reve
+0000c530: 7274 5f63 6f6e 7472 6163 742e 656e 636f  rt_contract.enco
+0000c540: 6465 4142 4928 666e 5f6e 616d 653d 2255  deABI(fn_name="U
+0000c550: 6e61 7574 686f 7269 7a65 6422 290a 2020  nauthorized").  
+0000c560: 2020 2020 2020 7478 6e5f 7061 7261 6d73        txn_params
+0000c570: 203d 2061 7379 6e63 5f72 6576 6572 745f   = async_revert_
+0000c580: 636f 6e74 7261 6374 2e5f 7072 6570 6172  contract._prepar
+0000c590: 655f 7472 616e 7361 6374 696f 6e28 0a20  e_transaction(. 
+0000c5a0: 2020 2020 2020 2020 2020 2066 6e5f 6e61             fn_na
+0000c5b0: 6d65 3d22 6375 7374 6f6d 4572 726f 7257  me="customErrorW
+0000c5c0: 6974 686f 7574 4d65 7373 6167 6522 2c0a  ithoutMessage",.
+0000c5d0: 2020 2020 2020 2020 2020 2020 7472 616e              tran
+0000c5e0: 7361 6374 696f 6e3d 7b0a 2020 2020 2020  saction={.      
+0000c5f0: 2020 2020 2020 2020 2020 2266 726f 6d22            "from"
+0000c600: 3a20 6173 796e 635f 756e 6c6f 636b 6564  : async_unlocked
+0000c610: 5f61 6363 6f75 6e74 2c0a 2020 2020 2020  _account,.      
+0000c620: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
+0000c630: 6173 796e 635f 7265 7665 7274 5f63 6f6e  async_revert_con
+0000c640: 7472 6163 742e 6164 6472 6573 732c 0a20  tract.address,. 
+0000c650: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
+0000c660: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0000c670: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
+0000c680: 6573 2843 6f6e 7472 6163 7443 7573 746f  es(ContractCusto
+0000c690: 6d45 7272 6f72 2c20 6d61 7463 683d 6461  mError, match=da
+0000c6a0: 7461 293a 0a20 2020 2020 2020 2020 2020  ta):.           
+0000c6b0: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
+0000c6c0: 6574 682e 6361 6c6c 2874 786e 5f70 6172  eth.call(txn_par
+0000c6d0: 616d 7329 0a0a 2020 2020 4070 7974 6573  ams)..    @pytes
+0000c6e0: 742e 6d61 726b 2e70 6172 616d 6574 7269  t.mark.parametri
+0000c6f0: 7a65 280a 2020 2020 2020 2020 2270 616e  ze(.        "pan
+0000c700: 6963 5f65 7272 6f72 2c70 6172 616d 7322  ic_error,params"
+0000c710: 2c0a 2020 2020 2020 2020 280a 2020 2020  ,.        (.    
+0000c720: 2020 2020 2020 2020 2822 3031 222c 205b          ("01", [
+0000c730: 5d29 2c0a 2020 2020 2020 2020 2020 2020  ]),.            
+0000c740: 2822 3131 222c 205b 5d29 2c0a 2020 2020  ("11", []),.    
+0000c750: 2020 2020 2020 2020 2822 3132 222c 205b          ("12", [
+0000c760: 305d 292c 0a20 2020 2020 2020 2020 2020  0]),.           
+0000c770: 2028 2232 3122 2c20 5b2d 315d 292c 0a20   ("21", [-1]),. 
+0000c780: 2020 2020 2020 2020 2020 2028 2232 3222             ("22"
+0000c790: 2c20 5b5d 292c 0a20 2020 2020 2020 2020  , []),.         
+0000c7a0: 2020 2028 2233 3122 2c20 5b5d 292c 0a20     ("31", []),. 
+0000c7b0: 2020 2020 2020 2020 2020 2028 2233 3222             ("32"
+0000c7c0: 2c20 5b5d 292c 0a20 2020 2020 2020 2020  , []),.         
+0000c7d0: 2020 2028 2234 3122 2c20 5b5d 292c 0a20     ("41", []),. 
+0000c7e0: 2020 2020 2020 2020 2020 2028 2235 3122             ("51"
+0000c7f0: 2c20 5b5d 292c 0a20 2020 2020 2020 2029  , []),.        )
+0000c800: 2c0a 2020 2020 290a 2020 2020 4070 7974  ,.    ).    @pyt
+0000c810: 6573 742e 6d61 726b 2e61 7379 6e63 696f  est.mark.asyncio
+0000c820: 0a20 2020 2061 7379 6e63 2064 6566 2074  .    async def t
+0000c830: 6573 745f 636f 6e74 7261 6374 5f70 616e  est_contract_pan
+0000c840: 6963 5f65 7272 6f72 7328 0a20 2020 2020  ic_errors(.     
+0000c850: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+0000c860: 2061 7379 6e63 5f77 333a 2022 4173 796e   async_w3: "Asyn
+0000c870: 6357 6562 3322 2c0a 2020 2020 2020 2020  cWeb3",.        
+0000c880: 6173 796e 635f 7061 6e69 635f 6572 726f  async_panic_erro
+0000c890: 7273 5f63 6f6e 7472 6163 743a 2022 436f  rs_contract: "Co
+0000c8a0: 6e74 7261 6374 222c 0a20 2020 2020 2020  ntract",.       
+0000c8b0: 2070 616e 6963 5f65 7272 6f72 3a20 7374   panic_error: st
+0000c8c0: 722c 0a20 2020 2020 2020 2070 6172 616d  r,.        param
+0000c8d0: 733a 204c 6973 745b 416e 795d 2c0a 2020  s: List[Any],.  
+0000c8e0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+0000c8f0: 2020 2020 206d 6574 686f 6420 3d20 6765       method = ge
+0000c900: 7461 7474 7228 0a20 2020 2020 2020 2020  tattr(.         
+0000c910: 2020 2061 7379 6e63 5f70 616e 6963 5f65     async_panic_e
+0000c920: 7272 6f72 735f 636f 6e74 7261 6374 2e66  rrors_contract.f
+0000c930: 756e 6374 696f 6e73 2c0a 2020 2020 2020  unctions,.      
+0000c940: 2020 2020 2020 6622 6572 726f 7243 6f64        f"errorCod
+0000c950: 657b 7061 6e69 635f 6572 726f 727d 222c  e{panic_error}",
+0000c960: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+0000c970: 2020 2065 7272 6f72 5f6d 7367 203d 2050     error_msg = P
+0000c980: 414e 4943 5f45 5252 4f52 5f43 4f44 4553  ANIC_ERROR_CODES
+0000c990: 5b70 616e 6963 5f65 7272 6f72 5d0a 0a20  [panic_error].. 
+0000c9a0: 2020 2020 2020 2077 6974 6820 7079 7465         with pyte
+0000c9b0: 7374 2e72 6169 7365 7328 436f 6e74 7261  st.raises(Contra
+0000c9c0: 6374 5061 6e69 6345 7272 6f72 2c20 6d61  ctPanicError, ma
+0000c9d0: 7463 683d 7265 2e65 7363 6170 6528 6572  tch=re.escape(er
+0000c9e0: 726f 725f 6d73 6729 293a 0a20 2020 2020  ror_msg)):.     
+0000c9f0: 2020 2020 2020 2061 7761 6974 206d 6574         await met
+0000ca00: 686f 6428 2a70 6172 616d 7329 2e63 616c  hod(*params).cal
+0000ca10: 6c28 290a 0a20 2020 2040 7079 7465 7374  l()..    @pytest
+0000ca20: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
+0000ca30: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
+0000ca40: 5f65 7468 5f63 616c 6c5f 6f66 6663 6861  _eth_call_offcha
+0000ca50: 696e 5f6c 6f6f 6b75 7028 0a20 2020 2020  in_lookup(.     
+0000ca60: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+0000ca70: 2061 7379 6e63 5f77 333a 2022 4173 796e   async_w3: "Asyn
+0000ca80: 6357 6562 3322 2c0a 2020 2020 2020 2020  cWeb3",.        
+0000ca90: 6173 796e 635f 6f66 6663 6861 696e 5f6c  async_offchain_l
+0000caa0: 6f6f 6b75 705f 636f 6e74 7261 6374 3a20  ookup_contract: 
+0000cab0: 2243 6f6e 7472 6163 7422 2c0a 2020 2020  "Contract",.    
+0000cac0: 2020 2020 6173 796e 635f 756e 6c6f 636b      async_unlock
+0000cad0: 6564 5f61 6363 6f75 6e74 3a20 4368 6563  ed_account: Chec
+0000cae0: 6b73 756d 4164 6472 6573 732c 0a20 2020  ksumAddress,.   
+0000caf0: 2020 2020 206d 6f6e 6b65 7970 6174 6368       monkeypatch
+0000cb00: 3a20 224d 6f6e 6b65 7950 6174 6368 222c  : "MonkeyPatch",
+0000cb10: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+0000cb20: 2020 2020 2020 2020 6e6f 726d 616c 697a          normaliz
+0000cb30: 6564 5f63 6f6e 7472 6163 745f 6164 6472  ed_contract_addr
+0000cb40: 6573 7320 3d20 746f 5f68 6578 5f69 665f  ess = to_hex_if_
+0000cb50: 6279 7465 7328 0a20 2020 2020 2020 2020  bytes(.         
+0000cb60: 2020 2061 7379 6e63 5f6f 6666 6368 6169     async_offchai
+0000cb70: 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472 6163  n_lookup_contrac
+0000cb80: 742e 6164 6472 6573 730a 2020 2020 2020  t.address.      
+0000cb90: 2020 292e 6c6f 7765 7228 290a 0a20 2020    ).lower()..   
+0000cba0: 2020 2020 2061 7379 6e63 5f6d 6f63 6b5f       async_mock_
+0000cbb0: 6f66 6663 6861 696e 5f6c 6f6f 6b75 705f  offchain_lookup_
+0000cbc0: 7265 7175 6573 745f 7265 7370 6f6e 7365  request_response
+0000cbd0: 280a 2020 2020 2020 2020 2020 2020 6d6f  (.            mo
+0000cbe0: 6e6b 6579 7061 7463 682c 0a20 2020 2020  nkeypatch,.     
+0000cbf0: 2020 2020 2020 206d 6f63 6b65 645f 7265         mocked_re
+0000cc00: 7175 6573 745f 7572 6c3d 6622 6874 7470  quest_url=f"http
+0000cc10: 733a 2f2f 7765 6233 2e70 792f 6761 7465  s://web3.py/gate
+0000cc20: 7761 792f 7b6e 6f72 6d61 6c69 7a65 645f  way/{normalized_
+0000cc30: 636f 6e74 7261 6374 5f61 6464 7265 7373  contract_address
+0000cc40: 7d2f 7b4f 4646 4348 4149 4e5f 4c4f 4f4b  }/{OFFCHAIN_LOOK
+0000cc50: 5550 5f54 4553 545f 4441 5441 7d2e 6a73  UP_TEST_DATA}.js
+0000cc60: 6f6e 222c 2020 2320 6e6f 7161 3a20 4535  on",  # noqa: E5
+0000cc70: 3031 0a20 2020 2020 2020 2020 2020 206d  01.            m
+0000cc80: 6f63 6b65 645f 6a73 6f6e 5f64 6174 613d  ocked_json_data=
+0000cc90: 5745 4233 5059 5f41 535f 4845 5842 5954  WEB3PY_AS_HEXBYT
+0000cca0: 4553 2c0a 2020 2020 2020 2020 290a 2020  ES,.        ).  
+0000ccb0: 2020 2020 2020 7265 7370 6f6e 7365 5f63        response_c
+0000ccc0: 616c 6c65 7220 3d20 6177 6169 7420 6173  aller = await as
+0000ccd0: 796e 635f 6f66 6663 6861 696e 5f6c 6f6f  ync_offchain_loo
+0000cce0: 6b75 705f 636f 6e74 7261 6374 2e63 616c  kup_contract.cal
+0000ccf0: 6c65 7228 292e 7465 7374 4f66 6663 6861  ler().testOffcha
+0000cd00: 696e 4c6f 6f6b 7570 2820 2023 206e 6f71  inLookup(  # noq
+0000cd10: 613a 2045 3530 3120 7479 7065 3a20 6967  a: E501 type: ig
+0000cd20: 6e6f 7265 0a20 2020 2020 2020 2020 2020  nore.           
+0000cd30: 204f 4646 4348 4149 4e5f 4c4f 4f4b 5550   OFFCHAIN_LOOKUP
+0000cd40: 5f54 4553 545f 4441 5441 0a20 2020 2020  _TEST_DATA.     
+0000cd50: 2020 2029 0a20 2020 2020 2020 2072 6573     ).        res
+0000cd60: 706f 6e73 655f 6675 6e63 7469 6f6e 5f63  ponse_function_c
+0000cd70: 616c 6c20 3d20 6177 6169 7420 6173 796e  all = await asyn
+0000cd80: 635f 6f66 6663 6861 696e 5f6c 6f6f 6b75  c_offchain_looku
+0000cd90: 705f 636f 6e74 7261 6374 2e66 756e 6374  p_contract.funct
+0000cda0: 696f 6e73 2e74 6573 744f 6666 6368 6169  ions.testOffchai
+0000cdb0: 6e4c 6f6f 6b75 7028 2020 2320 6e6f 7161  nLookup(  # noqa
+0000cdc0: 3a20 4535 3031 2074 7970 653a 2069 676e  : E501 type: ign
+0000cdd0: 6f72 650a 2020 2020 2020 2020 2020 2020  ore.            
+0000cde0: 4f46 4643 4841 494e 5f4c 4f4f 4b55 505f  OFFCHAIN_LOOKUP_
+0000cdf0: 5445 5354 5f44 4154 410a 2020 2020 2020  TEST_DATA.      
+0000ce00: 2020 292e 6361 6c6c 2829 0a20 2020 2020    ).call().     
+0000ce10: 2020 2061 7373 6572 7420 6173 796e 635f     assert async_
+0000ce20: 7733 2e63 6f64 6563 2e64 6563 6f64 6528  w3.codec.decode(
+0000ce30: 5b22 7374 7269 6e67 225d 2c20 7265 7370  ["string"], resp
+0000ce40: 6f6e 7365 5f63 616c 6c65 7229 5b30 5d20  onse_caller)[0] 
+0000ce50: 3d3d 2022 7765 6233 7079 220a 2020 2020  == "web3py".    
+0000ce60: 2020 2020 6173 7365 7274 2061 7379 6e63      assert async
+0000ce70: 5f77 332e 636f 6465 632e 6465 636f 6465  _w3.codec.decode
+0000ce80: 285b 2273 7472 696e 6722 5d2c 2072 6573  (["string"], res
+0000ce90: 706f 6e73 655f 6675 6e63 7469 6f6e 5f63  ponse_function_c
+0000cea0: 616c 6c29 5b30 5d20 3d3d 2022 7765 6233  all)[0] == "web3
+0000ceb0: 7079 220a 0a20 2020 2040 7079 7465 7374  py"..    @pytest
+0000cec0: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
+0000ced0: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
+0000cee0: 5f65 7468 5f63 616c 6c5f 6f66 6663 6861  _eth_call_offcha
+0000cef0: 696e 5f6c 6f6f 6b75 705f 7261 6973 6573  in_lookup_raises
+0000cf00: 5f77 6865 6e5f 6363 6970 5f72 6561 645f  _when_ccip_read_
+0000cf10: 6973 5f64 6973 6162 6c65 6428 0a20 2020  is_disabled(.   
+0000cf20: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+0000cf30: 2020 2061 7379 6e63 5f77 333a 2022 4173     async_w3: "As
+0000cf40: 796e 6357 6562 3322 2c0a 2020 2020 2020  yncWeb3",.      
+0000cf50: 2020 6173 796e 635f 6f66 6663 6861 696e    async_offchain
+0000cf60: 5f6c 6f6f 6b75 705f 636f 6e74 7261 6374  _lookup_contract
+0000cf70: 3a20 2243 6f6e 7472 6163 7422 2c0a 2020  : "Contract",.  
+0000cf80: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+0000cf90: 2020 2020 2072 6574 7572 6e5f 6461 7461       return_data
+0000cfa0: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+0000cfb0: 204f 4646 4348 4149 4e5f 4c4f 4f4b 5550   OFFCHAIN_LOOKUP
+0000cfc0: 5f34 4259 5445 5f44 4154 410a 2020 2020  _4BYTE_DATA.    
+0000cfd0: 2020 2020 2020 2020 2b20 6162 695f 656e          + abi_en
+0000cfe0: 636f 6465 645f 6f66 6663 6861 696e 5f6c  coded_offchain_l
+0000cff0: 6f6f 6b75 705f 636f 6e74 7261 6374 5f61  ookup_contract_a
+0000d000: 6464 7265 7373 280a 2020 2020 2020 2020  ddress(.        
+0000d010: 2020 2020 2020 2020 6173 796e 635f 7733          async_w3
+0000d020: 2c20 6173 796e 635f 6f66 6663 6861 696e  , async_offchain
+0000d030: 5f6c 6f6f 6b75 705f 636f 6e74 7261 6374  _lookup_contract
+0000d040: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+0000d050: 2020 2020 2020 2020 2020 202b 204f 4646             + OFF
+0000d060: 4348 4149 4e5f 4c4f 4f4b 5550 5f52 4554  CHAIN_LOOKUP_RET
+0000d070: 5552 4e5f 4441 5441 0a20 2020 2020 2020  URN_DATA.       
+0000d080: 2029 0a20 2020 2020 2020 2023 2074 6573   ).        # tes
+0000d090: 7420 4173 796e 6343 6f6e 7472 6163 7443  t AsyncContractC
+0000d0a0: 616c 6c65 720a 2020 2020 2020 2020 7769  aller.        wi
+0000d0b0: 7468 2070 7974 6573 742e 7261 6973 6573  th pytest.raises
+0000d0c0: 284f 6666 6368 6169 6e4c 6f6f 6b75 7029  (OffchainLookup)
+0000d0d0: 2061 7320 653a 0a20 2020 2020 2020 2020   as e:.         
+0000d0e0: 2020 2061 7761 6974 2061 7379 6e63 5f6f     await async_o
+0000d0f0: 6666 6368 6169 6e5f 6c6f 6f6b 7570 5f63  ffchain_lookup_c
+0000d100: 6f6e 7472 6163 742e 6361 6c6c 6572 280a  ontract.caller(.
+0000d110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d120: 6363 6970 5f72 6561 645f 656e 6162 6c65  ccip_read_enable
+0000d130: 643d 4661 6c73 650a 2020 2020 2020 2020  d=False.        
+0000d140: 2020 2020 292e 7465 7374 4f66 6663 6861      ).testOffcha
+0000d150: 696e 4c6f 6f6b 7570 284f 4646 4348 4149  inLookup(OFFCHAI
+0000d160: 4e5f 4c4f 4f4b 5550 5f54 4553 545f 4441  N_LOOKUP_TEST_DA
+0000d170: 5441 290a 2020 2020 2020 2020 6173 7365  TA).        asse
+0000d180: 7274 2065 2e76 616c 7565 2e64 6174 6120  rt e.value.data 
+0000d190: 3d3d 2072 6574 7572 6e5f 6461 7461 0a0a  == return_data..
+0000d1a0: 2020 2020 2020 2020 2320 7465 7374 2041          # test A
+0000d1b0: 7379 6e63 436f 6e74 7261 6374 4675 6e63  syncContractFunc
+0000d1c0: 7469 6f6e 2063 616c 6c0a 2020 2020 2020  tion call.      
+0000d1d0: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
+0000d1e0: 6973 6573 284f 6666 6368 6169 6e4c 6f6f  ises(OffchainLoo
+0000d1f0: 6b75 7029 2061 7320 6578 6369 6e66 6f3a  kup) as excinfo:
+0000d200: 0a20 2020 2020 2020 2020 2020 2061 7761  .            awa
+0000d210: 6974 2061 7379 6e63 5f6f 6666 6368 6169  it async_offchai
+0000d220: 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472 6163  n_lookup_contrac
+0000d230: 742e 6675 6e63 7469 6f6e 732e 7465 7374  t.functions.test
+0000d240: 4f66 6663 6861 696e 4c6f 6f6b 7570 280a  OffchainLookup(.
+0000d250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d260: 4f46 4643 4841 494e 5f4c 4f4f 4b55 505f  OFFCHAIN_LOOKUP_
+0000d270: 5445 5354 5f44 4154 410a 2020 2020 2020  TEST_DATA.      
+0000d280: 2020 2020 2020 292e 6361 6c6c 2863 6369        ).call(cci
+0000d290: 705f 7265 6164 5f65 6e61 626c 6564 3d46  p_read_enabled=F
+0000d2a0: 616c 7365 290a 2020 2020 2020 2020 6173  alse).        as
+0000d2b0: 7365 7274 2065 7863 696e 666f 2e76 616c  sert excinfo.val
+0000d2c0: 7565 2e64 6174 6120 3d3d 2072 6574 7572  ue.data == retur
+0000d2d0: 6e5f 6461 7461 0a0a 2020 2020 2020 2020  n_data..        
+0000d2e0: 2320 7465 7374 2067 6c6f 6261 6c20 666c  # test global fl
+0000d2f0: 6167 206f 6e20 7468 6520 7072 6f76 6964  ag on the provid
+0000d300: 6572 0a20 2020 2020 2020 2061 7379 6e63  er.        async
+0000d310: 5f77 332e 7072 6f76 6964 6572 2e67 6c6f  _w3.provider.glo
+0000d320: 6261 6c5f 6363 6970 5f72 6561 645f 656e  bal_ccip_read_en
+0000d330: 6162 6c65 6420 3d20 4661 6c73 650a 0a20  abled = False.. 
+0000d340: 2020 2020 2020 2077 6974 6820 7079 7465         with pyte
+0000d350: 7374 2e72 6169 7365 7328 4f66 6663 6861  st.raises(Offcha
+0000d360: 696e 4c6f 6f6b 7570 2920 6173 2065 7863  inLookup) as exc
+0000d370: 5f69 6e66 6f3a 0a20 2020 2020 2020 2020  _info:.         
+0000d380: 2020 2061 7761 6974 2061 7379 6e63 5f6f     await async_o
+0000d390: 6666 6368 6169 6e5f 6c6f 6f6b 7570 5f63  ffchain_lookup_c
+0000d3a0: 6f6e 7472 6163 742e 6675 6e63 7469 6f6e  ontract.function
+0000d3b0: 732e 7465 7374 4f66 6663 6861 696e 4c6f  s.testOffchainLo
+0000d3c0: 6f6b 7570 2820 2023 206e 6f71 613a 2045  okup(  # noqa: E
+0000d3d0: 3530 3120 7479 7065 3a20 6967 6e6f 7265  501 type: ignore
+0000d3e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d3f0: 204f 4646 4348 4149 4e5f 4c4f 4f4b 5550   OFFCHAIN_LOOKUP
+0000d400: 5f54 4553 545f 4441 5441 0a20 2020 2020  _TEST_DATA.     
+0000d410: 2020 2020 2020 2029 2e63 616c 6c28 290a         ).call().
+0000d420: 2020 2020 2020 2020 6173 7365 7274 2065          assert e
+0000d430: 7863 5f69 6e66 6f2e 7661 6c75 652e 6461  xc_info.value.da
+0000d440: 7461 203d 3d20 7265 7475 726e 5f64 6174  ta == return_dat
+0000d450: 610a 0a20 2020 2020 2020 2061 7379 6e63  a..        async
+0000d460: 5f77 332e 7072 6f76 6964 6572 2e67 6c6f  _w3.provider.glo
+0000d470: 6261 6c5f 6363 6970 5f72 6561 645f 656e  bal_ccip_read_en
+0000d480: 6162 6c65 6420 3d20 5472 7565 2020 2320  abled = True  # 
+0000d490: 636c 6561 6e75 700a 0a20 2020 2040 7079  cleanup..    @py
+0000d4a0: 7465 7374 2e6d 6172 6b2e 6173 796e 6369  test.mark.asynci
+0000d4b0: 6f0a 2020 2020 6173 796e 6320 6465 6620  o.    async def 
+0000d4c0: 7465 7374 5f65 7468 5f63 616c 6c5f 6f66  test_eth_call_of
+0000d4d0: 6663 6861 696e 5f6c 6f6f 6b75 705f 6361  fchain_lookup_ca
+0000d4e0: 6c6c 5f66 6c61 675f 6f76 6572 7269 6465  ll_flag_override
+0000d4f0: 735f 7072 6f76 6964 6572 5f66 6c61 6728  s_provider_flag(
+0000d500: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
+0000d510: 2020 2020 2020 2061 7379 6e63 5f77 333a         async_w3:
+0000d520: 2022 4173 796e 6357 6562 3322 2c0a 2020   "AsyncWeb3",.  
+0000d530: 2020 2020 2020 6173 796e 635f 6f66 6663        async_offc
+0000d540: 6861 696e 5f6c 6f6f 6b75 705f 636f 6e74  hain_lookup_cont
+0000d550: 7261 6374 3a20 2243 6f6e 7472 6163 7422  ract: "Contract"
+0000d560: 2c0a 2020 2020 2020 2020 6173 796e 635f  ,.        async_
+0000d570: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+0000d580: 3a20 4368 6563 6b73 756d 4164 6472 6573  : ChecksumAddres
+0000d590: 732c 0a20 2020 2020 2020 206d 6f6e 6b65  s,.        monke
+0000d5a0: 7970 6174 6368 3a20 224d 6f6e 6b65 7950  ypatch: "MonkeyP
+0000d5b0: 6174 6368 222c 0a20 2020 2029 202d 3e20  atch",.    ) -> 
+0000d5c0: 4e6f 6e65 3a0a 2020 2020 2020 2020 6e6f  None:.        no
+0000d5d0: 726d 616c 697a 6564 5f63 6f6e 7472 6163  rmalized_contrac
+0000d5e0: 745f 6164 6472 6573 7320 3d20 746f 5f68  t_address = to_h
+0000d5f0: 6578 5f69 665f 6279 7465 7328 0a20 2020  ex_if_bytes(.   
+0000d600: 2020 2020 2020 2020 2061 7379 6e63 5f6f           async_o
+0000d610: 6666 6368 6169 6e5f 6c6f 6f6b 7570 5f63  ffchain_lookup_c
+0000d620: 6f6e 7472 6163 742e 6164 6472 6573 730a  ontract.address.
+0000d630: 2020 2020 2020 2020 292e 6c6f 7765 7228          ).lower(
+0000d640: 290a 0a20 2020 2020 2020 2061 7379 6e63  )..        async
+0000d650: 5f6d 6f63 6b5f 6f66 6663 6861 696e 5f6c  _mock_offchain_l
+0000d660: 6f6f 6b75 705f 7265 7175 6573 745f 7265  ookup_request_re
+0000d670: 7370 6f6e 7365 280a 2020 2020 2020 2020  sponse(.        
+0000d680: 2020 2020 6d6f 6e6b 6579 7061 7463 682c      monkeypatch,
+0000d690: 0a20 2020 2020 2020 2020 2020 206d 6f63  .            moc
+0000d6a0: 6b65 645f 7265 7175 6573 745f 7572 6c3d  ked_request_url=
+0000d6b0: 6622 6874 7470 733a 2f2f 7765 6233 2e70  f"https://web3.p
+0000d6c0: 792f 6761 7465 7761 792f 7b6e 6f72 6d61  y/gateway/{norma
+0000d6d0: 6c69 7a65 645f 636f 6e74 7261 6374 5f61  lized_contract_a
+0000d6e0: 6464 7265 7373 7d2f 7b4f 4646 4348 4149  ddress}/{OFFCHAI
+0000d6f0: 4e5f 4c4f 4f4b 5550 5f54 4553 545f 4441  N_LOOKUP_TEST_DA
+0000d700: 5441 7d2e 6a73 6f6e 222c 2020 2320 6e6f  TA}.json",  # no
+0000d710: 7161 3a20 4535 3031 0a20 2020 2020 2020  qa: E501.       
+0000d720: 2020 2020 206d 6f63 6b65 645f 6a73 6f6e       mocked_json
+0000d730: 5f64 6174 613d 5745 4233 5059 5f41 535f  _data=WEB3PY_AS_
+0000d740: 4845 5842 5954 4553 2c0a 2020 2020 2020  HEXBYTES,.      
+0000d750: 2020 290a 0a20 2020 2020 2020 2061 7379    )..        asy
+0000d760: 6e63 5f77 332e 7072 6f76 6964 6572 2e67  nc_w3.provider.g
+0000d770: 6c6f 6261 6c5f 6363 6970 5f72 6561 645f  lobal_ccip_read_
+0000d780: 656e 6162 6c65 6420 3d20 4661 6c73 650a  enabled = False.
+0000d790: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
+0000d7a0: 6520 3d20 6177 6169 7420 6173 796e 635f  e = await async_
+0000d7b0: 6f66 6663 6861 696e 5f6c 6f6f 6b75 705f  offchain_lookup_
+0000d7c0: 636f 6e74 7261 6374 2e66 756e 6374 696f  contract.functio
+0000d7d0: 6e73 2e74 6573 744f 6666 6368 6169 6e4c  ns.testOffchainL
+0000d7e0: 6f6f 6b75 7028 0a20 2020 2020 2020 2020  ookup(.         
+0000d7f0: 2020 204f 4646 4348 4149 4e5f 4c4f 4f4b     OFFCHAIN_LOOK
+0000d800: 5550 5f54 4553 545f 4441 5441 0a20 2020  UP_TEST_DATA.   
+0000d810: 2020 2020 2029 2e63 616c 6c28 6363 6970       ).call(ccip
+0000d820: 5f72 6561 645f 656e 6162 6c65 643d 5472  _read_enabled=Tr
+0000d830: 7565 290a 2020 2020 2020 2020 6173 7365  ue).        asse
+0000d840: 7274 2061 7379 6e63 5f77 332e 636f 6465  rt async_w3.code
+0000d850: 632e 6465 636f 6465 285b 2273 7472 696e  c.decode(["strin
+0000d860: 6722 5d2c 2072 6573 706f 6e73 6529 5b30  g"], response)[0
+0000d870: 5d20 3d3d 2022 7765 6233 7079 220a 0a20  ] == "web3py".. 
+0000d880: 2020 2020 2020 2061 7379 6e63 5f77 332e         async_w3.
+0000d890: 7072 6f76 6964 6572 2e67 6c6f 6261 6c5f  provider.global_
+0000d8a0: 6363 6970 5f72 6561 645f 656e 6162 6c65  ccip_read_enable
+0000d8b0: 6420 3d20 5472 7565 2020 2320 636c 6561  d = True  # clea
+0000d8c0: 6e75 700a 0a20 2020 2040 7079 7465 7374  nup..    @pytest
+0000d8d0: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
+0000d8e0: 2020 4070 7974 6573 742e 6d61 726b 2e70    @pytest.mark.p
+0000d8f0: 6172 616d 6574 7269 7a65 2822 6d61 785f  arametrize("max_
+0000d900: 7265 6469 7265 6374 7322 2c20 7261 6e67  redirects", rang
+0000d910: 6528 2d31 2c20 3429 290a 2020 2020 6173  e(-1, 4)).    as
+0000d920: 796e 6320 6465 6620 7465 7374 5f65 7468  ync def test_eth
+0000d930: 5f63 616c 6c5f 6f66 6663 6861 696e 5f6c  _call_offchain_l
+0000d940: 6f6f 6b75 705f 7261 6973 6573 5f69 665f  ookup_raises_if_
+0000d950: 6d61 785f 7265 6469 7265 6374 735f 6973  max_redirects_is
+0000d960: 5f6c 6573 735f 7468 616e 5f34 280a 2020  _less_than_4(.  
+0000d970: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+0000d980: 2020 2020 6173 796e 635f 7733 3a20 2241      async_w3: "A
+0000d990: 7379 6e63 5765 6233 222c 0a20 2020 2020  syncWeb3",.     
+0000d9a0: 2020 2061 7379 6e63 5f6f 6666 6368 6169     async_offchai
+0000d9b0: 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472 6163  n_lookup_contrac
+0000d9c0: 743a 2022 436f 6e74 7261 6374 222c 0a20  t: "Contract",. 
+0000d9d0: 2020 2020 2020 206d 6178 5f72 6564 6972         max_redir
+0000d9e0: 6563 7473 3a20 696e 742c 0a20 2020 2029  ects: int,.    )
+0000d9f0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+0000da00: 2020 6465 6661 756c 745f 6d61 785f 7265    default_max_re
+0000da10: 6469 7265 6374 7320 3d20 6173 796e 635f  directs = async_
+0000da20: 7733 2e70 726f 7669 6465 722e 6363 6970  w3.provider.ccip
+0000da30: 5f72 6561 645f 6d61 785f 7265 6469 7265  _read_max_redire
+0000da40: 6374 730a 0a20 2020 2020 2020 2061 7379  cts..        asy
+0000da50: 6e63 5f77 332e 7072 6f76 6964 6572 2e63  nc_w3.provider.c
+0000da60: 6369 705f 7265 6164 5f6d 6178 5f72 6564  cip_read_max_red
+0000da70: 6972 6563 7473 203d 206d 6178 5f72 6564  irects = max_red
+0000da80: 6972 6563 7473 0a20 2020 2020 2020 2077  irects.        w
+0000da90: 6974 6820 7079 7465 7374 2e72 6169 7365  ith pytest.raise
+0000daa0: 7328 5661 6c75 6545 7272 6f72 2c20 6d61  s(ValueError, ma
+0000dab0: 7463 683d 2261 7420 6c65 6173 7420 3422  tch="at least 4"
+0000dac0: 293a 0a20 2020 2020 2020 2020 2020 2061  ):.            a
+0000dad0: 7761 6974 2061 7379 6e63 5f6f 6666 6368  wait async_offch
+0000dae0: 6169 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472  ain_lookup_contr
+0000daf0: 6163 742e 6361 6c6c 6572 2829 2e74 6573  act.caller().tes
+0000db00: 744f 6666 6368 6169 6e4c 6f6f 6b75 7028  tOffchainLookup(
+0000db10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000db20: 204f 4646 4348 4149 4e5f 4c4f 4f4b 5550   OFFCHAIN_LOOKUP
+0000db30: 5f54 4553 545f 4441 5441 0a20 2020 2020  _TEST_DATA.     
+0000db40: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+0000db50: 2020 6173 796e 635f 7733 2e70 726f 7669    async_w3.provi
+0000db60: 6465 722e 6363 6970 5f72 6561 645f 6d61  der.ccip_read_ma
+0000db70: 785f 7265 6469 7265 6374 7320 3d20 6465  x_redirects = de
+0000db80: 6661 756c 745f 6d61 785f 7265 6469 7265  fault_max_redire
+0000db90: 6374 7320 2023 2063 6c65 616e 7570 0a0a  cts  # cleanup..
+0000dba0: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
+0000dbb0: 2e61 7379 6e63 696f 0a20 2020 2061 7379  .asyncio.    asy
+0000dbc0: 6e63 2064 6566 2074 6573 745f 6574 685f  nc def test_eth_
+0000dbd0: 6361 6c6c 5f6f 6666 6368 6169 6e5f 6c6f  call_offchain_lo
+0000dbe0: 6f6b 7570 5f72 6169 7365 735f 666f 725f  okup_raises_for_
+0000dbf0: 696d 7072 6f70 6572 6c79 5f66 6f72 6d61  improperly_forma
+0000dc00: 7474 6564 5f72 6573 745f 7265 7175 6573  tted_rest_reques
+0000dc10: 745f 7265 7370 6f6e 7365 2820 2023 206e  t_response(  # n
+0000dc20: 6f71 613a 2045 3530 310a 2020 2020 2020  oqa: E501.      
+0000dc30: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+0000dc40: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
+0000dc50: 5765 6233 222c 0a20 2020 2020 2020 2061  Web3",.        a
+0000dc60: 7379 6e63 5f6f 6666 6368 6169 6e5f 6c6f  sync_offchain_lo
+0000dc70: 6f6b 7570 5f63 6f6e 7472 6163 743a 2022  okup_contract: "
+0000dc80: 436f 6e74 7261 6374 222c 0a20 2020 2020  Contract",.     
+0000dc90: 2020 2061 7379 6e63 5f75 6e6c 6f63 6b65     async_unlocke
+0000dca0: 645f 6163 636f 756e 743a 2043 6865 636b  d_account: Check
+0000dcb0: 7375 6d41 6464 7265 7373 2c0a 2020 2020  sumAddress,.    
+0000dcc0: 2020 2020 6d6f 6e6b 6579 7061 7463 683a      monkeypatch:
+0000dcd0: 2022 4d6f 6e6b 6579 5061 7463 6822 2c0a   "MonkeyPatch",.
+0000dce0: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+0000dcf0: 2020 2020 2020 206e 6f72 6d61 6c69 7a65         normalize
+0000dd00: 645f 636f 6e74 7261 6374 5f61 6464 7265  d_contract_addre
+0000dd10: 7373 203d 2074 6f5f 6865 785f 6966 5f62  ss = to_hex_if_b
+0000dd20: 7974 6573 280a 2020 2020 2020 2020 2020  ytes(.          
+0000dd30: 2020 6173 796e 635f 6f66 6663 6861 696e    async_offchain
+0000dd40: 5f6c 6f6f 6b75 705f 636f 6e74 7261 6374  _lookup_contract
+0000dd50: 2e61 6464 7265 7373 0a20 2020 2020 2020  .address.       
+0000dd60: 2029 2e6c 6f77 6572 2829 0a0a 2020 2020   ).lower()..    
+0000dd70: 2020 2020 6173 796e 635f 6d6f 636b 5f6f      async_mock_o
+0000dd80: 6666 6368 6169 6e5f 6c6f 6f6b 7570 5f72  ffchain_lookup_r
+0000dd90: 6571 7565 7374 5f72 6573 706f 6e73 6528  equest_response(
+0000dda0: 0a20 2020 2020 2020 2020 2020 206d 6f6e  .            mon
+0000ddb0: 6b65 7970 6174 6368 2c0a 2020 2020 2020  keypatch,.      
+0000ddc0: 2020 2020 2020 6d6f 636b 6564 5f72 6571        mocked_req
+0000ddd0: 7565 7374 5f75 726c 3d66 2268 7474 7073  uest_url=f"https
+0000dde0: 3a2f 2f77 6562 332e 7079 2f67 6174 6577  ://web3.py/gatew
+0000ddf0: 6179 2f7b 6e6f 726d 616c 697a 6564 5f63  ay/{normalized_c
+0000de00: 6f6e 7472 6163 745f 6164 6472 6573 737d  ontract_address}
+0000de10: 2f7b 4f46 4643 4841 494e 5f4c 4f4f 4b55  /{OFFCHAIN_LOOKU
+0000de20: 505f 5445 5354 5f44 4154 417d 2e6a 736f  P_TEST_DATA}.jso
+0000de30: 6e22 2c20 2023 206e 6f71 613a 2045 3530  n",  # noqa: E50
+0000de40: 310a 2020 2020 2020 2020 2020 2020 6d6f  1.            mo
+0000de50: 636b 6564 5f6a 736f 6e5f 6461 7461 3d57  cked_json_data=W
+0000de60: 4542 3350 595f 4153 5f48 4558 4259 5445  EB3PY_AS_HEXBYTE
+0000de70: 532c 0a20 2020 2020 2020 2020 2020 206a  S,.            j
+0000de80: 736f 6e5f 6461 7461 5f66 6965 6c64 3d22  son_data_field="
+0000de90: 6e6f 745f 6461 7461 222c 0a20 2020 2020  not_data",.     
+0000dea0: 2020 2029 0a20 2020 2020 2020 2077 6974     ).        wit
+0000deb0: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
+0000dec0: 5765 6233 5661 6c69 6461 7469 6f6e 4572  Web3ValidationEr
+0000ded0: 726f 722c 206d 6174 6368 3d22 6d69 7373  ror, match="miss
+0000dee0: 696e 6720 2764 6174 6127 2066 6965 6c64  ing 'data' field
+0000def0: 2229 3a0a 2020 2020 2020 2020 2020 2020  "):.            
+0000df00: 6177 6169 7420 6173 796e 635f 6f66 6663  await async_offc
+0000df10: 6861 696e 5f6c 6f6f 6b75 705f 636f 6e74  hain_lookup_cont
+0000df20: 7261 6374 2e63 616c 6c65 7228 292e 7465  ract.caller().te
+0000df30: 7374 4f66 6663 6861 696e 4c6f 6f6b 7570  stOffchainLookup
+0000df40: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0000df50: 2020 4f46 4643 4841 494e 5f4c 4f4f 4b55    OFFCHAIN_LOOKU
+0000df60: 505f 5445 5354 5f44 4154 410a 2020 2020  P_TEST_DATA.    
+0000df70: 2020 2020 2020 2020 290a 0a20 2020 2040          )..    @
+0000df80: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
+0000df90: 6369 6f0a 2020 2020 4070 7974 6573 742e  cio.    @pytest.
+0000dfa0: 6d61 726b 2e70 6172 616d 6574 7269 7a65  mark.parametrize
+0000dfb0: 2822 7374 6174 7573 5f63 6f64 655f 6e6f  ("status_code_no
+0000dfc0: 6e5f 3478 785f 6572 726f 7222 2c20 5b31  n_4xx_error", [1
+0000dfd0: 3030 2c20 3330 302c 2035 3030 2c20 3630  00, 300, 500, 60
+0000dfe0: 305d 290a 2020 2020 6173 796e 6320 6465  0]).    async de
+0000dff0: 6620 7465 7374 5f65 7468 5f63 616c 6c5f  f test_eth_call_
+0000e000: 6f66 6663 6861 696e 5f6c 6f6f 6b75 705f  offchain_lookup_
+0000e010: 7472 6965 735f 6e65 7874 5f75 726c 5f66  tries_next_url_f
+0000e020: 6f72 5f6e 6f6e 5f34 7878 5f65 7272 6f72  or_non_4xx_error
+0000e030: 5f73 7461 7475 735f 616e 645f 7465 7374  _status_and_test
+0000e040: 735f 504f 5354 2820 2023 206e 6f71 613a  s_POST(  # noqa:
+0000e050: 2045 3530 310a 2020 2020 2020 2020 7365   E501.        se
+0000e060: 6c66 2c0a 2020 2020 2020 2020 6173 796e  lf,.        asyn
+0000e070: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
+0000e080: 222c 0a20 2020 2020 2020 2061 7379 6e63  ",.        async
+0000e090: 5f6f 6666 6368 6169 6e5f 6c6f 6f6b 7570  _offchain_lookup
+0000e0a0: 5f63 6f6e 7472 6163 743a 2022 436f 6e74  _contract: "Cont
+0000e0b0: 7261 6374 222c 0a20 2020 2020 2020 2061  ract",.        a
+0000e0c0: 7379 6e63 5f75 6e6c 6f63 6b65 645f 6163  sync_unlocked_ac
+0000e0d0: 636f 756e 743a 2043 6865 636b 7375 6d41  count: ChecksumA
+0000e0e0: 6464 7265 7373 2c0a 2020 2020 2020 2020  ddress,.        
+0000e0f0: 6d6f 6e6b 6579 7061 7463 683a 2022 4d6f  monkeypatch: "Mo
+0000e100: 6e6b 6579 5061 7463 6822 2c0a 2020 2020  nkeyPatch",.    
+0000e110: 2020 2020 7374 6174 7573 5f63 6f64 655f      status_code_
+0000e120: 6e6f 6e5f 3478 785f 6572 726f 723a 2069  non_4xx_error: i
+0000e130: 6e74 2c0a 2020 2020 2920 2d3e 204e 6f6e  nt,.    ) -> Non
+0000e140: 653a 0a20 2020 2020 2020 206e 6f72 6d61  e:.        norma
+0000e150: 6c69 7a65 645f 636f 6e74 7261 6374 5f61  lized_contract_a
+0000e160: 6464 7265 7373 203d 2074 6f5f 6865 785f  ddress = to_hex_
+0000e170: 6966 5f62 7974 6573 280a 2020 2020 2020  if_bytes(.      
+0000e180: 2020 2020 2020 6173 796e 635f 6f66 6663        async_offc
+0000e190: 6861 696e 5f6c 6f6f 6b75 705f 636f 6e74  hain_lookup_cont
+0000e1a0: 7261 6374 2e61 6464 7265 7373 0a20 2020  ract.address.   
+0000e1b0: 2020 2020 2029 2e6c 6f77 6572 2829 0a0a       ).lower()..
+0000e1c0: 2020 2020 2020 2020 2320 5468 6520 6e65          # The ne
+0000e1d0: 7874 2075 726c 2069 6e20 6f75 7220 7465  xt url in our te
+0000e1e0: 7374 2063 6f6e 7472 6163 7420 646f 6573  st contract does
+0000e1f0: 6e27 7420 636f 6e74 6169 6e20 277b 6461  n't contain '{da
+0000e200: 7461 7d27 2c20 7472 6967 6765 7269 6e67  ta}', triggering
+0000e210: 0a20 2020 2020 2020 2023 2074 6865 2050  .        # the P
+0000e220: 4f53 5420 7265 7175 6573 7420 6c6f 6769  OST request logi
+0000e230: 632e 2054 6865 2069 6465 6120 6865 7265  c. The idea here
+0000e240: 2069 7320 746f 2072 6574 7572 6e20 6120   is to return a 
+0000e250: 6261 6420 7374 6174 7573 2066 6f72 2074  bad status for t
+0000e260: 6865 0a20 2020 2020 2020 2023 2066 6972  he.        # fir
+0000e270: 7374 2075 726c 2028 4745 5429 2061 6e64  st url (GET) and
+0000e280: 2061 2073 7563 6365 7373 2073 7461 7475   a success statu
+0000e290: 7320 666f 7220 7468 6520 7365 636f 6e64  s for the second
+0000e2a0: 2063 616c 6c20 2850 4f53 5429 2074 6f20   call (POST) to 
+0000e2b0: 7465 7374 0a20 2020 2020 2020 2023 2062  test.        # b
+0000e2c0: 6f74 6820 7468 6174 2077 6520 6d6f 7665  oth that we move
+0000e2d0: 206f 6e20 746f 2074 6865 206e 6578 7420   on to the next 
+0000e2e0: 7572 6c20 7769 7468 206e 6f6e 2d34 7878  url with non-4xx
+0000e2f0: 2073 7461 7475 7320 616e 6420 7468 6174   status and that
+0000e300: 2074 6865 0a20 2020 2020 2020 2023 2050   the.        # P
+0000e310: 4f53 5420 6c6f 6769 6320 6973 2061 6c73  OST logic is als
+0000e320: 6f20 776f 726b 696e 6720 6173 2065 7870  o working as exp
+0000e330: 6563 7465 642e 0a20 2020 2020 2020 2061  ected..        a
+0000e340: 7379 6e63 5f6d 6f63 6b5f 6f66 6663 6861  sync_mock_offcha
+0000e350: 696e 5f6c 6f6f 6b75 705f 7265 7175 6573  in_lookup_reques
+0000e360: 745f 7265 7370 6f6e 7365 280a 2020 2020  t_response(.    
+0000e370: 2020 2020 2020 2020 6d6f 6e6b 6579 7061          monkeypa
+0000e380: 7463 682c 0a20 2020 2020 2020 2020 2020  tch,.           
+0000e390: 206d 6f63 6b65 645f 7265 7175 6573 745f   mocked_request_
+0000e3a0: 7572 6c3d 6622 6874 7470 733a 2f2f 7765  url=f"https://we
+0000e3b0: 6233 2e70 792f 6761 7465 7761 792f 7b6e  b3.py/gateway/{n
+0000e3c0: 6f72 6d61 6c69 7a65 645f 636f 6e74 7261  ormalized_contra
+0000e3d0: 6374 5f61 6464 7265 7373 7d2f 7b4f 4646  ct_address}/{OFF
+0000e3e0: 4348 4149 4e5f 4c4f 4f4b 5550 5f54 4553  CHAIN_LOOKUP_TES
+0000e3f0: 545f 4441 5441 7d2e 6a73 6f6e 222c 2020  T_DATA}.json",  
+0000e400: 2320 6e6f 7161 3a20 4535 3031 0a20 2020  # noqa: E501.   
+0000e410: 2020 2020 2020 2020 206d 6f63 6b65 645f           mocked_
+0000e420: 7374 6174 7573 5f63 6f64 653d 7374 6174  status_code=stat
+0000e430: 7573 5f63 6f64 655f 6e6f 6e5f 3478 785f  us_code_non_4xx_
+0000e440: 6572 726f 722c 0a20 2020 2020 2020 2020  error,.         
+0000e450: 2020 206d 6f63 6b65 645f 6a73 6f6e 5f64     mocked_json_d
+0000e460: 6174 613d 5745 4233 5059 5f41 535f 4845  ata=WEB3PY_AS_HE
+0000e470: 5842 5954 4553 2c0a 2020 2020 2020 2020  XBYTES,.        
+0000e480: 290a 2020 2020 2020 2020 6173 796e 635f  ).        async_
+0000e490: 6d6f 636b 5f6f 6666 6368 6169 6e5f 6c6f  mock_offchain_lo
+0000e4a0: 6f6b 7570 5f72 6571 7565 7374 5f72 6573  okup_request_res
+0000e4b0: 706f 6e73 6528 0a20 2020 2020 2020 2020  ponse(.         
+0000e4c0: 2020 206d 6f6e 6b65 7970 6174 6368 2c0a     monkeypatch,.
+0000e4d0: 2020 2020 2020 2020 2020 2020 6874 7470              http
+0000e4e0: 5f6d 6574 686f 643d 2250 4f53 5422 2c0a  _method="POST",.
+0000e4f0: 2020 2020 2020 2020 2020 2020 6d6f 636b              mock
+0000e500: 6564 5f72 6571 7565 7374 5f75 726c 3d66  ed_request_url=f
+0000e510: 2268 7474 7073 3a2f 2f77 6562 332e 7079  "https://web3.py
+0000e520: 2f67 6174 6577 6179 2f7b 6e6f 726d 616c  /gateway/{normal
+0000e530: 697a 6564 5f63 6f6e 7472 6163 745f 6164  ized_contract_ad
+0000e540: 6472 6573 737d 2e6a 736f 6e22 2c20 2023  dress}.json",  #
+0000e550: 206e 6f71 613a 2045 3530 310a 2020 2020   noqa: E501.    
+0000e560: 2020 2020 2020 2020 6d6f 636b 6564 5f73          mocked_s
+0000e570: 7461 7475 735f 636f 6465 3d32 3030 2c0a  tatus_code=200,.
+0000e580: 2020 2020 2020 2020 2020 2020 6d6f 636b              mock
+0000e590: 6564 5f6a 736f 6e5f 6461 7461 3d57 4542  ed_json_data=WEB
+0000e5a0: 3350 595f 4153 5f48 4558 4259 5445 532c  3PY_AS_HEXBYTES,
+0000e5b0: 0a20 2020 2020 2020 2020 2020 2073 656e  .            sen
+0000e5c0: 6465 723d 6e6f 726d 616c 697a 6564 5f63  der=normalized_c
+0000e5d0: 6f6e 7472 6163 745f 6164 6472 6573 732c  ontract_address,
+0000e5e0: 0a20 2020 2020 2020 2020 2020 2063 616c  .            cal
+0000e5f0: 6c64 6174 613d 4f46 4643 4841 494e 5f4c  ldata=OFFCHAIN_L
+0000e600: 4f4f 4b55 505f 5445 5354 5f44 4154 412c  OOKUP_TEST_DATA,
+0000e610: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+0000e620: 2020 2072 6573 706f 6e73 6520 3d20 6177     response = aw
+0000e630: 6169 7420 6173 796e 635f 6f66 6663 6861  ait async_offcha
+0000e640: 696e 5f6c 6f6f 6b75 705f 636f 6e74 7261  in_lookup_contra
+0000e650: 6374 2e63 616c 6c65 7228 292e 7465 7374  ct.caller().test
+0000e660: 4f66 6663 6861 696e 4c6f 6f6b 7570 280a  OffchainLookup(.
+0000e670: 2020 2020 2020 2020 2020 2020 4f46 4643              OFFC
+0000e680: 4841 494e 5f4c 4f4f 4b55 505f 5445 5354  HAIN_LOOKUP_TEST
+0000e690: 5f44 4154 410a 2020 2020 2020 2020 290a  _DATA.        ).
+0000e6a0: 2020 2020 2020 2020 6173 7365 7274 2061          assert a
+0000e6b0: 7379 6e63 5f77 332e 636f 6465 632e 6465  sync_w3.codec.de
+0000e6c0: 636f 6465 285b 2273 7472 696e 6722 5d2c  code(["string"],
+0000e6d0: 2072 6573 706f 6e73 6529 5b30 5d20 3d3d   response)[0] ==
+0000e6e0: 2022 7765 6233 7079 220a 0a20 2020 2040   "web3py"..    @
+0000e6f0: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
+0000e700: 6369 6f0a 2020 2020 6173 796e 6320 6465  cio.    async de
+0000e710: 6620 7465 7374 5f65 7468 5f63 616c 6c5f  f test_eth_call_
+0000e720: 6f66 6663 6861 696e 5f6c 6f6f 6b75 705f  offchain_lookup_
+0000e730: 6361 6c6c 735f 7261 6973 655f 666f 725f  calls_raise_for_
+0000e740: 7374 6174 7573 5f66 6f72 5f34 7878 5f73  status_for_4xx_s
+0000e750: 7461 7475 735f 636f 6465 280a 2020 2020  tatus_code(.    
+0000e760: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+0000e770: 2020 6173 796e 635f 7733 3a20 2241 7379    async_w3: "Asy
+0000e780: 6e63 5765 6233 222c 0a20 2020 2020 2020  ncWeb3",.       
+0000e790: 2061 7379 6e63 5f6f 6666 6368 6169 6e5f   async_offchain_
+0000e7a0: 6c6f 6f6b 7570 5f63 6f6e 7472 6163 743a  lookup_contract:
+0000e7b0: 2022 436f 6e74 7261 6374 222c 0a20 2020   "Contract",.   
+0000e7c0: 2020 2020 2061 7379 6e63 5f75 6e6c 6f63       async_unloc
+0000e7d0: 6b65 645f 6163 636f 756e 743a 2043 6865  ked_account: Che
+0000e7e0: 636b 7375 6d41 6464 7265 7373 2c0a 2020  cksumAddress,.  
+0000e7f0: 2020 2020 2020 6d6f 6e6b 6579 7061 7463        monkeypatc
+0000e800: 683a 2022 4d6f 6e6b 6579 5061 7463 6822  h: "MonkeyPatch"
+0000e810: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
+0000e820: 0a20 2020 2020 2020 206e 6f72 6d61 6c69  .        normali
+0000e830: 7a65 645f 636f 6e74 7261 6374 5f61 6464  zed_contract_add
+0000e840: 7265 7373 203d 2074 6f5f 6865 785f 6966  ress = to_hex_if
+0000e850: 5f62 7974 6573 280a 2020 2020 2020 2020  _bytes(.        
+0000e860: 2020 2020 6173 796e 635f 6f66 6663 6861      async_offcha
+0000e870: 696e 5f6c 6f6f 6b75 705f 636f 6e74 7261  in_lookup_contra
+0000e880: 6374 2e61 6464 7265 7373 0a20 2020 2020  ct.address.     
+0000e890: 2020 2029 2e6c 6f77 6572 2829 0a0a 2020     ).lower()..  
+0000e8a0: 2020 2020 2020 6173 796e 635f 6d6f 636b        async_mock
+0000e8b0: 5f6f 6666 6368 6169 6e5f 6c6f 6f6b 7570  _offchain_lookup
+0000e8c0: 5f72 6571 7565 7374 5f72 6573 706f 6e73  _request_respons
+0000e8d0: 6528 0a20 2020 2020 2020 2020 2020 206d  e(.            m
+0000e8e0: 6f6e 6b65 7970 6174 6368 2c0a 2020 2020  onkeypatch,.    
+0000e8f0: 2020 2020 2020 2020 6d6f 636b 6564 5f72          mocked_r
+0000e900: 6571 7565 7374 5f75 726c 3d66 2268 7474  equest_url=f"htt
+0000e910: 7073 3a2f 2f77 6562 332e 7079 2f67 6174  ps://web3.py/gat
+0000e920: 6577 6179 2f7b 6e6f 726d 616c 697a 6564  eway/{normalized
+0000e930: 5f63 6f6e 7472 6163 745f 6164 6472 6573  _contract_addres
+0000e940: 737d 2f7b 4f46 4643 4841 494e 5f4c 4f4f  s}/{OFFCHAIN_LOO
+0000e950: 4b55 505f 5445 5354 5f44 4154 417d 2e6a  KUP_TEST_DATA}.j
+0000e960: 736f 6e22 2c20 2023 206e 6f71 613a 2045  son",  # noqa: E
+0000e970: 3530 310a 2020 2020 2020 2020 2020 2020  501.            
+0000e980: 6d6f 636b 6564 5f73 7461 7475 735f 636f  mocked_status_co
+0000e990: 6465 3d72 616e 6469 6e74 2834 3030 2c20  de=randint(400, 
+0000e9a0: 3439 3929 2c0a 2020 2020 2020 2020 2020  499),.          
+0000e9b0: 2020 6d6f 636b 6564 5f6a 736f 6e5f 6461    mocked_json_da
+0000e9c0: 7461 3d57 4542 3350 595f 4153 5f48 4558  ta=WEB3PY_AS_HEX
+0000e9d0: 4259 5445 532c 0a20 2020 2020 2020 2029  BYTES,.        )
+0000e9e0: 0a20 2020 2020 2020 2077 6974 6820 7079  .        with py
+0000e9f0: 7465 7374 2e72 6169 7365 7328 4578 6365  test.raises(Exce
+0000ea00: 7074 696f 6e2c 206d 6174 6368 3d22 6361  ption, match="ca
+0000ea10: 6c6c 6564 2072 6169 7365 5f66 6f72 5f73  lled raise_for_s
+0000ea20: 7461 7475 735c 5c28 5c5c 2922 293a 0a20  tatus\\(\\)"):. 
+0000ea30: 2020 2020 2020 2020 2020 2061 7761 6974             await
+0000ea40: 2061 7379 6e63 5f6f 6666 6368 6169 6e5f   async_offchain_
+0000ea50: 6c6f 6f6b 7570 5f63 6f6e 7472 6163 742e  lookup_contract.
+0000ea60: 6361 6c6c 6572 2829 2e74 6573 744f 6666  caller().testOff
+0000ea70: 6368 6169 6e4c 6f6f 6b75 7028 0a20 2020  chainLookup(.   
+0000ea80: 2020 2020 2020 2020 2020 2020 204f 4646               OFF
+0000ea90: 4348 4149 4e5f 4c4f 4f4b 5550 5f54 4553  CHAIN_LOOKUP_TES
+0000eaa0: 545f 4441 5441 0a20 2020 2020 2020 2020  T_DATA.         
+0000eab0: 2020 2029 0a0a 2020 2020 4070 7974 6573     )..    @pytes
+0000eac0: 742e 6d61 726b 2e61 7379 6e63 696f 0a20  t.mark.asyncio. 
+0000ead0: 2020 2061 7379 6e63 2064 6566 2074 6573     async def tes
+0000eae0: 745f 6574 685f 6361 6c6c 5f6f 6666 6368  t_eth_call_offch
+0000eaf0: 6169 6e5f 6c6f 6f6b 7570 5f72 6169 7365  ain_lookup_raise
+0000eb00: 735f 7768 656e 5f61 6c6c 5f73 7570 706c  s_when_all_suppl
+0000eb10: 6965 645f 7572 6c73 5f66 6169 6c28 0a20  ied_urls_fail(. 
+0000eb20: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+0000eb30: 2020 2020 2061 7379 6e63 5f77 333a 2022       async_w3: "
+0000eb40: 4173 796e 6357 6562 3322 2c0a 2020 2020  AsyncWeb3",.    
+0000eb50: 2020 2020 6173 796e 635f 6f66 6663 6861      async_offcha
+0000eb60: 696e 5f6c 6f6f 6b75 705f 636f 6e74 7261  in_lookup_contra
+0000eb70: 6374 3a20 2243 6f6e 7472 6163 7422 2c0a  ct: "Contract",.
+0000eb80: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+0000eb90: 2020 2020 2020 2023 2047 4554 2061 6e64         # GET and
+0000eba0: 2050 4f53 5420 7265 7175 6573 7473 2073   POST requests s
+0000ebb0: 686f 756c 6420 6661 696c 2073 696e 6365  hould fail since
+0000ebc0: 2072 6573 706f 6e73 6573 2061 7265 206e   responses are n
+0000ebd0: 6f74 206d 6f63 6b65 640a 2020 2020 2020  ot mocked.      
+0000ebe0: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
+0000ebf0: 6973 6573 280a 2020 2020 2020 2020 2020  ises(.          
+0000ec00: 2020 4d75 6c74 6970 6c65 4661 696c 6564    MultipleFailed
+0000ec10: 5265 7175 6573 7473 2c20 6d61 7463 683d  Requests, match=
+0000ec20: 224f 6666 6368 6169 6e20 6c6f 6f6b 7570  "Offchain lookup
+0000ec30: 2066 6169 6c65 6420 666f 7220 7375 7070   failed for supp
+0000ec40: 6c69 6564 2075 726c 7322 0a20 2020 2020  lied urls".     
+0000ec50: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
+0000ec60: 2020 6177 6169 7420 6173 796e 635f 6f66    await async_of
+0000ec70: 6663 6861 696e 5f6c 6f6f 6b75 705f 636f  fchain_lookup_co
+0000ec80: 6e74 7261 6374 2e63 616c 6c65 7228 292e  ntract.caller().
+0000ec90: 7465 7374 4f66 6663 6861 696e 4c6f 6f6b  testOffchainLook
+0000eca0: 7570 280a 2020 2020 2020 2020 2020 2020  up(.            
+0000ecb0: 2020 2020 4f46 4643 4841 494e 5f4c 4f4f      OFFCHAIN_LOO
+0000ecc0: 4b55 505f 5445 5354 5f44 4154 410a 2020  KUP_TEST_DATA.  
+0000ecd0: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
+0000ece0: 2040 7079 7465 7374 2e6d 6172 6b2e 6173   @pytest.mark.as
+0000ecf0: 796e 6369 6f0a 2020 2020 6173 796e 6320  yncio.    async 
+0000ed00: 6465 6620 7465 7374 5f65 7468 5f63 616c  def test_eth_cal
+0000ed10: 6c5f 636f 6e74 696e 756f 7573 5f6f 6666  l_continuous_off
+0000ed20: 6368 6169 6e5f 6c6f 6f6b 7570 5f72 6169  chain_lookup_rai
+0000ed30: 7365 735f 7769 7468 5f74 6f6f 5f6d 616e  ses_with_too_man
+0000ed40: 795f 7265 7175 6573 7473 280a 2020 2020  y_requests(.    
+0000ed50: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+0000ed60: 2020 6173 796e 635f 7733 3a20 2241 7379    async_w3: "Asy
+0000ed70: 6e63 5765 6233 222c 0a20 2020 2020 2020  ncWeb3",.       
+0000ed80: 2061 7379 6e63 5f6f 6666 6368 6169 6e5f   async_offchain_
+0000ed90: 6c6f 6f6b 7570 5f63 6f6e 7472 6163 743a  lookup_contract:
+0000eda0: 2022 436f 6e74 7261 6374 222c 0a20 2020   "Contract",.   
+0000edb0: 2020 2020 2061 7379 6e63 5f75 6e6c 6f63       async_unloc
+0000edc0: 6b65 645f 6163 636f 756e 743a 2043 6865  ked_account: Che
+0000edd0: 636b 7375 6d41 6464 7265 7373 2c0a 2020  cksumAddress,.  
+0000ede0: 2020 2020 2020 6d6f 6e6b 6579 7061 7463        monkeypatc
+0000edf0: 683a 2022 4d6f 6e6b 6579 5061 7463 6822  h: "MonkeyPatch"
+0000ee00: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
+0000ee10: 0a20 2020 2020 2020 206e 6f72 6d61 6c69  .        normali
+0000ee20: 7a65 645f 636f 6e74 7261 6374 5f61 6464  zed_contract_add
+0000ee30: 7265 7373 203d 2074 6f5f 6865 785f 6966  ress = to_hex_if
+0000ee40: 5f62 7974 6573 280a 2020 2020 2020 2020  _bytes(.        
+0000ee50: 2020 2020 6173 796e 635f 6f66 6663 6861      async_offcha
+0000ee60: 696e 5f6c 6f6f 6b75 705f 636f 6e74 7261  in_lookup_contra
+0000ee70: 6374 2e61 6464 7265 7373 0a20 2020 2020  ct.address.     
+0000ee80: 2020 2029 2e6c 6f77 6572 2829 0a0a 2020     ).lower()..  
+0000ee90: 2020 2020 2020 6173 796e 635f 6d6f 636b        async_mock
+0000eea0: 5f6f 6666 6368 6169 6e5f 6c6f 6f6b 7570  _offchain_lookup
+0000eeb0: 5f72 6571 7565 7374 5f72 6573 706f 6e73  _request_respons
+0000eec0: 6528 0a20 2020 2020 2020 2020 2020 206d  e(.            m
+0000eed0: 6f6e 6b65 7970 6174 6368 2c0a 2020 2020  onkeypatch,.    
+0000eee0: 2020 2020 2020 2020 6d6f 636b 6564 5f72          mocked_r
+0000eef0: 6571 7565 7374 5f75 726c 3d66 2268 7474  equest_url=f"htt
+0000ef00: 7073 3a2f 2f77 6562 332e 7079 2f67 6174  ps://web3.py/gat
+0000ef10: 6577 6179 2f7b 6e6f 726d 616c 697a 6564  eway/{normalized
+0000ef20: 5f63 6f6e 7472 6163 745f 6164 6472 6573  _contract_addres
+0000ef30: 737d 2f30 782e 6a73 6f6e 222c 2020 2320  s}/0x.json",  # 
+0000ef40: 6e6f 7161 3a20 4535 3031 0a20 2020 2020  noqa: E501.     
+0000ef50: 2020 2029 0a20 2020 2020 2020 2077 6974     ).        wit
+0000ef60: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
+0000ef70: 546f 6f4d 616e 7952 6571 7565 7374 732c  TooManyRequests,
+0000ef80: 206d 6174 6368 3d22 546f 6f20 6d61 6e79   match="Too many
+0000ef90: 2043 4349 5020 7265 6164 2072 6564 6972   CCIP read redir
+0000efa0: 6563 7473 2229 3a0a 2020 2020 2020 2020  ects"):.        
+0000efb0: 2020 2020 6177 6169 7420 6173 796e 635f      await async_
+0000efc0: 6f66 6663 6861 696e 5f6c 6f6f 6b75 705f  offchain_lookup_
+0000efd0: 636f 6e74 7261 6374 2e63 616c 6c65 7228  contract.caller(
+0000efe0: 292e 636f 6e74 696e 756f 7573 4f66 6663  ).continuousOffc
+0000eff0: 6861 696e 4c6f 6f6b 7570 2829 2020 2320  hainLookup()  # 
+0000f000: 6e6f 7161 3a20 4535 3031 2074 7970 653a  noqa: E501 type:
+0000f010: 2069 676e 6f72 650a 0a20 2020 2040 7079   ignore..    @py
+0000f020: 7465 7374 2e6d 6172 6b2e 6173 796e 6369  test.mark.asynci
+0000f030: 6f0a 2020 2020 6173 796e 6320 6465 6620  o.    async def 
+0000f040: 7465 7374 5f61 7379 6e63 5f65 7468 5f68  test_async_eth_h
+0000f050: 6173 6872 6174 6528 7365 6c66 2c20 6173  ashrate(self, as
+0000f060: 796e 635f 7733 3a20 2241 7379 6e63 5765  ync_w3: "AsyncWe
+0000f070: 6233 2229 202d 3e20 4e6f 6e65 3a0a 2020  b3") -> None:.  
+0000f080: 2020 2020 2020 6861 7368 7261 7465 203d        hashrate =
+0000f090: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
+0000f0a0: 6574 682e 6861 7368 7261 7465 0a20 2020  eth.hashrate.   
+0000f0b0: 2020 2020 2061 7373 6572 7420 6973 5f69       assert is_i
+0000f0c0: 6e74 6567 6572 2868 6173 6872 6174 6529  nteger(hashrate)
+0000f0d0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+0000f0e0: 6861 7368 7261 7465 203e 3d20 300a 0a20  hashrate >= 0.. 
+0000f0f0: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
+0000f100: 6173 796e 6369 6f0a 2020 2020 6173 796e  asyncio.    asyn
+0000f110: 6320 6465 6620 7465 7374 5f61 7379 6e63  c def test_async
+0000f120: 5f65 7468 5f63 6861 696e 5f69 6428 7365  _eth_chain_id(se
+0000f130: 6c66 2c20 6173 796e 635f 7733 3a20 2241  lf, async_w3: "A
+0000f140: 7379 6e63 5765 6233 2229 202d 3e20 4e6f  syncWeb3") -> No
+0000f150: 6e65 3a0a 2020 2020 2020 2020 6368 6169  ne:.        chai
+0000f160: 6e5f 6964 203d 2061 7761 6974 2061 7379  n_id = await asy
+0000f170: 6e63 5f77 332e 6574 682e 6368 6169 6e5f  nc_w3.eth.chain_
+0000f180: 6964 0a20 2020 2020 2020 2023 2063 6861  id.        # cha
+0000f190: 696e 2069 6420 7661 6c75 6520 6672 6f6d  in id value from
+0000f1a0: 2067 6574 6820 6669 7874 7572 6520 6765   geth fixture ge
+0000f1b0: 6e65 7369 7320 6669 6c65 0a20 2020 2020  nesis file.     
+0000f1c0: 2020 2061 7373 6572 7420 6368 6169 6e5f     assert chain_
+0000f1d0: 6964 203d 3d20 3133 3132 3737 3332 3239  id == 1312773229
+0000f1e0: 3430 3533 370a 0a20 2020 2040 7079 7465  40537..    @pyte
+0000f1f0: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
+0000f200: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
+0000f210: 7374 5f61 7379 6e63 5f65 7468 5f6d 696e  st_async_eth_min
+0000f220: 696e 6728 7365 6c66 2c20 6173 796e 635f  ing(self, async_
+0000f230: 7733 3a20 2241 7379 6e63 5765 6233 2229  w3: "AsyncWeb3")
+0000f240: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+0000f250: 2020 6d69 6e69 6e67 203d 2061 7761 6974    mining = await
+0000f260: 2061 7379 6e63 5f77 332e 6574 682e 6d69   async_w3.eth.mi
+0000f270: 6e69 6e67 0a20 2020 2020 2020 2061 7373  ning.        ass
+0000f280: 6572 7420 6973 5f62 6f6f 6c65 616e 286d  ert is_boolean(m
+0000f290: 696e 696e 6729 0a0a 2020 2020 4070 7974  ining)..    @pyt
+0000f2a0: 6573 742e 6d61 726b 2e61 7379 6e63 696f  est.mark.asyncio
+0000f2b0: 0a20 2020 2061 7379 6e63 2064 6566 2074  .    async def t
+0000f2c0: 6573 745f 6173 796e 635f 6574 685f 6765  est_async_eth_ge
+0000f2d0: 745f 7472 616e 7361 6374 696f 6e5f 7265  t_transaction_re
+0000f2e0: 6365 6970 745f 6d69 6e65 6428 0a20 2020  ceipt_mined(.   
+0000f2f0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+0000f300: 2020 2061 7379 6e63 5f77 333a 2022 4173     async_w3: "As
+0000f310: 796e 6357 6562 3322 2c0a 2020 2020 2020  yncWeb3",.      
+0000f320: 2020 6173 796e 635f 626c 6f63 6b5f 7769    async_block_wi
+0000f330: 7468 5f74 786e 3a20 426c 6f63 6b44 6174  th_txn: BlockDat
+0000f340: 612c 0a20 2020 2020 2020 206d 696e 6564  a,.        mined
+0000f350: 5f74 786e 5f68 6173 683a 2048 6578 5374  _txn_hash: HexSt
+0000f360: 722c 0a20 2020 2029 202d 3e20 4e6f 6e65  r,.    ) -> None
+0000f370: 3a0a 2020 2020 2020 2020 7265 6365 6970  :.        receip
+0000f380: 7420 3d20 6177 6169 7420 6173 796e 635f  t = await async_
+0000f390: 7733 2e65 7468 2e67 6574 5f74 7261 6e73  w3.eth.get_trans
+0000f3a0: 6163 7469 6f6e 5f72 6563 6569 7074 286d  action_receipt(m
+0000f3b0: 696e 6564 5f74 786e 5f68 6173 6829 0a20  ined_txn_hash). 
+0000f3c0: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+0000f3d0: 5f64 6963 7428 7265 6365 6970 7429 0a20  _dict(receipt). 
+0000f3e0: 2020 2020 2020 2061 7373 6572 7420 7265         assert re
+0000f3f0: 6365 6970 745b 2262 6c6f 636b 4e75 6d62  ceipt["blockNumb
+0000f400: 6572 225d 203d 3d20 6173 796e 635f 626c  er"] == async_bl
+0000f410: 6f63 6b5f 7769 7468 5f74 786e 5b22 6e75  ock_with_txn["nu
+0000f420: 6d62 6572 225d 0a20 2020 2020 2020 2061  mber"].        a
+0000f430: 7373 6572 7420 7265 6365 6970 745b 2262  ssert receipt["b
+0000f440: 6c6f 636b 4861 7368 225d 203d 3d20 6173  lockHash"] == as
+0000f450: 796e 635f 626c 6f63 6b5f 7769 7468 5f74  ync_block_with_t
+0000f460: 786e 5b22 6861 7368 225d 0a20 2020 2020  xn["hash"].     
+0000f470: 2020 2061 7373 6572 7420 7265 6365 6970     assert receip
+0000f480: 745b 2274 7261 6e73 6163 7469 6f6e 496e  t["transactionIn
+0000f490: 6465 7822 5d20 3d3d 2030 0a20 2020 2020  dex"] == 0.     
+0000f4a0: 2020 2061 7373 6572 7420 7265 6365 6970     assert receip
+0000f4b0: 745b 2274 7261 6e73 6163 7469 6f6e 4861  t["transactionHa
+0000f4c0: 7368 225d 203d 3d20 4865 7842 7974 6573  sh"] == HexBytes
+0000f4d0: 286d 696e 6564 5f74 786e 5f68 6173 6829  (mined_txn_hash)
+0000f4e0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+0000f4f0: 6973 5f63 6865 636b 7375 6d5f 6164 6472  is_checksum_addr
+0000f500: 6573 7328 7265 6365 6970 745b 2274 6f22  ess(receipt["to"
+0000f510: 5d29 0a20 2020 2020 2020 2061 7373 6572  ]).        asser
+0000f520: 7420 7265 6365 6970 745b 2266 726f 6d22  t receipt["from"
+0000f530: 5d20 6973 206e 6f74 204e 6f6e 650a 2020  ] is not None.  
+0000f540: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+0000f550: 6368 6563 6b73 756d 5f61 6464 7265 7373  checksum_address
+0000f560: 2872 6563 6569 7074 5b22 6672 6f6d 225d  (receipt["from"]
+0000f570: 290a 0a20 2020 2020 2020 2065 6666 6563  )..        effec
+0000f580: 7469 7665 5f67 6173 5f70 7269 6365 203d  tive_gas_price =
+0000f590: 2072 6563 6569 7074 5b22 6566 6665 6374   receipt["effect
+0000f5a0: 6976 6547 6173 5072 6963 6522 5d0a 2020  iveGasPrice"].  
+0000f5b0: 2020 2020 2020 6173 7365 7274 2069 7369        assert isi
+0000f5c0: 6e73 7461 6e63 6528 6566 6665 6374 6976  nstance(effectiv
+0000f5d0: 655f 6761 735f 7072 6963 652c 2069 6e74  e_gas_price, int
+0000f5e0: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+0000f5f0: 2065 6666 6563 7469 7665 5f67 6173 5f70   effective_gas_p
+0000f600: 7269 6365 203e 2030 0a0a 2020 2020 4070  rice > 0..    @p
+0000f610: 7974 6573 742e 6d61 726b 2e61 7379 6e63  ytest.mark.async
+0000f620: 696f 0a20 2020 2061 7379 6e63 2064 6566  io.    async def
+0000f630: 2074 6573 745f 6173 796e 635f 6574 685f   test_async_eth_
+0000f640: 6765 745f 7472 616e 7361 6374 696f 6e5f  get_transaction_
+0000f650: 7265 6365 6970 745f 756e 6d69 6e65 6428  receipt_unmined(
+0000f660: 0a20 2020 2020 2020 2073 656c 662c 2061  .        self, a
+0000f670: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
+0000f680: 6562 3322 2c20 6173 796e 635f 756e 6c6f  eb3", async_unlo
+0000f690: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
+0000f6a0: 6c5f 7479 7065 3a20 4368 6563 6b73 756d  l_type: Checksum
+0000f6b0: 4164 6472 6573 730a 2020 2020 2920 2d3e  Address.    ) ->
+0000f6c0: 204e 6f6e 653a 0a20 2020 2020 2020 2074   None:.        t
+0000f6d0: 786e 5f68 6173 6820 3d20 6177 6169 7420  xn_hash = await 
+0000f6e0: 6173 796e 635f 7733 2e65 7468 2e73 656e  async_w3.eth.sen
+0000f6f0: 645f 7472 616e 7361 6374 696f 6e28 0a20  d_transaction(. 
+0000f700: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+0000f710: 2020 2020 2020 2020 2020 2020 2022 6672               "fr
+0000f720: 6f6d 223a 2061 7379 6e63 5f75 6e6c 6f63  om": async_unloc
+0000f730: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+0000f740: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
+0000f750: 2020 2020 2020 2022 746f 223a 2061 7379         "to": asy
+0000f760: 6e63 5f75 6e6c 6f63 6b65 645f 6163 636f  nc_unlocked_acco
+0000f770: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
+0000f780: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000f790: 7661 6c75 6522 3a20 5765 6928 3129 2c0a  value": Wei(1),.
+0000f7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f7b0: 2267 6173 223a 2032 3130 3030 2c0a 2020  "gas": 21000,.  
+0000f7c0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+0000f7d0: 6178 4665 6550 6572 4761 7322 3a20 6173  axFeePerGas": as
+0000f7e0: 796e 635f 7733 2e74 6f5f 7765 6928 332c  ync_w3.to_wei(3,
+0000f7f0: 2022 6777 6569 2229 2c0a 2020 2020 2020   "gwei"),.      
+0000f800: 2020 2020 2020 2020 2020 226d 6178 5072            "maxPr
+0000f810: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
+0000f820: 3a20 6173 796e 635f 7733 2e74 6f5f 7765  : async_w3.to_we
+0000f830: 6928 312c 2022 6777 6569 2229 2c0a 2020  i(1, "gwei"),.  
+0000f840: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+0000f850: 2020 2020 290a 2020 2020 2020 2020 7769      ).        wi
+0000f860: 7468 2070 7974 6573 742e 7261 6973 6573  th pytest.raises
+0000f870: 2854 7261 6e73 6163 7469 6f6e 4e6f 7446  (TransactionNotF
+0000f880: 6f75 6e64 293a 0a20 2020 2020 2020 2020  ound):.         
+0000f890: 2020 2061 7761 6974 2061 7379 6e63 5f77     await async_w
+0000f8a0: 332e 6574 682e 6765 745f 7472 616e 7361  3.eth.get_transa
+0000f8b0: 6374 696f 6e5f 7265 6365 6970 7428 7478  ction_receipt(tx
+0000f8c0: 6e5f 6861 7368 290a 0a20 2020 2040 7079  n_hash)..    @py
+0000f8d0: 7465 7374 2e6d 6172 6b2e 6173 796e 6369  test.mark.asynci
+0000f8e0: 6f0a 2020 2020 6173 796e 6320 6465 6620  o.    async def 
+0000f8f0: 7465 7374 5f61 7379 6e63 5f65 7468 5f67  test_async_eth_g
+0000f900: 6574 5f74 7261 6e73 6163 7469 6f6e 5f72  et_transaction_r
+0000f910: 6563 6569 7074 5f77 6974 685f 6c6f 675f  eceipt_with_log_
+0000f920: 656e 7472 7928 0a20 2020 2020 2020 2073  entry(.        s
+0000f930: 656c 662c 0a20 2020 2020 2020 2061 7379  elf,.        asy
+0000f940: 6e63 5f77 333a 2022 4173 796e 6357 6562  nc_w3: "AsyncWeb
+0000f950: 3322 2c0a 2020 2020 2020 2020 6173 796e  3",.        asyn
+0000f960: 635f 626c 6f63 6b5f 7769 7468 5f74 786e  c_block_with_txn
+0000f970: 5f77 6974 685f 6c6f 673a 2042 6c6f 636b  _with_log: Block
+0000f980: 4461 7461 2c0a 2020 2020 2020 2020 6173  Data,.        as
+0000f990: 796e 635f 656d 6974 7465 725f 636f 6e74  ync_emitter_cont
+0000f9a0: 7261 6374 3a20 2243 6f6e 7472 6163 7422  ract: "Contract"
+0000f9b0: 2c0a 2020 2020 2020 2020 7478 6e5f 6861  ,.        txn_ha
+0000f9c0: 7368 5f77 6974 685f 6c6f 673a 2048 6578  sh_with_log: Hex
+0000f9d0: 5374 722c 0a20 2020 2029 202d 3e20 4e6f  Str,.    ) -> No
+0000f9e0: 6e65 3a0a 2020 2020 2020 2020 7265 6365  ne:.        rece
+0000f9f0: 6970 7420 3d20 6177 6169 7420 6173 796e  ipt = await asyn
+0000fa00: 635f 7733 2e65 7468 2e77 6169 745f 666f  c_w3.eth.wait_fo
+0000fa10: 725f 7472 616e 7361 6374 696f 6e5f 7265  r_transaction_re
+0000fa20: 6365 6970 7428 7478 6e5f 6861 7368 5f77  ceipt(txn_hash_w
+0000fa30: 6974 685f 6c6f 6729 0a20 2020 2020 2020  ith_log).       
+0000fa40: 2061 7373 6572 7420 6973 5f64 6963 7428   assert is_dict(
+0000fa50: 7265 6365 6970 7429 0a20 2020 2020 2020  receipt).       
+0000fa60: 2061 7373 6572 7420 7265 6365 6970 745b   assert receipt[
+0000fa70: 2262 6c6f 636b 4e75 6d62 6572 225d 203d  "blockNumber"] =
+0000fa80: 3d20 6173 796e 635f 626c 6f63 6b5f 7769  = async_block_wi
+0000fa90: 7468 5f74 786e 5f77 6974 685f 6c6f 675b  th_txn_with_log[
+0000faa0: 226e 756d 6265 7222 5d0a 2020 2020 2020  "number"].      
+0000fab0: 2020 6173 7365 7274 2072 6563 6569 7074    assert receipt
+0000fac0: 5b22 626c 6f63 6b48 6173 6822 5d20 3d3d  ["blockHash"] ==
+0000fad0: 2061 7379 6e63 5f62 6c6f 636b 5f77 6974   async_block_wit
+0000fae0: 685f 7478 6e5f 7769 7468 5f6c 6f67 5b22  h_txn_with_log["
+0000faf0: 6861 7368 225d 0a20 2020 2020 2020 2061  hash"].        a
+0000fb00: 7373 6572 7420 7265 6365 6970 745b 2274  ssert receipt["t
+0000fb10: 7261 6e73 6163 7469 6f6e 496e 6465 7822  ransactionIndex"
+0000fb20: 5d20 3d3d 2030 0a20 2020 2020 2020 2061  ] == 0.        a
+0000fb30: 7373 6572 7420 7265 6365 6970 745b 2274  ssert receipt["t
+0000fb40: 7261 6e73 6163 7469 6f6e 4861 7368 225d  ransactionHash"]
+0000fb50: 203d 3d20 4865 7842 7974 6573 2874 786e   == HexBytes(txn
+0000fb60: 5f68 6173 685f 7769 7468 5f6c 6f67 290a  _hash_with_log).
+0000fb70: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+0000fb80: 6c65 6e28 7265 6365 6970 745b 226c 6f67  len(receipt["log
+0000fb90: 7322 5d29 203d 3d20 310a 2020 2020 2020  s"]) == 1.      
+0000fba0: 2020 6c6f 675f 656e 7472 7920 3d20 7265    log_entry = re
+0000fbb0: 6365 6970 745b 226c 6f67 7322 5d5b 305d  ceipt["logs"][0]
+0000fbc0: 0a0a 2020 2020 2020 2020 6173 7365 7274  ..        assert
+0000fbd0: 206c 6f67 5f65 6e74 7279 5b22 626c 6f63   log_entry["bloc
+0000fbe0: 6b4e 756d 6265 7222 5d20 3d3d 2061 7379  kNumber"] == asy
+0000fbf0: 6e63 5f62 6c6f 636b 5f77 6974 685f 7478  nc_block_with_tx
+0000fc00: 6e5f 7769 7468 5f6c 6f67 5b22 6e75 6d62  n_with_log["numb
+0000fc10: 6572 225d 0a20 2020 2020 2020 2061 7373  er"].        ass
+0000fc20: 6572 7420 6c6f 675f 656e 7472 795b 2262  ert log_entry["b
+0000fc30: 6c6f 636b 4861 7368 225d 203d 3d20 6173  lockHash"] == as
+0000fc40: 796e 635f 626c 6f63 6b5f 7769 7468 5f74  ync_block_with_t
+0000fc50: 786e 5f77 6974 685f 6c6f 675b 2268 6173  xn_with_log["has
+0000fc60: 6822 5d0a 2020 2020 2020 2020 6173 7365  h"].        asse
+0000fc70: 7274 206c 6f67 5f65 6e74 7279 5b22 6c6f  rt log_entry["lo
+0000fc80: 6749 6e64 6578 225d 203d 3d20 300a 2020  gIndex"] == 0.  
+0000fc90: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+0000fca0: 7361 6d65 5f61 6464 7265 7373 286c 6f67  same_address(log
+0000fcb0: 5f65 6e74 7279 5b22 6164 6472 6573 7322  _entry["address"
+0000fcc0: 5d2c 2061 7379 6e63 5f65 6d69 7474 6572  ], async_emitter
+0000fcd0: 5f63 6f6e 7472 6163 742e 6164 6472 6573  _contract.addres
+0000fce0: 7329 0a20 2020 2020 2020 2061 7373 6572  s).        asser
+0000fcf0: 7420 6c6f 675f 656e 7472 795b 2274 7261  t log_entry["tra
+0000fd00: 6e73 6163 7469 6f6e 496e 6465 7822 5d20  nsactionIndex"] 
+0000fd10: 3d3d 2030 0a20 2020 2020 2020 2061 7373  == 0.        ass
+0000fd20: 6572 7420 6c6f 675f 656e 7472 795b 2274  ert log_entry["t
+0000fd30: 7261 6e73 6163 7469 6f6e 4861 7368 225d  ransactionHash"]
+0000fd40: 203d 3d20 4865 7842 7974 6573 2874 786e   == HexBytes(txn
+0000fd50: 5f68 6173 685f 7769 7468 5f6c 6f67 290a  _hash_with_log).
+0000fd60: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
+0000fd70: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
+0000fd80: 796e 6320 6465 6620 7465 7374 5f61 7379  ync def test_asy
+0000fd90: 6e63 5f65 7468 5f77 6169 745f 666f 725f  nc_eth_wait_for_
+0000fda0: 7472 616e 7361 6374 696f 6e5f 7265 6365  transaction_rece
+0000fdb0: 6970 745f 6d69 6e65 6428 0a20 2020 2020  ipt_mined(.     
+0000fdc0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+0000fdd0: 2061 7379 6e63 5f77 333a 2022 4173 796e   async_w3: "Asyn
+0000fde0: 6357 6562 3322 2c0a 2020 2020 2020 2020  cWeb3",.        
+0000fdf0: 6173 796e 635f 626c 6f63 6b5f 7769 7468  async_block_with
+0000fe00: 5f74 786e 3a20 426c 6f63 6b44 6174 612c  _txn: BlockData,
+0000fe10: 0a20 2020 2020 2020 206d 696e 6564 5f74  .        mined_t
+0000fe20: 786e 5f68 6173 683a 2048 6578 5374 722c  xn_hash: HexStr,
+0000fe30: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+0000fe40: 2020 2020 2020 2020 7265 6365 6970 7420          receipt 
+0000fe50: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
+0000fe60: 2e65 7468 2e77 6169 745f 666f 725f 7472  .eth.wait_for_tr
+0000fe70: 616e 7361 6374 696f 6e5f 7265 6365 6970  ansaction_receip
+0000fe80: 7428 6d69 6e65 645f 7478 6e5f 6861 7368  t(mined_txn_hash
+0000fe90: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+0000fea0: 2069 735f 6469 6374 2872 6563 6569 7074   is_dict(receipt
+0000feb0: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+0000fec0: 2072 6563 6569 7074 5b22 626c 6f63 6b4e   receipt["blockN
+0000fed0: 756d 6265 7222 5d20 3d3d 2061 7379 6e63  umber"] == async
+0000fee0: 5f62 6c6f 636b 5f77 6974 685f 7478 6e5b  _block_with_txn[
+0000fef0: 226e 756d 6265 7222 5d0a 2020 2020 2020  "number"].      
+0000ff00: 2020 6173 7365 7274 2072 6563 6569 7074    assert receipt
+0000ff10: 5b22 626c 6f63 6b48 6173 6822 5d20 3d3d  ["blockHash"] ==
+0000ff20: 2061 7379 6e63 5f62 6c6f 636b 5f77 6974   async_block_wit
+0000ff30: 685f 7478 6e5b 2268 6173 6822 5d0a 2020  h_txn["hash"].  
+0000ff40: 2020 2020 2020 6173 7365 7274 2072 6563        assert rec
+0000ff50: 6569 7074 5b22 7472 616e 7361 6374 696f  eipt["transactio
+0000ff60: 6e49 6e64 6578 225d 203d 3d20 300a 2020  nIndex"] == 0.  
+0000ff70: 2020 2020 2020 6173 7365 7274 2072 6563        assert rec
+0000ff80: 6569 7074 5b22 7472 616e 7361 6374 696f  eipt["transactio
+0000ff90: 6e48 6173 6822 5d20 3d3d 2048 6578 4279  nHash"] == HexBy
+0000ffa0: 7465 7328 6d69 6e65 645f 7478 6e5f 6861  tes(mined_txn_ha
+0000ffb0: 7368 290a 2020 2020 2020 2020 6173 7365  sh).        asse
+0000ffc0: 7274 2069 735f 6368 6563 6b73 756d 5f61  rt is_checksum_a
+0000ffd0: 6464 7265 7373 2872 6563 6569 7074 5b22  ddress(receipt["
+0000ffe0: 746f 225d 290a 2020 2020 2020 2020 6173  to"]).        as
+0000fff0: 7365 7274 2072 6563 6569 7074 5b22 6672  sert receipt["fr
+00010000: 6f6d 225d 2069 7320 6e6f 7420 4e6f 6e65  om"] is not None
+00010010: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00010020: 6973 5f63 6865 636b 7375 6d5f 6164 6472  is_checksum_addr
+00010030: 6573 7328 7265 6365 6970 745b 2266 726f  ess(receipt["fro
+00010040: 6d22 5d29 0a0a 2020 2020 2020 2020 6566  m"])..        ef
+00010050: 6665 6374 6976 655f 6761 735f 7072 6963  fective_gas_pric
+00010060: 6520 3d20 7265 6365 6970 745b 2265 6666  e = receipt["eff
+00010070: 6563 7469 7665 4761 7350 7269 6365 225d  ectiveGasPrice"]
+00010080: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00010090: 6973 696e 7374 616e 6365 2865 6666 6563  isinstance(effec
+000100a0: 7469 7665 5f67 6173 5f70 7269 6365 2c20  tive_gas_price, 
+000100b0: 696e 7429 0a20 2020 2020 2020 2061 7373  int).        ass
+000100c0: 6572 7420 6566 6665 6374 6976 655f 6761  ert effective_ga
+000100d0: 735f 7072 6963 6520 3e20 300a 0a20 2020  s_price > 0..   
+000100e0: 2040 7079 7465 7374 2e6d 6172 6b2e 6173   @pytest.mark.as
+000100f0: 796e 6369 6f0a 2020 2020 6173 796e 6320  yncio.    async 
+00010100: 6465 6620 7465 7374 5f61 7379 6e63 5f65  def test_async_e
+00010110: 7468 5f77 6169 745f 666f 725f 7472 616e  th_wait_for_tran
+00010120: 7361 6374 696f 6e5f 7265 6365 6970 745f  saction_receipt_
+00010130: 756e 6d69 6e65 6428 0a20 2020 2020 2020  unmined(.       
+00010140: 2073 656c 662c 2061 7379 6e63 5f77 333a   self, async_w3:
+00010150: 2022 4173 796e 6357 6562 3322 2c20 6173   "AsyncWeb3", as
+00010160: 796e 635f 756e 6c6f 636b 6564 5f61 6363  ync_unlocked_acc
+00010170: 6f75 6e74 5f64 7561 6c5f 7479 7065 3a20  ount_dual_type: 
+00010180: 4368 6563 6b73 756d 4164 6472 6573 730a  ChecksumAddress.
+00010190: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+000101a0: 2020 2020 2020 2074 786e 5f68 6173 6820         txn_hash 
+000101b0: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
+000101c0: 2e65 7468 2e73 656e 645f 7472 616e 7361  .eth.send_transa
+000101d0: 6374 696f 6e28 0a20 2020 2020 2020 2020  ction(.         
+000101e0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+000101f0: 2020 2020 2022 6672 6f6d 223a 2061 7379       "from": asy
+00010200: 6e63 5f75 6e6c 6f63 6b65 645f 6163 636f  nc_unlocked_acco
+00010210: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
+00010220: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00010230: 746f 223a 2061 7379 6e63 5f75 6e6c 6f63  to": async_unloc
+00010240: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+00010250: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
+00010260: 2020 2020 2020 2022 7661 6c75 6522 3a20         "value": 
+00010270: 5765 6928 3129 2c0a 2020 2020 2020 2020  Wei(1),.        
+00010280: 2020 2020 2020 2020 2267 6173 223a 2032          "gas": 2
+00010290: 3130 3030 2c0a 2020 2020 2020 2020 2020  1000,.          
+000102a0: 2020 2020 2020 226d 6178 4665 6550 6572        "maxFeePer
+000102b0: 4761 7322 3a20 6173 796e 635f 7733 2e74  Gas": async_w3.t
+000102c0: 6f5f 7765 6928 332c 2022 6777 6569 2229  o_wei(3, "gwei")
+000102d0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000102e0: 2020 226d 6178 5072 696f 7269 7479 4665    "maxPriorityFe
+000102f0: 6550 6572 4761 7322 3a20 6173 796e 635f  ePerGas": async_
+00010300: 7733 2e74 6f5f 7765 6928 312c 2022 6777  w3.to_wei(1, "gw
+00010310: 6569 2229 2c0a 2020 2020 2020 2020 2020  ei"),.          
+00010320: 2020 7d0a 2020 2020 2020 2020 290a 0a20    }.        ).. 
+00010330: 2020 2020 2020 2074 696d 656f 7574 203d         timeout =
+00010340: 2032 0a20 2020 2020 2020 2077 6974 6820   2.        with 
+00010350: 7079 7465 7374 2e72 6169 7365 7328 5469  pytest.raises(Ti
+00010360: 6d65 4578 6861 7573 7465 6429 2061 7320  meExhausted) as 
+00010370: 6578 635f 696e 666f 3a0a 2020 2020 2020  exc_info:.      
+00010380: 2020 2020 2020 6177 6169 7420 6173 796e        await asyn
+00010390: 635f 7733 2e65 7468 2e77 6169 745f 666f  c_w3.eth.wait_fo
+000103a0: 725f 7472 616e 7361 6374 696f 6e5f 7265  r_transaction_re
+000103b0: 6365 6970 7428 7478 6e5f 6861 7368 2c20  ceipt(txn_hash, 
+000103c0: 7469 6d65 6f75 743d 7469 6d65 6f75 7429  timeout=timeout)
+000103d0: 0a0a 2020 2020 2020 2020 6173 7365 7274  ..        assert
+000103e0: 2028 5f20 696e 2073 7472 2865 7863 5f69   (_ in str(exc_i
+000103f0: 6e66 6f29 2066 6f72 205f 2069 6e20 5b72  nfo) for _ in [r
+00010400: 6570 7228 7478 6e5f 6861 7368 292c 2074  epr(txn_hash), t
+00010410: 696d 656f 7574 5d29 0a0a 2020 2020 4070  imeout])..    @p
+00010420: 7974 6573 742e 6d61 726b 2e61 7379 6e63  ytest.mark.async
+00010430: 696f 0a20 2020 2061 7379 6e63 2064 6566  io.    async def
+00010440: 2074 6573 745f 6173 796e 635f 6574 685f   test_async_eth_
+00010450: 7761 6974 5f66 6f72 5f74 7261 6e73 6163  wait_for_transac
+00010460: 7469 6f6e 5f72 6563 6569 7074 5f77 6974  tion_receipt_wit
+00010470: 685f 6c6f 675f 656e 7472 7928 0a20 2020  h_log_entry(.   
+00010480: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+00010490: 2020 2061 7379 6e63 5f77 333a 2022 4173     async_w3: "As
+000104a0: 796e 6357 6562 3322 2c0a 2020 2020 2020  yncWeb3",.      
+000104b0: 2020 6173 796e 635f 626c 6f63 6b5f 7769    async_block_wi
+000104c0: 7468 5f74 786e 5f77 6974 685f 6c6f 673a  th_txn_with_log:
+000104d0: 2042 6c6f 636b 4461 7461 2c0a 2020 2020   BlockData,.    
+000104e0: 2020 2020 6173 796e 635f 656d 6974 7465      async_emitte
+000104f0: 725f 636f 6e74 7261 6374 3a20 2243 6f6e  r_contract: "Con
+00010500: 7472 6163 7422 2c0a 2020 2020 2020 2020  tract",.        
+00010510: 7478 6e5f 6861 7368 5f77 6974 685f 6c6f  txn_hash_with_lo
+00010520: 673a 2048 6578 5374 722c 0a20 2020 2029  g: HexStr,.    )
+00010530: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+00010540: 2020 7265 6365 6970 7420 3d20 6177 6169    receipt = awai
+00010550: 7420 6173 796e 635f 7733 2e65 7468 2e77  t async_w3.eth.w
+00010560: 6169 745f 666f 725f 7472 616e 7361 6374  ait_for_transact
+00010570: 696f 6e5f 7265 6365 6970 7428 7478 6e5f  ion_receipt(txn_
+00010580: 6861 7368 5f77 6974 685f 6c6f 6729 0a20  hash_with_log). 
+00010590: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+000105a0: 5f64 6963 7428 7265 6365 6970 7429 0a20  _dict(receipt). 
+000105b0: 2020 2020 2020 2061 7373 6572 7420 7265         assert re
+000105c0: 6365 6970 745b 2262 6c6f 636b 4e75 6d62  ceipt["blockNumb
+000105d0: 6572 225d 203d 3d20 6173 796e 635f 626c  er"] == async_bl
+000105e0: 6f63 6b5f 7769 7468 5f74 786e 5f77 6974  ock_with_txn_wit
+000105f0: 685f 6c6f 675b 226e 756d 6265 7222 5d0a  h_log["number"].
+00010600: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
+00010610: 6563 6569 7074 5b22 626c 6f63 6b48 6173  eceipt["blockHas
+00010620: 6822 5d20 3d3d 2061 7379 6e63 5f62 6c6f  h"] == async_blo
+00010630: 636b 5f77 6974 685f 7478 6e5f 7769 7468  ck_with_txn_with
+00010640: 5f6c 6f67 5b22 6861 7368 225d 0a20 2020  _log["hash"].   
+00010650: 2020 2020 2061 7373 6572 7420 7265 6365       assert rece
+00010660: 6970 745b 2274 7261 6e73 6163 7469 6f6e  ipt["transaction
+00010670: 496e 6465 7822 5d20 3d3d 2030 0a20 2020  Index"] == 0.   
+00010680: 2020 2020 2061 7373 6572 7420 7265 6365       assert rece
+00010690: 6970 745b 2274 7261 6e73 6163 7469 6f6e  ipt["transaction
+000106a0: 4861 7368 225d 203d 3d20 4865 7842 7974  Hash"] == HexByt
+000106b0: 6573 2874 786e 5f68 6173 685f 7769 7468  es(txn_hash_with
+000106c0: 5f6c 6f67 290a 0a20 2020 2020 2020 2061  _log)..        a
+000106d0: 7373 6572 7420 6c65 6e28 7265 6365 6970  ssert len(receip
+000106e0: 745b 226c 6f67 7322 5d29 203d 3d20 310a  t["logs"]) == 1.
+000106f0: 2020 2020 2020 2020 6c6f 675f 656e 7472          log_entr
+00010700: 7920 3d20 7265 6365 6970 745b 226c 6f67  y = receipt["log
+00010710: 7322 5d5b 305d 0a0a 2020 2020 2020 2020  s"][0]..        
+00010720: 6173 7365 7274 206c 6f67 5f65 6e74 7279  assert log_entry
+00010730: 5b22 626c 6f63 6b4e 756d 6265 7222 5d20  ["blockNumber"] 
+00010740: 3d3d 2061 7379 6e63 5f62 6c6f 636b 5f77  == async_block_w
+00010750: 6974 685f 7478 6e5f 7769 7468 5f6c 6f67  ith_txn_with_log
+00010760: 5b22 6e75 6d62 6572 225d 0a20 2020 2020  ["number"].     
+00010770: 2020 2061 7373 6572 7420 6c6f 675f 656e     assert log_en
+00010780: 7472 795b 2262 6c6f 636b 4861 7368 225d  try["blockHash"]
+00010790: 203d 3d20 6173 796e 635f 626c 6f63 6b5f   == async_block_
+000107a0: 7769 7468 5f74 786e 5f77 6974 685f 6c6f  with_txn_with_lo
+000107b0: 675b 2268 6173 6822 5d0a 2020 2020 2020  g["hash"].      
+000107c0: 2020 6173 7365 7274 206c 6f67 5f65 6e74    assert log_ent
+000107d0: 7279 5b22 6c6f 6749 6e64 6578 225d 203d  ry["logIndex"] =
+000107e0: 3d20 300a 2020 2020 2020 2020 6173 7365  = 0.        asse
+000107f0: 7274 2069 735f 7361 6d65 5f61 6464 7265  rt is_same_addre
+00010800: 7373 286c 6f67 5f65 6e74 7279 5b22 6164  ss(log_entry["ad
+00010810: 6472 6573 7322 5d2c 2061 7379 6e63 5f65  dress"], async_e
+00010820: 6d69 7474 6572 5f63 6f6e 7472 6163 742e  mitter_contract.
+00010830: 6164 6472 6573 7329 0a20 2020 2020 2020  address).       
+00010840: 2061 7373 6572 7420 6c6f 675f 656e 7472   assert log_entr
+00010850: 795b 2274 7261 6e73 6163 7469 6f6e 496e  y["transactionIn
+00010860: 6465 7822 5d20 3d3d 2030 0a20 2020 2020  dex"] == 0.     
+00010870: 2020 2061 7373 6572 7420 6c6f 675f 656e     assert log_en
+00010880: 7472 795b 2274 7261 6e73 6163 7469 6f6e  try["transaction
+00010890: 4861 7368 225d 203d 3d20 4865 7842 7974  Hash"] == HexByt
+000108a0: 6573 2874 786e 5f68 6173 685f 7769 7468  es(txn_hash_with
+000108b0: 5f6c 6f67 290a 0a20 2020 2040 7079 7465  _log)..    @pyte
+000108c0: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
+000108d0: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
+000108e0: 7374 5f61 7379 6e63 5f65 7468 5f61 6363  st_async_eth_acc
+000108f0: 6f75 6e74 7328 7365 6c66 2c20 6173 796e  ounts(self, asyn
+00010900: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
+00010910: 2229 202d 3e20 4e6f 6e65 3a0a 2020 2020  ") -> None:.    
+00010920: 2020 2020 6163 636f 756e 7473 203d 2061      accounts = a
+00010930: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
+00010940: 682e 6163 636f 756e 7473 0a20 2020 2020  h.accounts.     
+00010950: 2020 2061 7373 6572 7420 6973 5f6c 6973     assert is_lis
+00010960: 745f 6c69 6b65 2861 6363 6f75 6e74 7329  t_like(accounts)
+00010970: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00010980: 6c65 6e28 6163 636f 756e 7473 2920 213d  len(accounts) !=
+00010990: 2030 0a20 2020 2020 2020 2061 7373 6572   0.        asser
+000109a0: 7420 616c 6c28 2869 735f 6368 6563 6b73  t all((is_checks
+000109b0: 756d 5f61 6464 7265 7373 2861 6363 6f75  um_address(accou
+000109c0: 6e74 2920 666f 7220 6163 636f 756e 7420  nt) for account 
+000109d0: 696e 2061 6363 6f75 6e74 7329 290a 2020  in accounts)).  
+000109e0: 2020 2020 2020 6173 7365 7274 2061 7761        assert awa
+000109f0: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
+00010a00: 636f 696e 6261 7365 2069 6e20 6163 636f  coinbase in acco
+00010a10: 756e 7473 0a0a 2020 2020 4070 7974 6573  unts..    @pytes
+00010a20: 742e 6d61 726b 2e61 7379 6e63 696f 0a20  t.mark.asyncio. 
+00010a30: 2020 2061 7379 6e63 2064 6566 2074 6573     async def tes
+00010a40: 745f 6173 796e 635f 6574 685f 6765 745f  t_async_eth_get_
+00010a50: 6c6f 6773 5f77 6974 686f 7574 5f6c 6f67  logs_without_log
+00010a60: 7328 0a20 2020 2020 2020 2073 656c 662c  s(.        self,
+00010a70: 2061 7379 6e63 5f77 333a 2022 4173 796e   async_w3: "Asyn
+00010a80: 6357 6562 3322 2c20 6173 796e 635f 626c  cWeb3", async_bl
+00010a90: 6f63 6b5f 7769 7468 5f74 786e 5f77 6974  ock_with_txn_wit
+00010aa0: 685f 6c6f 673a 2042 6c6f 636b 4461 7461  h_log: BlockData
+00010ab0: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+00010ac0: 2020 2020 2020 2020 2320 5465 7374 2077          # Test w
+00010ad0: 6974 6820 626c 6f63 6b20 7261 6e67 650a  ith block range.
+00010ae0: 0a20 2020 2020 2020 2066 696c 7465 725f  .        filter_
+00010af0: 7061 7261 6d73 3a20 4669 6c74 6572 5061  params: FilterPa
+00010b00: 7261 6d73 203d 207b 0a20 2020 2020 2020  rams = {.       
+00010b10: 2020 2020 2022 6672 6f6d 426c 6f63 6b22       "fromBlock"
+00010b20: 3a20 426c 6f63 6b4e 756d 6265 7228 3029  : BlockNumber(0)
+00010b30: 2c0a 2020 2020 2020 2020 2020 2020 2274  ,.            "t
+00010b40: 6f42 6c6f 636b 223a 2042 6c6f 636b 4e75  oBlock": BlockNu
+00010b50: 6d62 6572 2861 7379 6e63 5f62 6c6f 636b  mber(async_block
+00010b60: 5f77 6974 685f 7478 6e5f 7769 7468 5f6c  _with_txn_with_l
+00010b70: 6f67 5b22 6e75 6d62 6572 225d 202d 2031  og["number"] - 1
+00010b80: 292c 0a20 2020 2020 2020 207d 0a20 2020  ),.        }.   
+00010b90: 2020 2020 2072 6573 756c 7420 3d20 6177       result = aw
+00010ba0: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
+00010bb0: 2e67 6574 5f6c 6f67 7328 6669 6c74 6572  .get_logs(filter
+00010bc0: 5f70 6172 616d 7329 0a20 2020 2020 2020  _params).       
+00010bd0: 2061 7373 6572 7420 6c65 6e28 7265 7375   assert len(resu
+00010be0: 6c74 2920 3d3d 2030 0a0a 2020 2020 2020  lt) == 0..      
+00010bf0: 2020 2320 7468 6520 7261 6e67 6520 6973    # the range is
+00010c00: 2077 726f 6e67 0a20 2020 2020 2020 2066   wrong.        f
+00010c10: 696c 7465 725f 7061 7261 6d73 203d 207b  ilter_params = {
+00010c20: 0a20 2020 2020 2020 2020 2020 2022 6672  .            "fr
+00010c30: 6f6d 426c 6f63 6b22 3a20 6173 796e 635f  omBlock": async_
+00010c40: 626c 6f63 6b5f 7769 7468 5f74 786e 5f77  block_with_txn_w
+00010c50: 6974 685f 6c6f 675b 226e 756d 6265 7222  ith_log["number"
+00010c60: 5d2c 0a20 2020 2020 2020 2020 2020 2022  ],.            "
+00010c70: 746f 426c 6f63 6b22 3a20 426c 6f63 6b4e  toBlock": BlockN
+00010c80: 756d 6265 7228 6173 796e 635f 626c 6f63  umber(async_bloc
+00010c90: 6b5f 7769 7468 5f74 786e 5f77 6974 685f  k_with_txn_with_
+00010ca0: 6c6f 675b 226e 756d 6265 7222 5d20 2d20  log["number"] - 
+00010cb0: 3129 2c0a 2020 2020 2020 2020 7d0a 2020  1),.        }.  
+00010cc0: 2020 2020 2020 7265 7375 6c74 203d 2061        result = a
+00010cd0: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
+00010ce0: 682e 6765 745f 6c6f 6773 2866 696c 7465  h.get_logs(filte
+00010cf0: 725f 7061 7261 6d73 290a 2020 2020 2020  r_params).      
+00010d00: 2020 6173 7365 7274 206c 656e 2872 6573    assert len(res
+00010d10: 756c 7429 203d 3d20 300a 0a20 2020 2020  ult) == 0..     
+00010d20: 2020 2023 2054 6573 7420 7769 7468 2060     # Test with `
+00010d30: 6164 6472 6573 7360 0a0a 2020 2020 2020  address`..      
+00010d40: 2020 2320 6669 6c74 6572 2077 6974 6820    # filter with 
+00010d50: 6f74 6865 7220 6164 6472 6573 730a 2020  other address.  
+00010d60: 2020 2020 2020 6669 6c74 6572 5f70 6172        filter_par
+00010d70: 616d 7320 3d20 7b0a 2020 2020 2020 2020  ams = {.        
+00010d80: 2020 2020 2266 726f 6d42 6c6f 636b 223a      "fromBlock":
+00010d90: 2042 6c6f 636b 4e75 6d62 6572 2830 292c   BlockNumber(0),
+00010da0: 0a20 2020 2020 2020 2020 2020 2022 6164  .            "ad
+00010db0: 6472 6573 7322 3a20 554e 4b4e 4f57 4e5f  dress": UNKNOWN_
+00010dc0: 4144 4452 4553 532c 0a20 2020 2020 2020  ADDRESS,.       
+00010dd0: 207d 0a20 2020 2020 2020 2072 6573 756c   }.        resul
+00010de0: 7420 3d20 6177 6169 7420 6173 796e 635f  t = await async_
+00010df0: 7733 2e65 7468 2e67 6574 5f6c 6f67 7328  w3.eth.get_logs(
+00010e00: 6669 6c74 6572 5f70 6172 616d 7329 0a20  filter_params). 
+00010e10: 2020 2020 2020 2061 7373 6572 7420 6c65         assert le
+00010e20: 6e28 7265 7375 6c74 2920 3d3d 2030 0a0a  n(result) == 0..
+00010e30: 2020 2020 2020 2020 2320 5465 7374 2077          # Test w
+00010e40: 6974 6820 6d75 6c74 6970 6c65 2060 6164  ith multiple `ad
+00010e50: 6472 6573 7360 0a0a 2020 2020 2020 2020  dress`..        
+00010e60: 2320 6669 6c74 6572 2077 6974 6820 6f74  # filter with ot
+00010e70: 6865 7220 6164 6472 6573 730a 2020 2020  her address.    
+00010e80: 2020 2020 6669 6c74 6572 5f70 6172 616d      filter_param
+00010e90: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
+00010ea0: 2020 2266 726f 6d42 6c6f 636b 223a 2042    "fromBlock": B
+00010eb0: 6c6f 636b 4e75 6d62 6572 2830 292c 0a20  lockNumber(0),. 
+00010ec0: 2020 2020 2020 2020 2020 2022 6164 6472             "addr
+00010ed0: 6573 7322 3a20 5b55 4e4b 4e4f 574e 5f41  ess": [UNKNOWN_A
+00010ee0: 4444 5245 5353 2c20 554e 4b4e 4f57 4e5f  DDRESS, UNKNOWN_
+00010ef0: 4144 4452 4553 535d 2c0a 2020 2020 2020  ADDRESS],.      
+00010f00: 2020 7d0a 2020 2020 2020 2020 7265 7375    }.        resu
+00010f10: 6c74 203d 2061 7761 6974 2061 7379 6e63  lt = await async
+00010f20: 5f77 332e 6574 682e 6765 745f 6c6f 6773  _w3.eth.get_logs
+00010f30: 2866 696c 7465 725f 7061 7261 6d73 290a  (filter_params).
+00010f40: 2020 2020 2020 2020 6173 7365 7274 206c          assert l
+00010f50: 656e 2872 6573 756c 7429 203d 3d20 300a  en(result) == 0.
+00010f60: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
+00010f70: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
+00010f80: 796e 6320 6465 6620 7465 7374 5f61 7379  ync def test_asy
+00010f90: 6e63 5f65 7468 5f67 6574 5f6c 6f67 735f  nc_eth_get_logs_
+00010fa0: 7769 7468 5f6c 6f67 7328 0a20 2020 2020  with_logs(.     
+00010fb0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+00010fc0: 2061 7379 6e63 5f77 333a 2022 4173 796e   async_w3: "Asyn
+00010fd0: 6357 6562 3322 2c0a 2020 2020 2020 2020  cWeb3",.        
+00010fe0: 6173 796e 635f 626c 6f63 6b5f 7769 7468  async_block_with
+00010ff0: 5f74 786e 5f77 6974 685f 6c6f 673a 2042  _txn_with_log: B
+00011000: 6c6f 636b 4461 7461 2c0a 2020 2020 2020  lockData,.      
+00011010: 2020 6173 796e 635f 656d 6974 7465 725f    async_emitter_
+00011020: 636f 6e74 7261 6374 5f61 6464 7265 7373  contract_address
+00011030: 3a20 4368 6563 6b73 756d 4164 6472 6573  : ChecksumAddres
+00011040: 732c 0a20 2020 2020 2020 2074 786e 5f68  s,.        txn_h
+00011050: 6173 685f 7769 7468 5f6c 6f67 3a20 4865  ash_with_log: He
+00011060: 7853 7472 2c0a 2020 2020 2920 2d3e 204e  xStr,.    ) -> N
+00011070: 6f6e 653a 0a20 2020 2020 2020 2023 2054  one:.        # T
+00011080: 6573 7420 7769 7468 2062 6c6f 636b 2072  est with block r
+00011090: 616e 6765 0a0a 2020 2020 2020 2020 2320  ange..        # 
+000110a0: 7468 6520 7261 6e67 6520 696e 636c 7564  the range includ
+000110b0: 6573 2074 6865 2062 6c6f 636b 2077 6865  es the block whe
+000110c0: 7265 2074 6865 206c 6f67 2072 6573 6964  re the log resid
+000110d0: 6573 2069 6e0a 2020 2020 2020 2020 6669  es in.        fi
+000110e0: 6c74 6572 5f70 6172 616d 733a 2046 696c  lter_params: Fil
+000110f0: 7465 7250 6172 616d 7320 3d20 7b0a 2020  terParams = {.  
+00011100: 2020 2020 2020 2020 2020 2266 726f 6d42            "fromB
+00011110: 6c6f 636b 223a 2061 7379 6e63 5f62 6c6f  lock": async_blo
+00011120: 636b 5f77 6974 685f 7478 6e5f 7769 7468  ck_with_txn_with
+00011130: 5f6c 6f67 5b22 6e75 6d62 6572 225d 2c0a  _log["number"],.
+00011140: 2020 2020 2020 2020 2020 2020 2274 6f42              "toB
+00011150: 6c6f 636b 223a 2061 7379 6e63 5f62 6c6f  lock": async_blo
+00011160: 636b 5f77 6974 685f 7478 6e5f 7769 7468  ck_with_txn_with
+00011170: 5f6c 6f67 5b22 6e75 6d62 6572 225d 2c0a  _log["number"],.
+00011180: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00011190: 2020 7265 7375 6c74 203d 2061 7761 6974    result = await
+000111a0: 2061 7379 6e63 5f77 332e 6574 682e 6765   async_w3.eth.ge
+000111b0: 745f 6c6f 6773 2866 696c 7465 725f 7061  t_logs(filter_pa
+000111c0: 7261 6d73 290a 2020 2020 2020 2020 6173  rams).        as
+000111d0: 7365 7274 5f63 6f6e 7461 696e 735f 6c6f  sert_contains_lo
+000111e0: 6728 0a20 2020 2020 2020 2020 2020 2072  g(.            r
+000111f0: 6573 756c 742c 0a20 2020 2020 2020 2020  esult,.         
+00011200: 2020 2061 7379 6e63 5f62 6c6f 636b 5f77     async_block_w
+00011210: 6974 685f 7478 6e5f 7769 7468 5f6c 6f67  ith_txn_with_log
+00011220: 2c0a 2020 2020 2020 2020 2020 2020 6173  ,.            as
+00011230: 796e 635f 656d 6974 7465 725f 636f 6e74  ync_emitter_cont
+00011240: 7261 6374 5f61 6464 7265 7373 2c0a 2020  ract_address,.  
+00011250: 2020 2020 2020 2020 2020 7478 6e5f 6861            txn_ha
+00011260: 7368 5f77 6974 685f 6c6f 672c 0a20 2020  sh_with_log,.   
+00011270: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00011280: 2320 7370 6563 6966 7920 6f6e 6c79 2060  # specify only `
+00011290: 6672 6f6d 5f62 6c6f 636b 602e 2062 7920  from_block`. by 
+000112a0: 6465 6661 756c 7420 6074 6f5f 626c 6f63  default `to_bloc
+000112b0: 6b60 2073 686f 756c 6420 6265 2027 6c61  k` should be 'la
+000112c0: 7465 7374 270a 2020 2020 2020 2020 6669  test'.        fi
+000112d0: 6c74 6572 5f70 6172 616d 7320 3d20 7b0a  lter_params = {.
+000112e0: 2020 2020 2020 2020 2020 2020 2266 726f              "fro
+000112f0: 6d42 6c6f 636b 223a 2042 6c6f 636b 4e75  mBlock": BlockNu
+00011300: 6d62 6572 2830 292c 0a20 2020 2020 2020  mber(0),.       
+00011310: 207d 0a20 2020 2020 2020 2072 6573 756c   }.        resul
+00011320: 7420 3d20 6177 6169 7420 6173 796e 635f  t = await async_
+00011330: 7733 2e65 7468 2e67 6574 5f6c 6f67 7328  w3.eth.get_logs(
+00011340: 6669 6c74 6572 5f70 6172 616d 7329 0a20  filter_params). 
+00011350: 2020 2020 2020 2061 7373 6572 745f 636f         assert_co
+00011360: 6e74 6169 6e73 5f6c 6f67 280a 2020 2020  ntains_log(.    
+00011370: 2020 2020 2020 2020 7265 7375 6c74 2c0a          result,.
+00011380: 2020 2020 2020 2020 2020 2020 6173 796e              asyn
+00011390: 635f 626c 6f63 6b5f 7769 7468 5f74 786e  c_block_with_txn
+000113a0: 5f77 6974 685f 6c6f 672c 0a20 2020 2020  _with_log,.     
+000113b0: 2020 2020 2020 2061 7379 6e63 5f65 6d69         async_emi
+000113c0: 7474 6572 5f63 6f6e 7472 6163 745f 6164  tter_contract_ad
+000113d0: 6472 6573 732c 0a20 2020 2020 2020 2020  dress,.         
+000113e0: 2020 2074 786e 5f68 6173 685f 7769 7468     txn_hash_with
+000113f0: 5f6c 6f67 2c0a 2020 2020 2020 2020 290a  _log,.        ).
+00011400: 0a20 2020 2020 2020 2023 2054 6573 7420  .        # Test 
+00011410: 7769 7468 2060 6164 6472 6573 7360 0a0a  with `address`..
+00011420: 2020 2020 2020 2020 2320 6669 6c74 6572          # filter
+00011430: 2077 6974 6820 656d 6974 7465 725f 636f   with emitter_co
+00011440: 6e74 7261 6374 2e61 6464 7265 7373 0a20  ntract.address. 
+00011450: 2020 2020 2020 2066 696c 7465 725f 7061         filter_pa
+00011460: 7261 6d73 203d 207b 0a20 2020 2020 2020  rams = {.       
+00011470: 2020 2020 2022 6672 6f6d 426c 6f63 6b22       "fromBlock"
+00011480: 3a20 426c 6f63 6b4e 756d 6265 7228 3029  : BlockNumber(0)
+00011490: 2c0a 2020 2020 2020 2020 2020 2020 2261  ,.            "a
+000114a0: 6464 7265 7373 223a 2061 7379 6e63 5f65  ddress": async_e
+000114b0: 6d69 7474 6572 5f63 6f6e 7472 6163 745f  mitter_contract_
+000114c0: 6164 6472 6573 732c 0a20 2020 2020 2020  address,.       
+000114d0: 207d 0a20 2020 2020 2020 2072 6573 756c   }.        resul
+000114e0: 7420 3d20 6177 6169 7420 6173 796e 635f  t = await async_
+000114f0: 7733 2e65 7468 2e67 6574 5f6c 6f67 7328  w3.eth.get_logs(
+00011500: 6669 6c74 6572 5f70 6172 616d 7329 0a20  filter_params). 
+00011510: 2020 2020 2020 2061 7373 6572 745f 636f         assert_co
+00011520: 6e74 6169 6e73 5f6c 6f67 280a 2020 2020  ntains_log(.    
+00011530: 2020 2020 2020 2020 7265 7375 6c74 2c0a          result,.
+00011540: 2020 2020 2020 2020 2020 2020 6173 796e              asyn
+00011550: 635f 626c 6f63 6b5f 7769 7468 5f74 786e  c_block_with_txn
+00011560: 5f77 6974 685f 6c6f 672c 0a20 2020 2020  _with_log,.     
+00011570: 2020 2020 2020 2061 7379 6e63 5f65 6d69         async_emi
+00011580: 7474 6572 5f63 6f6e 7472 6163 745f 6164  tter_contract_ad
+00011590: 6472 6573 732c 0a20 2020 2020 2020 2020  dress,.         
+000115a0: 2020 2074 786e 5f68 6173 685f 7769 7468     txn_hash_with
+000115b0: 5f6c 6f67 2c0a 2020 2020 2020 2020 290a  _log,.        ).
+000115c0: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
+000115d0: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
+000115e0: 796e 6320 6465 6620 7465 7374 5f61 7379  ync def test_asy
+000115f0: 6e63 5f65 7468 5f67 6574 5f6c 6f67 735f  nc_eth_get_logs_
+00011600: 7769 7468 5f6c 6f67 735f 746f 7069 635f  with_logs_topic_
+00011610: 6172 6773 280a 2020 2020 2020 2020 7365  args(.        se
+00011620: 6c66 2c0a 2020 2020 2020 2020 6173 796e  lf,.        asyn
+00011630: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
+00011640: 222c 0a20 2020 2020 2020 2061 7379 6e63  ",.        async
+00011650: 5f62 6c6f 636b 5f77 6974 685f 7478 6e5f  _block_with_txn_
+00011660: 7769 7468 5f6c 6f67 3a20 426c 6f63 6b44  with_log: BlockD
+00011670: 6174 612c 0a20 2020 2020 2020 2061 7379  ata,.        asy
+00011680: 6e63 5f65 6d69 7474 6572 5f63 6f6e 7472  nc_emitter_contr
+00011690: 6163 745f 6164 6472 6573 733a 2043 6865  act_address: Che
+000116a0: 636b 7375 6d41 6464 7265 7373 2c0a 2020  cksumAddress,.  
+000116b0: 2020 2020 2020 7478 6e5f 6861 7368 5f77        txn_hash_w
+000116c0: 6974 685f 6c6f 673a 2048 6578 5374 722c  ith_log: HexStr,
+000116d0: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+000116e0: 2020 2020 2020 2020 2320 5465 7374 2077          # Test w
+000116f0: 6974 6820 4e6f 6e65 2065 7665 6e74 2073  ith None event s
+00011700: 6967 0a0a 2020 2020 2020 2020 6669 6c74  ig..        filt
+00011710: 6572 5f70 6172 616d 733a 2046 696c 7465  er_params: Filte
+00011720: 7250 6172 616d 7320 3d20 7b0a 2020 2020  rParams = {.    
+00011730: 2020 2020 2020 2020 2266 726f 6d42 6c6f          "fromBlo
+00011740: 636b 223a 2042 6c6f 636b 4e75 6d62 6572  ck": BlockNumber
+00011750: 2830 292c 0a20 2020 2020 2020 2020 2020  (0),.           
+00011760: 2022 746f 7069 6373 223a 205b 0a20 2020   "topics": [.   
+00011770: 2020 2020 2020 2020 2020 2020 204e 6f6e               Non
+00011780: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+00011790: 2020 2048 6578 5374 7228 0a20 2020 2020     HexStr(.     
+000117a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000117b0: 3078 3030 3030 3030 3030 3030 3030 3030  0x00000000000000
+000117c0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+000117d0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+000117e0: 3030 3030 3030 3030 3030 3030 3030 6434  00000000000000d4
+000117f0: 3331 220a 2020 2020 2020 2020 2020 2020  31".            
+00011800: 2020 2020 292c 0a20 2020 2020 2020 2020      ),.         
+00011810: 2020 205d 2c0a 2020 2020 2020 2020 7d0a     ],.        }.
+00011820: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+00011830: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
+00011840: 2e65 7468 2e67 6574 5f6c 6f67 7328 6669  .eth.get_logs(fi
+00011850: 6c74 6572 5f70 6172 616d 7329 0a20 2020  lter_params).   
+00011860: 2020 2020 2061 7373 6572 745f 636f 6e74       assert_cont
+00011870: 6169 6e73 5f6c 6f67 280a 2020 2020 2020  ains_log(.      
+00011880: 2020 2020 2020 7265 7375 6c74 2c0a 2020        result,.  
+00011890: 2020 2020 2020 2020 2020 6173 796e 635f            async_
+000118a0: 626c 6f63 6b5f 7769 7468 5f74 786e 5f77  block_with_txn_w
+000118b0: 6974 685f 6c6f 672c 0a20 2020 2020 2020  ith_log,.       
+000118c0: 2020 2020 2061 7379 6e63 5f65 6d69 7474       async_emitt
+000118d0: 6572 5f63 6f6e 7472 6163 745f 6164 6472  er_contract_addr
+000118e0: 6573 732c 0a20 2020 2020 2020 2020 2020  ess,.           
+000118f0: 2074 786e 5f68 6173 685f 7769 7468 5f6c   txn_hash_with_l
+00011900: 6f67 2c0a 2020 2020 2020 2020 290a 0a20  og,.        ).. 
+00011910: 2020 2020 2020 2023 2054 6573 7420 7769         # Test wi
+00011920: 7468 204e 6f6e 6520 696e 6465 7865 6420  th None indexed 
+00011930: 6172 670a 2020 2020 2020 2020 6669 6c74  arg.        filt
+00011940: 6572 5f70 6172 616d 7320 3d20 7b0a 2020  er_params = {.  
+00011950: 2020 2020 2020 2020 2020 2266 726f 6d42            "fromB
+00011960: 6c6f 636b 223a 2042 6c6f 636b 4e75 6d62  lock": BlockNumb
+00011970: 6572 2830 292c 0a20 2020 2020 2020 2020  er(0),.         
+00011980: 2020 2022 746f 7069 6373 223a 205b 0a20     "topics": [. 
+00011990: 2020 2020 2020 2020 2020 2020 2020 2048                 H
+000119a0: 6578 5374 7228 0a20 2020 2020 2020 2020  exStr(.         
+000119b0: 2020 2020 2020 2020 2020 2022 3078 3035             "0x05
+000119c0: 3762 6333 3238 3236 6662 6531 3631 6461  7bc32826fbe161da
+000119d0: 3163 3131 3061 6663 6463 6165 3763 3130  1c110afcdcae7c10
+000119e0: 3961 3862 3639 3134 3966 3732 3766 6333  9a8b69149f727fc3
+000119f0: 3761 3630 3363 3630 6566 3934 6361 220a  7a603c60ef94ca".
+00011a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011a10: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+00011a20: 2020 204e 6f6e 652c 0a20 2020 2020 2020     None,.       
+00011a30: 2020 2020 205d 2c0a 2020 2020 2020 2020       ],.        
+00011a40: 7d0a 2020 2020 2020 2020 7265 7375 6c74  }.        result
+00011a50: 203d 2061 7761 6974 2061 7379 6e63 5f77   = await async_w
+00011a60: 332e 6574 682e 6765 745f 6c6f 6773 2866  3.eth.get_logs(f
+00011a70: 696c 7465 725f 7061 7261 6d73 290a 2020  ilter_params).  
+00011a80: 2020 2020 2020 6173 7365 7274 5f63 6f6e        assert_con
+00011a90: 7461 696e 735f 6c6f 6728 0a20 2020 2020  tains_log(.     
+00011aa0: 2020 2020 2020 2072 6573 756c 742c 0a20         result,. 
+00011ab0: 2020 2020 2020 2020 2020 2061 7379 6e63             async
+00011ac0: 5f62 6c6f 636b 5f77 6974 685f 7478 6e5f  _block_with_txn_
+00011ad0: 7769 7468 5f6c 6f67 2c0a 2020 2020 2020  with_log,.      
+00011ae0: 2020 2020 2020 6173 796e 635f 656d 6974        async_emit
+00011af0: 7465 725f 636f 6e74 7261 6374 5f61 6464  ter_contract_add
+00011b00: 7265 7373 2c0a 2020 2020 2020 2020 2020  ress,.          
+00011b10: 2020 7478 6e5f 6861 7368 5f77 6974 685f    txn_hash_with_
+00011b20: 6c6f 672c 0a20 2020 2020 2020 2029 0a0a  log,.        )..
+00011b30: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
+00011b40: 2e61 7379 6e63 696f 0a20 2020 2061 7379  .asyncio.    asy
+00011b50: 6e63 2064 6566 2074 6573 745f 6173 796e  nc def test_asyn
+00011b60: 635f 6574 685f 6765 745f 6c6f 6773 5f77  c_eth_get_logs_w
+00011b70: 6974 685f 6c6f 6773 5f6e 6f6e 655f 746f  ith_logs_none_to
+00011b80: 7069 635f 6172 6773 280a 2020 2020 2020  pic_args(.      
+00011b90: 2020 7365 6c66 2c20 6173 796e 635f 7733    self, async_w3
+00011ba0: 3a20 2241 7379 6e63 5765 6233 220a 2020  : "AsyncWeb3".  
+00011bb0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+00011bc0: 2020 2020 2023 2054 6573 7420 7769 7468       # Test with
+00011bd0: 204e 6f6e 6520 6f76 6572 666c 6f77 696e   None overflowin
+00011be0: 670a 2020 2020 2020 2020 6669 6c74 6572  g.        filter
+00011bf0: 5f70 6172 616d 733a 2046 696c 7465 7250  _params: FilterP
+00011c00: 6172 616d 7320 3d20 7b0a 2020 2020 2020  arams = {.      
+00011c10: 2020 2020 2020 2266 726f 6d42 6c6f 636b        "fromBlock
+00011c20: 223a 2042 6c6f 636b 4e75 6d62 6572 2830  ": BlockNumber(0
+00011c30: 292c 0a20 2020 2020 2020 2020 2020 2022  ),.            "
+00011c40: 746f 7069 6373 223a 205b 4e6f 6e65 2c20  topics": [None, 
+00011c50: 4e6f 6e65 2c20 4e6f 6e65 5d2c 0a20 2020  None, None],.   
+00011c60: 2020 2020 207d 0a0a 2020 2020 2020 2020       }..        
+00011c70: 7265 7375 6c74 203d 2061 7761 6974 2061  result = await a
+00011c80: 7379 6e63 5f77 332e 6574 682e 6765 745f  sync_w3.eth.get_
+00011c90: 6c6f 6773 2866 696c 7465 725f 7061 7261  logs(filter_para
+00011ca0: 6d73 290a 2020 2020 2020 2020 6173 7365  ms).        asse
+00011cb0: 7274 206c 656e 2872 6573 756c 7429 203d  rt len(result) =
+00011cc0: 3d20 300a 0a20 2020 2040 7079 7465 7374  = 0..    @pytest
+00011cd0: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
+00011ce0: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
+00011cf0: 5f61 7379 6e63 5f65 7468 5f73 796e 6369  _async_eth_synci
+00011d00: 6e67 2873 656c 662c 2061 7379 6e63 5f77  ng(self, async_w
+00011d10: 333a 2022 4173 796e 6357 6562 3322 2920  3: "AsyncWeb3") 
+00011d20: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+00011d30: 2073 796e 6369 6e67 203d 2061 7761 6974   syncing = await
+00011d40: 2061 7379 6e63 5f77 332e 6574 682e 7379   async_w3.eth.sy
+00011d50: 6e63 696e 670a 0a20 2020 2020 2020 2061  ncing..        a
+00011d60: 7373 6572 7420 6973 5f62 6f6f 6c65 616e  ssert is_boolean
+00011d70: 2873 796e 6369 6e67 2920 6f72 2069 735f  (syncing) or is_
+00011d80: 6469 6374 2873 796e 6369 6e67 290a 0a20  dict(syncing).. 
+00011d90: 2020 2020 2020 2069 6620 6973 5f62 6f6f         if is_boo
+00011da0: 6c65 616e 2873 796e 6369 6e67 293a 0a20  lean(syncing):. 
+00011db0: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+00011dc0: 7420 7379 6e63 696e 6720 6973 2046 616c  t syncing is Fal
+00011dd0: 7365 0a20 2020 2020 2020 2065 6c69 6620  se.        elif 
+00011de0: 6973 5f64 6963 7428 7379 6e63 696e 6729  is_dict(syncing)
+00011df0: 3a0a 2020 2020 2020 2020 2020 2020 7379  :.            sy
+00011e00: 6e63 5f64 6963 7420 3d20 6361 7374 2853  nc_dict = cast(S
+00011e10: 796e 6353 7461 7475 732c 2073 796e 6369  yncStatus, synci
+00011e20: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+00011e30: 6173 7365 7274 2022 7374 6172 7469 6e67  assert "starting
+00011e40: 426c 6f63 6b22 2069 6e20 7379 6e63 5f64  Block" in sync_d
+00011e50: 6963 740a 2020 2020 2020 2020 2020 2020  ict.            
+00011e60: 6173 7365 7274 2022 6375 7272 656e 7442  assert "currentB
+00011e70: 6c6f 636b 2220 696e 2073 796e 635f 6469  lock" in sync_di
+00011e80: 6374 0a20 2020 2020 2020 2020 2020 2061  ct.            a
+00011e90: 7373 6572 7420 2268 6967 6865 7374 426c  ssert "highestBl
+00011ea0: 6f63 6b22 2069 6e20 7379 6e63 5f64 6963  ock" in sync_dic
+00011eb0: 740a 0a20 2020 2020 2020 2020 2020 2061  t..            a
+00011ec0: 7373 6572 7420 6973 5f69 6e74 6567 6572  ssert is_integer
+00011ed0: 2873 796e 635f 6469 6374 5b22 7374 6172  (sync_dict["star
+00011ee0: 7469 6e67 426c 6f63 6b22 5d29 0a20 2020  tingBlock"]).   
+00011ef0: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
+00011f00: 6973 5f69 6e74 6567 6572 2873 796e 635f  is_integer(sync_
+00011f10: 6469 6374 5b22 6375 7272 656e 7442 6c6f  dict["currentBlo
+00011f20: 636b 225d 290a 2020 2020 2020 2020 2020  ck"]).          
+00011f30: 2020 6173 7365 7274 2069 735f 696e 7465    assert is_inte
+00011f40: 6765 7228 7379 6e63 5f64 6963 745b 2268  ger(sync_dict["h
+00011f50: 6967 6865 7374 426c 6f63 6b22 5d29 0a0a  ighestBlock"])..
+00011f60: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
+00011f70: 2e61 7379 6e63 696f 0a20 2020 2061 7379  .asyncio.    asy
+00011f80: 6e63 2064 6566 2074 6573 745f 6173 796e  nc def test_asyn
+00011f90: 635f 6574 685f 6765 745f 7374 6f72 6167  c_eth_get_storag
+00011fa0: 655f 6174 280a 2020 2020 2020 2020 7365  e_at(.        se
+00011fb0: 6c66 2c20 6173 796e 635f 7733 3a20 2241  lf, async_w3: "A
+00011fc0: 7379 6e63 5765 6233 222c 2061 7379 6e63  syncWeb3", async
+00011fd0: 5f73 746f 7261 6765 5f63 6f6e 7472 6163  _storage_contrac
+00011fe0: 743a 2022 436f 6e74 7261 6374 220a 2020  t: "Contract".  
+00011ff0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+00012000: 2020 2020 2061 7379 6e63 5f73 746f 7261       async_stora
+00012010: 6765 5f63 6f6e 7472 6163 745f 6164 6472  ge_contract_addr
+00012020: 6573 7320 3d20 6173 796e 635f 7374 6f72  ess = async_stor
+00012030: 6167 655f 636f 6e74 7261 6374 2e61 6464  age_contract.add
+00012040: 7265 7373 0a0a 2020 2020 2020 2020 736c  ress..        sl
+00012050: 6f74 5f30 203d 2061 7761 6974 2061 7379  ot_0 = await asy
+00012060: 6e63 5f77 332e 6574 682e 6765 745f 7374  nc_w3.eth.get_st
+00012070: 6f72 6167 655f 6174 2861 7379 6e63 5f73  orage_at(async_s
+00012080: 746f 7261 6765 5f63 6f6e 7472 6163 745f  torage_contract_
+00012090: 6164 6472 6573 732c 2030 290a 2020 2020  address, 0).    
+000120a0: 2020 2020 6173 7365 7274 2073 6c6f 745f      assert slot_
+000120b0: 3020 3d3d 2048 6578 4279 7465 7328 6622  0 == HexBytes(f"
+000120c0: 3078 7b27 3030 2720 2a20 3332 7d22 290a  0x{'00' * 32}").
+000120d0: 0a20 2020 2020 2020 2073 6c6f 745f 3120  .        slot_1 
+000120e0: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
+000120f0: 2e65 7468 2e67 6574 5f73 746f 7261 6765  .eth.get_storage
+00012100: 5f61 7428 6173 796e 635f 7374 6f72 6167  _at(async_storag
+00012110: 655f 636f 6e74 7261 6374 5f61 6464 7265  e_contract_addre
+00012120: 7373 2c20 3129 0a20 2020 2020 2020 2061  ss, 1).        a
+00012130: 7373 6572 7420 736c 6f74 5f31 203d 3d20  ssert slot_1 == 
+00012140: 4865 7842 7974 6573 2866 2230 787b 2730  HexBytes(f"0x{'0
+00012150: 3027 202a 2033 317d 3031 2229 0a0a 2020  0' * 31}01")..  
+00012160: 2020 2020 2020 736c 6f74 5f32 203d 2061        slot_2 = a
+00012170: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
+00012180: 682e 6765 745f 7374 6f72 6167 655f 6174  h.get_storage_at
+00012190: 2861 7379 6e63 5f73 746f 7261 6765 5f63  (async_storage_c
+000121a0: 6f6e 7472 6163 745f 6164 6472 6573 732c  ontract_address,
+000121b0: 2032 290a 2020 2020 2020 2020 6173 7365   2).        asse
+000121c0: 7274 2073 6c6f 745f 3220 3d3d 2048 6578  rt slot_2 == Hex
+000121d0: 4279 7465 7328 6622 3078 7b27 3030 2720  Bytes(f"0x{'00' 
+000121e0: 2a20 3331 7d30 3222 290a 0a20 2020 2020  * 31}02")..     
+000121f0: 2020 2073 6c6f 745f 3320 3d20 6177 6169     slot_3 = awai
+00012200: 7420 6173 796e 635f 7733 2e65 7468 2e67  t async_w3.eth.g
+00012210: 6574 5f73 746f 7261 6765 5f61 7428 6173  et_storage_at(as
+00012220: 796e 635f 7374 6f72 6167 655f 636f 6e74  ync_storage_cont
+00012230: 7261 6374 5f61 6464 7265 7373 2c20 3329  ract_address, 3)
+00012240: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00012250: 736c 6f74 5f33 203d 3d20 4865 7842 7974  slot_3 == HexByt
+00012260: 6573 280a 2020 2020 2020 2020 2020 2020  es(.            
+00012270: 2230 7837 3436 3837 3236 3536 3530 3030  "0x7468726565000
+00012280: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+00012290: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+000122a0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+000122b0: 3030 6122 0a20 2020 2020 2020 2029 0a20  00a".        ). 
+000122c0: 2020 2020 2020 2061 7373 6572 7420 6279         assert by
+000122d0: 7465 7328 736c 6f74 5f33 5b3a 355d 2920  tes(slot_3[:5]) 
+000122e0: 3d3d 2062 2274 6872 6565 220a 0a20 2020  == b"three"..   
+000122f0: 2020 2020 2073 6c6f 745f 3420 3d20 6177       slot_4 = aw
+00012300: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
+00012310: 2e67 6574 5f73 746f 7261 6765 5f61 7428  .get_storage_at(
+00012320: 6173 796e 635f 7374 6f72 6167 655f 636f  async_storage_co
+00012330: 6e74 7261 6374 5f61 6464 7265 7373 2c20  ntract_address, 
+00012340: 3429 0a20 2020 2020 2020 2061 7373 6572  4).        asser
+00012350: 7420 736c 6f74 5f34 203d 3d20 4865 7842  t slot_4 == HexB
+00012360: 7974 6573 280a 2020 2020 2020 2020 2020  ytes(.          
+00012370: 2020 2230 7836 3636 6637 3537 3230 3030    "0x666f7572000
+00012380: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+00012390: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+000123a0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+000123b0: 3030 3030 3822 0a20 2020 2020 2020 2029  00008".        )
+000123c0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+000123d0: 6279 7465 7328 736c 6f74 5f34 5b3a 345d  bytes(slot_4[:4]
+000123e0: 2920 3d3d 2062 2266 6f75 7222 0a0a 2020  ) == b"four"..  
+000123f0: 2020 4070 7974 6573 742e 6d61 726b 2e61    @pytest.mark.a
+00012400: 7379 6e63 696f 0a20 2020 2040 7079 7465  syncio.    @pyte
+00012410: 7374 2e6d 6172 6b2e 7866 6169 6c0a 2020  st.mark.xfail.  
+00012420: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
+00012430: 5f61 7379 6e63 5f65 7468 5f67 6574 5f73  _async_eth_get_s
+00012440: 746f 7261 6765 5f61 745f 656e 735f 6e61  torage_at_ens_na
+00012450: 6d65 280a 2020 2020 2020 2020 7365 6c66  me(.        self
+00012460: 2c20 6173 796e 635f 7733 3a20 2241 7379  , async_w3: "Asy
+00012470: 6e63 5765 6233 222c 2061 7379 6e63 5f73  ncWeb3", async_s
+00012480: 746f 7261 6765 5f63 6f6e 7472 6163 743a  torage_contract:
+00012490: 2022 436f 6e74 7261 6374 220a 2020 2020   "Contract".    
+000124a0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+000124b0: 2020 2077 6974 6820 656e 735f 6164 6472     with ens_addr
+000124c0: 6573 7365 7328 6173 796e 635f 7733 2c20  esses(async_w3, 
+000124d0: 7b22 7374 6f72 6167 652e 6574 6822 3a20  {"storage.eth": 
+000124e0: 6173 796e 635f 7374 6f72 6167 655f 636f  async_storage_co
+000124f0: 6e74 7261 6374 2e61 6464 7265 7373 7d29  ntract.address})
+00012500: 3a0a 2020 2020 2020 2020 2020 2020 7374  :.            st
+00012510: 6f72 6167 6520 3d20 6177 6169 7420 6173  orage = await as
+00012520: 796e 635f 7733 2e65 7468 2e67 6574 5f73  ync_w3.eth.get_s
+00012530: 746f 7261 6765 5f61 7428 454e 5328 2273  torage_at(ENS("s
+00012540: 746f 7261 6765 2e65 7468 2229 2c20 3129  torage.eth"), 1)
+00012550: 0a20 2020 2020 2020 2020 2020 2061 7373  .            ass
+00012560: 6572 7420 7374 6f72 6167 6520 3d3d 2048  ert storage == H
+00012570: 6578 4279 7465 7328 6622 3078 7b27 3030  exBytes(f"0x{'00
+00012580: 2720 2a20 3331 7d30 3122 290a 0a20 2020  ' * 31}01")..   
+00012590: 2040 7079 7465 7374 2e6d 6172 6b2e 6173   @pytest.mark.as
+000125a0: 796e 6369 6f0a 2020 2020 6173 796e 6320  yncio.    async 
+000125b0: 6465 6620 7465 7374 5f61 7379 6e63 5f65  def test_async_e
+000125c0: 7468 5f67 6574 5f73 746f 7261 6765 5f61  th_get_storage_a
+000125d0: 745f 696e 7661 6c69 645f 6164 6472 6573  t_invalid_addres
+000125e0: 7328 0a20 2020 2020 2020 2073 656c 662c  s(.        self,
+000125f0: 2061 7379 6e63 5f77 333a 2022 4173 796e   async_w3: "Asyn
+00012600: 6357 6562 3322 0a20 2020 2029 202d 3e20  cWeb3".    ) -> 
+00012610: 4e6f 6e65 3a0a 2020 2020 2020 2020 636f  None:.        co
+00012620: 696e 6261 7365 203d 2061 7761 6974 2061  inbase = await a
+00012630: 7379 6e63 5f77 332e 6574 682e 636f 696e  sync_w3.eth.coin
+00012640: 6261 7365 0a20 2020 2020 2020 2077 6974  base.        wit
+00012650: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
+00012660: 496e 7661 6c69 6441 6464 7265 7373 293a  InvalidAddress):
+00012670: 0a20 2020 2020 2020 2020 2020 2061 7761  .            awa
+00012680: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
+00012690: 6765 745f 7374 6f72 6167 655f 6174 280a  get_storage_at(.
+000126a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000126b0: 4368 6563 6b73 756d 4164 6472 6573 7328  ChecksumAddress(
+000126c0: 4865 7841 6464 7265 7373 2848 6578 5374  HexAddress(HexSt
+000126d0: 7228 636f 696e 6261 7365 2e6c 6f77 6572  r(coinbase.lower
+000126e0: 2829 2929 292c 2030 0a20 2020 2020 2020  ()))), 0.       
+000126f0: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
+00012700: 7465 7374 5f61 7379 6e63 5f70 726f 7669  test_async_provi
+00012710: 6465 725f 6465 6661 756c 745f 6163 636f  der_default_acco
+00012720: 756e 7428 0a20 2020 2020 2020 2073 656c  unt(.        sel
+00012730: 662c 2061 7379 6e63 5f77 333a 2022 4173  f, async_w3: "As
+00012740: 796e 6357 6562 3322 2c20 6173 796e 635f  yncWeb3", async_
+00012750: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+00012760: 5f64 7561 6c5f 7479 7065 3a20 4368 6563  _dual_type: Chec
+00012770: 6b73 756d 4164 6472 6573 730a 2020 2020  ksumAddress.    
+00012780: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+00012790: 2020 2023 2063 6865 636b 2064 6566 6175     # check defau
+000127a0: 6c74 7320 746f 2065 6d70 7479 0a20 2020  lts to empty.   
+000127b0: 2020 2020 2064 6566 6175 6c74 5f61 6363       default_acc
+000127c0: 6f75 6e74 203d 2061 7379 6e63 5f77 332e  ount = async_w3.
+000127d0: 6574 682e 6465 6661 756c 745f 6163 636f  eth.default_acco
+000127e0: 756e 740a 2020 2020 2020 2020 6173 7365  unt.        asse
+000127f0: 7274 2064 6566 6175 6c74 5f61 6363 6f75  rt default_accou
+00012800: 6e74 2069 7320 656d 7074 790a 0a20 2020  nt is empty..   
+00012810: 2020 2020 2023 2063 6865 636b 2073 6574       # check set
+00012820: 7465 720a 2020 2020 2020 2020 6173 796e  ter.        asyn
+00012830: 635f 7733 2e65 7468 2e64 6566 6175 6c74  c_w3.eth.default
+00012840: 5f61 6363 6f75 6e74 203d 2061 7379 6e63  _account = async
+00012850: 5f75 6e6c 6f63 6b65 645f 6163 636f 756e  _unlocked_accoun
+00012860: 745f 6475 616c 5f74 7970 650a 2020 2020  t_dual_type.    
+00012870: 2020 2020 6465 6661 756c 745f 6163 636f      default_acco
+00012880: 756e 7420 3d20 6173 796e 635f 7733 2e65  unt = async_w3.e
+00012890: 7468 2e64 6566 6175 6c74 5f61 6363 6f75  th.default_accou
+000128a0: 6e74 0a20 2020 2020 2020 2061 7373 6572  nt.        asser
+000128b0: 7420 6465 6661 756c 745f 6163 636f 756e  t default_accoun
+000128c0: 7420 3d3d 2061 7379 6e63 5f75 6e6c 6f63  t == async_unloc
+000128d0: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+000128e0: 5f74 7970 650a 0a20 2020 2020 2020 2023  _type..        #
+000128f0: 2072 6573 6574 2074 6f20 6465 6661 756c   reset to defaul
+00012900: 740a 2020 2020 2020 2020 6173 796e 635f  t.        async_
+00012910: 7733 2e65 7468 2e64 6566 6175 6c74 5f61  w3.eth.default_a
+00012920: 6363 6f75 6e74 203d 2065 6d70 7479 0a0a  ccount = empty..
+00012930: 2020 2020 6465 6620 7465 7374 5f61 7379      def test_asy
+00012940: 6e63 5f70 726f 7669 6465 725f 6465 6661  nc_provider_defa
+00012950: 756c 745f 626c 6f63 6b28 0a20 2020 2020  ult_block(.     
+00012960: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+00012970: 2061 7379 6e63 5f77 333a 2022 4173 796e   async_w3: "Asyn
+00012980: 6357 6562 3322 2c0a 2020 2020 2920 2d3e  cWeb3",.    ) ->
+00012990: 204e 6f6e 653a 0a20 2020 2020 2020 2023   None:.        #
+000129a0: 2063 6865 636b 2064 6566 6175 6c74 7320   check defaults 
+000129b0: 746f 2027 6c61 7465 7374 270a 2020 2020  to 'latest'.    
+000129c0: 2020 2020 6465 6661 756c 745f 626c 6f63      default_bloc
+000129d0: 6b20 3d20 6173 796e 635f 7733 2e65 7468  k = async_w3.eth
+000129e0: 2e64 6566 6175 6c74 5f62 6c6f 636b 0a20  .default_block. 
+000129f0: 2020 2020 2020 2061 7373 6572 7420 6465         assert de
+00012a00: 6661 756c 745f 626c 6f63 6b20 3d3d 2022  fault_block == "
+00012a10: 6c61 7465 7374 220a 0a20 2020 2020 2020  latest"..       
+00012a20: 2023 2063 6865 636b 2073 6574 7465 720a   # check setter.
+00012a30: 2020 2020 2020 2020 6173 796e 635f 7733          async_w3
+00012a40: 2e65 7468 2e64 6566 6175 6c74 5f62 6c6f  .eth.default_blo
+00012a50: 636b 203d 2042 6c6f 636b 4e75 6d62 6572  ck = BlockNumber
+00012a60: 2831 3233 3435 290a 2020 2020 2020 2020  (12345).        
+00012a70: 6465 6661 756c 745f 626c 6f63 6b20 3d20  default_block = 
+00012a80: 6173 796e 635f 7733 2e65 7468 2e64 6566  async_w3.eth.def
+00012a90: 6175 6c74 5f62 6c6f 636b 0a20 2020 2020  ault_block.     
+00012aa0: 2020 2061 7373 6572 7420 6465 6661 756c     assert defaul
+00012ab0: 745f 626c 6f63 6b20 3d3d 2042 6c6f 636b  t_block == Block
+00012ac0: 4e75 6d62 6572 2831 3233 3435 290a 0a20  Number(12345).. 
+00012ad0: 2020 2020 2020 2023 2072 6573 6574 2074         # reset t
+00012ae0: 6f20 6465 6661 756c 740a 2020 2020 2020  o default.      
+00012af0: 2020 6173 796e 635f 7733 2e65 7468 2e64    async_w3.eth.d
+00012b00: 6566 6175 6c74 5f62 6c6f 636b 203d 2022  efault_block = "
+00012b10: 6c61 7465 7374 220a 0a20 2020 2040 7079  latest"..    @py
+00012b20: 7465 7374 2e6d 6172 6b2e 6173 796e 6369  test.mark.asynci
+00012b30: 6f0a 2020 2020 6173 796e 6320 6465 6620  o.    async def 
+00012b40: 7465 7374 5f65 7468 5f67 6574 426c 6f63  test_eth_getBloc
+00012b50: 6b54 7261 6e73 6163 7469 6f6e 436f 756e  kTransactionCoun
+00012b60: 7442 7948 6173 685f 6173 796e 635f 656d  tByHash_async_em
+00012b70: 7074 795f 626c 6f63 6b28 0a20 2020 2020  pty_block(.     
+00012b80: 2020 2073 656c 662c 2061 7379 6e63 5f77     self, async_w
+00012b90: 333a 2022 4173 796e 6357 6562 3322 2c20  3: "AsyncWeb3", 
+00012ba0: 6173 796e 635f 656d 7074 795f 626c 6f63  async_empty_bloc
+00012bb0: 6b3a 2042 6c6f 636b 4461 7461 0a20 2020  k: BlockData.   
+00012bc0: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
+00012bd0: 2020 2020 7472 616e 7361 6374 696f 6e5f      transaction_
+00012be0: 636f 756e 7420 3d20 6177 6169 7420 6173  count = await as
+00012bf0: 796e 635f 7733 2e65 7468 2e67 6574 5f62  ync_w3.eth.get_b
+00012c00: 6c6f 636b 5f74 7261 6e73 6163 7469 6f6e  lock_transaction
+00012c10: 5f63 6f75 6e74 280a 2020 2020 2020 2020  _count(.        
+00012c20: 2020 2020 6173 796e 635f 656d 7074 795f      async_empty_
+00012c30: 626c 6f63 6b5b 2268 6173 6822 5d0a 2020  block["hash"].  
+00012c40: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+00012c50: 2061 7373 6572 7420 6973 5f69 6e74 6567   assert is_integ
+00012c60: 6572 2874 7261 6e73 6163 7469 6f6e 5f63  er(transaction_c
+00012c70: 6f75 6e74 290a 2020 2020 2020 2020 6173  ount).        as
+00012c80: 7365 7274 2074 7261 6e73 6163 7469 6f6e  sert transaction
+00012c90: 5f63 6f75 6e74 203d 3d20 300a 0a20 2020  _count == 0..   
+00012ca0: 2040 7079 7465 7374 2e6d 6172 6b2e 6173   @pytest.mark.as
+00012cb0: 796e 6369 6f0a 2020 2020 6173 796e 6320  yncio.    async 
+00012cc0: 6465 6620 7465 7374 5f65 7468 5f67 6574  def test_eth_get
+00012cd0: 426c 6f63 6b54 7261 6e73 6163 7469 6f6e  BlockTransaction
+00012ce0: 436f 756e 7442 794e 756d 6265 725f 6173  CountByNumber_as
+00012cf0: 796e 635f 656d 7074 795f 626c 6f63 6b28  ync_empty_block(
+00012d00: 0a20 2020 2020 2020 2073 656c 662c 2061  .        self, a
+00012d10: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
+00012d20: 6562 3322 2c20 6173 796e 635f 656d 7074  eb3", async_empt
+00012d30: 795f 626c 6f63 6b3a 2042 6c6f 636b 4461  y_block: BlockDa
+00012d40: 7461 0a20 2020 2029 202d 3e20 4e6f 6e65  ta.    ) -> None
+00012d50: 3a0a 2020 2020 2020 2020 7472 616e 7361  :.        transa
+00012d60: 6374 696f 6e5f 636f 756e 7420 3d20 6177  ction_count = aw
+00012d70: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
+00012d80: 2e67 6574 5f62 6c6f 636b 5f74 7261 6e73  .get_block_trans
+00012d90: 6163 7469 6f6e 5f63 6f75 6e74 280a 2020  action_count(.  
+00012da0: 2020 2020 2020 2020 2020 6173 796e 635f            async_
+00012db0: 656d 7074 795f 626c 6f63 6b5b 226e 756d  empty_block["num
+00012dc0: 6265 7222 5d0a 2020 2020 2020 2020 290a  ber"].        ).
+00012dd0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00012de0: 6973 5f69 6e74 6567 6572 2874 7261 6e73  is_integer(trans
+00012df0: 6163 7469 6f6e 5f63 6f75 6e74 290a 2020  action_count).  
+00012e00: 2020 2020 2020 6173 7365 7274 2074 7261        assert tra
+00012e10: 6e73 6163 7469 6f6e 5f63 6f75 6e74 203d  nsaction_count =
+00012e20: 3d20 300a 0a20 2020 2040 7079 7465 7374  = 0..    @pytest
+00012e30: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
+00012e40: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
+00012e50: 5f65 7468 5f67 6574 426c 6f63 6b54 7261  _eth_getBlockTra
+00012e60: 6e73 6163 7469 6f6e 436f 756e 7442 7948  nsactionCountByH
+00012e70: 6173 685f 626c 6f63 6b5f 7769 7468 5f74  ash_block_with_t
+00012e80: 786e 280a 2020 2020 2020 2020 7365 6c66  xn(.        self
+00012e90: 2c20 6173 796e 635f 7733 3a20 2241 7379  , async_w3: "Asy
+00012ea0: 6e63 5765 6233 222c 2061 7379 6e63 5f62  ncWeb3", async_b
+00012eb0: 6c6f 636b 5f77 6974 685f 7478 6e3a 2042  lock_with_txn: B
+00012ec0: 6c6f 636b 4461 7461 0a20 2020 2029 202d  lockData.    ) -
+00012ed0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00012ee0: 7472 616e 7361 6374 696f 6e5f 636f 756e  transaction_coun
+00012ef0: 7420 3d20 6177 6169 7420 6173 796e 635f  t = await async_
+00012f00: 7733 2e65 7468 2e67 6574 5f62 6c6f 636b  w3.eth.get_block
+00012f10: 5f74 7261 6e73 6163 7469 6f6e 5f63 6f75  _transaction_cou
+00012f20: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
+00012f30: 6173 796e 635f 626c 6f63 6b5f 7769 7468  async_block_with
+00012f40: 5f74 786e 5b22 6861 7368 225d 0a20 2020  _txn["hash"].   
+00012f50: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00012f60: 6173 7365 7274 2069 735f 696e 7465 6765  assert is_intege
+00012f70: 7228 7472 616e 7361 6374 696f 6e5f 636f  r(transaction_co
+00012f80: 756e 7429 0a20 2020 2020 2020 2061 7373  unt).        ass
+00012f90: 6572 7420 7472 616e 7361 6374 696f 6e5f  ert transaction_
+00012fa0: 636f 756e 7420 3e3d 2031 0a0a 2020 2020  count >= 1..    
+00012fb0: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
+00012fc0: 6e63 696f 0a20 2020 2061 7379 6e63 2064  ncio.    async d
+00012fd0: 6566 2074 6573 745f 6574 685f 6765 7455  ef test_eth_getU
+00012fe0: 6e63 6c65 436f 756e 7442 7942 6c6f 636b  ncleCountByBlock
+00012ff0: 4861 7368 280a 2020 2020 2020 2020 7365  Hash(.        se
+00013000: 6c66 2c20 6173 796e 635f 7733 3a20 2241  lf, async_w3: "A
+00013010: 7379 6e63 5765 6233 222c 2061 7379 6e63  syncWeb3", async
+00013020: 5f65 6d70 7479 5f62 6c6f 636b 3a20 426c  _empty_block: Bl
+00013030: 6f63 6b44 6174 610a 2020 2020 2920 2d3e  ockData.    ) ->
+00013040: 204e 6f6e 653a 0a20 2020 2020 2020 2075   None:.        u
+00013050: 6e63 6c65 5f63 6f75 6e74 203d 2061 7761  ncle_count = awa
+00013060: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
+00013070: 6765 745f 756e 636c 655f 636f 756e 7428  get_uncle_count(
+00013080: 6173 796e 635f 656d 7074 795f 626c 6f63  async_empty_bloc
+00013090: 6b5b 2268 6173 6822 5d29 0a0a 2020 2020  k["hash"])..    
+000130a0: 2020 2020 6173 7365 7274 2069 735f 696e      assert is_in
+000130b0: 7465 6765 7228 756e 636c 655f 636f 756e  teger(uncle_coun
+000130c0: 7429 0a20 2020 2020 2020 2061 7373 6572  t).        asser
+000130d0: 7420 756e 636c 655f 636f 756e 7420 3d3d  t uncle_count ==
+000130e0: 2030 0a0a 2020 2020 4070 7974 6573 742e   0..    @pytest.
+000130f0: 6d61 726b 2e61 7379 6e63 696f 0a20 2020  mark.asyncio.   
+00013100: 2061 7379 6e63 2064 6566 2074 6573 745f   async def test_
+00013110: 6574 685f 6765 7455 6e63 6c65 436f 756e  eth_getUncleCoun
+00013120: 7442 7942 6c6f 636b 4e75 6d62 6572 280a  tByBlockNumber(.
+00013130: 2020 2020 2020 2020 7365 6c66 2c20 6173          self, as
+00013140: 796e 635f 7733 3a20 2241 7379 6e63 5765  ync_w3: "AsyncWe
+00013150: 6233 222c 2061 7379 6e63 5f65 6d70 7479  b3", async_empty
+00013160: 5f62 6c6f 636b 3a20 426c 6f63 6b44 6174  _block: BlockDat
+00013170: 610a 2020 2020 2920 2d3e 204e 6f6e 653a  a.    ) -> None:
+00013180: 0a20 2020 2020 2020 2075 6e63 6c65 5f63  .        uncle_c
+00013190: 6f75 6e74 203d 2061 7761 6974 2061 7379  ount = await asy
+000131a0: 6e63 5f77 332e 6574 682e 6765 745f 756e  nc_w3.eth.get_un
+000131b0: 636c 655f 636f 756e 7428 6173 796e 635f  cle_count(async_
+000131c0: 656d 7074 795f 626c 6f63 6b5b 226e 756d  empty_block["num
+000131d0: 6265 7222 5d29 0a0a 2020 2020 2020 2020  ber"])..        
+000131e0: 6173 7365 7274 2069 735f 696e 7465 6765  assert is_intege
+000131f0: 7228 756e 636c 655f 636f 756e 7429 0a20  r(uncle_count). 
+00013200: 2020 2020 2020 2061 7373 6572 7420 756e         assert un
+00013210: 636c 655f 636f 756e 7420 3d3d 2030 0a0a  cle_count == 0..
+00013220: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
+00013230: 2e61 7379 6e63 696f 0a20 2020 2061 7379  .asyncio.    asy
+00013240: 6e63 2064 6566 2074 6573 745f 6574 685f  nc def test_eth_
+00013250: 6765 7442 6c6f 636b 5472 616e 7361 6374  getBlockTransact
+00013260: 696f 6e43 6f75 6e74 4279 4e75 6d62 6572  ionCountByNumber
+00013270: 5f62 6c6f 636b 5f77 6974 685f 7478 6e28  _block_with_txn(
+00013280: 0a20 2020 2020 2020 2073 656c 662c 2061  .        self, a
+00013290: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
+000132a0: 6562 3322 2c20 6173 796e 635f 626c 6f63  eb3", async_bloc
+000132b0: 6b5f 7769 7468 5f74 786e 3a20 426c 6f63  k_with_txn: Bloc
+000132c0: 6b44 6174 610a 2020 2020 2920 2d3e 204e  kData.    ) -> N
+000132d0: 6f6e 653a 0a20 2020 2020 2020 2074 7261  one:.        tra
+000132e0: 6e73 6163 7469 6f6e 5f63 6f75 6e74 203d  nsaction_count =
+000132f0: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
+00013300: 6574 682e 6765 745f 626c 6f63 6b5f 7472  eth.get_block_tr
+00013310: 616e 7361 6374 696f 6e5f 636f 756e 7428  ansaction_count(
+00013320: 0a20 2020 2020 2020 2020 2020 2061 7379  .            asy
+00013330: 6e63 5f62 6c6f 636b 5f77 6974 685f 7478  nc_block_with_tx
+00013340: 6e5b 226e 756d 6265 7222 5d0a 2020 2020  n["number"].    
+00013350: 2020 2020 290a 0a20 2020 2020 2020 2061      )..        a
+00013360: 7373 6572 7420 6973 5f69 6e74 6567 6572  ssert is_integer
+00013370: 2874 7261 6e73 6163 7469 6f6e 5f63 6f75  (transaction_cou
+00013380: 6e74 290a 2020 2020 2020 2020 6173 7365  nt).        asse
+00013390: 7274 2074 7261 6e73 6163 7469 6f6e 5f63  rt transaction_c
+000133a0: 6f75 6e74 203e 3d20 310a 0a20 2020 2040  ount >= 1..    @
+000133b0: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
+000133c0: 6369 6f0a 2020 2020 6173 796e 6320 6465  cio.    async de
+000133d0: 6620 7465 7374 5f61 7379 6e63 5f65 7468  f test_async_eth
+000133e0: 5f73 6967 6e28 0a20 2020 2020 2020 2073  _sign(.        s
+000133f0: 656c 662c 2061 7379 6e63 5f77 333a 2022  elf, async_w3: "
+00013400: 4173 796e 6357 6562 3322 2c20 6173 796e  AsyncWeb3", asyn
+00013410: 635f 756e 6c6f 636b 6564 5f61 6363 6f75  c_unlocked_accou
+00013420: 6e74 5f64 7561 6c5f 7479 7065 3a20 4368  nt_dual_type: Ch
+00013430: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
+00013440: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+00013450: 2020 2020 2073 6967 6e61 7475 7265 203d       signature =
+00013460: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
+00013470: 6574 682e 7369 676e 280a 2020 2020 2020  eth.sign(.      
+00013480: 2020 2020 2020 6173 796e 635f 756e 6c6f        async_unlo
+00013490: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
+000134a0: 6c5f 7479 7065 2c20 7465 7874 3d22 4d65  l_type, text="Me
+000134b0: 7373 6167 6520 74c3 b620 7369 676e 2e20  ssage t.. sign. 
+000134c0: 4c6f 6e67 6572 2074 6861 6e20 6861 7368  Longer than hash
+000134d0: 2122 0a20 2020 2020 2020 2029 0a20 2020  !".        ).   
+000134e0: 2020 2020 2061 7373 6572 7420 6973 5f62       assert is_b
+000134f0: 7974 6573 2873 6967 6e61 7475 7265 290a  ytes(signature).
+00013500: 2020 2020 2020 2020 6173 7365 7274 206c          assert l
+00013510: 656e 2873 6967 6e61 7475 7265 2920 3d3d  en(signature) ==
+00013520: 2033 3220 2b20 3332 202b 2031 0a0a 2020   32 + 32 + 1..  
+00013530: 2020 2020 2020 2320 7465 7374 206f 7468        # test oth
+00013540: 6572 2066 6f72 6d61 7473 0a20 2020 2020  er formats.     
+00013550: 2020 2068 6578 7369 676e 203d 2061 7761     hexsign = awa
+00013560: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
+00013570: 7369 676e 280a 2020 2020 2020 2020 2020  sign(.          
+00013580: 2020 6173 796e 635f 756e 6c6f 636b 6564    async_unlocked
+00013590: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
+000135a0: 7065 2c0a 2020 2020 2020 2020 2020 2020  pe,.            
+000135b0: 6865 7873 7472 3d48 6578 5374 7228 0a20  hexstr=HexStr(. 
+000135c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000135d0: 3078 3464 3635 3733 3733 3631 3637 3635  0x4d657373616765
+000135e0: 3230 3734 6333 6236 3230 3733 3639 3637  2074c3b620736967
+000135f0: 3665 3265 3230 3463 3666 3665 3637 3635  6e2e204c6f6e6765
+00013600: 3732 3230 3734 3638 3631 3665 3230 3638  72207468616e2068
+00013610: 3631 3733 3638 3231 2220 2023 206e 6f71  61736821"  # noq
+00013620: 613a 2045 3530 310a 2020 2020 2020 2020  a: E501.        
+00013630: 2020 2020 292c 0a20 2020 2020 2020 2029      ),.        )
+00013640: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00013650: 6865 7873 6967 6e20 3d3d 2073 6967 6e61  hexsign == signa
+00013660: 7475 7265 0a0a 2020 2020 2020 2020 696e  ture..        in
+00013670: 7473 6967 6e20 3d20 6177 6169 7420 6173  tsign = await as
+00013680: 796e 635f 7733 2e65 7468 2e73 6967 6e28  ync_w3.eth.sign(
+00013690: 0a20 2020 2020 2020 2020 2020 2061 7379  .            asy
+000136a0: 6e63 5f75 6e6c 6f63 6b65 645f 6163 636f  nc_unlocked_acco
+000136b0: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
+000136c0: 2020 2020 2020 2020 2020 2030 7834 4436             0x4D6
+000136d0: 3537 3337 3336 3136 3736 3532 3037 3443  573736167652074C
+000136e0: 3342 3632 3037 3336 3936 3736 4532 4532  3B6207369676E2E2
+000136f0: 3034 4336 4636 4536 3736 3537 3232 3037  04C6F6E676572207
+00013700: 3436 3836 3136 4532 3036 3836 3137 3336  468616E206861736
+00013710: 3832 312c 0a20 2020 2020 2020 2029 0a20  821,.        ). 
+00013720: 2020 2020 2020 2061 7373 6572 7420 696e         assert in
+00013730: 7473 6967 6e20 3d3d 2073 6967 6e61 7475  tsign == signatu
+00013740: 7265 0a0a 2020 2020 2020 2020 6279 7465  re..        byte
+00013750: 7373 6967 6e20 3d20 6177 6169 7420 6173  ssign = await as
+00013760: 796e 635f 7733 2e65 7468 2e73 6967 6e28  ync_w3.eth.sign(
+00013770: 0a20 2020 2020 2020 2020 2020 2061 7379  .            asy
+00013780: 6e63 5f75 6e6c 6f63 6b65 645f 6163 636f  nc_unlocked_acco
+00013790: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
+000137a0: 2020 2020 2020 2020 2020 2062 224d 6573             b"Mes
+000137b0: 7361 6765 2074 5c78 6333 5c78 6236 2073  sage t\xc3\xb6 s
+000137c0: 6967 6e2e 204c 6f6e 6765 7220 7468 616e  ign. Longer than
+000137d0: 2068 6173 6821 222c 0a20 2020 2020 2020   hash!",.       
+000137e0: 2029 0a20 2020 2020 2020 2061 7373 6572   ).        asser
+000137f0: 7420 6279 7465 7373 6967 6e20 3d3d 2073  t bytessign == s
+00013800: 6967 6e61 7475 7265 0a0a 2020 2020 2020  ignature..      
+00013810: 2020 6e65 775f 7369 676e 6174 7572 6520    new_signature 
+00013820: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
+00013830: 2e65 7468 2e73 6967 6e28 0a20 2020 2020  .eth.sign(.     
+00013840: 2020 2020 2020 2061 7379 6e63 5f75 6e6c         async_unl
+00013850: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
+00013860: 616c 5f74 7970 652c 2074 6578 743d 2264  al_type, text="d
+00013870: 6966 6665 7265 6e74 206d 6573 7361 6765  ifferent message
+00013880: 2069 7320 6469 6666 6572 656e 7422 0a20   is different". 
+00013890: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+000138a0: 2061 7373 6572 7420 6e65 775f 7369 676e   assert new_sign
+000138b0: 6174 7572 6520 213d 2073 6967 6e61 7475  ature != signatu
+000138c0: 7265 0a0a 2020 2020 4070 7974 6573 742e  re..    @pytest.
+000138d0: 6d61 726b 2e61 7379 6e63 696f 0a20 2020  mark.asyncio.   
+000138e0: 2040 7079 7465 7374 2e6d 6172 6b2e 7866   @pytest.mark.xf
+000138f0: 6169 6c28 0a20 2020 2020 2020 2072 6561  ail(.        rea
+00013900: 736f 6e3d 2241 7379 6e63 206d 6964 646c  son="Async middl
+00013910: 6577 6172 6520 746f 2063 6f6e 7665 7274  eware to convert
+00013920: 2045 4e53 206e 616d 6573 2074 6f20 6164   ENS names to ad
+00013930: 6472 6573 7365 7320 6973 206d 6973 7369  dresses is missi
+00013940: 6e67 220a 2020 2020 290a 2020 2020 6173  ng".    ).    as
+00013950: 796e 6320 6465 6620 7465 7374 5f61 7379  ync def test_asy
+00013960: 6e63 5f65 7468 5f73 6967 6e5f 656e 735f  nc_eth_sign_ens_
+00013970: 6e61 6d65 7328 0a20 2020 2020 2020 2073  names(.        s
+00013980: 656c 662c 2061 7379 6e63 5f77 333a 2022  elf, async_w3: "
+00013990: 4173 796e 6357 6562 3322 2c20 6173 796e  AsyncWeb3", asyn
+000139a0: 635f 756e 6c6f 636b 6564 5f61 6363 6f75  c_unlocked_accou
+000139b0: 6e74 5f64 7561 6c5f 7479 7065 3a20 4368  nt_dual_type: Ch
+000139c0: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
+000139d0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+000139e0: 2020 2020 2077 6974 6820 656e 735f 6164       with ens_ad
+000139f0: 6472 6573 7365 7328 0a20 2020 2020 2020  dresses(.       
+00013a00: 2020 2020 2061 7379 6e63 5f77 332c 207b       async_w3, {
+00013a10: 2275 6e6c 6f63 6b65 642d 6163 6374 2e65  "unlocked-acct.e
+00013a20: 7468 223a 2061 7379 6e63 5f75 6e6c 6f63  th": async_unloc
+00013a30: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+00013a40: 5f74 7970 657d 0a20 2020 2020 2020 2029  _type}.        )
+00013a50: 3a0a 2020 2020 2020 2020 2020 2020 7369  :.            si
+00013a60: 676e 6174 7572 6520 3d20 6177 6169 7420  gnature = await 
+00013a70: 6173 796e 635f 7733 2e65 7468 2e73 6967  async_w3.eth.sig
+00013a80: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+00013a90: 2020 2045 4e53 2822 756e 6c6f 636b 6564     ENS("unlocked
+00013aa0: 2d61 6363 742e 6574 6822 292c 2074 6578  -acct.eth"), tex
+00013ab0: 743d 224d 6573 7361 6765 2074 c3b6 2073  t="Message t.. s
+00013ac0: 6967 6e2e 204c 6f6e 6765 7220 7468 616e  ign. Longer than
+00013ad0: 2068 6173 6821 220a 2020 2020 2020 2020   hash!".        
+00013ae0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00013af0: 2020 6173 7365 7274 2069 735f 6279 7465    assert is_byte
+00013b00: 7328 7369 676e 6174 7572 6529 0a20 2020  s(signature).   
+00013b10: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
+00013b20: 6c65 6e28 7369 676e 6174 7572 6529 203d  len(signature) =
+00013b30: 3d20 3332 202b 2033 3220 2b20 310a 0a20  = 32 + 32 + 1.. 
+00013b40: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
+00013b50: 6173 796e 6369 6f0a 2020 2020 6173 796e  asyncio.    asyn
+00013b60: 6320 6465 6620 7465 7374 5f61 7379 6e63  c def test_async
+00013b70: 5f65 7468 5f72 6570 6c61 6365 5f74 7261  _eth_replace_tra
+00013b80: 6e73 6163 7469 6f6e 5f6c 6567 6163 7928  nsaction_legacy(
+00013b90: 0a20 2020 2020 2020 2073 656c 662c 2061  .        self, a
+00013ba0: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
+00013bb0: 6562 3322 2c20 6173 796e 635f 756e 6c6f  eb3", async_unlo
+00013bc0: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
+00013bd0: 6c5f 7479 7065 3a20 4368 6563 6b73 756d  l_type: Checksum
+00013be0: 4164 6472 6573 730a 2020 2020 2920 2d3e  Address.    ) ->
+00013bf0: 204e 6f6e 653a 0a20 2020 2020 2020 2074   None:.        t
+00013c00: 786e 5f70 6172 616d 733a 2054 7850 6172  xn_params: TxPar
+00013c10: 616d 7320 3d20 7b0a 2020 2020 2020 2020  ams = {.        
+00013c20: 2020 2020 2266 726f 6d22 3a20 6173 796e      "from": asyn
+00013c30: 635f 756e 6c6f 636b 6564 5f61 6363 6f75  c_unlocked_accou
+00013c40: 6e74 5f64 7561 6c5f 7479 7065 2c0a 2020  nt_dual_type,.  
+00013c50: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
+00013c60: 6173 796e 635f 756e 6c6f 636b 6564 5f61  async_unlocked_a
+00013c70: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
+00013c80: 2c0a 2020 2020 2020 2020 2020 2020 2276  ,.            "v
+00013c90: 616c 7565 223a 2057 6569 2831 292c 0a20  alue": Wei(1),. 
+00013ca0: 2020 2020 2020 2020 2020 2022 6761 7322             "gas"
+00013cb0: 3a20 3231 3030 302c 0a20 2020 2020 2020  : 21000,.       
+00013cc0: 2020 2020 2022 6761 7350 7269 6365 223a       "gasPrice":
+00013cd0: 2061 7379 6e63 5f77 332e 746f 5f77 6569   async_w3.to_wei
+00013ce0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00013cf0: 2020 312c 2022 6777 6569 220a 2020 2020    1, "gwei".    
+00013d00: 2020 2020 2020 2020 292c 2020 2320 6d75          ),  # mu
+00013d10: 7374 2062 6520 6772 6561 7465 7220 7468  st be greater th
+00013d20: 616e 2062 6173 655f 6665 6520 706f 7374  an base_fee post
+00013d30: 204c 6f6e 646f 6e0a 2020 2020 2020 2020   London.        
+00013d40: 7d0a 2020 2020 2020 2020 7478 6e5f 6861  }.        txn_ha
+00013d50: 7368 203d 2061 7761 6974 2061 7379 6e63  sh = await async
+00013d60: 5f77 332e 6574 682e 7365 6e64 5f74 7261  _w3.eth.send_tra
+00013d70: 6e73 6163 7469 6f6e 2874 786e 5f70 6172  nsaction(txn_par
+00013d80: 616d 7329 0a0a 2020 2020 2020 2020 7478  ams)..        tx
+00013d90: 6e5f 7061 7261 6d73 5b22 6761 7350 7269  n_params["gasPri
+00013da0: 6365 225d 203d 2061 7379 6e63 5f77 332e  ce"] = async_w3.
+00013db0: 746f 5f77 6569 2832 2c20 2267 7765 6922  to_wei(2, "gwei"
+00013dc0: 290a 2020 2020 2020 2020 7265 706c 6163  ).        replac
+00013dd0: 655f 7478 6e5f 6861 7368 203d 2061 7761  e_txn_hash = awa
+00013de0: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
+00013df0: 7265 706c 6163 655f 7472 616e 7361 6374  replace_transact
+00013e00: 696f 6e28 7478 6e5f 6861 7368 2c20 7478  ion(txn_hash, tx
+00013e10: 6e5f 7061 7261 6d73 290a 2020 2020 2020  n_params).      
+00013e20: 2020 7265 706c 6163 655f 7478 6e20 3d20    replace_txn = 
 00013e30: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
-00013e40: 7468 2e72 6570 6c61 6365 5f74 7261 6e73  th.replace_trans
-00013e50: 6163 7469 6f6e 2874 786e 5f68 6173 682c  action(txn_hash,
-00013e60: 2074 786e 5f70 6172 616d 7329 0a0a 2020   txn_params)..  
-00013e70: 2020 4070 7974 6573 742e 6d61 726b 2e61    @pytest.mark.a
-00013e80: 7379 6e63 696f 0a20 2020 2061 7379 6e63  syncio.    async
-00013e90: 2064 6566 2074 6573 745f 6173 796e 635f   def test_async_
-00013ea0: 6574 685f 7265 706c 6163 655f 7472 616e  eth_replace_tran
-00013eb0: 7361 6374 696f 6e5f 6e6f 6e5f 6578 6973  saction_non_exis
-00013ec0: 7469 6e67 5f74 7261 6e73 6163 7469 6f6e  ting_transaction
-00013ed0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-00013ee0: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
-00013ef0: 5765 6233 222c 2075 6e6c 6f63 6b65 645f  Web3", unlocked_
-00013f00: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
-00013f10: 653a 2043 6865 636b 7375 6d41 6464 7265  e: ChecksumAddre
-00013f20: 7373 0a20 2020 2029 202d 3e20 4e6f 6e65  ss.    ) -> None
-00013f30: 3a0a 2020 2020 2020 2020 7478 6e5f 7061  :.        txn_pa
-00013f40: 7261 6d73 3a20 5478 5061 7261 6d73 203d  rams: TxParams =
-00013f50: 207b 0a20 2020 2020 2020 2020 2020 2022   {.            "
-00013f60: 6672 6f6d 223a 2075 6e6c 6f63 6b65 645f  from": unlocked_
-00013f70: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
-00013f80: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
-00013f90: 746f 223a 2075 6e6c 6f63 6b65 645f 6163  to": unlocked_ac
-00013fa0: 636f 756e 745f 6475 616c 5f74 7970 652c  count_dual_type,
-00013fb0: 0a20 2020 2020 2020 2020 2020 2022 7661  .            "va
-00013fc0: 6c75 6522 3a20 5765 6928 3129 2c0a 2020  lue": Wei(1),.  
-00013fd0: 2020 2020 2020 2020 2020 2267 6173 223a            "gas":
-00013fe0: 2032 3130 3030 2c0a 2020 2020 2020 2020   21000,.        
-00013ff0: 2020 2020 226d 6178 4665 6550 6572 4761      "maxFeePerGa
-00014000: 7322 3a20 6173 796e 635f 7733 2e74 6f5f  s": async_w3.to_
-00014010: 7765 6928 332c 2022 6777 6569 2229 2c0a  wei(3, "gwei"),.
-00014020: 2020 2020 2020 2020 2020 2020 226d 6178              "max
-00014030: 5072 696f 7269 7479 4665 6550 6572 4761  PriorityFeePerGa
-00014040: 7322 3a20 6173 796e 635f 7733 2e74 6f5f  s": async_w3.to_
-00014050: 7765 6928 312c 2022 6777 6569 2229 2c0a  wei(1, "gwei"),.
-00014060: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00014070: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
-00014080: 6973 6573 2854 7261 6e73 6163 7469 6f6e  ises(Transaction
-00014090: 4e6f 7446 6f75 6e64 293a 0a20 2020 2020  NotFound):.     
-000140a0: 2020 2020 2020 2061 7761 6974 2061 7379         await asy
-000140b0: 6e63 5f77 332e 6574 682e 7265 706c 6163  nc_w3.eth.replac
-000140c0: 655f 7472 616e 7361 6374 696f 6e28 0a20  e_transaction(. 
-000140d0: 2020 2020 2020 2020 2020 2020 2020 2048                 H
-000140e0: 6578 5374 7228 0a20 2020 2020 2020 2020  exStr(.         
-000140f0: 2020 2020 2020 2020 2020 2022 3078 3938             "0x98
-00014100: 6538 6363 3039 6233 3131 3538 3363 3530  e8cc09b311583c50
-00014110: 3739 6661 3630 3066 3663 3261 3362 6561  79fa600f6c2a3bea
-00014120: 3836 3131 6166 3136 3863 3532 6534 6236  8611af168c52e4b6
-00014130: 3062 3562 3234 3361 3434 3139 3937 220a  0b5b243a441997".
-00014140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014150: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
-00014160: 2020 2074 786e 5f70 6172 616d 732c 0a20     txn_params,. 
-00014170: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-00014180: 2020 4070 7974 6573 742e 6d61 726b 2e61    @pytest.mark.a
-00014190: 7379 6e63 696f 0a20 2020 2040 7079 7465  syncio.    @pyte
-000141a0: 7374 2e6d 6172 6b2e 7866 6169 6c28 7265  st.mark.xfail(re
-000141b0: 6173 6f6e 3d22 4173 796e 6347 6574 684d  ason="AsyncGethM
-000141c0: 696e 6572 2069 7320 6d69 7373 696e 672e  iner is missing.
-000141d0: 2229 0a20 2020 2061 7379 6e63 2064 6566  ").    async def
-000141e0: 2074 6573 745f 6173 796e 635f 6574 685f   test_async_eth_
-000141f0: 7265 706c 6163 655f 7472 616e 7361 6374  replace_transact
-00014200: 696f 6e5f 616c 7265 6164 795f 6d69 6e65  ion_already_mine
-00014210: 6428 0a20 2020 2020 2020 2073 656c 662c  d(.        self,
-00014220: 2061 7379 6e63 5f77 333a 2022 4173 796e   async_w3: "Asyn
-00014230: 6357 6562 3322 2c20 756e 6c6f 636b 6564  cWeb3", unlocked
-00014240: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
-00014250: 7065 3a20 4368 6563 6b73 756d 4164 6472  pe: ChecksumAddr
-00014260: 6573 730a 2020 2020 2920 2d3e 204e 6f6e  ess.    ) -> Non
-00014270: 653a 0a20 2020 2020 2020 2074 786e 5f70  e:.        txn_p
-00014280: 6172 616d 733a 2054 7850 6172 616d 7320  arams: TxParams 
-00014290: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-000142a0: 2266 726f 6d22 3a20 756e 6c6f 636b 6564  "from": unlocked
-000142b0: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
-000142c0: 7065 2c0a 2020 2020 2020 2020 2020 2020  pe,.            
-000142d0: 2274 6f22 3a20 756e 6c6f 636b 6564 5f61  "to": unlocked_a
-000142e0: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
-000142f0: 2c0a 2020 2020 2020 2020 2020 2020 2276  ,.            "v
-00014300: 616c 7565 223a 2057 6569 2831 292c 0a20  alue": Wei(1),. 
-00014310: 2020 2020 2020 2020 2020 2022 6761 7322             "gas"
-00014320: 3a20 3231 3030 302c 0a20 2020 2020 2020  : 21000,.       
-00014330: 2020 2020 2022 6d61 7846 6565 5065 7247       "maxFeePerG
-00014340: 6173 223a 2061 7379 6e63 5f77 332e 746f  as": async_w3.to
-00014350: 5f77 6569 2832 2c20 2267 7765 6922 292c  _wei(2, "gwei"),
-00014360: 0a20 2020 2020 2020 2020 2020 2022 6d61  .            "ma
-00014370: 7850 7269 6f72 6974 7946 6565 5065 7247  xPriorityFeePerG
-00014380: 6173 223a 2061 7379 6e63 5f77 332e 746f  as": async_w3.to
-00014390: 5f77 6569 2831 2c20 2267 7765 6922 292c  _wei(1, "gwei"),
-000143a0: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-000143b0: 2020 2074 786e 5f68 6173 6820 3d20 6177     txn_hash = aw
-000143c0: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
-000143d0: 2e73 656e 645f 7472 616e 7361 6374 696f  .send_transactio
-000143e0: 6e28 7478 6e5f 7061 7261 6d73 290a 2020  n(txn_params).  
-000143f0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-00014400: 2020 2020 2020 2061 7379 6e63 5f77 332e         async_w3.
-00014410: 6765 7468 2e6d 696e 6572 2e73 7461 7274  geth.miner.start
-00014420: 2829 2020 2320 7479 7065 3a20 6967 6e6f  ()  # type: igno
-00014430: 7265 0a20 2020 2020 2020 2020 2020 2061  re.            a
-00014440: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
-00014450: 682e 7761 6974 5f66 6f72 5f74 7261 6e73  h.wait_for_trans
-00014460: 6163 7469 6f6e 5f72 6563 6569 7074 2874  action_receipt(t
-00014470: 786e 5f68 6173 682c 2074 696d 656f 7574  xn_hash, timeout
-00014480: 3d31 3029 0a20 2020 2020 2020 2066 696e  =10).        fin
-00014490: 616c 6c79 3a0a 2020 2020 2020 2020 2020  ally:.          
-000144a0: 2020 6173 796e 635f 7733 2e67 6574 682e    async_w3.geth.
-000144b0: 6d69 6e65 722e 7374 6f70 2829 2020 2320  miner.stop()  # 
-000144c0: 7479 7065 3a20 6967 6e6f 7265 0a0a 2020  type: ignore..  
-000144d0: 2020 2020 2020 7478 6e5f 7061 7261 6d73        txn_params
-000144e0: 5b22 6d61 7846 6565 5065 7247 6173 225d  ["maxFeePerGas"]
-000144f0: 203d 2061 7379 6e63 5f77 332e 746f 5f77   = async_w3.to_w
-00014500: 6569 2833 2c20 2267 7765 6922 290a 2020  ei(3, "gwei").  
-00014510: 2020 2020 2020 7478 6e5f 7061 7261 6d73        txn_params
-00014520: 5b22 6d61 7850 7269 6f72 6974 7946 6565  ["maxPriorityFee
-00014530: 5065 7247 6173 225d 203d 2061 7379 6e63  PerGas"] = async
-00014540: 5f77 332e 746f 5f77 6569 2832 2c20 2267  _w3.to_wei(2, "g
-00014550: 7765 6922 290a 2020 2020 2020 2020 7769  wei").        wi
-00014560: 7468 2070 7974 6573 742e 7261 6973 6573  th pytest.raises
-00014570: 2856 616c 7565 4572 726f 722c 206d 6174  (ValueError, mat
-00014580: 6368 3d22 5375 7070 6c69 6564 2074 7261  ch="Supplied tra
-00014590: 6e73 6163 7469 6f6e 2077 6974 6820 6861  nsaction with ha
-000145a0: 7368 2229 3a0a 2020 2020 2020 2020 2020  sh"):.          
-000145b0: 2020 6177 6169 7420 6173 796e 635f 7733    await async_w3
-000145c0: 2e65 7468 2e72 6570 6c61 6365 5f74 7261  .eth.replace_tra
-000145d0: 6e73 6163 7469 6f6e 2874 786e 5f68 6173  nsaction(txn_has
-000145e0: 682c 2074 786e 5f70 6172 616d 7329 0a0a  h, txn_params)..
-000145f0: 2020 2020 4070 7974 6573 742e 6d61 726b      @pytest.mark
-00014600: 2e61 7379 6e63 696f 0a20 2020 2061 7379  .asyncio.    asy
-00014610: 6e63 2064 6566 2074 6573 745f 6173 796e  nc def test_asyn
-00014620: 635f 6574 685f 7265 706c 6163 655f 7472  c_eth_replace_tr
-00014630: 616e 7361 6374 696f 6e5f 696e 636f 7272  ansaction_incorr
-00014640: 6563 745f 6e6f 6e63 6528 0a20 2020 2020  ect_nonce(.     
-00014650: 2020 2073 656c 662c 2061 7379 6e63 5f77     self, async_w
-00014660: 333a 2022 4173 796e 6357 6562 3322 2c20  3: "AsyncWeb3", 
-00014670: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-00014680: 3a20 4368 6563 6b73 756d 4164 6472 6573  : ChecksumAddres
-00014690: 730a 2020 2020 2920 2d3e 204e 6f6e 653a  s.    ) -> None:
-000146a0: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
-000146b0: 616d 733a 2054 7850 6172 616d 7320 3d20  ams: TxParams = 
-000146c0: 7b0a 2020 2020 2020 2020 2020 2020 2266  {.            "f
-000146d0: 726f 6d22 3a20 756e 6c6f 636b 6564 5f61  rom": unlocked_a
-000146e0: 6363 6f75 6e74 2c0a 2020 2020 2020 2020  ccount,.        
-000146f0: 2020 2020 2274 6f22 3a20 756e 6c6f 636b      "to": unlock
-00014700: 6564 5f61 6363 6f75 6e74 2c0a 2020 2020  ed_account,.    
-00014710: 2020 2020 2020 2020 2276 616c 7565 223a          "value":
-00014720: 2057 6569 2831 292c 0a20 2020 2020 2020   Wei(1),.       
-00014730: 2020 2020 2022 6761 7322 3a20 3231 3030       "gas": 2100
-00014740: 302c 0a20 2020 2020 2020 2020 2020 2022  0,.            "
-00014750: 6d61 7846 6565 5065 7247 6173 223a 2061  maxFeePerGas": a
-00014760: 7379 6e63 5f77 332e 746f 5f77 6569 2832  sync_w3.to_wei(2
-00014770: 2c20 2267 7765 6922 292c 0a20 2020 2020  , "gwei"),.     
-00014780: 2020 2020 2020 2022 6d61 7850 7269 6f72         "maxPrior
-00014790: 6974 7946 6565 5065 7247 6173 223a 2061  ityFeePerGas": a
-000147a0: 7379 6e63 5f77 332e 746f 5f77 6569 2831  sync_w3.to_wei(1
-000147b0: 2c20 2267 7765 6922 292c 0a20 2020 2020  , "gwei"),.     
-000147c0: 2020 207d 0a20 2020 2020 2020 2074 786e     }.        txn
-000147d0: 5f68 6173 6820 3d20 6177 6169 7420 6173  _hash = await as
-000147e0: 796e 635f 7733 2e65 7468 2e73 656e 645f  ync_w3.eth.send_
-000147f0: 7472 616e 7361 6374 696f 6e28 7478 6e5f  transaction(txn_
-00014800: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-00014810: 7478 6e20 3d20 6177 6169 7420 6173 796e  txn = await asyn
-00014820: 635f 7733 2e65 7468 2e67 6574 5f74 7261  c_w3.eth.get_tra
-00014830: 6e73 6163 7469 6f6e 2874 786e 5f68 6173  nsaction(txn_has
-00014840: 6829 0a0a 2020 2020 2020 2020 7478 6e5f  h)..        txn_
-00014850: 7061 7261 6d73 5b22 6d61 7846 6565 5065  params["maxFeePe
-00014860: 7247 6173 225d 203d 2061 7379 6e63 5f77  rGas"] = async_w
-00014870: 332e 746f 5f77 6569 2833 2c20 2267 7765  3.to_wei(3, "gwe
-00014880: 6922 290a 2020 2020 2020 2020 7478 6e5f  i").        txn_
-00014890: 7061 7261 6d73 5b22 6d61 7850 7269 6f72  params["maxPrior
-000148a0: 6974 7946 6565 5065 7247 6173 225d 203d  ityFeePerGas"] =
-000148b0: 2061 7379 6e63 5f77 332e 746f 5f77 6569   async_w3.to_wei
-000148c0: 2832 2c20 2267 7765 6922 290a 2020 2020  (2, "gwei").    
-000148d0: 2020 2020 7478 6e5f 7061 7261 6d73 5b22      txn_params["
-000148e0: 6e6f 6e63 6522 5d20 3d20 4e6f 6e63 6528  nonce"] = Nonce(
-000148f0: 7478 6e5b 226e 6f6e 6365 225d 202b 2031  txn["nonce"] + 1
-00014900: 290a 2020 2020 2020 2020 7769 7468 2070  ).        with p
-00014910: 7974 6573 742e 7261 6973 6573 2856 616c  ytest.raises(Val
-00014920: 7565 4572 726f 7229 3a0a 2020 2020 2020  ueError):.      
-00014930: 2020 2020 2020 6177 6169 7420 6173 796e        await asyn
-00014940: 635f 7733 2e65 7468 2e72 6570 6c61 6365  c_w3.eth.replace
-00014950: 5f74 7261 6e73 6163 7469 6f6e 2874 786e  _transaction(txn
-00014960: 5f68 6173 682c 2074 786e 5f70 6172 616d  _hash, txn_param
-00014970: 7329 0a0a 2020 2020 4070 7974 6573 742e  s)..    @pytest.
-00014980: 6d61 726b 2e61 7379 6e63 696f 0a20 2020  mark.asyncio.   
-00014990: 2061 7379 6e63 2064 6566 2074 6573 745f   async def test_
-000149a0: 6173 796e 635f 6574 685f 7265 706c 6163  async_eth_replac
-000149b0: 655f 7472 616e 7361 6374 696f 6e5f 6761  e_transaction_ga
-000149c0: 735f 7072 6963 655f 746f 6f5f 6c6f 7728  s_price_too_low(
-000149d0: 0a20 2020 2020 2020 2073 656c 662c 2061  .        self, a
-000149e0: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
-000149f0: 6562 3322 2c20 756e 6c6f 636b 6564 5f61  eb3", unlocked_a
-00014a00: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
-00014a10: 3a20 4368 6563 6b73 756d 4164 6472 6573  : ChecksumAddres
-00014a20: 730a 2020 2020 2920 2d3e 204e 6f6e 653a  s.    ) -> None:
-00014a30: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
-00014a40: 616d 733a 2054 7850 6172 616d 7320 3d20  ams: TxParams = 
-00014a50: 7b0a 2020 2020 2020 2020 2020 2020 2266  {.            "f
-00014a60: 726f 6d22 3a20 756e 6c6f 636b 6564 5f61  rom": unlocked_a
-00014a70: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
-00014a80: 2c0a 2020 2020 2020 2020 2020 2020 2274  ,.            "t
-00014a90: 6f22 3a20 756e 6c6f 636b 6564 5f61 6363  o": unlocked_acc
-00014aa0: 6f75 6e74 5f64 7561 6c5f 7479 7065 2c0a  ount_dual_type,.
-00014ab0: 2020 2020 2020 2020 2020 2020 2276 616c              "val
-00014ac0: 7565 223a 2057 6569 2831 292c 0a20 2020  ue": Wei(1),.   
-00014ad0: 2020 2020 2020 2020 2022 6761 7322 3a20           "gas": 
-00014ae0: 3231 3030 302c 0a20 2020 2020 2020 2020  21000,.         
-00014af0: 2020 2022 6761 7350 7269 6365 223a 2061     "gasPrice": a
-00014b00: 7379 6e63 5f77 332e 746f 5f77 6569 2832  sync_w3.to_wei(2
-00014b10: 2c20 2267 7765 6922 292c 0a20 2020 2020  , "gwei"),.     
-00014b20: 2020 207d 0a20 2020 2020 2020 2074 786e     }.        txn
-00014b30: 5f68 6173 6820 3d20 6177 6169 7420 6173  _hash = await as
-00014b40: 796e 635f 7733 2e65 7468 2e73 656e 645f  ync_w3.eth.send_
-00014b50: 7472 616e 7361 6374 696f 6e28 7478 6e5f  transaction(txn_
-00014b60: 7061 7261 6d73 290a 0a20 2020 2020 2020  params)..       
-00014b70: 2074 786e 5f70 6172 616d 735b 2267 6173   txn_params["gas
-00014b80: 5072 6963 6522 5d20 3d20 6173 796e 635f  Price"] = async_
-00014b90: 7733 2e74 6f5f 7765 6928 312c 2022 6777  w3.to_wei(1, "gw
-00014ba0: 6569 2229 0a20 2020 2020 2020 2077 6974  ei").        wit
-00014bb0: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
-00014bc0: 5661 6c75 6545 7272 6f72 293a 0a20 2020  ValueError):.   
-00014bd0: 2020 2020 2020 2020 2061 7761 6974 2061           await a
-00014be0: 7379 6e63 5f77 332e 6574 682e 7265 706c  sync_w3.eth.repl
-00014bf0: 6163 655f 7472 616e 7361 6374 696f 6e28  ace_transaction(
-00014c00: 7478 6e5f 6861 7368 2c20 7478 6e5f 7061  txn_hash, txn_pa
-00014c10: 7261 6d73 290a 0a20 2020 2040 7079 7465  rams)..    @pyte
-00014c20: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
-00014c30: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
-00014c40: 7374 5f61 7379 6e63 5f65 7468 5f72 6570  st_async_eth_rep
-00014c50: 6c61 6365 5f74 7261 6e73 6163 7469 6f6e  lace_transaction
-00014c60: 5f67 6173 5f70 7269 6365 5f64 6566 6175  _gas_price_defau
-00014c70: 6c74 696e 675f 6d69 6e69 6d75 6d28 0a20  lting_minimum(. 
-00014c80: 2020 2020 2020 2073 656c 662c 2061 7379         self, asy
-00014c90: 6e63 5f77 333a 2022 4173 796e 6357 6562  nc_w3: "AsyncWeb
-00014ca0: 3322 2c20 756e 6c6f 636b 6564 5f61 6363  3", unlocked_acc
-00014cb0: 6f75 6e74 3a20 4368 6563 6b73 756d 4164  ount: ChecksumAd
-00014cc0: 6472 6573 730a 2020 2020 2920 2d3e 204e  dress.    ) -> N
-00014cd0: 6f6e 653a 0a20 2020 2020 2020 2067 6173  one:.        gas
-00014ce0: 5f70 7269 6365 203d 2061 7379 6e63 5f77  _price = async_w
-00014cf0: 332e 746f 5f77 6569 2831 2c20 2267 7765  3.to_wei(1, "gwe
-00014d00: 6922 290a 0a20 2020 2020 2020 2074 786e  i")..        txn
-00014d10: 5f70 6172 616d 733a 2054 7850 6172 616d  _params: TxParam
-00014d20: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
-00014d30: 2020 2266 726f 6d22 3a20 756e 6c6f 636b    "from": unlock
-00014d40: 6564 5f61 6363 6f75 6e74 2c0a 2020 2020  ed_account,.    
-00014d50: 2020 2020 2020 2020 2274 6f22 3a20 756e          "to": un
-00014d60: 6c6f 636b 6564 5f61 6363 6f75 6e74 2c0a  locked_account,.
-00014d70: 2020 2020 2020 2020 2020 2020 2276 616c              "val
-00014d80: 7565 223a 2057 6569 2831 292c 0a20 2020  ue": Wei(1),.   
-00014d90: 2020 2020 2020 2020 2022 6761 7322 3a20           "gas": 
-00014da0: 3231 3030 302c 0a20 2020 2020 2020 2020  21000,.         
-00014db0: 2020 2022 6761 7350 7269 6365 223a 2067     "gasPrice": g
-00014dc0: 6173 5f70 7269 6365 2c0a 2020 2020 2020  as_price,.      
-00014dd0: 2020 7d0a 2020 2020 2020 2020 7478 6e5f    }.        txn_
-00014de0: 6861 7368 203d 2061 7761 6974 2061 7379  hash = await asy
-00014df0: 6e63 5f77 332e 6574 682e 7365 6e64 5f74  nc_w3.eth.send_t
-00014e00: 7261 6e73 6163 7469 6f6e 2874 786e 5f70  ransaction(txn_p
-00014e10: 6172 616d 7329 0a0a 2020 2020 2020 2020  arams)..        
-00014e20: 7478 6e5f 7061 7261 6d73 2e70 6f70 2822  txn_params.pop("
-00014e30: 6761 7350 7269 6365 2229 0a20 2020 2020  gasPrice").     
-00014e40: 2020 2072 6570 6c61 6365 5f74 786e 5f68     replace_txn_h
-00014e50: 6173 6820 3d20 6177 6169 7420 6173 796e  ash = await asyn
-00014e60: 635f 7733 2e65 7468 2e72 6570 6c61 6365  c_w3.eth.replace
-00014e70: 5f74 7261 6e73 6163 7469 6f6e 2874 786e  _transaction(txn
-00014e80: 5f68 6173 682c 2074 786e 5f70 6172 616d  _hash, txn_param
-00014e90: 7329 0a20 2020 2020 2020 2072 6570 6c61  s).        repla
-00014ea0: 6365 5f74 786e 203d 2061 7761 6974 2061  ce_txn = await a
-00014eb0: 7379 6e63 5f77 332e 6574 682e 6765 745f  sync_w3.eth.get_
-00014ec0: 7472 616e 7361 6374 696f 6e28 7265 706c  transaction(repl
-00014ed0: 6163 655f 7478 6e5f 6861 7368 290a 0a20  ace_txn_hash).. 
-00014ee0: 2020 2020 2020 2061 7373 6572 7420 7265         assert re
-00014ef0: 706c 6163 655f 7478 6e5b 2267 6173 5072  place_txn["gasPr
-00014f00: 6963 6522 5d20 3d3d 206d 6174 682e 6365  ice"] == math.ce
-00014f10: 696c 280a 2020 2020 2020 2020 2020 2020  il(.            
-00014f20: 6761 735f 7072 6963 6520 2a20 312e 3132  gas_price * 1.12
-00014f30: 350a 2020 2020 2020 2020 2920 2023 206d  5.        )  # m
-00014f40: 696e 696d 756d 2067 6173 2070 7269 6365  inimum gas price
-00014f50: 0a0a 2020 2020 4070 7974 6573 742e 6d61  ..    @pytest.ma
-00014f60: 726b 2e61 7379 6e63 696f 0a20 2020 2061  rk.asyncio.    a
-00014f70: 7379 6e63 2064 6566 2074 6573 745f 6173  sync def test_as
-00014f80: 796e 635f 6574 685f 7265 706c 6163 655f  ync_eth_replace_
-00014f90: 7472 616e 7361 6374 696f 6e5f 6761 735f  transaction_gas_
-00014fa0: 7072 6963 655f 6465 6661 756c 7469 6e67  price_defaulting
-00014fb0: 5f73 7472 6174 6567 795f 6869 6768 6572  _strategy_higher
-00014fc0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-00014fd0: 6173 796e 635f 7733 3a20 2241 7379 6e63  async_w3: "Async
-00014fe0: 5765 6233 222c 2075 6e6c 6f63 6b65 645f  Web3", unlocked_
-00014ff0: 6163 636f 756e 743a 2043 6865 636b 7375  account: Checksu
-00015000: 6d41 6464 7265 7373 0a20 2020 2029 202d  mAddress.    ) -
-00015010: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-00015020: 7478 6e5f 7061 7261 6d73 3a20 5478 5061  txn_params: TxPa
-00015030: 7261 6d73 203d 207b 0a20 2020 2020 2020  rams = {.       
-00015040: 2020 2020 2022 6672 6f6d 223a 2075 6e6c       "from": unl
-00015050: 6f63 6b65 645f 6163 636f 756e 742c 0a20  ocked_account,. 
-00015060: 2020 2020 2020 2020 2020 2022 746f 223a             "to":
-00015070: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-00015080: 742c 0a20 2020 2020 2020 2020 2020 2022  t,.            "
-00015090: 7661 6c75 6522 3a20 5765 6928 3129 2c0a  value": Wei(1),.
-000150a0: 2020 2020 2020 2020 2020 2020 2267 6173              "gas
-000150b0: 223a 2032 3130 3030 2c0a 2020 2020 2020  ": 21000,.      
-000150c0: 2020 2020 2020 2267 6173 5072 6963 6522        "gasPrice"
-000150d0: 3a20 6173 796e 635f 7733 2e74 6f5f 7765  : async_w3.to_we
-000150e0: 6928 312c 2022 6777 6569 2229 2c0a 2020  i(1, "gwei"),.  
-000150f0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00015100: 7478 6e5f 6861 7368 203d 2061 7761 6974  txn_hash = await
-00015110: 2061 7379 6e63 5f77 332e 6574 682e 7365   async_w3.eth.se
-00015120: 6e64 5f74 7261 6e73 6163 7469 6f6e 2874  nd_transaction(t
-00015130: 786e 5f70 6172 616d 7329 0a0a 2020 2020  xn_params)..    
-00015140: 2020 2020 7477 6f5f 6777 6569 5f69 6e5f      two_gwei_in_
-00015150: 7765 6920 3d20 6173 796e 635f 7733 2e74  wei = async_w3.t
-00015160: 6f5f 7765 6928 322c 2022 6777 6569 2229  o_wei(2, "gwei")
-00015170: 0a0a 2020 2020 2020 2020 6465 6620 6869  ..        def hi
-00015180: 6768 6572 5f67 6173 5f70 7269 6365 5f73  gher_gas_price_s
-00015190: 7472 6174 6567 7928 6173 796e 635f 7733  trategy(async_w3
-000151a0: 3a20 2241 7379 6e63 5765 6233 222c 2074  : "AsyncWeb3", t
-000151b0: 786e 3a20 5478 5061 7261 6d73 2920 2d3e  xn: TxParams) ->
-000151c0: 2057 6569 3a0a 2020 2020 2020 2020 2020   Wei:.          
-000151d0: 2020 7265 7475 726e 2074 776f 5f67 7765    return two_gwe
-000151e0: 695f 696e 5f77 6569 0a0a 2020 2020 2020  i_in_wei..      
-000151f0: 2020 6173 796e 635f 7733 2e65 7468 2e73    async_w3.eth.s
-00015200: 6574 5f67 6173 5f70 7269 6365 5f73 7472  et_gas_price_str
-00015210: 6174 6567 7928 6869 6768 6572 5f67 6173  ategy(higher_gas
-00015220: 5f70 7269 6365 5f73 7472 6174 6567 7929  _price_strategy)
-00015230: 0a0a 2020 2020 2020 2020 7478 6e5f 7061  ..        txn_pa
-00015240: 7261 6d73 2e70 6f70 2822 6761 7350 7269  rams.pop("gasPri
-00015250: 6365 2229 0a20 2020 2020 2020 2072 6570  ce").        rep
-00015260: 6c61 6365 5f74 786e 5f68 6173 6820 3d20  lace_txn_hash = 
-00015270: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
-00015280: 7468 2e72 6570 6c61 6365 5f74 7261 6e73  th.replace_trans
-00015290: 6163 7469 6f6e 2874 786e 5f68 6173 682c  action(txn_hash,
-000152a0: 2074 786e 5f70 6172 616d 7329 0a20 2020   txn_params).   
-000152b0: 2020 2020 2072 6570 6c61 6365 5f74 786e       replace_txn
-000152c0: 203d 2061 7761 6974 2061 7379 6e63 5f77   = await async_w
-000152d0: 332e 6574 682e 6765 745f 7472 616e 7361  3.eth.get_transa
-000152e0: 6374 696f 6e28 7265 706c 6163 655f 7478  ction(replace_tx
-000152f0: 6e5f 6861 7368 290a 2020 2020 2020 2020  n_hash).        
-00015300: 6173 7365 7274 2028 0a20 2020 2020 2020  assert (.       
-00015310: 2020 2020 2072 6570 6c61 6365 5f74 786e       replace_txn
-00015320: 5b22 6761 7350 7269 6365 225d 203d 3d20  ["gasPrice"] == 
-00015330: 7477 6f5f 6777 6569 5f69 6e5f 7765 690a  two_gwei_in_wei.
-00015340: 2020 2020 2020 2020 2920 2023 2053 7472          )  # Str
-00015350: 6174 6567 7920 7072 6f76 6964 6573 2068  ategy provides h
-00015360: 6967 6865 7220 6761 7320 7072 6963 650a  igher gas price.
-00015370: 2020 2020 2020 2020 6173 796e 635f 7733          async_w3
-00015380: 2e65 7468 2e73 6574 5f67 6173 5f70 7269  .eth.set_gas_pri
-00015390: 6365 5f73 7472 6174 6567 7928 4e6f 6e65  ce_strategy(None
-000153a0: 2920 2023 2072 6573 6574 2073 7472 6174  )  # reset strat
-000153b0: 6567 790a 0a20 2020 2040 7079 7465 7374  egy..    @pytest
-000153c0: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
-000153d0: 2020 6173 796e 6320 6465 6620 7465 7374    async def test
-000153e0: 5f61 7379 6e63 5f65 7468 5f72 6570 6c61  _async_eth_repla
-000153f0: 6365 5f74 7261 6e73 6163 7469 6f6e 5f67  ce_transaction_g
-00015400: 6173 5f70 7269 6365 5f64 6566 6175 6c74  as_price_default
-00015410: 696e 675f 7374 7261 7465 6779 5f6c 6f77  ing_strategy_low
-00015420: 6572 280a 2020 2020 2020 2020 7365 6c66  er(.        self
-00015430: 2c20 6173 796e 635f 7733 3a20 2241 7379  , async_w3: "Asy
-00015440: 6e63 5765 6233 222c 2075 6e6c 6f63 6b65  ncWeb3", unlocke
-00015450: 645f 6163 636f 756e 743a 2043 6865 636b  d_account: Check
-00015460: 7375 6d41 6464 7265 7373 0a20 2020 2029  sumAddress.    )
-00015470: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-00015480: 2020 6761 735f 7072 6963 6520 3d20 6173    gas_price = as
-00015490: 796e 635f 7733 2e74 6f5f 7765 6928 322c  ync_w3.to_wei(2,
-000154a0: 2022 6777 6569 2229 0a0a 2020 2020 2020   "gwei")..      
-000154b0: 2020 7478 6e5f 7061 7261 6d73 3a20 5478    txn_params: Tx
-000154c0: 5061 7261 6d73 203d 207b 0a20 2020 2020  Params = {.     
-000154d0: 2020 2020 2020 2022 6672 6f6d 223a 2075         "from": u
-000154e0: 6e6c 6f63 6b65 645f 6163 636f 756e 742c  nlocked_account,
-000154f0: 0a20 2020 2020 2020 2020 2020 2022 746f  .            "to
-00015500: 223a 2075 6e6c 6f63 6b65 645f 6163 636f  ": unlocked_acco
-00015510: 756e 742c 0a20 2020 2020 2020 2020 2020  unt,.           
-00015520: 2022 7661 6c75 6522 3a20 5765 6928 3129   "value": Wei(1)
-00015530: 2c0a 2020 2020 2020 2020 2020 2020 2267  ,.            "g
-00015540: 6173 223a 2032 3130 3030 2c0a 2020 2020  as": 21000,.    
-00015550: 2020 2020 2020 2020 2267 6173 5072 6963          "gasPric
-00015560: 6522 3a20 6761 735f 7072 6963 652c 0a20  e": gas_price,. 
-00015570: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00015580: 2074 786e 5f68 6173 6820 3d20 6177 6169   txn_hash = awai
-00015590: 7420 6173 796e 635f 7733 2e65 7468 2e73  t async_w3.eth.s
-000155a0: 656e 645f 7472 616e 7361 6374 696f 6e28  end_transaction(
-000155b0: 7478 6e5f 7061 7261 6d73 290a 0a20 2020  txn_params)..   
-000155c0: 2020 2020 2064 6566 206c 6f77 6572 5f67       def lower_g
-000155d0: 6173 5f70 7269 6365 5f73 7472 6174 6567  as_price_strateg
-000155e0: 7928 6173 796e 635f 7733 3a20 2241 7379  y(async_w3: "Asy
-000155f0: 6e63 5765 6233 222c 2074 786e 3a20 5478  ncWeb3", txn: Tx
-00015600: 5061 7261 6d73 2920 2d3e 2057 6569 3a0a  Params) -> Wei:.
-00015610: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00015620: 726e 2061 7379 6e63 5f77 332e 746f 5f77  rn async_w3.to_w
-00015630: 6569 2831 2c20 2267 7765 6922 290a 0a20  ei(1, "gwei").. 
-00015640: 2020 2020 2020 2061 7379 6e63 5f77 332e         async_w3.
-00015650: 6574 682e 7365 745f 6761 735f 7072 6963  eth.set_gas_pric
-00015660: 655f 7374 7261 7465 6779 286c 6f77 6572  e_strategy(lower
-00015670: 5f67 6173 5f70 7269 6365 5f73 7472 6174  _gas_price_strat
-00015680: 6567 7929 0a0a 2020 2020 2020 2020 7478  egy)..        tx
-00015690: 6e5f 7061 7261 6d73 2e70 6f70 2822 6761  n_params.pop("ga
-000156a0: 7350 7269 6365 2229 0a20 2020 2020 2020  sPrice").       
-000156b0: 2072 6570 6c61 6365 5f74 786e 5f68 6173   replace_txn_has
-000156c0: 6820 3d20 6177 6169 7420 6173 796e 635f  h = await async_
-000156d0: 7733 2e65 7468 2e72 6570 6c61 6365 5f74  w3.eth.replace_t
-000156e0: 7261 6e73 6163 7469 6f6e 2874 786e 5f68  ransaction(txn_h
-000156f0: 6173 682c 2074 786e 5f70 6172 616d 7329  ash, txn_params)
-00015700: 0a20 2020 2020 2020 2072 6570 6c61 6365  .        replace
-00015710: 5f74 786e 203d 2061 7761 6974 2061 7379  _txn = await asy
-00015720: 6e63 5f77 332e 6574 682e 6765 745f 7472  nc_w3.eth.get_tr
-00015730: 616e 7361 6374 696f 6e28 7265 706c 6163  ansaction(replac
-00015740: 655f 7478 6e5f 6861 7368 290a 2020 2020  e_txn_hash).    
-00015750: 2020 2020 2320 5374 7261 7465 6779 2070      # Strategy p
-00015760: 726f 7669 6465 7320 6c6f 7765 7220 6761  rovides lower ga
-00015770: 7320 7072 6963 6520 2d20 6d69 6e69 6d75  s price - minimu
-00015780: 6d20 7072 6566 6572 7265 640a 2020 2020  m preferred.    
-00015790: 2020 2020 6173 7365 7274 2072 6570 6c61      assert repla
-000157a0: 6365 5f74 786e 5b22 6761 7350 7269 6365  ce_txn["gasPrice
-000157b0: 225d 203d 3d20 6d61 7468 2e63 6569 6c28  "] == math.ceil(
-000157c0: 6761 735f 7072 6963 6520 2a20 312e 3132  gas_price * 1.12
-000157d0: 3529 0a20 2020 2020 2020 2061 7379 6e63  5).        async
-000157e0: 5f77 332e 6574 682e 7365 745f 6761 735f  _w3.eth.set_gas_
-000157f0: 7072 6963 655f 7374 7261 7465 6779 284e  price_strategy(N
-00015800: 6f6e 6529 2020 2320 7265 7365 7420 7374  one)  # reset st
-00015810: 7261 7465 6779 0a0a 2020 2020 4070 7974  rategy..    @pyt
-00015820: 6573 742e 6d61 726b 2e61 7379 6e63 696f  est.mark.asyncio
-00015830: 0a20 2020 2061 7379 6e63 2064 6566 2074  .    async def t
-00015840: 6573 745f 6173 796e 635f 6574 685f 6e65  est_async_eth_ne
-00015850: 775f 6669 6c74 6572 2873 656c 662c 2061  w_filter(self, a
-00015860: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
-00015870: 6562 3322 2920 2d3e 204e 6f6e 653a 0a20  eb3") -> None:. 
-00015880: 2020 2020 2020 2066 696c 7465 7220 3d20         filter = 
-00015890: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
-000158a0: 7468 2e66 696c 7465 7228 7b7d 290a 0a20  th.filter({}).. 
-000158b0: 2020 2020 2020 2063 6861 6e67 6573 203d         changes =
-000158c0: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
-000158d0: 6574 682e 6765 745f 6669 6c74 6572 5f63  eth.get_filter_c
-000158e0: 6861 6e67 6573 2866 696c 7465 722e 6669  hanges(filter.fi
-000158f0: 6c74 6572 5f69 6429 0a20 2020 2020 2020  lter_id).       
-00015900: 2061 7373 6572 7420 6973 5f6c 6973 745f   assert is_list_
-00015910: 6c69 6b65 2863 6861 6e67 6573 290a 2020  like(changes).  
-00015920: 2020 2020 2020 6173 7365 7274 206e 6f74        assert not
-00015930: 2063 6861 6e67 6573 0a0a 2020 2020 2020   changes..      
-00015940: 2020 6c6f 6773 203d 2061 7761 6974 2061    logs = await a
-00015950: 7379 6e63 5f77 332e 6574 682e 6765 745f  sync_w3.eth.get_
-00015960: 6669 6c74 6572 5f6c 6f67 7328 6669 6c74  filter_logs(filt
-00015970: 6572 2e66 696c 7465 725f 6964 290a 2020  er.filter_id).  
-00015980: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
-00015990: 6c69 7374 5f6c 696b 6528 6c6f 6773 290a  list_like(logs).
-000159a0: 2020 2020 2020 2020 6173 7365 7274 206e          assert n
-000159b0: 6f74 206c 6f67 730a 0a20 2020 2020 2020  ot logs..       
-000159c0: 2072 6573 756c 7420 3d20 6177 6169 7420   result = await 
-000159d0: 6173 796e 635f 7733 2e65 7468 2e75 6e69  async_w3.eth.uni
-000159e0: 6e73 7461 6c6c 5f66 696c 7465 7228 6669  nstall_filter(fi
-000159f0: 6c74 6572 2e66 696c 7465 725f 6964 290a  lter.filter_id).
-00015a00: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
-00015a10: 6573 756c 7420 6973 2054 7275 650a 0a20  esult is True.. 
-00015a20: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
-00015a30: 6173 796e 6369 6f0a 2020 2020 6173 796e  asyncio.    asyn
-00015a40: 6320 6465 6620 7465 7374 5f61 7379 6e63  c def test_async
-00015a50: 5f65 7468 5f6e 6577 5f62 6c6f 636b 5f66  _eth_new_block_f
-00015a60: 696c 7465 7228 7365 6c66 2c20 6173 796e  ilter(self, asyn
-00015a70: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
-00015a80: 2229 202d 3e20 4e6f 6e65 3a0a 2020 2020  ") -> None:.    
-00015a90: 2020 2020 6669 6c74 6572 203d 2061 7761      filter = awa
-00015aa0: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
-00015ab0: 6669 6c74 6572 2822 6c61 7465 7374 2229  filter("latest")
-00015ac0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00015ad0: 6973 5f73 7472 696e 6728 6669 6c74 6572  is_string(filter
-00015ae0: 2e66 696c 7465 725f 6964 290a 0a20 2020  .filter_id)..   
-00015af0: 2020 2020 2063 6861 6e67 6573 203d 2061       changes = a
-00015b00: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
-00015b10: 682e 6765 745f 6669 6c74 6572 5f63 6861  h.get_filter_cha
-00015b20: 6e67 6573 2866 696c 7465 722e 6669 6c74  nges(filter.filt
-00015b30: 6572 5f69 6429 0a20 2020 2020 2020 2061  er_id).        a
-00015b40: 7373 6572 7420 6973 5f6c 6973 745f 6c69  ssert is_list_li
-00015b50: 6b65 2863 6861 6e67 6573 290a 2020 2020  ke(changes).    
-00015b60: 2020 2020 6173 7365 7274 206e 6f74 2063      assert not c
-00015b70: 6861 6e67 6573 0a0a 2020 2020 2020 2020  hanges..        
-00015b80: 7265 7375 6c74 203d 2061 7761 6974 2061  result = await a
-00015b90: 7379 6e63 5f77 332e 6574 682e 756e 696e  sync_w3.eth.unin
-00015ba0: 7374 616c 6c5f 6669 6c74 6572 2866 696c  stall_filter(fil
-00015bb0: 7465 722e 6669 6c74 6572 5f69 6429 0a20  ter.filter_id). 
-00015bc0: 2020 2020 2020 2061 7373 6572 7420 7265         assert re
-00015bd0: 7375 6c74 2069 7320 5472 7565 0a0a 2020  sult is True..  
-00015be0: 2020 4070 7974 6573 742e 6d61 726b 2e61    @pytest.mark.a
-00015bf0: 7379 6e63 696f 0a20 2020 2061 7379 6e63  syncio.    async
-00015c00: 2064 6566 2074 6573 745f 6173 796e 635f   def test_async_
-00015c10: 6574 685f 6e65 775f 7065 6e64 696e 675f  eth_new_pending_
-00015c20: 7472 616e 7361 6374 696f 6e5f 6669 6c74  transaction_filt
-00015c30: 6572 280a 2020 2020 2020 2020 7365 6c66  er(.        self
-00015c40: 2c20 6173 796e 635f 7733 3a20 2241 7379  , async_w3: "Asy
-00015c50: 6e63 5765 6233 220a 2020 2020 2920 2d3e  ncWeb3".    ) ->
-00015c60: 204e 6f6e 653a 0a20 2020 2020 2020 2066   None:.        f
-00015c70: 696c 7465 7220 3d20 6177 6169 7420 6173  ilter = await as
-00015c80: 796e 635f 7733 2e65 7468 2e66 696c 7465  ync_w3.eth.filte
-00015c90: 7228 2270 656e 6469 6e67 2229 0a20 2020  r("pending").   
-00015ca0: 2020 2020 2061 7373 6572 7420 6973 5f73       assert is_s
-00015cb0: 7472 696e 6728 6669 6c74 6572 2e66 696c  tring(filter.fil
-00015cc0: 7465 725f 6964 290a 0a20 2020 2020 2020  ter_id)..       
-00015cd0: 2063 6861 6e67 6573 203d 2061 7761 6974   changes = await
-00015ce0: 2061 7379 6e63 5f77 332e 6574 682e 6765   async_w3.eth.ge
-00015cf0: 745f 6669 6c74 6572 5f63 6861 6e67 6573  t_filter_changes
-00015d00: 2866 696c 7465 722e 6669 6c74 6572 5f69  (filter.filter_i
-00015d10: 6429 0a20 2020 2020 2020 2061 7373 6572  d).        asser
-00015d20: 7420 6973 5f6c 6973 745f 6c69 6b65 2863  t is_list_like(c
-00015d30: 6861 6e67 6573 290a 2020 2020 2020 2020  hanges).        
-00015d40: 6173 7365 7274 206e 6f74 2063 6861 6e67  assert not chang
-00015d50: 6573 0a0a 2020 2020 2020 2020 7265 7375  es..        resu
-00015d60: 6c74 203d 2061 7761 6974 2061 7379 6e63  lt = await async
-00015d70: 5f77 332e 6574 682e 756e 696e 7374 616c  _w3.eth.uninstal
-00015d80: 6c5f 6669 6c74 6572 2866 696c 7465 722e  l_filter(filter.
-00015d90: 6669 6c74 6572 5f69 6429 0a20 2020 2020  filter_id).     
-00015da0: 2020 2061 7373 6572 7420 7265 7375 6c74     assert result
-00015db0: 2069 7320 5472 7565 0a0a 2020 2020 4070   is True..    @p
-00015dc0: 7974 6573 742e 6d61 726b 2e61 7379 6e63  ytest.mark.async
-00015dd0: 696f 0a20 2020 2061 7379 6e63 2064 6566  io.    async def
-00015de0: 2074 6573 745f 6173 796e 635f 6574 685f   test_async_eth_
-00015df0: 756e 696e 7374 616c 6c5f 6669 6c74 6572  uninstall_filter
-00015e00: 2873 656c 662c 2061 7379 6e63 5f77 333a  (self, async_w3:
-00015e10: 2022 4173 796e 6357 6562 3322 2920 2d3e   "AsyncWeb3") ->
-00015e20: 204e 6f6e 653a 0a20 2020 2020 2020 2066   None:.        f
-00015e30: 696c 7465 7220 3d20 6177 6169 7420 6173  ilter = await as
-00015e40: 796e 635f 7733 2e65 7468 2e66 696c 7465  ync_w3.eth.filte
-00015e50: 7228 7b7d 290a 2020 2020 2020 2020 6173  r({}).        as
-00015e60: 7365 7274 2069 735f 7374 7269 6e67 2866  sert is_string(f
-00015e70: 696c 7465 722e 6669 6c74 6572 5f69 6429  ilter.filter_id)
-00015e80: 0a0a 2020 2020 2020 2020 7375 6363 6573  ..        succes
-00015e90: 7320 3d20 6177 6169 7420 6173 796e 635f  s = await async_
-00015ea0: 7733 2e65 7468 2e75 6e69 6e73 7461 6c6c  w3.eth.uninstall
-00015eb0: 5f66 696c 7465 7228 6669 6c74 6572 2e66  _filter(filter.f
-00015ec0: 696c 7465 725f 6964 290a 2020 2020 2020  ilter_id).      
-00015ed0: 2020 6173 7365 7274 2073 7563 6365 7373    assert success
-00015ee0: 2069 7320 5472 7565 0a0a 2020 2020 2020   is True..      
-00015ef0: 2020 6661 696c 7572 6520 3d20 6177 6169    failure = awai
-00015f00: 7420 6173 796e 635f 7733 2e65 7468 2e75  t async_w3.eth.u
-00015f10: 6e69 6e73 7461 6c6c 5f66 696c 7465 7228  ninstall_filter(
-00015f20: 6669 6c74 6572 2e66 696c 7465 725f 6964  filter.filter_id
-00015f30: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-00015f40: 2066 6169 6c75 7265 2069 7320 4661 6c73   failure is Fals
-00015f50: 650a 0a0a 636c 6173 7320 4574 684d 6f64  e...class EthMod
-00015f60: 756c 6554 6573 743a 0a20 2020 2064 6566  uleTest:.    def
-00015f70: 2074 6573 745f 6574 685f 7379 6e63 696e   test_eth_syncin
-00015f80: 6728 7365 6c66 2c20 7733 3a20 2257 6562  g(self, w3: "Web
-00015f90: 3322 2920 2d3e 204e 6f6e 653a 0a20 2020  3") -> None:.   
-00015fa0: 2020 2020 2073 796e 6369 6e67 203d 2077       syncing = w
-00015fb0: 332e 6574 682e 7379 6e63 696e 670a 0a20  3.eth.syncing.. 
-00015fc0: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
-00015fd0: 5f62 6f6f 6c65 616e 2873 796e 6369 6e67  _boolean(syncing
-00015fe0: 2920 6f72 2069 735f 6469 6374 2873 796e  ) or is_dict(syn
-00015ff0: 6369 6e67 290a 0a20 2020 2020 2020 2069  cing)..        i
-00016000: 6620 6973 5f62 6f6f 6c65 616e 2873 796e  f is_boolean(syn
-00016010: 6369 6e67 293a 0a20 2020 2020 2020 2020  cing):.         
-00016020: 2020 2061 7373 6572 7420 7379 6e63 696e     assert syncin
-00016030: 6720 6973 2046 616c 7365 0a20 2020 2020  g is False.     
-00016040: 2020 2065 6c69 6620 6973 5f64 6963 7428     elif is_dict(
-00016050: 7379 6e63 696e 6729 3a0a 2020 2020 2020  syncing):.      
-00016060: 2020 2020 2020 7379 6e63 5f64 6963 7420        sync_dict 
-00016070: 3d20 6361 7374 2853 796e 6353 7461 7475  = cast(SyncStatu
-00016080: 732c 2073 796e 6369 6e67 290a 2020 2020  s, syncing).    
-00016090: 2020 2020 2020 2020 6173 7365 7274 2022          assert "
-000160a0: 7374 6172 7469 6e67 426c 6f63 6b22 2069  startingBlock" i
-000160b0: 6e20 7379 6e63 5f64 6963 740a 2020 2020  n sync_dict.    
-000160c0: 2020 2020 2020 2020 6173 7365 7274 2022          assert "
-000160d0: 6375 7272 656e 7442 6c6f 636b 2220 696e  currentBlock" in
-000160e0: 2073 796e 635f 6469 6374 0a20 2020 2020   sync_dict.     
-000160f0: 2020 2020 2020 2061 7373 6572 7420 2268         assert "h
-00016100: 6967 6865 7374 426c 6f63 6b22 2069 6e20  ighestBlock" in 
-00016110: 7379 6e63 5f64 6963 740a 0a20 2020 2020  sync_dict..     
-00016120: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
-00016130: 5f69 6e74 6567 6572 2873 796e 635f 6469  _integer(sync_di
-00016140: 6374 5b22 7374 6172 7469 6e67 426c 6f63  ct["startingBloc
-00016150: 6b22 5d29 0a20 2020 2020 2020 2020 2020  k"]).           
-00016160: 2061 7373 6572 7420 6973 5f69 6e74 6567   assert is_integ
-00016170: 6572 2873 796e 635f 6469 6374 5b22 6375  er(sync_dict["cu
-00016180: 7272 656e 7442 6c6f 636b 225d 290a 2020  rrentBlock"]).  
-00016190: 2020 2020 2020 2020 2020 6173 7365 7274            assert
-000161a0: 2069 735f 696e 7465 6765 7228 7379 6e63   is_integer(sync
-000161b0: 5f64 6963 745b 2268 6967 6865 7374 426c  _dict["highestBl
-000161c0: 6f63 6b22 5d29 0a0a 2020 2020 6465 6620  ock"])..    def 
-000161d0: 7465 7374 5f65 7468 5f63 6f69 6e62 6173  test_eth_coinbas
-000161e0: 6528 7365 6c66 2c20 7733 3a20 2257 6562  e(self, w3: "Web
-000161f0: 3322 2920 2d3e 204e 6f6e 653a 0a20 2020  3") -> None:.   
-00016200: 2020 2020 2063 6f69 6e62 6173 6520 3d20       coinbase = 
-00016210: 7733 2e65 7468 2e63 6f69 6e62 6173 650a  w3.eth.coinbase.
-00016220: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-00016230: 735f 6368 6563 6b73 756d 5f61 6464 7265  s_checksum_addre
-00016240: 7373 2863 6f69 6e62 6173 6529 0a0a 2020  ss(coinbase)..  
-00016250: 2020 6465 6620 7465 7374 5f65 7468 5f6d    def test_eth_m
-00016260: 696e 696e 6728 7365 6c66 2c20 7733 3a20  ining(self, w3: 
-00016270: 2257 6562 3322 2920 2d3e 204e 6f6e 653a  "Web3") -> None:
-00016280: 0a20 2020 2020 2020 206d 696e 696e 6720  .        mining 
-00016290: 3d20 7733 2e65 7468 2e6d 696e 696e 670a  = w3.eth.mining.
-000162a0: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-000162b0: 735f 626f 6f6c 6561 6e28 6d69 6e69 6e67  s_boolean(mining
-000162c0: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
-000162d0: 6574 685f 6861 7368 7261 7465 2873 656c  eth_hashrate(sel
-000162e0: 662c 2077 333a 2022 5765 6233 2229 202d  f, w3: "Web3") -
-000162f0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-00016300: 6861 7368 7261 7465 203d 2077 332e 6574  hashrate = w3.et
-00016310: 682e 6861 7368 7261 7465 0a20 2020 2020  h.hashrate.     
-00016320: 2020 2061 7373 6572 7420 6973 5f69 6e74     assert is_int
-00016330: 6567 6572 2868 6173 6872 6174 6529 0a20  eger(hashrate). 
-00016340: 2020 2020 2020 2061 7373 6572 7420 6861         assert ha
-00016350: 7368 7261 7465 203e 3d20 300a 0a20 2020  shrate >= 0..   
-00016360: 2064 6566 2074 6573 745f 6574 685f 6368   def test_eth_ch
-00016370: 6169 6e5f 6964 2873 656c 662c 2077 333a  ain_id(self, w3:
-00016380: 2022 5765 6233 2229 202d 3e20 4e6f 6e65   "Web3") -> None
-00016390: 3a0a 2020 2020 2020 2020 6368 6169 6e5f  :.        chain_
-000163a0: 6964 203d 2077 332e 6574 682e 6368 6169  id = w3.eth.chai
-000163b0: 6e5f 6964 0a20 2020 2020 2020 2023 2063  n_id.        # c
-000163c0: 6861 696e 2069 6420 7661 6c75 6520 6672  hain id value fr
-000163d0: 6f6d 2067 6574 6820 6669 7874 7572 6520  om geth fixture 
-000163e0: 6765 6e65 7369 7320 6669 6c65 0a20 2020  genesis file.   
-000163f0: 2020 2020 2061 7373 6572 7420 6368 6169       assert chai
-00016400: 6e5f 6964 203d 3d20 3133 3132 3737 3332  n_id == 13127732
-00016410: 3239 3430 3533 370a 0a20 2020 2064 6566  2940537..    def
-00016420: 2074 6573 745f 6574 685f 6665 655f 6869   test_eth_fee_hi
-00016430: 7374 6f72 7928 7365 6c66 2c20 7733 3a20  story(self, w3: 
-00016440: 2257 6562 3322 2920 2d3e 204e 6f6e 653a  "Web3") -> None:
-00016450: 0a20 2020 2020 2020 2066 6565 5f68 6973  .        fee_his
-00016460: 746f 7279 203d 2077 332e 6574 682e 6665  tory = w3.eth.fe
-00016470: 655f 6869 7374 6f72 7928 312c 2022 6c61  e_history(1, "la
-00016480: 7465 7374 222c 205b 3530 5d29 0a20 2020  test", [50]).   
-00016490: 2020 2020 2061 7373 6572 7420 6973 5f6c       assert is_l
-000164a0: 6973 745f 6c69 6b65 2866 6565 5f68 6973  ist_like(fee_his
-000164b0: 746f 7279 5b22 6261 7365 4665 6550 6572  tory["baseFeePer
-000164c0: 4761 7322 5d29 0a20 2020 2020 2020 2061  Gas"]).        a
-000164d0: 7373 6572 7420 6973 5f6c 6973 745f 6c69  ssert is_list_li
-000164e0: 6b65 2866 6565 5f68 6973 746f 7279 5b22  ke(fee_history["
-000164f0: 6761 7355 7365 6452 6174 696f 225d 290a  gasUsedRatio"]).
-00016500: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-00016510: 735f 696e 7465 6765 7228 6665 655f 6869  s_integer(fee_hi
-00016520: 7374 6f72 795b 226f 6c64 6573 7442 6c6f  story["oldestBlo
-00016530: 636b 225d 290a 2020 2020 2020 2020 6173  ck"]).        as
-00016540: 7365 7274 2066 6565 5f68 6973 746f 7279  sert fee_history
-00016550: 5b22 6f6c 6465 7374 426c 6f63 6b22 5d20  ["oldestBlock"] 
-00016560: 3e3d 2030 0a20 2020 2020 2020 2061 7373  >= 0.        ass
-00016570: 6572 7420 6973 5f6c 6973 745f 6c69 6b65  ert is_list_like
-00016580: 2866 6565 5f68 6973 746f 7279 5b22 7265  (fee_history["re
-00016590: 7761 7264 225d 290a 2020 2020 2020 2020  ward"]).        
-000165a0: 6173 7365 7274 2069 735f 6c69 7374 5f6c  assert is_list_l
-000165b0: 696b 6528 6665 655f 6869 7374 6f72 795b  ike(fee_history[
-000165c0: 2272 6577 6172 6422 5d5b 305d 290a 0a20  "reward"][0]).. 
-000165d0: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
-000165e0: 6665 655f 6869 7374 6f72 795f 7769 7468  fee_history_with
-000165f0: 5f69 6e74 6567 6572 280a 2020 2020 2020  _integer(.      
-00016600: 2020 7365 6c66 2c20 7733 3a20 2257 6562    self, w3: "Web
-00016610: 3322 2c20 656d 7074 795f 626c 6f63 6b3a  3", empty_block:
-00016620: 2042 6c6f 636b 4461 7461 0a20 2020 2029   BlockData.    )
-00016630: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-00016640: 2020 6665 655f 6869 7374 6f72 7920 3d20    fee_history = 
-00016650: 7733 2e65 7468 2e66 6565 5f68 6973 746f  w3.eth.fee_histo
-00016660: 7279 2831 2c20 656d 7074 795f 626c 6f63  ry(1, empty_bloc
-00016670: 6b5b 226e 756d 6265 7222 5d2c 205b 3530  k["number"], [50
-00016680: 5d29 0a20 2020 2020 2020 2061 7373 6572  ]).        asser
-00016690: 7420 6973 5f6c 6973 745f 6c69 6b65 2866  t is_list_like(f
-000166a0: 6565 5f68 6973 746f 7279 5b22 6261 7365  ee_history["base
-000166b0: 4665 6550 6572 4761 7322 5d29 0a20 2020  FeePerGas"]).   
-000166c0: 2020 2020 2061 7373 6572 7420 6973 5f6c       assert is_l
-000166d0: 6973 745f 6c69 6b65 2866 6565 5f68 6973  ist_like(fee_his
-000166e0: 746f 7279 5b22 6761 7355 7365 6452 6174  tory["gasUsedRat
-000166f0: 696f 225d 290a 2020 2020 2020 2020 6173  io"]).        as
-00016700: 7365 7274 2069 735f 696e 7465 6765 7228  sert is_integer(
-00016710: 6665 655f 6869 7374 6f72 795b 226f 6c64  fee_history["old
-00016720: 6573 7442 6c6f 636b 225d 290a 2020 2020  estBlock"]).    
-00016730: 2020 2020 6173 7365 7274 2066 6565 5f68      assert fee_h
-00016740: 6973 746f 7279 5b22 6f6c 6465 7374 426c  istory["oldestBl
-00016750: 6f63 6b22 5d20 3e3d 2030 0a20 2020 2020  ock"] >= 0.     
-00016760: 2020 2061 7373 6572 7420 6973 5f6c 6973     assert is_lis
-00016770: 745f 6c69 6b65 2866 6565 5f68 6973 746f  t_like(fee_histo
-00016780: 7279 5b22 7265 7761 7264 225d 290a 2020  ry["reward"]).  
-00016790: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
-000167a0: 6c69 7374 5f6c 696b 6528 6665 655f 6869  list_like(fee_hi
-000167b0: 7374 6f72 795b 2272 6577 6172 6422 5d5b  story["reward"][
-000167c0: 305d 290a 0a20 2020 2064 6566 2074 6573  0])..    def tes
-000167d0: 745f 6574 685f 6665 655f 6869 7374 6f72  t_eth_fee_histor
-000167e0: 795f 6e6f 5f72 6577 6172 645f 7065 7263  y_no_reward_perc
-000167f0: 656e 7469 6c65 7328 7365 6c66 2c20 7733  entiles(self, w3
-00016800: 3a20 2257 6562 3322 2920 2d3e 204e 6f6e  : "Web3") -> Non
-00016810: 653a 0a20 2020 2020 2020 2066 6565 5f68  e:.        fee_h
-00016820: 6973 746f 7279 203d 2077 332e 6574 682e  istory = w3.eth.
-00016830: 6665 655f 6869 7374 6f72 7928 312c 2022  fee_history(1, "
-00016840: 6c61 7465 7374 2229 0a20 2020 2020 2020  latest").       
-00016850: 2061 7373 6572 7420 6973 5f6c 6973 745f   assert is_list_
-00016860: 6c69 6b65 2866 6565 5f68 6973 746f 7279  like(fee_history
-00016870: 5b22 6261 7365 4665 6550 6572 4761 7322  ["baseFeePerGas"
-00016880: 5d29 0a20 2020 2020 2020 2061 7373 6572  ]).        asser
-00016890: 7420 6973 5f6c 6973 745f 6c69 6b65 2866  t is_list_like(f
-000168a0: 6565 5f68 6973 746f 7279 5b22 6761 7355  ee_history["gasU
-000168b0: 7365 6452 6174 696f 225d 290a 2020 2020  sedRatio"]).    
-000168c0: 2020 2020 6173 7365 7274 2069 735f 696e      assert is_in
-000168d0: 7465 6765 7228 6665 655f 6869 7374 6f72  teger(fee_histor
-000168e0: 795b 226f 6c64 6573 7442 6c6f 636b 225d  y["oldestBlock"]
-000168f0: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-00016900: 2066 6565 5f68 6973 746f 7279 5b22 6f6c   fee_history["ol
-00016910: 6465 7374 426c 6f63 6b22 5d20 3e3d 2030  destBlock"] >= 0
-00016920: 0a0a 2020 2020 6465 6620 7465 7374 5f65  ..    def test_e
-00016930: 7468 5f67 6173 5f70 7269 6365 2873 656c  th_gas_price(sel
-00016940: 662c 2077 333a 2022 5765 6233 2229 202d  f, w3: "Web3") -
-00016950: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-00016960: 6761 735f 7072 6963 6520 3d20 7733 2e65  gas_price = w3.e
-00016970: 7468 2e67 6173 5f70 7269 6365 0a20 2020  th.gas_price.   
-00016980: 2020 2020 2061 7373 6572 7420 6973 5f69       assert is_i
-00016990: 6e74 6567 6572 2867 6173 5f70 7269 6365  nteger(gas_price
-000169a0: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-000169b0: 2067 6173 5f70 7269 6365 203e 2030 0a0a   gas_price > 0..
-000169c0: 2020 2020 6465 6620 7465 7374 5f65 7468      def test_eth
-000169d0: 5f6d 6178 5f70 7269 6f72 6974 795f 6665  _max_priority_fe
-000169e0: 6528 7365 6c66 2c20 7733 3a20 2257 6562  e(self, w3: "Web
-000169f0: 3322 2920 2d3e 204e 6f6e 653a 0a20 2020  3") -> None:.   
-00016a00: 2020 2020 206d 6178 5f70 7269 6f72 6974       max_priorit
-00016a10: 795f 6665 6520 3d20 7733 2e65 7468 2e6d  y_fee = w3.eth.m
-00016a20: 6178 5f70 7269 6f72 6974 795f 6665 650a  ax_priority_fee.
-00016a30: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-00016a40: 735f 696e 7465 6765 7228 6d61 785f 7072  s_integer(max_pr
-00016a50: 696f 7269 7479 5f66 6565 290a 0a20 2020  iority_fee)..   
-00016a60: 2064 6566 2074 6573 745f 6574 685f 6d61   def test_eth_ma
-00016a70: 785f 7072 696f 7269 7479 5f66 6565 5f77  x_priority_fee_w
-00016a80: 6974 685f 6665 655f 6869 7374 6f72 795f  ith_fee_history_
-00016a90: 6361 6c63 756c 6174 696f 6e5f 6572 726f  calculation_erro
-00016aa0: 725f 6469 6374 280a 2020 2020 2020 2020  r_dict(.        
-00016ab0: 7365 6c66 2c20 7733 3a20 2257 6562 3322  self, w3: "Web3"
-00016ac0: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-00016ad0: 2020 2020 2020 2020 6661 696c 5f6d 6178          fail_max
-00016ae0: 5f70 7269 6f5f 6d69 6464 6c65 7761 7265  _prio_middleware
-00016af0: 203d 2063 6f6e 7374 7275 6374 5f65 7272   = construct_err
-00016b00: 6f72 5f67 656e 6572 6174 6f72 5f6d 6964  or_generator_mid
-00016b10: 646c 6577 6172 6528 0a20 2020 2020 2020  dleware(.       
-00016b20: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-00016b30: 2020 2020 2020 2052 5043 456e 6470 6f69         RPCEndpoi
-00016b40: 6e74 2822 6574 685f 6d61 7850 7269 6f72  nt("eth_maxPrior
-00016b50: 6974 7946 6565 5065 7247 6173 2229 3a20  ityFeePerGas"): 
-00016b60: 6c61 6d62 6461 202a 5f3a 207b 0a20 2020  lambda *_: {.   
-00016b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016b80: 2022 6572 726f 7222 3a20 7b0a 2020 2020   "error": {.    
-00016b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016ba0: 2020 2020 2263 6f64 6522 3a20 2d33 3236      "code": -326
-00016bb0: 3031 2c0a 2020 2020 2020 2020 2020 2020  01,.            
-00016bc0: 2020 2020 2020 2020 2020 2020 226d 6573              "mes
-00016bd0: 7361 6765 223a 2028 0a20 2020 2020 2020  sage": (.       
-00016be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016bf0: 2020 2020 2022 5468 6520 6d65 7468 6f64       "The method
-00016c00: 2065 7468 5f6d 6178 5072 696f 7269 7479   eth_maxPriority
-00016c10: 4665 6550 6572 4761 7320 646f 6573 2022  FeePerGas does "
-00016c20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016c30: 2020 2020 2020 2020 2020 2020 2022 6e6f               "no
-00016c40: 7420 6578 6973 742f 6973 206e 6f74 2061  t exist/is not a
-00016c50: 7661 696c 6162 6c65 220a 2020 2020 2020  vailable".      
-00016c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016c70: 2020 292c 0a20 2020 2020 2020 2020 2020    ),.           
-00016c80: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-00016c90: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-00016ca0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-00016cb0: 2020 2029 0a20 2020 2020 2020 2077 332e     ).        w3.
-00016cc0: 6d69 6464 6c65 7761 7265 5f6f 6e69 6f6e  middleware_onion
-00016cd0: 2e61 6464 280a 2020 2020 2020 2020 2020  .add(.          
-00016ce0: 2020 6661 696c 5f6d 6178 5f70 7269 6f5f    fail_max_prio_
-00016cf0: 6d69 6464 6c65 7761 7265 2c20 6e61 6d65  middleware, name
-00016d00: 3d22 6661 696c 5f6d 6178 5f70 7269 6f5f  ="fail_max_prio_
-00016d10: 6d69 6464 6c65 7761 7265 220a 2020 2020  middleware".    
-00016d20: 2020 2020 290a 0a20 2020 2020 2020 2077      )..        w
-00016d30: 6974 6820 7079 7465 7374 2e77 6172 6e73  ith pytest.warns
-00016d40: 280a 2020 2020 2020 2020 2020 2020 5573  (.            Us
-00016d50: 6572 5761 726e 696e 672c 0a20 2020 2020  erWarning,.     
-00016d60: 2020 2020 2020 206d 6174 6368 3d28 0a20         match=(. 
-00016d70: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00016d80: 5468 6572 6520 7761 7320 616e 2069 7373  There was an iss
-00016d90: 7565 2077 6974 6820 7468 6520 6d65 7468  ue with the meth
-00016da0: 6f64 2065 7468 5f6d 6178 5072 696f 7269  od eth_maxPriori
-00016db0: 7479 4665 6550 6572 4761 732e 220a 2020  tyFeePerGas.".  
-00016dc0: 2020 2020 2020 2020 2020 2020 2020 2220                " 
-00016dd0: 4361 6c63 756c 6174 696e 6720 7573 696e  Calculating usin
-00016de0: 6720 6574 685f 6665 6548 6973 746f 7279  g eth_feeHistory
-00016df0: 2e22 0a20 2020 2020 2020 2020 2020 2029  .".            )
-00016e00: 2c0a 2020 2020 2020 2020 293a 0a20 2020  ,.        ):.   
-00016e10: 2020 2020 2020 2020 2077 332e 6574 682e           w3.eth.
-00016e20: 6d61 785f 7072 696f 7269 7479 5f66 6565  max_priority_fee
-00016e30: 0a0a 2020 2020 2020 2020 7733 2e6d 6964  ..        w3.mid
-00016e40: 646c 6577 6172 655f 6f6e 696f 6e2e 7265  dleware_onion.re
-00016e50: 6d6f 7665 2822 6661 696c 5f6d 6178 5f70  move("fail_max_p
-00016e60: 7269 6f5f 6d69 6464 6c65 7761 7265 2229  rio_middleware")
-00016e70: 2020 2320 636c 6561 6e20 7570 0a0a 2020    # clean up..  
-00016e80: 2020 6465 6620 7465 7374 5f65 7468 5f6d    def test_eth_m
-00016e90: 6178 5f70 7269 6f72 6974 795f 6665 655f  ax_priority_fee_
-00016ea0: 7769 7468 5f66 6565 5f68 6973 746f 7279  with_fee_history
-00016eb0: 5f63 616c 6375 6c61 7469 6f6e 280a 2020  _calculation(.  
-00016ec0: 2020 2020 2020 7365 6c66 2c20 7733 3a20        self, w3: 
-00016ed0: 2257 6562 3322 0a20 2020 2029 202d 3e20  "Web3".    ) -> 
-00016ee0: 4e6f 6e65 3a0a 2020 2020 2020 2020 6661  None:.        fa
-00016ef0: 696c 5f6d 6178 5f70 7269 6f5f 6d69 6464  il_max_prio_midd
-00016f00: 6c65 7761 7265 203d 2063 6f6e 7374 7275  leware = constru
-00016f10: 6374 5f65 7272 6f72 5f67 656e 6572 6174  ct_error_generat
-00016f20: 6f72 5f6d 6964 646c 6577 6172 6528 0a20  or_middleware(. 
-00016f30: 2020 2020 2020 2020 2020 207b 5250 4345             {RPCE
-00016f40: 6e64 706f 696e 7428 2265 7468 5f6d 6178  ndpoint("eth_max
-00016f50: 5072 696f 7269 7479 4665 6550 6572 4761  PriorityFeePerGa
-00016f60: 7322 293a 206c 616d 6264 6120 2a5f 3a20  s"): lambda *_: 
-00016f70: 2222 7d0a 2020 2020 2020 2020 290a 2020  ""}.        ).  
-00016f80: 2020 2020 2020 7733 2e6d 6964 646c 6577        w3.middlew
-00016f90: 6172 655f 6f6e 696f 6e2e 6164 6428 0a20  are_onion.add(. 
-00016fa0: 2020 2020 2020 2020 2020 2066 6169 6c5f             fail_
-00016fb0: 6d61 785f 7072 696f 5f6d 6964 646c 6577  max_prio_middlew
-00016fc0: 6172 652c 206e 616d 653d 2266 6169 6c5f  are, name="fail_
-00016fd0: 6d61 785f 7072 696f 5f6d 6964 646c 6577  max_prio_middlew
-00016fe0: 6172 6522 0a20 2020 2020 2020 2029 0a0a  are".        )..
-00016ff0: 2020 2020 2020 2020 7769 7468 2070 7974          with pyt
-00017000: 6573 742e 7761 726e 7328 0a20 2020 2020  est.warns(.     
-00017010: 2020 2020 2020 2055 7365 7257 6172 6e69         UserWarni
-00017020: 6e67 2c0a 2020 2020 2020 2020 2020 2020  ng,.            
-00017030: 6d61 7463 683d 280a 2020 2020 2020 2020  match=(.        
-00017040: 2020 2020 2020 2020 2254 6865 7265 2077          "There w
-00017050: 6173 2061 6e20 6973 7375 6520 7769 7468  as an issue with
-00017060: 2074 6865 206d 6574 686f 6420 6574 685f   the method eth_
-00017070: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
-00017080: 7247 6173 2e22 0a20 2020 2020 2020 2020  rGas.".         
-00017090: 2020 2020 2020 2022 2043 616c 6375 6c61         " Calcula
-000170a0: 7469 6e67 2075 7369 6e67 2065 7468 5f66  ting using eth_f
-000170b0: 6565 4869 7374 6f72 792e 220a 2020 2020  eeHistory.".    
-000170c0: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
-000170d0: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-000170e0: 2020 6d61 785f 7072 696f 7269 7479 5f66    max_priority_f
-000170f0: 6565 203d 2077 332e 6574 682e 6d61 785f  ee = w3.eth.max_
-00017100: 7072 696f 7269 7479 5f66 6565 0a20 2020  priority_fee.   
-00017110: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-00017120: 6973 5f69 6e74 6567 6572 286d 6178 5f70  is_integer(max_p
-00017130: 7269 6f72 6974 795f 6665 6529 0a0a 2020  riority_fee)..  
-00017140: 2020 2020 2020 7733 2e6d 6964 646c 6577        w3.middlew
-00017150: 6172 655f 6f6e 696f 6e2e 7265 6d6f 7665  are_onion.remove
-00017160: 2822 6661 696c 5f6d 6178 5f70 7269 6f5f  ("fail_max_prio_
-00017170: 6d69 6464 6c65 7761 7265 2229 2020 2320  middleware")  # 
-00017180: 636c 6561 6e20 7570 0a0a 2020 2020 6465  clean up..    de
-00017190: 6620 7465 7374 5f65 7468 5f61 6363 6f75  f test_eth_accou
-000171a0: 6e74 7328 7365 6c66 2c20 7733 3a20 2257  nts(self, w3: "W
-000171b0: 6562 3322 2920 2d3e 204e 6f6e 653a 0a20  eb3") -> None:. 
-000171c0: 2020 2020 2020 2061 6363 6f75 6e74 7320         accounts 
-000171d0: 3d20 7733 2e65 7468 2e61 6363 6f75 6e74  = w3.eth.account
-000171e0: 730a 2020 2020 2020 2020 6173 7365 7274  s.        assert
-000171f0: 2069 735f 6c69 7374 5f6c 696b 6528 6163   is_list_like(ac
-00017200: 636f 756e 7473 290a 2020 2020 2020 2020  counts).        
-00017210: 6173 7365 7274 206c 656e 2861 6363 6f75  assert len(accou
-00017220: 6e74 7329 2021 3d20 300a 2020 2020 2020  nts) != 0.      
-00017230: 2020 6173 7365 7274 2061 6c6c 2828 6973    assert all((is
-00017240: 5f63 6865 636b 7375 6d5f 6164 6472 6573  _checksum_addres
-00017250: 7328 6163 636f 756e 7429 2066 6f72 2061  s(account) for a
-00017260: 6363 6f75 6e74 2069 6e20 6163 636f 756e  ccount in accoun
-00017270: 7473 2929 0a20 2020 2020 2020 2061 7373  ts)).        ass
-00017280: 6572 7420 7733 2e65 7468 2e63 6f69 6e62  ert w3.eth.coinb
-00017290: 6173 6520 696e 2061 6363 6f75 6e74 730a  ase in accounts.
-000172a0: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
-000172b0: 685f 626c 6f63 6b5f 6e75 6d62 6572 2873  h_block_number(s
-000172c0: 656c 662c 2077 333a 2022 5765 6233 2229  elf, w3: "Web3")
-000172d0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-000172e0: 2020 626c 6f63 6b5f 6e75 6d62 6572 203d    block_number =
-000172f0: 2077 332e 6574 682e 626c 6f63 6b5f 6e75   w3.eth.block_nu
-00017300: 6d62 6572 0a20 2020 2020 2020 2061 7373  mber.        ass
-00017310: 6572 7420 6973 5f69 6e74 6567 6572 2862  ert is_integer(b
-00017320: 6c6f 636b 5f6e 756d 6265 7229 0a20 2020  lock_number).   
-00017330: 2020 2020 2061 7373 6572 7420 626c 6f63       assert bloc
-00017340: 6b5f 6e75 6d62 6572 203e 3d20 300a 0a20  k_number >= 0.. 
-00017350: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
-00017360: 6765 745f 626c 6f63 6b5f 6e75 6d62 6572  get_block_number
-00017370: 2873 656c 662c 2077 333a 2022 5765 6233  (self, w3: "Web3
-00017380: 2229 202d 3e20 4e6f 6e65 3a0a 2020 2020  ") -> None:.    
-00017390: 2020 2020 626c 6f63 6b5f 6e75 6d62 6572      block_number
-000173a0: 203d 2077 332e 6574 682e 6765 745f 626c   = w3.eth.get_bl
-000173b0: 6f63 6b5f 6e75 6d62 6572 2829 0a20 2020  ock_number().   
-000173c0: 2020 2020 2061 7373 6572 7420 6973 5f69       assert is_i
-000173d0: 6e74 6567 6572 2862 6c6f 636b 5f6e 756d  nteger(block_num
-000173e0: 6265 7229 0a20 2020 2020 2020 2061 7373  ber).        ass
-000173f0: 6572 7420 626c 6f63 6b5f 6e75 6d62 6572  ert block_number
-00017400: 203e 3d20 300a 0a20 2020 2064 6566 2074   >= 0..    def t
-00017410: 6573 745f 6574 685f 6765 745f 6261 6c61  est_eth_get_bala
-00017420: 6e63 6528 7365 6c66 2c20 7733 3a20 2257  nce(self, w3: "W
-00017430: 6562 3322 2920 2d3e 204e 6f6e 653a 0a20  eb3") -> None:. 
-00017440: 2020 2020 2020 2063 6f69 6e62 6173 6520         coinbase 
-00017450: 3d20 7733 2e65 7468 2e63 6f69 6e62 6173  = w3.eth.coinbas
-00017460: 650a 0a20 2020 2020 2020 2077 6974 6820  e..        with 
-00017470: 7079 7465 7374 2e72 6169 7365 7328 496e  pytest.raises(In
-00017480: 7661 6c69 6441 6464 7265 7373 293a 0a20  validAddress):. 
-00017490: 2020 2020 2020 2020 2020 2077 332e 6574             w3.et
-000174a0: 682e 6765 745f 6261 6c61 6e63 6528 4368  h.get_balance(Ch
-000174b0: 6563 6b73 756d 4164 6472 6573 7328 4865  ecksumAddress(He
-000174c0: 7841 6464 7265 7373 2848 6578 5374 7228  xAddress(HexStr(
-000174d0: 636f 696e 6261 7365 2e6c 6f77 6572 2829  coinbase.lower()
-000174e0: 2929 2929 0a0a 2020 2020 2020 2020 6261  ))))..        ba
-000174f0: 6c61 6e63 6520 3d20 7733 2e65 7468 2e67  lance = w3.eth.g
-00017500: 6574 5f62 616c 616e 6365 2863 6f69 6e62  et_balance(coinb
-00017510: 6173 6529 0a0a 2020 2020 2020 2020 6173  ase)..        as
-00017520: 7365 7274 2069 735f 696e 7465 6765 7228  sert is_integer(
-00017530: 6261 6c61 6e63 6529 0a20 2020 2020 2020  balance).       
-00017540: 2061 7373 6572 7420 6261 6c61 6e63 6520   assert balance 
-00017550: 3e3d 2030 0a0a 2020 2020 6465 6620 7465  >= 0..    def te
-00017560: 7374 5f65 7468 5f67 6574 5f62 616c 616e  st_eth_get_balan
-00017570: 6365 5f77 6974 685f 626c 6f63 6b5f 6964  ce_with_block_id
-00017580: 656e 7469 6669 6572 2873 656c 662c 2077  entifier(self, w
-00017590: 333a 2022 5765 6233 2229 202d 3e20 4e6f  3: "Web3") -> No
-000175a0: 6e65 3a0a 2020 2020 2020 2020 6d69 6e65  ne:.        mine
-000175b0: 725f 6164 6472 6573 7320 3d20 7733 2e65  r_address = w3.e
-000175c0: 7468 2e67 6574 5f62 6c6f 636b 2831 295b  th.get_block(1)[
-000175d0: 226d 696e 6572 225d 0a20 2020 2020 2020  "miner"].       
-000175e0: 2067 656e 6573 6973 5f62 616c 616e 6365   genesis_balance
-000175f0: 203d 2077 332e 6574 682e 6765 745f 6261   = w3.eth.get_ba
-00017600: 6c61 6e63 6528 6d69 6e65 725f 6164 6472  lance(miner_addr
-00017610: 6573 732c 2030 290a 2020 2020 2020 2020  ess, 0).        
-00017620: 6c61 7465 725f 6261 6c61 6e63 6520 3d20  later_balance = 
-00017630: 7733 2e65 7468 2e67 6574 5f62 616c 616e  w3.eth.get_balan
-00017640: 6365 286d 696e 6572 5f61 6464 7265 7373  ce(miner_address
-00017650: 2c20 3129 0a0a 2020 2020 2020 2020 6173  , 1)..        as
-00017660: 7365 7274 2069 735f 696e 7465 6765 7228  sert is_integer(
-00017670: 6765 6e65 7369 735f 6261 6c61 6e63 6529  genesis_balance)
-00017680: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00017690: 6973 5f69 6e74 6567 6572 286c 6174 6572  is_integer(later
-000176a0: 5f62 616c 616e 6365 290a 2020 2020 2020  _balance).      
-000176b0: 2020 6173 7365 7274 206c 6174 6572 5f62    assert later_b
-000176c0: 616c 616e 6365 203e 2067 656e 6573 6973  alance > genesis
-000176d0: 5f62 616c 616e 6365 0a0a 2020 2020 4070  _balance..    @p
-000176e0: 7974 6573 742e 6d61 726b 2e70 6172 616d  ytest.mark.param
-000176f0: 6574 7269 7a65 280a 2020 2020 2020 2020  etrize(.        
-00017700: 2261 6464 7265 7373 2c20 6578 7065 6374  "address, expect
-00017710: 5f73 7563 6365 7373 222c 0a20 2020 2020  _success",.     
-00017720: 2020 205b 2822 7465 7374 2d61 6464 7265     [("test-addre
-00017730: 7373 2e65 7468 222c 2054 7275 6529 2c20  ss.eth", True), 
-00017740: 2822 6e6f 742d 616e 2d61 6464 7265 7373  ("not-an-address
-00017750: 2e65 7468 222c 2046 616c 7365 295d 2c0a  .eth", False)],.
-00017760: 2020 2020 290a 2020 2020 6465 6620 7465      ).    def te
-00017770: 7374 5f65 7468 5f67 6574 5f62 616c 616e  st_eth_get_balan
-00017780: 6365 5f77 6974 685f 656e 735f 6e61 6d65  ce_with_ens_name
-00017790: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-000177a0: 7733 3a20 2257 6562 3322 2c20 6164 6472  w3: "Web3", addr
-000177b0: 6573 733a 2043 6865 636b 7375 6d41 6464  ess: ChecksumAdd
-000177c0: 7265 7373 2c20 6578 7065 6374 5f73 7563  ress, expect_suc
-000177d0: 6365 7373 3a20 626f 6f6c 0a20 2020 2029  cess: bool.    )
-000177e0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-000177f0: 2020 7769 7468 2065 6e73 5f61 6464 7265    with ens_addre
-00017800: 7373 6573 2877 332c 207b 2274 6573 742d  sses(w3, {"test-
-00017810: 6164 6472 6573 732e 6574 6822 3a20 7733  address.eth": w3
-00017820: 2e65 7468 2e61 6363 6f75 6e74 735b 305d  .eth.accounts[0]
-00017830: 7d29 3a0a 2020 2020 2020 2020 2020 2020  }):.            
-00017840: 6966 2065 7870 6563 745f 7375 6363 6573  if expect_succes
-00017850: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-00017860: 2020 2062 616c 616e 6365 203d 2077 332e     balance = w3.
-00017870: 6574 682e 6765 745f 6261 6c61 6e63 6528  eth.get_balance(
-00017880: 6164 6472 6573 7329 0a20 2020 2020 2020  address).       
-00017890: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-000178a0: 6973 5f69 6e74 6567 6572 2862 616c 616e  is_integer(balan
-000178b0: 6365 290a 2020 2020 2020 2020 2020 2020  ce).            
-000178c0: 2020 2020 6173 7365 7274 2062 616c 616e      assert balan
-000178d0: 6365 203e 3d20 300a 2020 2020 2020 2020  ce >= 0.        
-000178e0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000178f0: 2020 2020 2020 2020 2020 7769 7468 2070            with p
-00017900: 7974 6573 742e 7261 6973 6573 284e 616d  ytest.raises(Nam
-00017910: 654e 6f74 466f 756e 6429 3a0a 2020 2020  eNotFound):.    
-00017920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017930: 7733 2e65 7468 2e67 6574 5f62 616c 616e  w3.eth.get_balan
-00017940: 6365 2861 6464 7265 7373 290a 0a20 2020  ce(address)..   
-00017950: 2064 6566 2074 6573 745f 6574 685f 6765   def test_eth_ge
-00017960: 745f 7374 6f72 6167 655f 6174 2873 656c  t_storage_at(sel
-00017970: 662c 2077 333a 2022 5765 6233 222c 2073  f, w3: "Web3", s
-00017980: 746f 7261 6765 5f63 6f6e 7472 6163 743a  torage_contract:
-00017990: 2022 436f 6e74 7261 6374 2229 202d 3e20   "Contract") -> 
-000179a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7374  None:.        st
-000179b0: 6f72 6167 655f 636f 6e74 7261 6374 5f61  orage_contract_a
-000179c0: 6464 7265 7373 203d 2073 746f 7261 6765  ddress = storage
-000179d0: 5f63 6f6e 7472 6163 742e 6164 6472 6573  _contract.addres
-000179e0: 730a 0a20 2020 2020 2020 2073 6c6f 745f  s..        slot_
-000179f0: 3020 3d20 7733 2e65 7468 2e67 6574 5f73  0 = w3.eth.get_s
-00017a00: 746f 7261 6765 5f61 7428 7374 6f72 6167  torage_at(storag
-00017a10: 655f 636f 6e74 7261 6374 5f61 6464 7265  e_contract_addre
-00017a20: 7373 2c20 3029 0a20 2020 2020 2020 2061  ss, 0).        a
-00017a30: 7373 6572 7420 736c 6f74 5f30 203d 3d20  ssert slot_0 == 
-00017a40: 4865 7842 7974 6573 2866 2230 787b 2730  HexBytes(f"0x{'0
-00017a50: 3027 202a 2033 327d 2229 0a0a 2020 2020  0' * 32}")..    
-00017a60: 2020 2020 736c 6f74 5f31 203d 2077 332e      slot_1 = w3.
-00017a70: 6574 682e 6765 745f 7374 6f72 6167 655f  eth.get_storage_
-00017a80: 6174 2873 746f 7261 6765 5f63 6f6e 7472  at(storage_contr
-00017a90: 6163 745f 6164 6472 6573 732c 2031 290a  act_address, 1).
-00017aa0: 2020 2020 2020 2020 6173 7365 7274 2073          assert s
-00017ab0: 6c6f 745f 3120 3d3d 2048 6578 4279 7465  lot_1 == HexByte
-00017ac0: 7328 6622 3078 7b27 3030 2720 2a20 3331  s(f"0x{'00' * 31
-00017ad0: 7d30 3122 290a 0a20 2020 2020 2020 2073  }01")..        s
-00017ae0: 6c6f 745f 3220 3d20 7733 2e65 7468 2e67  lot_2 = w3.eth.g
-00017af0: 6574 5f73 746f 7261 6765 5f61 7428 7374  et_storage_at(st
-00017b00: 6f72 6167 655f 636f 6e74 7261 6374 5f61  orage_contract_a
-00017b10: 6464 7265 7373 2c20 3229 0a20 2020 2020  ddress, 2).     
-00017b20: 2020 2061 7373 6572 7420 736c 6f74 5f32     assert slot_2
-00017b30: 203d 3d20 4865 7842 7974 6573 2866 2230   == HexBytes(f"0
-00017b40: 787b 2730 3027 202a 2033 317d 3032 2229  x{'00' * 31}02")
-00017b50: 0a0a 2020 2020 2020 2020 736c 6f74 5f33  ..        slot_3
-00017b60: 203d 2077 332e 6574 682e 6765 745f 7374   = w3.eth.get_st
-00017b70: 6f72 6167 655f 6174 2873 746f 7261 6765  orage_at(storage
-00017b80: 5f63 6f6e 7472 6163 745f 6164 6472 6573  _contract_addres
-00017b90: 732c 2033 290a 2020 2020 2020 2020 6173  s, 3).        as
-00017ba0: 7365 7274 2073 6c6f 745f 3320 3d3d 2048  sert slot_3 == H
-00017bb0: 6578 4279 7465 7328 0a20 2020 2020 2020  exBytes(.       
-00017bc0: 2020 2020 2022 3078 3734 3638 3732 3635       "0x74687265
-00017bd0: 3635 3030 3030 3030 3030 3030 3030 3030  6500000000000000
-00017be0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00017bf0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00017c00: 3030 3030 3030 3061 220a 2020 2020 2020  0000000a".      
-00017c10: 2020 290a 2020 2020 2020 2020 6173 7365    ).        asse
-00017c20: 7274 2062 7974 6573 2873 6c6f 745f 335b  rt bytes(slot_3[
-00017c30: 3a35 5d29 203d 3d20 6222 7468 7265 6522  :5]) == b"three"
-00017c40: 0a0a 2020 2020 2020 2020 736c 6f74 5f34  ..        slot_4
-00017c50: 203d 2077 332e 6574 682e 6765 745f 7374   = w3.eth.get_st
-00017c60: 6f72 6167 655f 6174 2873 746f 7261 6765  orage_at(storage
-00017c70: 5f63 6f6e 7472 6163 745f 6164 6472 6573  _contract_addres
-00017c80: 732c 2034 290a 2020 2020 2020 2020 6173  s, 4).        as
-00017c90: 7365 7274 2073 6c6f 745f 3420 3d3d 2048  sert slot_4 == H
-00017ca0: 6578 4279 7465 7328 0a20 2020 2020 2020  exBytes(.       
-00017cb0: 2020 2020 2022 3078 3636 3666 3735 3732       "0x666f7572
-00017cc0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00017cd0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00017ce0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00017cf0: 3030 3030 3030 3038 220a 2020 2020 2020  00000008".      
-00017d00: 2020 290a 2020 2020 2020 2020 6173 7365    ).        asse
-00017d10: 7274 2062 7974 6573 2873 6c6f 745f 345b  rt bytes(slot_4[
-00017d20: 3a34 5d29 203d 3d20 6222 666f 7572 220a  :4]) == b"four".
-00017d30: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
-00017d40: 685f 6765 745f 7374 6f72 6167 655f 6174  h_get_storage_at
-00017d50: 5f65 6e73 5f6e 616d 6528 0a20 2020 2020  _ens_name(.     
-00017d60: 2020 2073 656c 662c 2077 333a 2022 5765     self, w3: "We
-00017d70: 6233 222c 2073 746f 7261 6765 5f63 6f6e  b3", storage_con
-00017d80: 7472 6163 743a 2022 436f 6e74 7261 6374  tract: "Contract
-00017d90: 220a 2020 2020 2920 2d3e 204e 6f6e 653a  ".    ) -> None:
-00017da0: 0a20 2020 2020 2020 2077 6974 6820 656e  .        with en
-00017db0: 735f 6164 6472 6573 7365 7328 7733 2c20  s_addresses(w3, 
-00017dc0: 7b22 7374 6f72 6167 652e 6574 6822 3a20  {"storage.eth": 
-00017dd0: 7374 6f72 6167 655f 636f 6e74 7261 6374  storage_contract
-00017de0: 2e61 6464 7265 7373 7d29 3a0a 2020 2020  .address}):.    
-00017df0: 2020 2020 2020 2020 7374 6f72 6167 6520          storage 
-00017e00: 3d20 7733 2e65 7468 2e67 6574 5f73 746f  = w3.eth.get_sto
-00017e10: 7261 6765 5f61 7428 454e 5328 2273 746f  rage_at(ENS("sto
-00017e20: 7261 6765 2e65 7468 2229 2c20 3129 0a20  rage.eth"), 1). 
-00017e30: 2020 2020 2020 2020 2020 2061 7373 6572             asser
-00017e40: 7420 7374 6f72 6167 6520 3d3d 2048 6578  t storage == Hex
-00017e50: 4279 7465 7328 6622 3078 7b27 3030 2720  Bytes(f"0x{'00' 
-00017e60: 2a20 3331 7d30 3122 290a 0a20 2020 2064  * 31}01")..    d
-00017e70: 6566 2074 6573 745f 6574 685f 6765 745f  ef test_eth_get_
-00017e80: 7374 6f72 6167 655f 6174 5f69 6e76 616c  storage_at_inval
-00017e90: 6964 5f61 6464 7265 7373 2873 656c 662c  id_address(self,
-00017ea0: 2077 333a 2022 5765 6233 2229 202d 3e20   w3: "Web3") -> 
-00017eb0: 4e6f 6e65 3a0a 2020 2020 2020 2020 636f  None:.        co
-00017ec0: 696e 6261 7365 203d 2077 332e 6574 682e  inbase = w3.eth.
-00017ed0: 636f 696e 6261 7365 0a20 2020 2020 2020  coinbase.       
-00017ee0: 2077 6974 6820 7079 7465 7374 2e72 6169   with pytest.rai
-00017ef0: 7365 7328 496e 7661 6c69 6441 6464 7265  ses(InvalidAddre
-00017f00: 7373 293a 0a20 2020 2020 2020 2020 2020  ss):.           
-00017f10: 2077 332e 6574 682e 6765 745f 7374 6f72   w3.eth.get_stor
-00017f20: 6167 655f 6174 280a 2020 2020 2020 2020  age_at(.        
-00017f30: 2020 2020 2020 2020 4368 6563 6b73 756d          Checksum
-00017f40: 4164 6472 6573 7328 4865 7841 6464 7265  Address(HexAddre
-00017f50: 7373 2848 6578 5374 7228 636f 696e 6261  ss(HexStr(coinba
-00017f60: 7365 2e6c 6f77 6572 2829 2929 292c 2030  se.lower()))), 0
-00017f70: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
-00017f80: 2020 2020 6465 6620 7465 7374 5f65 7468      def test_eth
-00017f90: 5f67 6574 5f74 7261 6e73 6163 7469 6f6e  _get_transaction
-00017fa0: 5f63 6f75 6e74 280a 2020 2020 2020 2020  _count(.        
-00017fb0: 7365 6c66 2c20 7733 3a20 2257 6562 3322  self, w3: "Web3"
-00017fc0: 2c20 756e 6c6f 636b 6564 5f61 6363 6f75  , unlocked_accou
-00017fd0: 6e74 5f64 7561 6c5f 7479 7065 3a20 4368  nt_dual_type: Ch
-00017fe0: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
-00017ff0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-00018000: 2020 2020 2074 7261 6e73 6163 7469 6f6e       transaction
-00018010: 5f63 6f75 6e74 203d 2077 332e 6574 682e  _count = w3.eth.
-00018020: 6765 745f 7472 616e 7361 6374 696f 6e5f  get_transaction_
-00018030: 636f 756e 7428 756e 6c6f 636b 6564 5f61  count(unlocked_a
-00018040: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
-00018050: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-00018060: 2069 735f 696e 7465 6765 7228 7472 616e   is_integer(tran
-00018070: 7361 6374 696f 6e5f 636f 756e 7429 0a20  saction_count). 
-00018080: 2020 2020 2020 2061 7373 6572 7420 7472         assert tr
-00018090: 616e 7361 6374 696f 6e5f 636f 756e 7420  ansaction_count 
-000180a0: 3e3d 2030 0a0a 2020 2020 6465 6620 7465  >= 0..    def te
-000180b0: 7374 5f65 7468 5f67 6574 5f74 7261 6e73  st_eth_get_trans
-000180c0: 6163 7469 6f6e 5f63 6f75 6e74 5f65 6e73  action_count_ens
-000180d0: 5f6e 616d 6528 0a20 2020 2020 2020 2073  _name(.        s
-000180e0: 656c 662c 2077 333a 2022 5765 6233 222c  elf, w3: "Web3",
-000180f0: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-00018100: 745f 6475 616c 5f74 7970 653a 2043 6865  t_dual_type: Che
-00018110: 636b 7375 6d41 6464 7265 7373 0a20 2020  cksumAddress.   
-00018120: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-00018130: 2020 2020 7769 7468 2065 6e73 5f61 6464      with ens_add
-00018140: 7265 7373 6573 280a 2020 2020 2020 2020  resses(.        
-00018150: 2020 2020 7733 2c20 7b22 756e 6c6f 636b      w3, {"unlock
-00018160: 6564 2d61 6363 742d 6475 616c 2d74 7970  ed-acct-dual-typ
-00018170: 652e 6574 6822 3a20 756e 6c6f 636b 6564  e.eth": unlocked
-00018180: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
-00018190: 7065 7d0a 2020 2020 2020 2020 293a 0a20  pe}.        ):. 
-000181a0: 2020 2020 2020 2020 2020 2074 7261 6e73             trans
-000181b0: 6163 7469 6f6e 5f63 6f75 6e74 203d 2077  action_count = w
-000181c0: 332e 6574 682e 6765 745f 7472 616e 7361  3.eth.get_transa
-000181d0: 6374 696f 6e5f 636f 756e 7428 0a20 2020  ction_count(.   
-000181e0: 2020 2020 2020 2020 2020 2020 2045 4e53               ENS
-000181f0: 2822 756e 6c6f 636b 6564 2d61 6363 742d  ("unlocked-acct-
-00018200: 6475 616c 2d74 7970 652e 6574 6822 290a  dual-type.eth").
-00018210: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-00018220: 2020 2020 2020 2020 2020 6173 7365 7274            assert
-00018230: 2069 735f 696e 7465 6765 7228 7472 616e   is_integer(tran
-00018240: 7361 6374 696f 6e5f 636f 756e 7429 0a20  saction_count). 
-00018250: 2020 2020 2020 2020 2020 2061 7373 6572             asser
-00018260: 7420 7472 616e 7361 6374 696f 6e5f 636f  t transaction_co
-00018270: 756e 7420 3e3d 2030 0a0a 2020 2020 6465  unt >= 0..    de
-00018280: 6620 7465 7374 5f65 7468 5f67 6574 5f74  f test_eth_get_t
-00018290: 7261 6e73 6163 7469 6f6e 5f63 6f75 6e74  ransaction_count
-000182a0: 5f69 6e76 616c 6964 5f61 6464 7265 7373  _invalid_address
-000182b0: 2873 656c 662c 2077 333a 2022 5765 6233  (self, w3: "Web3
-000182c0: 2229 202d 3e20 4e6f 6e65 3a0a 2020 2020  ") -> None:.    
-000182d0: 2020 2020 636f 696e 6261 7365 203d 2077      coinbase = w
-000182e0: 332e 6574 682e 636f 696e 6261 7365 0a20  3.eth.coinbase. 
-000182f0: 2020 2020 2020 2077 6974 6820 7079 7465         with pyte
-00018300: 7374 2e72 6169 7365 7328 496e 7661 6c69  st.raises(Invali
-00018310: 6441 6464 7265 7373 293a 0a20 2020 2020  dAddress):.     
-00018320: 2020 2020 2020 2077 332e 6574 682e 6765         w3.eth.ge
-00018330: 745f 7472 616e 7361 6374 696f 6e5f 636f  t_transaction_co
-00018340: 756e 7428 0a20 2020 2020 2020 2020 2020  unt(.           
-00018350: 2020 2020 2043 6865 636b 7375 6d41 6464       ChecksumAdd
-00018360: 7265 7373 2848 6578 4164 6472 6573 7328  ress(HexAddress(
-00018370: 4865 7853 7472 2863 6f69 6e62 6173 652e  HexStr(coinbase.
-00018380: 6c6f 7765 7228 2929 2929 0a20 2020 2020  lower()))).     
-00018390: 2020 2020 2020 2029 0a0a 2020 2020 6465         )..    de
-000183a0: 6620 7465 7374 5f65 7468 5f67 6574 426c  f test_eth_getBl
-000183b0: 6f63 6b54 7261 6e73 6163 7469 6f6e 436f  ockTransactionCo
-000183c0: 756e 7442 7948 6173 685f 656d 7074 795f  untByHash_empty_
-000183d0: 626c 6f63 6b28 0a20 2020 2020 2020 2073  block(.        s
-000183e0: 656c 662c 2077 333a 2022 5765 6233 222c  elf, w3: "Web3",
-000183f0: 2065 6d70 7479 5f62 6c6f 636b 3a20 426c   empty_block: Bl
-00018400: 6f63 6b44 6174 610a 2020 2020 2920 2d3e  ockData.    ) ->
-00018410: 204e 6f6e 653a 0a20 2020 2020 2020 2074   None:.        t
-00018420: 7261 6e73 6163 7469 6f6e 5f63 6f75 6e74  ransaction_count
-00018430: 203d 2077 332e 6574 682e 6765 745f 626c   = w3.eth.get_bl
-00018440: 6f63 6b5f 7472 616e 7361 6374 696f 6e5f  ock_transaction_
-00018450: 636f 756e 7428 656d 7074 795f 626c 6f63  count(empty_bloc
-00018460: 6b5b 2268 6173 6822 5d29 0a0a 2020 2020  k["hash"])..    
-00018470: 2020 2020 6173 7365 7274 2069 735f 696e      assert is_in
-00018480: 7465 6765 7228 7472 616e 7361 6374 696f  teger(transactio
-00018490: 6e5f 636f 756e 7429 0a20 2020 2020 2020  n_count).       
-000184a0: 2061 7373 6572 7420 7472 616e 7361 6374   assert transact
-000184b0: 696f 6e5f 636f 756e 7420 3d3d 2030 0a0a  ion_count == 0..
-000184c0: 2020 2020 6465 6620 7465 7374 5f65 7468      def test_eth
-000184d0: 5f67 6574 426c 6f63 6b54 7261 6e73 6163  _getBlockTransac
-000184e0: 7469 6f6e 436f 756e 7442 794e 756d 6265  tionCountByNumbe
-000184f0: 725f 656d 7074 795f 626c 6f63 6b28 0a20  r_empty_block(. 
-00018500: 2020 2020 2020 2073 656c 662c 2077 333a         self, w3:
-00018510: 2022 5765 6233 222c 2065 6d70 7479 5f62   "Web3", empty_b
-00018520: 6c6f 636b 3a20 426c 6f63 6b44 6174 610a  lock: BlockData.
-00018530: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
-00018540: 2020 2020 2020 2074 7261 6e73 6163 7469         transacti
-00018550: 6f6e 5f63 6f75 6e74 203d 2077 332e 6574  on_count = w3.et
-00018560: 682e 6765 745f 626c 6f63 6b5f 7472 616e  h.get_block_tran
-00018570: 7361 6374 696f 6e5f 636f 756e 7428 656d  saction_count(em
-00018580: 7074 795f 626c 6f63 6b5b 226e 756d 6265  pty_block["numbe
-00018590: 7222 5d29 0a0a 2020 2020 2020 2020 6173  r"])..        as
-000185a0: 7365 7274 2069 735f 696e 7465 6765 7228  sert is_integer(
-000185b0: 7472 616e 7361 6374 696f 6e5f 636f 756e  transaction_coun
-000185c0: 7429 0a20 2020 2020 2020 2061 7373 6572  t).        asser
-000185d0: 7420 7472 616e 7361 6374 696f 6e5f 636f  t transaction_co
-000185e0: 756e 7420 3d3d 2030 0a0a 2020 2020 6465  unt == 0..    de
-000185f0: 6620 7465 7374 5f65 7468 5f67 6574 426c  f test_eth_getBl
-00018600: 6f63 6b54 7261 6e73 6163 7469 6f6e 436f  ockTransactionCo
-00018610: 756e 7442 7948 6173 685f 626c 6f63 6b5f  untByHash_block_
-00018620: 7769 7468 5f74 786e 280a 2020 2020 2020  with_txn(.      
-00018630: 2020 7365 6c66 2c20 7733 3a20 2257 6562    self, w3: "Web
-00018640: 3322 2c20 626c 6f63 6b5f 7769 7468 5f74  3", block_with_t
-00018650: 786e 3a20 426c 6f63 6b44 6174 610a 2020  xn: BlockData.  
-00018660: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-00018670: 2020 2020 2074 7261 6e73 6163 7469 6f6e       transaction
-00018680: 5f63 6f75 6e74 203d 2077 332e 6574 682e  _count = w3.eth.
-00018690: 6765 745f 626c 6f63 6b5f 7472 616e 7361  get_block_transa
-000186a0: 6374 696f 6e5f 636f 756e 7428 626c 6f63  ction_count(bloc
-000186b0: 6b5f 7769 7468 5f74 786e 5b22 6861 7368  k_with_txn["hash
-000186c0: 225d 290a 0a20 2020 2020 2020 2061 7373  "])..        ass
-000186d0: 6572 7420 6973 5f69 6e74 6567 6572 2874  ert is_integer(t
-000186e0: 7261 6e73 6163 7469 6f6e 5f63 6f75 6e74  ransaction_count
-000186f0: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-00018700: 2074 7261 6e73 6163 7469 6f6e 5f63 6f75   transaction_cou
-00018710: 6e74 203e 3d20 310a 0a20 2020 2064 6566  nt >= 1..    def
-00018720: 2074 6573 745f 6574 685f 6765 7442 6c6f   test_eth_getBlo
-00018730: 636b 5472 616e 7361 6374 696f 6e43 6f75  ckTransactionCou
-00018740: 6e74 4279 4e75 6d62 6572 5f62 6c6f 636b  ntByNumber_block
-00018750: 5f77 6974 685f 7478 6e28 0a20 2020 2020  _with_txn(.     
-00018760: 2020 2073 656c 662c 2077 333a 2022 5765     self, w3: "We
-00018770: 6233 222c 2062 6c6f 636b 5f77 6974 685f  b3", block_with_
-00018780: 7478 6e3a 2042 6c6f 636b 4461 7461 0a20  txn: BlockData. 
-00018790: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-000187a0: 2020 2020 2020 7472 616e 7361 6374 696f        transactio
-000187b0: 6e5f 636f 756e 7420 3d20 7733 2e65 7468  n_count = w3.eth
-000187c0: 2e67 6574 5f62 6c6f 636b 5f74 7261 6e73  .get_block_trans
-000187d0: 6163 7469 6f6e 5f63 6f75 6e74 2862 6c6f  action_count(blo
-000187e0: 636b 5f77 6974 685f 7478 6e5b 226e 756d  ck_with_txn["num
-000187f0: 6265 7222 5d29 0a0a 2020 2020 2020 2020  ber"])..        
-00018800: 6173 7365 7274 2069 735f 696e 7465 6765  assert is_intege
-00018810: 7228 7472 616e 7361 6374 696f 6e5f 636f  r(transaction_co
-00018820: 756e 7429 0a20 2020 2020 2020 2061 7373  unt).        ass
-00018830: 6572 7420 7472 616e 7361 6374 696f 6e5f  ert transaction_
-00018840: 636f 756e 7420 3e3d 2031 0a0a 2020 2020  count >= 1..    
-00018850: 6465 6620 7465 7374 5f65 7468 5f67 6574  def test_eth_get
-00018860: 556e 636c 6543 6f75 6e74 4279 426c 6f63  UncleCountByBloc
-00018870: 6b48 6173 6828 0a20 2020 2020 2020 2073  kHash(.        s
-00018880: 656c 662c 2077 333a 2022 5765 6233 222c  elf, w3: "Web3",
-00018890: 2065 6d70 7479 5f62 6c6f 636b 3a20 426c   empty_block: Bl
-000188a0: 6f63 6b44 6174 610a 2020 2020 2920 2d3e  ockData.    ) ->
-000188b0: 204e 6f6e 653a 0a20 2020 2020 2020 2075   None:.        u
-000188c0: 6e63 6c65 5f63 6f75 6e74 203d 2077 332e  ncle_count = w3.
-000188d0: 6574 682e 6765 745f 756e 636c 655f 636f  eth.get_uncle_co
-000188e0: 756e 7428 656d 7074 795f 626c 6f63 6b5b  unt(empty_block[
-000188f0: 2268 6173 6822 5d29 0a0a 2020 2020 2020  "hash"])..      
-00018900: 2020 6173 7365 7274 2069 735f 696e 7465    assert is_inte
-00018910: 6765 7228 756e 636c 655f 636f 756e 7429  ger(uncle_count)
-00018920: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00018930: 756e 636c 655f 636f 756e 7420 3d3d 2030  uncle_count == 0
-00018940: 0a0a 2020 2020 6465 6620 7465 7374 5f65  ..    def test_e
-00018950: 7468 5f67 6574 556e 636c 6543 6f75 6e74  th_getUncleCount
-00018960: 4279 426c 6f63 6b4e 756d 6265 7228 0a20  ByBlockNumber(. 
-00018970: 2020 2020 2020 2073 656c 662c 2077 333a         self, w3:
-00018980: 2022 5765 6233 222c 2065 6d70 7479 5f62   "Web3", empty_b
-00018990: 6c6f 636b 3a20 426c 6f63 6b44 6174 610a  lock: BlockData.
-000189a0: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
-000189b0: 2020 2020 2020 2075 6e63 6c65 5f63 6f75         uncle_cou
-000189c0: 6e74 203d 2077 332e 6574 682e 6765 745f  nt = w3.eth.get_
-000189d0: 756e 636c 655f 636f 756e 7428 656d 7074  uncle_count(empt
-000189e0: 795f 626c 6f63 6b5b 226e 756d 6265 7222  y_block["number"
-000189f0: 5d29 0a0a 2020 2020 2020 2020 6173 7365  ])..        asse
-00018a00: 7274 2069 735f 696e 7465 6765 7228 756e  rt is_integer(un
-00018a10: 636c 655f 636f 756e 7429 0a20 2020 2020  cle_count).     
-00018a20: 2020 2061 7373 6572 7420 756e 636c 655f     assert uncle_
-00018a30: 636f 756e 7420 3d3d 2030 0a0a 2020 2020  count == 0..    
-00018a40: 6465 6620 7465 7374 5f65 7468 5f67 6574  def test_eth_get
-00018a50: 5f63 6f64 6528 0a20 2020 2020 2020 2073  _code(.        s
-00018a60: 656c 662c 2077 333a 2022 5765 6233 222c  elf, w3: "Web3",
-00018a70: 206d 6174 685f 636f 6e74 7261 6374 5f61   math_contract_a
-00018a80: 6464 7265 7373 3a20 4368 6563 6b73 756d  ddress: Checksum
-00018a90: 4164 6472 6573 730a 2020 2020 2920 2d3e  Address.    ) ->
-00018aa0: 204e 6f6e 653a 0a20 2020 2020 2020 2063   None:.        c
-00018ab0: 6f64 6520 3d20 7733 2e65 7468 2e67 6574  ode = w3.eth.get
-00018ac0: 5f63 6f64 6528 6d61 7468 5f63 6f6e 7472  _code(math_contr
-00018ad0: 6163 745f 6164 6472 6573 7329 0a20 2020  act_address).   
-00018ae0: 2020 2020 2061 7373 6572 7420 6973 696e       assert isin
-00018af0: 7374 616e 6365 2863 6f64 652c 2048 6578  stance(code, Hex
-00018b00: 4279 7465 7329 0a20 2020 2020 2020 2061  Bytes).        a
-00018b10: 7373 6572 7420 6c65 6e28 636f 6465 2920  ssert len(code) 
-00018b20: 3e20 300a 0a20 2020 2064 6566 2074 6573  > 0..    def tes
-00018b30: 745f 6574 685f 6765 745f 636f 6465 5f65  t_eth_get_code_e
-00018b40: 6e73 5f61 6464 7265 7373 280a 2020 2020  ns_address(.    
-00018b50: 2020 2020 7365 6c66 2c20 7733 3a20 2257      self, w3: "W
-00018b60: 6562 3322 2c20 6d61 7468 5f63 6f6e 7472  eb3", math_contr
-00018b70: 6163 745f 6164 6472 6573 733a 2043 6865  act_address: Che
-00018b80: 636b 7375 6d41 6464 7265 7373 0a20 2020  cksumAddress.   
-00018b90: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-00018ba0: 2020 2020 7769 7468 2065 6e73 5f61 6464      with ens_add
-00018bb0: 7265 7373 6573 2877 332c 207b 226d 6174  resses(w3, {"mat
-00018bc0: 6863 6f6e 7472 6163 742e 6574 6822 3a20  hcontract.eth": 
-00018bd0: 6d61 7468 5f63 6f6e 7472 6163 745f 6164  math_contract_ad
-00018be0: 6472 6573 737d 293a 0a20 2020 2020 2020  dress}):.       
-00018bf0: 2020 2020 2063 6f64 6520 3d20 7733 2e65       code = w3.e
-00018c00: 7468 2e67 6574 5f63 6f64 6528 454e 5328  th.get_code(ENS(
-00018c10: 226d 6174 6863 6f6e 7472 6163 742e 6574  "mathcontract.et
-00018c20: 6822 2929 0a20 2020 2020 2020 2020 2020  h")).           
-00018c30: 2061 7373 6572 7420 6973 696e 7374 616e   assert isinstan
-00018c40: 6365 2863 6f64 652c 2048 6578 4279 7465  ce(code, HexByte
-00018c50: 7329 0a20 2020 2020 2020 2020 2020 2061  s).            a
-00018c60: 7373 6572 7420 6c65 6e28 636f 6465 2920  ssert len(code) 
-00018c70: 3e20 300a 0a20 2020 2064 6566 2074 6573  > 0..    def tes
-00018c80: 745f 6574 685f 6765 745f 636f 6465 5f69  t_eth_get_code_i
-00018c90: 6e76 616c 6964 5f61 6464 7265 7373 280a  nvalid_address(.
-00018ca0: 2020 2020 2020 2020 7365 6c66 2c20 7733          self, w3
-00018cb0: 3a20 2257 6562 3322 2c20 6d61 7468 5f63  : "Web3", math_c
-00018cc0: 6f6e 7472 6163 743a 2022 436f 6e74 7261  ontract: "Contra
-00018cd0: 6374 220a 2020 2020 2920 2d3e 204e 6f6e  ct".    ) -> Non
-00018ce0: 653a 0a20 2020 2020 2020 2077 6974 6820  e:.        with 
-00018cf0: 7079 7465 7374 2e72 6169 7365 7328 496e  pytest.raises(In
-00018d00: 7661 6c69 6441 6464 7265 7373 293a 0a20  validAddress):. 
-00018d10: 2020 2020 2020 2020 2020 2077 332e 6574             w3.et
-00018d20: 682e 6765 745f 636f 6465 280a 2020 2020  h.get_code(.    
-00018d30: 2020 2020 2020 2020 2020 2020 4368 6563              Chec
-00018d40: 6b73 756d 4164 6472 6573 7328 4865 7841  ksumAddress(HexA
-00018d50: 6464 7265 7373 2848 6578 5374 7228 6d61  ddress(HexStr(ma
-00018d60: 7468 5f63 6f6e 7472 6163 742e 6164 6472  th_contract.addr
-00018d70: 6573 732e 6c6f 7765 7228 2929 2929 0a20  ess.lower()))). 
-00018d80: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-00018d90: 2020 6465 6620 7465 7374 5f65 7468 5f67    def test_eth_g
-00018da0: 6574 5f63 6f64 655f 7769 7468 5f62 6c6f  et_code_with_blo
-00018db0: 636b 5f69 6465 6e74 6966 6965 7228 0a20  ck_identifier(. 
-00018dc0: 2020 2020 2020 2073 656c 662c 2077 333a         self, w3:
-00018dd0: 2022 5765 6233 222c 2065 6d69 7474 6572   "Web3", emitter
-00018de0: 5f63 6f6e 7472 6163 743a 2022 436f 6e74  _contract: "Cont
-00018df0: 7261 6374 220a 2020 2020 2920 2d3e 204e  ract".    ) -> N
-00018e00: 6f6e 653a 0a20 2020 2020 2020 2063 6f64  one:.        cod
-00018e10: 6520 3d20 7733 2e65 7468 2e67 6574 5f63  e = w3.eth.get_c
-00018e20: 6f64 6528 0a20 2020 2020 2020 2020 2020  ode(.           
-00018e30: 2065 6d69 7474 6572 5f63 6f6e 7472 6163   emitter_contrac
-00018e40: 742e 6164 6472 6573 732c 2062 6c6f 636b  t.address, block
-00018e50: 5f69 6465 6e74 6966 6965 723d 7733 2e65  _identifier=w3.e
-00018e60: 7468 2e62 6c6f 636b 5f6e 756d 6265 720a  th.block_number.
-00018e70: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00018e80: 2020 6173 7365 7274 2069 7369 6e73 7461    assert isinsta
-00018e90: 6e63 6528 636f 6465 2c20 4865 7842 7974  nce(code, HexByt
-00018ea0: 6573 290a 2020 2020 2020 2020 6173 7365  es).        asse
-00018eb0: 7274 206c 656e 2863 6f64 6529 203e 2030  rt len(code) > 0
-00018ec0: 0a0a 2020 2020 6465 6620 7465 7374 5f65  ..    def test_e
-00018ed0: 7468 5f73 6967 6e28 0a20 2020 2020 2020  th_sign(.       
-00018ee0: 2073 656c 662c 2077 333a 2022 5765 6233   self, w3: "Web3
-00018ef0: 222c 2075 6e6c 6f63 6b65 645f 6163 636f  ", unlocked_acco
-00018f00: 756e 745f 6475 616c 5f74 7970 653a 2043  unt_dual_type: C
-00018f10: 6865 636b 7375 6d41 6464 7265 7373 0a20  hecksumAddress. 
-00018f20: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-00018f30: 2020 2020 2020 7369 676e 6174 7572 6520        signature 
-00018f40: 3d20 7733 2e65 7468 2e73 6967 6e28 0a20  = w3.eth.sign(. 
-00018f50: 2020 2020 2020 2020 2020 2075 6e6c 6f63             unloc
-00018f60: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
-00018f70: 5f74 7970 652c 2074 6578 743d 224d 6573  _type, text="Mes
-00018f80: 7361 6765 2074 c3b6 2073 6967 6e2e 204c  sage t.. sign. L
-00018f90: 6f6e 6765 7220 7468 616e 2068 6173 6821  onger than hash!
-00018fa0: 220a 2020 2020 2020 2020 290a 2020 2020  ".        ).    
-00018fb0: 2020 2020 6173 7365 7274 2069 735f 6279      assert is_by
-00018fc0: 7465 7328 7369 676e 6174 7572 6529 0a20  tes(signature). 
-00018fd0: 2020 2020 2020 2061 7373 6572 7420 6c65         assert le
-00018fe0: 6e28 7369 676e 6174 7572 6529 203d 3d20  n(signature) == 
-00018ff0: 3332 202b 2033 3220 2b20 310a 0a20 2020  32 + 32 + 1..   
-00019000: 2020 2020 2023 2074 6573 7420 6f74 6865       # test othe
-00019010: 7220 666f 726d 6174 730a 2020 2020 2020  r formats.      
-00019020: 2020 6865 7873 6967 6e20 3d20 7733 2e65    hexsign = w3.e
-00019030: 7468 2e73 6967 6e28 0a20 2020 2020 2020  th.sign(.       
-00019040: 2020 2020 2075 6e6c 6f63 6b65 645f 6163       unlocked_ac
-00019050: 636f 756e 745f 6475 616c 5f74 7970 652c  count_dual_type,
-00019060: 0a20 2020 2020 2020 2020 2020 2068 6578  .            hex
-00019070: 7374 723d 4865 7853 7472 280a 2020 2020  str=HexStr(.    
-00019080: 2020 2020 2020 2020 2020 2020 2230 7834              "0x4
-00019090: 6436 3537 3337 3336 3136 3736 3532 3037  d657373616765207
-000190a0: 3463 3362 3632 3037 3336 3936 3736 6532  4c3b6207369676e2
-000190b0: 6532 3034 6336 6636 6536 3736 3537 3232  e204c6f6e6765722
-000190c0: 3037 3436 3836 3136 6532 3036 3836 3137  07468616e2068617
-000190d0: 3336 3832 3122 2020 2320 6e6f 7161 3a20  36821"  # noqa: 
-000190e0: 4535 3031 0a20 2020 2020 2020 2020 2020  E501.           
-000190f0: 2029 2c0a 2020 2020 2020 2020 290a 2020   ),.        ).  
-00019100: 2020 2020 2020 6173 7365 7274 2068 6578        assert hex
-00019110: 7369 676e 203d 3d20 7369 676e 6174 7572  sign == signatur
-00019120: 650a 0a20 2020 2020 2020 2069 6e74 7369  e..        intsi
-00019130: 676e 203d 2077 332e 6574 682e 7369 676e  gn = w3.eth.sign
-00019140: 280a 2020 2020 2020 2020 2020 2020 756e  (.            un
-00019150: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
-00019160: 7561 6c5f 7479 7065 2c0a 2020 2020 2020  ual_type,.      
-00019170: 2020 2020 2020 3078 3444 3635 3733 3733        0x4D657373
-00019180: 3631 3637 3635 3230 3734 4333 4236 3230  6167652074C3B620
-00019190: 3733 3639 3637 3645 3245 3230 3443 3646  7369676E2E204C6F
-000191a0: 3645 3637 3635 3732 3230 3734 3638 3631  6E67657220746861
-000191b0: 3645 3230 3638 3631 3733 3638 3231 2c0a  6E206861736821,.
-000191c0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-000191d0: 2020 6173 7365 7274 2069 6e74 7369 676e    assert intsign
-000191e0: 203d 3d20 7369 676e 6174 7572 650a 0a20   == signature.. 
-000191f0: 2020 2020 2020 2062 7974 6573 7369 676e         bytessign
-00019200: 203d 2077 332e 6574 682e 7369 676e 280a   = w3.eth.sign(.
-00019210: 2020 2020 2020 2020 2020 2020 756e 6c6f              unlo
-00019220: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
-00019230: 6c5f 7479 7065 2c20 6222 4d65 7373 6167  l_type, b"Messag
-00019240: 6520 745c 7863 335c 7862 3620 7369 676e  e t\xc3\xb6 sign
-00019250: 2e20 4c6f 6e67 6572 2074 6861 6e20 6861  . Longer than ha
-00019260: 7368 2122 0a20 2020 2020 2020 2029 0a20  sh!".        ). 
-00019270: 2020 2020 2020 2061 7373 6572 7420 6279         assert by
-00019280: 7465 7373 6967 6e20 3d3d 2073 6967 6e61  tessign == signa
-00019290: 7475 7265 0a0a 2020 2020 2020 2020 6e65  ture..        ne
-000192a0: 775f 7369 676e 6174 7572 6520 3d20 7733  w_signature = w3
-000192b0: 2e65 7468 2e73 6967 6e28 0a20 2020 2020  .eth.sign(.     
-000192c0: 2020 2020 2020 2075 6e6c 6f63 6b65 645f         unlocked_
-000192d0: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
-000192e0: 652c 2074 6578 743d 2264 6966 6665 7265  e, text="differe
-000192f0: 6e74 206d 6573 7361 6765 2069 7320 6469  nt message is di
-00019300: 6666 6572 656e 7422 0a20 2020 2020 2020  fferent".       
-00019310: 2029 0a20 2020 2020 2020 2061 7373 6572   ).        asser
-00019320: 7420 6e65 775f 7369 676e 6174 7572 6520  t new_signature 
-00019330: 213d 2073 6967 6e61 7475 7265 0a0a 2020  != signature..  
-00019340: 2020 6465 6620 7465 7374 5f65 7468 5f73    def test_eth_s
-00019350: 6967 6e5f 656e 735f 6e61 6d65 7328 0a20  ign_ens_names(. 
-00019360: 2020 2020 2020 2073 656c 662c 2077 333a         self, w3:
-00019370: 2022 5765 6233 222c 2075 6e6c 6f63 6b65   "Web3", unlocke
-00019380: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-00019390: 7970 653a 2043 6865 636b 7375 6d41 6464  ype: ChecksumAdd
-000193a0: 7265 7373 0a20 2020 2029 202d 3e20 4e6f  ress.    ) -> No
-000193b0: 6e65 3a0a 2020 2020 2020 2020 7769 7468  ne:.        with
-000193c0: 2065 6e73 5f61 6464 7265 7373 6573 2877   ens_addresses(w
-000193d0: 332c 207b 2275 6e6c 6f63 6b65 642d 6163  3, {"unlocked-ac
-000193e0: 6374 2e65 7468 223a 2075 6e6c 6f63 6b65  ct.eth": unlocke
-000193f0: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-00019400: 7970 657d 293a 0a20 2020 2020 2020 2020  ype}):.         
-00019410: 2020 2073 6967 6e61 7475 7265 203d 2077     signature = w
-00019420: 332e 6574 682e 7369 676e 280a 2020 2020  3.eth.sign(.    
-00019430: 2020 2020 2020 2020 2020 2020 2275 6e6c              "unl
-00019440: 6f63 6b65 642d 6163 6374 2e65 7468 222c  ocked-acct.eth",
-00019450: 2074 6578 743d 224d 6573 7361 6765 2074   text="Message t
-00019460: c3b6 2073 6967 6e2e 204c 6f6e 6765 7220  .. sign. Longer 
-00019470: 7468 616e 2068 6173 6821 220a 2020 2020  than hash!".    
-00019480: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00019490: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
-000194a0: 6279 7465 7328 7369 676e 6174 7572 6529  bytes(signature)
-000194b0: 0a20 2020 2020 2020 2020 2020 2061 7373  .            ass
-000194c0: 6572 7420 6c65 6e28 7369 676e 6174 7572  ert len(signatur
-000194d0: 6529 203d 3d20 3332 202b 2033 3220 2b20  e) == 32 + 32 + 
-000194e0: 310a 0a20 2020 2064 6566 2074 6573 745f  1..    def test_
-000194f0: 6574 685f 7369 676e 5f74 7970 6564 5f64  eth_sign_typed_d
-00019500: 6174 6128 0a20 2020 2020 2020 2073 656c  ata(.        sel
-00019510: 662c 0a20 2020 2020 2020 2077 333a 2022  f,.        w3: "
-00019520: 5765 6233 222c 0a20 2020 2020 2020 2075  Web3",.        u
-00019530: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
-00019540: 6475 616c 5f74 7970 653a 2043 6865 636b  dual_type: Check
-00019550: 7375 6d41 6464 7265 7373 2c0a 2020 2020  sumAddress,.    
-00019560: 2020 2020 736b 6970 5f69 665f 7465 7374      skip_if_test
-00019570: 7270 633a 2043 616c 6c61 626c 655b 5b22  rpc: Callable[["
-00019580: 5765 6233 225d 2c20 4e6f 6e65 5d2c 0a20  Web3"], None],. 
-00019590: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-000195a0: 2020 2020 2020 7661 6c69 644a 534f 4e4d        validJSONM
-000195b0: 6573 7361 6765 203d 2022 2222 0a20 2020  essage = """.   
-000195c0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-000195d0: 2020 2020 2020 2020 2020 2022 7479 7065             "type
-000195e0: 7322 3a20 7b0a 2020 2020 2020 2020 2020  s": {.          
-000195f0: 2020 2020 2020 2020 2020 2245 4950 3731            "EIP71
-00019600: 3244 6f6d 6169 6e22 3a20 5b0a 2020 2020  2Domain": [.    
-00019610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019620: 2020 2020 7b22 6e61 6d65 223a 2022 6e61      {"name": "na
-00019630: 6d65 222c 2022 7479 7065 223a 2022 7374  me", "type": "st
-00019640: 7269 6e67 227d 2c0a 2020 2020 2020 2020  ring"},.        
-00019650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019660: 7b22 6e61 6d65 223a 2022 7665 7273 696f  {"name": "versio
-00019670: 6e22 2c20 2274 7970 6522 3a20 2273 7472  n", "type": "str
-00019680: 696e 6722 7d2c 0a20 2020 2020 2020 2020  ing"},.         
-00019690: 2020 2020 2020 2020 2020 2020 2020 207b                 {
-000196a0: 226e 616d 6522 3a20 2263 6861 696e 4964  "name": "chainId
-000196b0: 222c 2022 7479 7065 223a 2022 7569 6e74  ", "type": "uint
-000196c0: 3235 3622 7d2c 0a20 2020 2020 2020 2020  256"},.         
-000196d0: 2020 2020 2020 2020 2020 2020 2020 207b                 {
-000196e0: 226e 616d 6522 3a20 2276 6572 6966 7969  "name": "verifyi
-000196f0: 6e67 436f 6e74 7261 6374 222c 2022 7479  ngContract", "ty
-00019700: 7065 223a 2022 6164 6472 6573 7322 7d0a  pe": "address"}.
-00019710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019720: 2020 2020 5d2c 0a20 2020 2020 2020 2020      ],.         
-00019730: 2020 2020 2020 2020 2020 2022 5065 7273             "Pers
-00019740: 6f6e 223a 205b 0a20 2020 2020 2020 2020  on": [.         
-00019750: 2020 2020 2020 2020 2020 2020 2020 207b                 {
-00019760: 226e 616d 6522 3a20 226e 616d 6522 2c20  "name": "name", 
-00019770: 2274 7970 6522 3a20 2273 7472 696e 6722  "type": "string"
-00019780: 7d2c 0a20 2020 2020 2020 2020 2020 2020  },.             
-00019790: 2020 2020 2020 2020 2020 207b 226e 616d             {"nam
-000197a0: 6522 3a20 2277 616c 6c65 7422 2c20 2274  e": "wallet", "t
-000197b0: 7970 6522 3a20 2261 6464 7265 7373 227d  ype": "address"}
-000197c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000197d0: 2020 2020 205d 2c0a 2020 2020 2020 2020       ],.        
-000197e0: 2020 2020 2020 2020 2020 2020 224d 6169              "Mai
-000197f0: 6c22 3a20 5b0a 2020 2020 2020 2020 2020  l": [.          
-00019800: 2020 2020 2020 2020 2020 2020 2020 7b22                {"
-00019810: 6e61 6d65 223a 2022 6672 6f6d 222c 2022  name": "from", "
-00019820: 7479 7065 223a 2022 5065 7273 6f6e 227d  type": "Person"}
-00019830: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00019840: 2020 2020 2020 2020 2020 7b22 6e61 6d65            {"name
-00019850: 223a 2022 746f 222c 2022 7479 7065 223a  ": "to", "type":
-00019860: 2022 5065 7273 6f6e 227d 2c0a 2020 2020   "Person"},.    
-00019870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019880: 2020 2020 7b22 6e61 6d65 223a 2022 636f      {"name": "co
-00019890: 6e74 656e 7473 222c 2022 7479 7065 223a  ntents", "type":
-000198a0: 2022 7374 7269 6e67 227d 0a20 2020 2020   "string"}.     
-000198b0: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
-000198c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000198d0: 207d 2c0a 2020 2020 2020 2020 2020 2020   },.            
-000198e0: 2020 2020 2270 7269 6d61 7279 5479 7065      "primaryType
-000198f0: 223a 2022 4d61 696c 222c 0a20 2020 2020  ": "Mail",.     
-00019900: 2020 2020 2020 2020 2020 2022 646f 6d61             "doma
-00019910: 696e 223a 207b 0a20 2020 2020 2020 2020  in": {.         
-00019920: 2020 2020 2020 2020 2020 2022 6e61 6d65             "name
-00019930: 223a 2022 4574 6865 7220 4d61 696c 222c  ": "Ether Mail",
-00019940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019950: 2020 2020 2022 7665 7273 696f 6e22 3a20       "version": 
-00019960: 2231 222c 0a20 2020 2020 2020 2020 2020  "1",.           
-00019970: 2020 2020 2020 2020 2022 6368 6169 6e49           "chainI
-00019980: 6422 3a20 2230 7830 3122 2c0a 2020 2020  d": "0x01",.    
-00019990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000199a0: 2276 6572 6966 7969 6e67 436f 6e74 7261  "verifyingContra
-000199b0: 6374 223a 2022 3078 4363 4343 6363 6363  ct": "0xCcCCcccc
-000199c0: 4343 4343 6343 4343 4343 4363 4363 4363  CCCCcCCCCCCcCcCc
-000199d0: 6343 6343 4343 6343 6363 6363 6363 6343  cCcCCCcCcccccccC
-000199e0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-000199f0: 2020 7d2c 0a20 2020 2020 2020 2020 2020    },.           
-00019a00: 2020 2020 2022 6d65 7373 6167 6522 3a20       "message": 
-00019a10: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-00019a20: 2020 2020 2020 2266 726f 6d22 3a20 7b0a        "from": {.
-00019a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019a40: 2020 2020 2020 2020 226e 616d 6522 3a20          "name": 
-00019a50: 2243 6f77 222c 0a20 2020 2020 2020 2020  "Cow",.         
-00019a60: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00019a70: 7761 6c6c 6574 223a 2022 3078 4344 3261  wallet": "0xCD2a
-00019a80: 3364 3946 3933 3845 3133 4344 3934 3745  3d9F938E13CD947E
-00019a90: 6330 3541 6243 3746 4537 3334 4466 3844  c05AbC7FE734Df8D
-00019aa0: 4438 3236 220a 2020 2020 2020 2020 2020  D826".          
-00019ab0: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
-00019ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019ad0: 2022 746f 223a 207b 0a20 2020 2020 2020   "to": {.       
-00019ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019af0: 2022 6e61 6d65 223a 2022 426f 6222 2c0a   "name": "Bob",.
-00019b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019b10: 2020 2020 2020 2020 2277 616c 6c65 7422          "wallet"
-00019b20: 3a20 2230 7862 4262 4242 4242 6262 4242  : "0xbBbBBBBbbBB
-00019b30: 4262 6262 4262 6242 6262 6262 4242 6242  BbbbBbbBbbbbBBbB
-00019b40: 6262 6262 4262 4262 6242 4262 4222 0a20  bbbbBbBbbBBbB". 
-00019b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019b60: 2020 207d 2c0a 2020 2020 2020 2020 2020     },.          
-00019b70: 2020 2020 2020 2020 2020 2263 6f6e 7465            "conte
-00019b80: 6e74 7322 3a20 2248 656c 6c6f 2c20 426f  nts": "Hello, Bo
-00019b90: 6221 220a 2020 2020 2020 2020 2020 2020  b!".            
-00019ba0: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
-00019bb0: 2020 7d0a 2020 2020 2020 2020 2222 220a    }.        """.
-00019bc0: 2020 2020 2020 2020 736b 6970 5f69 665f          skip_if_
-00019bd0: 7465 7374 7270 6328 7733 290a 2020 2020  testrpc(w3).    
-00019be0: 2020 2020 7369 676e 6174 7572 6520 3d20      signature = 
-00019bf0: 4865 7842 7974 6573 280a 2020 2020 2020  HexBytes(.      
-00019c00: 2020 2020 2020 7733 2e65 7468 2e73 6967        w3.eth.sig
-00019c10: 6e5f 7479 7065 645f 6461 7461 280a 2020  n_typed_data(.  
-00019c20: 2020 2020 2020 2020 2020 2020 2020 756e                un
-00019c30: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
-00019c40: 7561 6c5f 7479 7065 2c20 6a73 6f6e 2e6c  ual_type, json.l
-00019c50: 6f61 6473 2876 616c 6964 4a53 4f4e 4d65  oads(validJSONMe
-00019c60: 7373 6167 6529 0a20 2020 2020 2020 2020  ssage).         
-00019c70: 2020 2029 0a20 2020 2020 2020 2029 0a20     ).        ). 
-00019c80: 2020 2020 2020 2061 7373 6572 7420 6c65         assert le
-00019c90: 6e28 7369 676e 6174 7572 6529 203d 3d20  n(signature) == 
-00019ca0: 3332 202b 2033 3220 2b20 310a 0a20 2020  32 + 32 + 1..   
-00019cb0: 2064 6566 2074 6573 745f 696e 7661 6c69   def test_invali
-00019cc0: 645f 6574 685f 7369 676e 5f74 7970 6564  d_eth_sign_typed
-00019cd0: 5f64 6174 6128 0a20 2020 2020 2020 2073  _data(.        s
-00019ce0: 656c 662c 0a20 2020 2020 2020 2077 333a  elf,.        w3:
-00019cf0: 2022 5765 6233 222c 0a20 2020 2020 2020   "Web3",.       
-00019d00: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-00019d10: 745f 6475 616c 5f74 7970 653a 2043 6865  t_dual_type: Che
-00019d20: 636b 7375 6d41 6464 7265 7373 2c0a 2020  cksumAddress,.  
-00019d30: 2020 2020 2020 736b 6970 5f69 665f 7465        skip_if_te
-00019d40: 7374 7270 633a 2043 616c 6c61 626c 655b  strpc: Callable[
-00019d50: 5b22 5765 6233 225d 2c20 4e6f 6e65 5d2c  ["Web3"], None],
-00019d60: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-00019d70: 2020 2020 2020 2020 736b 6970 5f69 665f          skip_if_
-00019d80: 7465 7374 7270 6328 7733 290a 2020 2020  testrpc(w3).    
-00019d90: 2020 2020 696e 7661 6c69 645f 7479 7065      invalid_type
-00019da0: 645f 6d65 7373 6167 6520 3d20 2222 220a  d_message = """.
-00019db0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-00019dc0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00019dd0: 7970 6573 223a 207b 0a20 2020 2020 2020  ypes": {.       
-00019de0: 2020 2020 2020 2020 2020 2020 2022 4549               "EI
-00019df0: 5037 3132 446f 6d61 696e 223a 205b 0a20  P712Domain": [. 
-00019e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019e10: 2020 2020 2020 207b 226e 616d 6522 3a20         {"name": 
-00019e20: 226e 616d 6522 2c20 2274 7970 6522 3a20  "name", "type": 
-00019e30: 2273 7472 696e 6722 7d2c 0a20 2020 2020  "string"},.     
-00019e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019e50: 2020 207b 226e 616d 6522 3a20 2276 6572     {"name": "ver
-00019e60: 7369 6f6e 222c 2022 7479 7065 223a 2022  sion", "type": "
-00019e70: 7374 7269 6e67 227d 2c0a 2020 2020 2020  string"},.      
-00019e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019e90: 2020 7b22 6e61 6d65 223a 2022 6368 6169    {"name": "chai
-00019ea0: 6e49 6422 2c20 2274 7970 6522 3a20 2275  nId", "type": "u
-00019eb0: 696e 7432 3536 227d 2c0a 2020 2020 2020  int256"},.      
-00019ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019ed0: 2020 7b22 6e61 6d65 223a 2022 7665 7269    {"name": "veri
-00019ee0: 6679 696e 6743 6f6e 7472 6163 7422 2c20  fyingContract", 
-00019ef0: 2274 7970 6522 3a20 2261 6464 7265 7373  "type": "address
-00019f00: 227d 0a20 2020 2020 2020 2020 2020 2020  "}.             
-00019f10: 2020 2020 2020 205d 2c0a 2020 2020 2020         ],.      
-00019f20: 2020 2020 2020 2020 2020 2020 2020 2250                "P
-00019f30: 6572 736f 6e22 3a20 5b0a 2020 2020 2020  erson": [.      
-00019f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019f50: 2020 7b22 6e61 6d65 223a 2022 6e61 6d65    {"name": "name
-00019f60: 222c 2022 7479 7065 223a 2022 7374 7269  ", "type": "stri
-00019f70: 6e67 227d 2c0a 2020 2020 2020 2020 2020  ng"},.          
-00019f80: 2020 2020 2020 2020 2020 2020 2020 7b22                {"
-00019f90: 6e61 6d65 223a 2022 7761 6c6c 6574 222c  name": "wallet",
-00019fa0: 2022 7479 7065 223a 2022 6164 6472 6573   "type": "addres
-00019fb0: 7322 7d0a 2020 2020 2020 2020 2020 2020  s"}.            
-00019fc0: 2020 2020 2020 2020 5d2c 0a20 2020 2020          ],.     
-00019fd0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00019fe0: 4d61 696c 223a 205b 0a20 2020 2020 2020  Mail": [.       
-00019ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a000: 207b 226e 616d 6522 3a20 2266 726f 6d22   {"name": "from"
-0001a010: 2c20 2274 7970 6522 3a20 2250 6572 736f  , "type": "Perso
-0001a020: 6e22 7d2c 0a20 2020 2020 2020 2020 2020  n"},.           
-0001a030: 2020 2020 2020 2020 2020 2020 207b 226e               {"n
-0001a040: 616d 6522 3a20 2274 6f22 2c20 2274 7970  ame": "to", "typ
-0001a050: 6522 3a20 2250 6572 736f 6e5b 325d 227d  e": "Person[2]"}
-0001a060: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001a070: 2020 2020 2020 2020 2020 7b22 6e61 6d65            {"name
-0001a080: 223a 2022 636f 6e74 656e 7473 222c 2022  ": "contents", "
-0001a090: 7479 7065 223a 2022 7374 7269 6e67 227d  type": "string"}
-0001a0a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a0b0: 2020 2020 205d 0a20 2020 2020 2020 2020       ].         
-0001a0c0: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
-0001a0d0: 2020 2020 2020 2020 2020 2270 7269 6d61            "prima
-0001a0e0: 7279 5479 7065 223a 2022 4d61 696c 222c  ryType": "Mail",
-0001a0f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a100: 2022 646f 6d61 696e 223a 207b 0a20 2020   "domain": {.   
-0001a110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a120: 2022 6e61 6d65 223a 2022 4574 6865 7220   "name": "Ether 
-0001a130: 4d61 696c 222c 0a20 2020 2020 2020 2020  Mail",.         
-0001a140: 2020 2020 2020 2020 2020 2022 7665 7273             "vers
-0001a150: 696f 6e22 3a20 2231 222c 0a20 2020 2020  ion": "1",.     
-0001a160: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001a170: 6368 6169 6e49 6422 3a20 2230 7830 3122  chainId": "0x01"
-0001a180: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001a190: 2020 2020 2020 2276 6572 6966 7969 6e67        "verifying
-0001a1a0: 436f 6e74 7261 6374 223a 2022 3078 4363  Contract": "0xCc
-0001a1b0: 4343 6363 6363 4343 4343 6343 4343 4343  CCccccCCCCcCCCCC
-0001a1c0: 4363 4363 4363 6343 6343 4343 6343 6363  CcCcCccCcCCCcCcc
-0001a1d0: 6363 6363 6343 220a 2020 2020 2020 2020  cccccC".        
-0001a1e0: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
-0001a1f0: 2020 2020 2020 2020 2020 2022 6d65 7373             "mess
-0001a200: 6167 6522 3a20 7b0a 2020 2020 2020 2020  age": {.        
-0001a210: 2020 2020 2020 2020 2020 2020 2266 726f              "fro
-0001a220: 6d22 3a20 7b0a 2020 2020 2020 2020 2020  m": {.          
-0001a230: 2020 2020 2020 2020 2020 2020 2020 226e                "n
-0001a240: 616d 6522 3a20 2243 6f77 222c 0a20 2020  ame": "Cow",.   
-0001a250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a260: 2020 2020 2022 7761 6c6c 6574 223a 2022       "wallet": "
-0001a270: 3078 4344 3261 3364 3946 3933 3845 3133  0xCD2a3d9F938E13
-0001a280: 4344 3934 3745 6330 3541 6243 3746 4537  CD947Ec05AbC7FE7
-0001a290: 3334 4466 3844 4438 3236 220a 2020 2020  34Df8DD826".    
-0001a2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a2b0: 7d2c 0a20 2020 2020 2020 2020 2020 2020  },.             
-0001a2c0: 2020 2020 2020 2022 746f 223a 205b 7b0a         "to": [{.
-0001a2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a2e0: 2020 2020 2020 2020 226e 616d 6522 3a20          "name": 
-0001a2f0: 2242 6f62 222c 0a20 2020 2020 2020 2020  "Bob",.         
-0001a300: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001a310: 7761 6c6c 6574 223a 2022 3078 6242 6242  wallet": "0xbBbB
-0001a320: 4242 4262 6242 4242 6262 6242 6262 4262  BBBbbBBBbbbBbbBb
-0001a330: 6262 6242 4262 4262 6262 6242 6242 6262  bbbBBbBbbbbBbBbb
-0001a340: 4242 6242 220a 2020 2020 2020 2020 2020  BBbB".          
-0001a350: 2020 2020 2020 2020 2020 7d5d 2c0a 2020            }],.  
+00013e40: 7468 2e67 6574 5f74 7261 6e73 6163 7469  th.get_transacti
+00013e50: 6f6e 2872 6570 6c61 6365 5f74 786e 5f68  on(replace_txn_h
+00013e60: 6173 6829 0a0a 2020 2020 2020 2020 6173  ash)..        as
+00013e70: 7365 7274 2069 735f 7361 6d65 5f61 6464  sert is_same_add
+00013e80: 7265 7373 280a 2020 2020 2020 2020 2020  ress(.          
+00013e90: 2020 7265 706c 6163 655f 7478 6e5b 2266    replace_txn["f
+00013ea0: 726f 6d22 5d2c 2063 6173 7428 4368 6563  rom"], cast(Chec
+00013eb0: 6b73 756d 4164 6472 6573 732c 2074 786e  ksumAddress, txn
+00013ec0: 5f70 6172 616d 735b 2266 726f 6d22 5d29  _params["from"])
+00013ed0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00013ee0: 2020 2061 7373 6572 7420 6973 5f73 616d     assert is_sam
+00013ef0: 655f 6164 6472 6573 7328 0a20 2020 2020  e_address(.     
+00013f00: 2020 2020 2020 2072 6570 6c61 6365 5f74         replace_t
+00013f10: 786e 5b22 746f 225d 2c20 6361 7374 2843  xn["to"], cast(C
+00013f20: 6865 636b 7375 6d41 6464 7265 7373 2c20  hecksumAddress, 
+00013f30: 7478 6e5f 7061 7261 6d73 5b22 746f 225d  txn_params["to"]
+00013f40: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
+00013f50: 2020 2020 6173 7365 7274 2072 6570 6c61      assert repla
+00013f60: 6365 5f74 786e 5b22 7661 6c75 6522 5d20  ce_txn["value"] 
+00013f70: 3d3d 2031 0a20 2020 2020 2020 2061 7373  == 1.        ass
+00013f80: 6572 7420 7265 706c 6163 655f 7478 6e5b  ert replace_txn[
+00013f90: 2267 6173 225d 203d 3d20 3231 3030 300a  "gas"] == 21000.
+00013fa0: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
+00013fb0: 6570 6c61 6365 5f74 786e 5b22 6761 7350  eplace_txn["gasP
+00013fc0: 7269 6365 225d 203d 3d20 7478 6e5f 7061  rice"] == txn_pa
+00013fd0: 7261 6d73 5b22 6761 7350 7269 6365 225d  rams["gasPrice"]
+00013fe0: 0a0a 2020 2020 4070 7974 6573 742e 6d61  ..    @pytest.ma
+00013ff0: 726b 2e61 7379 6e63 696f 0a20 2020 2061  rk.asyncio.    a
+00014000: 7379 6e63 2064 6566 2074 6573 745f 6173  sync def test_as
+00014010: 796e 635f 6574 685f 7265 706c 6163 655f  ync_eth_replace_
+00014020: 7472 616e 7361 6374 696f 6e28 0a20 2020  transaction(.   
+00014030: 2020 2020 2073 656c 662c 2061 7379 6e63       self, async
+00014040: 5f77 333a 2022 4173 796e 6357 6562 3322  _w3: "AsyncWeb3"
+00014050: 2c20 6173 796e 635f 756e 6c6f 636b 6564  , async_unlocked
+00014060: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
+00014070: 7065 3a20 4368 6563 6b73 756d 4164 6472  pe: ChecksumAddr
+00014080: 6573 730a 2020 2020 2920 2d3e 204e 6f6e  ess.    ) -> Non
+00014090: 653a 0a20 2020 2020 2020 2074 776f 5f67  e:.        two_g
+000140a0: 7765 695f 696e 5f77 6569 203d 2061 7379  wei_in_wei = asy
+000140b0: 6e63 5f77 332e 746f 5f77 6569 2832 2c20  nc_w3.to_wei(2, 
+000140c0: 2267 7765 6922 290a 2020 2020 2020 2020  "gwei").        
+000140d0: 7468 7265 655f 6777 6569 5f69 6e5f 7765  three_gwei_in_we
+000140e0: 6920 3d20 6173 796e 635f 7733 2e74 6f5f  i = async_w3.to_
+000140f0: 7765 6928 332c 2022 6777 6569 2229 0a0a  wei(3, "gwei")..
+00014100: 2020 2020 2020 2020 7478 6e5f 7061 7261          txn_para
+00014110: 6d73 3a20 5478 5061 7261 6d73 203d 207b  ms: TxParams = {
+00014120: 0a20 2020 2020 2020 2020 2020 2022 6672  .            "fr
+00014130: 6f6d 223a 2061 7379 6e63 5f75 6e6c 6f63  om": async_unloc
+00014140: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+00014150: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
+00014160: 2020 2022 746f 223a 2061 7379 6e63 5f75     "to": async_u
+00014170: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
+00014180: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
+00014190: 2020 2020 2020 2022 7661 6c75 6522 3a20         "value": 
+000141a0: 5765 6928 3129 2c0a 2020 2020 2020 2020  Wei(1),.        
+000141b0: 2020 2020 2267 6173 223a 2032 3130 3030      "gas": 21000
+000141c0: 2c0a 2020 2020 2020 2020 2020 2020 226d  ,.            "m
+000141d0: 6178 4665 6550 6572 4761 7322 3a20 7477  axFeePerGas": tw
+000141e0: 6f5f 6777 6569 5f69 6e5f 7765 692c 0a20  o_gwei_in_wei,. 
+000141f0: 2020 2020 2020 2020 2020 2022 6d61 7850             "maxP
+00014200: 7269 6f72 6974 7946 6565 5065 7247 6173  riorityFeePerGas
+00014210: 223a 2061 7379 6e63 5f77 332e 746f 5f77  ": async_w3.to_w
+00014220: 6569 2831 2c20 2267 7765 6922 292c 0a20  ei(1, "gwei"),. 
+00014230: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00014240: 2074 786e 5f68 6173 6820 3d20 6177 6169   txn_hash = awai
+00014250: 7420 6173 796e 635f 7733 2e65 7468 2e73  t async_w3.eth.s
+00014260: 656e 645f 7472 616e 7361 6374 696f 6e28  end_transaction(
+00014270: 7478 6e5f 7061 7261 6d73 290a 0a20 2020  txn_params)..   
+00014280: 2020 2020 2074 786e 5f70 6172 616d 735b       txn_params[
+00014290: 226d 6178 4665 6550 6572 4761 7322 5d20  "maxFeePerGas"] 
+000142a0: 3d20 7468 7265 655f 6777 6569 5f69 6e5f  = three_gwei_in_
+000142b0: 7765 690a 2020 2020 2020 2020 7478 6e5f  wei.        txn_
+000142c0: 7061 7261 6d73 5b22 6d61 7850 7269 6f72  params["maxPrior
+000142d0: 6974 7946 6565 5065 7247 6173 225d 203d  ityFeePerGas"] =
+000142e0: 2074 776f 5f67 7765 695f 696e 5f77 6569   two_gwei_in_wei
+000142f0: 0a0a 2020 2020 2020 2020 7265 706c 6163  ..        replac
+00014300: 655f 7478 6e5f 6861 7368 203d 2061 7761  e_txn_hash = awa
+00014310: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
+00014320: 7265 706c 6163 655f 7472 616e 7361 6374  replace_transact
+00014330: 696f 6e28 7478 6e5f 6861 7368 2c20 7478  ion(txn_hash, tx
+00014340: 6e5f 7061 7261 6d73 290a 2020 2020 2020  n_params).      
+00014350: 2020 7265 706c 6163 655f 7478 6e20 3d20    replace_txn = 
+00014360: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
+00014370: 7468 2e67 6574 5f74 7261 6e73 6163 7469  th.get_transacti
+00014380: 6f6e 2872 6570 6c61 6365 5f74 786e 5f68  on(replace_txn_h
+00014390: 6173 6829 0a0a 2020 2020 2020 2020 6173  ash)..        as
+000143a0: 7365 7274 2069 735f 7361 6d65 5f61 6464  sert is_same_add
+000143b0: 7265 7373 280a 2020 2020 2020 2020 2020  ress(.          
+000143c0: 2020 7265 706c 6163 655f 7478 6e5b 2266    replace_txn["f
+000143d0: 726f 6d22 5d2c 2063 6173 7428 4368 6563  rom"], cast(Chec
+000143e0: 6b73 756d 4164 6472 6573 732c 2074 786e  ksumAddress, txn
+000143f0: 5f70 6172 616d 735b 2266 726f 6d22 5d29  _params["from"])
+00014400: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00014410: 2020 2061 7373 6572 7420 6973 5f73 616d     assert is_sam
+00014420: 655f 6164 6472 6573 7328 0a20 2020 2020  e_address(.     
+00014430: 2020 2020 2020 2072 6570 6c61 6365 5f74         replace_t
+00014440: 786e 5b22 746f 225d 2c20 6361 7374 2843  xn["to"], cast(C
+00014450: 6865 636b 7375 6d41 6464 7265 7373 2c20  hecksumAddress, 
+00014460: 7478 6e5f 7061 7261 6d73 5b22 746f 225d  txn_params["to"]
+00014470: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
+00014480: 2020 2020 6173 7365 7274 2072 6570 6c61      assert repla
+00014490: 6365 5f74 786e 5b22 7661 6c75 6522 5d20  ce_txn["value"] 
+000144a0: 3d3d 2031 0a20 2020 2020 2020 2061 7373  == 1.        ass
+000144b0: 6572 7420 7265 706c 6163 655f 7478 6e5b  ert replace_txn[
+000144c0: 2267 6173 225d 203d 3d20 3231 3030 300a  "gas"] == 21000.
+000144d0: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
+000144e0: 6570 6c61 6365 5f74 786e 5b22 6d61 7846  eplace_txn["maxF
+000144f0: 6565 5065 7247 6173 225d 203d 3d20 7468  eePerGas"] == th
+00014500: 7265 655f 6777 6569 5f69 6e5f 7765 690a  ree_gwei_in_wei.
+00014510: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
+00014520: 6570 6c61 6365 5f74 786e 5b22 6d61 7850  eplace_txn["maxP
+00014530: 7269 6f72 6974 7946 6565 5065 7247 6173  riorityFeePerGas
+00014540: 225d 203d 3d20 7477 6f5f 6777 6569 5f69  "] == two_gwei_i
+00014550: 6e5f 7765 690a 0a20 2020 2040 7079 7465  n_wei..    @pyte
+00014560: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
+00014570: 2020 2020 6173 796e 6320 6465 6620 7465      async def te
+00014580: 7374 5f61 7379 6e63 5f65 7468 5f72 6570  st_async_eth_rep
+00014590: 6c61 6365 5f74 7261 6e73 6163 7469 6f6e  lace_transaction
+000145a0: 5f75 6e64 6572 7072 6963 6564 280a 2020  _underpriced(.  
+000145b0: 2020 2020 2020 7365 6c66 2c20 6173 796e        self, asyn
+000145c0: 635f 7733 3a20 2241 7379 6e63 5765 6233  c_w3: "AsyncWeb3
+000145d0: 222c 2061 7379 6e63 5f75 6e6c 6f63 6b65  ", async_unlocke
+000145e0: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
+000145f0: 7970 653a 2043 6865 636b 7375 6d41 6464  ype: ChecksumAdd
+00014600: 7265 7373 0a20 2020 2029 202d 3e20 4e6f  ress.    ) -> No
+00014610: 6e65 3a0a 2020 2020 2020 2020 7478 6e5f  ne:.        txn_
+00014620: 7061 7261 6d73 3a20 5478 5061 7261 6d73  params: TxParams
+00014630: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+00014640: 2022 6672 6f6d 223a 2061 7379 6e63 5f75   "from": async_u
+00014650: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
+00014660: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
+00014670: 2020 2020 2020 2022 746f 223a 2061 7379         "to": asy
+00014680: 6e63 5f75 6e6c 6f63 6b65 645f 6163 636f  nc_unlocked_acco
+00014690: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
+000146a0: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
+000146b0: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
+000146c0: 2020 2020 2020 2020 2267 6173 223a 2032          "gas": 2
+000146d0: 3130 3030 2c0a 2020 2020 2020 2020 2020  1000,.          
+000146e0: 2020 226d 6178 4665 6550 6572 4761 7322    "maxFeePerGas"
+000146f0: 3a20 6173 796e 635f 7733 2e74 6f5f 7765  : async_w3.to_we
+00014700: 6928 332c 2022 6777 6569 2229 2c0a 2020  i(3, "gwei"),.  
+00014710: 2020 2020 2020 2020 2020 226d 6178 5072            "maxPr
+00014720: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
+00014730: 3a20 6173 796e 635f 7733 2e74 6f5f 7765  : async_w3.to_we
+00014740: 6928 322c 2022 6777 6569 2229 2c0a 2020  i(2, "gwei"),.  
+00014750: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00014760: 7478 6e5f 6861 7368 203d 2061 7761 6974  txn_hash = await
+00014770: 2061 7379 6e63 5f77 332e 6574 682e 7365   async_w3.eth.se
+00014780: 6e64 5f74 7261 6e73 6163 7469 6f6e 2874  nd_transaction(t
+00014790: 786e 5f70 6172 616d 7329 0a0a 2020 2020  xn_params)..    
+000147a0: 2020 2020 6f6e 655f 6777 6569 5f69 6e5f      one_gwei_in_
+000147b0: 7765 6920 3d20 6173 796e 635f 7733 2e74  wei = async_w3.t
+000147c0: 6f5f 7765 6928 312c 2022 6777 6569 2229  o_wei(1, "gwei")
+000147d0: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
+000147e0: 616d 735b 226d 6178 4665 6550 6572 4761  ams["maxFeePerGa
+000147f0: 7322 5d20 3d20 6f6e 655f 6777 6569 5f69  s"] = one_gwei_i
+00014800: 6e5f 7765 690a 2020 2020 2020 2020 7478  n_wei.        tx
+00014810: 6e5f 7061 7261 6d73 5b22 6d61 7850 7269  n_params["maxPri
+00014820: 6f72 6974 7946 6565 5065 7247 6173 225d  orityFeePerGas"]
+00014830: 203d 206f 6e65 5f67 7765 695f 696e 5f77   = one_gwei_in_w
+00014840: 6569 0a0a 2020 2020 2020 2020 7769 7468  ei..        with
+00014850: 2070 7974 6573 742e 7261 6973 6573 2856   pytest.raises(V
+00014860: 616c 7565 4572 726f 722c 206d 6174 6368  alueError, match
+00014870: 3d22 7265 706c 6163 656d 656e 7420 7472  ="replacement tr
+00014880: 616e 7361 6374 696f 6e20 756e 6465 7270  ansaction underp
+00014890: 7269 6365 6422 293a 0a20 2020 2020 2020  riced"):.       
+000148a0: 2020 2020 2061 7761 6974 2061 7379 6e63       await async
+000148b0: 5f77 332e 6574 682e 7265 706c 6163 655f  _w3.eth.replace_
+000148c0: 7472 616e 7361 6374 696f 6e28 7478 6e5f  transaction(txn_
+000148d0: 6861 7368 2c20 7478 6e5f 7061 7261 6d73  hash, txn_params
+000148e0: 290a 0a20 2020 2040 7079 7465 7374 2e6d  )..    @pytest.m
+000148f0: 6172 6b2e 6173 796e 6369 6f0a 2020 2020  ark.asyncio.    
+00014900: 6173 796e 6320 6465 6620 7465 7374 5f61  async def test_a
+00014910: 7379 6e63 5f65 7468 5f72 6570 6c61 6365  sync_eth_replace
+00014920: 5f74 7261 6e73 6163 7469 6f6e 5f6e 6f6e  _transaction_non
+00014930: 5f65 7869 7374 696e 675f 7472 616e 7361  _existing_transa
+00014940: 6374 696f 6e28 0a20 2020 2020 2020 2073  ction(.        s
+00014950: 656c 662c 2061 7379 6e63 5f77 333a 2022  elf, async_w3: "
+00014960: 4173 796e 6357 6562 3322 2c20 6173 796e  AsyncWeb3", asyn
+00014970: 635f 756e 6c6f 636b 6564 5f61 6363 6f75  c_unlocked_accou
+00014980: 6e74 5f64 7561 6c5f 7479 7065 3a20 4368  nt_dual_type: Ch
+00014990: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
+000149a0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+000149b0: 2020 2020 2074 786e 5f70 6172 616d 733a       txn_params:
+000149c0: 2054 7850 6172 616d 7320 3d20 7b0a 2020   TxParams = {.  
+000149d0: 2020 2020 2020 2020 2020 2266 726f 6d22            "from"
+000149e0: 3a20 6173 796e 635f 756e 6c6f 636b 6564  : async_unlocked
+000149f0: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
+00014a00: 7065 2c0a 2020 2020 2020 2020 2020 2020  pe,.            
+00014a10: 2274 6f22 3a20 6173 796e 635f 756e 6c6f  "to": async_unlo
+00014a20: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
+00014a30: 6c5f 7479 7065 2c0a 2020 2020 2020 2020  l_type,.        
+00014a40: 2020 2020 2276 616c 7565 223a 2057 6569      "value": Wei
+00014a50: 2831 292c 0a20 2020 2020 2020 2020 2020  (1),.           
+00014a60: 2022 6761 7322 3a20 3231 3030 302c 0a20   "gas": 21000,. 
+00014a70: 2020 2020 2020 2020 2020 2022 6d61 7846             "maxF
+00014a80: 6565 5065 7247 6173 223a 2061 7379 6e63  eePerGas": async
+00014a90: 5f77 332e 746f 5f77 6569 2833 2c20 2267  _w3.to_wei(3, "g
+00014aa0: 7765 6922 292c 0a20 2020 2020 2020 2020  wei"),.         
+00014ab0: 2020 2022 6d61 7850 7269 6f72 6974 7946     "maxPriorityF
+00014ac0: 6565 5065 7247 6173 223a 2061 7379 6e63  eePerGas": async
+00014ad0: 5f77 332e 746f 5f77 6569 2831 2c20 2267  _w3.to_wei(1, "g
+00014ae0: 7765 6922 292c 0a20 2020 2020 2020 207d  wei"),.        }
+00014af0: 0a20 2020 2020 2020 2077 6974 6820 7079  .        with py
+00014b00: 7465 7374 2e72 6169 7365 7328 5472 616e  test.raises(Tran
+00014b10: 7361 6374 696f 6e4e 6f74 466f 756e 6429  sactionNotFound)
+00014b20: 3a0a 2020 2020 2020 2020 2020 2020 6177  :.            aw
+00014b30: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
+00014b40: 2e72 6570 6c61 6365 5f74 7261 6e73 6163  .replace_transac
+00014b50: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+00014b60: 2020 2020 2020 4865 7853 7472 280a 2020        HexStr(.  
+00014b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014b80: 2020 2230 7839 3865 3863 6330 3962 3331    "0x98e8cc09b31
+00014b90: 3135 3833 6335 3037 3966 6136 3030 6636  1583c5079fa600f6
+00014ba0: 6332 6133 6265 6138 3631 3161 6631 3638  c2a3bea8611af168
+00014bb0: 6335 3265 3462 3630 6235 6232 3433 6134  c52e4b60b5b243a4
+00014bc0: 3431 3939 3722 0a20 2020 2020 2020 2020  41997".         
+00014bd0: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
+00014be0: 2020 2020 2020 2020 2020 7478 6e5f 7061            txn_pa
+00014bf0: 7261 6d73 2c0a 2020 2020 2020 2020 2020  rams,.          
+00014c00: 2020 290a 0a20 2020 2040 7079 7465 7374    )..    @pytest
+00014c10: 2e6d 6172 6b2e 6173 796e 6369 6f0a 2020  .mark.asyncio.  
+00014c20: 2020 4070 7974 6573 742e 6d61 726b 2e78    @pytest.mark.x
+00014c30: 6661 696c 2872 6561 736f 6e3d 2241 7379  fail(reason="Asy
+00014c40: 6e63 4765 7468 4d69 6e65 7220 6973 206d  ncGethMiner is m
+00014c50: 6973 7369 6e67 2e22 290a 2020 2020 6173  issing.").    as
+00014c60: 796e 6320 6465 6620 7465 7374 5f61 7379  ync def test_asy
+00014c70: 6e63 5f65 7468 5f72 6570 6c61 6365 5f74  nc_eth_replace_t
+00014c80: 7261 6e73 6163 7469 6f6e 5f61 6c72 6561  ransaction_alrea
+00014c90: 6479 5f6d 696e 6564 280a 2020 2020 2020  dy_mined(.      
+00014ca0: 2020 7365 6c66 2c20 6173 796e 635f 7733    self, async_w3
+00014cb0: 3a20 2241 7379 6e63 5765 6233 222c 2061  : "AsyncWeb3", a
+00014cc0: 7379 6e63 5f75 6e6c 6f63 6b65 645f 6163  sync_unlocked_ac
+00014cd0: 636f 756e 745f 6475 616c 5f74 7970 653a  count_dual_type:
+00014ce0: 2043 6865 636b 7375 6d41 6464 7265 7373   ChecksumAddress
+00014cf0: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+00014d00: 2020 2020 2020 2020 7478 6e5f 7061 7261          txn_para
+00014d10: 6d73 3a20 5478 5061 7261 6d73 203d 207b  ms: TxParams = {
+00014d20: 0a20 2020 2020 2020 2020 2020 2022 6672  .            "fr
+00014d30: 6f6d 223a 2061 7379 6e63 5f75 6e6c 6f63  om": async_unloc
+00014d40: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+00014d50: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
+00014d60: 2020 2022 746f 223a 2061 7379 6e63 5f75     "to": async_u
+00014d70: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
+00014d80: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
+00014d90: 2020 2020 2020 2022 7661 6c75 6522 3a20         "value": 
+00014da0: 5765 6928 3129 2c0a 2020 2020 2020 2020  Wei(1),.        
+00014db0: 2020 2020 2267 6173 223a 2032 3130 3030      "gas": 21000
+00014dc0: 2c0a 2020 2020 2020 2020 2020 2020 226d  ,.            "m
+00014dd0: 6178 4665 6550 6572 4761 7322 3a20 6173  axFeePerGas": as
+00014de0: 796e 635f 7733 2e74 6f5f 7765 6928 322c  ync_w3.to_wei(2,
+00014df0: 2022 6777 6569 2229 2c0a 2020 2020 2020   "gwei"),.      
+00014e00: 2020 2020 2020 226d 6178 5072 696f 7269        "maxPriori
+00014e10: 7479 4665 6550 6572 4761 7322 3a20 6173  tyFeePerGas": as
+00014e20: 796e 635f 7733 2e74 6f5f 7765 6928 312c  ync_w3.to_wei(1,
+00014e30: 2022 6777 6569 2229 2c0a 2020 2020 2020   "gwei"),.      
+00014e40: 2020 7d0a 2020 2020 2020 2020 7478 6e5f    }.        txn_
+00014e50: 6861 7368 203d 2061 7761 6974 2061 7379  hash = await asy
+00014e60: 6e63 5f77 332e 6574 682e 7365 6e64 5f74  nc_w3.eth.send_t
+00014e70: 7261 6e73 6163 7469 6f6e 2874 786e 5f70  ransaction(txn_p
+00014e80: 6172 616d 7329 0a20 2020 2020 2020 2074  arams).        t
+00014e90: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+00014ea0: 6173 796e 635f 7733 2e67 6574 682e 6d69  async_w3.geth.mi
+00014eb0: 6e65 722e 7374 6172 7428 2920 2023 2074  ner.start()  # t
+00014ec0: 7970 653a 2069 676e 6f72 650a 2020 2020  ype: ignore.    
+00014ed0: 2020 2020 2020 2020 6177 6169 7420 6173          await as
+00014ee0: 796e 635f 7733 2e65 7468 2e77 6169 745f  ync_w3.eth.wait_
+00014ef0: 666f 725f 7472 616e 7361 6374 696f 6e5f  for_transaction_
+00014f00: 7265 6365 6970 7428 7478 6e5f 6861 7368  receipt(txn_hash
+00014f10: 2c20 7469 6d65 6f75 743d 3130 290a 2020  , timeout=10).  
+00014f20: 2020 2020 2020 6669 6e61 6c6c 793a 0a20        finally:. 
+00014f30: 2020 2020 2020 2020 2020 2061 7379 6e63             async
+00014f40: 5f77 332e 6765 7468 2e6d 696e 6572 2e73  _w3.geth.miner.s
+00014f50: 746f 7028 2920 2023 2074 7970 653a 2069  top()  # type: i
+00014f60: 676e 6f72 650a 0a20 2020 2020 2020 2074  gnore..        t
+00014f70: 786e 5f70 6172 616d 735b 226d 6178 4665  xn_params["maxFe
+00014f80: 6550 6572 4761 7322 5d20 3d20 6173 796e  ePerGas"] = asyn
+00014f90: 635f 7733 2e74 6f5f 7765 6928 332c 2022  c_w3.to_wei(3, "
+00014fa0: 6777 6569 2229 0a20 2020 2020 2020 2074  gwei").        t
+00014fb0: 786e 5f70 6172 616d 735b 226d 6178 5072  xn_params["maxPr
+00014fc0: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
+00014fd0: 5d20 3d20 6173 796e 635f 7733 2e74 6f5f  ] = async_w3.to_
+00014fe0: 7765 6928 322c 2022 6777 6569 2229 0a20  wei(2, "gwei"). 
+00014ff0: 2020 2020 2020 2077 6974 6820 7079 7465         with pyte
+00015000: 7374 2e72 6169 7365 7328 5661 6c75 6545  st.raises(ValueE
+00015010: 7272 6f72 2c20 6d61 7463 683d 2253 7570  rror, match="Sup
+00015020: 706c 6965 6420 7472 616e 7361 6374 696f  plied transactio
+00015030: 6e20 7769 7468 2068 6173 6822 293a 0a20  n with hash"):. 
+00015040: 2020 2020 2020 2020 2020 2061 7761 6974             await
+00015050: 2061 7379 6e63 5f77 332e 6574 682e 7265   async_w3.eth.re
+00015060: 706c 6163 655f 7472 616e 7361 6374 696f  place_transactio
+00015070: 6e28 7478 6e5f 6861 7368 2c20 7478 6e5f  n(txn_hash, txn_
+00015080: 7061 7261 6d73 290a 0a20 2020 2040 7079  params)..    @py
+00015090: 7465 7374 2e6d 6172 6b2e 6173 796e 6369  test.mark.asynci
+000150a0: 6f0a 2020 2020 6173 796e 6320 6465 6620  o.    async def 
+000150b0: 7465 7374 5f61 7379 6e63 5f65 7468 5f72  test_async_eth_r
+000150c0: 6570 6c61 6365 5f74 7261 6e73 6163 7469  eplace_transacti
+000150d0: 6f6e 5f69 6e63 6f72 7265 6374 5f6e 6f6e  on_incorrect_non
+000150e0: 6365 280a 2020 2020 2020 2020 7365 6c66  ce(.        self
+000150f0: 2c20 6173 796e 635f 7733 3a20 2241 7379  , async_w3: "Asy
+00015100: 6e63 5765 6233 222c 2061 7379 6e63 5f75  ncWeb3", async_u
+00015110: 6e6c 6f63 6b65 645f 6163 636f 756e 743a  nlocked_account:
+00015120: 2043 6865 636b 7375 6d41 6464 7265 7373   ChecksumAddress
+00015130: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+00015140: 2020 2020 2020 2020 7478 6e5f 7061 7261          txn_para
+00015150: 6d73 3a20 5478 5061 7261 6d73 203d 207b  ms: TxParams = {
+00015160: 0a20 2020 2020 2020 2020 2020 2022 6672  .            "fr
+00015170: 6f6d 223a 2061 7379 6e63 5f75 6e6c 6f63  om": async_unloc
+00015180: 6b65 645f 6163 636f 756e 742c 0a20 2020  ked_account,.   
+00015190: 2020 2020 2020 2020 2022 746f 223a 2061           "to": a
+000151a0: 7379 6e63 5f75 6e6c 6f63 6b65 645f 6163  sync_unlocked_ac
+000151b0: 636f 756e 742c 0a20 2020 2020 2020 2020  count,.         
+000151c0: 2020 2022 7661 6c75 6522 3a20 5765 6928     "value": Wei(
+000151d0: 3129 2c0a 2020 2020 2020 2020 2020 2020  1),.            
+000151e0: 2267 6173 223a 2032 3130 3030 2c0a 2020  "gas": 21000,.  
+000151f0: 2020 2020 2020 2020 2020 226d 6178 4665            "maxFe
+00015200: 6550 6572 4761 7322 3a20 6173 796e 635f  ePerGas": async_
+00015210: 7733 2e74 6f5f 7765 6928 322c 2022 6777  w3.to_wei(2, "gw
+00015220: 6569 2229 2c0a 2020 2020 2020 2020 2020  ei"),.          
+00015230: 2020 226d 6178 5072 696f 7269 7479 4665    "maxPriorityFe
+00015240: 6550 6572 4761 7322 3a20 6173 796e 635f  ePerGas": async_
+00015250: 7733 2e74 6f5f 7765 6928 312c 2022 6777  w3.to_wei(1, "gw
+00015260: 6569 2229 2c0a 2020 2020 2020 2020 7d0a  ei"),.        }.
+00015270: 2020 2020 2020 2020 7478 6e5f 6861 7368          txn_hash
+00015280: 203d 2061 7761 6974 2061 7379 6e63 5f77   = await async_w
+00015290: 332e 6574 682e 7365 6e64 5f74 7261 6e73  3.eth.send_trans
+000152a0: 6163 7469 6f6e 2874 786e 5f70 6172 616d  action(txn_param
+000152b0: 7329 0a20 2020 2020 2020 2074 786e 203d  s).        txn =
+000152c0: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
+000152d0: 6574 682e 6765 745f 7472 616e 7361 6374  eth.get_transact
+000152e0: 696f 6e28 7478 6e5f 6861 7368 290a 0a20  ion(txn_hash).. 
+000152f0: 2020 2020 2020 2074 786e 5f70 6172 616d         txn_param
+00015300: 735b 226d 6178 4665 6550 6572 4761 7322  s["maxFeePerGas"
+00015310: 5d20 3d20 6173 796e 635f 7733 2e74 6f5f  ] = async_w3.to_
+00015320: 7765 6928 332c 2022 6777 6569 2229 0a20  wei(3, "gwei"). 
+00015330: 2020 2020 2020 2074 786e 5f70 6172 616d         txn_param
+00015340: 735b 226d 6178 5072 696f 7269 7479 4665  s["maxPriorityFe
+00015350: 6550 6572 4761 7322 5d20 3d20 6173 796e  ePerGas"] = asyn
+00015360: 635f 7733 2e74 6f5f 7765 6928 322c 2022  c_w3.to_wei(2, "
+00015370: 6777 6569 2229 0a20 2020 2020 2020 2074  gwei").        t
+00015380: 786e 5f70 6172 616d 735b 226e 6f6e 6365  xn_params["nonce
+00015390: 225d 203d 204e 6f6e 6365 2874 786e 5b22  "] = Nonce(txn["
+000153a0: 6e6f 6e63 6522 5d20 2b20 3129 0a20 2020  nonce"] + 1).   
+000153b0: 2020 2020 2077 6974 6820 7079 7465 7374       with pytest
+000153c0: 2e72 6169 7365 7328 5661 6c75 6545 7272  .raises(ValueErr
+000153d0: 6f72 293a 0a20 2020 2020 2020 2020 2020  or):.           
+000153e0: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
+000153f0: 6574 682e 7265 706c 6163 655f 7472 616e  eth.replace_tran
+00015400: 7361 6374 696f 6e28 7478 6e5f 6861 7368  saction(txn_hash
+00015410: 2c20 7478 6e5f 7061 7261 6d73 290a 0a20  , txn_params).. 
+00015420: 2020 2040 7079 7465 7374 2e6d 6172 6b2e     @pytest.mark.
+00015430: 6173 796e 6369 6f0a 2020 2020 6173 796e  asyncio.    asyn
+00015440: 6320 6465 6620 7465 7374 5f61 7379 6e63  c def test_async
+00015450: 5f65 7468 5f72 6570 6c61 6365 5f74 7261  _eth_replace_tra
+00015460: 6e73 6163 7469 6f6e 5f67 6173 5f70 7269  nsaction_gas_pri
+00015470: 6365 5f74 6f6f 5f6c 6f77 280a 2020 2020  ce_too_low(.    
+00015480: 2020 2020 7365 6c66 2c20 6173 796e 635f      self, async_
+00015490: 7733 3a20 2241 7379 6e63 5765 6233 222c  w3: "AsyncWeb3",
+000154a0: 2061 7379 6e63 5f75 6e6c 6f63 6b65 645f   async_unlocked_
+000154b0: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
+000154c0: 653a 2043 6865 636b 7375 6d41 6464 7265  e: ChecksumAddre
+000154d0: 7373 0a20 2020 2029 202d 3e20 4e6f 6e65  ss.    ) -> None
+000154e0: 3a0a 2020 2020 2020 2020 7478 6e5f 7061  :.        txn_pa
+000154f0: 7261 6d73 3a20 5478 5061 7261 6d73 203d  rams: TxParams =
+00015500: 207b 0a20 2020 2020 2020 2020 2020 2022   {.            "
+00015510: 6672 6f6d 223a 2061 7379 6e63 5f75 6e6c  from": async_unl
+00015520: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
+00015530: 616c 5f74 7970 652c 0a20 2020 2020 2020  al_type,.       
+00015540: 2020 2020 2022 746f 223a 2061 7379 6e63       "to": async
+00015550: 5f75 6e6c 6f63 6b65 645f 6163 636f 756e  _unlocked_accoun
+00015560: 745f 6475 616c 5f74 7970 652c 0a20 2020  t_dual_type,.   
+00015570: 2020 2020 2020 2020 2022 7661 6c75 6522           "value"
+00015580: 3a20 5765 6928 3129 2c0a 2020 2020 2020  : Wei(1),.      
+00015590: 2020 2020 2020 2267 6173 223a 2032 3130        "gas": 210
+000155a0: 3030 2c0a 2020 2020 2020 2020 2020 2020  00,.            
+000155b0: 2267 6173 5072 6963 6522 3a20 6173 796e  "gasPrice": asyn
+000155c0: 635f 7733 2e74 6f5f 7765 6928 322c 2022  c_w3.to_wei(2, "
+000155d0: 6777 6569 2229 2c0a 2020 2020 2020 2020  gwei"),.        
+000155e0: 7d0a 2020 2020 2020 2020 7478 6e5f 6861  }.        txn_ha
+000155f0: 7368 203d 2061 7761 6974 2061 7379 6e63  sh = await async
+00015600: 5f77 332e 6574 682e 7365 6e64 5f74 7261  _w3.eth.send_tra
+00015610: 6e73 6163 7469 6f6e 2874 786e 5f70 6172  nsaction(txn_par
+00015620: 616d 7329 0a0a 2020 2020 2020 2020 7478  ams)..        tx
+00015630: 6e5f 7061 7261 6d73 5b22 6761 7350 7269  n_params["gasPri
+00015640: 6365 225d 203d 2061 7379 6e63 5f77 332e  ce"] = async_w3.
+00015650: 746f 5f77 6569 2831 2c20 2267 7765 6922  to_wei(1, "gwei"
+00015660: 290a 2020 2020 2020 2020 7769 7468 2070  ).        with p
+00015670: 7974 6573 742e 7261 6973 6573 2856 616c  ytest.raises(Val
+00015680: 7565 4572 726f 7229 3a0a 2020 2020 2020  ueError):.      
+00015690: 2020 2020 2020 6177 6169 7420 6173 796e        await asyn
+000156a0: 635f 7733 2e65 7468 2e72 6570 6c61 6365  c_w3.eth.replace
+000156b0: 5f74 7261 6e73 6163 7469 6f6e 2874 786e  _transaction(txn
+000156c0: 5f68 6173 682c 2074 786e 5f70 6172 616d  _hash, txn_param
+000156d0: 7329 0a0a 2020 2020 4070 7974 6573 742e  s)..    @pytest.
+000156e0: 6d61 726b 2e61 7379 6e63 696f 0a20 2020  mark.asyncio.   
+000156f0: 2061 7379 6e63 2064 6566 2074 6573 745f   async def test_
+00015700: 6173 796e 635f 6574 685f 7265 706c 6163  async_eth_replac
+00015710: 655f 7472 616e 7361 6374 696f 6e5f 6761  e_transaction_ga
+00015720: 735f 7072 6963 655f 6465 6661 756c 7469  s_price_defaulti
+00015730: 6e67 5f6d 696e 696d 756d 280a 2020 2020  ng_minimum(.    
+00015740: 2020 2020 7365 6c66 2c20 6173 796e 635f      self, async_
+00015750: 7733 3a20 2241 7379 6e63 5765 6233 222c  w3: "AsyncWeb3",
+00015760: 2061 7379 6e63 5f75 6e6c 6f63 6b65 645f   async_unlocked_
+00015770: 6163 636f 756e 743a 2043 6865 636b 7375  account: Checksu
+00015780: 6d41 6464 7265 7373 0a20 2020 2029 202d  mAddress.    ) -
+00015790: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+000157a0: 6761 735f 7072 6963 6520 3d20 6173 796e  gas_price = asyn
+000157b0: 635f 7733 2e74 6f5f 7765 6928 312c 2022  c_w3.to_wei(1, "
+000157c0: 6777 6569 2229 0a0a 2020 2020 2020 2020  gwei")..        
+000157d0: 7478 6e5f 7061 7261 6d73 3a20 5478 5061  txn_params: TxPa
+000157e0: 7261 6d73 203d 207b 0a20 2020 2020 2020  rams = {.       
+000157f0: 2020 2020 2022 6672 6f6d 223a 2061 7379       "from": asy
+00015800: 6e63 5f75 6e6c 6f63 6b65 645f 6163 636f  nc_unlocked_acco
+00015810: 756e 742c 0a20 2020 2020 2020 2020 2020  unt,.           
+00015820: 2022 746f 223a 2061 7379 6e63 5f75 6e6c   "to": async_unl
+00015830: 6f63 6b65 645f 6163 636f 756e 742c 0a20  ocked_account,. 
+00015840: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
+00015850: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
+00015860: 2020 2020 2020 2020 2267 6173 223a 2032          "gas": 2
+00015870: 3130 3030 2c0a 2020 2020 2020 2020 2020  1000,.          
+00015880: 2020 2267 6173 5072 6963 6522 3a20 6761    "gasPrice": ga
+00015890: 735f 7072 6963 652c 0a20 2020 2020 2020  s_price,.       
+000158a0: 207d 0a20 2020 2020 2020 2074 786e 5f68   }.        txn_h
+000158b0: 6173 6820 3d20 6177 6169 7420 6173 796e  ash = await asyn
+000158c0: 635f 7733 2e65 7468 2e73 656e 645f 7472  c_w3.eth.send_tr
+000158d0: 616e 7361 6374 696f 6e28 7478 6e5f 7061  ansaction(txn_pa
+000158e0: 7261 6d73 290a 0a20 2020 2020 2020 2074  rams)..        t
+000158f0: 786e 5f70 6172 616d 732e 706f 7028 2267  xn_params.pop("g
+00015900: 6173 5072 6963 6522 290a 2020 2020 2020  asPrice").      
+00015910: 2020 7265 706c 6163 655f 7478 6e5f 6861    replace_txn_ha
+00015920: 7368 203d 2061 7761 6974 2061 7379 6e63  sh = await async
+00015930: 5f77 332e 6574 682e 7265 706c 6163 655f  _w3.eth.replace_
+00015940: 7472 616e 7361 6374 696f 6e28 7478 6e5f  transaction(txn_
+00015950: 6861 7368 2c20 7478 6e5f 7061 7261 6d73  hash, txn_params
+00015960: 290a 2020 2020 2020 2020 7265 706c 6163  ).        replac
+00015970: 655f 7478 6e20 3d20 6177 6169 7420 6173  e_txn = await as
+00015980: 796e 635f 7733 2e65 7468 2e67 6574 5f74  ync_w3.eth.get_t
+00015990: 7261 6e73 6163 7469 6f6e 2872 6570 6c61  ransaction(repla
+000159a0: 6365 5f74 786e 5f68 6173 6829 0a0a 2020  ce_txn_hash)..  
+000159b0: 2020 2020 2020 6173 7365 7274 2072 6570        assert rep
+000159c0: 6c61 6365 5f74 786e 5b22 6761 7350 7269  lace_txn["gasPri
+000159d0: 6365 225d 203d 3d20 6d61 7468 2e63 6569  ce"] == math.cei
+000159e0: 6c28 0a20 2020 2020 2020 2020 2020 2067  l(.            g
+000159f0: 6173 5f70 7269 6365 202a 2031 2e31 3235  as_price * 1.125
+00015a00: 0a20 2020 2020 2020 2029 2020 2320 6d69  .        )  # mi
+00015a10: 6e69 6d75 6d20 6761 7320 7072 6963 650a  nimum gas price.
+00015a20: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
+00015a30: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
+00015a40: 796e 6320 6465 6620 7465 7374 5f61 7379  ync def test_asy
+00015a50: 6e63 5f65 7468 5f72 6570 6c61 6365 5f74  nc_eth_replace_t
+00015a60: 7261 6e73 6163 7469 6f6e 5f67 6173 5f70  ransaction_gas_p
+00015a70: 7269 6365 5f64 6566 6175 6c74 696e 675f  rice_defaulting_
+00015a80: 7374 7261 7465 6779 5f68 6967 6865 7228  strategy_higher(
+00015a90: 0a20 2020 2020 2020 2073 656c 662c 2061  .        self, a
+00015aa0: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
+00015ab0: 6562 3322 2c20 6173 796e 635f 756e 6c6f  eb3", async_unlo
+00015ac0: 636b 6564 5f61 6363 6f75 6e74 3a20 4368  cked_account: Ch
+00015ad0: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
+00015ae0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+00015af0: 2020 2020 2074 786e 5f70 6172 616d 733a       txn_params:
+00015b00: 2054 7850 6172 616d 7320 3d20 7b0a 2020   TxParams = {.  
+00015b10: 2020 2020 2020 2020 2020 2266 726f 6d22            "from"
+00015b20: 3a20 6173 796e 635f 756e 6c6f 636b 6564  : async_unlocked
+00015b30: 5f61 6363 6f75 6e74 2c0a 2020 2020 2020  _account,.      
+00015b40: 2020 2020 2020 2274 6f22 3a20 6173 796e        "to": asyn
+00015b50: 635f 756e 6c6f 636b 6564 5f61 6363 6f75  c_unlocked_accou
+00015b60: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
+00015b70: 2276 616c 7565 223a 2057 6569 2831 292c  "value": Wei(1),
+00015b80: 0a20 2020 2020 2020 2020 2020 2022 6761  .            "ga
+00015b90: 7322 3a20 3231 3030 302c 0a20 2020 2020  s": 21000,.     
+00015ba0: 2020 2020 2020 2022 6761 7350 7269 6365         "gasPrice
+00015bb0: 223a 2061 7379 6e63 5f77 332e 746f 5f77  ": async_w3.to_w
+00015bc0: 6569 2831 2c20 2267 7765 6922 292c 0a20  ei(1, "gwei"),. 
+00015bd0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00015be0: 2074 786e 5f68 6173 6820 3d20 6177 6169   txn_hash = awai
+00015bf0: 7420 6173 796e 635f 7733 2e65 7468 2e73  t async_w3.eth.s
+00015c00: 656e 645f 7472 616e 7361 6374 696f 6e28  end_transaction(
+00015c10: 7478 6e5f 7061 7261 6d73 290a 0a20 2020  txn_params)..   
+00015c20: 2020 2020 2074 776f 5f67 7765 695f 696e       two_gwei_in
+00015c30: 5f77 6569 203d 2061 7379 6e63 5f77 332e  _wei = async_w3.
+00015c40: 746f 5f77 6569 2832 2c20 2267 7765 6922  to_wei(2, "gwei"
+00015c50: 290a 0a20 2020 2020 2020 2064 6566 2068  )..        def h
+00015c60: 6967 6865 725f 6761 735f 7072 6963 655f  igher_gas_price_
+00015c70: 7374 7261 7465 6779 2861 7379 6e63 5f77  strategy(async_w
+00015c80: 333a 2022 4173 796e 6357 6562 3322 2c20  3: "AsyncWeb3", 
+00015c90: 7478 6e3a 2054 7850 6172 616d 7329 202d  txn: TxParams) -
+00015ca0: 3e20 5765 693a 0a20 2020 2020 2020 2020  > Wei:.         
+00015cb0: 2020 2072 6574 7572 6e20 7477 6f5f 6777     return two_gw
+00015cc0: 6569 5f69 6e5f 7765 690a 0a20 2020 2020  ei_in_wei..     
+00015cd0: 2020 2061 7379 6e63 5f77 332e 6574 682e     async_w3.eth.
+00015ce0: 7365 745f 6761 735f 7072 6963 655f 7374  set_gas_price_st
+00015cf0: 7261 7465 6779 2868 6967 6865 725f 6761  rategy(higher_ga
+00015d00: 735f 7072 6963 655f 7374 7261 7465 6779  s_price_strategy
+00015d10: 290a 0a20 2020 2020 2020 2074 786e 5f70  )..        txn_p
+00015d20: 6172 616d 732e 706f 7028 2267 6173 5072  arams.pop("gasPr
+00015d30: 6963 6522 290a 2020 2020 2020 2020 7265  ice").        re
+00015d40: 706c 6163 655f 7478 6e5f 6861 7368 203d  place_txn_hash =
+00015d50: 2061 7761 6974 2061 7379 6e63 5f77 332e   await async_w3.
+00015d60: 6574 682e 7265 706c 6163 655f 7472 616e  eth.replace_tran
+00015d70: 7361 6374 696f 6e28 7478 6e5f 6861 7368  saction(txn_hash
+00015d80: 2c20 7478 6e5f 7061 7261 6d73 290a 2020  , txn_params).  
+00015d90: 2020 2020 2020 7265 706c 6163 655f 7478        replace_tx
+00015da0: 6e20 3d20 6177 6169 7420 6173 796e 635f  n = await async_
+00015db0: 7733 2e65 7468 2e67 6574 5f74 7261 6e73  w3.eth.get_trans
+00015dc0: 6163 7469 6f6e 2872 6570 6c61 6365 5f74  action(replace_t
+00015dd0: 786e 5f68 6173 6829 0a20 2020 2020 2020  xn_hash).       
+00015de0: 2061 7373 6572 7420 280a 2020 2020 2020   assert (.      
+00015df0: 2020 2020 2020 7265 706c 6163 655f 7478        replace_tx
+00015e00: 6e5b 2267 6173 5072 6963 6522 5d20 3d3d  n["gasPrice"] ==
+00015e10: 2074 776f 5f67 7765 695f 696e 5f77 6569   two_gwei_in_wei
+00015e20: 0a20 2020 2020 2020 2029 2020 2320 5374  .        )  # St
+00015e30: 7261 7465 6779 2070 726f 7669 6465 7320  rategy provides 
+00015e40: 6869 6768 6572 2067 6173 2070 7269 6365  higher gas price
+00015e50: 0a20 2020 2020 2020 2061 7379 6e63 5f77  .        async_w
+00015e60: 332e 6574 682e 7365 745f 6761 735f 7072  3.eth.set_gas_pr
+00015e70: 6963 655f 7374 7261 7465 6779 284e 6f6e  ice_strategy(Non
+00015e80: 6529 2020 2320 7265 7365 7420 7374 7261  e)  # reset stra
+00015e90: 7465 6779 0a0a 2020 2020 4070 7974 6573  tegy..    @pytes
+00015ea0: 742e 6d61 726b 2e61 7379 6e63 696f 0a20  t.mark.asyncio. 
+00015eb0: 2020 2061 7379 6e63 2064 6566 2074 6573     async def tes
+00015ec0: 745f 6173 796e 635f 6574 685f 7265 706c  t_async_eth_repl
+00015ed0: 6163 655f 7472 616e 7361 6374 696f 6e5f  ace_transaction_
+00015ee0: 6761 735f 7072 6963 655f 6465 6661 756c  gas_price_defaul
+00015ef0: 7469 6e67 5f73 7472 6174 6567 795f 6c6f  ting_strategy_lo
+00015f00: 7765 7228 0a20 2020 2020 2020 2073 656c  wer(.        sel
+00015f10: 662c 2061 7379 6e63 5f77 333a 2022 4173  f, async_w3: "As
+00015f20: 796e 6357 6562 3322 2c20 6173 796e 635f  yncWeb3", async_
+00015f30: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+00015f40: 3a20 4368 6563 6b73 756d 4164 6472 6573  : ChecksumAddres
+00015f50: 730a 2020 2020 2920 2d3e 204e 6f6e 653a  s.    ) -> None:
+00015f60: 0a20 2020 2020 2020 2067 6173 5f70 7269  .        gas_pri
+00015f70: 6365 203d 2061 7379 6e63 5f77 332e 746f  ce = async_w3.to
+00015f80: 5f77 6569 2832 2c20 2267 7765 6922 290a  _wei(2, "gwei").
+00015f90: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
+00015fa0: 616d 733a 2054 7850 6172 616d 7320 3d20  ams: TxParams = 
+00015fb0: 7b0a 2020 2020 2020 2020 2020 2020 2266  {.            "f
+00015fc0: 726f 6d22 3a20 6173 796e 635f 756e 6c6f  rom": async_unlo
+00015fd0: 636b 6564 5f61 6363 6f75 6e74 2c0a 2020  cked_account,.  
+00015fe0: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
+00015ff0: 6173 796e 635f 756e 6c6f 636b 6564 5f61  async_unlocked_a
+00016000: 6363 6f75 6e74 2c0a 2020 2020 2020 2020  ccount,.        
+00016010: 2020 2020 2276 616c 7565 223a 2057 6569      "value": Wei
+00016020: 2831 292c 0a20 2020 2020 2020 2020 2020  (1),.           
+00016030: 2022 6761 7322 3a20 3231 3030 302c 0a20   "gas": 21000,. 
+00016040: 2020 2020 2020 2020 2020 2022 6761 7350             "gasP
+00016050: 7269 6365 223a 2067 6173 5f70 7269 6365  rice": gas_price
+00016060: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+00016070: 2020 2020 7478 6e5f 6861 7368 203d 2061      txn_hash = a
+00016080: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
+00016090: 682e 7365 6e64 5f74 7261 6e73 6163 7469  h.send_transacti
+000160a0: 6f6e 2874 786e 5f70 6172 616d 7329 0a0a  on(txn_params)..
+000160b0: 2020 2020 2020 2020 6465 6620 6c6f 7765          def lowe
+000160c0: 725f 6761 735f 7072 6963 655f 7374 7261  r_gas_price_stra
+000160d0: 7465 6779 2861 7379 6e63 5f77 333a 2022  tegy(async_w3: "
+000160e0: 4173 796e 6357 6562 3322 2c20 7478 6e3a  AsyncWeb3", txn:
+000160f0: 2054 7850 6172 616d 7329 202d 3e20 5765   TxParams) -> We
+00016100: 693a 0a20 2020 2020 2020 2020 2020 2072  i:.            r
+00016110: 6574 7572 6e20 6173 796e 635f 7733 2e74  eturn async_w3.t
+00016120: 6f5f 7765 6928 312c 2022 6777 6569 2229  o_wei(1, "gwei")
+00016130: 0a0a 2020 2020 2020 2020 6173 796e 635f  ..        async_
+00016140: 7733 2e65 7468 2e73 6574 5f67 6173 5f70  w3.eth.set_gas_p
+00016150: 7269 6365 5f73 7472 6174 6567 7928 6c6f  rice_strategy(lo
+00016160: 7765 725f 6761 735f 7072 6963 655f 7374  wer_gas_price_st
+00016170: 7261 7465 6779 290a 0a20 2020 2020 2020  rategy)..       
+00016180: 2074 786e 5f70 6172 616d 732e 706f 7028   txn_params.pop(
+00016190: 2267 6173 5072 6963 6522 290a 2020 2020  "gasPrice").    
+000161a0: 2020 2020 7265 706c 6163 655f 7478 6e5f      replace_txn_
+000161b0: 6861 7368 203d 2061 7761 6974 2061 7379  hash = await asy
+000161c0: 6e63 5f77 332e 6574 682e 7265 706c 6163  nc_w3.eth.replac
+000161d0: 655f 7472 616e 7361 6374 696f 6e28 7478  e_transaction(tx
+000161e0: 6e5f 6861 7368 2c20 7478 6e5f 7061 7261  n_hash, txn_para
+000161f0: 6d73 290a 2020 2020 2020 2020 7265 706c  ms).        repl
+00016200: 6163 655f 7478 6e20 3d20 6177 6169 7420  ace_txn = await 
+00016210: 6173 796e 635f 7733 2e65 7468 2e67 6574  async_w3.eth.get
+00016220: 5f74 7261 6e73 6163 7469 6f6e 2872 6570  _transaction(rep
+00016230: 6c61 6365 5f74 786e 5f68 6173 6829 0a20  lace_txn_hash). 
+00016240: 2020 2020 2020 2023 2053 7472 6174 6567         # Strateg
+00016250: 7920 7072 6f76 6964 6573 206c 6f77 6572  y provides lower
+00016260: 2067 6173 2070 7269 6365 202d 206d 696e   gas price - min
+00016270: 696d 756d 2070 7265 6665 7272 6564 0a20  imum preferred. 
+00016280: 2020 2020 2020 2061 7373 6572 7420 7265         assert re
+00016290: 706c 6163 655f 7478 6e5b 2267 6173 5072  place_txn["gasPr
+000162a0: 6963 6522 5d20 3d3d 206d 6174 682e 6365  ice"] == math.ce
+000162b0: 696c 2867 6173 5f70 7269 6365 202a 2031  il(gas_price * 1
+000162c0: 2e31 3235 290a 2020 2020 2020 2020 6173  .125).        as
+000162d0: 796e 635f 7733 2e65 7468 2e73 6574 5f67  ync_w3.eth.set_g
+000162e0: 6173 5f70 7269 6365 5f73 7472 6174 6567  as_price_strateg
+000162f0: 7928 4e6f 6e65 2920 2023 2072 6573 6574  y(None)  # reset
+00016300: 2073 7472 6174 6567 790a 0a20 2020 2040   strategy..    @
+00016310: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
+00016320: 6369 6f0a 2020 2020 6173 796e 6320 6465  cio.    async de
+00016330: 6620 7465 7374 5f61 7379 6e63 5f65 7468  f test_async_eth
+00016340: 5f6e 6577 5f66 696c 7465 7228 7365 6c66  _new_filter(self
+00016350: 2c20 6173 796e 635f 7733 3a20 2241 7379  , async_w3: "Asy
+00016360: 6e63 5765 6233 2229 202d 3e20 4e6f 6e65  ncWeb3") -> None
+00016370: 3a0a 2020 2020 2020 2020 6669 6c74 6572  :.        filter
+00016380: 203d 2061 7761 6974 2061 7379 6e63 5f77   = await async_w
+00016390: 332e 6574 682e 6669 6c74 6572 287b 7d29  3.eth.filter({})
+000163a0: 0a0a 2020 2020 2020 2020 6368 616e 6765  ..        change
+000163b0: 7320 3d20 6177 6169 7420 6173 796e 635f  s = await async_
+000163c0: 7733 2e65 7468 2e67 6574 5f66 696c 7465  w3.eth.get_filte
+000163d0: 725f 6368 616e 6765 7328 6669 6c74 6572  r_changes(filter
+000163e0: 2e66 696c 7465 725f 6964 290a 2020 2020  .filter_id).    
+000163f0: 2020 2020 6173 7365 7274 2069 735f 6c69      assert is_li
+00016400: 7374 5f6c 696b 6528 6368 616e 6765 7329  st_like(changes)
+00016410: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00016420: 6e6f 7420 6368 616e 6765 730a 0a20 2020  not changes..   
+00016430: 2020 2020 206c 6f67 7320 3d20 6177 6169       logs = awai
+00016440: 7420 6173 796e 635f 7733 2e65 7468 2e67  t async_w3.eth.g
+00016450: 6574 5f66 696c 7465 725f 6c6f 6773 2866  et_filter_logs(f
+00016460: 696c 7465 722e 6669 6c74 6572 5f69 6429  ilter.filter_id)
+00016470: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00016480: 6973 5f6c 6973 745f 6c69 6b65 286c 6f67  is_list_like(log
+00016490: 7329 0a20 2020 2020 2020 2061 7373 6572  s).        asser
+000164a0: 7420 6e6f 7420 6c6f 6773 0a0a 2020 2020  t not logs..    
+000164b0: 2020 2020 7265 7375 6c74 203d 2061 7761      result = awa
+000164c0: 6974 2061 7379 6e63 5f77 332e 6574 682e  it async_w3.eth.
+000164d0: 756e 696e 7374 616c 6c5f 6669 6c74 6572  uninstall_filter
+000164e0: 2866 696c 7465 722e 6669 6c74 6572 5f69  (filter.filter_i
+000164f0: 6429 0a20 2020 2020 2020 2061 7373 6572  d).        asser
+00016500: 7420 7265 7375 6c74 2069 7320 5472 7565  t result is True
+00016510: 0a0a 2020 2020 4070 7974 6573 742e 6d61  ..    @pytest.ma
+00016520: 726b 2e61 7379 6e63 696f 0a20 2020 2061  rk.asyncio.    a
+00016530: 7379 6e63 2064 6566 2074 6573 745f 6173  sync def test_as
+00016540: 796e 635f 6574 685f 6e65 775f 626c 6f63  ync_eth_new_bloc
+00016550: 6b5f 6669 6c74 6572 2873 656c 662c 2061  k_filter(self, a
+00016560: 7379 6e63 5f77 333a 2022 4173 796e 6357  sync_w3: "AsyncW
+00016570: 6562 3322 2920 2d3e 204e 6f6e 653a 0a20  eb3") -> None:. 
+00016580: 2020 2020 2020 2066 696c 7465 7220 3d20         filter = 
+00016590: 6177 6169 7420 6173 796e 635f 7733 2e65  await async_w3.e
+000165a0: 7468 2e66 696c 7465 7228 226c 6174 6573  th.filter("lates
+000165b0: 7422 290a 2020 2020 2020 2020 6173 7365  t").        asse
+000165c0: 7274 2069 735f 7374 7269 6e67 2866 696c  rt is_string(fil
+000165d0: 7465 722e 6669 6c74 6572 5f69 6429 0a0a  ter.filter_id)..
+000165e0: 2020 2020 2020 2020 6368 616e 6765 7320          changes 
+000165f0: 3d20 6177 6169 7420 6173 796e 635f 7733  = await async_w3
+00016600: 2e65 7468 2e67 6574 5f66 696c 7465 725f  .eth.get_filter_
+00016610: 6368 616e 6765 7328 6669 6c74 6572 2e66  changes(filter.f
+00016620: 696c 7465 725f 6964 290a 2020 2020 2020  ilter_id).      
+00016630: 2020 6173 7365 7274 2069 735f 6c69 7374    assert is_list
+00016640: 5f6c 696b 6528 6368 616e 6765 7329 0a20  _like(changes). 
+00016650: 2020 2020 2020 2061 7373 6572 7420 6e6f         assert no
+00016660: 7420 6368 616e 6765 730a 0a20 2020 2020  t changes..     
+00016670: 2020 2072 6573 756c 7420 3d20 6177 6169     result = awai
+00016680: 7420 6173 796e 635f 7733 2e65 7468 2e75  t async_w3.eth.u
+00016690: 6e69 6e73 7461 6c6c 5f66 696c 7465 7228  ninstall_filter(
+000166a0: 6669 6c74 6572 2e66 696c 7465 725f 6964  filter.filter_id
+000166b0: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+000166c0: 2072 6573 756c 7420 6973 2054 7275 650a   result is True.
+000166d0: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
+000166e0: 6b2e 6173 796e 6369 6f0a 2020 2020 6173  k.asyncio.    as
+000166f0: 796e 6320 6465 6620 7465 7374 5f61 7379  ync def test_asy
+00016700: 6e63 5f65 7468 5f6e 6577 5f70 656e 6469  nc_eth_new_pendi
+00016710: 6e67 5f74 7261 6e73 6163 7469 6f6e 5f66  ng_transaction_f
+00016720: 696c 7465 7228 0a20 2020 2020 2020 2073  ilter(.        s
+00016730: 656c 662c 2061 7379 6e63 5f77 333a 2022  elf, async_w3: "
+00016740: 4173 796e 6357 6562 3322 0a20 2020 2029  AsyncWeb3".    )
+00016750: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+00016760: 2020 6669 6c74 6572 203d 2061 7761 6974    filter = await
+00016770: 2061 7379 6e63 5f77 332e 6574 682e 6669   async_w3.eth.fi
+00016780: 6c74 6572 2822 7065 6e64 696e 6722 290a  lter("pending").
+00016790: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+000167a0: 735f 7374 7269 6e67 2866 696c 7465 722e  s_string(filter.
+000167b0: 6669 6c74 6572 5f69 6429 0a0a 2020 2020  filter_id)..    
+000167c0: 2020 2020 6368 616e 6765 7320 3d20 6177      changes = aw
+000167d0: 6169 7420 6173 796e 635f 7733 2e65 7468  ait async_w3.eth
+000167e0: 2e67 6574 5f66 696c 7465 725f 6368 616e  .get_filter_chan
+000167f0: 6765 7328 6669 6c74 6572 2e66 696c 7465  ges(filter.filte
+00016800: 725f 6964 290a 2020 2020 2020 2020 6173  r_id).        as
+00016810: 7365 7274 2069 735f 6c69 7374 5f6c 696b  sert is_list_lik
+00016820: 6528 6368 616e 6765 7329 0a20 2020 2020  e(changes).     
+00016830: 2020 2061 7373 6572 7420 6e6f 7420 6368     assert not ch
+00016840: 616e 6765 730a 0a20 2020 2020 2020 2072  anges..        r
+00016850: 6573 756c 7420 3d20 6177 6169 7420 6173  esult = await as
+00016860: 796e 635f 7733 2e65 7468 2e75 6e69 6e73  ync_w3.eth.unins
+00016870: 7461 6c6c 5f66 696c 7465 7228 6669 6c74  tall_filter(filt
+00016880: 6572 2e66 696c 7465 725f 6964 290a 2020  er.filter_id).  
+00016890: 2020 2020 2020 6173 7365 7274 2072 6573        assert res
+000168a0: 756c 7420 6973 2054 7275 650a 0a20 2020  ult is True..   
+000168b0: 2040 7079 7465 7374 2e6d 6172 6b2e 6173   @pytest.mark.as
+000168c0: 796e 6369 6f0a 2020 2020 6173 796e 6320  yncio.    async 
+000168d0: 6465 6620 7465 7374 5f61 7379 6e63 5f65  def test_async_e
+000168e0: 7468 5f75 6e69 6e73 7461 6c6c 5f66 696c  th_uninstall_fil
+000168f0: 7465 7228 7365 6c66 2c20 6173 796e 635f  ter(self, async_
+00016900: 7733 3a20 2241 7379 6e63 5765 6233 2229  w3: "AsyncWeb3")
+00016910: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+00016920: 2020 6669 6c74 6572 203d 2061 7761 6974    filter = await
+00016930: 2061 7379 6e63 5f77 332e 6574 682e 6669   async_w3.eth.fi
+00016940: 6c74 6572 287b 7d29 0a20 2020 2020 2020  lter({}).       
+00016950: 2061 7373 6572 7420 6973 5f73 7472 696e   assert is_strin
+00016960: 6728 6669 6c74 6572 2e66 696c 7465 725f  g(filter.filter_
+00016970: 6964 290a 0a20 2020 2020 2020 2073 7563  id)..        suc
+00016980: 6365 7373 203d 2061 7761 6974 2061 7379  cess = await asy
+00016990: 6e63 5f77 332e 6574 682e 756e 696e 7374  nc_w3.eth.uninst
+000169a0: 616c 6c5f 6669 6c74 6572 2866 696c 7465  all_filter(filte
+000169b0: 722e 6669 6c74 6572 5f69 6429 0a20 2020  r.filter_id).   
+000169c0: 2020 2020 2061 7373 6572 7420 7375 6363       assert succ
+000169d0: 6573 7320 6973 2054 7275 650a 0a20 2020  ess is True..   
+000169e0: 2020 2020 2066 6169 6c75 7265 203d 2061       failure = a
+000169f0: 7761 6974 2061 7379 6e63 5f77 332e 6574  wait async_w3.et
+00016a00: 682e 756e 696e 7374 616c 6c5f 6669 6c74  h.uninstall_filt
+00016a10: 6572 2866 696c 7465 722e 6669 6c74 6572  er(filter.filter
+00016a20: 5f69 6429 0a20 2020 2020 2020 2061 7373  _id).        ass
+00016a30: 6572 7420 6661 696c 7572 6520 6973 2046  ert failure is F
+00016a40: 616c 7365 0a0a 0a63 6c61 7373 2045 7468  alse...class Eth
+00016a50: 4d6f 6475 6c65 5465 7374 3a0a 2020 2020  ModuleTest:.    
+00016a60: 6465 6620 7465 7374 5f65 7468 5f73 796e  def test_eth_syn
+00016a70: 6369 6e67 2873 656c 662c 2077 333a 2022  cing(self, w3: "
+00016a80: 5765 6233 2229 202d 3e20 4e6f 6e65 3a0a  Web3") -> None:.
+00016a90: 2020 2020 2020 2020 7379 6e63 696e 6720          syncing 
+00016aa0: 3d20 7733 2e65 7468 2e73 796e 6369 6e67  = w3.eth.syncing
+00016ab0: 0a0a 2020 2020 2020 2020 6173 7365 7274  ..        assert
+00016ac0: 2069 735f 626f 6f6c 6561 6e28 7379 6e63   is_boolean(sync
+00016ad0: 696e 6729 206f 7220 6973 5f64 6963 7428  ing) or is_dict(
+00016ae0: 7379 6e63 696e 6729 0a0a 2020 2020 2020  syncing)..      
+00016af0: 2020 6966 2069 735f 626f 6f6c 6561 6e28    if is_boolean(
+00016b00: 7379 6e63 696e 6729 3a0a 2020 2020 2020  syncing):.      
+00016b10: 2020 2020 2020 6173 7365 7274 2073 796e        assert syn
+00016b20: 6369 6e67 2069 7320 4661 6c73 650a 2020  cing is False.  
+00016b30: 2020 2020 2020 656c 6966 2069 735f 6469        elif is_di
+00016b40: 6374 2873 796e 6369 6e67 293a 0a20 2020  ct(syncing):.   
+00016b50: 2020 2020 2020 2020 2073 796e 635f 6469           sync_di
+00016b60: 6374 203d 2063 6173 7428 5379 6e63 5374  ct = cast(SyncSt
+00016b70: 6174 7573 2c20 7379 6e63 696e 6729 0a20  atus, syncing). 
+00016b80: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+00016b90: 7420 2273 7461 7274 696e 6742 6c6f 636b  t "startingBlock
+00016ba0: 2220 696e 2073 796e 635f 6469 6374 0a20  " in sync_dict. 
+00016bb0: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+00016bc0: 7420 2263 7572 7265 6e74 426c 6f63 6b22  t "currentBlock"
+00016bd0: 2069 6e20 7379 6e63 5f64 6963 740a 2020   in sync_dict.  
+00016be0: 2020 2020 2020 2020 2020 6173 7365 7274            assert
+00016bf0: 2022 6869 6768 6573 7442 6c6f 636b 2220   "highestBlock" 
+00016c00: 696e 2073 796e 635f 6469 6374 0a0a 2020  in sync_dict..  
+00016c10: 2020 2020 2020 2020 2020 6173 7365 7274            assert
+00016c20: 2069 735f 696e 7465 6765 7228 7379 6e63   is_integer(sync
+00016c30: 5f64 6963 745b 2273 7461 7274 696e 6742  _dict["startingB
+00016c40: 6c6f 636b 225d 290a 2020 2020 2020 2020  lock"]).        
+00016c50: 2020 2020 6173 7365 7274 2069 735f 696e      assert is_in
+00016c60: 7465 6765 7228 7379 6e63 5f64 6963 745b  teger(sync_dict[
+00016c70: 2263 7572 7265 6e74 426c 6f63 6b22 5d29  "currentBlock"])
+00016c80: 0a20 2020 2020 2020 2020 2020 2061 7373  .            ass
+00016c90: 6572 7420 6973 5f69 6e74 6567 6572 2873  ert is_integer(s
+00016ca0: 796e 635f 6469 6374 5b22 6869 6768 6573  ync_dict["highes
+00016cb0: 7442 6c6f 636b 225d 290a 0a20 2020 2064  tBlock"])..    d
+00016cc0: 6566 2074 6573 745f 6574 685f 636f 696e  ef test_eth_coin
+00016cd0: 6261 7365 2873 656c 662c 2077 333a 2022  base(self, w3: "
+00016ce0: 5765 6233 2229 202d 3e20 4e6f 6e65 3a0a  Web3") -> None:.
+00016cf0: 2020 2020 2020 2020 636f 696e 6261 7365          coinbase
+00016d00: 203d 2077 332e 6574 682e 636f 696e 6261   = w3.eth.coinba
+00016d10: 7365 0a20 2020 2020 2020 2061 7373 6572  se.        asser
+00016d20: 7420 6973 5f63 6865 636b 7375 6d5f 6164  t is_checksum_ad
+00016d30: 6472 6573 7328 636f 696e 6261 7365 290a  dress(coinbase).
+00016d40: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
+00016d50: 685f 6d69 6e69 6e67 2873 656c 662c 2077  h_mining(self, w
+00016d60: 333a 2022 5765 6233 2229 202d 3e20 4e6f  3: "Web3") -> No
+00016d70: 6e65 3a0a 2020 2020 2020 2020 6d69 6e69  ne:.        mini
+00016d80: 6e67 203d 2077 332e 6574 682e 6d69 6e69  ng = w3.eth.mini
+00016d90: 6e67 0a20 2020 2020 2020 2061 7373 6572  ng.        asser
+00016da0: 7420 6973 5f62 6f6f 6c65 616e 286d 696e  t is_boolean(min
+00016db0: 696e 6729 0a0a 2020 2020 6465 6620 7465  ing)..    def te
+00016dc0: 7374 5f65 7468 5f68 6173 6872 6174 6528  st_eth_hashrate(
+00016dd0: 7365 6c66 2c20 7733 3a20 2257 6562 3322  self, w3: "Web3"
+00016de0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+00016df0: 2020 2068 6173 6872 6174 6520 3d20 7733     hashrate = w3
+00016e00: 2e65 7468 2e68 6173 6872 6174 650a 2020  .eth.hashrate.  
+00016e10: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+00016e20: 696e 7465 6765 7228 6861 7368 7261 7465  integer(hashrate
+00016e30: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+00016e40: 2068 6173 6872 6174 6520 3e3d 2030 0a0a   hashrate >= 0..
+00016e50: 2020 2020 6465 6620 7465 7374 5f65 7468      def test_eth
+00016e60: 5f63 6861 696e 5f69 6428 7365 6c66 2c20  _chain_id(self, 
+00016e70: 7733 3a20 2257 6562 3322 2920 2d3e 204e  w3: "Web3") -> N
+00016e80: 6f6e 653a 0a20 2020 2020 2020 2063 6861  one:.        cha
+00016e90: 696e 5f69 6420 3d20 7733 2e65 7468 2e63  in_id = w3.eth.c
+00016ea0: 6861 696e 5f69 640a 2020 2020 2020 2020  hain_id.        
+00016eb0: 2320 6368 6169 6e20 6964 2076 616c 7565  # chain id value
+00016ec0: 2066 726f 6d20 6765 7468 2066 6978 7475   from geth fixtu
+00016ed0: 7265 2067 656e 6573 6973 2066 696c 650a  re genesis file.
+00016ee0: 2020 2020 2020 2020 6173 7365 7274 2063          assert c
+00016ef0: 6861 696e 5f69 6420 3d3d 2031 3331 3237  hain_id == 13127
+00016f00: 3733 3232 3934 3035 3337 0a0a 2020 2020  7322940537..    
+00016f10: 6465 6620 7465 7374 5f65 7468 5f66 6565  def test_eth_fee
+00016f20: 5f68 6973 746f 7279 2873 656c 662c 2077  _history(self, w
+00016f30: 333a 2022 5765 6233 2229 202d 3e20 4e6f  3: "Web3") -> No
+00016f40: 6e65 3a0a 2020 2020 2020 2020 6665 655f  ne:.        fee_
+00016f50: 6869 7374 6f72 7920 3d20 7733 2e65 7468  history = w3.eth
+00016f60: 2e66 6565 5f68 6973 746f 7279 2831 2c20  .fee_history(1, 
+00016f70: 226c 6174 6573 7422 2c20 5b35 305d 290a  "latest", [50]).
+00016f80: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+00016f90: 735f 6c69 7374 5f6c 696b 6528 6665 655f  s_list_like(fee_
+00016fa0: 6869 7374 6f72 795b 2262 6173 6546 6565  history["baseFee
+00016fb0: 5065 7247 6173 225d 290a 2020 2020 2020  PerGas"]).      
+00016fc0: 2020 6173 7365 7274 2069 735f 6c69 7374    assert is_list
+00016fd0: 5f6c 696b 6528 6665 655f 6869 7374 6f72  _like(fee_histor
+00016fe0: 795b 2267 6173 5573 6564 5261 7469 6f22  y["gasUsedRatio"
+00016ff0: 5d29 0a20 2020 2020 2020 2061 7373 6572  ]).        asser
+00017000: 7420 6973 5f69 6e74 6567 6572 2866 6565  t is_integer(fee
+00017010: 5f68 6973 746f 7279 5b22 6f6c 6465 7374  _history["oldest
+00017020: 426c 6f63 6b22 5d29 0a20 2020 2020 2020  Block"]).       
+00017030: 2061 7373 6572 7420 6665 655f 6869 7374   assert fee_hist
+00017040: 6f72 795b 226f 6c64 6573 7442 6c6f 636b  ory["oldestBlock
+00017050: 225d 203e 3d20 300a 2020 2020 2020 2020  "] >= 0.        
+00017060: 6173 7365 7274 2069 735f 6c69 7374 5f6c  assert is_list_l
+00017070: 696b 6528 6665 655f 6869 7374 6f72 795b  ike(fee_history[
+00017080: 2272 6577 6172 6422 5d29 0a20 2020 2020  "reward"]).     
+00017090: 2020 2061 7373 6572 7420 6973 5f6c 6973     assert is_lis
+000170a0: 745f 6c69 6b65 2866 6565 5f68 6973 746f  t_like(fee_histo
+000170b0: 7279 5b22 7265 7761 7264 225d 5b30 5d29  ry["reward"][0])
+000170c0: 0a0a 2020 2020 6465 6620 7465 7374 5f65  ..    def test_e
+000170d0: 7468 5f66 6565 5f68 6973 746f 7279 5f77  th_fee_history_w
+000170e0: 6974 685f 696e 7465 6765 7228 0a20 2020  ith_integer(.   
+000170f0: 2020 2020 2073 656c 662c 2077 333a 2022       self, w3: "
+00017100: 5765 6233 222c 2065 6d70 7479 5f62 6c6f  Web3", empty_blo
+00017110: 636b 3a20 426c 6f63 6b44 6174 610a 2020  ck: BlockData.  
+00017120: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+00017130: 2020 2020 2066 6565 5f68 6973 746f 7279       fee_history
+00017140: 203d 2077 332e 6574 682e 6665 655f 6869   = w3.eth.fee_hi
+00017150: 7374 6f72 7928 312c 2065 6d70 7479 5f62  story(1, empty_b
+00017160: 6c6f 636b 5b22 6e75 6d62 6572 225d 2c20  lock["number"], 
+00017170: 5b35 305d 290a 2020 2020 2020 2020 6173  [50]).        as
+00017180: 7365 7274 2069 735f 6c69 7374 5f6c 696b  sert is_list_lik
+00017190: 6528 6665 655f 6869 7374 6f72 795b 2262  e(fee_history["b
+000171a0: 6173 6546 6565 5065 7247 6173 225d 290a  aseFeePerGas"]).
+000171b0: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+000171c0: 735f 6c69 7374 5f6c 696b 6528 6665 655f  s_list_like(fee_
+000171d0: 6869 7374 6f72 795b 2267 6173 5573 6564  history["gasUsed
+000171e0: 5261 7469 6f22 5d29 0a20 2020 2020 2020  Ratio"]).       
+000171f0: 2061 7373 6572 7420 6973 5f69 6e74 6567   assert is_integ
+00017200: 6572 2866 6565 5f68 6973 746f 7279 5b22  er(fee_history["
+00017210: 6f6c 6465 7374 426c 6f63 6b22 5d29 0a20  oldestBlock"]). 
+00017220: 2020 2020 2020 2061 7373 6572 7420 6665         assert fe
+00017230: 655f 6869 7374 6f72 795b 226f 6c64 6573  e_history["oldes
+00017240: 7442 6c6f 636b 225d 203e 3d20 300a 2020  tBlock"] >= 0.  
+00017250: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+00017260: 6c69 7374 5f6c 696b 6528 6665 655f 6869  list_like(fee_hi
+00017270: 7374 6f72 795b 2272 6577 6172 6422 5d29  story["reward"])
+00017280: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00017290: 6973 5f6c 6973 745f 6c69 6b65 2866 6565  is_list_like(fee
+000172a0: 5f68 6973 746f 7279 5b22 7265 7761 7264  _history["reward
+000172b0: 225d 5b30 5d29 0a0a 2020 2020 6465 6620  "][0])..    def 
+000172c0: 7465 7374 5f65 7468 5f66 6565 5f68 6973  test_eth_fee_his
+000172d0: 746f 7279 5f6e 6f5f 7265 7761 7264 5f70  tory_no_reward_p
+000172e0: 6572 6365 6e74 696c 6573 2873 656c 662c  ercentiles(self,
+000172f0: 2077 333a 2022 5765 6233 2229 202d 3e20   w3: "Web3") -> 
+00017300: 4e6f 6e65 3a0a 2020 2020 2020 2020 6665  None:.        fe
+00017310: 655f 6869 7374 6f72 7920 3d20 7733 2e65  e_history = w3.e
+00017320: 7468 2e66 6565 5f68 6973 746f 7279 2831  th.fee_history(1
+00017330: 2c20 226c 6174 6573 7422 290a 2020 2020  , "latest").    
+00017340: 2020 2020 6173 7365 7274 2069 735f 6c69      assert is_li
+00017350: 7374 5f6c 696b 6528 6665 655f 6869 7374  st_like(fee_hist
+00017360: 6f72 795b 2262 6173 6546 6565 5065 7247  ory["baseFeePerG
+00017370: 6173 225d 290a 2020 2020 2020 2020 6173  as"]).        as
+00017380: 7365 7274 2069 735f 6c69 7374 5f6c 696b  sert is_list_lik
+00017390: 6528 6665 655f 6869 7374 6f72 795b 2267  e(fee_history["g
+000173a0: 6173 5573 6564 5261 7469 6f22 5d29 0a20  asUsedRatio"]). 
+000173b0: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+000173c0: 5f69 6e74 6567 6572 2866 6565 5f68 6973  _integer(fee_his
+000173d0: 746f 7279 5b22 6f6c 6465 7374 426c 6f63  tory["oldestBloc
+000173e0: 6b22 5d29 0a20 2020 2020 2020 2061 7373  k"]).        ass
+000173f0: 6572 7420 6665 655f 6869 7374 6f72 795b  ert fee_history[
+00017400: 226f 6c64 6573 7442 6c6f 636b 225d 203e  "oldestBlock"] >
+00017410: 3d20 300a 0a20 2020 2064 6566 2074 6573  = 0..    def tes
+00017420: 745f 6574 685f 6761 735f 7072 6963 6528  t_eth_gas_price(
+00017430: 7365 6c66 2c20 7733 3a20 2257 6562 3322  self, w3: "Web3"
+00017440: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+00017450: 2020 2067 6173 5f70 7269 6365 203d 2077     gas_price = w
+00017460: 332e 6574 682e 6761 735f 7072 6963 650a  3.eth.gas_price.
+00017470: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+00017480: 735f 696e 7465 6765 7228 6761 735f 7072  s_integer(gas_pr
+00017490: 6963 6529 0a20 2020 2020 2020 2061 7373  ice).        ass
+000174a0: 6572 7420 6761 735f 7072 6963 6520 3e20  ert gas_price > 
+000174b0: 300a 0a20 2020 2064 6566 2074 6573 745f  0..    def test_
+000174c0: 6574 685f 6d61 785f 7072 696f 7269 7479  eth_max_priority
+000174d0: 5f66 6565 2873 656c 662c 2077 333a 2022  _fee(self, w3: "
+000174e0: 5765 6233 2229 202d 3e20 4e6f 6e65 3a0a  Web3") -> None:.
+000174f0: 2020 2020 2020 2020 6d61 785f 7072 696f          max_prio
+00017500: 7269 7479 5f66 6565 203d 2077 332e 6574  rity_fee = w3.et
+00017510: 682e 6d61 785f 7072 696f 7269 7479 5f66  h.max_priority_f
+00017520: 6565 0a20 2020 2020 2020 2061 7373 6572  ee.        asser
+00017530: 7420 6973 5f69 6e74 6567 6572 286d 6178  t is_integer(max
+00017540: 5f70 7269 6f72 6974 795f 6665 6529 0a0a  _priority_fee)..
+00017550: 2020 2020 6465 6620 7465 7374 5f65 7468      def test_eth
+00017560: 5f6d 6178 5f70 7269 6f72 6974 795f 6665  _max_priority_fe
+00017570: 655f 7769 7468 5f66 6565 5f68 6973 746f  e_with_fee_histo
+00017580: 7279 5f63 616c 6375 6c61 7469 6f6e 5f65  ry_calculation_e
+00017590: 7272 6f72 5f64 6963 7428 0a20 2020 2020  rror_dict(.     
+000175a0: 2020 2073 656c 662c 2077 333a 2022 5765     self, w3: "We
+000175b0: 6233 220a 2020 2020 2920 2d3e 204e 6f6e  b3".    ) -> Non
+000175c0: 653a 0a20 2020 2020 2020 2066 6169 6c5f  e:.        fail_
+000175d0: 6d61 785f 7072 696f 5f6d 6964 646c 6577  max_prio_middlew
+000175e0: 6172 6520 3d20 636f 6e73 7472 7563 745f  are = construct_
+000175f0: 6572 726f 725f 6765 6e65 7261 746f 725f  error_generator_
+00017600: 6d69 6464 6c65 7761 7265 280a 2020 2020  middleware(.    
+00017610: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+00017620: 2020 2020 2020 2020 2020 5250 4345 6e64            RPCEnd
+00017630: 706f 696e 7428 2265 7468 5f6d 6178 5072  point("eth_maxPr
+00017640: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
+00017650: 293a 206c 616d 6264 6120 2a5f 3a20 7b0a  ): lambda *_: {.
+00017660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017670: 2020 2020 2265 7272 6f72 223a 207b 0a20      "error": {. 
+00017680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017690: 2020 2020 2020 2022 636f 6465 223a 202d         "code": -
+000176a0: 3332 3630 312c 0a20 2020 2020 2020 2020  32601,.         
+000176b0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000176c0: 6d65 7373 6167 6522 3a20 280a 2020 2020  message": (.    
+000176d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000176e0: 2020 2020 2020 2020 2254 6865 206d 6574          "The met
+000176f0: 686f 6420 6574 685f 6d61 7850 7269 6f72  hod eth_maxPrior
+00017700: 6974 7946 6565 5065 7247 6173 2064 6f65  ityFeePerGas doe
+00017710: 7320 220a 2020 2020 2020 2020 2020 2020  s ".            
+00017720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017730: 226e 6f74 2065 7869 7374 2f69 7320 6e6f  "not exist/is no
+00017740: 7420 6176 6169 6c61 626c 6522 0a20 2020  t available".   
+00017750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017760: 2020 2020 2029 2c0a 2020 2020 2020 2020       ),.        
+00017770: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+00017780: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+00017790: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+000177a0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+000177b0: 7733 2e6d 6964 646c 6577 6172 655f 6f6e  w3.middleware_on
+000177c0: 696f 6e2e 6164 6428 0a20 2020 2020 2020  ion.add(.       
+000177d0: 2020 2020 2066 6169 6c5f 6d61 785f 7072       fail_max_pr
+000177e0: 696f 5f6d 6964 646c 6577 6172 652c 206e  io_middleware, n
+000177f0: 616d 653d 2266 6169 6c5f 6d61 785f 7072  ame="fail_max_pr
+00017800: 696f 5f6d 6964 646c 6577 6172 6522 0a20  io_middleware". 
+00017810: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00017820: 2020 7769 7468 2070 7974 6573 742e 7761    with pytest.wa
+00017830: 726e 7328 0a20 2020 2020 2020 2020 2020  rns(.           
+00017840: 2055 7365 7257 6172 6e69 6e67 2c0a 2020   UserWarning,.  
+00017850: 2020 2020 2020 2020 2020 6d61 7463 683d            match=
+00017860: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00017870: 2020 2254 6865 7265 2077 6173 2061 6e20    "There was an 
+00017880: 6973 7375 6520 7769 7468 2074 6865 206d  issue with the m
+00017890: 6574 686f 6420 6574 685f 6d61 7850 7269  ethod eth_maxPri
+000178a0: 6f72 6974 7946 6565 5065 7247 6173 2e22  orityFeePerGas."
+000178b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000178c0: 2022 2043 616c 6375 6c61 7469 6e67 2075   " Calculating u
+000178d0: 7369 6e67 2065 7468 5f66 6565 4869 7374  sing eth_feeHist
+000178e0: 6f72 792e 220a 2020 2020 2020 2020 2020  ory.".          
+000178f0: 2020 292c 0a20 2020 2020 2020 2029 3a0a    ),.        ):.
+00017900: 2020 2020 2020 2020 2020 2020 7733 2e65              w3.e
+00017910: 7468 2e6d 6178 5f70 7269 6f72 6974 795f  th.max_priority_
+00017920: 6665 650a 0a20 2020 2020 2020 2077 332e  fee..        w3.
+00017930: 6d69 6464 6c65 7761 7265 5f6f 6e69 6f6e  middleware_onion
+00017940: 2e72 656d 6f76 6528 2266 6169 6c5f 6d61  .remove("fail_ma
+00017950: 785f 7072 696f 5f6d 6964 646c 6577 6172  x_prio_middlewar
+00017960: 6522 2920 2023 2063 6c65 616e 2075 700a  e")  # clean up.
+00017970: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
+00017980: 685f 6d61 785f 7072 696f 7269 7479 5f66  h_max_priority_f
+00017990: 6565 5f77 6974 685f 6665 655f 6869 7374  ee_with_fee_hist
+000179a0: 6f72 795f 6361 6c63 756c 6174 696f 6e28  ory_calculation(
+000179b0: 0a20 2020 2020 2020 2073 656c 662c 2077  .        self, w
+000179c0: 333a 2022 5765 6233 220a 2020 2020 2920  3: "Web3".    ) 
+000179d0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+000179e0: 2066 6169 6c5f 6d61 785f 7072 696f 5f6d   fail_max_prio_m
+000179f0: 6964 646c 6577 6172 6520 3d20 636f 6e73  iddleware = cons
+00017a00: 7472 7563 745f 6572 726f 725f 6765 6e65  truct_error_gene
+00017a10: 7261 746f 725f 6d69 6464 6c65 7761 7265  rator_middleware
+00017a20: 280a 2020 2020 2020 2020 2020 2020 7b52  (.            {R
+00017a30: 5043 456e 6470 6f69 6e74 2822 6574 685f  PCEndpoint("eth_
+00017a40: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
+00017a50: 7247 6173 2229 3a20 6c61 6d62 6461 202a  rGas"): lambda *
+00017a60: 5f3a 2022 227d 0a20 2020 2020 2020 2029  _: ""}.        )
+00017a70: 0a20 2020 2020 2020 2077 332e 6d69 6464  .        w3.midd
+00017a80: 6c65 7761 7265 5f6f 6e69 6f6e 2e61 6464  leware_onion.add
+00017a90: 280a 2020 2020 2020 2020 2020 2020 6661  (.            fa
+00017aa0: 696c 5f6d 6178 5f70 7269 6f5f 6d69 6464  il_max_prio_midd
+00017ab0: 6c65 7761 7265 2c20 6e61 6d65 3d22 6661  leware, name="fa
+00017ac0: 696c 5f6d 6178 5f70 7269 6f5f 6d69 6464  il_max_prio_midd
+00017ad0: 6c65 7761 7265 220a 2020 2020 2020 2020  leware".        
+00017ae0: 290a 0a20 2020 2020 2020 2077 6974 6820  )..        with 
+00017af0: 7079 7465 7374 2e77 6172 6e73 280a 2020  pytest.warns(.  
+00017b00: 2020 2020 2020 2020 2020 5573 6572 5761            UserWa
+00017b10: 726e 696e 672c 0a20 2020 2020 2020 2020  rning,.         
+00017b20: 2020 206d 6174 6368 3d28 0a20 2020 2020     match=(.     
+00017b30: 2020 2020 2020 2020 2020 2022 5468 6572             "Ther
+00017b40: 6520 7761 7320 616e 2069 7373 7565 2077  e was an issue w
+00017b50: 6974 6820 7468 6520 6d65 7468 6f64 2065  ith the method e
+00017b60: 7468 5f6d 6178 5072 696f 7269 7479 4665  th_maxPriorityFe
+00017b70: 6550 6572 4761 732e 220a 2020 2020 2020  ePerGas.".      
+00017b80: 2020 2020 2020 2020 2020 2220 4361 6c63            " Calc
+00017b90: 756c 6174 696e 6720 7573 696e 6720 6574  ulating using et
+00017ba0: 685f 6665 6548 6973 746f 7279 2e22 0a20  h_feeHistory.". 
+00017bb0: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
+00017bc0: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
+00017bd0: 2020 2020 206d 6178 5f70 7269 6f72 6974       max_priorit
+00017be0: 795f 6665 6520 3d20 7733 2e65 7468 2e6d  y_fee = w3.eth.m
+00017bf0: 6178 5f70 7269 6f72 6974 795f 6665 650a  ax_priority_fee.
+00017c00: 2020 2020 2020 2020 2020 2020 6173 7365              asse
+00017c10: 7274 2069 735f 696e 7465 6765 7228 6d61  rt is_integer(ma
+00017c20: 785f 7072 696f 7269 7479 5f66 6565 290a  x_priority_fee).
+00017c30: 0a20 2020 2020 2020 2077 332e 6d69 6464  .        w3.midd
+00017c40: 6c65 7761 7265 5f6f 6e69 6f6e 2e72 656d  leware_onion.rem
+00017c50: 6f76 6528 2266 6169 6c5f 6d61 785f 7072  ove("fail_max_pr
+00017c60: 696f 5f6d 6964 646c 6577 6172 6522 2920  io_middleware") 
+00017c70: 2023 2063 6c65 616e 2075 700a 0a20 2020   # clean up..   
+00017c80: 2064 6566 2074 6573 745f 6574 685f 6163   def test_eth_ac
+00017c90: 636f 756e 7473 2873 656c 662c 2077 333a  counts(self, w3:
+00017ca0: 2022 5765 6233 2229 202d 3e20 4e6f 6e65   "Web3") -> None
+00017cb0: 3a0a 2020 2020 2020 2020 6163 636f 756e  :.        accoun
+00017cc0: 7473 203d 2077 332e 6574 682e 6163 636f  ts = w3.eth.acco
+00017cd0: 756e 7473 0a20 2020 2020 2020 2061 7373  unts.        ass
+00017ce0: 6572 7420 6973 5f6c 6973 745f 6c69 6b65  ert is_list_like
+00017cf0: 2861 6363 6f75 6e74 7329 0a20 2020 2020  (accounts).     
+00017d00: 2020 2061 7373 6572 7420 6c65 6e28 6163     assert len(ac
+00017d10: 636f 756e 7473 2920 213d 2030 0a20 2020  counts) != 0.   
+00017d20: 2020 2020 2061 7373 6572 7420 616c 6c28       assert all(
+00017d30: 2869 735f 6368 6563 6b73 756d 5f61 6464  (is_checksum_add
+00017d40: 7265 7373 2861 6363 6f75 6e74 2920 666f  ress(account) fo
+00017d50: 7220 6163 636f 756e 7420 696e 2061 6363  r account in acc
+00017d60: 6f75 6e74 7329 290a 2020 2020 2020 2020  ounts)).        
+00017d70: 6173 7365 7274 2077 332e 6574 682e 636f  assert w3.eth.co
+00017d80: 696e 6261 7365 2069 6e20 6163 636f 756e  inbase in accoun
+00017d90: 7473 0a0a 2020 2020 6465 6620 7465 7374  ts..    def test
+00017da0: 5f65 7468 5f62 6c6f 636b 5f6e 756d 6265  _eth_block_numbe
+00017db0: 7228 7365 6c66 2c20 7733 3a20 2257 6562  r(self, w3: "Web
+00017dc0: 3322 2920 2d3e 204e 6f6e 653a 0a20 2020  3") -> None:.   
+00017dd0: 2020 2020 2062 6c6f 636b 5f6e 756d 6265       block_numbe
+00017de0: 7220 3d20 7733 2e65 7468 2e62 6c6f 636b  r = w3.eth.block
+00017df0: 5f6e 756d 6265 720a 2020 2020 2020 2020  _number.        
+00017e00: 6173 7365 7274 2069 735f 696e 7465 6765  assert is_intege
+00017e10: 7228 626c 6f63 6b5f 6e75 6d62 6572 290a  r(block_number).
+00017e20: 2020 2020 2020 2020 6173 7365 7274 2062          assert b
+00017e30: 6c6f 636b 5f6e 756d 6265 7220 3e3d 2030  lock_number >= 0
+00017e40: 0a0a 2020 2020 6465 6620 7465 7374 5f65  ..    def test_e
+00017e50: 7468 5f67 6574 5f62 6c6f 636b 5f6e 756d  th_get_block_num
+00017e60: 6265 7228 7365 6c66 2c20 7733 3a20 2257  ber(self, w3: "W
+00017e70: 6562 3322 2920 2d3e 204e 6f6e 653a 0a20  eb3") -> None:. 
+00017e80: 2020 2020 2020 2062 6c6f 636b 5f6e 756d         block_num
+00017e90: 6265 7220 3d20 7733 2e65 7468 2e67 6574  ber = w3.eth.get
+00017ea0: 5f62 6c6f 636b 5f6e 756d 6265 7228 290a  _block_number().
+00017eb0: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+00017ec0: 735f 696e 7465 6765 7228 626c 6f63 6b5f  s_integer(block_
+00017ed0: 6e75 6d62 6572 290a 2020 2020 2020 2020  number).        
+00017ee0: 6173 7365 7274 2062 6c6f 636b 5f6e 756d  assert block_num
+00017ef0: 6265 7220 3e3d 2030 0a0a 2020 2020 6465  ber >= 0..    de
+00017f00: 6620 7465 7374 5f65 7468 5f67 6574 5f62  f test_eth_get_b
+00017f10: 616c 616e 6365 2873 656c 662c 2077 333a  alance(self, w3:
+00017f20: 2022 5765 6233 2229 202d 3e20 4e6f 6e65   "Web3") -> None
+00017f30: 3a0a 2020 2020 2020 2020 636f 696e 6261  :.        coinba
+00017f40: 7365 203d 2077 332e 6574 682e 636f 696e  se = w3.eth.coin
+00017f50: 6261 7365 0a0a 2020 2020 2020 2020 7769  base..        wi
+00017f60: 7468 2070 7974 6573 742e 7261 6973 6573  th pytest.raises
+00017f70: 2849 6e76 616c 6964 4164 6472 6573 7329  (InvalidAddress)
+00017f80: 3a0a 2020 2020 2020 2020 2020 2020 7733  :.            w3
+00017f90: 2e65 7468 2e67 6574 5f62 616c 616e 6365  .eth.get_balance
+00017fa0: 2843 6865 636b 7375 6d41 6464 7265 7373  (ChecksumAddress
+00017fb0: 2848 6578 4164 6472 6573 7328 4865 7853  (HexAddress(HexS
+00017fc0: 7472 2863 6f69 6e62 6173 652e 6c6f 7765  tr(coinbase.lowe
+00017fd0: 7228 2929 2929 290a 0a20 2020 2020 2020  r()))))..       
+00017fe0: 2062 616c 616e 6365 203d 2077 332e 6574   balance = w3.et
+00017ff0: 682e 6765 745f 6261 6c61 6e63 6528 636f  h.get_balance(co
+00018000: 696e 6261 7365 290a 0a20 2020 2020 2020  inbase)..       
+00018010: 2061 7373 6572 7420 6973 5f69 6e74 6567   assert is_integ
+00018020: 6572 2862 616c 616e 6365 290a 2020 2020  er(balance).    
+00018030: 2020 2020 6173 7365 7274 2062 616c 616e      assert balan
+00018040: 6365 203e 3d20 300a 0a20 2020 2064 6566  ce >= 0..    def
+00018050: 2074 6573 745f 6574 685f 6765 745f 6261   test_eth_get_ba
+00018060: 6c61 6e63 655f 7769 7468 5f62 6c6f 636b  lance_with_block
+00018070: 5f69 6465 6e74 6966 6965 7228 7365 6c66  _identifier(self
+00018080: 2c20 7733 3a20 2257 6562 3322 2920 2d3e  , w3: "Web3") ->
+00018090: 204e 6f6e 653a 0a20 2020 2020 2020 206d   None:.        m
+000180a0: 696e 6572 5f61 6464 7265 7373 203d 2077  iner_address = w
+000180b0: 332e 6574 682e 6765 745f 626c 6f63 6b28  3.eth.get_block(
+000180c0: 3129 5b22 6d69 6e65 7222 5d0a 2020 2020  1)["miner"].    
+000180d0: 2020 2020 6765 6e65 7369 735f 6261 6c61      genesis_bala
+000180e0: 6e63 6520 3d20 7733 2e65 7468 2e67 6574  nce = w3.eth.get
+000180f0: 5f62 616c 616e 6365 286d 696e 6572 5f61  _balance(miner_a
+00018100: 6464 7265 7373 2c20 3029 0a20 2020 2020  ddress, 0).     
+00018110: 2020 206c 6174 6572 5f62 616c 616e 6365     later_balance
+00018120: 203d 2077 332e 6574 682e 6765 745f 6261   = w3.eth.get_ba
+00018130: 6c61 6e63 6528 6d69 6e65 725f 6164 6472  lance(miner_addr
+00018140: 6573 732c 2031 290a 0a20 2020 2020 2020  ess, 1)..       
+00018150: 2061 7373 6572 7420 6973 5f69 6e74 6567   assert is_integ
+00018160: 6572 2867 656e 6573 6973 5f62 616c 616e  er(genesis_balan
+00018170: 6365 290a 2020 2020 2020 2020 6173 7365  ce).        asse
+00018180: 7274 2069 735f 696e 7465 6765 7228 6c61  rt is_integer(la
+00018190: 7465 725f 6261 6c61 6e63 6529 0a20 2020  ter_balance).   
+000181a0: 2020 2020 2061 7373 6572 7420 6c61 7465       assert late
+000181b0: 725f 6261 6c61 6e63 6520 3e20 6765 6e65  r_balance > gene
+000181c0: 7369 735f 6261 6c61 6e63 650a 0a20 2020  sis_balance..   
+000181d0: 2040 7079 7465 7374 2e6d 6172 6b2e 7061   @pytest.mark.pa
+000181e0: 7261 6d65 7472 697a 6528 0a20 2020 2020  rametrize(.     
+000181f0: 2020 2022 6164 6472 6573 732c 2065 7870     "address, exp
+00018200: 6563 745f 7375 6363 6573 7322 2c0a 2020  ect_success",.  
+00018210: 2020 2020 2020 5b28 2274 6573 742d 6164        [("test-ad
+00018220: 6472 6573 732e 6574 6822 2c20 5472 7565  dress.eth", True
+00018230: 292c 2028 226e 6f74 2d61 6e2d 6164 6472  ), ("not-an-addr
+00018240: 6573 732e 6574 6822 2c20 4661 6c73 6529  ess.eth", False)
+00018250: 5d2c 0a20 2020 2029 0a20 2020 2064 6566  ],.    ).    def
+00018260: 2074 6573 745f 6574 685f 6765 745f 6261   test_eth_get_ba
+00018270: 6c61 6e63 655f 7769 7468 5f65 6e73 5f6e  lance_with_ens_n
+00018280: 616d 6528 0a20 2020 2020 2020 2073 656c  ame(.        sel
+00018290: 662c 2077 333a 2022 5765 6233 222c 2061  f, w3: "Web3", a
+000182a0: 6464 7265 7373 3a20 4368 6563 6b73 756d  ddress: Checksum
+000182b0: 4164 6472 6573 732c 2065 7870 6563 745f  Address, expect_
+000182c0: 7375 6363 6573 733a 2062 6f6f 6c0a 2020  success: bool.  
+000182d0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+000182e0: 2020 2020 2077 6974 6820 656e 735f 6164       with ens_ad
+000182f0: 6472 6573 7365 7328 7733 2c20 7b22 7465  dresses(w3, {"te
+00018300: 7374 2d61 6464 7265 7373 2e65 7468 223a  st-address.eth":
+00018310: 2077 332e 6574 682e 6163 636f 756e 7473   w3.eth.accounts
+00018320: 5b30 5d7d 293a 0a20 2020 2020 2020 2020  [0]}):.         
+00018330: 2020 2069 6620 6578 7065 6374 5f73 7563     if expect_suc
+00018340: 6365 7373 3a0a 2020 2020 2020 2020 2020  cess:.          
+00018350: 2020 2020 2020 6261 6c61 6e63 6520 3d20        balance = 
+00018360: 7733 2e65 7468 2e67 6574 5f62 616c 616e  w3.eth.get_balan
+00018370: 6365 2861 6464 7265 7373 290a 2020 2020  ce(address).    
+00018380: 2020 2020 2020 2020 2020 2020 6173 7365              asse
+00018390: 7274 2069 735f 696e 7465 6765 7228 6261  rt is_integer(ba
+000183a0: 6c61 6e63 6529 0a20 2020 2020 2020 2020  lance).         
+000183b0: 2020 2020 2020 2061 7373 6572 7420 6261         assert ba
+000183c0: 6c61 6e63 6520 3e3d 2030 0a20 2020 2020  lance >= 0.     
+000183d0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000183e0: 2020 2020 2020 2020 2020 2020 2077 6974               wit
+000183f0: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
+00018400: 4e61 6d65 4e6f 7446 6f75 6e64 293a 0a20  NameNotFound):. 
+00018410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018420: 2020 2077 332e 6574 682e 6765 745f 6261     w3.eth.get_ba
+00018430: 6c61 6e63 6528 6164 6472 6573 7329 0a0a  lance(address)..
+00018440: 2020 2020 6465 6620 7465 7374 5f65 7468      def test_eth
+00018450: 5f67 6574 5f73 746f 7261 6765 5f61 7428  _get_storage_at(
+00018460: 7365 6c66 2c20 7733 3a20 2257 6562 3322  self, w3: "Web3"
+00018470: 2c20 7374 6f72 6167 655f 636f 6e74 7261  , storage_contra
+00018480: 6374 3a20 2243 6f6e 7472 6163 7422 2920  ct: "Contract") 
+00018490: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+000184a0: 2073 746f 7261 6765 5f63 6f6e 7472 6163   storage_contrac
+000184b0: 745f 6164 6472 6573 7320 3d20 7374 6f72  t_address = stor
+000184c0: 6167 655f 636f 6e74 7261 6374 2e61 6464  age_contract.add
+000184d0: 7265 7373 0a0a 2020 2020 2020 2020 736c  ress..        sl
+000184e0: 6f74 5f30 203d 2077 332e 6574 682e 6765  ot_0 = w3.eth.ge
+000184f0: 745f 7374 6f72 6167 655f 6174 2873 746f  t_storage_at(sto
+00018500: 7261 6765 5f63 6f6e 7472 6163 745f 6164  rage_contract_ad
+00018510: 6472 6573 732c 2030 290a 2020 2020 2020  dress, 0).      
+00018520: 2020 6173 7365 7274 2073 6c6f 745f 3020    assert slot_0 
+00018530: 3d3d 2048 6578 4279 7465 7328 6622 3078  == HexBytes(f"0x
+00018540: 7b27 3030 2720 2a20 3332 7d22 290a 0a20  {'00' * 32}").. 
+00018550: 2020 2020 2020 2073 6c6f 745f 3120 3d20         slot_1 = 
+00018560: 7733 2e65 7468 2e67 6574 5f73 746f 7261  w3.eth.get_stora
+00018570: 6765 5f61 7428 7374 6f72 6167 655f 636f  ge_at(storage_co
+00018580: 6e74 7261 6374 5f61 6464 7265 7373 2c20  ntract_address, 
+00018590: 3129 0a20 2020 2020 2020 2061 7373 6572  1).        asser
+000185a0: 7420 736c 6f74 5f31 203d 3d20 4865 7842  t slot_1 == HexB
+000185b0: 7974 6573 2866 2230 787b 2730 3027 202a  ytes(f"0x{'00' *
+000185c0: 2033 317d 3031 2229 0a0a 2020 2020 2020   31}01")..      
+000185d0: 2020 736c 6f74 5f32 203d 2077 332e 6574    slot_2 = w3.et
+000185e0: 682e 6765 745f 7374 6f72 6167 655f 6174  h.get_storage_at
+000185f0: 2873 746f 7261 6765 5f63 6f6e 7472 6163  (storage_contrac
+00018600: 745f 6164 6472 6573 732c 2032 290a 2020  t_address, 2).  
+00018610: 2020 2020 2020 6173 7365 7274 2073 6c6f        assert slo
+00018620: 745f 3220 3d3d 2048 6578 4279 7465 7328  t_2 == HexBytes(
+00018630: 6622 3078 7b27 3030 2720 2a20 3331 7d30  f"0x{'00' * 31}0
+00018640: 3222 290a 0a20 2020 2020 2020 2073 6c6f  2")..        slo
+00018650: 745f 3320 3d20 7733 2e65 7468 2e67 6574  t_3 = w3.eth.get
+00018660: 5f73 746f 7261 6765 5f61 7428 7374 6f72  _storage_at(stor
+00018670: 6167 655f 636f 6e74 7261 6374 5f61 6464  age_contract_add
+00018680: 7265 7373 2c20 3329 0a20 2020 2020 2020  ress, 3).       
+00018690: 2061 7373 6572 7420 736c 6f74 5f33 203d   assert slot_3 =
+000186a0: 3d20 4865 7842 7974 6573 280a 2020 2020  = HexBytes(.    
+000186b0: 2020 2020 2020 2020 2230 7837 3436 3837          "0x74687
+000186c0: 3236 3536 3530 3030 3030 3030 3030 3030  2656500000000000
+000186d0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+000186e0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+000186f0: 3030 3030 3030 3030 3030 6122 0a20 2020  0000000000a".   
+00018700: 2020 2020 2029 0a20 2020 2020 2020 2061       ).        a
+00018710: 7373 6572 7420 6279 7465 7328 736c 6f74  ssert bytes(slot
+00018720: 5f33 5b3a 355d 2920 3d3d 2062 2274 6872  _3[:5]) == b"thr
+00018730: 6565 220a 0a20 2020 2020 2020 2073 6c6f  ee"..        slo
+00018740: 745f 3420 3d20 7733 2e65 7468 2e67 6574  t_4 = w3.eth.get
+00018750: 5f73 746f 7261 6765 5f61 7428 7374 6f72  _storage_at(stor
+00018760: 6167 655f 636f 6e74 7261 6374 5f61 6464  age_contract_add
+00018770: 7265 7373 2c20 3429 0a20 2020 2020 2020  ress, 4).       
+00018780: 2061 7373 6572 7420 736c 6f74 5f34 203d   assert slot_4 =
+00018790: 3d20 4865 7842 7974 6573 280a 2020 2020  = HexBytes(.    
+000187a0: 2020 2020 2020 2020 2230 7836 3636 6637          "0x666f7
+000187b0: 3537 3230 3030 3030 3030 3030 3030 3030  5720000000000000
+000187c0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+000187d0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+000187e0: 3030 3030 3030 3030 3030 3822 0a20 2020  00000000008".   
+000187f0: 2020 2020 2029 0a20 2020 2020 2020 2061       ).        a
+00018800: 7373 6572 7420 6279 7465 7328 736c 6f74  ssert bytes(slot
+00018810: 5f34 5b3a 345d 2920 3d3d 2062 2266 6f75  _4[:4]) == b"fou
+00018820: 7222 0a0a 2020 2020 6465 6620 7465 7374  r"..    def test
+00018830: 5f65 7468 5f67 6574 5f73 746f 7261 6765  _eth_get_storage
+00018840: 5f61 745f 656e 735f 6e61 6d65 280a 2020  _at_ens_name(.  
+00018850: 2020 2020 2020 7365 6c66 2c20 7733 3a20        self, w3: 
+00018860: 2257 6562 3322 2c20 7374 6f72 6167 655f  "Web3", storage_
+00018870: 636f 6e74 7261 6374 3a20 2243 6f6e 7472  contract: "Contr
+00018880: 6163 7422 0a20 2020 2029 202d 3e20 4e6f  act".    ) -> No
+00018890: 6e65 3a0a 2020 2020 2020 2020 7769 7468  ne:.        with
+000188a0: 2065 6e73 5f61 6464 7265 7373 6573 2877   ens_addresses(w
+000188b0: 332c 207b 2273 746f 7261 6765 2e65 7468  3, {"storage.eth
+000188c0: 223a 2073 746f 7261 6765 5f63 6f6e 7472  ": storage_contr
+000188d0: 6163 742e 6164 6472 6573 737d 293a 0a20  act.address}):. 
+000188e0: 2020 2020 2020 2020 2020 2073 746f 7261             stora
+000188f0: 6765 203d 2077 332e 6574 682e 6765 745f  ge = w3.eth.get_
+00018900: 7374 6f72 6167 655f 6174 2845 4e53 2822  storage_at(ENS("
+00018910: 7374 6f72 6167 652e 6574 6822 292c 2031  storage.eth"), 1
+00018920: 290a 2020 2020 2020 2020 2020 2020 6173  ).            as
+00018930: 7365 7274 2073 746f 7261 6765 203d 3d20  sert storage == 
+00018940: 4865 7842 7974 6573 2866 2230 787b 2730  HexBytes(f"0x{'0
+00018950: 3027 202a 2033 317d 3031 2229 0a0a 2020  0' * 31}01")..  
+00018960: 2020 6465 6620 7465 7374 5f65 7468 5f67    def test_eth_g
+00018970: 6574 5f73 746f 7261 6765 5f61 745f 696e  et_storage_at_in
+00018980: 7661 6c69 645f 6164 6472 6573 7328 7365  valid_address(se
+00018990: 6c66 2c20 7733 3a20 2257 6562 3322 2920  lf, w3: "Web3") 
+000189a0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+000189b0: 2063 6f69 6e62 6173 6520 3d20 7733 2e65   coinbase = w3.e
+000189c0: 7468 2e63 6f69 6e62 6173 650a 2020 2020  th.coinbase.    
+000189d0: 2020 2020 7769 7468 2070 7974 6573 742e      with pytest.
+000189e0: 7261 6973 6573 2849 6e76 616c 6964 4164  raises(InvalidAd
+000189f0: 6472 6573 7329 3a0a 2020 2020 2020 2020  dress):.        
+00018a00: 2020 2020 7733 2e65 7468 2e67 6574 5f73      w3.eth.get_s
+00018a10: 746f 7261 6765 5f61 7428 0a20 2020 2020  torage_at(.     
+00018a20: 2020 2020 2020 2020 2020 2043 6865 636b             Check
+00018a30: 7375 6d41 6464 7265 7373 2848 6578 4164  sumAddress(HexAd
+00018a40: 6472 6573 7328 4865 7853 7472 2863 6f69  dress(HexStr(coi
+00018a50: 6e62 6173 652e 6c6f 7765 7228 2929 2929  nbase.lower())))
+00018a60: 2c20 300a 2020 2020 2020 2020 2020 2020  , 0.            
+00018a70: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+00018a80: 6574 685f 6765 745f 7472 616e 7361 6374  eth_get_transact
+00018a90: 696f 6e5f 636f 756e 7428 0a20 2020 2020  ion_count(.     
+00018aa0: 2020 2073 656c 662c 2077 333a 2022 5765     self, w3: "We
+00018ab0: 6233 222c 2075 6e6c 6f63 6b65 645f 6163  b3", unlocked_ac
+00018ac0: 636f 756e 745f 6475 616c 5f74 7970 653a  count_dual_type:
+00018ad0: 2043 6865 636b 7375 6d41 6464 7265 7373   ChecksumAddress
+00018ae0: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+00018af0: 2020 2020 2020 2020 7472 616e 7361 6374          transact
+00018b00: 696f 6e5f 636f 756e 7420 3d20 7733 2e65  ion_count = w3.e
+00018b10: 7468 2e67 6574 5f74 7261 6e73 6163 7469  th.get_transacti
+00018b20: 6f6e 5f63 6f75 6e74 2875 6e6c 6f63 6b65  on_count(unlocke
+00018b30: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
+00018b40: 7970 6529 0a20 2020 2020 2020 2061 7373  ype).        ass
+00018b50: 6572 7420 6973 5f69 6e74 6567 6572 2874  ert is_integer(t
+00018b60: 7261 6e73 6163 7469 6f6e 5f63 6f75 6e74  ransaction_count
+00018b70: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+00018b80: 2074 7261 6e73 6163 7469 6f6e 5f63 6f75   transaction_cou
+00018b90: 6e74 203e 3d20 300a 0a20 2020 2064 6566  nt >= 0..    def
+00018ba0: 2074 6573 745f 6574 685f 6765 745f 7472   test_eth_get_tr
+00018bb0: 616e 7361 6374 696f 6e5f 636f 756e 745f  ansaction_count_
+00018bc0: 656e 735f 6e61 6d65 280a 2020 2020 2020  ens_name(.      
+00018bd0: 2020 7365 6c66 2c20 7733 3a20 2257 6562    self, w3: "Web
+00018be0: 3322 2c20 756e 6c6f 636b 6564 5f61 6363  3", unlocked_acc
+00018bf0: 6f75 6e74 5f64 7561 6c5f 7479 7065 3a20  ount_dual_type: 
+00018c00: 4368 6563 6b73 756d 4164 6472 6573 730a  ChecksumAddress.
+00018c10: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+00018c20: 2020 2020 2020 2077 6974 6820 656e 735f         with ens_
+00018c30: 6164 6472 6573 7365 7328 0a20 2020 2020  addresses(.     
+00018c40: 2020 2020 2020 2077 332c 207b 2275 6e6c         w3, {"unl
+00018c50: 6f63 6b65 642d 6163 6374 2d64 7561 6c2d  ocked-acct-dual-
+00018c60: 7479 7065 2e65 7468 223a 2075 6e6c 6f63  type.eth": unloc
+00018c70: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+00018c80: 5f74 7970 657d 0a20 2020 2020 2020 2029  _type}.        )
+00018c90: 3a0a 2020 2020 2020 2020 2020 2020 7472  :.            tr
+00018ca0: 616e 7361 6374 696f 6e5f 636f 756e 7420  ansaction_count 
+00018cb0: 3d20 7733 2e65 7468 2e67 6574 5f74 7261  = w3.eth.get_tra
+00018cc0: 6e73 6163 7469 6f6e 5f63 6f75 6e74 280a  nsaction_count(.
+00018cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018ce0: 454e 5328 2275 6e6c 6f63 6b65 642d 6163  ENS("unlocked-ac
+00018cf0: 6374 2d64 7561 6c2d 7479 7065 2e65 7468  ct-dual-type.eth
+00018d00: 2229 0a20 2020 2020 2020 2020 2020 2029  ").            )
+00018d10: 0a20 2020 2020 2020 2020 2020 2061 7373  .            ass
+00018d20: 6572 7420 6973 5f69 6e74 6567 6572 2874  ert is_integer(t
+00018d30: 7261 6e73 6163 7469 6f6e 5f63 6f75 6e74  ransaction_count
+00018d40: 290a 2020 2020 2020 2020 2020 2020 6173  ).            as
+00018d50: 7365 7274 2074 7261 6e73 6163 7469 6f6e  sert transaction
+00018d60: 5f63 6f75 6e74 203e 3d20 300a 0a20 2020  _count >= 0..   
+00018d70: 2064 6566 2074 6573 745f 6574 685f 6765   def test_eth_ge
+00018d80: 745f 7472 616e 7361 6374 696f 6e5f 636f  t_transaction_co
+00018d90: 756e 745f 696e 7661 6c69 645f 6164 6472  unt_invalid_addr
+00018da0: 6573 7328 7365 6c66 2c20 7733 3a20 2257  ess(self, w3: "W
+00018db0: 6562 3322 2920 2d3e 204e 6f6e 653a 0a20  eb3") -> None:. 
+00018dc0: 2020 2020 2020 2063 6f69 6e62 6173 6520         coinbase 
+00018dd0: 3d20 7733 2e65 7468 2e63 6f69 6e62 6173  = w3.eth.coinbas
+00018de0: 650a 2020 2020 2020 2020 7769 7468 2070  e.        with p
+00018df0: 7974 6573 742e 7261 6973 6573 2849 6e76  ytest.raises(Inv
+00018e00: 616c 6964 4164 6472 6573 7329 3a0a 2020  alidAddress):.  
+00018e10: 2020 2020 2020 2020 2020 7733 2e65 7468            w3.eth
+00018e20: 2e67 6574 5f74 7261 6e73 6163 7469 6f6e  .get_transaction
+00018e30: 5f63 6f75 6e74 280a 2020 2020 2020 2020  _count(.        
+00018e40: 2020 2020 2020 2020 4368 6563 6b73 756d          Checksum
+00018e50: 4164 6472 6573 7328 4865 7841 6464 7265  Address(HexAddre
+00018e60: 7373 2848 6578 5374 7228 636f 696e 6261  ss(HexStr(coinba
+00018e70: 7365 2e6c 6f77 6572 2829 2929 290a 2020  se.lower()))).  
+00018e80: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
+00018e90: 2064 6566 2074 6573 745f 6574 685f 6765   def test_eth_ge
+00018ea0: 7442 6c6f 636b 5472 616e 7361 6374 696f  tBlockTransactio
+00018eb0: 6e43 6f75 6e74 4279 4861 7368 5f65 6d70  nCountByHash_emp
+00018ec0: 7479 5f62 6c6f 636b 280a 2020 2020 2020  ty_block(.      
+00018ed0: 2020 7365 6c66 2c20 7733 3a20 2257 6562    self, w3: "Web
+00018ee0: 3322 2c20 656d 7074 795f 626c 6f63 6b3a  3", empty_block:
+00018ef0: 2042 6c6f 636b 4461 7461 0a20 2020 2029   BlockData.    )
+00018f00: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+00018f10: 2020 7472 616e 7361 6374 696f 6e5f 636f    transaction_co
+00018f20: 756e 7420 3d20 7733 2e65 7468 2e67 6574  unt = w3.eth.get
+00018f30: 5f62 6c6f 636b 5f74 7261 6e73 6163 7469  _block_transacti
+00018f40: 6f6e 5f63 6f75 6e74 2865 6d70 7479 5f62  on_count(empty_b
+00018f50: 6c6f 636b 5b22 6861 7368 225d 290a 0a20  lock["hash"]).. 
+00018f60: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+00018f70: 5f69 6e74 6567 6572 2874 7261 6e73 6163  _integer(transac
+00018f80: 7469 6f6e 5f63 6f75 6e74 290a 2020 2020  tion_count).    
+00018f90: 2020 2020 6173 7365 7274 2074 7261 6e73      assert trans
+00018fa0: 6163 7469 6f6e 5f63 6f75 6e74 203d 3d20  action_count == 
+00018fb0: 300a 0a20 2020 2064 6566 2074 6573 745f  0..    def test_
+00018fc0: 6574 685f 6765 7442 6c6f 636b 5472 616e  eth_getBlockTran
+00018fd0: 7361 6374 696f 6e43 6f75 6e74 4279 4e75  sactionCountByNu
+00018fe0: 6d62 6572 5f65 6d70 7479 5f62 6c6f 636b  mber_empty_block
+00018ff0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+00019000: 7733 3a20 2257 6562 3322 2c20 656d 7074  w3: "Web3", empt
+00019010: 795f 626c 6f63 6b3a 2042 6c6f 636b 4461  y_block: BlockDa
+00019020: 7461 0a20 2020 2029 202d 3e20 4e6f 6e65  ta.    ) -> None
+00019030: 3a0a 2020 2020 2020 2020 7472 616e 7361  :.        transa
+00019040: 6374 696f 6e5f 636f 756e 7420 3d20 7733  ction_count = w3
+00019050: 2e65 7468 2e67 6574 5f62 6c6f 636b 5f74  .eth.get_block_t
+00019060: 7261 6e73 6163 7469 6f6e 5f63 6f75 6e74  ransaction_count
+00019070: 2865 6d70 7479 5f62 6c6f 636b 5b22 6e75  (empty_block["nu
+00019080: 6d62 6572 225d 290a 0a20 2020 2020 2020  mber"])..       
+00019090: 2061 7373 6572 7420 6973 5f69 6e74 6567   assert is_integ
+000190a0: 6572 2874 7261 6e73 6163 7469 6f6e 5f63  er(transaction_c
+000190b0: 6f75 6e74 290a 2020 2020 2020 2020 6173  ount).        as
+000190c0: 7365 7274 2074 7261 6e73 6163 7469 6f6e  sert transaction
+000190d0: 5f63 6f75 6e74 203d 3d20 300a 0a20 2020  _count == 0..   
+000190e0: 2064 6566 2074 6573 745f 6574 685f 6765   def test_eth_ge
+000190f0: 7442 6c6f 636b 5472 616e 7361 6374 696f  tBlockTransactio
+00019100: 6e43 6f75 6e74 4279 4861 7368 5f62 6c6f  nCountByHash_blo
+00019110: 636b 5f77 6974 685f 7478 6e28 0a20 2020  ck_with_txn(.   
+00019120: 2020 2020 2073 656c 662c 2077 333a 2022       self, w3: "
+00019130: 5765 6233 222c 2062 6c6f 636b 5f77 6974  Web3", block_wit
+00019140: 685f 7478 6e3a 2042 6c6f 636b 4461 7461  h_txn: BlockData
+00019150: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+00019160: 2020 2020 2020 2020 7472 616e 7361 6374          transact
+00019170: 696f 6e5f 636f 756e 7420 3d20 7733 2e65  ion_count = w3.e
+00019180: 7468 2e67 6574 5f62 6c6f 636b 5f74 7261  th.get_block_tra
+00019190: 6e73 6163 7469 6f6e 5f63 6f75 6e74 2862  nsaction_count(b
+000191a0: 6c6f 636b 5f77 6974 685f 7478 6e5b 2268  lock_with_txn["h
+000191b0: 6173 6822 5d29 0a0a 2020 2020 2020 2020  ash"])..        
+000191c0: 6173 7365 7274 2069 735f 696e 7465 6765  assert is_intege
+000191d0: 7228 7472 616e 7361 6374 696f 6e5f 636f  r(transaction_co
+000191e0: 756e 7429 0a20 2020 2020 2020 2061 7373  unt).        ass
+000191f0: 6572 7420 7472 616e 7361 6374 696f 6e5f  ert transaction_
+00019200: 636f 756e 7420 3e3d 2031 0a0a 2020 2020  count >= 1..    
+00019210: 6465 6620 7465 7374 5f65 7468 5f67 6574  def test_eth_get
+00019220: 426c 6f63 6b54 7261 6e73 6163 7469 6f6e  BlockTransaction
+00019230: 436f 756e 7442 794e 756d 6265 725f 626c  CountByNumber_bl
+00019240: 6f63 6b5f 7769 7468 5f74 786e 280a 2020  ock_with_txn(.  
+00019250: 2020 2020 2020 7365 6c66 2c20 7733 3a20        self, w3: 
+00019260: 2257 6562 3322 2c20 626c 6f63 6b5f 7769  "Web3", block_wi
+00019270: 7468 5f74 786e 3a20 426c 6f63 6b44 6174  th_txn: BlockDat
+00019280: 610a 2020 2020 2920 2d3e 204e 6f6e 653a  a.    ) -> None:
+00019290: 0a20 2020 2020 2020 2074 7261 6e73 6163  .        transac
+000192a0: 7469 6f6e 5f63 6f75 6e74 203d 2077 332e  tion_count = w3.
+000192b0: 6574 682e 6765 745f 626c 6f63 6b5f 7472  eth.get_block_tr
+000192c0: 616e 7361 6374 696f 6e5f 636f 756e 7428  ansaction_count(
+000192d0: 626c 6f63 6b5f 7769 7468 5f74 786e 5b22  block_with_txn["
+000192e0: 6e75 6d62 6572 225d 290a 0a20 2020 2020  number"])..     
+000192f0: 2020 2061 7373 6572 7420 6973 5f69 6e74     assert is_int
+00019300: 6567 6572 2874 7261 6e73 6163 7469 6f6e  eger(transaction
+00019310: 5f63 6f75 6e74 290a 2020 2020 2020 2020  _count).        
+00019320: 6173 7365 7274 2074 7261 6e73 6163 7469  assert transacti
+00019330: 6f6e 5f63 6f75 6e74 203e 3d20 310a 0a20  on_count >= 1.. 
+00019340: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
+00019350: 6765 7455 6e63 6c65 436f 756e 7442 7942  getUncleCountByB
+00019360: 6c6f 636b 4861 7368 280a 2020 2020 2020  lockHash(.      
+00019370: 2020 7365 6c66 2c20 7733 3a20 2257 6562    self, w3: "Web
+00019380: 3322 2c20 656d 7074 795f 626c 6f63 6b3a  3", empty_block:
+00019390: 2042 6c6f 636b 4461 7461 0a20 2020 2029   BlockData.    )
+000193a0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+000193b0: 2020 756e 636c 655f 636f 756e 7420 3d20    uncle_count = 
+000193c0: 7733 2e65 7468 2e67 6574 5f75 6e63 6c65  w3.eth.get_uncle
+000193d0: 5f63 6f75 6e74 2865 6d70 7479 5f62 6c6f  _count(empty_blo
+000193e0: 636b 5b22 6861 7368 225d 290a 0a20 2020  ck["hash"])..   
+000193f0: 2020 2020 2061 7373 6572 7420 6973 5f69       assert is_i
+00019400: 6e74 6567 6572 2875 6e63 6c65 5f63 6f75  nteger(uncle_cou
+00019410: 6e74 290a 2020 2020 2020 2020 6173 7365  nt).        asse
+00019420: 7274 2075 6e63 6c65 5f63 6f75 6e74 203d  rt uncle_count =
+00019430: 3d20 300a 0a20 2020 2064 6566 2074 6573  = 0..    def tes
+00019440: 745f 6574 685f 6765 7455 6e63 6c65 436f  t_eth_getUncleCo
+00019450: 756e 7442 7942 6c6f 636b 4e75 6d62 6572  untByBlockNumber
+00019460: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+00019470: 7733 3a20 2257 6562 3322 2c20 656d 7074  w3: "Web3", empt
+00019480: 795f 626c 6f63 6b3a 2042 6c6f 636b 4461  y_block: BlockDa
+00019490: 7461 0a20 2020 2029 202d 3e20 4e6f 6e65  ta.    ) -> None
+000194a0: 3a0a 2020 2020 2020 2020 756e 636c 655f  :.        uncle_
+000194b0: 636f 756e 7420 3d20 7733 2e65 7468 2e67  count = w3.eth.g
+000194c0: 6574 5f75 6e63 6c65 5f63 6f75 6e74 2865  et_uncle_count(e
+000194d0: 6d70 7479 5f62 6c6f 636b 5b22 6e75 6d62  mpty_block["numb
+000194e0: 6572 225d 290a 0a20 2020 2020 2020 2061  er"])..        a
+000194f0: 7373 6572 7420 6973 5f69 6e74 6567 6572  ssert is_integer
+00019500: 2875 6e63 6c65 5f63 6f75 6e74 290a 2020  (uncle_count).  
+00019510: 2020 2020 2020 6173 7365 7274 2075 6e63        assert unc
+00019520: 6c65 5f63 6f75 6e74 203d 3d20 300a 0a20  le_count == 0.. 
+00019530: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
+00019540: 6765 745f 636f 6465 280a 2020 2020 2020  get_code(.      
+00019550: 2020 7365 6c66 2c20 7733 3a20 2257 6562    self, w3: "Web
+00019560: 3322 2c20 6d61 7468 5f63 6f6e 7472 6163  3", math_contrac
+00019570: 745f 6164 6472 6573 733a 2043 6865 636b  t_address: Check
+00019580: 7375 6d41 6464 7265 7373 0a20 2020 2029  sumAddress.    )
+00019590: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+000195a0: 2020 636f 6465 203d 2077 332e 6574 682e    code = w3.eth.
+000195b0: 6765 745f 636f 6465 286d 6174 685f 636f  get_code(math_co
+000195c0: 6e74 7261 6374 5f61 6464 7265 7373 290a  ntract_address).
+000195d0: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+000195e0: 7369 6e73 7461 6e63 6528 636f 6465 2c20  sinstance(code, 
+000195f0: 4865 7842 7974 6573 290a 2020 2020 2020  HexBytes).      
+00019600: 2020 6173 7365 7274 206c 656e 2863 6f64    assert len(cod
+00019610: 6529 203e 2030 0a0a 2020 2020 6465 6620  e) > 0..    def 
+00019620: 7465 7374 5f65 7468 5f67 6574 5f63 6f64  test_eth_get_cod
+00019630: 655f 656e 735f 6164 6472 6573 7328 0a20  e_ens_address(. 
+00019640: 2020 2020 2020 2073 656c 662c 2077 333a         self, w3:
+00019650: 2022 5765 6233 222c 206d 6174 685f 636f   "Web3", math_co
+00019660: 6e74 7261 6374 5f61 6464 7265 7373 3a20  ntract_address: 
+00019670: 4368 6563 6b73 756d 4164 6472 6573 730a  ChecksumAddress.
+00019680: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+00019690: 2020 2020 2020 2077 6974 6820 656e 735f         with ens_
+000196a0: 6164 6472 6573 7365 7328 7733 2c20 7b22  addresses(w3, {"
+000196b0: 6d61 7468 636f 6e74 7261 6374 2e65 7468  mathcontract.eth
+000196c0: 223a 206d 6174 685f 636f 6e74 7261 6374  ": math_contract
+000196d0: 5f61 6464 7265 7373 7d29 3a0a 2020 2020  _address}):.    
+000196e0: 2020 2020 2020 2020 636f 6465 203d 2077          code = w
+000196f0: 332e 6574 682e 6765 745f 636f 6465 2845  3.eth.get_code(E
+00019700: 4e53 2822 6d61 7468 636f 6e74 7261 6374  NS("mathcontract
+00019710: 2e65 7468 2229 290a 2020 2020 2020 2020  .eth")).        
+00019720: 2020 2020 6173 7365 7274 2069 7369 6e73      assert isins
+00019730: 7461 6e63 6528 636f 6465 2c20 4865 7842  tance(code, HexB
+00019740: 7974 6573 290a 2020 2020 2020 2020 2020  ytes).          
+00019750: 2020 6173 7365 7274 206c 656e 2863 6f64    assert len(cod
+00019760: 6529 203e 2030 0a0a 2020 2020 6465 6620  e) > 0..    def 
+00019770: 7465 7374 5f65 7468 5f67 6574 5f63 6f64  test_eth_get_cod
+00019780: 655f 696e 7661 6c69 645f 6164 6472 6573  e_invalid_addres
+00019790: 7328 0a20 2020 2020 2020 2073 656c 662c  s(.        self,
+000197a0: 2077 333a 2022 5765 6233 222c 206d 6174   w3: "Web3", mat
+000197b0: 685f 636f 6e74 7261 6374 3a20 2243 6f6e  h_contract: "Con
+000197c0: 7472 6163 7422 0a20 2020 2029 202d 3e20  tract".    ) -> 
+000197d0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7769  None:.        wi
+000197e0: 7468 2070 7974 6573 742e 7261 6973 6573  th pytest.raises
+000197f0: 2849 6e76 616c 6964 4164 6472 6573 7329  (InvalidAddress)
+00019800: 3a0a 2020 2020 2020 2020 2020 2020 7733  :.            w3
+00019810: 2e65 7468 2e67 6574 5f63 6f64 6528 0a20  .eth.get_code(. 
+00019820: 2020 2020 2020 2020 2020 2020 2020 2043                 C
+00019830: 6865 636b 7375 6d41 6464 7265 7373 2848  hecksumAddress(H
+00019840: 6578 4164 6472 6573 7328 4865 7853 7472  exAddress(HexStr
+00019850: 286d 6174 685f 636f 6e74 7261 6374 2e61  (math_contract.a
+00019860: 6464 7265 7373 2e6c 6f77 6572 2829 2929  ddress.lower()))
+00019870: 290a 2020 2020 2020 2020 2020 2020 290a  ).            ).
+00019880: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
+00019890: 685f 6765 745f 636f 6465 5f77 6974 685f  h_get_code_with_
+000198a0: 626c 6f63 6b5f 6964 656e 7469 6669 6572  block_identifier
+000198b0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+000198c0: 7733 3a20 2257 6562 3322 2c20 656d 6974  w3: "Web3", emit
+000198d0: 7465 725f 636f 6e74 7261 6374 3a20 2243  ter_contract: "C
+000198e0: 6f6e 7472 6163 7422 0a20 2020 2029 202d  ontract".    ) -
+000198f0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00019900: 636f 6465 203d 2077 332e 6574 682e 6765  code = w3.eth.ge
+00019910: 745f 636f 6465 280a 2020 2020 2020 2020  t_code(.        
+00019920: 2020 2020 656d 6974 7465 725f 636f 6e74      emitter_cont
+00019930: 7261 6374 2e61 6464 7265 7373 2c20 626c  ract.address, bl
+00019940: 6f63 6b5f 6964 656e 7469 6669 6572 3d77  ock_identifier=w
+00019950: 332e 6574 682e 626c 6f63 6b5f 6e75 6d62  3.eth.block_numb
+00019960: 6572 0a20 2020 2020 2020 2029 0a20 2020  er.        ).   
+00019970: 2020 2020 2061 7373 6572 7420 6973 696e       assert isin
+00019980: 7374 616e 6365 2863 6f64 652c 2048 6578  stance(code, Hex
+00019990: 4279 7465 7329 0a20 2020 2020 2020 2061  Bytes).        a
+000199a0: 7373 6572 7420 6c65 6e28 636f 6465 2920  ssert len(code) 
+000199b0: 3e20 300a 0a20 2020 2064 6566 2074 6573  > 0..    def tes
+000199c0: 745f 6574 685f 7369 676e 280a 2020 2020  t_eth_sign(.    
+000199d0: 2020 2020 7365 6c66 2c20 7733 3a20 2257      self, w3: "W
+000199e0: 6562 3322 2c20 756e 6c6f 636b 6564 5f61  eb3", unlocked_a
+000199f0: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
+00019a00: 3a20 4368 6563 6b73 756d 4164 6472 6573  : ChecksumAddres
+00019a10: 730a 2020 2020 2920 2d3e 204e 6f6e 653a  s.    ) -> None:
+00019a20: 0a20 2020 2020 2020 2073 6967 6e61 7475  .        signatu
+00019a30: 7265 203d 2077 332e 6574 682e 7369 676e  re = w3.eth.sign
+00019a40: 280a 2020 2020 2020 2020 2020 2020 756e  (.            un
+00019a50: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
+00019a60: 7561 6c5f 7479 7065 2c20 7465 7874 3d22  ual_type, text="
+00019a70: 4d65 7373 6167 6520 74c3 b620 7369 676e  Message t.. sign
+00019a80: 2e20 4c6f 6e67 6572 2074 6861 6e20 6861  . Longer than ha
+00019a90: 7368 2122 0a20 2020 2020 2020 2029 0a20  sh!".        ). 
+00019aa0: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+00019ab0: 5f62 7974 6573 2873 6967 6e61 7475 7265  _bytes(signature
+00019ac0: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+00019ad0: 206c 656e 2873 6967 6e61 7475 7265 2920   len(signature) 
+00019ae0: 3d3d 2033 3220 2b20 3332 202b 2031 0a0a  == 32 + 32 + 1..
+00019af0: 2020 2020 2020 2020 2320 7465 7374 206f          # test o
+00019b00: 7468 6572 2066 6f72 6d61 7473 0a20 2020  ther formats.   
+00019b10: 2020 2020 2068 6578 7369 676e 203d 2077       hexsign = w
+00019b20: 332e 6574 682e 7369 676e 280a 2020 2020  3.eth.sign(.    
+00019b30: 2020 2020 2020 2020 756e 6c6f 636b 6564          unlocked
+00019b40: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
+00019b50: 7065 2c0a 2020 2020 2020 2020 2020 2020  pe,.            
+00019b60: 6865 7873 7472 3d48 6578 5374 7228 0a20  hexstr=HexStr(. 
+00019b70: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00019b80: 3078 3464 3635 3733 3733 3631 3637 3635  0x4d657373616765
+00019b90: 3230 3734 6333 6236 3230 3733 3639 3637  2074c3b620736967
+00019ba0: 3665 3265 3230 3463 3666 3665 3637 3635  6e2e204c6f6e6765
+00019bb0: 3732 3230 3734 3638 3631 3665 3230 3638  72207468616e2068
+00019bc0: 3631 3733 3638 3231 2220 2023 206e 6f71  61736821"  # noq
+00019bd0: 613a 2045 3530 310a 2020 2020 2020 2020  a: E501.        
+00019be0: 2020 2020 292c 0a20 2020 2020 2020 2029      ),.        )
+00019bf0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00019c00: 6865 7873 6967 6e20 3d3d 2073 6967 6e61  hexsign == signa
+00019c10: 7475 7265 0a0a 2020 2020 2020 2020 696e  ture..        in
+00019c20: 7473 6967 6e20 3d20 7733 2e65 7468 2e73  tsign = w3.eth.s
+00019c30: 6967 6e28 0a20 2020 2020 2020 2020 2020  ign(.           
+00019c40: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
+00019c50: 745f 6475 616c 5f74 7970 652c 0a20 2020  t_dual_type,.   
+00019c60: 2020 2020 2020 2020 2030 7834 4436 3537           0x4D657
+00019c70: 3337 3336 3136 3736 3532 3037 3443 3342  3736167652074C3B
+00019c80: 3632 3037 3336 3936 3736 4532 4532 3034  6207369676E2E204
+00019c90: 4336 4636 4536 3736 3537 3232 3037 3436  C6F6E67657220746
+00019ca0: 3836 3136 4532 3036 3836 3137 3336 3832  8616E20686173682
+00019cb0: 312c 0a20 2020 2020 2020 2029 0a20 2020  1,.        ).   
+00019cc0: 2020 2020 2061 7373 6572 7420 696e 7473       assert ints
+00019cd0: 6967 6e20 3d3d 2073 6967 6e61 7475 7265  ign == signature
+00019ce0: 0a0a 2020 2020 2020 2020 6279 7465 7373  ..        bytess
+00019cf0: 6967 6e20 3d20 7733 2e65 7468 2e73 6967  ign = w3.eth.sig
+00019d00: 6e28 0a20 2020 2020 2020 2020 2020 2075  n(.            u
+00019d10: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
+00019d20: 6475 616c 5f74 7970 652c 2062 224d 6573  dual_type, b"Mes
+00019d30: 7361 6765 2074 5c78 6333 5c78 6236 2073  sage t\xc3\xb6 s
+00019d40: 6967 6e2e 204c 6f6e 6765 7220 7468 616e  ign. Longer than
+00019d50: 2068 6173 6821 220a 2020 2020 2020 2020   hash!".        
+00019d60: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+00019d70: 2062 7974 6573 7369 676e 203d 3d20 7369   bytessign == si
+00019d80: 676e 6174 7572 650a 0a20 2020 2020 2020  gnature..       
+00019d90: 206e 6577 5f73 6967 6e61 7475 7265 203d   new_signature =
+00019da0: 2077 332e 6574 682e 7369 676e 280a 2020   w3.eth.sign(.  
+00019db0: 2020 2020 2020 2020 2020 756e 6c6f 636b            unlock
+00019dc0: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
+00019dd0: 7479 7065 2c20 7465 7874 3d22 6469 6666  type, text="diff
+00019de0: 6572 656e 7420 6d65 7373 6167 6520 6973  erent message is
+00019df0: 2064 6966 6665 7265 6e74 220a 2020 2020   different".    
+00019e00: 2020 2020 290a 2020 2020 2020 2020 6173      ).        as
+00019e10: 7365 7274 206e 6577 5f73 6967 6e61 7475  sert new_signatu
+00019e20: 7265 2021 3d20 7369 676e 6174 7572 650a  re != signature.
+00019e30: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
+00019e40: 685f 7369 676e 5f65 6e73 5f6e 616d 6573  h_sign_ens_names
+00019e50: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+00019e60: 7733 3a20 2257 6562 3322 2c20 756e 6c6f  w3: "Web3", unlo
+00019e70: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
+00019e80: 6c5f 7479 7065 3a20 4368 6563 6b73 756d  l_type: Checksum
+00019e90: 4164 6472 6573 730a 2020 2020 2920 2d3e  Address.    ) ->
+00019ea0: 204e 6f6e 653a 0a20 2020 2020 2020 2077   None:.        w
+00019eb0: 6974 6820 656e 735f 6164 6472 6573 7365  ith ens_addresse
+00019ec0: 7328 7733 2c20 7b22 756e 6c6f 636b 6564  s(w3, {"unlocked
+00019ed0: 2d61 6363 742e 6574 6822 3a20 756e 6c6f  -acct.eth": unlo
+00019ee0: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
+00019ef0: 6c5f 7479 7065 7d29 3a0a 2020 2020 2020  l_type}):.      
+00019f00: 2020 2020 2020 7369 676e 6174 7572 6520        signature 
+00019f10: 3d20 7733 2e65 7468 2e73 6967 6e28 0a20  = w3.eth.sign(. 
+00019f20: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00019f30: 756e 6c6f 636b 6564 2d61 6363 742e 6574  unlocked-acct.et
+00019f40: 6822 2c20 7465 7874 3d22 4d65 7373 6167  h", text="Messag
+00019f50: 6520 74c3 b620 7369 676e 2e20 4c6f 6e67  e t.. sign. Long
+00019f60: 6572 2074 6861 6e20 6861 7368 2122 0a20  er than hash!". 
+00019f70: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00019f80: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
+00019f90: 6973 5f62 7974 6573 2873 6967 6e61 7475  is_bytes(signatu
+00019fa0: 7265 290a 2020 2020 2020 2020 2020 2020  re).            
+00019fb0: 6173 7365 7274 206c 656e 2873 6967 6e61  assert len(signa
+00019fc0: 7475 7265 2920 3d3d 2033 3220 2b20 3332  ture) == 32 + 32
+00019fd0: 202b 2031 0a0a 2020 2020 6465 6620 7465   + 1..    def te
+00019fe0: 7374 5f65 7468 5f73 6967 6e5f 7479 7065  st_eth_sign_type
+00019ff0: 645f 6461 7461 280a 2020 2020 2020 2020  d_data(.        
+0001a000: 7365 6c66 2c0a 2020 2020 2020 2020 7733  self,.        w3
+0001a010: 3a20 2257 6562 3322 2c0a 2020 2020 2020  : "Web3",.      
+0001a020: 2020 756e 6c6f 636b 6564 5f61 6363 6f75    unlocked_accou
+0001a030: 6e74 5f64 7561 6c5f 7479 7065 3a20 4368  nt_dual_type: Ch
+0001a040: 6563 6b73 756d 4164 6472 6573 732c 0a20  ecksumAddress,. 
+0001a050: 2020 2020 2020 2073 6b69 705f 6966 5f74         skip_if_t
+0001a060: 6573 7472 7063 3a20 4361 6c6c 6162 6c65  estrpc: Callable
+0001a070: 5b5b 2257 6562 3322 5d2c 204e 6f6e 655d  [["Web3"], None]
+0001a080: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
+0001a090: 0a20 2020 2020 2020 2076 616c 6964 4a53  .        validJS
+0001a0a0: 4f4e 4d65 7373 6167 6520 3d20 2222 220a  ONMessage = """.
+0001a0b0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+0001a0c0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+0001a0d0: 7970 6573 223a 207b 0a20 2020 2020 2020  ypes": {.       
+0001a0e0: 2020 2020 2020 2020 2020 2020 2022 4549               "EI
+0001a0f0: 5037 3132 446f 6d61 696e 223a 205b 0a20  P712Domain": [. 
+0001a100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a110: 2020 2020 2020 207b 226e 616d 6522 3a20         {"name": 
+0001a120: 226e 616d 6522 2c20 2274 7970 6522 3a20  "name", "type": 
+0001a130: 2273 7472 696e 6722 7d2c 0a20 2020 2020  "string"},.     
+0001a140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a150: 2020 207b 226e 616d 6522 3a20 2276 6572     {"name": "ver
+0001a160: 7369 6f6e 222c 2022 7479 7065 223a 2022  sion", "type": "
+0001a170: 7374 7269 6e67 227d 2c0a 2020 2020 2020  string"},.      
+0001a180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a190: 2020 7b22 6e61 6d65 223a 2022 6368 6169    {"name": "chai
+0001a1a0: 6e49 6422 2c20 2274 7970 6522 3a20 2275  nId", "type": "u
+0001a1b0: 696e 7432 3536 227d 2c0a 2020 2020 2020  int256"},.      
+0001a1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a1d0: 2020 7b22 6e61 6d65 223a 2022 7665 7269    {"name": "veri
+0001a1e0: 6679 696e 6743 6f6e 7472 6163 7422 2c20  fyingContract", 
+0001a1f0: 2274 7970 6522 3a20 2261 6464 7265 7373  "type": "address
+0001a200: 227d 0a20 2020 2020 2020 2020 2020 2020  "}.             
+0001a210: 2020 2020 2020 205d 2c0a 2020 2020 2020         ],.      
+0001a220: 2020 2020 2020 2020 2020 2020 2020 2250                "P
+0001a230: 6572 736f 6e22 3a20 5b0a 2020 2020 2020  erson": [.      
+0001a240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a250: 2020 7b22 6e61 6d65 223a 2022 6e61 6d65    {"name": "name
+0001a260: 222c 2022 7479 7065 223a 2022 7374 7269  ", "type": "stri
+0001a270: 6e67 227d 2c0a 2020 2020 2020 2020 2020  ng"},.          
+0001a280: 2020 2020 2020 2020 2020 2020 2020 7b22                {"
+0001a290: 6e61 6d65 223a 2022 7761 6c6c 6574 222c  name": "wallet",
+0001a2a0: 2022 7479 7065 223a 2022 6164 6472 6573   "type": "addres
+0001a2b0: 7322 7d0a 2020 2020 2020 2020 2020 2020  s"}.            
+0001a2c0: 2020 2020 2020 2020 5d2c 0a20 2020 2020          ],.     
+0001a2d0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001a2e0: 4d61 696c 223a 205b 0a20 2020 2020 2020  Mail": [.       
+0001a2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a300: 207b 226e 616d 6522 3a20 2266 726f 6d22   {"name": "from"
+0001a310: 2c20 2274 7970 6522 3a20 2250 6572 736f  , "type": "Perso
+0001a320: 6e22 7d2c 0a20 2020 2020 2020 2020 2020  n"},.           
+0001a330: 2020 2020 2020 2020 2020 2020 207b 226e               {"n
+0001a340: 616d 6522 3a20 2274 6f22 2c20 2274 7970  ame": "to", "typ
+0001a350: 6522 3a20 2250 6572 736f 6e22 7d2c 0a20  e": "Person"},. 
 0001a360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a370: 2020 2263 6f6e 7465 6e74 7322 3a20 2248    "contents": "H
-0001a380: 656c 6c6f 2c20 426f 6221 220a 2020 2020  ello, Bob!".    
-0001a390: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-0001a3a0: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-0001a3b0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0001a3c0: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
-0001a3d0: 6573 280a 2020 2020 2020 2020 2020 2020  es(.            
-0001a3e0: 5661 6c75 6545 7272 6f72 2c0a 2020 2020  ValueError,.    
-0001a3f0: 2020 2020 2020 2020 6d61 7463 683d 7222          match=r"
-0001a400: 2e2a 4578 7065 6374 6564 2032 2069 7465  .*Expected 2 ite
-0001a410: 6d73 2066 6f72 2061 7272 6179 2074 7970  ms for array typ
-0001a420: 6520 5065 7273 6f6e 5c5b 325c 5d2c 2067  e Person\[2\], g
-0001a430: 6f74 2031 2069 7465 6d73 2e2a 222c 0a20  ot 1 items.*",. 
-0001a440: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
-0001a450: 2020 2020 2020 7733 2e65 7468 2e73 6967        w3.eth.sig
-0001a460: 6e5f 7479 7065 645f 6461 7461 280a 2020  n_typed_data(.  
-0001a470: 2020 2020 2020 2020 2020 2020 2020 756e                un
-0001a480: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
-0001a490: 7561 6c5f 7479 7065 2c20 6a73 6f6e 2e6c  ual_type, json.l
-0001a4a0: 6f61 6473 2869 6e76 616c 6964 5f74 7970  oads(invalid_typ
-0001a4b0: 6564 5f6d 6573 7361 6765 290a 2020 2020  ed_message).    
-0001a4c0: 2020 2020 2020 2020 290a 0a20 2020 2064          )..    d
-0001a4d0: 6566 2074 6573 745f 6574 685f 7369 676e  ef test_eth_sign
-0001a4e0: 5f74 7261 6e73 6163 7469 6f6e 5f6c 6567  _transaction_leg
-0001a4f0: 6163 7928 0a20 2020 2020 2020 2073 656c  acy(.        sel
-0001a500: 662c 2077 333a 2022 5765 6233 222c 2075  f, w3: "Web3", u
-0001a510: 6e6c 6f63 6b65 645f 6163 636f 756e 743a  nlocked_account:
-0001a520: 2043 6865 636b 7375 6d41 6464 7265 7373   ChecksumAddress
-0001a530: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-0001a540: 2020 2020 2020 2020 7478 6e5f 7061 7261          txn_para
-0001a550: 6d73 3a20 5478 5061 7261 6d73 203d 207b  ms: TxParams = {
-0001a560: 0a20 2020 2020 2020 2020 2020 2022 6672  .            "fr
-0001a570: 6f6d 223a 2075 6e6c 6f63 6b65 645f 6163  om": unlocked_ac
-0001a580: 636f 756e 742c 0a20 2020 2020 2020 2020  count,.         
-0001a590: 2020 2022 746f 223a 2075 6e6c 6f63 6b65     "to": unlocke
-0001a5a0: 645f 6163 636f 756e 742c 0a20 2020 2020  d_account,.     
-0001a5b0: 2020 2020 2020 2022 7661 6c75 6522 3a20         "value": 
-0001a5c0: 5765 6928 3129 2c0a 2020 2020 2020 2020  Wei(1),.        
-0001a5d0: 2020 2020 2267 6173 223a 2032 3130 3030      "gas": 21000
-0001a5e0: 2c0a 2020 2020 2020 2020 2020 2020 2267  ,.            "g
-0001a5f0: 6173 5072 6963 6522 3a20 7733 2e65 7468  asPrice": w3.eth
-0001a600: 2e67 6173 5f70 7269 6365 2c0a 2020 2020  .gas_price,.    
-0001a610: 2020 2020 2020 2020 226e 6f6e 6365 223a          "nonce":
-0001a620: 204e 6f6e 6365 2830 292c 0a20 2020 2020   Nonce(0),.     
-0001a630: 2020 207d 0a20 2020 2020 2020 2072 6573     }.        res
-0001a640: 756c 7420 3d20 7733 2e65 7468 2e73 6967  ult = w3.eth.sig
-0001a650: 6e5f 7472 616e 7361 6374 696f 6e28 7478  n_transaction(tx
-0001a660: 6e5f 7061 7261 6d73 290a 2020 2020 2020  n_params).      
-0001a670: 2020 7369 676e 6174 6f72 795f 6163 636f    signatory_acco
-0001a680: 756e 7420 3d20 7733 2e65 7468 2e61 6363  unt = w3.eth.acc
-0001a690: 6f75 6e74 2e72 6563 6f76 6572 5f74 7261  ount.recover_tra
-0001a6a0: 6e73 6163 7469 6f6e 2872 6573 756c 745b  nsaction(result[
-0001a6b0: 2272 6177 225d 290a 2020 2020 2020 2020  "raw"]).        
-0001a6c0: 6173 7365 7274 2075 6e6c 6f63 6b65 645f  assert unlocked_
-0001a6d0: 6163 636f 756e 7420 3d3d 2073 6967 6e61  account == signa
-0001a6e0: 746f 7279 5f61 6363 6f75 6e74 0a20 2020  tory_account.   
-0001a6f0: 2020 2020 2061 7373 6572 7420 7265 7375       assert resu
-0001a700: 6c74 5b22 7478 225d 5b22 746f 225d 203d  lt["tx"]["to"] =
-0001a710: 3d20 7478 6e5f 7061 7261 6d73 5b22 746f  = txn_params["to
-0001a720: 225d 0a20 2020 2020 2020 2061 7373 6572  "].        asser
-0001a730: 7420 7265 7375 6c74 5b22 7478 225d 5b22  t result["tx"]["
-0001a740: 7661 6c75 6522 5d20 3d3d 2074 786e 5f70  value"] == txn_p
-0001a750: 6172 616d 735b 2276 616c 7565 225d 0a20  arams["value"]. 
-0001a760: 2020 2020 2020 2061 7373 6572 7420 7265         assert re
-0001a770: 7375 6c74 5b22 7478 225d 5b22 6761 7322  sult["tx"]["gas"
-0001a780: 5d20 3d3d 2074 786e 5f70 6172 616d 735b  ] == txn_params[
-0001a790: 2267 6173 225d 0a20 2020 2020 2020 2061  "gas"].        a
-0001a7a0: 7373 6572 7420 7265 7375 6c74 5b22 7478  ssert result["tx
-0001a7b0: 225d 5b22 6761 7350 7269 6365 225d 203d  "]["gasPrice"] =
-0001a7c0: 3d20 7478 6e5f 7061 7261 6d73 5b22 6761  = txn_params["ga
-0001a7d0: 7350 7269 6365 225d 0a20 2020 2020 2020  sPrice"].       
-0001a7e0: 2061 7373 6572 7420 7265 7375 6c74 5b22   assert result["
-0001a7f0: 7478 225d 5b22 6e6f 6e63 6522 5d20 3d3d  tx"]["nonce"] ==
-0001a800: 2074 786e 5f70 6172 616d 735b 226e 6f6e   txn_params["non
-0001a810: 6365 225d 0a0a 2020 2020 6465 6620 7465  ce"]..    def te
-0001a820: 7374 5f65 7468 5f73 6967 6e5f 7472 616e  st_eth_sign_tran
-0001a830: 7361 6374 696f 6e28 0a20 2020 2020 2020  saction(.       
-0001a840: 2073 656c 662c 2077 333a 2022 5765 6233   self, w3: "Web3
-0001a850: 222c 2075 6e6c 6f63 6b65 645f 6163 636f  ", unlocked_acco
-0001a860: 756e 743a 2043 6865 636b 7375 6d41 6464  unt: ChecksumAdd
-0001a870: 7265 7373 0a20 2020 2029 202d 3e20 4e6f  ress.    ) -> No
-0001a880: 6e65 3a0a 2020 2020 2020 2020 7478 6e5f  ne:.        txn_
-0001a890: 7061 7261 6d73 3a20 5478 5061 7261 6d73  params: TxParams
-0001a8a0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-0001a8b0: 2022 6672 6f6d 223a 2075 6e6c 6f63 6b65   "from": unlocke
-0001a8c0: 645f 6163 636f 756e 742c 0a20 2020 2020  d_account,.     
-0001a8d0: 2020 2020 2020 2022 746f 223a 2075 6e6c         "to": unl
-0001a8e0: 6f63 6b65 645f 6163 636f 756e 742c 0a20  ocked_account,. 
-0001a8f0: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
-0001a900: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
-0001a910: 2020 2020 2020 2020 2267 6173 223a 2032          "gas": 2
-0001a920: 3130 3030 2c0a 2020 2020 2020 2020 2020  1000,.          
-0001a930: 2020 226d 6178 4665 6550 6572 4761 7322    "maxFeePerGas"
-0001a940: 3a20 7733 2e74 6f5f 7765 6928 322c 2022  : w3.to_wei(2, "
-0001a950: 6777 6569 2229 2c0a 2020 2020 2020 2020  gwei"),.        
-0001a960: 2020 2020 226d 6178 5072 696f 7269 7479      "maxPriority
-0001a970: 4665 6550 6572 4761 7322 3a20 7733 2e74  FeePerGas": w3.t
-0001a980: 6f5f 7765 6928 312c 2022 6777 6569 2229  o_wei(1, "gwei")
-0001a990: 2c0a 2020 2020 2020 2020 2020 2020 226e  ,.            "n
-0001a9a0: 6f6e 6365 223a 204e 6f6e 6365 2830 292c  once": Nonce(0),
-0001a9b0: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-0001a9c0: 2020 2072 6573 756c 7420 3d20 7733 2e65     result = w3.e
-0001a9d0: 7468 2e73 6967 6e5f 7472 616e 7361 6374  th.sign_transact
-0001a9e0: 696f 6e28 7478 6e5f 7061 7261 6d73 290a  ion(txn_params).
-0001a9f0: 2020 2020 2020 2020 7369 676e 6174 6f72          signator
-0001aa00: 795f 6163 636f 756e 7420 3d20 7733 2e65  y_account = w3.e
-0001aa10: 7468 2e61 6363 6f75 6e74 2e72 6563 6f76  th.account.recov
-0001aa20: 6572 5f74 7261 6e73 6163 7469 6f6e 2872  er_transaction(r
-0001aa30: 6573 756c 745b 2272 6177 225d 290a 2020  esult["raw"]).  
-0001aa40: 2020 2020 2020 6173 7365 7274 2075 6e6c        assert unl
-0001aa50: 6f63 6b65 645f 6163 636f 756e 7420 3d3d  ocked_account ==
-0001aa60: 2073 6967 6e61 746f 7279 5f61 6363 6f75   signatory_accou
-0001aa70: 6e74 0a20 2020 2020 2020 2061 7373 6572  nt.        asser
-0001aa80: 7420 7265 7375 6c74 5b22 7478 225d 5b22  t result["tx"]["
-0001aa90: 746f 225d 203d 3d20 7478 6e5f 7061 7261  to"] == txn_para
-0001aaa0: 6d73 5b22 746f 225d 0a20 2020 2020 2020  ms["to"].       
-0001aab0: 2061 7373 6572 7420 7265 7375 6c74 5b22   assert result["
-0001aac0: 7478 225d 5b22 7661 6c75 6522 5d20 3d3d  tx"]["value"] ==
-0001aad0: 2074 786e 5f70 6172 616d 735b 2276 616c   txn_params["val
-0001aae0: 7565 225d 0a20 2020 2020 2020 2061 7373  ue"].        ass
-0001aaf0: 6572 7420 7265 7375 6c74 5b22 7478 225d  ert result["tx"]
-0001ab00: 5b22 6761 7322 5d20 3d3d 2074 786e 5f70  ["gas"] == txn_p
-0001ab10: 6172 616d 735b 2267 6173 225d 0a20 2020  arams["gas"].   
-0001ab20: 2020 2020 2061 7373 6572 7420 7265 7375       assert resu
-0001ab30: 6c74 5b22 7478 225d 5b22 6d61 7846 6565  lt["tx"]["maxFee
-0001ab40: 5065 7247 6173 225d 203d 3d20 7478 6e5f  PerGas"] == txn_
-0001ab50: 7061 7261 6d73 5b22 6d61 7846 6565 5065  params["maxFeePe
-0001ab60: 7247 6173 225d 0a20 2020 2020 2020 2061  rGas"].        a
-0001ab70: 7373 6572 7420 280a 2020 2020 2020 2020  ssert (.        
-0001ab80: 2020 2020 7265 7375 6c74 5b22 7478 225d      result["tx"]
-0001ab90: 5b22 6d61 7850 7269 6f72 6974 7946 6565  ["maxPriorityFee
-0001aba0: 5065 7247 6173 225d 203d 3d20 7478 6e5f  PerGas"] == txn_
-0001abb0: 7061 7261 6d73 5b22 6d61 7850 7269 6f72  params["maxPrior
-0001abc0: 6974 7946 6565 5065 7247 6173 225d 0a20  ityFeePerGas"]. 
-0001abd0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0001abe0: 2061 7373 6572 7420 7265 7375 6c74 5b22   assert result["
-0001abf0: 7478 225d 5b22 6e6f 6e63 6522 5d20 3d3d  tx"]["nonce"] ==
-0001ac00: 2074 786e 5f70 6172 616d 735b 226e 6f6e   txn_params["non
-0001ac10: 6365 225d 0a0a 2020 2020 6465 6620 7465  ce"]..    def te
-0001ac20: 7374 5f65 7468 5f73 6967 6e5f 7472 616e  st_eth_sign_tran
-0001ac30: 7361 6374 696f 6e5f 6865 785f 6665 6573  saction_hex_fees
-0001ac40: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-0001ac50: 7733 3a20 2257 6562 3322 2c20 756e 6c6f  w3: "Web3", unlo
-0001ac60: 636b 6564 5f61 6363 6f75 6e74 3a20 4368  cked_account: Ch
-0001ac70: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
-0001ac80: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-0001ac90: 2020 2020 2074 786e 5f70 6172 616d 733a       txn_params:
-0001aca0: 2054 7850 6172 616d 7320 3d20 7b0a 2020   TxParams = {.  
-0001acb0: 2020 2020 2020 2020 2020 2266 726f 6d22            "from"
-0001acc0: 3a20 756e 6c6f 636b 6564 5f61 6363 6f75  : unlocked_accou
-0001acd0: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
-0001ace0: 2274 6f22 3a20 756e 6c6f 636b 6564 5f61  "to": unlocked_a
-0001acf0: 6363 6f75 6e74 2c0a 2020 2020 2020 2020  ccount,.        
-0001ad00: 2020 2020 2276 616c 7565 223a 2057 6569      "value": Wei
-0001ad10: 2831 292c 0a20 2020 2020 2020 2020 2020  (1),.           
-0001ad20: 2022 6761 7322 3a20 3231 3030 302c 0a20   "gas": 21000,. 
-0001ad30: 2020 2020 2020 2020 2020 2022 6d61 7846             "maxF
-0001ad40: 6565 5065 7247 6173 223a 2068 6578 2877  eePerGas": hex(w
-0001ad50: 332e 746f 5f77 6569 2832 2c20 2267 7765  3.to_wei(2, "gwe
-0001ad60: 6922 2929 2c0a 2020 2020 2020 2020 2020  i")),.          
-0001ad70: 2020 226d 6178 5072 696f 7269 7479 4665    "maxPriorityFe
-0001ad80: 6550 6572 4761 7322 3a20 6865 7828 7733  ePerGas": hex(w3
-0001ad90: 2e74 6f5f 7765 6928 312c 2022 6777 6569  .to_wei(1, "gwei
-0001ada0: 2229 292c 0a20 2020 2020 2020 2020 2020  ")),.           
-0001adb0: 2022 6e6f 6e63 6522 3a20 4e6f 6e63 6528   "nonce": Nonce(
-0001adc0: 3029 2c0a 2020 2020 2020 2020 7d0a 2020  0),.        }.  
-0001add0: 2020 2020 2020 7265 7375 6c74 203d 2077        result = w
-0001ade0: 332e 6574 682e 7369 676e 5f74 7261 6e73  3.eth.sign_trans
-0001adf0: 6163 7469 6f6e 2874 786e 5f70 6172 616d  action(txn_param
-0001ae00: 7329 0a20 2020 2020 2020 2073 6967 6e61  s).        signa
-0001ae10: 746f 7279 5f61 6363 6f75 6e74 203d 2077  tory_account = w
-0001ae20: 332e 6574 682e 6163 636f 756e 742e 7265  3.eth.account.re
-0001ae30: 636f 7665 725f 7472 616e 7361 6374 696f  cover_transactio
-0001ae40: 6e28 7265 7375 6c74 5b22 7261 7722 5d29  n(result["raw"])
-0001ae50: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-0001ae60: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-0001ae70: 203d 3d20 7369 676e 6174 6f72 795f 6163   == signatory_ac
-0001ae80: 636f 756e 740a 2020 2020 2020 2020 6173  count.        as
-0001ae90: 7365 7274 2072 6573 756c 745b 2274 7822  sert result["tx"
-0001aea0: 5d5b 2274 6f22 5d20 3d3d 2074 786e 5f70  ]["to"] == txn_p
-0001aeb0: 6172 616d 735b 2274 6f22 5d0a 2020 2020  arams["to"].    
-0001aec0: 2020 2020 6173 7365 7274 2072 6573 756c      assert resul
-0001aed0: 745b 2274 7822 5d5b 2276 616c 7565 225d  t["tx"]["value"]
-0001aee0: 203d 3d20 7478 6e5f 7061 7261 6d73 5b22   == txn_params["
-0001aef0: 7661 6c75 6522 5d0a 2020 2020 2020 2020  value"].        
-0001af00: 6173 7365 7274 2072 6573 756c 745b 2274  assert result["t
-0001af10: 7822 5d5b 2267 6173 225d 203d 3d20 7478  x"]["gas"] == tx
-0001af20: 6e5f 7061 7261 6d73 5b22 6761 7322 5d0a  n_params["gas"].
-0001af30: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
-0001af40: 6573 756c 745b 2274 7822 5d5b 226d 6178  esult["tx"]["max
-0001af50: 4665 6550 6572 4761 7322 5d20 3d3d 2069  FeePerGas"] == i
-0001af60: 6e74 2873 7472 2874 786e 5f70 6172 616d  nt(str(txn_param
-0001af70: 735b 226d 6178 4665 6550 6572 4761 7322  s["maxFeePerGas"
-0001af80: 5d29 2c20 3136 290a 2020 2020 2020 2020  ]), 16).        
-0001af90: 6173 7365 7274 2072 6573 756c 745b 2274  assert result["t
-0001afa0: 7822 5d5b 226d 6178 5072 696f 7269 7479  x"]["maxPriority
-0001afb0: 4665 6550 6572 4761 7322 5d20 3d3d 2069  FeePerGas"] == i
-0001afc0: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
-0001afd0: 7374 7228 7478 6e5f 7061 7261 6d73 5b22  str(txn_params["
-0001afe0: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
-0001aff0: 7247 6173 225d 292c 2031 360a 2020 2020  rGas"]), 16.    
-0001b000: 2020 2020 290a 2020 2020 2020 2020 6173      ).        as
-0001b010: 7365 7274 2072 6573 756c 745b 2274 7822  sert result["tx"
-0001b020: 5d5b 226e 6f6e 6365 225d 203d 3d20 7478  ]["nonce"] == tx
-0001b030: 6e5f 7061 7261 6d73 5b22 6e6f 6e63 6522  n_params["nonce"
-0001b040: 5d0a 0a20 2020 2064 6566 2074 6573 745f  ]..    def test_
-0001b050: 6574 685f 7369 676e 5f74 7261 6e73 6163  eth_sign_transac
-0001b060: 7469 6f6e 5f65 6e73 5f6e 616d 6573 280a  tion_ens_names(.
-0001b070: 2020 2020 2020 2020 7365 6c66 2c20 7733          self, w3
-0001b080: 3a20 2257 6562 3322 2c20 756e 6c6f 636b  : "Web3", unlock
-0001b090: 6564 5f61 6363 6f75 6e74 3a20 4368 6563  ed_account: Chec
-0001b0a0: 6b73 756d 4164 6472 6573 730a 2020 2020  ksumAddress.    
-0001b0b0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-0001b0c0: 2020 2077 6974 6820 656e 735f 6164 6472     with ens_addr
-0001b0d0: 6573 7365 7328 7733 2c20 7b22 756e 6c6f  esses(w3, {"unlo
-0001b0e0: 636b 6564 2d61 6363 6f75 6e74 2e65 7468  cked-account.eth
-0001b0f0: 223a 2075 6e6c 6f63 6b65 645f 6163 636f  ": unlocked_acco
-0001b100: 756e 747d 293a 0a20 2020 2020 2020 2020  unt}):.         
-0001b110: 2020 2074 786e 5f70 6172 616d 733a 2054     txn_params: T
-0001b120: 7850 6172 616d 7320 3d20 7b0a 2020 2020  xParams = {.    
-0001b130: 2020 2020 2020 2020 2020 2020 2266 726f              "fro
-0001b140: 6d22 3a20 2275 6e6c 6f63 6b65 642d 6163  m": "unlocked-ac
-0001b150: 636f 756e 742e 6574 6822 2c0a 2020 2020  count.eth",.    
-0001b160: 2020 2020 2020 2020 2020 2020 2274 6f22              "to"
-0001b170: 3a20 2275 6e6c 6f63 6b65 642d 6163 636f  : "unlocked-acco
-0001b180: 756e 742e 6574 6822 2c0a 2020 2020 2020  unt.eth",.      
-0001b190: 2020 2020 2020 2020 2020 2276 616c 7565            "value
-0001b1a0: 223a 2057 6569 2831 292c 0a20 2020 2020  ": Wei(1),.     
-0001b1b0: 2020 2020 2020 2020 2020 2022 6761 7322             "gas"
-0001b1c0: 3a20 3231 3030 302c 0a20 2020 2020 2020  : 21000,.       
-0001b1d0: 2020 2020 2020 2020 2022 6d61 7846 6565           "maxFee
-0001b1e0: 5065 7247 6173 223a 2077 332e 746f 5f77  PerGas": w3.to_w
-0001b1f0: 6569 2832 2c20 2267 7765 6922 292c 0a20  ei(2, "gwei"),. 
-0001b200: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001b210: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
-0001b220: 7247 6173 223a 2077 332e 746f 5f77 6569  rGas": w3.to_wei
-0001b230: 2831 2c20 2267 7765 6922 292c 0a20 2020  (1, "gwei"),.   
-0001b240: 2020 2020 2020 2020 2020 2020 2022 6e6f               "no
-0001b250: 6e63 6522 3a20 4e6f 6e63 6528 3029 2c0a  nce": Nonce(0),.
-0001b260: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-0001b270: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-0001b280: 203d 2077 332e 6574 682e 7369 676e 5f74   = w3.eth.sign_t
-0001b290: 7261 6e73 6163 7469 6f6e 2874 786e 5f70  ransaction(txn_p
-0001b2a0: 6172 616d 7329 0a20 2020 2020 2020 2020  arams).         
-0001b2b0: 2020 2073 6967 6e61 746f 7279 5f61 6363     signatory_acc
-0001b2c0: 6f75 6e74 203d 2077 332e 6574 682e 6163  ount = w3.eth.ac
-0001b2d0: 636f 756e 742e 7265 636f 7665 725f 7472  count.recover_tr
-0001b2e0: 616e 7361 6374 696f 6e28 7265 7375 6c74  ansaction(result
-0001b2f0: 5b22 7261 7722 5d29 0a20 2020 2020 2020  ["raw"]).       
-0001b300: 2020 2020 2061 7373 6572 7420 756e 6c6f       assert unlo
-0001b310: 636b 6564 5f61 6363 6f75 6e74 203d 3d20  cked_account == 
-0001b320: 7369 676e 6174 6f72 795f 6163 636f 756e  signatory_accoun
-0001b330: 740a 2020 2020 2020 2020 2020 2020 6173  t.            as
-0001b340: 7365 7274 2072 6573 756c 745b 2274 7822  sert result["tx"
-0001b350: 5d5b 2274 6f22 5d20 3d3d 2075 6e6c 6f63  ]["to"] == unloc
-0001b360: 6b65 645f 6163 636f 756e 740a 2020 2020  ked_account.    
-0001b370: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
-0001b380: 6573 756c 745b 2274 7822 5d5b 2276 616c  esult["tx"]["val
-0001b390: 7565 225d 203d 3d20 7478 6e5f 7061 7261  ue"] == txn_para
-0001b3a0: 6d73 5b22 7661 6c75 6522 5d0a 2020 2020  ms["value"].    
-0001b3b0: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
-0001b3c0: 6573 756c 745b 2274 7822 5d5b 2267 6173  esult["tx"]["gas
-0001b3d0: 225d 203d 3d20 7478 6e5f 7061 7261 6d73  "] == txn_params
-0001b3e0: 5b22 6761 7322 5d0a 2020 2020 2020 2020  ["gas"].        
-0001b3f0: 2020 2020 6173 7365 7274 2072 6573 756c      assert resul
-0001b400: 745b 2274 7822 5d5b 226d 6178 4665 6550  t["tx"]["maxFeeP
-0001b410: 6572 4761 7322 5d20 3d3d 2074 786e 5f70  erGas"] == txn_p
-0001b420: 6172 616d 735b 226d 6178 4665 6550 6572  arams["maxFeePer
-0001b430: 4761 7322 5d0a 2020 2020 2020 2020 2020  Gas"].          
-0001b440: 2020 6173 7365 7274 2028 0a20 2020 2020    assert (.     
-0001b450: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-0001b460: 745b 2274 7822 5d5b 226d 6178 5072 696f  t["tx"]["maxPrio
-0001b470: 7269 7479 4665 6550 6572 4761 7322 5d0a  rityFeePerGas"].
-0001b480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b490: 3d3d 2074 786e 5f70 6172 616d 735b 226d  == txn_params["m
-0001b4a0: 6178 5072 696f 7269 7479 4665 6550 6572  axPriorityFeePer
-0001b4b0: 4761 7322 5d0a 2020 2020 2020 2020 2020  Gas"].          
-0001b4c0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-0001b4d0: 6173 7365 7274 2072 6573 756c 745b 2274  assert result["t
-0001b4e0: 7822 5d5b 226e 6f6e 6365 225d 203d 3d20  x"]["nonce"] == 
-0001b4f0: 7478 6e5f 7061 7261 6d73 5b22 6e6f 6e63  txn_params["nonc
-0001b500: 6522 5d0a 0a20 2020 2064 6566 2074 6573  e"]..    def tes
-0001b510: 745f 6574 685f 7365 6e64 5f74 7261 6e73  t_eth_send_trans
-0001b520: 6163 7469 6f6e 5f61 6464 725f 6368 6563  action_addr_chec
-0001b530: 6b73 756d 5f72 6571 7569 7265 6428 0a20  ksum_required(. 
-0001b540: 2020 2020 2020 2073 656c 662c 2077 333a         self, w3:
-0001b550: 2022 5765 6233 222c 2075 6e6c 6f63 6b65   "Web3", unlocke
-0001b560: 645f 6163 636f 756e 743a 2043 6865 636b  d_account: Check
-0001b570: 7375 6d41 6464 7265 7373 0a20 2020 2029  sumAddress.    )
-0001b580: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-0001b590: 2020 6e6f 6e5f 6368 6563 6b73 756d 5f61    non_checksum_a
-0001b5a0: 6464 7220 3d20 756e 6c6f 636b 6564 5f61  ddr = unlocked_a
-0001b5b0: 6363 6f75 6e74 2e6c 6f77 6572 2829 0a20  ccount.lower(). 
-0001b5c0: 2020 2020 2020 2074 786e 5f70 6172 616d         txn_param
-0001b5d0: 733a 2054 7850 6172 616d 7320 3d20 7b0a  s: TxParams = {.
-0001b5e0: 2020 2020 2020 2020 2020 2020 2266 726f              "fro
-0001b5f0: 6d22 3a20 756e 6c6f 636b 6564 5f61 6363  m": unlocked_acc
-0001b600: 6f75 6e74 2c0a 2020 2020 2020 2020 2020  ount,.          
-0001b610: 2020 2274 6f22 3a20 756e 6c6f 636b 6564    "to": unlocked
-0001b620: 5f61 6363 6f75 6e74 2c0a 2020 2020 2020  _account,.      
-0001b630: 2020 2020 2020 2276 616c 7565 223a 2057        "value": W
-0001b640: 6569 2831 292c 0a20 2020 2020 2020 2020  ei(1),.         
-0001b650: 2020 2022 6761 7322 3a20 3231 3030 302c     "gas": 21000,
-0001b660: 0a20 2020 2020 2020 2020 2020 2022 6d61  .            "ma
-0001b670: 7846 6565 5065 7247 6173 223a 2077 332e  xFeePerGas": w3.
-0001b680: 746f 5f77 6569 2832 2c20 2267 7765 6922  to_wei(2, "gwei"
-0001b690: 292c 0a20 2020 2020 2020 2020 2020 2022  ),.            "
-0001b6a0: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
-0001b6b0: 7247 6173 223a 2077 332e 746f 5f77 6569  rGas": w3.to_wei
-0001b6c0: 2831 2c20 2267 7765 6922 292c 0a20 2020  (1, "gwei"),.   
-0001b6d0: 2020 2020 207d 0a0a 2020 2020 2020 2020       }..        
-0001b6e0: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
-0001b6f0: 6573 2849 6e76 616c 6964 4164 6472 6573  es(InvalidAddres
-0001b700: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
-0001b710: 696e 7661 6c69 645f 7061 7261 6d73 203d  invalid_params =
-0001b720: 2063 6173 7428 0a20 2020 2020 2020 2020   cast(.         
-0001b730: 2020 2020 2020 2054 7850 6172 616d 732c         TxParams,
-0001b740: 2064 6963 7428 7478 6e5f 7061 7261 6d73   dict(txn_params
-0001b750: 2c20 2a2a 7b22 6672 6f6d 223a 206e 6f6e  , **{"from": non
-0001b760: 5f63 6865 636b 7375 6d5f 6164 6472 7d29  _checksum_addr})
-0001b770: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-0001b780: 2020 2020 2020 2020 2020 2077 332e 6574             w3.et
-0001b790: 682e 7365 6e64 5f74 7261 6e73 6163 7469  h.send_transacti
-0001b7a0: 6f6e 2869 6e76 616c 6964 5f70 6172 616d  on(invalid_param
-0001b7b0: 7329 0a0a 2020 2020 2020 2020 7769 7468  s)..        with
-0001b7c0: 2070 7974 6573 742e 7261 6973 6573 2849   pytest.raises(I
-0001b7d0: 6e76 616c 6964 4164 6472 6573 7329 3a0a  nvalidAddress):.
-0001b7e0: 2020 2020 2020 2020 2020 2020 696e 7661              inva
-0001b7f0: 6c69 645f 7061 7261 6d73 203d 2063 6173  lid_params = cas
-0001b800: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
-0001b810: 2020 2054 7850 6172 616d 732c 2064 6963     TxParams, dic
-0001b820: 7428 7478 6e5f 7061 7261 6d73 2c20 2a2a  t(txn_params, **
-0001b830: 7b22 746f 223a 206e 6f6e 5f63 6865 636b  {"to": non_check
-0001b840: 7375 6d5f 6164 6472 7d29 0a20 2020 2020  sum_addr}).     
-0001b850: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0001b860: 2020 2020 2077 332e 6574 682e 7365 6e64       w3.eth.send
-0001b870: 5f74 7261 6e73 6163 7469 6f6e 2869 6e76  _transaction(inv
-0001b880: 616c 6964 5f70 6172 616d 7329 0a0a 2020  alid_params)..  
-0001b890: 2020 6465 6620 7465 7374 5f65 7468 5f73    def test_eth_s
-0001b8a0: 656e 645f 7472 616e 7361 6374 696f 6e5f  end_transaction_
-0001b8b0: 6c65 6761 6379 280a 2020 2020 2020 2020  legacy(.        
-0001b8c0: 7365 6c66 2c20 7733 3a20 2257 6562 3322  self, w3: "Web3"
-0001b8d0: 2c20 756e 6c6f 636b 6564 5f61 6363 6f75  , unlocked_accou
-0001b8e0: 6e74 5f64 7561 6c5f 7479 7065 3a20 4368  nt_dual_type: Ch
-0001b8f0: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
-0001b900: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-0001b910: 2020 2020 2074 786e 5f70 6172 616d 733a       txn_params:
-0001b920: 2054 7850 6172 616d 7320 3d20 7b0a 2020   TxParams = {.  
-0001b930: 2020 2020 2020 2020 2020 2266 726f 6d22            "from"
-0001b940: 3a20 756e 6c6f 636b 6564 5f61 6363 6f75  : unlocked_accou
-0001b950: 6e74 5f64 7561 6c5f 7479 7065 2c0a 2020  nt_dual_type,.  
-0001b960: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
-0001b970: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-0001b980: 5f64 7561 6c5f 7479 7065 2c0a 2020 2020  _dual_type,.    
-0001b990: 2020 2020 2020 2020 2276 616c 7565 223a          "value":
-0001b9a0: 2057 6569 2831 292c 0a20 2020 2020 2020   Wei(1),.       
-0001b9b0: 2020 2020 2022 6761 7322 3a20 3231 3030       "gas": 2100
-0001b9c0: 302c 0a20 2020 2020 2020 2020 2020 2022  0,.            "
-0001b9d0: 6761 7350 7269 6365 223a 2077 332e 746f  gasPrice": w3.to
-0001b9e0: 5f77 6569 280a 2020 2020 2020 2020 2020  _wei(.          
-0001b9f0: 2020 2020 2020 312c 2022 6777 6569 220a        1, "gwei".
-0001ba00: 2020 2020 2020 2020 2020 2020 292c 2020              ),  
-0001ba10: 2320 706f 7374 2d6c 6f6e 646f 6e20 6e65  # post-london ne
-0001ba20: 6564 7320 746f 2062 6520 6d6f 7265 2074  eds to be more t
-0001ba30: 6861 6e20 7468 6520 6261 7365 2066 6565  han the base fee
-0001ba40: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-0001ba50: 2020 2074 786e 5f68 6173 6820 3d20 7733     txn_hash = w3
-0001ba60: 2e65 7468 2e73 656e 645f 7472 616e 7361  .eth.send_transa
-0001ba70: 6374 696f 6e28 7478 6e5f 7061 7261 6d73  ction(txn_params
-0001ba80: 290a 2020 2020 2020 2020 7478 6e20 3d20  ).        txn = 
-0001ba90: 7733 2e65 7468 2e67 6574 5f74 7261 6e73  w3.eth.get_trans
-0001baa0: 6163 7469 6f6e 2874 786e 5f68 6173 6829  action(txn_hash)
-0001bab0: 0a0a 2020 2020 2020 2020 6173 7365 7274  ..        assert
-0001bac0: 2069 735f 7361 6d65 5f61 6464 7265 7373   is_same_address
-0001bad0: 2874 786e 5b22 6672 6f6d 225d 2c20 6361  (txn["from"], ca
-0001bae0: 7374 2843 6865 636b 7375 6d41 6464 7265  st(ChecksumAddre
-0001baf0: 7373 2c20 7478 6e5f 7061 7261 6d73 5b22  ss, txn_params["
-0001bb00: 6672 6f6d 225d 2929 0a20 2020 2020 2020  from"])).       
-0001bb10: 2061 7373 6572 7420 6973 5f73 616d 655f   assert is_same_
-0001bb20: 6164 6472 6573 7328 7478 6e5b 2274 6f22  address(txn["to"
-0001bb30: 5d2c 2063 6173 7428 4368 6563 6b73 756d  ], cast(Checksum
-0001bb40: 4164 6472 6573 732c 2074 786e 5f70 6172  Address, txn_par
-0001bb50: 616d 735b 2274 6f22 5d29 290a 2020 2020  ams["to"])).    
-0001bb60: 2020 2020 6173 7365 7274 2074 786e 5b22      assert txn["
-0001bb70: 7661 6c75 6522 5d20 3d3d 2031 0a20 2020  value"] == 1.   
-0001bb80: 2020 2020 2061 7373 6572 7420 7478 6e5b       assert txn[
-0001bb90: 2267 6173 225d 203d 3d20 3231 3030 300a  "gas"] == 21000.
-0001bba0: 2020 2020 2020 2020 6173 7365 7274 2074          assert t
-0001bbb0: 786e 5b22 6761 7350 7269 6365 225d 203d  xn["gasPrice"] =
-0001bbc0: 3d20 7478 6e5f 7061 7261 6d73 5b22 6761  = txn_params["ga
-0001bbd0: 7350 7269 6365 225d 0a0a 2020 2020 6465  sPrice"]..    de
-0001bbe0: 6620 7465 7374 5f65 7468 5f73 656e 645f  f test_eth_send_
-0001bbf0: 7472 616e 7361 6374 696f 6e28 0a20 2020  transaction(.   
-0001bc00: 2020 2020 2073 656c 662c 2077 333a 2022       self, w3: "
-0001bc10: 5765 6233 222c 2075 6e6c 6f63 6b65 645f  Web3", unlocked_
-0001bc20: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
-0001bc30: 653a 2043 6865 636b 7375 6d41 6464 7265  e: ChecksumAddre
-0001bc40: 7373 0a20 2020 2029 202d 3e20 4e6f 6e65  ss.    ) -> None
-0001bc50: 3a0a 2020 2020 2020 2020 7478 6e5f 7061  :.        txn_pa
-0001bc60: 7261 6d73 3a20 5478 5061 7261 6d73 203d  rams: TxParams =
-0001bc70: 207b 0a20 2020 2020 2020 2020 2020 2022   {.            "
-0001bc80: 6672 6f6d 223a 2075 6e6c 6f63 6b65 645f  from": unlocked_
-0001bc90: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
-0001bca0: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
-0001bcb0: 746f 223a 2075 6e6c 6f63 6b65 645f 6163  to": unlocked_ac
-0001bcc0: 636f 756e 745f 6475 616c 5f74 7970 652c  count_dual_type,
-0001bcd0: 0a20 2020 2020 2020 2020 2020 2022 7661  .            "va
-0001bce0: 6c75 6522 3a20 5765 6928 3129 2c0a 2020  lue": Wei(1),.  
-0001bcf0: 2020 2020 2020 2020 2020 2267 6173 223a            "gas":
-0001bd00: 2032 3130 3030 2c0a 2020 2020 2020 2020   21000,.        
-0001bd10: 2020 2020 226d 6178 4665 6550 6572 4761      "maxFeePerGa
-0001bd20: 7322 3a20 7733 2e74 6f5f 7765 6928 332c  s": w3.to_wei(3,
-0001bd30: 2022 6777 6569 2229 2c0a 2020 2020 2020   "gwei"),.      
-0001bd40: 2020 2020 2020 226d 6178 5072 696f 7269        "maxPriori
-0001bd50: 7479 4665 6550 6572 4761 7322 3a20 7733  tyFeePerGas": w3
-0001bd60: 2e74 6f5f 7765 6928 312c 2022 6777 6569  .to_wei(1, "gwei
-0001bd70: 2229 2c0a 2020 2020 2020 2020 7d0a 2020  "),.        }.  
-0001bd80: 2020 2020 2020 7478 6e5f 6861 7368 203d        txn_hash =
-0001bd90: 2077 332e 6574 682e 7365 6e64 5f74 7261   w3.eth.send_tra
-0001bda0: 6e73 6163 7469 6f6e 2874 786e 5f70 6172  nsaction(txn_par
-0001bdb0: 616d 7329 0a20 2020 2020 2020 2074 786e  ams).        txn
-0001bdc0: 203d 2077 332e 6574 682e 6765 745f 7472   = w3.eth.get_tr
-0001bdd0: 616e 7361 6374 696f 6e28 7478 6e5f 6861  ansaction(txn_ha
-0001bde0: 7368 290a 0a20 2020 2020 2020 2061 7373  sh)..        ass
-0001bdf0: 6572 7420 6973 5f73 616d 655f 6164 6472  ert is_same_addr
-0001be00: 6573 7328 7478 6e5b 2266 726f 6d22 5d2c  ess(txn["from"],
-0001be10: 2063 6173 7428 4368 6563 6b73 756d 4164   cast(ChecksumAd
-0001be20: 6472 6573 732c 2074 786e 5f70 6172 616d  dress, txn_param
-0001be30: 735b 2266 726f 6d22 5d29 290a 2020 2020  s["from"])).    
-0001be40: 2020 2020 6173 7365 7274 2069 735f 7361      assert is_sa
-0001be50: 6d65 5f61 6464 7265 7373 2874 786e 5b22  me_address(txn["
-0001be60: 746f 225d 2c20 6361 7374 2843 6865 636b  to"], cast(Check
-0001be70: 7375 6d41 6464 7265 7373 2c20 7478 6e5f  sumAddress, txn_
-0001be80: 7061 7261 6d73 5b22 746f 225d 2929 0a20  params["to"])). 
-0001be90: 2020 2020 2020 2061 7373 6572 7420 7478         assert tx
-0001bea0: 6e5b 2276 616c 7565 225d 203d 3d20 310a  n["value"] == 1.
-0001beb0: 2020 2020 2020 2020 6173 7365 7274 2074          assert t
-0001bec0: 786e 5b22 6761 7322 5d20 3d3d 2032 3130  xn["gas"] == 210
-0001bed0: 3030 0a20 2020 2020 2020 2061 7373 6572  00.        asser
-0001bee0: 7420 7478 6e5b 226d 6178 4665 6550 6572  t txn["maxFeePer
-0001bef0: 4761 7322 5d20 3d3d 2074 786e 5f70 6172  Gas"] == txn_par
-0001bf00: 616d 735b 226d 6178 4665 6550 6572 4761  ams["maxFeePerGa
-0001bf10: 7322 5d0a 2020 2020 2020 2020 6173 7365  s"].        asse
-0001bf20: 7274 2074 786e 5b22 6d61 7850 7269 6f72  rt txn["maxPrior
-0001bf30: 6974 7946 6565 5065 7247 6173 225d 203d  ityFeePerGas"] =
-0001bf40: 3d20 7478 6e5f 7061 7261 6d73 5b22 6d61  = txn_params["ma
-0001bf50: 7850 7269 6f72 6974 7946 6565 5065 7247  xPriorityFeePerG
-0001bf60: 6173 225d 0a20 2020 2020 2020 2061 7373  as"].        ass
-0001bf70: 6572 7420 7478 6e5b 2267 6173 5072 6963  ert txn["gasPric
-0001bf80: 6522 5d20 3d3d 2074 786e 5f70 6172 616d  e"] == txn_param
-0001bf90: 735b 226d 6178 4665 6550 6572 4761 7322  s["maxFeePerGas"
-0001bfa0: 5d0a 0a20 2020 2064 6566 2074 6573 745f  ]..    def test_
-0001bfb0: 6574 685f 7365 6e64 5f74 7261 6e73 6163  eth_send_transac
-0001bfc0: 7469 6f6e 5f77 6974 685f 6e6f 6e63 6528  tion_with_nonce(
-0001bfd0: 0a20 2020 2020 2020 2073 656c 662c 2077  .        self, w
-0001bfe0: 333a 2022 5765 6233 222c 2075 6e6c 6f63  3: "Web3", unloc
-0001bff0: 6b65 645f 6163 636f 756e 743a 2043 6865  ked_account: Che
-0001c000: 636b 7375 6d41 6464 7265 7373 0a20 2020  cksumAddress.   
-0001c010: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-0001c020: 2020 2020 6d69 6e65 5f70 656e 6469 6e67      mine_pending
-0001c030: 5f62 6c6f 636b 2877 3329 2020 2320 6769  _block(w3)  # gi
-0001c040: 7665 7320 616e 2061 6363 7572 6174 6520  ves an accurate 
-0001c050: 7472 616e 7361 6374 696f 6e20 636f 756e  transaction coun
-0001c060: 7420 6166 7465 7220 6d69 6e69 6e67 0a0a  t after mining..
-0001c070: 2020 2020 2020 2020 7478 6e5f 7061 7261          txn_para
-0001c080: 6d73 3a20 5478 5061 7261 6d73 203d 207b  ms: TxParams = {
-0001c090: 0a20 2020 2020 2020 2020 2020 2022 6672  .            "fr
-0001c0a0: 6f6d 223a 2075 6e6c 6f63 6b65 645f 6163  om": unlocked_ac
-0001c0b0: 636f 756e 742c 0a20 2020 2020 2020 2020  count,.         
-0001c0c0: 2020 2022 746f 223a 2075 6e6c 6f63 6b65     "to": unlocke
-0001c0d0: 645f 6163 636f 756e 742c 0a20 2020 2020  d_account,.     
-0001c0e0: 2020 2020 2020 2022 7661 6c75 6522 3a20         "value": 
-0001c0f0: 5765 6928 3129 2c0a 2020 2020 2020 2020  Wei(1),.        
-0001c100: 2020 2020 2267 6173 223a 2032 3130 3030      "gas": 21000
-0001c110: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
-0001c120: 756e 6971 7565 206d 6178 4665 6550 6572  unique maxFeePer
-0001c130: 4761 7320 746f 2065 6e73 7572 6520 7472  Gas to ensure tr
-0001c140: 616e 7361 6374 696f 6e20 6861 7368 2064  ansaction hash d
-0001c150: 6966 6665 7265 6e74 2066 726f 6d20 6f74  ifferent from ot
-0001c160: 6865 7220 7465 7374 730a 2020 2020 2020  her tests.      
-0001c170: 2020 2020 2020 226d 6178 4665 6550 6572        "maxFeePer
-0001c180: 4761 7322 3a20 7733 2e74 6f5f 7765 6928  Gas": w3.to_wei(
-0001c190: 342e 3332 312c 2022 6777 6569 2229 2c0a  4.321, "gwei"),.
-0001c1a0: 2020 2020 2020 2020 2020 2020 226d 6178              "max
-0001c1b0: 5072 696f 7269 7479 4665 6550 6572 4761  PriorityFeePerGa
-0001c1c0: 7322 3a20 7733 2e74 6f5f 7765 6928 312c  s": w3.to_wei(1,
-0001c1d0: 2022 6777 6569 2229 2c0a 2020 2020 2020   "gwei"),.      
-0001c1e0: 2020 2020 2020 226e 6f6e 6365 223a 2077        "nonce": w
-0001c1f0: 332e 6574 682e 6765 745f 7472 616e 7361  3.eth.get_transa
-0001c200: 6374 696f 6e5f 636f 756e 7428 756e 6c6f  ction_count(unlo
-0001c210: 636b 6564 5f61 6363 6f75 6e74 292c 0a20  cked_account),. 
-0001c220: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0001c230: 2074 786e 5f68 6173 6820 3d20 7733 2e65   txn_hash = w3.e
-0001c240: 7468 2e73 656e 645f 7472 616e 7361 6374  th.send_transact
-0001c250: 696f 6e28 7478 6e5f 7061 7261 6d73 290a  ion(txn_params).
-0001c260: 2020 2020 2020 2020 7478 6e20 3d20 7733          txn = w3
-0001c270: 2e65 7468 2e67 6574 5f74 7261 6e73 6163  .eth.get_transac
-0001c280: 7469 6f6e 2874 786e 5f68 6173 6829 0a0a  tion(txn_hash)..
-0001c290: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-0001c2a0: 735f 7361 6d65 5f61 6464 7265 7373 2874  s_same_address(t
-0001c2b0: 786e 5b22 6672 6f6d 225d 2c20 6361 7374  xn["from"], cast
-0001c2c0: 2843 6865 636b 7375 6d41 6464 7265 7373  (ChecksumAddress
-0001c2d0: 2c20 7478 6e5f 7061 7261 6d73 5b22 6672  , txn_params["fr
-0001c2e0: 6f6d 225d 2929 0a20 2020 2020 2020 2061  om"])).        a
-0001c2f0: 7373 6572 7420 6973 5f73 616d 655f 6164  ssert is_same_ad
-0001c300: 6472 6573 7328 7478 6e5b 2274 6f22 5d2c  dress(txn["to"],
-0001c310: 2063 6173 7428 4368 6563 6b73 756d 4164   cast(ChecksumAd
-0001c320: 6472 6573 732c 2074 786e 5f70 6172 616d  dress, txn_param
-0001c330: 735b 2274 6f22 5d29 290a 2020 2020 2020  s["to"])).      
-0001c340: 2020 6173 7365 7274 2074 786e 5b22 7661    assert txn["va
-0001c350: 6c75 6522 5d20 3d3d 2031 0a20 2020 2020  lue"] == 1.     
-0001c360: 2020 2061 7373 6572 7420 7478 6e5b 2267     assert txn["g
-0001c370: 6173 225d 203d 3d20 3231 3030 300a 2020  as"] == 21000.  
-0001c380: 2020 2020 2020 6173 7365 7274 2074 786e        assert txn
-0001c390: 5b22 6d61 7846 6565 5065 7247 6173 225d  ["maxFeePerGas"]
-0001c3a0: 203d 3d20 7478 6e5f 7061 7261 6d73 5b22   == txn_params["
-0001c3b0: 6d61 7846 6565 5065 7247 6173 225d 0a20  maxFeePerGas"]. 
-0001c3c0: 2020 2020 2020 2061 7373 6572 7420 7478         assert tx
-0001c3d0: 6e5b 226d 6178 5072 696f 7269 7479 4665  n["maxPriorityFe
-0001c3e0: 6550 6572 4761 7322 5d20 3d3d 2074 786e  ePerGas"] == txn
-0001c3f0: 5f70 6172 616d 735b 226d 6178 5072 696f  _params["maxPrio
-0001c400: 7269 7479 4665 6550 6572 4761 7322 5d0a  rityFeePerGas"].
-0001c410: 2020 2020 2020 2020 6173 7365 7274 2074          assert t
-0001c420: 786e 5b22 6e6f 6e63 6522 5d20 3d3d 2074  xn["nonce"] == t
-0001c430: 786e 5f70 6172 616d 735b 226e 6f6e 6365  xn_params["nonce
-0001c440: 225d 0a20 2020 2020 2020 2061 7373 6572  "].        asser
-0001c450: 7420 7478 6e5b 2267 6173 5072 6963 6522  t txn["gasPrice"
-0001c460: 5d20 3d3d 2074 786e 5f70 6172 616d 735b  ] == txn_params[
-0001c470: 226d 6178 4665 6550 6572 4761 7322 5d0a  "maxFeePerGas"].
-0001c480: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
-0001c490: 685f 7365 6e64 5f74 7261 6e73 6163 7469  h_send_transacti
-0001c4a0: 6f6e 5f64 6566 6175 6c74 5f66 6565 7328  on_default_fees(
-0001c4b0: 0a20 2020 2020 2020 2073 656c 662c 2077  .        self, w
-0001c4c0: 333a 2022 5765 6233 222c 2075 6e6c 6f63  3: "Web3", unloc
-0001c4d0: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
-0001c4e0: 5f74 7970 653a 2043 6865 636b 7375 6d41  _type: ChecksumA
-0001c4f0: 6464 7265 7373 0a20 2020 2029 202d 3e20  ddress.    ) -> 
-0001c500: 4e6f 6e65 3a0a 2020 2020 2020 2020 7478  None:.        tx
-0001c510: 6e5f 7061 7261 6d73 3a20 5478 5061 7261  n_params: TxPara
-0001c520: 6d73 203d 207b 0a20 2020 2020 2020 2020  ms = {.         
-0001c530: 2020 2022 6672 6f6d 223a 2075 6e6c 6f63     "from": unloc
-0001c540: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
-0001c550: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
-0001c560: 2020 2022 746f 223a 2075 6e6c 6f63 6b65     "to": unlocke
-0001c570: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-0001c580: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
-0001c590: 2022 7661 6c75 6522 3a20 5765 6928 3129   "value": Wei(1)
-0001c5a0: 2c0a 2020 2020 2020 2020 2020 2020 2267  ,.            "g
-0001c5b0: 6173 223a 2032 3130 3030 2c0a 2020 2020  as": 21000,.    
-0001c5c0: 2020 2020 7d0a 2020 2020 2020 2020 7478      }.        tx
-0001c5d0: 6e5f 6861 7368 203d 2077 332e 6574 682e  n_hash = w3.eth.
-0001c5e0: 7365 6e64 5f74 7261 6e73 6163 7469 6f6e  send_transaction
-0001c5f0: 2874 786e 5f70 6172 616d 7329 0a20 2020  (txn_params).   
-0001c600: 2020 2020 2074 786e 203d 2077 332e 6574       txn = w3.et
-0001c610: 682e 6765 745f 7472 616e 7361 6374 696f  h.get_transactio
-0001c620: 6e28 7478 6e5f 6861 7368 290a 0a20 2020  n(txn_hash)..   
-0001c630: 2020 2020 2061 7373 6572 7420 6973 5f73       assert is_s
-0001c640: 616d 655f 6164 6472 6573 7328 7478 6e5b  ame_address(txn[
-0001c650: 2266 726f 6d22 5d2c 2063 6173 7428 4368  "from"], cast(Ch
-0001c660: 6563 6b73 756d 4164 6472 6573 732c 2074  ecksumAddress, t
-0001c670: 786e 5f70 6172 616d 735b 2266 726f 6d22  xn_params["from"
-0001c680: 5d29 290a 2020 2020 2020 2020 6173 7365  ])).        asse
-0001c690: 7274 2069 735f 7361 6d65 5f61 6464 7265  rt is_same_addre
-0001c6a0: 7373 2874 786e 5b22 746f 225d 2c20 6361  ss(txn["to"], ca
-0001c6b0: 7374 2843 6865 636b 7375 6d41 6464 7265  st(ChecksumAddre
-0001c6c0: 7373 2c20 7478 6e5f 7061 7261 6d73 5b22  ss, txn_params["
-0001c6d0: 746f 225d 2929 0a20 2020 2020 2020 2061  to"])).        a
-0001c6e0: 7373 6572 7420 7478 6e5b 2276 616c 7565  ssert txn["value
-0001c6f0: 225d 203d 3d20 310a 2020 2020 2020 2020  "] == 1.        
-0001c700: 6173 7365 7274 2074 786e 5b22 6761 7322  assert txn["gas"
-0001c710: 5d20 3d3d 2032 3130 3030 0a20 2020 2020  ] == 21000.     
-0001c720: 2020 2061 7373 6572 7420 7478 6e5b 226d     assert txn["m
-0001c730: 6178 5072 696f 7269 7479 4665 6550 6572  axPriorityFeePer
-0001c740: 4761 7322 5d20 3d3d 2031 202a 2031 302a  Gas"] == 1 * 10*
-0001c750: 2a39 0a20 2020 2020 2020 2061 7373 6572  *9.        asser
-0001c760: 7420 7478 6e5b 226d 6178 4665 6550 6572  t txn["maxFeePer
-0001c770: 4761 7322 5d20 3e3d 2031 202a 2031 302a  Gas"] >= 1 * 10*
-0001c780: 2a39 0a20 2020 2020 2020 2061 7373 6572  *9.        asser
-0001c790: 7420 7478 6e5b 2267 6173 5072 6963 6522  t txn["gasPrice"
-0001c7a0: 5d20 3d3d 2074 786e 5b22 6d61 7846 6565  ] == txn["maxFee
-0001c7b0: 5065 7247 6173 225d 0a0a 2020 2020 6465  PerGas"]..    de
-0001c7c0: 6620 7465 7374 5f65 7468 5f73 656e 645f  f test_eth_send_
-0001c7d0: 7472 616e 7361 6374 696f 6e5f 6865 785f  transaction_hex_
-0001c7e0: 6665 6573 280a 2020 2020 2020 2020 7365  fees(.        se
-0001c7f0: 6c66 2c20 7733 3a20 2257 6562 3322 2c20  lf, w3: "Web3", 
-0001c800: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-0001c810: 5f64 7561 6c5f 7479 7065 3a20 4368 6563  _dual_type: Chec
-0001c820: 6b73 756d 4164 6472 6573 730a 2020 2020  ksumAddress.    
-0001c830: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-0001c840: 2020 2074 786e 5f70 6172 616d 733a 2054     txn_params: T
-0001c850: 7850 6172 616d 7320 3d20 7b0a 2020 2020  xParams = {.    
-0001c860: 2020 2020 2020 2020 2266 726f 6d22 3a20          "from": 
-0001c870: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-0001c880: 5f64 7561 6c5f 7479 7065 2c0a 2020 2020  _dual_type,.    
-0001c890: 2020 2020 2020 2020 2274 6f22 3a20 756e          "to": un
-0001c8a0: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
-0001c8b0: 7561 6c5f 7479 7065 2c0a 2020 2020 2020  ual_type,.      
-0001c8c0: 2020 2020 2020 2276 616c 7565 223a 2057        "value": W
-0001c8d0: 6569 2831 292c 0a20 2020 2020 2020 2020  ei(1),.         
-0001c8e0: 2020 2022 6761 7322 3a20 3231 3030 302c     "gas": 21000,
-0001c8f0: 0a20 2020 2020 2020 2020 2020 2022 6d61  .            "ma
-0001c900: 7846 6565 5065 7247 6173 223a 2068 6578  xFeePerGas": hex
-0001c910: 2832 3530 202a 2031 302a 2a39 292c 0a20  (250 * 10**9),. 
-0001c920: 2020 2020 2020 2020 2020 2022 6d61 7850             "maxP
-0001c930: 7269 6f72 6974 7946 6565 5065 7247 6173  riorityFeePerGas
-0001c940: 223a 2068 6578 2832 202a 2031 302a 2a39  ": hex(2 * 10**9
-0001c950: 292c 0a20 2020 2020 2020 207d 0a20 2020  ),.        }.   
-0001c960: 2020 2020 2074 786e 5f68 6173 6820 3d20       txn_hash = 
-0001c970: 7733 2e65 7468 2e73 656e 645f 7472 616e  w3.eth.send_tran
-0001c980: 7361 6374 696f 6e28 7478 6e5f 7061 7261  saction(txn_para
-0001c990: 6d73 290a 2020 2020 2020 2020 7478 6e20  ms).        txn 
-0001c9a0: 3d20 7733 2e65 7468 2e67 6574 5f74 7261  = w3.eth.get_tra
-0001c9b0: 6e73 6163 7469 6f6e 2874 786e 5f68 6173  nsaction(txn_has
-0001c9c0: 6829 0a0a 2020 2020 2020 2020 6173 7365  h)..        asse
-0001c9d0: 7274 2069 735f 7361 6d65 5f61 6464 7265  rt is_same_addre
-0001c9e0: 7373 2874 786e 5b22 6672 6f6d 225d 2c20  ss(txn["from"], 
-0001c9f0: 6361 7374 2843 6865 636b 7375 6d41 6464  cast(ChecksumAdd
-0001ca00: 7265 7373 2c20 7478 6e5f 7061 7261 6d73  ress, txn_params
-0001ca10: 5b22 6672 6f6d 225d 2929 0a20 2020 2020  ["from"])).     
-0001ca20: 2020 2061 7373 6572 7420 6973 5f73 616d     assert is_sam
-0001ca30: 655f 6164 6472 6573 7328 7478 6e5b 2274  e_address(txn["t
-0001ca40: 6f22 5d2c 2063 6173 7428 4368 6563 6b73  o"], cast(Checks
-0001ca50: 756d 4164 6472 6573 732c 2074 786e 5f70  umAddress, txn_p
-0001ca60: 6172 616d 735b 2274 6f22 5d29 290a 2020  arams["to"])).  
-0001ca70: 2020 2020 2020 6173 7365 7274 2074 786e        assert txn
-0001ca80: 5b22 7661 6c75 6522 5d20 3d3d 2031 0a20  ["value"] == 1. 
-0001ca90: 2020 2020 2020 2061 7373 6572 7420 7478         assert tx
-0001caa0: 6e5b 2267 6173 225d 203d 3d20 3231 3030  n["gas"] == 2100
-0001cab0: 300a 2020 2020 2020 2020 6173 7365 7274  0.        assert
-0001cac0: 2074 786e 5b22 6d61 7846 6565 5065 7247   txn["maxFeePerG
-0001cad0: 6173 225d 203d 3d20 3235 3020 2a20 3130  as"] == 250 * 10
-0001cae0: 2a2a 390a 2020 2020 2020 2020 6173 7365  **9.        asse
-0001caf0: 7274 2074 786e 5b22 6d61 7850 7269 6f72  rt txn["maxPrior
-0001cb00: 6974 7946 6565 5065 7247 6173 225d 203d  ityFeePerGas"] =
-0001cb10: 3d20 3220 2a20 3130 2a2a 390a 0a20 2020  = 2 * 10**9..   
-0001cb20: 2064 6566 2074 6573 745f 6574 685f 7365   def test_eth_se
-0001cb30: 6e64 5f74 7261 6e73 6163 7469 6f6e 5f6e  nd_transaction_n
-0001cb40: 6f5f 6761 7328 0a20 2020 2020 2020 2073  o_gas(.        s
-0001cb50: 656c 662c 2077 333a 2022 5765 6233 222c  elf, w3: "Web3",
-0001cb60: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-0001cb70: 745f 6475 616c 5f74 7970 653a 2043 6865  t_dual_type: Che
-0001cb80: 636b 7375 6d41 6464 7265 7373 0a20 2020  cksumAddress.   
-0001cb90: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-0001cba0: 2020 2020 7478 6e5f 7061 7261 6d73 3a20      txn_params: 
-0001cbb0: 5478 5061 7261 6d73 203d 207b 0a20 2020  TxParams = {.   
-0001cbc0: 2020 2020 2020 2020 2022 6672 6f6d 223a           "from":
-0001cbd0: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-0001cbe0: 745f 6475 616c 5f74 7970 652c 0a20 2020  t_dual_type,.   
-0001cbf0: 2020 2020 2020 2020 2022 746f 223a 2075           "to": u
-0001cc00: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
-0001cc10: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
-0001cc20: 2020 2020 2020 2022 7661 6c75 6522 3a20         "value": 
-0001cc30: 5765 6928 3129 2c0a 2020 2020 2020 2020  Wei(1),.        
-0001cc40: 2020 2020 226d 6178 4665 6550 6572 4761      "maxFeePerGa
-0001cc50: 7322 3a20 5765 6928 3235 3020 2a20 3130  s": Wei(250 * 10
-0001cc60: 2a2a 3929 2c0a 2020 2020 2020 2020 2020  **9),.          
-0001cc70: 2020 226d 6178 5072 696f 7269 7479 4665    "maxPriorityFe
-0001cc80: 6550 6572 4761 7322 3a20 5765 6928 3220  ePerGas": Wei(2 
-0001cc90: 2a20 3130 2a2a 3929 2c0a 2020 2020 2020  * 10**9),.      
-0001cca0: 2020 7d0a 2020 2020 2020 2020 7478 6e5f    }.        txn_
-0001ccb0: 6861 7368 203d 2077 332e 6574 682e 7365  hash = w3.eth.se
-0001ccc0: 6e64 5f74 7261 6e73 6163 7469 6f6e 2874  nd_transaction(t
-0001ccd0: 786e 5f70 6172 616d 7329 0a20 2020 2020  xn_params).     
-0001cce0: 2020 2074 786e 203d 2077 332e 6574 682e     txn = w3.eth.
-0001ccf0: 6765 745f 7472 616e 7361 6374 696f 6e28  get_transaction(
-0001cd00: 7478 6e5f 6861 7368 290a 0a20 2020 2020  txn_hash)..     
-0001cd10: 2020 2061 7373 6572 7420 6973 5f73 616d     assert is_sam
-0001cd20: 655f 6164 6472 6573 7328 7478 6e5b 2266  e_address(txn["f
-0001cd30: 726f 6d22 5d2c 2063 6173 7428 4368 6563  rom"], cast(Chec
-0001cd40: 6b73 756d 4164 6472 6573 732c 2074 786e  ksumAddress, txn
-0001cd50: 5f70 6172 616d 735b 2266 726f 6d22 5d29  _params["from"])
-0001cd60: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-0001cd70: 2069 735f 7361 6d65 5f61 6464 7265 7373   is_same_address
-0001cd80: 2874 786e 5b22 746f 225d 2c20 6361 7374  (txn["to"], cast
-0001cd90: 2843 6865 636b 7375 6d41 6464 7265 7373  (ChecksumAddress
-0001cda0: 2c20 7478 6e5f 7061 7261 6d73 5b22 746f  , txn_params["to
-0001cdb0: 225d 2929 0a20 2020 2020 2020 2061 7373  "])).        ass
-0001cdc0: 6572 7420 7478 6e5b 2276 616c 7565 225d  ert txn["value"]
-0001cdd0: 203d 3d20 310a 2020 2020 2020 2020 6173   == 1.        as
-0001cde0: 7365 7274 2074 786e 5b22 6761 7322 5d20  sert txn["gas"] 
-0001cdf0: 3d3d 2031 3231 3030 3020 2023 2032 3130  == 121000  # 210
-0001ce00: 3030 202b 2062 7566 6665 720a 0a20 2020  00 + buffer..   
-0001ce10: 2064 6566 2074 6573 745f 6574 685f 7365   def test_eth_se
-0001ce20: 6e64 5f74 7261 6e73 6163 7469 6f6e 5f77  nd_transaction_w
-0001ce30: 6974 685f 6761 735f 7072 6963 6528 0a20  ith_gas_price(. 
-0001ce40: 2020 2020 2020 2073 656c 662c 2077 333a         self, w3:
-0001ce50: 2022 5765 6233 222c 2075 6e6c 6f63 6b65   "Web3", unlocke
-0001ce60: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-0001ce70: 7970 653a 2043 6865 636b 7375 6d41 6464  ype: ChecksumAdd
-0001ce80: 7265 7373 0a20 2020 2029 202d 3e20 4e6f  ress.    ) -> No
-0001ce90: 6e65 3a0a 2020 2020 2020 2020 7478 6e5f  ne:.        txn_
-0001cea0: 7061 7261 6d73 3a20 5478 5061 7261 6d73  params: TxParams
-0001ceb0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-0001cec0: 2022 6672 6f6d 223a 2075 6e6c 6f63 6b65   "from": unlocke
-0001ced0: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-0001cee0: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
-0001cef0: 2022 746f 223a 2075 6e6c 6f63 6b65 645f   "to": unlocked_
-0001cf00: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
-0001cf10: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
-0001cf20: 7661 6c75 6522 3a20 5765 6928 3129 2c0a  value": Wei(1),.
-0001cf30: 2020 2020 2020 2020 2020 2020 2267 6173              "gas
-0001cf40: 223a 2032 3130 3030 2c0a 2020 2020 2020  ": 21000,.      
-0001cf50: 2020 2020 2020 2267 6173 5072 6963 6522        "gasPrice"
-0001cf60: 3a20 5765 6928 3129 2c0a 2020 2020 2020  : Wei(1),.      
-0001cf70: 2020 2020 2020 226d 6178 4665 6550 6572        "maxFeePer
-0001cf80: 4761 7322 3a20 5765 6928 3235 3020 2a20  Gas": Wei(250 * 
-0001cf90: 3130 2a2a 3929 2c0a 2020 2020 2020 2020  10**9),.        
-0001cfa0: 2020 2020 226d 6178 5072 696f 7269 7479      "maxPriority
-0001cfb0: 4665 6550 6572 4761 7322 3a20 5765 6928  FeePerGas": Wei(
-0001cfc0: 3220 2a20 3130 2a2a 3929 2c0a 2020 2020  2 * 10**9),.    
-0001cfd0: 2020 2020 7d0a 2020 2020 2020 2020 7769      }.        wi
-0001cfe0: 7468 2070 7974 6573 742e 7261 6973 6573  th pytest.raises
-0001cff0: 2854 7261 6e73 6163 7469 6f6e 5479 7065  (TransactionType
-0001d000: 4d69 736d 6174 6368 293a 0a20 2020 2020  Mismatch):.     
-0001d010: 2020 2020 2020 2077 332e 6574 682e 7365         w3.eth.se
-0001d020: 6e64 5f74 7261 6e73 6163 7469 6f6e 2874  nd_transaction(t
-0001d030: 786e 5f70 6172 616d 7329 0a0a 2020 2020  xn_params)..    
-0001d040: 6465 6620 7465 7374 5f65 7468 5f73 656e  def test_eth_sen
-0001d050: 645f 7472 616e 7361 6374 696f 6e5f 6e6f  d_transaction_no
-0001d060: 5f70 7269 6f72 6974 795f 6665 6528 0a20  _priority_fee(. 
-0001d070: 2020 2020 2020 2073 656c 662c 2077 333a         self, w3:
-0001d080: 2022 5765 6233 222c 2075 6e6c 6f63 6b65   "Web3", unlocke
-0001d090: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-0001d0a0: 7970 653a 2043 6865 636b 7375 6d41 6464  ype: ChecksumAdd
-0001d0b0: 7265 7373 0a20 2020 2029 202d 3e20 4e6f  ress.    ) -> No
-0001d0c0: 6e65 3a0a 2020 2020 2020 2020 7478 6e5f  ne:.        txn_
-0001d0d0: 7061 7261 6d73 3a20 5478 5061 7261 6d73  params: TxParams
-0001d0e0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-0001d0f0: 2022 6672 6f6d 223a 2075 6e6c 6f63 6b65   "from": unlocke
-0001d100: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-0001d110: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
-0001d120: 2022 746f 223a 2075 6e6c 6f63 6b65 645f   "to": unlocked_
-0001d130: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
-0001d140: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
-0001d150: 7661 6c75 6522 3a20 5765 6928 3129 2c0a  value": Wei(1),.
-0001d160: 2020 2020 2020 2020 2020 2020 2267 6173              "gas
-0001d170: 223a 2032 3130 3030 2c0a 2020 2020 2020  ": 21000,.      
-0001d180: 2020 2020 2020 226d 6178 4665 6550 6572        "maxFeePer
-0001d190: 4761 7322 3a20 5765 6928 3235 3020 2a20  Gas": Wei(250 * 
-0001d1a0: 3130 2a2a 3929 2c0a 2020 2020 2020 2020  10**9),.        
-0001d1b0: 7d0a 2020 2020 2020 2020 7769 7468 2070  }.        with p
-0001d1c0: 7974 6573 742e 7261 6973 6573 280a 2020  ytest.raises(.  
-0001d1d0: 2020 2020 2020 2020 2020 496e 7661 6c69            Invali
-0001d1e0: 6454 7261 6e73 6163 7469 6f6e 2c20 6d61  dTransaction, ma
-0001d1f0: 7463 683d 226d 6178 5072 696f 7269 7479  tch="maxPriority
-0001d200: 4665 6550 6572 4761 7320 6d75 7374 2062  FeePerGas must b
-0001d210: 6520 6465 6669 6e65 6422 0a20 2020 2020  e defined".     
-0001d220: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-0001d230: 2020 7733 2e65 7468 2e73 656e 645f 7472    w3.eth.send_tr
-0001d240: 616e 7361 6374 696f 6e28 7478 6e5f 7061  ansaction(txn_pa
-0001d250: 7261 6d73 290a 0a20 2020 2064 6566 2074  rams)..    def t
-0001d260: 6573 745f 6574 685f 7365 6e64 5f74 7261  est_eth_send_tra
-0001d270: 6e73 6163 7469 6f6e 5f6e 6f5f 6d61 785f  nsaction_no_max_
-0001d280: 6665 6528 0a20 2020 2020 2020 2073 656c  fee(.        sel
-0001d290: 662c 2077 333a 2022 5765 6233 222c 2075  f, w3: "Web3", u
-0001d2a0: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
-0001d2b0: 6475 616c 5f74 7970 653a 2043 6865 636b  dual_type: Check
-0001d2c0: 7375 6d41 6464 7265 7373 0a20 2020 2029  sumAddress.    )
-0001d2d0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-0001d2e0: 2020 6d61 7850 7269 6f72 6974 7946 6565    maxPriorityFee
-0001d2f0: 5065 7247 6173 203d 2077 332e 746f 5f77  PerGas = w3.to_w
-0001d300: 6569 2832 2c20 2267 7765 6922 290a 2020  ei(2, "gwei").  
-0001d310: 2020 2020 2020 7478 6e5f 7061 7261 6d73        txn_params
-0001d320: 3a20 5478 5061 7261 6d73 203d 207b 0a20  : TxParams = {. 
-0001d330: 2020 2020 2020 2020 2020 2022 6672 6f6d             "from
-0001d340: 223a 2075 6e6c 6f63 6b65 645f 6163 636f  ": unlocked_acco
-0001d350: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
-0001d360: 2020 2020 2020 2020 2020 2022 746f 223a             "to":
-0001d370: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-0001d380: 745f 6475 616c 5f74 7970 652c 0a20 2020  t_dual_type,.   
-0001d390: 2020 2020 2020 2020 2022 7661 6c75 6522           "value"
-0001d3a0: 3a20 5765 6928 3129 2c0a 2020 2020 2020  : Wei(1),.      
-0001d3b0: 2020 2020 2020 2267 6173 223a 2032 3130        "gas": 210
-0001d3c0: 3030 2c0a 2020 2020 2020 2020 2020 2020  00,.            
-0001d3d0: 226d 6178 5072 696f 7269 7479 4665 6550  "maxPriorityFeeP
-0001d3e0: 6572 4761 7322 3a20 6d61 7850 7269 6f72  erGas": maxPrior
-0001d3f0: 6974 7946 6565 5065 7247 6173 2c0a 2020  ityFeePerGas,.  
-0001d400: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0001d410: 7478 6e5f 6861 7368 203d 2077 332e 6574  txn_hash = w3.et
-0001d420: 682e 7365 6e64 5f74 7261 6e73 6163 7469  h.send_transacti
-0001d430: 6f6e 2874 786e 5f70 6172 616d 7329 0a20  on(txn_params). 
-0001d440: 2020 2020 2020 2074 786e 203d 2077 332e         txn = w3.
-0001d450: 6574 682e 6765 745f 7472 616e 7361 6374  eth.get_transact
-0001d460: 696f 6e28 7478 6e5f 6861 7368 290a 0a20  ion(txn_hash).. 
-0001d470: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
-0001d480: 5f73 616d 655f 6164 6472 6573 7328 7478  _same_address(tx
-0001d490: 6e5b 2266 726f 6d22 5d2c 2063 6173 7428  n["from"], cast(
-0001d4a0: 4368 6563 6b73 756d 4164 6472 6573 732c  ChecksumAddress,
-0001d4b0: 2074 786e 5f70 6172 616d 735b 2266 726f   txn_params["fro
-0001d4c0: 6d22 5d29 290a 2020 2020 2020 2020 6173  m"])).        as
-0001d4d0: 7365 7274 2069 735f 7361 6d65 5f61 6464  sert is_same_add
-0001d4e0: 7265 7373 2874 786e 5b22 746f 225d 2c20  ress(txn["to"], 
-0001d4f0: 6361 7374 2843 6865 636b 7375 6d41 6464  cast(ChecksumAdd
-0001d500: 7265 7373 2c20 7478 6e5f 7061 7261 6d73  ress, txn_params
-0001d510: 5b22 746f 225d 2929 0a20 2020 2020 2020  ["to"])).       
-0001d520: 2061 7373 6572 7420 7478 6e5b 2276 616c   assert txn["val
-0001d530: 7565 225d 203d 3d20 310a 2020 2020 2020  ue"] == 1.      
-0001d540: 2020 6173 7365 7274 2074 786e 5b22 6761    assert txn["ga
-0001d550: 7322 5d20 3d3d 2032 3130 3030 0a0a 2020  s"] == 21000..  
-0001d560: 2020 2020 2020 626c 6f63 6b20 3d20 7733        block = w3
-0001d570: 2e65 7468 2e67 6574 5f62 6c6f 636b 2822  .eth.get_block("
-0001d580: 6c61 7465 7374 2229 0a20 2020 2020 2020  latest").       
-0001d590: 2061 7373 6572 7420 7478 6e5b 226d 6178   assert txn["max
-0001d5a0: 4665 6550 6572 4761 7322 5d20 3d3d 206d  FeePerGas"] == m
-0001d5b0: 6178 5072 696f 7269 7479 4665 6550 6572  axPriorityFeePer
-0001d5c0: 4761 7320 2b20 3220 2a20 626c 6f63 6b5b  Gas + 2 * block[
-0001d5d0: 2262 6173 6546 6565 5065 7247 6173 225d  "baseFeePerGas"]
-0001d5e0: 0a0a 2020 2020 6465 6620 7465 7374 5f65  ..    def test_e
-0001d5f0: 7468 5f73 656e 645f 7472 616e 7361 6374  th_send_transact
-0001d600: 696f 6e5f 6d61 785f 6665 655f 6c65 7373  ion_max_fee_less
-0001d610: 5f74 6861 6e5f 7469 7028 0a20 2020 2020  _than_tip(.     
-0001d620: 2020 2073 656c 662c 2077 333a 2022 5765     self, w3: "We
-0001d630: 6233 222c 2075 6e6c 6f63 6b65 645f 6163  b3", unlocked_ac
-0001d640: 636f 756e 745f 6475 616c 5f74 7970 653a  count_dual_type:
-0001d650: 2043 6865 636b 7375 6d41 6464 7265 7373   ChecksumAddress
-0001d660: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-0001d670: 2020 2020 2020 2020 7478 6e5f 7061 7261          txn_para
-0001d680: 6d73 3a20 5478 5061 7261 6d73 203d 207b  ms: TxParams = {
-0001d690: 0a20 2020 2020 2020 2020 2020 2022 6672  .            "fr
-0001d6a0: 6f6d 223a 2075 6e6c 6f63 6b65 645f 6163  om": unlocked_ac
-0001d6b0: 636f 756e 745f 6475 616c 5f74 7970 652c  count_dual_type,
-0001d6c0: 0a20 2020 2020 2020 2020 2020 2022 746f  .            "to
-0001d6d0: 223a 2075 6e6c 6f63 6b65 645f 6163 636f  ": unlocked_acco
-0001d6e0: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
-0001d6f0: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
-0001d700: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
-0001d710: 2020 2020 2020 2020 2267 6173 223a 2032          "gas": 2
-0001d720: 3130 3030 2c0a 2020 2020 2020 2020 2020  1000,.          
-0001d730: 2020 226d 6178 4665 6550 6572 4761 7322    "maxFeePerGas"
-0001d740: 3a20 5765 6928 3120 2a20 3130 2a2a 3929  : Wei(1 * 10**9)
-0001d750: 2c0a 2020 2020 2020 2020 2020 2020 226d  ,.            "m
-0001d760: 6178 5072 696f 7269 7479 4665 6550 6572  axPriorityFeePer
-0001d770: 4761 7322 3a20 5765 6928 3220 2a20 3130  Gas": Wei(2 * 10
-0001d780: 2a2a 3929 2c0a 2020 2020 2020 2020 7d0a  **9),.        }.
-0001d790: 2020 2020 2020 2020 7769 7468 2070 7974          with pyt
-0001d7a0: 6573 742e 7261 6973 6573 280a 2020 2020  est.raises(.    
-0001d7b0: 2020 2020 2020 2020 496e 7661 6c69 6454          InvalidT
-0001d7c0: 7261 6e73 6163 7469 6f6e 2c20 6d61 7463  ransaction, matc
-0001d7d0: 683d 226d 6178 4665 6550 6572 4761 7320  h="maxFeePerGas 
-0001d7e0: 6d75 7374 2062 6520 3e3d 206d 6178 5072  must be >= maxPr
-0001d7f0: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
-0001d800: 0a20 2020 2020 2020 2029 3a0a 2020 2020  .        ):.    
-0001d810: 2020 2020 2020 2020 7733 2e65 7468 2e73          w3.eth.s
-0001d820: 656e 645f 7472 616e 7361 6374 696f 6e28  end_transaction(
-0001d830: 7478 6e5f 7061 7261 6d73 290a 0a20 2020  txn_params)..   
-0001d840: 2064 6566 2074 6573 745f 7661 6c69 6461   def test_valida
-0001d850: 7469 6f6e 5f6d 6964 646c 6577 6172 655f  tion_middleware_
-0001d860: 6368 6169 6e5f 6964 5f6d 6973 6d61 7463  chain_id_mismatc
-0001d870: 6828 0a20 2020 2020 2020 2073 656c 662c  h(.        self,
-0001d880: 2077 333a 2022 5765 6233 222c 2075 6e6c   w3: "Web3", unl
-0001d890: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
-0001d8a0: 616c 5f74 7970 653a 2043 6865 636b 7375  al_type: Checksu
-0001d8b0: 6d41 6464 7265 7373 0a20 2020 2029 202d  mAddress.    ) -
-0001d8c0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-0001d8d0: 7772 6f6e 675f 6368 6169 6e5f 6964 203d  wrong_chain_id =
-0001d8e0: 2031 3233 3435 3637 3839 300a 2020 2020   1234567890.    
-0001d8f0: 2020 2020 6163 7475 616c 5f63 6861 696e      actual_chain
-0001d900: 5f69 6420 3d20 7733 2e65 7468 2e63 6861  _id = w3.eth.cha
-0001d910: 696e 5f69 640a 0a20 2020 2020 2020 2074  in_id..        t
-0001d920: 786e 5f70 6172 616d 733a 2054 7850 6172  xn_params: TxPar
-0001d930: 616d 7320 3d20 7b0a 2020 2020 2020 2020  ams = {.        
-0001d940: 2020 2020 2266 726f 6d22 3a20 756e 6c6f      "from": unlo
+0001a370: 2020 2020 2020 207b 226e 616d 6522 3a20         {"name": 
+0001a380: 2263 6f6e 7465 6e74 7322 2c20 2274 7970  "contents", "typ
+0001a390: 6522 3a20 2273 7472 696e 6722 7d0a 2020  e": "string"}.  
+0001a3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a3b0: 2020 5d0a 2020 2020 2020 2020 2020 2020    ].            
+0001a3c0: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
+0001a3d0: 2020 2020 2020 2022 7072 696d 6172 7954         "primaryT
+0001a3e0: 7970 6522 3a20 224d 6169 6c22 2c0a 2020  ype": "Mail",.  
+0001a3f0: 2020 2020 2020 2020 2020 2020 2020 2264                "d
+0001a400: 6f6d 6169 6e22 3a20 7b0a 2020 2020 2020  omain": {.      
+0001a410: 2020 2020 2020 2020 2020 2020 2020 226e                "n
+0001a420: 616d 6522 3a20 2245 7468 6572 204d 6169  ame": "Ether Mai
+0001a430: 6c22 2c0a 2020 2020 2020 2020 2020 2020  l",.            
+0001a440: 2020 2020 2020 2020 2276 6572 7369 6f6e          "version
+0001a450: 223a 2022 3122 2c0a 2020 2020 2020 2020  ": "1",.        
+0001a460: 2020 2020 2020 2020 2020 2020 2263 6861              "cha
+0001a470: 696e 4964 223a 2022 3078 3031 222c 0a20  inId": "0x01",. 
+0001a480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a490: 2020 2022 7665 7269 6679 696e 6743 6f6e     "verifyingCon
+0001a4a0: 7472 6163 7422 3a20 2230 7843 6343 4363  tract": "0xCcCCc
+0001a4b0: 6363 6343 4343 4363 4343 4343 4343 6343  cccCCCCcCCCCCCcC
+0001a4c0: 6343 6363 4363 4343 4363 4363 6363 6363  cCccCcCCCcCccccc
+0001a4d0: 6363 4322 0a20 2020 2020 2020 2020 2020  ccC".           
+0001a4e0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+0001a4f0: 2020 2020 2020 2020 226d 6573 7361 6765          "message
+0001a500: 223a 207b 0a20 2020 2020 2020 2020 2020  ": {.           
+0001a510: 2020 2020 2020 2020 2022 6672 6f6d 223a           "from":
+0001a520: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+0001a530: 2020 2020 2020 2020 2020 2022 6e61 6d65             "name
+0001a540: 223a 2022 436f 7722 2c0a 2020 2020 2020  ": "Cow",.      
+0001a550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a560: 2020 2277 616c 6c65 7422 3a20 2230 7843    "wallet": "0xC
+0001a570: 4432 6133 6439 4639 3338 4531 3343 4439  D2a3d9F938E13CD9
+0001a580: 3437 4563 3035 4162 4337 4645 3733 3444  47Ec05AbC7FE734D
+0001a590: 6638 4444 3832 3622 0a20 2020 2020 2020  f8DD826".       
+0001a5a0: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
+0001a5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a5c0: 2020 2020 2274 6f22 3a20 7b0a 2020 2020      "to": {.    
+0001a5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a5e0: 2020 2020 226e 616d 6522 3a20 2242 6f62      "name": "Bob
+0001a5f0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+0001a600: 2020 2020 2020 2020 2020 2022 7761 6c6c             "wall
+0001a610: 6574 223a 2022 3078 6242 6242 4242 4262  et": "0xbBbBBBBb
+0001a620: 6242 4242 6262 6242 6262 4262 6262 6242  bBBBbbbBbbBbbbbB
+0001a630: 4262 4262 6262 6242 6242 6262 4242 6242  BbBbbbbBbBbbBBbB
+0001a640: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+0001a650: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
+0001a660: 2020 2020 2020 2020 2020 2020 2022 636f               "co
+0001a670: 6e74 656e 7473 223a 2022 4865 6c6c 6f2c  ntents": "Hello,
+0001a680: 2042 6f62 2122 0a20 2020 2020 2020 2020   Bob!".         
+0001a690: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+0001a6a0: 2020 2020 207d 0a20 2020 2020 2020 2022       }.        "
+0001a6b0: 2222 0a20 2020 2020 2020 2073 6b69 705f  "".        skip_
+0001a6c0: 6966 5f74 6573 7472 7063 2877 3329 0a20  if_testrpc(w3). 
+0001a6d0: 2020 2020 2020 2073 6967 6e61 7475 7265         signature
+0001a6e0: 203d 2048 6578 4279 7465 7328 0a20 2020   = HexBytes(.   
+0001a6f0: 2020 2020 2020 2020 2077 332e 6574 682e           w3.eth.
+0001a700: 7369 676e 5f74 7970 6564 5f64 6174 6128  sign_typed_data(
+0001a710: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a720: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
+0001a730: 745f 6475 616c 5f74 7970 652c 206a 736f  t_dual_type, jso
+0001a740: 6e2e 6c6f 6164 7328 7661 6c69 644a 534f  n.loads(validJSO
+0001a750: 4e4d 6573 7361 6765 290a 2020 2020 2020  NMessage).      
+0001a760: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0001a770: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+0001a780: 206c 656e 2873 6967 6e61 7475 7265 2920   len(signature) 
+0001a790: 3d3d 2033 3220 2b20 3332 202b 2031 0a0a  == 32 + 32 + 1..
+0001a7a0: 2020 2020 6465 6620 7465 7374 5f69 6e76      def test_inv
+0001a7b0: 616c 6964 5f65 7468 5f73 6967 6e5f 7479  alid_eth_sign_ty
+0001a7c0: 7065 645f 6461 7461 280a 2020 2020 2020  ped_data(.      
+0001a7d0: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+0001a7e0: 7733 3a20 2257 6562 3322 2c0a 2020 2020  w3: "Web3",.    
+0001a7f0: 2020 2020 756e 6c6f 636b 6564 5f61 6363      unlocked_acc
+0001a800: 6f75 6e74 5f64 7561 6c5f 7479 7065 3a20  ount_dual_type: 
+0001a810: 4368 6563 6b73 756d 4164 6472 6573 732c  ChecksumAddress,
+0001a820: 0a20 2020 2020 2020 2073 6b69 705f 6966  .        skip_if
+0001a830: 5f74 6573 7472 7063 3a20 4361 6c6c 6162  _testrpc: Callab
+0001a840: 6c65 5b5b 2257 6562 3322 5d2c 204e 6f6e  le[["Web3"], Non
+0001a850: 655d 2c0a 2020 2020 2920 2d3e 204e 6f6e  e],.    ) -> Non
+0001a860: 653a 0a20 2020 2020 2020 2073 6b69 705f  e:.        skip_
+0001a870: 6966 5f74 6573 7472 7063 2877 3329 0a20  if_testrpc(w3). 
+0001a880: 2020 2020 2020 2069 6e76 616c 6964 5f74         invalid_t
+0001a890: 7970 6564 5f6d 6573 7361 6765 203d 2022  yped_message = "
+0001a8a0: 2222 0a20 2020 2020 2020 2020 2020 207b  "".            {
+0001a8b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a8c0: 2022 7479 7065 7322 3a20 7b0a 2020 2020   "types": {.    
+0001a8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a8e0: 2245 4950 3731 3244 6f6d 6169 6e22 3a20  "EIP712Domain": 
+0001a8f0: 5b0a 2020 2020 2020 2020 2020 2020 2020  [.              
+0001a900: 2020 2020 2020 2020 2020 7b22 6e61 6d65            {"name
+0001a910: 223a 2022 6e61 6d65 222c 2022 7479 7065  ": "name", "type
+0001a920: 223a 2022 7374 7269 6e67 227d 2c0a 2020  ": "string"},.  
+0001a930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a940: 2020 2020 2020 7b22 6e61 6d65 223a 2022        {"name": "
+0001a950: 7665 7273 696f 6e22 2c20 2274 7970 6522  version", "type"
+0001a960: 3a20 2273 7472 696e 6722 7d2c 0a20 2020  : "string"},.   
+0001a970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a980: 2020 2020 207b 226e 616d 6522 3a20 2263       {"name": "c
+0001a990: 6861 696e 4964 222c 2022 7479 7065 223a  hainId", "type":
+0001a9a0: 2022 7569 6e74 3235 3622 7d2c 0a20 2020   "uint256"},.   
+0001a9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a9c0: 2020 2020 207b 226e 616d 6522 3a20 2276       {"name": "v
+0001a9d0: 6572 6966 7969 6e67 436f 6e74 7261 6374  erifyingContract
+0001a9e0: 222c 2022 7479 7065 223a 2022 6164 6472  ", "type": "addr
+0001a9f0: 6573 7322 7d0a 2020 2020 2020 2020 2020  ess"}.          
+0001aa00: 2020 2020 2020 2020 2020 5d2c 0a20 2020            ],.   
+0001aa10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aa20: 2022 5065 7273 6f6e 223a 205b 0a20 2020   "Person": [.   
+0001aa30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aa40: 2020 2020 207b 226e 616d 6522 3a20 226e       {"name": "n
+0001aa50: 616d 6522 2c20 2274 7970 6522 3a20 2273  ame", "type": "s
+0001aa60: 7472 696e 6722 7d2c 0a20 2020 2020 2020  tring"},.       
+0001aa70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aa80: 207b 226e 616d 6522 3a20 2277 616c 6c65   {"name": "walle
+0001aa90: 7422 2c20 2274 7970 6522 3a20 2261 6464  t", "type": "add
+0001aaa0: 7265 7373 227d 0a20 2020 2020 2020 2020  ress"}.         
+0001aab0: 2020 2020 2020 2020 2020 205d 2c0a 2020             ],.  
+0001aac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aad0: 2020 224d 6169 6c22 3a20 5b0a 2020 2020    "Mail": [.    
+0001aae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aaf0: 2020 2020 7b22 6e61 6d65 223a 2022 6672      {"name": "fr
+0001ab00: 6f6d 222c 2022 7479 7065 223a 2022 5065  om", "type": "Pe
+0001ab10: 7273 6f6e 227d 2c0a 2020 2020 2020 2020  rson"},.        
+0001ab20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ab30: 7b22 6e61 6d65 223a 2022 746f 222c 2022  {"name": "to", "
+0001ab40: 7479 7065 223a 2022 5065 7273 6f6e 5b32  type": "Person[2
+0001ab50: 5d22 7d2c 0a20 2020 2020 2020 2020 2020  ]"},.           
+0001ab60: 2020 2020 2020 2020 2020 2020 207b 226e               {"n
+0001ab70: 616d 6522 3a20 2263 6f6e 7465 6e74 7322  ame": "contents"
+0001ab80: 2c20 2274 7970 6522 3a20 2273 7472 696e  , "type": "strin
+0001ab90: 6722 7d0a 2020 2020 2020 2020 2020 2020  g"}.            
+0001aba0: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
+0001abb0: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
+0001abc0: 2020 2020 2020 2020 2020 2020 2022 7072               "pr
+0001abd0: 696d 6172 7954 7970 6522 3a20 224d 6169  imaryType": "Mai
+0001abe0: 6c22 2c0a 2020 2020 2020 2020 2020 2020  l",.            
+0001abf0: 2020 2020 2264 6f6d 6169 6e22 3a20 7b0a      "domain": {.
+0001ac00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ac10: 2020 2020 226e 616d 6522 3a20 2245 7468      "name": "Eth
+0001ac20: 6572 204d 6169 6c22 2c0a 2020 2020 2020  er Mail",.      
+0001ac30: 2020 2020 2020 2020 2020 2020 2020 2276                "v
+0001ac40: 6572 7369 6f6e 223a 2022 3122 2c0a 2020  ersion": "1",.  
+0001ac50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ac60: 2020 2263 6861 696e 4964 223a 2022 3078    "chainId": "0x
+0001ac70: 3031 222c 0a20 2020 2020 2020 2020 2020  01",.           
+0001ac80: 2020 2020 2020 2020 2022 7665 7269 6679           "verify
+0001ac90: 696e 6743 6f6e 7472 6163 7422 3a20 2230  ingContract": "0
+0001aca0: 7843 6343 4363 6363 6343 4343 4363 4343  xCcCCccccCCCCcCC
+0001acb0: 4343 4343 6343 6343 6363 4363 4343 4363  CCCCcCcCccCcCCCc
+0001acc0: 4363 6363 6363 6363 4322 0a20 2020 2020  CcccccccC".     
+0001acd0: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
+0001ace0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+0001acf0: 6573 7361 6765 223a 207b 0a20 2020 2020  essage": {.     
+0001ad00: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001ad10: 6672 6f6d 223a 207b 0a20 2020 2020 2020  from": {.       
+0001ad20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ad30: 2022 6e61 6d65 223a 2022 436f 7722 2c0a   "name": "Cow",.
+0001ad40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ad50: 2020 2020 2020 2020 2277 616c 6c65 7422          "wallet"
+0001ad60: 3a20 2230 7843 4432 6133 6439 4639 3338  : "0xCD2a3d9F938
+0001ad70: 4531 3343 4439 3437 4563 3035 4162 4337  E13CD947Ec05AbC7
+0001ad80: 4645 3733 3444 6638 4444 3832 3622 0a20  FE734Df8DD826". 
+0001ad90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ada0: 2020 207d 2c0a 2020 2020 2020 2020 2020     },.          
+0001adb0: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
+0001adc0: 5b7b 0a20 2020 2020 2020 2020 2020 2020  [{.             
+0001add0: 2020 2020 2020 2020 2020 2022 6e61 6d65             "name
+0001ade0: 223a 2022 426f 6222 2c0a 2020 2020 2020  ": "Bob",.      
+0001adf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ae00: 2020 2277 616c 6c65 7422 3a20 2230 7862    "wallet": "0xb
+0001ae10: 4262 4242 4242 6262 4242 4262 6262 4262  BbBBBBbbBBBbbbBb
+0001ae20: 6242 6262 6262 4242 6242 6262 6262 4262  bBbbbbBBbBbbbbBb
+0001ae30: 4262 6242 4262 4222 0a20 2020 2020 2020  BbbBBbB".       
+0001ae40: 2020 2020 2020 2020 2020 2020 207d 5d2c               }],
+0001ae50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ae60: 2020 2020 2022 636f 6e74 656e 7473 223a       "contents":
+0001ae70: 2022 4865 6c6c 6f2c 2042 6f62 2122 0a20   "Hello, Bob!". 
+0001ae80: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+0001ae90: 0a20 2020 2020 2020 2020 2020 207d 0a20  .            }. 
+0001aea0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0001aeb0: 2020 2077 6974 6820 7079 7465 7374 2e72     with pytest.r
+0001aec0: 6169 7365 7328 0a20 2020 2020 2020 2020  aises(.         
+0001aed0: 2020 2056 616c 7565 4572 726f 722c 0a20     ValueError,. 
+0001aee0: 2020 2020 2020 2020 2020 206d 6174 6368             match
+0001aef0: 3d72 222e 2a45 7870 6563 7465 6420 3220  =r".*Expected 2 
+0001af00: 6974 656d 7320 666f 7220 6172 7261 7920  items for array 
+0001af10: 7479 7065 2050 6572 736f 6e5c 5b32 5c5d  type Person\[2\]
+0001af20: 2c20 676f 7420 3120 6974 656d 732e 2a22  , got 1 items.*"
+0001af30: 2c0a 2020 2020 2020 2020 293a 0a20 2020  ,.        ):.   
+0001af40: 2020 2020 2020 2020 2077 332e 6574 682e           w3.eth.
+0001af50: 7369 676e 5f74 7970 6564 5f64 6174 6128  sign_typed_data(
+0001af60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001af70: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
+0001af80: 745f 6475 616c 5f74 7970 652c 206a 736f  t_dual_type, jso
+0001af90: 6e2e 6c6f 6164 7328 696e 7661 6c69 645f  n.loads(invalid_
+0001afa0: 7479 7065 645f 6d65 7373 6167 6529 0a20  typed_message). 
+0001afb0: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
+0001afc0: 2020 6465 6620 7465 7374 5f65 7468 5f73    def test_eth_s
+0001afd0: 6967 6e5f 7472 616e 7361 6374 696f 6e5f  ign_transaction_
+0001afe0: 6c65 6761 6379 280a 2020 2020 2020 2020  legacy(.        
+0001aff0: 7365 6c66 2c20 7733 3a20 2257 6562 3322  self, w3: "Web3"
+0001b000: 2c20 756e 6c6f 636b 6564 5f61 6363 6f75  , unlocked_accou
+0001b010: 6e74 3a20 4368 6563 6b73 756d 4164 6472  nt: ChecksumAddr
+0001b020: 6573 730a 2020 2020 2920 2d3e 204e 6f6e  ess.    ) -> Non
+0001b030: 653a 0a20 2020 2020 2020 2074 786e 5f70  e:.        txn_p
+0001b040: 6172 616d 733a 2054 7850 6172 616d 7320  arams: TxParams 
+0001b050: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0001b060: 2266 726f 6d22 3a20 756e 6c6f 636b 6564  "from": unlocked
+0001b070: 5f61 6363 6f75 6e74 2c0a 2020 2020 2020  _account,.      
+0001b080: 2020 2020 2020 2274 6f22 3a20 756e 6c6f        "to": unlo
+0001b090: 636b 6564 5f61 6363 6f75 6e74 2c0a 2020  cked_account,.  
+0001b0a0: 2020 2020 2020 2020 2020 2276 616c 7565            "value
+0001b0b0: 223a 2057 6569 2831 292c 0a20 2020 2020  ": Wei(1),.     
+0001b0c0: 2020 2020 2020 2022 6761 7322 3a20 3231         "gas": 21
+0001b0d0: 3030 302c 0a20 2020 2020 2020 2020 2020  000,.           
+0001b0e0: 2022 6761 7350 7269 6365 223a 2077 332e   "gasPrice": w3.
+0001b0f0: 6574 682e 6761 735f 7072 6963 652c 0a20  eth.gas_price,. 
+0001b100: 2020 2020 2020 2020 2020 2022 6e6f 6e63             "nonc
+0001b110: 6522 3a20 4e6f 6e63 6528 3029 2c0a 2020  e": Nonce(0),.  
+0001b120: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0001b130: 7265 7375 6c74 203d 2077 332e 6574 682e  result = w3.eth.
+0001b140: 7369 676e 5f74 7261 6e73 6163 7469 6f6e  sign_transaction
+0001b150: 2874 786e 5f70 6172 616d 7329 0a20 2020  (txn_params).   
+0001b160: 2020 2020 2073 6967 6e61 746f 7279 5f61       signatory_a
+0001b170: 6363 6f75 6e74 203d 2077 332e 6574 682e  ccount = w3.eth.
+0001b180: 6163 636f 756e 742e 7265 636f 7665 725f  account.recover_
+0001b190: 7472 616e 7361 6374 696f 6e28 7265 7375  transaction(resu
+0001b1a0: 6c74 5b22 7261 7722 5d29 0a20 2020 2020  lt["raw"]).     
+0001b1b0: 2020 2061 7373 6572 7420 756e 6c6f 636b     assert unlock
+0001b1c0: 6564 5f61 6363 6f75 6e74 203d 3d20 7369  ed_account == si
+0001b1d0: 676e 6174 6f72 795f 6163 636f 756e 740a  gnatory_account.
+0001b1e0: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
+0001b1f0: 6573 756c 745b 2274 7822 5d5b 2274 6f22  esult["tx"]["to"
+0001b200: 5d20 3d3d 2074 786e 5f70 6172 616d 735b  ] == txn_params[
+0001b210: 2274 6f22 5d0a 2020 2020 2020 2020 6173  "to"].        as
+0001b220: 7365 7274 2072 6573 756c 745b 2274 7822  sert result["tx"
+0001b230: 5d5b 2276 616c 7565 225d 203d 3d20 7478  ]["value"] == tx
+0001b240: 6e5f 7061 7261 6d73 5b22 7661 6c75 6522  n_params["value"
+0001b250: 5d0a 2020 2020 2020 2020 6173 7365 7274  ].        assert
+0001b260: 2072 6573 756c 745b 2274 7822 5d5b 2267   result["tx"]["g
+0001b270: 6173 225d 203d 3d20 7478 6e5f 7061 7261  as"] == txn_para
+0001b280: 6d73 5b22 6761 7322 5d0a 2020 2020 2020  ms["gas"].      
+0001b290: 2020 6173 7365 7274 2072 6573 756c 745b    assert result[
+0001b2a0: 2274 7822 5d5b 2267 6173 5072 6963 6522  "tx"]["gasPrice"
+0001b2b0: 5d20 3d3d 2074 786e 5f70 6172 616d 735b  ] == txn_params[
+0001b2c0: 2267 6173 5072 6963 6522 5d0a 2020 2020  "gasPrice"].    
+0001b2d0: 2020 2020 6173 7365 7274 2072 6573 756c      assert resul
+0001b2e0: 745b 2274 7822 5d5b 226e 6f6e 6365 225d  t["tx"]["nonce"]
+0001b2f0: 203d 3d20 7478 6e5f 7061 7261 6d73 5b22   == txn_params["
+0001b300: 6e6f 6e63 6522 5d0a 0a20 2020 2064 6566  nonce"]..    def
+0001b310: 2074 6573 745f 6574 685f 7369 676e 5f74   test_eth_sign_t
+0001b320: 7261 6e73 6163 7469 6f6e 280a 2020 2020  ransaction(.    
+0001b330: 2020 2020 7365 6c66 2c20 7733 3a20 2257      self, w3: "W
+0001b340: 6562 3322 2c20 756e 6c6f 636b 6564 5f61  eb3", unlocked_a
+0001b350: 6363 6f75 6e74 3a20 4368 6563 6b73 756d  ccount: Checksum
+0001b360: 4164 6472 6573 730a 2020 2020 2920 2d3e  Address.    ) ->
+0001b370: 204e 6f6e 653a 0a20 2020 2020 2020 2074   None:.        t
+0001b380: 786e 5f70 6172 616d 733a 2054 7850 6172  xn_params: TxPar
+0001b390: 616d 7320 3d20 7b0a 2020 2020 2020 2020  ams = {.        
+0001b3a0: 2020 2020 2266 726f 6d22 3a20 756e 6c6f      "from": unlo
+0001b3b0: 636b 6564 5f61 6363 6f75 6e74 2c0a 2020  cked_account,.  
+0001b3c0: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
+0001b3d0: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+0001b3e0: 2c0a 2020 2020 2020 2020 2020 2020 2276  ,.            "v
+0001b3f0: 616c 7565 223a 2057 6569 2831 292c 0a20  alue": Wei(1),. 
+0001b400: 2020 2020 2020 2020 2020 2022 6761 7322             "gas"
+0001b410: 3a20 3231 3030 302c 0a20 2020 2020 2020  : 21000,.       
+0001b420: 2020 2020 2022 6d61 7846 6565 5065 7247       "maxFeePerG
+0001b430: 6173 223a 2077 332e 746f 5f77 6569 2832  as": w3.to_wei(2
+0001b440: 2c20 2267 7765 6922 292c 0a20 2020 2020  , "gwei"),.     
+0001b450: 2020 2020 2020 2022 6d61 7850 7269 6f72         "maxPrior
+0001b460: 6974 7946 6565 5065 7247 6173 223a 2077  ityFeePerGas": w
+0001b470: 332e 746f 5f77 6569 2831 2c20 2267 7765  3.to_wei(1, "gwe
+0001b480: 6922 292c 0a20 2020 2020 2020 2020 2020  i"),.           
+0001b490: 2022 6e6f 6e63 6522 3a20 4e6f 6e63 6528   "nonce": Nonce(
+0001b4a0: 3029 2c0a 2020 2020 2020 2020 7d0a 2020  0),.        }.  
+0001b4b0: 2020 2020 2020 7265 7375 6c74 203d 2077        result = w
+0001b4c0: 332e 6574 682e 7369 676e 5f74 7261 6e73  3.eth.sign_trans
+0001b4d0: 6163 7469 6f6e 2874 786e 5f70 6172 616d  action(txn_param
+0001b4e0: 7329 0a20 2020 2020 2020 2073 6967 6e61  s).        signa
+0001b4f0: 746f 7279 5f61 6363 6f75 6e74 203d 2077  tory_account = w
+0001b500: 332e 6574 682e 6163 636f 756e 742e 7265  3.eth.account.re
+0001b510: 636f 7665 725f 7472 616e 7361 6374 696f  cover_transactio
+0001b520: 6e28 7265 7375 6c74 5b22 7261 7722 5d29  n(result["raw"])
+0001b530: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+0001b540: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+0001b550: 203d 3d20 7369 676e 6174 6f72 795f 6163   == signatory_ac
+0001b560: 636f 756e 740a 2020 2020 2020 2020 6173  count.        as
+0001b570: 7365 7274 2072 6573 756c 745b 2274 7822  sert result["tx"
+0001b580: 5d5b 2274 6f22 5d20 3d3d 2074 786e 5f70  ]["to"] == txn_p
+0001b590: 6172 616d 735b 2274 6f22 5d0a 2020 2020  arams["to"].    
+0001b5a0: 2020 2020 6173 7365 7274 2072 6573 756c      assert resul
+0001b5b0: 745b 2274 7822 5d5b 2276 616c 7565 225d  t["tx"]["value"]
+0001b5c0: 203d 3d20 7478 6e5f 7061 7261 6d73 5b22   == txn_params["
+0001b5d0: 7661 6c75 6522 5d0a 2020 2020 2020 2020  value"].        
+0001b5e0: 6173 7365 7274 2072 6573 756c 745b 2274  assert result["t
+0001b5f0: 7822 5d5b 2267 6173 225d 203d 3d20 7478  x"]["gas"] == tx
+0001b600: 6e5f 7061 7261 6d73 5b22 6761 7322 5d0a  n_params["gas"].
+0001b610: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
+0001b620: 6573 756c 745b 2274 7822 5d5b 226d 6178  esult["tx"]["max
+0001b630: 4665 6550 6572 4761 7322 5d20 3d3d 2074  FeePerGas"] == t
+0001b640: 786e 5f70 6172 616d 735b 226d 6178 4665  xn_params["maxFe
+0001b650: 6550 6572 4761 7322 5d0a 2020 2020 2020  ePerGas"].      
+0001b660: 2020 6173 7365 7274 2028 0a20 2020 2020    assert (.     
+0001b670: 2020 2020 2020 2072 6573 756c 745b 2274         result["t
+0001b680: 7822 5d5b 226d 6178 5072 696f 7269 7479  x"]["maxPriority
+0001b690: 4665 6550 6572 4761 7322 5d20 3d3d 2074  FeePerGas"] == t
+0001b6a0: 786e 5f70 6172 616d 735b 226d 6178 5072  xn_params["maxPr
+0001b6b0: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
+0001b6c0: 5d0a 2020 2020 2020 2020 290a 2020 2020  ].        ).    
+0001b6d0: 2020 2020 6173 7365 7274 2072 6573 756c      assert resul
+0001b6e0: 745b 2274 7822 5d5b 226e 6f6e 6365 225d  t["tx"]["nonce"]
+0001b6f0: 203d 3d20 7478 6e5f 7061 7261 6d73 5b22   == txn_params["
+0001b700: 6e6f 6e63 6522 5d0a 0a20 2020 2064 6566  nonce"]..    def
+0001b710: 2074 6573 745f 6574 685f 7369 676e 5f74   test_eth_sign_t
+0001b720: 7261 6e73 6163 7469 6f6e 5f68 6578 5f66  ransaction_hex_f
+0001b730: 6565 7328 0a20 2020 2020 2020 2073 656c  ees(.        sel
+0001b740: 662c 2077 333a 2022 5765 6233 222c 2075  f, w3: "Web3", u
+0001b750: 6e6c 6f63 6b65 645f 6163 636f 756e 743a  nlocked_account:
+0001b760: 2043 6865 636b 7375 6d41 6464 7265 7373   ChecksumAddress
+0001b770: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+0001b780: 2020 2020 2020 2020 7478 6e5f 7061 7261          txn_para
+0001b790: 6d73 3a20 5478 5061 7261 6d73 203d 207b  ms: TxParams = {
+0001b7a0: 0a20 2020 2020 2020 2020 2020 2022 6672  .            "fr
+0001b7b0: 6f6d 223a 2075 6e6c 6f63 6b65 645f 6163  om": unlocked_ac
+0001b7c0: 636f 756e 742c 0a20 2020 2020 2020 2020  count,.         
+0001b7d0: 2020 2022 746f 223a 2075 6e6c 6f63 6b65     "to": unlocke
+0001b7e0: 645f 6163 636f 756e 742c 0a20 2020 2020  d_account,.     
+0001b7f0: 2020 2020 2020 2022 7661 6c75 6522 3a20         "value": 
+0001b800: 5765 6928 3129 2c0a 2020 2020 2020 2020  Wei(1),.        
+0001b810: 2020 2020 2267 6173 223a 2032 3130 3030      "gas": 21000
+0001b820: 2c0a 2020 2020 2020 2020 2020 2020 226d  ,.            "m
+0001b830: 6178 4665 6550 6572 4761 7322 3a20 6865  axFeePerGas": he
+0001b840: 7828 7733 2e74 6f5f 7765 6928 322c 2022  x(w3.to_wei(2, "
+0001b850: 6777 6569 2229 292c 0a20 2020 2020 2020  gwei")),.       
+0001b860: 2020 2020 2022 6d61 7850 7269 6f72 6974       "maxPriorit
+0001b870: 7946 6565 5065 7247 6173 223a 2068 6578  yFeePerGas": hex
+0001b880: 2877 332e 746f 5f77 6569 2831 2c20 2267  (w3.to_wei(1, "g
+0001b890: 7765 6922 2929 2c0a 2020 2020 2020 2020  wei")),.        
+0001b8a0: 2020 2020 226e 6f6e 6365 223a 204e 6f6e      "nonce": Non
+0001b8b0: 6365 2830 292c 0a20 2020 2020 2020 207d  ce(0),.        }
+0001b8c0: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+0001b8d0: 3d20 7733 2e65 7468 2e73 6967 6e5f 7472  = w3.eth.sign_tr
+0001b8e0: 616e 7361 6374 696f 6e28 7478 6e5f 7061  ansaction(txn_pa
+0001b8f0: 7261 6d73 290a 2020 2020 2020 2020 7369  rams).        si
+0001b900: 676e 6174 6f72 795f 6163 636f 756e 7420  gnatory_account 
+0001b910: 3d20 7733 2e65 7468 2e61 6363 6f75 6e74  = w3.eth.account
+0001b920: 2e72 6563 6f76 6572 5f74 7261 6e73 6163  .recover_transac
+0001b930: 7469 6f6e 2872 6573 756c 745b 2272 6177  tion(result["raw
+0001b940: 225d 290a 2020 2020 2020 2020 6173 7365  "]).        asse
+0001b950: 7274 2075 6e6c 6f63 6b65 645f 6163 636f  rt unlocked_acco
+0001b960: 756e 7420 3d3d 2073 6967 6e61 746f 7279  unt == signatory
+0001b970: 5f61 6363 6f75 6e74 0a20 2020 2020 2020  _account.       
+0001b980: 2061 7373 6572 7420 7265 7375 6c74 5b22   assert result["
+0001b990: 7478 225d 5b22 746f 225d 203d 3d20 7478  tx"]["to"] == tx
+0001b9a0: 6e5f 7061 7261 6d73 5b22 746f 225d 0a20  n_params["to"]. 
+0001b9b0: 2020 2020 2020 2061 7373 6572 7420 7265         assert re
+0001b9c0: 7375 6c74 5b22 7478 225d 5b22 7661 6c75  sult["tx"]["valu
+0001b9d0: 6522 5d20 3d3d 2074 786e 5f70 6172 616d  e"] == txn_param
+0001b9e0: 735b 2276 616c 7565 225d 0a20 2020 2020  s["value"].     
+0001b9f0: 2020 2061 7373 6572 7420 7265 7375 6c74     assert result
+0001ba00: 5b22 7478 225d 5b22 6761 7322 5d20 3d3d  ["tx"]["gas"] ==
+0001ba10: 2074 786e 5f70 6172 616d 735b 2267 6173   txn_params["gas
+0001ba20: 225d 0a20 2020 2020 2020 2061 7373 6572  "].        asser
+0001ba30: 7420 7265 7375 6c74 5b22 7478 225d 5b22  t result["tx"]["
+0001ba40: 6d61 7846 6565 5065 7247 6173 225d 203d  maxFeePerGas"] =
+0001ba50: 3d20 696e 7428 7374 7228 7478 6e5f 7061  = int(str(txn_pa
+0001ba60: 7261 6d73 5b22 6d61 7846 6565 5065 7247  rams["maxFeePerG
+0001ba70: 6173 225d 292c 2031 3629 0a20 2020 2020  as"]), 16).     
+0001ba80: 2020 2061 7373 6572 7420 7265 7375 6c74     assert result
+0001ba90: 5b22 7478 225d 5b22 6d61 7850 7269 6f72  ["tx"]["maxPrior
+0001baa0: 6974 7946 6565 5065 7247 6173 225d 203d  ityFeePerGas"] =
+0001bab0: 3d20 696e 7428 0a20 2020 2020 2020 2020  = int(.         
+0001bac0: 2020 2073 7472 2874 786e 5f70 6172 616d     str(txn_param
+0001bad0: 735b 226d 6178 5072 696f 7269 7479 4665  s["maxPriorityFe
+0001bae0: 6550 6572 4761 7322 5d29 2c20 3136 0a20  ePerGas"]), 16. 
+0001baf0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0001bb00: 2061 7373 6572 7420 7265 7375 6c74 5b22   assert result["
+0001bb10: 7478 225d 5b22 6e6f 6e63 6522 5d20 3d3d  tx"]["nonce"] ==
+0001bb20: 2074 786e 5f70 6172 616d 735b 226e 6f6e   txn_params["non
+0001bb30: 6365 225d 0a0a 2020 2020 6465 6620 7465  ce"]..    def te
+0001bb40: 7374 5f65 7468 5f73 6967 6e5f 7472 616e  st_eth_sign_tran
+0001bb50: 7361 6374 696f 6e5f 656e 735f 6e61 6d65  saction_ens_name
+0001bb60: 7328 0a20 2020 2020 2020 2073 656c 662c  s(.        self,
+0001bb70: 2077 333a 2022 5765 6233 222c 2075 6e6c   w3: "Web3", unl
+0001bb80: 6f63 6b65 645f 6163 636f 756e 743a 2043  ocked_account: C
+0001bb90: 6865 636b 7375 6d41 6464 7265 7373 0a20  hecksumAddress. 
+0001bba0: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
+0001bbb0: 2020 2020 2020 7769 7468 2065 6e73 5f61        with ens_a
+0001bbc0: 6464 7265 7373 6573 2877 332c 207b 2275  ddresses(w3, {"u
+0001bbd0: 6e6c 6f63 6b65 642d 6163 636f 756e 742e  nlocked-account.
+0001bbe0: 6574 6822 3a20 756e 6c6f 636b 6564 5f61  eth": unlocked_a
+0001bbf0: 6363 6f75 6e74 7d29 3a0a 2020 2020 2020  ccount}):.      
+0001bc00: 2020 2020 2020 7478 6e5f 7061 7261 6d73        txn_params
+0001bc10: 3a20 5478 5061 7261 6d73 203d 207b 0a20  : TxParams = {. 
+0001bc20: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001bc30: 6672 6f6d 223a 2022 756e 6c6f 636b 6564  from": "unlocked
+0001bc40: 2d61 6363 6f75 6e74 2e65 7468 222c 0a20  -account.eth",. 
+0001bc50: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001bc60: 746f 223a 2022 756e 6c6f 636b 6564 2d61  to": "unlocked-a
+0001bc70: 6363 6f75 6e74 2e65 7468 222c 0a20 2020  ccount.eth",.   
+0001bc80: 2020 2020 2020 2020 2020 2020 2022 7661               "va
+0001bc90: 6c75 6522 3a20 5765 6928 3129 2c0a 2020  lue": Wei(1),.  
+0001bca0: 2020 2020 2020 2020 2020 2020 2020 2267                "g
+0001bcb0: 6173 223a 2032 3130 3030 2c0a 2020 2020  as": 21000,.    
+0001bcc0: 2020 2020 2020 2020 2020 2020 226d 6178              "max
+0001bcd0: 4665 6550 6572 4761 7322 3a20 7733 2e74  FeePerGas": w3.t
+0001bce0: 6f5f 7765 6928 322c 2022 6777 6569 2229  o_wei(2, "gwei")
+0001bcf0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0001bd00: 2020 226d 6178 5072 696f 7269 7479 4665    "maxPriorityFe
+0001bd10: 6550 6572 4761 7322 3a20 7733 2e74 6f5f  ePerGas": w3.to_
+0001bd20: 7765 6928 312c 2022 6777 6569 2229 2c0a  wei(1, "gwei"),.
+0001bd30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bd40: 226e 6f6e 6365 223a 204e 6f6e 6365 2830  "nonce": Nonce(0
+0001bd50: 292c 0a20 2020 2020 2020 2020 2020 207d  ),.            }
+0001bd60: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+0001bd70: 756c 7420 3d20 7733 2e65 7468 2e73 6967  ult = w3.eth.sig
+0001bd80: 6e5f 7472 616e 7361 6374 696f 6e28 7478  n_transaction(tx
+0001bd90: 6e5f 7061 7261 6d73 290a 2020 2020 2020  n_params).      
+0001bda0: 2020 2020 2020 7369 676e 6174 6f72 795f        signatory_
+0001bdb0: 6163 636f 756e 7420 3d20 7733 2e65 7468  account = w3.eth
+0001bdc0: 2e61 6363 6f75 6e74 2e72 6563 6f76 6572  .account.recover
+0001bdd0: 5f74 7261 6e73 6163 7469 6f6e 2872 6573  _transaction(res
+0001bde0: 756c 745b 2272 6177 225d 290a 2020 2020  ult["raw"]).    
+0001bdf0: 2020 2020 2020 2020 6173 7365 7274 2075          assert u
+0001be00: 6e6c 6f63 6b65 645f 6163 636f 756e 7420  nlocked_account 
+0001be10: 3d3d 2073 6967 6e61 746f 7279 5f61 6363  == signatory_acc
+0001be20: 6f75 6e74 0a20 2020 2020 2020 2020 2020  ount.           
+0001be30: 2061 7373 6572 7420 7265 7375 6c74 5b22   assert result["
+0001be40: 7478 225d 5b22 746f 225d 203d 3d20 756e  tx"]["to"] == un
+0001be50: 6c6f 636b 6564 5f61 6363 6f75 6e74 0a20  locked_account. 
+0001be60: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+0001be70: 7420 7265 7375 6c74 5b22 7478 225d 5b22  t result["tx"]["
+0001be80: 7661 6c75 6522 5d20 3d3d 2074 786e 5f70  value"] == txn_p
+0001be90: 6172 616d 735b 2276 616c 7565 225d 0a20  arams["value"]. 
+0001bea0: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+0001beb0: 7420 7265 7375 6c74 5b22 7478 225d 5b22  t result["tx"]["
+0001bec0: 6761 7322 5d20 3d3d 2074 786e 5f70 6172  gas"] == txn_par
+0001bed0: 616d 735b 2267 6173 225d 0a20 2020 2020  ams["gas"].     
+0001bee0: 2020 2020 2020 2061 7373 6572 7420 7265         assert re
+0001bef0: 7375 6c74 5b22 7478 225d 5b22 6d61 7846  sult["tx"]["maxF
+0001bf00: 6565 5065 7247 6173 225d 203d 3d20 7478  eePerGas"] == tx
+0001bf10: 6e5f 7061 7261 6d73 5b22 6d61 7846 6565  n_params["maxFee
+0001bf20: 5065 7247 6173 225d 0a20 2020 2020 2020  PerGas"].       
+0001bf30: 2020 2020 2061 7373 6572 7420 280a 2020       assert (.  
+0001bf40: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001bf50: 7375 6c74 5b22 7478 225d 5b22 6d61 7850  sult["tx"]["maxP
+0001bf60: 7269 6f72 6974 7946 6565 5065 7247 6173  riorityFeePerGas
+0001bf70: 225d 0a20 2020 2020 2020 2020 2020 2020  "].             
+0001bf80: 2020 203d 3d20 7478 6e5f 7061 7261 6d73     == txn_params
+0001bf90: 5b22 6d61 7850 7269 6f72 6974 7946 6565  ["maxPriorityFee
+0001bfa0: 5065 7247 6173 225d 0a20 2020 2020 2020  PerGas"].       
+0001bfb0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+0001bfc0: 2020 2061 7373 6572 7420 7265 7375 6c74     assert result
+0001bfd0: 5b22 7478 225d 5b22 6e6f 6e63 6522 5d20  ["tx"]["nonce"] 
+0001bfe0: 3d3d 2074 786e 5f70 6172 616d 735b 226e  == txn_params["n
+0001bff0: 6f6e 6365 225d 0a0a 2020 2020 6465 6620  once"]..    def 
+0001c000: 7465 7374 5f65 7468 5f73 656e 645f 7472  test_eth_send_tr
+0001c010: 616e 7361 6374 696f 6e5f 6164 6472 5f63  ansaction_addr_c
+0001c020: 6865 636b 7375 6d5f 7265 7175 6972 6564  hecksum_required
+0001c030: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+0001c040: 7733 3a20 2257 6562 3322 2c20 756e 6c6f  w3: "Web3", unlo
+0001c050: 636b 6564 5f61 6363 6f75 6e74 3a20 4368  cked_account: Ch
+0001c060: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
+0001c070: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+0001c080: 2020 2020 206e 6f6e 5f63 6865 636b 7375       non_checksu
+0001c090: 6d5f 6164 6472 203d 2075 6e6c 6f63 6b65  m_addr = unlocke
+0001c0a0: 645f 6163 636f 756e 742e 6c6f 7765 7228  d_account.lower(
+0001c0b0: 290a 2020 2020 2020 2020 7478 6e5f 7061  ).        txn_pa
+0001c0c0: 7261 6d73 3a20 5478 5061 7261 6d73 203d  rams: TxParams =
+0001c0d0: 207b 0a20 2020 2020 2020 2020 2020 2022   {.            "
+0001c0e0: 6672 6f6d 223a 2075 6e6c 6f63 6b65 645f  from": unlocked_
+0001c0f0: 6163 636f 756e 742c 0a20 2020 2020 2020  account,.       
+0001c100: 2020 2020 2022 746f 223a 2075 6e6c 6f63       "to": unloc
+0001c110: 6b65 645f 6163 636f 756e 742c 0a20 2020  ked_account,.   
+0001c120: 2020 2020 2020 2020 2022 7661 6c75 6522           "value"
+0001c130: 3a20 5765 6928 3129 2c0a 2020 2020 2020  : Wei(1),.      
+0001c140: 2020 2020 2020 2267 6173 223a 2032 3130        "gas": 210
+0001c150: 3030 2c0a 2020 2020 2020 2020 2020 2020  00,.            
+0001c160: 226d 6178 4665 6550 6572 4761 7322 3a20  "maxFeePerGas": 
+0001c170: 7733 2e74 6f5f 7765 6928 322c 2022 6777  w3.to_wei(2, "gw
+0001c180: 6569 2229 2c0a 2020 2020 2020 2020 2020  ei"),.          
+0001c190: 2020 226d 6178 5072 696f 7269 7479 4665    "maxPriorityFe
+0001c1a0: 6550 6572 4761 7322 3a20 7733 2e74 6f5f  ePerGas": w3.to_
+0001c1b0: 7765 6928 312c 2022 6777 6569 2229 2c0a  wei(1, "gwei"),.
+0001c1c0: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
+0001c1d0: 2020 2077 6974 6820 7079 7465 7374 2e72     with pytest.r
+0001c1e0: 6169 7365 7328 496e 7661 6c69 6441 6464  aises(InvalidAdd
+0001c1f0: 7265 7373 293a 0a20 2020 2020 2020 2020  ress):.         
+0001c200: 2020 2069 6e76 616c 6964 5f70 6172 616d     invalid_param
+0001c210: 7320 3d20 6361 7374 280a 2020 2020 2020  s = cast(.      
+0001c220: 2020 2020 2020 2020 2020 5478 5061 7261            TxPara
+0001c230: 6d73 2c20 6469 6374 2874 786e 5f70 6172  ms, dict(txn_par
+0001c240: 616d 732c 202a 2a7b 2266 726f 6d22 3a20  ams, **{"from": 
+0001c250: 6e6f 6e5f 6368 6563 6b73 756d 5f61 6464  non_checksum_add
+0001c260: 727d 290a 2020 2020 2020 2020 2020 2020  r}).            
+0001c270: 290a 2020 2020 2020 2020 2020 2020 7733  ).            w3
+0001c280: 2e65 7468 2e73 656e 645f 7472 616e 7361  .eth.send_transa
+0001c290: 6374 696f 6e28 696e 7661 6c69 645f 7061  ction(invalid_pa
+0001c2a0: 7261 6d73 290a 0a20 2020 2020 2020 2077  rams)..        w
+0001c2b0: 6974 6820 7079 7465 7374 2e72 6169 7365  ith pytest.raise
+0001c2c0: 7328 496e 7661 6c69 6441 6464 7265 7373  s(InvalidAddress
+0001c2d0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
+0001c2e0: 6e76 616c 6964 5f70 6172 616d 7320 3d20  nvalid_params = 
+0001c2f0: 6361 7374 280a 2020 2020 2020 2020 2020  cast(.          
+0001c300: 2020 2020 2020 5478 5061 7261 6d73 2c20        TxParams, 
+0001c310: 6469 6374 2874 786e 5f70 6172 616d 732c  dict(txn_params,
+0001c320: 202a 2a7b 2274 6f22 3a20 6e6f 6e5f 6368   **{"to": non_ch
+0001c330: 6563 6b73 756d 5f61 6464 727d 290a 2020  ecksum_addr}).  
+0001c340: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0001c350: 2020 2020 2020 2020 7733 2e65 7468 2e73          w3.eth.s
+0001c360: 656e 645f 7472 616e 7361 6374 696f 6e28  end_transaction(
+0001c370: 696e 7661 6c69 645f 7061 7261 6d73 290a  invalid_params).
+0001c380: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
+0001c390: 685f 7365 6e64 5f74 7261 6e73 6163 7469  h_send_transacti
+0001c3a0: 6f6e 5f6c 6567 6163 7928 0a20 2020 2020  on_legacy(.     
+0001c3b0: 2020 2073 656c 662c 2077 333a 2022 5765     self, w3: "We
+0001c3c0: 6233 222c 2075 6e6c 6f63 6b65 645f 6163  b3", unlocked_ac
+0001c3d0: 636f 756e 745f 6475 616c 5f74 7970 653a  count_dual_type:
+0001c3e0: 2043 6865 636b 7375 6d41 6464 7265 7373   ChecksumAddress
+0001c3f0: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+0001c400: 2020 2020 2020 2020 7478 6e5f 7061 7261          txn_para
+0001c410: 6d73 3a20 5478 5061 7261 6d73 203d 207b  ms: TxParams = {
+0001c420: 0a20 2020 2020 2020 2020 2020 2022 6672  .            "fr
+0001c430: 6f6d 223a 2075 6e6c 6f63 6b65 645f 6163  om": unlocked_ac
+0001c440: 636f 756e 745f 6475 616c 5f74 7970 652c  count_dual_type,
+0001c450: 0a20 2020 2020 2020 2020 2020 2022 746f  .            "to
+0001c460: 223a 2075 6e6c 6f63 6b65 645f 6163 636f  ": unlocked_acco
+0001c470: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
+0001c480: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
+0001c490: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
+0001c4a0: 2020 2020 2020 2020 2267 6173 223a 2032          "gas": 2
+0001c4b0: 3130 3030 2c0a 2020 2020 2020 2020 2020  1000,.          
+0001c4c0: 2020 2267 6173 5072 6963 6522 3a20 7733    "gasPrice": w3
+0001c4d0: 2e74 6f5f 7765 6928 0a20 2020 2020 2020  .to_wei(.       
+0001c4e0: 2020 2020 2020 2020 2031 2c20 2267 7765           1, "gwe
+0001c4f0: 6922 0a20 2020 2020 2020 2020 2020 2029  i".            )
+0001c500: 2c20 2023 2070 6f73 742d 6c6f 6e64 6f6e  ,  # post-london
+0001c510: 206e 6565 6473 2074 6f20 6265 206d 6f72   needs to be mor
+0001c520: 6520 7468 616e 2074 6865 2062 6173 6520  e than the base 
+0001c530: 6665 650a 2020 2020 2020 2020 7d0a 2020  fee.        }.  
+0001c540: 2020 2020 2020 7478 6e5f 6861 7368 203d        txn_hash =
+0001c550: 2077 332e 6574 682e 7365 6e64 5f74 7261   w3.eth.send_tra
+0001c560: 6e73 6163 7469 6f6e 2874 786e 5f70 6172  nsaction(txn_par
+0001c570: 616d 7329 0a20 2020 2020 2020 2074 786e  ams).        txn
+0001c580: 203d 2077 332e 6574 682e 6765 745f 7472   = w3.eth.get_tr
+0001c590: 616e 7361 6374 696f 6e28 7478 6e5f 6861  ansaction(txn_ha
+0001c5a0: 7368 290a 0a20 2020 2020 2020 2061 7373  sh)..        ass
+0001c5b0: 6572 7420 6973 5f73 616d 655f 6164 6472  ert is_same_addr
+0001c5c0: 6573 7328 7478 6e5b 2266 726f 6d22 5d2c  ess(txn["from"],
+0001c5d0: 2063 6173 7428 4368 6563 6b73 756d 4164   cast(ChecksumAd
+0001c5e0: 6472 6573 732c 2074 786e 5f70 6172 616d  dress, txn_param
+0001c5f0: 735b 2266 726f 6d22 5d29 290a 2020 2020  s["from"])).    
+0001c600: 2020 2020 6173 7365 7274 2069 735f 7361      assert is_sa
+0001c610: 6d65 5f61 6464 7265 7373 2874 786e 5b22  me_address(txn["
+0001c620: 746f 225d 2c20 6361 7374 2843 6865 636b  to"], cast(Check
+0001c630: 7375 6d41 6464 7265 7373 2c20 7478 6e5f  sumAddress, txn_
+0001c640: 7061 7261 6d73 5b22 746f 225d 2929 0a20  params["to"])). 
+0001c650: 2020 2020 2020 2061 7373 6572 7420 7478         assert tx
+0001c660: 6e5b 2276 616c 7565 225d 203d 3d20 310a  n["value"] == 1.
+0001c670: 2020 2020 2020 2020 6173 7365 7274 2074          assert t
+0001c680: 786e 5b22 6761 7322 5d20 3d3d 2032 3130  xn["gas"] == 210
+0001c690: 3030 0a20 2020 2020 2020 2061 7373 6572  00.        asser
+0001c6a0: 7420 7478 6e5b 2267 6173 5072 6963 6522  t txn["gasPrice"
+0001c6b0: 5d20 3d3d 2074 786e 5f70 6172 616d 735b  ] == txn_params[
+0001c6c0: 2267 6173 5072 6963 6522 5d0a 0a20 2020  "gasPrice"]..   
+0001c6d0: 2064 6566 2074 6573 745f 6574 685f 7365   def test_eth_se
+0001c6e0: 6e64 5f74 7261 6e73 6163 7469 6f6e 280a  nd_transaction(.
+0001c6f0: 2020 2020 2020 2020 7365 6c66 2c20 7733          self, w3
+0001c700: 3a20 2257 6562 3322 2c20 756e 6c6f 636b  : "Web3", unlock
+0001c710: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
+0001c720: 7479 7065 3a20 4368 6563 6b73 756d 4164  type: ChecksumAd
+0001c730: 6472 6573 730a 2020 2020 2920 2d3e 204e  dress.    ) -> N
+0001c740: 6f6e 653a 0a20 2020 2020 2020 2074 786e  one:.        txn
+0001c750: 5f70 6172 616d 733a 2054 7850 6172 616d  _params: TxParam
+0001c760: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
+0001c770: 2020 2266 726f 6d22 3a20 756e 6c6f 636b    "from": unlock
+0001c780: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
+0001c790: 7479 7065 2c0a 2020 2020 2020 2020 2020  type,.          
+0001c7a0: 2020 2274 6f22 3a20 756e 6c6f 636b 6564    "to": unlocked
+0001c7b0: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
+0001c7c0: 7065 2c0a 2020 2020 2020 2020 2020 2020  pe,.            
+0001c7d0: 2276 616c 7565 223a 2057 6569 2831 292c  "value": Wei(1),
+0001c7e0: 0a20 2020 2020 2020 2020 2020 2022 6761  .            "ga
+0001c7f0: 7322 3a20 3231 3030 302c 0a20 2020 2020  s": 21000,.     
+0001c800: 2020 2020 2020 2022 6d61 7846 6565 5065         "maxFeePe
+0001c810: 7247 6173 223a 2077 332e 746f 5f77 6569  rGas": w3.to_wei
+0001c820: 2833 2c20 2267 7765 6922 292c 0a20 2020  (3, "gwei"),.   
+0001c830: 2020 2020 2020 2020 2022 6d61 7850 7269           "maxPri
+0001c840: 6f72 6974 7946 6565 5065 7247 6173 223a  orityFeePerGas":
+0001c850: 2077 332e 746f 5f77 6569 2831 2c20 2267   w3.to_wei(1, "g
+0001c860: 7765 6922 292c 0a20 2020 2020 2020 207d  wei"),.        }
+0001c870: 0a20 2020 2020 2020 2074 786e 5f68 6173  .        txn_has
+0001c880: 6820 3d20 7733 2e65 7468 2e73 656e 645f  h = w3.eth.send_
+0001c890: 7472 616e 7361 6374 696f 6e28 7478 6e5f  transaction(txn_
+0001c8a0: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+0001c8b0: 7478 6e20 3d20 7733 2e65 7468 2e67 6574  txn = w3.eth.get
+0001c8c0: 5f74 7261 6e73 6163 7469 6f6e 2874 786e  _transaction(txn
+0001c8d0: 5f68 6173 6829 0a0a 2020 2020 2020 2020  _hash)..        
+0001c8e0: 6173 7365 7274 2069 735f 7361 6d65 5f61  assert is_same_a
+0001c8f0: 6464 7265 7373 2874 786e 5b22 6672 6f6d  ddress(txn["from
+0001c900: 225d 2c20 6361 7374 2843 6865 636b 7375  "], cast(Checksu
+0001c910: 6d41 6464 7265 7373 2c20 7478 6e5f 7061  mAddress, txn_pa
+0001c920: 7261 6d73 5b22 6672 6f6d 225d 2929 0a20  rams["from"])). 
+0001c930: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+0001c940: 5f73 616d 655f 6164 6472 6573 7328 7478  _same_address(tx
+0001c950: 6e5b 2274 6f22 5d2c 2063 6173 7428 4368  n["to"], cast(Ch
+0001c960: 6563 6b73 756d 4164 6472 6573 732c 2074  ecksumAddress, t
+0001c970: 786e 5f70 6172 616d 735b 2274 6f22 5d29  xn_params["to"])
+0001c980: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+0001c990: 2074 786e 5b22 7661 6c75 6522 5d20 3d3d   txn["value"] ==
+0001c9a0: 2031 0a20 2020 2020 2020 2061 7373 6572   1.        asser
+0001c9b0: 7420 7478 6e5b 2267 6173 225d 203d 3d20  t txn["gas"] == 
+0001c9c0: 3231 3030 300a 2020 2020 2020 2020 6173  21000.        as
+0001c9d0: 7365 7274 2074 786e 5b22 6d61 7846 6565  sert txn["maxFee
+0001c9e0: 5065 7247 6173 225d 203d 3d20 7478 6e5f  PerGas"] == txn_
+0001c9f0: 7061 7261 6d73 5b22 6d61 7846 6565 5065  params["maxFeePe
+0001ca00: 7247 6173 225d 0a20 2020 2020 2020 2061  rGas"].        a
+0001ca10: 7373 6572 7420 7478 6e5b 226d 6178 5072  ssert txn["maxPr
+0001ca20: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
+0001ca30: 5d20 3d3d 2074 786e 5f70 6172 616d 735b  ] == txn_params[
+0001ca40: 226d 6178 5072 696f 7269 7479 4665 6550  "maxPriorityFeeP
+0001ca50: 6572 4761 7322 5d0a 2020 2020 2020 2020  erGas"].        
+0001ca60: 6173 7365 7274 2074 786e 5b22 6761 7350  assert txn["gasP
+0001ca70: 7269 6365 225d 203d 3d20 7478 6e5f 7061  rice"] == txn_pa
+0001ca80: 7261 6d73 5b22 6d61 7846 6565 5065 7247  rams["maxFeePerG
+0001ca90: 6173 225d 0a0a 2020 2020 6465 6620 7465  as"]..    def te
+0001caa0: 7374 5f65 7468 5f73 656e 645f 7472 616e  st_eth_send_tran
+0001cab0: 7361 6374 696f 6e5f 7769 7468 5f6e 6f6e  saction_with_non
+0001cac0: 6365 280a 2020 2020 2020 2020 7365 6c66  ce(.        self
+0001cad0: 2c20 7733 3a20 2257 6562 3322 2c20 756e  , w3: "Web3", un
+0001cae0: 6c6f 636b 6564 5f61 6363 6f75 6e74 3a20  locked_account: 
+0001caf0: 4368 6563 6b73 756d 4164 6472 6573 730a  ChecksumAddress.
+0001cb00: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+0001cb10: 2020 2020 2020 206d 696e 655f 7065 6e64         mine_pend
+0001cb20: 696e 675f 626c 6f63 6b28 7733 2920 2023  ing_block(w3)  #
+0001cb30: 2067 6976 6573 2061 6e20 6163 6375 7261   gives an accura
+0001cb40: 7465 2074 7261 6e73 6163 7469 6f6e 2063  te transaction c
+0001cb50: 6f75 6e74 2061 6674 6572 206d 696e 696e  ount after minin
+0001cb60: 670a 0a20 2020 2020 2020 2074 786e 5f70  g..        txn_p
+0001cb70: 6172 616d 733a 2054 7850 6172 616d 7320  arams: TxParams 
+0001cb80: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0001cb90: 2266 726f 6d22 3a20 756e 6c6f 636b 6564  "from": unlocked
+0001cba0: 5f61 6363 6f75 6e74 2c0a 2020 2020 2020  _account,.      
+0001cbb0: 2020 2020 2020 2274 6f22 3a20 756e 6c6f        "to": unlo
+0001cbc0: 636b 6564 5f61 6363 6f75 6e74 2c0a 2020  cked_account,.  
+0001cbd0: 2020 2020 2020 2020 2020 2276 616c 7565            "value
+0001cbe0: 223a 2057 6569 2831 292c 0a20 2020 2020  ": Wei(1),.     
+0001cbf0: 2020 2020 2020 2022 6761 7322 3a20 3231         "gas": 21
+0001cc00: 3030 302c 0a20 2020 2020 2020 2020 2020  000,.           
+0001cc10: 2023 2075 6e69 7175 6520 6d61 7846 6565   # unique maxFee
+0001cc20: 5065 7247 6173 2074 6f20 656e 7375 7265  PerGas to ensure
+0001cc30: 2074 7261 6e73 6163 7469 6f6e 2068 6173   transaction has
+0001cc40: 6820 6469 6666 6572 656e 7420 6672 6f6d  h different from
+0001cc50: 206f 7468 6572 2074 6573 7473 0a20 2020   other tests.   
+0001cc60: 2020 2020 2020 2020 2022 6d61 7846 6565           "maxFee
+0001cc70: 5065 7247 6173 223a 2077 332e 746f 5f77  PerGas": w3.to_w
+0001cc80: 6569 2834 2e33 3231 2c20 2267 7765 6922  ei(4.321, "gwei"
+0001cc90: 292c 0a20 2020 2020 2020 2020 2020 2022  ),.            "
+0001cca0: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
+0001ccb0: 7247 6173 223a 2077 332e 746f 5f77 6569  rGas": w3.to_wei
+0001ccc0: 2831 2c20 2267 7765 6922 292c 0a20 2020  (1, "gwei"),.   
+0001ccd0: 2020 2020 2020 2020 2022 6e6f 6e63 6522           "nonce"
+0001cce0: 3a20 7733 2e65 7468 2e67 6574 5f74 7261  : w3.eth.get_tra
+0001ccf0: 6e73 6163 7469 6f6e 5f63 6f75 6e74 2875  nsaction_count(u
+0001cd00: 6e6c 6f63 6b65 645f 6163 636f 756e 7429  nlocked_account)
+0001cd10: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+0001cd20: 2020 2020 7478 6e5f 6861 7368 203d 2077      txn_hash = w
+0001cd30: 332e 6574 682e 7365 6e64 5f74 7261 6e73  3.eth.send_trans
+0001cd40: 6163 7469 6f6e 2874 786e 5f70 6172 616d  action(txn_param
+0001cd50: 7329 0a20 2020 2020 2020 2074 786e 203d  s).        txn =
+0001cd60: 2077 332e 6574 682e 6765 745f 7472 616e   w3.eth.get_tran
+0001cd70: 7361 6374 696f 6e28 7478 6e5f 6861 7368  saction(txn_hash
+0001cd80: 290a 0a20 2020 2020 2020 2061 7373 6572  )..        asser
+0001cd90: 7420 6973 5f73 616d 655f 6164 6472 6573  t is_same_addres
+0001cda0: 7328 7478 6e5b 2266 726f 6d22 5d2c 2063  s(txn["from"], c
+0001cdb0: 6173 7428 4368 6563 6b73 756d 4164 6472  ast(ChecksumAddr
+0001cdc0: 6573 732c 2074 786e 5f70 6172 616d 735b  ess, txn_params[
+0001cdd0: 2266 726f 6d22 5d29 290a 2020 2020 2020  "from"])).      
+0001cde0: 2020 6173 7365 7274 2069 735f 7361 6d65    assert is_same
+0001cdf0: 5f61 6464 7265 7373 2874 786e 5b22 746f  _address(txn["to
+0001ce00: 225d 2c20 6361 7374 2843 6865 636b 7375  "], cast(Checksu
+0001ce10: 6d41 6464 7265 7373 2c20 7478 6e5f 7061  mAddress, txn_pa
+0001ce20: 7261 6d73 5b22 746f 225d 2929 0a20 2020  rams["to"])).   
+0001ce30: 2020 2020 2061 7373 6572 7420 7478 6e5b       assert txn[
+0001ce40: 2276 616c 7565 225d 203d 3d20 310a 2020  "value"] == 1.  
+0001ce50: 2020 2020 2020 6173 7365 7274 2074 786e        assert txn
+0001ce60: 5b22 6761 7322 5d20 3d3d 2032 3130 3030  ["gas"] == 21000
+0001ce70: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+0001ce80: 7478 6e5b 226d 6178 4665 6550 6572 4761  txn["maxFeePerGa
+0001ce90: 7322 5d20 3d3d 2074 786e 5f70 6172 616d  s"] == txn_param
+0001cea0: 735b 226d 6178 4665 6550 6572 4761 7322  s["maxFeePerGas"
+0001ceb0: 5d0a 2020 2020 2020 2020 6173 7365 7274  ].        assert
+0001cec0: 2074 786e 5b22 6d61 7850 7269 6f72 6974   txn["maxPriorit
+0001ced0: 7946 6565 5065 7247 6173 225d 203d 3d20  yFeePerGas"] == 
+0001cee0: 7478 6e5f 7061 7261 6d73 5b22 6d61 7850  txn_params["maxP
+0001cef0: 7269 6f72 6974 7946 6565 5065 7247 6173  riorityFeePerGas
+0001cf00: 225d 0a20 2020 2020 2020 2061 7373 6572  "].        asser
+0001cf10: 7420 7478 6e5b 226e 6f6e 6365 225d 203d  t txn["nonce"] =
+0001cf20: 3d20 7478 6e5f 7061 7261 6d73 5b22 6e6f  = txn_params["no
+0001cf30: 6e63 6522 5d0a 2020 2020 2020 2020 6173  nce"].        as
+0001cf40: 7365 7274 2074 786e 5b22 6761 7350 7269  sert txn["gasPri
+0001cf50: 6365 225d 203d 3d20 7478 6e5f 7061 7261  ce"] == txn_para
+0001cf60: 6d73 5b22 6d61 7846 6565 5065 7247 6173  ms["maxFeePerGas
+0001cf70: 225d 0a0a 2020 2020 6465 6620 7465 7374  "]..    def test
+0001cf80: 5f65 7468 5f73 656e 645f 7472 616e 7361  _eth_send_transa
+0001cf90: 6374 696f 6e5f 6465 6661 756c 745f 6665  ction_default_fe
+0001cfa0: 6573 280a 2020 2020 2020 2020 7365 6c66  es(.        self
+0001cfb0: 2c20 7733 3a20 2257 6562 3322 2c20 756e  , w3: "Web3", un
+0001cfc0: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
+0001cfd0: 7561 6c5f 7479 7065 3a20 4368 6563 6b73  ual_type: Checks
+0001cfe0: 756d 4164 6472 6573 730a 2020 2020 2920  umAddress.    ) 
+0001cff0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+0001d000: 2074 786e 5f70 6172 616d 733a 2054 7850   txn_params: TxP
+0001d010: 6172 616d 7320 3d20 7b0a 2020 2020 2020  arams = {.      
+0001d020: 2020 2020 2020 2266 726f 6d22 3a20 756e        "from": un
+0001d030: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
+0001d040: 7561 6c5f 7479 7065 2c0a 2020 2020 2020  ual_type,.      
+0001d050: 2020 2020 2020 2274 6f22 3a20 756e 6c6f        "to": unlo
+0001d060: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
+0001d070: 6c5f 7479 7065 2c0a 2020 2020 2020 2020  l_type,.        
+0001d080: 2020 2020 2276 616c 7565 223a 2057 6569      "value": Wei
+0001d090: 2831 292c 0a20 2020 2020 2020 2020 2020  (1),.           
+0001d0a0: 2022 6761 7322 3a20 3231 3030 302c 0a20   "gas": 21000,. 
+0001d0b0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+0001d0c0: 2074 786e 5f68 6173 6820 3d20 7733 2e65   txn_hash = w3.e
+0001d0d0: 7468 2e73 656e 645f 7472 616e 7361 6374  th.send_transact
+0001d0e0: 696f 6e28 7478 6e5f 7061 7261 6d73 290a  ion(txn_params).
+0001d0f0: 2020 2020 2020 2020 7478 6e20 3d20 7733          txn = w3
+0001d100: 2e65 7468 2e67 6574 5f74 7261 6e73 6163  .eth.get_transac
+0001d110: 7469 6f6e 2874 786e 5f68 6173 6829 0a0a  tion(txn_hash)..
+0001d120: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+0001d130: 735f 7361 6d65 5f61 6464 7265 7373 2874  s_same_address(t
+0001d140: 786e 5b22 6672 6f6d 225d 2c20 6361 7374  xn["from"], cast
+0001d150: 2843 6865 636b 7375 6d41 6464 7265 7373  (ChecksumAddress
+0001d160: 2c20 7478 6e5f 7061 7261 6d73 5b22 6672  , txn_params["fr
+0001d170: 6f6d 225d 2929 0a20 2020 2020 2020 2061  om"])).        a
+0001d180: 7373 6572 7420 6973 5f73 616d 655f 6164  ssert is_same_ad
+0001d190: 6472 6573 7328 7478 6e5b 2274 6f22 5d2c  dress(txn["to"],
+0001d1a0: 2063 6173 7428 4368 6563 6b73 756d 4164   cast(ChecksumAd
+0001d1b0: 6472 6573 732c 2074 786e 5f70 6172 616d  dress, txn_param
+0001d1c0: 735b 2274 6f22 5d29 290a 2020 2020 2020  s["to"])).      
+0001d1d0: 2020 6173 7365 7274 2074 786e 5b22 7661    assert txn["va
+0001d1e0: 6c75 6522 5d20 3d3d 2031 0a20 2020 2020  lue"] == 1.     
+0001d1f0: 2020 2061 7373 6572 7420 7478 6e5b 2267     assert txn["g
+0001d200: 6173 225d 203d 3d20 3231 3030 300a 2020  as"] == 21000.  
+0001d210: 2020 2020 2020 6173 7365 7274 2074 786e        assert txn
+0001d220: 5b22 6d61 7850 7269 6f72 6974 7946 6565  ["maxPriorityFee
+0001d230: 5065 7247 6173 225d 203d 3d20 3120 2a20  PerGas"] == 1 * 
+0001d240: 3130 2a2a 390a 2020 2020 2020 2020 6173  10**9.        as
+0001d250: 7365 7274 2074 786e 5b22 6d61 7846 6565  sert txn["maxFee
+0001d260: 5065 7247 6173 225d 203e 3d20 3120 2a20  PerGas"] >= 1 * 
+0001d270: 3130 2a2a 390a 2020 2020 2020 2020 6173  10**9.        as
+0001d280: 7365 7274 2074 786e 5b22 6761 7350 7269  sert txn["gasPri
+0001d290: 6365 225d 203d 3d20 7478 6e5b 226d 6178  ce"] == txn["max
+0001d2a0: 4665 6550 6572 4761 7322 5d0a 0a20 2020  FeePerGas"]..   
+0001d2b0: 2064 6566 2074 6573 745f 6574 685f 7365   def test_eth_se
+0001d2c0: 6e64 5f74 7261 6e73 6163 7469 6f6e 5f68  nd_transaction_h
+0001d2d0: 6578 5f66 6565 7328 0a20 2020 2020 2020  ex_fees(.       
+0001d2e0: 2073 656c 662c 2077 333a 2022 5765 6233   self, w3: "Web3
+0001d2f0: 222c 2075 6e6c 6f63 6b65 645f 6163 636f  ", unlocked_acco
+0001d300: 756e 745f 6475 616c 5f74 7970 653a 2043  unt_dual_type: C
+0001d310: 6865 636b 7375 6d41 6464 7265 7373 0a20  hecksumAddress. 
+0001d320: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
+0001d330: 2020 2020 2020 7478 6e5f 7061 7261 6d73        txn_params
+0001d340: 3a20 5478 5061 7261 6d73 203d 207b 0a20  : TxParams = {. 
+0001d350: 2020 2020 2020 2020 2020 2022 6672 6f6d             "from
+0001d360: 223a 2075 6e6c 6f63 6b65 645f 6163 636f  ": unlocked_acco
+0001d370: 756e 745f 6475 616c 5f74 7970 652c 0a20  unt_dual_type,. 
+0001d380: 2020 2020 2020 2020 2020 2022 746f 223a             "to":
+0001d390: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
+0001d3a0: 745f 6475 616c 5f74 7970 652c 0a20 2020  t_dual_type,.   
+0001d3b0: 2020 2020 2020 2020 2022 7661 6c75 6522           "value"
+0001d3c0: 3a20 5765 6928 3129 2c0a 2020 2020 2020  : Wei(1),.      
+0001d3d0: 2020 2020 2020 2267 6173 223a 2032 3130        "gas": 210
+0001d3e0: 3030 2c0a 2020 2020 2020 2020 2020 2020  00,.            
+0001d3f0: 226d 6178 4665 6550 6572 4761 7322 3a20  "maxFeePerGas": 
+0001d400: 6865 7828 3235 3020 2a20 3130 2a2a 3929  hex(250 * 10**9)
+0001d410: 2c0a 2020 2020 2020 2020 2020 2020 226d  ,.            "m
+0001d420: 6178 5072 696f 7269 7479 4665 6550 6572  axPriorityFeePer
+0001d430: 4761 7322 3a20 6865 7828 3220 2a20 3130  Gas": hex(2 * 10
+0001d440: 2a2a 3929 2c0a 2020 2020 2020 2020 7d0a  **9),.        }.
+0001d450: 2020 2020 2020 2020 7478 6e5f 6861 7368          txn_hash
+0001d460: 203d 2077 332e 6574 682e 7365 6e64 5f74   = w3.eth.send_t
+0001d470: 7261 6e73 6163 7469 6f6e 2874 786e 5f70  ransaction(txn_p
+0001d480: 6172 616d 7329 0a20 2020 2020 2020 2074  arams).        t
+0001d490: 786e 203d 2077 332e 6574 682e 6765 745f  xn = w3.eth.get_
+0001d4a0: 7472 616e 7361 6374 696f 6e28 7478 6e5f  transaction(txn_
+0001d4b0: 6861 7368 290a 0a20 2020 2020 2020 2061  hash)..        a
+0001d4c0: 7373 6572 7420 6973 5f73 616d 655f 6164  ssert is_same_ad
+0001d4d0: 6472 6573 7328 7478 6e5b 2266 726f 6d22  dress(txn["from"
+0001d4e0: 5d2c 2063 6173 7428 4368 6563 6b73 756d  ], cast(Checksum
+0001d4f0: 4164 6472 6573 732c 2074 786e 5f70 6172  Address, txn_par
+0001d500: 616d 735b 2266 726f 6d22 5d29 290a 2020  ams["from"])).  
+0001d510: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+0001d520: 7361 6d65 5f61 6464 7265 7373 2874 786e  same_address(txn
+0001d530: 5b22 746f 225d 2c20 6361 7374 2843 6865  ["to"], cast(Che
+0001d540: 636b 7375 6d41 6464 7265 7373 2c20 7478  cksumAddress, tx
+0001d550: 6e5f 7061 7261 6d73 5b22 746f 225d 2929  n_params["to"]))
+0001d560: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+0001d570: 7478 6e5b 2276 616c 7565 225d 203d 3d20  txn["value"] == 
+0001d580: 310a 2020 2020 2020 2020 6173 7365 7274  1.        assert
+0001d590: 2074 786e 5b22 6761 7322 5d20 3d3d 2032   txn["gas"] == 2
+0001d5a0: 3130 3030 0a20 2020 2020 2020 2061 7373  1000.        ass
+0001d5b0: 6572 7420 7478 6e5b 226d 6178 4665 6550  ert txn["maxFeeP
+0001d5c0: 6572 4761 7322 5d20 3d3d 2032 3530 202a  erGas"] == 250 *
+0001d5d0: 2031 302a 2a39 0a20 2020 2020 2020 2061   10**9.        a
+0001d5e0: 7373 6572 7420 7478 6e5b 226d 6178 5072  ssert txn["maxPr
+0001d5f0: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
+0001d600: 5d20 3d3d 2032 202a 2031 302a 2a39 0a0a  ] == 2 * 10**9..
+0001d610: 2020 2020 6465 6620 7465 7374 5f65 7468      def test_eth
+0001d620: 5f73 656e 645f 7472 616e 7361 6374 696f  _send_transactio
+0001d630: 6e5f 6e6f 5f67 6173 280a 2020 2020 2020  n_no_gas(.      
+0001d640: 2020 7365 6c66 2c20 7733 3a20 2257 6562    self, w3: "Web
+0001d650: 3322 2c20 756e 6c6f 636b 6564 5f61 6363  3", unlocked_acc
+0001d660: 6f75 6e74 5f64 7561 6c5f 7479 7065 3a20  ount_dual_type: 
+0001d670: 4368 6563 6b73 756d 4164 6472 6573 730a  ChecksumAddress.
+0001d680: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+0001d690: 2020 2020 2020 2074 786e 5f70 6172 616d         txn_param
+0001d6a0: 733a 2054 7850 6172 616d 7320 3d20 7b0a  s: TxParams = {.
+0001d6b0: 2020 2020 2020 2020 2020 2020 2266 726f              "fro
+0001d6c0: 6d22 3a20 756e 6c6f 636b 6564 5f61 6363  m": unlocked_acc
+0001d6d0: 6f75 6e74 5f64 7561 6c5f 7479 7065 2c0a  ount_dual_type,.
+0001d6e0: 2020 2020 2020 2020 2020 2020 2274 6f22              "to"
+0001d6f0: 3a20 756e 6c6f 636b 6564 5f61 6363 6f75  : unlocked_accou
+0001d700: 6e74 5f64 7561 6c5f 7479 7065 2c0a 2020  nt_dual_type,.  
+0001d710: 2020 2020 2020 2020 2020 2276 616c 7565            "value
+0001d720: 223a 2057 6569 2831 292c 0a20 2020 2020  ": Wei(1),.     
+0001d730: 2020 2020 2020 2022 6d61 7846 6565 5065         "maxFeePe
+0001d740: 7247 6173 223a 2057 6569 2832 3530 202a  rGas": Wei(250 *
+0001d750: 2031 302a 2a39 292c 0a20 2020 2020 2020   10**9),.       
+0001d760: 2020 2020 2022 6d61 7850 7269 6f72 6974       "maxPriorit
+0001d770: 7946 6565 5065 7247 6173 223a 2057 6569  yFeePerGas": Wei
+0001d780: 2832 202a 2031 302a 2a39 292c 0a20 2020  (2 * 10**9),.   
+0001d790: 2020 2020 207d 0a20 2020 2020 2020 2074       }.        t
+0001d7a0: 786e 5f68 6173 6820 3d20 7733 2e65 7468  xn_hash = w3.eth
+0001d7b0: 2e73 656e 645f 7472 616e 7361 6374 696f  .send_transactio
+0001d7c0: 6e28 7478 6e5f 7061 7261 6d73 290a 2020  n(txn_params).  
+0001d7d0: 2020 2020 2020 7478 6e20 3d20 7733 2e65        txn = w3.e
+0001d7e0: 7468 2e67 6574 5f74 7261 6e73 6163 7469  th.get_transacti
+0001d7f0: 6f6e 2874 786e 5f68 6173 6829 0a0a 2020  on(txn_hash)..  
+0001d800: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+0001d810: 7361 6d65 5f61 6464 7265 7373 2874 786e  same_address(txn
+0001d820: 5b22 6672 6f6d 225d 2c20 6361 7374 2843  ["from"], cast(C
+0001d830: 6865 636b 7375 6d41 6464 7265 7373 2c20  hecksumAddress, 
+0001d840: 7478 6e5f 7061 7261 6d73 5b22 6672 6f6d  txn_params["from
+0001d850: 225d 2929 0a20 2020 2020 2020 2061 7373  "])).        ass
+0001d860: 6572 7420 6973 5f73 616d 655f 6164 6472  ert is_same_addr
+0001d870: 6573 7328 7478 6e5b 2274 6f22 5d2c 2063  ess(txn["to"], c
+0001d880: 6173 7428 4368 6563 6b73 756d 4164 6472  ast(ChecksumAddr
+0001d890: 6573 732c 2074 786e 5f70 6172 616d 735b  ess, txn_params[
+0001d8a0: 2274 6f22 5d29 290a 2020 2020 2020 2020  "to"])).        
+0001d8b0: 6173 7365 7274 2074 786e 5b22 7661 6c75  assert txn["valu
+0001d8c0: 6522 5d20 3d3d 2031 0a20 2020 2020 2020  e"] == 1.       
+0001d8d0: 2061 7373 6572 7420 7478 6e5b 2267 6173   assert txn["gas
+0001d8e0: 225d 203d 3d20 3132 3130 3030 2020 2320  "] == 121000  # 
+0001d8f0: 3231 3030 3020 2b20 6275 6666 6572 0a0a  21000 + buffer..
+0001d900: 2020 2020 6465 6620 7465 7374 5f65 7468      def test_eth
+0001d910: 5f73 656e 645f 7472 616e 7361 6374 696f  _send_transactio
+0001d920: 6e5f 7769 7468 5f67 6173 5f70 7269 6365  n_with_gas_price
+0001d930: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+0001d940: 7733 3a20 2257 6562 3322 2c20 756e 6c6f  w3: "Web3", unlo
 0001d950: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
-0001d960: 6c5f 7479 7065 2c0a 2020 2020 2020 2020  l_type,.        
-0001d970: 2020 2020 2274 6f22 3a20 756e 6c6f 636b      "to": unlock
-0001d980: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
-0001d990: 7479 7065 2c0a 2020 2020 2020 2020 2020  type,.          
-0001d9a0: 2020 2276 616c 7565 223a 2057 6569 2831    "value": Wei(1
-0001d9b0: 292c 0a20 2020 2020 2020 2020 2020 2022  ),.            "
-0001d9c0: 6761 7322 3a20 5765 6928 3231 3030 3029  gas": Wei(21000)
-0001d9d0: 2c0a 2020 2020 2020 2020 2020 2020 226d  ,.            "m
-0001d9e0: 6178 4665 6550 6572 4761 7322 3a20 7733  axFeePerGas": w3
-0001d9f0: 2e74 6f5f 7765 6928 322c 2022 6777 6569  .to_wei(2, "gwei
-0001da00: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
-0001da10: 226d 6178 5072 696f 7269 7479 4665 6550  "maxPriorityFeeP
-0001da20: 6572 4761 7322 3a20 7733 2e74 6f5f 7765  erGas": w3.to_we
-0001da30: 6928 312c 2022 6777 6569 2229 2c0a 2020  i(1, "gwei"),.  
-0001da40: 2020 2020 2020 2020 2020 2263 6861 696e            "chain
-0001da50: 4964 223a 2077 726f 6e67 5f63 6861 696e  Id": wrong_chain
-0001da60: 5f69 642c 0a20 2020 2020 2020 207d 0a20  _id,.        }. 
-0001da70: 2020 2020 2020 2077 6974 6820 7079 7465         with pyte
-0001da80: 7374 2e72 6169 7365 7328 0a20 2020 2020  st.raises(.     
-0001da90: 2020 2020 2020 2057 6562 3356 616c 6964         Web3Valid
-0001daa0: 6174 696f 6e45 7272 6f72 2c0a 2020 2020  ationError,.    
-0001dab0: 2020 2020 2020 2020 6d61 7463 683d 6622          match=f"
-0001dac0: 5468 6520 7472 616e 7361 6374 696f 6e20  The transaction 
-0001dad0: 6465 636c 6172 6564 2063 6861 696e 2049  declared chain I
-0001dae0: 4420 7b77 726f 6e67 5f63 6861 696e 5f69  D {wrong_chain_i
-0001daf0: 647d 2c20 220a 2020 2020 2020 2020 2020  d}, ".          
-0001db00: 2020 6622 6275 7420 7468 6520 636f 6e6e    f"but the conn
-0001db10: 6563 7465 6420 6e6f 6465 2069 7320 6f6e  ected node is on
-0001db20: 207b 6163 7475 616c 5f63 6861 696e 5f69   {actual_chain_i
-0001db30: 647d 222c 0a20 2020 2020 2020 2029 3a0a  d}",.        ):.
-0001db40: 2020 2020 2020 2020 2020 2020 7733 2e65              w3.e
-0001db50: 7468 2e73 656e 645f 7472 616e 7361 6374  th.send_transact
-0001db60: 696f 6e28 7478 6e5f 7061 7261 6d73 290a  ion(txn_params).
-0001db70: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
-0001db80: 6b2e 7061 7261 6d65 7472 697a 6528 0a20  k.parametrize(. 
-0001db90: 2020 2020 2020 2022 6d61 785f 6665 6522         "max_fee"
-0001dba0: 2c20 2831 3030 3030 3030 3030 302c 204e  , (1000000000, N
-0001dbb0: 6f6e 6529 2c20 6964 733d 5b22 7769 7468  one), ids=["with
-0001dbc0: 5f6d 6178 5f66 6565 222c 2022 7769 7468  _max_fee", "with
-0001dbd0: 6f75 745f 6d61 785f 6665 6522 5d0a 2020  out_max_fee"].  
-0001dbe0: 2020 290a 2020 2020 6465 6620 7465 7374    ).    def test
-0001dbf0: 5f67 6173 5f70 7269 6365 5f66 726f 6d5f  _gas_price_from_
-0001dc00: 7374 7261 7465 6779 5f62 7970 6173 7365  strategy_bypasse
-0001dc10: 645f 666f 725f 6479 6e61 6d69 635f 6665  d_for_dynamic_fe
-0001dc20: 655f 7478 6e28 0a20 2020 2020 2020 2073  e_txn(.        s
-0001dc30: 656c 662c 2077 333a 2022 5765 6233 222c  elf, w3: "Web3",
-0001dc40: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-0001dc50: 745f 6475 616c 5f74 7970 653a 2043 6865  t_dual_type: Che
-0001dc60: 636b 7375 6d41 6464 7265 7373 2c20 6d61  cksumAddress, ma
-0001dc70: 785f 6665 653a 2057 6569 0a20 2020 2029  x_fee: Wei.    )
-0001dc80: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-0001dc90: 2020 6d61 785f 7072 696f 7269 7479 5f66    max_priority_f
-0001dca0: 6565 203d 2077 332e 746f 5f77 6569 2831  ee = w3.to_wei(1
-0001dcb0: 2c20 2267 7765 6922 290a 2020 2020 2020  , "gwei").      
-0001dcc0: 2020 7478 6e5f 7061 7261 6d73 3a20 5478    txn_params: Tx
-0001dcd0: 5061 7261 6d73 203d 207b 0a20 2020 2020  Params = {.     
-0001dce0: 2020 2020 2020 2022 6672 6f6d 223a 2075         "from": u
-0001dcf0: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
-0001dd00: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
-0001dd10: 2020 2020 2020 2022 746f 223a 2075 6e6c         "to": unl
-0001dd20: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
-0001dd30: 616c 5f74 7970 652c 0a20 2020 2020 2020  al_type,.       
-0001dd40: 2020 2020 2022 7661 6c75 6522 3a20 5765       "value": We
-0001dd50: 6928 3129 2c0a 2020 2020 2020 2020 2020  i(1),.          
-0001dd60: 2020 2267 6173 223a 2032 3130 3030 2c0a    "gas": 21000,.
-0001dd70: 2020 2020 2020 2020 2020 2020 226d 6178              "max
-0001dd80: 5072 696f 7269 7479 4665 6550 6572 4761  PriorityFeePerGa
-0001dd90: 7322 3a20 6d61 785f 7072 696f 7269 7479  s": max_priority
-0001dda0: 5f66 6565 2c0a 2020 2020 2020 2020 7d0a  _fee,.        }.
-0001ddb0: 2020 2020 2020 2020 6966 206d 6178 5f66          if max_f
-0001ddc0: 6565 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ee is not None:.
-0001ddd0: 2020 2020 2020 2020 2020 2020 7478 6e5f              txn_
-0001dde0: 7061 7261 6d73 203d 2061 7373 6f63 2874  params = assoc(t
-0001ddf0: 786e 5f70 6172 616d 732c 2022 6d61 7846  xn_params, "maxF
-0001de00: 6565 5065 7247 6173 222c 206d 6178 5f66  eePerGas", max_f
-0001de10: 6565 290a 0a20 2020 2020 2020 2064 6566  ee)..        def
-0001de20: 2067 6173 5f70 7269 6365 5f73 7472 6174   gas_price_strat
-0001de30: 6567 7928 5f77 333a 2022 5765 6233 222c  egy(_w3: "Web3",
-0001de40: 205f 7478 6e3a 2054 7850 6172 616d 7329   _txn: TxParams)
-0001de50: 202d 3e20 5765 693a 0a20 2020 2020 2020   -> Wei:.       
-0001de60: 2020 2020 2072 6574 7572 6e20 7733 2e74       return w3.t
-0001de70: 6f5f 7765 6928 322c 2022 6777 6569 2229  o_wei(2, "gwei")
-0001de80: 0a0a 2020 2020 2020 2020 7733 2e65 7468  ..        w3.eth
-0001de90: 2e73 6574 5f67 6173 5f70 7269 6365 5f73  .set_gas_price_s
-0001dea0: 7472 6174 6567 7928 6761 735f 7072 6963  trategy(gas_pric
-0001deb0: 655f 7374 7261 7465 6779 290a 0a20 2020  e_strategy)..   
-0001dec0: 2020 2020 2074 786e 5f68 6173 6820 3d20       txn_hash = 
-0001ded0: 7733 2e65 7468 2e73 656e 645f 7472 616e  w3.eth.send_tran
-0001dee0: 7361 6374 696f 6e28 7478 6e5f 7061 7261  saction(txn_para
-0001def0: 6d73 290a 2020 2020 2020 2020 7478 6e20  ms).        txn 
-0001df00: 3d20 7733 2e65 7468 2e67 6574 5f74 7261  = w3.eth.get_tra
-0001df10: 6e73 6163 7469 6f6e 2874 786e 5f68 6173  nsaction(txn_has
-0001df20: 6829 0a0a 2020 2020 2020 2020 6c61 7465  h)..        late
-0001df30: 7374 5f62 6c6f 636b 203d 2077 332e 6574  st_block = w3.et
-0001df40: 682e 6765 745f 626c 6f63 6b28 226c 6174  h.get_block("lat
-0001df50: 6573 7422 290a 2020 2020 2020 2020 6173  est").        as
-0001df60: 7365 7274 2028 0a20 2020 2020 2020 2020  sert (.         
-0001df70: 2020 2074 786e 5b22 6d61 7846 6565 5065     txn["maxFeePe
-0001df80: 7247 6173 225d 203d 3d20 6d61 785f 6665  rGas"] == max_fe
-0001df90: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
-0001dfa0: 206d 6178 5f66 6565 2069 7320 6e6f 7420   max_fee is not 
-0001dfb0: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-0001dfc0: 2065 6c73 6520 3220 2a20 6c61 7465 7374   else 2 * latest
-0001dfd0: 5f62 6c6f 636b 5b22 6261 7365 4665 6550  _block["baseFeeP
-0001dfe0: 6572 4761 7322 5d20 2b20 6d61 785f 7072  erGas"] + max_pr
-0001dff0: 696f 7269 7479 5f66 6565 0a20 2020 2020  iority_fee.     
-0001e000: 2020 2029 0a20 2020 2020 2020 2061 7373     ).        ass
-0001e010: 6572 7420 7478 6e5b 226d 6178 5072 696f  ert txn["maxPrio
-0001e020: 7269 7479 4665 6550 6572 4761 7322 5d20  rityFeePerGas"] 
-0001e030: 3d3d 206d 6178 5f70 7269 6f72 6974 795f  == max_priority_
-0001e040: 6665 650a 2020 2020 2020 2020 6173 7365  fee.        asse
-0001e050: 7274 2074 786e 5b22 6761 7350 7269 6365  rt txn["gasPrice
-0001e060: 225d 203d 3d20 7478 6e5b 226d 6178 4665  "] == txn["maxFe
-0001e070: 6550 6572 4761 7322 5d0a 0a20 2020 2020  ePerGas"]..     
-0001e080: 2020 2077 332e 6574 682e 7365 745f 6761     w3.eth.set_ga
-0001e090: 735f 7072 6963 655f 7374 7261 7465 6779  s_price_strategy
-0001e0a0: 284e 6f6e 6529 2020 2320 7265 7365 7420  (None)  # reset 
-0001e0b0: 7374 7261 7465 6779 0a0a 2020 2020 6465  strategy..    de
-0001e0c0: 6620 7465 7374 5f67 6173 5f70 7269 6365  f test_gas_price
-0001e0d0: 5f66 726f 6d5f 7374 7261 7465 6779 5f62  _from_strategy_b
-0001e0e0: 7970 6173 7365 645f 666f 725f 6479 6e61  ypassed_for_dyna
-0001e0f0: 6d69 635f 6665 655f 7478 6e5f 6e6f 5f74  mic_fee_txn_no_t
-0001e100: 6970 280a 2020 2020 2020 2020 7365 6c66  ip(.        self
-0001e110: 2c0a 2020 2020 2020 2020 7733 3a20 2257  ,.        w3: "W
-0001e120: 6562 3322 2c0a 2020 2020 2020 2020 756e  eb3",.        un
-0001e130: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
-0001e140: 7561 6c5f 7479 7065 3a20 4368 6563 6b73  ual_type: Checks
-0001e150: 756d 4164 6472 6573 732c 0a20 2020 2029  umAddress,.    )
-0001e160: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-0001e170: 2020 7478 6e5f 7061 7261 6d73 3a20 5478    txn_params: Tx
-0001e180: 5061 7261 6d73 203d 207b 0a20 2020 2020  Params = {.     
-0001e190: 2020 2020 2020 2022 6672 6f6d 223a 2075         "from": u
-0001e1a0: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
-0001e1b0: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
-0001e1c0: 2020 2020 2020 2022 746f 223a 2075 6e6c         "to": unl
-0001e1d0: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
-0001e1e0: 616c 5f74 7970 652c 0a20 2020 2020 2020  al_type,.       
-0001e1f0: 2020 2020 2022 7661 6c75 6522 3a20 5765       "value": We
-0001e200: 6928 3129 2c0a 2020 2020 2020 2020 2020  i(1),.          
-0001e210: 2020 2267 6173 223a 2032 3130 3030 2c0a    "gas": 21000,.
-0001e220: 2020 2020 2020 2020 2020 2020 226d 6178              "max
-0001e230: 4665 6550 6572 4761 7322 3a20 5765 6928  FeePerGas": Wei(
-0001e240: 3130 3030 3030 3030 3030 292c 0a20 2020  1000000000),.   
-0001e250: 2020 2020 207d 0a0a 2020 2020 2020 2020       }..        
-0001e260: 6465 6620 6761 735f 7072 6963 655f 7374  def gas_price_st
-0001e270: 7261 7465 6779 285f 7733 3a20 2257 6562  rategy(_w3: "Web
-0001e280: 3322 2c20 5f74 786e 3a20 5478 5061 7261  3", _txn: TxPara
-0001e290: 6d73 2920 2d3e 2057 6569 3a0a 2020 2020  ms) -> Wei:.    
-0001e2a0: 2020 2020 2020 2020 7265 7475 726e 2077          return w
-0001e2b0: 332e 746f 5f77 6569 2832 2c20 2267 7765  3.to_wei(2, "gwe
-0001e2c0: 6922 290a 0a20 2020 2020 2020 2077 332e  i")..        w3.
-0001e2d0: 6574 682e 7365 745f 6761 735f 7072 6963  eth.set_gas_pric
-0001e2e0: 655f 7374 7261 7465 6779 2867 6173 5f70  e_strategy(gas_p
-0001e2f0: 7269 6365 5f73 7472 6174 6567 7929 0a0a  rice_strategy)..
-0001e300: 2020 2020 2020 2020 7769 7468 2070 7974          with pyt
-0001e310: 6573 742e 7261 6973 6573 280a 2020 2020  est.raises(.    
-0001e320: 2020 2020 2020 2020 496e 7661 6c69 6454          InvalidT
-0001e330: 7261 6e73 6163 7469 6f6e 2c20 6d61 7463  ransaction, matc
-0001e340: 683d 226d 6178 5072 696f 7269 7479 4665  h="maxPriorityFe
-0001e350: 6550 6572 4761 7320 6d75 7374 2062 6520  ePerGas must be 
-0001e360: 6465 6669 6e65 6422 0a20 2020 2020 2020  defined".       
-0001e370: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
-0001e380: 7733 2e65 7468 2e73 656e 645f 7472 616e  w3.eth.send_tran
-0001e390: 7361 6374 696f 6e28 7478 6e5f 7061 7261  saction(txn_para
-0001e3a0: 6d73 290a 0a20 2020 2020 2020 2077 332e  ms)..        w3.
-0001e3b0: 6574 682e 7365 745f 6761 735f 7072 6963  eth.set_gas_pric
-0001e3c0: 655f 7374 7261 7465 6779 284e 6f6e 6529  e_strategy(None)
-0001e3d0: 2020 2320 7265 7365 7420 7374 7261 7465    # reset strate
-0001e3e0: 6779 0a0a 2020 2020 6465 6620 7465 7374  gy..    def test
-0001e3f0: 5f65 7468 5f72 6570 6c61 6365 5f74 7261  _eth_replace_tra
-0001e400: 6e73 6163 7469 6f6e 5f6c 6567 6163 7928  nsaction_legacy(
-0001e410: 0a20 2020 2020 2020 2073 656c 662c 2077  .        self, w
-0001e420: 333a 2022 5765 6233 222c 2075 6e6c 6f63  3: "Web3", unloc
-0001e430: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
-0001e440: 5f74 7970 653a 2043 6865 636b 7375 6d41  _type: ChecksumA
-0001e450: 6464 7265 7373 0a20 2020 2029 202d 3e20  ddress.    ) -> 
-0001e460: 4e6f 6e65 3a0a 2020 2020 2020 2020 7478  None:.        tx
-0001e470: 6e5f 7061 7261 6d73 3a20 5478 5061 7261  n_params: TxPara
-0001e480: 6d73 203d 207b 0a20 2020 2020 2020 2020  ms = {.         
-0001e490: 2020 2022 6672 6f6d 223a 2075 6e6c 6f63     "from": unloc
-0001e4a0: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
-0001e4b0: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
-0001e4c0: 2020 2022 746f 223a 2075 6e6c 6f63 6b65     "to": unlocke
-0001e4d0: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-0001e4e0: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
-0001e4f0: 2022 7661 6c75 6522 3a20 5765 6928 3129   "value": Wei(1)
-0001e500: 2c0a 2020 2020 2020 2020 2020 2020 2267  ,.            "g
-0001e510: 6173 223a 2032 3130 3030 2c0a 2020 2020  as": 21000,.    
-0001e520: 2020 2020 2020 2020 2267 6173 5072 6963          "gasPric
-0001e530: 6522 3a20 7733 2e74 6f5f 7765 6928 0a20  e": w3.to_wei(. 
-0001e540: 2020 2020 2020 2020 2020 2020 2020 2031                 1
-0001e550: 2c20 2267 7765 6922 0a20 2020 2020 2020  , "gwei".       
-0001e560: 2020 2020 2029 2c20 2023 206d 7573 7420       ),  # must 
-0001e570: 6265 2067 7265 6174 6572 2074 6861 6e20  be greater than 
-0001e580: 6261 7365 5f66 6565 2070 6f73 7420 4c6f  base_fee post Lo
-0001e590: 6e64 6f6e 0a20 2020 2020 2020 207d 0a20  ndon.        }. 
-0001e5a0: 2020 2020 2020 2074 786e 5f68 6173 6820         txn_hash 
-0001e5b0: 3d20 7733 2e65 7468 2e73 656e 645f 7472  = w3.eth.send_tr
-0001e5c0: 616e 7361 6374 696f 6e28 7478 6e5f 7061  ansaction(txn_pa
-0001e5d0: 7261 6d73 290a 0a20 2020 2020 2020 2074  rams)..        t
-0001e5e0: 786e 5f70 6172 616d 735b 2267 6173 5072  xn_params["gasPr
-0001e5f0: 6963 6522 5d20 3d20 7733 2e74 6f5f 7765  ice"] = w3.to_we
-0001e600: 6928 322c 2022 6777 6569 2229 0a20 2020  i(2, "gwei").   
-0001e610: 2020 2020 2072 6570 6c61 6365 5f74 786e       replace_txn
-0001e620: 5f68 6173 6820 3d20 7733 2e65 7468 2e72  _hash = w3.eth.r
-0001e630: 6570 6c61 6365 5f74 7261 6e73 6163 7469  eplace_transacti
-0001e640: 6f6e 2874 786e 5f68 6173 682c 2074 786e  on(txn_hash, txn
-0001e650: 5f70 6172 616d 7329 0a20 2020 2020 2020  _params).       
-0001e660: 2072 6570 6c61 6365 5f74 786e 203d 2077   replace_txn = w
-0001e670: 332e 6574 682e 6765 745f 7472 616e 7361  3.eth.get_transa
-0001e680: 6374 696f 6e28 7265 706c 6163 655f 7478  ction(replace_tx
-0001e690: 6e5f 6861 7368 290a 0a20 2020 2020 2020  n_hash)..       
-0001e6a0: 2061 7373 6572 7420 6973 5f73 616d 655f   assert is_same_
-0001e6b0: 6164 6472 6573 7328 0a20 2020 2020 2020  address(.       
-0001e6c0: 2020 2020 2072 6570 6c61 6365 5f74 786e       replace_txn
-0001e6d0: 5b22 6672 6f6d 225d 2c20 6361 7374 2843  ["from"], cast(C
-0001e6e0: 6865 636b 7375 6d41 6464 7265 7373 2c20  hecksumAddress, 
-0001e6f0: 7478 6e5f 7061 7261 6d73 5b22 6672 6f6d  txn_params["from
-0001e700: 225d 290a 2020 2020 2020 2020 290a 2020  "]).        ).  
-0001e710: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
-0001e720: 7361 6d65 5f61 6464 7265 7373 280a 2020  same_address(.  
-0001e730: 2020 2020 2020 2020 2020 7265 706c 6163            replac
-0001e740: 655f 7478 6e5b 2274 6f22 5d2c 2063 6173  e_txn["to"], cas
-0001e750: 7428 4368 6563 6b73 756d 4164 6472 6573  t(ChecksumAddres
-0001e760: 732c 2074 786e 5f70 6172 616d 735b 2274  s, txn_params["t
-0001e770: 6f22 5d29 0a20 2020 2020 2020 2029 0a20  o"]).        ). 
-0001e780: 2020 2020 2020 2061 7373 6572 7420 7265         assert re
-0001e790: 706c 6163 655f 7478 6e5b 2276 616c 7565  place_txn["value
-0001e7a0: 225d 203d 3d20 310a 2020 2020 2020 2020  "] == 1.        
-0001e7b0: 6173 7365 7274 2072 6570 6c61 6365 5f74  assert replace_t
-0001e7c0: 786e 5b22 6761 7322 5d20 3d3d 2032 3130  xn["gas"] == 210
-0001e7d0: 3030 0a20 2020 2020 2020 2061 7373 6572  00.        asser
-0001e7e0: 7420 7265 706c 6163 655f 7478 6e5b 2267  t replace_txn["g
-0001e7f0: 6173 5072 6963 6522 5d20 3d3d 2074 786e  asPrice"] == txn
-0001e800: 5f70 6172 616d 735b 2267 6173 5072 6963  _params["gasPric
-0001e810: 6522 5d0a 0a20 2020 2064 6566 2074 6573  e"]..    def tes
-0001e820: 745f 6574 685f 7265 706c 6163 655f 7472  t_eth_replace_tr
-0001e830: 616e 7361 6374 696f 6e28 0a20 2020 2020  ansaction(.     
-0001e840: 2020 2073 656c 662c 2077 333a 2022 5765     self, w3: "We
-0001e850: 6233 222c 2075 6e6c 6f63 6b65 645f 6163  b3", unlocked_ac
-0001e860: 636f 756e 745f 6475 616c 5f74 7970 653a  count_dual_type:
-0001e870: 2043 6865 636b 7375 6d41 6464 7265 7373   ChecksumAddress
-0001e880: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-0001e890: 2020 2020 2020 2020 7477 6f5f 6777 6569          two_gwei
-0001e8a0: 5f69 6e5f 7765 6920 3d20 7733 2e74 6f5f  _in_wei = w3.to_
-0001e8b0: 7765 6928 322c 2022 6777 6569 2229 0a20  wei(2, "gwei"). 
-0001e8c0: 2020 2020 2020 2074 6872 6565 5f67 7765         three_gwe
-0001e8d0: 695f 696e 5f77 6569 203d 2077 332e 746f  i_in_wei = w3.to
-0001e8e0: 5f77 6569 2833 2c20 2267 7765 6922 290a  _wei(3, "gwei").
-0001e8f0: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
-0001e900: 616d 733a 2054 7850 6172 616d 7320 3d20  ams: TxParams = 
-0001e910: 7b0a 2020 2020 2020 2020 2020 2020 2266  {.            "f
-0001e920: 726f 6d22 3a20 756e 6c6f 636b 6564 5f61  rom": unlocked_a
-0001e930: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
-0001e940: 2c0a 2020 2020 2020 2020 2020 2020 2274  ,.            "t
-0001e950: 6f22 3a20 756e 6c6f 636b 6564 5f61 6363  o": unlocked_acc
-0001e960: 6f75 6e74 5f64 7561 6c5f 7479 7065 2c0a  ount_dual_type,.
-0001e970: 2020 2020 2020 2020 2020 2020 2276 616c              "val
-0001e980: 7565 223a 2057 6569 2831 292c 0a20 2020  ue": Wei(1),.   
-0001e990: 2020 2020 2020 2020 2022 6761 7322 3a20           "gas": 
-0001e9a0: 3231 3030 302c 0a20 2020 2020 2020 2020  21000,.         
-0001e9b0: 2020 2022 6d61 7846 6565 5065 7247 6173     "maxFeePerGas
-0001e9c0: 223a 2074 776f 5f67 7765 695f 696e 5f77  ": two_gwei_in_w
-0001e9d0: 6569 2c0a 2020 2020 2020 2020 2020 2020  ei,.            
-0001e9e0: 226d 6178 5072 696f 7269 7479 4665 6550  "maxPriorityFeeP
-0001e9f0: 6572 4761 7322 3a20 7733 2e74 6f5f 7765  erGas": w3.to_we
-0001ea00: 6928 312c 2022 6777 6569 2229 2c0a 2020  i(1, "gwei"),.  
-0001ea10: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0001ea20: 7478 6e5f 6861 7368 203d 2077 332e 6574  txn_hash = w3.et
-0001ea30: 682e 7365 6e64 5f74 7261 6e73 6163 7469  h.send_transacti
-0001ea40: 6f6e 2874 786e 5f70 6172 616d 7329 0a0a  on(txn_params)..
-0001ea50: 2020 2020 2020 2020 7478 6e5f 7061 7261          txn_para
-0001ea60: 6d73 5b22 6d61 7846 6565 5065 7247 6173  ms["maxFeePerGas
-0001ea70: 225d 203d 2074 6872 6565 5f67 7765 695f  "] = three_gwei_
-0001ea80: 696e 5f77 6569 0a20 2020 2020 2020 2074  in_wei.        t
-0001ea90: 786e 5f70 6172 616d 735b 226d 6178 5072  xn_params["maxPr
-0001eaa0: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
-0001eab0: 5d20 3d20 7477 6f5f 6777 6569 5f69 6e5f  ] = two_gwei_in_
-0001eac0: 7765 690a 0a20 2020 2020 2020 2072 6570  wei..        rep
-0001ead0: 6c61 6365 5f74 786e 5f68 6173 6820 3d20  lace_txn_hash = 
-0001eae0: 7733 2e65 7468 2e72 6570 6c61 6365 5f74  w3.eth.replace_t
-0001eaf0: 7261 6e73 6163 7469 6f6e 2874 786e 5f68  ransaction(txn_h
-0001eb00: 6173 682c 2074 786e 5f70 6172 616d 7329  ash, txn_params)
-0001eb10: 0a20 2020 2020 2020 2072 6570 6c61 6365  .        replace
-0001eb20: 5f74 786e 203d 2077 332e 6574 682e 6765  _txn = w3.eth.ge
-0001eb30: 745f 7472 616e 7361 6374 696f 6e28 7265  t_transaction(re
-0001eb40: 706c 6163 655f 7478 6e5f 6861 7368 290a  place_txn_hash).
-0001eb50: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-0001eb60: 6973 5f73 616d 655f 6164 6472 6573 7328  is_same_address(
-0001eb70: 0a20 2020 2020 2020 2020 2020 2072 6570  .            rep
-0001eb80: 6c61 6365 5f74 786e 5b22 6672 6f6d 225d  lace_txn["from"]
-0001eb90: 2c20 6361 7374 2843 6865 636b 7375 6d41  , cast(ChecksumA
-0001eba0: 6464 7265 7373 2c20 7478 6e5f 7061 7261  ddress, txn_para
-0001ebb0: 6d73 5b22 6672 6f6d 225d 290a 2020 2020  ms["from"]).    
-0001ebc0: 2020 2020 290a 2020 2020 2020 2020 6173      ).        as
-0001ebd0: 7365 7274 2069 735f 7361 6d65 5f61 6464  sert is_same_add
-0001ebe0: 7265 7373 280a 2020 2020 2020 2020 2020  ress(.          
-0001ebf0: 2020 7265 706c 6163 655f 7478 6e5b 2274    replace_txn["t
-0001ec00: 6f22 5d2c 2063 6173 7428 4368 6563 6b73  o"], cast(Checks
-0001ec10: 756d 4164 6472 6573 732c 2074 786e 5f70  umAddress, txn_p
-0001ec20: 6172 616d 735b 2274 6f22 5d29 0a20 2020  arams["to"]).   
-0001ec30: 2020 2020 2029 0a20 2020 2020 2020 2061       ).        a
-0001ec40: 7373 6572 7420 7265 706c 6163 655f 7478  ssert replace_tx
-0001ec50: 6e5b 2276 616c 7565 225d 203d 3d20 310a  n["value"] == 1.
-0001ec60: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
-0001ec70: 6570 6c61 6365 5f74 786e 5b22 6761 7322  eplace_txn["gas"
-0001ec80: 5d20 3d3d 2032 3130 3030 0a20 2020 2020  ] == 21000.     
-0001ec90: 2020 2061 7373 6572 7420 7265 706c 6163     assert replac
-0001eca0: 655f 7478 6e5b 226d 6178 4665 6550 6572  e_txn["maxFeePer
-0001ecb0: 4761 7322 5d20 3d3d 2074 6872 6565 5f67  Gas"] == three_g
-0001ecc0: 7765 695f 696e 5f77 6569 0a20 2020 2020  wei_in_wei.     
-0001ecd0: 2020 2061 7373 6572 7420 7265 706c 6163     assert replac
-0001ece0: 655f 7478 6e5b 226d 6178 5072 696f 7269  e_txn["maxPriori
-0001ecf0: 7479 4665 6550 6572 4761 7322 5d20 3d3d  tyFeePerGas"] ==
-0001ed00: 2074 776f 5f67 7765 695f 696e 5f77 6569   two_gwei_in_wei
-0001ed10: 0a0a 2020 2020 6465 6620 7465 7374 5f65  ..    def test_e
-0001ed20: 7468 5f72 6570 6c61 6365 5f74 7261 6e73  th_replace_trans
-0001ed30: 6163 7469 6f6e 5f75 6e64 6572 7072 6963  action_underpric
-0001ed40: 6564 280a 2020 2020 2020 2020 7365 6c66  ed(.        self
-0001ed50: 2c20 7733 3a20 2257 6562 3322 2c20 756e  , w3: "Web3", un
-0001ed60: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
-0001ed70: 7561 6c5f 7479 7065 3a20 4368 6563 6b73  ual_type: Checks
-0001ed80: 756d 4164 6472 6573 730a 2020 2020 2920  umAddress.    ) 
-0001ed90: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-0001eda0: 2074 786e 5f70 6172 616d 733a 2054 7850   txn_params: TxP
-0001edb0: 6172 616d 7320 3d20 7b0a 2020 2020 2020  arams = {.      
-0001edc0: 2020 2020 2020 2266 726f 6d22 3a20 756e        "from": un
-0001edd0: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
-0001ede0: 7561 6c5f 7479 7065 2c0a 2020 2020 2020  ual_type,.      
-0001edf0: 2020 2020 2020 2274 6f22 3a20 756e 6c6f        "to": unlo
-0001ee00: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
-0001ee10: 6c5f 7479 7065 2c0a 2020 2020 2020 2020  l_type,.        
-0001ee20: 2020 2020 2276 616c 7565 223a 2057 6569      "value": Wei
-0001ee30: 2831 292c 0a20 2020 2020 2020 2020 2020  (1),.           
-0001ee40: 2022 6761 7322 3a20 3231 3030 302c 0a20   "gas": 21000,. 
-0001ee50: 2020 2020 2020 2020 2020 2022 6d61 7846             "maxF
-0001ee60: 6565 5065 7247 6173 223a 2077 332e 746f  eePerGas": w3.to
-0001ee70: 5f77 6569 2833 2c20 2267 7765 6922 292c  _wei(3, "gwei"),
-0001ee80: 0a20 2020 2020 2020 2020 2020 2022 6d61  .            "ma
-0001ee90: 7850 7269 6f72 6974 7946 6565 5065 7247  xPriorityFeePerG
-0001eea0: 6173 223a 2077 332e 746f 5f77 6569 2832  as": w3.to_wei(2
-0001eeb0: 2c20 2267 7765 6922 292c 0a20 2020 2020  , "gwei"),.     
-0001eec0: 2020 207d 0a20 2020 2020 2020 2074 786e     }.        txn
-0001eed0: 5f68 6173 6820 3d20 7733 2e65 7468 2e73  _hash = w3.eth.s
-0001eee0: 656e 645f 7472 616e 7361 6374 696f 6e28  end_transaction(
-0001eef0: 7478 6e5f 7061 7261 6d73 290a 0a20 2020  txn_params)..   
-0001ef00: 2020 2020 206f 6e65 5f67 7765 695f 696e       one_gwei_in
-0001ef10: 5f77 6569 203d 2077 332e 746f 5f77 6569  _wei = w3.to_wei
-0001ef20: 2831 2c20 2267 7765 6922 290a 2020 2020  (1, "gwei").    
-0001ef30: 2020 2020 7478 6e5f 7061 7261 6d73 5b22      txn_params["
-0001ef40: 6d61 7846 6565 5065 7247 6173 225d 203d  maxFeePerGas"] =
-0001ef50: 206f 6e65 5f67 7765 695f 696e 5f77 6569   one_gwei_in_wei
-0001ef60: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
-0001ef70: 616d 735b 226d 6178 5072 696f 7269 7479  ams["maxPriority
-0001ef80: 4665 6550 6572 4761 7322 5d20 3d20 6f6e  FeePerGas"] = on
-0001ef90: 655f 6777 6569 5f69 6e5f 7765 690a 0a20  e_gwei_in_wei.. 
-0001efa0: 2020 2020 2020 2077 6974 6820 7079 7465         with pyte
-0001efb0: 7374 2e72 6169 7365 7328 5661 6c75 6545  st.raises(ValueE
-0001efc0: 7272 6f72 2c20 6d61 7463 683d 2272 6570  rror, match="rep
-0001efd0: 6c61 6365 6d65 6e74 2074 7261 6e73 6163  lacement transac
-0001efe0: 7469 6f6e 2075 6e64 6572 7072 6963 6564  tion underpriced
-0001eff0: 2229 3a0a 2020 2020 2020 2020 2020 2020  "):.            
-0001f000: 7733 2e65 7468 2e72 6570 6c61 6365 5f74  w3.eth.replace_t
-0001f010: 7261 6e73 6163 7469 6f6e 2874 786e 5f68  ransaction(txn_h
-0001f020: 6173 682c 2074 786e 5f70 6172 616d 7329  ash, txn_params)
-0001f030: 0a0a 2020 2020 6465 6620 7465 7374 5f65  ..    def test_e
-0001f040: 7468 5f72 6570 6c61 6365 5f74 7261 6e73  th_replace_trans
-0001f050: 6163 7469 6f6e 5f6e 6f6e 5f65 7869 7374  action_non_exist
-0001f060: 696e 675f 7472 616e 7361 6374 696f 6e28  ing_transaction(
-0001f070: 0a20 2020 2020 2020 2073 656c 662c 2077  .        self, w
-0001f080: 333a 2022 5765 6233 222c 2075 6e6c 6f63  3: "Web3", unloc
-0001f090: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
-0001f0a0: 5f74 7970 653a 2043 6865 636b 7375 6d41  _type: ChecksumA
-0001f0b0: 6464 7265 7373 0a20 2020 2029 202d 3e20  ddress.    ) -> 
-0001f0c0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7478  None:.        tx
-0001f0d0: 6e5f 7061 7261 6d73 3a20 5478 5061 7261  n_params: TxPara
-0001f0e0: 6d73 203d 207b 0a20 2020 2020 2020 2020  ms = {.         
-0001f0f0: 2020 2022 6672 6f6d 223a 2075 6e6c 6f63     "from": unloc
-0001f100: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
-0001f110: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
-0001f120: 2020 2022 746f 223a 2075 6e6c 6f63 6b65     "to": unlocke
-0001f130: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
-0001f140: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
-0001f150: 2022 7661 6c75 6522 3a20 5765 6928 3129   "value": Wei(1)
-0001f160: 2c0a 2020 2020 2020 2020 2020 2020 2267  ,.            "g
-0001f170: 6173 223a 2032 3130 3030 2c0a 2020 2020  as": 21000,.    
-0001f180: 2020 2020 2020 2020 226d 6178 4665 6550          "maxFeeP
-0001f190: 6572 4761 7322 3a20 7733 2e74 6f5f 7765  erGas": w3.to_we
-0001f1a0: 6928 332c 2022 6777 6569 2229 2c0a 2020  i(3, "gwei"),.  
-0001f1b0: 2020 2020 2020 2020 2020 226d 6178 5072            "maxPr
-0001f1c0: 696f 7269 7479 4665 6550 6572 4761 7322  iorityFeePerGas"
-0001f1d0: 3a20 7733 2e74 6f5f 7765 6928 312c 2022  : w3.to_wei(1, "
-0001f1e0: 6777 6569 2229 2c0a 2020 2020 2020 2020  gwei"),.        
-0001f1f0: 7d0a 2020 2020 2020 2020 7769 7468 2070  }.        with p
-0001f200: 7974 6573 742e 7261 6973 6573 2854 7261  ytest.raises(Tra
-0001f210: 6e73 6163 7469 6f6e 4e6f 7446 6f75 6e64  nsactionNotFound
-0001f220: 293a 0a20 2020 2020 2020 2020 2020 2077  ):.            w
-0001f230: 332e 6574 682e 7265 706c 6163 655f 7472  3.eth.replace_tr
-0001f240: 616e 7361 6374 696f 6e28 0a20 2020 2020  ansaction(.     
-0001f250: 2020 2020 2020 2020 2020 2048 6578 5374             HexSt
-0001f260: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
-0001f270: 2020 2020 2020 2022 3078 3938 6538 6363         "0x98e8cc
-0001f280: 3039 6233 3131 3538 3363 3530 3739 6661  09b311583c5079fa
-0001f290: 3630 3066 3663 3261 3362 6561 3836 3131  600f6c2a3bea8611
-0001f2a0: 6166 3136 3863 3532 6534 6236 3062 3562  af168c52e4b60b5b
-0001f2b0: 3234 3361 3434 3139 3937 220a 2020 2020  243a441997".    
-0001f2c0: 2020 2020 2020 2020 2020 2020 292c 0a20              ),. 
-0001f2d0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0001f2e0: 786e 5f70 6172 616d 732c 0a20 2020 2020  xn_params,.     
-0001f2f0: 2020 2020 2020 2029 0a0a 2020 2020 6465         )..    de
-0001f300: 6620 7465 7374 5f65 7468 5f72 6570 6c61  f test_eth_repla
-0001f310: 6365 5f74 7261 6e73 6163 7469 6f6e 5f61  ce_transaction_a
-0001f320: 6c72 6561 6479 5f6d 696e 6564 280a 2020  lready_mined(.  
-0001f330: 2020 2020 2020 7365 6c66 2c20 7733 3a20        self, w3: 
-0001f340: 2257 6562 3322 2c20 756e 6c6f 636b 6564  "Web3", unlocked
-0001f350: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
-0001f360: 7065 3a20 4368 6563 6b73 756d 4164 6472  pe: ChecksumAddr
-0001f370: 6573 730a 2020 2020 2920 2d3e 204e 6f6e  ess.    ) -> Non
-0001f380: 653a 0a20 2020 2020 2020 2074 786e 5f70  e:.        txn_p
-0001f390: 6172 616d 733a 2054 7850 6172 616d 7320  arams: TxParams 
-0001f3a0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-0001f3b0: 2266 726f 6d22 3a20 756e 6c6f 636b 6564  "from": unlocked
-0001f3c0: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
-0001f3d0: 7065 2c0a 2020 2020 2020 2020 2020 2020  pe,.            
-0001f3e0: 2274 6f22 3a20 756e 6c6f 636b 6564 5f61  "to": unlocked_a
-0001f3f0: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
-0001f400: 2c0a 2020 2020 2020 2020 2020 2020 2276  ,.            "v
-0001f410: 616c 7565 223a 2057 6569 2831 292c 0a20  alue": Wei(1),. 
-0001f420: 2020 2020 2020 2020 2020 2022 6761 7322             "gas"
-0001f430: 3a20 3231 3030 302c 0a20 2020 2020 2020  : 21000,.       
-0001f440: 2020 2020 2022 6d61 7846 6565 5065 7247       "maxFeePerG
-0001f450: 6173 223a 2077 332e 746f 5f77 6569 2832  as": w3.to_wei(2
-0001f460: 2c20 2267 7765 6922 292c 0a20 2020 2020  , "gwei"),.     
-0001f470: 2020 2020 2020 2022 6d61 7850 7269 6f72         "maxPrior
-0001f480: 6974 7946 6565 5065 7247 6173 223a 2077  ityFeePerGas": w
-0001f490: 332e 746f 5f77 6569 2831 2c20 2267 7765  3.to_wei(1, "gwe
-0001f4a0: 6922 292c 0a20 2020 2020 2020 207d 0a20  i"),.        }. 
-0001f4b0: 2020 2020 2020 2074 786e 5f68 6173 6820         txn_hash 
-0001f4c0: 3d20 7733 2e65 7468 2e73 656e 645f 7472  = w3.eth.send_tr
-0001f4d0: 616e 7361 6374 696f 6e28 7478 6e5f 7061  ansaction(txn_pa
-0001f4e0: 7261 6d73 290a 2020 2020 2020 2020 7472  rams).        tr
-0001f4f0: 793a 0a20 2020 2020 2020 2020 2020 2077  y:.            w
-0001f500: 332e 6765 7468 2e6d 696e 6572 2e73 7461  3.geth.miner.sta
-0001f510: 7274 2829 2020 2320 7479 7065 3a20 6967  rt()  # type: ig
-0001f520: 6e6f 7265 0a20 2020 2020 2020 2020 2020  nore.           
-0001f530: 2077 332e 6574 682e 7761 6974 5f66 6f72   w3.eth.wait_for
-0001f540: 5f74 7261 6e73 6163 7469 6f6e 5f72 6563  _transaction_rec
-0001f550: 6569 7074 2874 786e 5f68 6173 682c 2074  eipt(txn_hash, t
-0001f560: 696d 656f 7574 3d31 3029 0a20 2020 2020  imeout=10).     
-0001f570: 2020 2066 696e 616c 6c79 3a0a 2020 2020     finally:.    
-0001f580: 2020 2020 2020 2020 7733 2e67 6574 682e          w3.geth.
-0001f590: 6d69 6e65 722e 7374 6f70 2829 2020 2320  miner.stop()  # 
-0001f5a0: 7479 7065 3a20 6967 6e6f 7265 0a0a 2020  type: ignore..  
-0001f5b0: 2020 2020 2020 7478 6e5f 7061 7261 6d73        txn_params
-0001f5c0: 5b22 6d61 7846 6565 5065 7247 6173 225d  ["maxFeePerGas"]
-0001f5d0: 203d 2077 332e 746f 5f77 6569 2833 2c20   = w3.to_wei(3, 
-0001f5e0: 2267 7765 6922 290a 2020 2020 2020 2020  "gwei").        
-0001f5f0: 7478 6e5f 7061 7261 6d73 5b22 6d61 7850  txn_params["maxP
-0001f600: 7269 6f72 6974 7946 6565 5065 7247 6173  riorityFeePerGas
-0001f610: 225d 203d 2077 332e 746f 5f77 6569 2832  "] = w3.to_wei(2
-0001f620: 2c20 2267 7765 6922 290a 2020 2020 2020  , "gwei").      
-0001f630: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
-0001f640: 6973 6573 2856 616c 7565 4572 726f 722c  ises(ValueError,
-0001f650: 206d 6174 6368 3d22 5375 7070 6c69 6564   match="Supplied
-0001f660: 2074 7261 6e73 6163 7469 6f6e 2077 6974   transaction wit
-0001f670: 6820 6861 7368 2229 3a0a 2020 2020 2020  h hash"):.      
-0001f680: 2020 2020 2020 7733 2e65 7468 2e72 6570        w3.eth.rep
-0001f690: 6c61 6365 5f74 7261 6e73 6163 7469 6f6e  lace_transaction
-0001f6a0: 2874 786e 5f68 6173 682c 2074 786e 5f70  (txn_hash, txn_p
-0001f6b0: 6172 616d 7329 0a0a 2020 2020 6465 6620  arams)..    def 
-0001f6c0: 7465 7374 5f65 7468 5f72 6570 6c61 6365  test_eth_replace
-0001f6d0: 5f74 7261 6e73 6163 7469 6f6e 5f69 6e63  _transaction_inc
-0001f6e0: 6f72 7265 6374 5f6e 6f6e 6365 280a 2020  orrect_nonce(.  
-0001f6f0: 2020 2020 2020 7365 6c66 2c20 7733 3a20        self, w3: 
-0001f700: 2257 6562 3322 2c20 756e 6c6f 636b 6564  "Web3", unlocked
-0001f710: 5f61 6363 6f75 6e74 3a20 4368 6563 6b73  _account: Checks
-0001f720: 756d 4164 6472 6573 730a 2020 2020 2920  umAddress.    ) 
-0001f730: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-0001f740: 2074 786e 5f70 6172 616d 733a 2054 7850   txn_params: TxP
-0001f750: 6172 616d 7320 3d20 7b0a 2020 2020 2020  arams = {.      
-0001f760: 2020 2020 2020 2266 726f 6d22 3a20 756e        "from": un
-0001f770: 6c6f 636b 6564 5f61 6363 6f75 6e74 2c0a  locked_account,.
-0001f780: 2020 2020 2020 2020 2020 2020 2274 6f22              "to"
-0001f790: 3a20 756e 6c6f 636b 6564 5f61 6363 6f75  : unlocked_accou
-0001f7a0: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
-0001f7b0: 2276 616c 7565 223a 2057 6569 2831 292c  "value": Wei(1),
-0001f7c0: 0a20 2020 2020 2020 2020 2020 2022 6761  .            "ga
-0001f7d0: 7322 3a20 3231 3030 302c 0a20 2020 2020  s": 21000,.     
-0001f7e0: 2020 2020 2020 2022 6d61 7846 6565 5065         "maxFeePe
-0001f7f0: 7247 6173 223a 2077 332e 746f 5f77 6569  rGas": w3.to_wei
-0001f800: 2832 2c20 2267 7765 6922 292c 0a20 2020  (2, "gwei"),.   
-0001f810: 2020 2020 2020 2020 2022 6d61 7850 7269           "maxPri
-0001f820: 6f72 6974 7946 6565 5065 7247 6173 223a  orityFeePerGas":
-0001f830: 2077 332e 746f 5f77 6569 2831 2c20 2267   w3.to_wei(1, "g
-0001f840: 7765 6922 292c 0a20 2020 2020 2020 207d  wei"),.        }
-0001f850: 0a20 2020 2020 2020 2074 786e 5f68 6173  .        txn_has
-0001f860: 6820 3d20 7733 2e65 7468 2e73 656e 645f  h = w3.eth.send_
-0001f870: 7472 616e 7361 6374 696f 6e28 7478 6e5f  transaction(txn_
-0001f880: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-0001f890: 7478 6e20 3d20 7733 2e65 7468 2e67 6574  txn = w3.eth.get
-0001f8a0: 5f74 7261 6e73 6163 7469 6f6e 2874 786e  _transaction(txn
-0001f8b0: 5f68 6173 6829 0a0a 2020 2020 2020 2020  _hash)..        
-0001f8c0: 7478 6e5f 7061 7261 6d73 5b22 6d61 7846  txn_params["maxF
-0001f8d0: 6565 5065 7247 6173 225d 203d 2077 332e  eePerGas"] = w3.
-0001f8e0: 746f 5f77 6569 2833 2c20 2267 7765 6922  to_wei(3, "gwei"
-0001f8f0: 290a 2020 2020 2020 2020 7478 6e5f 7061  ).        txn_pa
-0001f900: 7261 6d73 5b22 6d61 7850 7269 6f72 6974  rams["maxPriorit
-0001f910: 7946 6565 5065 7247 6173 225d 203d 2077  yFeePerGas"] = w
-0001f920: 332e 746f 5f77 6569 2832 2c20 2267 7765  3.to_wei(2, "gwe
-0001f930: 6922 290a 2020 2020 2020 2020 7478 6e5f  i").        txn_
-0001f940: 7061 7261 6d73 5b22 6e6f 6e63 6522 5d20  params["nonce"] 
-0001f950: 3d20 4e6f 6e63 6528 7478 6e5b 226e 6f6e  = Nonce(txn["non
-0001f960: 6365 225d 202b 2031 290a 2020 2020 2020  ce"] + 1).      
-0001f970: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
-0001f980: 6973 6573 2856 616c 7565 4572 726f 7229  ises(ValueError)
-0001f990: 3a0a 2020 2020 2020 2020 2020 2020 7733  :.            w3
-0001f9a0: 2e65 7468 2e72 6570 6c61 6365 5f74 7261  .eth.replace_tra
-0001f9b0: 6e73 6163 7469 6f6e 2874 786e 5f68 6173  nsaction(txn_has
-0001f9c0: 682c 2074 786e 5f70 6172 616d 7329 0a0a  h, txn_params)..
-0001f9d0: 2020 2020 6465 6620 7465 7374 5f65 7468      def test_eth
-0001f9e0: 5f72 6570 6c61 6365 5f74 7261 6e73 6163  _replace_transac
-0001f9f0: 7469 6f6e 5f67 6173 5f70 7269 6365 5f74  tion_gas_price_t
-0001fa00: 6f6f 5f6c 6f77 280a 2020 2020 2020 2020  oo_low(.        
-0001fa10: 7365 6c66 2c20 7733 3a20 2257 6562 3322  self, w3: "Web3"
-0001fa20: 2c20 756e 6c6f 636b 6564 5f61 6363 6f75  , unlocked_accou
-0001fa30: 6e74 5f64 7561 6c5f 7479 7065 3a20 4368  nt_dual_type: Ch
-0001fa40: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
-0001fa50: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-0001fa60: 2020 2020 2074 786e 5f70 6172 616d 733a       txn_params:
-0001fa70: 2054 7850 6172 616d 7320 3d20 7b0a 2020   TxParams = {.  
-0001fa80: 2020 2020 2020 2020 2020 2266 726f 6d22            "from"
-0001fa90: 3a20 756e 6c6f 636b 6564 5f61 6363 6f75  : unlocked_accou
-0001faa0: 6e74 5f64 7561 6c5f 7479 7065 2c0a 2020  nt_dual_type,.  
-0001fab0: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
-0001fac0: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-0001fad0: 5f64 7561 6c5f 7479 7065 2c0a 2020 2020  _dual_type,.    
-0001fae0: 2020 2020 2020 2020 2276 616c 7565 223a          "value":
-0001faf0: 2057 6569 2831 292c 0a20 2020 2020 2020   Wei(1),.       
-0001fb00: 2020 2020 2022 6761 7322 3a20 3231 3030       "gas": 2100
-0001fb10: 302c 0a20 2020 2020 2020 2020 2020 2022  0,.            "
-0001fb20: 6761 7350 7269 6365 223a 2077 332e 746f  gasPrice": w3.to
-0001fb30: 5f77 6569 2832 2c20 2267 7765 6922 292c  _wei(2, "gwei"),
-0001fb40: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-0001fb50: 2020 2074 786e 5f68 6173 6820 3d20 7733     txn_hash = w3
-0001fb60: 2e65 7468 2e73 656e 645f 7472 616e 7361  .eth.send_transa
-0001fb70: 6374 696f 6e28 7478 6e5f 7061 7261 6d73  ction(txn_params
-0001fb80: 290a 0a20 2020 2020 2020 2074 786e 5f70  )..        txn_p
-0001fb90: 6172 616d 735b 2267 6173 5072 6963 6522  arams["gasPrice"
-0001fba0: 5d20 3d20 7733 2e74 6f5f 7765 6928 312c  ] = w3.to_wei(1,
-0001fbb0: 2022 6777 6569 2229 0a20 2020 2020 2020   "gwei").       
-0001fbc0: 2077 6974 6820 7079 7465 7374 2e72 6169   with pytest.rai
-0001fbd0: 7365 7328 5661 6c75 6545 7272 6f72 293a  ses(ValueError):
-0001fbe0: 0a20 2020 2020 2020 2020 2020 2077 332e  .            w3.
-0001fbf0: 6574 682e 7265 706c 6163 655f 7472 616e  eth.replace_tran
-0001fc00: 7361 6374 696f 6e28 7478 6e5f 6861 7368  saction(txn_hash
-0001fc10: 2c20 7478 6e5f 7061 7261 6d73 290a 0a20  , txn_params).. 
-0001fc20: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
-0001fc30: 7265 706c 6163 655f 7472 616e 7361 6374  replace_transact
-0001fc40: 696f 6e5f 6761 735f 7072 6963 655f 6465  ion_gas_price_de
-0001fc50: 6661 756c 7469 6e67 5f6d 696e 696d 756d  faulting_minimum
-0001fc60: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-0001fc70: 7733 3a20 2257 6562 3322 2c20 756e 6c6f  w3: "Web3", unlo
-0001fc80: 636b 6564 5f61 6363 6f75 6e74 3a20 4368  cked_account: Ch
-0001fc90: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
-0001fca0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-0001fcb0: 2020 2020 2067 6173 5f70 7269 6365 203d       gas_price =
-0001fcc0: 2077 332e 746f 5f77 6569 2831 2c20 2267   w3.to_wei(1, "g
-0001fcd0: 7765 6922 290a 0a20 2020 2020 2020 2074  wei")..        t
-0001fce0: 786e 5f70 6172 616d 733a 2054 7850 6172  xn_params: TxPar
-0001fcf0: 616d 7320 3d20 7b0a 2020 2020 2020 2020  ams = {.        
-0001fd00: 2020 2020 2266 726f 6d22 3a20 756e 6c6f      "from": unlo
-0001fd10: 636b 6564 5f61 6363 6f75 6e74 2c0a 2020  cked_account,.  
-0001fd20: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
-0001fd30: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-0001fd40: 2c0a 2020 2020 2020 2020 2020 2020 2276  ,.            "v
-0001fd50: 616c 7565 223a 2057 6569 2831 292c 0a20  alue": Wei(1),. 
-0001fd60: 2020 2020 2020 2020 2020 2022 6761 7322             "gas"
-0001fd70: 3a20 3231 3030 302c 0a20 2020 2020 2020  : 21000,.       
-0001fd80: 2020 2020 2022 6761 7350 7269 6365 223a       "gasPrice":
-0001fd90: 2067 6173 5f70 7269 6365 2c0a 2020 2020   gas_price,.    
-0001fda0: 2020 2020 7d0a 2020 2020 2020 2020 7478      }.        tx
-0001fdb0: 6e5f 6861 7368 203d 2077 332e 6574 682e  n_hash = w3.eth.
-0001fdc0: 7365 6e64 5f74 7261 6e73 6163 7469 6f6e  send_transaction
-0001fdd0: 2874 786e 5f70 6172 616d 7329 0a0a 2020  (txn_params)..  
-0001fde0: 2020 2020 2020 7478 6e5f 7061 7261 6d73        txn_params
-0001fdf0: 2e70 6f70 2822 6761 7350 7269 6365 2229  .pop("gasPrice")
-0001fe00: 0a20 2020 2020 2020 2072 6570 6c61 6365  .        replace
-0001fe10: 5f74 786e 5f68 6173 6820 3d20 7733 2e65  _txn_hash = w3.e
-0001fe20: 7468 2e72 6570 6c61 6365 5f74 7261 6e73  th.replace_trans
-0001fe30: 6163 7469 6f6e 2874 786e 5f68 6173 682c  action(txn_hash,
-0001fe40: 2074 786e 5f70 6172 616d 7329 0a20 2020   txn_params).   
-0001fe50: 2020 2020 2072 6570 6c61 6365 5f74 786e       replace_txn
-0001fe60: 203d 2077 332e 6574 682e 6765 745f 7472   = w3.eth.get_tr
-0001fe70: 616e 7361 6374 696f 6e28 7265 706c 6163  ansaction(replac
-0001fe80: 655f 7478 6e5f 6861 7368 290a 0a20 2020  e_txn_hash)..   
-0001fe90: 2020 2020 2061 7373 6572 7420 7265 706c       assert repl
-0001fea0: 6163 655f 7478 6e5b 2267 6173 5072 6963  ace_txn["gasPric
-0001feb0: 6522 5d20 3d3d 206d 6174 682e 6365 696c  e"] == math.ceil
-0001fec0: 280a 2020 2020 2020 2020 2020 2020 6761  (.            ga
-0001fed0: 735f 7072 6963 6520 2a20 312e 3132 350a  s_price * 1.125.
-0001fee0: 2020 2020 2020 2020 2920 2023 206d 696e          )  # min
-0001fef0: 696d 756d 2067 6173 2070 7269 6365 0a0a  imum gas price..
-0001ff00: 2020 2020 6465 6620 7465 7374 5f65 7468      def test_eth
-0001ff10: 5f72 6570 6c61 6365 5f74 7261 6e73 6163  _replace_transac
-0001ff20: 7469 6f6e 5f67 6173 5f70 7269 6365 5f64  tion_gas_price_d
-0001ff30: 6566 6175 6c74 696e 675f 7374 7261 7465  efaulting_strate
-0001ff40: 6779 5f68 6967 6865 7228 0a20 2020 2020  gy_higher(.     
-0001ff50: 2020 2073 656c 662c 2077 333a 2022 5765     self, w3: "We
-0001ff60: 6233 222c 2075 6e6c 6f63 6b65 645f 6163  b3", unlocked_ac
-0001ff70: 636f 756e 743a 2043 6865 636b 7375 6d41  count: ChecksumA
-0001ff80: 6464 7265 7373 0a20 2020 2029 202d 3e20  ddress.    ) -> 
-0001ff90: 4e6f 6e65 3a0a 2020 2020 2020 2020 7478  None:.        tx
-0001ffa0: 6e5f 7061 7261 6d73 3a20 5478 5061 7261  n_params: TxPara
-0001ffb0: 6d73 203d 207b 0a20 2020 2020 2020 2020  ms = {.         
-0001ffc0: 2020 2022 6672 6f6d 223a 2075 6e6c 6f63     "from": unloc
-0001ffd0: 6b65 645f 6163 636f 756e 742c 0a20 2020  ked_account,.   
-0001ffe0: 2020 2020 2020 2020 2022 746f 223a 2075           "to": u
-0001fff0: 6e6c 6f63 6b65 645f 6163 636f 756e 742c  nlocked_account,
-00020000: 0a20 2020 2020 2020 2020 2020 2022 7661  .            "va
-00020010: 6c75 6522 3a20 5765 6928 3129 2c0a 2020  lue": Wei(1),.  
-00020020: 2020 2020 2020 2020 2020 2267 6173 223a            "gas":
-00020030: 2032 3130 3030 2c0a 2020 2020 2020 2020   21000,.        
-00020040: 2020 2020 2267 6173 5072 6963 6522 3a20      "gasPrice": 
-00020050: 7733 2e74 6f5f 7765 6928 312c 2022 6777  w3.to_wei(1, "gw
-00020060: 6569 2229 2c0a 2020 2020 2020 2020 7d0a  ei"),.        }.
-00020070: 2020 2020 2020 2020 7478 6e5f 6861 7368          txn_hash
-00020080: 203d 2077 332e 6574 682e 7365 6e64 5f74   = w3.eth.send_t
-00020090: 7261 6e73 6163 7469 6f6e 2874 786e 5f70  ransaction(txn_p
-000200a0: 6172 616d 7329 0a0a 2020 2020 2020 2020  arams)..        
-000200b0: 7477 6f5f 6777 6569 5f69 6e5f 7765 6920  two_gwei_in_wei 
-000200c0: 3d20 7733 2e74 6f5f 7765 6928 322c 2022  = w3.to_wei(2, "
-000200d0: 6777 6569 2229 0a0a 2020 2020 2020 2020  gwei")..        
-000200e0: 6465 6620 6869 6768 6572 5f67 6173 5f70  def higher_gas_p
-000200f0: 7269 6365 5f73 7472 6174 6567 7928 7733  rice_strategy(w3
-00020100: 3a20 2257 6562 3322 2c20 7478 6e3a 2054  : "Web3", txn: T
-00020110: 7850 6172 616d 7329 202d 3e20 5765 693a  xParams) -> Wei:
-00020120: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00020130: 7572 6e20 7477 6f5f 6777 6569 5f69 6e5f  urn two_gwei_in_
-00020140: 7765 690a 0a20 2020 2020 2020 2077 332e  wei..        w3.
-00020150: 6574 682e 7365 745f 6761 735f 7072 6963  eth.set_gas_pric
-00020160: 655f 7374 7261 7465 6779 2868 6967 6865  e_strategy(highe
-00020170: 725f 6761 735f 7072 6963 655f 7374 7261  r_gas_price_stra
-00020180: 7465 6779 290a 0a20 2020 2020 2020 2074  tegy)..        t
-00020190: 786e 5f70 6172 616d 732e 706f 7028 2267  xn_params.pop("g
-000201a0: 6173 5072 6963 6522 290a 2020 2020 2020  asPrice").      
-000201b0: 2020 7265 706c 6163 655f 7478 6e5f 6861    replace_txn_ha
-000201c0: 7368 203d 2077 332e 6574 682e 7265 706c  sh = w3.eth.repl
-000201d0: 6163 655f 7472 616e 7361 6374 696f 6e28  ace_transaction(
-000201e0: 7478 6e5f 6861 7368 2c20 7478 6e5f 7061  txn_hash, txn_pa
-000201f0: 7261 6d73 290a 2020 2020 2020 2020 7265  rams).        re
-00020200: 706c 6163 655f 7478 6e20 3d20 7733 2e65  place_txn = w3.e
-00020210: 7468 2e67 6574 5f74 7261 6e73 6163 7469  th.get_transacti
-00020220: 6f6e 2872 6570 6c61 6365 5f74 786e 5f68  on(replace_txn_h
-00020230: 6173 6829 0a20 2020 2020 2020 2061 7373  ash).        ass
-00020240: 6572 7420 280a 2020 2020 2020 2020 2020  ert (.          
-00020250: 2020 7265 706c 6163 655f 7478 6e5b 2267    replace_txn["g
-00020260: 6173 5072 6963 6522 5d20 3d3d 2074 776f  asPrice"] == two
-00020270: 5f67 7765 695f 696e 5f77 6569 0a20 2020  _gwei_in_wei.   
-00020280: 2020 2020 2029 2020 2320 5374 7261 7465       )  # Strate
-00020290: 6779 2070 726f 7669 6465 7320 6869 6768  gy provides high
-000202a0: 6572 2067 6173 2070 7269 6365 0a20 2020  er gas price.   
-000202b0: 2020 2020 2077 332e 6574 682e 7365 745f       w3.eth.set_
-000202c0: 6761 735f 7072 6963 655f 7374 7261 7465  gas_price_strate
-000202d0: 6779 284e 6f6e 6529 2020 2320 7265 7365  gy(None)  # rese
-000202e0: 7420 7374 7261 7465 6779 0a0a 2020 2020  t strategy..    
-000202f0: 6465 6620 7465 7374 5f65 7468 5f72 6570  def test_eth_rep
-00020300: 6c61 6365 5f74 7261 6e73 6163 7469 6f6e  lace_transaction
-00020310: 5f67 6173 5f70 7269 6365 5f64 6566 6175  _gas_price_defau
-00020320: 6c74 696e 675f 7374 7261 7465 6779 5f6c  lting_strategy_l
-00020330: 6f77 6572 280a 2020 2020 2020 2020 7365  ower(.        se
-00020340: 6c66 2c20 7733 3a20 2257 6562 3322 2c20  lf, w3: "Web3", 
-00020350: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-00020360: 3a20 4368 6563 6b73 756d 4164 6472 6573  : ChecksumAddres
-00020370: 730a 2020 2020 2920 2d3e 204e 6f6e 653a  s.    ) -> None:
-00020380: 0a20 2020 2020 2020 2067 6173 5f70 7269  .        gas_pri
-00020390: 6365 203d 2077 332e 746f 5f77 6569 2832  ce = w3.to_wei(2
-000203a0: 2c20 2267 7765 6922 290a 0a20 2020 2020  , "gwei")..     
-000203b0: 2020 2074 786e 5f70 6172 616d 733a 2054     txn_params: T
-000203c0: 7850 6172 616d 7320 3d20 7b0a 2020 2020  xParams = {.    
-000203d0: 2020 2020 2020 2020 2266 726f 6d22 3a20          "from": 
-000203e0: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-000203f0: 2c0a 2020 2020 2020 2020 2020 2020 2274  ,.            "t
-00020400: 6f22 3a20 756e 6c6f 636b 6564 5f61 6363  o": unlocked_acc
-00020410: 6f75 6e74 2c0a 2020 2020 2020 2020 2020  ount,.          
-00020420: 2020 2276 616c 7565 223a 2057 6569 2831    "value": Wei(1
-00020430: 292c 0a20 2020 2020 2020 2020 2020 2022  ),.            "
-00020440: 6761 7322 3a20 3231 3030 302c 0a20 2020  gas": 21000,.   
-00020450: 2020 2020 2020 2020 2022 6761 7350 7269           "gasPri
-00020460: 6365 223a 2067 6173 5f70 7269 6365 2c0a  ce": gas_price,.
-00020470: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00020480: 2020 7478 6e5f 6861 7368 203d 2077 332e    txn_hash = w3.
-00020490: 6574 682e 7365 6e64 5f74 7261 6e73 6163  eth.send_transac
-000204a0: 7469 6f6e 2874 786e 5f70 6172 616d 7329  tion(txn_params)
-000204b0: 0a0a 2020 2020 2020 2020 6465 6620 6c6f  ..        def lo
-000204c0: 7765 725f 6761 735f 7072 6963 655f 7374  wer_gas_price_st
-000204d0: 7261 7465 6779 2877 333a 2022 5765 6233  rategy(w3: "Web3
-000204e0: 222c 2074 786e 3a20 5478 5061 7261 6d73  ", txn: TxParams
-000204f0: 2920 2d3e 2057 6569 3a0a 2020 2020 2020  ) -> Wei:.      
-00020500: 2020 2020 2020 7265 7475 726e 2077 332e        return w3.
-00020510: 746f 5f77 6569 2831 2c20 2267 7765 6922  to_wei(1, "gwei"
-00020520: 290a 0a20 2020 2020 2020 2077 332e 6574  )..        w3.et
-00020530: 682e 7365 745f 6761 735f 7072 6963 655f  h.set_gas_price_
-00020540: 7374 7261 7465 6779 286c 6f77 6572 5f67  strategy(lower_g
-00020550: 6173 5f70 7269 6365 5f73 7472 6174 6567  as_price_strateg
-00020560: 7929 0a0a 2020 2020 2020 2020 7478 6e5f  y)..        txn_
-00020570: 7061 7261 6d73 2e70 6f70 2822 6761 7350  params.pop("gasP
-00020580: 7269 6365 2229 0a20 2020 2020 2020 2072  rice").        r
-00020590: 6570 6c61 6365 5f74 786e 5f68 6173 6820  eplace_txn_hash 
-000205a0: 3d20 7733 2e65 7468 2e72 6570 6c61 6365  = w3.eth.replace
-000205b0: 5f74 7261 6e73 6163 7469 6f6e 2874 786e  _transaction(txn
-000205c0: 5f68 6173 682c 2074 786e 5f70 6172 616d  _hash, txn_param
-000205d0: 7329 0a20 2020 2020 2020 2072 6570 6c61  s).        repla
-000205e0: 6365 5f74 786e 203d 2077 332e 6574 682e  ce_txn = w3.eth.
-000205f0: 6765 745f 7472 616e 7361 6374 696f 6e28  get_transaction(
-00020600: 7265 706c 6163 655f 7478 6e5f 6861 7368  replace_txn_hash
-00020610: 290a 2020 2020 2020 2020 2320 5374 7261  ).        # Stra
-00020620: 7465 6779 2070 726f 7669 6465 7320 6c6f  tegy provides lo
-00020630: 7765 7220 6761 7320 7072 6963 6520 2d20  wer gas price - 
-00020640: 6d69 6e69 6d75 6d20 7072 6566 6572 7265  minimum preferre
-00020650: 640a 2020 2020 2020 2020 6173 7365 7274  d.        assert
-00020660: 2072 6570 6c61 6365 5f74 786e 5b22 6761   replace_txn["ga
-00020670: 7350 7269 6365 225d 203d 3d20 6d61 7468  sPrice"] == math
-00020680: 2e63 6569 6c28 6761 735f 7072 6963 6520  .ceil(gas_price 
-00020690: 2a20 312e 3132 3529 0a20 2020 2020 2020  * 1.125).       
-000206a0: 2077 332e 6574 682e 7365 745f 6761 735f   w3.eth.set_gas_
-000206b0: 7072 6963 655f 7374 7261 7465 6779 284e  price_strategy(N
-000206c0: 6f6e 6529 2020 2320 7265 7365 7420 7374  one)  # reset st
-000206d0: 7261 7465 6779 0a0a 2020 2020 6465 6620  rategy..    def 
-000206e0: 7465 7374 5f65 7468 5f6d 6f64 6966 795f  test_eth_modify_
-000206f0: 7472 616e 7361 6374 696f 6e5f 6c65 6761  transaction_lega
-00020700: 6379 280a 2020 2020 2020 2020 7365 6c66  cy(.        self
-00020710: 2c20 7733 3a20 2257 6562 3322 2c20 756e  , w3: "Web3", un
-00020720: 6c6f 636b 6564 5f61 6363 6f75 6e74 3a20  locked_account: 
-00020730: 4368 6563 6b73 756d 4164 6472 6573 730a  ChecksumAddress.
-00020740: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
-00020750: 2020 2020 2020 2074 786e 5f70 6172 616d         txn_param
-00020760: 733a 2054 7850 6172 616d 7320 3d20 7b0a  s: TxParams = {.
-00020770: 2020 2020 2020 2020 2020 2020 2266 726f              "fro
-00020780: 6d22 3a20 756e 6c6f 636b 6564 5f61 6363  m": unlocked_acc
-00020790: 6f75 6e74 2c0a 2020 2020 2020 2020 2020  ount,.          
-000207a0: 2020 2274 6f22 3a20 756e 6c6f 636b 6564    "to": unlocked
-000207b0: 5f61 6363 6f75 6e74 2c0a 2020 2020 2020  _account,.      
-000207c0: 2020 2020 2020 2276 616c 7565 223a 2057        "value": W
-000207d0: 6569 2831 292c 0a20 2020 2020 2020 2020  ei(1),.         
-000207e0: 2020 2022 6761 7322 3a20 3231 3030 302c     "gas": 21000,
-000207f0: 0a20 2020 2020 2020 2020 2020 2022 6761  .            "ga
-00020800: 7350 7269 6365 223a 2077 332e 746f 5f77  sPrice": w3.to_w
-00020810: 6569 280a 2020 2020 2020 2020 2020 2020  ei(.            
-00020820: 2020 2020 312c 2022 6777 6569 220a 2020      1, "gwei".  
-00020830: 2020 2020 2020 2020 2020 292c 2020 2320            ),  # 
-00020840: 6d75 7374 2062 6520 6772 6561 7465 7220  must be greater 
-00020850: 7468 616e 2062 6173 655f 6665 6520 706f  than base_fee po
-00020860: 7374 204c 6f6e 646f 6e0a 2020 2020 2020  st London.      
-00020870: 2020 7d0a 2020 2020 2020 2020 7478 6e5f    }.        txn_
-00020880: 6861 7368 203d 2077 332e 6574 682e 7365  hash = w3.eth.se
-00020890: 6e64 5f74 7261 6e73 6163 7469 6f6e 2874  nd_transaction(t
-000208a0: 786e 5f70 6172 616d 7329 0a0a 2020 2020  xn_params)..    
-000208b0: 2020 2020 6d6f 6469 6669 6564 5f74 786e      modified_txn
-000208c0: 5f68 6173 6820 3d20 7733 2e65 7468 2e6d  _hash = w3.eth.m
-000208d0: 6f64 6966 795f 7472 616e 7361 6374 696f  odify_transactio
-000208e0: 6e28 0a20 2020 2020 2020 2020 2020 2074  n(.            t
-000208f0: 786e 5f68 6173 682c 2067 6173 5072 6963  xn_hash, gasPric
-00020900: 653d 2863 6173 7428 696e 742c 2074 786e  e=(cast(int, txn
-00020910: 5f70 6172 616d 735b 2267 6173 5072 6963  _params["gasPric
-00020920: 6522 5d29 202a 2032 292c 2076 616c 7565  e"]) * 2), value
-00020930: 3d32 0a20 2020 2020 2020 2029 0a20 2020  =2.        ).   
-00020940: 2020 2020 206d 6f64 6966 6965 645f 7478       modified_tx
-00020950: 6e20 3d20 7733 2e65 7468 2e67 6574 5f74  n = w3.eth.get_t
-00020960: 7261 6e73 6163 7469 6f6e 286d 6f64 6966  ransaction(modif
-00020970: 6965 645f 7478 6e5f 6861 7368 290a 0a20  ied_txn_hash).. 
-00020980: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
-00020990: 5f73 616d 655f 6164 6472 6573 7328 0a20  _same_address(. 
-000209a0: 2020 2020 2020 2020 2020 206d 6f64 6966             modif
-000209b0: 6965 645f 7478 6e5b 2266 726f 6d22 5d2c  ied_txn["from"],
-000209c0: 2063 6173 7428 4368 6563 6b73 756d 4164   cast(ChecksumAd
-000209d0: 6472 6573 732c 2074 786e 5f70 6172 616d  dress, txn_param
-000209e0: 735b 2266 726f 6d22 5d29 0a20 2020 2020  s["from"]).     
-000209f0: 2020 2029 0a20 2020 2020 2020 2061 7373     ).        ass
-00020a00: 6572 7420 6973 5f73 616d 655f 6164 6472  ert is_same_addr
-00020a10: 6573 7328 0a20 2020 2020 2020 2020 2020  ess(.           
-00020a20: 206d 6f64 6966 6965 645f 7478 6e5b 2274   modified_txn["t
-00020a30: 6f22 5d2c 2063 6173 7428 4368 6563 6b73  o"], cast(Checks
-00020a40: 756d 4164 6472 6573 732c 2074 786e 5f70  umAddress, txn_p
-00020a50: 6172 616d 735b 2274 6f22 5d29 0a20 2020  arams["to"]).   
-00020a60: 2020 2020 2029 0a20 2020 2020 2020 2061       ).        a
-00020a70: 7373 6572 7420 6d6f 6469 6669 6564 5f74  ssert modified_t
-00020a80: 786e 5b22 7661 6c75 6522 5d20 3d3d 2032  xn["value"] == 2
-00020a90: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00020aa0: 6d6f 6469 6669 6564 5f74 786e 5b22 6761  modified_txn["ga
-00020ab0: 7322 5d20 3d3d 2032 3130 3030 0a20 2020  s"] == 21000.   
-00020ac0: 2020 2020 2061 7373 6572 7420 6d6f 6469       assert modi
-00020ad0: 6669 6564 5f74 786e 5b22 6761 7350 7269  fied_txn["gasPri
-00020ae0: 6365 225d 203d 3d20 6361 7374 2869 6e74  ce"] == cast(int
-00020af0: 2c20 7478 6e5f 7061 7261 6d73 5b22 6761  , txn_params["ga
-00020b00: 7350 7269 6365 225d 2920 2a20 320a 0a20  sPrice"]) * 2.. 
-00020b10: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
-00020b20: 6d6f 6469 6679 5f74 7261 6e73 6163 7469  modify_transacti
-00020b30: 6f6e 280a 2020 2020 2020 2020 7365 6c66  on(.        self
-00020b40: 2c20 7733 3a20 2257 6562 3322 2c20 756e  , w3: "Web3", un
-00020b50: 6c6f 636b 6564 5f61 6363 6f75 6e74 3a20  locked_account: 
-00020b60: 4368 6563 6b73 756d 4164 6472 6573 730a  ChecksumAddress.
-00020b70: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
-00020b80: 2020 2020 2020 2074 786e 5f70 6172 616d         txn_param
-00020b90: 733a 2054 7850 6172 616d 7320 3d20 7b0a  s: TxParams = {.
-00020ba0: 2020 2020 2020 2020 2020 2020 2266 726f              "fro
-00020bb0: 6d22 3a20 756e 6c6f 636b 6564 5f61 6363  m": unlocked_acc
-00020bc0: 6f75 6e74 2c0a 2020 2020 2020 2020 2020  ount,.          
-00020bd0: 2020 2274 6f22 3a20 756e 6c6f 636b 6564    "to": unlocked
-00020be0: 5f61 6363 6f75 6e74 2c0a 2020 2020 2020  _account,.      
-00020bf0: 2020 2020 2020 2276 616c 7565 223a 2057        "value": W
-00020c00: 6569 2831 292c 0a20 2020 2020 2020 2020  ei(1),.         
-00020c10: 2020 2022 6761 7322 3a20 3231 3030 302c     "gas": 21000,
-00020c20: 0a20 2020 2020 2020 2020 2020 2022 6d61  .            "ma
-00020c30: 7850 7269 6f72 6974 7946 6565 5065 7247  xPriorityFeePerG
-00020c40: 6173 223a 2077 332e 746f 5f77 6569 2831  as": w3.to_wei(1
-00020c50: 2c20 2267 7765 6922 292c 0a20 2020 2020  , "gwei"),.     
-00020c60: 2020 2020 2020 2022 6d61 7846 6565 5065         "maxFeePe
-00020c70: 7247 6173 223a 2077 332e 746f 5f77 6569  rGas": w3.to_wei
-00020c80: 2832 2c20 2267 7765 6922 292c 0a20 2020  (2, "gwei"),.   
-00020c90: 2020 2020 207d 0a20 2020 2020 2020 2074       }.        t
-00020ca0: 786e 5f68 6173 6820 3d20 7733 2e65 7468  xn_hash = w3.eth
-00020cb0: 2e73 656e 645f 7472 616e 7361 6374 696f  .send_transactio
-00020cc0: 6e28 7478 6e5f 7061 7261 6d73 290a 0a20  n(txn_params).. 
-00020cd0: 2020 2020 2020 206d 6f64 6966 6965 645f         modified_
-00020ce0: 7478 6e5f 6861 7368 203d 2077 332e 6574  txn_hash = w3.et
-00020cf0: 682e 6d6f 6469 6679 5f74 7261 6e73 6163  h.modify_transac
-00020d00: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
-00020d10: 2020 7478 6e5f 6861 7368 2c0a 2020 2020    txn_hash,.    
-00020d20: 2020 2020 2020 2020 7661 6c75 653d 322c          value=2,
-00020d30: 0a20 2020 2020 2020 2020 2020 206d 6178  .            max
-00020d40: 5072 696f 7269 7479 4665 6550 6572 4761  PriorityFeePerGa
-00020d50: 733d 2863 6173 7428 5765 692c 2074 786e  s=(cast(Wei, txn
-00020d60: 5f70 6172 616d 735b 226d 6178 5072 696f  _params["maxPrio
-00020d70: 7269 7479 4665 6550 6572 4761 7322 5d29  rityFeePerGas"])
-00020d80: 202a 2032 292c 0a20 2020 2020 2020 2020   * 2),.         
-00020d90: 2020 206d 6178 4665 6550 6572 4761 733d     maxFeePerGas=
-00020da0: 2863 6173 7428 5765 692c 2074 786e 5f70  (cast(Wei, txn_p
-00020db0: 6172 616d 735b 226d 6178 4665 6550 6572  arams["maxFeePer
-00020dc0: 4761 7322 5d29 202a 2032 292c 0a20 2020  Gas"]) * 2),.   
-00020dd0: 2020 2020 2029 0a20 2020 2020 2020 206d       ).        m
-00020de0: 6f64 6966 6965 645f 7478 6e20 3d20 7733  odified_txn = w3
-00020df0: 2e65 7468 2e67 6574 5f74 7261 6e73 6163  .eth.get_transac
-00020e00: 7469 6f6e 286d 6f64 6966 6965 645f 7478  tion(modified_tx
-00020e10: 6e5f 6861 7368 290a 0a20 2020 2020 2020  n_hash)..       
-00020e20: 2061 7373 6572 7420 6973 5f73 616d 655f   assert is_same_
-00020e30: 6164 6472 6573 7328 0a20 2020 2020 2020  address(.       
-00020e40: 2020 2020 206d 6f64 6966 6965 645f 7478       modified_tx
-00020e50: 6e5b 2266 726f 6d22 5d2c 2063 6173 7428  n["from"], cast(
-00020e60: 4368 6563 6b73 756d 4164 6472 6573 732c  ChecksumAddress,
-00020e70: 2074 786e 5f70 6172 616d 735b 2266 726f   txn_params["fro
-00020e80: 6d22 5d29 0a20 2020 2020 2020 2029 0a20  m"]).        ). 
-00020e90: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
-00020ea0: 5f73 616d 655f 6164 6472 6573 7328 0a20  _same_address(. 
-00020eb0: 2020 2020 2020 2020 2020 206d 6f64 6966             modif
-00020ec0: 6965 645f 7478 6e5b 2274 6f22 5d2c 2063  ied_txn["to"], c
-00020ed0: 6173 7428 4368 6563 6b73 756d 4164 6472  ast(ChecksumAddr
-00020ee0: 6573 732c 2074 786e 5f70 6172 616d 735b  ess, txn_params[
-00020ef0: 2274 6f22 5d29 0a20 2020 2020 2020 2029  "to"]).        )
-00020f00: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00020f10: 6d6f 6469 6669 6564 5f74 786e 5b22 7661  modified_txn["va
-00020f20: 6c75 6522 5d20 3d3d 2032 0a20 2020 2020  lue"] == 2.     
-00020f30: 2020 2061 7373 6572 7420 6d6f 6469 6669     assert modifi
-00020f40: 6564 5f74 786e 5b22 6761 7322 5d20 3d3d  ed_txn["gas"] ==
-00020f50: 2032 3130 3030 0a20 2020 2020 2020 2061   21000.        a
-00020f60: 7373 6572 7420 280a 2020 2020 2020 2020  ssert (.        
-00020f70: 2020 2020 6d6f 6469 6669 6564 5f74 786e      modified_txn
-00020f80: 5b22 6d61 7850 7269 6f72 6974 7946 6565  ["maxPriorityFee
-00020f90: 5065 7247 6173 225d 0a20 2020 2020 2020  PerGas"].       
-00020fa0: 2020 2020 203d 3d20 6361 7374 2857 6569       == cast(Wei
-00020fb0: 2c20 7478 6e5f 7061 7261 6d73 5b22 6d61  , txn_params["ma
-00020fc0: 7850 7269 6f72 6974 7946 6565 5065 7247  xPriorityFeePerG
-00020fd0: 6173 225d 2920 2a20 320a 2020 2020 2020  as"]) * 2.      
-00020fe0: 2020 290a 2020 2020 2020 2020 6173 7365    ).        asse
-00020ff0: 7274 206d 6f64 6966 6965 645f 7478 6e5b  rt modified_txn[
-00021000: 226d 6178 4665 6550 6572 4761 7322 5d20  "maxFeePerGas"] 
-00021010: 3d3d 2063 6173 7428 5765 692c 2074 786e  == cast(Wei, txn
-00021020: 5f70 6172 616d 735b 226d 6178 4665 6550  _params["maxFeeP
-00021030: 6572 4761 7322 5d29 202a 2032 0a0a 2020  erGas"]) * 2..  
-00021040: 2020 6465 6620 7465 7374 5f65 7468 5f73    def test_eth_s
-00021050: 656e 645f 7261 775f 7472 616e 7361 6374  end_raw_transact
-00021060: 696f 6e28 0a20 2020 2020 2020 2073 656c  ion(.        sel
-00021070: 662c 2077 333a 2022 5765 6233 222c 2075  f, w3: "Web3", u
-00021080: 6e6c 6f63 6b65 645f 6163 636f 756e 743a  nlocked_account:
-00021090: 2043 6865 636b 7375 6d41 6464 7265 7373   ChecksumAddress
-000210a0: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-000210b0: 2020 2020 2020 2020 7369 676e 6564 5f74          signed_t
-000210c0: 7820 3d20 7733 2e65 7468 2e61 6363 6f75  x = w3.eth.accou
-000210d0: 6e74 2e73 6967 6e5f 7472 616e 7361 6374  nt.sign_transact
-000210e0: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
-000210f0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-00021100: 2020 2022 746f 223a 2022 3078 3030 3030     "to": "0x0000
-00021110: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00021120: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00021130: 3030 3030 222c 0a20 2020 2020 2020 2020  0000",.         
-00021140: 2020 2020 2020 2022 7661 6c75 6522 3a20         "value": 
-00021150: 302c 0a20 2020 2020 2020 2020 2020 2020  0,.             
-00021160: 2020 2022 6e6f 6e63 6522 3a20 7733 2e65     "nonce": w3.e
-00021170: 7468 2e67 6574 5f74 7261 6e73 6163 7469  th.get_transacti
-00021180: 6f6e 5f63 6f75 6e74 2875 6e6c 6f63 6b65  on_count(unlocke
-00021190: 645f 6163 636f 756e 7429 2c0a 2020 2020  d_account),.    
-000211a0: 2020 2020 2020 2020 2020 2020 2267 6173              "gas
-000211b0: 223a 2032 3130 3030 2c0a 2020 2020 2020  ": 21000,.      
-000211c0: 2020 2020 2020 2020 2020 226d 6178 4665            "maxFe
-000211d0: 6550 6572 4761 7322 3a20 3130 3030 3030  ePerGas": 100000
-000211e0: 3030 3030 2c0a 2020 2020 2020 2020 2020  0000,.          
-000211f0: 2020 2020 2020 226d 6178 5072 696f 7269        "maxPriori
-00021200: 7479 4665 6550 6572 4761 7322 3a20 3130  tyFeePerGas": 10
-00021210: 3030 3030 3030 3030 2c0a 2020 2020 2020  00000000,.      
-00021220: 2020 2020 2020 2020 2020 2263 6861 696e            "chain
-00021230: 4964 223a 2031 3331 3237 3733 3232 3934  Id": 13127732294
-00021240: 3035 3337 2c0a 2020 2020 2020 2020 2020  0537,.          
-00021250: 2020 7d2c 0a20 2020 2020 2020 2020 2020    },.           
-00021260: 2023 2075 6e6c 6f63 6b65 645f 6163 636f   # unlocked_acco
-00021270: 756e 7420 7072 6976 6174 6520 6b65 793a  unt private key:
-00021280: 0a20 2020 2020 2020 2020 2020 2022 3078  .            "0x
-00021290: 3339 3266 3633 6137 3962 3166 6638 3737  392f63a79b1ff877
-000212a0: 3438 3435 6633 6661 3639 6465 3461 3133  4845f3fa69de4a13
-000212b0: 3830 3061 3539 6537 3038 3366 3531 3837  800a59e7083f5187
-000212c0: 6631 3535 3866 3037 3937 6164 3066 3031  f1558f0797ad0f01
-000212d0: 222c 0a20 2020 2020 2020 2029 0a20 2020  ",.        ).   
-000212e0: 2020 2020 2074 786e 5f68 6173 6820 3d20       txn_hash = 
-000212f0: 7733 2e65 7468 2e73 656e 645f 7261 775f  w3.eth.send_raw_
-00021300: 7472 616e 7361 6374 696f 6e28 7369 676e  transaction(sign
-00021310: 6564 5f74 782e 7261 7754 7261 6e73 6163  ed_tx.rawTransac
-00021320: 7469 6f6e 290a 2020 2020 2020 2020 6173  tion).        as
-00021330: 7365 7274 2074 786e 5f68 6173 6820 3d3d  sert txn_hash ==
-00021340: 2073 6967 6e65 645f 7478 2e68 6173 680a   signed_tx.hash.
-00021350: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
-00021360: 685f 6361 6c6c 2873 656c 662c 2077 333a  h_call(self, w3:
-00021370: 2022 5765 6233 222c 206d 6174 685f 636f   "Web3", math_co
-00021380: 6e74 7261 6374 3a20 2243 6f6e 7472 6163  ntract: "Contrac
-00021390: 7422 2920 2d3e 204e 6f6e 653a 0a20 2020  t") -> None:.   
-000213a0: 2020 2020 2063 6f69 6e62 6173 6520 3d20       coinbase = 
-000213b0: 7733 2e65 7468 2e63 6f69 6e62 6173 650a  w3.eth.coinbase.
-000213c0: 2020 2020 2020 2020 7478 6e5f 7061 7261          txn_para
-000213d0: 6d73 203d 206d 6174 685f 636f 6e74 7261  ms = math_contra
-000213e0: 6374 2e5f 7072 6570 6172 655f 7472 616e  ct._prepare_tran
-000213f0: 7361 6374 696f 6e28 0a20 2020 2020 2020  saction(.       
-00021400: 2020 2020 2066 6e5f 6e61 6d65 3d22 6164       fn_name="ad
-00021410: 6422 2c0a 2020 2020 2020 2020 2020 2020  d",.            
-00021420: 666e 5f61 7267 733d 2837 2c20 3131 292c  fn_args=(7, 11),
-00021430: 0a20 2020 2020 2020 2020 2020 2074 7261  .            tra
-00021440: 6e73 6163 7469 6f6e 3d7b 2266 726f 6d22  nsaction={"from"
-00021450: 3a20 636f 696e 6261 7365 2c20 2274 6f22  : coinbase, "to"
-00021460: 3a20 6d61 7468 5f63 6f6e 7472 6163 742e  : math_contract.
-00021470: 6164 6472 6573 737d 2c0a 2020 2020 2020  address},.      
-00021480: 2020 290a 2020 2020 2020 2020 6361 6c6c    ).        call
-00021490: 5f72 6573 756c 7420 3d20 7733 2e65 7468  _result = w3.eth
-000214a0: 2e63 616c 6c28 7478 6e5f 7061 7261 6d73  .call(txn_params
-000214b0: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-000214c0: 2069 735f 7374 7269 6e67 2863 616c 6c5f   is_string(call_
-000214d0: 7265 7375 6c74 290a 2020 2020 2020 2020  result).        
-000214e0: 2872 6573 756c 742c 2920 3d20 7733 2e63  (result,) = w3.c
-000214f0: 6f64 6563 2e64 6563 6f64 6528 5b22 7569  odec.decode(["ui
-00021500: 6e74 3235 3622 5d2c 2063 616c 6c5f 7265  nt256"], call_re
-00021510: 7375 6c74 290a 2020 2020 2020 2020 6173  sult).        as
-00021520: 7365 7274 2072 6573 756c 7420 3d3d 2031  sert result == 1
-00021530: 380a 0a20 2020 2064 6566 2074 6573 745f  8..    def test_
-00021540: 6574 685f 6361 6c6c 5f77 6974 685f 6f76  eth_call_with_ov
-00021550: 6572 7269 6465 5f63 6f64 6528 0a20 2020  erride_code(.   
-00021560: 2020 2020 2073 656c 662c 2077 333a 2022       self, w3: "
-00021570: 5765 6233 222c 2072 6576 6572 745f 636f  Web3", revert_co
-00021580: 6e74 7261 6374 3a20 2243 6f6e 7472 6163  ntract: "Contrac
-00021590: 7422 0a20 2020 2029 202d 3e20 4e6f 6e65  t".    ) -> None
-000215a0: 3a0a 2020 2020 2020 2020 636f 696e 6261  :.        coinba
-000215b0: 7365 203d 2077 332e 6574 682e 636f 696e  se = w3.eth.coin
-000215c0: 6261 7365 0a20 2020 2020 2020 2074 786e  base.        txn
-000215d0: 5f70 6172 616d 7320 3d20 7265 7665 7274  _params = revert
-000215e0: 5f63 6f6e 7472 6163 742e 5f70 7265 7061  _contract._prepa
-000215f0: 7265 5f74 7261 6e73 6163 7469 6f6e 280a  re_transaction(.
-00021600: 2020 2020 2020 2020 2020 2020 666e 5f6e              fn_n
-00021610: 616d 653d 226e 6f72 6d61 6c46 756e 6374  ame="normalFunct
-00021620: 696f 6e22 2c0a 2020 2020 2020 2020 2020  ion",.          
-00021630: 2020 7472 616e 7361 6374 696f 6e3d 7b22    transaction={"
-00021640: 6672 6f6d 223a 2063 6f69 6e62 6173 652c  from": coinbase,
-00021650: 2022 746f 223a 2072 6576 6572 745f 636f   "to": revert_co
-00021660: 6e74 7261 6374 2e61 6464 7265 7373 7d2c  ntract.address},
-00021670: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00021680: 2020 2063 616c 6c5f 7265 7375 6c74 203d     call_result =
-00021690: 2077 332e 6574 682e 6361 6c6c 2874 786e   w3.eth.call(txn
-000216a0: 5f70 6172 616d 7329 0a20 2020 2020 2020  _params).       
-000216b0: 2028 7265 7375 6c74 2c29 203d 2077 332e   (result,) = w3.
-000216c0: 636f 6465 632e 6465 636f 6465 285b 2262  codec.decode(["b
-000216d0: 6f6f 6c22 5d2c 2063 616c 6c5f 7265 7375  ool"], call_resu
-000216e0: 6c74 290a 2020 2020 2020 2020 6173 7365  lt).        asse
-000216f0: 7274 2072 6573 756c 7420 6973 2054 7275  rt result is Tru
-00021700: 650a 0a20 2020 2020 2020 2023 206f 7665  e..        # ove
-00021710: 7272 6964 6520 7275 6e74 696d 6520 6279  rride runtime by
-00021720: 7465 636f 6465 3a20 606e 6f72 6d61 6c46  tecode: `normalF
-00021730: 756e 6374 696f 6e60 2072 6574 7572 6e73  unction` returns
-00021740: 2060 6661 6c73 6560 0a20 2020 2020 2020   `false`.       
-00021750: 206f 7665 7272 6964 655f 636f 6465 203d   override_code =
-00021760: 2048 6578 5374 7228 0a20 2020 2020 2020   HexStr(.       
-00021770: 2020 2020 2022 3078 3630 3830 3630 3430       "0x60806040
-00021780: 3532 3334 3830 3135 3630 3066 3537 3630  52348015600f5760
-00021790: 3030 3830 6664 3562 3530 3630 3034 3336  0080fd5b50600436
-000217a0: 3130 3630 3363 3537 3630 3030 3335 3630  10603c5760003560
-000217b0: 6530 3163 3830 3633 3138 3563 3338 6134  e01c8063185c38a4
-000217c0: 3134 3630 3431 3537 3830 3633 6330 3661  146041578063c06a
-000217d0: 3937 6362 3134 3630 3439 3537 3830 3633  97cb146049578063
-000217e0: 6436 3765 3462 3834 3134 3630 3531 3537  d67e4b8414605157
-000217f0: 3562 3630 3030 3830 6664 3562 3630 3437  5b600080fd5b6047
-00021800: 3630 3731 3536 3562 3030 3562 3630 3466  6071565b005b604f
-00021810: 3630 6466 3536 3562 3030 3562 3630 3537  60df565b005b6057
-00021820: 3630 6534 3536 3562 3630 3430 3531 3830  60e4565b60405180
-00021830: 3832 3135 3135 3135 3135 3831 3532 3630  8215151515815260
-00021840: 3230 3031 3931 3530 3530 3630 3430 3531  2001915050604051
-00021850: 3830 3931 3033 3930 6633 3562 3630 3430  80910390f35b6040
-00021860: 3531 3766 3038 6333 3739 6130 3030 3030  517f08c379a00000
-00021870: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00021880: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00021890: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-000218a0: 3030 3030 3831 3532 3630 3034 3031 3830  0000815260040180
-000218b0: 3830 3630 3230 3031 3832 3831 3033 3832  8060200182810382
-000218c0: 3532 3630 3162 3831 3532 3630 3230 3031  52601b8152602001
-000218d0: 3830 3766 3436 3735 3665 3633 3734 3639  807f46756e637469
-000218e0: 3666 3665 3230 3638 3631 3733 3230 3632  6f6e206861732062
-000218f0: 3635 3635 3665 3230 3732 3635 3736 3635  65656e2072657665
-00021900: 3732 3734 3635 3634 3265 3030 3030 3030  727465642e000000
-00021910: 3030 3030 3831 3532 3530 3630 3230 3031  0000815250602001
-00021920: 3931 3530 3530 3630 3430 3531 3830 3931  9150506040518091
-00021930: 3033 3930 6664 3562 3630 3030 3830 6664  0390fd5b600080fd
-00021940: 3562 3630 3030 3830 3930 3530 3930 3536  5b60008090509056
-00021950: 6665 6132 3634 3639 3730 3636 3733 3538  fea2646970667358
-00021960: 3232 3132 3230 6262 3731 6539 6539 6132  221220bb71e9e9a2
-00021970: 6532 3731 6364 3066 6265 3833 3335 3234  e271cd0fbe833524
-00021980: 6133 6561 3637 6466 3935 6632 3565 6131  a3ea67df95f25ea1
-00021990: 3361 6566 3562 3061 3736 3166 6135 3262  3aef5b0a761fa52b
-000219a0: 3533 3866 3130 3634 3733 3666 3663 3633  538f1064736f6c63
-000219b0: 3433 3030 3036 3031 3030 3333 2220 2023  430006010033"  #
-000219c0: 206e 6f71 613a 2045 3530 310a 2020 2020   noqa: E501.    
-000219d0: 2020 2020 290a 2020 2020 2020 2020 6361      ).        ca
-000219e0: 6c6c 5f72 6573 756c 7420 3d20 7733 2e65  ll_result = w3.e
-000219f0: 7468 2e63 616c 6c28 0a20 2020 2020 2020  th.call(.       
-00021a00: 2020 2020 2074 786e 5f70 6172 616d 732c       txn_params,
-00021a10: 2022 6c61 7465 7374 222c 207b 7265 7665   "latest", {reve
-00021a20: 7274 5f63 6f6e 7472 6163 742e 6164 6472  rt_contract.addr
-00021a30: 6573 733a 207b 2263 6f64 6522 3a20 6f76  ess: {"code": ov
-00021a40: 6572 7269 6465 5f63 6f64 657d 7d0a 2020  erride_code}}.  
-00021a50: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00021a60: 2872 6573 756c 742c 2920 3d20 7733 2e63  (result,) = w3.c
-00021a70: 6f64 6563 2e64 6563 6f64 6528 5b22 626f  odec.decode(["bo
-00021a80: 6f6c 225d 2c20 6361 6c6c 5f72 6573 756c  ol"], call_resul
-00021a90: 7429 0a20 2020 2020 2020 2061 7373 6572  t).        asser
-00021aa0: 7420 7265 7375 6c74 2069 7320 4661 6c73  t result is Fals
-00021ab0: 650a 0a20 2020 2020 2020 2023 2074 6573  e..        # tes
-00021ac0: 7420 6279 7465 730a 0a20 2020 2020 2020  t bytes..       
-00021ad0: 2062 7974 6573 5f63 616c 6c5f 7265 7375   bytes_call_resu
-00021ae0: 6c74 203d 2077 332e 6574 682e 6361 6c6c  lt = w3.eth.call
-00021af0: 280a 2020 2020 2020 2020 2020 2020 7478  (.            tx
-00021b00: 6e5f 7061 7261 6d73 2c0a 2020 2020 2020  n_params,.      
-00021b10: 2020 2020 2020 226c 6174 6573 7422 2c0a        "latest",.
-00021b20: 2020 2020 2020 2020 2020 2020 7b72 6576              {rev
-00021b30: 6572 745f 636f 6e74 7261 6374 2e61 6464  ert_contract.add
-00021b40: 7265 7373 3a20 7b22 636f 6465 223a 2074  ress: {"code": t
-00021b50: 6f5f 6279 7465 7328 6865 7873 7472 3d6f  o_bytes(hexstr=o
-00021b60: 7665 7272 6964 655f 636f 6465 297d 7d2c  verride_code)}},
-00021b70: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00021b80: 2020 2028 6279 7465 735f 7265 7375 6c74     (bytes_result
-00021b90: 2c29 203d 2077 332e 636f 6465 632e 6465  ,) = w3.codec.de
-00021ba0: 636f 6465 285b 2262 6f6f 6c22 5d2c 2062  code(["bool"], b
-00021bb0: 7974 6573 5f63 616c 6c5f 7265 7375 6c74  ytes_call_result
-00021bc0: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-00021bd0: 2062 7974 6573 5f72 6573 756c 7420 6973   bytes_result is
-00021be0: 2046 616c 7365 0a0a 2020 2020 4070 7974   False..    @pyt
-00021bf0: 6573 742e 6d61 726b 2e70 6172 616d 6574  est.mark.paramet
-00021c00: 7269 7a65 280a 2020 2020 2020 2020 2270  rize(.        "p
-00021c10: 6172 616d 7322 2c0a 2020 2020 2020 2020  arams",.        
-00021c20: 280a 2020 2020 2020 2020 2020 2020 7b0a  (.            {.
-00021c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021c40: 226e 6f6e 6365 223a 2031 2c20 2023 2069  "nonce": 1,  # i
-00021c50: 6e74 0a20 2020 2020 2020 2020 2020 2020  nt.             
-00021c60: 2020 2022 6261 6c61 6e63 6522 3a20 312c     "balance": 1,
-00021c70: 2020 2320 696e 740a 2020 2020 2020 2020    # int.        
-00021c80: 2020 2020 2020 2020 2263 6f64 6522 3a20          "code": 
-00021c90: 4865 7853 7472 2822 3078 2229 2c20 2023  HexStr("0x"),  #
-00021ca0: 2048 6578 5374 720a 2020 2020 2020 2020   HexStr.        
-00021cb0: 2020 2020 2020 2020 2320 7769 7468 2073          # with s
-00021cc0: 7461 7465 0a20 2020 2020 2020 2020 2020  tate.           
-00021cd0: 2020 2020 2022 7374 6174 6522 3a20 7b48       "state": {H
-00021ce0: 6578 5374 7228 6622 3078 7b27 3030 2720  exStr(f"0x{'00' 
-00021cf0: 2a20 3332 7d22 293a 2048 6578 5374 7228  * 32}"): HexStr(
-00021d00: 6622 3078 7b27 3030 2720 2a20 3332 7d22  f"0x{'00' * 32}"
-00021d10: 297d 2c0a 2020 2020 2020 2020 2020 2020  )},.            
-00021d20: 7d2c 0a20 2020 2020 2020 2020 2020 207b  },.            {
-00021d30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021d40: 2022 6e6f 6e63 6522 3a20 4865 7853 7472   "nonce": HexStr
-00021d50: 2822 3078 3122 292c 2020 2320 4865 7853  ("0x1"),  # HexS
-00021d60: 7472 0a20 2020 2020 2020 2020 2020 2020  tr.             
-00021d70: 2020 2022 6261 6c61 6e63 6522 3a20 4865     "balance": He
-00021d80: 7853 7472 2822 3078 3122 292c 2020 2320  xStr("0x1"),  # 
-00021d90: 4865 7853 7472 0a20 2020 2020 2020 2020  HexStr.         
-00021da0: 2020 2020 2020 2022 636f 6465 223a 2062         "code": b
-00021db0: 225c 7830 3022 2c20 2023 2062 7974 6573  "\x00",  # bytes
-00021dc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021dd0: 2023 2077 6974 6820 7374 6174 6544 6966   # with stateDif
-00021de0: 660a 2020 2020 2020 2020 2020 2020 2020  f.              
-00021df0: 2020 2273 7461 7465 4469 6666 223a 207b    "stateDiff": {
-00021e00: 4865 7853 7472 2866 2230 787b 2730 3027  HexStr(f"0x{'00'
-00021e10: 202a 2033 327d 2229 3a20 4865 7853 7472   * 32}"): HexStr
-00021e20: 2866 2230 787b 2730 3027 202a 2033 327d  (f"0x{'00' * 32}
-00021e30: 2229 7d2c 0a20 2020 2020 2020 2020 2020  ")},.           
-00021e40: 207d 2c0a 2020 2020 2020 2020 292c 0a20   },.        ),. 
-00021e50: 2020 2029 0a20 2020 2064 6566 2074 6573     ).    def tes
-00021e60: 745f 6574 685f 6361 6c6c 5f77 6974 685f  t_eth_call_with_
-00021e70: 6f76 6572 7269 6465 5f70 6172 616d 5f74  override_param_t
-00021e80: 7970 655f 6368 6563 6b28 0a20 2020 2020  ype_check(.     
-00021e90: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-00021ea0: 2077 333a 2022 5765 6233 222c 0a20 2020   w3: "Web3",.   
-00021eb0: 2020 2020 206d 6174 685f 636f 6e74 7261       math_contra
-00021ec0: 6374 3a20 2243 6f6e 7472 6163 7422 2c0a  ct: "Contract",.
-00021ed0: 2020 2020 2020 2020 7061 7261 6d73 3a20          params: 
-00021ee0: 4361 6c6c 4f76 6572 7269 6465 5061 7261  CallOverridePara
-00021ef0: 6d73 2c0a 2020 2020 2920 2d3e 204e 6f6e  ms,.    ) -> Non
-00021f00: 653a 0a20 2020 2020 2020 2074 786e 5f70  e:.        txn_p
-00021f10: 6172 616d 733a 2054 7850 6172 616d 7320  arams: TxParams 
-00021f20: 3d20 7b22 6672 6f6d 223a 2077 332e 6574  = {"from": w3.et
-00021f30: 682e 636f 696e 6261 7365 7d0a 0a20 2020  h.coinbase}..   
-00021f40: 2020 2020 2023 2061 7373 6572 7420 646f       # assert do
-00021f50: 6573 206e 6f74 2072 6169 7365 0a20 2020  es not raise.   
-00021f60: 2020 2020 2077 332e 6574 682e 6361 6c6c       w3.eth.call
-00021f70: 2874 786e 5f70 6172 616d 732c 2022 6c61  (txn_params, "la
-00021f80: 7465 7374 222c 207b 6d61 7468 5f63 6f6e  test", {math_con
-00021f90: 7472 6163 742e 6164 6472 6573 733a 2070  tract.address: p
-00021fa0: 6172 616d 737d 290a 0a20 2020 2064 6566  arams})..    def
-00021fb0: 2074 6573 745f 6574 685f 6361 6c6c 5f77   test_eth_call_w
-00021fc0: 6974 685f 305f 7265 7375 6c74 280a 2020  ith_0_result(.  
-00021fd0: 2020 2020 2020 7365 6c66 2c20 7733 3a20        self, w3: 
-00021fe0: 2257 6562 3322 2c20 6d61 7468 5f63 6f6e  "Web3", math_con
-00021ff0: 7472 6163 743a 2022 436f 6e74 7261 6374  tract: "Contract
-00022000: 220a 2020 2020 2920 2d3e 204e 6f6e 653a  ".    ) -> None:
-00022010: 0a20 2020 2020 2020 2063 6f69 6e62 6173  .        coinbas
-00022020: 6520 3d20 7733 2e65 7468 2e63 6f69 6e62  e = w3.eth.coinb
-00022030: 6173 650a 2020 2020 2020 2020 7478 6e5f  ase.        txn_
-00022040: 7061 7261 6d73 203d 206d 6174 685f 636f  params = math_co
-00022050: 6e74 7261 6374 2e5f 7072 6570 6172 655f  ntract._prepare_
-00022060: 7472 616e 7361 6374 696f 6e28 0a20 2020  transaction(.   
-00022070: 2020 2020 2020 2020 2066 6e5f 6e61 6d65           fn_name
-00022080: 3d22 6164 6422 2c0a 2020 2020 2020 2020  ="add",.        
-00022090: 2020 2020 666e 5f61 7267 733d 2830 2c20      fn_args=(0, 
-000220a0: 3029 2c0a 2020 2020 2020 2020 2020 2020  0),.            
-000220b0: 7472 616e 7361 6374 696f 6e3d 7b22 6672  transaction={"fr
-000220c0: 6f6d 223a 2063 6f69 6e62 6173 652c 2022  om": coinbase, "
-000220d0: 746f 223a 206d 6174 685f 636f 6e74 7261  to": math_contra
-000220e0: 6374 2e61 6464 7265 7373 7d2c 0a20 2020  ct.address},.   
-000220f0: 2020 2020 2029 0a20 2020 2020 2020 2063       ).        c
-00022100: 616c 6c5f 7265 7375 6c74 203d 2077 332e  all_result = w3.
-00022110: 6574 682e 6361 6c6c 2874 786e 5f70 6172  eth.call(txn_par
-00022120: 616d 7329 0a20 2020 2020 2020 2061 7373  ams).        ass
-00022130: 6572 7420 6973 5f73 7472 696e 6728 6361  ert is_string(ca
-00022140: 6c6c 5f72 6573 756c 7429 0a20 2020 2020  ll_result).     
-00022150: 2020 2028 7265 7375 6c74 2c29 203d 2077     (result,) = w
-00022160: 332e 636f 6465 632e 6465 636f 6465 285b  3.codec.decode([
-00022170: 2275 696e 7432 3536 225d 2c20 6361 6c6c  "uint256"], call
-00022180: 5f72 6573 756c 7429 0a20 2020 2020 2020  _result).       
-00022190: 2061 7373 6572 7420 7265 7375 6c74 203d   assert result =
-000221a0: 3d20 300a 0a20 2020 2064 6566 2074 6573  = 0..    def tes
-000221b0: 745f 6574 685f 6361 6c6c 5f72 6576 6572  t_eth_call_rever
-000221c0: 745f 7769 7468 5f6d 7367 280a 2020 2020  t_with_msg(.    
-000221d0: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-000221e0: 2020 7733 3a20 2257 6562 3322 2c0a 2020    w3: "Web3",.  
-000221f0: 2020 2020 2020 7265 7665 7274 5f63 6f6e        revert_con
-00022200: 7472 6163 743a 2022 436f 6e74 7261 6374  tract: "Contract
-00022210: 222c 0a20 2020 2020 2020 2075 6e6c 6f63  ",.        unloc
-00022220: 6b65 645f 6163 636f 756e 743a 2043 6865  ked_account: Che
-00022230: 636b 7375 6d41 6464 7265 7373 2c0a 2020  cksumAddress,.  
-00022240: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-00022250: 2020 2020 2074 786e 5f70 6172 616d 7320       txn_params 
-00022260: 3d20 7265 7665 7274 5f63 6f6e 7472 6163  = revert_contrac
-00022270: 742e 5f70 7265 7061 7265 5f74 7261 6e73  t._prepare_trans
-00022280: 6163 7469 6f6e 280a 2020 2020 2020 2020  action(.        
-00022290: 2020 2020 666e 5f6e 616d 653d 2272 6576      fn_name="rev
-000222a0: 6572 7457 6974 684d 6573 7361 6765 222c  ertWithMessage",
-000222b0: 0a20 2020 2020 2020 2020 2020 2074 7261  .            tra
-000222c0: 6e73 6163 7469 6f6e 3d7b 0a20 2020 2020  nsaction={.     
-000222d0: 2020 2020 2020 2020 2020 2022 6672 6f6d             "from
-000222e0: 223a 2075 6e6c 6f63 6b65 645f 6163 636f  ": unlocked_acco
-000222f0: 756e 742c 0a20 2020 2020 2020 2020 2020  unt,.           
-00022300: 2020 2020 2022 746f 223a 2072 6576 6572       "to": rever
-00022310: 745f 636f 6e74 7261 6374 2e61 6464 7265  t_contract.addre
-00022320: 7373 2c0a 2020 2020 2020 2020 2020 2020  ss,.            
-00022330: 7d2c 0a20 2020 2020 2020 2029 0a20 2020  },.        ).   
-00022340: 2020 2020 2064 6174 6120 3d20 2230 7830       data = "0x0
-00022350: 3863 3337 3961 3030 3030 3030 3030 3030  8c379a0000000000
-00022360: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00022370: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00022380: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00022390: 3030 3030 3032 3030 3030 3030 3030 3030  0000020000000000
-000223a0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-000223b0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-000223c0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-000223d0: 3030 3030 3031 6234 3637 3536 6536 3337  000001b46756e637
-000223e0: 3436 3936 6636 6532 3036 3836 3137 3332  4696f6e206861732
-000223f0: 3036 3236 3536 3536 6532 3037 3236 3537  06265656e2072657
-00022400: 3636 3537 3237 3436 3536 3432 6530 3030  665727465642e000
-00022410: 3030 3030 3030 3022 2020 2320 6e6f 7161  0000000"  # noqa
-00022420: 3a20 4535 3031 0a20 2020 2020 2020 2077  : E501.        w
-00022430: 6974 6820 7079 7465 7374 2e72 6169 7365  ith pytest.raise
-00022440: 7328 0a20 2020 2020 2020 2020 2020 2043  s(.            C
-00022450: 6f6e 7472 6163 744c 6f67 6963 4572 726f  ontractLogicErro
-00022460: 722c 206d 6174 6368 3d22 6578 6563 7574  r, match="execut
-00022470: 696f 6e20 7265 7665 7274 6564 3a20 4675  ion reverted: Fu
-00022480: 6e63 7469 6f6e 2068 6173 2062 6565 6e20  nction has been 
-00022490: 7265 7665 7274 6564 220a 2020 2020 2020  reverted".      
-000224a0: 2020 2920 6173 2065 7863 696e 666f 3a0a    ) as excinfo:.
-000224b0: 2020 2020 2020 2020 2020 2020 7733 2e65              w3.e
-000224c0: 7468 2e63 616c 6c28 7478 6e5f 7061 7261  th.call(txn_para
-000224d0: 6d73 290a 2020 2020 2020 2020 6173 7365  ms).        asse
-000224e0: 7274 2065 7863 696e 666f 2e76 616c 7565  rt excinfo.value
-000224f0: 2e64 6174 6120 3d3d 2064 6174 610a 0a20  .data == data.. 
-00022500: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
-00022510: 6361 6c6c 5f72 6576 6572 745f 7769 7468  call_revert_with
-00022520: 6f75 745f 6d73 6728 0a20 2020 2020 2020  out_msg(.       
-00022530: 2073 656c 662c 0a20 2020 2020 2020 2077   self,.        w
-00022540: 333a 2022 5765 6233 222c 0a20 2020 2020  3: "Web3",.     
-00022550: 2020 2072 6576 6572 745f 636f 6e74 7261     revert_contra
-00022560: 6374 3a20 2243 6f6e 7472 6163 7422 2c0a  ct: "Contract",.
-00022570: 2020 2020 2020 2020 756e 6c6f 636b 6564          unlocked
-00022580: 5f61 6363 6f75 6e74 3a20 4368 6563 6b73  _account: Checks
-00022590: 756d 4164 6472 6573 732c 0a20 2020 2029  umAddress,.    )
-000225a0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-000225b0: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
-000225c0: 6973 6573 2843 6f6e 7472 6163 744c 6f67  ises(ContractLog
-000225d0: 6963 4572 726f 722c 206d 6174 6368 3d22  icError, match="
-000225e0: 6578 6563 7574 696f 6e20 7265 7665 7274  execution revert
-000225f0: 6564 2229 3a0a 2020 2020 2020 2020 2020  ed"):.          
-00022600: 2020 7478 6e5f 7061 7261 6d73 203d 2072    txn_params = r
-00022610: 6576 6572 745f 636f 6e74 7261 6374 2e5f  evert_contract._
-00022620: 7072 6570 6172 655f 7472 616e 7361 6374  prepare_transact
-00022630: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
-00022640: 2020 2020 2066 6e5f 6e61 6d65 3d22 7265       fn_name="re
-00022650: 7665 7274 5769 7468 6f75 744d 6573 7361  vertWithoutMessa
-00022660: 6765 222c 0a20 2020 2020 2020 2020 2020  ge",.           
-00022670: 2020 2020 2074 7261 6e73 6163 7469 6f6e       transaction
-00022680: 3d7b 0a20 2020 2020 2020 2020 2020 2020  ={.             
-00022690: 2020 2020 2020 2022 6672 6f6d 223a 2075         "from": u
-000226a0: 6e6c 6f63 6b65 645f 6163 636f 756e 742c  nlocked_account,
-000226b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000226c0: 2020 2020 2022 746f 223a 2072 6576 6572       "to": rever
-000226d0: 745f 636f 6e74 7261 6374 2e61 6464 7265  t_contract.addre
-000226e0: 7373 2c0a 2020 2020 2020 2020 2020 2020  ss,.            
-000226f0: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
-00022700: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-00022710: 2077 332e 6574 682e 6361 6c6c 2874 786e   w3.eth.call(txn
-00022720: 5f70 6172 616d 7329 0a0a 2020 2020 6465  _params)..    de
-00022730: 6620 7465 7374 5f65 7468 5f63 616c 6c5f  f test_eth_call_
-00022740: 6375 7374 6f6d 5f65 7272 6f72 5f72 6576  custom_error_rev
-00022750: 6572 745f 7769 7468 5f6d 7367 280a 2020  ert_with_msg(.  
-00022760: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
-00022770: 2020 2020 7733 3a20 2257 6562 3322 2c0a      w3: "Web3",.
-00022780: 2020 2020 2020 2020 7265 7665 7274 5f63          revert_c
-00022790: 6f6e 7472 6163 743a 2022 436f 6e74 7261  ontract: "Contra
-000227a0: 6374 222c 0a20 2020 2020 2020 2075 6e6c  ct",.        unl
-000227b0: 6f63 6b65 645f 6163 636f 756e 743a 2043  ocked_account: C
-000227c0: 6865 636b 7375 6d41 6464 7265 7373 2c0a  hecksumAddress,.
-000227d0: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
-000227e0: 2020 2020 2020 2064 6174 6120 3d20 7265         data = re
-000227f0: 7665 7274 5f63 6f6e 7472 6163 742e 656e  vert_contract.en
-00022800: 636f 6465 4142 4928 0a20 2020 2020 2020  codeABI(.       
-00022810: 2020 2020 2066 6e5f 6e61 6d65 3d22 556e       fn_name="Un
-00022820: 6175 7468 6f72 697a 6564 5769 7468 4d65  authorizedWithMe
-00022830: 7373 6167 6522 2c20 6172 6773 3d5b 2259  ssage", args=["Y
-00022840: 6f75 2061 7265 206e 6f74 2061 7574 686f  ou are not autho
-00022850: 7269 7a65 6422 5d0a 2020 2020 2020 2020  rized"].        
-00022860: 290a 2020 2020 2020 2020 7478 6e5f 7061  ).        txn_pa
-00022870: 7261 6d73 203d 2072 6576 6572 745f 636f  rams = revert_co
-00022880: 6e74 7261 6374 2e5f 7072 6570 6172 655f  ntract._prepare_
-00022890: 7472 616e 7361 6374 696f 6e28 0a20 2020  transaction(.   
-000228a0: 2020 2020 2020 2020 2066 6e5f 6e61 6d65           fn_name
-000228b0: 3d22 6375 7374 6f6d 4572 726f 7257 6974  ="customErrorWit
-000228c0: 684d 6573 7361 6765 222c 0a20 2020 2020  hMessage",.     
-000228d0: 2020 2020 2020 2074 7261 6e73 6163 7469         transacti
-000228e0: 6f6e 3d7b 0a20 2020 2020 2020 2020 2020  on={.           
-000228f0: 2020 2020 2022 6672 6f6d 223a 2075 6e6c       "from": unl
-00022900: 6f63 6b65 645f 6163 636f 756e 742c 0a20  ocked_account,. 
-00022910: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00022920: 746f 223a 2072 6576 6572 745f 636f 6e74  to": revert_cont
-00022930: 7261 6374 2e61 6464 7265 7373 2c0a 2020  ract.address,.  
-00022940: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
-00022950: 2020 2020 2029 0a20 2020 2020 2020 2077       ).        w
-00022960: 6974 6820 7079 7465 7374 2e72 6169 7365  ith pytest.raise
-00022970: 7328 436f 6e74 7261 6374 4375 7374 6f6d  s(ContractCustom
-00022980: 4572 726f 722c 206d 6174 6368 3d64 6174  Error, match=dat
-00022990: 6129 2061 7320 6578 6369 6e66 6f3a 0a20  a) as excinfo:. 
-000229a0: 2020 2020 2020 2020 2020 2077 332e 6574             w3.et
-000229b0: 682e 6361 6c6c 2874 786e 5f70 6172 616d  h.call(txn_param
-000229c0: 7329 0a20 2020 2020 2020 2061 7373 6572  s).        asser
-000229d0: 7420 6578 6369 6e66 6f2e 7661 6c75 652e  t excinfo.value.
-000229e0: 6461 7461 203d 3d20 6461 7461 0a0a 2020  data == data..  
-000229f0: 2020 6465 6620 7465 7374 5f65 7468 5f63    def test_eth_c
-00022a00: 616c 6c5f 6375 7374 6f6d 5f65 7272 6f72  all_custom_error
-00022a10: 5f72 6576 6572 745f 7769 7468 6f75 745f  _revert_without_
-00022a20: 6d73 6728 0a20 2020 2020 2020 2073 656c  msg(.        sel
-00022a30: 662c 0a20 2020 2020 2020 2077 333a 2022  f,.        w3: "
-00022a40: 5765 6233 222c 0a20 2020 2020 2020 2072  Web3",.        r
-00022a50: 6576 6572 745f 636f 6e74 7261 6374 3a20  evert_contract: 
-00022a60: 2243 6f6e 7472 6163 7422 2c0a 2020 2020  "Contract",.    
-00022a70: 2020 2020 756e 6c6f 636b 6564 5f61 6363      unlocked_acc
-00022a80: 6f75 6e74 3a20 4368 6563 6b73 756d 4164  ount: ChecksumAd
-00022a90: 6472 6573 732c 0a20 2020 2029 202d 3e20  dress,.    ) -> 
-00022aa0: 4e6f 6e65 3a0a 2020 2020 2020 2020 6461  None:.        da
-00022ab0: 7461 203d 2072 6576 6572 745f 636f 6e74  ta = revert_cont
-00022ac0: 7261 6374 2e65 6e63 6f64 6541 4249 2866  ract.encodeABI(f
-00022ad0: 6e5f 6e61 6d65 3d22 556e 6175 7468 6f72  n_name="Unauthor
-00022ae0: 697a 6564 2229 0a20 2020 2020 2020 2074  ized").        t
-00022af0: 786e 5f70 6172 616d 7320 3d20 7265 7665  xn_params = reve
-00022b00: 7274 5f63 6f6e 7472 6163 742e 5f70 7265  rt_contract._pre
-00022b10: 7061 7265 5f74 7261 6e73 6163 7469 6f6e  pare_transaction
-00022b20: 280a 2020 2020 2020 2020 2020 2020 666e  (.            fn
-00022b30: 5f6e 616d 653d 2263 7573 746f 6d45 7272  _name="customErr
-00022b40: 6f72 5769 7468 6f75 744d 6573 7361 6765  orWithoutMessage
-00022b50: 222c 0a20 2020 2020 2020 2020 2020 2074  ",.            t
-00022b60: 7261 6e73 6163 7469 6f6e 3d7b 0a20 2020  ransaction={.   
-00022b70: 2020 2020 2020 2020 2020 2020 2022 6672               "fr
-00022b80: 6f6d 223a 2075 6e6c 6f63 6b65 645f 6163  om": unlocked_ac
-00022b90: 636f 756e 742c 0a20 2020 2020 2020 2020  count,.         
-00022ba0: 2020 2020 2020 2022 746f 223a 2072 6576         "to": rev
-00022bb0: 6572 745f 636f 6e74 7261 6374 2e61 6464  ert_contract.add
-00022bc0: 7265 7373 2c0a 2020 2020 2020 2020 2020  ress,.          
-00022bd0: 2020 7d2c 0a20 2020 2020 2020 2029 0a20    },.        ). 
-00022be0: 2020 2020 2020 2077 6974 6820 7079 7465         with pyte
-00022bf0: 7374 2e72 6169 7365 7328 436f 6e74 7261  st.raises(Contra
-00022c00: 6374 4375 7374 6f6d 4572 726f 722c 206d  ctCustomError, m
-00022c10: 6174 6368 3d64 6174 6129 2061 7320 6578  atch=data) as ex
-00022c20: 6369 6e66 6f3a 0a20 2020 2020 2020 2020  cinfo:.         
-00022c30: 2020 2077 332e 6574 682e 6361 6c6c 2874     w3.eth.call(t
-00022c40: 786e 5f70 6172 616d 7329 0a20 2020 2020  xn_params).     
-00022c50: 2020 2061 7373 6572 7420 6578 6369 6e66     assert excinf
-00022c60: 6f2e 7661 6c75 652e 6461 7461 203d 3d20  o.value.data == 
-00022c70: 6461 7461 0a0a 2020 2020 4070 7974 6573  data..    @pytes
-00022c80: 742e 6d61 726b 2e70 6172 616d 6574 7269  t.mark.parametri
-00022c90: 7a65 280a 2020 2020 2020 2020 2270 616e  ze(.        "pan
-00022ca0: 6963 5f65 7272 6f72 2c70 6172 616d 7322  ic_error,params"
-00022cb0: 2c0a 2020 2020 2020 2020 280a 2020 2020  ,.        (.    
-00022cc0: 2020 2020 2020 2020 2822 3031 222c 205b          ("01", [
-00022cd0: 5d29 2c0a 2020 2020 2020 2020 2020 2020  ]),.            
-00022ce0: 2822 3131 222c 205b 5d29 2c0a 2020 2020  ("11", []),.    
-00022cf0: 2020 2020 2020 2020 2822 3132 222c 205b          ("12", [
-00022d00: 305d 292c 0a20 2020 2020 2020 2020 2020  0]),.           
-00022d10: 2028 2232 3122 2c20 5b2d 315d 292c 0a20   ("21", [-1]),. 
-00022d20: 2020 2020 2020 2020 2020 2028 2232 3222             ("22"
-00022d30: 2c20 5b5d 292c 0a20 2020 2020 2020 2020  , []),.         
-00022d40: 2020 2028 2233 3122 2c20 5b5d 292c 0a20     ("31", []),. 
-00022d50: 2020 2020 2020 2020 2020 2028 2233 3222             ("32"
-00022d60: 2c20 5b5d 292c 0a20 2020 2020 2020 2020  , []),.         
-00022d70: 2020 2028 2234 3122 2c20 5b5d 292c 0a20     ("41", []),. 
-00022d80: 2020 2020 2020 2020 2020 2028 2235 3122             ("51"
-00022d90: 2c20 5b5d 292c 0a20 2020 2020 2020 2029  , []),.        )
-00022da0: 2c0a 2020 2020 290a 2020 2020 6465 6620  ,.    ).    def 
-00022db0: 7465 7374 5f63 6f6e 7472 6163 745f 7061  test_contract_pa
-00022dc0: 6e69 635f 6572 726f 7273 280a 2020 2020  nic_errors(.    
-00022dd0: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-00022de0: 2020 7733 3a20 2257 6562 3322 2c0a 2020    w3: "Web3",.  
-00022df0: 2020 2020 2020 7061 6e69 635f 6572 726f        panic_erro
-00022e00: 7273 5f63 6f6e 7472 6163 743a 2022 436f  rs_contract: "Co
-00022e10: 6e74 7261 6374 222c 0a20 2020 2020 2020  ntract",.       
-00022e20: 2070 616e 6963 5f65 7272 6f72 3a20 7374   panic_error: st
-00022e30: 722c 0a20 2020 2020 2020 2070 6172 616d  r,.        param
-00022e40: 733a 204c 6973 745b 416e 795d 2c0a 2020  s: List[Any],.  
-00022e50: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-00022e60: 2020 2020 206d 6574 686f 6420 3d20 6765       method = ge
-00022e70: 7461 7474 7228 0a20 2020 2020 2020 2020  tattr(.         
-00022e80: 2020 2070 616e 6963 5f65 7272 6f72 735f     panic_errors_
-00022e90: 636f 6e74 7261 6374 2e66 756e 6374 696f  contract.functio
-00022ea0: 6e73 2c0a 2020 2020 2020 2020 2020 2020  ns,.            
-00022eb0: 6622 6572 726f 7243 6f64 657b 7061 6e69  f"errorCode{pani
-00022ec0: 635f 6572 726f 727d 222c 0a20 2020 2020  c_error}",.     
-00022ed0: 2020 2029 0a20 2020 2020 2020 2065 7272     ).        err
-00022ee0: 6f72 5f6d 7367 203d 2050 414e 4943 5f45  or_msg = PANIC_E
-00022ef0: 5252 4f52 5f43 4f44 4553 5b70 616e 6963  RROR_CODES[panic
-00022f00: 5f65 7272 6f72 5d0a 0a20 2020 2020 2020  _error]..       
-00022f10: 2077 6974 6820 7079 7465 7374 2e72 6169   with pytest.rai
-00022f20: 7365 7328 436f 6e74 7261 6374 5061 6e69  ses(ContractPani
-00022f30: 6345 7272 6f72 2c20 6d61 7463 683d 7265  cError, match=re
-00022f40: 2e65 7363 6170 6528 6572 726f 725f 6d73  .escape(error_ms
-00022f50: 6729 293a 0a20 2020 2020 2020 2020 2020  g)):.           
-00022f60: 206d 6574 686f 6428 2a70 6172 616d 7329   method(*params)
-00022f70: 2e63 616c 6c28 290a 0a20 2020 2064 6566  .call()..    def
-00022f80: 2074 6573 745f 6574 685f 6361 6c6c 5f6f   test_eth_call_o
-00022f90: 6666 6368 6169 6e5f 6c6f 6f6b 7570 280a  ffchain_lookup(.
-00022fa0: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-00022fb0: 2020 2020 2020 7733 3a20 2257 6562 3322        w3: "Web3"
-00022fc0: 2c0a 2020 2020 2020 2020 6f66 6663 6861  ,.        offcha
-00022fd0: 696e 5f6c 6f6f 6b75 705f 636f 6e74 7261  in_lookup_contra
-00022fe0: 6374 3a20 2243 6f6e 7472 6163 7422 2c0a  ct: "Contract",.
-00022ff0: 2020 2020 2020 2020 756e 6c6f 636b 6564          unlocked
-00023000: 5f61 6363 6f75 6e74 3a20 4368 6563 6b73  _account: Checks
-00023010: 756d 4164 6472 6573 732c 0a20 2020 2020  umAddress,.     
-00023020: 2020 206d 6f6e 6b65 7970 6174 6368 3a20     monkeypatch: 
-00023030: 224d 6f6e 6b65 7950 6174 6368 222c 0a20  "MonkeyPatch",. 
-00023040: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-00023050: 2020 2020 2020 6e6f 726d 616c 697a 6564        normalized
-00023060: 5f63 6f6e 7472 6163 745f 6164 6472 6573  _contract_addres
-00023070: 7320 3d20 746f 5f68 6578 5f69 665f 6279  s = to_hex_if_by
-00023080: 7465 7328 0a20 2020 2020 2020 2020 2020  tes(.           
-00023090: 206f 6666 6368 6169 6e5f 6c6f 6f6b 7570   offchain_lookup
-000230a0: 5f63 6f6e 7472 6163 742e 6164 6472 6573  _contract.addres
-000230b0: 730a 2020 2020 2020 2020 292e 6c6f 7765  s.        ).lowe
-000230c0: 7228 290a 2020 2020 2020 2020 6d6f 636b  r().        mock
-000230d0: 5f6f 6666 6368 6169 6e5f 6c6f 6f6b 7570  _offchain_lookup
-000230e0: 5f72 6571 7565 7374 5f72 6573 706f 6e73  _request_respons
-000230f0: 6528 0a20 2020 2020 2020 2020 2020 206d  e(.            m
-00023100: 6f6e 6b65 7970 6174 6368 2c0a 2020 2020  onkeypatch,.    
-00023110: 2020 2020 2020 2020 6d6f 636b 6564 5f72          mocked_r
-00023120: 6571 7565 7374 5f75 726c 3d66 2268 7474  equest_url=f"htt
-00023130: 7073 3a2f 2f77 6562 332e 7079 2f67 6174  ps://web3.py/gat
-00023140: 6577 6179 2f7b 6e6f 726d 616c 697a 6564  eway/{normalized
-00023150: 5f63 6f6e 7472 6163 745f 6164 6472 6573  _contract_addres
-00023160: 737d 2f7b 4f46 4643 4841 494e 5f4c 4f4f  s}/{OFFCHAIN_LOO
-00023170: 4b55 505f 5445 5354 5f44 4154 417d 2e6a  KUP_TEST_DATA}.j
-00023180: 736f 6e22 2c20 2023 206e 6f71 613a 2045  son",  # noqa: E
-00023190: 3530 310a 2020 2020 2020 2020 2020 2020  501.            
-000231a0: 6d6f 636b 6564 5f6a 736f 6e5f 6461 7461  mocked_json_data
-000231b0: 3d57 4542 3350 595f 4153 5f48 4558 4259  =WEB3PY_AS_HEXBY
-000231c0: 5445 532c 0a20 2020 2020 2020 2029 0a20  TES,.        ). 
-000231d0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-000231e0: 3d20 6f66 6663 6861 696e 5f6c 6f6f 6b75  = offchain_looku
-000231f0: 705f 636f 6e74 7261 6374 2e66 756e 6374  p_contract.funct
-00023200: 696f 6e73 2e74 6573 744f 6666 6368 6169  ions.testOffchai
-00023210: 6e4c 6f6f 6b75 7028 0a20 2020 2020 2020  nLookup(.       
-00023220: 2020 2020 204f 4646 4348 4149 4e5f 4c4f       OFFCHAIN_LO
-00023230: 4f4b 5550 5f54 4553 545f 4441 5441 0a20  OKUP_TEST_DATA. 
-00023240: 2020 2020 2020 2029 2e63 616c 6c28 290a         ).call().
-00023250: 2020 2020 2020 2020 6173 7365 7274 2077          assert w
-00023260: 332e 636f 6465 632e 6465 636f 6465 285b  3.codec.decode([
-00023270: 2273 7472 696e 6722 5d2c 2072 6573 706f  "string"], respo
-00023280: 6e73 6529 5b30 5d20 3d3d 2022 7765 6233  nse)[0] == "web3
-00023290: 7079 220a 0a20 2020 2064 6566 2074 6573  py"..    def tes
-000232a0: 745f 6574 685f 6361 6c6c 5f6f 6666 6368  t_eth_call_offch
-000232b0: 6169 6e5f 6c6f 6f6b 7570 5f72 6169 7365  ain_lookup_raise
-000232c0: 735f 7768 656e 5f63 6369 705f 7265 6164  s_when_ccip_read
-000232d0: 5f69 735f 6469 7361 626c 6564 280a 2020  _is_disabled(.  
-000232e0: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
-000232f0: 2020 2020 7733 3a20 2257 6562 3322 2c0a      w3: "Web3",.
-00023300: 2020 2020 2020 2020 6f66 6663 6861 696e          offchain
-00023310: 5f6c 6f6f 6b75 705f 636f 6e74 7261 6374  _lookup_contract
-00023320: 3a20 2243 6f6e 7472 6163 7422 2c0a 2020  : "Contract",.  
-00023330: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-00023340: 2020 2020 2072 6574 7572 6e5f 6461 7461       return_data
-00023350: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
-00023360: 204f 4646 4348 4149 4e5f 4c4f 4f4b 5550   OFFCHAIN_LOOKUP
-00023370: 5f34 4259 5445 5f44 4154 410a 2020 2020  _4BYTE_DATA.    
-00023380: 2020 2020 2020 2020 2b20 6162 695f 656e          + abi_en
-00023390: 636f 6465 645f 6f66 6663 6861 696e 5f6c  coded_offchain_l
-000233a0: 6f6f 6b75 705f 636f 6e74 7261 6374 5f61  ookup_contract_a
-000233b0: 6464 7265 7373 2877 332c 206f 6666 6368  ddress(w3, offch
-000233c0: 6169 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472  ain_lookup_contr
-000233d0: 6163 7429 0a20 2020 2020 2020 2020 2020  act).           
-000233e0: 202b 204f 4646 4348 4149 4e5f 4c4f 4f4b   + OFFCHAIN_LOOK
-000233f0: 5550 5f52 4554 5552 4e5f 4441 5441 0a20  UP_RETURN_DATA. 
-00023400: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00023410: 2023 2074 6573 7420 436f 6e74 7261 6374   # test Contract
-00023420: 4675 6e63 7469 6f6e 2063 616c 6c0a 2020  Function call.  
-00023430: 2020 2020 2020 7769 7468 2070 7974 6573        with pytes
-00023440: 742e 7261 6973 6573 284f 6666 6368 6169  t.raises(Offchai
-00023450: 6e4c 6f6f 6b75 7029 2061 7320 653a 0a20  nLookup) as e:. 
-00023460: 2020 2020 2020 2020 2020 206f 6666 6368             offch
-00023470: 6169 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472  ain_lookup_contr
-00023480: 6163 742e 6675 6e63 7469 6f6e 732e 7465  act.functions.te
-00023490: 7374 4f66 6663 6861 696e 4c6f 6f6b 7570  stOffchainLookup
-000234a0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-000234b0: 2020 4f46 4643 4841 494e 5f4c 4f4f 4b55    OFFCHAIN_LOOKU
-000234c0: 505f 5445 5354 5f44 4154 410a 2020 2020  P_TEST_DATA.    
-000234d0: 2020 2020 2020 2020 292e 6361 6c6c 2863          ).call(c
-000234e0: 6369 705f 7265 6164 5f65 6e61 626c 6564  cip_read_enabled
-000234f0: 3d46 616c 7365 290a 2020 2020 2020 2020  =False).        
-00023500: 6173 7365 7274 2065 2e76 616c 7565 2e64  assert e.value.d
-00023510: 6174 6120 3d3d 2072 6574 7572 6e5f 6461  ata == return_da
-00023520: 7461 0a0a 2020 2020 2020 2020 2320 7465  ta..        # te
-00023530: 7374 2043 6f6e 7472 6163 7443 616c 6c65  st ContractCalle
-00023540: 7220 6361 6c6c 0a20 2020 2020 2020 2077  r call.        w
-00023550: 6974 6820 7079 7465 7374 2e72 6169 7365  ith pytest.raise
-00023560: 7328 4f66 6663 6861 696e 4c6f 6f6b 7570  s(OffchainLookup
-00023570: 2920 6173 2065 7863 696e 666f 3a0a 2020  ) as excinfo:.  
-00023580: 2020 2020 2020 2020 2020 6f66 6663 6861            offcha
-00023590: 696e 5f6c 6f6f 6b75 705f 636f 6e74 7261  in_lookup_contra
-000235a0: 6374 2e63 616c 6c65 7228 6363 6970 5f72  ct.caller(ccip_r
-000235b0: 6561 645f 656e 6162 6c65 643d 4661 6c73  ead_enabled=Fals
-000235c0: 6529 2e74 6573 744f 6666 6368 6169 6e4c  e).testOffchainL
-000235d0: 6f6f 6b75 7028 0a20 2020 2020 2020 2020  ookup(.         
-000235e0: 2020 2020 2020 204f 4646 4348 4149 4e5f         OFFCHAIN_
-000235f0: 4c4f 4f4b 5550 5f54 4553 545f 4441 5441  LOOKUP_TEST_DATA
-00023600: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-00023610: 2020 2020 2020 2061 7373 6572 7420 6578         assert ex
-00023620: 6369 6e66 6f2e 7661 6c75 652e 6461 7461  cinfo.value.data
-00023630: 203d 3d20 7265 7475 726e 5f64 6174 610a   == return_data.
-00023640: 0a20 2020 2020 2020 2023 2074 6573 7420  .        # test 
-00023650: 676c 6f62 616c 2066 6c61 6720 6f6e 2074  global flag on t
-00023660: 6865 2070 726f 7669 6465 720a 2020 2020  he provider.    
-00023670: 2020 2020 7733 2e70 726f 7669 6465 722e      w3.provider.
-00023680: 676c 6f62 616c 5f63 6369 705f 7265 6164  global_ccip_read
-00023690: 5f65 6e61 626c 6564 203d 2046 616c 7365  _enabled = False
-000236a0: 0a0a 2020 2020 2020 2020 7769 7468 2070  ..        with p
-000236b0: 7974 6573 742e 7261 6973 6573 284f 6666  ytest.raises(Off
-000236c0: 6368 6169 6e4c 6f6f 6b75 7029 2061 7320  chainLookup) as 
-000236d0: 6578 635f 696e 666f 3a0a 2020 2020 2020  exc_info:.      
-000236e0: 2020 2020 2020 6f66 6663 6861 696e 5f6c        offchain_l
-000236f0: 6f6f 6b75 705f 636f 6e74 7261 6374 2e66  ookup_contract.f
-00023700: 756e 6374 696f 6e73 2e74 6573 744f 6666  unctions.testOff
-00023710: 6368 6169 6e4c 6f6f 6b75 7028 0a20 2020  chainLookup(.   
-00023720: 2020 2020 2020 2020 2020 2020 204f 4646               OFF
-00023730: 4348 4149 4e5f 4c4f 4f4b 5550 5f54 4553  CHAIN_LOOKUP_TES
-00023740: 545f 4441 5441 0a20 2020 2020 2020 2020  T_DATA.         
-00023750: 2020 2029 2e63 616c 6c28 290a 2020 2020     ).call().    
-00023760: 2020 2020 6173 7365 7274 2065 7863 5f69      assert exc_i
-00023770: 6e66 6f2e 7661 6c75 652e 6461 7461 203d  nfo.value.data =
-00023780: 3d20 7265 7475 726e 5f64 6174 610a 0a20  = return_data.. 
-00023790: 2020 2020 2020 2077 332e 7072 6f76 6964         w3.provid
-000237a0: 6572 2e67 6c6f 6261 6c5f 6363 6970 5f72  er.global_ccip_r
-000237b0: 6561 645f 656e 6162 6c65 6420 3d20 5472  ead_enabled = Tr
-000237c0: 7565 2020 2320 636c 6561 6e75 700a 0a20  ue  # cleanup.. 
-000237d0: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
-000237e0: 6361 6c6c 5f6f 6666 6368 6169 6e5f 6c6f  call_offchain_lo
-000237f0: 6f6b 7570 5f63 616c 6c5f 666c 6167 5f6f  okup_call_flag_o
-00023800: 7665 7272 6964 6573 5f70 726f 7669 6465  verrides_provide
-00023810: 725f 666c 6167 280a 2020 2020 2020 2020  r_flag(.        
-00023820: 7365 6c66 2c0a 2020 2020 2020 2020 7733  self,.        w3
-00023830: 3a20 2257 6562 3322 2c0a 2020 2020 2020  : "Web3",.      
-00023840: 2020 6f66 6663 6861 696e 5f6c 6f6f 6b75    offchain_looku
-00023850: 705f 636f 6e74 7261 6374 3a20 2243 6f6e  p_contract: "Con
-00023860: 7472 6163 7422 2c0a 2020 2020 2020 2020  tract",.        
-00023870: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-00023880: 3a20 4368 6563 6b73 756d 4164 6472 6573  : ChecksumAddres
-00023890: 732c 0a20 2020 2020 2020 206d 6f6e 6b65  s,.        monke
-000238a0: 7970 6174 6368 3a20 224d 6f6e 6b65 7950  ypatch: "MonkeyP
-000238b0: 6174 6368 222c 0a20 2020 2029 202d 3e20  atch",.    ) -> 
-000238c0: 4e6f 6e65 3a0a 2020 2020 2020 2020 6e6f  None:.        no
-000238d0: 726d 616c 697a 6564 5f63 6f6e 7472 6163  rmalized_contrac
-000238e0: 745f 6164 6472 6573 7320 3d20 746f 5f68  t_address = to_h
-000238f0: 6578 5f69 665f 6279 7465 7328 0a20 2020  ex_if_bytes(.   
-00023900: 2020 2020 2020 2020 206f 6666 6368 6169           offchai
-00023910: 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472 6163  n_lookup_contrac
-00023920: 742e 6164 6472 6573 730a 2020 2020 2020  t.address.      
-00023930: 2020 292e 6c6f 7765 7228 290a 2020 2020    ).lower().    
-00023940: 2020 2020 6d6f 636b 5f6f 6666 6368 6169      mock_offchai
-00023950: 6e5f 6c6f 6f6b 7570 5f72 6571 7565 7374  n_lookup_request
-00023960: 5f72 6573 706f 6e73 6528 0a20 2020 2020  _response(.     
-00023970: 2020 2020 2020 206d 6f6e 6b65 7970 6174         monkeypat
-00023980: 6368 2c0a 2020 2020 2020 2020 2020 2020  ch,.            
-00023990: 6d6f 636b 6564 5f72 6571 7565 7374 5f75  mocked_request_u
-000239a0: 726c 3d66 2268 7474 7073 3a2f 2f77 6562  rl=f"https://web
-000239b0: 332e 7079 2f67 6174 6577 6179 2f7b 6e6f  3.py/gateway/{no
-000239c0: 726d 616c 697a 6564 5f63 6f6e 7472 6163  rmalized_contrac
-000239d0: 745f 6164 6472 6573 737d 2f7b 4f46 4643  t_address}/{OFFC
-000239e0: 4841 494e 5f4c 4f4f 4b55 505f 5445 5354  HAIN_LOOKUP_TEST
-000239f0: 5f44 4154 417d 2e6a 736f 6e22 2c20 2023  _DATA}.json",  #
-00023a00: 206e 6f71 613a 2045 3530 310a 2020 2020   noqa: E501.    
-00023a10: 2020 2020 2020 2020 6d6f 636b 6564 5f6a          mocked_j
-00023a20: 736f 6e5f 6461 7461 3d57 4542 3350 595f  son_data=WEB3PY_
-00023a30: 4153 5f48 4558 4259 5445 532c 0a20 2020  AS_HEXBYTES,.   
-00023a40: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-00023a50: 7733 2e70 726f 7669 6465 722e 676c 6f62  w3.provider.glob
-00023a60: 616c 5f63 6369 705f 7265 6164 5f65 6e61  al_ccip_read_ena
-00023a70: 626c 6564 203d 2046 616c 7365 0a0a 2020  bled = False..  
-00023a80: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00023a90: 206f 6666 6368 6169 6e5f 6c6f 6f6b 7570   offchain_lookup
-00023aa0: 5f63 6f6e 7472 6163 742e 6675 6e63 7469  _contract.functi
-00023ab0: 6f6e 732e 7465 7374 4f66 6663 6861 696e  ons.testOffchain
-00023ac0: 4c6f 6f6b 7570 280a 2020 2020 2020 2020  Lookup(.        
-00023ad0: 2020 2020 4f46 4643 4841 494e 5f4c 4f4f      OFFCHAIN_LOO
-00023ae0: 4b55 505f 5445 5354 5f44 4154 410a 2020  KUP_TEST_DATA.  
-00023af0: 2020 2020 2020 292e 6361 6c6c 2863 6369        ).call(cci
-00023b00: 705f 7265 6164 5f65 6e61 626c 6564 3d54  p_read_enabled=T
-00023b10: 7275 6529 0a20 2020 2020 2020 2061 7373  rue).        ass
-00023b20: 6572 7420 7733 2e63 6f64 6563 2e64 6563  ert w3.codec.dec
-00023b30: 6f64 6528 5b22 7374 7269 6e67 225d 2c20  ode(["string"], 
-00023b40: 7265 7370 6f6e 7365 295b 305d 203d 3d20  response)[0] == 
-00023b50: 2277 6562 3370 7922 0a0a 2020 2020 2020  "web3py"..      
-00023b60: 2020 7733 2e70 726f 7669 6465 722e 676c    w3.provider.gl
-00023b70: 6f62 616c 5f63 6369 705f 7265 6164 5f65  obal_ccip_read_e
-00023b80: 6e61 626c 6564 203d 2054 7275 6520 2023  nabled = True  #
-00023b90: 2063 6c65 616e 7570 0a0a 2020 2020 4070   cleanup..    @p
-00023ba0: 7974 6573 742e 6d61 726b 2e70 6172 616d  ytest.mark.param
-00023bb0: 6574 7269 7a65 2822 6d61 785f 7265 6469  etrize("max_redi
-00023bc0: 7265 6374 7322 2c20 7261 6e67 6528 2d31  rects", range(-1
-00023bd0: 2c20 3429 290a 2020 2020 6465 6620 7465  , 4)).    def te
-00023be0: 7374 5f65 7468 5f63 616c 6c5f 6f66 6663  st_eth_call_offc
-00023bf0: 6861 696e 5f6c 6f6f 6b75 705f 7261 6973  hain_lookup_rais
-00023c00: 6573 5f69 665f 6d61 785f 7265 6469 7265  es_if_max_redire
-00023c10: 6374 735f 6973 5f6c 6573 735f 7468 616e  cts_is_less_than
-00023c20: 5f34 280a 2020 2020 2020 2020 7365 6c66  _4(.        self
-00023c30: 2c0a 2020 2020 2020 2020 7733 3a20 2257  ,.        w3: "W
-00023c40: 6562 3322 2c0a 2020 2020 2020 2020 6f66  eb3",.        of
-00023c50: 6663 6861 696e 5f6c 6f6f 6b75 705f 636f  fchain_lookup_co
-00023c60: 6e74 7261 6374 3a20 2243 6f6e 7472 6163  ntract: "Contrac
-00023c70: 7422 2c0a 2020 2020 2020 2020 6d61 785f  t",.        max_
-00023c80: 7265 6469 7265 6374 733a 2069 6e74 2c0a  redirects: int,.
-00023c90: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
-00023ca0: 2020 2020 2020 2064 6566 6175 6c74 5f6d         default_m
-00023cb0: 6178 5f72 6564 6972 6563 7473 203d 2077  ax_redirects = w
-00023cc0: 332e 7072 6f76 6964 6572 2e63 6369 705f  3.provider.ccip_
-00023cd0: 7265 6164 5f6d 6178 5f72 6564 6972 6563  read_max_redirec
-00023ce0: 7473 0a0a 2020 2020 2020 2020 7733 2e70  ts..        w3.p
-00023cf0: 726f 7669 6465 722e 6363 6970 5f72 6561  rovider.ccip_rea
-00023d00: 645f 6d61 785f 7265 6469 7265 6374 7320  d_max_redirects 
-00023d10: 3d20 6d61 785f 7265 6469 7265 6374 730a  = max_redirects.
-00023d20: 2020 2020 2020 2020 7769 7468 2070 7974          with pyt
-00023d30: 6573 742e 7261 6973 6573 2856 616c 7565  est.raises(Value
-00023d40: 4572 726f 722c 206d 6174 6368 3d22 6174  Error, match="at
-00023d50: 206c 6561 7374 2034 2229 3a0a 2020 2020   least 4"):.    
-00023d60: 2020 2020 2020 2020 6f66 6663 6861 696e          offchain
-00023d70: 5f6c 6f6f 6b75 705f 636f 6e74 7261 6374  _lookup_contract
-00023d80: 2e66 756e 6374 696f 6e73 2e74 6573 744f  .functions.testO
-00023d90: 6666 6368 6169 6e4c 6f6f 6b75 7028 0a20  ffchainLookup(. 
-00023da0: 2020 2020 2020 2020 2020 2020 2020 204f                 O
-00023db0: 4646 4348 4149 4e5f 4c4f 4f4b 5550 5f54  FFCHAIN_LOOKUP_T
-00023dc0: 4553 545f 4441 5441 0a20 2020 2020 2020  EST_DATA.       
-00023dd0: 2020 2020 2029 2e63 616c 6c28 290a 0a20       ).call().. 
-00023de0: 2020 2020 2020 2077 332e 7072 6f76 6964         w3.provid
-00023df0: 6572 2e63 6369 705f 7265 6164 5f6d 6178  er.ccip_read_max
-00023e00: 5f72 6564 6972 6563 7473 203d 2064 6566  _redirects = def
-00023e10: 6175 6c74 5f6d 6178 5f72 6564 6972 6563  ault_max_redirec
-00023e20: 7473 2020 2320 636c 6561 6e75 700a 0a20  ts  # cleanup.. 
-00023e30: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
-00023e40: 6361 6c6c 5f6f 6666 6368 6169 6e5f 6c6f  call_offchain_lo
-00023e50: 6f6b 7570 5f72 6169 7365 735f 666f 725f  okup_raises_for_
-00023e60: 696d 7072 6f70 6572 6c79 5f66 6f72 6d61  improperly_forma
-00023e70: 7474 6564 5f72 6573 745f 7265 7175 6573  tted_rest_reques
-00023e80: 745f 7265 7370 6f6e 7365 2820 2023 206e  t_response(  # n
-00023e90: 6f71 613a 2045 3530 310a 2020 2020 2020  oqa: E501.      
-00023ea0: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-00023eb0: 7733 3a20 2257 6562 3322 2c0a 2020 2020  w3: "Web3",.    
-00023ec0: 2020 2020 6f66 6663 6861 696e 5f6c 6f6f      offchain_loo
-00023ed0: 6b75 705f 636f 6e74 7261 6374 3a20 2243  kup_contract: "C
-00023ee0: 6f6e 7472 6163 7422 2c0a 2020 2020 2020  ontract",.      
-00023ef0: 2020 756e 6c6f 636b 6564 5f61 6363 6f75    unlocked_accou
-00023f00: 6e74 3a20 4368 6563 6b73 756d 4164 6472  nt: ChecksumAddr
-00023f10: 6573 732c 0a20 2020 2020 2020 206d 6f6e  ess,.        mon
-00023f20: 6b65 7970 6174 6368 3a20 224d 6f6e 6b65  keypatch: "Monke
-00023f30: 7950 6174 6368 222c 0a20 2020 2029 202d  yPatch",.    ) -
-00023f40: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-00023f50: 6e6f 726d 616c 697a 6564 5f63 6f6e 7472  normalized_contr
-00023f60: 6163 745f 6164 6472 6573 7320 3d20 746f  act_address = to
-00023f70: 5f68 6578 5f69 665f 6279 7465 7328 0a20  _hex_if_bytes(. 
-00023f80: 2020 2020 2020 2020 2020 206f 6666 6368             offch
-00023f90: 6169 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472  ain_lookup_contr
-00023fa0: 6163 742e 6164 6472 6573 730a 2020 2020  act.address.    
-00023fb0: 2020 2020 292e 6c6f 7765 7228 290a 2020      ).lower().  
-00023fc0: 2020 2020 2020 6d6f 636b 5f6f 6666 6368        mock_offch
-00023fd0: 6169 6e5f 6c6f 6f6b 7570 5f72 6571 7565  ain_lookup_reque
-00023fe0: 7374 5f72 6573 706f 6e73 6528 0a20 2020  st_response(.   
-00023ff0: 2020 2020 2020 2020 206d 6f6e 6b65 7970           monkeyp
-00024000: 6174 6368 2c0a 2020 2020 2020 2020 2020  atch,.          
-00024010: 2020 6d6f 636b 6564 5f72 6571 7565 7374    mocked_request
-00024020: 5f75 726c 3d66 2268 7474 7073 3a2f 2f77  _url=f"https://w
-00024030: 6562 332e 7079 2f67 6174 6577 6179 2f7b  eb3.py/gateway/{
-00024040: 6e6f 726d 616c 697a 6564 5f63 6f6e 7472  normalized_contr
-00024050: 6163 745f 6164 6472 6573 737d 2f7b 4f46  act_address}/{OF
-00024060: 4643 4841 494e 5f4c 4f4f 4b55 505f 5445  FCHAIN_LOOKUP_TE
-00024070: 5354 5f44 4154 417d 2e6a 736f 6e22 2c20  ST_DATA}.json", 
-00024080: 2023 206e 6f71 613a 2045 3530 310a 2020   # noqa: E501.  
-00024090: 2020 2020 2020 2020 2020 6d6f 636b 6564            mocked
-000240a0: 5f6a 736f 6e5f 6461 7461 3d57 4542 3350  _json_data=WEB3P
-000240b0: 595f 4153 5f48 4558 4259 5445 532c 0a20  Y_AS_HEXBYTES,. 
-000240c0: 2020 2020 2020 2020 2020 206a 736f 6e5f             json_
-000240d0: 6461 7461 5f66 6965 6c64 3d22 6e6f 745f  data_field="not_
-000240e0: 6461 7461 222c 0a20 2020 2020 2020 2029  data",.        )
-000240f0: 0a20 2020 2020 2020 2077 6974 6820 7079  .        with py
-00024100: 7465 7374 2e72 6169 7365 7328 5765 6233  test.raises(Web3
-00024110: 5661 6c69 6461 7469 6f6e 4572 726f 722c  ValidationError,
-00024120: 206d 6174 6368 3d22 6d69 7373 696e 6720   match="missing 
-00024130: 2764 6174 6127 2066 6965 6c64 2229 3a0a  'data' field"):.
-00024140: 2020 2020 2020 2020 2020 2020 6f66 6663              offc
-00024150: 6861 696e 5f6c 6f6f 6b75 705f 636f 6e74  hain_lookup_cont
-00024160: 7261 6374 2e66 756e 6374 696f 6e73 2e74  ract.functions.t
-00024170: 6573 744f 6666 6368 6169 6e4c 6f6f 6b75  estOffchainLooku
-00024180: 7028 0a20 2020 2020 2020 2020 2020 2020  p(.             
-00024190: 2020 204f 4646 4348 4149 4e5f 4c4f 4f4b     OFFCHAIN_LOOK
-000241a0: 5550 5f54 4553 545f 4441 5441 0a20 2020  UP_TEST_DATA.   
-000241b0: 2020 2020 2020 2020 2029 2e63 616c 6c28           ).call(
-000241c0: 290a 0a20 2020 2040 7079 7465 7374 2e6d  )..    @pytest.m
-000241d0: 6172 6b2e 7061 7261 6d65 7472 697a 6528  ark.parametrize(
-000241e0: 2273 7461 7475 735f 636f 6465 5f6e 6f6e  "status_code_non
-000241f0: 5f34 7878 5f65 7272 6f72 222c 205b 3130  _4xx_error", [10
-00024200: 302c 2033 3030 2c20 3530 302c 2036 3030  0, 300, 500, 600
-00024210: 5d29 0a20 2020 2064 6566 2074 6573 745f  ]).    def test_
-00024220: 6574 685f 6361 6c6c 5f6f 6666 6368 6169  eth_call_offchai
-00024230: 6e5f 6c6f 6f6b 7570 5f74 7269 6573 5f6e  n_lookup_tries_n
-00024240: 6578 745f 7572 6c5f 666f 725f 6e6f 6e5f  ext_url_for_non_
-00024250: 3478 785f 6572 726f 725f 7374 6174 7573  4xx_error_status
-00024260: 5f61 6e64 5f74 6573 7473 5f50 4f53 5428  _and_tests_POST(
-00024270: 2020 2320 6e6f 7161 3a20 4535 3031 0a20    # noqa: E501. 
-00024280: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
-00024290: 2020 2020 2077 333a 2022 5765 6233 222c       w3: "Web3",
-000242a0: 0a20 2020 2020 2020 206f 6666 6368 6169  .        offchai
-000242b0: 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472 6163  n_lookup_contrac
-000242c0: 743a 2022 436f 6e74 7261 6374 222c 0a20  t: "Contract",. 
-000242d0: 2020 2020 2020 2075 6e6c 6f63 6b65 645f         unlocked_
-000242e0: 6163 636f 756e 743a 2043 6865 636b 7375  account: Checksu
-000242f0: 6d41 6464 7265 7373 2c0a 2020 2020 2020  mAddress,.      
-00024300: 2020 6d6f 6e6b 6579 7061 7463 683a 2022    monkeypatch: "
-00024310: 4d6f 6e6b 6579 5061 7463 6822 2c0a 2020  MonkeyPatch",.  
-00024320: 2020 2020 2020 7374 6174 7573 5f63 6f64        status_cod
-00024330: 655f 6e6f 6e5f 3478 785f 6572 726f 723a  e_non_4xx_error:
-00024340: 2069 6e74 2c0a 2020 2020 2920 2d3e 204e   int,.    ) -> N
-00024350: 6f6e 653a 0a20 2020 2020 2020 206e 6f72  one:.        nor
-00024360: 6d61 6c69 7a65 645f 636f 6e74 7261 6374  malized_contract
-00024370: 5f61 6464 7265 7373 203d 2074 6f5f 6865  _address = to_he
-00024380: 785f 6966 5f62 7974 6573 280a 2020 2020  x_if_bytes(.    
-00024390: 2020 2020 2020 2020 6f66 6663 6861 696e          offchain
-000243a0: 5f6c 6f6f 6b75 705f 636f 6e74 7261 6374  _lookup_contract
-000243b0: 2e61 6464 7265 7373 0a20 2020 2020 2020  .address.       
-000243c0: 2029 2e6c 6f77 6572 2829 0a0a 2020 2020   ).lower()..    
-000243d0: 2020 2020 2320 5468 6520 6e65 7874 2075      # The next u
-000243e0: 726c 2069 6e20 6f75 7220 7465 7374 2063  rl in our test c
-000243f0: 6f6e 7472 6163 7420 646f 6573 6e27 7420  ontract doesn't 
-00024400: 636f 6e74 6169 6e20 277b 6461 7461 7d27  contain '{data}'
-00024410: 2c20 7472 6967 6765 7269 6e67 0a20 2020  , triggering.   
-00024420: 2020 2020 2023 2074 6865 2050 4f53 5420       # the POST 
-00024430: 7265 7175 6573 7420 6c6f 6769 632e 2054  request logic. T
-00024440: 6865 2069 6465 6120 6865 7265 2069 7320  he idea here is 
-00024450: 746f 2072 6574 7572 6e20 6120 6261 6420  to return a bad 
-00024460: 7374 6174 7573 2066 6f72 0a20 2020 2020  status for.     
-00024470: 2020 2023 2074 6865 2066 6972 7374 2075     # the first u
-00024480: 726c 2028 4745 5429 2061 6e64 2061 2073  rl (GET) and a s
-00024490: 7563 6365 7373 2073 7461 7475 7320 6672  uccess status fr
-000244a0: 6f6d 2074 6865 2073 6563 6f6e 6420 6361  om the second ca
-000244b0: 6c6c 2028 504f 5354 290a 2020 2020 2020  ll (POST).      
-000244c0: 2020 2320 746f 2074 6573 7420 626f 7468    # to test both
-000244d0: 2074 6861 7420 7765 206d 6f76 6520 6f6e   that we move on
-000244e0: 2074 6f20 7468 6520 6e65 7874 2075 726c   to the next url
-000244f0: 2077 6974 6820 6e6f 6e20 3478 7820 7374   with non 4xx st
-00024500: 6174 7573 2061 6e64 0a20 2020 2020 2020  atus and.       
-00024510: 2023 2074 6861 7420 7468 6520 504f 5354   # that the POST
-00024520: 206c 6f67 6963 2069 7320 616c 736f 2077   logic is also w
-00024530: 6f72 6b69 6e67 2061 7320 6578 7065 6374  orking as expect
-00024540: 6564 2e0a 2020 2020 2020 2020 6d6f 636b  ed..        mock
-00024550: 5f6f 6666 6368 6169 6e5f 6c6f 6f6b 7570  _offchain_lookup
-00024560: 5f72 6571 7565 7374 5f72 6573 706f 6e73  _request_respons
-00024570: 6528 0a20 2020 2020 2020 2020 2020 206d  e(.            m
-00024580: 6f6e 6b65 7970 6174 6368 2c0a 2020 2020  onkeypatch,.    
-00024590: 2020 2020 2020 2020 6d6f 636b 6564 5f72          mocked_r
-000245a0: 6571 7565 7374 5f75 726c 3d66 2268 7474  equest_url=f"htt
-000245b0: 7073 3a2f 2f77 6562 332e 7079 2f67 6174  ps://web3.py/gat
-000245c0: 6577 6179 2f7b 6e6f 726d 616c 697a 6564  eway/{normalized
-000245d0: 5f63 6f6e 7472 6163 745f 6164 6472 6573  _contract_addres
-000245e0: 737d 2f7b 4f46 4643 4841 494e 5f4c 4f4f  s}/{OFFCHAIN_LOO
-000245f0: 4b55 505f 5445 5354 5f44 4154 417d 2e6a  KUP_TEST_DATA}.j
-00024600: 736f 6e22 2c20 2023 206e 6f71 613a 2045  son",  # noqa: E
-00024610: 3530 310a 2020 2020 2020 2020 2020 2020  501.            
-00024620: 6d6f 636b 6564 5f73 7461 7475 735f 636f  mocked_status_co
-00024630: 6465 3d73 7461 7475 735f 636f 6465 5f6e  de=status_code_n
-00024640: 6f6e 5f34 7878 5f65 7272 6f72 2c0a 2020  on_4xx_error,.  
-00024650: 2020 2020 2020 2020 2020 6d6f 636b 6564            mocked
-00024660: 5f6a 736f 6e5f 6461 7461 3d57 4542 3350  _json_data=WEB3P
-00024670: 595f 4153 5f48 4558 4259 5445 532c 0a20  Y_AS_HEXBYTES,. 
-00024680: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00024690: 206d 6f63 6b5f 6f66 6663 6861 696e 5f6c   mock_offchain_l
-000246a0: 6f6f 6b75 705f 7265 7175 6573 745f 7265  ookup_request_re
-000246b0: 7370 6f6e 7365 280a 2020 2020 2020 2020  sponse(.        
-000246c0: 2020 2020 6d6f 6e6b 6579 7061 7463 682c      monkeypatch,
-000246d0: 0a20 2020 2020 2020 2020 2020 2068 7474  .            htt
-000246e0: 705f 6d65 7468 6f64 3d22 504f 5354 222c  p_method="POST",
-000246f0: 0a20 2020 2020 2020 2020 2020 206d 6f63  .            moc
-00024700: 6b65 645f 7265 7175 6573 745f 7572 6c3d  ked_request_url=
-00024710: 6622 6874 7470 733a 2f2f 7765 6233 2e70  f"https://web3.p
-00024720: 792f 6761 7465 7761 792f 7b6e 6f72 6d61  y/gateway/{norma
-00024730: 6c69 7a65 645f 636f 6e74 7261 6374 5f61  lized_contract_a
-00024740: 6464 7265 7373 7d2e 6a73 6f6e 222c 2020  ddress}.json",  
-00024750: 2320 6e6f 7161 3a20 4535 3031 0a20 2020  # noqa: E501.   
-00024760: 2020 2020 2020 2020 206d 6f63 6b65 645f           mocked_
-00024770: 7374 6174 7573 5f63 6f64 653d 3230 302c  status_code=200,
-00024780: 0a20 2020 2020 2020 2020 2020 206d 6f63  .            moc
-00024790: 6b65 645f 6a73 6f6e 5f64 6174 613d 5745  ked_json_data=WE
-000247a0: 4233 5059 5f41 535f 4845 5842 5954 4553  B3PY_AS_HEXBYTES
-000247b0: 2c0a 2020 2020 2020 2020 2020 2020 7365  ,.            se
-000247c0: 6e64 6572 3d6e 6f72 6d61 6c69 7a65 645f  nder=normalized_
-000247d0: 636f 6e74 7261 6374 5f61 6464 7265 7373  contract_address
-000247e0: 2c0a 2020 2020 2020 2020 2020 2020 6361  ,.            ca
-000247f0: 6c6c 6461 7461 3d4f 4646 4348 4149 4e5f  lldata=OFFCHAIN_
-00024800: 4c4f 4f4b 5550 5f54 4553 545f 4441 5441  LOOKUP_TEST_DATA
-00024810: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
-00024820: 2020 2020 7265 7370 6f6e 7365 203d 206f      response = o
-00024830: 6666 6368 6169 6e5f 6c6f 6f6b 7570 5f63  ffchain_lookup_c
-00024840: 6f6e 7472 6163 742e 6675 6e63 7469 6f6e  ontract.function
-00024850: 732e 7465 7374 4f66 6663 6861 696e 4c6f  s.testOffchainLo
-00024860: 6f6b 7570 280a 2020 2020 2020 2020 2020  okup(.          
-00024870: 2020 4f46 4643 4841 494e 5f4c 4f4f 4b55    OFFCHAIN_LOOKU
-00024880: 505f 5445 5354 5f44 4154 410a 2020 2020  P_TEST_DATA.    
-00024890: 2020 2020 292e 6361 6c6c 2829 0a20 2020      ).call().   
-000248a0: 2020 2020 2061 7373 6572 7420 7733 2e63       assert w3.c
-000248b0: 6f64 6563 2e64 6563 6f64 6528 5b22 7374  odec.decode(["st
-000248c0: 7269 6e67 225d 2c20 7265 7370 6f6e 7365  ring"], response
-000248d0: 295b 305d 203d 3d20 2277 6562 3370 7922  )[0] == "web3py"
-000248e0: 0a0a 2020 2020 6465 6620 7465 7374 5f65  ..    def test_e
-000248f0: 7468 5f63 616c 6c5f 6f66 6663 6861 696e  th_call_offchain
-00024900: 5f6c 6f6f 6b75 705f 6361 6c6c 735f 7261  _lookup_calls_ra
-00024910: 6973 655f 666f 725f 7374 6174 7573 5f66  ise_for_status_f
-00024920: 6f72 5f34 7878 5f73 7461 7475 735f 636f  or_4xx_status_co
-00024930: 6465 280a 2020 2020 2020 2020 7365 6c66  de(.        self
-00024940: 2c0a 2020 2020 2020 2020 7733 3a20 2257  ,.        w3: "W
-00024950: 6562 3322 2c0a 2020 2020 2020 2020 6f66  eb3",.        of
-00024960: 6663 6861 696e 5f6c 6f6f 6b75 705f 636f  fchain_lookup_co
-00024970: 6e74 7261 6374 3a20 2243 6f6e 7472 6163  ntract: "Contrac
-00024980: 7422 2c0a 2020 2020 2020 2020 756e 6c6f  t",.        unlo
-00024990: 636b 6564 5f61 6363 6f75 6e74 3a20 4368  cked_account: Ch
-000249a0: 6563 6b73 756d 4164 6472 6573 732c 0a20  ecksumAddress,. 
-000249b0: 2020 2020 2020 206d 6f6e 6b65 7970 6174         monkeypat
-000249c0: 6368 3a20 224d 6f6e 6b65 7950 6174 6368  ch: "MonkeyPatch
-000249d0: 222c 0a20 2020 2029 202d 3e20 4e6f 6e65  ",.    ) -> None
-000249e0: 3a0a 2020 2020 2020 2020 6e6f 726d 616c  :.        normal
-000249f0: 697a 6564 5f63 6f6e 7472 6163 745f 6164  ized_contract_ad
-00024a00: 6472 6573 7320 3d20 746f 5f68 6578 5f69  dress = to_hex_i
-00024a10: 665f 6279 7465 7328 0a20 2020 2020 2020  f_bytes(.       
-00024a20: 2020 2020 206f 6666 6368 6169 6e5f 6c6f       offchain_lo
-00024a30: 6f6b 7570 5f63 6f6e 7472 6163 742e 6164  okup_contract.ad
-00024a40: 6472 6573 730a 2020 2020 2020 2020 292e  dress.        ).
-00024a50: 6c6f 7765 7228 290a 2020 2020 2020 2020  lower().        
-00024a60: 6d6f 636b 5f6f 6666 6368 6169 6e5f 6c6f  mock_offchain_lo
-00024a70: 6f6b 7570 5f72 6571 7565 7374 5f72 6573  okup_request_res
-00024a80: 706f 6e73 6528 0a20 2020 2020 2020 2020  ponse(.         
-00024a90: 2020 206d 6f6e 6b65 7970 6174 6368 2c0a     monkeypatch,.
-00024aa0: 2020 2020 2020 2020 2020 2020 6d6f 636b              mock
-00024ab0: 6564 5f72 6571 7565 7374 5f75 726c 3d66  ed_request_url=f
-00024ac0: 2268 7474 7073 3a2f 2f77 6562 332e 7079  "https://web3.py
-00024ad0: 2f67 6174 6577 6179 2f7b 6e6f 726d 616c  /gateway/{normal
-00024ae0: 697a 6564 5f63 6f6e 7472 6163 745f 6164  ized_contract_ad
-00024af0: 6472 6573 737d 2f7b 4f46 4643 4841 494e  dress}/{OFFCHAIN
-00024b00: 5f4c 4f4f 4b55 505f 5445 5354 5f44 4154  _LOOKUP_TEST_DAT
-00024b10: 417d 2e6a 736f 6e22 2c20 2023 206e 6f71  A}.json",  # noq
-00024b20: 613a 2045 3530 310a 2020 2020 2020 2020  a: E501.        
-00024b30: 2020 2020 6d6f 636b 6564 5f73 7461 7475      mocked_statu
-00024b40: 735f 636f 6465 3d72 616e 6469 6e74 2834  s_code=randint(4
-00024b50: 3030 2c20 3439 3929 2c0a 2020 2020 2020  00, 499),.      
-00024b60: 2020 2020 2020 6d6f 636b 6564 5f6a 736f        mocked_jso
-00024b70: 6e5f 6461 7461 3d57 4542 3350 595f 4153  n_data=WEB3PY_AS
-00024b80: 5f48 4558 4259 5445 532c 0a20 2020 2020  _HEXBYTES,.     
-00024b90: 2020 2029 0a20 2020 2020 2020 2077 6974     ).        wit
-00024ba0: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
-00024bb0: 4578 6365 7074 696f 6e2c 206d 6174 6368  Exception, match
-00024bc0: 3d22 6361 6c6c 6564 2072 6169 7365 5f66  ="called raise_f
-00024bd0: 6f72 5f73 7461 7475 735c 5c28 5c5c 2922  or_status\\(\\)"
-00024be0: 293a 0a20 2020 2020 2020 2020 2020 206f  ):.            o
-00024bf0: 6666 6368 6169 6e5f 6c6f 6f6b 7570 5f63  ffchain_lookup_c
-00024c00: 6f6e 7472 6163 742e 6675 6e63 7469 6f6e  ontract.function
-00024c10: 732e 7465 7374 4f66 6663 6861 696e 4c6f  s.testOffchainLo
-00024c20: 6f6b 7570 280a 2020 2020 2020 2020 2020  okup(.          
-00024c30: 2020 2020 2020 4f46 4643 4841 494e 5f4c        OFFCHAIN_L
-00024c40: 4f4f 4b55 505f 5445 5354 5f44 4154 410a  OOKUP_TEST_DATA.
-00024c50: 2020 2020 2020 2020 2020 2020 292e 6361              ).ca
-00024c60: 6c6c 2829 0a0a 2020 2020 6465 6620 7465  ll()..    def te
-00024c70: 7374 5f65 7468 5f63 616c 6c5f 6f66 6663  st_eth_call_offc
-00024c80: 6861 696e 5f6c 6f6f 6b75 705f 7261 6973  hain_lookup_rais
-00024c90: 6573 5f77 6865 6e5f 616c 6c5f 7375 7070  es_when_all_supp
-00024ca0: 6c69 6564 5f75 726c 735f 6661 696c 280a  lied_urls_fail(.
-00024cb0: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-00024cc0: 2020 2020 2020 7733 3a20 2257 6562 3322        w3: "Web3"
-00024cd0: 2c0a 2020 2020 2020 2020 6f66 6663 6861  ,.        offcha
-00024ce0: 696e 5f6c 6f6f 6b75 705f 636f 6e74 7261  in_lookup_contra
-00024cf0: 6374 3a20 2243 6f6e 7472 6163 7422 2c0a  ct: "Contract",.
-00024d00: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
-00024d10: 2020 2020 2020 2023 2047 4554 2061 6e64         # GET and
-00024d20: 2050 4f53 5420 7265 7175 6573 7473 2073   POST requests s
-00024d30: 686f 756c 6420 6661 696c 2073 696e 6365  hould fail since
-00024d40: 2072 6573 706f 6e73 6573 2061 7265 206e   responses are n
-00024d50: 6f74 206d 6f63 6b65 640a 2020 2020 2020  ot mocked.      
-00024d60: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
-00024d70: 6973 6573 280a 2020 2020 2020 2020 2020  ises(.          
-00024d80: 2020 4d75 6c74 6970 6c65 4661 696c 6564    MultipleFailed
-00024d90: 5265 7175 6573 7473 2c20 6d61 7463 683d  Requests, match=
-00024da0: 224f 6666 6368 6169 6e20 6c6f 6f6b 7570  "Offchain lookup
-00024db0: 2066 6169 6c65 6420 666f 7220 7375 7070   failed for supp
-00024dc0: 6c69 6564 2075 726c 7322 0a20 2020 2020  lied urls".     
-00024dd0: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-00024de0: 2020 6f66 6663 6861 696e 5f6c 6f6f 6b75    offchain_looku
-00024df0: 705f 636f 6e74 7261 6374 2e66 756e 6374  p_contract.funct
-00024e00: 696f 6e73 2e74 6573 744f 6666 6368 6169  ions.testOffchai
-00024e10: 6e4c 6f6f 6b75 7028 0a20 2020 2020 2020  nLookup(.       
-00024e20: 2020 2020 2020 2020 204f 4646 4348 4149           OFFCHAI
-00024e30: 4e5f 4c4f 4f4b 5550 5f54 4553 545f 4441  N_LOOKUP_TEST_DA
-00024e40: 5441 0a20 2020 2020 2020 2020 2020 2029  TA.            )
-00024e50: 2e63 616c 6c28 290a 0a20 2020 2064 6566  .call()..    def
-00024e60: 2074 6573 745f 6574 685f 6361 6c6c 5f63   test_eth_call_c
-00024e70: 6f6e 7469 6e75 6f75 735f 6f66 6663 6861  ontinuous_offcha
-00024e80: 696e 5f6c 6f6f 6b75 705f 7261 6973 6573  in_lookup_raises
-00024e90: 5f77 6974 685f 746f 6f5f 6d61 6e79 5f72  _with_too_many_r
-00024ea0: 6571 7565 7374 7328 0a20 2020 2020 2020  equests(.       
-00024eb0: 2073 656c 662c 0a20 2020 2020 2020 2077   self,.        w
-00024ec0: 333a 2022 5765 6233 222c 0a20 2020 2020  3: "Web3",.     
-00024ed0: 2020 206f 6666 6368 6169 6e5f 6c6f 6f6b     offchain_look
-00024ee0: 7570 5f63 6f6e 7472 6163 743a 2022 436f  up_contract: "Co
-00024ef0: 6e74 7261 6374 222c 0a20 2020 2020 2020  ntract",.       
-00024f00: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-00024f10: 743a 2043 6865 636b 7375 6d41 6464 7265  t: ChecksumAddre
-00024f20: 7373 2c0a 2020 2020 2020 2020 6d6f 6e6b  ss,.        monk
-00024f30: 6579 7061 7463 683a 2022 4d6f 6e6b 6579  eypatch: "Monkey
-00024f40: 5061 7463 6822 2c0a 2020 2020 2920 2d3e  Patch",.    ) ->
-00024f50: 204e 6f6e 653a 0a20 2020 2020 2020 206e   None:.        n
-00024f60: 6f72 6d61 6c69 7a65 645f 636f 6e74 7261  ormalized_contra
-00024f70: 6374 5f61 6464 7265 7373 203d 2074 6f5f  ct_address = to_
-00024f80: 6865 785f 6966 5f62 7974 6573 280a 2020  hex_if_bytes(.  
-00024f90: 2020 2020 2020 2020 2020 6f66 6663 6861            offcha
-00024fa0: 696e 5f6c 6f6f 6b75 705f 636f 6e74 7261  in_lookup_contra
-00024fb0: 6374 2e61 6464 7265 7373 0a20 2020 2020  ct.address.     
-00024fc0: 2020 2029 2e6c 6f77 6572 2829 0a20 2020     ).lower().   
-00024fd0: 2020 2020 206d 6f63 6b5f 6f66 6663 6861       mock_offcha
-00024fe0: 696e 5f6c 6f6f 6b75 705f 7265 7175 6573  in_lookup_reques
-00024ff0: 745f 7265 7370 6f6e 7365 280a 2020 2020  t_response(.    
-00025000: 2020 2020 2020 2020 6d6f 6e6b 6579 7061          monkeypa
-00025010: 7463 682c 0a20 2020 2020 2020 2020 2020  tch,.           
-00025020: 206d 6f63 6b65 645f 7265 7175 6573 745f   mocked_request_
-00025030: 7572 6c3d 6622 6874 7470 733a 2f2f 7765  url=f"https://we
-00025040: 6233 2e70 792f 6761 7465 7761 792f 7b6e  b3.py/gateway/{n
-00025050: 6f72 6d61 6c69 7a65 645f 636f 6e74 7261  ormalized_contra
-00025060: 6374 5f61 6464 7265 7373 7d2f 3078 2e6a  ct_address}/0x.j
-00025070: 736f 6e22 2c20 2023 206e 6f71 613a 2045  son",  # noqa: E
-00025080: 3530 310a 2020 2020 2020 2020 290a 2020  501.        ).  
-00025090: 2020 2020 2020 7769 7468 2070 7974 6573        with pytes
-000250a0: 742e 7261 6973 6573 2854 6f6f 4d61 6e79  t.raises(TooMany
-000250b0: 5265 7175 6573 7473 2c20 6d61 7463 683d  Requests, match=
-000250c0: 2254 6f6f 206d 616e 7920 4343 4950 2072  "Too many CCIP r
-000250d0: 6561 6420 7265 6469 7265 6374 7322 293a  ead redirects"):
-000250e0: 0a20 2020 2020 2020 2020 2020 206f 6666  .            off
-000250f0: 6368 6169 6e5f 6c6f 6f6b 7570 5f63 6f6e  chain_lookup_con
-00025100: 7472 6163 742e 6361 6c6c 6572 2829 2e63  tract.caller().c
-00025110: 6f6e 7469 6e75 6f75 734f 6666 6368 6169  ontinuousOffchai
-00025120: 6e4c 6f6f 6b75 7028 290a 0a20 2020 2064  nLookup()..    d
-00025130: 6566 2074 6573 745f 6574 685f 6573 7469  ef test_eth_esti
-00025140: 6d61 7465 5f67 6173 5f72 6576 6572 745f  mate_gas_revert_
-00025150: 7769 7468 5f6d 7367 280a 2020 2020 2020  with_msg(.      
-00025160: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-00025170: 7733 3a20 2257 6562 3322 2c0a 2020 2020  w3: "Web3",.    
-00025180: 2020 2020 7265 7665 7274 5f63 6f6e 7472      revert_contr
-00025190: 6163 743a 2022 436f 6e74 7261 6374 222c  act: "Contract",
-000251a0: 0a20 2020 2020 2020 2075 6e6c 6f63 6b65  .        unlocke
-000251b0: 645f 6163 636f 756e 743a 2043 6865 636b  d_account: Check
-000251c0: 7375 6d41 6464 7265 7373 2c0a 2020 2020  sumAddress,.    
-000251d0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-000251e0: 2020 2077 6974 6820 7079 7465 7374 2e72     with pytest.r
-000251f0: 6169 7365 7328 0a20 2020 2020 2020 2020  aises(.         
-00025200: 2020 2043 6f6e 7472 6163 744c 6f67 6963     ContractLogic
-00025210: 4572 726f 722c 206d 6174 6368 3d22 6578  Error, match="ex
-00025220: 6563 7574 696f 6e20 7265 7665 7274 6564  ecution reverted
-00025230: 3a20 4675 6e63 7469 6f6e 2068 6173 2062  : Function has b
-00025240: 6565 6e20 7265 7665 7274 6564 220a 2020  een reverted".  
-00025250: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
-00025260: 2020 2020 2074 786e 5f70 6172 616d 7320       txn_params 
-00025270: 3d20 7265 7665 7274 5f63 6f6e 7472 6163  = revert_contrac
-00025280: 742e 5f70 7265 7061 7265 5f74 7261 6e73  t._prepare_trans
-00025290: 6163 7469 6f6e 280a 2020 2020 2020 2020  action(.        
-000252a0: 2020 2020 2020 2020 666e 5f6e 616d 653d          fn_name=
-000252b0: 2272 6576 6572 7457 6974 684d 6573 7361  "revertWithMessa
-000252c0: 6765 222c 0a20 2020 2020 2020 2020 2020  ge",.           
-000252d0: 2020 2020 2074 7261 6e73 6163 7469 6f6e       transaction
-000252e0: 3d7b 0a20 2020 2020 2020 2020 2020 2020  ={.             
-000252f0: 2020 2020 2020 2022 6672 6f6d 223a 2075         "from": u
-00025300: 6e6c 6f63 6b65 645f 6163 636f 756e 742c  nlocked_account,
-00025310: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00025320: 2020 2020 2022 746f 223a 2072 6576 6572       "to": rever
-00025330: 745f 636f 6e74 7261 6374 2e61 6464 7265  t_contract.addre
-00025340: 7373 2c0a 2020 2020 2020 2020 2020 2020  ss,.            
-00025350: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
-00025360: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-00025370: 2077 332e 6574 682e 6573 7469 6d61 7465   w3.eth.estimate
-00025380: 5f67 6173 2874 786e 5f70 6172 616d 7329  _gas(txn_params)
-00025390: 0a0a 2020 2020 6465 6620 7465 7374 5f65  ..    def test_e
-000253a0: 7468 5f65 7374 696d 6174 655f 6761 735f  th_estimate_gas_
-000253b0: 7265 7665 7274 5f77 6974 686f 7574 5f6d  revert_without_m
-000253c0: 7367 280a 2020 2020 2020 2020 7365 6c66  sg(.        self
-000253d0: 2c0a 2020 2020 2020 2020 7733 3a20 2257  ,.        w3: "W
-000253e0: 6562 3322 2c0a 2020 2020 2020 2020 7265  eb3",.        re
-000253f0: 7665 7274 5f63 6f6e 7472 6163 743a 2022  vert_contract: "
-00025400: 436f 6e74 7261 6374 222c 0a20 2020 2020  Contract",.     
-00025410: 2020 2075 6e6c 6f63 6b65 645f 6163 636f     unlocked_acco
-00025420: 756e 743a 2043 6865 636b 7375 6d41 6464  unt: ChecksumAdd
-00025430: 7265 7373 2c0a 2020 2020 2920 2d3e 204e  ress,.    ) -> N
-00025440: 6f6e 653a 0a20 2020 2020 2020 2077 6974  one:.        wit
-00025450: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
-00025460: 436f 6e74 7261 6374 4c6f 6769 6345 7272  ContractLogicErr
-00025470: 6f72 2c20 6d61 7463 683d 2265 7865 6375  or, match="execu
-00025480: 7469 6f6e 2072 6576 6572 7465 6422 293a  tion reverted"):
-00025490: 0a20 2020 2020 2020 2020 2020 2074 786e  .            txn
-000254a0: 5f70 6172 616d 7320 3d20 7265 7665 7274  _params = revert
-000254b0: 5f63 6f6e 7472 6163 742e 5f70 7265 7061  _contract._prepa
-000254c0: 7265 5f74 7261 6e73 6163 7469 6f6e 280a  re_transaction(.
-000254d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000254e0: 666e 5f6e 616d 653d 2272 6576 6572 7457  fn_name="revertW
-000254f0: 6974 686f 7574 4d65 7373 6167 6522 2c0a  ithoutMessage",.
-00025500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025510: 7472 616e 7361 6374 696f 6e3d 7b0a 2020  transaction={.  
-00025520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025530: 2020 2266 726f 6d22 3a20 756e 6c6f 636b    "from": unlock
-00025540: 6564 5f61 6363 6f75 6e74 2c0a 2020 2020  ed_account,.    
-00025550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025560: 2274 6f22 3a20 7265 7665 7274 5f63 6f6e  "to": revert_con
-00025570: 7472 6163 742e 6164 6472 6573 732c 0a20  tract.address,. 
-00025580: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-00025590: 2c0a 2020 2020 2020 2020 2020 2020 290a  ,.            ).
-000255a0: 2020 2020 2020 2020 2020 2020 7733 2e65              w3.e
-000255b0: 7468 2e65 7374 696d 6174 655f 6761 7328  th.estimate_gas(
-000255c0: 7478 6e5f 7061 7261 6d73 290a 0a20 2020  txn_params)..   
-000255d0: 2064 6566 2074 6573 745f 6574 685f 6573   def test_eth_es
-000255e0: 7469 6d61 7465 5f67 6173 5f63 7573 746f  timate_gas_custo
-000255f0: 6d5f 6572 726f 725f 7265 7665 7274 5f77  m_error_revert_w
-00025600: 6974 685f 6d73 6728 0a20 2020 2020 2020  ith_msg(.       
-00025610: 2073 656c 662c 0a20 2020 2020 2020 2077   self,.        w
-00025620: 333a 2022 5765 6233 222c 0a20 2020 2020  3: "Web3",.     
-00025630: 2020 2072 6576 6572 745f 636f 6e74 7261     revert_contra
-00025640: 6374 3a20 2243 6f6e 7472 6163 7422 2c0a  ct: "Contract",.
-00025650: 2020 2020 2020 2020 756e 6c6f 636b 6564          unlocked
-00025660: 5f61 6363 6f75 6e74 3a20 4368 6563 6b73  _account: Checks
-00025670: 756d 4164 6472 6573 732c 0a20 2020 2029  umAddress,.    )
-00025680: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-00025690: 2020 6461 7461 203d 2072 6576 6572 745f    data = revert_
-000256a0: 636f 6e74 7261 6374 2e65 6e63 6f64 6541  contract.encodeA
-000256b0: 4249 280a 2020 2020 2020 2020 2020 2020  BI(.            
-000256c0: 666e 5f6e 616d 653d 2255 6e61 7574 686f  fn_name="Unautho
-000256d0: 7269 7a65 6457 6974 684d 6573 7361 6765  rizedWithMessage
-000256e0: 222c 2061 7267 733d 5b22 596f 7520 6172  ", args=["You ar
-000256f0: 6520 6e6f 7420 6175 7468 6f72 697a 6564  e not authorized
-00025700: 225d 0a20 2020 2020 2020 2029 0a20 2020  "].        ).   
-00025710: 2020 2020 2074 786e 5f70 6172 616d 7320       txn_params 
-00025720: 3d20 7265 7665 7274 5f63 6f6e 7472 6163  = revert_contrac
-00025730: 742e 5f70 7265 7061 7265 5f74 7261 6e73  t._prepare_trans
-00025740: 6163 7469 6f6e 280a 2020 2020 2020 2020  action(.        
-00025750: 2020 2020 666e 5f6e 616d 653d 2263 7573      fn_name="cus
-00025760: 746f 6d45 7272 6f72 5769 7468 4d65 7373  tomErrorWithMess
-00025770: 6167 6522 2c0a 2020 2020 2020 2020 2020  age",.          
-00025780: 2020 7472 616e 7361 6374 696f 6e3d 7b0a    transaction={.
-00025790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000257a0: 2266 726f 6d22 3a20 756e 6c6f 636b 6564  "from": unlocked
-000257b0: 5f61 6363 6f75 6e74 2c0a 2020 2020 2020  _account,.      
-000257c0: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
-000257d0: 7265 7665 7274 5f63 6f6e 7472 6163 742e  revert_contract.
-000257e0: 6164 6472 6573 732c 0a20 2020 2020 2020  address,.       
-000257f0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-00025800: 290a 2020 2020 2020 2020 7769 7468 2070  ).        with p
-00025810: 7974 6573 742e 7261 6973 6573 2843 6f6e  ytest.raises(Con
-00025820: 7472 6163 7443 7573 746f 6d45 7272 6f72  tractCustomError
-00025830: 2c20 6d61 7463 683d 6461 7461 2920 6173  , match=data) as
-00025840: 2065 7863 696e 666f 3a0a 2020 2020 2020   excinfo:.      
-00025850: 2020 2020 2020 7733 2e65 7468 2e65 7374        w3.eth.est
-00025860: 696d 6174 655f 6761 7328 7478 6e5f 7061  imate_gas(txn_pa
-00025870: 7261 6d73 290a 2020 2020 2020 2020 6173  rams).        as
-00025880: 7365 7274 2065 7863 696e 666f 2e76 616c  sert excinfo.val
-00025890: 7565 2e64 6174 6120 3d3d 2064 6174 610a  ue.data == data.
-000258a0: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
-000258b0: 685f 6573 7469 6d61 7465 5f67 6173 5f63  h_estimate_gas_c
-000258c0: 7573 746f 6d5f 6572 726f 725f 7265 7665  ustom_error_reve
-000258d0: 7274 5f77 6974 686f 7574 5f6d 7367 280a  rt_without_msg(.
-000258e0: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-000258f0: 2020 2020 2020 7733 3a20 2257 6562 3322        w3: "Web3"
-00025900: 2c0a 2020 2020 2020 2020 7265 7665 7274  ,.        revert
-00025910: 5f63 6f6e 7472 6163 743a 2022 436f 6e74  _contract: "Cont
-00025920: 7261 6374 222c 0a20 2020 2020 2020 2075  ract",.        u
-00025930: 6e6c 6f63 6b65 645f 6163 636f 756e 743a  nlocked_account:
-00025940: 2043 6865 636b 7375 6d41 6464 7265 7373   ChecksumAddress
-00025950: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
-00025960: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
-00025970: 7265 7665 7274 5f63 6f6e 7472 6163 742e  revert_contract.
-00025980: 656e 636f 6465 4142 4928 666e 5f6e 616d  encodeABI(fn_nam
-00025990: 653d 2255 6e61 7574 686f 7269 7a65 6422  e="Unauthorized"
-000259a0: 290a 2020 2020 2020 2020 7478 6e5f 7061  ).        txn_pa
-000259b0: 7261 6d73 203d 2072 6576 6572 745f 636f  rams = revert_co
-000259c0: 6e74 7261 6374 2e5f 7072 6570 6172 655f  ntract._prepare_
-000259d0: 7472 616e 7361 6374 696f 6e28 0a20 2020  transaction(.   
-000259e0: 2020 2020 2020 2020 2066 6e5f 6e61 6d65           fn_name
-000259f0: 3d22 6375 7374 6f6d 4572 726f 7257 6974  ="customErrorWit
-00025a00: 686f 7574 4d65 7373 6167 6522 2c0a 2020  houtMessage",.  
-00025a10: 2020 2020 2020 2020 2020 7472 616e 7361            transa
-00025a20: 6374 696f 6e3d 7b0a 2020 2020 2020 2020  ction={.        
-00025a30: 2020 2020 2020 2020 2266 726f 6d22 3a20          "from": 
-00025a40: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-00025a50: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00025a60: 2020 2274 6f22 3a20 7265 7665 7274 5f63    "to": revert_c
-00025a70: 6f6e 7472 6163 742e 6164 6472 6573 732c  ontract.address,
-00025a80: 0a20 2020 2020 2020 2020 2020 207d 2c0a  .            },.
-00025a90: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00025aa0: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
-00025ab0: 6973 6573 2843 6f6e 7472 6163 7443 7573  ises(ContractCus
-00025ac0: 746f 6d45 7272 6f72 2c20 6d61 7463 683d  tomError, match=
-00025ad0: 6461 7461 2920 6173 2065 7863 696e 666f  data) as excinfo
-00025ae0: 3a0a 2020 2020 2020 2020 2020 2020 7733  :.            w3
-00025af0: 2e65 7468 2e65 7374 696d 6174 655f 6761  .eth.estimate_ga
-00025b00: 7328 7478 6e5f 7061 7261 6d73 290a 2020  s(txn_params).  
-00025b10: 2020 2020 2020 6173 7365 7274 2065 7863        assert exc
-00025b20: 696e 666f 2e76 616c 7565 2e64 6174 6120  info.value.data 
-00025b30: 3d3d 2064 6174 610a 0a20 2020 2064 6566  == data..    def
-00025b40: 2074 6573 745f 6574 685f 6573 7469 6d61   test_eth_estima
-00025b50: 7465 5f67 6173 280a 2020 2020 2020 2020  te_gas(.        
-00025b60: 7365 6c66 2c20 7733 3a20 2257 6562 3322  self, w3: "Web3"
-00025b70: 2c20 756e 6c6f 636b 6564 5f61 6363 6f75  , unlocked_accou
-00025b80: 6e74 5f64 7561 6c5f 7479 7065 3a20 4368  nt_dual_type: Ch
-00025b90: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
-00025ba0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-00025bb0: 2020 2020 2067 6173 5f65 7374 696d 6174       gas_estimat
-00025bc0: 6520 3d20 7733 2e65 7468 2e65 7374 696d  e = w3.eth.estim
-00025bd0: 6174 655f 6761 7328 0a20 2020 2020 2020  ate_gas(.       
-00025be0: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-00025bf0: 2020 2020 2020 2022 6672 6f6d 223a 2075         "from": u
-00025c00: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
-00025c10: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
-00025c20: 2020 2020 2020 2020 2020 2022 746f 223a             "to":
-00025c30: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
-00025c40: 745f 6475 616c 5f74 7970 652c 0a20 2020  t_dual_type,.   
-00025c50: 2020 2020 2020 2020 2020 2020 2022 7661               "va
-00025c60: 6c75 6522 3a20 5765 6928 3129 2c0a 2020  lue": Wei(1),.  
-00025c70: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-00025c80: 2020 2020 290a 2020 2020 2020 2020 6173      ).        as
-00025c90: 7365 7274 2069 735f 696e 7465 6765 7228  sert is_integer(
-00025ca0: 6761 735f 6573 7469 6d61 7465 290a 2020  gas_estimate).  
-00025cb0: 2020 2020 2020 6173 7365 7274 2067 6173        assert gas
-00025cc0: 5f65 7374 696d 6174 6520 3e20 300a 0a20  _estimate > 0.. 
-00025cd0: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
-00025ce0: 6573 7469 6d61 7465 5f67 6173 5f77 6974  estimate_gas_wit
-00025cf0: 685f 626c 6f63 6b28 0a20 2020 2020 2020  h_block(.       
-00025d00: 2073 656c 662c 2077 333a 2022 5765 6233   self, w3: "Web3
-00025d10: 222c 2075 6e6c 6f63 6b65 645f 6163 636f  ", unlocked_acco
-00025d20: 756e 745f 6475 616c 5f74 7970 653a 2043  unt_dual_type: C
-00025d30: 6865 636b 7375 6d41 6464 7265 7373 0a20  hecksumAddress. 
-00025d40: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-00025d50: 2020 2020 2020 6761 735f 6573 7469 6d61        gas_estima
-00025d60: 7465 203d 2077 332e 6574 682e 6573 7469  te = w3.eth.esti
-00025d70: 6d61 7465 5f67 6173 280a 2020 2020 2020  mate_gas(.      
-00025d80: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00025d90: 2020 2020 2020 2020 2266 726f 6d22 3a20          "from": 
-00025da0: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-00025db0: 5f64 7561 6c5f 7479 7065 2c0a 2020 2020  _dual_type,.    
-00025dc0: 2020 2020 2020 2020 2020 2020 2274 6f22              "to"
-00025dd0: 3a20 756e 6c6f 636b 6564 5f61 6363 6f75  : unlocked_accou
-00025de0: 6e74 5f64 7561 6c5f 7479 7065 2c0a 2020  nt_dual_type,.  
-00025df0: 2020 2020 2020 2020 2020 2020 2020 2276                "v
-00025e00: 616c 7565 223a 2057 6569 2831 292c 0a20  alue": Wei(1),. 
-00025e10: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
-00025e20: 2020 2020 2020 2020 2020 226c 6174 6573            "lates
-00025e30: 7422 2c0a 2020 2020 2020 2020 290a 2020  t",.        ).  
-00025e40: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
-00025e50: 696e 7465 6765 7228 6761 735f 6573 7469  integer(gas_esti
-00025e60: 6d61 7465 290a 2020 2020 2020 2020 6173  mate).        as
-00025e70: 7365 7274 2067 6173 5f65 7374 696d 6174  sert gas_estimat
-00025e80: 6520 3e20 300a 0a20 2020 2064 6566 2074  e > 0..    def t
-00025e90: 6573 745f 6574 685f 6765 7442 6c6f 636b  est_eth_getBlock
-00025ea0: 4279 4861 7368 2873 656c 662c 2077 333a  ByHash(self, w3:
-00025eb0: 2022 5765 6233 222c 2065 6d70 7479 5f62   "Web3", empty_b
-00025ec0: 6c6f 636b 3a20 426c 6f63 6b44 6174 6129  lock: BlockData)
-00025ed0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-00025ee0: 2020 626c 6f63 6b20 3d20 7733 2e65 7468    block = w3.eth
-00025ef0: 2e67 6574 5f62 6c6f 636b 2865 6d70 7479  .get_block(empty
-00025f00: 5f62 6c6f 636b 5b22 6861 7368 225d 290a  _block["hash"]).
-00025f10: 2020 2020 2020 2020 6173 7365 7274 2062          assert b
-00025f20: 6c6f 636b 5b22 6861 7368 225d 203d 3d20  lock["hash"] == 
-00025f30: 656d 7074 795f 626c 6f63 6b5b 2268 6173  empty_block["has
-00025f40: 6822 5d0a 2020 2020 2020 2020 6173 7365  h"].        asse
-00025f50: 7274 2062 6c6f 636b 5b22 7265 6365 6970  rt block["receip
-00025f60: 7473 526f 6f74 225d 203d 3d20 656d 7074  tsRoot"] == empt
-00025f70: 795f 626c 6f63 6b5b 2272 6563 6569 7074  y_block["receipt
-00025f80: 7352 6f6f 7422 5d0a 2020 2020 2020 2020  sRoot"].        
-00025f90: 6173 7365 7274 2062 6c6f 636b 5b22 6c6f  assert block["lo
-00025fa0: 6773 426c 6f6f 6d22 5d20 3d3d 2065 6d70  gsBloom"] == emp
-00025fb0: 7479 5f62 6c6f 636b 5b22 6c6f 6773 426c  ty_block["logsBl
-00025fc0: 6f6f 6d22 5d0a 0a20 2020 2064 6566 2074  oom"]..    def t
-00025fd0: 6573 745f 6574 685f 6765 7442 6c6f 636b  est_eth_getBlock
-00025fe0: 4279 4861 7368 5f6e 6f74 5f66 6f75 6e64  ByHash_not_found
-00025ff0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-00026000: 7733 3a20 2257 6562 3322 2c20 656d 7074  w3: "Web3", empt
-00026010: 795f 626c 6f63 6b3a 2042 6c6f 636b 4461  y_block: BlockDa
-00026020: 7461 0a20 2020 2029 202d 3e20 4e6f 6e65  ta.    ) -> None
-00026030: 3a0a 2020 2020 2020 2020 7769 7468 2070  :.        with p
-00026040: 7974 6573 742e 7261 6973 6573 2842 6c6f  ytest.raises(Blo
-00026050: 636b 4e6f 7446 6f75 6e64 293a 0a20 2020  ckNotFound):.   
-00026060: 2020 2020 2020 2020 2077 332e 6574 682e           w3.eth.
-00026070: 6765 745f 626c 6f63 6b28 554e 4b4e 4f57  get_block(UNKNOW
-00026080: 4e5f 4841 5348 290a 0a20 2020 2064 6566  N_HASH)..    def
-00026090: 2074 6573 745f 6574 685f 6765 7442 6c6f   test_eth_getBlo
-000260a0: 636b 4279 4861 7368 5f70 656e 6469 6e67  ckByHash_pending
-000260b0: 2873 656c 662c 2077 333a 2022 5765 6233  (self, w3: "Web3
-000260c0: 2229 202d 3e20 4e6f 6e65 3a0a 2020 2020  ") -> None:.    
-000260d0: 2020 2020 626c 6f63 6b20 3d20 7733 2e65      block = w3.e
-000260e0: 7468 2e67 6574 5f62 6c6f 636b 2822 7065  th.get_block("pe
-000260f0: 6e64 696e 6722 290a 2020 2020 2020 2020  nding").        
-00026100: 6173 7365 7274 2062 6c6f 636b 5b22 6861  assert block["ha
-00026110: 7368 225d 2069 7320 4e6f 6e65 0a0a 2020  sh"] is None..  
-00026120: 2020 6465 6620 7465 7374 5f65 7468 5f67    def test_eth_g
-00026130: 6574 426c 6f63 6b42 794e 756d 6265 725f  etBlockByNumber_
-00026140: 7769 7468 5f69 6e74 6567 6572 280a 2020  with_integer(.  
-00026150: 2020 2020 2020 7365 6c66 2c20 7733 3a20        self, w3: 
-00026160: 2257 6562 3322 2c20 656d 7074 795f 626c  "Web3", empty_bl
-00026170: 6f63 6b3a 2042 6c6f 636b 4461 7461 0a20  ock: BlockData. 
-00026180: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-00026190: 2020 2020 2020 626c 6f63 6b20 3d20 7733        block = w3
-000261a0: 2e65 7468 2e67 6574 5f62 6c6f 636b 2865  .eth.get_block(e
-000261b0: 6d70 7479 5f62 6c6f 636b 5b22 6e75 6d62  mpty_block["numb
-000261c0: 6572 225d 290a 2020 2020 2020 2020 6173  er"]).        as
-000261d0: 7365 7274 2062 6c6f 636b 5b22 6e75 6d62  sert block["numb
-000261e0: 6572 225d 203d 3d20 656d 7074 795f 626c  er"] == empty_bl
-000261f0: 6f63 6b5b 226e 756d 6265 7222 5d0a 0a20  ock["number"].. 
-00026200: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
-00026210: 6765 7442 6c6f 636b 4279 4e75 6d62 6572  getBlockByNumber
-00026220: 5f6c 6174 6573 7428 0a20 2020 2020 2020  _latest(.       
-00026230: 2073 656c 662c 2077 333a 2022 5765 6233   self, w3: "Web3
-00026240: 222c 2065 6d70 7479 5f62 6c6f 636b 3a20  ", empty_block: 
-00026250: 426c 6f63 6b44 6174 610a 2020 2020 2920  BlockData.    ) 
-00026260: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-00026270: 2063 7572 7265 6e74 5f62 6c6f 636b 5f6e   current_block_n
-00026280: 756d 6265 7220 3d20 7733 2e65 7468 2e62  umber = w3.eth.b
-00026290: 6c6f 636b 5f6e 756d 6265 720a 2020 2020  lock_number.    
-000262a0: 2020 2020 626c 6f63 6b20 3d20 7733 2e65      block = w3.e
-000262b0: 7468 2e67 6574 5f62 6c6f 636b 2822 6c61  th.get_block("la
-000262c0: 7465 7374 2229 0a20 2020 2020 2020 2061  test").        a
-000262d0: 7373 6572 7420 626c 6f63 6b5b 226e 756d  ssert block["num
-000262e0: 6265 7222 5d20 3d3d 2063 7572 7265 6e74  ber"] == current
-000262f0: 5f62 6c6f 636b 5f6e 756d 6265 720a 0a20  _block_number.. 
-00026300: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
-00026310: 6765 7442 6c6f 636b 4279 4e75 6d62 6572  getBlockByNumber
-00026320: 5f6e 6f74 5f66 6f75 6e64 280a 2020 2020  _not_found(.    
-00026330: 2020 2020 7365 6c66 2c20 7733 3a20 2257      self, w3: "W
-00026340: 6562 3322 2c20 656d 7074 795f 626c 6f63  eb3", empty_bloc
-00026350: 6b3a 2042 6c6f 636b 4461 7461 0a20 2020  k: BlockData.   
-00026360: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-00026370: 2020 2020 7769 7468 2070 7974 6573 742e      with pytest.
-00026380: 7261 6973 6573 2842 6c6f 636b 4e6f 7446  raises(BlockNotF
-00026390: 6f75 6e64 293a 0a20 2020 2020 2020 2020  ound):.         
-000263a0: 2020 2077 332e 6574 682e 6765 745f 626c     w3.eth.get_bl
-000263b0: 6f63 6b28 426c 6f63 6b4e 756d 6265 7228  ock(BlockNumber(
-000263c0: 3132 3334 3529 290a 0a20 2020 2064 6566  12345))..    def
-000263d0: 2074 6573 745f 6574 685f 6765 7442 6c6f   test_eth_getBlo
-000263e0: 636b 4279 4e75 6d62 6572 5f70 656e 6469  ckByNumber_pendi
-000263f0: 6e67 280a 2020 2020 2020 2020 7365 6c66  ng(.        self
-00026400: 2c20 7733 3a20 2257 6562 3322 2c20 656d  , w3: "Web3", em
-00026410: 7074 795f 626c 6f63 6b3a 2042 6c6f 636b  pty_block: Block
-00026420: 4461 7461 0a20 2020 2029 202d 3e20 4e6f  Data.    ) -> No
-00026430: 6e65 3a0a 2020 2020 2020 2020 6375 7272  ne:.        curr
-00026440: 656e 745f 626c 6f63 6b5f 6e75 6d62 6572  ent_block_number
-00026450: 203d 2077 332e 6574 682e 626c 6f63 6b5f   = w3.eth.block_
-00026460: 6e75 6d62 6572 0a20 2020 2020 2020 2062  number.        b
-00026470: 6c6f 636b 203d 2077 332e 6574 682e 6765  lock = w3.eth.ge
-00026480: 745f 626c 6f63 6b28 2270 656e 6469 6e67  t_block("pending
-00026490: 2229 0a20 2020 2020 2020 2061 7373 6572  ").        asser
-000264a0: 7420 626c 6f63 6b5b 226e 756d 6265 7222  t block["number"
-000264b0: 5d20 3d3d 2063 7572 7265 6e74 5f62 6c6f  ] == current_blo
-000264c0: 636b 5f6e 756d 6265 7220 2b20 310a 0a20  ck_number + 1.. 
-000264d0: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
-000264e0: 6765 7442 6c6f 636b 4279 4e75 6d62 6572  getBlockByNumber
-000264f0: 5f65 6172 6c69 6573 7428 0a20 2020 2020  _earliest(.     
-00026500: 2020 2073 656c 662c 2077 333a 2022 5765     self, w3: "We
-00026510: 6233 222c 2065 6d70 7479 5f62 6c6f 636b  b3", empty_block
-00026520: 3a20 426c 6f63 6b44 6174 610a 2020 2020  : BlockData.    
-00026530: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-00026540: 2020 2067 656e 6573 6973 5f62 6c6f 636b     genesis_block
-00026550: 203d 2077 332e 6574 682e 6765 745f 626c   = w3.eth.get_bl
-00026560: 6f63 6b28 426c 6f63 6b4e 756d 6265 7228  ock(BlockNumber(
-00026570: 3029 290a 2020 2020 2020 2020 626c 6f63  0)).        bloc
-00026580: 6b20 3d20 7733 2e65 7468 2e67 6574 5f62  k = w3.eth.get_b
-00026590: 6c6f 636b 2822 6561 726c 6965 7374 2229  lock("earliest")
-000265a0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-000265b0: 626c 6f63 6b5b 226e 756d 6265 7222 5d20  block["number"] 
-000265c0: 3d3d 2030 0a20 2020 2020 2020 2061 7373  == 0.        ass
-000265d0: 6572 7420 626c 6f63 6b5b 2268 6173 6822  ert block["hash"
-000265e0: 5d20 3d3d 2067 656e 6573 6973 5f62 6c6f  ] == genesis_blo
-000265f0: 636b 5b22 6861 7368 225d 0a0a 2020 2020  ck["hash"]..    
-00026600: 4070 7974 6573 742e 6d61 726b 2e78 6661  @pytest.mark.xfa
-00026610: 696c 2872 6561 736f 6e3d 2249 6e74 6567  il(reason="Integ
-00026620: 7261 7469 6f6e 2074 6573 7420 7375 6974  ration test suit
-00026630: 6520 6e6f 7420 7965 7420 7365 7420 7570  e not yet set up
-00026640: 2066 6f72 2050 6f53 2229 0a20 2020 2064   for PoS").    d
-00026650: 6566 2074 6573 745f 6574 685f 6765 7442  ef test_eth_getB
-00026660: 6c6f 636b 4279 4e75 6d62 6572 5f73 6166  lockByNumber_saf
-00026670: 6528 0a20 2020 2020 2020 2073 656c 662c  e(.        self,
-00026680: 2077 333a 2022 5765 6233 222c 2065 6d70   w3: "Web3", emp
-00026690: 7479 5f62 6c6f 636b 3a20 426c 6f63 6b44  ty_block: BlockD
-000266a0: 6174 610a 2020 2020 2920 2d3e 204e 6f6e  ata.    ) -> Non
-000266b0: 653a 0a20 2020 2020 2020 2062 6c6f 636b  e:.        block
-000266c0: 203d 2077 332e 6574 682e 6765 745f 626c   = w3.eth.get_bl
-000266d0: 6f63 6b28 2273 6166 6522 290a 2020 2020  ock("safe").    
-000266e0: 2020 2020 6173 7365 7274 2062 6c6f 636b      assert block
-000266f0: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
-00026700: 2020 2020 2061 7373 6572 7420 6973 696e       assert isin
-00026710: 7374 616e 6365 2862 6c6f 636b 5b22 6e75  stance(block["nu
-00026720: 6d62 6572 225d 2c20 696e 7429 0a0a 2020  mber"], int)..  
-00026730: 2020 4070 7974 6573 742e 6d61 726b 2e78    @pytest.mark.x
-00026740: 6661 696c 2872 6561 736f 6e3d 2249 6e74  fail(reason="Int
-00026750: 6567 7261 7469 6f6e 2074 6573 7420 7375  egration test su
-00026760: 6974 6520 6e6f 7420 7965 7420 7365 7420  ite not yet set 
-00026770: 7570 2066 6f72 2050 6f53 2229 0a20 2020  up for PoS").   
-00026780: 2064 6566 2074 6573 745f 6574 685f 6765   def test_eth_ge
-00026790: 7442 6c6f 636b 4279 4e75 6d62 6572 5f66  tBlockByNumber_f
-000267a0: 696e 616c 697a 6564 280a 2020 2020 2020  inalized(.      
-000267b0: 2020 7365 6c66 2c20 7733 3a20 2257 6562    self, w3: "Web
-000267c0: 3322 2c20 656d 7074 795f 626c 6f63 6b3a  3", empty_block:
-000267d0: 2042 6c6f 636b 4461 7461 0a20 2020 2029   BlockData.    )
-000267e0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-000267f0: 2020 626c 6f63 6b20 3d20 7733 2e65 7468    block = w3.eth
-00026800: 2e67 6574 5f62 6c6f 636b 2822 6669 6e61  .get_block("fina
-00026810: 6c69 7a65 6422 290a 2020 2020 2020 2020  lized").        
-00026820: 6173 7365 7274 2062 6c6f 636b 2069 7320  assert block is 
-00026830: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
-00026840: 2061 7373 6572 7420 6973 696e 7374 616e   assert isinstan
-00026850: 6365 2862 6c6f 636b 5b22 6e75 6d62 6572  ce(block["number
-00026860: 225d 2c20 696e 7429 0a0a 2020 2020 6465  "], int)..    de
-00026870: 6620 7465 7374 5f65 7468 5f67 6574 426c  f test_eth_getBl
-00026880: 6f63 6b42 794e 756d 6265 725f 6675 6c6c  ockByNumber_full
-00026890: 5f74 7261 6e73 6163 7469 6f6e 7328 0a20  _transactions(. 
-000268a0: 2020 2020 2020 2073 656c 662c 2077 333a         self, w3:
-000268b0: 2022 5765 6233 222c 2062 6c6f 636b 5f77   "Web3", block_w
-000268c0: 6974 685f 7478 6e3a 2042 6c6f 636b 4461  ith_txn: BlockDa
-000268d0: 7461 0a20 2020 2029 202d 3e20 4e6f 6e65  ta.    ) -> None
-000268e0: 3a0a 2020 2020 2020 2020 626c 6f63 6b20  :.        block 
-000268f0: 3d20 7733 2e65 7468 2e67 6574 5f62 6c6f  = w3.eth.get_blo
-00026900: 636b 2862 6c6f 636b 5f77 6974 685f 7478  ck(block_with_tx
-00026910: 6e5b 226e 756d 6265 7222 5d2c 2054 7275  n["number"], Tru
-00026920: 6529 0a20 2020 2020 2020 2074 7261 6e73  e).        trans
-00026930: 6163 7469 6f6e 203d 2062 6c6f 636b 5b22  action = block["
-00026940: 7472 616e 7361 6374 696f 6e73 225d 5b30  transactions"][0
-00026950: 5d0a 2020 2020 2020 2020 6173 7365 7274  ].        assert
-00026960: 2074 7261 6e73 6163 7469 6f6e 5b22 6861   transaction["ha
-00026970: 7368 225d 203d 3d20 626c 6f63 6b5f 7769  sh"] == block_wi
-00026980: 7468 5f74 786e 5b22 7472 616e 7361 6374  th_txn["transact
-00026990: 696f 6e73 225d 5b30 5d20 2023 2074 7970  ions"][0]  # typ
-000269a0: 653a 2069 676e 6f72 650a 0a20 2020 2064  e: ignore..    d
-000269b0: 6566 2074 6573 745f 6574 685f 6765 7454  ef test_eth_getT
-000269c0: 7261 6e73 6163 7469 6f6e 4279 4861 7368  ransactionByHash
-000269d0: 2873 656c 662c 2077 333a 2022 5765 6233  (self, w3: "Web3
-000269e0: 222c 206d 696e 6564 5f74 786e 5f68 6173  ", mined_txn_has
-000269f0: 683a 2048 6578 5374 7229 202d 3e20 4e6f  h: HexStr) -> No
-00026a00: 6e65 3a0a 2020 2020 2020 2020 7472 616e  ne:.        tran
-00026a10: 7361 6374 696f 6e20 3d20 7733 2e65 7468  saction = w3.eth
-00026a20: 2e67 6574 5f74 7261 6e73 6163 7469 6f6e  .get_transaction
-00026a30: 286d 696e 6564 5f74 786e 5f68 6173 6829  (mined_txn_hash)
-00026a40: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00026a50: 6973 5f64 6963 7428 7472 616e 7361 6374  is_dict(transact
-00026a60: 696f 6e29 0a20 2020 2020 2020 2061 7373  ion).        ass
-00026a70: 6572 7420 7472 616e 7361 6374 696f 6e5b  ert transaction[
-00026a80: 2268 6173 6822 5d20 3d3d 2048 6578 4279  "hash"] == HexBy
-00026a90: 7465 7328 6d69 6e65 645f 7478 6e5f 6861  tes(mined_txn_ha
-00026aa0: 7368 290a 0a20 2020 2064 6566 2074 6573  sh)..    def tes
-00026ab0: 745f 6574 685f 6765 7454 7261 6e73 6163  t_eth_getTransac
-00026ac0: 7469 6f6e 4279 4861 7368 5f63 6f6e 7472  tionByHash_contr
-00026ad0: 6163 745f 6372 6561 7469 6f6e 280a 2020  act_creation(.  
-00026ae0: 2020 2020 2020 7365 6c66 2c20 7733 3a20        self, w3: 
-00026af0: 2257 6562 3322 2c20 6d61 7468 5f63 6f6e  "Web3", math_con
-00026b00: 7472 6163 745f 6465 706c 6f79 5f74 786e  tract_deploy_txn
-00026b10: 5f68 6173 683a 2048 6578 5374 720a 2020  _hash: HexStr.  
-00026b20: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-00026b30: 2020 2020 2074 7261 6e73 6163 7469 6f6e       transaction
-00026b40: 203d 2077 332e 6574 682e 6765 745f 7472   = w3.eth.get_tr
-00026b50: 616e 7361 6374 696f 6e28 6d61 7468 5f63  ansaction(math_c
-00026b60: 6f6e 7472 6163 745f 6465 706c 6f79 5f74  ontract_deploy_t
-00026b70: 786e 5f68 6173 6829 0a20 2020 2020 2020  xn_hash).       
-00026b80: 2061 7373 6572 7420 6973 5f64 6963 7428   assert is_dict(
-00026b90: 7472 616e 7361 6374 696f 6e29 0a20 2020  transaction).   
-00026ba0: 2020 2020 2061 7373 6572 7420 7472 616e       assert tran
-00026bb0: 7361 6374 696f 6e5b 2274 6f22 5d20 6973  saction["to"] is
-00026bc0: 204e 6f6e 652c 2066 2274 6f20 6669 656c   None, f"to fiel
-00026bd0: 6420 6973 207b 7472 616e 7361 6374 696f  d is {transactio
-00026be0: 6e5b 2774 6f27 5d21 727d 220a 0a20 2020  n['to']!r}"..   
-00026bf0: 2064 6566 2074 6573 745f 6574 685f 6765   def test_eth_ge
-00026c00: 7454 7261 6e73 6163 7469 6f6e 4279 426c  tTransactionByBl
-00026c10: 6f63 6b48 6173 6841 6e64 496e 6465 7828  ockHashAndIndex(
-00026c20: 0a20 2020 2020 2020 2073 656c 662c 2077  .        self, w
-00026c30: 333a 2022 5765 6233 222c 2062 6c6f 636b  3: "Web3", block
-00026c40: 5f77 6974 685f 7478 6e3a 2042 6c6f 636b  _with_txn: Block
-00026c50: 4461 7461 2c20 6d69 6e65 645f 7478 6e5f  Data, mined_txn_
-00026c60: 6861 7368 3a20 4865 7853 7472 0a20 2020  hash: HexStr.   
-00026c70: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-00026c80: 2020 2020 7472 616e 7361 6374 696f 6e20      transaction 
-00026c90: 3d20 7733 2e65 7468 2e67 6574 5f74 7261  = w3.eth.get_tra
-00026ca0: 6e73 6163 7469 6f6e 5f62 795f 626c 6f63  nsaction_by_bloc
-00026cb0: 6b28 626c 6f63 6b5f 7769 7468 5f74 786e  k(block_with_txn
-00026cc0: 5b22 6861 7368 225d 2c20 3029 0a20 2020  ["hash"], 0).   
-00026cd0: 2020 2020 2061 7373 6572 7420 6973 5f64       assert is_d
-00026ce0: 6963 7428 7472 616e 7361 6374 696f 6e29  ict(transaction)
-00026cf0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00026d00: 7472 616e 7361 6374 696f 6e5b 2268 6173  transaction["has
-00026d10: 6822 5d20 3d3d 2048 6578 4279 7465 7328  h"] == HexBytes(
-00026d20: 6d69 6e65 645f 7478 6e5f 6861 7368 290a  mined_txn_hash).
-00026d30: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
-00026d40: 685f 6765 7454 7261 6e73 6163 7469 6f6e  h_getTransaction
-00026d50: 4279 426c 6f63 6b4e 756d 6265 7241 6e64  ByBlockNumberAnd
-00026d60: 496e 6465 7828 0a20 2020 2020 2020 2073  Index(.        s
-00026d70: 656c 662c 2077 333a 2022 5765 6233 222c  elf, w3: "Web3",
-00026d80: 2062 6c6f 636b 5f77 6974 685f 7478 6e3a   block_with_txn:
-00026d90: 2042 6c6f 636b 4461 7461 2c20 6d69 6e65   BlockData, mine
-00026da0: 645f 7478 6e5f 6861 7368 3a20 4865 7853  d_txn_hash: HexS
-00026db0: 7472 0a20 2020 2029 202d 3e20 4e6f 6e65  tr.    ) -> None
-00026dc0: 3a0a 2020 2020 2020 2020 7472 616e 7361  :.        transa
-00026dd0: 6374 696f 6e20 3d20 7733 2e65 7468 2e67  ction = w3.eth.g
-00026de0: 6574 5f74 7261 6e73 6163 7469 6f6e 5f62  et_transaction_b
-00026df0: 795f 626c 6f63 6b28 626c 6f63 6b5f 7769  y_block(block_wi
-00026e00: 7468 5f74 786e 5b22 6e75 6d62 6572 225d  th_txn["number"]
-00026e10: 2c20 3029 0a20 2020 2020 2020 2061 7373  , 0).        ass
-00026e20: 6572 7420 6973 5f64 6963 7428 7472 616e  ert is_dict(tran
-00026e30: 7361 6374 696f 6e29 0a20 2020 2020 2020  saction).       
-00026e40: 2061 7373 6572 7420 7472 616e 7361 6374   assert transact
-00026e50: 696f 6e5b 2268 6173 6822 5d20 3d3d 2048  ion["hash"] == H
-00026e60: 6578 4279 7465 7328 6d69 6e65 645f 7478  exBytes(mined_tx
-00026e70: 6e5f 6861 7368 290a 0a20 2020 2064 6566  n_hash)..    def
-00026e80: 2074 6573 745f 6574 685f 6765 745f 7472   test_eth_get_tr
-00026e90: 616e 7361 6374 696f 6e5f 7265 6365 6970  ansaction_receip
-00026ea0: 745f 6d69 6e65 6428 0a20 2020 2020 2020  t_mined(.       
-00026eb0: 2073 656c 662c 2077 333a 2022 5765 6233   self, w3: "Web3
-00026ec0: 222c 2062 6c6f 636b 5f77 6974 685f 7478  ", block_with_tx
-00026ed0: 6e3a 2042 6c6f 636b 4461 7461 2c20 6d69  n: BlockData, mi
-00026ee0: 6e65 645f 7478 6e5f 6861 7368 3a20 4865  ned_txn_hash: He
-00026ef0: 7853 7472 0a20 2020 2029 202d 3e20 4e6f  xStr.    ) -> No
-00026f00: 6e65 3a0a 2020 2020 2020 2020 7265 6365  ne:.        rece
-00026f10: 6970 7420 3d20 7733 2e65 7468 2e67 6574  ipt = w3.eth.get
-00026f20: 5f74 7261 6e73 6163 7469 6f6e 5f72 6563  _transaction_rec
-00026f30: 6569 7074 286d 696e 6564 5f74 786e 5f68  eipt(mined_txn_h
-00026f40: 6173 6829 0a20 2020 2020 2020 2061 7373  ash).        ass
-00026f50: 6572 7420 6973 5f64 6963 7428 7265 6365  ert is_dict(rece
-00026f60: 6970 7429 0a20 2020 2020 2020 2061 7373  ipt).        ass
-00026f70: 6572 7420 7265 6365 6970 745b 2262 6c6f  ert receipt["blo
-00026f80: 636b 4e75 6d62 6572 225d 203d 3d20 626c  ckNumber"] == bl
-00026f90: 6f63 6b5f 7769 7468 5f74 786e 5b22 6e75  ock_with_txn["nu
-00026fa0: 6d62 6572 225d 0a20 2020 2020 2020 2061  mber"].        a
-00026fb0: 7373 6572 7420 7265 6365 6970 745b 2262  ssert receipt["b
-00026fc0: 6c6f 636b 4861 7368 225d 203d 3d20 626c  lockHash"] == bl
-00026fd0: 6f63 6b5f 7769 7468 5f74 786e 5b22 6861  ock_with_txn["ha
-00026fe0: 7368 225d 0a20 2020 2020 2020 2061 7373  sh"].        ass
-00026ff0: 6572 7420 7265 6365 6970 745b 2274 7261  ert receipt["tra
-00027000: 6e73 6163 7469 6f6e 496e 6465 7822 5d20  nsactionIndex"] 
-00027010: 3d3d 2030 0a20 2020 2020 2020 2061 7373  == 0.        ass
-00027020: 6572 7420 7265 6365 6970 745b 2274 7261  ert receipt["tra
-00027030: 6e73 6163 7469 6f6e 4861 7368 225d 203d  nsactionHash"] =
-00027040: 3d20 4865 7842 7974 6573 286d 696e 6564  = HexBytes(mined
-00027050: 5f74 786e 5f68 6173 6829 0a20 2020 2020  _txn_hash).     
-00027060: 2020 2061 7373 6572 7420 6973 5f63 6865     assert is_che
-00027070: 636b 7375 6d5f 6164 6472 6573 7328 7265  cksum_address(re
-00027080: 6365 6970 745b 2274 6f22 5d29 0a20 2020  ceipt["to"]).   
-00027090: 2020 2020 2061 7373 6572 7420 7265 6365       assert rece
-000270a0: 6970 745b 2266 726f 6d22 5d20 6973 206e  ipt["from"] is n
-000270b0: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
-000270c0: 6173 7365 7274 2069 735f 6368 6563 6b73  assert is_checks
-000270d0: 756d 5f61 6464 7265 7373 2872 6563 6569  um_address(recei
-000270e0: 7074 5b22 6672 6f6d 225d 290a 0a20 2020  pt["from"])..   
-000270f0: 2020 2020 2065 6666 6563 7469 7665 5f67       effective_g
-00027100: 6173 5f70 7269 6365 203d 2072 6563 6569  as_price = recei
-00027110: 7074 5b22 6566 6665 6374 6976 6547 6173  pt["effectiveGas
-00027120: 5072 6963 6522 5d0a 2020 2020 2020 2020  Price"].        
-00027130: 6173 7365 7274 2069 7369 6e73 7461 6e63  assert isinstanc
-00027140: 6528 6566 6665 6374 6976 655f 6761 735f  e(effective_gas_
-00027150: 7072 6963 652c 2069 6e74 290a 2020 2020  price, int).    
-00027160: 2020 2020 6173 7365 7274 2065 6666 6563      assert effec
-00027170: 7469 7665 5f67 6173 5f70 7269 6365 203e  tive_gas_price >
-00027180: 2030 0a0a 2020 2020 6465 6620 7465 7374   0..    def test
-00027190: 5f65 7468 5f67 6574 5f74 7261 6e73 6163  _eth_get_transac
-000271a0: 7469 6f6e 5f72 6563 6569 7074 5f75 6e6d  tion_receipt_unm
-000271b0: 696e 6564 280a 2020 2020 2020 2020 7365  ined(.        se
-000271c0: 6c66 2c20 7733 3a20 2257 6562 3322 2c20  lf, w3: "Web3", 
-000271d0: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-000271e0: 5f64 7561 6c5f 7479 7065 3a20 4368 6563  _dual_type: Chec
-000271f0: 6b73 756d 4164 6472 6573 730a 2020 2020  ksumAddress.    
-00027200: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-00027210: 2020 2074 786e 5f68 6173 6820 3d20 7733     txn_hash = w3
-00027220: 2e65 7468 2e73 656e 645f 7472 616e 7361  .eth.send_transa
-00027230: 6374 696f 6e28 0a20 2020 2020 2020 2020  ction(.         
-00027240: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-00027250: 2020 2020 2022 6672 6f6d 223a 2075 6e6c       "from": unl
-00027260: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
-00027270: 616c 5f74 7970 652c 0a20 2020 2020 2020  al_type,.       
-00027280: 2020 2020 2020 2020 2022 746f 223a 2075           "to": u
-00027290: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
-000272a0: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
-000272b0: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
-000272c0: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
-000272d0: 2020 2020 2020 2020 2020 2020 2267 6173              "gas
-000272e0: 223a 2032 3130 3030 2c0a 2020 2020 2020  ": 21000,.      
-000272f0: 2020 2020 2020 2020 2020 226d 6178 4665            "maxFe
-00027300: 6550 6572 4761 7322 3a20 7733 2e74 6f5f  ePerGas": w3.to_
-00027310: 7765 6928 332c 2022 6777 6569 2229 2c0a  wei(3, "gwei"),.
-00027320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027330: 226d 6178 5072 696f 7269 7479 4665 6550  "maxPriorityFeeP
-00027340: 6572 4761 7322 3a20 7733 2e74 6f5f 7765  erGas": w3.to_we
-00027350: 6928 312c 2022 6777 6569 2229 2c0a 2020  i(1, "gwei"),.  
-00027360: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-00027370: 2020 2020 290a 2020 2020 2020 2020 7769      ).        wi
-00027380: 7468 2070 7974 6573 742e 7261 6973 6573  th pytest.raises
-00027390: 2854 7261 6e73 6163 7469 6f6e 4e6f 7446  (TransactionNotF
-000273a0: 6f75 6e64 293a 0a20 2020 2020 2020 2020  ound):.         
-000273b0: 2020 2077 332e 6574 682e 6765 745f 7472     w3.eth.get_tr
-000273c0: 616e 7361 6374 696f 6e5f 7265 6365 6970  ansaction_receip
-000273d0: 7428 7478 6e5f 6861 7368 290a 0a20 2020  t(txn_hash)..   
-000273e0: 2064 6566 2074 6573 745f 6574 685f 6765   def test_eth_ge
-000273f0: 745f 7472 616e 7361 6374 696f 6e5f 7265  t_transaction_re
-00027400: 6365 6970 745f 7769 7468 5f6c 6f67 5f65  ceipt_with_log_e
-00027410: 6e74 7279 280a 2020 2020 2020 2020 7365  ntry(.        se
-00027420: 6c66 2c0a 2020 2020 2020 2020 7733 3a20  lf,.        w3: 
-00027430: 2257 6562 3322 2c0a 2020 2020 2020 2020  "Web3",.        
-00027440: 626c 6f63 6b5f 7769 7468 5f74 786e 5f77  block_with_txn_w
-00027450: 6974 685f 6c6f 673a 2042 6c6f 636b 4461  ith_log: BlockDa
-00027460: 7461 2c0a 2020 2020 2020 2020 656d 6974  ta,.        emit
-00027470: 7465 725f 636f 6e74 7261 6374 3a20 2243  ter_contract: "C
-00027480: 6f6e 7472 6163 7422 2c0a 2020 2020 2020  ontract",.      
-00027490: 2020 7478 6e5f 6861 7368 5f77 6974 685f    txn_hash_with_
-000274a0: 6c6f 673a 2048 6578 5374 722c 0a20 2020  log: HexStr,.   
-000274b0: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-000274c0: 2020 2020 7265 6365 6970 7420 3d20 7733      receipt = w3
-000274d0: 2e65 7468 2e67 6574 5f74 7261 6e73 6163  .eth.get_transac
-000274e0: 7469 6f6e 5f72 6563 6569 7074 2874 786e  tion_receipt(txn
-000274f0: 5f68 6173 685f 7769 7468 5f6c 6f67 290a  _hash_with_log).
-00027500: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-00027510: 735f 6469 6374 2872 6563 6569 7074 290a  s_dict(receipt).
-00027520: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
-00027530: 6563 6569 7074 5b22 626c 6f63 6b4e 756d  eceipt["blockNum
-00027540: 6265 7222 5d20 3d3d 2062 6c6f 636b 5f77  ber"] == block_w
-00027550: 6974 685f 7478 6e5f 7769 7468 5f6c 6f67  ith_txn_with_log
-00027560: 5b22 6e75 6d62 6572 225d 0a20 2020 2020  ["number"].     
-00027570: 2020 2061 7373 6572 7420 7265 6365 6970     assert receip
-00027580: 745b 2262 6c6f 636b 4861 7368 225d 203d  t["blockHash"] =
-00027590: 3d20 626c 6f63 6b5f 7769 7468 5f74 786e  = block_with_txn
-000275a0: 5f77 6974 685f 6c6f 675b 2268 6173 6822  _with_log["hash"
-000275b0: 5d0a 2020 2020 2020 2020 6173 7365 7274  ].        assert
-000275c0: 2072 6563 6569 7074 5b22 7472 616e 7361   receipt["transa
-000275d0: 6374 696f 6e49 6e64 6578 225d 203d 3d20  ctionIndex"] == 
-000275e0: 300a 2020 2020 2020 2020 6173 7365 7274  0.        assert
-000275f0: 2072 6563 6569 7074 5b22 7472 616e 7361   receipt["transa
-00027600: 6374 696f 6e48 6173 6822 5d20 3d3d 2048  ctionHash"] == H
-00027610: 6578 4279 7465 7328 7478 6e5f 6861 7368  exBytes(txn_hash
-00027620: 5f77 6974 685f 6c6f 6729 0a0a 2020 2020  _with_log)..    
-00027630: 2020 2020 6173 7365 7274 206c 656e 2872      assert len(r
-00027640: 6563 6569 7074 5b22 6c6f 6773 225d 2920  eceipt["logs"]) 
-00027650: 3d3d 2031 0a20 2020 2020 2020 206c 6f67  == 1.        log
-00027660: 5f65 6e74 7279 203d 2072 6563 6569 7074  _entry = receipt
-00027670: 5b22 6c6f 6773 225d 5b30 5d0a 0a20 2020  ["logs"][0]..   
-00027680: 2020 2020 2061 7373 6572 7420 6c6f 675f       assert log_
-00027690: 656e 7472 795b 2262 6c6f 636b 4e75 6d62  entry["blockNumb
-000276a0: 6572 225d 203d 3d20 626c 6f63 6b5f 7769  er"] == block_wi
-000276b0: 7468 5f74 786e 5f77 6974 685f 6c6f 675b  th_txn_with_log[
-000276c0: 226e 756d 6265 7222 5d0a 2020 2020 2020  "number"].      
-000276d0: 2020 6173 7365 7274 206c 6f67 5f65 6e74    assert log_ent
-000276e0: 7279 5b22 626c 6f63 6b48 6173 6822 5d20  ry["blockHash"] 
-000276f0: 3d3d 2062 6c6f 636b 5f77 6974 685f 7478  == block_with_tx
-00027700: 6e5f 7769 7468 5f6c 6f67 5b22 6861 7368  n_with_log["hash
-00027710: 225d 0a20 2020 2020 2020 2061 7373 6572  "].        asser
-00027720: 7420 6c6f 675f 656e 7472 795b 226c 6f67  t log_entry["log
-00027730: 496e 6465 7822 5d20 3d3d 2030 0a20 2020  Index"] == 0.   
-00027740: 2020 2020 2061 7373 6572 7420 6973 5f73       assert is_s
-00027750: 616d 655f 6164 6472 6573 7328 6c6f 675f  ame_address(log_
-00027760: 656e 7472 795b 2261 6464 7265 7373 225d  entry["address"]
-00027770: 2c20 656d 6974 7465 725f 636f 6e74 7261  , emitter_contra
-00027780: 6374 2e61 6464 7265 7373 290a 2020 2020  ct.address).    
-00027790: 2020 2020 6173 7365 7274 206c 6f67 5f65      assert log_e
-000277a0: 6e74 7279 5b22 7472 616e 7361 6374 696f  ntry["transactio
-000277b0: 6e49 6e64 6578 225d 203d 3d20 300a 2020  nIndex"] == 0.  
-000277c0: 2020 2020 2020 6173 7365 7274 206c 6f67        assert log
-000277d0: 5f65 6e74 7279 5b22 7472 616e 7361 6374  _entry["transact
-000277e0: 696f 6e48 6173 6822 5d20 3d3d 2048 6578  ionHash"] == Hex
-000277f0: 4279 7465 7328 7478 6e5f 6861 7368 5f77  Bytes(txn_hash_w
-00027800: 6974 685f 6c6f 6729 0a0a 2020 2020 6465  ith_log)..    de
-00027810: 6620 7465 7374 5f65 7468 5f77 6169 745f  f test_eth_wait_
-00027820: 666f 725f 7472 616e 7361 6374 696f 6e5f  for_transaction_
-00027830: 7265 6365 6970 745f 6d69 6e65 6428 0a20  receipt_mined(. 
-00027840: 2020 2020 2020 2073 656c 662c 2077 333a         self, w3:
-00027850: 2022 5765 6233 222c 2062 6c6f 636b 5f77   "Web3", block_w
-00027860: 6974 685f 7478 6e3a 2042 6c6f 636b 4461  ith_txn: BlockDa
-00027870: 7461 2c20 6d69 6e65 645f 7478 6e5f 6861  ta, mined_txn_ha
-00027880: 7368 3a20 4865 7853 7472 0a20 2020 2029  sh: HexStr.    )
-00027890: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-000278a0: 2020 7265 6365 6970 7420 3d20 7733 2e65    receipt = w3.e
-000278b0: 7468 2e77 6169 745f 666f 725f 7472 616e  th.wait_for_tran
-000278c0: 7361 6374 696f 6e5f 7265 6365 6970 7428  saction_receipt(
-000278d0: 6d69 6e65 645f 7478 6e5f 6861 7368 290a  mined_txn_hash).
-000278e0: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-000278f0: 735f 6469 6374 2872 6563 6569 7074 290a  s_dict(receipt).
-00027900: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
-00027910: 6563 6569 7074 5b22 626c 6f63 6b4e 756d  eceipt["blockNum
-00027920: 6265 7222 5d20 3d3d 2062 6c6f 636b 5f77  ber"] == block_w
-00027930: 6974 685f 7478 6e5b 226e 756d 6265 7222  ith_txn["number"
-00027940: 5d0a 2020 2020 2020 2020 6173 7365 7274  ].        assert
-00027950: 2072 6563 6569 7074 5b22 626c 6f63 6b48   receipt["blockH
-00027960: 6173 6822 5d20 3d3d 2062 6c6f 636b 5f77  ash"] == block_w
-00027970: 6974 685f 7478 6e5b 2268 6173 6822 5d0a  ith_txn["hash"].
-00027980: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
-00027990: 6563 6569 7074 5b22 7472 616e 7361 6374  eceipt["transact
-000279a0: 696f 6e49 6e64 6578 225d 203d 3d20 300a  ionIndex"] == 0.
-000279b0: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
-000279c0: 6563 6569 7074 5b22 7472 616e 7361 6374  eceipt["transact
-000279d0: 696f 6e48 6173 6822 5d20 3d3d 2048 6578  ionHash"] == Hex
-000279e0: 4279 7465 7328 6d69 6e65 645f 7478 6e5f  Bytes(mined_txn_
-000279f0: 6861 7368 290a 2020 2020 2020 2020 6173  hash).        as
-00027a00: 7365 7274 2069 735f 6368 6563 6b73 756d  sert is_checksum
-00027a10: 5f61 6464 7265 7373 2872 6563 6569 7074  _address(receipt
-00027a20: 5b22 746f 225d 290a 2020 2020 2020 2020  ["to"]).        
-00027a30: 6173 7365 7274 2072 6563 6569 7074 5b22  assert receipt["
-00027a40: 6672 6f6d 225d 2069 7320 6e6f 7420 4e6f  from"] is not No
-00027a50: 6e65 0a20 2020 2020 2020 2061 7373 6572  ne.        asser
-00027a60: 7420 6973 5f63 6865 636b 7375 6d5f 6164  t is_checksum_ad
-00027a70: 6472 6573 7328 7265 6365 6970 745b 2266  dress(receipt["f
-00027a80: 726f 6d22 5d29 0a0a 2020 2020 2020 2020  rom"])..        
-00027a90: 6566 6665 6374 6976 655f 6761 735f 7072  effective_gas_pr
-00027aa0: 6963 6520 3d20 7265 6365 6970 745b 2265  ice = receipt["e
-00027ab0: 6666 6563 7469 7665 4761 7350 7269 6365  ffectiveGasPrice
-00027ac0: 225d 0a20 2020 2020 2020 2061 7373 6572  "].        asser
-00027ad0: 7420 6973 696e 7374 616e 6365 2865 6666  t isinstance(eff
-00027ae0: 6563 7469 7665 5f67 6173 5f70 7269 6365  ective_gas_price
-00027af0: 2c20 696e 7429 0a20 2020 2020 2020 2061  , int).        a
-00027b00: 7373 6572 7420 6566 6665 6374 6976 655f  ssert effective_
-00027b10: 6761 735f 7072 6963 6520 3e20 300a 0a20  gas_price > 0.. 
-00027b20: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
-00027b30: 7761 6974 5f66 6f72 5f74 7261 6e73 6163  wait_for_transac
-00027b40: 7469 6f6e 5f72 6563 6569 7074 5f75 6e6d  tion_receipt_unm
-00027b50: 696e 6564 280a 2020 2020 2020 2020 7365  ined(.        se
-00027b60: 6c66 2c20 7733 3a20 2257 6562 3322 2c20  lf, w3: "Web3", 
-00027b70: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
-00027b80: 5f64 7561 6c5f 7479 7065 3a20 4368 6563  _dual_type: Chec
-00027b90: 6b73 756d 4164 6472 6573 730a 2020 2020  ksumAddress.    
-00027ba0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-00027bb0: 2020 2074 786e 5f68 6173 6820 3d20 7733     txn_hash = w3
-00027bc0: 2e65 7468 2e73 656e 645f 7472 616e 7361  .eth.send_transa
-00027bd0: 6374 696f 6e28 0a20 2020 2020 2020 2020  ction(.         
-00027be0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-00027bf0: 2020 2020 2022 6672 6f6d 223a 2075 6e6c       "from": unl
-00027c00: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
-00027c10: 616c 5f74 7970 652c 0a20 2020 2020 2020  al_type,.       
-00027c20: 2020 2020 2020 2020 2022 746f 223a 2075           "to": u
-00027c30: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
-00027c40: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
-00027c50: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
-00027c60: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
-00027c70: 2020 2020 2020 2020 2020 2020 2267 6173              "gas
-00027c80: 223a 2032 3130 3030 2c0a 2020 2020 2020  ": 21000,.      
-00027c90: 2020 2020 2020 2020 2020 226d 6178 4665            "maxFe
-00027ca0: 6550 6572 4761 7322 3a20 7733 2e74 6f5f  ePerGas": w3.to_
-00027cb0: 7765 6928 332c 2022 6777 6569 2229 2c0a  wei(3, "gwei"),.
-00027cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027cd0: 226d 6178 5072 696f 7269 7479 4665 6550  "maxPriorityFeeP
-00027ce0: 6572 4761 7322 3a20 7733 2e74 6f5f 7765  erGas": w3.to_we
-00027cf0: 6928 312c 2022 6777 6569 2229 2c0a 2020  i(1, "gwei"),.  
-00027d00: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-00027d10: 2020 2020 290a 0a20 2020 2020 2020 2074      )..        t
-00027d20: 696d 656f 7574 203d 2032 0a20 2020 2020  imeout = 2.     
-00027d30: 2020 2077 6974 6820 7079 7465 7374 2e72     with pytest.r
-00027d40: 6169 7365 7328 5469 6d65 4578 6861 7573  aises(TimeExhaus
-00027d50: 7465 6429 2061 7320 6578 635f 696e 666f  ted) as exc_info
-00027d60: 3a0a 2020 2020 2020 2020 2020 2020 7733  :.            w3
-00027d70: 2e65 7468 2e77 6169 745f 666f 725f 7472  .eth.wait_for_tr
-00027d80: 616e 7361 6374 696f 6e5f 7265 6365 6970  ansaction_receip
-00027d90: 7428 7478 6e5f 6861 7368 2c20 7469 6d65  t(txn_hash, time
-00027da0: 6f75 743d 7469 6d65 6f75 7429 0a0a 2020  out=timeout)..  
-00027db0: 2020 2020 2020 6173 7365 7274 2028 5f20        assert (_ 
-00027dc0: 696e 2073 7472 2865 7863 5f69 6e66 6f29  in str(exc_info)
-00027dd0: 2066 6f72 205f 2069 6e20 5b72 6570 7228   for _ in [repr(
-00027de0: 7478 6e5f 6861 7368 292c 2074 696d 656f  txn_hash), timeo
-00027df0: 7574 5d29 0a0a 2020 2020 6465 6620 7465  ut])..    def te
-00027e00: 7374 5f65 7468 5f77 6169 745f 666f 725f  st_eth_wait_for_
-00027e10: 7472 616e 7361 6374 696f 6e5f 7265 6365  transaction_rece
-00027e20: 6970 745f 7769 7468 5f6c 6f67 5f65 6e74  ipt_with_log_ent
-00027e30: 7279 280a 2020 2020 2020 2020 7365 6c66  ry(.        self
-00027e40: 2c0a 2020 2020 2020 2020 7733 3a20 2257  ,.        w3: "W
-00027e50: 6562 3322 2c0a 2020 2020 2020 2020 626c  eb3",.        bl
-00027e60: 6f63 6b5f 7769 7468 5f74 786e 5f77 6974  ock_with_txn_wit
-00027e70: 685f 6c6f 673a 2042 6c6f 636b 4461 7461  h_log: BlockData
-00027e80: 2c0a 2020 2020 2020 2020 656d 6974 7465  ,.        emitte
-00027e90: 725f 636f 6e74 7261 6374 3a20 2243 6f6e  r_contract: "Con
-00027ea0: 7472 6163 7422 2c0a 2020 2020 2020 2020  tract",.        
-00027eb0: 7478 6e5f 6861 7368 5f77 6974 685f 6c6f  txn_hash_with_lo
-00027ec0: 673a 2048 6578 5374 722c 0a20 2020 2029  g: HexStr,.    )
-00027ed0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-00027ee0: 2020 7265 6365 6970 7420 3d20 7733 2e65    receipt = w3.e
-00027ef0: 7468 2e77 6169 745f 666f 725f 7472 616e  th.wait_for_tran
-00027f00: 7361 6374 696f 6e5f 7265 6365 6970 7428  saction_receipt(
-00027f10: 7478 6e5f 6861 7368 5f77 6974 685f 6c6f  txn_hash_with_lo
-00027f20: 6729 0a20 2020 2020 2020 2061 7373 6572  g).        asser
-00027f30: 7420 6973 5f64 6963 7428 7265 6365 6970  t is_dict(receip
-00027f40: 7429 0a20 2020 2020 2020 2061 7373 6572  t).        asser
-00027f50: 7420 7265 6365 6970 745b 2262 6c6f 636b  t receipt["block
-00027f60: 4e75 6d62 6572 225d 203d 3d20 626c 6f63  Number"] == bloc
-00027f70: 6b5f 7769 7468 5f74 786e 5f77 6974 685f  k_with_txn_with_
-00027f80: 6c6f 675b 226e 756d 6265 7222 5d0a 2020  log["number"].  
-00027f90: 2020 2020 2020 6173 7365 7274 2072 6563        assert rec
-00027fa0: 6569 7074 5b22 626c 6f63 6b48 6173 6822  eipt["blockHash"
-00027fb0: 5d20 3d3d 2062 6c6f 636b 5f77 6974 685f  ] == block_with_
-00027fc0: 7478 6e5f 7769 7468 5f6c 6f67 5b22 6861  txn_with_log["ha
-00027fd0: 7368 225d 0a20 2020 2020 2020 2061 7373  sh"].        ass
-00027fe0: 6572 7420 7265 6365 6970 745b 2274 7261  ert receipt["tra
-00027ff0: 6e73 6163 7469 6f6e 496e 6465 7822 5d20  nsactionIndex"] 
-00028000: 3d3d 2030 0a20 2020 2020 2020 2061 7373  == 0.        ass
-00028010: 6572 7420 7265 6365 6970 745b 2274 7261  ert receipt["tra
-00028020: 6e73 6163 7469 6f6e 4861 7368 225d 203d  nsactionHash"] =
-00028030: 3d20 4865 7842 7974 6573 2874 786e 5f68  = HexBytes(txn_h
-00028040: 6173 685f 7769 7468 5f6c 6f67 290a 0a20  ash_with_log).. 
-00028050: 2020 2020 2020 2061 7373 6572 7420 6c65         assert le
-00028060: 6e28 7265 6365 6970 745b 226c 6f67 7322  n(receipt["logs"
-00028070: 5d29 203d 3d20 310a 2020 2020 2020 2020  ]) == 1.        
-00028080: 6c6f 675f 656e 7472 7920 3d20 7265 6365  log_entry = rece
-00028090: 6970 745b 226c 6f67 7322 5d5b 305d 0a0a  ipt["logs"][0]..
-000280a0: 2020 2020 2020 2020 6173 7365 7274 206c          assert l
-000280b0: 6f67 5f65 6e74 7279 5b22 626c 6f63 6b4e  og_entry["blockN
-000280c0: 756d 6265 7222 5d20 3d3d 2062 6c6f 636b  umber"] == block
-000280d0: 5f77 6974 685f 7478 6e5f 7769 7468 5f6c  _with_txn_with_l
-000280e0: 6f67 5b22 6e75 6d62 6572 225d 0a20 2020  og["number"].   
-000280f0: 2020 2020 2061 7373 6572 7420 6c6f 675f       assert log_
-00028100: 656e 7472 795b 2262 6c6f 636b 4861 7368  entry["blockHash
-00028110: 225d 203d 3d20 626c 6f63 6b5f 7769 7468  "] == block_with
-00028120: 5f74 786e 5f77 6974 685f 6c6f 675b 2268  _txn_with_log["h
-00028130: 6173 6822 5d0a 2020 2020 2020 2020 6173  ash"].        as
-00028140: 7365 7274 206c 6f67 5f65 6e74 7279 5b22  sert log_entry["
-00028150: 6c6f 6749 6e64 6578 225d 203d 3d20 300a  logIndex"] == 0.
-00028160: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-00028170: 735f 7361 6d65 5f61 6464 7265 7373 286c  s_same_address(l
-00028180: 6f67 5f65 6e74 7279 5b22 6164 6472 6573  og_entry["addres
-00028190: 7322 5d2c 2065 6d69 7474 6572 5f63 6f6e  s"], emitter_con
-000281a0: 7472 6163 742e 6164 6472 6573 7329 0a20  tract.address). 
-000281b0: 2020 2020 2020 2061 7373 6572 7420 6c6f         assert lo
-000281c0: 675f 656e 7472 795b 2274 7261 6e73 6163  g_entry["transac
-000281d0: 7469 6f6e 496e 6465 7822 5d20 3d3d 2030  tionIndex"] == 0
-000281e0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-000281f0: 6c6f 675f 656e 7472 795b 2274 7261 6e73  log_entry["trans
-00028200: 6163 7469 6f6e 4861 7368 225d 203d 3d20  actionHash"] == 
-00028210: 4865 7842 7974 6573 2874 786e 5f68 6173  HexBytes(txn_has
-00028220: 685f 7769 7468 5f6c 6f67 290a 0a20 2020  h_with_log)..   
-00028230: 2064 6566 2074 6573 745f 6574 685f 6765   def test_eth_ge
-00028240: 7455 6e63 6c65 4279 426c 6f63 6b48 6173  tUncleByBlockHas
-00028250: 6841 6e64 496e 6465 7828 7365 6c66 2c20  hAndIndex(self, 
-00028260: 7733 3a20 2257 6562 3322 2920 2d3e 204e  w3: "Web3") -> N
-00028270: 6f6e 653a 0a20 2020 2020 2020 2023 2054  one:.        # T
-00028280: 4f44 4f3a 2068 6f77 2064 6f20 7765 206d  ODO: how do we m
-00028290: 616b 6520 756e 636c 6573 2e2e 2e2e 0a20  ake uncles..... 
-000282a0: 2020 2020 2020 2070 6173 730a 0a20 2020         pass..   
-000282b0: 2064 6566 2074 6573 745f 6574 685f 6765   def test_eth_ge
-000282c0: 7455 6e63 6c65 4279 426c 6f63 6b4e 756d  tUncleByBlockNum
-000282d0: 6265 7241 6e64 496e 6465 7828 7365 6c66  berAndIndex(self
-000282e0: 2c20 7733 3a20 2257 6562 3322 2920 2d3e  , w3: "Web3") ->
-000282f0: 204e 6f6e 653a 0a20 2020 2020 2020 2023   None:.        #
-00028300: 2054 4f44 4f3a 2068 6f77 2064 6f20 7765   TODO: how do we
-00028310: 206d 616b 6520 756e 636c 6573 2e2e 2e2e   make uncles....
-00028320: 0a20 2020 2020 2020 2070 6173 730a 0a20  .        pass.. 
-00028330: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
-00028340: 6e65 775f 6669 6c74 6572 2873 656c 662c  new_filter(self,
-00028350: 2077 333a 2022 5765 6233 2229 202d 3e20   w3: "Web3") -> 
-00028360: 4e6f 6e65 3a0a 2020 2020 2020 2020 6669  None:.        fi
-00028370: 6c74 6572 203d 2077 332e 6574 682e 6669  lter = w3.eth.fi
-00028380: 6c74 6572 287b 7d29 0a0a 2020 2020 2020  lter({})..      
-00028390: 2020 6368 616e 6765 7320 3d20 7733 2e65    changes = w3.e
-000283a0: 7468 2e67 6574 5f66 696c 7465 725f 6368  th.get_filter_ch
-000283b0: 616e 6765 7328 6669 6c74 6572 2e66 696c  anges(filter.fil
-000283c0: 7465 725f 6964 290a 2020 2020 2020 2020  ter_id).        
-000283d0: 6173 7365 7274 2069 735f 6c69 7374 5f6c  assert is_list_l
-000283e0: 696b 6528 6368 616e 6765 7329 0a20 2020  ike(changes).   
-000283f0: 2020 2020 2061 7373 6572 7420 6e6f 7420       assert not 
-00028400: 6368 616e 6765 730a 0a20 2020 2020 2020  changes..       
-00028410: 206c 6f67 7320 3d20 7733 2e65 7468 2e67   logs = w3.eth.g
-00028420: 6574 5f66 696c 7465 725f 6c6f 6773 2866  et_filter_logs(f
-00028430: 696c 7465 722e 6669 6c74 6572 5f69 6429  ilter.filter_id)
-00028440: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00028450: 6973 5f6c 6973 745f 6c69 6b65 286c 6f67  is_list_like(log
-00028460: 7329 0a20 2020 2020 2020 2061 7373 6572  s).        asser
-00028470: 7420 6e6f 7420 6c6f 6773 0a0a 2020 2020  t not logs..    
-00028480: 2020 2020 7265 7375 6c74 203d 2077 332e      result = w3.
-00028490: 6574 682e 756e 696e 7374 616c 6c5f 6669  eth.uninstall_fi
-000284a0: 6c74 6572 2866 696c 7465 722e 6669 6c74  lter(filter.filt
-000284b0: 6572 5f69 6429 0a20 2020 2020 2020 2061  er_id).        a
-000284c0: 7373 6572 7420 7265 7375 6c74 2069 7320  ssert result is 
-000284d0: 5472 7565 0a0a 2020 2020 6465 6620 7465  True..    def te
-000284e0: 7374 5f65 7468 5f6e 6577 5f62 6c6f 636b  st_eth_new_block
-000284f0: 5f66 696c 7465 7228 7365 6c66 2c20 7733  _filter(self, w3
-00028500: 3a20 2257 6562 3322 2920 2d3e 204e 6f6e  : "Web3") -> Non
-00028510: 653a 0a20 2020 2020 2020 2066 696c 7465  e:.        filte
-00028520: 7220 3d20 7733 2e65 7468 2e66 696c 7465  r = w3.eth.filte
-00028530: 7228 226c 6174 6573 7422 290a 2020 2020  r("latest").    
-00028540: 2020 2020 6173 7365 7274 2069 735f 7374      assert is_st
-00028550: 7269 6e67 2866 696c 7465 722e 6669 6c74  ring(filter.filt
-00028560: 6572 5f69 6429 0a0a 2020 2020 2020 2020  er_id)..        
-00028570: 6368 616e 6765 7320 3d20 7733 2e65 7468  changes = w3.eth
-00028580: 2e67 6574 5f66 696c 7465 725f 6368 616e  .get_filter_chan
-00028590: 6765 7328 6669 6c74 6572 2e66 696c 7465  ges(filter.filte
-000285a0: 725f 6964 290a 2020 2020 2020 2020 6173  r_id).        as
-000285b0: 7365 7274 2069 735f 6c69 7374 5f6c 696b  sert is_list_lik
-000285c0: 6528 6368 616e 6765 7329 0a20 2020 2020  e(changes).     
-000285d0: 2020 2061 7373 6572 7420 6e6f 7420 6368     assert not ch
-000285e0: 616e 6765 730a 0a20 2020 2020 2020 2072  anges..        r
-000285f0: 6573 756c 7420 3d20 7733 2e65 7468 2e75  esult = w3.eth.u
-00028600: 6e69 6e73 7461 6c6c 5f66 696c 7465 7228  ninstall_filter(
-00028610: 6669 6c74 6572 2e66 696c 7465 725f 6964  filter.filter_id
-00028620: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-00028630: 2072 6573 756c 7420 6973 2054 7275 650a   result is True.
-00028640: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
-00028650: 685f 6e65 775f 7065 6e64 696e 675f 7472  h_new_pending_tr
-00028660: 616e 7361 6374 696f 6e5f 6669 6c74 6572  ansaction_filter
-00028670: 2873 656c 662c 2077 333a 2022 5765 6233  (self, w3: "Web3
-00028680: 2229 202d 3e20 4e6f 6e65 3a0a 2020 2020  ") -> None:.    
-00028690: 2020 2020 6669 6c74 6572 203d 2077 332e      filter = w3.
-000286a0: 6574 682e 6669 6c74 6572 2822 7065 6e64  eth.filter("pend
-000286b0: 696e 6722 290a 2020 2020 2020 2020 6173  ing").        as
-000286c0: 7365 7274 2069 735f 7374 7269 6e67 2866  sert is_string(f
-000286d0: 696c 7465 722e 6669 6c74 6572 5f69 6429  ilter.filter_id)
-000286e0: 0a0a 2020 2020 2020 2020 6368 616e 6765  ..        change
-000286f0: 7320 3d20 7733 2e65 7468 2e67 6574 5f66  s = w3.eth.get_f
-00028700: 696c 7465 725f 6368 616e 6765 7328 6669  ilter_changes(fi
-00028710: 6c74 6572 2e66 696c 7465 725f 6964 290a  lter.filter_id).
-00028720: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-00028730: 735f 6c69 7374 5f6c 696b 6528 6368 616e  s_list_like(chan
-00028740: 6765 7329 0a20 2020 2020 2020 2061 7373  ges).        ass
-00028750: 6572 7420 6e6f 7420 6368 616e 6765 730a  ert not changes.
-00028760: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00028770: 3d20 7733 2e65 7468 2e75 6e69 6e73 7461  = w3.eth.uninsta
-00028780: 6c6c 5f66 696c 7465 7228 6669 6c74 6572  ll_filter(filter
-00028790: 2e66 696c 7465 725f 6964 290a 2020 2020  .filter_id).    
-000287a0: 2020 2020 6173 7365 7274 2072 6573 756c      assert resul
-000287b0: 7420 6973 2054 7275 650a 0a20 2020 2064  t is True..    d
-000287c0: 6566 2074 6573 745f 6574 685f 6765 745f  ef test_eth_get_
-000287d0: 6c6f 6773 5f77 6974 686f 7574 5f6c 6f67  logs_without_log
-000287e0: 7328 0a20 2020 2020 2020 2073 656c 662c  s(.        self,
-000287f0: 2077 333a 2022 5765 6233 222c 2062 6c6f   w3: "Web3", blo
-00028800: 636b 5f77 6974 685f 7478 6e5f 7769 7468  ck_with_txn_with
-00028810: 5f6c 6f67 3a20 426c 6f63 6b44 6174 610a  _log: BlockData.
-00028820: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
-00028830: 2020 2020 2020 2023 2054 6573 7420 7769         # Test wi
-00028840: 7468 2062 6c6f 636b 2072 616e 6765 0a0a  th block range..
-00028850: 2020 2020 2020 2020 6669 6c74 6572 5f70          filter_p
-00028860: 6172 616d 733a 2046 696c 7465 7250 6172  arams: FilterPar
-00028870: 616d 7320 3d20 7b0a 2020 2020 2020 2020  ams = {.        
-00028880: 2020 2020 2266 726f 6d42 6c6f 636b 223a      "fromBlock":
-00028890: 2042 6c6f 636b 4e75 6d62 6572 2830 292c   BlockNumber(0),
-000288a0: 0a20 2020 2020 2020 2020 2020 2022 746f  .            "to
-000288b0: 426c 6f63 6b22 3a20 426c 6f63 6b4e 756d  Block": BlockNum
-000288c0: 6265 7228 626c 6f63 6b5f 7769 7468 5f74  ber(block_with_t
-000288d0: 786e 5f77 6974 685f 6c6f 675b 226e 756d  xn_with_log["num
-000288e0: 6265 7222 5d20 2d20 3129 2c0a 2020 2020  ber"] - 1),.    
-000288f0: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
-00028900: 7375 6c74 203d 2077 332e 6574 682e 6765  sult = w3.eth.ge
-00028910: 745f 6c6f 6773 2866 696c 7465 725f 7061  t_logs(filter_pa
-00028920: 7261 6d73 290a 2020 2020 2020 2020 6173  rams).        as
-00028930: 7365 7274 206c 656e 2872 6573 756c 7429  sert len(result)
-00028940: 203d 3d20 300a 0a20 2020 2020 2020 2023   == 0..        #
-00028950: 2074 6865 2072 616e 6765 2069 7320 7772   the range is wr
-00028960: 6f6e 670a 2020 2020 2020 2020 6669 6c74  ong.        filt
-00028970: 6572 5f70 6172 616d 7320 3d20 7b0a 2020  er_params = {.  
-00028980: 2020 2020 2020 2020 2020 2266 726f 6d42            "fromB
-00028990: 6c6f 636b 223a 2062 6c6f 636b 5f77 6974  lock": block_wit
-000289a0: 685f 7478 6e5f 7769 7468 5f6c 6f67 5b22  h_txn_with_log["
-000289b0: 6e75 6d62 6572 225d 2c0a 2020 2020 2020  number"],.      
-000289c0: 2020 2020 2020 2274 6f42 6c6f 636b 223a        "toBlock":
-000289d0: 2042 6c6f 636b 4e75 6d62 6572 2862 6c6f   BlockNumber(blo
-000289e0: 636b 5f77 6974 685f 7478 6e5f 7769 7468  ck_with_txn_with
-000289f0: 5f6c 6f67 5b22 6e75 6d62 6572 225d 202d  _log["number"] -
-00028a00: 2031 292c 0a20 2020 2020 2020 207d 0a20   1),.        }. 
-00028a10: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00028a20: 7733 2e65 7468 2e67 6574 5f6c 6f67 7328  w3.eth.get_logs(
-00028a30: 6669 6c74 6572 5f70 6172 616d 7329 0a20  filter_params). 
-00028a40: 2020 2020 2020 2061 7373 6572 7420 6c65         assert le
-00028a50: 6e28 7265 7375 6c74 2920 3d3d 2030 0a0a  n(result) == 0..
-00028a60: 2020 2020 2020 2020 2320 5465 7374 2077          # Test w
-00028a70: 6974 6820 6061 6464 7265 7373 600a 0a20  ith `address`.. 
-00028a80: 2020 2020 2020 2023 2066 696c 7465 7220         # filter 
-00028a90: 7769 7468 206f 7468 6572 2061 6464 7265  with other addre
-00028aa0: 7373 0a20 2020 2020 2020 2066 696c 7465  ss.        filte
-00028ab0: 725f 7061 7261 6d73 203d 207b 0a20 2020  r_params = {.   
-00028ac0: 2020 2020 2020 2020 2022 6672 6f6d 426c           "fromBl
-00028ad0: 6f63 6b22 3a20 426c 6f63 6b4e 756d 6265  ock": BlockNumbe
-00028ae0: 7228 3029 2c0a 2020 2020 2020 2020 2020  r(0),.          
-00028af0: 2020 2261 6464 7265 7373 223a 2055 4e4b    "address": UNK
-00028b00: 4e4f 574e 5f41 4444 5245 5353 2c0a 2020  NOWN_ADDRESS,.  
-00028b10: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00028b20: 7265 7375 6c74 203d 2077 332e 6574 682e  result = w3.eth.
-00028b30: 6765 745f 6c6f 6773 2866 696c 7465 725f  get_logs(filter_
-00028b40: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-00028b50: 6173 7365 7274 206c 656e 2872 6573 756c  assert len(resul
-00028b60: 7429 203d 3d20 300a 0a20 2020 2020 2020  t) == 0..       
-00028b70: 2023 2054 6573 7420 7769 7468 206d 756c   # Test with mul
-00028b80: 7469 706c 6520 6061 6464 7265 7373 600a  tiple `address`.
-00028b90: 0a20 2020 2020 2020 2023 2066 696c 7465  .        # filte
-00028ba0: 7220 7769 7468 206f 7468 6572 2061 6464  r with other add
-00028bb0: 7265 7373 0a20 2020 2020 2020 2066 696c  ress.        fil
-00028bc0: 7465 725f 7061 7261 6d73 203d 207b 0a20  ter_params = {. 
-00028bd0: 2020 2020 2020 2020 2020 2022 6672 6f6d             "from
-00028be0: 426c 6f63 6b22 3a20 426c 6f63 6b4e 756d  Block": BlockNum
-00028bf0: 6265 7228 3029 2c0a 2020 2020 2020 2020  ber(0),.        
-00028c00: 2020 2020 2261 6464 7265 7373 223a 205b      "address": [
-00028c10: 554e 4b4e 4f57 4e5f 4144 4452 4553 532c  UNKNOWN_ADDRESS,
-00028c20: 2055 4e4b 4e4f 574e 5f41 4444 5245 5353   UNKNOWN_ADDRESS
-00028c30: 5d2c 0a20 2020 2020 2020 207d 0a20 2020  ],.        }.   
-00028c40: 2020 2020 2072 6573 756c 7420 3d20 7733       result = w3
-00028c50: 2e65 7468 2e67 6574 5f6c 6f67 7328 6669  .eth.get_logs(fi
-00028c60: 6c74 6572 5f70 6172 616d 7329 0a20 2020  lter_params).   
-00028c70: 2020 2020 2061 7373 6572 7420 6c65 6e28       assert len(
-00028c80: 7265 7375 6c74 2920 3d3d 2030 0a0a 2020  result) == 0..  
-00028c90: 2020 6465 6620 7465 7374 5f65 7468 5f67    def test_eth_g
-00028ca0: 6574 5f6c 6f67 735f 7769 7468 5f6c 6f67  et_logs_with_log
-00028cb0: 7328 0a20 2020 2020 2020 2073 656c 662c  s(.        self,
-00028cc0: 0a20 2020 2020 2020 2077 333a 2022 5765  .        w3: "We
-00028cd0: 6233 222c 0a20 2020 2020 2020 2062 6c6f  b3",.        blo
-00028ce0: 636b 5f77 6974 685f 7478 6e5f 7769 7468  ck_with_txn_with
-00028cf0: 5f6c 6f67 3a20 426c 6f63 6b44 6174 612c  _log: BlockData,
-00028d00: 0a20 2020 2020 2020 2065 6d69 7474 6572  .        emitter
-00028d10: 5f63 6f6e 7472 6163 745f 6164 6472 6573  _contract_addres
-00028d20: 733a 2043 6865 636b 7375 6d41 6464 7265  s: ChecksumAddre
-00028d30: 7373 2c0a 2020 2020 2020 2020 7478 6e5f  ss,.        txn_
-00028d40: 6861 7368 5f77 6974 685f 6c6f 673a 2048  hash_with_log: H
-00028d50: 6578 5374 722c 0a20 2020 2029 202d 3e20  exStr,.    ) -> 
-00028d60: 4e6f 6e65 3a0a 2020 2020 2020 2020 2320  None:.        # 
-00028d70: 5465 7374 2077 6974 6820 626c 6f63 6b20  Test with block 
-00028d80: 7261 6e67 650a 0a20 2020 2020 2020 2023  range..        #
-00028d90: 2074 6865 2072 616e 6765 2069 6e63 6c75   the range inclu
-00028da0: 6465 7320 7468 6520 626c 6f63 6b20 7768  des the block wh
-00028db0: 6572 6520 7468 6520 6c6f 6720 7265 7369  ere the log resi
-00028dc0: 6465 7320 696e 0a20 2020 2020 2020 2066  des in.        f
-00028dd0: 696c 7465 725f 7061 7261 6d73 3a20 4669  ilter_params: Fi
-00028de0: 6c74 6572 5061 7261 6d73 203d 207b 0a20  lterParams = {. 
-00028df0: 2020 2020 2020 2020 2020 2022 6672 6f6d             "from
-00028e00: 426c 6f63 6b22 3a20 626c 6f63 6b5f 7769  Block": block_wi
-00028e10: 7468 5f74 786e 5f77 6974 685f 6c6f 675b  th_txn_with_log[
-00028e20: 226e 756d 6265 7222 5d2c 0a20 2020 2020  "number"],.     
-00028e30: 2020 2020 2020 2022 746f 426c 6f63 6b22         "toBlock"
-00028e40: 3a20 626c 6f63 6b5f 7769 7468 5f74 786e  : block_with_txn
-00028e50: 5f77 6974 685f 6c6f 675b 226e 756d 6265  _with_log["numbe
-00028e60: 7222 5d2c 0a20 2020 2020 2020 207d 0a20  r"],.        }. 
-00028e70: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00028e80: 7733 2e65 7468 2e67 6574 5f6c 6f67 7328  w3.eth.get_logs(
-00028e90: 6669 6c74 6572 5f70 6172 616d 7329 0a20  filter_params). 
-00028ea0: 2020 2020 2020 2061 7373 6572 745f 636f         assert_co
-00028eb0: 6e74 6169 6e73 5f6c 6f67 280a 2020 2020  ntains_log(.    
-00028ec0: 2020 2020 2020 2020 7265 7375 6c74 2c20          result, 
-00028ed0: 626c 6f63 6b5f 7769 7468 5f74 786e 5f77  block_with_txn_w
-00028ee0: 6974 685f 6c6f 672c 2065 6d69 7474 6572  ith_log, emitter
-00028ef0: 5f63 6f6e 7472 6163 745f 6164 6472 6573  _contract_addres
-00028f00: 732c 2074 786e 5f68 6173 685f 7769 7468  s, txn_hash_with
-00028f10: 5f6c 6f67 0a20 2020 2020 2020 2029 0a0a  _log.        )..
-00028f20: 2020 2020 2020 2020 2320 7370 6563 6966          # specif
-00028f30: 7920 6f6e 6c79 2060 6672 6f6d 5f62 6c6f  y only `from_blo
-00028f40: 636b 602e 2062 7920 6465 6661 756c 7420  ck`. by default 
-00028f50: 6074 6f5f 626c 6f63 6b60 2073 686f 756c  `to_block` shoul
-00028f60: 6420 6265 2027 6c61 7465 7374 270a 2020  d be 'latest'.  
-00028f70: 2020 2020 2020 6669 6c74 6572 5f70 6172        filter_par
-00028f80: 616d 7320 3d20 7b0a 2020 2020 2020 2020  ams = {.        
-00028f90: 2020 2020 2266 726f 6d42 6c6f 636b 223a      "fromBlock":
-00028fa0: 2042 6c6f 636b 4e75 6d62 6572 2830 292c   BlockNumber(0),
-00028fb0: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-00028fc0: 2020 2072 6573 756c 7420 3d20 7733 2e65     result = w3.e
-00028fd0: 7468 2e67 6574 5f6c 6f67 7328 6669 6c74  th.get_logs(filt
-00028fe0: 6572 5f70 6172 616d 7329 0a20 2020 2020  er_params).     
-00028ff0: 2020 2061 7373 6572 745f 636f 6e74 6169     assert_contai
-00029000: 6e73 5f6c 6f67 280a 2020 2020 2020 2020  ns_log(.        
-00029010: 2020 2020 7265 7375 6c74 2c20 626c 6f63      result, bloc
-00029020: 6b5f 7769 7468 5f74 786e 5f77 6974 685f  k_with_txn_with_
-00029030: 6c6f 672c 2065 6d69 7474 6572 5f63 6f6e  log, emitter_con
-00029040: 7472 6163 745f 6164 6472 6573 732c 2074  tract_address, t
-00029050: 786e 5f68 6173 685f 7769 7468 5f6c 6f67  xn_hash_with_log
-00029060: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-00029070: 2020 2020 2320 5465 7374 2077 6974 6820      # Test with 
-00029080: 6061 6464 7265 7373 600a 0a20 2020 2020  `address`..     
-00029090: 2020 2023 2066 696c 7465 7220 7769 7468     # filter with
-000290a0: 2065 6d69 7474 6572 5f63 6f6e 7472 6163   emitter_contrac
-000290b0: 742e 6164 6472 6573 730a 2020 2020 2020  t.address.      
-000290c0: 2020 6669 6c74 6572 5f70 6172 616d 7320    filter_params 
-000290d0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-000290e0: 2266 726f 6d42 6c6f 636b 223a 2042 6c6f  "fromBlock": Blo
-000290f0: 636b 4e75 6d62 6572 2830 292c 0a20 2020  ckNumber(0),.   
-00029100: 2020 2020 2020 2020 2022 6164 6472 6573           "addres
-00029110: 7322 3a20 656d 6974 7465 725f 636f 6e74  s": emitter_cont
-00029120: 7261 6374 5f61 6464 7265 7373 2c0a 2020  ract_address,.  
-00029130: 2020 2020 2020 7d0a 0a20 2020 2064 6566        }..    def
-00029140: 2074 6573 745f 6574 685f 6765 745f 6c6f   test_eth_get_lo
-00029150: 6773 5f77 6974 685f 6c6f 6773 5f74 6f70  gs_with_logs_top
-00029160: 6963 5f61 7267 7328 0a20 2020 2020 2020  ic_args(.       
-00029170: 2073 656c 662c 0a20 2020 2020 2020 2077   self,.        w
-00029180: 333a 2022 5765 6233 222c 0a20 2020 2020  3: "Web3",.     
-00029190: 2020 2062 6c6f 636b 5f77 6974 685f 7478     block_with_tx
-000291a0: 6e5f 7769 7468 5f6c 6f67 3a20 426c 6f63  n_with_log: Bloc
-000291b0: 6b44 6174 612c 0a20 2020 2020 2020 2065  kData,.        e
-000291c0: 6d69 7474 6572 5f63 6f6e 7472 6163 745f  mitter_contract_
-000291d0: 6164 6472 6573 733a 2043 6865 636b 7375  address: Checksu
-000291e0: 6d41 6464 7265 7373 2c0a 2020 2020 2020  mAddress,.      
-000291f0: 2020 7478 6e5f 6861 7368 5f77 6974 685f    txn_hash_with_
-00029200: 6c6f 673a 2048 6578 5374 722c 0a20 2020  log: HexStr,.   
-00029210: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-00029220: 2020 2020 2320 5465 7374 2077 6974 6820      # Test with 
-00029230: 4e6f 6e65 2065 7665 6e74 2073 6967 0a0a  None event sig..
-00029240: 2020 2020 2020 2020 6669 6c74 6572 5f70          filter_p
-00029250: 6172 616d 733a 2046 696c 7465 7250 6172  arams: FilterPar
-00029260: 616d 7320 3d20 7b0a 2020 2020 2020 2020  ams = {.        
-00029270: 2020 2020 2266 726f 6d42 6c6f 636b 223a      "fromBlock":
-00029280: 2042 6c6f 636b 4e75 6d62 6572 2830 292c   BlockNumber(0),
-00029290: 0a20 2020 2020 2020 2020 2020 2022 746f  .            "to
-000292a0: 7069 6373 223a 205b 0a20 2020 2020 2020  pics": [.       
-000292b0: 2020 2020 2020 2020 204e 6f6e 652c 0a20           None,. 
-000292c0: 2020 2020 2020 2020 2020 2020 2020 2048                 H
-000292d0: 6578 5374 7228 0a20 2020 2020 2020 2020  exStr(.         
-000292e0: 2020 2020 2020 2020 2020 2022 3078 3030             "0x00
-000292f0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00029300: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00029310: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-00029320: 3030 3030 3030 3030 3030 6434 3331 220a  0000000000d431".
-00029330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029340: 292c 0a20 2020 2020 2020 2020 2020 205d  ),.            ]
-00029350: 2c0a 2020 2020 2020 2020 7d0a 0a20 2020  ,.        }..   
-00029360: 2020 2020 2072 6573 756c 7420 3d20 7733       result = w3
-00029370: 2e65 7468 2e67 6574 5f6c 6f67 7328 6669  .eth.get_logs(fi
-00029380: 6c74 6572 5f70 6172 616d 7329 0a20 2020  lter_params).   
-00029390: 2020 2020 2061 7373 6572 745f 636f 6e74       assert_cont
-000293a0: 6169 6e73 5f6c 6f67 280a 2020 2020 2020  ains_log(.      
-000293b0: 2020 2020 2020 7265 7375 6c74 2c20 626c        result, bl
-000293c0: 6f63 6b5f 7769 7468 5f74 786e 5f77 6974  ock_with_txn_wit
-000293d0: 685f 6c6f 672c 2065 6d69 7474 6572 5f63  h_log, emitter_c
-000293e0: 6f6e 7472 6163 745f 6164 6472 6573 732c  ontract_address,
-000293f0: 2074 786e 5f68 6173 685f 7769 7468 5f6c   txn_hash_with_l
-00029400: 6f67 0a20 2020 2020 2020 2029 0a0a 2020  og.        )..  
-00029410: 2020 2020 2020 2320 5465 7374 2077 6974        # Test wit
-00029420: 6820 4e6f 6e65 2069 6e64 6578 6564 2061  h None indexed a
-00029430: 7267 0a20 2020 2020 2020 2066 696c 7465  rg.        filte
-00029440: 725f 7061 7261 6d73 203d 207b 0a20 2020  r_params = {.   
-00029450: 2020 2020 2020 2020 2022 6672 6f6d 426c           "fromBl
-00029460: 6f63 6b22 3a20 426c 6f63 6b4e 756d 6265  ock": BlockNumbe
-00029470: 7228 3029 2c0a 2020 2020 2020 2020 2020  r(0),.          
-00029480: 2020 2274 6f70 6963 7322 3a20 5b0a 2020    "topics": [.  
-00029490: 2020 2020 2020 2020 2020 2020 2020 4865                He
-000294a0: 7853 7472 280a 2020 2020 2020 2020 2020  xStr(.          
-000294b0: 2020 2020 2020 2020 2020 2230 7830 3537            "0x057
-000294c0: 6263 3332 3832 3666 6265 3136 3164 6131  bc32826fbe161da1
-000294d0: 6331 3130 6166 6364 6361 6537 6331 3039  c110afcdcae7c109
-000294e0: 6138 6236 3931 3439 6637 3237 6663 3337  a8b69149f727fc37
-000294f0: 6136 3033 6336 3065 6639 3463 6122 0a20  a603c60ef94ca". 
-00029500: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00029510: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00029520: 2020 4e6f 6e65 2c0a 2020 2020 2020 2020    None,.        
-00029530: 2020 2020 5d2c 0a20 2020 2020 2020 207d      ],.        }
-00029540: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00029550: 3d20 7733 2e65 7468 2e67 6574 5f6c 6f67  = w3.eth.get_log
-00029560: 7328 6669 6c74 6572 5f70 6172 616d 7329  s(filter_params)
-00029570: 0a20 2020 2020 2020 2061 7373 6572 745f  .        assert_
-00029580: 636f 6e74 6169 6e73 5f6c 6f67 280a 2020  contains_log(.  
-00029590: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-000295a0: 2c20 626c 6f63 6b5f 7769 7468 5f74 786e  , block_with_txn
-000295b0: 5f77 6974 685f 6c6f 672c 2065 6d69 7474  _with_log, emitt
-000295c0: 6572 5f63 6f6e 7472 6163 745f 6164 6472  er_contract_addr
-000295d0: 6573 732c 2074 786e 5f68 6173 685f 7769  ess, txn_hash_wi
-000295e0: 7468 5f6c 6f67 0a20 2020 2020 2020 2029  th_log.        )
-000295f0: 0a0a 2020 2020 6465 6620 7465 7374 5f65  ..    def test_e
-00029600: 7468 5f67 6574 5f6c 6f67 735f 7769 7468  th_get_logs_with
-00029610: 5f6c 6f67 735f 6e6f 6e65 5f74 6f70 6963  _logs_none_topic
-00029620: 5f61 7267 7328 7365 6c66 2c20 7733 3a20  _args(self, w3: 
-00029630: 2257 6562 3322 2920 2d3e 204e 6f6e 653a  "Web3") -> None:
-00029640: 0a20 2020 2020 2020 2023 2054 6573 7420  .        # Test 
-00029650: 7769 7468 204e 6f6e 6520 6f76 6572 666c  with None overfl
-00029660: 6f77 696e 670a 2020 2020 2020 2020 6669  owing.        fi
-00029670: 6c74 6572 5f70 6172 616d 733a 2046 696c  lter_params: Fil
-00029680: 7465 7250 6172 616d 7320 3d20 7b0a 2020  terParams = {.  
-00029690: 2020 2020 2020 2020 2020 2266 726f 6d42            "fromB
-000296a0: 6c6f 636b 223a 2042 6c6f 636b 4e75 6d62  lock": BlockNumb
-000296b0: 6572 2830 292c 0a20 2020 2020 2020 2020  er(0),.         
-000296c0: 2020 2022 746f 7069 6373 223a 205b 4e6f     "topics": [No
-000296d0: 6e65 2c20 4e6f 6e65 2c20 4e6f 6e65 5d2c  ne, None, None],
-000296e0: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
-000296f0: 2020 2020 7265 7375 6c74 203d 2077 332e      result = w3.
-00029700: 6574 682e 6765 745f 6c6f 6773 2866 696c  eth.get_logs(fil
-00029710: 7465 725f 7061 7261 6d73 290a 2020 2020  ter_params).    
-00029720: 2020 2020 6173 7365 7274 206c 656e 2872      assert len(r
-00029730: 6573 756c 7429 203d 3d20 300a 0a20 2020  esult) == 0..   
-00029740: 2064 6566 2074 6573 745f 6574 685f 6361   def test_eth_ca
-00029750: 6c6c 5f6f 6c64 5f63 6f6e 7472 6163 745f  ll_old_contract_
-00029760: 7374 6174 6528 0a20 2020 2020 2020 2073  state(.        s
-00029770: 656c 662c 2077 333a 2022 5765 6233 222c  elf, w3: "Web3",
-00029780: 206d 6174 685f 636f 6e74 7261 6374 3a20   math_contract: 
-00029790: 2243 6f6e 7472 6163 7422 2c20 756e 6c6f  "Contract", unlo
-000297a0: 636b 6564 5f61 6363 6f75 6e74 3a20 4368  cked_account: Ch
-000297b0: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
-000297c0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-000297d0: 2020 2020 2073 7461 7274 5f62 6c6f 636b       start_block
-000297e0: 203d 2077 332e 6574 682e 6765 745f 626c   = w3.eth.get_bl
-000297f0: 6f63 6b28 226c 6174 6573 7422 290a 2020  ock("latest").  
-00029800: 2020 2020 2020 626c 6f63 6b5f 6e75 6d20        block_num 
-00029810: 3d20 7374 6172 745f 626c 6f63 6b5b 226e  = start_block["n
-00029820: 756d 6265 7222 5d0a 2020 2020 2020 2020  umber"].        
-00029830: 626c 6f63 6b5f 6861 7368 203d 2073 7461  block_hash = sta
-00029840: 7274 5f62 6c6f 636b 5b22 6861 7368 225d  rt_block["hash"]
-00029850: 0a0a 2020 2020 2020 2020 6d61 7468 5f63  ..        math_c
-00029860: 6f6e 7472 6163 742e 6675 6e63 7469 6f6e  ontract.function
-00029870: 732e 696e 6372 656d 656e 7443 6f75 6e74  s.incrementCount
-00029880: 6572 2829 2e74 7261 6e73 6163 7428 7b22  er().transact({"
-00029890: 6672 6f6d 223a 2075 6e6c 6f63 6b65 645f  from": unlocked_
-000298a0: 6163 636f 756e 747d 290a 0a20 2020 2020  account})..     
-000298b0: 2020 2023 2054 6869 7320 6973 6e27 7420     # This isn't 
-000298c0: 616e 2069 6e63 7265 6469 626c 7920 636f  an incredibly co
-000298d0: 6e76 696e 6369 6e67 2074 6573 7420 7369  nvincing test si
-000298e0: 6e63 6520 7765 2063 616e 2774 206d 696e  nce we can't min
-000298f0: 652c 2061 6e64 0a20 2020 2020 2020 2023  e, and.        #
-00029900: 2074 6865 2064 6566 6175 6c74 2072 6573   the default res
-00029910: 6f6c 7665 6420 626c 6f63 6b20 6973 206c  olved block is l
-00029920: 6174 6573 742c 2053 6f20 6966 2062 6c6f  atest, So if blo
-00029930: 636b 5f69 6465 6e74 6966 6965 7220 7761  ck_identifier wa
-00029940: 7320 6967 6e6f 7265 640a 2020 2020 2020  s ignored.      
-00029950: 2020 2320 7765 2077 6f75 6c64 2067 6574    # we would get
-00029960: 2074 6865 2073 616d 6520 7265 7375 6c74   the same result
-00029970: 2e20 466f 7220 6e6f 772c 2077 6520 6d6f  . For now, we mo
-00029980: 7374 6c79 2064 6570 656e 6420 6f6e 2063  stly depend on c
-00029990: 6f72 6520 7465 7374 732e 0a20 2020 2020  ore tests..     
-000299a0: 2020 2023 2049 6465 6173 2074 6f20 696d     # Ideas to im
-000299b0: 7072 6f76 6520 7468 6973 2074 6573 743a  prove this test:
-000299c0: 0a20 2020 2020 2020 2023 2020 2d20 456e  .        #  - En
-000299d0: 6162 6c65 206f 6e2d 6465 6d61 6e64 206d  able on-demand m
-000299e0: 696e 696e 6720 696e 206d 6f72 6520 636c  ining in more cl
-000299f0: 6965 6e74 730a 2020 2020 2020 2020 2320  ients.        # 
-00029a00: 202d 2049 6e63 7265 6d65 6e74 2074 6865   - Increment the
-00029a10: 206d 6174 6820 636f 6e74 7261 6374 2069   math contract i
-00029a20: 6e20 616c 6c20 6f66 2074 6865 2066 6978  n all of the fix
-00029a30: 7475 7265 732c 2061 6e64 2063 6865 636b  tures, and check
-00029a40: 2074 6865 0a20 2020 2020 2020 2023 2020   the.        #  
-00029a50: 2020 7661 6c75 6520 696e 2061 6e20 6f6c    value in an ol
-00029a60: 6420 626c 6f63 6b0a 2020 2020 2020 2020  d block.        
-00029a70: 626c 6f63 6b5f 6861 7368 5f63 616c 6c5f  block_hash_call_
-00029a80: 7265 7375 6c74 203d 206d 6174 685f 636f  result = math_co
-00029a90: 6e74 7261 6374 2e66 756e 6374 696f 6e73  ntract.functions
-00029aa0: 2e63 6f75 6e74 6572 2829 2e63 616c 6c28  .counter().call(
-00029ab0: 0a20 2020 2020 2020 2020 2020 2062 6c6f  .            blo
-00029ac0: 636b 5f69 6465 6e74 6966 6965 723d 626c  ck_identifier=bl
-00029ad0: 6f63 6b5f 6861 7368 0a20 2020 2020 2020  ock_hash.       
-00029ae0: 2029 0a20 2020 2020 2020 2062 6c6f 636b   ).        block
-00029af0: 5f6e 756d 5f63 616c 6c5f 7265 7375 6c74  _num_call_result
-00029b00: 203d 206d 6174 685f 636f 6e74 7261 6374   = math_contract
-00029b10: 2e66 756e 6374 696f 6e73 2e63 6f75 6e74  .functions.count
-00029b20: 6572 2829 2e63 616c 6c28 0a20 2020 2020  er().call(.     
-00029b30: 2020 2020 2020 2062 6c6f 636b 5f69 6465         block_ide
-00029b40: 6e74 6966 6965 723d 626c 6f63 6b5f 6e75  ntifier=block_nu
-00029b50: 6d0a 2020 2020 2020 2020 290a 2020 2020  m.        ).    
-00029b60: 2020 2020 6c61 7465 7374 5f63 616c 6c5f      latest_call_
-00029b70: 7265 7375 6c74 203d 206d 6174 685f 636f  result = math_co
-00029b80: 6e74 7261 6374 2e66 756e 6374 696f 6e73  ntract.functions
-00029b90: 2e63 6f75 6e74 6572 2829 2e63 616c 6c28  .counter().call(
-00029ba0: 0a20 2020 2020 2020 2020 2020 2062 6c6f  .            blo
-00029bb0: 636b 5f69 6465 6e74 6966 6965 723d 226c  ck_identifier="l
-00029bc0: 6174 6573 7422 0a20 2020 2020 2020 2029  atest".        )
-00029bd0: 0a20 2020 2020 2020 2064 6566 6175 6c74  .        default
-00029be0: 5f63 616c 6c5f 7265 7375 6c74 203d 206d  _call_result = m
-00029bf0: 6174 685f 636f 6e74 7261 6374 2e66 756e  ath_contract.fun
-00029c00: 6374 696f 6e73 2e63 6f75 6e74 6572 2829  ctions.counter()
-00029c10: 2e63 616c 6c28 290a 2020 2020 2020 2020  .call().        
-00029c20: 7065 6e64 696e 675f 6361 6c6c 5f72 6573  pending_call_res
-00029c30: 756c 7420 3d20 6d61 7468 5f63 6f6e 7472  ult = math_contr
-00029c40: 6163 742e 6675 6e63 7469 6f6e 732e 636f  act.functions.co
-00029c50: 756e 7465 7228 292e 6361 6c6c 280a 2020  unter().call(.  
-00029c60: 2020 2020 2020 2020 2020 626c 6f63 6b5f            block_
-00029c70: 6964 656e 7469 6669 6572 3d22 7065 6e64  identifier="pend
-00029c80: 696e 6722 0a20 2020 2020 2020 2029 0a0a  ing".        )..
-00029c90: 2020 2020 2020 2020 6173 7365 7274 2062          assert b
-00029ca0: 6c6f 636b 5f68 6173 685f 6361 6c6c 5f72  lock_hash_call_r
-00029cb0: 6573 756c 7420 3d3d 2030 0a20 2020 2020  esult == 0.     
-00029cc0: 2020 2061 7373 6572 7420 626c 6f63 6b5f     assert block_
-00029cd0: 6e75 6d5f 6361 6c6c 5f72 6573 756c 7420  num_call_result 
-00029ce0: 3d3d 2030 0a20 2020 2020 2020 2061 7373  == 0.        ass
-00029cf0: 6572 7420 6c61 7465 7374 5f63 616c 6c5f  ert latest_call_
-00029d00: 7265 7375 6c74 203d 3d20 300a 2020 2020  result == 0.    
-00029d10: 2020 2020 6173 7365 7274 2064 6566 6175      assert defau
-00029d20: 6c74 5f63 616c 6c5f 7265 7375 6c74 203d  lt_call_result =
-00029d30: 3d20 300a 0a20 2020 2020 2020 2069 6620  = 0..        if 
-00029d40: 7065 6e64 696e 675f 6361 6c6c 5f72 6573  pending_call_res
-00029d50: 756c 7420 213d 2031 3a0a 2020 2020 2020  ult != 1:.      
-00029d60: 2020 2020 2020 7261 6973 6520 4173 7365        raise Asse
-00029d70: 7274 696f 6e45 7272 6f72 280a 2020 2020  rtionError(.    
-00029d80: 2020 2020 2020 2020 2020 2020 6622 7065              f"pe
-00029d90: 6e64 696e 6720 6361 6c6c 2072 6573 756c  nding call resul
-00029da0: 7420 7761 7320 7b70 656e 6469 6e67 5f63  t was {pending_c
-00029db0: 616c 6c5f 7265 7375 6c74 7d20 696e 7374  all_result} inst
-00029dc0: 6561 6420 6f66 2031 220a 2020 2020 2020  ead of 1".      
-00029dd0: 2020 2020 2020 290a 0a20 2020 2064 6566        )..    def
-00029de0: 2074 6573 745f 6574 685f 756e 696e 7374   test_eth_uninst
-00029df0: 616c 6c5f 6669 6c74 6572 2873 656c 662c  all_filter(self,
-00029e00: 2077 333a 2022 5765 6233 2229 202d 3e20   w3: "Web3") -> 
-00029e10: 4e6f 6e65 3a0a 2020 2020 2020 2020 6669  None:.        fi
-00029e20: 6c74 6572 203d 2077 332e 6574 682e 6669  lter = w3.eth.fi
-00029e30: 6c74 6572 287b 7d29 0a20 2020 2020 2020  lter({}).       
-00029e40: 2061 7373 6572 7420 6973 5f73 7472 696e   assert is_strin
-00029e50: 6728 6669 6c74 6572 2e66 696c 7465 725f  g(filter.filter_
-00029e60: 6964 290a 0a20 2020 2020 2020 2073 7563  id)..        suc
-00029e70: 6365 7373 203d 2077 332e 6574 682e 756e  cess = w3.eth.un
-00029e80: 696e 7374 616c 6c5f 6669 6c74 6572 2866  install_filter(f
-00029e90: 696c 7465 722e 6669 6c74 6572 5f69 6429  ilter.filter_id)
-00029ea0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-00029eb0: 7375 6363 6573 7320 6973 2054 7275 650a  success is True.
-00029ec0: 0a20 2020 2020 2020 2066 6169 6c75 7265  .        failure
-00029ed0: 203d 2077 332e 6574 682e 756e 696e 7374   = w3.eth.uninst
-00029ee0: 616c 6c5f 6669 6c74 6572 2866 696c 7465  all_filter(filte
-00029ef0: 722e 6669 6c74 6572 5f69 6429 0a20 2020  r.filter_id).   
-00029f00: 2020 2020 2061 7373 6572 7420 6661 696c       assert fail
-00029f10: 7572 6520 6973 2046 616c 7365 0a0a 2020  ure is False..  
-00029f20: 2020 6465 6620 7465 7374 5f65 7468 5f73    def test_eth_s
-00029f30: 7562 6d69 745f 6861 7368 7261 7465 2873  ubmit_hashrate(s
-00029f40: 656c 662c 2077 333a 2022 5765 6233 2229  elf, w3: "Web3")
-00029f50: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-00029f60: 2020 2320 6e6f 6465 5f69 6420 6672 6f6d    # node_id from
-00029f70: 2045 4950 2031 3437 343a 2068 7474 7073   EIP 1474: https
-00029f80: 3a2f 2f67 6974 6875 622e 636f 6d2f 6574  ://github.com/et
-00029f90: 6865 7265 756d 2f45 4950 732f 7075 6c6c  hereum/EIPs/pull
-00029fa0: 2f31 3437 342f 6669 6c65 730a 2020 2020  /1474/files.    
-00029fb0: 2020 2020 6e6f 6465 5f69 6420 3d20 4865      node_id = He
-00029fc0: 7853 7472 280a 2020 2020 2020 2020 2020  xStr(.          
-00029fd0: 2020 2235 3964 6161 3236 3538 3164 3061    "59daa26581d0a
-00029fe0: 6364 3166 6365 3235 3466 6237 6538 3539  cd1fce254fb7e859
-00029ff0: 3532 6634 6330 3964 3039 3135 6166 6433  52f4c09d0915afd3
-0002a000: 3364 3338 3836 6364 3931 3462 6337 6432  3d3886cd914bc7d2
-0002a010: 3833 6322 0a20 2020 2020 2020 2029 0a20  83c".        ). 
-0002a020: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-0002a030: 7733 2e65 7468 2e73 7562 6d69 745f 6861  w3.eth.submit_ha
-0002a040: 7368 7261 7465 2835 3030 302c 206e 6f64  shrate(5000, nod
-0002a050: 655f 6964 290a 2020 2020 2020 2020 6173  e_id).        as
-0002a060: 7365 7274 2072 6573 756c 7420 6973 2054  sert result is T
-0002a070: 7275 650a 0a20 2020 2064 6566 2074 6573  rue..    def tes
-0002a080: 745f 6574 685f 7375 626d 6974 5f77 6f72  t_eth_submit_wor
-0002a090: 6b28 7365 6c66 2c20 7733 3a20 2257 6562  k(self, w3: "Web
-0002a0a0: 3322 2920 2d3e 204e 6f6e 653a 0a20 2020  3") -> None:.   
-0002a0b0: 2020 2020 206e 6f6e 6365 203d 2031 0a20       nonce = 1. 
-0002a0c0: 2020 2020 2020 2070 6f77 5f68 6173 6820         pow_hash 
-0002a0d0: 3d20 4865 7853 7472 280a 2020 2020 2020  = HexStr(.      
-0002a0e0: 2020 2020 2020 2230 7831 3233 3435 3637        "0x1234567
-0002a0f0: 3839 3061 6263 6465 6631 3233 3435 3637  890abcdef1234567
-0002a100: 3839 3061 6263 6465 6631 3233 3435 3637  890abcdef1234567
-0002a110: 3839 3061 6263 6465 6631 3233 3435 3637  890abcdef1234567
-0002a120: 3839 3061 6263 6465 6622 0a20 2020 2020  890abcdef".     
-0002a130: 2020 2029 0a20 2020 2020 2020 206d 6978     ).        mix
-0002a140: 5f64 6967 6573 7420 3d20 4865 7853 7472  _digest = HexStr
-0002a150: 280a 2020 2020 2020 2020 2020 2020 2230  (.            "0
-0002a160: 7844 3146 4535 3730 3030 3030 3030 3030  xD1FE57000000000
-0002a170: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-0002a180: 3044 3146 4535 3730 3030 3030 3030 3030  0D1FE57000000000
-0002a190: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
-0002a1a0: 3022 0a20 2020 2020 2020 2029 0a20 2020  0".        ).   
-0002a1b0: 2020 2020 2072 6573 756c 7420 3d20 7733       result = w3
-0002a1c0: 2e65 7468 2e73 7562 6d69 745f 776f 726b  .eth.submit_work
-0002a1d0: 286e 6f6e 6365 2c20 706f 775f 6861 7368  (nonce, pow_hash
-0002a1e0: 2c20 6d69 785f 6469 6765 7374 290a 2020  , mix_digest).  
-0002a1f0: 2020 2020 2020 6173 7365 7274 2072 6573        assert res
-0002a200: 756c 7420 6973 2046 616c 7365 0a0a 2020  ult is False..  
-0002a210: 2020 6465 6620 7465 7374 5f65 7468 5f67    def test_eth_g
-0002a220: 6574 5f72 6177 5f74 7261 6e73 6163 7469  et_raw_transacti
-0002a230: 6f6e 2873 656c 662c 2077 333a 2022 5765  on(self, w3: "We
-0002a240: 6233 222c 206d 696e 6564 5f74 786e 5f68  b3", mined_txn_h
-0002a250: 6173 683a 2048 6578 5374 7229 202d 3e20  ash: HexStr) -> 
-0002a260: 4e6f 6e65 3a0a 2020 2020 2020 2020 7261  None:.        ra
-0002a270: 775f 7472 616e 7361 6374 696f 6e20 3d20  w_transaction = 
-0002a280: 7733 2e65 7468 2e67 6574 5f72 6177 5f74  w3.eth.get_raw_t
-0002a290: 7261 6e73 6163 7469 6f6e 286d 696e 6564  ransaction(mined
-0002a2a0: 5f74 786e 5f68 6173 6829 0a20 2020 2020  _txn_hash).     
-0002a2b0: 2020 2061 7373 6572 7420 6973 5f62 7974     assert is_byt
-0002a2c0: 6573 2872 6177 5f74 7261 6e73 6163 7469  es(raw_transacti
-0002a2d0: 6f6e 290a 0a20 2020 2064 6566 2074 6573  on)..    def tes
-0002a2e0: 745f 6574 685f 6765 745f 7261 775f 7472  t_eth_get_raw_tr
-0002a2f0: 616e 7361 6374 696f 6e5f 7261 6973 6573  ansaction_raises
-0002a300: 5f65 7272 6f72 2873 656c 662c 2077 333a  _error(self, w3:
-0002a310: 2022 5765 6233 2229 202d 3e20 4e6f 6e65   "Web3") -> None
-0002a320: 3a0a 2020 2020 2020 2020 7769 7468 2070  :.        with p
-0002a330: 7974 6573 742e 7261 6973 6573 280a 2020  ytest.raises(.  
-0002a340: 2020 2020 2020 2020 2020 5472 616e 7361            Transa
-0002a350: 6374 696f 6e4e 6f74 466f 756e 642c 206d  ctionNotFound, m
-0002a360: 6174 6368 3d66 2254 7261 6e73 6163 7469  atch=f"Transacti
-0002a370: 6f6e 2077 6974 6820 6861 7368 3a20 277b  on with hash: '{
-0002a380: 554e 4b4e 4f57 4e5f 4841 5348 7d27 220a  UNKNOWN_HASH}'".
-0002a390: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
-0002a3a0: 2020 2020 2020 2077 332e 6574 682e 6765         w3.eth.ge
-0002a3b0: 745f 7261 775f 7472 616e 7361 6374 696f  t_raw_transactio
-0002a3c0: 6e28 554e 4b4e 4f57 4e5f 4841 5348 290a  n(UNKNOWN_HASH).
-0002a3d0: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
-0002a3e0: 685f 6765 745f 7261 775f 7472 616e 7361  h_get_raw_transa
-0002a3f0: 6374 696f 6e5f 6279 5f62 6c6f 636b 280a  ction_by_block(.
-0002a400: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-0002a410: 2020 2020 2020 7733 3a20 2257 6562 3322        w3: "Web3"
-0002a420: 2c0a 2020 2020 2020 2020 756e 6c6f 636b  ,.        unlock
-0002a430: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
-0002a440: 7479 7065 3a20 4368 6563 6b73 756d 4164  type: ChecksumAd
-0002a450: 6472 6573 732c 0a20 2020 2020 2020 2062  dress,.        b
-0002a460: 6c6f 636b 5f77 6974 685f 7478 6e3a 2042  lock_with_txn: B
-0002a470: 6c6f 636b 4461 7461 2c0a 2020 2020 2920  lockData,.    ) 
-0002a480: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-0002a490: 2023 2065 7468 5f67 6574 5261 7754 7261   # eth_getRawTra
-0002a4a0: 6e73 6163 7469 6f6e 4279 426c 6f63 6b4e  nsactionByBlockN
-0002a4b0: 756d 6265 7241 6e64 496e 6465 783a 2062  umberAndIndex: b
-0002a4c0: 6c6f 636b 2069 6465 6e74 6966 6965 720a  lock identifier.
-0002a4d0: 2020 2020 2020 2020 2320 7365 6e64 2061          # send a
-0002a4e0: 2074 786e 2074 6f20 6d61 6b65 2073 7572   txn to make sur
-0002a4f0: 6520 7065 6e64 696e 6720 626c 6f63 6b20  e pending block 
-0002a500: 6861 7320 6174 206c 6561 7374 206f 6e65  has at least one
-0002a510: 2074 786e 0a20 2020 2020 2020 2077 332e   txn.        w3.
-0002a520: 6574 682e 7365 6e64 5f74 7261 6e73 6163  eth.send_transac
-0002a530: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
-0002a540: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-0002a550: 2020 2020 2266 726f 6d22 3a20 756e 6c6f      "from": unlo
-0002a560: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
-0002a570: 6c5f 7479 7065 2c0a 2020 2020 2020 2020  l_type,.        
-0002a580: 2020 2020 2020 2020 2274 6f22 3a20 756e          "to": un
-0002a590: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
-0002a5a0: 7561 6c5f 7479 7065 2c0a 2020 2020 2020  ual_type,.      
-0002a5b0: 2020 2020 2020 2020 2020 2276 616c 7565            "value
-0002a5c0: 223a 2057 6569 2831 292c 0a20 2020 2020  ": Wei(1),.     
-0002a5d0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0002a5e0: 2029 0a20 2020 2020 2020 206c 6173 745f   ).        last_
-0002a5f0: 7065 6e64 696e 675f 7478 6e5f 696e 6465  pending_txn_inde
-0002a600: 7820 3d20 6c65 6e28 7733 2e65 7468 2e67  x = len(w3.eth.g
-0002a610: 6574 5f62 6c6f 636b 2822 7065 6e64 696e  et_block("pendin
-0002a620: 6722 295b 2274 7261 6e73 6163 7469 6f6e  g")["transaction
-0002a630: 7322 5d29 202d 2031 0a20 2020 2020 2020  s"]) - 1.       
-0002a640: 2072 6177 5f74 7261 6e73 6163 7469 6f6e   raw_transaction
-0002a650: 203d 2077 332e 6574 682e 6765 745f 7261   = w3.eth.get_ra
-0002a660: 775f 7472 616e 7361 6374 696f 6e5f 6279  w_transaction_by
-0002a670: 5f62 6c6f 636b 280a 2020 2020 2020 2020  _block(.        
-0002a680: 2020 2020 2270 656e 6469 6e67 222c 206c      "pending", l
-0002a690: 6173 745f 7065 6e64 696e 675f 7478 6e5f  ast_pending_txn_
-0002a6a0: 696e 6465 780a 2020 2020 2020 2020 290a  index.        ).
-0002a6b0: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-0002a6c0: 735f 6279 7465 7328 7261 775f 7472 616e  s_bytes(raw_tran
-0002a6d0: 7361 6374 696f 6e29 0a0a 2020 2020 2020  saction)..      
-0002a6e0: 2020 2320 6574 685f 6765 7452 6177 5472    # eth_getRawTr
-0002a6f0: 616e 7361 6374 696f 6e42 7942 6c6f 636b  ansactionByBlock
-0002a700: 4e75 6d62 6572 416e 6449 6e64 6578 3a20  NumberAndIndex: 
-0002a710: 626c 6f63 6b20 6e75 6d62 6572 0a20 2020  block number.   
-0002a720: 2020 2020 2062 6c6f 636b 5f77 6974 685f       block_with_
-0002a730: 7478 6e5f 6e75 6d62 6572 203d 2062 6c6f  txn_number = blo
-0002a740: 636b 5f77 6974 685f 7478 6e5b 226e 756d  ck_with_txn["num
-0002a750: 6265 7222 5d0a 2020 2020 2020 2020 6173  ber"].        as
-0002a760: 7365 7274 2069 735f 696e 7465 6765 7228  sert is_integer(
-0002a770: 626c 6f63 6b5f 7769 7468 5f74 786e 5f6e  block_with_txn_n
-0002a780: 756d 6265 7229 0a20 2020 2020 2020 2072  umber).        r
-0002a790: 6177 5f74 7261 6e73 6163 7469 6f6e 203d  aw_transaction =
-0002a7a0: 2077 332e 6574 682e 6765 745f 7261 775f   w3.eth.get_raw_
-0002a7b0: 7472 616e 7361 6374 696f 6e5f 6279 5f62  transaction_by_b
-0002a7c0: 6c6f 636b 2862 6c6f 636b 5f77 6974 685f  lock(block_with_
-0002a7d0: 7478 6e5f 6e75 6d62 6572 2c20 3029 0a20  txn_number, 0). 
-0002a7e0: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
-0002a7f0: 5f62 7974 6573 2872 6177 5f74 7261 6e73  _bytes(raw_trans
-0002a800: 6163 7469 6f6e 290a 0a20 2020 2020 2020  action)..       
-0002a810: 2023 2065 7468 5f67 6574 5261 7754 7261   # eth_getRawTra
-0002a820: 6e73 6163 7469 6f6e 4279 426c 6f63 6b48  nsactionByBlockH
-0002a830: 6173 6841 6e64 496e 6465 783a 2062 6c6f  ashAndIndex: blo
-0002a840: 636b 2068 6173 680a 2020 2020 2020 2020  ck hash.        
-0002a850: 626c 6f63 6b5f 7769 7468 5f74 786e 5f68  block_with_txn_h
-0002a860: 6173 6820 3d20 626c 6f63 6b5f 7769 7468  ash = block_with
-0002a870: 5f74 786e 5b22 6861 7368 225d 0a20 2020  _txn["hash"].   
-0002a880: 2020 2020 2061 7373 6572 7420 6973 5f62       assert is_b
-0002a890: 7974 6573 2862 6c6f 636b 5f77 6974 685f  ytes(block_with_
-0002a8a0: 7478 6e5f 6861 7368 290a 2020 2020 2020  txn_hash).      
-0002a8b0: 2020 7261 775f 7472 616e 7361 6374 696f    raw_transactio
-0002a8c0: 6e20 3d20 7733 2e65 7468 2e67 6574 5f72  n = w3.eth.get_r
-0002a8d0: 6177 5f74 7261 6e73 6163 7469 6f6e 5f62  aw_transaction_b
-0002a8e0: 795f 626c 6f63 6b28 626c 6f63 6b5f 7769  y_block(block_wi
-0002a8f0: 7468 5f74 786e 5f68 6173 682c 2030 290a  th_txn_hash, 0).
-0002a900: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-0002a910: 735f 6279 7465 7328 7261 775f 7472 616e  s_bytes(raw_tran
-0002a920: 7361 6374 696f 6e29 0a0a 2020 2020 4070  saction)..    @p
-0002a930: 7974 6573 742e 6d61 726b 2e70 6172 616d  ytest.mark.param
-0002a940: 6574 7269 7a65 2822 756e 6b6e 6f77 6e5f  etrize("unknown_
-0002a950: 626c 6f63 6b5f 6e75 6d5f 6f72 5f68 6173  block_num_or_has
-0002a960: 6822 2c20 2831 3233 3435 3637 3839 3939  h", (12345678999
-0002a970: 3939 2c20 554e 4b4e 4f57 4e5f 4841 5348  99, UNKNOWN_HASH
-0002a980: 2929 0a20 2020 2064 6566 2074 6573 745f  )).    def test_
-0002a990: 6574 685f 6765 745f 7261 775f 7472 616e  eth_get_raw_tran
-0002a9a0: 7361 6374 696f 6e5f 6279 5f62 6c6f 636b  saction_by_block
-0002a9b0: 5f72 6169 7365 735f 6572 726f 7228 0a20  _raises_error(. 
-0002a9c0: 2020 2020 2020 2073 656c 662c 2077 333a         self, w3:
-0002a9d0: 2022 5765 6233 222c 2075 6e6b 6e6f 776e   "Web3", unknown
-0002a9e0: 5f62 6c6f 636b 5f6e 756d 5f6f 725f 6861  _block_num_or_ha
-0002a9f0: 7368 3a20 556e 696f 6e5b 696e 742c 2048  sh: Union[int, H
-0002aa00: 6578 4279 7465 735d 0a20 2020 2029 202d  exBytes].    ) -
-0002aa10: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-0002aa20: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
-0002aa30: 6573 280a 2020 2020 2020 2020 2020 2020  es(.            
-0002aa40: 5472 616e 7361 6374 696f 6e4e 6f74 466f  TransactionNotFo
-0002aa50: 756e 642c 0a20 2020 2020 2020 2020 2020  und,.           
-0002aa60: 206d 6174 6368 3d28 0a20 2020 2020 2020   match=(.       
-0002aa70: 2020 2020 2020 2020 2066 2254 7261 6e73           f"Trans
-0002aa80: 6163 7469 6f6e 2069 6e64 6578 3a20 3020  action index: 0 
-0002aa90: 6f6e 2062 6c6f 636b 2069 643a 2022 0a20  on block id: ". 
-0002aaa0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0002aab0: 227b 746f 5f68 6578 5f69 665f 696e 7465  "{to_hex_if_inte
-0002aac0: 6765 7228 756e 6b6e 6f77 6e5f 626c 6f63  ger(unknown_bloc
-0002aad0: 6b5f 6e75 6d5f 6f72 5f68 6173 6829 2172  k_num_or_hash)!r
-0002aae0: 7d20 6e6f 7420 666f 756e 642e 220a 2020  } not found.".  
-0002aaf0: 2020 2020 2020 2020 2020 292c 0a20 2020            ),.   
-0002ab00: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
-0002ab10: 2020 2020 7733 2e65 7468 2e67 6574 5f72      w3.eth.get_r
-0002ab20: 6177 5f74 7261 6e73 6163 7469 6f6e 5f62  aw_transaction_b
-0002ab30: 795f 626c 6f63 6b28 756e 6b6e 6f77 6e5f  y_block(unknown_
-0002ab40: 626c 6f63 6b5f 6e75 6d5f 6f72 5f68 6173  block_num_or_has
-0002ab50: 682c 2030 290a 0a20 2020 2064 6566 2074  h, 0)..    def t
-0002ab60: 6573 745f 6574 685f 6765 745f 7261 775f  est_eth_get_raw_
-0002ab70: 7472 616e 7361 6374 696f 6e5f 6279 5f62  transaction_by_b
-0002ab80: 6c6f 636b 5f72 6169 7365 735f 6572 726f  lock_raises_erro
-0002ab90: 725f 626c 6f63 6b5f 6964 656e 7469 6669  r_block_identifi
-0002aba0: 6572 280a 2020 2020 2020 2020 7365 6c66  er(.        self
-0002abb0: 2c20 7733 3a20 2257 6562 3322 0a20 2020  , w3: "Web3".   
-0002abc0: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-0002abd0: 2020 2020 756e 6b6e 6f77 6e5f 6964 656e      unknown_iden
-0002abe0: 7469 6669 6572 203d 2022 756e 6b6e 6f77  tifier = "unknow
-0002abf0: 6e22 0a20 2020 2020 2020 2077 6974 6820  n".        with 
-0002ac00: 7079 7465 7374 2e72 6169 7365 7328 0a20  pytest.raises(. 
-0002ac10: 2020 2020 2020 2020 2020 2056 616c 7565             Value
-0002ac20: 4572 726f 722c 0a20 2020 2020 2020 2020  Error,.         
-0002ac30: 2020 206d 6174 6368 3d28 0a20 2020 2020     match=(.     
-0002ac40: 2020 2020 2020 2020 2020 2022 5661 6c75             "Valu
-0002ac50: 6520 6469 6420 6e6f 7420 6d61 7463 6820  e did not match 
-0002ac60: 616e 7920 6f66 2074 6865 2072 6563 6f67  any of the recog
-0002ac70: 6e69 7a65 6420 626c 6f63 6b20 6964 656e  nized block iden
-0002ac80: 7469 6669 6572 733a 2022 0a20 2020 2020  tifiers: ".     
-0002ac90: 2020 2020 2020 2020 2020 2066 227b 756e             f"{un
-0002aca0: 6b6e 6f77 6e5f 6964 656e 7469 6669 6572  known_identifier
-0002acb0: 7d22 0a20 2020 2020 2020 2020 2020 2029  }".            )
-0002acc0: 2c0a 2020 2020 2020 2020 293a 0a20 2020  ,.        ):.   
-0002acd0: 2020 2020 2020 2020 2077 332e 6574 682e           w3.eth.
-0002ace0: 6765 745f 7261 775f 7472 616e 7361 6374  get_raw_transact
-0002acf0: 696f 6e5f 6279 5f62 6c6f 636b 2875 6e6b  ion_by_block(unk
-0002ad00: 6e6f 776e 5f69 6465 6e74 6966 6965 722c  nown_identifier,
-0002ad10: 2030 2920 2023 2074 7970 653a 2069 676e   0)  # type: ign
-0002ad20: 6f72 650a 0a20 2020 2064 6566 2074 6573  ore..    def tes
-0002ad30: 745f 6465 6661 756c 745f 6163 636f 756e  t_default_accoun
-0002ad40: 7428 0a20 2020 2020 2020 2073 656c 662c  t(.        self,
-0002ad50: 2077 333a 2022 5765 6233 222c 2075 6e6c   w3: "Web3", unl
-0002ad60: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
-0002ad70: 616c 5f74 7970 653a 2043 6865 636b 7375  al_type: Checksu
-0002ad80: 6d41 6464 7265 7373 0a20 2020 2029 202d  mAddress.    ) -
-0002ad90: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-0002ada0: 2320 6368 6563 6b20 6465 6661 756c 7473  # check defaults
-0002adb0: 2074 6f20 656d 7074 790a 2020 2020 2020   to empty.      
-0002adc0: 2020 6465 6661 756c 745f 6163 636f 756e    default_accoun
-0002add0: 7420 3d20 7733 2e65 7468 2e64 6566 6175  t = w3.eth.defau
-0002ade0: 6c74 5f61 6363 6f75 6e74 0a20 2020 2020  lt_account.     
-0002adf0: 2020 2061 7373 6572 7420 6465 6661 756c     assert defaul
-0002ae00: 745f 6163 636f 756e 7420 6973 2065 6d70  t_account is emp
-0002ae10: 7479 0a0a 2020 2020 2020 2020 2320 6368  ty..        # ch
-0002ae20: 6563 6b20 7365 7474 6572 0a20 2020 2020  eck setter.     
-0002ae30: 2020 2077 332e 6574 682e 6465 6661 756c     w3.eth.defaul
-0002ae40: 745f 6163 636f 756e 7420 3d20 756e 6c6f  t_account = unlo
-0002ae50: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
-0002ae60: 6c5f 7479 7065 0a20 2020 2020 2020 2064  l_type.        d
-0002ae70: 6566 6175 6c74 5f61 6363 6f75 6e74 203d  efault_account =
-0002ae80: 2077 332e 6574 682e 6465 6661 756c 745f   w3.eth.default_
-0002ae90: 6163 636f 756e 740a 2020 2020 2020 2020  account.        
-0002aea0: 6173 7365 7274 2064 6566 6175 6c74 5f61  assert default_a
-0002aeb0: 6363 6f75 6e74 203d 3d20 756e 6c6f 636b  ccount == unlock
-0002aec0: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
-0002aed0: 7479 7065 0a0a 2020 2020 2020 2020 2320  type..        # 
-0002aee0: 7265 7365 7420 746f 2064 6566 6175 6c74  reset to default
-0002aef0: 0a20 2020 2020 2020 2077 332e 6574 682e  .        w3.eth.
-0002af00: 6465 6661 756c 745f 6163 636f 756e 7420  default_account 
-0002af10: 3d20 656d 7074 790a 0a20 2020 2064 6566  = empty..    def
-0002af20: 2074 6573 745f 6465 6661 756c 745f 626c   test_default_bl
-0002af30: 6f63 6b28 0a20 2020 2020 2020 2073 656c  ock(.        sel
-0002af40: 662c 0a20 2020 2020 2020 2077 333a 2022  f,.        w3: "
-0002af50: 5765 6233 222c 0a20 2020 2029 202d 3e20  Web3",.    ) -> 
-0002af60: 4e6f 6e65 3a0a 2020 2020 2020 2020 2320  None:.        # 
-0002af70: 6368 6563 6b20 6465 6661 756c 7473 2074  check defaults t
-0002af80: 6f20 276c 6174 6573 7427 0a20 2020 2020  o 'latest'.     
-0002af90: 2020 2064 6566 6175 6c74 5f62 6c6f 636b     default_block
-0002afa0: 203d 2077 332e 6574 682e 6465 6661 756c   = w3.eth.defaul
-0002afb0: 745f 626c 6f63 6b0a 2020 2020 2020 2020  t_block.        
-0002afc0: 6173 7365 7274 2064 6566 6175 6c74 5f62  assert default_b
-0002afd0: 6c6f 636b 203d 3d20 226c 6174 6573 7422  lock == "latest"
-0002afe0: 0a0a 2020 2020 2020 2020 2320 6368 6563  ..        # chec
-0002aff0: 6b20 7365 7474 6572 0a20 2020 2020 2020  k setter.       
-0002b000: 2077 332e 6574 682e 6465 6661 756c 745f   w3.eth.default_
-0002b010: 626c 6f63 6b20 3d20 426c 6f63 6b4e 756d  block = BlockNum
-0002b020: 6265 7228 3132 3334 3529 0a20 2020 2020  ber(12345).     
-0002b030: 2020 2064 6566 6175 6c74 5f62 6c6f 636b     default_block
-0002b040: 203d 2077 332e 6574 682e 6465 6661 756c   = w3.eth.defaul
-0002b050: 745f 626c 6f63 6b0a 2020 2020 2020 2020  t_block.        
-0002b060: 6173 7365 7274 2064 6566 6175 6c74 5f62  assert default_b
-0002b070: 6c6f 636b 203d 3d20 426c 6f63 6b4e 756d  lock == BlockNum
-0002b080: 6265 7228 3132 3334 3529 0a0a 2020 2020  ber(12345)..    
-0002b090: 2020 2020 2320 7265 7365 7420 746f 2064      # reset to d
-0002b0a0: 6566 6175 6c74 0a20 2020 2020 2020 2077  efault.        w
-0002b0b0: 332e 6574 682e 6465 6661 756c 745f 626c  3.eth.default_bl
-0002b0c0: 6f63 6b20 3d20 226c 6174 6573 7422 0a    ock = "latest".
+0001d960: 6c5f 7479 7065 3a20 4368 6563 6b73 756d  l_type: Checksum
+0001d970: 4164 6472 6573 730a 2020 2020 2920 2d3e  Address.    ) ->
+0001d980: 204e 6f6e 653a 0a20 2020 2020 2020 2074   None:.        t
+0001d990: 786e 5f70 6172 616d 733a 2054 7850 6172  xn_params: TxPar
+0001d9a0: 616d 7320 3d20 7b0a 2020 2020 2020 2020  ams = {.        
+0001d9b0: 2020 2020 2266 726f 6d22 3a20 756e 6c6f      "from": unlo
+0001d9c0: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
+0001d9d0: 6c5f 7479 7065 2c0a 2020 2020 2020 2020  l_type,.        
+0001d9e0: 2020 2020 2274 6f22 3a20 756e 6c6f 636b      "to": unlock
+0001d9f0: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
+0001da00: 7479 7065 2c0a 2020 2020 2020 2020 2020  type,.          
+0001da10: 2020 2276 616c 7565 223a 2057 6569 2831    "value": Wei(1
+0001da20: 292c 0a20 2020 2020 2020 2020 2020 2022  ),.            "
+0001da30: 6761 7322 3a20 3231 3030 302c 0a20 2020  gas": 21000,.   
+0001da40: 2020 2020 2020 2020 2022 6761 7350 7269           "gasPri
+0001da50: 6365 223a 2057 6569 2831 292c 0a20 2020  ce": Wei(1),.   
+0001da60: 2020 2020 2020 2020 2022 6d61 7846 6565           "maxFee
+0001da70: 5065 7247 6173 223a 2057 6569 2832 3530  PerGas": Wei(250
+0001da80: 202a 2031 302a 2a39 292c 0a20 2020 2020   * 10**9),.     
+0001da90: 2020 2020 2020 2022 6d61 7850 7269 6f72         "maxPrior
+0001daa0: 6974 7946 6565 5065 7247 6173 223a 2057  ityFeePerGas": W
+0001dab0: 6569 2832 202a 2031 302a 2a39 292c 0a20  ei(2 * 10**9),. 
+0001dac0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+0001dad0: 2077 6974 6820 7079 7465 7374 2e72 6169   with pytest.rai
+0001dae0: 7365 7328 5472 616e 7361 6374 696f 6e54  ses(TransactionT
+0001daf0: 7970 654d 6973 6d61 7463 6829 3a0a 2020  ypeMismatch):.  
+0001db00: 2020 2020 2020 2020 2020 7733 2e65 7468            w3.eth
+0001db10: 2e73 656e 645f 7472 616e 7361 6374 696f  .send_transactio
+0001db20: 6e28 7478 6e5f 7061 7261 6d73 290a 0a20  n(txn_params).. 
+0001db30: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
+0001db40: 7365 6e64 5f74 7261 6e73 6163 7469 6f6e  send_transaction
+0001db50: 5f6e 6f5f 7072 696f 7269 7479 5f66 6565  _no_priority_fee
+0001db60: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+0001db70: 7733 3a20 2257 6562 3322 2c20 756e 6c6f  w3: "Web3", unlo
+0001db80: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
+0001db90: 6c5f 7479 7065 3a20 4368 6563 6b73 756d  l_type: Checksum
+0001dba0: 4164 6472 6573 730a 2020 2020 2920 2d3e  Address.    ) ->
+0001dbb0: 204e 6f6e 653a 0a20 2020 2020 2020 2074   None:.        t
+0001dbc0: 786e 5f70 6172 616d 733a 2054 7850 6172  xn_params: TxPar
+0001dbd0: 616d 7320 3d20 7b0a 2020 2020 2020 2020  ams = {.        
+0001dbe0: 2020 2020 2266 726f 6d22 3a20 756e 6c6f      "from": unlo
+0001dbf0: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
+0001dc00: 6c5f 7479 7065 2c0a 2020 2020 2020 2020  l_type,.        
+0001dc10: 2020 2020 2274 6f22 3a20 756e 6c6f 636b      "to": unlock
+0001dc20: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
+0001dc30: 7479 7065 2c0a 2020 2020 2020 2020 2020  type,.          
+0001dc40: 2020 2276 616c 7565 223a 2057 6569 2831    "value": Wei(1
+0001dc50: 292c 0a20 2020 2020 2020 2020 2020 2022  ),.            "
+0001dc60: 6761 7322 3a20 3231 3030 302c 0a20 2020  gas": 21000,.   
+0001dc70: 2020 2020 2020 2020 2022 6d61 7846 6565           "maxFee
+0001dc80: 5065 7247 6173 223a 2057 6569 2832 3530  PerGas": Wei(250
+0001dc90: 202a 2031 302a 2a39 292c 0a20 2020 2020   * 10**9),.     
+0001dca0: 2020 207d 0a20 2020 2020 2020 2077 6974     }.        wit
+0001dcb0: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
+0001dcc0: 0a20 2020 2020 2020 2020 2020 2049 6e76  .            Inv
+0001dcd0: 616c 6964 5472 616e 7361 6374 696f 6e2c  alidTransaction,
+0001dce0: 206d 6174 6368 3d22 6d61 7850 7269 6f72   match="maxPrior
+0001dcf0: 6974 7946 6565 5065 7247 6173 206d 7573  ityFeePerGas mus
+0001dd00: 7420 6265 2064 6566 696e 6564 220a 2020  t be defined".  
+0001dd10: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
+0001dd20: 2020 2020 2077 332e 6574 682e 7365 6e64       w3.eth.send
+0001dd30: 5f74 7261 6e73 6163 7469 6f6e 2874 786e  _transaction(txn
+0001dd40: 5f70 6172 616d 7329 0a0a 2020 2020 6465  _params)..    de
+0001dd50: 6620 7465 7374 5f65 7468 5f73 656e 645f  f test_eth_send_
+0001dd60: 7472 616e 7361 6374 696f 6e5f 6e6f 5f6d  transaction_no_m
+0001dd70: 6178 5f66 6565 280a 2020 2020 2020 2020  ax_fee(.        
+0001dd80: 7365 6c66 2c20 7733 3a20 2257 6562 3322  self, w3: "Web3"
+0001dd90: 2c20 756e 6c6f 636b 6564 5f61 6363 6f75  , unlocked_accou
+0001dda0: 6e74 5f64 7561 6c5f 7479 7065 3a20 4368  nt_dual_type: Ch
+0001ddb0: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
+0001ddc0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+0001ddd0: 2020 2020 206d 6178 5072 696f 7269 7479       maxPriority
+0001dde0: 4665 6550 6572 4761 7320 3d20 7733 2e74  FeePerGas = w3.t
+0001ddf0: 6f5f 7765 6928 322c 2022 6777 6569 2229  o_wei(2, "gwei")
+0001de00: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
+0001de10: 616d 733a 2054 7850 6172 616d 7320 3d20  ams: TxParams = 
+0001de20: 7b0a 2020 2020 2020 2020 2020 2020 2266  {.            "f
+0001de30: 726f 6d22 3a20 756e 6c6f 636b 6564 5f61  rom": unlocked_a
+0001de40: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
+0001de50: 2c0a 2020 2020 2020 2020 2020 2020 2274  ,.            "t
+0001de60: 6f22 3a20 756e 6c6f 636b 6564 5f61 6363  o": unlocked_acc
+0001de70: 6f75 6e74 5f64 7561 6c5f 7479 7065 2c0a  ount_dual_type,.
+0001de80: 2020 2020 2020 2020 2020 2020 2276 616c              "val
+0001de90: 7565 223a 2057 6569 2831 292c 0a20 2020  ue": Wei(1),.   
+0001dea0: 2020 2020 2020 2020 2022 6761 7322 3a20           "gas": 
+0001deb0: 3231 3030 302c 0a20 2020 2020 2020 2020  21000,.         
+0001dec0: 2020 2022 6d61 7850 7269 6f72 6974 7946     "maxPriorityF
+0001ded0: 6565 5065 7247 6173 223a 206d 6178 5072  eePerGas": maxPr
+0001dee0: 696f 7269 7479 4665 6550 6572 4761 732c  iorityFeePerGas,
+0001def0: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
+0001df00: 2020 2074 786e 5f68 6173 6820 3d20 7733     txn_hash = w3
+0001df10: 2e65 7468 2e73 656e 645f 7472 616e 7361  .eth.send_transa
+0001df20: 6374 696f 6e28 7478 6e5f 7061 7261 6d73  ction(txn_params
+0001df30: 290a 2020 2020 2020 2020 7478 6e20 3d20  ).        txn = 
+0001df40: 7733 2e65 7468 2e67 6574 5f74 7261 6e73  w3.eth.get_trans
+0001df50: 6163 7469 6f6e 2874 786e 5f68 6173 6829  action(txn_hash)
+0001df60: 0a0a 2020 2020 2020 2020 6173 7365 7274  ..        assert
+0001df70: 2069 735f 7361 6d65 5f61 6464 7265 7373   is_same_address
+0001df80: 2874 786e 5b22 6672 6f6d 225d 2c20 6361  (txn["from"], ca
+0001df90: 7374 2843 6865 636b 7375 6d41 6464 7265  st(ChecksumAddre
+0001dfa0: 7373 2c20 7478 6e5f 7061 7261 6d73 5b22  ss, txn_params["
+0001dfb0: 6672 6f6d 225d 2929 0a20 2020 2020 2020  from"])).       
+0001dfc0: 2061 7373 6572 7420 6973 5f73 616d 655f   assert is_same_
+0001dfd0: 6164 6472 6573 7328 7478 6e5b 2274 6f22  address(txn["to"
+0001dfe0: 5d2c 2063 6173 7428 4368 6563 6b73 756d  ], cast(Checksum
+0001dff0: 4164 6472 6573 732c 2074 786e 5f70 6172  Address, txn_par
+0001e000: 616d 735b 2274 6f22 5d29 290a 2020 2020  ams["to"])).    
+0001e010: 2020 2020 6173 7365 7274 2074 786e 5b22      assert txn["
+0001e020: 7661 6c75 6522 5d20 3d3d 2031 0a20 2020  value"] == 1.   
+0001e030: 2020 2020 2061 7373 6572 7420 7478 6e5b       assert txn[
+0001e040: 2267 6173 225d 203d 3d20 3231 3030 300a  "gas"] == 21000.
+0001e050: 0a20 2020 2020 2020 2062 6c6f 636b 203d  .        block =
+0001e060: 2077 332e 6574 682e 6765 745f 626c 6f63   w3.eth.get_bloc
+0001e070: 6b28 226c 6174 6573 7422 290a 2020 2020  k("latest").    
+0001e080: 2020 2020 6173 7365 7274 2074 786e 5b22      assert txn["
+0001e090: 6d61 7846 6565 5065 7247 6173 225d 203d  maxFeePerGas"] =
+0001e0a0: 3d20 6d61 7850 7269 6f72 6974 7946 6565  = maxPriorityFee
+0001e0b0: 5065 7247 6173 202b 2032 202a 2062 6c6f  PerGas + 2 * blo
+0001e0c0: 636b 5b22 6261 7365 4665 6550 6572 4761  ck["baseFeePerGa
+0001e0d0: 7322 5d0a 0a20 2020 2064 6566 2074 6573  s"]..    def tes
+0001e0e0: 745f 6574 685f 7365 6e64 5f74 7261 6e73  t_eth_send_trans
+0001e0f0: 6163 7469 6f6e 5f6d 6178 5f66 6565 5f6c  action_max_fee_l
+0001e100: 6573 735f 7468 616e 5f74 6970 280a 2020  ess_than_tip(.  
+0001e110: 2020 2020 2020 7365 6c66 2c20 7733 3a20        self, w3: 
+0001e120: 2257 6562 3322 2c20 756e 6c6f 636b 6564  "Web3", unlocked
+0001e130: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
+0001e140: 7065 3a20 4368 6563 6b73 756d 4164 6472  pe: ChecksumAddr
+0001e150: 6573 730a 2020 2020 2920 2d3e 204e 6f6e  ess.    ) -> Non
+0001e160: 653a 0a20 2020 2020 2020 2074 786e 5f70  e:.        txn_p
+0001e170: 6172 616d 733a 2054 7850 6172 616d 7320  arams: TxParams 
+0001e180: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0001e190: 2266 726f 6d22 3a20 756e 6c6f 636b 6564  "from": unlocked
+0001e1a0: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
+0001e1b0: 7065 2c0a 2020 2020 2020 2020 2020 2020  pe,.            
+0001e1c0: 2274 6f22 3a20 756e 6c6f 636b 6564 5f61  "to": unlocked_a
+0001e1d0: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
+0001e1e0: 2c0a 2020 2020 2020 2020 2020 2020 2276  ,.            "v
+0001e1f0: 616c 7565 223a 2057 6569 2831 292c 0a20  alue": Wei(1),. 
+0001e200: 2020 2020 2020 2020 2020 2022 6761 7322             "gas"
+0001e210: 3a20 3231 3030 302c 0a20 2020 2020 2020  : 21000,.       
+0001e220: 2020 2020 2022 6d61 7846 6565 5065 7247       "maxFeePerG
+0001e230: 6173 223a 2057 6569 2831 202a 2031 302a  as": Wei(1 * 10*
+0001e240: 2a39 292c 0a20 2020 2020 2020 2020 2020  *9),.           
+0001e250: 2022 6d61 7850 7269 6f72 6974 7946 6565   "maxPriorityFee
+0001e260: 5065 7247 6173 223a 2057 6569 2832 202a  PerGas": Wei(2 *
+0001e270: 2031 302a 2a39 292c 0a20 2020 2020 2020   10**9),.       
+0001e280: 207d 0a20 2020 2020 2020 2077 6974 6820   }.        with 
+0001e290: 7079 7465 7374 2e72 6169 7365 7328 0a20  pytest.raises(. 
+0001e2a0: 2020 2020 2020 2020 2020 2049 6e76 616c             Inval
+0001e2b0: 6964 5472 616e 7361 6374 696f 6e2c 206d  idTransaction, m
+0001e2c0: 6174 6368 3d22 6d61 7846 6565 5065 7247  atch="maxFeePerG
+0001e2d0: 6173 206d 7573 7420 6265 203e 3d20 6d61  as must be >= ma
+0001e2e0: 7850 7269 6f72 6974 7946 6565 5065 7247  xPriorityFeePerG
+0001e2f0: 6173 220a 2020 2020 2020 2020 293a 0a20  as".        ):. 
+0001e300: 2020 2020 2020 2020 2020 2077 332e 6574             w3.et
+0001e310: 682e 7365 6e64 5f74 7261 6e73 6163 7469  h.send_transacti
+0001e320: 6f6e 2874 786e 5f70 6172 616d 7329 0a0a  on(txn_params)..
+0001e330: 2020 2020 6465 6620 7465 7374 5f76 616c      def test_val
+0001e340: 6964 6174 696f 6e5f 6d69 6464 6c65 7761  idation_middlewa
+0001e350: 7265 5f63 6861 696e 5f69 645f 6d69 736d  re_chain_id_mism
+0001e360: 6174 6368 280a 2020 2020 2020 2020 7365  atch(.        se
+0001e370: 6c66 2c20 7733 3a20 2257 6562 3322 2c20  lf, w3: "Web3", 
+0001e380: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+0001e390: 5f64 7561 6c5f 7479 7065 3a20 4368 6563  _dual_type: Chec
+0001e3a0: 6b73 756d 4164 6472 6573 730a 2020 2020  ksumAddress.    
+0001e3b0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+0001e3c0: 2020 2077 726f 6e67 5f63 6861 696e 5f69     wrong_chain_i
+0001e3d0: 6420 3d20 3132 3334 3536 3738 3930 0a20  d = 1234567890. 
+0001e3e0: 2020 2020 2020 2061 6374 7561 6c5f 6368         actual_ch
+0001e3f0: 6169 6e5f 6964 203d 2077 332e 6574 682e  ain_id = w3.eth.
+0001e400: 6368 6169 6e5f 6964 0a0a 2020 2020 2020  chain_id..      
+0001e410: 2020 7478 6e5f 7061 7261 6d73 3a20 5478    txn_params: Tx
+0001e420: 5061 7261 6d73 203d 207b 0a20 2020 2020  Params = {.     
+0001e430: 2020 2020 2020 2022 6672 6f6d 223a 2075         "from": u
+0001e440: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
+0001e450: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
+0001e460: 2020 2020 2020 2022 746f 223a 2075 6e6c         "to": unl
+0001e470: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
+0001e480: 616c 5f74 7970 652c 0a20 2020 2020 2020  al_type,.       
+0001e490: 2020 2020 2022 7661 6c75 6522 3a20 5765       "value": We
+0001e4a0: 6928 3129 2c0a 2020 2020 2020 2020 2020  i(1),.          
+0001e4b0: 2020 2267 6173 223a 2057 6569 2832 3130    "gas": Wei(210
+0001e4c0: 3030 292c 0a20 2020 2020 2020 2020 2020  00),.           
+0001e4d0: 2022 6d61 7846 6565 5065 7247 6173 223a   "maxFeePerGas":
+0001e4e0: 2077 332e 746f 5f77 6569 2832 2c20 2267   w3.to_wei(2, "g
+0001e4f0: 7765 6922 292c 0a20 2020 2020 2020 2020  wei"),.         
+0001e500: 2020 2022 6d61 7850 7269 6f72 6974 7946     "maxPriorityF
+0001e510: 6565 5065 7247 6173 223a 2077 332e 746f  eePerGas": w3.to
+0001e520: 5f77 6569 2831 2c20 2267 7765 6922 292c  _wei(1, "gwei"),
+0001e530: 0a20 2020 2020 2020 2020 2020 2022 6368  .            "ch
+0001e540: 6169 6e49 6422 3a20 7772 6f6e 675f 6368  ainId": wrong_ch
+0001e550: 6169 6e5f 6964 2c0a 2020 2020 2020 2020  ain_id,.        
+0001e560: 7d0a 2020 2020 2020 2020 7769 7468 2070  }.        with p
+0001e570: 7974 6573 742e 7261 6973 6573 280a 2020  ytest.raises(.  
+0001e580: 2020 2020 2020 2020 2020 5765 6233 5661            Web3Va
+0001e590: 6c69 6461 7469 6f6e 4572 726f 722c 0a20  lidationError,. 
+0001e5a0: 2020 2020 2020 2020 2020 206d 6174 6368             match
+0001e5b0: 3d66 2254 6865 2074 7261 6e73 6163 7469  =f"The transacti
+0001e5c0: 6f6e 2064 6563 6c61 7265 6420 6368 6169  on declared chai
+0001e5d0: 6e20 4944 207b 7772 6f6e 675f 6368 6169  n ID {wrong_chai
+0001e5e0: 6e5f 6964 7d2c 2022 0a20 2020 2020 2020  n_id}, ".       
+0001e5f0: 2020 2020 2066 2262 7574 2074 6865 2063       f"but the c
+0001e600: 6f6e 6e65 6374 6564 206e 6f64 6520 6973  onnected node is
+0001e610: 206f 6e20 7b61 6374 7561 6c5f 6368 6169   on {actual_chai
+0001e620: 6e5f 6964 7d22 2c0a 2020 2020 2020 2020  n_id}",.        
+0001e630: 293a 0a20 2020 2020 2020 2020 2020 2077  ):.            w
+0001e640: 332e 6574 682e 7365 6e64 5f74 7261 6e73  3.eth.send_trans
+0001e650: 6163 7469 6f6e 2874 786e 5f70 6172 616d  action(txn_param
+0001e660: 7329 0a0a 2020 2020 4070 7974 6573 742e  s)..    @pytest.
+0001e670: 6d61 726b 2e70 6172 616d 6574 7269 7a65  mark.parametrize
+0001e680: 280a 2020 2020 2020 2020 226d 6178 5f66  (.        "max_f
+0001e690: 6565 222c 2028 3130 3030 3030 3030 3030  ee", (1000000000
+0001e6a0: 2c20 4e6f 6e65 292c 2069 6473 3d5b 2277  , None), ids=["w
+0001e6b0: 6974 685f 6d61 785f 6665 6522 2c20 2277  ith_max_fee", "w
+0001e6c0: 6974 686f 7574 5f6d 6178 5f66 6565 225d  ithout_max_fee"]
+0001e6d0: 0a20 2020 2029 0a20 2020 2064 6566 2074  .    ).    def t
+0001e6e0: 6573 745f 6761 735f 7072 6963 655f 6672  est_gas_price_fr
+0001e6f0: 6f6d 5f73 7472 6174 6567 795f 6279 7061  om_strategy_bypa
+0001e700: 7373 6564 5f66 6f72 5f64 796e 616d 6963  ssed_for_dynamic
+0001e710: 5f66 6565 5f74 786e 280a 2020 2020 2020  _fee_txn(.      
+0001e720: 2020 7365 6c66 2c20 7733 3a20 2257 6562    self, w3: "Web
+0001e730: 3322 2c20 756e 6c6f 636b 6564 5f61 6363  3", unlocked_acc
+0001e740: 6f75 6e74 5f64 7561 6c5f 7479 7065 3a20  ount_dual_type: 
+0001e750: 4368 6563 6b73 756d 4164 6472 6573 732c  ChecksumAddress,
+0001e760: 206d 6178 5f66 6565 3a20 5765 690a 2020   max_fee: Wei.  
+0001e770: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+0001e780: 2020 2020 206d 6178 5f70 7269 6f72 6974       max_priorit
+0001e790: 795f 6665 6520 3d20 7733 2e74 6f5f 7765  y_fee = w3.to_we
+0001e7a0: 6928 312c 2022 6777 6569 2229 0a20 2020  i(1, "gwei").   
+0001e7b0: 2020 2020 2074 786e 5f70 6172 616d 733a       txn_params:
+0001e7c0: 2054 7850 6172 616d 7320 3d20 7b0a 2020   TxParams = {.  
+0001e7d0: 2020 2020 2020 2020 2020 2266 726f 6d22            "from"
+0001e7e0: 3a20 756e 6c6f 636b 6564 5f61 6363 6f75  : unlocked_accou
+0001e7f0: 6e74 5f64 7561 6c5f 7479 7065 2c0a 2020  nt_dual_type,.  
+0001e800: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
+0001e810: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+0001e820: 5f64 7561 6c5f 7479 7065 2c0a 2020 2020  _dual_type,.    
+0001e830: 2020 2020 2020 2020 2276 616c 7565 223a          "value":
+0001e840: 2057 6569 2831 292c 0a20 2020 2020 2020   Wei(1),.       
+0001e850: 2020 2020 2022 6761 7322 3a20 3231 3030       "gas": 2100
+0001e860: 302c 0a20 2020 2020 2020 2020 2020 2022  0,.            "
+0001e870: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
+0001e880: 7247 6173 223a 206d 6178 5f70 7269 6f72  rGas": max_prior
+0001e890: 6974 795f 6665 652c 0a20 2020 2020 2020  ity_fee,.       
+0001e8a0: 207d 0a20 2020 2020 2020 2069 6620 6d61   }.        if ma
+0001e8b0: 785f 6665 6520 6973 206e 6f74 204e 6f6e  x_fee is not Non
+0001e8c0: 653a 0a20 2020 2020 2020 2020 2020 2074  e:.            t
+0001e8d0: 786e 5f70 6172 616d 7320 3d20 6173 736f  xn_params = asso
+0001e8e0: 6328 7478 6e5f 7061 7261 6d73 2c20 226d  c(txn_params, "m
+0001e8f0: 6178 4665 6550 6572 4761 7322 2c20 6d61  axFeePerGas", ma
+0001e900: 785f 6665 6529 0a0a 2020 2020 2020 2020  x_fee)..        
+0001e910: 6465 6620 6761 735f 7072 6963 655f 7374  def gas_price_st
+0001e920: 7261 7465 6779 285f 7733 3a20 2257 6562  rategy(_w3: "Web
+0001e930: 3322 2c20 5f74 786e 3a20 5478 5061 7261  3", _txn: TxPara
+0001e940: 6d73 2920 2d3e 2057 6569 3a0a 2020 2020  ms) -> Wei:.    
+0001e950: 2020 2020 2020 2020 7265 7475 726e 2077          return w
+0001e960: 332e 746f 5f77 6569 2832 2c20 2267 7765  3.to_wei(2, "gwe
+0001e970: 6922 290a 0a20 2020 2020 2020 2077 332e  i")..        w3.
+0001e980: 6574 682e 7365 745f 6761 735f 7072 6963  eth.set_gas_pric
+0001e990: 655f 7374 7261 7465 6779 2867 6173 5f70  e_strategy(gas_p
+0001e9a0: 7269 6365 5f73 7472 6174 6567 7929 0a0a  rice_strategy)..
+0001e9b0: 2020 2020 2020 2020 7478 6e5f 6861 7368          txn_hash
+0001e9c0: 203d 2077 332e 6574 682e 7365 6e64 5f74   = w3.eth.send_t
+0001e9d0: 7261 6e73 6163 7469 6f6e 2874 786e 5f70  ransaction(txn_p
+0001e9e0: 6172 616d 7329 0a20 2020 2020 2020 2074  arams).        t
+0001e9f0: 786e 203d 2077 332e 6574 682e 6765 745f  xn = w3.eth.get_
+0001ea00: 7472 616e 7361 6374 696f 6e28 7478 6e5f  transaction(txn_
+0001ea10: 6861 7368 290a 0a20 2020 2020 2020 206c  hash)..        l
+0001ea20: 6174 6573 745f 626c 6f63 6b20 3d20 7733  atest_block = w3
+0001ea30: 2e65 7468 2e67 6574 5f62 6c6f 636b 2822  .eth.get_block("
+0001ea40: 6c61 7465 7374 2229 0a20 2020 2020 2020  latest").       
+0001ea50: 2061 7373 6572 7420 280a 2020 2020 2020   assert (.      
+0001ea60: 2020 2020 2020 7478 6e5b 226d 6178 4665        txn["maxFe
+0001ea70: 6550 6572 4761 7322 5d20 3d3d 206d 6178  ePerGas"] == max
+0001ea80: 5f66 6565 0a20 2020 2020 2020 2020 2020  _fee.           
+0001ea90: 2069 6620 6d61 785f 6665 6520 6973 206e   if max_fee is n
+0001eaa0: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
+0001eab0: 2020 2020 656c 7365 2032 202a 206c 6174      else 2 * lat
+0001eac0: 6573 745f 626c 6f63 6b5b 2262 6173 6546  est_block["baseF
+0001ead0: 6565 5065 7247 6173 225d 202b 206d 6178  eePerGas"] + max
+0001eae0: 5f70 7269 6f72 6974 795f 6665 650a 2020  _priority_fee.  
+0001eaf0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0001eb00: 6173 7365 7274 2074 786e 5b22 6d61 7850  assert txn["maxP
+0001eb10: 7269 6f72 6974 7946 6565 5065 7247 6173  riorityFeePerGas
+0001eb20: 225d 203d 3d20 6d61 785f 7072 696f 7269  "] == max_priori
+0001eb30: 7479 5f66 6565 0a20 2020 2020 2020 2061  ty_fee.        a
+0001eb40: 7373 6572 7420 7478 6e5b 2267 6173 5072  ssert txn["gasPr
+0001eb50: 6963 6522 5d20 3d3d 2074 786e 5b22 6d61  ice"] == txn["ma
+0001eb60: 7846 6565 5065 7247 6173 225d 0a0a 2020  xFeePerGas"]..  
+0001eb70: 2020 2020 2020 7733 2e65 7468 2e73 6574        w3.eth.set
+0001eb80: 5f67 6173 5f70 7269 6365 5f73 7472 6174  _gas_price_strat
+0001eb90: 6567 7928 4e6f 6e65 2920 2023 2072 6573  egy(None)  # res
+0001eba0: 6574 2073 7472 6174 6567 790a 0a20 2020  et strategy..   
+0001ebb0: 2064 6566 2074 6573 745f 6761 735f 7072   def test_gas_pr
+0001ebc0: 6963 655f 6672 6f6d 5f73 7472 6174 6567  ice_from_strateg
+0001ebd0: 795f 6279 7061 7373 6564 5f66 6f72 5f64  y_bypassed_for_d
+0001ebe0: 796e 616d 6963 5f66 6565 5f74 786e 5f6e  ynamic_fee_txn_n
+0001ebf0: 6f5f 7469 7028 0a20 2020 2020 2020 2073  o_tip(.        s
+0001ec00: 656c 662c 0a20 2020 2020 2020 2077 333a  elf,.        w3:
+0001ec10: 2022 5765 6233 222c 0a20 2020 2020 2020   "Web3",.       
+0001ec20: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
+0001ec30: 745f 6475 616c 5f74 7970 653a 2043 6865  t_dual_type: Che
+0001ec40: 636b 7375 6d41 6464 7265 7373 2c0a 2020  cksumAddress,.  
+0001ec50: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+0001ec60: 2020 2020 2074 786e 5f70 6172 616d 733a       txn_params:
+0001ec70: 2054 7850 6172 616d 7320 3d20 7b0a 2020   TxParams = {.  
+0001ec80: 2020 2020 2020 2020 2020 2266 726f 6d22            "from"
+0001ec90: 3a20 756e 6c6f 636b 6564 5f61 6363 6f75  : unlocked_accou
+0001eca0: 6e74 5f64 7561 6c5f 7479 7065 2c0a 2020  nt_dual_type,.  
+0001ecb0: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
+0001ecc0: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+0001ecd0: 5f64 7561 6c5f 7479 7065 2c0a 2020 2020  _dual_type,.    
+0001ece0: 2020 2020 2020 2020 2276 616c 7565 223a          "value":
+0001ecf0: 2057 6569 2831 292c 0a20 2020 2020 2020   Wei(1),.       
+0001ed00: 2020 2020 2022 6761 7322 3a20 3231 3030       "gas": 2100
+0001ed10: 302c 0a20 2020 2020 2020 2020 2020 2022  0,.            "
+0001ed20: 6d61 7846 6565 5065 7247 6173 223a 2057  maxFeePerGas": W
+0001ed30: 6569 2831 3030 3030 3030 3030 3029 2c0a  ei(1000000000),.
+0001ed40: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
+0001ed50: 2020 2064 6566 2067 6173 5f70 7269 6365     def gas_price
+0001ed60: 5f73 7472 6174 6567 7928 5f77 333a 2022  _strategy(_w3: "
+0001ed70: 5765 6233 222c 205f 7478 6e3a 2054 7850  Web3", _txn: TxP
+0001ed80: 6172 616d 7329 202d 3e20 5765 693a 0a20  arams) -> Wei:. 
+0001ed90: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001eda0: 6e20 7733 2e74 6f5f 7765 6928 322c 2022  n w3.to_wei(2, "
+0001edb0: 6777 6569 2229 0a0a 2020 2020 2020 2020  gwei")..        
+0001edc0: 7733 2e65 7468 2e73 6574 5f67 6173 5f70  w3.eth.set_gas_p
+0001edd0: 7269 6365 5f73 7472 6174 6567 7928 6761  rice_strategy(ga
+0001ede0: 735f 7072 6963 655f 7374 7261 7465 6779  s_price_strategy
+0001edf0: 290a 0a20 2020 2020 2020 2077 6974 6820  )..        with 
+0001ee00: 7079 7465 7374 2e72 6169 7365 7328 0a20  pytest.raises(. 
+0001ee10: 2020 2020 2020 2020 2020 2049 6e76 616c             Inval
+0001ee20: 6964 5472 616e 7361 6374 696f 6e2c 206d  idTransaction, m
+0001ee30: 6174 6368 3d22 6d61 7850 7269 6f72 6974  atch="maxPriorit
+0001ee40: 7946 6565 5065 7247 6173 206d 7573 7420  yFeePerGas must 
+0001ee50: 6265 2064 6566 696e 6564 220a 2020 2020  be defined".    
+0001ee60: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
+0001ee70: 2020 2077 332e 6574 682e 7365 6e64 5f74     w3.eth.send_t
+0001ee80: 7261 6e73 6163 7469 6f6e 2874 786e 5f70  ransaction(txn_p
+0001ee90: 6172 616d 7329 0a0a 2020 2020 2020 2020  arams)..        
+0001eea0: 7733 2e65 7468 2e73 6574 5f67 6173 5f70  w3.eth.set_gas_p
+0001eeb0: 7269 6365 5f73 7472 6174 6567 7928 4e6f  rice_strategy(No
+0001eec0: 6e65 2920 2023 2072 6573 6574 2073 7472  ne)  # reset str
+0001eed0: 6174 6567 790a 0a20 2020 2064 6566 2074  ategy..    def t
+0001eee0: 6573 745f 6761 735f 7072 6963 655f 7374  est_gas_price_st
+0001eef0: 7261 7465 6779 5f6d 6964 646c 6577 6172  rategy_middlewar
+0001ef00: 655f 6865 785f 7661 6c75 6528 0a20 2020  e_hex_value(.   
+0001ef10: 2020 2020 2073 656c 662c 2077 333a 2022       self, w3: "
+0001ef20: 5765 6233 222c 2075 6e6c 6f63 6b65 645f  Web3", unlocked_
+0001ef30: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
+0001ef40: 653a 2043 6865 636b 7375 6d41 6464 7265  e: ChecksumAddre
+0001ef50: 7373 0a20 2020 2029 202d 3e20 4e6f 6e65  ss.    ) -> None
+0001ef60: 3a0a 2020 2020 2020 2020 7478 6e5f 7061  :.        txn_pa
+0001ef70: 7261 6d73 3a20 5478 5061 7261 6d73 203d  rams: TxParams =
+0001ef80: 207b 0a20 2020 2020 2020 2020 2020 2022   {.            "
+0001ef90: 6672 6f6d 223a 2075 6e6c 6f63 6b65 645f  from": unlocked_
+0001efa0: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
+0001efb0: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
+0001efc0: 746f 223a 2075 6e6c 6f63 6b65 645f 6163  to": unlocked_ac
+0001efd0: 636f 756e 745f 6475 616c 5f74 7970 652c  count_dual_type,
+0001efe0: 0a20 2020 2020 2020 2020 2020 2022 7661  .            "va
+0001eff0: 6c75 6522 3a20 5765 6928 3129 2c0a 2020  lue": Wei(1),.  
+0001f000: 2020 2020 2020 2020 2020 2267 6173 223a            "gas":
+0001f010: 2032 3130 3030 2c0a 2020 2020 2020 2020   21000,.        
+0001f020: 7d0a 2020 2020 2020 2020 7477 6f5f 6777  }.        two_gw
+0001f030: 6569 5f69 6e5f 7765 6920 3d20 7733 2e74  ei_in_wei = w3.t
+0001f040: 6f5f 7765 6928 322c 2022 6777 6569 2229  o_wei(2, "gwei")
+0001f050: 0a0a 2020 2020 2020 2020 6465 6620 6761  ..        def ga
+0001f060: 735f 7072 6963 655f 7374 7261 7465 6779  s_price_strategy
+0001f070: 285f 7733 3a20 2257 6562 3322 2c20 5f74  (_w3: "Web3", _t
+0001f080: 786e 3a20 5478 5061 7261 6d73 2920 2d3e  xn: TxParams) ->
+0001f090: 2073 7472 3a0a 2020 2020 2020 2020 2020   str:.          
+0001f0a0: 2020 7265 7475 726e 2068 6578 2874 776f    return hex(two
+0001f0b0: 5f67 7765 695f 696e 5f77 6569 290a 0a20  _gwei_in_wei).. 
+0001f0c0: 2020 2020 2020 2077 332e 6574 682e 7365         w3.eth.se
+0001f0d0: 745f 6761 735f 7072 6963 655f 7374 7261  t_gas_price_stra
+0001f0e0: 7465 6779 2867 6173 5f70 7269 6365 5f73  tegy(gas_price_s
+0001f0f0: 7472 6174 6567 7929 2020 2320 7479 7065  trategy)  # type
+0001f100: 3a20 6967 6e6f 7265 0a0a 2020 2020 2020  : ignore..      
+0001f110: 2020 7478 6e5f 6861 7368 203d 2077 332e    txn_hash = w3.
+0001f120: 6574 682e 7365 6e64 5f74 7261 6e73 6163  eth.send_transac
+0001f130: 7469 6f6e 2874 786e 5f70 6172 616d 7329  tion(txn_params)
+0001f140: 0a20 2020 2020 2020 2074 786e 203d 2077  .        txn = w
+0001f150: 332e 6574 682e 6765 745f 7472 616e 7361  3.eth.get_transa
+0001f160: 6374 696f 6e28 7478 6e5f 6861 7368 290a  ction(txn_hash).
+0001f170: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+0001f180: 7478 6e5b 2267 6173 5072 6963 6522 5d20  txn["gasPrice"] 
+0001f190: 3d3d 2074 776f 5f67 7765 695f 696e 5f77  == two_gwei_in_w
+0001f1a0: 6569 0a20 2020 2020 2020 2077 332e 6574  ei.        w3.et
+0001f1b0: 682e 7365 745f 6761 735f 7072 6963 655f  h.set_gas_price_
+0001f1c0: 7374 7261 7465 6779 284e 6f6e 6529 2020  strategy(None)  
+0001f1d0: 2320 7265 7365 7420 7374 7261 7465 6779  # reset strategy
+0001f1e0: 0a0a 2020 2020 6465 6620 7465 7374 5f65  ..    def test_e
+0001f1f0: 7468 5f72 6570 6c61 6365 5f74 7261 6e73  th_replace_trans
+0001f200: 6163 7469 6f6e 5f6c 6567 6163 7928 0a20  action_legacy(. 
+0001f210: 2020 2020 2020 2073 656c 662c 2077 333a         self, w3:
+0001f220: 2022 5765 6233 222c 2075 6e6c 6f63 6b65   "Web3", unlocke
+0001f230: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
+0001f240: 7970 653a 2043 6865 636b 7375 6d41 6464  ype: ChecksumAdd
+0001f250: 7265 7373 0a20 2020 2029 202d 3e20 4e6f  ress.    ) -> No
+0001f260: 6e65 3a0a 2020 2020 2020 2020 7478 6e5f  ne:.        txn_
+0001f270: 7061 7261 6d73 3a20 5478 5061 7261 6d73  params: TxParams
+0001f280: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+0001f290: 2022 6672 6f6d 223a 2075 6e6c 6f63 6b65   "from": unlocke
+0001f2a0: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
+0001f2b0: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
+0001f2c0: 2022 746f 223a 2075 6e6c 6f63 6b65 645f   "to": unlocked_
+0001f2d0: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
+0001f2e0: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
+0001f2f0: 7661 6c75 6522 3a20 5765 6928 3129 2c0a  value": Wei(1),.
+0001f300: 2020 2020 2020 2020 2020 2020 2267 6173              "gas
+0001f310: 223a 2032 3130 3030 2c0a 2020 2020 2020  ": 21000,.      
+0001f320: 2020 2020 2020 2267 6173 5072 6963 6522        "gasPrice"
+0001f330: 3a20 7733 2e74 6f5f 7765 6928 0a20 2020  : w3.to_wei(.   
+0001f340: 2020 2020 2020 2020 2020 2020 2031 2c20               1, 
+0001f350: 2267 7765 6922 0a20 2020 2020 2020 2020  "gwei".         
+0001f360: 2020 2029 2c20 2023 206d 7573 7420 6265     ),  # must be
+0001f370: 2067 7265 6174 6572 2074 6861 6e20 6261   greater than ba
+0001f380: 7365 5f66 6565 2070 6f73 7420 4c6f 6e64  se_fee post Lond
+0001f390: 6f6e 0a20 2020 2020 2020 207d 0a20 2020  on.        }.   
+0001f3a0: 2020 2020 2074 786e 5f68 6173 6820 3d20       txn_hash = 
+0001f3b0: 7733 2e65 7468 2e73 656e 645f 7472 616e  w3.eth.send_tran
+0001f3c0: 7361 6374 696f 6e28 7478 6e5f 7061 7261  saction(txn_para
+0001f3d0: 6d73 290a 0a20 2020 2020 2020 2074 786e  ms)..        txn
+0001f3e0: 5f70 6172 616d 735b 2267 6173 5072 6963  _params["gasPric
+0001f3f0: 6522 5d20 3d20 7733 2e74 6f5f 7765 6928  e"] = w3.to_wei(
+0001f400: 322c 2022 6777 6569 2229 0a20 2020 2020  2, "gwei").     
+0001f410: 2020 2072 6570 6c61 6365 5f74 786e 5f68     replace_txn_h
+0001f420: 6173 6820 3d20 7733 2e65 7468 2e72 6570  ash = w3.eth.rep
+0001f430: 6c61 6365 5f74 7261 6e73 6163 7469 6f6e  lace_transaction
+0001f440: 2874 786e 5f68 6173 682c 2074 786e 5f70  (txn_hash, txn_p
+0001f450: 6172 616d 7329 0a20 2020 2020 2020 2072  arams).        r
+0001f460: 6570 6c61 6365 5f74 786e 203d 2077 332e  eplace_txn = w3.
+0001f470: 6574 682e 6765 745f 7472 616e 7361 6374  eth.get_transact
+0001f480: 696f 6e28 7265 706c 6163 655f 7478 6e5f  ion(replace_txn_
+0001f490: 6861 7368 290a 0a20 2020 2020 2020 2061  hash)..        a
+0001f4a0: 7373 6572 7420 6973 5f73 616d 655f 6164  ssert is_same_ad
+0001f4b0: 6472 6573 7328 0a20 2020 2020 2020 2020  dress(.         
+0001f4c0: 2020 2072 6570 6c61 6365 5f74 786e 5b22     replace_txn["
+0001f4d0: 6672 6f6d 225d 2c20 6361 7374 2843 6865  from"], cast(Che
+0001f4e0: 636b 7375 6d41 6464 7265 7373 2c20 7478  cksumAddress, tx
+0001f4f0: 6e5f 7061 7261 6d73 5b22 6672 6f6d 225d  n_params["from"]
+0001f500: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
+0001f510: 2020 2020 6173 7365 7274 2069 735f 7361      assert is_sa
+0001f520: 6d65 5f61 6464 7265 7373 280a 2020 2020  me_address(.    
+0001f530: 2020 2020 2020 2020 7265 706c 6163 655f          replace_
+0001f540: 7478 6e5b 2274 6f22 5d2c 2063 6173 7428  txn["to"], cast(
+0001f550: 4368 6563 6b73 756d 4164 6472 6573 732c  ChecksumAddress,
+0001f560: 2074 786e 5f70 6172 616d 735b 2274 6f22   txn_params["to"
+0001f570: 5d29 0a20 2020 2020 2020 2029 0a20 2020  ]).        ).   
+0001f580: 2020 2020 2061 7373 6572 7420 7265 706c       assert repl
+0001f590: 6163 655f 7478 6e5b 2276 616c 7565 225d  ace_txn["value"]
+0001f5a0: 203d 3d20 310a 2020 2020 2020 2020 6173   == 1.        as
+0001f5b0: 7365 7274 2072 6570 6c61 6365 5f74 786e  sert replace_txn
+0001f5c0: 5b22 6761 7322 5d20 3d3d 2032 3130 3030  ["gas"] == 21000
+0001f5d0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+0001f5e0: 7265 706c 6163 655f 7478 6e5b 2267 6173  replace_txn["gas
+0001f5f0: 5072 6963 6522 5d20 3d3d 2074 786e 5f70  Price"] == txn_p
+0001f600: 6172 616d 735b 2267 6173 5072 6963 6522  arams["gasPrice"
+0001f610: 5d0a 0a20 2020 2064 6566 2074 6573 745f  ]..    def test_
+0001f620: 6574 685f 7265 706c 6163 655f 7472 616e  eth_replace_tran
+0001f630: 7361 6374 696f 6e28 0a20 2020 2020 2020  saction(.       
+0001f640: 2073 656c 662c 2077 333a 2022 5765 6233   self, w3: "Web3
+0001f650: 222c 2075 6e6c 6f63 6b65 645f 6163 636f  ", unlocked_acco
+0001f660: 756e 745f 6475 616c 5f74 7970 653a 2043  unt_dual_type: C
+0001f670: 6865 636b 7375 6d41 6464 7265 7373 0a20  hecksumAddress. 
+0001f680: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
+0001f690: 2020 2020 2020 7477 6f5f 6777 6569 5f69        two_gwei_i
+0001f6a0: 6e5f 7765 6920 3d20 7733 2e74 6f5f 7765  n_wei = w3.to_we
+0001f6b0: 6928 322c 2022 6777 6569 2229 0a20 2020  i(2, "gwei").   
+0001f6c0: 2020 2020 2074 6872 6565 5f67 7765 695f       three_gwei_
+0001f6d0: 696e 5f77 6569 203d 2077 332e 746f 5f77  in_wei = w3.to_w
+0001f6e0: 6569 2833 2c20 2267 7765 6922 290a 0a20  ei(3, "gwei").. 
+0001f6f0: 2020 2020 2020 2074 786e 5f70 6172 616d         txn_param
+0001f700: 733a 2054 7850 6172 616d 7320 3d20 7b0a  s: TxParams = {.
+0001f710: 2020 2020 2020 2020 2020 2020 2266 726f              "fro
+0001f720: 6d22 3a20 756e 6c6f 636b 6564 5f61 6363  m": unlocked_acc
+0001f730: 6f75 6e74 5f64 7561 6c5f 7479 7065 2c0a  ount_dual_type,.
+0001f740: 2020 2020 2020 2020 2020 2020 2274 6f22              "to"
+0001f750: 3a20 756e 6c6f 636b 6564 5f61 6363 6f75  : unlocked_accou
+0001f760: 6e74 5f64 7561 6c5f 7479 7065 2c0a 2020  nt_dual_type,.  
+0001f770: 2020 2020 2020 2020 2020 2276 616c 7565            "value
+0001f780: 223a 2057 6569 2831 292c 0a20 2020 2020  ": Wei(1),.     
+0001f790: 2020 2020 2020 2022 6761 7322 3a20 3231         "gas": 21
+0001f7a0: 3030 302c 0a20 2020 2020 2020 2020 2020  000,.           
+0001f7b0: 2022 6d61 7846 6565 5065 7247 6173 223a   "maxFeePerGas":
+0001f7c0: 2074 776f 5f67 7765 695f 696e 5f77 6569   two_gwei_in_wei
+0001f7d0: 2c0a 2020 2020 2020 2020 2020 2020 226d  ,.            "m
+0001f7e0: 6178 5072 696f 7269 7479 4665 6550 6572  axPriorityFeePer
+0001f7f0: 4761 7322 3a20 7733 2e74 6f5f 7765 6928  Gas": w3.to_wei(
+0001f800: 312c 2022 6777 6569 2229 2c0a 2020 2020  1, "gwei"),.    
+0001f810: 2020 2020 7d0a 2020 2020 2020 2020 7478      }.        tx
+0001f820: 6e5f 6861 7368 203d 2077 332e 6574 682e  n_hash = w3.eth.
+0001f830: 7365 6e64 5f74 7261 6e73 6163 7469 6f6e  send_transaction
+0001f840: 2874 786e 5f70 6172 616d 7329 0a0a 2020  (txn_params)..  
+0001f850: 2020 2020 2020 7478 6e5f 7061 7261 6d73        txn_params
+0001f860: 5b22 6d61 7846 6565 5065 7247 6173 225d  ["maxFeePerGas"]
+0001f870: 203d 2074 6872 6565 5f67 7765 695f 696e   = three_gwei_in
+0001f880: 5f77 6569 0a20 2020 2020 2020 2074 786e  _wei.        txn
+0001f890: 5f70 6172 616d 735b 226d 6178 5072 696f  _params["maxPrio
+0001f8a0: 7269 7479 4665 6550 6572 4761 7322 5d20  rityFeePerGas"] 
+0001f8b0: 3d20 7477 6f5f 6777 6569 5f69 6e5f 7765  = two_gwei_in_we
+0001f8c0: 690a 0a20 2020 2020 2020 2072 6570 6c61  i..        repla
+0001f8d0: 6365 5f74 786e 5f68 6173 6820 3d20 7733  ce_txn_hash = w3
+0001f8e0: 2e65 7468 2e72 6570 6c61 6365 5f74 7261  .eth.replace_tra
+0001f8f0: 6e73 6163 7469 6f6e 2874 786e 5f68 6173  nsaction(txn_has
+0001f900: 682c 2074 786e 5f70 6172 616d 7329 0a20  h, txn_params). 
+0001f910: 2020 2020 2020 2072 6570 6c61 6365 5f74         replace_t
+0001f920: 786e 203d 2077 332e 6574 682e 6765 745f  xn = w3.eth.get_
+0001f930: 7472 616e 7361 6374 696f 6e28 7265 706c  transaction(repl
+0001f940: 6163 655f 7478 6e5f 6861 7368 290a 0a20  ace_txn_hash).. 
+0001f950: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+0001f960: 5f73 616d 655f 6164 6472 6573 7328 0a20  _same_address(. 
+0001f970: 2020 2020 2020 2020 2020 2072 6570 6c61             repla
+0001f980: 6365 5f74 786e 5b22 6672 6f6d 225d 2c20  ce_txn["from"], 
+0001f990: 6361 7374 2843 6865 636b 7375 6d41 6464  cast(ChecksumAdd
+0001f9a0: 7265 7373 2c20 7478 6e5f 7061 7261 6d73  ress, txn_params
+0001f9b0: 5b22 6672 6f6d 225d 290a 2020 2020 2020  ["from"]).      
+0001f9c0: 2020 290a 2020 2020 2020 2020 6173 7365    ).        asse
+0001f9d0: 7274 2069 735f 7361 6d65 5f61 6464 7265  rt is_same_addre
+0001f9e0: 7373 280a 2020 2020 2020 2020 2020 2020  ss(.            
+0001f9f0: 7265 706c 6163 655f 7478 6e5b 2274 6f22  replace_txn["to"
+0001fa00: 5d2c 2063 6173 7428 4368 6563 6b73 756d  ], cast(Checksum
+0001fa10: 4164 6472 6573 732c 2074 786e 5f70 6172  Address, txn_par
+0001fa20: 616d 735b 2274 6f22 5d29 0a20 2020 2020  ams["to"]).     
+0001fa30: 2020 2029 0a20 2020 2020 2020 2061 7373     ).        ass
+0001fa40: 6572 7420 7265 706c 6163 655f 7478 6e5b  ert replace_txn[
+0001fa50: 2276 616c 7565 225d 203d 3d20 310a 2020  "value"] == 1.  
+0001fa60: 2020 2020 2020 6173 7365 7274 2072 6570        assert rep
+0001fa70: 6c61 6365 5f74 786e 5b22 6761 7322 5d20  lace_txn["gas"] 
+0001fa80: 3d3d 2032 3130 3030 0a20 2020 2020 2020  == 21000.       
+0001fa90: 2061 7373 6572 7420 7265 706c 6163 655f   assert replace_
+0001faa0: 7478 6e5b 226d 6178 4665 6550 6572 4761  txn["maxFeePerGa
+0001fab0: 7322 5d20 3d3d 2074 6872 6565 5f67 7765  s"] == three_gwe
+0001fac0: 695f 696e 5f77 6569 0a20 2020 2020 2020  i_in_wei.       
+0001fad0: 2061 7373 6572 7420 7265 706c 6163 655f   assert replace_
+0001fae0: 7478 6e5b 226d 6178 5072 696f 7269 7479  txn["maxPriority
+0001faf0: 4665 6550 6572 4761 7322 5d20 3d3d 2074  FeePerGas"] == t
+0001fb00: 776f 5f67 7765 695f 696e 5f77 6569 0a0a  wo_gwei_in_wei..
+0001fb10: 2020 2020 6465 6620 7465 7374 5f65 7468      def test_eth
+0001fb20: 5f72 6570 6c61 6365 5f74 7261 6e73 6163  _replace_transac
+0001fb30: 7469 6f6e 5f75 6e64 6572 7072 6963 6564  tion_underpriced
+0001fb40: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+0001fb50: 7733 3a20 2257 6562 3322 2c20 756e 6c6f  w3: "Web3", unlo
+0001fb60: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
+0001fb70: 6c5f 7479 7065 3a20 4368 6563 6b73 756d  l_type: Checksum
+0001fb80: 4164 6472 6573 730a 2020 2020 2920 2d3e  Address.    ) ->
+0001fb90: 204e 6f6e 653a 0a20 2020 2020 2020 2074   None:.        t
+0001fba0: 786e 5f70 6172 616d 733a 2054 7850 6172  xn_params: TxPar
+0001fbb0: 616d 7320 3d20 7b0a 2020 2020 2020 2020  ams = {.        
+0001fbc0: 2020 2020 2266 726f 6d22 3a20 756e 6c6f      "from": unlo
+0001fbd0: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
+0001fbe0: 6c5f 7479 7065 2c0a 2020 2020 2020 2020  l_type,.        
+0001fbf0: 2020 2020 2274 6f22 3a20 756e 6c6f 636b      "to": unlock
+0001fc00: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
+0001fc10: 7479 7065 2c0a 2020 2020 2020 2020 2020  type,.          
+0001fc20: 2020 2276 616c 7565 223a 2057 6569 2831    "value": Wei(1
+0001fc30: 292c 0a20 2020 2020 2020 2020 2020 2022  ),.            "
+0001fc40: 6761 7322 3a20 3231 3030 302c 0a20 2020  gas": 21000,.   
+0001fc50: 2020 2020 2020 2020 2022 6d61 7846 6565           "maxFee
+0001fc60: 5065 7247 6173 223a 2077 332e 746f 5f77  PerGas": w3.to_w
+0001fc70: 6569 2833 2c20 2267 7765 6922 292c 0a20  ei(3, "gwei"),. 
+0001fc80: 2020 2020 2020 2020 2020 2022 6d61 7850             "maxP
+0001fc90: 7269 6f72 6974 7946 6565 5065 7247 6173  riorityFeePerGas
+0001fca0: 223a 2077 332e 746f 5f77 6569 2832 2c20  ": w3.to_wei(2, 
+0001fcb0: 2267 7765 6922 292c 0a20 2020 2020 2020  "gwei"),.       
+0001fcc0: 207d 0a20 2020 2020 2020 2074 786e 5f68   }.        txn_h
+0001fcd0: 6173 6820 3d20 7733 2e65 7468 2e73 656e  ash = w3.eth.sen
+0001fce0: 645f 7472 616e 7361 6374 696f 6e28 7478  d_transaction(tx
+0001fcf0: 6e5f 7061 7261 6d73 290a 0a20 2020 2020  n_params)..     
+0001fd00: 2020 206f 6e65 5f67 7765 695f 696e 5f77     one_gwei_in_w
+0001fd10: 6569 203d 2077 332e 746f 5f77 6569 2831  ei = w3.to_wei(1
+0001fd20: 2c20 2267 7765 6922 290a 2020 2020 2020  , "gwei").      
+0001fd30: 2020 7478 6e5f 7061 7261 6d73 5b22 6d61    txn_params["ma
+0001fd40: 7846 6565 5065 7247 6173 225d 203d 206f  xFeePerGas"] = o
+0001fd50: 6e65 5f67 7765 695f 696e 5f77 6569 0a20  ne_gwei_in_wei. 
+0001fd60: 2020 2020 2020 2074 786e 5f70 6172 616d         txn_param
+0001fd70: 735b 226d 6178 5072 696f 7269 7479 4665  s["maxPriorityFe
+0001fd80: 6550 6572 4761 7322 5d20 3d20 6f6e 655f  ePerGas"] = one_
+0001fd90: 6777 6569 5f69 6e5f 7765 690a 0a20 2020  gwei_in_wei..   
+0001fda0: 2020 2020 2077 6974 6820 7079 7465 7374       with pytest
+0001fdb0: 2e72 6169 7365 7328 5661 6c75 6545 7272  .raises(ValueErr
+0001fdc0: 6f72 2c20 6d61 7463 683d 2272 6570 6c61  or, match="repla
+0001fdd0: 6365 6d65 6e74 2074 7261 6e73 6163 7469  cement transacti
+0001fde0: 6f6e 2075 6e64 6572 7072 6963 6564 2229  on underpriced")
+0001fdf0: 3a0a 2020 2020 2020 2020 2020 2020 7733  :.            w3
+0001fe00: 2e65 7468 2e72 6570 6c61 6365 5f74 7261  .eth.replace_tra
+0001fe10: 6e73 6163 7469 6f6e 2874 786e 5f68 6173  nsaction(txn_has
+0001fe20: 682c 2074 786e 5f70 6172 616d 7329 0a0a  h, txn_params)..
+0001fe30: 2020 2020 6465 6620 7465 7374 5f65 7468      def test_eth
+0001fe40: 5f72 6570 6c61 6365 5f74 7261 6e73 6163  _replace_transac
+0001fe50: 7469 6f6e 5f6e 6f6e 5f65 7869 7374 696e  tion_non_existin
+0001fe60: 675f 7472 616e 7361 6374 696f 6e28 0a20  g_transaction(. 
+0001fe70: 2020 2020 2020 2073 656c 662c 2077 333a         self, w3:
+0001fe80: 2022 5765 6233 222c 2075 6e6c 6f63 6b65   "Web3", unlocke
+0001fe90: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
+0001fea0: 7970 653a 2043 6865 636b 7375 6d41 6464  ype: ChecksumAdd
+0001feb0: 7265 7373 0a20 2020 2029 202d 3e20 4e6f  ress.    ) -> No
+0001fec0: 6e65 3a0a 2020 2020 2020 2020 7478 6e5f  ne:.        txn_
+0001fed0: 7061 7261 6d73 3a20 5478 5061 7261 6d73  params: TxParams
+0001fee0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+0001fef0: 2022 6672 6f6d 223a 2075 6e6c 6f63 6b65   "from": unlocke
+0001ff00: 645f 6163 636f 756e 745f 6475 616c 5f74  d_account_dual_t
+0001ff10: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
+0001ff20: 2022 746f 223a 2075 6e6c 6f63 6b65 645f   "to": unlocked_
+0001ff30: 6163 636f 756e 745f 6475 616c 5f74 7970  account_dual_typ
+0001ff40: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
+0001ff50: 7661 6c75 6522 3a20 5765 6928 3129 2c0a  value": Wei(1),.
+0001ff60: 2020 2020 2020 2020 2020 2020 2267 6173              "gas
+0001ff70: 223a 2032 3130 3030 2c0a 2020 2020 2020  ": 21000,.      
+0001ff80: 2020 2020 2020 226d 6178 4665 6550 6572        "maxFeePer
+0001ff90: 4761 7322 3a20 7733 2e74 6f5f 7765 6928  Gas": w3.to_wei(
+0001ffa0: 332c 2022 6777 6569 2229 2c0a 2020 2020  3, "gwei"),.    
+0001ffb0: 2020 2020 2020 2020 226d 6178 5072 696f          "maxPrio
+0001ffc0: 7269 7479 4665 6550 6572 4761 7322 3a20  rityFeePerGas": 
+0001ffd0: 7733 2e74 6f5f 7765 6928 312c 2022 6777  w3.to_wei(1, "gw
+0001ffe0: 6569 2229 2c0a 2020 2020 2020 2020 7d0a  ei"),.        }.
+0001fff0: 2020 2020 2020 2020 7769 7468 2070 7974          with pyt
+00020000: 6573 742e 7261 6973 6573 2854 7261 6e73  est.raises(Trans
+00020010: 6163 7469 6f6e 4e6f 7446 6f75 6e64 293a  actionNotFound):
+00020020: 0a20 2020 2020 2020 2020 2020 2077 332e  .            w3.
+00020030: 6574 682e 7265 706c 6163 655f 7472 616e  eth.replace_tran
+00020040: 7361 6374 696f 6e28 0a20 2020 2020 2020  saction(.       
+00020050: 2020 2020 2020 2020 2048 6578 5374 7228           HexStr(
+00020060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020070: 2020 2020 2022 3078 3938 6538 6363 3039       "0x98e8cc09
+00020080: 6233 3131 3538 3363 3530 3739 6661 3630  b311583c5079fa60
+00020090: 3066 3663 3261 3362 6561 3836 3131 6166  0f6c2a3bea8611af
+000200a0: 3136 3863 3532 6534 6236 3062 3562 3234  168c52e4b60b5b24
+000200b0: 3361 3434 3139 3937 220a 2020 2020 2020  3a441997".      
+000200c0: 2020 2020 2020 2020 2020 292c 0a20 2020            ),.   
+000200d0: 2020 2020 2020 2020 2020 2020 2074 786e               txn
+000200e0: 5f70 6172 616d 732c 0a20 2020 2020 2020  _params,.       
+000200f0: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
+00020100: 7465 7374 5f65 7468 5f72 6570 6c61 6365  test_eth_replace
+00020110: 5f74 7261 6e73 6163 7469 6f6e 5f61 6c72  _transaction_alr
+00020120: 6561 6479 5f6d 696e 6564 280a 2020 2020  eady_mined(.    
+00020130: 2020 2020 7365 6c66 2c20 7733 3a20 2257      self, w3: "W
+00020140: 6562 3322 2c20 756e 6c6f 636b 6564 5f61  eb3", unlocked_a
+00020150: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
+00020160: 3a20 4368 6563 6b73 756d 4164 6472 6573  : ChecksumAddres
+00020170: 730a 2020 2020 2920 2d3e 204e 6f6e 653a  s.    ) -> None:
+00020180: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
+00020190: 616d 733a 2054 7850 6172 616d 7320 3d20  ams: TxParams = 
+000201a0: 7b0a 2020 2020 2020 2020 2020 2020 2266  {.            "f
+000201b0: 726f 6d22 3a20 756e 6c6f 636b 6564 5f61  rom": unlocked_a
+000201c0: 6363 6f75 6e74 5f64 7561 6c5f 7479 7065  ccount_dual_type
+000201d0: 2c0a 2020 2020 2020 2020 2020 2020 2274  ,.            "t
+000201e0: 6f22 3a20 756e 6c6f 636b 6564 5f61 6363  o": unlocked_acc
+000201f0: 6f75 6e74 5f64 7561 6c5f 7479 7065 2c0a  ount_dual_type,.
+00020200: 2020 2020 2020 2020 2020 2020 2276 616c              "val
+00020210: 7565 223a 2057 6569 2831 292c 0a20 2020  ue": Wei(1),.   
+00020220: 2020 2020 2020 2020 2022 6761 7322 3a20           "gas": 
+00020230: 3231 3030 302c 0a20 2020 2020 2020 2020  21000,.         
+00020240: 2020 2022 6d61 7846 6565 5065 7247 6173     "maxFeePerGas
+00020250: 223a 2077 332e 746f 5f77 6569 2832 2c20  ": w3.to_wei(2, 
+00020260: 2267 7765 6922 292c 0a20 2020 2020 2020  "gwei"),.       
+00020270: 2020 2020 2022 6d61 7850 7269 6f72 6974       "maxPriorit
+00020280: 7946 6565 5065 7247 6173 223a 2077 332e  yFeePerGas": w3.
+00020290: 746f 5f77 6569 2831 2c20 2267 7765 6922  to_wei(1, "gwei"
+000202a0: 292c 0a20 2020 2020 2020 207d 0a20 2020  ),.        }.   
+000202b0: 2020 2020 2074 786e 5f68 6173 6820 3d20       txn_hash = 
+000202c0: 7733 2e65 7468 2e73 656e 645f 7472 616e  w3.eth.send_tran
+000202d0: 7361 6374 696f 6e28 7478 6e5f 7061 7261  saction(txn_para
+000202e0: 6d73 290a 2020 2020 2020 2020 7472 793a  ms).        try:
+000202f0: 0a20 2020 2020 2020 2020 2020 2077 332e  .            w3.
+00020300: 6765 7468 2e6d 696e 6572 2e73 7461 7274  geth.miner.start
+00020310: 2829 2020 2320 7479 7065 3a20 6967 6e6f  ()  # type: igno
+00020320: 7265 0a20 2020 2020 2020 2020 2020 2077  re.            w
+00020330: 332e 6574 682e 7761 6974 5f66 6f72 5f74  3.eth.wait_for_t
+00020340: 7261 6e73 6163 7469 6f6e 5f72 6563 6569  ransaction_recei
+00020350: 7074 2874 786e 5f68 6173 682c 2074 696d  pt(txn_hash, tim
+00020360: 656f 7574 3d31 3029 0a20 2020 2020 2020  eout=10).       
+00020370: 2066 696e 616c 6c79 3a0a 2020 2020 2020   finally:.      
+00020380: 2020 2020 2020 7733 2e67 6574 682e 6d69        w3.geth.mi
+00020390: 6e65 722e 7374 6f70 2829 2020 2320 7479  ner.stop()  # ty
+000203a0: 7065 3a20 6967 6e6f 7265 0a0a 2020 2020  pe: ignore..    
+000203b0: 2020 2020 7478 6e5f 7061 7261 6d73 5b22      txn_params["
+000203c0: 6d61 7846 6565 5065 7247 6173 225d 203d  maxFeePerGas"] =
+000203d0: 2077 332e 746f 5f77 6569 2833 2c20 2267   w3.to_wei(3, "g
+000203e0: 7765 6922 290a 2020 2020 2020 2020 7478  wei").        tx
+000203f0: 6e5f 7061 7261 6d73 5b22 6d61 7850 7269  n_params["maxPri
+00020400: 6f72 6974 7946 6565 5065 7247 6173 225d  orityFeePerGas"]
+00020410: 203d 2077 332e 746f 5f77 6569 2832 2c20   = w3.to_wei(2, 
+00020420: 2267 7765 6922 290a 2020 2020 2020 2020  "gwei").        
+00020430: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
+00020440: 6573 2856 616c 7565 4572 726f 722c 206d  es(ValueError, m
+00020450: 6174 6368 3d22 5375 7070 6c69 6564 2074  atch="Supplied t
+00020460: 7261 6e73 6163 7469 6f6e 2077 6974 6820  ransaction with 
+00020470: 6861 7368 2229 3a0a 2020 2020 2020 2020  hash"):.        
+00020480: 2020 2020 7733 2e65 7468 2e72 6570 6c61      w3.eth.repla
+00020490: 6365 5f74 7261 6e73 6163 7469 6f6e 2874  ce_transaction(t
+000204a0: 786e 5f68 6173 682c 2074 786e 5f70 6172  xn_hash, txn_par
+000204b0: 616d 7329 0a0a 2020 2020 6465 6620 7465  ams)..    def te
+000204c0: 7374 5f65 7468 5f72 6570 6c61 6365 5f74  st_eth_replace_t
+000204d0: 7261 6e73 6163 7469 6f6e 5f69 6e63 6f72  ransaction_incor
+000204e0: 7265 6374 5f6e 6f6e 6365 280a 2020 2020  rect_nonce(.    
+000204f0: 2020 2020 7365 6c66 2c20 7733 3a20 2257      self, w3: "W
+00020500: 6562 3322 2c20 756e 6c6f 636b 6564 5f61  eb3", unlocked_a
+00020510: 6363 6f75 6e74 3a20 4368 6563 6b73 756d  ccount: Checksum
+00020520: 4164 6472 6573 730a 2020 2020 2920 2d3e  Address.    ) ->
+00020530: 204e 6f6e 653a 0a20 2020 2020 2020 2074   None:.        t
+00020540: 786e 5f70 6172 616d 733a 2054 7850 6172  xn_params: TxPar
+00020550: 616d 7320 3d20 7b0a 2020 2020 2020 2020  ams = {.        
+00020560: 2020 2020 2266 726f 6d22 3a20 756e 6c6f      "from": unlo
+00020570: 636b 6564 5f61 6363 6f75 6e74 2c0a 2020  cked_account,.  
+00020580: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
+00020590: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+000205a0: 2c0a 2020 2020 2020 2020 2020 2020 2276  ,.            "v
+000205b0: 616c 7565 223a 2057 6569 2831 292c 0a20  alue": Wei(1),. 
+000205c0: 2020 2020 2020 2020 2020 2022 6761 7322             "gas"
+000205d0: 3a20 3231 3030 302c 0a20 2020 2020 2020  : 21000,.       
+000205e0: 2020 2020 2022 6d61 7846 6565 5065 7247       "maxFeePerG
+000205f0: 6173 223a 2077 332e 746f 5f77 6569 2832  as": w3.to_wei(2
+00020600: 2c20 2267 7765 6922 292c 0a20 2020 2020  , "gwei"),.     
+00020610: 2020 2020 2020 2022 6d61 7850 7269 6f72         "maxPrior
+00020620: 6974 7946 6565 5065 7247 6173 223a 2077  ityFeePerGas": w
+00020630: 332e 746f 5f77 6569 2831 2c20 2267 7765  3.to_wei(1, "gwe
+00020640: 6922 292c 0a20 2020 2020 2020 207d 0a20  i"),.        }. 
+00020650: 2020 2020 2020 2074 786e 5f68 6173 6820         txn_hash 
+00020660: 3d20 7733 2e65 7468 2e73 656e 645f 7472  = w3.eth.send_tr
+00020670: 616e 7361 6374 696f 6e28 7478 6e5f 7061  ansaction(txn_pa
+00020680: 7261 6d73 290a 2020 2020 2020 2020 7478  rams).        tx
+00020690: 6e20 3d20 7733 2e65 7468 2e67 6574 5f74  n = w3.eth.get_t
+000206a0: 7261 6e73 6163 7469 6f6e 2874 786e 5f68  ransaction(txn_h
+000206b0: 6173 6829 0a0a 2020 2020 2020 2020 7478  ash)..        tx
+000206c0: 6e5f 7061 7261 6d73 5b22 6d61 7846 6565  n_params["maxFee
+000206d0: 5065 7247 6173 225d 203d 2077 332e 746f  PerGas"] = w3.to
+000206e0: 5f77 6569 2833 2c20 2267 7765 6922 290a  _wei(3, "gwei").
+000206f0: 2020 2020 2020 2020 7478 6e5f 7061 7261          txn_para
+00020700: 6d73 5b22 6d61 7850 7269 6f72 6974 7946  ms["maxPriorityF
+00020710: 6565 5065 7247 6173 225d 203d 2077 332e  eePerGas"] = w3.
+00020720: 746f 5f77 6569 2832 2c20 2267 7765 6922  to_wei(2, "gwei"
+00020730: 290a 2020 2020 2020 2020 7478 6e5f 7061  ).        txn_pa
+00020740: 7261 6d73 5b22 6e6f 6e63 6522 5d20 3d20  rams["nonce"] = 
+00020750: 4e6f 6e63 6528 7478 6e5b 226e 6f6e 6365  Nonce(txn["nonce
+00020760: 225d 202b 2031 290a 2020 2020 2020 2020  "] + 1).        
+00020770: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
+00020780: 6573 2856 616c 7565 4572 726f 7229 3a0a  es(ValueError):.
+00020790: 2020 2020 2020 2020 2020 2020 7733 2e65              w3.e
+000207a0: 7468 2e72 6570 6c61 6365 5f74 7261 6e73  th.replace_trans
+000207b0: 6163 7469 6f6e 2874 786e 5f68 6173 682c  action(txn_hash,
+000207c0: 2074 786e 5f70 6172 616d 7329 0a0a 2020   txn_params)..  
+000207d0: 2020 6465 6620 7465 7374 5f65 7468 5f72    def test_eth_r
+000207e0: 6570 6c61 6365 5f74 7261 6e73 6163 7469  eplace_transacti
+000207f0: 6f6e 5f67 6173 5f70 7269 6365 5f74 6f6f  on_gas_price_too
+00020800: 5f6c 6f77 280a 2020 2020 2020 2020 7365  _low(.        se
+00020810: 6c66 2c20 7733 3a20 2257 6562 3322 2c20  lf, w3: "Web3", 
+00020820: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+00020830: 5f64 7561 6c5f 7479 7065 3a20 4368 6563  _dual_type: Chec
+00020840: 6b73 756d 4164 6472 6573 730a 2020 2020  ksumAddress.    
+00020850: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+00020860: 2020 2074 786e 5f70 6172 616d 733a 2054     txn_params: T
+00020870: 7850 6172 616d 7320 3d20 7b0a 2020 2020  xParams = {.    
+00020880: 2020 2020 2020 2020 2266 726f 6d22 3a20          "from": 
+00020890: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+000208a0: 5f64 7561 6c5f 7479 7065 2c0a 2020 2020  _dual_type,.    
+000208b0: 2020 2020 2020 2020 2274 6f22 3a20 756e          "to": un
+000208c0: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
+000208d0: 7561 6c5f 7479 7065 2c0a 2020 2020 2020  ual_type,.      
+000208e0: 2020 2020 2020 2276 616c 7565 223a 2057        "value": W
+000208f0: 6569 2831 292c 0a20 2020 2020 2020 2020  ei(1),.         
+00020900: 2020 2022 6761 7322 3a20 3231 3030 302c     "gas": 21000,
+00020910: 0a20 2020 2020 2020 2020 2020 2022 6761  .            "ga
+00020920: 7350 7269 6365 223a 2077 332e 746f 5f77  sPrice": w3.to_w
+00020930: 6569 2832 2c20 2267 7765 6922 292c 0a20  ei(2, "gwei"),. 
+00020940: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00020950: 2074 786e 5f68 6173 6820 3d20 7733 2e65   txn_hash = w3.e
+00020960: 7468 2e73 656e 645f 7472 616e 7361 6374  th.send_transact
+00020970: 696f 6e28 7478 6e5f 7061 7261 6d73 290a  ion(txn_params).
+00020980: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
+00020990: 616d 735b 2267 6173 5072 6963 6522 5d20  ams["gasPrice"] 
+000209a0: 3d20 7733 2e74 6f5f 7765 6928 312c 2022  = w3.to_wei(1, "
+000209b0: 6777 6569 2229 0a20 2020 2020 2020 2077  gwei").        w
+000209c0: 6974 6820 7079 7465 7374 2e72 6169 7365  ith pytest.raise
+000209d0: 7328 5661 6c75 6545 7272 6f72 293a 0a20  s(ValueError):. 
+000209e0: 2020 2020 2020 2020 2020 2077 332e 6574             w3.et
+000209f0: 682e 7265 706c 6163 655f 7472 616e 7361  h.replace_transa
+00020a00: 6374 696f 6e28 7478 6e5f 6861 7368 2c20  ction(txn_hash, 
+00020a10: 7478 6e5f 7061 7261 6d73 290a 0a20 2020  txn_params)..   
+00020a20: 2064 6566 2074 6573 745f 6574 685f 7265   def test_eth_re
+00020a30: 706c 6163 655f 7472 616e 7361 6374 696f  place_transactio
+00020a40: 6e5f 6761 735f 7072 6963 655f 6465 6661  n_gas_price_defa
+00020a50: 756c 7469 6e67 5f6d 696e 696d 756d 280a  ulting_minimum(.
+00020a60: 2020 2020 2020 2020 7365 6c66 2c20 7733          self, w3
+00020a70: 3a20 2257 6562 3322 2c20 756e 6c6f 636b  : "Web3", unlock
+00020a80: 6564 5f61 6363 6f75 6e74 3a20 4368 6563  ed_account: Chec
+00020a90: 6b73 756d 4164 6472 6573 730a 2020 2020  ksumAddress.    
+00020aa0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+00020ab0: 2020 2067 6173 5f70 7269 6365 203d 2077     gas_price = w
+00020ac0: 332e 746f 5f77 6569 2831 2c20 2267 7765  3.to_wei(1, "gwe
+00020ad0: 6922 290a 0a20 2020 2020 2020 2074 786e  i")..        txn
+00020ae0: 5f70 6172 616d 733a 2054 7850 6172 616d  _params: TxParam
+00020af0: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
+00020b00: 2020 2266 726f 6d22 3a20 756e 6c6f 636b    "from": unlock
+00020b10: 6564 5f61 6363 6f75 6e74 2c0a 2020 2020  ed_account,.    
+00020b20: 2020 2020 2020 2020 2274 6f22 3a20 756e          "to": un
+00020b30: 6c6f 636b 6564 5f61 6363 6f75 6e74 2c0a  locked_account,.
+00020b40: 2020 2020 2020 2020 2020 2020 2276 616c              "val
+00020b50: 7565 223a 2057 6569 2831 292c 0a20 2020  ue": Wei(1),.   
+00020b60: 2020 2020 2020 2020 2022 6761 7322 3a20           "gas": 
+00020b70: 3231 3030 302c 0a20 2020 2020 2020 2020  21000,.         
+00020b80: 2020 2022 6761 7350 7269 6365 223a 2067     "gasPrice": g
+00020b90: 6173 5f70 7269 6365 2c0a 2020 2020 2020  as_price,.      
+00020ba0: 2020 7d0a 2020 2020 2020 2020 7478 6e5f    }.        txn_
+00020bb0: 6861 7368 203d 2077 332e 6574 682e 7365  hash = w3.eth.se
+00020bc0: 6e64 5f74 7261 6e73 6163 7469 6f6e 2874  nd_transaction(t
+00020bd0: 786e 5f70 6172 616d 7329 0a0a 2020 2020  xn_params)..    
+00020be0: 2020 2020 7478 6e5f 7061 7261 6d73 2e70      txn_params.p
+00020bf0: 6f70 2822 6761 7350 7269 6365 2229 0a20  op("gasPrice"). 
+00020c00: 2020 2020 2020 2072 6570 6c61 6365 5f74         replace_t
+00020c10: 786e 5f68 6173 6820 3d20 7733 2e65 7468  xn_hash = w3.eth
+00020c20: 2e72 6570 6c61 6365 5f74 7261 6e73 6163  .replace_transac
+00020c30: 7469 6f6e 2874 786e 5f68 6173 682c 2074  tion(txn_hash, t
+00020c40: 786e 5f70 6172 616d 7329 0a20 2020 2020  xn_params).     
+00020c50: 2020 2072 6570 6c61 6365 5f74 786e 203d     replace_txn =
+00020c60: 2077 332e 6574 682e 6765 745f 7472 616e   w3.eth.get_tran
+00020c70: 7361 6374 696f 6e28 7265 706c 6163 655f  saction(replace_
+00020c80: 7478 6e5f 6861 7368 290a 0a20 2020 2020  txn_hash)..     
+00020c90: 2020 2061 7373 6572 7420 7265 706c 6163     assert replac
+00020ca0: 655f 7478 6e5b 2267 6173 5072 6963 6522  e_txn["gasPrice"
+00020cb0: 5d20 3d3d 206d 6174 682e 6365 696c 280a  ] == math.ceil(.
+00020cc0: 2020 2020 2020 2020 2020 2020 6761 735f              gas_
+00020cd0: 7072 6963 6520 2a20 312e 3132 350a 2020  price * 1.125.  
+00020ce0: 2020 2020 2020 2920 2023 206d 696e 696d        )  # minim
+00020cf0: 756d 2067 6173 2070 7269 6365 0a0a 2020  um gas price..  
+00020d00: 2020 6465 6620 7465 7374 5f65 7468 5f72    def test_eth_r
+00020d10: 6570 6c61 6365 5f74 7261 6e73 6163 7469  eplace_transacti
+00020d20: 6f6e 5f67 6173 5f70 7269 6365 5f64 6566  on_gas_price_def
+00020d30: 6175 6c74 696e 675f 7374 7261 7465 6779  aulting_strategy
+00020d40: 5f68 6967 6865 7228 0a20 2020 2020 2020  _higher(.       
+00020d50: 2073 656c 662c 2077 333a 2022 5765 6233   self, w3: "Web3
+00020d60: 222c 2075 6e6c 6f63 6b65 645f 6163 636f  ", unlocked_acco
+00020d70: 756e 743a 2043 6865 636b 7375 6d41 6464  unt: ChecksumAdd
+00020d80: 7265 7373 0a20 2020 2029 202d 3e20 4e6f  ress.    ) -> No
+00020d90: 6e65 3a0a 2020 2020 2020 2020 7478 6e5f  ne:.        txn_
+00020da0: 7061 7261 6d73 3a20 5478 5061 7261 6d73  params: TxParams
+00020db0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+00020dc0: 2022 6672 6f6d 223a 2075 6e6c 6f63 6b65   "from": unlocke
+00020dd0: 645f 6163 636f 756e 742c 0a20 2020 2020  d_account,.     
+00020de0: 2020 2020 2020 2022 746f 223a 2075 6e6c         "to": unl
+00020df0: 6f63 6b65 645f 6163 636f 756e 742c 0a20  ocked_account,. 
+00020e00: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
+00020e10: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
+00020e20: 2020 2020 2020 2020 2267 6173 223a 2032          "gas": 2
+00020e30: 3130 3030 2c0a 2020 2020 2020 2020 2020  1000,.          
+00020e40: 2020 2267 6173 5072 6963 6522 3a20 7733    "gasPrice": w3
+00020e50: 2e74 6f5f 7765 6928 312c 2022 6777 6569  .to_wei(1, "gwei
+00020e60: 2229 2c0a 2020 2020 2020 2020 7d0a 2020  "),.        }.  
+00020e70: 2020 2020 2020 7478 6e5f 6861 7368 203d        txn_hash =
+00020e80: 2077 332e 6574 682e 7365 6e64 5f74 7261   w3.eth.send_tra
+00020e90: 6e73 6163 7469 6f6e 2874 786e 5f70 6172  nsaction(txn_par
+00020ea0: 616d 7329 0a0a 2020 2020 2020 2020 7477  ams)..        tw
+00020eb0: 6f5f 6777 6569 5f69 6e5f 7765 6920 3d20  o_gwei_in_wei = 
+00020ec0: 7733 2e74 6f5f 7765 6928 322c 2022 6777  w3.to_wei(2, "gw
+00020ed0: 6569 2229 0a0a 2020 2020 2020 2020 6465  ei")..        de
+00020ee0: 6620 6869 6768 6572 5f67 6173 5f70 7269  f higher_gas_pri
+00020ef0: 6365 5f73 7472 6174 6567 7928 7733 3a20  ce_strategy(w3: 
+00020f00: 2257 6562 3322 2c20 7478 6e3a 2054 7850  "Web3", txn: TxP
+00020f10: 6172 616d 7329 202d 3e20 5765 693a 0a20  arams) -> Wei:. 
+00020f20: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00020f30: 6e20 7477 6f5f 6777 6569 5f69 6e5f 7765  n two_gwei_in_we
+00020f40: 690a 0a20 2020 2020 2020 2077 332e 6574  i..        w3.et
+00020f50: 682e 7365 745f 6761 735f 7072 6963 655f  h.set_gas_price_
+00020f60: 7374 7261 7465 6779 2868 6967 6865 725f  strategy(higher_
+00020f70: 6761 735f 7072 6963 655f 7374 7261 7465  gas_price_strate
+00020f80: 6779 290a 0a20 2020 2020 2020 2074 786e  gy)..        txn
+00020f90: 5f70 6172 616d 732e 706f 7028 2267 6173  _params.pop("gas
+00020fa0: 5072 6963 6522 290a 2020 2020 2020 2020  Price").        
+00020fb0: 7265 706c 6163 655f 7478 6e5f 6861 7368  replace_txn_hash
+00020fc0: 203d 2077 332e 6574 682e 7265 706c 6163   = w3.eth.replac
+00020fd0: 655f 7472 616e 7361 6374 696f 6e28 7478  e_transaction(tx
+00020fe0: 6e5f 6861 7368 2c20 7478 6e5f 7061 7261  n_hash, txn_para
+00020ff0: 6d73 290a 2020 2020 2020 2020 7265 706c  ms).        repl
+00021000: 6163 655f 7478 6e20 3d20 7733 2e65 7468  ace_txn = w3.eth
+00021010: 2e67 6574 5f74 7261 6e73 6163 7469 6f6e  .get_transaction
+00021020: 2872 6570 6c61 6365 5f74 786e 5f68 6173  (replace_txn_has
+00021030: 6829 0a20 2020 2020 2020 2061 7373 6572  h).        asser
+00021040: 7420 280a 2020 2020 2020 2020 2020 2020  t (.            
+00021050: 7265 706c 6163 655f 7478 6e5b 2267 6173  replace_txn["gas
+00021060: 5072 6963 6522 5d20 3d3d 2074 776f 5f67  Price"] == two_g
+00021070: 7765 695f 696e 5f77 6569 0a20 2020 2020  wei_in_wei.     
+00021080: 2020 2029 2020 2320 5374 7261 7465 6779     )  # Strategy
+00021090: 2070 726f 7669 6465 7320 6869 6768 6572   provides higher
+000210a0: 2067 6173 2070 7269 6365 0a20 2020 2020   gas price.     
+000210b0: 2020 2077 332e 6574 682e 7365 745f 6761     w3.eth.set_ga
+000210c0: 735f 7072 6963 655f 7374 7261 7465 6779  s_price_strategy
+000210d0: 284e 6f6e 6529 2020 2320 7265 7365 7420  (None)  # reset 
+000210e0: 7374 7261 7465 6779 0a0a 2020 2020 6465  strategy..    de
+000210f0: 6620 7465 7374 5f65 7468 5f72 6570 6c61  f test_eth_repla
+00021100: 6365 5f74 7261 6e73 6163 7469 6f6e 5f67  ce_transaction_g
+00021110: 6173 5f70 7269 6365 5f64 6566 6175 6c74  as_price_default
+00021120: 696e 675f 7374 7261 7465 6779 5f6c 6f77  ing_strategy_low
+00021130: 6572 280a 2020 2020 2020 2020 7365 6c66  er(.        self
+00021140: 2c20 7733 3a20 2257 6562 3322 2c20 756e  , w3: "Web3", un
+00021150: 6c6f 636b 6564 5f61 6363 6f75 6e74 3a20  locked_account: 
+00021160: 4368 6563 6b73 756d 4164 6472 6573 730a  ChecksumAddress.
+00021170: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+00021180: 2020 2020 2020 2067 6173 5f70 7269 6365         gas_price
+00021190: 203d 2077 332e 746f 5f77 6569 2832 2c20   = w3.to_wei(2, 
+000211a0: 2267 7765 6922 290a 0a20 2020 2020 2020  "gwei")..       
+000211b0: 2074 786e 5f70 6172 616d 733a 2054 7850   txn_params: TxP
+000211c0: 6172 616d 7320 3d20 7b0a 2020 2020 2020  arams = {.      
+000211d0: 2020 2020 2020 2266 726f 6d22 3a20 756e        "from": un
+000211e0: 6c6f 636b 6564 5f61 6363 6f75 6e74 2c0a  locked_account,.
+000211f0: 2020 2020 2020 2020 2020 2020 2274 6f22              "to"
+00021200: 3a20 756e 6c6f 636b 6564 5f61 6363 6f75  : unlocked_accou
+00021210: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
+00021220: 2276 616c 7565 223a 2057 6569 2831 292c  "value": Wei(1),
+00021230: 0a20 2020 2020 2020 2020 2020 2022 6761  .            "ga
+00021240: 7322 3a20 3231 3030 302c 0a20 2020 2020  s": 21000,.     
+00021250: 2020 2020 2020 2022 6761 7350 7269 6365         "gasPrice
+00021260: 223a 2067 6173 5f70 7269 6365 2c0a 2020  ": gas_price,.  
+00021270: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00021280: 7478 6e5f 6861 7368 203d 2077 332e 6574  txn_hash = w3.et
+00021290: 682e 7365 6e64 5f74 7261 6e73 6163 7469  h.send_transacti
+000212a0: 6f6e 2874 786e 5f70 6172 616d 7329 0a0a  on(txn_params)..
+000212b0: 2020 2020 2020 2020 6465 6620 6c6f 7765          def lowe
+000212c0: 725f 6761 735f 7072 6963 655f 7374 7261  r_gas_price_stra
+000212d0: 7465 6779 2877 333a 2022 5765 6233 222c  tegy(w3: "Web3",
+000212e0: 2074 786e 3a20 5478 5061 7261 6d73 2920   txn: TxParams) 
+000212f0: 2d3e 2057 6569 3a0a 2020 2020 2020 2020  -> Wei:.        
+00021300: 2020 2020 7265 7475 726e 2077 332e 746f      return w3.to
+00021310: 5f77 6569 2831 2c20 2267 7765 6922 290a  _wei(1, "gwei").
+00021320: 0a20 2020 2020 2020 2077 332e 6574 682e  .        w3.eth.
+00021330: 7365 745f 6761 735f 7072 6963 655f 7374  set_gas_price_st
+00021340: 7261 7465 6779 286c 6f77 6572 5f67 6173  rategy(lower_gas
+00021350: 5f70 7269 6365 5f73 7472 6174 6567 7929  _price_strategy)
+00021360: 0a0a 2020 2020 2020 2020 7478 6e5f 7061  ..        txn_pa
+00021370: 7261 6d73 2e70 6f70 2822 6761 7350 7269  rams.pop("gasPri
+00021380: 6365 2229 0a20 2020 2020 2020 2072 6570  ce").        rep
+00021390: 6c61 6365 5f74 786e 5f68 6173 6820 3d20  lace_txn_hash = 
+000213a0: 7733 2e65 7468 2e72 6570 6c61 6365 5f74  w3.eth.replace_t
+000213b0: 7261 6e73 6163 7469 6f6e 2874 786e 5f68  ransaction(txn_h
+000213c0: 6173 682c 2074 786e 5f70 6172 616d 7329  ash, txn_params)
+000213d0: 0a20 2020 2020 2020 2072 6570 6c61 6365  .        replace
+000213e0: 5f74 786e 203d 2077 332e 6574 682e 6765  _txn = w3.eth.ge
+000213f0: 745f 7472 616e 7361 6374 696f 6e28 7265  t_transaction(re
+00021400: 706c 6163 655f 7478 6e5f 6861 7368 290a  place_txn_hash).
+00021410: 2020 2020 2020 2020 2320 5374 7261 7465          # Strate
+00021420: 6779 2070 726f 7669 6465 7320 6c6f 7765  gy provides lowe
+00021430: 7220 6761 7320 7072 6963 6520 2d20 6d69  r gas price - mi
+00021440: 6e69 6d75 6d20 7072 6566 6572 7265 640a  nimum preferred.
+00021450: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
+00021460: 6570 6c61 6365 5f74 786e 5b22 6761 7350  eplace_txn["gasP
+00021470: 7269 6365 225d 203d 3d20 6d61 7468 2e63  rice"] == math.c
+00021480: 6569 6c28 6761 735f 7072 6963 6520 2a20  eil(gas_price * 
+00021490: 312e 3132 3529 0a20 2020 2020 2020 2077  1.125).        w
+000214a0: 332e 6574 682e 7365 745f 6761 735f 7072  3.eth.set_gas_pr
+000214b0: 6963 655f 7374 7261 7465 6779 284e 6f6e  ice_strategy(Non
+000214c0: 6529 2020 2320 7265 7365 7420 7374 7261  e)  # reset stra
+000214d0: 7465 6779 0a0a 2020 2020 6465 6620 7465  tegy..    def te
+000214e0: 7374 5f65 7468 5f6d 6f64 6966 795f 7472  st_eth_modify_tr
+000214f0: 616e 7361 6374 696f 6e5f 6c65 6761 6379  ansaction_legacy
+00021500: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+00021510: 7733 3a20 2257 6562 3322 2c20 756e 6c6f  w3: "Web3", unlo
+00021520: 636b 6564 5f61 6363 6f75 6e74 3a20 4368  cked_account: Ch
+00021530: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
+00021540: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+00021550: 2020 2020 2074 786e 5f70 6172 616d 733a       txn_params:
+00021560: 2054 7850 6172 616d 7320 3d20 7b0a 2020   TxParams = {.  
+00021570: 2020 2020 2020 2020 2020 2266 726f 6d22            "from"
+00021580: 3a20 756e 6c6f 636b 6564 5f61 6363 6f75  : unlocked_accou
+00021590: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
+000215a0: 2274 6f22 3a20 756e 6c6f 636b 6564 5f61  "to": unlocked_a
+000215b0: 6363 6f75 6e74 2c0a 2020 2020 2020 2020  ccount,.        
+000215c0: 2020 2020 2276 616c 7565 223a 2057 6569      "value": Wei
+000215d0: 2831 292c 0a20 2020 2020 2020 2020 2020  (1),.           
+000215e0: 2022 6761 7322 3a20 3231 3030 302c 0a20   "gas": 21000,. 
+000215f0: 2020 2020 2020 2020 2020 2022 6761 7350             "gasP
+00021600: 7269 6365 223a 2077 332e 746f 5f77 6569  rice": w3.to_wei
+00021610: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00021620: 2020 312c 2022 6777 6569 220a 2020 2020    1, "gwei".    
+00021630: 2020 2020 2020 2020 292c 2020 2320 6d75          ),  # mu
+00021640: 7374 2062 6520 6772 6561 7465 7220 7468  st be greater th
+00021650: 616e 2062 6173 655f 6665 6520 706f 7374  an base_fee post
+00021660: 204c 6f6e 646f 6e0a 2020 2020 2020 2020   London.        
+00021670: 7d0a 2020 2020 2020 2020 7478 6e5f 6861  }.        txn_ha
+00021680: 7368 203d 2077 332e 6574 682e 7365 6e64  sh = w3.eth.send
+00021690: 5f74 7261 6e73 6163 7469 6f6e 2874 786e  _transaction(txn
+000216a0: 5f70 6172 616d 7329 0a0a 2020 2020 2020  _params)..      
+000216b0: 2020 6d6f 6469 6669 6564 5f74 786e 5f68    modified_txn_h
+000216c0: 6173 6820 3d20 7733 2e65 7468 2e6d 6f64  ash = w3.eth.mod
+000216d0: 6966 795f 7472 616e 7361 6374 696f 6e28  ify_transaction(
+000216e0: 0a20 2020 2020 2020 2020 2020 2074 786e  .            txn
+000216f0: 5f68 6173 682c 2067 6173 5072 6963 653d  _hash, gasPrice=
+00021700: 2863 6173 7428 696e 742c 2074 786e 5f70  (cast(int, txn_p
+00021710: 6172 616d 735b 2267 6173 5072 6963 6522  arams["gasPrice"
+00021720: 5d29 202a 2032 292c 2076 616c 7565 3d32  ]) * 2), value=2
+00021730: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00021740: 2020 206d 6f64 6966 6965 645f 7478 6e20     modified_txn 
+00021750: 3d20 7733 2e65 7468 2e67 6574 5f74 7261  = w3.eth.get_tra
+00021760: 6e73 6163 7469 6f6e 286d 6f64 6966 6965  nsaction(modifie
+00021770: 645f 7478 6e5f 6861 7368 290a 0a20 2020  d_txn_hash)..   
+00021780: 2020 2020 2061 7373 6572 7420 6973 5f73       assert is_s
+00021790: 616d 655f 6164 6472 6573 7328 0a20 2020  ame_address(.   
+000217a0: 2020 2020 2020 2020 206d 6f64 6966 6965           modifie
+000217b0: 645f 7478 6e5b 2266 726f 6d22 5d2c 2063  d_txn["from"], c
+000217c0: 6173 7428 4368 6563 6b73 756d 4164 6472  ast(ChecksumAddr
+000217d0: 6573 732c 2074 786e 5f70 6172 616d 735b  ess, txn_params[
+000217e0: 2266 726f 6d22 5d29 0a20 2020 2020 2020  "from"]).       
+000217f0: 2029 0a20 2020 2020 2020 2061 7373 6572   ).        asser
+00021800: 7420 6973 5f73 616d 655f 6164 6472 6573  t is_same_addres
+00021810: 7328 0a20 2020 2020 2020 2020 2020 206d  s(.            m
+00021820: 6f64 6966 6965 645f 7478 6e5b 2274 6f22  odified_txn["to"
+00021830: 5d2c 2063 6173 7428 4368 6563 6b73 756d  ], cast(Checksum
+00021840: 4164 6472 6573 732c 2074 786e 5f70 6172  Address, txn_par
+00021850: 616d 735b 2274 6f22 5d29 0a20 2020 2020  ams["to"]).     
+00021860: 2020 2029 0a20 2020 2020 2020 2061 7373     ).        ass
+00021870: 6572 7420 6d6f 6469 6669 6564 5f74 786e  ert modified_txn
+00021880: 5b22 7661 6c75 6522 5d20 3d3d 2032 0a20  ["value"] == 2. 
+00021890: 2020 2020 2020 2061 7373 6572 7420 6d6f         assert mo
+000218a0: 6469 6669 6564 5f74 786e 5b22 6761 7322  dified_txn["gas"
+000218b0: 5d20 3d3d 2032 3130 3030 0a20 2020 2020  ] == 21000.     
+000218c0: 2020 2061 7373 6572 7420 6d6f 6469 6669     assert modifi
+000218d0: 6564 5f74 786e 5b22 6761 7350 7269 6365  ed_txn["gasPrice
+000218e0: 225d 203d 3d20 6361 7374 2869 6e74 2c20  "] == cast(int, 
+000218f0: 7478 6e5f 7061 7261 6d73 5b22 6761 7350  txn_params["gasP
+00021900: 7269 6365 225d 2920 2a20 320a 0a20 2020  rice"]) * 2..   
+00021910: 2064 6566 2074 6573 745f 6574 685f 6d6f   def test_eth_mo
+00021920: 6469 6679 5f74 7261 6e73 6163 7469 6f6e  dify_transaction
+00021930: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+00021940: 7733 3a20 2257 6562 3322 2c20 756e 6c6f  w3: "Web3", unlo
+00021950: 636b 6564 5f61 6363 6f75 6e74 3a20 4368  cked_account: Ch
+00021960: 6563 6b73 756d 4164 6472 6573 730a 2020  ecksumAddress.  
+00021970: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+00021980: 2020 2020 2074 786e 5f70 6172 616d 733a       txn_params:
+00021990: 2054 7850 6172 616d 7320 3d20 7b0a 2020   TxParams = {.  
+000219a0: 2020 2020 2020 2020 2020 2266 726f 6d22            "from"
+000219b0: 3a20 756e 6c6f 636b 6564 5f61 6363 6f75  : unlocked_accou
+000219c0: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
+000219d0: 2274 6f22 3a20 756e 6c6f 636b 6564 5f61  "to": unlocked_a
+000219e0: 6363 6f75 6e74 2c0a 2020 2020 2020 2020  ccount,.        
+000219f0: 2020 2020 2276 616c 7565 223a 2057 6569      "value": Wei
+00021a00: 2831 292c 0a20 2020 2020 2020 2020 2020  (1),.           
+00021a10: 2022 6761 7322 3a20 3231 3030 302c 0a20   "gas": 21000,. 
+00021a20: 2020 2020 2020 2020 2020 2022 6d61 7850             "maxP
+00021a30: 7269 6f72 6974 7946 6565 5065 7247 6173  riorityFeePerGas
+00021a40: 223a 2077 332e 746f 5f77 6569 2831 2c20  ": w3.to_wei(1, 
+00021a50: 2267 7765 6922 292c 0a20 2020 2020 2020  "gwei"),.       
+00021a60: 2020 2020 2022 6d61 7846 6565 5065 7247       "maxFeePerG
+00021a70: 6173 223a 2077 332e 746f 5f77 6569 2832  as": w3.to_wei(2
+00021a80: 2c20 2267 7765 6922 292c 0a20 2020 2020  , "gwei"),.     
+00021a90: 2020 207d 0a20 2020 2020 2020 2074 786e     }.        txn
+00021aa0: 5f68 6173 6820 3d20 7733 2e65 7468 2e73  _hash = w3.eth.s
+00021ab0: 656e 645f 7472 616e 7361 6374 696f 6e28  end_transaction(
+00021ac0: 7478 6e5f 7061 7261 6d73 290a 0a20 2020  txn_params)..   
+00021ad0: 2020 2020 206d 6f64 6966 6965 645f 7478       modified_tx
+00021ae0: 6e5f 6861 7368 203d 2077 332e 6574 682e  n_hash = w3.eth.
+00021af0: 6d6f 6469 6679 5f74 7261 6e73 6163 7469  modify_transacti
+00021b00: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
+00021b10: 7478 6e5f 6861 7368 2c0a 2020 2020 2020  txn_hash,.      
+00021b20: 2020 2020 2020 7661 6c75 653d 322c 0a20        value=2,. 
+00021b30: 2020 2020 2020 2020 2020 206d 6178 5072             maxPr
+00021b40: 696f 7269 7479 4665 6550 6572 4761 733d  iorityFeePerGas=
+00021b50: 2863 6173 7428 5765 692c 2074 786e 5f70  (cast(Wei, txn_p
+00021b60: 6172 616d 735b 226d 6178 5072 696f 7269  arams["maxPriori
+00021b70: 7479 4665 6550 6572 4761 7322 5d29 202a  tyFeePerGas"]) *
+00021b80: 2032 292c 0a20 2020 2020 2020 2020 2020   2),.           
+00021b90: 206d 6178 4665 6550 6572 4761 733d 2863   maxFeePerGas=(c
+00021ba0: 6173 7428 5765 692c 2074 786e 5f70 6172  ast(Wei, txn_par
+00021bb0: 616d 735b 226d 6178 4665 6550 6572 4761  ams["maxFeePerGa
+00021bc0: 7322 5d29 202a 2032 292c 0a20 2020 2020  s"]) * 2),.     
+00021bd0: 2020 2029 0a20 2020 2020 2020 206d 6f64     ).        mod
+00021be0: 6966 6965 645f 7478 6e20 3d20 7733 2e65  ified_txn = w3.e
+00021bf0: 7468 2e67 6574 5f74 7261 6e73 6163 7469  th.get_transacti
+00021c00: 6f6e 286d 6f64 6966 6965 645f 7478 6e5f  on(modified_txn_
+00021c10: 6861 7368 290a 0a20 2020 2020 2020 2061  hash)..        a
+00021c20: 7373 6572 7420 6973 5f73 616d 655f 6164  ssert is_same_ad
+00021c30: 6472 6573 7328 0a20 2020 2020 2020 2020  dress(.         
+00021c40: 2020 206d 6f64 6966 6965 645f 7478 6e5b     modified_txn[
+00021c50: 2266 726f 6d22 5d2c 2063 6173 7428 4368  "from"], cast(Ch
+00021c60: 6563 6b73 756d 4164 6472 6573 732c 2074  ecksumAddress, t
+00021c70: 786e 5f70 6172 616d 735b 2266 726f 6d22  xn_params["from"
+00021c80: 5d29 0a20 2020 2020 2020 2029 0a20 2020  ]).        ).   
+00021c90: 2020 2020 2061 7373 6572 7420 6973 5f73       assert is_s
+00021ca0: 616d 655f 6164 6472 6573 7328 0a20 2020  ame_address(.   
+00021cb0: 2020 2020 2020 2020 206d 6f64 6966 6965           modifie
+00021cc0: 645f 7478 6e5b 2274 6f22 5d2c 2063 6173  d_txn["to"], cas
+00021cd0: 7428 4368 6563 6b73 756d 4164 6472 6573  t(ChecksumAddres
+00021ce0: 732c 2074 786e 5f70 6172 616d 735b 2274  s, txn_params["t
+00021cf0: 6f22 5d29 0a20 2020 2020 2020 2029 0a20  o"]).        ). 
+00021d00: 2020 2020 2020 2061 7373 6572 7420 6d6f         assert mo
+00021d10: 6469 6669 6564 5f74 786e 5b22 7661 6c75  dified_txn["valu
+00021d20: 6522 5d20 3d3d 2032 0a20 2020 2020 2020  e"] == 2.       
+00021d30: 2061 7373 6572 7420 6d6f 6469 6669 6564   assert modified
+00021d40: 5f74 786e 5b22 6761 7322 5d20 3d3d 2032  _txn["gas"] == 2
+00021d50: 3130 3030 0a20 2020 2020 2020 2061 7373  1000.        ass
+00021d60: 6572 7420 280a 2020 2020 2020 2020 2020  ert (.          
+00021d70: 2020 6d6f 6469 6669 6564 5f74 786e 5b22    modified_txn["
+00021d80: 6d61 7850 7269 6f72 6974 7946 6565 5065  maxPriorityFeePe
+00021d90: 7247 6173 225d 0a20 2020 2020 2020 2020  rGas"].         
+00021da0: 2020 203d 3d20 6361 7374 2857 6569 2c20     == cast(Wei, 
+00021db0: 7478 6e5f 7061 7261 6d73 5b22 6d61 7850  txn_params["maxP
+00021dc0: 7269 6f72 6974 7946 6565 5065 7247 6173  riorityFeePerGas
+00021dd0: 225d 2920 2a20 320a 2020 2020 2020 2020  "]) * 2.        
+00021de0: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+00021df0: 206d 6f64 6966 6965 645f 7478 6e5b 226d   modified_txn["m
+00021e00: 6178 4665 6550 6572 4761 7322 5d20 3d3d  axFeePerGas"] ==
+00021e10: 2063 6173 7428 5765 692c 2074 786e 5f70   cast(Wei, txn_p
+00021e20: 6172 616d 735b 226d 6178 4665 6550 6572  arams["maxFeePer
+00021e30: 4761 7322 5d29 202a 2032 0a0a 2020 2020  Gas"]) * 2..    
+00021e40: 6465 6620 7465 7374 5f65 7468 5f73 656e  def test_eth_sen
+00021e50: 645f 7261 775f 7472 616e 7361 6374 696f  d_raw_transactio
+00021e60: 6e28 0a20 2020 2020 2020 2073 656c 662c  n(.        self,
+00021e70: 2077 333a 2022 5765 6233 222c 2075 6e6c   w3: "Web3", unl
+00021e80: 6f63 6b65 645f 6163 636f 756e 743a 2043  ocked_account: C
+00021e90: 6865 636b 7375 6d41 6464 7265 7373 0a20  hecksumAddress. 
+00021ea0: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
+00021eb0: 2020 2020 2020 7369 676e 6564 5f74 7820        signed_tx 
+00021ec0: 3d20 7733 2e65 7468 2e61 6363 6f75 6e74  = w3.eth.account
+00021ed0: 2e73 6967 6e5f 7472 616e 7361 6374 696f  .sign_transactio
+00021ee0: 6e28 0a20 2020 2020 2020 2020 2020 207b  n(.            {
+00021ef0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00021f00: 2022 746f 223a 2022 3078 3030 3030 3030   "to": "0x000000
+00021f10: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+00021f20: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+00021f30: 3030 222c 0a20 2020 2020 2020 2020 2020  00",.           
+00021f40: 2020 2020 2022 7661 6c75 6522 3a20 302c       "value": 0,
+00021f50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00021f60: 2022 6e6f 6e63 6522 3a20 7733 2e65 7468   "nonce": w3.eth
+00021f70: 2e67 6574 5f74 7261 6e73 6163 7469 6f6e  .get_transaction
+00021f80: 5f63 6f75 6e74 2875 6e6c 6f63 6b65 645f  _count(unlocked_
+00021f90: 6163 636f 756e 7429 2c0a 2020 2020 2020  account),.      
+00021fa0: 2020 2020 2020 2020 2020 2267 6173 223a            "gas":
+00021fb0: 2032 3130 3030 2c0a 2020 2020 2020 2020   21000,.        
+00021fc0: 2020 2020 2020 2020 226d 6178 4665 6550          "maxFeeP
+00021fd0: 6572 4761 7322 3a20 3130 3030 3030 3030  erGas": 10000000
+00021fe0: 3030 2c0a 2020 2020 2020 2020 2020 2020  00,.            
+00021ff0: 2020 2020 226d 6178 5072 696f 7269 7479      "maxPriority
+00022000: 4665 6550 6572 4761 7322 3a20 3130 3030  FeePerGas": 1000
+00022010: 3030 3030 3030 2c0a 2020 2020 2020 2020  000000,.        
+00022020: 2020 2020 2020 2020 2263 6861 696e 4964          "chainId
+00022030: 223a 2031 3331 3237 3733 3232 3934 3035  ": 1312773229405
+00022040: 3337 2c0a 2020 2020 2020 2020 2020 2020  37,.            
+00022050: 7d2c 0a20 2020 2020 2020 2020 2020 2023  },.            #
+00022060: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
+00022070: 7420 7072 6976 6174 6520 6b65 793a 0a20  t private key:. 
+00022080: 2020 2020 2020 2020 2020 2022 3078 3339             "0x39
+00022090: 3266 3633 6137 3962 3166 6638 3737 3438  2f63a79b1ff87748
+000220a0: 3435 6633 6661 3639 6465 3461 3133 3830  45f3fa69de4a1380
+000220b0: 3061 3539 6537 3038 3366 3531 3837 6631  0a59e7083f5187f1
+000220c0: 3535 3866 3037 3937 6164 3066 3031 222c  558f0797ad0f01",
+000220d0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+000220e0: 2020 2074 786e 5f68 6173 6820 3d20 7733     txn_hash = w3
+000220f0: 2e65 7468 2e73 656e 645f 7261 775f 7472  .eth.send_raw_tr
+00022100: 616e 7361 6374 696f 6e28 7369 676e 6564  ansaction(signed
+00022110: 5f74 782e 7261 7754 7261 6e73 6163 7469  _tx.rawTransacti
+00022120: 6f6e 290a 2020 2020 2020 2020 6173 7365  on).        asse
+00022130: 7274 2074 786e 5f68 6173 6820 3d3d 2073  rt txn_hash == s
+00022140: 6967 6e65 645f 7478 2e68 6173 680a 0a20  igned_tx.hash.. 
+00022150: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
+00022160: 6361 6c6c 2873 656c 662c 2077 333a 2022  call(self, w3: "
+00022170: 5765 6233 222c 206d 6174 685f 636f 6e74  Web3", math_cont
+00022180: 7261 6374 3a20 2243 6f6e 7472 6163 7422  ract: "Contract"
+00022190: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+000221a0: 2020 2063 6f69 6e62 6173 6520 3d20 7733     coinbase = w3
+000221b0: 2e65 7468 2e63 6f69 6e62 6173 650a 2020  .eth.coinbase.  
+000221c0: 2020 2020 2020 7478 6e5f 7061 7261 6d73        txn_params
+000221d0: 203d 206d 6174 685f 636f 6e74 7261 6374   = math_contract
+000221e0: 2e5f 7072 6570 6172 655f 7472 616e 7361  ._prepare_transa
+000221f0: 6374 696f 6e28 0a20 2020 2020 2020 2020  ction(.         
+00022200: 2020 2066 6e5f 6e61 6d65 3d22 6164 6422     fn_name="add"
+00022210: 2c0a 2020 2020 2020 2020 2020 2020 666e  ,.            fn
+00022220: 5f61 7267 733d 2837 2c20 3131 292c 0a20  _args=(7, 11),. 
+00022230: 2020 2020 2020 2020 2020 2074 7261 6e73             trans
+00022240: 6163 7469 6f6e 3d7b 2266 726f 6d22 3a20  action={"from": 
+00022250: 636f 696e 6261 7365 2c20 2274 6f22 3a20  coinbase, "to": 
+00022260: 6d61 7468 5f63 6f6e 7472 6163 742e 6164  math_contract.ad
+00022270: 6472 6573 737d 2c0a 2020 2020 2020 2020  dress},.        
+00022280: 290a 2020 2020 2020 2020 6361 6c6c 5f72  ).        call_r
+00022290: 6573 756c 7420 3d20 7733 2e65 7468 2e63  esult = w3.eth.c
+000222a0: 616c 6c28 7478 6e5f 7061 7261 6d73 290a  all(txn_params).
+000222b0: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+000222c0: 735f 7374 7269 6e67 2863 616c 6c5f 7265  s_string(call_re
+000222d0: 7375 6c74 290a 2020 2020 2020 2020 2872  sult).        (r
+000222e0: 6573 756c 742c 2920 3d20 7733 2e63 6f64  esult,) = w3.cod
+000222f0: 6563 2e64 6563 6f64 6528 5b22 7569 6e74  ec.decode(["uint
+00022300: 3235 3622 5d2c 2063 616c 6c5f 7265 7375  256"], call_resu
+00022310: 6c74 290a 2020 2020 2020 2020 6173 7365  lt).        asse
+00022320: 7274 2072 6573 756c 7420 3d3d 2031 380a  rt result == 18.
+00022330: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
+00022340: 685f 6361 6c6c 5f77 6974 685f 6f76 6572  h_call_with_over
+00022350: 7269 6465 5f63 6f64 6528 0a20 2020 2020  ride_code(.     
+00022360: 2020 2073 656c 662c 2077 333a 2022 5765     self, w3: "We
+00022370: 6233 222c 2072 6576 6572 745f 636f 6e74  b3", revert_cont
+00022380: 7261 6374 3a20 2243 6f6e 7472 6163 7422  ract: "Contract"
+00022390: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+000223a0: 2020 2020 2020 2020 636f 696e 6261 7365          coinbase
+000223b0: 203d 2077 332e 6574 682e 636f 696e 6261   = w3.eth.coinba
+000223c0: 7365 0a20 2020 2020 2020 2074 786e 5f70  se.        txn_p
+000223d0: 6172 616d 7320 3d20 7265 7665 7274 5f63  arams = revert_c
+000223e0: 6f6e 7472 6163 742e 5f70 7265 7061 7265  ontract._prepare
+000223f0: 5f74 7261 6e73 6163 7469 6f6e 280a 2020  _transaction(.  
+00022400: 2020 2020 2020 2020 2020 666e 5f6e 616d            fn_nam
+00022410: 653d 226e 6f72 6d61 6c46 756e 6374 696f  e="normalFunctio
+00022420: 6e22 2c0a 2020 2020 2020 2020 2020 2020  n",.            
+00022430: 7472 616e 7361 6374 696f 6e3d 7b22 6672  transaction={"fr
+00022440: 6f6d 223a 2063 6f69 6e62 6173 652c 2022  om": coinbase, "
+00022450: 746f 223a 2072 6576 6572 745f 636f 6e74  to": revert_cont
+00022460: 7261 6374 2e61 6464 7265 7373 7d2c 0a20  ract.address},. 
+00022470: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00022480: 2063 616c 6c5f 7265 7375 6c74 203d 2077   call_result = w
+00022490: 332e 6574 682e 6361 6c6c 2874 786e 5f70  3.eth.call(txn_p
+000224a0: 6172 616d 7329 0a20 2020 2020 2020 2028  arams).        (
+000224b0: 7265 7375 6c74 2c29 203d 2077 332e 636f  result,) = w3.co
+000224c0: 6465 632e 6465 636f 6465 285b 2262 6f6f  dec.decode(["boo
+000224d0: 6c22 5d2c 2063 616c 6c5f 7265 7375 6c74  l"], call_result
+000224e0: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+000224f0: 2072 6573 756c 7420 6973 2054 7275 650a   result is True.
+00022500: 0a20 2020 2020 2020 2023 206f 7665 7272  .        # overr
+00022510: 6964 6520 7275 6e74 696d 6520 6279 7465  ide runtime byte
+00022520: 636f 6465 3a20 606e 6f72 6d61 6c46 756e  code: `normalFun
+00022530: 6374 696f 6e60 2072 6574 7572 6e73 2060  ction` returns `
+00022540: 6661 6c73 6560 0a20 2020 2020 2020 206f  false`.        o
+00022550: 7665 7272 6964 655f 636f 6465 203d 2048  verride_code = H
+00022560: 6578 5374 7228 0a20 2020 2020 2020 2020  exStr(.         
+00022570: 2020 2022 3078 3630 3830 3630 3430 3532     "0x6080604052
+00022580: 3334 3830 3135 3630 3066 3537 3630 3030  348015600f576000
+00022590: 3830 6664 3562 3530 3630 3034 3336 3130  80fd5b5060043610
+000225a0: 3630 3363 3537 3630 3030 3335 3630 6530  603c5760003560e0
+000225b0: 3163 3830 3633 3138 3563 3338 6134 3134  1c8063185c38a414
+000225c0: 3630 3431 3537 3830 3633 6330 3661 3937  6041578063c06a97
+000225d0: 6362 3134 3630 3439 3537 3830 3633 6436  cb146049578063d6
+000225e0: 3765 3462 3834 3134 3630 3531 3537 3562  7e4b84146051575b
+000225f0: 3630 3030 3830 6664 3562 3630 3437 3630  600080fd5b604760
+00022600: 3731 3536 3562 3030 3562 3630 3466 3630  71565b005b604f60
+00022610: 6466 3536 3562 3030 3562 3630 3537 3630  df565b005b605760
+00022620: 6534 3536 3562 3630 3430 3531 3830 3832  e4565b6040518082
+00022630: 3135 3135 3135 3135 3831 3532 3630 3230  1515151581526020
+00022640: 3031 3931 3530 3530 3630 3430 3531 3830  0191505060405180
+00022650: 3931 3033 3930 6633 3562 3630 3430 3531  910390f35b604051
+00022660: 3766 3038 6333 3739 6130 3030 3030 3030  7f08c379a0000000
+00022670: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+00022680: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+00022690: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+000226a0: 3030 3831 3532 3630 3034 3031 3830 3830  0081526004018080
+000226b0: 3630 3230 3031 3832 3831 3033 3832 3532  6020018281038252
+000226c0: 3630 3162 3831 3532 3630 3230 3031 3830  601b815260200180
+000226d0: 3766 3436 3735 3665 3633 3734 3639 3666  7f46756e6374696f
+000226e0: 3665 3230 3638 3631 3733 3230 3632 3635  6e20686173206265
+000226f0: 3635 3665 3230 3732 3635 3736 3635 3732  656e207265766572
+00022700: 3734 3635 3634 3265 3030 3030 3030 3030  7465642e00000000
+00022710: 3030 3831 3532 3530 3630 3230 3031 3931  0081525060200191
+00022720: 3530 3530 3630 3430 3531 3830 3931 3033  5050604051809103
+00022730: 3930 6664 3562 3630 3030 3830 6664 3562  90fd5b600080fd5b
+00022740: 3630 3030 3830 3930 3530 3930 3536 6665  60008090509056fe
+00022750: 6132 3634 3639 3730 3636 3733 3538 3232  a264697066735822
+00022760: 3132 3230 6262 3731 6539 6539 6132 6532  1220bb71e9e9a2e2
+00022770: 3731 6364 3066 6265 3833 3335 3234 6133  71cd0fbe833524a3
+00022780: 6561 3637 6466 3935 6632 3565 6131 3361  ea67df95f25ea13a
+00022790: 6566 3562 3061 3736 3166 6135 3262 3533  ef5b0a761fa52b53
+000227a0: 3866 3130 3634 3733 3666 3663 3633 3433  8f1064736f6c6343
+000227b0: 3030 3036 3031 3030 3333 2220 2023 206e  0006010033"  # n
+000227c0: 6f71 613a 2045 3530 310a 2020 2020 2020  oqa: E501.      
+000227d0: 2020 290a 2020 2020 2020 2020 6361 6c6c    ).        call
+000227e0: 5f72 6573 756c 7420 3d20 7733 2e65 7468  _result = w3.eth
+000227f0: 2e63 616c 6c28 0a20 2020 2020 2020 2020  .call(.         
+00022800: 2020 2074 786e 5f70 6172 616d 732c 2022     txn_params, "
+00022810: 6c61 7465 7374 222c 207b 7265 7665 7274  latest", {revert
+00022820: 5f63 6f6e 7472 6163 742e 6164 6472 6573  _contract.addres
+00022830: 733a 207b 2263 6f64 6522 3a20 6f76 6572  s: {"code": over
+00022840: 7269 6465 5f63 6f64 657d 7d0a 2020 2020  ride_code}}.    
+00022850: 2020 2020 290a 2020 2020 2020 2020 2872      ).        (r
+00022860: 6573 756c 742c 2920 3d20 7733 2e63 6f64  esult,) = w3.cod
+00022870: 6563 2e64 6563 6f64 6528 5b22 626f 6f6c  ec.decode(["bool
+00022880: 225d 2c20 6361 6c6c 5f72 6573 756c 7429  "], call_result)
+00022890: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+000228a0: 7265 7375 6c74 2069 7320 4661 6c73 650a  result is False.
+000228b0: 0a20 2020 2020 2020 2023 2074 6573 7420  .        # test 
+000228c0: 6279 7465 730a 0a20 2020 2020 2020 2062  bytes..        b
+000228d0: 7974 6573 5f63 616c 6c5f 7265 7375 6c74  ytes_call_result
+000228e0: 203d 2077 332e 6574 682e 6361 6c6c 280a   = w3.eth.call(.
+000228f0: 2020 2020 2020 2020 2020 2020 7478 6e5f              txn_
+00022900: 7061 7261 6d73 2c0a 2020 2020 2020 2020  params,.        
+00022910: 2020 2020 226c 6174 6573 7422 2c0a 2020      "latest",.  
+00022920: 2020 2020 2020 2020 2020 7b72 6576 6572            {rever
+00022930: 745f 636f 6e74 7261 6374 2e61 6464 7265  t_contract.addre
+00022940: 7373 3a20 7b22 636f 6465 223a 2074 6f5f  ss: {"code": to_
+00022950: 6279 7465 7328 6865 7873 7472 3d6f 7665  bytes(hexstr=ove
+00022960: 7272 6964 655f 636f 6465 297d 7d2c 0a20  rride_code)}},. 
+00022970: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00022980: 2028 6279 7465 735f 7265 7375 6c74 2c29   (bytes_result,)
+00022990: 203d 2077 332e 636f 6465 632e 6465 636f   = w3.codec.deco
+000229a0: 6465 285b 2262 6f6f 6c22 5d2c 2062 7974  de(["bool"], byt
+000229b0: 6573 5f63 616c 6c5f 7265 7375 6c74 290a  es_call_result).
+000229c0: 2020 2020 2020 2020 6173 7365 7274 2062          assert b
+000229d0: 7974 6573 5f72 6573 756c 7420 6973 2046  ytes_result is F
+000229e0: 616c 7365 0a0a 2020 2020 4070 7974 6573  alse..    @pytes
+000229f0: 742e 6d61 726b 2e70 6172 616d 6574 7269  t.mark.parametri
+00022a00: 7a65 280a 2020 2020 2020 2020 2270 6172  ze(.        "par
+00022a10: 616d 7322 2c0a 2020 2020 2020 2020 280a  ams",.        (.
+00022a20: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00022a30: 2020 2020 2020 2020 2020 2020 2020 226e                "n
+00022a40: 6f6e 6365 223a 2031 2c20 2023 2069 6e74  once": 1,  # int
+00022a50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00022a60: 2022 6261 6c61 6e63 6522 3a20 312c 2020   "balance": 1,  
+00022a70: 2320 696e 740a 2020 2020 2020 2020 2020  # int.          
+00022a80: 2020 2020 2020 2263 6f64 6522 3a20 4865        "code": He
+00022a90: 7853 7472 2822 3078 2229 2c20 2023 2048  xStr("0x"),  # H
+00022aa0: 6578 5374 720a 2020 2020 2020 2020 2020  exStr.          
+00022ab0: 2020 2020 2020 2320 7769 7468 2073 7461        # with sta
+00022ac0: 7465 0a20 2020 2020 2020 2020 2020 2020  te.             
+00022ad0: 2020 2022 7374 6174 6522 3a20 7b48 6578     "state": {Hex
+00022ae0: 5374 7228 6622 3078 7b27 3030 2720 2a20  Str(f"0x{'00' * 
+00022af0: 3332 7d22 293a 2048 6578 5374 7228 6622  32}"): HexStr(f"
+00022b00: 3078 7b27 3030 2720 2a20 3332 7d22 297d  0x{'00' * 32}")}
+00022b10: 2c0a 2020 2020 2020 2020 2020 2020 7d2c  ,.            },
+00022b20: 0a20 2020 2020 2020 2020 2020 207b 0a20  .            {. 
+00022b30: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00022b40: 6e6f 6e63 6522 3a20 4865 7853 7472 2822  nonce": HexStr("
+00022b50: 3078 3122 292c 2020 2320 4865 7853 7472  0x1"),  # HexStr
+00022b60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00022b70: 2022 6261 6c61 6e63 6522 3a20 4865 7853   "balance": HexS
+00022b80: 7472 2822 3078 3122 292c 2020 2320 4865  tr("0x1"),  # He
+00022b90: 7853 7472 0a20 2020 2020 2020 2020 2020  xStr.           
+00022ba0: 2020 2020 2022 636f 6465 223a 2062 225c       "code": b"\
+00022bb0: 7830 3022 2c20 2023 2062 7974 6573 0a20  x00",  # bytes. 
+00022bc0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00022bd0: 2077 6974 6820 7374 6174 6544 6966 660a   with stateDiff.
+00022be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022bf0: 2273 7461 7465 4469 6666 223a 207b 4865  "stateDiff": {He
+00022c00: 7853 7472 2866 2230 787b 2730 3027 202a  xStr(f"0x{'00' *
+00022c10: 2033 327d 2229 3a20 4865 7853 7472 2866   32}"): HexStr(f
+00022c20: 2230 787b 2730 3027 202a 2033 327d 2229  "0x{'00' * 32}")
+00022c30: 7d2c 0a20 2020 2020 2020 2020 2020 207d  },.            }
+00022c40: 2c0a 2020 2020 2020 2020 292c 0a20 2020  ,.        ),.   
+00022c50: 2029 0a20 2020 2064 6566 2074 6573 745f   ).    def test_
+00022c60: 6574 685f 6361 6c6c 5f77 6974 685f 6f76  eth_call_with_ov
+00022c70: 6572 7269 6465 5f70 6172 616d 5f74 7970  erride_param_typ
+00022c80: 655f 6368 6563 6b28 0a20 2020 2020 2020  e_check(.       
+00022c90: 2073 656c 662c 0a20 2020 2020 2020 2077   self,.        w
+00022ca0: 333a 2022 5765 6233 222c 0a20 2020 2020  3: "Web3",.     
+00022cb0: 2020 206d 6174 685f 636f 6e74 7261 6374     math_contract
+00022cc0: 3a20 2243 6f6e 7472 6163 7422 2c0a 2020  : "Contract",.  
+00022cd0: 2020 2020 2020 7061 7261 6d73 3a20 4361        params: Ca
+00022ce0: 6c6c 4f76 6572 7269 6465 5061 7261 6d73  llOverrideParams
+00022cf0: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
+00022d00: 0a20 2020 2020 2020 2074 786e 5f70 6172  .        txn_par
+00022d10: 616d 733a 2054 7850 6172 616d 7320 3d20  ams: TxParams = 
+00022d20: 7b22 6672 6f6d 223a 2077 332e 6574 682e  {"from": w3.eth.
+00022d30: 636f 696e 6261 7365 7d0a 0a20 2020 2020  coinbase}..     
+00022d40: 2020 2023 2061 7373 6572 7420 646f 6573     # assert does
+00022d50: 206e 6f74 2072 6169 7365 0a20 2020 2020   not raise.     
+00022d60: 2020 2077 332e 6574 682e 6361 6c6c 2874     w3.eth.call(t
+00022d70: 786e 5f70 6172 616d 732c 2022 6c61 7465  xn_params, "late
+00022d80: 7374 222c 207b 6d61 7468 5f63 6f6e 7472  st", {math_contr
+00022d90: 6163 742e 6164 6472 6573 733a 2070 6172  act.address: par
+00022da0: 616d 737d 290a 0a20 2020 2064 6566 2074  ams})..    def t
+00022db0: 6573 745f 6574 685f 6361 6c6c 5f77 6974  est_eth_call_wit
+00022dc0: 685f 305f 7265 7375 6c74 280a 2020 2020  h_0_result(.    
+00022dd0: 2020 2020 7365 6c66 2c20 7733 3a20 2257      self, w3: "W
+00022de0: 6562 3322 2c20 6d61 7468 5f63 6f6e 7472  eb3", math_contr
+00022df0: 6163 743a 2022 436f 6e74 7261 6374 220a  act: "Contract".
+00022e00: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+00022e10: 2020 2020 2020 2063 6f69 6e62 6173 6520         coinbase 
+00022e20: 3d20 7733 2e65 7468 2e63 6f69 6e62 6173  = w3.eth.coinbas
+00022e30: 650a 2020 2020 2020 2020 7478 6e5f 7061  e.        txn_pa
+00022e40: 7261 6d73 203d 206d 6174 685f 636f 6e74  rams = math_cont
+00022e50: 7261 6374 2e5f 7072 6570 6172 655f 7472  ract._prepare_tr
+00022e60: 616e 7361 6374 696f 6e28 0a20 2020 2020  ansaction(.     
+00022e70: 2020 2020 2020 2066 6e5f 6e61 6d65 3d22         fn_name="
+00022e80: 6164 6422 2c0a 2020 2020 2020 2020 2020  add",.          
+00022e90: 2020 666e 5f61 7267 733d 2830 2c20 3029    fn_args=(0, 0)
+00022ea0: 2c0a 2020 2020 2020 2020 2020 2020 7472  ,.            tr
+00022eb0: 616e 7361 6374 696f 6e3d 7b22 6672 6f6d  ansaction={"from
+00022ec0: 223a 2063 6f69 6e62 6173 652c 2022 746f  ": coinbase, "to
+00022ed0: 223a 206d 6174 685f 636f 6e74 7261 6374  ": math_contract
+00022ee0: 2e61 6464 7265 7373 7d2c 0a20 2020 2020  .address},.     
+00022ef0: 2020 2029 0a20 2020 2020 2020 2063 616c     ).        cal
+00022f00: 6c5f 7265 7375 6c74 203d 2077 332e 6574  l_result = w3.et
+00022f10: 682e 6361 6c6c 2874 786e 5f70 6172 616d  h.call(txn_param
+00022f20: 7329 0a20 2020 2020 2020 2061 7373 6572  s).        asser
+00022f30: 7420 6973 5f73 7472 696e 6728 6361 6c6c  t is_string(call
+00022f40: 5f72 6573 756c 7429 0a20 2020 2020 2020  _result).       
+00022f50: 2028 7265 7375 6c74 2c29 203d 2077 332e   (result,) = w3.
+00022f60: 636f 6465 632e 6465 636f 6465 285b 2275  codec.decode(["u
+00022f70: 696e 7432 3536 225d 2c20 6361 6c6c 5f72  int256"], call_r
+00022f80: 6573 756c 7429 0a20 2020 2020 2020 2061  esult).        a
+00022f90: 7373 6572 7420 7265 7375 6c74 203d 3d20  ssert result == 
+00022fa0: 300a 0a20 2020 2064 6566 2074 6573 745f  0..    def test_
+00022fb0: 6574 685f 6361 6c6c 5f72 6576 6572 745f  eth_call_revert_
+00022fc0: 7769 7468 5f6d 7367 280a 2020 2020 2020  with_msg(.      
+00022fd0: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+00022fe0: 7733 3a20 2257 6562 3322 2c0a 2020 2020  w3: "Web3",.    
+00022ff0: 2020 2020 7265 7665 7274 5f63 6f6e 7472      revert_contr
+00023000: 6163 743a 2022 436f 6e74 7261 6374 222c  act: "Contract",
+00023010: 0a20 2020 2020 2020 2075 6e6c 6f63 6b65  .        unlocke
+00023020: 645f 6163 636f 756e 743a 2043 6865 636b  d_account: Check
+00023030: 7375 6d41 6464 7265 7373 2c0a 2020 2020  sumAddress,.    
+00023040: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+00023050: 2020 2074 786e 5f70 6172 616d 7320 3d20     txn_params = 
+00023060: 7265 7665 7274 5f63 6f6e 7472 6163 742e  revert_contract.
+00023070: 5f70 7265 7061 7265 5f74 7261 6e73 6163  _prepare_transac
+00023080: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+00023090: 2020 666e 5f6e 616d 653d 2272 6576 6572    fn_name="rever
+000230a0: 7457 6974 684d 6573 7361 6765 222c 0a20  tWithMessage",. 
+000230b0: 2020 2020 2020 2020 2020 2074 7261 6e73             trans
+000230c0: 6163 7469 6f6e 3d7b 0a20 2020 2020 2020  action={.       
+000230d0: 2020 2020 2020 2020 2022 6672 6f6d 223a           "from":
+000230e0: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
+000230f0: 742c 0a20 2020 2020 2020 2020 2020 2020  t,.             
+00023100: 2020 2022 746f 223a 2072 6576 6572 745f     "to": revert_
+00023110: 636f 6e74 7261 6374 2e61 6464 7265 7373  contract.address
+00023120: 2c0a 2020 2020 2020 2020 2020 2020 7d2c  ,.            },
+00023130: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00023140: 2020 2064 6174 6120 3d20 2230 7830 3863     data = "0x08c
+00023150: 3337 3961 3030 3030 3030 3030 3030 3030  379a000000000000
+00023160: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+00023170: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+00023180: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+00023190: 3030 3032 3030 3030 3030 3030 3030 3030  0002000000000000
+000231a0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+000231b0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+000231c0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+000231d0: 3030 3031 6234 3637 3536 6536 3337 3436  0001b46756e63746
+000231e0: 3936 6636 6532 3036 3836 3137 3332 3036  96f6e20686173206
+000231f0: 3236 3536 3536 6532 3037 3236 3537 3636  265656e207265766
+00023200: 3537 3237 3436 3536 3432 6530 3030 3030  5727465642e00000
+00023210: 3030 3030 3022 2020 2320 6e6f 7161 3a20  00000"  # noqa: 
+00023220: 4535 3031 0a20 2020 2020 2020 2077 6974  E501.        wit
+00023230: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
+00023240: 0a20 2020 2020 2020 2020 2020 2043 6f6e  .            Con
+00023250: 7472 6163 744c 6f67 6963 4572 726f 722c  tractLogicError,
+00023260: 206d 6174 6368 3d22 6578 6563 7574 696f   match="executio
+00023270: 6e20 7265 7665 7274 6564 3a20 4675 6e63  n reverted: Func
+00023280: 7469 6f6e 2068 6173 2062 6565 6e20 7265  tion has been re
+00023290: 7665 7274 6564 220a 2020 2020 2020 2020  verted".        
+000232a0: 2920 6173 2065 7863 696e 666f 3a0a 2020  ) as excinfo:.  
+000232b0: 2020 2020 2020 2020 2020 7733 2e65 7468            w3.eth
+000232c0: 2e63 616c 6c28 7478 6e5f 7061 7261 6d73  .call(txn_params
+000232d0: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+000232e0: 2065 7863 696e 666f 2e76 616c 7565 2e64   excinfo.value.d
+000232f0: 6174 6120 3d3d 2064 6174 610a 0a20 2020  ata == data..   
+00023300: 2064 6566 2074 6573 745f 6574 685f 6361   def test_eth_ca
+00023310: 6c6c 5f72 6576 6572 745f 7769 7468 6f75  ll_revert_withou
+00023320: 745f 6d73 6728 0a20 2020 2020 2020 2073  t_msg(.        s
+00023330: 656c 662c 0a20 2020 2020 2020 2077 333a  elf,.        w3:
+00023340: 2022 5765 6233 222c 0a20 2020 2020 2020   "Web3",.       
+00023350: 2072 6576 6572 745f 636f 6e74 7261 6374   revert_contract
+00023360: 3a20 2243 6f6e 7472 6163 7422 2c0a 2020  : "Contract",.  
+00023370: 2020 2020 2020 756e 6c6f 636b 6564 5f61        unlocked_a
+00023380: 6363 6f75 6e74 3a20 4368 6563 6b73 756d  ccount: Checksum
+00023390: 4164 6472 6573 732c 0a20 2020 2029 202d  Address,.    ) -
+000233a0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+000233b0: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
+000233c0: 6573 2843 6f6e 7472 6163 744c 6f67 6963  es(ContractLogic
+000233d0: 4572 726f 722c 206d 6174 6368 3d22 6578  Error, match="ex
+000233e0: 6563 7574 696f 6e20 7265 7665 7274 6564  ecution reverted
+000233f0: 2229 3a0a 2020 2020 2020 2020 2020 2020  "):.            
+00023400: 7478 6e5f 7061 7261 6d73 203d 2072 6576  txn_params = rev
+00023410: 6572 745f 636f 6e74 7261 6374 2e5f 7072  ert_contract._pr
+00023420: 6570 6172 655f 7472 616e 7361 6374 696f  epare_transactio
+00023430: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+00023440: 2020 2066 6e5f 6e61 6d65 3d22 7265 7665     fn_name="reve
+00023450: 7274 5769 7468 6f75 744d 6573 7361 6765  rtWithoutMessage
+00023460: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+00023470: 2020 2074 7261 6e73 6163 7469 6f6e 3d7b     transaction={
+00023480: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023490: 2020 2020 2022 6672 6f6d 223a 2075 6e6c       "from": unl
+000234a0: 6f63 6b65 645f 6163 636f 756e 742c 0a20  ocked_account,. 
+000234b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000234c0: 2020 2022 746f 223a 2072 6576 6572 745f     "to": revert_
+000234d0: 636f 6e74 7261 6374 2e61 6464 7265 7373  contract.address
+000234e0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000234f0: 2020 7d2c 0a20 2020 2020 2020 2020 2020    },.           
+00023500: 2029 0a20 2020 2020 2020 2020 2020 2077   ).            w
+00023510: 332e 6574 682e 6361 6c6c 2874 786e 5f70  3.eth.call(txn_p
+00023520: 6172 616d 7329 0a0a 2020 2020 6465 6620  arams)..    def 
+00023530: 7465 7374 5f65 7468 5f63 616c 6c5f 6375  test_eth_call_cu
+00023540: 7374 6f6d 5f65 7272 6f72 5f72 6576 6572  stom_error_rever
+00023550: 745f 7769 7468 5f6d 7367 280a 2020 2020  t_with_msg(.    
+00023560: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+00023570: 2020 7733 3a20 2257 6562 3322 2c0a 2020    w3: "Web3",.  
+00023580: 2020 2020 2020 7265 7665 7274 5f63 6f6e        revert_con
+00023590: 7472 6163 743a 2022 436f 6e74 7261 6374  tract: "Contract
+000235a0: 222c 0a20 2020 2020 2020 2075 6e6c 6f63  ",.        unloc
+000235b0: 6b65 645f 6163 636f 756e 743a 2043 6865  ked_account: Che
+000235c0: 636b 7375 6d41 6464 7265 7373 2c0a 2020  cksumAddress,.  
+000235d0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+000235e0: 2020 2020 2064 6174 6120 3d20 7265 7665       data = reve
+000235f0: 7274 5f63 6f6e 7472 6163 742e 656e 636f  rt_contract.enco
+00023600: 6465 4142 4928 0a20 2020 2020 2020 2020  deABI(.         
+00023610: 2020 2066 6e5f 6e61 6d65 3d22 556e 6175     fn_name="Unau
+00023620: 7468 6f72 697a 6564 5769 7468 4d65 7373  thorizedWithMess
+00023630: 6167 6522 2c20 6172 6773 3d5b 2259 6f75  age", args=["You
+00023640: 2061 7265 206e 6f74 2061 7574 686f 7269   are not authori
+00023650: 7a65 6422 5d0a 2020 2020 2020 2020 290a  zed"].        ).
+00023660: 2020 2020 2020 2020 7478 6e5f 7061 7261          txn_para
+00023670: 6d73 203d 2072 6576 6572 745f 636f 6e74  ms = revert_cont
+00023680: 7261 6374 2e5f 7072 6570 6172 655f 7472  ract._prepare_tr
+00023690: 616e 7361 6374 696f 6e28 0a20 2020 2020  ansaction(.     
+000236a0: 2020 2020 2020 2066 6e5f 6e61 6d65 3d22         fn_name="
+000236b0: 6375 7374 6f6d 4572 726f 7257 6974 684d  customErrorWithM
+000236c0: 6573 7361 6765 222c 0a20 2020 2020 2020  essage",.       
+000236d0: 2020 2020 2074 7261 6e73 6163 7469 6f6e       transaction
+000236e0: 3d7b 0a20 2020 2020 2020 2020 2020 2020  ={.             
+000236f0: 2020 2022 6672 6f6d 223a 2075 6e6c 6f63     "from": unloc
+00023700: 6b65 645f 6163 636f 756e 742c 0a20 2020  ked_account,.   
+00023710: 2020 2020 2020 2020 2020 2020 2022 746f               "to
+00023720: 223a 2072 6576 6572 745f 636f 6e74 7261  ": revert_contra
+00023730: 6374 2e61 6464 7265 7373 2c0a 2020 2020  ct.address,.    
+00023740: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+00023750: 2020 2029 0a20 2020 2020 2020 2077 6974     ).        wit
+00023760: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
+00023770: 436f 6e74 7261 6374 4375 7374 6f6d 4572  ContractCustomEr
+00023780: 726f 722c 206d 6174 6368 3d64 6174 6129  ror, match=data)
+00023790: 2061 7320 6578 6369 6e66 6f3a 0a20 2020   as excinfo:.   
+000237a0: 2020 2020 2020 2020 2077 332e 6574 682e           w3.eth.
+000237b0: 6361 6c6c 2874 786e 5f70 6172 616d 7329  call(txn_params)
+000237c0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+000237d0: 6578 6369 6e66 6f2e 7661 6c75 652e 6461  excinfo.value.da
+000237e0: 7461 203d 3d20 6461 7461 0a0a 2020 2020  ta == data..    
+000237f0: 6465 6620 7465 7374 5f65 7468 5f63 616c  def test_eth_cal
+00023800: 6c5f 6375 7374 6f6d 5f65 7272 6f72 5f72  l_custom_error_r
+00023810: 6576 6572 745f 7769 7468 6f75 745f 6d73  evert_without_ms
+00023820: 6728 0a20 2020 2020 2020 2073 656c 662c  g(.        self,
+00023830: 0a20 2020 2020 2020 2077 333a 2022 5765  .        w3: "We
+00023840: 6233 222c 0a20 2020 2020 2020 2072 6576  b3",.        rev
+00023850: 6572 745f 636f 6e74 7261 6374 3a20 2243  ert_contract: "C
+00023860: 6f6e 7472 6163 7422 2c0a 2020 2020 2020  ontract",.      
+00023870: 2020 756e 6c6f 636b 6564 5f61 6363 6f75    unlocked_accou
+00023880: 6e74 3a20 4368 6563 6b73 756d 4164 6472  nt: ChecksumAddr
+00023890: 6573 732c 0a20 2020 2029 202d 3e20 4e6f  ess,.    ) -> No
+000238a0: 6e65 3a0a 2020 2020 2020 2020 6461 7461  ne:.        data
+000238b0: 203d 2072 6576 6572 745f 636f 6e74 7261   = revert_contra
+000238c0: 6374 2e65 6e63 6f64 6541 4249 2866 6e5f  ct.encodeABI(fn_
+000238d0: 6e61 6d65 3d22 556e 6175 7468 6f72 697a  name="Unauthoriz
+000238e0: 6564 2229 0a20 2020 2020 2020 2074 786e  ed").        txn
+000238f0: 5f70 6172 616d 7320 3d20 7265 7665 7274  _params = revert
+00023900: 5f63 6f6e 7472 6163 742e 5f70 7265 7061  _contract._prepa
+00023910: 7265 5f74 7261 6e73 6163 7469 6f6e 280a  re_transaction(.
+00023920: 2020 2020 2020 2020 2020 2020 666e 5f6e              fn_n
+00023930: 616d 653d 2263 7573 746f 6d45 7272 6f72  ame="customError
+00023940: 5769 7468 6f75 744d 6573 7361 6765 222c  WithoutMessage",
+00023950: 0a20 2020 2020 2020 2020 2020 2074 7261  .            tra
+00023960: 6e73 6163 7469 6f6e 3d7b 0a20 2020 2020  nsaction={.     
+00023970: 2020 2020 2020 2020 2020 2022 6672 6f6d             "from
+00023980: 223a 2075 6e6c 6f63 6b65 645f 6163 636f  ": unlocked_acco
+00023990: 756e 742c 0a20 2020 2020 2020 2020 2020  unt,.           
+000239a0: 2020 2020 2022 746f 223a 2072 6576 6572       "to": rever
+000239b0: 745f 636f 6e74 7261 6374 2e61 6464 7265  t_contract.addre
+000239c0: 7373 2c0a 2020 2020 2020 2020 2020 2020  ss,.            
+000239d0: 7d2c 0a20 2020 2020 2020 2029 0a20 2020  },.        ).   
+000239e0: 2020 2020 2077 6974 6820 7079 7465 7374       with pytest
+000239f0: 2e72 6169 7365 7328 436f 6e74 7261 6374  .raises(Contract
+00023a00: 4375 7374 6f6d 4572 726f 722c 206d 6174  CustomError, mat
+00023a10: 6368 3d64 6174 6129 2061 7320 6578 6369  ch=data) as exci
+00023a20: 6e66 6f3a 0a20 2020 2020 2020 2020 2020  nfo:.           
+00023a30: 2077 332e 6574 682e 6361 6c6c 2874 786e   w3.eth.call(txn
+00023a40: 5f70 6172 616d 7329 0a20 2020 2020 2020  _params).       
+00023a50: 2061 7373 6572 7420 6578 6369 6e66 6f2e   assert excinfo.
+00023a60: 7661 6c75 652e 6461 7461 203d 3d20 6461  value.data == da
+00023a70: 7461 0a0a 2020 2020 4070 7974 6573 742e  ta..    @pytest.
+00023a80: 6d61 726b 2e70 6172 616d 6574 7269 7a65  mark.parametrize
+00023a90: 280a 2020 2020 2020 2020 2270 616e 6963  (.        "panic
+00023aa0: 5f65 7272 6f72 2c70 6172 616d 7322 2c0a  _error,params",.
+00023ab0: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
+00023ac0: 2020 2020 2020 2822 3031 222c 205b 5d29        ("01", [])
+00023ad0: 2c0a 2020 2020 2020 2020 2020 2020 2822  ,.            ("
+00023ae0: 3131 222c 205b 5d29 2c0a 2020 2020 2020  11", []),.      
+00023af0: 2020 2020 2020 2822 3132 222c 205b 305d        ("12", [0]
+00023b00: 292c 0a20 2020 2020 2020 2020 2020 2028  ),.            (
+00023b10: 2232 3122 2c20 5b2d 315d 292c 0a20 2020  "21", [-1]),.   
+00023b20: 2020 2020 2020 2020 2028 2232 3222 2c20           ("22", 
+00023b30: 5b5d 292c 0a20 2020 2020 2020 2020 2020  []),.           
+00023b40: 2028 2233 3122 2c20 5b5d 292c 0a20 2020   ("31", []),.   
+00023b50: 2020 2020 2020 2020 2028 2233 3222 2c20           ("32", 
+00023b60: 5b5d 292c 0a20 2020 2020 2020 2020 2020  []),.           
+00023b70: 2028 2234 3122 2c20 5b5d 292c 0a20 2020   ("41", []),.   
+00023b80: 2020 2020 2020 2020 2028 2235 3122 2c20           ("51", 
+00023b90: 5b5d 292c 0a20 2020 2020 2020 2029 2c0a  []),.        ),.
+00023ba0: 2020 2020 290a 2020 2020 6465 6620 7465      ).    def te
+00023bb0: 7374 5f63 6f6e 7472 6163 745f 7061 6e69  st_contract_pani
+00023bc0: 635f 6572 726f 7273 280a 2020 2020 2020  c_errors(.      
+00023bd0: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+00023be0: 7733 3a20 2257 6562 3322 2c0a 2020 2020  w3: "Web3",.    
+00023bf0: 2020 2020 7061 6e69 635f 6572 726f 7273      panic_errors
+00023c00: 5f63 6f6e 7472 6163 743a 2022 436f 6e74  _contract: "Cont
+00023c10: 7261 6374 222c 0a20 2020 2020 2020 2070  ract",.        p
+00023c20: 616e 6963 5f65 7272 6f72 3a20 7374 722c  anic_error: str,
+00023c30: 0a20 2020 2020 2020 2070 6172 616d 733a  .        params:
+00023c40: 204c 6973 745b 416e 795d 2c0a 2020 2020   List[Any],.    
+00023c50: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+00023c60: 2020 206d 6574 686f 6420 3d20 6765 7461     method = geta
+00023c70: 7474 7228 0a20 2020 2020 2020 2020 2020  ttr(.           
+00023c80: 2070 616e 6963 5f65 7272 6f72 735f 636f   panic_errors_co
+00023c90: 6e74 7261 6374 2e66 756e 6374 696f 6e73  ntract.functions
+00023ca0: 2c0a 2020 2020 2020 2020 2020 2020 6622  ,.            f"
+00023cb0: 6572 726f 7243 6f64 657b 7061 6e69 635f  errorCode{panic_
+00023cc0: 6572 726f 727d 222c 0a20 2020 2020 2020  error}",.       
+00023cd0: 2029 0a20 2020 2020 2020 2065 7272 6f72   ).        error
+00023ce0: 5f6d 7367 203d 2050 414e 4943 5f45 5252  _msg = PANIC_ERR
+00023cf0: 4f52 5f43 4f44 4553 5b70 616e 6963 5f65  OR_CODES[panic_e
+00023d00: 7272 6f72 5d0a 0a20 2020 2020 2020 2077  rror]..        w
+00023d10: 6974 6820 7079 7465 7374 2e72 6169 7365  ith pytest.raise
+00023d20: 7328 436f 6e74 7261 6374 5061 6e69 6345  s(ContractPanicE
+00023d30: 7272 6f72 2c20 6d61 7463 683d 7265 2e65  rror, match=re.e
+00023d40: 7363 6170 6528 6572 726f 725f 6d73 6729  scape(error_msg)
+00023d50: 293a 0a20 2020 2020 2020 2020 2020 206d  ):.            m
+00023d60: 6574 686f 6428 2a70 6172 616d 7329 2e63  ethod(*params).c
+00023d70: 616c 6c28 290a 0a20 2020 2064 6566 2074  all()..    def t
+00023d80: 6573 745f 6574 685f 6361 6c6c 5f6f 6666  est_eth_call_off
+00023d90: 6368 6169 6e5f 6c6f 6f6b 7570 280a 2020  chain_lookup(.  
+00023da0: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+00023db0: 2020 2020 7733 3a20 2257 6562 3322 2c0a      w3: "Web3",.
+00023dc0: 2020 2020 2020 2020 6f66 6663 6861 696e          offchain
+00023dd0: 5f6c 6f6f 6b75 705f 636f 6e74 7261 6374  _lookup_contract
+00023de0: 3a20 2243 6f6e 7472 6163 7422 2c0a 2020  : "Contract",.  
+00023df0: 2020 2020 2020 756e 6c6f 636b 6564 5f61        unlocked_a
+00023e00: 6363 6f75 6e74 3a20 4368 6563 6b73 756d  ccount: Checksum
+00023e10: 4164 6472 6573 732c 0a20 2020 2020 2020  Address,.       
+00023e20: 206d 6f6e 6b65 7970 6174 6368 3a20 224d   monkeypatch: "M
+00023e30: 6f6e 6b65 7950 6174 6368 222c 0a20 2020  onkeyPatch",.   
+00023e40: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
+00023e50: 2020 2020 6e6f 726d 616c 697a 6564 5f63      normalized_c
+00023e60: 6f6e 7472 6163 745f 6164 6472 6573 7320  ontract_address 
+00023e70: 3d20 746f 5f68 6578 5f69 665f 6279 7465  = to_hex_if_byte
+00023e80: 7328 0a20 2020 2020 2020 2020 2020 206f  s(.            o
+00023e90: 6666 6368 6169 6e5f 6c6f 6f6b 7570 5f63  ffchain_lookup_c
+00023ea0: 6f6e 7472 6163 742e 6164 6472 6573 730a  ontract.address.
+00023eb0: 2020 2020 2020 2020 292e 6c6f 7765 7228          ).lower(
+00023ec0: 290a 2020 2020 2020 2020 6d6f 636b 5f6f  ).        mock_o
+00023ed0: 6666 6368 6169 6e5f 6c6f 6f6b 7570 5f72  ffchain_lookup_r
+00023ee0: 6571 7565 7374 5f72 6573 706f 6e73 6528  equest_response(
+00023ef0: 0a20 2020 2020 2020 2020 2020 206d 6f6e  .            mon
+00023f00: 6b65 7970 6174 6368 2c0a 2020 2020 2020  keypatch,.      
+00023f10: 2020 2020 2020 6d6f 636b 6564 5f72 6571        mocked_req
+00023f20: 7565 7374 5f75 726c 3d66 2268 7474 7073  uest_url=f"https
+00023f30: 3a2f 2f77 6562 332e 7079 2f67 6174 6577  ://web3.py/gatew
+00023f40: 6179 2f7b 6e6f 726d 616c 697a 6564 5f63  ay/{normalized_c
+00023f50: 6f6e 7472 6163 745f 6164 6472 6573 737d  ontract_address}
+00023f60: 2f7b 4f46 4643 4841 494e 5f4c 4f4f 4b55  /{OFFCHAIN_LOOKU
+00023f70: 505f 5445 5354 5f44 4154 417d 2e6a 736f  P_TEST_DATA}.jso
+00023f80: 6e22 2c20 2023 206e 6f71 613a 2045 3530  n",  # noqa: E50
+00023f90: 310a 2020 2020 2020 2020 2020 2020 6d6f  1.            mo
+00023fa0: 636b 6564 5f6a 736f 6e5f 6461 7461 3d57  cked_json_data=W
+00023fb0: 4542 3350 595f 4153 5f48 4558 4259 5445  EB3PY_AS_HEXBYTE
+00023fc0: 532c 0a20 2020 2020 2020 2029 0a20 2020  S,.        ).   
+00023fd0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+00023fe0: 6f66 6663 6861 696e 5f6c 6f6f 6b75 705f  offchain_lookup_
+00023ff0: 636f 6e74 7261 6374 2e66 756e 6374 696f  contract.functio
+00024000: 6e73 2e74 6573 744f 6666 6368 6169 6e4c  ns.testOffchainL
+00024010: 6f6f 6b75 7028 0a20 2020 2020 2020 2020  ookup(.         
+00024020: 2020 204f 4646 4348 4149 4e5f 4c4f 4f4b     OFFCHAIN_LOOK
+00024030: 5550 5f54 4553 545f 4441 5441 0a20 2020  UP_TEST_DATA.   
+00024040: 2020 2020 2029 2e63 616c 6c28 290a 2020       ).call().  
+00024050: 2020 2020 2020 6173 7365 7274 2077 332e        assert w3.
+00024060: 636f 6465 632e 6465 636f 6465 285b 2273  codec.decode(["s
+00024070: 7472 696e 6722 5d2c 2072 6573 706f 6e73  tring"], respons
+00024080: 6529 5b30 5d20 3d3d 2022 7765 6233 7079  e)[0] == "web3py
+00024090: 220a 0a20 2020 2064 6566 2074 6573 745f  "..    def test_
+000240a0: 6574 685f 6361 6c6c 5f6f 6666 6368 6169  eth_call_offchai
+000240b0: 6e5f 6c6f 6f6b 7570 5f72 6169 7365 735f  n_lookup_raises_
+000240c0: 7768 656e 5f63 6369 705f 7265 6164 5f69  when_ccip_read_i
+000240d0: 735f 6469 7361 626c 6564 280a 2020 2020  s_disabled(.    
+000240e0: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+000240f0: 2020 7733 3a20 2257 6562 3322 2c0a 2020    w3: "Web3",.  
+00024100: 2020 2020 2020 6f66 6663 6861 696e 5f6c        offchain_l
+00024110: 6f6f 6b75 705f 636f 6e74 7261 6374 3a20  ookup_contract: 
+00024120: 2243 6f6e 7472 6163 7422 2c0a 2020 2020  "Contract",.    
+00024130: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+00024140: 2020 2072 6574 7572 6e5f 6461 7461 203d     return_data =
+00024150: 2028 0a20 2020 2020 2020 2020 2020 204f   (.            O
+00024160: 4646 4348 4149 4e5f 4c4f 4f4b 5550 5f34  FFCHAIN_LOOKUP_4
+00024170: 4259 5445 5f44 4154 410a 2020 2020 2020  BYTE_DATA.      
+00024180: 2020 2020 2020 2b20 6162 695f 656e 636f        + abi_enco
+00024190: 6465 645f 6f66 6663 6861 696e 5f6c 6f6f  ded_offchain_loo
+000241a0: 6b75 705f 636f 6e74 7261 6374 5f61 6464  kup_contract_add
+000241b0: 7265 7373 2877 332c 206f 6666 6368 6169  ress(w3, offchai
+000241c0: 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472 6163  n_lookup_contrac
+000241d0: 7429 0a20 2020 2020 2020 2020 2020 202b  t).            +
+000241e0: 204f 4646 4348 4149 4e5f 4c4f 4f4b 5550   OFFCHAIN_LOOKUP
+000241f0: 5f52 4554 5552 4e5f 4441 5441 0a20 2020  _RETURN_DATA.   
+00024200: 2020 2020 2029 0a20 2020 2020 2020 2023       ).        #
+00024210: 2074 6573 7420 436f 6e74 7261 6374 4675   test ContractFu
+00024220: 6e63 7469 6f6e 2063 616c 6c0a 2020 2020  nction call.    
+00024230: 2020 2020 7769 7468 2070 7974 6573 742e      with pytest.
+00024240: 7261 6973 6573 284f 6666 6368 6169 6e4c  raises(OffchainL
+00024250: 6f6f 6b75 7029 2061 7320 653a 0a20 2020  ookup) as e:.   
+00024260: 2020 2020 2020 2020 206f 6666 6368 6169           offchai
+00024270: 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472 6163  n_lookup_contrac
+00024280: 742e 6675 6e63 7469 6f6e 732e 7465 7374  t.functions.test
+00024290: 4f66 6663 6861 696e 4c6f 6f6b 7570 280a  OffchainLookup(.
+000242a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000242b0: 4f46 4643 4841 494e 5f4c 4f4f 4b55 505f  OFFCHAIN_LOOKUP_
+000242c0: 5445 5354 5f44 4154 410a 2020 2020 2020  TEST_DATA.      
+000242d0: 2020 2020 2020 292e 6361 6c6c 2863 6369        ).call(cci
+000242e0: 705f 7265 6164 5f65 6e61 626c 6564 3d46  p_read_enabled=F
+000242f0: 616c 7365 290a 2020 2020 2020 2020 6173  alse).        as
+00024300: 7365 7274 2065 2e76 616c 7565 2e64 6174  sert e.value.dat
+00024310: 6120 3d3d 2072 6574 7572 6e5f 6461 7461  a == return_data
+00024320: 0a0a 2020 2020 2020 2020 2320 7465 7374  ..        # test
+00024330: 2043 6f6e 7472 6163 7443 616c 6c65 7220   ContractCaller 
+00024340: 6361 6c6c 0a20 2020 2020 2020 2077 6974  call.        wit
+00024350: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
+00024360: 4f66 6663 6861 696e 4c6f 6f6b 7570 2920  OffchainLookup) 
+00024370: 6173 2065 7863 696e 666f 3a0a 2020 2020  as excinfo:.    
+00024380: 2020 2020 2020 2020 6f66 6663 6861 696e          offchain
+00024390: 5f6c 6f6f 6b75 705f 636f 6e74 7261 6374  _lookup_contract
+000243a0: 2e63 616c 6c65 7228 6363 6970 5f72 6561  .caller(ccip_rea
+000243b0: 645f 656e 6162 6c65 643d 4661 6c73 6529  d_enabled=False)
+000243c0: 2e74 6573 744f 6666 6368 6169 6e4c 6f6f  .testOffchainLoo
+000243d0: 6b75 7028 0a20 2020 2020 2020 2020 2020  kup(.           
+000243e0: 2020 2020 204f 4646 4348 4149 4e5f 4c4f       OFFCHAIN_LO
+000243f0: 4f4b 5550 5f54 4553 545f 4441 5441 0a20  OKUP_TEST_DATA. 
+00024400: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00024410: 2020 2020 2061 7373 6572 7420 6578 6369       assert exci
+00024420: 6e66 6f2e 7661 6c75 652e 6461 7461 203d  nfo.value.data =
+00024430: 3d20 7265 7475 726e 5f64 6174 610a 0a20  = return_data.. 
+00024440: 2020 2020 2020 2023 2074 6573 7420 676c         # test gl
+00024450: 6f62 616c 2066 6c61 6720 6f6e 2074 6865  obal flag on the
+00024460: 2070 726f 7669 6465 720a 2020 2020 2020   provider.      
+00024470: 2020 7733 2e70 726f 7669 6465 722e 676c    w3.provider.gl
+00024480: 6f62 616c 5f63 6369 705f 7265 6164 5f65  obal_ccip_read_e
+00024490: 6e61 626c 6564 203d 2046 616c 7365 0a0a  nabled = False..
+000244a0: 2020 2020 2020 2020 7769 7468 2070 7974          with pyt
+000244b0: 6573 742e 7261 6973 6573 284f 6666 6368  est.raises(Offch
+000244c0: 6169 6e4c 6f6f 6b75 7029 2061 7320 6578  ainLookup) as ex
+000244d0: 635f 696e 666f 3a0a 2020 2020 2020 2020  c_info:.        
+000244e0: 2020 2020 6f66 6663 6861 696e 5f6c 6f6f      offchain_loo
+000244f0: 6b75 705f 636f 6e74 7261 6374 2e66 756e  kup_contract.fun
+00024500: 6374 696f 6e73 2e74 6573 744f 6666 6368  ctions.testOffch
+00024510: 6169 6e4c 6f6f 6b75 7028 0a20 2020 2020  ainLookup(.     
+00024520: 2020 2020 2020 2020 2020 204f 4646 4348             OFFCH
+00024530: 4149 4e5f 4c4f 4f4b 5550 5f54 4553 545f  AIN_LOOKUP_TEST_
+00024540: 4441 5441 0a20 2020 2020 2020 2020 2020  DATA.           
+00024550: 2029 2e63 616c 6c28 290a 2020 2020 2020   ).call().      
+00024560: 2020 6173 7365 7274 2065 7863 5f69 6e66    assert exc_inf
+00024570: 6f2e 7661 6c75 652e 6461 7461 203d 3d20  o.value.data == 
+00024580: 7265 7475 726e 5f64 6174 610a 0a20 2020  return_data..   
+00024590: 2020 2020 2077 332e 7072 6f76 6964 6572       w3.provider
+000245a0: 2e67 6c6f 6261 6c5f 6363 6970 5f72 6561  .global_ccip_rea
+000245b0: 645f 656e 6162 6c65 6420 3d20 5472 7565  d_enabled = True
+000245c0: 2020 2320 636c 6561 6e75 700a 0a20 2020    # cleanup..   
+000245d0: 2064 6566 2074 6573 745f 6574 685f 6361   def test_eth_ca
+000245e0: 6c6c 5f6f 6666 6368 6169 6e5f 6c6f 6f6b  ll_offchain_look
+000245f0: 7570 5f63 616c 6c5f 666c 6167 5f6f 7665  up_call_flag_ove
+00024600: 7272 6964 6573 5f70 726f 7669 6465 725f  rrides_provider_
+00024610: 666c 6167 280a 2020 2020 2020 2020 7365  flag(.        se
+00024620: 6c66 2c0a 2020 2020 2020 2020 7733 3a20  lf,.        w3: 
+00024630: 2257 6562 3322 2c0a 2020 2020 2020 2020  "Web3",.        
+00024640: 6f66 6663 6861 696e 5f6c 6f6f 6b75 705f  offchain_lookup_
+00024650: 636f 6e74 7261 6374 3a20 2243 6f6e 7472  contract: "Contr
+00024660: 6163 7422 2c0a 2020 2020 2020 2020 756e  act",.        un
+00024670: 6c6f 636b 6564 5f61 6363 6f75 6e74 3a20  locked_account: 
+00024680: 4368 6563 6b73 756d 4164 6472 6573 732c  ChecksumAddress,
+00024690: 0a20 2020 2020 2020 206d 6f6e 6b65 7970  .        monkeyp
+000246a0: 6174 6368 3a20 224d 6f6e 6b65 7950 6174  atch: "MonkeyPat
+000246b0: 6368 222c 0a20 2020 2029 202d 3e20 4e6f  ch",.    ) -> No
+000246c0: 6e65 3a0a 2020 2020 2020 2020 6e6f 726d  ne:.        norm
+000246d0: 616c 697a 6564 5f63 6f6e 7472 6163 745f  alized_contract_
+000246e0: 6164 6472 6573 7320 3d20 746f 5f68 6578  address = to_hex
+000246f0: 5f69 665f 6279 7465 7328 0a20 2020 2020  _if_bytes(.     
+00024700: 2020 2020 2020 206f 6666 6368 6169 6e5f         offchain_
+00024710: 6c6f 6f6b 7570 5f63 6f6e 7472 6163 742e  lookup_contract.
+00024720: 6164 6472 6573 730a 2020 2020 2020 2020  address.        
+00024730: 292e 6c6f 7765 7228 290a 2020 2020 2020  ).lower().      
+00024740: 2020 6d6f 636b 5f6f 6666 6368 6169 6e5f    mock_offchain_
+00024750: 6c6f 6f6b 7570 5f72 6571 7565 7374 5f72  lookup_request_r
+00024760: 6573 706f 6e73 6528 0a20 2020 2020 2020  esponse(.       
+00024770: 2020 2020 206d 6f6e 6b65 7970 6174 6368       monkeypatch
+00024780: 2c0a 2020 2020 2020 2020 2020 2020 6d6f  ,.            mo
+00024790: 636b 6564 5f72 6571 7565 7374 5f75 726c  cked_request_url
+000247a0: 3d66 2268 7474 7073 3a2f 2f77 6562 332e  =f"https://web3.
+000247b0: 7079 2f67 6174 6577 6179 2f7b 6e6f 726d  py/gateway/{norm
+000247c0: 616c 697a 6564 5f63 6f6e 7472 6163 745f  alized_contract_
+000247d0: 6164 6472 6573 737d 2f7b 4f46 4643 4841  address}/{OFFCHA
+000247e0: 494e 5f4c 4f4f 4b55 505f 5445 5354 5f44  IN_LOOKUP_TEST_D
+000247f0: 4154 417d 2e6a 736f 6e22 2c20 2023 206e  ATA}.json",  # n
+00024800: 6f71 613a 2045 3530 310a 2020 2020 2020  oqa: E501.      
+00024810: 2020 2020 2020 6d6f 636b 6564 5f6a 736f        mocked_jso
+00024820: 6e5f 6461 7461 3d57 4542 3350 595f 4153  n_data=WEB3PY_AS
+00024830: 5f48 4558 4259 5445 532c 0a20 2020 2020  _HEXBYTES,.     
+00024840: 2020 2029 0a0a 2020 2020 2020 2020 7733     )..        w3
+00024850: 2e70 726f 7669 6465 722e 676c 6f62 616c  .provider.global
+00024860: 5f63 6369 705f 7265 6164 5f65 6e61 626c  _ccip_read_enabl
+00024870: 6564 203d 2046 616c 7365 0a0a 2020 2020  ed = False..    
+00024880: 2020 2020 7265 7370 6f6e 7365 203d 206f      response = o
+00024890: 6666 6368 6169 6e5f 6c6f 6f6b 7570 5f63  ffchain_lookup_c
+000248a0: 6f6e 7472 6163 742e 6675 6e63 7469 6f6e  ontract.function
+000248b0: 732e 7465 7374 4f66 6663 6861 696e 4c6f  s.testOffchainLo
+000248c0: 6f6b 7570 280a 2020 2020 2020 2020 2020  okup(.          
+000248d0: 2020 4f46 4643 4841 494e 5f4c 4f4f 4b55    OFFCHAIN_LOOKU
+000248e0: 505f 5445 5354 5f44 4154 410a 2020 2020  P_TEST_DATA.    
+000248f0: 2020 2020 292e 6361 6c6c 2863 6369 705f      ).call(ccip_
+00024900: 7265 6164 5f65 6e61 626c 6564 3d54 7275  read_enabled=Tru
+00024910: 6529 0a20 2020 2020 2020 2061 7373 6572  e).        asser
+00024920: 7420 7733 2e63 6f64 6563 2e64 6563 6f64  t w3.codec.decod
+00024930: 6528 5b22 7374 7269 6e67 225d 2c20 7265  e(["string"], re
+00024940: 7370 6f6e 7365 295b 305d 203d 3d20 2277  sponse)[0] == "w
+00024950: 6562 3370 7922 0a0a 2020 2020 2020 2020  eb3py"..        
+00024960: 7733 2e70 726f 7669 6465 722e 676c 6f62  w3.provider.glob
+00024970: 616c 5f63 6369 705f 7265 6164 5f65 6e61  al_ccip_read_ena
+00024980: 626c 6564 203d 2054 7275 6520 2023 2063  bled = True  # c
+00024990: 6c65 616e 7570 0a0a 2020 2020 4070 7974  leanup..    @pyt
+000249a0: 6573 742e 6d61 726b 2e70 6172 616d 6574  est.mark.paramet
+000249b0: 7269 7a65 2822 6d61 785f 7265 6469 7265  rize("max_redire
+000249c0: 6374 7322 2c20 7261 6e67 6528 2d31 2c20  cts", range(-1, 
+000249d0: 3429 290a 2020 2020 6465 6620 7465 7374  4)).    def test
+000249e0: 5f65 7468 5f63 616c 6c5f 6f66 6663 6861  _eth_call_offcha
+000249f0: 696e 5f6c 6f6f 6b75 705f 7261 6973 6573  in_lookup_raises
+00024a00: 5f69 665f 6d61 785f 7265 6469 7265 6374  _if_max_redirect
+00024a10: 735f 6973 5f6c 6573 735f 7468 616e 5f34  s_is_less_than_4
+00024a20: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00024a30: 2020 2020 2020 2020 7733 3a20 2257 6562          w3: "Web
+00024a40: 3322 2c0a 2020 2020 2020 2020 6f66 6663  3",.        offc
+00024a50: 6861 696e 5f6c 6f6f 6b75 705f 636f 6e74  hain_lookup_cont
+00024a60: 7261 6374 3a20 2243 6f6e 7472 6163 7422  ract: "Contract"
+00024a70: 2c0a 2020 2020 2020 2020 6d61 785f 7265  ,.        max_re
+00024a80: 6469 7265 6374 733a 2069 6e74 2c0a 2020  directs: int,.  
+00024a90: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+00024aa0: 2020 2020 2064 6566 6175 6c74 5f6d 6178       default_max
+00024ab0: 5f72 6564 6972 6563 7473 203d 2077 332e  _redirects = w3.
+00024ac0: 7072 6f76 6964 6572 2e63 6369 705f 7265  provider.ccip_re
+00024ad0: 6164 5f6d 6178 5f72 6564 6972 6563 7473  ad_max_redirects
+00024ae0: 0a0a 2020 2020 2020 2020 7733 2e70 726f  ..        w3.pro
+00024af0: 7669 6465 722e 6363 6970 5f72 6561 645f  vider.ccip_read_
+00024b00: 6d61 785f 7265 6469 7265 6374 7320 3d20  max_redirects = 
+00024b10: 6d61 785f 7265 6469 7265 6374 730a 2020  max_redirects.  
+00024b20: 2020 2020 2020 7769 7468 2070 7974 6573        with pytes
+00024b30: 742e 7261 6973 6573 2856 616c 7565 4572  t.raises(ValueEr
+00024b40: 726f 722c 206d 6174 6368 3d22 6174 206c  ror, match="at l
+00024b50: 6561 7374 2034 2229 3a0a 2020 2020 2020  east 4"):.      
+00024b60: 2020 2020 2020 6f66 6663 6861 696e 5f6c        offchain_l
+00024b70: 6f6f 6b75 705f 636f 6e74 7261 6374 2e66  ookup_contract.f
+00024b80: 756e 6374 696f 6e73 2e74 6573 744f 6666  unctions.testOff
+00024b90: 6368 6169 6e4c 6f6f 6b75 7028 0a20 2020  chainLookup(.   
+00024ba0: 2020 2020 2020 2020 2020 2020 204f 4646               OFF
+00024bb0: 4348 4149 4e5f 4c4f 4f4b 5550 5f54 4553  CHAIN_LOOKUP_TES
+00024bc0: 545f 4441 5441 0a20 2020 2020 2020 2020  T_DATA.         
+00024bd0: 2020 2029 2e63 616c 6c28 290a 0a20 2020     ).call()..   
+00024be0: 2020 2020 2077 332e 7072 6f76 6964 6572       w3.provider
+00024bf0: 2e63 6369 705f 7265 6164 5f6d 6178 5f72  .ccip_read_max_r
+00024c00: 6564 6972 6563 7473 203d 2064 6566 6175  edirects = defau
+00024c10: 6c74 5f6d 6178 5f72 6564 6972 6563 7473  lt_max_redirects
+00024c20: 2020 2320 636c 6561 6e75 700a 0a20 2020    # cleanup..   
+00024c30: 2064 6566 2074 6573 745f 6574 685f 6361   def test_eth_ca
+00024c40: 6c6c 5f6f 6666 6368 6169 6e5f 6c6f 6f6b  ll_offchain_look
+00024c50: 7570 5f72 6169 7365 735f 666f 725f 696d  up_raises_for_im
+00024c60: 7072 6f70 6572 6c79 5f66 6f72 6d61 7474  properly_formatt
+00024c70: 6564 5f72 6573 745f 7265 7175 6573 745f  ed_rest_request_
+00024c80: 7265 7370 6f6e 7365 2820 2023 206e 6f71  response(  # noq
+00024c90: 613a 2045 3530 310a 2020 2020 2020 2020  a: E501.        
+00024ca0: 7365 6c66 2c0a 2020 2020 2020 2020 7733  self,.        w3
+00024cb0: 3a20 2257 6562 3322 2c0a 2020 2020 2020  : "Web3",.      
+00024cc0: 2020 6f66 6663 6861 696e 5f6c 6f6f 6b75    offchain_looku
+00024cd0: 705f 636f 6e74 7261 6374 3a20 2243 6f6e  p_contract: "Con
+00024ce0: 7472 6163 7422 2c0a 2020 2020 2020 2020  tract",.        
+00024cf0: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+00024d00: 3a20 4368 6563 6b73 756d 4164 6472 6573  : ChecksumAddres
+00024d10: 732c 0a20 2020 2020 2020 206d 6f6e 6b65  s,.        monke
+00024d20: 7970 6174 6368 3a20 224d 6f6e 6b65 7950  ypatch: "MonkeyP
+00024d30: 6174 6368 222c 0a20 2020 2029 202d 3e20  atch",.    ) -> 
+00024d40: 4e6f 6e65 3a0a 2020 2020 2020 2020 6e6f  None:.        no
+00024d50: 726d 616c 697a 6564 5f63 6f6e 7472 6163  rmalized_contrac
+00024d60: 745f 6164 6472 6573 7320 3d20 746f 5f68  t_address = to_h
+00024d70: 6578 5f69 665f 6279 7465 7328 0a20 2020  ex_if_bytes(.   
+00024d80: 2020 2020 2020 2020 206f 6666 6368 6169           offchai
+00024d90: 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472 6163  n_lookup_contrac
+00024da0: 742e 6164 6472 6573 730a 2020 2020 2020  t.address.      
+00024db0: 2020 292e 6c6f 7765 7228 290a 2020 2020    ).lower().    
+00024dc0: 2020 2020 6d6f 636b 5f6f 6666 6368 6169      mock_offchai
+00024dd0: 6e5f 6c6f 6f6b 7570 5f72 6571 7565 7374  n_lookup_request
+00024de0: 5f72 6573 706f 6e73 6528 0a20 2020 2020  _response(.     
+00024df0: 2020 2020 2020 206d 6f6e 6b65 7970 6174         monkeypat
+00024e00: 6368 2c0a 2020 2020 2020 2020 2020 2020  ch,.            
+00024e10: 6d6f 636b 6564 5f72 6571 7565 7374 5f75  mocked_request_u
+00024e20: 726c 3d66 2268 7474 7073 3a2f 2f77 6562  rl=f"https://web
+00024e30: 332e 7079 2f67 6174 6577 6179 2f7b 6e6f  3.py/gateway/{no
+00024e40: 726d 616c 697a 6564 5f63 6f6e 7472 6163  rmalized_contrac
+00024e50: 745f 6164 6472 6573 737d 2f7b 4f46 4643  t_address}/{OFFC
+00024e60: 4841 494e 5f4c 4f4f 4b55 505f 5445 5354  HAIN_LOOKUP_TEST
+00024e70: 5f44 4154 417d 2e6a 736f 6e22 2c20 2023  _DATA}.json",  #
+00024e80: 206e 6f71 613a 2045 3530 310a 2020 2020   noqa: E501.    
+00024e90: 2020 2020 2020 2020 6d6f 636b 6564 5f6a          mocked_j
+00024ea0: 736f 6e5f 6461 7461 3d57 4542 3350 595f  son_data=WEB3PY_
+00024eb0: 4153 5f48 4558 4259 5445 532c 0a20 2020  AS_HEXBYTES,.   
+00024ec0: 2020 2020 2020 2020 206a 736f 6e5f 6461           json_da
+00024ed0: 7461 5f66 6965 6c64 3d22 6e6f 745f 6461  ta_field="not_da
+00024ee0: 7461 222c 0a20 2020 2020 2020 2029 0a20  ta",.        ). 
+00024ef0: 2020 2020 2020 2077 6974 6820 7079 7465         with pyte
+00024f00: 7374 2e72 6169 7365 7328 5765 6233 5661  st.raises(Web3Va
+00024f10: 6c69 6461 7469 6f6e 4572 726f 722c 206d  lidationError, m
+00024f20: 6174 6368 3d22 6d69 7373 696e 6720 2764  atch="missing 'd
+00024f30: 6174 6127 2066 6965 6c64 2229 3a0a 2020  ata' field"):.  
+00024f40: 2020 2020 2020 2020 2020 6f66 6663 6861            offcha
+00024f50: 696e 5f6c 6f6f 6b75 705f 636f 6e74 7261  in_lookup_contra
+00024f60: 6374 2e66 756e 6374 696f 6e73 2e74 6573  ct.functions.tes
+00024f70: 744f 6666 6368 6169 6e4c 6f6f 6b75 7028  tOffchainLookup(
+00024f80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00024f90: 204f 4646 4348 4149 4e5f 4c4f 4f4b 5550   OFFCHAIN_LOOKUP
+00024fa0: 5f54 4553 545f 4441 5441 0a20 2020 2020  _TEST_DATA.     
+00024fb0: 2020 2020 2020 2029 2e63 616c 6c28 290a         ).call().
+00024fc0: 0a20 2020 2040 7079 7465 7374 2e6d 6172  .    @pytest.mar
+00024fd0: 6b2e 7061 7261 6d65 7472 697a 6528 2273  k.parametrize("s
+00024fe0: 7461 7475 735f 636f 6465 5f6e 6f6e 5f34  tatus_code_non_4
+00024ff0: 7878 5f65 7272 6f72 222c 205b 3130 302c  xx_error", [100,
+00025000: 2033 3030 2c20 3530 302c 2036 3030 5d29   300, 500, 600])
+00025010: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
+00025020: 685f 6361 6c6c 5f6f 6666 6368 6169 6e5f  h_call_offchain_
+00025030: 6c6f 6f6b 7570 5f74 7269 6573 5f6e 6578  lookup_tries_nex
+00025040: 745f 7572 6c5f 666f 725f 6e6f 6e5f 3478  t_url_for_non_4x
+00025050: 785f 6572 726f 725f 7374 6174 7573 5f61  x_error_status_a
+00025060: 6e64 5f74 6573 7473 5f50 4f53 5428 2020  nd_tests_POST(  
+00025070: 2320 6e6f 7161 3a20 4535 3031 0a20 2020  # noqa: E501.   
+00025080: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+00025090: 2020 2077 333a 2022 5765 6233 222c 0a20     w3: "Web3",. 
+000250a0: 2020 2020 2020 206f 6666 6368 6169 6e5f         offchain_
+000250b0: 6c6f 6f6b 7570 5f63 6f6e 7472 6163 743a  lookup_contract:
+000250c0: 2022 436f 6e74 7261 6374 222c 0a20 2020   "Contract",.   
+000250d0: 2020 2020 2075 6e6c 6f63 6b65 645f 6163       unlocked_ac
+000250e0: 636f 756e 743a 2043 6865 636b 7375 6d41  count: ChecksumA
+000250f0: 6464 7265 7373 2c0a 2020 2020 2020 2020  ddress,.        
+00025100: 6d6f 6e6b 6579 7061 7463 683a 2022 4d6f  monkeypatch: "Mo
+00025110: 6e6b 6579 5061 7463 6822 2c0a 2020 2020  nkeyPatch",.    
+00025120: 2020 2020 7374 6174 7573 5f63 6f64 655f      status_code_
+00025130: 6e6f 6e5f 3478 785f 6572 726f 723a 2069  non_4xx_error: i
+00025140: 6e74 2c0a 2020 2020 2920 2d3e 204e 6f6e  nt,.    ) -> Non
+00025150: 653a 0a20 2020 2020 2020 206e 6f72 6d61  e:.        norma
+00025160: 6c69 7a65 645f 636f 6e74 7261 6374 5f61  lized_contract_a
+00025170: 6464 7265 7373 203d 2074 6f5f 6865 785f  ddress = to_hex_
+00025180: 6966 5f62 7974 6573 280a 2020 2020 2020  if_bytes(.      
+00025190: 2020 2020 2020 6f66 6663 6861 696e 5f6c        offchain_l
+000251a0: 6f6f 6b75 705f 636f 6e74 7261 6374 2e61  ookup_contract.a
+000251b0: 6464 7265 7373 0a20 2020 2020 2020 2029  ddress.        )
+000251c0: 2e6c 6f77 6572 2829 0a0a 2020 2020 2020  .lower()..      
+000251d0: 2020 2320 5468 6520 6e65 7874 2075 726c    # The next url
+000251e0: 2069 6e20 6f75 7220 7465 7374 2063 6f6e   in our test con
+000251f0: 7472 6163 7420 646f 6573 6e27 7420 636f  tract doesn't co
+00025200: 6e74 6169 6e20 277b 6461 7461 7d27 2c20  ntain '{data}', 
+00025210: 7472 6967 6765 7269 6e67 0a20 2020 2020  triggering.     
+00025220: 2020 2023 2074 6865 2050 4f53 5420 7265     # the POST re
+00025230: 7175 6573 7420 6c6f 6769 632e 2054 6865  quest logic. The
+00025240: 2069 6465 6120 6865 7265 2069 7320 746f   idea here is to
+00025250: 2072 6574 7572 6e20 6120 6261 6420 7374   return a bad st
+00025260: 6174 7573 2066 6f72 0a20 2020 2020 2020  atus for.       
+00025270: 2023 2074 6865 2066 6972 7374 2075 726c   # the first url
+00025280: 2028 4745 5429 2061 6e64 2061 2073 7563   (GET) and a suc
+00025290: 6365 7373 2073 7461 7475 7320 6672 6f6d  cess status from
+000252a0: 2074 6865 2073 6563 6f6e 6420 6361 6c6c   the second call
+000252b0: 2028 504f 5354 290a 2020 2020 2020 2020   (POST).        
+000252c0: 2320 746f 2074 6573 7420 626f 7468 2074  # to test both t
+000252d0: 6861 7420 7765 206d 6f76 6520 6f6e 2074  hat we move on t
+000252e0: 6f20 7468 6520 6e65 7874 2075 726c 2077  o the next url w
+000252f0: 6974 6820 6e6f 6e20 3478 7820 7374 6174  ith non 4xx stat
+00025300: 7573 2061 6e64 0a20 2020 2020 2020 2023  us and.        #
+00025310: 2074 6861 7420 7468 6520 504f 5354 206c   that the POST l
+00025320: 6f67 6963 2069 7320 616c 736f 2077 6f72  ogic is also wor
+00025330: 6b69 6e67 2061 7320 6578 7065 6374 6564  king as expected
+00025340: 2e0a 2020 2020 2020 2020 6d6f 636b 5f6f  ..        mock_o
+00025350: 6666 6368 6169 6e5f 6c6f 6f6b 7570 5f72  ffchain_lookup_r
+00025360: 6571 7565 7374 5f72 6573 706f 6e73 6528  equest_response(
+00025370: 0a20 2020 2020 2020 2020 2020 206d 6f6e  .            mon
+00025380: 6b65 7970 6174 6368 2c0a 2020 2020 2020  keypatch,.      
+00025390: 2020 2020 2020 6d6f 636b 6564 5f72 6571        mocked_req
+000253a0: 7565 7374 5f75 726c 3d66 2268 7474 7073  uest_url=f"https
+000253b0: 3a2f 2f77 6562 332e 7079 2f67 6174 6577  ://web3.py/gatew
+000253c0: 6179 2f7b 6e6f 726d 616c 697a 6564 5f63  ay/{normalized_c
+000253d0: 6f6e 7472 6163 745f 6164 6472 6573 737d  ontract_address}
+000253e0: 2f7b 4f46 4643 4841 494e 5f4c 4f4f 4b55  /{OFFCHAIN_LOOKU
+000253f0: 505f 5445 5354 5f44 4154 417d 2e6a 736f  P_TEST_DATA}.jso
+00025400: 6e22 2c20 2023 206e 6f71 613a 2045 3530  n",  # noqa: E50
+00025410: 310a 2020 2020 2020 2020 2020 2020 6d6f  1.            mo
+00025420: 636b 6564 5f73 7461 7475 735f 636f 6465  cked_status_code
+00025430: 3d73 7461 7475 735f 636f 6465 5f6e 6f6e  =status_code_non
+00025440: 5f34 7878 5f65 7272 6f72 2c0a 2020 2020  _4xx_error,.    
+00025450: 2020 2020 2020 2020 6d6f 636b 6564 5f6a          mocked_j
+00025460: 736f 6e5f 6461 7461 3d57 4542 3350 595f  son_data=WEB3PY_
+00025470: 4153 5f48 4558 4259 5445 532c 0a20 2020  AS_HEXBYTES,.   
+00025480: 2020 2020 2029 0a20 2020 2020 2020 206d       ).        m
+00025490: 6f63 6b5f 6f66 6663 6861 696e 5f6c 6f6f  ock_offchain_loo
+000254a0: 6b75 705f 7265 7175 6573 745f 7265 7370  kup_request_resp
+000254b0: 6f6e 7365 280a 2020 2020 2020 2020 2020  onse(.          
+000254c0: 2020 6d6f 6e6b 6579 7061 7463 682c 0a20    monkeypatch,. 
+000254d0: 2020 2020 2020 2020 2020 2068 7474 705f             http_
+000254e0: 6d65 7468 6f64 3d22 504f 5354 222c 0a20  method="POST",. 
+000254f0: 2020 2020 2020 2020 2020 206d 6f63 6b65             mocke
+00025500: 645f 7265 7175 6573 745f 7572 6c3d 6622  d_request_url=f"
+00025510: 6874 7470 733a 2f2f 7765 6233 2e70 792f  https://web3.py/
+00025520: 6761 7465 7761 792f 7b6e 6f72 6d61 6c69  gateway/{normali
+00025530: 7a65 645f 636f 6e74 7261 6374 5f61 6464  zed_contract_add
+00025540: 7265 7373 7d2e 6a73 6f6e 222c 2020 2320  ress}.json",  # 
+00025550: 6e6f 7161 3a20 4535 3031 0a20 2020 2020  noqa: E501.     
+00025560: 2020 2020 2020 206d 6f63 6b65 645f 7374         mocked_st
+00025570: 6174 7573 5f63 6f64 653d 3230 302c 0a20  atus_code=200,. 
+00025580: 2020 2020 2020 2020 2020 206d 6f63 6b65             mocke
+00025590: 645f 6a73 6f6e 5f64 6174 613d 5745 4233  d_json_data=WEB3
+000255a0: 5059 5f41 535f 4845 5842 5954 4553 2c0a  PY_AS_HEXBYTES,.
+000255b0: 2020 2020 2020 2020 2020 2020 7365 6e64              send
+000255c0: 6572 3d6e 6f72 6d61 6c69 7a65 645f 636f  er=normalized_co
+000255d0: 6e74 7261 6374 5f61 6464 7265 7373 2c0a  ntract_address,.
+000255e0: 2020 2020 2020 2020 2020 2020 6361 6c6c              call
+000255f0: 6461 7461 3d4f 4646 4348 4149 4e5f 4c4f  data=OFFCHAIN_LO
+00025600: 4f4b 5550 5f54 4553 545f 4441 5441 2c0a  OKUP_TEST_DATA,.
+00025610: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00025620: 2020 7265 7370 6f6e 7365 203d 206f 6666    response = off
+00025630: 6368 6169 6e5f 6c6f 6f6b 7570 5f63 6f6e  chain_lookup_con
+00025640: 7472 6163 742e 6675 6e63 7469 6f6e 732e  tract.functions.
+00025650: 7465 7374 4f66 6663 6861 696e 4c6f 6f6b  testOffchainLook
+00025660: 7570 280a 2020 2020 2020 2020 2020 2020  up(.            
+00025670: 4f46 4643 4841 494e 5f4c 4f4f 4b55 505f  OFFCHAIN_LOOKUP_
+00025680: 5445 5354 5f44 4154 410a 2020 2020 2020  TEST_DATA.      
+00025690: 2020 292e 6361 6c6c 2829 0a20 2020 2020    ).call().     
+000256a0: 2020 2061 7373 6572 7420 7733 2e63 6f64     assert w3.cod
+000256b0: 6563 2e64 6563 6f64 6528 5b22 7374 7269  ec.decode(["stri
+000256c0: 6e67 225d 2c20 7265 7370 6f6e 7365 295b  ng"], response)[
+000256d0: 305d 203d 3d20 2277 6562 3370 7922 0a0a  0] == "web3py"..
+000256e0: 2020 2020 6465 6620 7465 7374 5f65 7468      def test_eth
+000256f0: 5f63 616c 6c5f 6f66 6663 6861 696e 5f6c  _call_offchain_l
+00025700: 6f6f 6b75 705f 6361 6c6c 735f 7261 6973  ookup_calls_rais
+00025710: 655f 666f 725f 7374 6174 7573 5f66 6f72  e_for_status_for
+00025720: 5f34 7878 5f73 7461 7475 735f 636f 6465  _4xx_status_code
+00025730: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00025740: 2020 2020 2020 2020 7733 3a20 2257 6562          w3: "Web
+00025750: 3322 2c0a 2020 2020 2020 2020 6f66 6663  3",.        offc
+00025760: 6861 696e 5f6c 6f6f 6b75 705f 636f 6e74  hain_lookup_cont
+00025770: 7261 6374 3a20 2243 6f6e 7472 6163 7422  ract: "Contract"
+00025780: 2c0a 2020 2020 2020 2020 756e 6c6f 636b  ,.        unlock
+00025790: 6564 5f61 6363 6f75 6e74 3a20 4368 6563  ed_account: Chec
+000257a0: 6b73 756d 4164 6472 6573 732c 0a20 2020  ksumAddress,.   
+000257b0: 2020 2020 206d 6f6e 6b65 7970 6174 6368       monkeypatch
+000257c0: 3a20 224d 6f6e 6b65 7950 6174 6368 222c  : "MonkeyPatch",
+000257d0: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+000257e0: 2020 2020 2020 2020 6e6f 726d 616c 697a          normaliz
+000257f0: 6564 5f63 6f6e 7472 6163 745f 6164 6472  ed_contract_addr
+00025800: 6573 7320 3d20 746f 5f68 6578 5f69 665f  ess = to_hex_if_
+00025810: 6279 7465 7328 0a20 2020 2020 2020 2020  bytes(.         
+00025820: 2020 206f 6666 6368 6169 6e5f 6c6f 6f6b     offchain_look
+00025830: 7570 5f63 6f6e 7472 6163 742e 6164 6472  up_contract.addr
+00025840: 6573 730a 2020 2020 2020 2020 292e 6c6f  ess.        ).lo
+00025850: 7765 7228 290a 2020 2020 2020 2020 6d6f  wer().        mo
+00025860: 636b 5f6f 6666 6368 6169 6e5f 6c6f 6f6b  ck_offchain_look
+00025870: 7570 5f72 6571 7565 7374 5f72 6573 706f  up_request_respo
+00025880: 6e73 6528 0a20 2020 2020 2020 2020 2020  nse(.           
+00025890: 206d 6f6e 6b65 7970 6174 6368 2c0a 2020   monkeypatch,.  
+000258a0: 2020 2020 2020 2020 2020 6d6f 636b 6564            mocked
+000258b0: 5f72 6571 7565 7374 5f75 726c 3d66 2268  _request_url=f"h
+000258c0: 7474 7073 3a2f 2f77 6562 332e 7079 2f67  ttps://web3.py/g
+000258d0: 6174 6577 6179 2f7b 6e6f 726d 616c 697a  ateway/{normaliz
+000258e0: 6564 5f63 6f6e 7472 6163 745f 6164 6472  ed_contract_addr
+000258f0: 6573 737d 2f7b 4f46 4643 4841 494e 5f4c  ess}/{OFFCHAIN_L
+00025900: 4f4f 4b55 505f 5445 5354 5f44 4154 417d  OOKUP_TEST_DATA}
+00025910: 2e6a 736f 6e22 2c20 2023 206e 6f71 613a  .json",  # noqa:
+00025920: 2045 3530 310a 2020 2020 2020 2020 2020   E501.          
+00025930: 2020 6d6f 636b 6564 5f73 7461 7475 735f    mocked_status_
+00025940: 636f 6465 3d72 616e 6469 6e74 2834 3030  code=randint(400
+00025950: 2c20 3439 3929 2c0a 2020 2020 2020 2020  , 499),.        
+00025960: 2020 2020 6d6f 636b 6564 5f6a 736f 6e5f      mocked_json_
+00025970: 6461 7461 3d57 4542 3350 595f 4153 5f48  data=WEB3PY_AS_H
+00025980: 4558 4259 5445 532c 0a20 2020 2020 2020  EXBYTES,.       
+00025990: 2029 0a20 2020 2020 2020 2077 6974 6820   ).        with 
+000259a0: 7079 7465 7374 2e72 6169 7365 7328 4578  pytest.raises(Ex
+000259b0: 6365 7074 696f 6e2c 206d 6174 6368 3d22  ception, match="
+000259c0: 6361 6c6c 6564 2072 6169 7365 5f66 6f72  called raise_for
+000259d0: 5f73 7461 7475 735c 5c28 5c5c 2922 293a  _status\\(\\)"):
+000259e0: 0a20 2020 2020 2020 2020 2020 206f 6666  .            off
+000259f0: 6368 6169 6e5f 6c6f 6f6b 7570 5f63 6f6e  chain_lookup_con
+00025a00: 7472 6163 742e 6675 6e63 7469 6f6e 732e  tract.functions.
+00025a10: 7465 7374 4f66 6663 6861 696e 4c6f 6f6b  testOffchainLook
+00025a20: 7570 280a 2020 2020 2020 2020 2020 2020  up(.            
+00025a30: 2020 2020 4f46 4643 4841 494e 5f4c 4f4f      OFFCHAIN_LOO
+00025a40: 4b55 505f 5445 5354 5f44 4154 410a 2020  KUP_TEST_DATA.  
+00025a50: 2020 2020 2020 2020 2020 292e 6361 6c6c            ).call
+00025a60: 2829 0a0a 2020 2020 6465 6620 7465 7374  ()..    def test
+00025a70: 5f65 7468 5f63 616c 6c5f 6f66 6663 6861  _eth_call_offcha
+00025a80: 696e 5f6c 6f6f 6b75 705f 7261 6973 6573  in_lookup_raises
+00025a90: 5f77 6865 6e5f 616c 6c5f 7375 7070 6c69  _when_all_suppli
+00025aa0: 6564 5f75 726c 735f 6661 696c 280a 2020  ed_urls_fail(.  
+00025ab0: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+00025ac0: 2020 2020 7733 3a20 2257 6562 3322 2c0a      w3: "Web3",.
+00025ad0: 2020 2020 2020 2020 6f66 6663 6861 696e          offchain
+00025ae0: 5f6c 6f6f 6b75 705f 636f 6e74 7261 6374  _lookup_contract
+00025af0: 3a20 2243 6f6e 7472 6163 7422 2c0a 2020  : "Contract",.  
+00025b00: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+00025b10: 2020 2020 2023 2047 4554 2061 6e64 2050       # GET and P
+00025b20: 4f53 5420 7265 7175 6573 7473 2073 686f  OST requests sho
+00025b30: 756c 6420 6661 696c 2073 696e 6365 2072  uld fail since r
+00025b40: 6573 706f 6e73 6573 2061 7265 206e 6f74  esponses are not
+00025b50: 206d 6f63 6b65 640a 2020 2020 2020 2020   mocked.        
+00025b60: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
+00025b70: 6573 280a 2020 2020 2020 2020 2020 2020  es(.            
+00025b80: 4d75 6c74 6970 6c65 4661 696c 6564 5265  MultipleFailedRe
+00025b90: 7175 6573 7473 2c20 6d61 7463 683d 224f  quests, match="O
+00025ba0: 6666 6368 6169 6e20 6c6f 6f6b 7570 2066  ffchain lookup f
+00025bb0: 6169 6c65 6420 666f 7220 7375 7070 6c69  ailed for suppli
+00025bc0: 6564 2075 726c 7322 0a20 2020 2020 2020  ed urls".       
+00025bd0: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
+00025be0: 6f66 6663 6861 696e 5f6c 6f6f 6b75 705f  offchain_lookup_
+00025bf0: 636f 6e74 7261 6374 2e66 756e 6374 696f  contract.functio
+00025c00: 6e73 2e74 6573 744f 6666 6368 6169 6e4c  ns.testOffchainL
+00025c10: 6f6f 6b75 7028 0a20 2020 2020 2020 2020  ookup(.         
+00025c20: 2020 2020 2020 204f 4646 4348 4149 4e5f         OFFCHAIN_
+00025c30: 4c4f 4f4b 5550 5f54 4553 545f 4441 5441  LOOKUP_TEST_DATA
+00025c40: 0a20 2020 2020 2020 2020 2020 2029 2e63  .            ).c
+00025c50: 616c 6c28 290a 0a20 2020 2064 6566 2074  all()..    def t
+00025c60: 6573 745f 6574 685f 6361 6c6c 5f63 6f6e  est_eth_call_con
+00025c70: 7469 6e75 6f75 735f 6f66 6663 6861 696e  tinuous_offchain
+00025c80: 5f6c 6f6f 6b75 705f 7261 6973 6573 5f77  _lookup_raises_w
+00025c90: 6974 685f 746f 6f5f 6d61 6e79 5f72 6571  ith_too_many_req
+00025ca0: 7565 7374 7328 0a20 2020 2020 2020 2073  uests(.        s
+00025cb0: 656c 662c 0a20 2020 2020 2020 2077 333a  elf,.        w3:
+00025cc0: 2022 5765 6233 222c 0a20 2020 2020 2020   "Web3",.       
+00025cd0: 206f 6666 6368 6169 6e5f 6c6f 6f6b 7570   offchain_lookup
+00025ce0: 5f63 6f6e 7472 6163 743a 2022 436f 6e74  _contract: "Cont
+00025cf0: 7261 6374 222c 0a20 2020 2020 2020 2075  ract",.        u
+00025d00: 6e6c 6f63 6b65 645f 6163 636f 756e 743a  nlocked_account:
+00025d10: 2043 6865 636b 7375 6d41 6464 7265 7373   ChecksumAddress
+00025d20: 2c0a 2020 2020 2020 2020 6d6f 6e6b 6579  ,.        monkey
+00025d30: 7061 7463 683a 2022 4d6f 6e6b 6579 5061  patch: "MonkeyPa
+00025d40: 7463 6822 2c0a 2020 2020 2920 2d3e 204e  tch",.    ) -> N
+00025d50: 6f6e 653a 0a20 2020 2020 2020 206e 6f72  one:.        nor
+00025d60: 6d61 6c69 7a65 645f 636f 6e74 7261 6374  malized_contract
+00025d70: 5f61 6464 7265 7373 203d 2074 6f5f 6865  _address = to_he
+00025d80: 785f 6966 5f62 7974 6573 280a 2020 2020  x_if_bytes(.    
+00025d90: 2020 2020 2020 2020 6f66 6663 6861 696e          offchain
+00025da0: 5f6c 6f6f 6b75 705f 636f 6e74 7261 6374  _lookup_contract
+00025db0: 2e61 6464 7265 7373 0a20 2020 2020 2020  .address.       
+00025dc0: 2029 2e6c 6f77 6572 2829 0a20 2020 2020   ).lower().     
+00025dd0: 2020 206d 6f63 6b5f 6f66 6663 6861 696e     mock_offchain
+00025de0: 5f6c 6f6f 6b75 705f 7265 7175 6573 745f  _lookup_request_
+00025df0: 7265 7370 6f6e 7365 280a 2020 2020 2020  response(.      
+00025e00: 2020 2020 2020 6d6f 6e6b 6579 7061 7463        monkeypatc
+00025e10: 682c 0a20 2020 2020 2020 2020 2020 206d  h,.            m
+00025e20: 6f63 6b65 645f 7265 7175 6573 745f 7572  ocked_request_ur
+00025e30: 6c3d 6622 6874 7470 733a 2f2f 7765 6233  l=f"https://web3
+00025e40: 2e70 792f 6761 7465 7761 792f 7b6e 6f72  .py/gateway/{nor
+00025e50: 6d61 6c69 7a65 645f 636f 6e74 7261 6374  malized_contract
+00025e60: 5f61 6464 7265 7373 7d2f 3078 2e6a 736f  _address}/0x.jso
+00025e70: 6e22 2c20 2023 206e 6f71 613a 2045 3530  n",  # noqa: E50
+00025e80: 310a 2020 2020 2020 2020 290a 2020 2020  1.        ).    
+00025e90: 2020 2020 7769 7468 2070 7974 6573 742e      with pytest.
+00025ea0: 7261 6973 6573 2854 6f6f 4d61 6e79 5265  raises(TooManyRe
+00025eb0: 7175 6573 7473 2c20 6d61 7463 683d 2254  quests, match="T
+00025ec0: 6f6f 206d 616e 7920 4343 4950 2072 6561  oo many CCIP rea
+00025ed0: 6420 7265 6469 7265 6374 7322 293a 0a20  d redirects"):. 
+00025ee0: 2020 2020 2020 2020 2020 206f 6666 6368             offch
+00025ef0: 6169 6e5f 6c6f 6f6b 7570 5f63 6f6e 7472  ain_lookup_contr
+00025f00: 6163 742e 6361 6c6c 6572 2829 2e63 6f6e  act.caller().con
+00025f10: 7469 6e75 6f75 734f 6666 6368 6169 6e4c  tinuousOffchainL
+00025f20: 6f6f 6b75 7028 290a 0a20 2020 2064 6566  ookup()..    def
+00025f30: 2074 6573 745f 6574 685f 6573 7469 6d61   test_eth_estima
+00025f40: 7465 5f67 6173 5f72 6576 6572 745f 7769  te_gas_revert_wi
+00025f50: 7468 5f6d 7367 280a 2020 2020 2020 2020  th_msg(.        
+00025f60: 7365 6c66 2c0a 2020 2020 2020 2020 7733  self,.        w3
+00025f70: 3a20 2257 6562 3322 2c0a 2020 2020 2020  : "Web3",.      
+00025f80: 2020 7265 7665 7274 5f63 6f6e 7472 6163    revert_contrac
+00025f90: 743a 2022 436f 6e74 7261 6374 222c 0a20  t: "Contract",. 
+00025fa0: 2020 2020 2020 2075 6e6c 6f63 6b65 645f         unlocked_
+00025fb0: 6163 636f 756e 743a 2043 6865 636b 7375  account: Checksu
+00025fc0: 6d41 6464 7265 7373 2c0a 2020 2020 2920  mAddress,.    ) 
+00025fd0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+00025fe0: 2077 6974 6820 7079 7465 7374 2e72 6169   with pytest.rai
+00025ff0: 7365 7328 0a20 2020 2020 2020 2020 2020  ses(.           
+00026000: 2043 6f6e 7472 6163 744c 6f67 6963 4572   ContractLogicEr
+00026010: 726f 722c 206d 6174 6368 3d22 6578 6563  ror, match="exec
+00026020: 7574 696f 6e20 7265 7665 7274 6564 3a20  ution reverted: 
+00026030: 4675 6e63 7469 6f6e 2068 6173 2062 6565  Function has bee
+00026040: 6e20 7265 7665 7274 6564 220a 2020 2020  n reverted".    
+00026050: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
+00026060: 2020 2074 786e 5f70 6172 616d 7320 3d20     txn_params = 
+00026070: 7265 7665 7274 5f63 6f6e 7472 6163 742e  revert_contract.
+00026080: 5f70 7265 7061 7265 5f74 7261 6e73 6163  _prepare_transac
+00026090: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+000260a0: 2020 2020 2020 666e 5f6e 616d 653d 2272        fn_name="r
+000260b0: 6576 6572 7457 6974 684d 6573 7361 6765  evertWithMessage
+000260c0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+000260d0: 2020 2074 7261 6e73 6163 7469 6f6e 3d7b     transaction={
+000260e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000260f0: 2020 2020 2022 6672 6f6d 223a 2075 6e6c       "from": unl
+00026100: 6f63 6b65 645f 6163 636f 756e 742c 0a20  ocked_account,. 
+00026110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026120: 2020 2022 746f 223a 2072 6576 6572 745f     "to": revert_
+00026130: 636f 6e74 7261 6374 2e61 6464 7265 7373  contract.address
+00026140: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00026150: 2020 7d2c 0a20 2020 2020 2020 2020 2020    },.           
+00026160: 2029 0a20 2020 2020 2020 2020 2020 2077   ).            w
+00026170: 332e 6574 682e 6573 7469 6d61 7465 5f67  3.eth.estimate_g
+00026180: 6173 2874 786e 5f70 6172 616d 7329 0a0a  as(txn_params)..
+00026190: 2020 2020 6465 6620 7465 7374 5f65 7468      def test_eth
+000261a0: 5f65 7374 696d 6174 655f 6761 735f 7265  _estimate_gas_re
+000261b0: 7665 7274 5f77 6974 686f 7574 5f6d 7367  vert_without_msg
+000261c0: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+000261d0: 2020 2020 2020 2020 7733 3a20 2257 6562          w3: "Web
+000261e0: 3322 2c0a 2020 2020 2020 2020 7265 7665  3",.        reve
+000261f0: 7274 5f63 6f6e 7472 6163 743a 2022 436f  rt_contract: "Co
+00026200: 6e74 7261 6374 222c 0a20 2020 2020 2020  ntract",.       
+00026210: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
+00026220: 743a 2043 6865 636b 7375 6d41 6464 7265  t: ChecksumAddre
+00026230: 7373 2c0a 2020 2020 2920 2d3e 204e 6f6e  ss,.    ) -> Non
+00026240: 653a 0a20 2020 2020 2020 2077 6974 6820  e:.        with 
+00026250: 7079 7465 7374 2e72 6169 7365 7328 436f  pytest.raises(Co
+00026260: 6e74 7261 6374 4c6f 6769 6345 7272 6f72  ntractLogicError
+00026270: 2c20 6d61 7463 683d 2265 7865 6375 7469  , match="executi
+00026280: 6f6e 2072 6576 6572 7465 6422 293a 0a20  on reverted"):. 
+00026290: 2020 2020 2020 2020 2020 2074 786e 5f70             txn_p
+000262a0: 6172 616d 7320 3d20 7265 7665 7274 5f63  arams = revert_c
+000262b0: 6f6e 7472 6163 742e 5f70 7265 7061 7265  ontract._prepare
+000262c0: 5f74 7261 6e73 6163 7469 6f6e 280a 2020  _transaction(.  
+000262d0: 2020 2020 2020 2020 2020 2020 2020 666e                fn
+000262e0: 5f6e 616d 653d 2272 6576 6572 7457 6974  _name="revertWit
+000262f0: 686f 7574 4d65 7373 6167 6522 2c0a 2020  houtMessage",.  
+00026300: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+00026310: 616e 7361 6374 696f 6e3d 7b0a 2020 2020  ansaction={.    
+00026320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026330: 2266 726f 6d22 3a20 756e 6c6f 636b 6564  "from": unlocked
+00026340: 5f61 6363 6f75 6e74 2c0a 2020 2020 2020  _account,.      
+00026350: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00026360: 6f22 3a20 7265 7665 7274 5f63 6f6e 7472  o": revert_contr
+00026370: 6163 742e 6164 6472 6573 732c 0a20 2020  act.address,.   
+00026380: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
+00026390: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+000263a0: 2020 2020 2020 2020 2020 7733 2e65 7468            w3.eth
+000263b0: 2e65 7374 696d 6174 655f 6761 7328 7478  .estimate_gas(tx
+000263c0: 6e5f 7061 7261 6d73 290a 0a20 2020 2064  n_params)..    d
+000263d0: 6566 2074 6573 745f 6574 685f 6573 7469  ef test_eth_esti
+000263e0: 6d61 7465 5f67 6173 5f63 7573 746f 6d5f  mate_gas_custom_
+000263f0: 6572 726f 725f 7265 7665 7274 5f77 6974  error_revert_wit
+00026400: 685f 6d73 6728 0a20 2020 2020 2020 2073  h_msg(.        s
+00026410: 656c 662c 0a20 2020 2020 2020 2077 333a  elf,.        w3:
+00026420: 2022 5765 6233 222c 0a20 2020 2020 2020   "Web3",.       
+00026430: 2072 6576 6572 745f 636f 6e74 7261 6374   revert_contract
+00026440: 3a20 2243 6f6e 7472 6163 7422 2c0a 2020  : "Contract",.  
+00026450: 2020 2020 2020 756e 6c6f 636b 6564 5f61        unlocked_a
+00026460: 6363 6f75 6e74 3a20 4368 6563 6b73 756d  ccount: Checksum
+00026470: 4164 6472 6573 732c 0a20 2020 2029 202d  Address,.    ) -
+00026480: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00026490: 6461 7461 203d 2072 6576 6572 745f 636f  data = revert_co
+000264a0: 6e74 7261 6374 2e65 6e63 6f64 6541 4249  ntract.encodeABI
+000264b0: 280a 2020 2020 2020 2020 2020 2020 666e  (.            fn
+000264c0: 5f6e 616d 653d 2255 6e61 7574 686f 7269  _name="Unauthori
+000264d0: 7a65 6457 6974 684d 6573 7361 6765 222c  zedWithMessage",
+000264e0: 2061 7267 733d 5b22 596f 7520 6172 6520   args=["You are 
+000264f0: 6e6f 7420 6175 7468 6f72 697a 6564 225d  not authorized"]
+00026500: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00026510: 2020 2074 786e 5f70 6172 616d 7320 3d20     txn_params = 
+00026520: 7265 7665 7274 5f63 6f6e 7472 6163 742e  revert_contract.
+00026530: 5f70 7265 7061 7265 5f74 7261 6e73 6163  _prepare_transac
+00026540: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+00026550: 2020 666e 5f6e 616d 653d 2263 7573 746f    fn_name="custo
+00026560: 6d45 7272 6f72 5769 7468 4d65 7373 6167  mErrorWithMessag
+00026570: 6522 2c0a 2020 2020 2020 2020 2020 2020  e",.            
+00026580: 7472 616e 7361 6374 696f 6e3d 7b0a 2020  transaction={.  
+00026590: 2020 2020 2020 2020 2020 2020 2020 2266                "f
+000265a0: 726f 6d22 3a20 756e 6c6f 636b 6564 5f61  rom": unlocked_a
+000265b0: 6363 6f75 6e74 2c0a 2020 2020 2020 2020  ccount,.        
+000265c0: 2020 2020 2020 2020 2274 6f22 3a20 7265          "to": re
+000265d0: 7665 7274 5f63 6f6e 7472 6163 742e 6164  vert_contract.ad
+000265e0: 6472 6573 732c 0a20 2020 2020 2020 2020  dress,.         
+000265f0: 2020 207d 2c0a 2020 2020 2020 2020 290a     },.        ).
+00026600: 2020 2020 2020 2020 7769 7468 2070 7974          with pyt
+00026610: 6573 742e 7261 6973 6573 2843 6f6e 7472  est.raises(Contr
+00026620: 6163 7443 7573 746f 6d45 7272 6f72 2c20  actCustomError, 
+00026630: 6d61 7463 683d 6461 7461 2920 6173 2065  match=data) as e
+00026640: 7863 696e 666f 3a0a 2020 2020 2020 2020  xcinfo:.        
+00026650: 2020 2020 7733 2e65 7468 2e65 7374 696d      w3.eth.estim
+00026660: 6174 655f 6761 7328 7478 6e5f 7061 7261  ate_gas(txn_para
+00026670: 6d73 290a 2020 2020 2020 2020 6173 7365  ms).        asse
+00026680: 7274 2065 7863 696e 666f 2e76 616c 7565  rt excinfo.value
+00026690: 2e64 6174 6120 3d3d 2064 6174 610a 0a20  .data == data.. 
+000266a0: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
+000266b0: 6573 7469 6d61 7465 5f67 6173 5f63 7573  estimate_gas_cus
+000266c0: 746f 6d5f 6572 726f 725f 7265 7665 7274  tom_error_revert
+000266d0: 5f77 6974 686f 7574 5f6d 7367 280a 2020  _without_msg(.  
+000266e0: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+000266f0: 2020 2020 7733 3a20 2257 6562 3322 2c0a      w3: "Web3",.
+00026700: 2020 2020 2020 2020 7265 7665 7274 5f63          revert_c
+00026710: 6f6e 7472 6163 743a 2022 436f 6e74 7261  ontract: "Contra
+00026720: 6374 222c 0a20 2020 2020 2020 2075 6e6c  ct",.        unl
+00026730: 6f63 6b65 645f 6163 636f 756e 743a 2043  ocked_account: C
+00026740: 6865 636b 7375 6d41 6464 7265 7373 2c0a  hecksumAddress,.
+00026750: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+00026760: 2020 2020 2020 2064 6174 6120 3d20 7265         data = re
+00026770: 7665 7274 5f63 6f6e 7472 6163 742e 656e  vert_contract.en
+00026780: 636f 6465 4142 4928 666e 5f6e 616d 653d  codeABI(fn_name=
+00026790: 2255 6e61 7574 686f 7269 7a65 6422 290a  "Unauthorized").
+000267a0: 2020 2020 2020 2020 7478 6e5f 7061 7261          txn_para
+000267b0: 6d73 203d 2072 6576 6572 745f 636f 6e74  ms = revert_cont
+000267c0: 7261 6374 2e5f 7072 6570 6172 655f 7472  ract._prepare_tr
+000267d0: 616e 7361 6374 696f 6e28 0a20 2020 2020  ansaction(.     
+000267e0: 2020 2020 2020 2066 6e5f 6e61 6d65 3d22         fn_name="
+000267f0: 6375 7374 6f6d 4572 726f 7257 6974 686f  customErrorWitho
+00026800: 7574 4d65 7373 6167 6522 2c0a 2020 2020  utMessage",.    
+00026810: 2020 2020 2020 2020 7472 616e 7361 6374          transact
+00026820: 696f 6e3d 7b0a 2020 2020 2020 2020 2020  ion={.          
+00026830: 2020 2020 2020 2266 726f 6d22 3a20 756e        "from": un
+00026840: 6c6f 636b 6564 5f61 6363 6f75 6e74 2c0a  locked_account,.
+00026850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026860: 2274 6f22 3a20 7265 7665 7274 5f63 6f6e  "to": revert_con
+00026870: 7472 6163 742e 6164 6472 6573 732c 0a20  tract.address,. 
+00026880: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
+00026890: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+000268a0: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
+000268b0: 6573 2843 6f6e 7472 6163 7443 7573 746f  es(ContractCusto
+000268c0: 6d45 7272 6f72 2c20 6d61 7463 683d 6461  mError, match=da
+000268d0: 7461 2920 6173 2065 7863 696e 666f 3a0a  ta) as excinfo:.
+000268e0: 2020 2020 2020 2020 2020 2020 7733 2e65              w3.e
+000268f0: 7468 2e65 7374 696d 6174 655f 6761 7328  th.estimate_gas(
+00026900: 7478 6e5f 7061 7261 6d73 290a 2020 2020  txn_params).    
+00026910: 2020 2020 6173 7365 7274 2065 7863 696e      assert excin
+00026920: 666f 2e76 616c 7565 2e64 6174 6120 3d3d  fo.value.data ==
+00026930: 2064 6174 610a 0a20 2020 2064 6566 2074   data..    def t
+00026940: 6573 745f 6574 685f 6573 7469 6d61 7465  est_eth_estimate
+00026950: 5f67 6173 280a 2020 2020 2020 2020 7365  _gas(.        se
+00026960: 6c66 2c20 7733 3a20 2257 6562 3322 2c20  lf, w3: "Web3", 
+00026970: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+00026980: 5f64 7561 6c5f 7479 7065 3a20 4368 6563  _dual_type: Chec
+00026990: 6b73 756d 4164 6472 6573 730a 2020 2020  ksumAddress.    
+000269a0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+000269b0: 2020 2067 6173 5f65 7374 696d 6174 6520     gas_estimate 
+000269c0: 3d20 7733 2e65 7468 2e65 7374 696d 6174  = w3.eth.estimat
+000269d0: 655f 6761 7328 0a20 2020 2020 2020 2020  e_gas(.         
+000269e0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+000269f0: 2020 2020 2022 6672 6f6d 223a 2075 6e6c       "from": unl
+00026a00: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
+00026a10: 616c 5f74 7970 652c 0a20 2020 2020 2020  al_type,.       
+00026a20: 2020 2020 2020 2020 2022 746f 223a 2075           "to": u
+00026a30: 6e6c 6f63 6b65 645f 6163 636f 756e 745f  nlocked_account_
+00026a40: 6475 616c 5f74 7970 652c 0a20 2020 2020  dual_type,.     
+00026a50: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
+00026a60: 6522 3a20 5765 6928 3129 2c0a 2020 2020  e": Wei(1),.    
+00026a70: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00026a80: 2020 290a 2020 2020 2020 2020 6173 7365    ).        asse
+00026a90: 7274 2069 735f 696e 7465 6765 7228 6761  rt is_integer(ga
+00026aa0: 735f 6573 7469 6d61 7465 290a 2020 2020  s_estimate).    
+00026ab0: 2020 2020 6173 7365 7274 2067 6173 5f65      assert gas_e
+00026ac0: 7374 696d 6174 6520 3e20 300a 0a20 2020  stimate > 0..   
+00026ad0: 2064 6566 2074 6573 745f 6574 685f 6573   def test_eth_es
+00026ae0: 7469 6d61 7465 5f67 6173 5f77 6974 685f  timate_gas_with_
+00026af0: 626c 6f63 6b28 0a20 2020 2020 2020 2073  block(.        s
+00026b00: 656c 662c 2077 333a 2022 5765 6233 222c  elf, w3: "Web3",
+00026b10: 2075 6e6c 6f63 6b65 645f 6163 636f 756e   unlocked_accoun
+00026b20: 745f 6475 616c 5f74 7970 653a 2043 6865  t_dual_type: Che
+00026b30: 636b 7375 6d41 6464 7265 7373 0a20 2020  cksumAddress.   
+00026b40: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
+00026b50: 2020 2020 6761 735f 6573 7469 6d61 7465      gas_estimate
+00026b60: 203d 2077 332e 6574 682e 6573 7469 6d61   = w3.eth.estima
+00026b70: 7465 5f67 6173 280a 2020 2020 2020 2020  te_gas(.        
+00026b80: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+00026b90: 2020 2020 2020 2266 726f 6d22 3a20 756e        "from": un
+00026ba0: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
+00026bb0: 7561 6c5f 7479 7065 2c0a 2020 2020 2020  ual_type,.      
+00026bc0: 2020 2020 2020 2020 2020 2274 6f22 3a20            "to": 
+00026bd0: 756e 6c6f 636b 6564 5f61 6363 6f75 6e74  unlocked_account
+00026be0: 5f64 7561 6c5f 7479 7065 2c0a 2020 2020  _dual_type,.    
+00026bf0: 2020 2020 2020 2020 2020 2020 2276 616c              "val
+00026c00: 7565 223a 2057 6569 2831 292c 0a20 2020  ue": Wei(1),.   
+00026c10: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+00026c20: 2020 2020 2020 2020 226c 6174 6573 7422          "latest"
+00026c30: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
+00026c40: 2020 2020 6173 7365 7274 2069 735f 696e      assert is_in
+00026c50: 7465 6765 7228 6761 735f 6573 7469 6d61  teger(gas_estima
+00026c60: 7465 290a 2020 2020 2020 2020 6173 7365  te).        asse
+00026c70: 7274 2067 6173 5f65 7374 696d 6174 6520  rt gas_estimate 
+00026c80: 3e20 300a 0a20 2020 2064 6566 2074 6573  > 0..    def tes
+00026c90: 745f 6574 685f 6765 7442 6c6f 636b 4279  t_eth_getBlockBy
+00026ca0: 4861 7368 2873 656c 662c 2077 333a 2022  Hash(self, w3: "
+00026cb0: 5765 6233 222c 2065 6d70 7479 5f62 6c6f  Web3", empty_blo
+00026cc0: 636b 3a20 426c 6f63 6b44 6174 6129 202d  ck: BlockData) -
+00026cd0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00026ce0: 626c 6f63 6b20 3d20 7733 2e65 7468 2e67  block = w3.eth.g
+00026cf0: 6574 5f62 6c6f 636b 2865 6d70 7479 5f62  et_block(empty_b
+00026d00: 6c6f 636b 5b22 6861 7368 225d 290a 2020  lock["hash"]).  
+00026d10: 2020 2020 2020 6173 7365 7274 2062 6c6f        assert blo
+00026d20: 636b 5b22 6861 7368 225d 203d 3d20 656d  ck["hash"] == em
+00026d30: 7074 795f 626c 6f63 6b5b 2268 6173 6822  pty_block["hash"
+00026d40: 5d0a 2020 2020 2020 2020 6173 7365 7274  ].        assert
+00026d50: 2062 6c6f 636b 5b22 7265 6365 6970 7473   block["receipts
+00026d60: 526f 6f74 225d 203d 3d20 656d 7074 795f  Root"] == empty_
+00026d70: 626c 6f63 6b5b 2272 6563 6569 7074 7352  block["receiptsR
+00026d80: 6f6f 7422 5d0a 2020 2020 2020 2020 6173  oot"].        as
+00026d90: 7365 7274 2062 6c6f 636b 5b22 6c6f 6773  sert block["logs
+00026da0: 426c 6f6f 6d22 5d20 3d3d 2065 6d70 7479  Bloom"] == empty
+00026db0: 5f62 6c6f 636b 5b22 6c6f 6773 426c 6f6f  _block["logsBloo
+00026dc0: 6d22 5d0a 0a20 2020 2064 6566 2074 6573  m"]..    def tes
+00026dd0: 745f 6574 685f 6765 7442 6c6f 636b 4279  t_eth_getBlockBy
+00026de0: 4861 7368 5f6e 6f74 5f66 6f75 6e64 280a  Hash_not_found(.
+00026df0: 2020 2020 2020 2020 7365 6c66 2c20 7733          self, w3
+00026e00: 3a20 2257 6562 3322 2c20 656d 7074 795f  : "Web3", empty_
+00026e10: 626c 6f63 6b3a 2042 6c6f 636b 4461 7461  block: BlockData
+00026e20: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+00026e30: 2020 2020 2020 2020 7769 7468 2070 7974          with pyt
+00026e40: 6573 742e 7261 6973 6573 2842 6c6f 636b  est.raises(Block
+00026e50: 4e6f 7446 6f75 6e64 293a 0a20 2020 2020  NotFound):.     
+00026e60: 2020 2020 2020 2077 332e 6574 682e 6765         w3.eth.ge
+00026e70: 745f 626c 6f63 6b28 554e 4b4e 4f57 4e5f  t_block(UNKNOWN_
+00026e80: 4841 5348 290a 0a20 2020 2064 6566 2074  HASH)..    def t
+00026e90: 6573 745f 6574 685f 6765 7442 6c6f 636b  est_eth_getBlock
+00026ea0: 4279 4861 7368 5f70 656e 6469 6e67 2873  ByHash_pending(s
+00026eb0: 656c 662c 2077 333a 2022 5765 6233 2229  elf, w3: "Web3")
+00026ec0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+00026ed0: 2020 626c 6f63 6b20 3d20 7733 2e65 7468    block = w3.eth
+00026ee0: 2e67 6574 5f62 6c6f 636b 2822 7065 6e64  .get_block("pend
+00026ef0: 696e 6722 290a 2020 2020 2020 2020 6173  ing").        as
+00026f00: 7365 7274 2062 6c6f 636b 5b22 6861 7368  sert block["hash
+00026f10: 225d 2069 7320 4e6f 6e65 0a0a 2020 2020  "] is None..    
+00026f20: 6465 6620 7465 7374 5f65 7468 5f67 6574  def test_eth_get
+00026f30: 426c 6f63 6b42 794e 756d 6265 725f 7769  BlockByNumber_wi
+00026f40: 7468 5f69 6e74 6567 6572 280a 2020 2020  th_integer(.    
+00026f50: 2020 2020 7365 6c66 2c20 7733 3a20 2257      self, w3: "W
+00026f60: 6562 3322 2c20 656d 7074 795f 626c 6f63  eb3", empty_bloc
+00026f70: 6b3a 2042 6c6f 636b 4461 7461 0a20 2020  k: BlockData.   
+00026f80: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
+00026f90: 2020 2020 626c 6f63 6b20 3d20 7733 2e65      block = w3.e
+00026fa0: 7468 2e67 6574 5f62 6c6f 636b 2865 6d70  th.get_block(emp
+00026fb0: 7479 5f62 6c6f 636b 5b22 6e75 6d62 6572  ty_block["number
+00026fc0: 225d 290a 2020 2020 2020 2020 6173 7365  "]).        asse
+00026fd0: 7274 2062 6c6f 636b 5b22 6e75 6d62 6572  rt block["number
+00026fe0: 225d 203d 3d20 656d 7074 795f 626c 6f63  "] == empty_bloc
+00026ff0: 6b5b 226e 756d 6265 7222 5d0a 0a20 2020  k["number"]..   
+00027000: 2064 6566 2074 6573 745f 6574 685f 6765   def test_eth_ge
+00027010: 7442 6c6f 636b 4279 4e75 6d62 6572 5f6c  tBlockByNumber_l
+00027020: 6174 6573 7428 0a20 2020 2020 2020 2073  atest(.        s
+00027030: 656c 662c 2077 333a 2022 5765 6233 222c  elf, w3: "Web3",
+00027040: 2065 6d70 7479 5f62 6c6f 636b 3a20 426c   empty_block: Bl
+00027050: 6f63 6b44 6174 610a 2020 2020 2920 2d3e  ockData.    ) ->
+00027060: 204e 6f6e 653a 0a20 2020 2020 2020 2063   None:.        c
+00027070: 7572 7265 6e74 5f62 6c6f 636b 5f6e 756d  urrent_block_num
+00027080: 6265 7220 3d20 7733 2e65 7468 2e62 6c6f  ber = w3.eth.blo
+00027090: 636b 5f6e 756d 6265 720a 2020 2020 2020  ck_number.      
+000270a0: 2020 626c 6f63 6b20 3d20 7733 2e65 7468    block = w3.eth
+000270b0: 2e67 6574 5f62 6c6f 636b 2822 6c61 7465  .get_block("late
+000270c0: 7374 2229 0a20 2020 2020 2020 2061 7373  st").        ass
+000270d0: 6572 7420 626c 6f63 6b5b 226e 756d 6265  ert block["numbe
+000270e0: 7222 5d20 3d3d 2063 7572 7265 6e74 5f62  r"] == current_b
+000270f0: 6c6f 636b 5f6e 756d 6265 720a 0a20 2020  lock_number..   
+00027100: 2064 6566 2074 6573 745f 6574 685f 6765   def test_eth_ge
+00027110: 7442 6c6f 636b 4279 4e75 6d62 6572 5f6e  tBlockByNumber_n
+00027120: 6f74 5f66 6f75 6e64 280a 2020 2020 2020  ot_found(.      
+00027130: 2020 7365 6c66 2c20 7733 3a20 2257 6562    self, w3: "Web
+00027140: 3322 2c20 656d 7074 795f 626c 6f63 6b3a  3", empty_block:
+00027150: 2042 6c6f 636b 4461 7461 0a20 2020 2029   BlockData.    )
+00027160: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+00027170: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
+00027180: 6973 6573 2842 6c6f 636b 4e6f 7446 6f75  ises(BlockNotFou
+00027190: 6e64 293a 0a20 2020 2020 2020 2020 2020  nd):.           
+000271a0: 2077 332e 6574 682e 6765 745f 626c 6f63   w3.eth.get_bloc
+000271b0: 6b28 426c 6f63 6b4e 756d 6265 7228 3132  k(BlockNumber(12
+000271c0: 3334 3529 290a 0a20 2020 2064 6566 2074  345))..    def t
+000271d0: 6573 745f 6574 685f 6765 7442 6c6f 636b  est_eth_getBlock
+000271e0: 4279 4e75 6d62 6572 5f70 656e 6469 6e67  ByNumber_pending
+000271f0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+00027200: 7733 3a20 2257 6562 3322 2c20 656d 7074  w3: "Web3", empt
+00027210: 795f 626c 6f63 6b3a 2042 6c6f 636b 4461  y_block: BlockDa
+00027220: 7461 0a20 2020 2029 202d 3e20 4e6f 6e65  ta.    ) -> None
+00027230: 3a0a 2020 2020 2020 2020 6375 7272 656e  :.        curren
+00027240: 745f 626c 6f63 6b5f 6e75 6d62 6572 203d  t_block_number =
+00027250: 2077 332e 6574 682e 626c 6f63 6b5f 6e75   w3.eth.block_nu
+00027260: 6d62 6572 0a20 2020 2020 2020 2062 6c6f  mber.        blo
+00027270: 636b 203d 2077 332e 6574 682e 6765 745f  ck = w3.eth.get_
+00027280: 626c 6f63 6b28 2270 656e 6469 6e67 2229  block("pending")
+00027290: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+000272a0: 626c 6f63 6b5b 226e 756d 6265 7222 5d20  block["number"] 
+000272b0: 3d3d 2063 7572 7265 6e74 5f62 6c6f 636b  == current_block
+000272c0: 5f6e 756d 6265 7220 2b20 310a 0a20 2020  _number + 1..   
+000272d0: 2064 6566 2074 6573 745f 6574 685f 6765   def test_eth_ge
+000272e0: 7442 6c6f 636b 4279 4e75 6d62 6572 5f65  tBlockByNumber_e
+000272f0: 6172 6c69 6573 7428 0a20 2020 2020 2020  arliest(.       
+00027300: 2073 656c 662c 2077 333a 2022 5765 6233   self, w3: "Web3
+00027310: 222c 2065 6d70 7479 5f62 6c6f 636b 3a20  ", empty_block: 
+00027320: 426c 6f63 6b44 6174 610a 2020 2020 2920  BlockData.    ) 
+00027330: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+00027340: 2067 656e 6573 6973 5f62 6c6f 636b 203d   genesis_block =
+00027350: 2077 332e 6574 682e 6765 745f 626c 6f63   w3.eth.get_bloc
+00027360: 6b28 426c 6f63 6b4e 756d 6265 7228 3029  k(BlockNumber(0)
+00027370: 290a 2020 2020 2020 2020 626c 6f63 6b20  ).        block 
+00027380: 3d20 7733 2e65 7468 2e67 6574 5f62 6c6f  = w3.eth.get_blo
+00027390: 636b 2822 6561 726c 6965 7374 2229 0a20  ck("earliest"). 
+000273a0: 2020 2020 2020 2061 7373 6572 7420 626c         assert bl
+000273b0: 6f63 6b5b 226e 756d 6265 7222 5d20 3d3d  ock["number"] ==
+000273c0: 2030 0a20 2020 2020 2020 2061 7373 6572   0.        asser
+000273d0: 7420 626c 6f63 6b5b 2268 6173 6822 5d20  t block["hash"] 
+000273e0: 3d3d 2067 656e 6573 6973 5f62 6c6f 636b  == genesis_block
+000273f0: 5b22 6861 7368 225d 0a0a 2020 2020 4070  ["hash"]..    @p
+00027400: 7974 6573 742e 6d61 726b 2e78 6661 696c  ytest.mark.xfail
+00027410: 2872 6561 736f 6e3d 2249 6e74 6567 7261  (reason="Integra
+00027420: 7469 6f6e 2074 6573 7420 7375 6974 6520  tion test suite 
+00027430: 6e6f 7420 7965 7420 7365 7420 7570 2066  not yet set up f
+00027440: 6f72 2050 6f53 2229 0a20 2020 2064 6566  or PoS").    def
+00027450: 2074 6573 745f 6574 685f 6765 7442 6c6f   test_eth_getBlo
+00027460: 636b 4279 4e75 6d62 6572 5f73 6166 6528  ckByNumber_safe(
+00027470: 0a20 2020 2020 2020 2073 656c 662c 2077  .        self, w
+00027480: 333a 2022 5765 6233 222c 2065 6d70 7479  3: "Web3", empty
+00027490: 5f62 6c6f 636b 3a20 426c 6f63 6b44 6174  _block: BlockDat
+000274a0: 610a 2020 2020 2920 2d3e 204e 6f6e 653a  a.    ) -> None:
+000274b0: 0a20 2020 2020 2020 2062 6c6f 636b 203d  .        block =
+000274c0: 2077 332e 6574 682e 6765 745f 626c 6f63   w3.eth.get_bloc
+000274d0: 6b28 2273 6166 6522 290a 2020 2020 2020  k("safe").      
+000274e0: 2020 6173 7365 7274 2062 6c6f 636b 2069    assert block i
+000274f0: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
+00027500: 2020 2061 7373 6572 7420 6973 696e 7374     assert isinst
+00027510: 616e 6365 2862 6c6f 636b 5b22 6e75 6d62  ance(block["numb
+00027520: 6572 225d 2c20 696e 7429 0a0a 2020 2020  er"], int)..    
+00027530: 4070 7974 6573 742e 6d61 726b 2e78 6661  @pytest.mark.xfa
+00027540: 696c 2872 6561 736f 6e3d 2249 6e74 6567  il(reason="Integ
+00027550: 7261 7469 6f6e 2074 6573 7420 7375 6974  ration test suit
+00027560: 6520 6e6f 7420 7965 7420 7365 7420 7570  e not yet set up
+00027570: 2066 6f72 2050 6f53 2229 0a20 2020 2064   for PoS").    d
+00027580: 6566 2074 6573 745f 6574 685f 6765 7442  ef test_eth_getB
+00027590: 6c6f 636b 4279 4e75 6d62 6572 5f66 696e  lockByNumber_fin
+000275a0: 616c 697a 6564 280a 2020 2020 2020 2020  alized(.        
+000275b0: 7365 6c66 2c20 7733 3a20 2257 6562 3322  self, w3: "Web3"
+000275c0: 2c20 656d 7074 795f 626c 6f63 6b3a 2042  , empty_block: B
+000275d0: 6c6f 636b 4461 7461 0a20 2020 2029 202d  lockData.    ) -
+000275e0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+000275f0: 626c 6f63 6b20 3d20 7733 2e65 7468 2e67  block = w3.eth.g
+00027600: 6574 5f62 6c6f 636b 2822 6669 6e61 6c69  et_block("finali
+00027610: 7a65 6422 290a 2020 2020 2020 2020 6173  zed").        as
+00027620: 7365 7274 2062 6c6f 636b 2069 7320 6e6f  sert block is no
+00027630: 7420 4e6f 6e65 0a20 2020 2020 2020 2061  t None.        a
+00027640: 7373 6572 7420 6973 696e 7374 616e 6365  ssert isinstance
+00027650: 2862 6c6f 636b 5b22 6e75 6d62 6572 225d  (block["number"]
+00027660: 2c20 696e 7429 0a0a 2020 2020 6465 6620  , int)..    def 
+00027670: 7465 7374 5f65 7468 5f67 6574 426c 6f63  test_eth_getBloc
+00027680: 6b42 794e 756d 6265 725f 6675 6c6c 5f74  kByNumber_full_t
+00027690: 7261 6e73 6163 7469 6f6e 7328 0a20 2020  ransactions(.   
+000276a0: 2020 2020 2073 656c 662c 2077 333a 2022       self, w3: "
+000276b0: 5765 6233 222c 2062 6c6f 636b 5f77 6974  Web3", block_wit
+000276c0: 685f 7478 6e3a 2042 6c6f 636b 4461 7461  h_txn: BlockData
+000276d0: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+000276e0: 2020 2020 2020 2020 626c 6f63 6b20 3d20          block = 
+000276f0: 7733 2e65 7468 2e67 6574 5f62 6c6f 636b  w3.eth.get_block
+00027700: 2862 6c6f 636b 5f77 6974 685f 7478 6e5b  (block_with_txn[
+00027710: 226e 756d 6265 7222 5d2c 2054 7275 6529  "number"], True)
+00027720: 0a20 2020 2020 2020 2074 7261 6e73 6163  .        transac
+00027730: 7469 6f6e 203d 2062 6c6f 636b 5b22 7472  tion = block["tr
+00027740: 616e 7361 6374 696f 6e73 225d 5b30 5d0a  ansactions"][0].
+00027750: 2020 2020 2020 2020 6173 7365 7274 2074          assert t
+00027760: 7261 6e73 6163 7469 6f6e 5b22 6861 7368  ransaction["hash
+00027770: 225d 203d 3d20 626c 6f63 6b5f 7769 7468  "] == block_with
+00027780: 5f74 786e 5b22 7472 616e 7361 6374 696f  _txn["transactio
+00027790: 6e73 225d 5b30 5d20 2023 2074 7970 653a  ns"][0]  # type:
+000277a0: 2069 676e 6f72 650a 0a20 2020 2064 6566   ignore..    def
+000277b0: 2074 6573 745f 6574 685f 6765 7454 7261   test_eth_getTra
+000277c0: 6e73 6163 7469 6f6e 4279 4861 7368 2873  nsactionByHash(s
+000277d0: 656c 662c 2077 333a 2022 5765 6233 222c  elf, w3: "Web3",
+000277e0: 206d 696e 6564 5f74 786e 5f68 6173 683a   mined_txn_hash:
+000277f0: 2048 6578 5374 7229 202d 3e20 4e6f 6e65   HexStr) -> None
+00027800: 3a0a 2020 2020 2020 2020 7472 616e 7361  :.        transa
+00027810: 6374 696f 6e20 3d20 7733 2e65 7468 2e67  ction = w3.eth.g
+00027820: 6574 5f74 7261 6e73 6163 7469 6f6e 286d  et_transaction(m
+00027830: 696e 6564 5f74 786e 5f68 6173 6829 0a20  ined_txn_hash). 
+00027840: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+00027850: 5f64 6963 7428 7472 616e 7361 6374 696f  _dict(transactio
+00027860: 6e29 0a20 2020 2020 2020 2061 7373 6572  n).        asser
+00027870: 7420 7472 616e 7361 6374 696f 6e5b 2268  t transaction["h
+00027880: 6173 6822 5d20 3d3d 2048 6578 4279 7465  ash"] == HexByte
+00027890: 7328 6d69 6e65 645f 7478 6e5f 6861 7368  s(mined_txn_hash
+000278a0: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+000278b0: 6574 685f 6765 7454 7261 6e73 6163 7469  eth_getTransacti
+000278c0: 6f6e 4279 4861 7368 5f63 6f6e 7472 6163  onByHash_contrac
+000278d0: 745f 6372 6561 7469 6f6e 280a 2020 2020  t_creation(.    
+000278e0: 2020 2020 7365 6c66 2c20 7733 3a20 2257      self, w3: "W
+000278f0: 6562 3322 2c20 6d61 7468 5f63 6f6e 7472  eb3", math_contr
+00027900: 6163 745f 6465 706c 6f79 5f74 786e 5f68  act_deploy_txn_h
+00027910: 6173 683a 2048 6578 5374 720a 2020 2020  ash: HexStr.    
+00027920: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+00027930: 2020 2074 7261 6e73 6163 7469 6f6e 203d     transaction =
+00027940: 2077 332e 6574 682e 6765 745f 7472 616e   w3.eth.get_tran
+00027950: 7361 6374 696f 6e28 6d61 7468 5f63 6f6e  saction(math_con
+00027960: 7472 6163 745f 6465 706c 6f79 5f74 786e  tract_deploy_txn
+00027970: 5f68 6173 6829 0a20 2020 2020 2020 2061  _hash).        a
+00027980: 7373 6572 7420 6973 5f64 6963 7428 7472  ssert is_dict(tr
+00027990: 616e 7361 6374 696f 6e29 0a20 2020 2020  ansaction).     
+000279a0: 2020 2061 7373 6572 7420 7472 616e 7361     assert transa
+000279b0: 6374 696f 6e5b 2274 6f22 5d20 6973 204e  ction["to"] is N
+000279c0: 6f6e 652c 2066 2274 6f20 6669 656c 6420  one, f"to field 
+000279d0: 6973 207b 7472 616e 7361 6374 696f 6e5b  is {transaction[
+000279e0: 2774 6f27 5d21 727d 220a 0a20 2020 2064  'to']!r}"..    d
+000279f0: 6566 2074 6573 745f 6574 685f 6765 7454  ef test_eth_getT
+00027a00: 7261 6e73 6163 7469 6f6e 4279 426c 6f63  ransactionByBloc
+00027a10: 6b48 6173 6841 6e64 496e 6465 7828 0a20  kHashAndIndex(. 
+00027a20: 2020 2020 2020 2073 656c 662c 2077 333a         self, w3:
+00027a30: 2022 5765 6233 222c 2062 6c6f 636b 5f77   "Web3", block_w
+00027a40: 6974 685f 7478 6e3a 2042 6c6f 636b 4461  ith_txn: BlockDa
+00027a50: 7461 2c20 6d69 6e65 645f 7478 6e5f 6861  ta, mined_txn_ha
+00027a60: 7368 3a20 4865 7853 7472 0a20 2020 2029  sh: HexStr.    )
+00027a70: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+00027a80: 2020 7472 616e 7361 6374 696f 6e20 3d20    transaction = 
+00027a90: 7733 2e65 7468 2e67 6574 5f74 7261 6e73  w3.eth.get_trans
+00027aa0: 6163 7469 6f6e 5f62 795f 626c 6f63 6b28  action_by_block(
+00027ab0: 626c 6f63 6b5f 7769 7468 5f74 786e 5b22  block_with_txn["
+00027ac0: 6861 7368 225d 2c20 3029 0a20 2020 2020  hash"], 0).     
+00027ad0: 2020 2061 7373 6572 7420 6973 5f64 6963     assert is_dic
+00027ae0: 7428 7472 616e 7361 6374 696f 6e29 0a20  t(transaction). 
+00027af0: 2020 2020 2020 2061 7373 6572 7420 7472         assert tr
+00027b00: 616e 7361 6374 696f 6e5b 2268 6173 6822  ansaction["hash"
+00027b10: 5d20 3d3d 2048 6578 4279 7465 7328 6d69  ] == HexBytes(mi
+00027b20: 6e65 645f 7478 6e5f 6861 7368 290a 0a20  ned_txn_hash).. 
+00027b30: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
+00027b40: 6765 7454 7261 6e73 6163 7469 6f6e 4279  getTransactionBy
+00027b50: 426c 6f63 6b4e 756d 6265 7241 6e64 496e  BlockNumberAndIn
+00027b60: 6465 7828 0a20 2020 2020 2020 2073 656c  dex(.        sel
+00027b70: 662c 2077 333a 2022 5765 6233 222c 2062  f, w3: "Web3", b
+00027b80: 6c6f 636b 5f77 6974 685f 7478 6e3a 2042  lock_with_txn: B
+00027b90: 6c6f 636b 4461 7461 2c20 6d69 6e65 645f  lockData, mined_
+00027ba0: 7478 6e5f 6861 7368 3a20 4865 7853 7472  txn_hash: HexStr
+00027bb0: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+00027bc0: 2020 2020 2020 2020 7472 616e 7361 6374          transact
+00027bd0: 696f 6e20 3d20 7733 2e65 7468 2e67 6574  ion = w3.eth.get
+00027be0: 5f74 7261 6e73 6163 7469 6f6e 5f62 795f  _transaction_by_
+00027bf0: 626c 6f63 6b28 626c 6f63 6b5f 7769 7468  block(block_with
+00027c00: 5f74 786e 5b22 6e75 6d62 6572 225d 2c20  _txn["number"], 
+00027c10: 3029 0a20 2020 2020 2020 2061 7373 6572  0).        asser
+00027c20: 7420 6973 5f64 6963 7428 7472 616e 7361  t is_dict(transa
+00027c30: 6374 696f 6e29 0a20 2020 2020 2020 2061  ction).        a
+00027c40: 7373 6572 7420 7472 616e 7361 6374 696f  ssert transactio
+00027c50: 6e5b 2268 6173 6822 5d20 3d3d 2048 6578  n["hash"] == Hex
+00027c60: 4279 7465 7328 6d69 6e65 645f 7478 6e5f  Bytes(mined_txn_
+00027c70: 6861 7368 290a 0a20 2020 2064 6566 2074  hash)..    def t
+00027c80: 6573 745f 6574 685f 6765 745f 7472 616e  est_eth_get_tran
+00027c90: 7361 6374 696f 6e5f 7265 6365 6970 745f  saction_receipt_
+00027ca0: 6d69 6e65 6428 0a20 2020 2020 2020 2073  mined(.        s
+00027cb0: 656c 662c 2077 333a 2022 5765 6233 222c  elf, w3: "Web3",
+00027cc0: 2062 6c6f 636b 5f77 6974 685f 7478 6e3a   block_with_txn:
+00027cd0: 2042 6c6f 636b 4461 7461 2c20 6d69 6e65   BlockData, mine
+00027ce0: 645f 7478 6e5f 6861 7368 3a20 4865 7853  d_txn_hash: HexS
+00027cf0: 7472 0a20 2020 2029 202d 3e20 4e6f 6e65  tr.    ) -> None
+00027d00: 3a0a 2020 2020 2020 2020 7265 6365 6970  :.        receip
+00027d10: 7420 3d20 7733 2e65 7468 2e67 6574 5f74  t = w3.eth.get_t
+00027d20: 7261 6e73 6163 7469 6f6e 5f72 6563 6569  ransaction_recei
+00027d30: 7074 286d 696e 6564 5f74 786e 5f68 6173  pt(mined_txn_has
+00027d40: 6829 0a20 2020 2020 2020 2061 7373 6572  h).        asser
+00027d50: 7420 6973 5f64 6963 7428 7265 6365 6970  t is_dict(receip
+00027d60: 7429 0a20 2020 2020 2020 2061 7373 6572  t).        asser
+00027d70: 7420 7265 6365 6970 745b 2262 6c6f 636b  t receipt["block
+00027d80: 4e75 6d62 6572 225d 203d 3d20 626c 6f63  Number"] == bloc
+00027d90: 6b5f 7769 7468 5f74 786e 5b22 6e75 6d62  k_with_txn["numb
+00027da0: 6572 225d 0a20 2020 2020 2020 2061 7373  er"].        ass
+00027db0: 6572 7420 7265 6365 6970 745b 2262 6c6f  ert receipt["blo
+00027dc0: 636b 4861 7368 225d 203d 3d20 626c 6f63  ckHash"] == bloc
+00027dd0: 6b5f 7769 7468 5f74 786e 5b22 6861 7368  k_with_txn["hash
+00027de0: 225d 0a20 2020 2020 2020 2061 7373 6572  "].        asser
+00027df0: 7420 7265 6365 6970 745b 2274 7261 6e73  t receipt["trans
+00027e00: 6163 7469 6f6e 496e 6465 7822 5d20 3d3d  actionIndex"] ==
+00027e10: 2030 0a20 2020 2020 2020 2061 7373 6572   0.        asser
+00027e20: 7420 7265 6365 6970 745b 2274 7261 6e73  t receipt["trans
+00027e30: 6163 7469 6f6e 4861 7368 225d 203d 3d20  actionHash"] == 
+00027e40: 4865 7842 7974 6573 286d 696e 6564 5f74  HexBytes(mined_t
+00027e50: 786e 5f68 6173 6829 0a20 2020 2020 2020  xn_hash).       
+00027e60: 2061 7373 6572 7420 6973 5f63 6865 636b   assert is_check
+00027e70: 7375 6d5f 6164 6472 6573 7328 7265 6365  sum_address(rece
+00027e80: 6970 745b 2274 6f22 5d29 0a20 2020 2020  ipt["to"]).     
+00027e90: 2020 2061 7373 6572 7420 7265 6365 6970     assert receip
+00027ea0: 745b 2266 726f 6d22 5d20 6973 206e 6f74  t["from"] is not
+00027eb0: 204e 6f6e 650a 2020 2020 2020 2020 6173   None.        as
+00027ec0: 7365 7274 2069 735f 6368 6563 6b73 756d  sert is_checksum
+00027ed0: 5f61 6464 7265 7373 2872 6563 6569 7074  _address(receipt
+00027ee0: 5b22 6672 6f6d 225d 290a 0a20 2020 2020  ["from"])..     
+00027ef0: 2020 2065 6666 6563 7469 7665 5f67 6173     effective_gas
+00027f00: 5f70 7269 6365 203d 2072 6563 6569 7074  _price = receipt
+00027f10: 5b22 6566 6665 6374 6976 6547 6173 5072  ["effectiveGasPr
+00027f20: 6963 6522 5d0a 2020 2020 2020 2020 6173  ice"].        as
+00027f30: 7365 7274 2069 7369 6e73 7461 6e63 6528  sert isinstance(
+00027f40: 6566 6665 6374 6976 655f 6761 735f 7072  effective_gas_pr
+00027f50: 6963 652c 2069 6e74 290a 2020 2020 2020  ice, int).      
+00027f60: 2020 6173 7365 7274 2065 6666 6563 7469    assert effecti
+00027f70: 7665 5f67 6173 5f70 7269 6365 203e 2030  ve_gas_price > 0
+00027f80: 0a0a 2020 2020 6465 6620 7465 7374 5f65  ..    def test_e
+00027f90: 7468 5f67 6574 5f74 7261 6e73 6163 7469  th_get_transacti
+00027fa0: 6f6e 5f72 6563 6569 7074 5f75 6e6d 696e  on_receipt_unmin
+00027fb0: 6564 280a 2020 2020 2020 2020 7365 6c66  ed(.        self
+00027fc0: 2c20 7733 3a20 2257 6562 3322 2c20 756e  , w3: "Web3", un
+00027fd0: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
+00027fe0: 7561 6c5f 7479 7065 3a20 4368 6563 6b73  ual_type: Checks
+00027ff0: 756d 4164 6472 6573 730a 2020 2020 2920  umAddress.    ) 
+00028000: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+00028010: 2074 786e 5f68 6173 6820 3d20 7733 2e65   txn_hash = w3.e
+00028020: 7468 2e73 656e 645f 7472 616e 7361 6374  th.send_transact
+00028030: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
+00028040: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+00028050: 2020 2022 6672 6f6d 223a 2075 6e6c 6f63     "from": unloc
+00028060: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+00028070: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
+00028080: 2020 2020 2020 2022 746f 223a 2075 6e6c         "to": unl
+00028090: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
+000280a0: 616c 5f74 7970 652c 0a20 2020 2020 2020  al_type,.       
+000280b0: 2020 2020 2020 2020 2022 7661 6c75 6522           "value"
+000280c0: 3a20 5765 6928 3129 2c0a 2020 2020 2020  : Wei(1),.      
+000280d0: 2020 2020 2020 2020 2020 2267 6173 223a            "gas":
+000280e0: 2032 3130 3030 2c0a 2020 2020 2020 2020   21000,.        
+000280f0: 2020 2020 2020 2020 226d 6178 4665 6550          "maxFeeP
+00028100: 6572 4761 7322 3a20 7733 2e74 6f5f 7765  erGas": w3.to_we
+00028110: 6928 332c 2022 6777 6569 2229 2c0a 2020  i(3, "gwei"),.  
+00028120: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+00028130: 6178 5072 696f 7269 7479 4665 6550 6572  axPriorityFeePer
+00028140: 4761 7322 3a20 7733 2e74 6f5f 7765 6928  Gas": w3.to_wei(
+00028150: 312c 2022 6777 6569 2229 2c0a 2020 2020  1, "gwei"),.    
+00028160: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00028170: 2020 290a 2020 2020 2020 2020 7769 7468    ).        with
+00028180: 2070 7974 6573 742e 7261 6973 6573 2854   pytest.raises(T
+00028190: 7261 6e73 6163 7469 6f6e 4e6f 7446 6f75  ransactionNotFou
+000281a0: 6e64 293a 0a20 2020 2020 2020 2020 2020  nd):.           
+000281b0: 2077 332e 6574 682e 6765 745f 7472 616e   w3.eth.get_tran
+000281c0: 7361 6374 696f 6e5f 7265 6365 6970 7428  saction_receipt(
+000281d0: 7478 6e5f 6861 7368 290a 0a20 2020 2064  txn_hash)..    d
+000281e0: 6566 2074 6573 745f 6574 685f 6765 745f  ef test_eth_get_
+000281f0: 7472 616e 7361 6374 696f 6e5f 7265 6365  transaction_rece
+00028200: 6970 745f 7769 7468 5f6c 6f67 5f65 6e74  ipt_with_log_ent
+00028210: 7279 280a 2020 2020 2020 2020 7365 6c66  ry(.        self
+00028220: 2c0a 2020 2020 2020 2020 7733 3a20 2257  ,.        w3: "W
+00028230: 6562 3322 2c0a 2020 2020 2020 2020 626c  eb3",.        bl
+00028240: 6f63 6b5f 7769 7468 5f74 786e 5f77 6974  ock_with_txn_wit
+00028250: 685f 6c6f 673a 2042 6c6f 636b 4461 7461  h_log: BlockData
+00028260: 2c0a 2020 2020 2020 2020 656d 6974 7465  ,.        emitte
+00028270: 725f 636f 6e74 7261 6374 3a20 2243 6f6e  r_contract: "Con
+00028280: 7472 6163 7422 2c0a 2020 2020 2020 2020  tract",.        
+00028290: 7478 6e5f 6861 7368 5f77 6974 685f 6c6f  txn_hash_with_lo
+000282a0: 673a 2048 6578 5374 722c 0a20 2020 2029  g: HexStr,.    )
+000282b0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+000282c0: 2020 7265 6365 6970 7420 3d20 7733 2e65    receipt = w3.e
+000282d0: 7468 2e67 6574 5f74 7261 6e73 6163 7469  th.get_transacti
+000282e0: 6f6e 5f72 6563 6569 7074 2874 786e 5f68  on_receipt(txn_h
+000282f0: 6173 685f 7769 7468 5f6c 6f67 290a 2020  ash_with_log).  
+00028300: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+00028310: 6469 6374 2872 6563 6569 7074 290a 2020  dict(receipt).  
+00028320: 2020 2020 2020 6173 7365 7274 2072 6563        assert rec
+00028330: 6569 7074 5b22 626c 6f63 6b4e 756d 6265  eipt["blockNumbe
+00028340: 7222 5d20 3d3d 2062 6c6f 636b 5f77 6974  r"] == block_wit
+00028350: 685f 7478 6e5f 7769 7468 5f6c 6f67 5b22  h_txn_with_log["
+00028360: 6e75 6d62 6572 225d 0a20 2020 2020 2020  number"].       
+00028370: 2061 7373 6572 7420 7265 6365 6970 745b   assert receipt[
+00028380: 2262 6c6f 636b 4861 7368 225d 203d 3d20  "blockHash"] == 
+00028390: 626c 6f63 6b5f 7769 7468 5f74 786e 5f77  block_with_txn_w
+000283a0: 6974 685f 6c6f 675b 2268 6173 6822 5d0a  ith_log["hash"].
+000283b0: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
+000283c0: 6563 6569 7074 5b22 7472 616e 7361 6374  eceipt["transact
+000283d0: 696f 6e49 6e64 6578 225d 203d 3d20 300a  ionIndex"] == 0.
+000283e0: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
+000283f0: 6563 6569 7074 5b22 7472 616e 7361 6374  eceipt["transact
+00028400: 696f 6e48 6173 6822 5d20 3d3d 2048 6578  ionHash"] == Hex
+00028410: 4279 7465 7328 7478 6e5f 6861 7368 5f77  Bytes(txn_hash_w
+00028420: 6974 685f 6c6f 6729 0a0a 2020 2020 2020  ith_log)..      
+00028430: 2020 6173 7365 7274 206c 656e 2872 6563    assert len(rec
+00028440: 6569 7074 5b22 6c6f 6773 225d 2920 3d3d  eipt["logs"]) ==
+00028450: 2031 0a20 2020 2020 2020 206c 6f67 5f65   1.        log_e
+00028460: 6e74 7279 203d 2072 6563 6569 7074 5b22  ntry = receipt["
+00028470: 6c6f 6773 225d 5b30 5d0a 0a20 2020 2020  logs"][0]..     
+00028480: 2020 2061 7373 6572 7420 6c6f 675f 656e     assert log_en
+00028490: 7472 795b 2262 6c6f 636b 4e75 6d62 6572  try["blockNumber
+000284a0: 225d 203d 3d20 626c 6f63 6b5f 7769 7468  "] == block_with
+000284b0: 5f74 786e 5f77 6974 685f 6c6f 675b 226e  _txn_with_log["n
+000284c0: 756d 6265 7222 5d0a 2020 2020 2020 2020  umber"].        
+000284d0: 6173 7365 7274 206c 6f67 5f65 6e74 7279  assert log_entry
+000284e0: 5b22 626c 6f63 6b48 6173 6822 5d20 3d3d  ["blockHash"] ==
+000284f0: 2062 6c6f 636b 5f77 6974 685f 7478 6e5f   block_with_txn_
+00028500: 7769 7468 5f6c 6f67 5b22 6861 7368 225d  with_log["hash"]
+00028510: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00028520: 6c6f 675f 656e 7472 795b 226c 6f67 496e  log_entry["logIn
+00028530: 6465 7822 5d20 3d3d 2030 0a20 2020 2020  dex"] == 0.     
+00028540: 2020 2061 7373 6572 7420 6973 5f73 616d     assert is_sam
+00028550: 655f 6164 6472 6573 7328 6c6f 675f 656e  e_address(log_en
+00028560: 7472 795b 2261 6464 7265 7373 225d 2c20  try["address"], 
+00028570: 656d 6974 7465 725f 636f 6e74 7261 6374  emitter_contract
+00028580: 2e61 6464 7265 7373 290a 2020 2020 2020  .address).      
+00028590: 2020 6173 7365 7274 206c 6f67 5f65 6e74    assert log_ent
+000285a0: 7279 5b22 7472 616e 7361 6374 696f 6e49  ry["transactionI
+000285b0: 6e64 6578 225d 203d 3d20 300a 2020 2020  ndex"] == 0.    
+000285c0: 2020 2020 6173 7365 7274 206c 6f67 5f65      assert log_e
+000285d0: 6e74 7279 5b22 7472 616e 7361 6374 696f  ntry["transactio
+000285e0: 6e48 6173 6822 5d20 3d3d 2048 6578 4279  nHash"] == HexBy
+000285f0: 7465 7328 7478 6e5f 6861 7368 5f77 6974  tes(txn_hash_wit
+00028600: 685f 6c6f 6729 0a0a 2020 2020 6465 6620  h_log)..    def 
+00028610: 7465 7374 5f65 7468 5f77 6169 745f 666f  test_eth_wait_fo
+00028620: 725f 7472 616e 7361 6374 696f 6e5f 7265  r_transaction_re
+00028630: 6365 6970 745f 6d69 6e65 6428 0a20 2020  ceipt_mined(.   
+00028640: 2020 2020 2073 656c 662c 2077 333a 2022       self, w3: "
+00028650: 5765 6233 222c 2062 6c6f 636b 5f77 6974  Web3", block_wit
+00028660: 685f 7478 6e3a 2042 6c6f 636b 4461 7461  h_txn: BlockData
+00028670: 2c20 6d69 6e65 645f 7478 6e5f 6861 7368  , mined_txn_hash
+00028680: 3a20 4865 7853 7472 0a20 2020 2029 202d  : HexStr.    ) -
+00028690: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+000286a0: 7265 6365 6970 7420 3d20 7733 2e65 7468  receipt = w3.eth
+000286b0: 2e77 6169 745f 666f 725f 7472 616e 7361  .wait_for_transa
+000286c0: 6374 696f 6e5f 7265 6365 6970 7428 6d69  ction_receipt(mi
+000286d0: 6e65 645f 7478 6e5f 6861 7368 290a 2020  ned_txn_hash).  
+000286e0: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+000286f0: 6469 6374 2872 6563 6569 7074 290a 2020  dict(receipt).  
+00028700: 2020 2020 2020 6173 7365 7274 2072 6563        assert rec
+00028710: 6569 7074 5b22 626c 6f63 6b4e 756d 6265  eipt["blockNumbe
+00028720: 7222 5d20 3d3d 2062 6c6f 636b 5f77 6974  r"] == block_wit
+00028730: 685f 7478 6e5b 226e 756d 6265 7222 5d0a  h_txn["number"].
+00028740: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
+00028750: 6563 6569 7074 5b22 626c 6f63 6b48 6173  eceipt["blockHas
+00028760: 6822 5d20 3d3d 2062 6c6f 636b 5f77 6974  h"] == block_wit
+00028770: 685f 7478 6e5b 2268 6173 6822 5d0a 2020  h_txn["hash"].  
+00028780: 2020 2020 2020 6173 7365 7274 2072 6563        assert rec
+00028790: 6569 7074 5b22 7472 616e 7361 6374 696f  eipt["transactio
+000287a0: 6e49 6e64 6578 225d 203d 3d20 300a 2020  nIndex"] == 0.  
+000287b0: 2020 2020 2020 6173 7365 7274 2072 6563        assert rec
+000287c0: 6569 7074 5b22 7472 616e 7361 6374 696f  eipt["transactio
+000287d0: 6e48 6173 6822 5d20 3d3d 2048 6578 4279  nHash"] == HexBy
+000287e0: 7465 7328 6d69 6e65 645f 7478 6e5f 6861  tes(mined_txn_ha
+000287f0: 7368 290a 2020 2020 2020 2020 6173 7365  sh).        asse
+00028800: 7274 2069 735f 6368 6563 6b73 756d 5f61  rt is_checksum_a
+00028810: 6464 7265 7373 2872 6563 6569 7074 5b22  ddress(receipt["
+00028820: 746f 225d 290a 2020 2020 2020 2020 6173  to"]).        as
+00028830: 7365 7274 2072 6563 6569 7074 5b22 6672  sert receipt["fr
+00028840: 6f6d 225d 2069 7320 6e6f 7420 4e6f 6e65  om"] is not None
+00028850: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00028860: 6973 5f63 6865 636b 7375 6d5f 6164 6472  is_checksum_addr
+00028870: 6573 7328 7265 6365 6970 745b 2266 726f  ess(receipt["fro
+00028880: 6d22 5d29 0a0a 2020 2020 2020 2020 6566  m"])..        ef
+00028890: 6665 6374 6976 655f 6761 735f 7072 6963  fective_gas_pric
+000288a0: 6520 3d20 7265 6365 6970 745b 2265 6666  e = receipt["eff
+000288b0: 6563 7469 7665 4761 7350 7269 6365 225d  ectiveGasPrice"]
+000288c0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+000288d0: 6973 696e 7374 616e 6365 2865 6666 6563  isinstance(effec
+000288e0: 7469 7665 5f67 6173 5f70 7269 6365 2c20  tive_gas_price, 
+000288f0: 696e 7429 0a20 2020 2020 2020 2061 7373  int).        ass
+00028900: 6572 7420 6566 6665 6374 6976 655f 6761  ert effective_ga
+00028910: 735f 7072 6963 6520 3e20 300a 0a20 2020  s_price > 0..   
+00028920: 2064 6566 2074 6573 745f 6574 685f 7761   def test_eth_wa
+00028930: 6974 5f66 6f72 5f74 7261 6e73 6163 7469  it_for_transacti
+00028940: 6f6e 5f72 6563 6569 7074 5f75 6e6d 696e  on_receipt_unmin
+00028950: 6564 280a 2020 2020 2020 2020 7365 6c66  ed(.        self
+00028960: 2c20 7733 3a20 2257 6562 3322 2c20 756e  , w3: "Web3", un
+00028970: 6c6f 636b 6564 5f61 6363 6f75 6e74 5f64  locked_account_d
+00028980: 7561 6c5f 7479 7065 3a20 4368 6563 6b73  ual_type: Checks
+00028990: 756d 4164 6472 6573 730a 2020 2020 2920  umAddress.    ) 
+000289a0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+000289b0: 2074 786e 5f68 6173 6820 3d20 7733 2e65   txn_hash = w3.e
+000289c0: 7468 2e73 656e 645f 7472 616e 7361 6374  th.send_transact
+000289d0: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
+000289e0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+000289f0: 2020 2022 6672 6f6d 223a 2075 6e6c 6f63     "from": unloc
+00028a00: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+00028a10: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
+00028a20: 2020 2020 2020 2022 746f 223a 2075 6e6c         "to": unl
+00028a30: 6f63 6b65 645f 6163 636f 756e 745f 6475  ocked_account_du
+00028a40: 616c 5f74 7970 652c 0a20 2020 2020 2020  al_type,.       
+00028a50: 2020 2020 2020 2020 2022 7661 6c75 6522           "value"
+00028a60: 3a20 5765 6928 3129 2c0a 2020 2020 2020  : Wei(1),.      
+00028a70: 2020 2020 2020 2020 2020 2267 6173 223a            "gas":
+00028a80: 2032 3130 3030 2c0a 2020 2020 2020 2020   21000,.        
+00028a90: 2020 2020 2020 2020 226d 6178 4665 6550          "maxFeeP
+00028aa0: 6572 4761 7322 3a20 7733 2e74 6f5f 7765  erGas": w3.to_we
+00028ab0: 6928 332c 2022 6777 6569 2229 2c0a 2020  i(3, "gwei"),.  
+00028ac0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+00028ad0: 6178 5072 696f 7269 7479 4665 6550 6572  axPriorityFeePer
+00028ae0: 4761 7322 3a20 7733 2e74 6f5f 7765 6928  Gas": w3.to_wei(
+00028af0: 312c 2022 6777 6569 2229 2c0a 2020 2020  1, "gwei"),.    
+00028b00: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00028b10: 2020 290a 0a20 2020 2020 2020 2074 696d    )..        tim
+00028b20: 656f 7574 203d 2032 0a20 2020 2020 2020  eout = 2.       
+00028b30: 2077 6974 6820 7079 7465 7374 2e72 6169   with pytest.rai
+00028b40: 7365 7328 5469 6d65 4578 6861 7573 7465  ses(TimeExhauste
+00028b50: 6429 2061 7320 6578 635f 696e 666f 3a0a  d) as exc_info:.
+00028b60: 2020 2020 2020 2020 2020 2020 7733 2e65              w3.e
+00028b70: 7468 2e77 6169 745f 666f 725f 7472 616e  th.wait_for_tran
+00028b80: 7361 6374 696f 6e5f 7265 6365 6970 7428  saction_receipt(
+00028b90: 7478 6e5f 6861 7368 2c20 7469 6d65 6f75  txn_hash, timeou
+00028ba0: 743d 7469 6d65 6f75 7429 0a0a 2020 2020  t=timeout)..    
+00028bb0: 2020 2020 6173 7365 7274 2028 5f20 696e      assert (_ in
+00028bc0: 2073 7472 2865 7863 5f69 6e66 6f29 2066   str(exc_info) f
+00028bd0: 6f72 205f 2069 6e20 5b72 6570 7228 7478  or _ in [repr(tx
+00028be0: 6e5f 6861 7368 292c 2074 696d 656f 7574  n_hash), timeout
+00028bf0: 5d29 0a0a 2020 2020 6465 6620 7465 7374  ])..    def test
+00028c00: 5f65 7468 5f77 6169 745f 666f 725f 7472  _eth_wait_for_tr
+00028c10: 616e 7361 6374 696f 6e5f 7265 6365 6970  ansaction_receip
+00028c20: 745f 7769 7468 5f6c 6f67 5f65 6e74 7279  t_with_log_entry
+00028c30: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00028c40: 2020 2020 2020 2020 7733 3a20 2257 6562          w3: "Web
+00028c50: 3322 2c0a 2020 2020 2020 2020 626c 6f63  3",.        bloc
+00028c60: 6b5f 7769 7468 5f74 786e 5f77 6974 685f  k_with_txn_with_
+00028c70: 6c6f 673a 2042 6c6f 636b 4461 7461 2c0a  log: BlockData,.
+00028c80: 2020 2020 2020 2020 656d 6974 7465 725f          emitter_
+00028c90: 636f 6e74 7261 6374 3a20 2243 6f6e 7472  contract: "Contr
+00028ca0: 6163 7422 2c0a 2020 2020 2020 2020 7478  act",.        tx
+00028cb0: 6e5f 6861 7368 5f77 6974 685f 6c6f 673a  n_hash_with_log:
+00028cc0: 2048 6578 5374 722c 0a20 2020 2029 202d   HexStr,.    ) -
+00028cd0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00028ce0: 7265 6365 6970 7420 3d20 7733 2e65 7468  receipt = w3.eth
+00028cf0: 2e77 6169 745f 666f 725f 7472 616e 7361  .wait_for_transa
+00028d00: 6374 696f 6e5f 7265 6365 6970 7428 7478  ction_receipt(tx
+00028d10: 6e5f 6861 7368 5f77 6974 685f 6c6f 6729  n_hash_with_log)
+00028d20: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00028d30: 6973 5f64 6963 7428 7265 6365 6970 7429  is_dict(receipt)
+00028d40: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00028d50: 7265 6365 6970 745b 2262 6c6f 636b 4e75  receipt["blockNu
+00028d60: 6d62 6572 225d 203d 3d20 626c 6f63 6b5f  mber"] == block_
+00028d70: 7769 7468 5f74 786e 5f77 6974 685f 6c6f  with_txn_with_lo
+00028d80: 675b 226e 756d 6265 7222 5d0a 2020 2020  g["number"].    
+00028d90: 2020 2020 6173 7365 7274 2072 6563 6569      assert recei
+00028da0: 7074 5b22 626c 6f63 6b48 6173 6822 5d20  pt["blockHash"] 
+00028db0: 3d3d 2062 6c6f 636b 5f77 6974 685f 7478  == block_with_tx
+00028dc0: 6e5f 7769 7468 5f6c 6f67 5b22 6861 7368  n_with_log["hash
+00028dd0: 225d 0a20 2020 2020 2020 2061 7373 6572  "].        asser
+00028de0: 7420 7265 6365 6970 745b 2274 7261 6e73  t receipt["trans
+00028df0: 6163 7469 6f6e 496e 6465 7822 5d20 3d3d  actionIndex"] ==
+00028e00: 2030 0a20 2020 2020 2020 2061 7373 6572   0.        asser
+00028e10: 7420 7265 6365 6970 745b 2274 7261 6e73  t receipt["trans
+00028e20: 6163 7469 6f6e 4861 7368 225d 203d 3d20  actionHash"] == 
+00028e30: 4865 7842 7974 6573 2874 786e 5f68 6173  HexBytes(txn_has
+00028e40: 685f 7769 7468 5f6c 6f67 290a 0a20 2020  h_with_log)..   
+00028e50: 2020 2020 2061 7373 6572 7420 6c65 6e28       assert len(
+00028e60: 7265 6365 6970 745b 226c 6f67 7322 5d29  receipt["logs"])
+00028e70: 203d 3d20 310a 2020 2020 2020 2020 6c6f   == 1.        lo
+00028e80: 675f 656e 7472 7920 3d20 7265 6365 6970  g_entry = receip
+00028e90: 745b 226c 6f67 7322 5d5b 305d 0a0a 2020  t["logs"][0]..  
+00028ea0: 2020 2020 2020 6173 7365 7274 206c 6f67        assert log
+00028eb0: 5f65 6e74 7279 5b22 626c 6f63 6b4e 756d  _entry["blockNum
+00028ec0: 6265 7222 5d20 3d3d 2062 6c6f 636b 5f77  ber"] == block_w
+00028ed0: 6974 685f 7478 6e5f 7769 7468 5f6c 6f67  ith_txn_with_log
+00028ee0: 5b22 6e75 6d62 6572 225d 0a20 2020 2020  ["number"].     
+00028ef0: 2020 2061 7373 6572 7420 6c6f 675f 656e     assert log_en
+00028f00: 7472 795b 2262 6c6f 636b 4861 7368 225d  try["blockHash"]
+00028f10: 203d 3d20 626c 6f63 6b5f 7769 7468 5f74   == block_with_t
+00028f20: 786e 5f77 6974 685f 6c6f 675b 2268 6173  xn_with_log["has
+00028f30: 6822 5d0a 2020 2020 2020 2020 6173 7365  h"].        asse
+00028f40: 7274 206c 6f67 5f65 6e74 7279 5b22 6c6f  rt log_entry["lo
+00028f50: 6749 6e64 6578 225d 203d 3d20 300a 2020  gIndex"] == 0.  
+00028f60: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+00028f70: 7361 6d65 5f61 6464 7265 7373 286c 6f67  same_address(log
+00028f80: 5f65 6e74 7279 5b22 6164 6472 6573 7322  _entry["address"
+00028f90: 5d2c 2065 6d69 7474 6572 5f63 6f6e 7472  ], emitter_contr
+00028fa0: 6163 742e 6164 6472 6573 7329 0a20 2020  act.address).   
+00028fb0: 2020 2020 2061 7373 6572 7420 6c6f 675f       assert log_
+00028fc0: 656e 7472 795b 2274 7261 6e73 6163 7469  entry["transacti
+00028fd0: 6f6e 496e 6465 7822 5d20 3d3d 2030 0a20  onIndex"] == 0. 
+00028fe0: 2020 2020 2020 2061 7373 6572 7420 6c6f         assert lo
+00028ff0: 675f 656e 7472 795b 2274 7261 6e73 6163  g_entry["transac
+00029000: 7469 6f6e 4861 7368 225d 203d 3d20 4865  tionHash"] == He
+00029010: 7842 7974 6573 2874 786e 5f68 6173 685f  xBytes(txn_hash_
+00029020: 7769 7468 5f6c 6f67 290a 0a20 2020 2064  with_log)..    d
+00029030: 6566 2074 6573 745f 6574 685f 6765 7455  ef test_eth_getU
+00029040: 6e63 6c65 4279 426c 6f63 6b48 6173 6841  ncleByBlockHashA
+00029050: 6e64 496e 6465 7828 7365 6c66 2c20 7733  ndIndex(self, w3
+00029060: 3a20 2257 6562 3322 2920 2d3e 204e 6f6e  : "Web3") -> Non
+00029070: 653a 0a20 2020 2020 2020 2023 2054 4f44  e:.        # TOD
+00029080: 4f3a 2068 6f77 2064 6f20 7765 206d 616b  O: how do we mak
+00029090: 6520 756e 636c 6573 2e2e 2e2e 0a20 2020  e uncles.....   
+000290a0: 2020 2020 2070 6173 730a 0a20 2020 2064       pass..    d
+000290b0: 6566 2074 6573 745f 6574 685f 6765 7455  ef test_eth_getU
+000290c0: 6e63 6c65 4279 426c 6f63 6b4e 756d 6265  ncleByBlockNumbe
+000290d0: 7241 6e64 496e 6465 7828 7365 6c66 2c20  rAndIndex(self, 
+000290e0: 7733 3a20 2257 6562 3322 2920 2d3e 204e  w3: "Web3") -> N
+000290f0: 6f6e 653a 0a20 2020 2020 2020 2023 2054  one:.        # T
+00029100: 4f44 4f3a 2068 6f77 2064 6f20 7765 206d  ODO: how do we m
+00029110: 616b 6520 756e 636c 6573 2e2e 2e2e 0a20  ake uncles..... 
+00029120: 2020 2020 2020 2070 6173 730a 0a20 2020         pass..   
+00029130: 2064 6566 2074 6573 745f 6574 685f 6e65   def test_eth_ne
+00029140: 775f 6669 6c74 6572 2873 656c 662c 2077  w_filter(self, w
+00029150: 333a 2022 5765 6233 2229 202d 3e20 4e6f  3: "Web3") -> No
+00029160: 6e65 3a0a 2020 2020 2020 2020 6669 6c74  ne:.        filt
+00029170: 6572 203d 2077 332e 6574 682e 6669 6c74  er = w3.eth.filt
+00029180: 6572 287b 7d29 0a0a 2020 2020 2020 2020  er({})..        
+00029190: 6368 616e 6765 7320 3d20 7733 2e65 7468  changes = w3.eth
+000291a0: 2e67 6574 5f66 696c 7465 725f 6368 616e  .get_filter_chan
+000291b0: 6765 7328 6669 6c74 6572 2e66 696c 7465  ges(filter.filte
+000291c0: 725f 6964 290a 2020 2020 2020 2020 6173  r_id).        as
+000291d0: 7365 7274 2069 735f 6c69 7374 5f6c 696b  sert is_list_lik
+000291e0: 6528 6368 616e 6765 7329 0a20 2020 2020  e(changes).     
+000291f0: 2020 2061 7373 6572 7420 6e6f 7420 6368     assert not ch
+00029200: 616e 6765 730a 0a20 2020 2020 2020 206c  anges..        l
+00029210: 6f67 7320 3d20 7733 2e65 7468 2e67 6574  ogs = w3.eth.get
+00029220: 5f66 696c 7465 725f 6c6f 6773 2866 696c  _filter_logs(fil
+00029230: 7465 722e 6669 6c74 6572 5f69 6429 0a20  ter.filter_id). 
+00029240: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+00029250: 5f6c 6973 745f 6c69 6b65 286c 6f67 7329  _list_like(logs)
+00029260: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00029270: 6e6f 7420 6c6f 6773 0a0a 2020 2020 2020  not logs..      
+00029280: 2020 7265 7375 6c74 203d 2077 332e 6574    result = w3.et
+00029290: 682e 756e 696e 7374 616c 6c5f 6669 6c74  h.uninstall_filt
+000292a0: 6572 2866 696c 7465 722e 6669 6c74 6572  er(filter.filter
+000292b0: 5f69 6429 0a20 2020 2020 2020 2061 7373  _id).        ass
+000292c0: 6572 7420 7265 7375 6c74 2069 7320 5472  ert result is Tr
+000292d0: 7565 0a0a 2020 2020 6465 6620 7465 7374  ue..    def test
+000292e0: 5f65 7468 5f6e 6577 5f62 6c6f 636b 5f66  _eth_new_block_f
+000292f0: 696c 7465 7228 7365 6c66 2c20 7733 3a20  ilter(self, w3: 
+00029300: 2257 6562 3322 2920 2d3e 204e 6f6e 653a  "Web3") -> None:
+00029310: 0a20 2020 2020 2020 2066 696c 7465 7220  .        filter 
+00029320: 3d20 7733 2e65 7468 2e66 696c 7465 7228  = w3.eth.filter(
+00029330: 226c 6174 6573 7422 290a 2020 2020 2020  "latest").      
+00029340: 2020 6173 7365 7274 2069 735f 7374 7269    assert is_stri
+00029350: 6e67 2866 696c 7465 722e 6669 6c74 6572  ng(filter.filter
+00029360: 5f69 6429 0a0a 2020 2020 2020 2020 6368  _id)..        ch
+00029370: 616e 6765 7320 3d20 7733 2e65 7468 2e67  anges = w3.eth.g
+00029380: 6574 5f66 696c 7465 725f 6368 616e 6765  et_filter_change
+00029390: 7328 6669 6c74 6572 2e66 696c 7465 725f  s(filter.filter_
+000293a0: 6964 290a 2020 2020 2020 2020 6173 7365  id).        asse
+000293b0: 7274 2069 735f 6c69 7374 5f6c 696b 6528  rt is_list_like(
+000293c0: 6368 616e 6765 7329 0a20 2020 2020 2020  changes).       
+000293d0: 2061 7373 6572 7420 6e6f 7420 6368 616e   assert not chan
+000293e0: 6765 730a 0a20 2020 2020 2020 2072 6573  ges..        res
+000293f0: 756c 7420 3d20 7733 2e65 7468 2e75 6e69  ult = w3.eth.uni
+00029400: 6e73 7461 6c6c 5f66 696c 7465 7228 6669  nstall_filter(fi
+00029410: 6c74 6572 2e66 696c 7465 725f 6964 290a  lter.filter_id).
+00029420: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
+00029430: 6573 756c 7420 6973 2054 7275 650a 0a20  esult is True.. 
+00029440: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
+00029450: 6e65 775f 7065 6e64 696e 675f 7472 616e  new_pending_tran
+00029460: 7361 6374 696f 6e5f 6669 6c74 6572 2873  saction_filter(s
+00029470: 656c 662c 2077 333a 2022 5765 6233 2229  elf, w3: "Web3")
+00029480: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+00029490: 2020 6669 6c74 6572 203d 2077 332e 6574    filter = w3.et
+000294a0: 682e 6669 6c74 6572 2822 7065 6e64 696e  h.filter("pendin
+000294b0: 6722 290a 2020 2020 2020 2020 6173 7365  g").        asse
+000294c0: 7274 2069 735f 7374 7269 6e67 2866 696c  rt is_string(fil
+000294d0: 7465 722e 6669 6c74 6572 5f69 6429 0a0a  ter.filter_id)..
+000294e0: 2020 2020 2020 2020 6368 616e 6765 7320          changes 
+000294f0: 3d20 7733 2e65 7468 2e67 6574 5f66 696c  = w3.eth.get_fil
+00029500: 7465 725f 6368 616e 6765 7328 6669 6c74  ter_changes(filt
+00029510: 6572 2e66 696c 7465 725f 6964 290a 2020  er.filter_id).  
+00029520: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+00029530: 6c69 7374 5f6c 696b 6528 6368 616e 6765  list_like(change
+00029540: 7329 0a20 2020 2020 2020 2061 7373 6572  s).        asser
+00029550: 7420 6e6f 7420 6368 616e 6765 730a 0a20  t not changes.. 
+00029560: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+00029570: 7733 2e65 7468 2e75 6e69 6e73 7461 6c6c  w3.eth.uninstall
+00029580: 5f66 696c 7465 7228 6669 6c74 6572 2e66  _filter(filter.f
+00029590: 696c 7465 725f 6964 290a 2020 2020 2020  ilter_id).      
+000295a0: 2020 6173 7365 7274 2072 6573 756c 7420    assert result 
+000295b0: 6973 2054 7275 650a 0a20 2020 2064 6566  is True..    def
+000295c0: 2074 6573 745f 6574 685f 6765 745f 6c6f   test_eth_get_lo
+000295d0: 6773 5f77 6974 686f 7574 5f6c 6f67 7328  gs_without_logs(
+000295e0: 0a20 2020 2020 2020 2073 656c 662c 2077  .        self, w
+000295f0: 333a 2022 5765 6233 222c 2062 6c6f 636b  3: "Web3", block
+00029600: 5f77 6974 685f 7478 6e5f 7769 7468 5f6c  _with_txn_with_l
+00029610: 6f67 3a20 426c 6f63 6b44 6174 610a 2020  og: BlockData.  
+00029620: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+00029630: 2020 2020 2023 2054 6573 7420 7769 7468       # Test with
+00029640: 2062 6c6f 636b 2072 616e 6765 0a0a 2020   block range..  
+00029650: 2020 2020 2020 6669 6c74 6572 5f70 6172        filter_par
+00029660: 616d 733a 2046 696c 7465 7250 6172 616d  ams: FilterParam
+00029670: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
+00029680: 2020 2266 726f 6d42 6c6f 636b 223a 2042    "fromBlock": B
+00029690: 6c6f 636b 4e75 6d62 6572 2830 292c 0a20  lockNumber(0),. 
+000296a0: 2020 2020 2020 2020 2020 2022 746f 426c             "toBl
+000296b0: 6f63 6b22 3a20 426c 6f63 6b4e 756d 6265  ock": BlockNumbe
+000296c0: 7228 626c 6f63 6b5f 7769 7468 5f74 786e  r(block_with_txn
+000296d0: 5f77 6974 685f 6c6f 675b 226e 756d 6265  _with_log["numbe
+000296e0: 7222 5d20 2d20 3129 2c0a 2020 2020 2020  r"] - 1),.      
+000296f0: 2020 7d0a 2020 2020 2020 2020 7265 7375    }.        resu
+00029700: 6c74 203d 2077 332e 6574 682e 6765 745f  lt = w3.eth.get_
+00029710: 6c6f 6773 2866 696c 7465 725f 7061 7261  logs(filter_para
+00029720: 6d73 290a 2020 2020 2020 2020 6173 7365  ms).        asse
+00029730: 7274 206c 656e 2872 6573 756c 7429 203d  rt len(result) =
+00029740: 3d20 300a 0a20 2020 2020 2020 2023 2074  = 0..        # t
+00029750: 6865 2072 616e 6765 2069 7320 7772 6f6e  he range is wron
+00029760: 670a 2020 2020 2020 2020 6669 6c74 6572  g.        filter
+00029770: 5f70 6172 616d 7320 3d20 7b0a 2020 2020  _params = {.    
+00029780: 2020 2020 2020 2020 2266 726f 6d42 6c6f          "fromBlo
+00029790: 636b 223a 2062 6c6f 636b 5f77 6974 685f  ck": block_with_
+000297a0: 7478 6e5f 7769 7468 5f6c 6f67 5b22 6e75  txn_with_log["nu
+000297b0: 6d62 6572 225d 2c0a 2020 2020 2020 2020  mber"],.        
+000297c0: 2020 2020 2274 6f42 6c6f 636b 223a 2042      "toBlock": B
+000297d0: 6c6f 636b 4e75 6d62 6572 2862 6c6f 636b  lockNumber(block
+000297e0: 5f77 6974 685f 7478 6e5f 7769 7468 5f6c  _with_txn_with_l
+000297f0: 6f67 5b22 6e75 6d62 6572 225d 202d 2031  og["number"] - 1
+00029800: 292c 0a20 2020 2020 2020 207d 0a20 2020  ),.        }.   
+00029810: 2020 2020 2072 6573 756c 7420 3d20 7733       result = w3
+00029820: 2e65 7468 2e67 6574 5f6c 6f67 7328 6669  .eth.get_logs(fi
+00029830: 6c74 6572 5f70 6172 616d 7329 0a20 2020  lter_params).   
+00029840: 2020 2020 2061 7373 6572 7420 6c65 6e28       assert len(
+00029850: 7265 7375 6c74 2920 3d3d 2030 0a0a 2020  result) == 0..  
+00029860: 2020 2020 2020 2320 5465 7374 2077 6974        # Test wit
+00029870: 6820 6061 6464 7265 7373 600a 0a20 2020  h `address`..   
+00029880: 2020 2020 2023 2066 696c 7465 7220 7769       # filter wi
+00029890: 7468 206f 7468 6572 2061 6464 7265 7373  th other address
+000298a0: 0a20 2020 2020 2020 2066 696c 7465 725f  .        filter_
+000298b0: 7061 7261 6d73 203d 207b 0a20 2020 2020  params = {.     
+000298c0: 2020 2020 2020 2022 6672 6f6d 426c 6f63         "fromBloc
+000298d0: 6b22 3a20 426c 6f63 6b4e 756d 6265 7228  k": BlockNumber(
+000298e0: 3029 2c0a 2020 2020 2020 2020 2020 2020  0),.            
+000298f0: 2261 6464 7265 7373 223a 2055 4e4b 4e4f  "address": UNKNO
+00029900: 574e 5f41 4444 5245 5353 2c0a 2020 2020  WN_ADDRESS,.    
+00029910: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
+00029920: 7375 6c74 203d 2077 332e 6574 682e 6765  sult = w3.eth.ge
+00029930: 745f 6c6f 6773 2866 696c 7465 725f 7061  t_logs(filter_pa
+00029940: 7261 6d73 290a 2020 2020 2020 2020 6173  rams).        as
+00029950: 7365 7274 206c 656e 2872 6573 756c 7429  sert len(result)
+00029960: 203d 3d20 300a 0a20 2020 2020 2020 2023   == 0..        #
+00029970: 2054 6573 7420 7769 7468 206d 756c 7469   Test with multi
+00029980: 706c 6520 6061 6464 7265 7373 600a 0a20  ple `address`.. 
+00029990: 2020 2020 2020 2023 2066 696c 7465 7220         # filter 
+000299a0: 7769 7468 206f 7468 6572 2061 6464 7265  with other addre
+000299b0: 7373 0a20 2020 2020 2020 2066 696c 7465  ss.        filte
+000299c0: 725f 7061 7261 6d73 203d 207b 0a20 2020  r_params = {.   
+000299d0: 2020 2020 2020 2020 2022 6672 6f6d 426c           "fromBl
+000299e0: 6f63 6b22 3a20 426c 6f63 6b4e 756d 6265  ock": BlockNumbe
+000299f0: 7228 3029 2c0a 2020 2020 2020 2020 2020  r(0),.          
+00029a00: 2020 2261 6464 7265 7373 223a 205b 554e    "address": [UN
+00029a10: 4b4e 4f57 4e5f 4144 4452 4553 532c 2055  KNOWN_ADDRESS, U
+00029a20: 4e4b 4e4f 574e 5f41 4444 5245 5353 5d2c  NKNOWN_ADDRESS],
+00029a30: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
+00029a40: 2020 2072 6573 756c 7420 3d20 7733 2e65     result = w3.e
+00029a50: 7468 2e67 6574 5f6c 6f67 7328 6669 6c74  th.get_logs(filt
+00029a60: 6572 5f70 6172 616d 7329 0a20 2020 2020  er_params).     
+00029a70: 2020 2061 7373 6572 7420 6c65 6e28 7265     assert len(re
+00029a80: 7375 6c74 2920 3d3d 2030 0a0a 2020 2020  sult) == 0..    
+00029a90: 6465 6620 7465 7374 5f65 7468 5f67 6574  def test_eth_get
+00029aa0: 5f6c 6f67 735f 7769 7468 5f6c 6f67 7328  _logs_with_logs(
+00029ab0: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
+00029ac0: 2020 2020 2020 2077 333a 2022 5765 6233         w3: "Web3
+00029ad0: 222c 0a20 2020 2020 2020 2062 6c6f 636b  ",.        block
+00029ae0: 5f77 6974 685f 7478 6e5f 7769 7468 5f6c  _with_txn_with_l
+00029af0: 6f67 3a20 426c 6f63 6b44 6174 612c 0a20  og: BlockData,. 
+00029b00: 2020 2020 2020 2065 6d69 7474 6572 5f63         emitter_c
+00029b10: 6f6e 7472 6163 745f 6164 6472 6573 733a  ontract_address:
+00029b20: 2043 6865 636b 7375 6d41 6464 7265 7373   ChecksumAddress
+00029b30: 2c0a 2020 2020 2020 2020 7478 6e5f 6861  ,.        txn_ha
+00029b40: 7368 5f77 6974 685f 6c6f 673a 2048 6578  sh_with_log: Hex
+00029b50: 5374 722c 0a20 2020 2029 202d 3e20 4e6f  Str,.    ) -> No
+00029b60: 6e65 3a0a 2020 2020 2020 2020 2320 5465  ne:.        # Te
+00029b70: 7374 2077 6974 6820 626c 6f63 6b20 7261  st with block ra
+00029b80: 6e67 650a 0a20 2020 2020 2020 2023 2074  nge..        # t
+00029b90: 6865 2072 616e 6765 2069 6e63 6c75 6465  he range include
+00029ba0: 7320 7468 6520 626c 6f63 6b20 7768 6572  s the block wher
+00029bb0: 6520 7468 6520 6c6f 6720 7265 7369 6465  e the log reside
+00029bc0: 7320 696e 0a20 2020 2020 2020 2066 696c  s in.        fil
+00029bd0: 7465 725f 7061 7261 6d73 3a20 4669 6c74  ter_params: Filt
+00029be0: 6572 5061 7261 6d73 203d 207b 0a20 2020  erParams = {.   
+00029bf0: 2020 2020 2020 2020 2022 6672 6f6d 426c           "fromBl
+00029c00: 6f63 6b22 3a20 626c 6f63 6b5f 7769 7468  ock": block_with
+00029c10: 5f74 786e 5f77 6974 685f 6c6f 675b 226e  _txn_with_log["n
+00029c20: 756d 6265 7222 5d2c 0a20 2020 2020 2020  umber"],.       
+00029c30: 2020 2020 2022 746f 426c 6f63 6b22 3a20       "toBlock": 
+00029c40: 626c 6f63 6b5f 7769 7468 5f74 786e 5f77  block_with_txn_w
+00029c50: 6974 685f 6c6f 675b 226e 756d 6265 7222  ith_log["number"
+00029c60: 5d2c 0a20 2020 2020 2020 207d 0a20 2020  ],.        }.   
+00029c70: 2020 2020 2072 6573 756c 7420 3d20 7733       result = w3
+00029c80: 2e65 7468 2e67 6574 5f6c 6f67 7328 6669  .eth.get_logs(fi
+00029c90: 6c74 6572 5f70 6172 616d 7329 0a20 2020  lter_params).   
+00029ca0: 2020 2020 2061 7373 6572 745f 636f 6e74       assert_cont
+00029cb0: 6169 6e73 5f6c 6f67 280a 2020 2020 2020  ains_log(.      
+00029cc0: 2020 2020 2020 7265 7375 6c74 2c20 626c        result, bl
+00029cd0: 6f63 6b5f 7769 7468 5f74 786e 5f77 6974  ock_with_txn_wit
+00029ce0: 685f 6c6f 672c 2065 6d69 7474 6572 5f63  h_log, emitter_c
+00029cf0: 6f6e 7472 6163 745f 6164 6472 6573 732c  ontract_address,
+00029d00: 2074 786e 5f68 6173 685f 7769 7468 5f6c   txn_hash_with_l
+00029d10: 6f67 0a20 2020 2020 2020 2029 0a0a 2020  og.        )..  
+00029d20: 2020 2020 2020 2320 7370 6563 6966 7920        # specify 
+00029d30: 6f6e 6c79 2060 6672 6f6d 5f62 6c6f 636b  only `from_block
+00029d40: 602e 2062 7920 6465 6661 756c 7420 6074  `. by default `t
+00029d50: 6f5f 626c 6f63 6b60 2073 686f 756c 6420  o_block` should 
+00029d60: 6265 2027 6c61 7465 7374 270a 2020 2020  be 'latest'.    
+00029d70: 2020 2020 6669 6c74 6572 5f70 6172 616d      filter_param
+00029d80: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
+00029d90: 2020 2266 726f 6d42 6c6f 636b 223a 2042    "fromBlock": B
+00029da0: 6c6f 636b 4e75 6d62 6572 2830 292c 0a20  lockNumber(0),. 
+00029db0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00029dc0: 2072 6573 756c 7420 3d20 7733 2e65 7468   result = w3.eth
+00029dd0: 2e67 6574 5f6c 6f67 7328 6669 6c74 6572  .get_logs(filter
+00029de0: 5f70 6172 616d 7329 0a20 2020 2020 2020  _params).       
+00029df0: 2061 7373 6572 745f 636f 6e74 6169 6e73   assert_contains
+00029e00: 5f6c 6f67 280a 2020 2020 2020 2020 2020  _log(.          
+00029e10: 2020 7265 7375 6c74 2c20 626c 6f63 6b5f    result, block_
+00029e20: 7769 7468 5f74 786e 5f77 6974 685f 6c6f  with_txn_with_lo
+00029e30: 672c 2065 6d69 7474 6572 5f63 6f6e 7472  g, emitter_contr
+00029e40: 6163 745f 6164 6472 6573 732c 2074 786e  act_address, txn
+00029e50: 5f68 6173 685f 7769 7468 5f6c 6f67 0a20  _hash_with_log. 
+00029e60: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00029e70: 2020 2320 5465 7374 2077 6974 6820 6061    # Test with `a
+00029e80: 6464 7265 7373 600a 0a20 2020 2020 2020  ddress`..       
+00029e90: 2023 2066 696c 7465 7220 7769 7468 2065   # filter with e
+00029ea0: 6d69 7474 6572 5f63 6f6e 7472 6163 742e  mitter_contract.
+00029eb0: 6164 6472 6573 730a 2020 2020 2020 2020  address.        
+00029ec0: 6669 6c74 6572 5f70 6172 616d 7320 3d20  filter_params = 
+00029ed0: 7b0a 2020 2020 2020 2020 2020 2020 2266  {.            "f
+00029ee0: 726f 6d42 6c6f 636b 223a 2042 6c6f 636b  romBlock": Block
+00029ef0: 4e75 6d62 6572 2830 292c 0a20 2020 2020  Number(0),.     
+00029f00: 2020 2020 2020 2022 6164 6472 6573 7322         "address"
+00029f10: 3a20 656d 6974 7465 725f 636f 6e74 7261  : emitter_contra
+00029f20: 6374 5f61 6464 7265 7373 2c0a 2020 2020  ct_address,.    
+00029f30: 2020 2020 7d0a 0a20 2020 2064 6566 2074      }..    def t
+00029f40: 6573 745f 6574 685f 6765 745f 6c6f 6773  est_eth_get_logs
+00029f50: 5f77 6974 685f 6c6f 6773 5f74 6f70 6963  _with_logs_topic
+00029f60: 5f61 7267 7328 0a20 2020 2020 2020 2073  _args(.        s
+00029f70: 656c 662c 0a20 2020 2020 2020 2077 333a  elf,.        w3:
+00029f80: 2022 5765 6233 222c 0a20 2020 2020 2020   "Web3",.       
+00029f90: 2062 6c6f 636b 5f77 6974 685f 7478 6e5f   block_with_txn_
+00029fa0: 7769 7468 5f6c 6f67 3a20 426c 6f63 6b44  with_log: BlockD
+00029fb0: 6174 612c 0a20 2020 2020 2020 2065 6d69  ata,.        emi
+00029fc0: 7474 6572 5f63 6f6e 7472 6163 745f 6164  tter_contract_ad
+00029fd0: 6472 6573 733a 2043 6865 636b 7375 6d41  dress: ChecksumA
+00029fe0: 6464 7265 7373 2c0a 2020 2020 2020 2020  ddress,.        
+00029ff0: 7478 6e5f 6861 7368 5f77 6974 685f 6c6f  txn_hash_with_lo
+0002a000: 673a 2048 6578 5374 722c 0a20 2020 2029  g: HexStr,.    )
+0002a010: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+0002a020: 2020 2320 5465 7374 2077 6974 6820 4e6f    # Test with No
+0002a030: 6e65 2065 7665 6e74 2073 6967 0a0a 2020  ne event sig..  
+0002a040: 2020 2020 2020 6669 6c74 6572 5f70 6172        filter_par
+0002a050: 616d 733a 2046 696c 7465 7250 6172 616d  ams: FilterParam
+0002a060: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
+0002a070: 2020 2266 726f 6d42 6c6f 636b 223a 2042    "fromBlock": B
+0002a080: 6c6f 636b 4e75 6d62 6572 2830 292c 0a20  lockNumber(0),. 
+0002a090: 2020 2020 2020 2020 2020 2022 746f 7069             "topi
+0002a0a0: 6373 223a 205b 0a20 2020 2020 2020 2020  cs": [.         
+0002a0b0: 2020 2020 2020 204e 6f6e 652c 0a20 2020         None,.   
+0002a0c0: 2020 2020 2020 2020 2020 2020 2048 6578               Hex
+0002a0d0: 5374 7228 0a20 2020 2020 2020 2020 2020  Str(.           
+0002a0e0: 2020 2020 2020 2020 2022 3078 3030 3030           "0x0000
+0002a0f0: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+0002a100: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+0002a110: 3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000
+0002a120: 3030 3030 3030 3030 6434 3331 220a 2020  00000000d431".  
+0002a130: 2020 2020 2020 2020 2020 2020 2020 292c                ),
+0002a140: 0a20 2020 2020 2020 2020 2020 205d 2c0a  .            ],.
+0002a150: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
+0002a160: 2020 2072 6573 756c 7420 3d20 7733 2e65     result = w3.e
+0002a170: 7468 2e67 6574 5f6c 6f67 7328 6669 6c74  th.get_logs(filt
+0002a180: 6572 5f70 6172 616d 7329 0a20 2020 2020  er_params).     
+0002a190: 2020 2061 7373 6572 745f 636f 6e74 6169     assert_contai
+0002a1a0: 6e73 5f6c 6f67 280a 2020 2020 2020 2020  ns_log(.        
+0002a1b0: 2020 2020 7265 7375 6c74 2c20 626c 6f63      result, bloc
+0002a1c0: 6b5f 7769 7468 5f74 786e 5f77 6974 685f  k_with_txn_with_
+0002a1d0: 6c6f 672c 2065 6d69 7474 6572 5f63 6f6e  log, emitter_con
+0002a1e0: 7472 6163 745f 6164 6472 6573 732c 2074  tract_address, t
+0002a1f0: 786e 5f68 6173 685f 7769 7468 5f6c 6f67  xn_hash_with_log
+0002a200: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+0002a210: 2020 2020 2320 5465 7374 2077 6974 6820      # Test with 
+0002a220: 4e6f 6e65 2069 6e64 6578 6564 2061 7267  None indexed arg
+0002a230: 0a20 2020 2020 2020 2066 696c 7465 725f  .        filter_
+0002a240: 7061 7261 6d73 203d 207b 0a20 2020 2020  params = {.     
+0002a250: 2020 2020 2020 2022 6672 6f6d 426c 6f63         "fromBloc
+0002a260: 6b22 3a20 426c 6f63 6b4e 756d 6265 7228  k": BlockNumber(
+0002a270: 3029 2c0a 2020 2020 2020 2020 2020 2020  0),.            
+0002a280: 2274 6f70 6963 7322 3a20 5b0a 2020 2020  "topics": [.    
+0002a290: 2020 2020 2020 2020 2020 2020 4865 7853              HexS
+0002a2a0: 7472 280a 2020 2020 2020 2020 2020 2020  tr(.            
+0002a2b0: 2020 2020 2020 2020 2230 7830 3537 6263          "0x057bc
+0002a2c0: 3332 3832 3666 6265 3136 3164 6131 6331  32826fbe161da1c1
+0002a2d0: 3130 6166 6364 6361 6537 6331 3039 6138  10afcdcae7c109a8
+0002a2e0: 6236 3931 3439 6637 3237 6663 3337 6136  b69149f727fc37a6
+0002a2f0: 3033 6336 3065 6639 3463 6122 0a20 2020  03c60ef94ca".   
+0002a300: 2020 2020 2020 2020 2020 2020 2029 2c0a               ),.
+0002a310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a320: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+0002a330: 2020 5d2c 0a20 2020 2020 2020 207d 0a20    ],.        }. 
+0002a340: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+0002a350: 7733 2e65 7468 2e67 6574 5f6c 6f67 7328  w3.eth.get_logs(
+0002a360: 6669 6c74 6572 5f70 6172 616d 7329 0a20  filter_params). 
+0002a370: 2020 2020 2020 2061 7373 6572 745f 636f         assert_co
+0002a380: 6e74 6169 6e73 5f6c 6f67 280a 2020 2020  ntains_log(.    
+0002a390: 2020 2020 2020 2020 7265 7375 6c74 2c20          result, 
+0002a3a0: 626c 6f63 6b5f 7769 7468 5f74 786e 5f77  block_with_txn_w
+0002a3b0: 6974 685f 6c6f 672c 2065 6d69 7474 6572  ith_log, emitter
+0002a3c0: 5f63 6f6e 7472 6163 745f 6164 6472 6573  _contract_addres
+0002a3d0: 732c 2074 786e 5f68 6173 685f 7769 7468  s, txn_hash_with
+0002a3e0: 5f6c 6f67 0a20 2020 2020 2020 2029 0a0a  _log.        )..
+0002a3f0: 2020 2020 6465 6620 7465 7374 5f65 7468      def test_eth
+0002a400: 5f67 6574 5f6c 6f67 735f 7769 7468 5f6c  _get_logs_with_l
+0002a410: 6f67 735f 6e6f 6e65 5f74 6f70 6963 5f61  ogs_none_topic_a
+0002a420: 7267 7328 7365 6c66 2c20 7733 3a20 2257  rgs(self, w3: "W
+0002a430: 6562 3322 2920 2d3e 204e 6f6e 653a 0a20  eb3") -> None:. 
+0002a440: 2020 2020 2020 2023 2054 6573 7420 7769         # Test wi
+0002a450: 7468 204e 6f6e 6520 6f76 6572 666c 6f77  th None overflow
+0002a460: 696e 670a 2020 2020 2020 2020 6669 6c74  ing.        filt
+0002a470: 6572 5f70 6172 616d 733a 2046 696c 7465  er_params: Filte
+0002a480: 7250 6172 616d 7320 3d20 7b0a 2020 2020  rParams = {.    
+0002a490: 2020 2020 2020 2020 2266 726f 6d42 6c6f          "fromBlo
+0002a4a0: 636b 223a 2042 6c6f 636b 4e75 6d62 6572  ck": BlockNumber
+0002a4b0: 2830 292c 0a20 2020 2020 2020 2020 2020  (0),.           
+0002a4c0: 2022 746f 7069 6373 223a 205b 4e6f 6e65   "topics": [None
+0002a4d0: 2c20 4e6f 6e65 2c20 4e6f 6e65 5d2c 0a20  , None, None],. 
+0002a4e0: 2020 2020 2020 207d 0a0a 2020 2020 2020         }..      
+0002a4f0: 2020 7265 7375 6c74 203d 2077 332e 6574    result = w3.et
+0002a500: 682e 6765 745f 6c6f 6773 2866 696c 7465  h.get_logs(filte
+0002a510: 725f 7061 7261 6d73 290a 2020 2020 2020  r_params).      
+0002a520: 2020 6173 7365 7274 206c 656e 2872 6573    assert len(res
+0002a530: 756c 7429 203d 3d20 300a 0a20 2020 2064  ult) == 0..    d
+0002a540: 6566 2074 6573 745f 6574 685f 6361 6c6c  ef test_eth_call
+0002a550: 5f6f 6c64 5f63 6f6e 7472 6163 745f 7374  _old_contract_st
+0002a560: 6174 6528 0a20 2020 2020 2020 2073 656c  ate(.        sel
+0002a570: 662c 2077 333a 2022 5765 6233 222c 206d  f, w3: "Web3", m
+0002a580: 6174 685f 636f 6e74 7261 6374 3a20 2243  ath_contract: "C
+0002a590: 6f6e 7472 6163 7422 2c20 756e 6c6f 636b  ontract", unlock
+0002a5a0: 6564 5f61 6363 6f75 6e74 3a20 4368 6563  ed_account: Chec
+0002a5b0: 6b73 756d 4164 6472 6573 730a 2020 2020  ksumAddress.    
+0002a5c0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+0002a5d0: 2020 2073 7461 7274 5f62 6c6f 636b 203d     start_block =
+0002a5e0: 2077 332e 6574 682e 6765 745f 626c 6f63   w3.eth.get_bloc
+0002a5f0: 6b28 226c 6174 6573 7422 290a 2020 2020  k("latest").    
+0002a600: 2020 2020 626c 6f63 6b5f 6e75 6d20 3d20      block_num = 
+0002a610: 7374 6172 745f 626c 6f63 6b5b 226e 756d  start_block["num
+0002a620: 6265 7222 5d0a 2020 2020 2020 2020 626c  ber"].        bl
+0002a630: 6f63 6b5f 6861 7368 203d 2073 7461 7274  ock_hash = start
+0002a640: 5f62 6c6f 636b 5b22 6861 7368 225d 0a0a  _block["hash"]..
+0002a650: 2020 2020 2020 2020 6d61 7468 5f63 6f6e          math_con
+0002a660: 7472 6163 742e 6675 6e63 7469 6f6e 732e  tract.functions.
+0002a670: 696e 6372 656d 656e 7443 6f75 6e74 6572  incrementCounter
+0002a680: 2829 2e74 7261 6e73 6163 7428 7b22 6672  ().transact({"fr
+0002a690: 6f6d 223a 2075 6e6c 6f63 6b65 645f 6163  om": unlocked_ac
+0002a6a0: 636f 756e 747d 290a 0a20 2020 2020 2020  count})..       
+0002a6b0: 2023 2054 6869 7320 6973 6e27 7420 616e   # This isn't an
+0002a6c0: 2069 6e63 7265 6469 626c 7920 636f 6e76   incredibly conv
+0002a6d0: 696e 6369 6e67 2074 6573 7420 7369 6e63  incing test sinc
+0002a6e0: 6520 7765 2063 616e 2774 206d 696e 652c  e we can't mine,
+0002a6f0: 2061 6e64 0a20 2020 2020 2020 2023 2074   and.        # t
+0002a700: 6865 2064 6566 6175 6c74 2072 6573 6f6c  he default resol
+0002a710: 7665 6420 626c 6f63 6b20 6973 206c 6174  ved block is lat
+0002a720: 6573 742c 2053 6f20 6966 2062 6c6f 636b  est, So if block
+0002a730: 5f69 6465 6e74 6966 6965 7220 7761 7320  _identifier was 
+0002a740: 6967 6e6f 7265 640a 2020 2020 2020 2020  ignored.        
+0002a750: 2320 7765 2077 6f75 6c64 2067 6574 2074  # we would get t
+0002a760: 6865 2073 616d 6520 7265 7375 6c74 2e20  he same result. 
+0002a770: 466f 7220 6e6f 772c 2077 6520 6d6f 7374  For now, we most
+0002a780: 6c79 2064 6570 656e 6420 6f6e 2063 6f72  ly depend on cor
+0002a790: 6520 7465 7374 732e 0a20 2020 2020 2020  e tests..       
+0002a7a0: 2023 2049 6465 6173 2074 6f20 696d 7072   # Ideas to impr
+0002a7b0: 6f76 6520 7468 6973 2074 6573 743a 0a20  ove this test:. 
+0002a7c0: 2020 2020 2020 2023 2020 2d20 456e 6162         #  - Enab
+0002a7d0: 6c65 206f 6e2d 6465 6d61 6e64 206d 696e  le on-demand min
+0002a7e0: 696e 6720 696e 206d 6f72 6520 636c 6965  ing in more clie
+0002a7f0: 6e74 730a 2020 2020 2020 2020 2320 202d  nts.        #  -
+0002a800: 2049 6e63 7265 6d65 6e74 2074 6865 206d   Increment the m
+0002a810: 6174 6820 636f 6e74 7261 6374 2069 6e20  ath contract in 
+0002a820: 616c 6c20 6f66 2074 6865 2066 6978 7475  all of the fixtu
+0002a830: 7265 732c 2061 6e64 2063 6865 636b 2074  res, and check t
+0002a840: 6865 0a20 2020 2020 2020 2023 2020 2020  he.        #    
+0002a850: 7661 6c75 6520 696e 2061 6e20 6f6c 6420  value in an old 
+0002a860: 626c 6f63 6b0a 2020 2020 2020 2020 626c  block.        bl
+0002a870: 6f63 6b5f 6861 7368 5f63 616c 6c5f 7265  ock_hash_call_re
+0002a880: 7375 6c74 203d 206d 6174 685f 636f 6e74  sult = math_cont
+0002a890: 7261 6374 2e66 756e 6374 696f 6e73 2e63  ract.functions.c
+0002a8a0: 6f75 6e74 6572 2829 2e63 616c 6c28 0a20  ounter().call(. 
+0002a8b0: 2020 2020 2020 2020 2020 2062 6c6f 636b             block
+0002a8c0: 5f69 6465 6e74 6966 6965 723d 626c 6f63  _identifier=bloc
+0002a8d0: 6b5f 6861 7368 0a20 2020 2020 2020 2029  k_hash.        )
+0002a8e0: 0a20 2020 2020 2020 2062 6c6f 636b 5f6e  .        block_n
+0002a8f0: 756d 5f63 616c 6c5f 7265 7375 6c74 203d  um_call_result =
+0002a900: 206d 6174 685f 636f 6e74 7261 6374 2e66   math_contract.f
+0002a910: 756e 6374 696f 6e73 2e63 6f75 6e74 6572  unctions.counter
+0002a920: 2829 2e63 616c 6c28 0a20 2020 2020 2020  ().call(.       
+0002a930: 2020 2020 2062 6c6f 636b 5f69 6465 6e74       block_ident
+0002a940: 6966 6965 723d 626c 6f63 6b5f 6e75 6d0a  ifier=block_num.
+0002a950: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0002a960: 2020 6c61 7465 7374 5f63 616c 6c5f 7265    latest_call_re
+0002a970: 7375 6c74 203d 206d 6174 685f 636f 6e74  sult = math_cont
+0002a980: 7261 6374 2e66 756e 6374 696f 6e73 2e63  ract.functions.c
+0002a990: 6f75 6e74 6572 2829 2e63 616c 6c28 0a20  ounter().call(. 
+0002a9a0: 2020 2020 2020 2020 2020 2062 6c6f 636b             block
+0002a9b0: 5f69 6465 6e74 6966 6965 723d 226c 6174  _identifier="lat
+0002a9c0: 6573 7422 0a20 2020 2020 2020 2029 0a20  est".        ). 
+0002a9d0: 2020 2020 2020 2064 6566 6175 6c74 5f63         default_c
+0002a9e0: 616c 6c5f 7265 7375 6c74 203d 206d 6174  all_result = mat
+0002a9f0: 685f 636f 6e74 7261 6374 2e66 756e 6374  h_contract.funct
+0002aa00: 696f 6e73 2e63 6f75 6e74 6572 2829 2e63  ions.counter().c
+0002aa10: 616c 6c28 290a 2020 2020 2020 2020 7065  all().        pe
+0002aa20: 6e64 696e 675f 6361 6c6c 5f72 6573 756c  nding_call_resul
+0002aa30: 7420 3d20 6d61 7468 5f63 6f6e 7472 6163  t = math_contrac
+0002aa40: 742e 6675 6e63 7469 6f6e 732e 636f 756e  t.functions.coun
+0002aa50: 7465 7228 292e 6361 6c6c 280a 2020 2020  ter().call(.    
+0002aa60: 2020 2020 2020 2020 626c 6f63 6b5f 6964          block_id
+0002aa70: 656e 7469 6669 6572 3d22 7065 6e64 696e  entifier="pendin
+0002aa80: 6722 0a20 2020 2020 2020 2029 0a0a 2020  g".        )..  
+0002aa90: 2020 2020 2020 6173 7365 7274 2062 6c6f        assert blo
+0002aaa0: 636b 5f68 6173 685f 6361 6c6c 5f72 6573  ck_hash_call_res
+0002aab0: 756c 7420 3d3d 2030 0a20 2020 2020 2020  ult == 0.       
+0002aac0: 2061 7373 6572 7420 626c 6f63 6b5f 6e75   assert block_nu
+0002aad0: 6d5f 6361 6c6c 5f72 6573 756c 7420 3d3d  m_call_result ==
+0002aae0: 2030 0a20 2020 2020 2020 2061 7373 6572   0.        asser
+0002aaf0: 7420 6c61 7465 7374 5f63 616c 6c5f 7265  t latest_call_re
+0002ab00: 7375 6c74 203d 3d20 300a 2020 2020 2020  sult == 0.      
+0002ab10: 2020 6173 7365 7274 2064 6566 6175 6c74    assert default
+0002ab20: 5f63 616c 6c5f 7265 7375 6c74 203d 3d20  _call_result == 
+0002ab30: 300a 0a20 2020 2020 2020 2069 6620 7065  0..        if pe
+0002ab40: 6e64 696e 675f 6361 6c6c 5f72 6573 756c  nding_call_resul
+0002ab50: 7420 213d 2031 3a0a 2020 2020 2020 2020  t != 1:.        
+0002ab60: 2020 2020 7261 6973 6520 4173 7365 7274      raise Assert
+0002ab70: 696f 6e45 7272 6f72 280a 2020 2020 2020  ionError(.      
+0002ab80: 2020 2020 2020 2020 2020 6622 7065 6e64            f"pend
+0002ab90: 696e 6720 6361 6c6c 2072 6573 756c 7420  ing call result 
+0002aba0: 7761 7320 7b70 656e 6469 6e67 5f63 616c  was {pending_cal
+0002abb0: 6c5f 7265 7375 6c74 7d20 696e 7374 6561  l_result} instea
+0002abc0: 6420 6f66 2031 220a 2020 2020 2020 2020  d of 1".        
+0002abd0: 2020 2020 290a 0a20 2020 2064 6566 2074      )..    def t
+0002abe0: 6573 745f 6574 685f 756e 696e 7374 616c  est_eth_uninstal
+0002abf0: 6c5f 6669 6c74 6572 2873 656c 662c 2077  l_filter(self, w
+0002ac00: 333a 2022 5765 6233 2229 202d 3e20 4e6f  3: "Web3") -> No
+0002ac10: 6e65 3a0a 2020 2020 2020 2020 6669 6c74  ne:.        filt
+0002ac20: 6572 203d 2077 332e 6574 682e 6669 6c74  er = w3.eth.filt
+0002ac30: 6572 287b 7d29 0a20 2020 2020 2020 2061  er({}).        a
+0002ac40: 7373 6572 7420 6973 5f73 7472 696e 6728  ssert is_string(
+0002ac50: 6669 6c74 6572 2e66 696c 7465 725f 6964  filter.filter_id
+0002ac60: 290a 0a20 2020 2020 2020 2073 7563 6365  )..        succe
+0002ac70: 7373 203d 2077 332e 6574 682e 756e 696e  ss = w3.eth.unin
+0002ac80: 7374 616c 6c5f 6669 6c74 6572 2866 696c  stall_filter(fil
+0002ac90: 7465 722e 6669 6c74 6572 5f69 6429 0a20  ter.filter_id). 
+0002aca0: 2020 2020 2020 2061 7373 6572 7420 7375         assert su
+0002acb0: 6363 6573 7320 6973 2054 7275 650a 0a20  ccess is True.. 
+0002acc0: 2020 2020 2020 2066 6169 6c75 7265 203d         failure =
+0002acd0: 2077 332e 6574 682e 756e 696e 7374 616c   w3.eth.uninstal
+0002ace0: 6c5f 6669 6c74 6572 2866 696c 7465 722e  l_filter(filter.
+0002acf0: 6669 6c74 6572 5f69 6429 0a20 2020 2020  filter_id).     
+0002ad00: 2020 2061 7373 6572 7420 6661 696c 7572     assert failur
+0002ad10: 6520 6973 2046 616c 7365 0a0a 2020 2020  e is False..    
+0002ad20: 6465 6620 7465 7374 5f65 7468 5f73 7562  def test_eth_sub
+0002ad30: 6d69 745f 6861 7368 7261 7465 2873 656c  mit_hashrate(sel
+0002ad40: 662c 2077 333a 2022 5765 6233 2229 202d  f, w3: "Web3") -
+0002ad50: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+0002ad60: 2320 6e6f 6465 5f69 6420 6672 6f6d 2045  # node_id from E
+0002ad70: 4950 2031 3437 343a 2068 7474 7073 3a2f  IP 1474: https:/
+0002ad80: 2f67 6974 6875 622e 636f 6d2f 6574 6865  /github.com/ethe
+0002ad90: 7265 756d 2f45 4950 732f 7075 6c6c 2f31  reum/EIPs/pull/1
+0002ada0: 3437 342f 6669 6c65 730a 2020 2020 2020  474/files.      
+0002adb0: 2020 6e6f 6465 5f69 6420 3d20 4865 7853    node_id = HexS
+0002adc0: 7472 280a 2020 2020 2020 2020 2020 2020  tr(.            
+0002add0: 2235 3964 6161 3236 3538 3164 3061 6364  "59daa26581d0acd
+0002ade0: 3166 6365 3235 3466 6237 6538 3539 3532  1fce254fb7e85952
+0002adf0: 6634 6330 3964 3039 3135 6166 6433 3364  f4c09d0915afd33d
+0002ae00: 3338 3836 6364 3931 3462 6337 6432 3833  3886cd914bc7d283
+0002ae10: 6322 0a20 2020 2020 2020 2029 0a20 2020  c".        ).   
+0002ae20: 2020 2020 2072 6573 756c 7420 3d20 7733       result = w3
+0002ae30: 2e65 7468 2e73 7562 6d69 745f 6861 7368  .eth.submit_hash
+0002ae40: 7261 7465 2835 3030 302c 206e 6f64 655f  rate(5000, node_
+0002ae50: 6964 290a 2020 2020 2020 2020 6173 7365  id).        asse
+0002ae60: 7274 2072 6573 756c 7420 6973 2054 7275  rt result is Tru
+0002ae70: 650a 0a20 2020 2064 6566 2074 6573 745f  e..    def test_
+0002ae80: 6574 685f 7375 626d 6974 5f77 6f72 6b28  eth_submit_work(
+0002ae90: 7365 6c66 2c20 7733 3a20 2257 6562 3322  self, w3: "Web3"
+0002aea0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+0002aeb0: 2020 206e 6f6e 6365 203d 2031 0a20 2020     nonce = 1.   
+0002aec0: 2020 2020 2070 6f77 5f68 6173 6820 3d20       pow_hash = 
+0002aed0: 4865 7853 7472 280a 2020 2020 2020 2020  HexStr(.        
+0002aee0: 2020 2020 2230 7831 3233 3435 3637 3839      "0x123456789
+0002aef0: 3061 6263 6465 6631 3233 3435 3637 3839  0abcdef123456789
+0002af00: 3061 6263 6465 6631 3233 3435 3637 3839  0abcdef123456789
+0002af10: 3061 6263 6465 6631 3233 3435 3637 3839  0abcdef123456789
+0002af20: 3061 6263 6465 6622 0a20 2020 2020 2020  0abcdef".       
+0002af30: 2029 0a20 2020 2020 2020 206d 6978 5f64   ).        mix_d
+0002af40: 6967 6573 7420 3d20 4865 7853 7472 280a  igest = HexStr(.
+0002af50: 2020 2020 2020 2020 2020 2020 2230 7844              "0xD
+0002af60: 3146 4535 3730 3030 3030 3030 3030 3030  1FE5700000000000
+0002af70: 3030 3030 3030 3030 3030 3030 3030 3044  000000000000000D
+0002af80: 3146 4535 3730 3030 3030 3030 3030 3030  1FE5700000000000
+0002af90: 3030 3030 3030 3030 3030 3030 3030 3022  000000000000000"
+0002afa0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+0002afb0: 2020 2072 6573 756c 7420 3d20 7733 2e65     result = w3.e
+0002afc0: 7468 2e73 7562 6d69 745f 776f 726b 286e  th.submit_work(n
+0002afd0: 6f6e 6365 2c20 706f 775f 6861 7368 2c20  once, pow_hash, 
+0002afe0: 6d69 785f 6469 6765 7374 290a 2020 2020  mix_digest).    
+0002aff0: 2020 2020 6173 7365 7274 2072 6573 756c      assert resul
+0002b000: 7420 6973 2046 616c 7365 0a0a 2020 2020  t is False..    
+0002b010: 6465 6620 7465 7374 5f65 7468 5f67 6574  def test_eth_get
+0002b020: 5f72 6177 5f74 7261 6e73 6163 7469 6f6e  _raw_transaction
+0002b030: 2873 656c 662c 2077 333a 2022 5765 6233  (self, w3: "Web3
+0002b040: 222c 206d 696e 6564 5f74 786e 5f68 6173  ", mined_txn_has
+0002b050: 683a 2048 6578 5374 7229 202d 3e20 4e6f  h: HexStr) -> No
+0002b060: 6e65 3a0a 2020 2020 2020 2020 7261 775f  ne:.        raw_
+0002b070: 7472 616e 7361 6374 696f 6e20 3d20 7733  transaction = w3
+0002b080: 2e65 7468 2e67 6574 5f72 6177 5f74 7261  .eth.get_raw_tra
+0002b090: 6e73 6163 7469 6f6e 286d 696e 6564 5f74  nsaction(mined_t
+0002b0a0: 786e 5f68 6173 6829 0a20 2020 2020 2020  xn_hash).       
+0002b0b0: 2061 7373 6572 7420 6973 5f62 7974 6573   assert is_bytes
+0002b0c0: 2872 6177 5f74 7261 6e73 6163 7469 6f6e  (raw_transaction
+0002b0d0: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+0002b0e0: 6574 685f 6765 745f 7261 775f 7472 616e  eth_get_raw_tran
+0002b0f0: 7361 6374 696f 6e5f 7261 6973 6573 5f65  saction_raises_e
+0002b100: 7272 6f72 2873 656c 662c 2077 333a 2022  rror(self, w3: "
+0002b110: 5765 6233 2229 202d 3e20 4e6f 6e65 3a0a  Web3") -> None:.
+0002b120: 2020 2020 2020 2020 7769 7468 2070 7974          with pyt
+0002b130: 6573 742e 7261 6973 6573 280a 2020 2020  est.raises(.    
+0002b140: 2020 2020 2020 2020 5472 616e 7361 6374          Transact
+0002b150: 696f 6e4e 6f74 466f 756e 642c 206d 6174  ionNotFound, mat
+0002b160: 6368 3d66 2254 7261 6e73 6163 7469 6f6e  ch=f"Transaction
+0002b170: 2077 6974 6820 6861 7368 3a20 277b 554e   with hash: '{UN
+0002b180: 4b4e 4f57 4e5f 4841 5348 7d27 220a 2020  KNOWN_HASH}'".  
+0002b190: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
+0002b1a0: 2020 2020 2077 332e 6574 682e 6765 745f       w3.eth.get_
+0002b1b0: 7261 775f 7472 616e 7361 6374 696f 6e28  raw_transaction(
+0002b1c0: 554e 4b4e 4f57 4e5f 4841 5348 290a 0a20  UNKNOWN_HASH).. 
+0002b1d0: 2020 2064 6566 2074 6573 745f 6574 685f     def test_eth_
+0002b1e0: 6765 745f 7261 775f 7472 616e 7361 6374  get_raw_transact
+0002b1f0: 696f 6e5f 6279 5f62 6c6f 636b 280a 2020  ion_by_block(.  
+0002b200: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+0002b210: 2020 2020 7733 3a20 2257 6562 3322 2c0a      w3: "Web3",.
+0002b220: 2020 2020 2020 2020 756e 6c6f 636b 6564          unlocked
+0002b230: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
+0002b240: 7065 3a20 4368 6563 6b73 756d 4164 6472  pe: ChecksumAddr
+0002b250: 6573 732c 0a20 2020 2020 2020 2062 6c6f  ess,.        blo
+0002b260: 636b 5f77 6974 685f 7478 6e3a 2042 6c6f  ck_with_txn: Blo
+0002b270: 636b 4461 7461 2c0a 2020 2020 2920 2d3e  ckData,.    ) ->
+0002b280: 204e 6f6e 653a 0a20 2020 2020 2020 2023   None:.        #
+0002b290: 2065 7468 5f67 6574 5261 7754 7261 6e73   eth_getRawTrans
+0002b2a0: 6163 7469 6f6e 4279 426c 6f63 6b4e 756d  actionByBlockNum
+0002b2b0: 6265 7241 6e64 496e 6465 783a 2062 6c6f  berAndIndex: blo
+0002b2c0: 636b 2069 6465 6e74 6966 6965 720a 2020  ck identifier.  
+0002b2d0: 2020 2020 2020 2320 7365 6e64 2061 2074        # send a t
+0002b2e0: 786e 2074 6f20 6d61 6b65 2073 7572 6520  xn to make sure 
+0002b2f0: 7065 6e64 696e 6720 626c 6f63 6b20 6861  pending block ha
+0002b300: 7320 6174 206c 6561 7374 206f 6e65 2074  s at least one t
+0002b310: 786e 0a20 2020 2020 2020 2077 332e 6574  xn.        w3.et
+0002b320: 682e 7365 6e64 5f74 7261 6e73 6163 7469  h.send_transacti
+0002b330: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
+0002b340: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+0002b350: 2020 2266 726f 6d22 3a20 756e 6c6f 636b    "from": unlock
+0002b360: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
+0002b370: 7479 7065 2c0a 2020 2020 2020 2020 2020  type,.          
+0002b380: 2020 2020 2020 2274 6f22 3a20 756e 6c6f        "to": unlo
+0002b390: 636b 6564 5f61 6363 6f75 6e74 5f64 7561  cked_account_dua
+0002b3a0: 6c5f 7479 7065 2c0a 2020 2020 2020 2020  l_type,.        
+0002b3b0: 2020 2020 2020 2020 2276 616c 7565 223a          "value":
+0002b3c0: 2057 6569 2831 292c 0a20 2020 2020 2020   Wei(1),.       
+0002b3d0: 2020 2020 207d 0a20 2020 2020 2020 2029       }.        )
+0002b3e0: 0a20 2020 2020 2020 206c 6173 745f 7065  .        last_pe
+0002b3f0: 6e64 696e 675f 7478 6e5f 696e 6465 7820  nding_txn_index 
+0002b400: 3d20 6c65 6e28 7733 2e65 7468 2e67 6574  = len(w3.eth.get
+0002b410: 5f62 6c6f 636b 2822 7065 6e64 696e 6722  _block("pending"
+0002b420: 295b 2274 7261 6e73 6163 7469 6f6e 7322  )["transactions"
+0002b430: 5d29 202d 2031 0a20 2020 2020 2020 2072  ]) - 1.        r
+0002b440: 6177 5f74 7261 6e73 6163 7469 6f6e 203d  aw_transaction =
+0002b450: 2077 332e 6574 682e 6765 745f 7261 775f   w3.eth.get_raw_
+0002b460: 7472 616e 7361 6374 696f 6e5f 6279 5f62  transaction_by_b
+0002b470: 6c6f 636b 280a 2020 2020 2020 2020 2020  lock(.          
+0002b480: 2020 2270 656e 6469 6e67 222c 206c 6173    "pending", las
+0002b490: 745f 7065 6e64 696e 675f 7478 6e5f 696e  t_pending_txn_in
+0002b4a0: 6465 780a 2020 2020 2020 2020 290a 2020  dex.        ).  
+0002b4b0: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+0002b4c0: 6279 7465 7328 7261 775f 7472 616e 7361  bytes(raw_transa
+0002b4d0: 6374 696f 6e29 0a0a 2020 2020 2020 2020  ction)..        
+0002b4e0: 2320 6574 685f 6765 7452 6177 5472 616e  # eth_getRawTran
+0002b4f0: 7361 6374 696f 6e42 7942 6c6f 636b 4e75  sactionByBlockNu
+0002b500: 6d62 6572 416e 6449 6e64 6578 3a20 626c  mberAndIndex: bl
+0002b510: 6f63 6b20 6e75 6d62 6572 0a20 2020 2020  ock number.     
+0002b520: 2020 2062 6c6f 636b 5f77 6974 685f 7478     block_with_tx
+0002b530: 6e5f 6e75 6d62 6572 203d 2062 6c6f 636b  n_number = block
+0002b540: 5f77 6974 685f 7478 6e5b 226e 756d 6265  _with_txn["numbe
+0002b550: 7222 5d0a 2020 2020 2020 2020 6173 7365  r"].        asse
+0002b560: 7274 2069 735f 696e 7465 6765 7228 626c  rt is_integer(bl
+0002b570: 6f63 6b5f 7769 7468 5f74 786e 5f6e 756d  ock_with_txn_num
+0002b580: 6265 7229 0a20 2020 2020 2020 2072 6177  ber).        raw
+0002b590: 5f74 7261 6e73 6163 7469 6f6e 203d 2077  _transaction = w
+0002b5a0: 332e 6574 682e 6765 745f 7261 775f 7472  3.eth.get_raw_tr
+0002b5b0: 616e 7361 6374 696f 6e5f 6279 5f62 6c6f  ansaction_by_blo
+0002b5c0: 636b 2862 6c6f 636b 5f77 6974 685f 7478  ck(block_with_tx
+0002b5d0: 6e5f 6e75 6d62 6572 2c20 3029 0a20 2020  n_number, 0).   
+0002b5e0: 2020 2020 2061 7373 6572 7420 6973 5f62       assert is_b
+0002b5f0: 7974 6573 2872 6177 5f74 7261 6e73 6163  ytes(raw_transac
+0002b600: 7469 6f6e 290a 0a20 2020 2020 2020 2023  tion)..        #
+0002b610: 2065 7468 5f67 6574 5261 7754 7261 6e73   eth_getRawTrans
+0002b620: 6163 7469 6f6e 4279 426c 6f63 6b48 6173  actionByBlockHas
+0002b630: 6841 6e64 496e 6465 783a 2062 6c6f 636b  hAndIndex: block
+0002b640: 2068 6173 680a 2020 2020 2020 2020 626c   hash.        bl
+0002b650: 6f63 6b5f 7769 7468 5f74 786e 5f68 6173  ock_with_txn_has
+0002b660: 6820 3d20 626c 6f63 6b5f 7769 7468 5f74  h = block_with_t
+0002b670: 786e 5b22 6861 7368 225d 0a20 2020 2020  xn["hash"].     
+0002b680: 2020 2061 7373 6572 7420 6973 5f62 7974     assert is_byt
+0002b690: 6573 2862 6c6f 636b 5f77 6974 685f 7478  es(block_with_tx
+0002b6a0: 6e5f 6861 7368 290a 2020 2020 2020 2020  n_hash).        
+0002b6b0: 7261 775f 7472 616e 7361 6374 696f 6e20  raw_transaction 
+0002b6c0: 3d20 7733 2e65 7468 2e67 6574 5f72 6177  = w3.eth.get_raw
+0002b6d0: 5f74 7261 6e73 6163 7469 6f6e 5f62 795f  _transaction_by_
+0002b6e0: 626c 6f63 6b28 626c 6f63 6b5f 7769 7468  block(block_with
+0002b6f0: 5f74 786e 5f68 6173 682c 2030 290a 2020  _txn_hash, 0).  
+0002b700: 2020 2020 2020 6173 7365 7274 2069 735f        assert is_
+0002b710: 6279 7465 7328 7261 775f 7472 616e 7361  bytes(raw_transa
+0002b720: 6374 696f 6e29 0a0a 2020 2020 4070 7974  ction)..    @pyt
+0002b730: 6573 742e 6d61 726b 2e70 6172 616d 6574  est.mark.paramet
+0002b740: 7269 7a65 2822 756e 6b6e 6f77 6e5f 626c  rize("unknown_bl
+0002b750: 6f63 6b5f 6e75 6d5f 6f72 5f68 6173 6822  ock_num_or_hash"
+0002b760: 2c20 2831 3233 3435 3637 3839 3939 3939  , (1234567899999
+0002b770: 2c20 554e 4b4e 4f57 4e5f 4841 5348 2929  , UNKNOWN_HASH))
+0002b780: 0a20 2020 2064 6566 2074 6573 745f 6574  .    def test_et
+0002b790: 685f 6765 745f 7261 775f 7472 616e 7361  h_get_raw_transa
+0002b7a0: 6374 696f 6e5f 6279 5f62 6c6f 636b 5f72  ction_by_block_r
+0002b7b0: 6169 7365 735f 6572 726f 7228 0a20 2020  aises_error(.   
+0002b7c0: 2020 2020 2073 656c 662c 2077 333a 2022       self, w3: "
+0002b7d0: 5765 6233 222c 2075 6e6b 6e6f 776e 5f62  Web3", unknown_b
+0002b7e0: 6c6f 636b 5f6e 756d 5f6f 725f 6861 7368  lock_num_or_hash
+0002b7f0: 3a20 556e 696f 6e5b 696e 742c 2048 6578  : Union[int, Hex
+0002b800: 4279 7465 735d 0a20 2020 2029 202d 3e20  Bytes].    ) -> 
+0002b810: 4e6f 6e65 3a0a 2020 2020 2020 2020 7769  None:.        wi
+0002b820: 7468 2070 7974 6573 742e 7261 6973 6573  th pytest.raises
+0002b830: 280a 2020 2020 2020 2020 2020 2020 5472  (.            Tr
+0002b840: 616e 7361 6374 696f 6e4e 6f74 466f 756e  ansactionNotFoun
+0002b850: 642c 0a20 2020 2020 2020 2020 2020 206d  d,.            m
+0002b860: 6174 6368 3d28 0a20 2020 2020 2020 2020  atch=(.         
+0002b870: 2020 2020 2020 2066 2254 7261 6e73 6163         f"Transac
+0002b880: 7469 6f6e 2069 6e64 6578 3a20 3020 6f6e  tion index: 0 on
+0002b890: 2062 6c6f 636b 2069 643a 2022 0a20 2020   block id: ".   
+0002b8a0: 2020 2020 2020 2020 2020 2020 2066 227b               f"{
+0002b8b0: 746f 5f68 6578 5f69 665f 696e 7465 6765  to_hex_if_intege
+0002b8c0: 7228 756e 6b6e 6f77 6e5f 626c 6f63 6b5f  r(unknown_block_
+0002b8d0: 6e75 6d5f 6f72 5f68 6173 6829 2172 7d20  num_or_hash)!r} 
+0002b8e0: 6e6f 7420 666f 756e 642e 220a 2020 2020  not found.".    
+0002b8f0: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
+0002b900: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
+0002b910: 2020 7733 2e65 7468 2e67 6574 5f72 6177    w3.eth.get_raw
+0002b920: 5f74 7261 6e73 6163 7469 6f6e 5f62 795f  _transaction_by_
+0002b930: 626c 6f63 6b28 756e 6b6e 6f77 6e5f 626c  block(unknown_bl
+0002b940: 6f63 6b5f 6e75 6d5f 6f72 5f68 6173 682c  ock_num_or_hash,
+0002b950: 2030 290a 0a20 2020 2064 6566 2074 6573   0)..    def tes
+0002b960: 745f 6574 685f 6765 745f 7261 775f 7472  t_eth_get_raw_tr
+0002b970: 616e 7361 6374 696f 6e5f 6279 5f62 6c6f  ansaction_by_blo
+0002b980: 636b 5f72 6169 7365 735f 6572 726f 725f  ck_raises_error_
+0002b990: 626c 6f63 6b5f 6964 656e 7469 6669 6572  block_identifier
+0002b9a0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+0002b9b0: 7733 3a20 2257 6562 3322 0a20 2020 2029  w3: "Web3".    )
+0002b9c0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+0002b9d0: 2020 756e 6b6e 6f77 6e5f 6964 656e 7469    unknown_identi
+0002b9e0: 6669 6572 203d 2022 756e 6b6e 6f77 6e22  fier = "unknown"
+0002b9f0: 0a20 2020 2020 2020 2077 6974 6820 7079  .        with py
+0002ba00: 7465 7374 2e72 6169 7365 7328 0a20 2020  test.raises(.   
+0002ba10: 2020 2020 2020 2020 2056 616c 7565 4572           ValueEr
+0002ba20: 726f 722c 0a20 2020 2020 2020 2020 2020  ror,.           
+0002ba30: 206d 6174 6368 3d28 0a20 2020 2020 2020   match=(.       
+0002ba40: 2020 2020 2020 2020 2022 5661 6c75 6520           "Value 
+0002ba50: 6469 6420 6e6f 7420 6d61 7463 6820 616e  did not match an
+0002ba60: 7920 6f66 2074 6865 2072 6563 6f67 6e69  y of the recogni
+0002ba70: 7a65 6420 626c 6f63 6b20 6964 656e 7469  zed block identi
+0002ba80: 6669 6572 733a 2022 0a20 2020 2020 2020  fiers: ".       
+0002ba90: 2020 2020 2020 2020 2066 227b 756e 6b6e           f"{unkn
+0002baa0: 6f77 6e5f 6964 656e 7469 6669 6572 7d22  own_identifier}"
+0002bab0: 0a20 2020 2020 2020 2020 2020 2029 2c0a  .            ),.
+0002bac0: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
+0002bad0: 2020 2020 2020 2077 332e 6574 682e 6765         w3.eth.ge
+0002bae0: 745f 7261 775f 7472 616e 7361 6374 696f  t_raw_transactio
+0002baf0: 6e5f 6279 5f62 6c6f 636b 2875 6e6b 6e6f  n_by_block(unkno
+0002bb00: 776e 5f69 6465 6e74 6966 6965 722c 2030  wn_identifier, 0
+0002bb10: 2920 2023 2074 7970 653a 2069 676e 6f72  )  # type: ignor
+0002bb20: 650a 0a20 2020 2064 6566 2074 6573 745f  e..    def test_
+0002bb30: 6465 6661 756c 745f 6163 636f 756e 7428  default_account(
+0002bb40: 0a20 2020 2020 2020 2073 656c 662c 2077  .        self, w
+0002bb50: 333a 2022 5765 6233 222c 2075 6e6c 6f63  3: "Web3", unloc
+0002bb60: 6b65 645f 6163 636f 756e 745f 6475 616c  ked_account_dual
+0002bb70: 5f74 7970 653a 2043 6865 636b 7375 6d41  _type: ChecksumA
+0002bb80: 6464 7265 7373 0a20 2020 2029 202d 3e20  ddress.    ) -> 
+0002bb90: 4e6f 6e65 3a0a 2020 2020 2020 2020 2320  None:.        # 
+0002bba0: 6368 6563 6b20 6465 6661 756c 7473 2074  check defaults t
+0002bbb0: 6f20 656d 7074 790a 2020 2020 2020 2020  o empty.        
+0002bbc0: 6465 6661 756c 745f 6163 636f 756e 7420  default_account 
+0002bbd0: 3d20 7733 2e65 7468 2e64 6566 6175 6c74  = w3.eth.default
+0002bbe0: 5f61 6363 6f75 6e74 0a20 2020 2020 2020  _account.       
+0002bbf0: 2061 7373 6572 7420 6465 6661 756c 745f   assert default_
+0002bc00: 6163 636f 756e 7420 6973 2065 6d70 7479  account is empty
+0002bc10: 0a0a 2020 2020 2020 2020 2320 6368 6563  ..        # chec
+0002bc20: 6b20 7365 7474 6572 0a20 2020 2020 2020  k setter.       
+0002bc30: 2077 332e 6574 682e 6465 6661 756c 745f   w3.eth.default_
+0002bc40: 6163 636f 756e 7420 3d20 756e 6c6f 636b  account = unlock
+0002bc50: 6564 5f61 6363 6f75 6e74 5f64 7561 6c5f  ed_account_dual_
+0002bc60: 7479 7065 0a20 2020 2020 2020 2064 6566  type.        def
+0002bc70: 6175 6c74 5f61 6363 6f75 6e74 203d 2077  ault_account = w
+0002bc80: 332e 6574 682e 6465 6661 756c 745f 6163  3.eth.default_ac
+0002bc90: 636f 756e 740a 2020 2020 2020 2020 6173  count.        as
+0002bca0: 7365 7274 2064 6566 6175 6c74 5f61 6363  sert default_acc
+0002bcb0: 6f75 6e74 203d 3d20 756e 6c6f 636b 6564  ount == unlocked
+0002bcc0: 5f61 6363 6f75 6e74 5f64 7561 6c5f 7479  _account_dual_ty
+0002bcd0: 7065 0a0a 2020 2020 2020 2020 2320 7265  pe..        # re
+0002bce0: 7365 7420 746f 2064 6566 6175 6c74 0a20  set to default. 
+0002bcf0: 2020 2020 2020 2077 332e 6574 682e 6465         w3.eth.de
+0002bd00: 6661 756c 745f 6163 636f 756e 7420 3d20  fault_account = 
+0002bd10: 656d 7074 790a 0a20 2020 2064 6566 2074  empty..    def t
+0002bd20: 6573 745f 6465 6661 756c 745f 626c 6f63  est_default_bloc
+0002bd30: 6b28 0a20 2020 2020 2020 2073 656c 662c  k(.        self,
+0002bd40: 0a20 2020 2020 2020 2077 333a 2022 5765  .        w3: "We
+0002bd50: 6233 222c 0a20 2020 2029 202d 3e20 4e6f  b3",.    ) -> No
+0002bd60: 6e65 3a0a 2020 2020 2020 2020 2320 6368  ne:.        # ch
+0002bd70: 6563 6b20 6465 6661 756c 7473 2074 6f20  eck defaults to 
+0002bd80: 276c 6174 6573 7427 0a20 2020 2020 2020  'latest'.       
+0002bd90: 2064 6566 6175 6c74 5f62 6c6f 636b 203d   default_block =
+0002bda0: 2077 332e 6574 682e 6465 6661 756c 745f   w3.eth.default_
+0002bdb0: 626c 6f63 6b0a 2020 2020 2020 2020 6173  block.        as
+0002bdc0: 7365 7274 2064 6566 6175 6c74 5f62 6c6f  sert default_blo
+0002bdd0: 636b 203d 3d20 226c 6174 6573 7422 0a0a  ck == "latest"..
+0002bde0: 2020 2020 2020 2020 2320 6368 6563 6b20          # check 
+0002bdf0: 7365 7474 6572 0a20 2020 2020 2020 2077  setter.        w
+0002be00: 332e 6574 682e 6465 6661 756c 745f 626c  3.eth.default_bl
+0002be10: 6f63 6b20 3d20 426c 6f63 6b4e 756d 6265  ock = BlockNumbe
+0002be20: 7228 3132 3334 3529 0a20 2020 2020 2020  r(12345).       
+0002be30: 2064 6566 6175 6c74 5f62 6c6f 636b 203d   default_block =
+0002be40: 2077 332e 6574 682e 6465 6661 756c 745f   w3.eth.default_
+0002be50: 626c 6f63 6b0a 2020 2020 2020 2020 6173  block.        as
+0002be60: 7365 7274 2064 6566 6175 6c74 5f62 6c6f  sert default_blo
+0002be70: 636b 203d 3d20 426c 6f63 6b4e 756d 6265  ck == BlockNumbe
+0002be80: 7228 3132 3334 3529 0a0a 2020 2020 2020  r(12345)..      
+0002be90: 2020 2320 7265 7365 7420 746f 2064 6566    # reset to def
+0002bea0: 6175 6c74 0a20 2020 2020 2020 2077 332e  ault.        w3.
+0002beb0: 6574 682e 6465 6661 756c 745f 626c 6f63  eth.default_bloc
+0002bec0: 6b20 3d20 226c 6174 6573 7422 0a         k = "latest".
```

### Comparing `web3-6.6.1/web3/_utils/module_testing/go_ethereum_admin_module.py` & `web3-6.7.0/web3/_utils/module_testing/go_ethereum_admin_module.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/module_testing/go_ethereum_personal_module.py` & `web3-6.7.0/web3/_utils/module_testing/go_ethereum_personal_module.py`

 * *Files 5% similar despite different names*

```diff
@@ -211,23 +211,23 @@
 
 
 class GoEthereumAsyncPersonalModuleTest:
     @pytest.mark.asyncio
     async def test_async_sign_and_ec_recover(
         self,
         async_w3: "AsyncWeb3",
-        unlockable_account_dual_type: ChecksumAddress,
+        async_unlockable_account_dual_type: ChecksumAddress,
         unlockable_account_pw: str,
     ) -> None:
         message = "This is a test"
         signature = await async_w3.geth.personal.sign(
-            message, unlockable_account_dual_type, unlockable_account_pw
+            message, async_unlockable_account_dual_type, unlockable_account_pw
         )
         address = await async_w3.geth.personal.ec_recover(message, signature)
-        assert is_same_address(unlockable_account_dual_type, address)
+        assert is_same_address(async_unlockable_account_dual_type, address)
 
     @pytest.mark.asyncio
     async def test_async_import_key(self, async_w3: "AsyncWeb3") -> None:
         address = await async_w3.geth.personal.import_raw_key(
             THIRD_PRIVATE_KEY_HEX, "Testing"
         )
         assert address is not None
@@ -248,51 +248,53 @@
         account = await async_w3.geth.personal.new_account(passphrase)
         assert is_checksum_address(account)
 
     @pytest.mark.asyncio
     async def test_async_unlock_lock_account(
         self,
         async_w3: "AsyncWeb3",
-        unlockable_account_dual_type: ChecksumAddress,
+        async_unlockable_account_dual_type: ChecksumAddress,
         unlockable_account_pw: str,
     ) -> None:
         unlocked = await async_w3.geth.personal.unlock_account(
-            unlockable_account_dual_type, unlockable_account_pw
+            async_unlockable_account_dual_type, unlockable_account_pw
         )
         assert unlocked is True
-        locked = await async_w3.geth.personal.lock_account(unlockable_account_dual_type)
+        locked = await async_w3.geth.personal.lock_account(
+            async_unlockable_account_dual_type
+        )
         assert locked is True
 
     @pytest.mark.asyncio
     async def test_async_send_transaction(
         self,
         async_w3: "AsyncWeb3",
-        unlockable_account_dual_type: ChecksumAddress,
+        async_unlockable_account_dual_type: ChecksumAddress,
         unlockable_account_pw: str,
     ) -> None:
         tx_params = TxParams()
-        tx_params["to"] = unlockable_account_dual_type
-        tx_params["from"] = unlockable_account_dual_type
+        tx_params["to"] = async_unlockable_account_dual_type
+        tx_params["from"] = async_unlockable_account_dual_type
         tx_params["value"] = Wei(123)
         response = await async_w3.geth.personal.send_transaction(
             tx_params, unlockable_account_pw
         )
         assert response is not None
 
     @pytest.mark.xfail(
         reason="personal_signTypedData JSON RPC call has not been released in geth"
     )
     @pytest.mark.asyncio
     async def test_async_sign_typed_data(
         self,
         async_w3: "AsyncWeb3",
-        unlockable_account_dual_type: ChecksumAddress,
+        async_unlockable_account_dual_type: ChecksumAddress,
         unlockable_account_pw: str,
     ) -> None:
         message = {"message": "This is a test"}
         signature = await async_w3.geth.personal.sign_typed_data(
-            message, unlockable_account_dual_type, unlockable_account_pw
+            message, async_unlockable_account_dual_type, unlockable_account_pw
         )
         address = await async_w3.geth.personal.ec_recover(
             json.dumps(message), signature
         )
-        assert is_same_address(unlockable_account_dual_type, address)
+        assert is_same_address(async_unlockable_account_dual_type, address)
```

### Comparing `web3-6.6.1/web3/_utils/module_testing/go_ethereum_txpool_module.py` & `web3-6.7.0/web3/_utils/module_testing/go_ethereum_txpool_module.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/module_testing/module_testing_utils.py` & `web3-6.7.0/web3/_utils/module_testing/module_testing_utils.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/module_testing/net_module.py` & `web3-6.7.0/web3/_utils/module_testing/net_module.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/module_testing/web3_module.py` & `web3-6.7.0/web3/_utils/module_testing/web3_module.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/normalizers.py` & `web3-6.7.0/web3/_utils/normalizers.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/request.py` & `web3-6.7.0/web3/_utils/request.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/rpc_abi.py` & `web3-6.7.0/web3/_utils/rpc_abi.py`

 * *Files 0% similar despite different names*

```diff
@@ -100,14 +100,16 @@
     eth_sign = RPCEndpoint("eth_sign")
     eth_signTransaction = RPCEndpoint("eth_signTransaction")
     eth_signTypedData = RPCEndpoint("eth_signTypedData")
     eth_submitHashrate = RPCEndpoint("eth_submitHashrate")
     eth_submitWork = RPCEndpoint("eth_submitWork")
     eth_syncing = RPCEndpoint("eth_syncing")
     eth_uninstallFilter = RPCEndpoint("eth_uninstallFilter")
+    eth_subscribe = RPCEndpoint("eth_subscribe")
+    eth_unsubscribe = RPCEndpoint("eth_unsubscribe")
 
     # evm
     evm_mine = RPCEndpoint("evm_mine")
     evm_reset = RPCEndpoint("evm_reset")
     evm_revert = RPCEndpoint("evm_revert")
     evm_snapshot = RPCEndpoint("evm_snapshot")
```

### Comparing `web3-6.6.1/web3/_utils/threads.py` & `web3-6.7.0/web3/_utils/threads.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/transactions.py` & `web3-6.7.0/web3/_utils/transactions.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/type_conversion.py` & `web3-6.7.0/web3/_utils/type_conversion.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/validation.py` & `web3-6.7.0/web3/_utils/validation.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/_utils/windows.py` & `web3-6.7.0/web3/_utils/windows.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/beacon/api_endpoints.py` & `web3-6.7.0/web3/beacon/api_endpoints.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/beacon/async_beacon.py` & `web3-6.7.0/web3/beacon/async_beacon.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/beacon/main.py` & `web3-6.7.0/web3/beacon/main.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/contract/async_contract.py` & `web3-6.7.0/web3/contract/async_contract.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/contract/base_contract.py` & `web3-6.7.0/web3/contract/base_contract.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/contract/contract.py` & `web3-6.7.0/web3/contract/contract.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/contract/utils.py` & `web3-6.7.0/web3/contract/utils.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/datastructures.py` & `web3-6.7.0/web3/datastructures.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/eth/async_eth.py` & `web3-6.7.0/web3/eth/async_eth.py`

 * *Files 3% similar despite different names*

```diff
@@ -52,38 +52,45 @@
     AsyncContract,
     AsyncContractCaller,
 )
 from web3.eth.base_eth import (
     BaseEth,
 )
 from web3.exceptions import (
+    MethodUnavailable,
     OffchainLookup,
     TimeExhausted,
     TooManyRequests,
     TransactionNotFound,
 )
 from web3.method import (
     Method,
     default_root_munger,
 )
+from web3.providers import (
+    PersistentConnectionProvider,
+)
 from web3.types import (
     ENS,
     BlockData,
     BlockIdentifier,
     BlockParams,
     CallOverride,
     FeeHistory,
     FilterParams,
     LogReceipt,
+    LogsSubscriptionArg,
     Nonce,
     SignedTx,
+    SubscriptionType,
     SyncStatus,
     TxData,
     TxParams,
     TxReceipt,
+    TxTypeSubscriptionArg,
     Wei,
     _Hash32,
 )
 from web3.utils import (
     async_handle_offchain_lookup,
 )
 
@@ -647,14 +654,68 @@
         RPC.eth_uninstallFilter,
         mungers=[default_root_munger],
     )
 
     async def uninstall_filter(self, filter_id: HexStr) -> bool:
         return await self._uninstall_filter(filter_id)
 
+    # eth_subscribe / eth_unsubscribe
+
+    _subscribe: Method[Callable[[SubscriptionType], Awaitable[HexStr]]] = Method(
+        RPC.eth_subscribe,
+        mungers=[default_root_munger],
+    )
+
+    _subscribe_with_args: Method[
+        Callable[
+            [
+                SubscriptionType,
+                Optional[Union[LogsSubscriptionArg, TxTypeSubscriptionArg]],
+            ],
+            Awaitable[HexStr],
+        ]
+    ] = Method(
+        RPC.eth_subscribe,
+        mungers=[default_root_munger],
+    )
+
+    async def subscribe(
+        self,
+        subscription_type: SubscriptionType,
+        subscription_arg: Optional[
+            Union[LogsSubscriptionArg, TxTypeSubscriptionArg]
+        ] = None,
+    ) -> HexStr:
+        if not isinstance(self.w3.provider, PersistentConnectionProvider):
+            raise MethodUnavailable(
+                "eth_subscribe is only supported with providers that support "
+                "persistent connections."
+            )
+
+        if subscription_arg is None:
+            return await self._subscribe(subscription_type)
+
+        return await self._subscribe_with_args(subscription_type, subscription_arg)
+
+    _unsubscribe: Method[Callable[[HexStr], Awaitable[bool]]] = Method(
+        RPC.eth_unsubscribe,
+        mungers=[default_root_munger],
+    )
+
+    async def unsubscribe(self, subscription_id: HexStr) -> bool:
+        if not isinstance(self.w3.provider, PersistentConnectionProvider):
+            raise MethodUnavailable(
+                "eth_unsubscribe is only supported with providers that support "
+                "persistent connections."
+            )
+
+        return await self._unsubscribe(subscription_id)
+
+    # -- contract methods -- #
+
     @overload
     def contract(self, address: None = None, **kwargs: Any) -> Type[AsyncContract]:
         ...
 
     @overload
     def contract(
         self, address: Union[Address, ChecksumAddress, ENS], **kwargs: Any
```

### Comparing `web3-6.6.1/web3/eth/base_eth.py` & `web3-6.7.0/web3/eth/base_eth.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/eth/eth.py` & `web3-6.7.0/web3/eth/eth.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/exceptions.py` & `web3-6.7.0/web3/exceptions.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/gas_strategies/time_based.py` & `web3-6.7.0/web3/gas_strategies/time_based.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/geth.py` & `web3-6.7.0/web3/geth.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/main.py` & `web3-6.7.0/web3/main.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,9 +1,12 @@
 import decimal
 import warnings
+from types import (
+    TracebackType,
+)
 
 from ens import (
     AsyncENS,
     ENS,
 )
 from eth_abi.codec import (
     ABICodec,
@@ -26,15 +29,14 @@
     wraps,
 )
 from hexbytes import (
     HexBytes,
 )
 from typing import (
     Any,
-    Coroutine,
     Dict,
     List,
     Optional,
     Sequence,
     Type,
     TYPE_CHECKING,
     Union,
@@ -74,14 +76,17 @@
 from web3._utils.normalizers import (
     abi_ens_resolver,
 )
 from web3.eth import (
     AsyncEth,
     Eth,
 )
+from web3.exceptions import (
+    Web3ValidationError,
+)
 from web3.geth import (
     AsyncGeth,
     AsyncGethAdmin,
     AsyncGethPersonal,
     AsyncGethTxPool,
     Geth,
     GethAdmin,
@@ -108,14 +113,17 @@
 )
 from web3.providers.ipc import (
     IPCProvider,
 )
 from web3.providers.async_rpc import (
     AsyncHTTPProvider,
 )
+from web3.providers.persistent import (
+    PersistentConnectionProvider,
+)
 from web3.providers.rpc import (
     HTTPProvider,
 )
 from web3.providers.websocket import (
     WebsocketProvider,
 )
 from web3.testing import (
@@ -129,14 +137,17 @@
     MiddlewareOnion,
     Wei,
 )
 
 if TYPE_CHECKING:
     from web3.pm import PM  # noqa: F401
     from web3._utils.empty import Empty  # noqa: F401
+    from web3.manager import (  # noqa: F401
+        _AsyncPersistentRecvStream,
+    )
 
 
 def get_async_default_modules() -> Dict[str, Union[Type[Module], Sequence[Any]]]:
     return {
         "eth": AsyncEth,
         "net": AsyncNet,
         "geth": (
@@ -351,132 +362,193 @@
                 UserWarning,
             )
             from web3.pm import PM  # noqa: F811
 
             self.attach_modules({"_pm": PM})
 
 
-class AsyncWeb3(BaseWeb3):
-    # mypy Types
-    eth: AsyncEth
-    net: AsyncNet
-    geth: AsyncGeth
+class Web3(BaseWeb3):
+    # mypy types
+    eth: Eth
+    net: Net
+    geth: Geth
 
     def __init__(
         self,
-        provider: Optional[AsyncBaseProvider] = None,
+        provider: Optional[BaseProvider] = None,
         middlewares: Optional[Sequence[Any]] = None,
         modules: Optional[Dict[str, Union[Type[Module], Sequence[Any]]]] = None,
         external_modules: Optional[
             Dict[str, Union[Type[Module], Sequence[Any]]]
         ] = None,
-        ens: Union[AsyncENS, "Empty"] = empty,
+        ens: Union[ENS, "Empty"] = empty,
     ) -> None:
         self.manager = self.RequestManager(self, provider, middlewares)
         self.codec = ABICodec(build_strict_registry())
 
         if modules is None:
-            modules = get_async_default_modules()
+            modules = get_default_modules()
 
         self.attach_modules(modules)
 
         if external_modules is not None:
             self.attach_modules(external_modules)
 
         self.ens = ens
 
-    def is_connected(self, show_traceback: bool = False) -> Coroutine[Any, Any, bool]:
+    def is_connected(self, show_traceback: bool = False) -> bool:
         return self.provider.is_connected(show_traceback)
 
     @property
-    def middleware_onion(self) -> AsyncMiddlewareOnion:
-        return cast(AsyncMiddlewareOnion, self.manager.middleware_onion)
+    def middleware_onion(self) -> MiddlewareOnion:
+        return cast(MiddlewareOnion, self.manager.middleware_onion)
 
     @property
-    def provider(self) -> AsyncBaseProvider:
-        return cast(AsyncBaseProvider, self.manager.provider)
+    def provider(self) -> BaseProvider:
+        return cast(BaseProvider, self.manager.provider)
 
     @provider.setter
-    def provider(self, provider: AsyncBaseProvider) -> None:
+    def provider(self, provider: BaseProvider) -> None:
         self.manager.provider = provider
 
     @property
-    async def client_version(self) -> str:
-        return await self.manager.coro_request(RPC.web3_clientVersion, [])
+    def client_version(self) -> str:
+        return self.manager.request_blocking(RPC.web3_clientVersion, [])
 
     @property
-    def ens(self) -> Union[AsyncENS, "Empty"]:
+    def ens(self) -> Union[ENS, "Empty"]:
         if self._ens is empty:
-            ns = AsyncENS.from_web3(self)
+            ns = ENS.from_web3(self)
             ns.w3 = self
             return ns
+
         return self._ens
 
     @ens.setter
-    def ens(self, new_ens: Union[AsyncENS, "Empty"]) -> None:
+    def ens(self, new_ens: Union[ENS, "Empty"]) -> None:
         if new_ens:
-            new_ens.w3 = self  # set self object reference for ``AsyncENS.w3``
+            new_ens.w3 = self  # set self object reference for ``ENS.w3``
         self._ens = new_ens
 
 
-class Web3(BaseWeb3):
-    # mypy types
-    eth: Eth
-    net: Net
-    geth: Geth
+# -- async -- #
+
+
+class AsyncWeb3(BaseWeb3):
+    # mypy Types
+    eth: AsyncEth
+    net: AsyncNet
+    geth: AsyncGeth
 
     def __init__(
         self,
-        provider: Optional[BaseProvider] = None,
+        provider: Optional[AsyncBaseProvider] = None,
         middlewares: Optional[Sequence[Any]] = None,
         modules: Optional[Dict[str, Union[Type[Module], Sequence[Any]]]] = None,
         external_modules: Optional[
             Dict[str, Union[Type[Module], Sequence[Any]]]
         ] = None,
-        ens: Union[ENS, "Empty"] = empty,
+        ens: Union[AsyncENS, "Empty"] = empty,
+        **kwargs: Any,
     ) -> None:
         self.manager = self.RequestManager(self, provider, middlewares)
         self.codec = ABICodec(build_strict_registry())
 
         if modules is None:
-            modules = get_default_modules()
+            modules = get_async_default_modules()
 
         self.attach_modules(modules)
 
         if external_modules is not None:
             self.attach_modules(external_modules)
 
         self.ens = ens
 
-    def is_connected(self, show_traceback: bool = False) -> bool:
-        return self.provider.is_connected(show_traceback)
+    async def is_connected(self, show_traceback: bool = False) -> bool:
+        return await self.provider.is_connected(show_traceback)
 
     @property
-    def middleware_onion(self) -> MiddlewareOnion:
-        return cast(MiddlewareOnion, self.manager.middleware_onion)
+    def middleware_onion(self) -> AsyncMiddlewareOnion:
+        return cast(AsyncMiddlewareOnion, self.manager.middleware_onion)
 
     @property
-    def provider(self) -> BaseProvider:
-        return cast(BaseProvider, self.manager.provider)
+    def provider(self) -> AsyncBaseProvider:
+        return cast(AsyncBaseProvider, self.manager.provider)
 
     @provider.setter
-    def provider(self, provider: BaseProvider) -> None:
+    def provider(self, provider: AsyncBaseProvider) -> None:
         self.manager.provider = provider
 
     @property
-    def client_version(self) -> str:
-        return self.manager.request_blocking(RPC.web3_clientVersion, [])
+    async def client_version(self) -> str:
+        return await self.manager.coro_request(RPC.web3_clientVersion, [])
 
     @property
-    def ens(self) -> Union[ENS, "Empty"]:
+    def ens(self) -> Union[AsyncENS, "Empty"]:
         if self._ens is empty:
-            ns = ENS.from_web3(self)
+            ns = AsyncENS.from_web3(self)
             ns.w3 = self
             return ns
-
         return self._ens
 
     @ens.setter
-    def ens(self, new_ens: Union[ENS, "Empty"]) -> None:
+    def ens(self, new_ens: Union[AsyncENS, "Empty"]) -> None:
         if new_ens:
-            new_ens.w3 = self  # set self object reference for ``ENS.w3``
+            new_ens.w3 = self  # set self object reference for ``AsyncENS.w3``
         self._ens = new_ens
+
+    @staticmethod
+    def persistent_websocket(
+        provider: PersistentConnectionProvider,
+        middlewares: Optional[Sequence[Any]] = None,
+        modules: Optional[Dict[str, Union[Type[Module], Sequence[Any]]]] = None,
+        external_modules: Optional[
+            Dict[str, Union[Type[Module], Sequence[Any]]]
+        ] = None,
+        ens: Union[AsyncENS, "Empty"] = empty,
+    ) -> "_PersistentConnectionWeb3":
+        """
+        Establish a persistent connection via websockets to a websocket provider using
+        a ``PersistentConnectionProvider`` instance.
+        """
+        return _PersistentConnectionWeb3(
+            provider,
+            middlewares,
+            modules,
+            external_modules,
+            ens,
+        )
+
+
+class _PersistentConnectionWeb3(AsyncWeb3):
+    provider: PersistentConnectionProvider
+
+    def __init__(
+        self,
+        provider: PersistentConnectionProvider = None,
+        middlewares: Optional[Sequence[Any]] = None,
+        modules: Optional[Dict[str, Union[Type[Module], Sequence[Any]]]] = None,
+        external_modules: Optional[
+            Dict[str, Union[Type[Module], Sequence[Any]]]
+        ] = None,
+        ens: Union[AsyncENS, "Empty"] = empty,
+    ) -> None:
+        if not isinstance(provider, PersistentConnectionProvider):
+            raise Web3ValidationError(
+                "Provider must inherit from PersistentConnectionProvider class."
+            )
+        AsyncWeb3.__init__(self, provider, middlewares, modules, external_modules, ens)
+
+    async def __aenter__(self) -> "_PersistentConnectionWeb3":
+        await self.provider.connect()
+        return self
+
+    async def __aexit__(
+        self,
+        exc_type: Type[BaseException],
+        exc_val: BaseException,
+        exc_tb: TracebackType,
+    ) -> None:
+        await self.provider.disconnect()
+
+    def listen_to_websocket(self) -> "_AsyncPersistentRecvStream":
+        return self.manager.persistent_recv_stream()
```

### Comparing `web3-6.6.1/web3/method.py` & `web3-6.7.0/web3/method.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/middleware/__init__.py` & `web3-6.7.0/web3/middleware/__init__.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/middleware/async_cache.py` & `web3-6.7.0/web3/middleware/async_cache.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/middleware/attrdict.py` & `web3-6.7.0/web3/middleware/attrdict.py`

 * *Files 24% similar despite different names*

```diff
@@ -1,11 +1,13 @@
 from typing import (
     TYPE_CHECKING,
     Any,
     Callable,
+    Optional,
+    cast,
 )
 
 from eth_utils.toolz import (
     assoc,
 )
 
 from web3.datastructures import (
@@ -18,14 +20,17 @@
 )
 
 if TYPE_CHECKING:
     from web3 import (  # noqa: F401
         AsyncWeb3,
         Web3,
     )
+    from web3.providers import (  # noqa: F401
+        PersistentConnectionProvider,
+    )
 
 
 def attrdict_middleware(
     make_request: Callable[[RPCEndpoint, Any], Any], _w3: "Web3"
 ) -> Callable[[RPCEndpoint, Any], RPCResponse]:
     """
     Converts any result which is a dictionary into an `AttributeDict`.
@@ -47,27 +52,45 @@
     return middleware
 
 
 # --- async --- #
 
 
 async def async_attrdict_middleware(
-    make_request: Callable[[RPCEndpoint, Any], Any], _async_w3: "AsyncWeb3"
+    make_request: Callable[[RPCEndpoint, Any], Any], async_w3: "AsyncWeb3"
 ) -> AsyncMiddlewareCoroutine:
     """
     Converts any result which is a dictionary into an `AttributeDict`.
 
     Note: Accessing `AttributeDict` properties via attribute
         (e.g. my_attribute_dict.property1) will not preserve typing.
     """
 
-    async def middleware(method: RPCEndpoint, params: Any) -> RPCResponse:
+    async def middleware(method: RPCEndpoint, params: Any) -> Optional[RPCResponse]:
         response = await make_request(method, params)
-
-        if "result" in response:
-            return assoc(
-                response, "result", AttributeDict.recursive(response["result"])
-            )
+        if async_w3.provider.has_persistent_connection:
+            # asynchronous response processing
+            provider = cast("PersistentConnectionProvider", async_w3.provider)
+            provider._append_middleware_response_processor(_handle_async_response)
+            return None
         else:
-            return response
+            return _handle_async_response(response)
 
     return middleware
+
+
+def _handle_async_response(response: RPCResponse) -> RPCResponse:
+    if "result" in response:
+        return assoc(response, "result", AttributeDict.recursive(response["result"]))
+    elif "params" in response and "result" in response["params"]:
+        # this is a subscription response
+        return assoc(
+            response,
+            "params",
+            assoc(
+                response["params"],
+                "result",
+                AttributeDict.recursive(response["params"]["result"]),
+            ),
+        )
+    else:
+        return response
```

### Comparing `web3-6.6.1/web3/middleware/buffered_gas_estimate.py` & `web3-6.7.0/web3/middleware/buffered_gas_estimate.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/middleware/cache.py` & `web3-6.7.0/web3/middleware/cache.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/middleware/exception_handling.py` & `web3-6.7.0/web3/middleware/exception_handling.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/middleware/exception_retry_request.py` & `web3-6.7.0/web3/middleware/exception_retry_request.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/middleware/filter.py` & `web3-6.7.0/web3/middleware/filter.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/middleware/fixture.py` & `web3-6.7.0/web3/middleware/fixture.py`

 * *Files 24% similar despite different names*

```diff
@@ -1,12 +1,14 @@
 from typing import (
     TYPE_CHECKING,
     Any,
     Callable,
     Dict,
+    Optional,
+    cast,
 )
 
 from web3.types import (
     AsyncMiddleware,
     AsyncMiddlewareCoroutine,
     Middleware,
     RPCEndpoint,
@@ -14,14 +16,17 @@
 )
 
 if TYPE_CHECKING:
     from web3.main import (  # noqa: F401
         AsyncWeb3,
         Web3,
     )
+    from web3.providers import (  # noqa: F401
+        PersistentConnectionProvider,
+    )
 
 
 def construct_fixture_middleware(fixtures: Dict[RPCEndpoint, Any]) -> Middleware:
     """
     Constructs a middleware which returns a static response for any method
     which is found in the provided fixtures.
     """
@@ -108,20 +113,29 @@
 ) -> AsyncMiddleware:
     """
     Constructs a middleware which returns a static response for any method
     which is found in the provided fixtures.
     """
 
     async def result_generator_middleware(
-        make_request: Callable[[RPCEndpoint, Any], Any], _: "AsyncWeb3"
+        make_request: Callable[[RPCEndpoint, Any], Any], async_w3: "AsyncWeb3"
     ) -> AsyncMiddlewareCoroutine:
-        async def middleware(method: RPCEndpoint, params: Any) -> RPCResponse:
+        async def middleware(method: RPCEndpoint, params: Any) -> Optional[RPCResponse]:
             if method in result_generators:
                 result = result_generators[method](method, params)
-                return {"result": result}
+
+                if async_w3.provider.has_persistent_connection:
+                    provider = cast("PersistentConnectionProvider", async_w3.provider)
+                    await make_request(method, params)
+                    provider._append_middleware_response_processor(
+                        lambda _: {"result": result}
+                    )
+                    return None
+                else:
+                    return {"result": result}
             else:
                 return await make_request(method, params)
 
         return middleware
 
     return result_generator_middleware
 
@@ -133,28 +147,38 @@
     Constructs a middleware which intercepts requests for any method found in
     the provided mapping of endpoints to generator functions, returning
     whatever error message the generator function returns.  Callbacks must be
     functions with the signature `fn(method, params)`.
     """
 
     async def error_generator_middleware(
-        make_request: Callable[[RPCEndpoint, Any], Any], _: "AsyncWeb3"
+        make_request: Callable[[RPCEndpoint, Any], Any], async_w3: "AsyncWeb3"
     ) -> AsyncMiddlewareCoroutine:
-        async def middleware(method: RPCEndpoint, params: Any) -> RPCResponse:
+        async def middleware(method: RPCEndpoint, params: Any) -> Optional[RPCResponse]:
             if method in error_generators:
                 error = error_generators[method](method, params)
                 if isinstance(error, dict) and error.get("error", False):
-                    return {
+                    error_response = {
                         "error": {
                             "code": error.get("code", -32000),
                             "message": error["error"].get("message", ""),
                             "data": error.get("data", ""),
                         }
                     }
                 else:
-                    return {"error": error}
+                    error_response = {"error": error}
+
+                if async_w3.provider.has_persistent_connection:
+                    provider = cast("PersistentConnectionProvider", async_w3.provider)
+                    await make_request(method, params)
+                    provider._append_middleware_response_processor(
+                        lambda _: error_response
+                    )
+                    return None
+                else:
+                    return cast(RPCResponse, error_response)
             else:
                 return await make_request(method, params)
 
         return middleware
 
     return error_generator_middleware
```

### Comparing `web3-6.6.1/web3/middleware/formatting.py` & `web3-6.7.0/web3/middleware/formatting.py`

 * *Files 16% similar despite different names*

```diff
@@ -1,17 +1,19 @@
 from typing import (
     TYPE_CHECKING,
     Any,
     Callable,
     Coroutine,
     Optional,
+    cast,
 )
 
 from eth_utils.toolz import (
     assoc,
+    curry,
     merge,
 )
 
 from web3.types import (
     AsyncMiddleware,
     AsyncMiddlewareCoroutine,
     Formatters,
@@ -23,42 +25,43 @@
 )
 
 if TYPE_CHECKING:
     from web3 import (  # noqa: F401
         AsyncWeb3,
         Web3,
     )
+    from web3.providers import (  # noqa: F401
+        PersistentConnectionProvider,
+    )
 
 FORMATTER_DEFAULTS: FormattersDict = {
     "request_formatters": {},
     "result_formatters": {},
     "error_formatters": {},
 }
 
 
+@curry
 def _apply_response_formatters(
     method: RPCEndpoint,
-    response: RPCResponse,
     result_formatters: Formatters,
     error_formatters: Formatters,
+    response: RPCResponse,
 ) -> RPCResponse:
     def _format_response(
         response_type: Literal["result", "error"],
         method_response_formatter: Callable[..., Any],
     ) -> RPCResponse:
         appropriate_response = response[response_type]
+
         return assoc(
             response, response_type, method_response_formatter(appropriate_response)
         )
 
-    if (
-        "result" in response
-        and response["result"] is not None
-        and method in result_formatters
-    ):
+    if response.get("result") is not None and method in result_formatters:
         return _format_response("result", result_formatters[method])
     elif "error" in response and method in error_formatters:
         return _format_response("error", error_formatters[method])
     else:
         return response
 
 
@@ -99,15 +102,18 @@
 
             if method in request_formatters:
                 formatter = request_formatters[method]
                 params = formatter(params)
             response = make_request(method, params)
 
             return _apply_response_formatters(
-                method=method, response=response, **formatters
+                method,
+                formatters["result_formatters"],
+                formatters["error_formatters"],
+                response,
             )
 
         return middleware
 
     return formatter_middleware
 
 
@@ -140,28 +146,43 @@
     ]
 ) -> Callable[
     [Callable[[RPCEndpoint, Any], Any], "AsyncWeb3"],
     Coroutine[Any, Any, AsyncMiddlewareCoroutine],
 ]:
     async def formatter_middleware(
         make_request: Callable[[RPCEndpoint, Any], Any],
-        w3: "AsyncWeb3",
+        async_w3: "AsyncWeb3",
     ) -> AsyncMiddlewareCoroutine:
-        async def middleware(method: RPCEndpoint, params: Any) -> RPCResponse:
+        async def middleware(method: RPCEndpoint, params: Any) -> Optional[RPCResponse]:
             formatters = merge(
                 FORMATTER_DEFAULTS,
-                await async_web3_formatters_builder(w3, method),
+                await async_web3_formatters_builder(async_w3, method),
             )
             request_formatters = formatters.pop("request_formatters")
 
             if method in request_formatters:
                 formatter = request_formatters[method]
                 params = formatter(params)
             response = await make_request(method, params)
 
-            return _apply_response_formatters(
-                method=method, response=response, **formatters
-            )
+            if async_w3.provider.has_persistent_connection:
+                # asynchronous response processing
+                provider = cast("PersistentConnectionProvider", async_w3.provider)
+                provider._append_middleware_response_processor(
+                    _apply_response_formatters(
+                        method,
+                        formatters["result_formatters"],
+                        formatters["error_formatters"],
+                    )
+                )
+                return None
+            else:
+                return _apply_response_formatters(
+                    method,
+                    formatters["result_formatters"],
+                    formatters["error_formatters"],
+                    response,
+                )
 
         return middleware
 
     return formatter_middleware
```

### Comparing `web3-6.6.1/web3/middleware/gas_price_strategy.py` & `web3-6.7.0/web3/middleware/gas_price_strategy.py`

 * *Files 2% similar despite different names*

```diff
@@ -4,14 +4,17 @@
     Callable,
 )
 
 from eth_utils.toolz import (
     assoc,
 )
 
+from web3._utils.method_formatters import (
+    to_hex_if_integer,
+)
 from web3._utils.utility_methods import (
     all_in_dict,
     any_in_dict,
     none_in_dict,
 )
 from web3.constants import (
     DYNAMIC_FEE_TXN_PARAMS,
@@ -41,15 +44,17 @@
 ) -> TxParams:
     # gas price strategy explicitly set:
     if (
         strategy_based_gas_price is not None
         and "gasPrice" not in transaction
         and none_in_dict(DYNAMIC_FEE_TXN_PARAMS, transaction)
     ):
-        transaction = assoc(transaction, "gasPrice", hex(strategy_based_gas_price))
+        transaction = assoc(
+            transaction, "gasPrice", to_hex_if_integer(strategy_based_gas_price)
+        )
 
     # legacy and dynamic fee tx variables used:
     if "gasPrice" in transaction and any_in_dict(DYNAMIC_FEE_TXN_PARAMS, transaction):
         raise TransactionTypeMismatch()
     # dynamic fee transaction - canonical case:
     elif all_in_dict(DYNAMIC_FEE_TXN_PARAMS, transaction):
         if int(str(transaction["maxFeePerGas"]), 16) < int(
```

### Comparing `web3-6.6.1/web3/middleware/geth_poa.py` & `web3-6.7.0/web3/middleware/geth_poa.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/middleware/names.py` & `web3-6.7.0/web3/middleware/names.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/middleware/signing.py` & `web3-6.7.0/web3/middleware/signing.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/middleware/simulate_unmined_transaction.py` & `web3-6.7.0/web3/middleware/simulate_unmined_transaction.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/middleware/stalecheck.py` & `web3-6.7.0/web3/middleware/stalecheck.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/middleware/validation.py` & `web3-6.7.0/web3/middleware/validation.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/module.py` & `web3-6.7.0/web3/module.py`

 * *Files 16% similar despite different names*

```diff
@@ -1,13 +1,14 @@
 from typing import (
     TYPE_CHECKING,
     Any,
     Callable,
     Coroutine,
     Dict,
+    Optional,
     TypeVar,
     Union,
 )
 
 from eth_abi.codec import (
     ABICodec,
 )
@@ -20,14 +21,17 @@
     AsyncLogFilter,
     LogFilter,
     _UseExistingFilter,
 )
 from web3.method import (
     Method,
 )
+from web3.providers.persistent import (
+    PersistentConnectionProvider,
+)
 from web3.types import (
     RPCResponse,
 )
 
 if TYPE_CHECKING:
     from web3.main import (  # noqa: F401
         AsyncWeb3,
@@ -56,14 +60,15 @@
     def caller(*args: Any, **kwargs: Any) -> Union[TReturn, LogFilter]:
         try:
             (method_str, params), response_formatters = method.process_params(
                 module, *args, **kwargs
             )
         except _UseExistingFilter as err:
             return LogFilter(eth_module=module, filter_id=err.filter_id)
+
         (
             result_formatters,
             error_formatters,
             null_result_formatters,
         ) = response_formatters
         result = w3.manager.request_blocking(
             method_str, params, error_formatters, null_result_formatters
@@ -72,32 +77,48 @@
 
     return caller
 
 
 @curry
 def retrieve_async_method_call_fn(
     async_w3: "AsyncWeb3", module: "Module", method: Method[Callable[..., Any]]
-) -> Callable[..., Coroutine[Any, Any, Union[RPCResponse, AsyncLogFilter]]]:
+) -> Callable[..., Coroutine[Any, Any, Optional[Union[RPCResponse, AsyncLogFilter]]]]:
     async def caller(*args: Any, **kwargs: Any) -> Union[RPCResponse, AsyncLogFilter]:
         try:
             (method_str, params), response_formatters = method.process_params(
                 module, *args, **kwargs
             )
-
         except _UseExistingFilter as err:
             return AsyncLogFilter(eth_module=module, filter_id=err.filter_id)
-        (
-            result_formatters,
-            error_formatters,
-            null_result_formatters,
-        ) = response_formatters
-        result = await async_w3.manager.coro_request(
-            method_str, params, error_formatters, null_result_formatters
-        )
-        return apply_result_formatters(result_formatters, result)
+
+        if isinstance(async_w3.provider, PersistentConnectionProvider):
+            # TODO: The typing does not seem to be correct for response_formatters.
+            #   For now, keep the expected typing but ignore it here.
+            cache_key = async_w3.provider._cache_request_information(
+                method_str, params, response_formatters  # type: ignore
+            )
+            try:
+                return await async_w3.manager.ws_send(method_str, params)
+            except Exception as e:
+                if async_w3.provider._async_response_processing_cache.get_cache_entry(
+                    cache_key
+                ):
+                    async_w3.provider._pop_cached_request_information(cache_key)
+                raise e
+        else:
+            (
+                result_formatters,
+                error_formatters,
+                null_result_formatters,
+            ) = response_formatters
+
+            result = await async_w3.manager.coro_request(
+                method_str, params, error_formatters, null_result_formatters
+            )
+            return apply_result_formatters(result_formatters, result)
 
     return caller
 
 
 #  Module should no longer have access to the full web3 api.
 #  Only the calling functions need access to the request methods.
 #  Any "re-entrant" shenanigans can go in the middlewares, which do
```

### Comparing `web3-6.6.1/web3/net.py` & `web3-6.7.0/web3/net.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/pm.py` & `web3-6.7.0/web3/pm.py`

 * *Files 0% similar despite different names*

```diff
@@ -96,15 +96,15 @@
     The ERC1319Registry class is a base class for all registry implementations
     to inherit from. It defines the methods specified in
     `ERC 1319 <https://github.com/ethereum/EIPs/issues/1319>`__.  All of these
     methods are prefixed with an underscore, since they are not intended to be
     accessed directly, but rather through the methods on ``web3.pm``.
     They are unlikely to change, but must be implemented in a `ERC1319Registry`
     subclass in order to be compatible with the `PM` module. Any custom
-    methods (eg. not definied in ERC1319) in a subclass should *not* be
+    methods (eg. not defined in ERC1319) in a subclass should *not* be
     prefixed with an underscore.
 
     All of these methods must be implemented in any subclass in order to work
     with `web3.pm.PM`. Any implementation specific logic should be
     handled in a subclass.
     """
```

### Comparing `web3-6.6.1/web3/providers/async_base.py` & `web3-6.7.0/web3/providers/async_base.py`

 * *Files 6% similar despite different names*

```diff
@@ -6,14 +6,15 @@
     Coroutine,
     Sequence,
     Tuple,
     cast,
 )
 
 from eth_utils import (
+    is_text,
     to_bytes,
     to_text,
 )
 
 from web3._utils.encoding import (
     FriendlyJsonSerde,
 )
@@ -28,28 +29,32 @@
     AsyncMiddlewareOnion,
     MiddlewareOnion,
     RPCEndpoint,
     RPCResponse,
 )
 
 if TYPE_CHECKING:
-    from web3 import AsyncWeb3  # noqa: F401
+    from web3 import (  # noqa: F401
+        AsyncWeb3,
+        WebsocketProviderV2,
+    )
 
 
 class AsyncBaseProvider:
     _middlewares: Tuple[AsyncMiddleware, ...] = ()
     # a tuple of (all_middlewares, request_func)
     _request_func_cache: Tuple[
         Tuple[AsyncMiddleware, ...], Callable[..., Coroutine[Any, Any, RPCResponse]]
     ] = (
         None,
         None,
     )
 
     is_async = True
+    has_persistent_connection = False
     global_ccip_read_enabled: bool = True
     ccip_read_max_redirects: int = 4
 
     @property
     def middlewares(self) -> Tuple[AsyncMiddleware, ...]:
         return self._middlewares
 
@@ -90,25 +95,28 @@
 
 class AsyncJSONBaseProvider(AsyncBaseProvider):
     def __init__(self) -> None:
         super().__init__()
         self.request_counter = itertools.count()
 
     def encode_rpc_request(self, method: RPCEndpoint, params: Any) -> bytes:
+        request_id = next(self.request_counter)
         rpc_dict = {
             "jsonrpc": "2.0",
             "method": method,
             "params": params or [],
-            "id": next(self.request_counter),
+            "id": request_id,
         }
         encoded = FriendlyJsonSerde().json_encode(rpc_dict)
         return to_bytes(text=encoded)
 
     def decode_rpc_response(self, raw_response: bytes) -> RPCResponse:
-        text_response = to_text(raw_response)
+        text_response = str(
+            to_text(raw_response) if not is_text(raw_response) else raw_response
+        )
         return cast(RPCResponse, FriendlyJsonSerde().json_decode(text_response))
 
     async def is_connected(self, show_traceback: bool = False) -> bool:
         try:
             response = await self.make_request(RPCEndpoint("web3_clientVersion"), [])
         except OSError as e:
             if show_traceback:
```

### Comparing `web3-6.6.1/web3/providers/async_rpc.py` & `web3-6.7.0/web3/providers/async_rpc.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/providers/auto.py` & `web3-6.7.0/web3/providers/auto.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/providers/base.py` & `web3-6.7.0/web3/providers/base.py`

 * *Files 4% similar despite different names*

```diff
@@ -38,14 +38,15 @@
     # a tuple of (all_middlewares, request_func)
     _request_func_cache: Tuple[Tuple[Middleware, ...], Callable[..., RPCResponse]] = (
         None,
         None,
     )
 
     is_async = False
+    has_persistent_connection = False
     global_ccip_read_enabled: bool = True
     ccip_read_max_redirects: int = 4
 
     @property
     def middlewares(self) -> Tuple[Middleware, ...]:
         return self._middlewares
```

### Comparing `web3-6.6.1/web3/providers/eth_tester/defaults.py` & `web3-6.7.0/web3/providers/eth_tester/defaults.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/providers/eth_tester/main.py` & `web3-6.7.0/web3/providers/eth_tester/main.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/providers/eth_tester/middleware.py` & `web3-6.7.0/web3/providers/eth_tester/middleware.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/providers/ipc.py` & `web3-6.7.0/web3/providers/ipc.py`

 * *Files 1% similar despite different names*

```diff
@@ -98,15 +98,15 @@
     elif sys.platform.startswith("linux") or sys.platform.startswith("freebsd"):
         ipc_path = os.path.expanduser(os.path.join("~", ".ethereum", "geth.ipc"))
         if os.path.exists(ipc_path):
             return ipc_path
         return None
 
     elif sys.platform == "win32":
-        ipc_path = os.path.join("\\\\", ".", "pipe", "geth.ipc")
+        ipc_path = r"\\.\pipe\geth.ipc"
         if os.path.exists(ipc_path):
             return ipc_path
         return None
 
     else:
         raise ValueError(
             f"Unsupported platform '{sys.platform}'.  Only darwin/linux/win32/"
```

### Comparing `web3-6.6.1/web3/providers/rpc.py` & `web3-6.7.0/web3/providers/rpc.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/providers/websocket.py` & `web3-6.7.0/web3/providers/websocket/websocket.py`

 * *Files 2% similar despite different names*

```diff
@@ -55,15 +55,15 @@
 
 def get_default_endpoint() -> URI:
     return URI(os.environ.get("WEB3_WS_PROVIDER_URI", "ws://127.0.0.1:8546"))
 
 
 class PersistentWebSocket:
     def __init__(self, endpoint_uri: URI, websocket_kwargs: Any) -> None:
-        self.ws: WebSocketClientProtocol = None
+        self.ws: Optional[WebSocketClientProtocol] = None
         self.endpoint_uri = endpoint_uri
         self.websocket_kwargs = websocket_kwargs
 
     async def __aenter__(self) -> WebSocketClientProtocol:
         if self.ws is None:
             self.ws = await connect(uri=self.endpoint_uri, **self.websocket_kwargs)
         return self.ws
```

### Comparing `web3-6.6.1/web3/scripts/release/test_package.py` & `web3-6.7.0/web3/scripts/release/test_package.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/testing.py` & `web3-6.7.0/web3/testing.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/tools/benchmark/main.py` & `web3-6.7.0/web3/tools/benchmark/main.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/tools/benchmark/node.py` & `web3-6.7.0/web3/tools/benchmark/node.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/tools/benchmark/reporting.py` & `web3-6.7.0/web3/tools/benchmark/reporting.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/tools/benchmark/utils.py` & `web3-6.7.0/web3/tools/benchmark/utils.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/tools/pytest_ethereum/_utils.py` & `web3-6.7.0/web3/tools/pytest_ethereum/_utils.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/tools/pytest_ethereum/deployer.py` & `web3-6.7.0/web3/tools/pytest_ethereum/deployer.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/tools/pytest_ethereum/linker.py` & `web3-6.7.0/web3/tools/pytest_ethereum/linker.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/tools/pytest_ethereum/plugins.py` & `web3-6.7.0/web3/tools/pytest_ethereum/plugins.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/tracing.py` & `web3-6.7.0/web3/tracing.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/types.py` & `web3-6.7.0/web3/types.py`

 * *Files 7% similar despite different names*

```diff
@@ -86,17 +86,15 @@
     anonymous: bool
     inputs: Sequence["ABIEventParams"]
     name: str
     type: Literal["event"]
 
 
 class ABIFunctionComponents(TypedDict, total=False):
-    # better typed as Sequence['ABIFunctionComponents'], but recursion isnt possible yet
-    # https://github.com/python/mypy/issues/731
-    components: Sequence[Any]
+    components: Sequence["ABIFunctionComponents"]
     name: str
     type: str
 
 
 class ABIFunctionParams(TypedDict, total=False):
     components: Sequence["ABIFunctionComponents"]
     name: str
@@ -130,67 +128,14 @@
 
 class RPCError(TypedDict):
     code: int
     message: str
     data: Optional[str]
 
 
-class RPCResponse(TypedDict, total=False):
-    error: Union[RPCError, str]
-    id: int
-    jsonrpc: Literal["2.0"]
-    result: Any
-
-
-Middleware = Callable[[Callable[[RPCEndpoint, Any], RPCResponse], "Web3"], Any]
-AsyncMiddlewareCoroutine = Callable[
-    [RPCEndpoint, Any], Coroutine[Any, Any, RPCResponse]
-]
-AsyncMiddleware = Callable[
-    [Callable[[RPCEndpoint, Any], RPCResponse], "AsyncWeb3"], Any
-]
-MiddlewareOnion = NamedElementOnion[str, Middleware]
-AsyncMiddlewareOnion = NamedElementOnion[str, AsyncMiddleware]
-
-
-class FormattersDict(TypedDict, total=False):
-    error_formatters: Optional[Formatters]
-    request_formatters: Optional[Formatters]
-    result_formatters: Optional[Formatters]
-
-
-class FilterParams(TypedDict, total=False):
-    address: Union[Address, ChecksumAddress, List[Address], List[ChecksumAddress]]
-    blockHash: HexBytes
-    fromBlock: BlockIdentifier
-    toBlock: BlockIdentifier
-    topics: Sequence[Optional[Union[_Hash32, Sequence[_Hash32]]]]
-
-
-class FeeHistory(TypedDict):
-    baseFeePerGas: List[Wei]
-    gasUsedRatio: List[float]
-    oldestBlock: BlockNumber
-    reward: List[List[Wei]]
-
-
-class LogReceipt(TypedDict):
-    address: ChecksumAddress
-    blockHash: HexBytes
-    blockNumber: BlockNumber
-    data: HexStr
-    logIndex: int
-    payload: HexBytes
-    removed: bool
-    topic: HexBytes
-    topics: Sequence[HexBytes]
-    transactionHash: HexBytes
-    transactionIndex: int
-
-
 # syntax b/c "from" keyword not allowed w/ class construction
 TxData = TypedDict(
     "TxData",
     {
         "accessList": AccessList,
         "blockHash": HexBytes,
         "blockNumber": BlockNumber,
@@ -211,15 +156,14 @@
         "type": Union[int, HexStr],
         "v": int,
         "value": Wei,
     },
     total=False,
 )
 
-
 # syntax b/c "from" keyword not allowed w/ class construction
 TxParams = TypedDict(
     "TxParams",
     {
         "chainId": int,
         "data": Union[bytes, HexStr],
         # addr or ens
@@ -247,14 +191,153 @@
         "validator_index": int,
         "address": ChecksumAddress,
         "amount": Gwei,
     },
 )
 
 
+class BlockData(TypedDict, total=False):
+    baseFeePerGas: Wei
+    difficulty: int
+    extraData: HexBytes
+    gasLimit: int
+    gasUsed: int
+    hash: HexBytes
+    logsBloom: HexBytes
+    miner: ChecksumAddress
+    mixHash: HexBytes
+    nonce: HexBytes
+    number: BlockNumber
+    parentHash: HexBytes
+    receiptsRoot: HexBytes
+    sha3Uncles: HexBytes
+    size: int
+    stateRoot: HexBytes
+    timestamp: Timestamp
+    totalDifficulty: int
+    transactions: Union[Sequence[HexBytes], Sequence[TxData]]
+    transactionsRoot: HexBytes
+    uncles: Sequence[HexBytes]
+    withdrawals: Sequence[WithdrawalData]
+    withdrawalsRoot: HexBytes
+
+    # geth_poa_middleware replaces extraData w/ proofOfAuthorityData
+    proofOfAuthorityData: HexBytes
+
+
+class LogEntry(TypedDict):
+    address: ChecksumAddress
+    blockHash: HexBytes
+    blockNumber: BlockNumber
+    data: HexStr
+    logIndex: int
+    topics: Sequence[HexBytes]
+    transactionHash: HexBytes
+    transactionIndex: int
+    removed: bool
+
+
+class LogReceipt(LogEntry):
+    payload: HexBytes
+    topic: HexBytes
+
+
+class SubscriptionResponse(TypedDict):
+    subscription: HexBytes
+
+
+class BlockTypeSubscriptionResponse(SubscriptionResponse):
+    result: BlockData
+
+
+class TransactionTypeSubscriptionResponse(SubscriptionResponse):
+    result: Union[HexBytes, TxData]
+
+
+class LogsSubscriptionResponse(SubscriptionResponse):
+    result: LogEntry
+
+
+class SyncProgress(TypedDict):
+    isSyncing: bool
+    startingBlock: int
+    currentBlock: int
+    highestBlock: int
+
+
+class SyncingSubscriptionResponse(SubscriptionResponse):
+    result: Union[Literal[False], SyncProgress]
+
+
+class GethSyncingStatus(TypedDict):
+    currentBlock: int
+    highestBlock: int
+    knownStates: int
+    pulledStates: int
+    startingBlock: int
+
+
+class GethSyncingSubscriptionResult(TypedDict):
+    syncing: bool
+    status: GethSyncingStatus
+
+
+class GethSyncingSubscriptionResponse(SubscriptionResponse):
+    result: GethSyncingSubscriptionResult
+
+
+class RPCResponse(TypedDict, total=False):
+    error: Union[RPCError, str]
+    id: int
+    jsonrpc: Literal["2.0"]
+    result: Any
+
+    # eth_subscribe
+    method: Literal["eth_subscription"]
+    params: Union[
+        BlockTypeSubscriptionResponse,
+        TransactionTypeSubscriptionResponse,
+        LogsSubscriptionResponse,
+        SyncingSubscriptionResponse,
+        GethSyncingSubscriptionResponse,
+    ]
+
+
+Middleware = Callable[[Callable[[RPCEndpoint, Any], RPCResponse], "Web3"], Any]
+AsyncMiddlewareCoroutine = Callable[
+    [RPCEndpoint, Any], Coroutine[Any, Any, RPCResponse]
+]
+AsyncMiddleware = Callable[
+    [Callable[[RPCEndpoint, Any], RPCResponse], "AsyncWeb3"], Any
+]
+MiddlewareOnion = NamedElementOnion[str, Middleware]
+AsyncMiddlewareOnion = NamedElementOnion[str, AsyncMiddleware]
+
+
+class FormattersDict(TypedDict, total=False):
+    error_formatters: Optional[Formatters]
+    request_formatters: Optional[Formatters]
+    result_formatters: Optional[Formatters]
+
+
+class FilterParams(TypedDict, total=False):
+    address: Union[Address, ChecksumAddress, List[Address], List[ChecksumAddress]]
+    blockHash: HexBytes
+    fromBlock: BlockIdentifier
+    toBlock: BlockIdentifier
+    topics: Sequence[Optional[Union[_Hash32, Sequence[_Hash32]]]]
+
+
+class FeeHistory(TypedDict):
+    baseFeePerGas: List[Wei]
+    gasUsedRatio: List[float]
+    oldestBlock: BlockNumber
+    reward: List[List[Wei]]
+
+
 CallOverrideParams = TypedDict(
     "CallOverrideParams",
     {
         "balance": Optional[Wei],
         "nonce": Optional[int],
         "code": Optional[Union[bytes, HexStr]],
         "state": Optional[Dict[HexStr, HexStr]],
@@ -344,43 +427,14 @@
     currentBlock: int
     highestBlock: int
     knownStates: int
     pulledStates: int
     startingBlock: int
 
 
-class BlockData(TypedDict, total=False):
-    baseFeePerGas: Wei
-    difficulty: int
-    extraData: HexBytes
-    gasLimit: int
-    gasUsed: int
-    hash: HexBytes
-    logsBloom: HexBytes
-    miner: ChecksumAddress
-    mixHash: HexBytes
-    nonce: HexBytes
-    number: BlockNumber
-    parentHash: HexBytes
-    receiptsRoot: HexBytes
-    sha3Uncles: HexBytes
-    size: int
-    stateRoot: HexBytes
-    timestamp: Timestamp
-    totalDifficulty: int
-    transactions: Union[Sequence[HexBytes], Sequence[TxData]]
-    transactionsRoot: HexBytes
-    uncles: Sequence[HexBytes]
-    withdrawals: Sequence[WithdrawalData]
-    withdrawalsRoot: HexBytes
-
-    # geth_poa_middleware replaces extraData w/ proofOfAuthorityData
-    proofOfAuthorityData: HexBytes
-
-
 class Uncle(TypedDict):
     author: ChecksumAddress
     difficulty: HexStr
     extraData: HexStr
     gasLimit: HexStr
     gasUsed: HexStr
     hash: HexBytes
@@ -468,7 +522,31 @@
 class TraceFilterParams(TypedDict, total=False):
     after: int
     count: int
     fromAddress: Sequence[Union[Address, ChecksumAddress, ENS]]
     fromBlock: BlockIdentifier
     toAddress: Sequence[Union[Address, ChecksumAddress, ENS]]
     toBlock: BlockIdentifier
+
+
+# Subscriptions
+
+SubscriptionType = Literal[
+    "newHeads",
+    "logs",
+    "newPendingTransactions",
+    "syncing",
+]
+
+
+class LogsSubscriptionArg(TypedDict, total=False):
+    address: Union[
+        Address,
+        ChecksumAddress,
+        ENS,
+        Sequence[Union[Address, ChecksumAddress, ENS]],
+    ]
+    topics: Sequence[Union[HexStr, Sequence[HexStr]]]
+
+
+class TxTypeSubscriptionArg(TypedDict, total=False):
+    full_transactions: bool
```

### Comparing `web3-6.6.1/web3/utils/address.py` & `web3-6.7.0/web3/utils/address.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/utils/async_exception_handling.py` & `web3-6.7.0/web3/utils/async_exception_handling.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3/utils/caching.py` & `web3-6.7.0/web3/utils/caching.py`

 * *Files 6% similar despite different names*

```diff
@@ -37,12 +37,18 @@
 
     def clear(self) -> None:
         self._data.clear()
 
     def items(self) -> Dict[str, Any]:
         return self._data
 
+    def pop(self, key: str) -> Optional[Any]:
+        if key not in self._data:
+            return None
+
+        return self._data.pop(key)
+
     def __contains__(self, key: str) -> bool:
         return key in self._data
 
     def __len__(self) -> int:
         return len(self._data)
```

### Comparing `web3-6.6.1/web3/utils/exception_handling.py` & `web3-6.7.0/web3/utils/exception_handling.py`

 * *Files identical despite different names*

### Comparing `web3-6.6.1/web3.egg-info/PKG-INFO` & `web3-6.7.0/web3.egg-info/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: web3
-Version: 6.6.1
+Version: 6.7.0
 Summary: web3.py
 Home-page: https://github.com/ethereum/web3.py
 Author: The Ethereum Foundation
 Author-email: snakecharmers@ethereum.org
 License: MIT
 Keywords: ethereum
 Classifier: Development Status :: 5 - Production/Stable
```

### Comparing `web3-6.6.1/web3.egg-info/SOURCES.txt` & `web3-6.7.0/web3.egg-info/SOURCES.txt`

 * *Files 2% similar despite different names*

```diff
@@ -249,20 +249,23 @@
 web3/middleware/validation.py
 web3/providers/__init__.py
 web3/providers/async_base.py
 web3/providers/async_rpc.py
 web3/providers/auto.py
 web3/providers/base.py
 web3/providers/ipc.py
+web3/providers/persistent.py
 web3/providers/rpc.py
-web3/providers/websocket.py
 web3/providers/eth_tester/__init__.py
 web3/providers/eth_tester/defaults.py
 web3/providers/eth_tester/main.py
 web3/providers/eth_tester/middleware.py
+web3/providers/websocket/__init__.py
+web3/providers/websocket/websocket.py
+web3/providers/websocket/websocket_v2.py
 web3/scripts/__init__.py
 web3/scripts/release/__init__.py
 web3/scripts/release/test_package.py
 web3/tools/__init__.py
 web3/tools/benchmark/__init__.py
 web3/tools/benchmark/main.py
 web3/tools/benchmark/node.py
```

### Comparing `web3-6.6.1/web3.egg-info/requires.txt` & `web3-6.7.0/web3.egg-info/requires.txt`

 * *Files 2% similar despite different names*

```diff
@@ -13,15 +13,15 @@
 websockets>=10.0.0
 pyunormalize>=15.0.0
 
 [:platform_system == "Windows"]
 pywin32>=223
 
 [dev]
-eth-tester[py-evm]==v0.9.0-b.2
+eth-tester[py-evm]==v0.9.1-b.1
 py-geth>=3.11.0
 black>=22.1.0
 flake8==3.8.3
 isort>=5.11.0
 mypy>=1.0.0
 types-setuptools>=57.4.4
 types-requests>=2.26.1
@@ -62,9 +62,9 @@
 isort>=5.11.0
 mypy>=1.0.0
 types-setuptools>=57.4.4
 types-requests>=2.26.1
 types-protobuf==3.19.13
 
 [tester]
-eth-tester[py-evm]==v0.9.0-b.2
+eth-tester[py-evm]==v0.9.1-b.1
 py-geth>=3.11.0
```


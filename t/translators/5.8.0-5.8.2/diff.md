# Comparing `tmp/translators-5.8.0.tar.gz` & `tmp/translators-5.8.2.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "translators-5.8.0.tar", last modified: Mon Jul 10 17:41:19 2023, max compression
+gzip compressed data, was "translators-5.8.2.tar", last modified: Wed Jul 26 15:15:54 2023, max compression
```

## Comparing `translators-5.8.0.tar` & `translators-5.8.2.tar`

### file list

```diff
@@ -1,21 +1,21 @@
-drwxrwxrwx   0        0        0        0 2023-07-10 17:41:19.265529 translators-5.8.0/
--rw-rw-rw-   0        0        0    35821 2023-06-29 09:26:06.000000 translators-5.8.0/LICENSE
--rw-rw-rw-   0        0        0      113 2023-05-15 23:01:25.000000 translators-5.8.0/MANIFEST.in
--rw-rw-rw-   0        0        0    67946 2023-07-10 17:41:19.266530 translators-5.8.0/PKG-INFO
--rw-rw-rw-   0        0        0    66452 2023-07-10 16:25:13.000000 translators-5.8.0/README.md
--rw-rw-rw-   0        0        0    66476 2023-07-10 14:03:53.000000 translators-5.8.0/README_history.md
--rw-rw-rw-   0        0        0     9008 2023-07-10 15:45:39.000000 translators-5.8.0/change_log.txt
--rw-rw-rw-   0        0        0      138 2022-10-21 20:53:52.000000 translators-5.8.0/pyproject.toml
--rw-rw-rw-   0        0        0       54 2023-03-09 23:10:40.000000 translators-5.8.0/requirements.txt
--rw-rw-rw-   0        0        0       86 2023-07-10 17:41:19.267529 translators-5.8.0/setup.cfg
--rw-rw-rw-   0        0        0     2669 2023-07-10 17:26:50.000000 translators-5.8.0/setup.py
-drwxrwxrwx   0        0        0        0 2023-07-10 17:41:19.256529 translators-5.8.0/translators/
--rw-rw-rw-   0        0        0      177 2023-07-10 15:38:48.000000 translators-5.8.0/translators/__init__.py
--rw-rw-rw-   0        0        0   281125 2023-07-10 15:32:10.000000 translators-5.8.0/translators/server.py
-drwxrwxrwx   0        0        0        0 2023-07-10 17:41:19.264529 translators-5.8.0/translators.egg-info/
--rw-rw-rw-   0        0        0    67946 2023-07-10 17:41:19.000000 translators-5.8.0/translators.egg-info/PKG-INFO
--rw-rw-rw-   0        0        0      367 2023-07-10 17:41:19.000000 translators-5.8.0/translators.egg-info/SOURCES.txt
--rw-rw-rw-   0        0        0        1 2023-07-10 17:41:19.000000 translators-5.8.0/translators.egg-info/dependency_links.txt
--rw-rw-rw-   0        0        0        2 2023-07-10 17:41:18.000000 translators-5.8.0/translators.egg-info/not-zip-safe
--rw-rw-rw-   0        0        0      127 2023-07-10 17:41:19.000000 translators-5.8.0/translators.egg-info/requires.txt
--rw-rw-rw-   0        0        0       12 2023-07-10 17:41:19.000000 translators-5.8.0/translators.egg-info/top_level.txt
+drwxrwxrwx   0        0        0        0 2023-07-26 15:15:54.279691 translators-5.8.2/
+-rw-rw-rw-   0        0        0    35823 2023-07-10 18:52:26.000000 translators-5.8.2/LICENSE
+-rw-rw-rw-   0        0        0      113 2023-05-15 23:01:25.000000 translators-5.8.2/MANIFEST.in
+-rw-rw-rw-   0        0        0    68174 2023-07-26 15:15:54.280691 translators-5.8.2/PKG-INFO
+-rw-rw-rw-   0        0        0    66671 2023-07-26 07:48:42.000000 translators-5.8.2/README.md
+-rw-rw-rw-   0        0        0    66705 2023-07-26 08:00:55.000000 translators-5.8.2/README_history.md
+-rw-rw-rw-   0        0        0     9129 2023-07-26 15:14:49.000000 translators-5.8.2/change_log.txt
+-rw-rw-rw-   0        0        0      138 2022-10-21 20:53:52.000000 translators-5.8.2/pyproject.toml
+-rw-rw-rw-   0        0        0       54 2023-03-09 23:10:40.000000 translators-5.8.2/requirements.txt
+-rw-rw-rw-   0        0        0       86 2023-07-26 15:15:54.280691 translators-5.8.2/setup.cfg
+-rw-rw-rw-   0        0        0     2678 2023-07-26 15:12:49.000000 translators-5.8.2/setup.py
+drwxrwxrwx   0        0        0        0 2023-07-26 15:15:54.272683 translators-5.8.2/translators/
+-rw-rw-rw-   0        0        0      208 2023-07-26 15:14:49.000000 translators-5.8.2/translators/__init__.py
+-rw-rw-rw-   0        0        0   287427 2023-07-26 07:29:32.000000 translators-5.8.2/translators/server.py
+drwxrwxrwx   0        0        0        0 2023-07-26 15:15:54.279691 translators-5.8.2/translators.egg-info/
+-rw-rw-rw-   0        0        0    68174 2023-07-26 15:15:54.000000 translators-5.8.2/translators.egg-info/PKG-INFO
+-rw-rw-rw-   0        0        0      367 2023-07-26 15:15:54.000000 translators-5.8.2/translators.egg-info/SOURCES.txt
+-rw-rw-rw-   0        0        0        1 2023-07-26 15:15:54.000000 translators-5.8.2/translators.egg-info/dependency_links.txt
+-rw-rw-rw-   0        0        0        2 2023-07-26 15:15:53.000000 translators-5.8.2/translators.egg-info/not-zip-safe
+-rw-rw-rw-   0        0        0      127 2023-07-26 15:15:54.000000 translators-5.8.2/translators.egg-info/requires.txt
+-rw-rw-rw-   0        0        0       12 2023-07-26 15:15:54.000000 translators-5.8.2/translators.egg-info/top_level.txt
```

### Comparing `translators-5.8.0/LICENSE` & `translators-5.8.2/LICENSE`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -667,8 +667,8 @@
 <https://www.gnu.org/licenses/>.
 
   The GNU General Public License does not permit incorporating your program
 into proprietary programs.  If your program is a subroutine library, you
 may consider it more useful to permit linking proprietary applications with
 the library.  If this is what you want to do, use the GNU Lesser General
 Public License instead of this License.  But first, please read
-<https://www.gnu.org/licenses/why-not-lgpl.html>.
+<https://www.gnu.org/licenses/why-not-lgpl.html>.
```

### Comparing `translators-5.8.0/PKG-INFO` & `translators-5.8.2/README.md`

 * *Files 2% similar despite different names*

```diff
@@ -1,33 +1,7 @@
-Metadata-Version: 2.1
-Name: translators
-Version: 5.8.0
-Summary: Translators is a library which aims to bring free, multiple, enjoyable translation to individuals and students in Python.
-Home-page: https://github.com/uliontse/translators
-Author: UlionTse
-Author-email: uliontse@outlook.com
-License: GPLv3
-Project-URL: Source, https://github.com/UlionTse/translators
-Project-URL: Changelog, https://github.com/UlionTse/translators/blob/master/change_log.txt
-Project-URL: Documentation, https://github.com/UlionTse/translators/blob/master/README.md
-Keywords: translate,translate_text,translate_html,alibaba,apertium,argos,baidu,bing,caiyun,cloudYi,deepl,elia,google,iciba,iflytek,iflyrec,itranslate,judic,languageWire,lingvanex,mglip,mirai,modernMt,myMemory,niutrans,papago,qqFanyi,qqTranSmart,reverso,sogou,sysTran,tilde,translateCom,translateMe,utibet,volcEngine,yandex,yeekit,youdao
-Classifier: Development Status :: 5 - Production/Stable
-Classifier: Environment :: Web Environment
-Classifier: Intended Audience :: Developers
-Classifier: License :: OSI Approved :: GNU General Public License v3 (GPLv3)
-Classifier: Programming Language :: Python :: 3 :: Only
-Classifier: Programming Language :: Python :: 3.8
-Classifier: Programming Language :: Python :: 3.9
-Classifier: Programming Language :: Python :: 3.10
-Classifier: Programming Language :: Python :: 3.11
-Requires-Python: >=3.8
-Description-Content-Type: text/markdown
-Provides-Extra: pypi
-License-File: LICENSE
-
 <p align="center">
   <img src="https://github.com/UlionTse/translators/blob/master/docs/translators_logo.png" width="500"/>
 </p>
 <p align="center">
   <a href="https://pypi.org/project/translators"><img alt="PyPI - Version" src="https://img.shields.io/pypi/v/translators.svg?color=blue"></a>
   <a href="https://anaconda.org/conda-forge/translators"><img alt="Conda - Version" src="https://img.shields.io/conda/vn/conda-forge/translators.svg?color=blue"></a>
   <a href="https://pypi.org/project/translators"><img alt="PyPI - License" src="https://img.shields.io/pypi/l/translators.svg?color=brightgreen"></a>
@@ -42,14 +16,15 @@
 **Translators** is a library which aims to bring **free, multiple, enjoyable** translation to individuals and students in Python. 
 
 - [Supported Translation Services](#supported-translation-services)
 - [Installation](#installation)
 - [Getting Started](#getting-started)
 - [Supported Languages](#supported-languages)
 - [Debug Tips](#debug-tips)
+- [Star History](#star-history)
 
 ## Supported Translation Services
 
 | ID  | Translator                                                                        | Number of Supported Languages | Advantage                                                                                   | Service                                                                                                           | Status                          |
 | --- | --------------------------------------------------------------------------------- | ----------------------------- | ------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------- | ------------------------------- |
 | 1   | [MyMemory](https://mymemory.translated.net)                                       | 330                           | support the most languages in the world                                                     | [Translated](https://translatedlabs.com/welcome), Italy                                                           | stable                          |
 | 2   | [Niutrans](https://niutrans.com/trans)                                            | 302                           | support the most languages in the world                                                     | [Northeastern University](http://english.neu.edu.cn/) / [Niutrans](https://github.com/NiuTrans), China            | /                               |
@@ -64,15 +39,15 @@
 | 11  | [Yandex](https://translate.yandex.com)                                            | 102                           | support more languages in the world, support word to emoji                                  | [Yandex](https://yandex.com/company/), Russia                                                                     | /                               |
 | 12  | [Itranslate](https://itranslate.com/webapp)                                       | 101                           | support translation of different regions but the same language, such as en-US, en-UK, en-AU | [Itranslate](https://itranslate.com/about), Austria                                                               | stable                          |
 | 13  | [Sogou](https://fanyi.sogou.com/text)                                             | 61                            | support more languages in the world                                                         | [Tencent](https://www.tencent.com/en-us/about.html), China                                                        | stable                          |
 | 14  | [ModernMt](https://www.modernmt.com/translate)                                    | 56                            | open-source, support more languages in the world                                            | [Modernmt](https://github.com/modernmt) / [Translated](https://translatedlabs.com/welcome), Italy                 | stable                          |
 | 15  | [SysTran](https://www.systran.net/translate/)                                     | 52                            | support more languages in the world                                                         | [SysTran](https://www.systran.net/about/), France                                                                 | stable                          |
 | 16  | [Apertium](https://www.apertium.org/)                                             | 45                            | open-source                                                                                 | [Apertium](https://github.com/apertium), Spain                                                                    | stable                          |
 | 17  | [Reverso](https://www.reverso.net/text-translation)                               | 42                            | popular on Mac and Iphone                                                                   | [Reverso](https://www.corporate-translation.reverso.com/about-us), France                                         | stable                          |
-| 18  | [CloudYi](https://www.cloudtranslation.com/#/translate)                           | 28                            | support main languages                                                                      | [Xiamen University](http://nlp.xmu.edu.cn/) / [CloudTranslation](https://www.cloudtranslation.com/#/about), China | stable                          |
+| 18  | [CloudTranslation](https://www.cloudtranslation.com/#/translate)                  | 28                            | support main languages                                                                      | [Xiamen University](http://nlp.xmu.edu.cn/) / [CloudTranslation](https://www.cloudtranslation.com/#/about), China | stable                          |
 | 19  | [Deepl](https://www.deepl.com/translator)                                         | 27                            | high quality to translate but response slowly                                               | [Deepl](https://jobs.deepl.com/l/en), Germany                                                                     | stable                          |
 | 20  | [QQTranSmart](https://transmart.qq.com)                                           | 22                            | support main languages                                                                      | [Tencent](https://www.tencent.com/en-us/about.html), China                                                        | stable                          |
 | 21  | [TranslateCom](https://www.translate.com/machine-translation)                     | 21                            | good at English translation                                                                 | [TranslateCom](https://www.translate.com/about-us), America                                                       | stable                          |
 | 22  | [Tilde](https://translate.tilde.com/)                                             | 21                            | good at lv, de, fr translation                                                              | [Tilde](https://tilde.com/about), Latvia                                                                          | /                               |
 | 23  | [QQFanyi](https://fanyi.qq.com)                                                   | 17                            | support main languages                                                                      | [Tencent](https://www.tencent.com/en-us/about.html), China                                                        | stable                          |
 | 24  | [Argos](https://translate.argosopentech.com)                                      | 17                            | open-source                                                                                 | [Argos](https://github.com/argosopentech) / [Libre](https://github.com/LibreTranslate), America                   | stable                          |
 | 25  | [TranslateMe](https://translateme.network/)                                       | 16                            | good at English translation                                                                 | [TranslateMe](https://translateme.network/our-team/) / [Neosus](https://neosus.net/about/), Lithuania             | /                               |
@@ -126,15 +101,15 @@
     :param query_text: str, must.
     :param translator: str, default 'bing'.
     :param from_language: str, default 'auto'.
     :param to_language: str, default 'en'.
     :param if_use_preacceleration: bool, default False.
     :param **kwargs:
             :param is_detail_result: bool, default False.
-            :param professional_field: str, default None. Support alibaba(), baidu(), caiyun(), cloudYi(), elia(), sysTran(), youdao(), volcEngine() only.
+            :param professional_field: str, default None. Support alibaba(), baidu(), caiyun(), cloudTranslation(), elia(), sysTran(), youdao(), volcEngine() only.
             :param timeout: float, default None.
             :param proxies: dict, default None.
             :param sleep_seconds: float, default 0.
             :param update_session_after_freq: int, default 1000.
             :param update_session_after_seconds: float, default 1500.
             :param if_use_cn_host: bool, default False. Support google(), bing() only.                
             :param reset_host_url: str, default None. Support google(), argos(), yandex() only.
@@ -244,21 +219,24 @@
 | Chinese(壮语)   | zyb                    |                                        |                                        |                                         |                                  |                                          |                                 |                                    |                                  |                                   |                                                      |                                       |                                           |                                              |                                             |                                                     |                                                               |                                    |                                      |
 
 ## Debug Tips
 
 ### Linux Runtime Environment
 
 1. To support javascript runtime environment, you should [download and install Node.js](https://nodejs.org/en/download/).
-2. baidu() doesn't work on Linux without desktop.
+2. Function baidu() doesn't work on Linux without desktop.
 
 ### HttpError 4xx
 
 1. Check whether you made high frequency requests, especially httperror 429.
 2. Check whether this service is provided in your region.
 3. Detail to solve [HttpError](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status) itself.
 4. [Issue me](https://github.com/UlionTse/translators/issues), thanks.
 
 ### NetworkError or ProxyError
 
 1. Check whether the network is connected correctly.
 2. Check the proxy are enabled on your computer. If it is enabled, try turning it off or otherwise. 
 
+## Star History
+
+[![Star History Chart](https://api.star-history.com/svg?repos=UlionTse/translators&type=Date)](https://star-history.com/#UlionTse/translators&Date)
```

#### html2text {}

```diff
@@ -1,44 +1,28 @@
-Metadata-Version: 2.1 Name: translators Version: 5.8.0 Summary: Translators is
-a library which aims to bring free, multiple, enjoyable translation to
-individuals and students in Python. Home-page: https://github.com/uliontse/
-translators Author: UlionTse Author-email: uliontse@outlook.com License: GPLv3
-Project-URL: Source, https://github.com/UlionTse/translators Project-URL:
-Changelog, https://github.com/UlionTse/translators/blob/master/change_log.txt
-Project-URL: Documentation, https://github.com/UlionTse/translators/blob/
-master/README.md Keywords:
-translate,translate_text,translate_html,alibaba,apertium,argos,baidu,bing,caiyun,cloudYi,deepl,elia,google,iciba,iflytek,iflyrec,itranslate,judic,languageWire,lingvanex,mglip,mirai,modernMt,myMemory,niutrans,papago,qqFanyi,qqTranSmart,reverso,sogou,sysTran,tilde,translateCom,translateMe,utibet,volcEngine,yandex,yeekit,youdao
-Classifier: Development Status :: 5 - Production/Stable Classifier: Environment
-:: Web Environment Classifier: Intended Audience :: Developers Classifier:
-License :: OSI Approved :: GNU General Public License v3 (GPLv3) Classifier:
-Programming Language :: Python :: 3 :: Only Classifier: Programming Language ::
-Python :: 3.8 Classifier: Programming Language :: Python :: 3.9 Classifier:
-Programming Language :: Python :: 3.10 Classifier: Programming Language ::
-Python :: 3.11 Requires-Python: >=3.8 Description-Content-Type: text/markdown
-Provides-Extra: pypi License-File: LICENSE
 [https://github.com/UlionTse/translators/blob/master/docs/translators_logo.png]
   [PyPI_-_Version] [Conda_-_Version] [PyPI_-_License] [PyPI_-_Python] [PyPI_-
                    Status] [PyPI_-_Wheel] [PyPI_-_Downloads]
 * * * **Translators** is a library which aims to bring **free, multiple,
 enjoyable** translation to individuals and students in Python. - [Supported
 Translation Services](#supported-translation-services) - [Installation]
 (#installation) - [Getting Started](#getting-started) - [Supported Languages]
-(#supported-languages) - [Debug Tips](#debug-tips) ## Supported Translation
-Services | ID | Translator | Number of Supported Languages | Advantage |
-Service | Status | | --- | ----------------------------------------------------
------------------------------ | ----------------------------- | ---------------
----------------------------------------------------------------------------- |
--------------------------------------------------------------------------------
----------------------------------- | ------------------------------- | | 1 |
-[MyMemory](https://mymemory.translated.net) | 330 | support the most languages
-in the world | [Translated](https://translatedlabs.com/welcome), Italy | stable
-| | 2 | [Niutrans](https://niutrans.com/trans) | 302 | support the most
-languages in the world | [Northeastern University](http://english.neu.edu.cn/
-) / [Niutrans](https://github.com/NiuTrans), China | / | | 3 | [Alibaba](https:
-//translate.alibaba.com) | 221 | support most languages, support professional
+(#supported-languages) - [Debug Tips](#debug-tips) - [Star History](#star-
+history) ## Supported Translation Services | ID | Translator | Number of
+Supported Languages | Advantage | Service | Status | | --- | ------------------
+--------------------------------------------------------------- | -------------
+---------------- | ------------------------------------------------------------
+------------------------------- | ---------------------------------------------
+-------------------------------------------------------------------- | --------
+----------------------- | | 1 | [MyMemory](https://mymemory.translated.net) |
+330 | support the most languages in the world | [Translated](https://
+translatedlabs.com/welcome), Italy | stable | | 2 | [Niutrans](https://
+niutrans.com/trans) | 302 | support the most languages in the world |
+[Northeastern University](http://english.neu.edu.cn/) / [Niutrans](https://
+github.com/NiuTrans), China | / | | 3 | [Alibaba](https://
+translate.alibaba.com) | 221 | support most languages, support professional
 field | [Alibaba](https://damo.alibaba.com/about?lang=en), China | stable | | 4
 | [Baidu](https://fanyi.baidu.com) | 201 | support most languages, support
 professional field, support classical Chinese | [Baidu](https://ir.baidu.com/
 company-overview), China | stable | | 5 | [Iciba](https://www.iciba.com/fy) |
 187 | support the most languages in the world | [Kingsoft](https://www.wps.com/
 about-us/) / [Xiaomi](https://www.mi.com/us/about/), China | stable | | 6 |
 [Iflytek](https://fanyi.xfyun.cn/console/trans/text) | 140 | support the most
@@ -65,49 +49,50 @@
 (https://translatedlabs.com/welcome), Italy | stable | | 15 | [SysTran](https:/
 /www.systran.net/translate/) | 52 | support more languages in the world |
 [SysTran](https://www.systran.net/about/), France | stable | | 16 | [Apertium]
 (https://www.apertium.org/) | 45 | open-source | [Apertium](https://github.com/
 apertium), Spain | stable | | 17 | [Reverso](https://www.reverso.net/text-
 translation) | 42 | popular on Mac and Iphone | [Reverso](https://
 www.corporate-translation.reverso.com/about-us), France | stable | | 18 |
-[CloudYi](https://www.cloudtranslation.com/#/translate) | 28 | support main
-languages | [Xiamen University](http://nlp.xmu.edu.cn/) / [CloudTranslation]
-(https://www.cloudtranslation.com/#/about), China | stable | | 19 | [Deepl]
-(https://www.deepl.com/translator) | 27 | high quality to translate but
-response slowly | [Deepl](https://jobs.deepl.com/l/en), Germany | stable | | 20
-| [QQTranSmart](https://transmart.qq.com) | 22 | support main languages |
-[Tencent](https://www.tencent.com/en-us/about.html), China | stable | | 21 |
-[TranslateCom](https://www.translate.com/machine-translation) | 21 | good at
-English translation | [TranslateCom](https://www.translate.com/about-us),
-America | stable | | 22 | [Tilde](https://translate.tilde.com/) | 21 | good at
-lv, de, fr translation | [Tilde](https://tilde.com/about), Latvia | / | | 23 |
-[QQFanyi](https://fanyi.qq.com) | 17 | support main languages | [Tencent]
-(https://www.tencent.com/en-us/about.html), China | stable | | 24 | [Argos]
-(https://translate.argosopentech.com) | 17 | open-source | [Argos](https://
-github.com/argosopentech) / [Libre](https://github.com/LibreTranslate), America
-| stable | | 25 | [TranslateMe](https://translateme.network/) | 16 | good at
-English translation | [TranslateMe](https://translateme.network/our-team/) /
-[Neosus](https://neosus.net/about/), Lithuania | / | | 26 | [Youdao](https://
-ai.youdao.com/product-fanyi-text.s) | 15 | support main languages, high quality
-| [Netease](https://ir.netease.com/company-overview/corporate-profile), China |
-stable | | 27 | [Papago](https://papago.naver.com) | 15 | good at Korean
-translation | [Naver](https://www.navercorp.com/en/naver/company), South Korea
-| stable | | 28 | [Marai](https://miraitranslate.com/trial/) | 15 | good at
-Japanese translation | [MaraiTranslate](https://miraitranslate.com/en/company/
-), Japan | / | | 29 | [Iflyrec](https://fanyi.iflyrec.com) | 12 | good at
-Chinese translation | [Iflytek](https://www.iflytek.com/en/about-us.html),
-China | stable | | 30 | [Yeekit](https://www.yeekit.com/site/translate) | 10 |
-support main languages | [CTC](https://www.ctpc.com.cn/cms/enAboutUs.htm),
-China | / | | 31 | [LanguageWire](https://www.languagewire.com/en/technology/
-languagewire-translate) | 8 | good at English translation | [LanguageWire]
-(https://www.languagewire.com/about-us), Denmark | stable | | 32 | [Caiyun]
-(https://fanyi.caiyunapp.com) | 7 | high quality to translate but response
-slowly, support professional field | [ColorfulClouds](http://caiyunapp.com/
-jobs/), China | stable | | 33 | [Elia](https://elia.eus/translator) | 6 | good
-at Basque translation | [Elhuyar](https://www.elhuyar.eus/eu/nor-gara), Spain |
+[CloudTranslation](https://www.cloudtranslation.com/#/translate) | 28 | support
+main languages | [Xiamen University](http://nlp.xmu.edu.cn/) /
+[CloudTranslation](https://www.cloudtranslation.com/#/about), China | stable |
+| 19 | [Deepl](https://www.deepl.com/translator) | 27 | high quality to
+translate but response slowly | [Deepl](https://jobs.deepl.com/l/en), Germany |
+stable | | 20 | [QQTranSmart](https://transmart.qq.com) | 22 | support main
+languages | [Tencent](https://www.tencent.com/en-us/about.html), China | stable
+| | 21 | [TranslateCom](https://www.translate.com/machine-translation) | 21 |
+good at English translation | [TranslateCom](https://www.translate.com/about-
+us), America | stable | | 22 | [Tilde](https://translate.tilde.com/) | 21 |
+good at lv, de, fr translation | [Tilde](https://tilde.com/about), Latvia | / |
+| 23 | [QQFanyi](https://fanyi.qq.com) | 17 | support main languages |
+[Tencent](https://www.tencent.com/en-us/about.html), China | stable | | 24 |
+[Argos](https://translate.argosopentech.com) | 17 | open-source | [Argos]
+(https://github.com/argosopentech) / [Libre](https://github.com/
+LibreTranslate), America | stable | | 25 | [TranslateMe](https://
+translateme.network/) | 16 | good at English translation | [TranslateMe](https:
+//translateme.network/our-team/) / [Neosus](https://neosus.net/about/),
+Lithuania | / | | 26 | [Youdao](https://ai.youdao.com/product-fanyi-text.s) |
+15 | support main languages, high quality | [Netease](https://ir.netease.com/
+company-overview/corporate-profile), China | stable | | 27 | [Papago](https://
+papago.naver.com) | 15 | good at Korean translation | [Naver](https://
+www.navercorp.com/en/naver/company), South Korea | stable | | 28 | [Marai]
+(https://miraitranslate.com/trial/) | 15 | good at Japanese translation |
+[MaraiTranslate](https://miraitranslate.com/en/company/), Japan | / | | 29 |
+[Iflyrec](https://fanyi.iflyrec.com) | 12 | good at Chinese translation |
+[Iflytek](https://www.iflytek.com/en/about-us.html), China | stable | | 30 |
+[Yeekit](https://www.yeekit.com/site/translate) | 10 | support main languages |
+[CTC](https://www.ctpc.com.cn/cms/enAboutUs.htm), China | / | | 31 |
+[LanguageWire](https://www.languagewire.com/en/technology/languagewire-
+translate) | 8 | good at English translation | [LanguageWire](https://
+www.languagewire.com/about-us), Denmark | stable | | 32 | [Caiyun](https://
+fanyi.caiyunapp.com) | 7 | high quality to translate but response slowly,
+support professional field | [ColorfulClouds](http://caiyunapp.com/jobs/),
+China | stable | | 33 | [Elia](https://elia.eus/translator) | 6 | good at
+Basque translation | [Elhuyar](https://www.elhuyar.eus/eu/nor-gara), Spain |
 stable | | 34 | [Judic](https://judic.io/en/translate) | 4 | good at European
 translation | [CrossLang](https://crosslang.com/about-us/), Belgium | stable |
 | 35 | [Mglip](http://fy.mglip.com/pc) | 3 | good at Mongolia translation |
 [Inner Mongolia University](https://www.imu.edu.cn/yw/Home.htm), China | stable
 | | 36 | [Utibet](http://mt.utibet.edu.cn/mt) | 2 | good at Tibet translation |
 [Tibet University](http://www.utibet.edu.cn/), China | stable | ## Installation
 ```sh # PYPI pip install --upgrade translators # Conda conda install -c conda-
@@ -123,16 +108,16 @@
 translator='alibaba')) ### parameters help(ts.translate_text) """
 translate_text(query_text: str, translator: str = 'bing', from_language: str =
 'auto', to_language: str = 'en', **kwargs) -> Union[str, dict] :param
 query_text: str, must. :param translator: str, default 'bing'. :param
 from_language: str, default 'auto'. :param to_language: str, default 'en'. :
 param if_use_preacceleration: bool, default False. :param **kwargs: :param
 is_detail_result: bool, default False. :param professional_field: str, default
-None. Support alibaba(), baidu(), caiyun(), cloudYi(), elia(), sysTran(),
-youdao(), volcEngine() only. :param timeout: float, default None. :param
+None. Support alibaba(), baidu(), caiyun(), cloudTranslation(), elia(), sysTran
+(), youdao(), volcEngine() only. :param timeout: float, default None. :param
 proxies: dict, default None. :param sleep_seconds: float, default 0. :param
 update_session_after_freq: int, default 1000. :param
 update_session_after_seconds: float, default 1500. :param if_use_cn_host: bool,
 default False. Support google(), bing() only. :param reset_host_url: str,
 default None. Support google(), argos(), yandex() only. :param
 if_check_reset_host_url: bool, default True. Support google(), yandex() only. :
 param if_ignore_empty_query: bool, default False. :param limit_of_length: int,
@@ -234,16 +219,18 @@
 [åè] | | | | N[å¤è] | | | | | | Chinese(ç»´å¾å°è¯­) | uy | | | | | | |
 | | Y | | | | | | | | | | | Chinese(èè¯­) | ti | | | | | | | | | Y | | | | |
 | | | | Y | | Chinese(ç½èæ) | mww | | | Y | | | | | Y | Y | | | | | | | |
 | | | Chinese(å½è¯­) | ii | | | | | | | | | | Y | | | | | | | | | | Chinese
 (èè¯­) | hmn | | | | | | | | | | | | | | Y | | | | | | Chinese(å£®è¯­) | zyb
 | | | | | | | | | | | | | | | | | | | ## Debug Tips ### Linux Runtime
 Environment 1. To support javascript runtime environment, you should [download
-and install Node.js](https://nodejs.org/en/download/). 2. baidu() doesn't work
-on Linux without desktop. ### HttpError 4xx 1. Check whether you made high
-frequency requests, especially httperror 429. 2. Check whether this service is
-provided in your region. 3. Detail to solve [HttpError](https://
+and install Node.js](https://nodejs.org/en/download/). 2. Function baidu()
+doesn't work on Linux without desktop. ### HttpError 4xx 1. Check whether you
+made high frequency requests, especially httperror 429. 2. Check whether this
+service is provided in your region. 3. Detail to solve [HttpError](https://
 developer.mozilla.org/en-US/docs/Web/HTTP/Status) itself. 4. [Issue me](https:/
 /github.com/UlionTse/translators/issues), thanks. ### NetworkError or
 ProxyError 1. Check whether the network is connected correctly. 2. Check the
 proxy are enabled on your computer. If it is enabled, try turning it off or
-otherwise.
+otherwise. ## Star History [![Star History Chart](https://api.star-history.com/
+svg?repos=UlionTse/translators&type=Date)](https://star-history.com/#UlionTse/
+translators&Date)
```

### Comparing `translators-5.8.0/README.md` & `translators-5.8.2/README_history.md`

 * *Files 6% similar despite different names*

```diff
@@ -11,21 +11,16 @@
   <a href="https://pypi.org/project/translators"><img alt="PyPI - Downloads" src="https://static.pepy.tech/personalized-badge/translators?period=total&units=international_system&left_text=downloads&left_color=grey&right_color=blue"></a>
 </p>
 
 * * *
 
 **Translators** is a library which aims to bring **free, multiple, enjoyable** translation to individuals and students in Python. 
 
-- [Supported Translation Services](#supported-translation-services)
-- [Installation](#installation)
-- [Getting Started](#getting-started)
-- [Supported Languages](#supported-languages)
-- [Debug Tips](#debug-tips)
-
-## Supported Translation Services
+<details>
+<summary>Supported Translation Services</summary>
 
 | ID  | Translator                                                                        | Number of Supported Languages | Advantage                                                                                   | Service                                                                                                           | Status                          |
 | --- | --------------------------------------------------------------------------------- | ----------------------------- | ------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------- | ------------------------------- |
 | 1   | [MyMemory](https://mymemory.translated.net)                                       | 330                           | support the most languages in the world                                                     | [Translated](https://translatedlabs.com/welcome), Italy                                                           | stable                          |
 | 2   | [Niutrans](https://niutrans.com/trans)                                            | 302                           | support the most languages in the world                                                     | [Northeastern University](http://english.neu.edu.cn/) / [Niutrans](https://github.com/NiuTrans), China            | /                               |
 | 3   | [Alibaba](https://translate.alibaba.com)                                          | 221                           | support most languages, support professional field                                          | [Alibaba](https://damo.alibaba.com/about?lang=en), China                                                          | stable                          |
 | 4   | [Baidu](https://fanyi.baidu.com)                                                  | 201                           | support most languages, support professional field, support classical Chinese               | [Baidu](https://ir.baidu.com/company-overview), China                                                             | stable                          |
@@ -38,15 +33,15 @@
 | 11  | [Yandex](https://translate.yandex.com)                                            | 102                           | support more languages in the world, support word to emoji                                  | [Yandex](https://yandex.com/company/), Russia                                                                     | /                               |
 | 12  | [Itranslate](https://itranslate.com/webapp)                                       | 101                           | support translation of different regions but the same language, such as en-US, en-UK, en-AU | [Itranslate](https://itranslate.com/about), Austria                                                               | stable                          |
 | 13  | [Sogou](https://fanyi.sogou.com/text)                                             | 61                            | support more languages in the world                                                         | [Tencent](https://www.tencent.com/en-us/about.html), China                                                        | stable                          |
 | 14  | [ModernMt](https://www.modernmt.com/translate)                                    | 56                            | open-source, support more languages in the world                                            | [Modernmt](https://github.com/modernmt) / [Translated](https://translatedlabs.com/welcome), Italy                 | stable                          |
 | 15  | [SysTran](https://www.systran.net/translate/)                                     | 52                            | support more languages in the world                                                         | [SysTran](https://www.systran.net/about/), France                                                                 | stable                          |
 | 16  | [Apertium](https://www.apertium.org/)                                             | 45                            | open-source                                                                                 | [Apertium](https://github.com/apertium), Spain                                                                    | stable                          |
 | 17  | [Reverso](https://www.reverso.net/text-translation)                               | 42                            | popular on Mac and Iphone                                                                   | [Reverso](https://www.corporate-translation.reverso.com/about-us), France                                         | stable                          |
-| 18  | [CloudYi](https://www.cloudtranslation.com/#/translate)                           | 28                            | support main languages                                                                      | [Xiamen University](http://nlp.xmu.edu.cn/) / [CloudTranslation](https://www.cloudtranslation.com/#/about), China | stable                          |
+| 18  | [CloudTranslation](https://www.cloudtranslation.com/#/translate)                  | 28                            | support main languages                                                                      | [Xiamen University](http://nlp.xmu.edu.cn/) / [CloudTranslation](https://www.cloudtranslation.com/#/about), China | stable                          |
 | 19  | [Deepl](https://www.deepl.com/translator)                                         | 27                            | high quality to translate but response slowly                                               | [Deepl](https://jobs.deepl.com/l/en), Germany                                                                     | stable                          |
 | 20  | [QQTranSmart](https://transmart.qq.com)                                           | 22                            | support main languages                                                                      | [Tencent](https://www.tencent.com/en-us/about.html), China                                                        | stable                          |
 | 21  | [TranslateCom](https://www.translate.com/machine-translation)                     | 21                            | good at English translation                                                                 | [TranslateCom](https://www.translate.com/about-us), America                                                       | stable                          |
 | 22  | [Tilde](https://translate.tilde.com/)                                             | 21                            | good at lv, de, fr translation                                                              | [Tilde](https://tilde.com/about), Latvia                                                                          | /                               |
 | 23  | [QQFanyi](https://fanyi.qq.com)                                                   | 17                            | support main languages                                                                      | [Tencent](https://www.tencent.com/en-us/about.html), China                                                        | stable                          |
 | 24  | [Argos](https://translate.argosopentech.com)                                      | 17                            | open-source                                                                                 | [Argos](https://github.com/argosopentech) / [Libre](https://github.com/LibreTranslate), America                   | stable                          |
 | 25  | [TranslateMe](https://translateme.network/)                                       | 16                            | good at English translation                                                                 | [TranslateMe](https://translateme.network/our-team/) / [Neosus](https://neosus.net/about/), Lithuania             | /                               |
@@ -58,30 +53,36 @@
 | 31  | [LanguageWire](https://www.languagewire.com/en/technology/languagewire-translate) | 8                             | good at English translation                                                                 | [LanguageWire](https://www.languagewire.com/about-us), Denmark                                                    | stable                          |
 | 32  | [Caiyun](https://fanyi.caiyunapp.com)                                             | 7                             | high quality to translate but response slowly, support professional field                   | [ColorfulClouds](http://caiyunapp.com/jobs/), China                                                               | stable                          |
 | 33  | [Elia](https://elia.eus/translator)                                               | 6                             | good at Basque translation                                                                  | [Elhuyar](https://www.elhuyar.eus/eu/nor-gara), Spain                                                             | stable                          |
 | 34  | [Judic](https://judic.io/en/translate)                                            | 4                             | good at European translation                                                                | [CrossLang](https://crosslang.com/about-us/), Belgium                                                             | stable                          |
 | 35  | [Mglip](http://fy.mglip.com/pc)                                                   | 3                             | good at Mongolia translation                                                                | [Inner Mongolia University](https://www.imu.edu.cn/yw/Home.htm), China                                            | stable                          |
 | 36  | [Utibet](http://mt.utibet.edu.cn/mt)                                              | 2                             | good at Tibet translation                                                                   | [Tibet University](http://www.utibet.edu.cn/), China                                                              | stable                          |
 
-## Installation
+</details>
+
+<details>
+<summary>Installation</summary>
 
 ```sh
 # PYPI
 pip install --upgrade translators
 
 # Conda
 conda install -c conda-forge translators
 
 # Source
 git clone https://github.com/UlionTse/translators.git
 cd translators
 python setup.py install
 ```
 
-## Getting Started
+</details>
+
+<details>
+<summary>Getting Started</summary>
 
 ```python
 import translators as ts
 
 q_text = '季姬寂，集鸡，鸡即棘鸡。棘鸡饥叽，季姬及箕稷济鸡。'
 q_html = '''<!DOCTYPE html><html><head><title>《季姬击鸡记》</title></head><body><p>还有另一篇文章《施氏食狮史》。</p></body></html>'''
 
@@ -100,15 +101,15 @@
     :param query_text: str, must.
     :param translator: str, default 'bing'.
     :param from_language: str, default 'auto'.
     :param to_language: str, default 'en'.
     :param if_use_preacceleration: bool, default False.
     :param **kwargs:
             :param is_detail_result: bool, default False.
-            :param professional_field: str, default None. Support alibaba(), baidu(), caiyun(), cloudYi(), elia(), sysTran(), youdao(), volcEngine() only.
+            :param professional_field: str, default None. Support alibaba(), baidu(), caiyun(), cloudTranslation(), elia(), sysTran(), youdao(), volcEngine() only.
             :param timeout: float, default None.
             :param proxies: dict, default None.
             :param sleep_seconds: float, default 0.
             :param update_session_after_freq: int, default 1000.
             :param update_session_after_seconds: float, default 1500.
             :param if_use_cn_host: bool, default False. Support google(), bing() only.                
             :param reset_host_url: str, default None. Support google(), argos(), yandex() only.
@@ -121,15 +122,18 @@
             :param if_print_warning: bool, default True.
             :param lingvanex_mode: str, default 'B2C', choose from ("B2C", "B2B").
             :param myMemory_mode: str, default "web", choose from ("web", "api").
     :return: str or dict
 """
 ```
 
-## Supported Languages
+</details>
+
+<details>
+<summary>Supported Languages</summary>
 
 | Language             | Language of Translator | [Google](https://translate.google.com) | [Yandex](https://translate.yandex.com) | [Bing](https://www.bing.com/Translator) | [Baidu](https://fanyi.baidu.com) | [Alibaba](https://translate.alibaba.com) | [Tencent](https://fanyi.qq.com) | [Youdao](https://fanyi.youdao.com) | [Sogou](https://fanyi.sogou.com) | [Deepl](https://www.deepl.com/translator) | [Caiyun](https://fanyi.caiyunapp.com) | [Argos](https://translate.argosopentech.com) | others... |
 | -------------------- | ---------------------- | -------------------------------------- | -------------------------------------- | --------------------------------------- | -------------------------------- | ---------------------------------------- | ------------------------------- | ---------------------------------- | -------------------------------- | ----------------------------------------- | ------------------------------------- | -------------------------------------------- | --------- |
 | english              | en                     | Y                                      | Y                                      | Y                                       | Y                                | Y                                        | Y                               | Y                                  | Y                                | Y                                         | Y                                     | Y                                            | ...       |
 | chinese              | zh                     | Y                                      | Y                                      | Y                                       | Y                                | Y                                        | Y                               | Y                                  | Y                                | Y                                         | Y                                     | Y                                            |           |
 | arabic               | ar                     | Y                                      | Y                                      | Y                                       | Y(ara)                           | Y                                        | Y                               | Y                                  | Y                                |                                           |                                       | Y                                            |           |
 | russian              | ru                     | Y                                      | Y                                      | Y                                       | Y                                | Y                                        | Y                               | Y                                  | Y                                | Y                                         | Y                                     | Y                                            |           |
@@ -197,15 +201,16 @@
 | chuvash              | cv                     |                                        | Y                                      |                                         |                                  |                                          |                                 |                                    |                                  |                                           |                                       |                                              |           |
 | esperanto            | eo                     | Y                                      | Y                                      |                                         |                                  |                                          |                                 |                                    |                                  |                                           |                                       |                                              |           |
 | basque               | eu                     | Y                                      | Y                                      |                                         |                                  |                                          |                                 |                                    |                                  |                                           |                                       |                                              |           |
 | irish                | ga                     | Y                                      | Y                                      | Y                                       |                                  |                                          |                                 |                                    |                                  |                                           |                                       |                                              |           |
 | emoji                | emj                    |                                        | Y                                      |                                         |                                  |                                          |                                 |                                    |                                  |                                           |                                       |                                              |           |
 | ...                  | ...                    |                                        |                                        |                                         |                                  |                                          |                                 |                                    |                                  |                                           |                                       |                                              |           |
 
-### About Chinese Language
+<details>
+<summary>About Chinese Language</summary>
 
 | Language      | Language of Translator | [Google](https://translate.google.com) | [Yandex](https://translate.yandex.com) | [Bing](https://www.bing.com/Translator) | [Baidu](https://fanyi.baidu.com) | [Alibaba](https://translate.alibaba.com) | [Tencent](https://fanyi.qq.com) | [Youdao](https://fanyi.youdao.com) | [Sogou](https://fanyi.sogou.com) | [Iciba](https://www.iciba.com/fy) | [Iflytek](https://fanyi.xfyun.cn/console/trans/text) | [Caiyun](https://fanyi.caiyunapp.com) | [Deepl](https://www.deepl.com/translator) | [Argos](https://translate.argosopentech.com) | [Itranslate](https://itranslate.com/webapp) | [Reverso](https://www.reverso.net/text-translation) | [TranslateCom](https://www.translate.com/machine-translation) | [Papago](https://papago.naver.com) | [Utibet](http://mt.utibet.edu.cn/mt) |
 | ------------- | ---------------------- | -------------------------------------- | -------------------------------------- | --------------------------------------- | -------------------------------- | ---------------------------------------- | ------------------------------- | ---------------------------------- | -------------------------------- | --------------------------------- | ---------------------------------------------------- | ------------------------------------- | ----------------------------------------- | -------------------------------------------- | ------------------------------------------- | --------------------------------------------------- | ------------------------------------------------------------- | ---------------------------------- | ------------------------------------ |
 | Chinese(简体)   | zh-CHS                 | Y(zh-CN)                               | Y(zh)                                  | Y(zh-Hans)                              | Y(zh)                            | Y(zh)                                    | Y(zh)                           | Y                                  | Y                                | Y(zh)                             | Y(zh)                                                | Y(zh)                                 | Y(zh)                                     | Y(zh)                                        | Y(zh-CN)                                    | Y(zh/chi)                                           | ...                                                           | Y(zh-CN)                           | Y(zh)                                |
 | Chinese(繁体)   | zh-CHT                 | Y(zh-TW)                               |                                        | Y(zh-Hant)                              | Y(cht)                           | Y(zh-TW)                                 |                                 |                                    | Y                                | Y(cnt)                            |                                                      |                                       |                                           |                                              | Y(zh-TW)                                    |                                                     |                                                               | Y(zh-TW)                           |                                      |
 | Chinese(文言文)  | wyw                    |                                        |                                        |                                         | Y                                |                                          |                                 |                                    |                                  |                                   |                                                      |                                       |                                           |                                              |                                             |                                                     |                                                               |                                    |                                      |
 | Chinese(粤语)   | yue                    |                                        |                                        | Y                                       | Y                                |                                          |                                 |                                    | Y                                | Y                                 | Y                                                    |                                       |                                           |                                              | Y(zh-HK)                                    |                                                     |                                                               |                                    |                                      |
@@ -213,26 +218,39 @@
 | Chinese(维吾尔语) | uy                     |                                        |                                        |                                         |                                  |                                          |                                 |                                    |                                  | Y                                 |                                                      |                                       |                                           |                                              |                                             |                                                     |                                                               |                                    |                                      |
 | Chinese(藏语)   | ti                     |                                        |                                        |                                         |                                  |                                          |                                 |                                    |                                  | Y                                 |                                                      |                                       |                                           |                                              |                                             |                                                     |                                                               |                                    | Y                                    |
 | Chinese(白苗文)  | mww                    |                                        |                                        | Y                                       |                                  |                                          |                                 |                                    | Y                                | Y                                 |                                                      |                                       |                                           |                                              |                                             |                                                     |                                                               |                                    |                                      |
 | Chinese(彝语)   | ii                     |                                        |                                        |                                         |                                  |                                          |                                 |                                    |                                  |                                   | Y                                                    |                                       |                                           |                                              |                                             |                                                     |                                                               |                                    |                                      |
 | Chinese(苗语)   | hmn                    |                                        |                                        |                                         |                                  |                                          |                                 |                                    |                                  |                                   |                                                      |                                       |                                           |                                              | Y                                           |                                                     |                                                               |                                    |                                      |
 | Chinese(壮语)   | zyb                    |                                        |                                        |                                         |                                  |                                          |                                 |                                    |                                  |                                   |                                                      |                                       |                                           |                                              |                                             |                                                     |                                                               |                                    |                                      |
 
-## Debug Tips
+</details>
+</details>
+
+<details>
+<summary>Debug Tips</summary>
 
 ### Linux Runtime Environment
 
 1. To support javascript runtime environment, you should [download and install Node.js](https://nodejs.org/en/download/).
-2. baidu() doesn't work on Linux without desktop.
+2. Function baidu() doesn't work on Linux without desktop.
 
 ### HttpError 4xx
 
 1. Check whether you made high frequency requests, especially httperror 429.
 2. Check whether this service is provided in your region.
 3. Detail to solve [HttpError](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status) itself.
 4. [Issue me](https://github.com/UlionTse/translators/issues), thanks.
 
 ### NetworkError or ProxyError
 
 1. Check whether the network is connected correctly.
 2. Check the proxy are enabled on your computer. If it is enabled, try turning it off or otherwise. 
 
+</details>
+
+<details>
+<summary>Star History</summary>
+
+[![Star History Chart](https://api.star-history.com/svg?repos=UlionTse/translators&type=Date)](https://star-history.com/#UlionTse/translators&Date)
+
+</details>
+
```

#### html2text {}

```diff
@@ -1,38 +1,35 @@
 [https://github.com/UlionTse/translators/blob/master/docs/translators_logo.png]
   [PyPI_-_Version] [Conda_-_Version] [PyPI_-_License] [PyPI_-_Python] [PyPI_-
                    Status] [PyPI_-_Wheel] [PyPI_-_Downloads]
 * * * **Translators** is a library which aims to bring **free, multiple,
-enjoyable** translation to individuals and students in Python. - [Supported
-Translation Services](#supported-translation-services) - [Installation]
-(#installation) - [Getting Started](#getting-started) - [Supported Languages]
-(#supported-languages) - [Debug Tips](#debug-tips) ## Supported Translation
-Services | ID | Translator | Number of Supported Languages | Advantage |
-Service | Status | | --- | ----------------------------------------------------
------------------------------ | ----------------------------- | ---------------
----------------------------------------------------------------------------- |
+enjoyable** translation to individuals and students in Python.  Supported
+Translation Services | ID | Translator | Number of Supported Languages |
+Advantage | Service | Status | | --- | ----------------------------------------
+----------------------------------------- | ----------------------------- | ---
 -------------------------------------------------------------------------------
----------------------------------- | ------------------------------- | | 1 |
-[MyMemory](https://mymemory.translated.net) | 330 | support the most languages
-in the world | [Translated](https://translatedlabs.com/welcome), Italy | stable
-| | 2 | [Niutrans](https://niutrans.com/trans) | 302 | support the most
-languages in the world | [Northeastern University](http://english.neu.edu.cn/
-) / [Niutrans](https://github.com/NiuTrans), China | / | | 3 | [Alibaba](https:
-//translate.alibaba.com) | 221 | support most languages, support professional
-field | [Alibaba](https://damo.alibaba.com/about?lang=en), China | stable | | 4
-| [Baidu](https://fanyi.baidu.com) | 201 | support most languages, support
-professional field, support classical Chinese | [Baidu](https://ir.baidu.com/
-company-overview), China | stable | | 5 | [Iciba](https://www.iciba.com/fy) |
-187 | support the most languages in the world | [Kingsoft](https://www.wps.com/
-about-us/) / [Xiaomi](https://www.mi.com/us/about/), China | stable | | 6 |
-[Iflytek](https://fanyi.xfyun.cn/console/trans/text) | 140 | support the most
-languages in the world | [Iflytek](https://www.iflytek.com/en/about-us.html),
-China | / | | 7 | [Google](https://translate.google.com) | 134 | support more
-languages in the world | [Google](https://about.google/), America | stable
-(offline in China inland) | | 8 | [VolcEngine](https://
+--------- | -------------------------------------------------------------------
+---------------------------------------------- | ------------------------------
+- | | 1 | [MyMemory](https://mymemory.translated.net) | 330 | support the most
+languages in the world | [Translated](https://translatedlabs.com/welcome),
+Italy | stable | | 2 | [Niutrans](https://niutrans.com/trans) | 302 | support
+the most languages in the world | [Northeastern University](http://
+english.neu.edu.cn/) / [Niutrans](https://github.com/NiuTrans), China | / | | 3
+| [Alibaba](https://translate.alibaba.com) | 221 | support most languages,
+support professional field | [Alibaba](https://damo.alibaba.com/about?lang=en),
+China | stable | | 4 | [Baidu](https://fanyi.baidu.com) | 201 | support most
+languages, support professional field, support classical Chinese | [Baidu]
+(https://ir.baidu.com/company-overview), China | stable | | 5 | [Iciba](https:/
+/www.iciba.com/fy) | 187 | support the most languages in the world | [Kingsoft]
+(https://www.wps.com/about-us/) / [Xiaomi](https://www.mi.com/us/about/), China
+| stable | | 6 | [Iflytek](https://fanyi.xfyun.cn/console/trans/text) | 140 |
+support the most languages in the world | [Iflytek](https://www.iflytek.com/en/
+about-us.html), China | / | | 7 | [Google](https://translate.google.com) | 134
+| support more languages in the world | [Google](https://about.google/),
+America | stable(offline in China inland) | | 8 | [VolcEngine](https://
 translate.volcengine.com) | 122 | support more languages in the world, support
 professional field | [ByteDance](https://www.bytedance.com/en/), China | / | |
 9 | [Lingvanex](https://lingvanex.com/demo) | 112 | support translation of
 different regions but the same language | [Lingvanex](https://lingvanex.com/
 about-us/), Cyprus | stable | | 10 | [Bing](https://www.bing.com/Translator) |
 110 | support more languages in the world | [Microsoft](https://
 www.microsoft.com/en-us/about), America | stable | | 11 | [Yandex](https://
@@ -48,86 +45,87 @@
 (https://translatedlabs.com/welcome), Italy | stable | | 15 | [SysTran](https:/
 /www.systran.net/translate/) | 52 | support more languages in the world |
 [SysTran](https://www.systran.net/about/), France | stable | | 16 | [Apertium]
 (https://www.apertium.org/) | 45 | open-source | [Apertium](https://github.com/
 apertium), Spain | stable | | 17 | [Reverso](https://www.reverso.net/text-
 translation) | 42 | popular on Mac and Iphone | [Reverso](https://
 www.corporate-translation.reverso.com/about-us), France | stable | | 18 |
-[CloudYi](https://www.cloudtranslation.com/#/translate) | 28 | support main
-languages | [Xiamen University](http://nlp.xmu.edu.cn/) / [CloudTranslation]
-(https://www.cloudtranslation.com/#/about), China | stable | | 19 | [Deepl]
-(https://www.deepl.com/translator) | 27 | high quality to translate but
-response slowly | [Deepl](https://jobs.deepl.com/l/en), Germany | stable | | 20
-| [QQTranSmart](https://transmart.qq.com) | 22 | support main languages |
-[Tencent](https://www.tencent.com/en-us/about.html), China | stable | | 21 |
-[TranslateCom](https://www.translate.com/machine-translation) | 21 | good at
-English translation | [TranslateCom](https://www.translate.com/about-us),
-America | stable | | 22 | [Tilde](https://translate.tilde.com/) | 21 | good at
-lv, de, fr translation | [Tilde](https://tilde.com/about), Latvia | / | | 23 |
-[QQFanyi](https://fanyi.qq.com) | 17 | support main languages | [Tencent]
-(https://www.tencent.com/en-us/about.html), China | stable | | 24 | [Argos]
-(https://translate.argosopentech.com) | 17 | open-source | [Argos](https://
-github.com/argosopentech) / [Libre](https://github.com/LibreTranslate), America
-| stable | | 25 | [TranslateMe](https://translateme.network/) | 16 | good at
-English translation | [TranslateMe](https://translateme.network/our-team/) /
-[Neosus](https://neosus.net/about/), Lithuania | / | | 26 | [Youdao](https://
-ai.youdao.com/product-fanyi-text.s) | 15 | support main languages, high quality
-| [Netease](https://ir.netease.com/company-overview/corporate-profile), China |
-stable | | 27 | [Papago](https://papago.naver.com) | 15 | good at Korean
-translation | [Naver](https://www.navercorp.com/en/naver/company), South Korea
-| stable | | 28 | [Marai](https://miraitranslate.com/trial/) | 15 | good at
-Japanese translation | [MaraiTranslate](https://miraitranslate.com/en/company/
-), Japan | / | | 29 | [Iflyrec](https://fanyi.iflyrec.com) | 12 | good at
-Chinese translation | [Iflytek](https://www.iflytek.com/en/about-us.html),
-China | stable | | 30 | [Yeekit](https://www.yeekit.com/site/translate) | 10 |
-support main languages | [CTC](https://www.ctpc.com.cn/cms/enAboutUs.htm),
-China | / | | 31 | [LanguageWire](https://www.languagewire.com/en/technology/
-languagewire-translate) | 8 | good at English translation | [LanguageWire]
-(https://www.languagewire.com/about-us), Denmark | stable | | 32 | [Caiyun]
-(https://fanyi.caiyunapp.com) | 7 | high quality to translate but response
-slowly, support professional field | [ColorfulClouds](http://caiyunapp.com/
-jobs/), China | stable | | 33 | [Elia](https://elia.eus/translator) | 6 | good
-at Basque translation | [Elhuyar](https://www.elhuyar.eus/eu/nor-gara), Spain |
+[CloudTranslation](https://www.cloudtranslation.com/#/translate) | 28 | support
+main languages | [Xiamen University](http://nlp.xmu.edu.cn/) /
+[CloudTranslation](https://www.cloudtranslation.com/#/about), China | stable |
+| 19 | [Deepl](https://www.deepl.com/translator) | 27 | high quality to
+translate but response slowly | [Deepl](https://jobs.deepl.com/l/en), Germany |
+stable | | 20 | [QQTranSmart](https://transmart.qq.com) | 22 | support main
+languages | [Tencent](https://www.tencent.com/en-us/about.html), China | stable
+| | 21 | [TranslateCom](https://www.translate.com/machine-translation) | 21 |
+good at English translation | [TranslateCom](https://www.translate.com/about-
+us), America | stable | | 22 | [Tilde](https://translate.tilde.com/) | 21 |
+good at lv, de, fr translation | [Tilde](https://tilde.com/about), Latvia | / |
+| 23 | [QQFanyi](https://fanyi.qq.com) | 17 | support main languages |
+[Tencent](https://www.tencent.com/en-us/about.html), China | stable | | 24 |
+[Argos](https://translate.argosopentech.com) | 17 | open-source | [Argos]
+(https://github.com/argosopentech) / [Libre](https://github.com/
+LibreTranslate), America | stable | | 25 | [TranslateMe](https://
+translateme.network/) | 16 | good at English translation | [TranslateMe](https:
+//translateme.network/our-team/) / [Neosus](https://neosus.net/about/),
+Lithuania | / | | 26 | [Youdao](https://ai.youdao.com/product-fanyi-text.s) |
+15 | support main languages, high quality | [Netease](https://ir.netease.com/
+company-overview/corporate-profile), China | stable | | 27 | [Papago](https://
+papago.naver.com) | 15 | good at Korean translation | [Naver](https://
+www.navercorp.com/en/naver/company), South Korea | stable | | 28 | [Marai]
+(https://miraitranslate.com/trial/) | 15 | good at Japanese translation |
+[MaraiTranslate](https://miraitranslate.com/en/company/), Japan | / | | 29 |
+[Iflyrec](https://fanyi.iflyrec.com) | 12 | good at Chinese translation |
+[Iflytek](https://www.iflytek.com/en/about-us.html), China | stable | | 30 |
+[Yeekit](https://www.yeekit.com/site/translate) | 10 | support main languages |
+[CTC](https://www.ctpc.com.cn/cms/enAboutUs.htm), China | / | | 31 |
+[LanguageWire](https://www.languagewire.com/en/technology/languagewire-
+translate) | 8 | good at English translation | [LanguageWire](https://
+www.languagewire.com/about-us), Denmark | stable | | 32 | [Caiyun](https://
+fanyi.caiyunapp.com) | 7 | high quality to translate but response slowly,
+support professional field | [ColorfulClouds](http://caiyunapp.com/jobs/),
+China | stable | | 33 | [Elia](https://elia.eus/translator) | 6 | good at
+Basque translation | [Elhuyar](https://www.elhuyar.eus/eu/nor-gara), Spain |
 stable | | 34 | [Judic](https://judic.io/en/translate) | 4 | good at European
 translation | [CrossLang](https://crosslang.com/about-us/), Belgium | stable |
 | 35 | [Mglip](http://fy.mglip.com/pc) | 3 | good at Mongolia translation |
 [Inner Mongolia University](https://www.imu.edu.cn/yw/Home.htm), China | stable
 | | 36 | [Utibet](http://mt.utibet.edu.cn/mt) | 2 | good at Tibet translation |
-[Tibet University](http://www.utibet.edu.cn/), China | stable | ## Installation
+[Tibet University](http://www.utibet.edu.cn/), China | stable |   Installation
 ```sh # PYPI pip install --upgrade translators # Conda conda install -c conda-
 forge translators # Source git clone https://github.com/UlionTse/
-translators.git cd translators python setup.py install ``` ## Getting Started
+translators.git cd translators python setup.py install ```   Getting Started
 ```python import translators as ts q_text =
 'å­£å§¬å¯ï¼éé¸¡ï¼é¸¡å³æ£é¸¡ãæ£é¸¡é¥¥å½ï¼å­£å§¬åç®ç¨·æµé¸¡ã'
 q_html = '''
 è¿æå¦ä¸ç¯æç« ãæ½æ°é£ç®å²ãã
 ''' ### usage _ = ts.preaccelerate_and_speedtest() # Optional. Caching sessions
 in advance, which can help improve access speed. print(ts.translators_pool)
 print(ts.translate_text(q_text)) print(ts.translate_html(q_html,
 translator='alibaba')) ### parameters help(ts.translate_text) """
 translate_text(query_text: str, translator: str = 'bing', from_language: str =
 'auto', to_language: str = 'en', **kwargs) -> Union[str, dict] :param
 query_text: str, must. :param translator: str, default 'bing'. :param
 from_language: str, default 'auto'. :param to_language: str, default 'en'. :
 param if_use_preacceleration: bool, default False. :param **kwargs: :param
 is_detail_result: bool, default False. :param professional_field: str, default
-None. Support alibaba(), baidu(), caiyun(), cloudYi(), elia(), sysTran(),
-youdao(), volcEngine() only. :param timeout: float, default None. :param
+None. Support alibaba(), baidu(), caiyun(), cloudTranslation(), elia(), sysTran
+(), youdao(), volcEngine() only. :param timeout: float, default None. :param
 proxies: dict, default None. :param sleep_seconds: float, default 0. :param
 update_session_after_freq: int, default 1000. :param
 update_session_after_seconds: float, default 1500. :param if_use_cn_host: bool,
 default False. Support google(), bing() only. :param reset_host_url: str,
 default None. Support google(), argos(), yandex() only. :param
 if_check_reset_host_url: bool, default True. Support google(), yandex() only. :
 param if_ignore_empty_query: bool, default False. :param limit_of_length: int,
 default 20000. :param if_ignore_limit_of_length: bool, default False. :param
 if_show_time_stat: bool, default False. :param show_time_stat_precision: int,
 default 2. :param if_print_warning: bool, default True. :param lingvanex_mode:
 str, default 'B2C', choose from ("B2C", "B2B"). :param myMemory_mode: str,
-default "web", choose from ("web", "api"). :return: str or dict """ ``` ##
+default "web", choose from ("web", "api"). :return: str or dict """ ```
 Supported Languages | Language | Language of Translator | [Google](https://
 translate.google.com) | [Yandex](https://translate.yandex.com) | [Bing](https:/
 /www.bing.com/Translator) | [Baidu](https://fanyi.baidu.com) | [Alibaba](https:
 //translate.alibaba.com) | [Tencent](https://fanyi.qq.com) | [Youdao](https://
 fanyi.youdao.com) | [Sogou](https://fanyi.sogou.com) | [Deepl](https://
 www.deepl.com/translator) | [Caiyun](https://fanyi.caiyunapp.com) | [Argos]
 (https://translate.argosopentech.com) | others... | | -------------------- | --
@@ -181,19 +179,19 @@
 | | | | | | | | | | | telugu | te | Y | Y | Y | | | | | | | | | | | punjabi |
 pa | Y | Y | Y | | | | | | | | | | | amharic | am | Y | Y | | | | | | | | | | |
 | azerbaijani | az | Y | Y | | | | | | | | | | | | bashkir | ba | | Y | | | | |
 | | | | | | | belarusian | be | Y | Y | | | | | | | | | | | | cebuano | ceb | Y
 | Y | | | | | | | | | | | | chuvash | cv | | Y | | | | | | | | | | | |
 esperanto | eo | Y | Y | | | | | | | | | | | | basque | eu | Y | Y | | | | | |
 | | | | | | irish | ga | Y | Y | Y | | | | | | | | | | | emoji | emj | | Y | |
-| | | | | | | | | | ... | ... | | | | | | | | | | | | | ### About Chinese
-Language | Language | Language of Translator | [Google](https://
-translate.google.com) | [Yandex](https://translate.yandex.com) | [Bing](https:/
-/www.bing.com/Translator) | [Baidu](https://fanyi.baidu.com) | [Alibaba](https:
-//translate.alibaba.com) | [Tencent](https://fanyi.qq.com) | [Youdao](https://
+| | | | | | | | | | ... | ... | | | | | | | | | | | | |  About Chinese Language
+| Language | Language of Translator | [Google](https://translate.google.com) |
+[Yandex](https://translate.yandex.com) | [Bing](https://www.bing.com/
+Translator) | [Baidu](https://fanyi.baidu.com) | [Alibaba](https://
+translate.alibaba.com) | [Tencent](https://fanyi.qq.com) | [Youdao](https://
 fanyi.youdao.com) | [Sogou](https://fanyi.sogou.com) | [Iciba](https://
 www.iciba.com/fy) | [Iflytek](https://fanyi.xfyun.cn/console/trans/text) |
 [Caiyun](https://fanyi.caiyunapp.com) | [Deepl](https://www.deepl.com/
 translator) | [Argos](https://translate.argosopentech.com) | [Itranslate]
 (https://itranslate.com/webapp) | [Reverso](https://www.reverso.net/text-
 translation) | [TranslateCom](https://www.translate.com/machine-translation) |
 [Papago](https://papago.naver.com) | [Utibet](http://mt.utibet.edu.cn/mt) | | -
@@ -215,18 +213,20 @@
 | | | | Chinese(ç²¤è¯­) | yue | | | Y | Y | | | | Y | Y | Y | | | | Y(zh-HK) |
 | | | | | Chinese(åèè¯­) | mn | N[å¤è] | N[å¤è] | | | | | | | | Y
 [åè] | | | | N[å¤è] | | | | | | Chinese(ç»´å¾å°è¯­) | uy | | | | | | |
 | | Y | | | | | | | | | | | Chinese(èè¯­) | ti | | | | | | | | | Y | | | | |
 | | | | Y | | Chinese(ç½èæ) | mww | | | Y | | | | | Y | Y | | | | | | | |
 | | | Chinese(å½è¯­) | ii | | | | | | | | | | Y | | | | | | | | | | Chinese
 (èè¯­) | hmn | | | | | | | | | | | | | | Y | | | | | | Chinese(å£®è¯­) | zyb
-| | | | | | | | | | | | | | | | | | | ## Debug Tips ### Linux Runtime
+| | | | | | | | | | | | | | | | | | |    Debug Tips ### Linux Runtime
 Environment 1. To support javascript runtime environment, you should [download
-and install Node.js](https://nodejs.org/en/download/). 2. baidu() doesn't work
-on Linux without desktop. ### HttpError 4xx 1. Check whether you made high
-frequency requests, especially httperror 429. 2. Check whether this service is
-provided in your region. 3. Detail to solve [HttpError](https://
+and install Node.js](https://nodejs.org/en/download/). 2. Function baidu()
+doesn't work on Linux without desktop. ### HttpError 4xx 1. Check whether you
+made high frequency requests, especially httperror 429. 2. Check whether this
+service is provided in your region. 3. Detail to solve [HttpError](https://
 developer.mozilla.org/en-US/docs/Web/HTTP/Status) itself. 4. [Issue me](https:/
 /github.com/UlionTse/translators/issues), thanks. ### NetworkError or
 ProxyError 1. Check whether the network is connected correctly. 2. Check the
 proxy are enabled on your computer. If it is enabled, try turning it off or
-otherwise.
+otherwise.   Star History [![Star History Chart](https://api.star-history.com/
+svg?repos=UlionTse/translators&type=Date)](https://star-history.com/#UlionTse/
+translators&Date)
```

### Comparing `translators-5.8.0/README_history.md` & `translators-5.8.2/PKG-INFO`

 * *Files 5% similar despite different names*

```diff
@@ -1,7 +1,33 @@
+Metadata-Version: 2.1
+Name: translators
+Version: 5.8.2
+Summary: Translators is a library which aims to bring free, multiple, enjoyable translation to individuals and students in Python.
+Home-page: https://github.com/uliontse/translators
+Author: UlionTse
+Author-email: uliontse@outlook.com
+License: GPLv3
+Project-URL: Source, https://github.com/UlionTse/translators
+Project-URL: Changelog, https://github.com/UlionTse/translators/blob/master/change_log.txt
+Project-URL: Documentation, https://github.com/UlionTse/translators/blob/master/README.md
+Keywords: translate,translate_text,translate_html,alibaba,apertium,argos,baidu,bing,caiyun,cloudTranslation,deepl,elia,google,iciba,iflytek,iflyrec,itranslate,judic,languageWire,lingvanex,mglip,mirai,modernMt,myMemory,niutrans,papago,qqFanyi,qqTranSmart,reverso,sogou,sysTran,tilde,translateCom,translateMe,utibet,volcEngine,yandex,yeekit,youdao
+Classifier: Development Status :: 5 - Production/Stable
+Classifier: Environment :: Web Environment
+Classifier: Intended Audience :: Developers
+Classifier: License :: OSI Approved :: GNU General Public License v3 (GPLv3)
+Classifier: Programming Language :: Python :: 3 :: Only
+Classifier: Programming Language :: Python :: 3.8
+Classifier: Programming Language :: Python :: 3.9
+Classifier: Programming Language :: Python :: 3.10
+Classifier: Programming Language :: Python :: 3.11
+Requires-Python: >=3.8
+Description-Content-Type: text/markdown
+Provides-Extra: pypi
+License-File: LICENSE
+
 <p align="center">
   <img src="https://github.com/UlionTse/translators/blob/master/docs/translators_logo.png" width="500"/>
 </p>
 <p align="center">
   <a href="https://pypi.org/project/translators"><img alt="PyPI - Version" src="https://img.shields.io/pypi/v/translators.svg?color=blue"></a>
   <a href="https://anaconda.org/conda-forge/translators"><img alt="Conda - Version" src="https://img.shields.io/conda/vn/conda-forge/translators.svg?color=blue"></a>
   <a href="https://pypi.org/project/translators"><img alt="PyPI - License" src="https://img.shields.io/pypi/l/translators.svg?color=brightgreen"></a>
@@ -11,16 +37,22 @@
   <a href="https://pypi.org/project/translators"><img alt="PyPI - Downloads" src="https://static.pepy.tech/personalized-badge/translators?period=total&units=international_system&left_text=downloads&left_color=grey&right_color=blue"></a>
 </p>
 
 * * *
 
 **Translators** is a library which aims to bring **free, multiple, enjoyable** translation to individuals and students in Python. 
 
-<details>
-<summary>Supported Translation Services</summary>
+- [Supported Translation Services](#supported-translation-services)
+- [Installation](#installation)
+- [Getting Started](#getting-started)
+- [Supported Languages](#supported-languages)
+- [Debug Tips](#debug-tips)
+- [Star History](#star-history)
+
+## Supported Translation Services
 
 | ID  | Translator                                                                        | Number of Supported Languages | Advantage                                                                                   | Service                                                                                                           | Status                          |
 | --- | --------------------------------------------------------------------------------- | ----------------------------- | ------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------- | ------------------------------- |
 | 1   | [MyMemory](https://mymemory.translated.net)                                       | 330                           | support the most languages in the world                                                     | [Translated](https://translatedlabs.com/welcome), Italy                                                           | stable                          |
 | 2   | [Niutrans](https://niutrans.com/trans)                                            | 302                           | support the most languages in the world                                                     | [Northeastern University](http://english.neu.edu.cn/) / [Niutrans](https://github.com/NiuTrans), China            | /                               |
 | 3   | [Alibaba](https://translate.alibaba.com)                                          | 221                           | support most languages, support professional field                                          | [Alibaba](https://damo.alibaba.com/about?lang=en), China                                                          | stable                          |
 | 4   | [Baidu](https://fanyi.baidu.com)                                                  | 201                           | support most languages, support professional field, support classical Chinese               | [Baidu](https://ir.baidu.com/company-overview), China                                                             | stable                          |
@@ -33,15 +65,15 @@
 | 11  | [Yandex](https://translate.yandex.com)                                            | 102                           | support more languages in the world, support word to emoji                                  | [Yandex](https://yandex.com/company/), Russia                                                                     | /                               |
 | 12  | [Itranslate](https://itranslate.com/webapp)                                       | 101                           | support translation of different regions but the same language, such as en-US, en-UK, en-AU | [Itranslate](https://itranslate.com/about), Austria                                                               | stable                          |
 | 13  | [Sogou](https://fanyi.sogou.com/text)                                             | 61                            | support more languages in the world                                                         | [Tencent](https://www.tencent.com/en-us/about.html), China                                                        | stable                          |
 | 14  | [ModernMt](https://www.modernmt.com/translate)                                    | 56                            | open-source, support more languages in the world                                            | [Modernmt](https://github.com/modernmt) / [Translated](https://translatedlabs.com/welcome), Italy                 | stable                          |
 | 15  | [SysTran](https://www.systran.net/translate/)                                     | 52                            | support more languages in the world                                                         | [SysTran](https://www.systran.net/about/), France                                                                 | stable                          |
 | 16  | [Apertium](https://www.apertium.org/)                                             | 45                            | open-source                                                                                 | [Apertium](https://github.com/apertium), Spain                                                                    | stable                          |
 | 17  | [Reverso](https://www.reverso.net/text-translation)                               | 42                            | popular on Mac and Iphone                                                                   | [Reverso](https://www.corporate-translation.reverso.com/about-us), France                                         | stable                          |
-| 18  | [CloudYi](https://www.cloudtranslation.com/#/translate)                           | 28                            | support main languages                                                                      | [Xiamen University](http://nlp.xmu.edu.cn/) / [CloudTranslation](https://www.cloudtranslation.com/#/about), China | stable                          |
+| 18  | [CloudTranslation](https://www.cloudtranslation.com/#/translate)                  | 28                            | support main languages                                                                      | [Xiamen University](http://nlp.xmu.edu.cn/) / [CloudTranslation](https://www.cloudtranslation.com/#/about), China | stable                          |
 | 19  | [Deepl](https://www.deepl.com/translator)                                         | 27                            | high quality to translate but response slowly                                               | [Deepl](https://jobs.deepl.com/l/en), Germany                                                                     | stable                          |
 | 20  | [QQTranSmart](https://transmart.qq.com)                                           | 22                            | support main languages                                                                      | [Tencent](https://www.tencent.com/en-us/about.html), China                                                        | stable                          |
 | 21  | [TranslateCom](https://www.translate.com/machine-translation)                     | 21                            | good at English translation                                                                 | [TranslateCom](https://www.translate.com/about-us), America                                                       | stable                          |
 | 22  | [Tilde](https://translate.tilde.com/)                                             | 21                            | good at lv, de, fr translation                                                              | [Tilde](https://tilde.com/about), Latvia                                                                          | /                               |
 | 23  | [QQFanyi](https://fanyi.qq.com)                                                   | 17                            | support main languages                                                                      | [Tencent](https://www.tencent.com/en-us/about.html), China                                                        | stable                          |
 | 24  | [Argos](https://translate.argosopentech.com)                                      | 17                            | open-source                                                                                 | [Argos](https://github.com/argosopentech) / [Libre](https://github.com/LibreTranslate), America                   | stable                          |
 | 25  | [TranslateMe](https://translateme.network/)                                       | 16                            | good at English translation                                                                 | [TranslateMe](https://translateme.network/our-team/) / [Neosus](https://neosus.net/about/), Lithuania             | /                               |
@@ -53,36 +85,30 @@
 | 31  | [LanguageWire](https://www.languagewire.com/en/technology/languagewire-translate) | 8                             | good at English translation                                                                 | [LanguageWire](https://www.languagewire.com/about-us), Denmark                                                    | stable                          |
 | 32  | [Caiyun](https://fanyi.caiyunapp.com)                                             | 7                             | high quality to translate but response slowly, support professional field                   | [ColorfulClouds](http://caiyunapp.com/jobs/), China                                                               | stable                          |
 | 33  | [Elia](https://elia.eus/translator)                                               | 6                             | good at Basque translation                                                                  | [Elhuyar](https://www.elhuyar.eus/eu/nor-gara), Spain                                                             | stable                          |
 | 34  | [Judic](https://judic.io/en/translate)                                            | 4                             | good at European translation                                                                | [CrossLang](https://crosslang.com/about-us/), Belgium                                                             | stable                          |
 | 35  | [Mglip](http://fy.mglip.com/pc)                                                   | 3                             | good at Mongolia translation                                                                | [Inner Mongolia University](https://www.imu.edu.cn/yw/Home.htm), China                                            | stable                          |
 | 36  | [Utibet](http://mt.utibet.edu.cn/mt)                                              | 2                             | good at Tibet translation                                                                   | [Tibet University](http://www.utibet.edu.cn/), China                                                              | stable                          |
 
-</details>
-
-<details>
-<summary>Installation</summary>
+## Installation
 
 ```sh
 # PYPI
 pip install --upgrade translators
 
 # Conda
 conda install -c conda-forge translators
 
 # Source
 git clone https://github.com/UlionTse/translators.git
 cd translators
 python setup.py install
 ```
 
-</details>
-
-<details>
-<summary>Getting Started</summary>
+## Getting Started
 
 ```python
 import translators as ts
 
 q_text = '季姬寂，集鸡，鸡即棘鸡。棘鸡饥叽，季姬及箕稷济鸡。'
 q_html = '''<!DOCTYPE html><html><head><title>《季姬击鸡记》</title></head><body><p>还有另一篇文章《施氏食狮史》。</p></body></html>'''
 
@@ -101,15 +127,15 @@
     :param query_text: str, must.
     :param translator: str, default 'bing'.
     :param from_language: str, default 'auto'.
     :param to_language: str, default 'en'.
     :param if_use_preacceleration: bool, default False.
     :param **kwargs:
             :param is_detail_result: bool, default False.
-            :param professional_field: str, default None. Support alibaba(), baidu(), caiyun(), cloudYi(), elia(), sysTran(), youdao(), volcEngine() only.
+            :param professional_field: str, default None. Support alibaba(), baidu(), caiyun(), cloudTranslation(), elia(), sysTran(), youdao(), volcEngine() only.
             :param timeout: float, default None.
             :param proxies: dict, default None.
             :param sleep_seconds: float, default 0.
             :param update_session_after_freq: int, default 1000.
             :param update_session_after_seconds: float, default 1500.
             :param if_use_cn_host: bool, default False. Support google(), bing() only.                
             :param reset_host_url: str, default None. Support google(), argos(), yandex() only.
@@ -122,18 +148,15 @@
             :param if_print_warning: bool, default True.
             :param lingvanex_mode: str, default 'B2C', choose from ("B2C", "B2B").
             :param myMemory_mode: str, default "web", choose from ("web", "api").
     :return: str or dict
 """
 ```
 
-</details>
-
-<details>
-<summary>Supported Languages</summary>
+## Supported Languages
 
 | Language             | Language of Translator | [Google](https://translate.google.com) | [Yandex](https://translate.yandex.com) | [Bing](https://www.bing.com/Translator) | [Baidu](https://fanyi.baidu.com) | [Alibaba](https://translate.alibaba.com) | [Tencent](https://fanyi.qq.com) | [Youdao](https://fanyi.youdao.com) | [Sogou](https://fanyi.sogou.com) | [Deepl](https://www.deepl.com/translator) | [Caiyun](https://fanyi.caiyunapp.com) | [Argos](https://translate.argosopentech.com) | others... |
 | -------------------- | ---------------------- | -------------------------------------- | -------------------------------------- | --------------------------------------- | -------------------------------- | ---------------------------------------- | ------------------------------- | ---------------------------------- | -------------------------------- | ----------------------------------------- | ------------------------------------- | -------------------------------------------- | --------- |
 | english              | en                     | Y                                      | Y                                      | Y                                       | Y                                | Y                                        | Y                               | Y                                  | Y                                | Y                                         | Y                                     | Y                                            | ...       |
 | chinese              | zh                     | Y                                      | Y                                      | Y                                       | Y                                | Y                                        | Y                               | Y                                  | Y                                | Y                                         | Y                                     | Y                                            |           |
 | arabic               | ar                     | Y                                      | Y                                      | Y                                       | Y(ara)                           | Y                                        | Y                               | Y                                  | Y                                |                                           |                                       | Y                                            |           |
 | russian              | ru                     | Y                                      | Y                                      | Y                                       | Y                                | Y                                        | Y                               | Y                                  | Y                                | Y                                         | Y                                     | Y                                            |           |
@@ -201,16 +224,15 @@
 | chuvash              | cv                     |                                        | Y                                      |                                         |                                  |                                          |                                 |                                    |                                  |                                           |                                       |                                              |           |
 | esperanto            | eo                     | Y                                      | Y                                      |                                         |                                  |                                          |                                 |                                    |                                  |                                           |                                       |                                              |           |
 | basque               | eu                     | Y                                      | Y                                      |                                         |                                  |                                          |                                 |                                    |                                  |                                           |                                       |                                              |           |
 | irish                | ga                     | Y                                      | Y                                      | Y                                       |                                  |                                          |                                 |                                    |                                  |                                           |                                       |                                              |           |
 | emoji                | emj                    |                                        | Y                                      |                                         |                                  |                                          |                                 |                                    |                                  |                                           |                                       |                                              |           |
 | ...                  | ...                    |                                        |                                        |                                         |                                  |                                          |                                 |                                    |                                  |                                           |                                       |                                              |           |
 
-<details>
-<summary>About Chinese Language</summary>
+### About Chinese Language
 
 | Language      | Language of Translator | [Google](https://translate.google.com) | [Yandex](https://translate.yandex.com) | [Bing](https://www.bing.com/Translator) | [Baidu](https://fanyi.baidu.com) | [Alibaba](https://translate.alibaba.com) | [Tencent](https://fanyi.qq.com) | [Youdao](https://fanyi.youdao.com) | [Sogou](https://fanyi.sogou.com) | [Iciba](https://www.iciba.com/fy) | [Iflytek](https://fanyi.xfyun.cn/console/trans/text) | [Caiyun](https://fanyi.caiyunapp.com) | [Deepl](https://www.deepl.com/translator) | [Argos](https://translate.argosopentech.com) | [Itranslate](https://itranslate.com/webapp) | [Reverso](https://www.reverso.net/text-translation) | [TranslateCom](https://www.translate.com/machine-translation) | [Papago](https://papago.naver.com) | [Utibet](http://mt.utibet.edu.cn/mt) |
 | ------------- | ---------------------- | -------------------------------------- | -------------------------------------- | --------------------------------------- | -------------------------------- | ---------------------------------------- | ------------------------------- | ---------------------------------- | -------------------------------- | --------------------------------- | ---------------------------------------------------- | ------------------------------------- | ----------------------------------------- | -------------------------------------------- | ------------------------------------------- | --------------------------------------------------- | ------------------------------------------------------------- | ---------------------------------- | ------------------------------------ |
 | Chinese(简体)   | zh-CHS                 | Y(zh-CN)                               | Y(zh)                                  | Y(zh-Hans)                              | Y(zh)                            | Y(zh)                                    | Y(zh)                           | Y                                  | Y                                | Y(zh)                             | Y(zh)                                                | Y(zh)                                 | Y(zh)                                     | Y(zh)                                        | Y(zh-CN)                                    | Y(zh/chi)                                           | ...                                                           | Y(zh-CN)                           | Y(zh)                                |
 | Chinese(繁体)   | zh-CHT                 | Y(zh-TW)                               |                                        | Y(zh-Hant)                              | Y(cht)                           | Y(zh-TW)                                 |                                 |                                    | Y                                | Y(cnt)                            |                                                      |                                       |                                           |                                              | Y(zh-TW)                                    |                                                     |                                                               | Y(zh-TW)                           |                                      |
 | Chinese(文言文)  | wyw                    |                                        |                                        |                                         | Y                                |                                          |                                 |                                    |                                  |                                   |                                                      |                                       |                                           |                                              |                                             |                                                     |                                                               |                                    |                                      |
 | Chinese(粤语)   | yue                    |                                        |                                        | Y                                       | Y                                |                                          |                                 |                                    | Y                                | Y                                 | Y                                                    |                                       |                                           |                                              | Y(zh-HK)                                    |                                                     |                                                               |                                    |                                      |
@@ -218,32 +240,29 @@
 | Chinese(维吾尔语) | uy                     |                                        |                                        |                                         |                                  |                                          |                                 |                                    |                                  | Y                                 |                                                      |                                       |                                           |                                              |                                             |                                                     |                                                               |                                    |                                      |
 | Chinese(藏语)   | ti                     |                                        |                                        |                                         |                                  |                                          |                                 |                                    |                                  | Y                                 |                                                      |                                       |                                           |                                              |                                             |                                                     |                                                               |                                    | Y                                    |
 | Chinese(白苗文)  | mww                    |                                        |                                        | Y                                       |                                  |                                          |                                 |                                    | Y                                | Y                                 |                                                      |                                       |                                           |                                              |                                             |                                                     |                                                               |                                    |                                      |
 | Chinese(彝语)   | ii                     |                                        |                                        |                                         |                                  |                                          |                                 |                                    |                                  |                                   | Y                                                    |                                       |                                           |                                              |                                             |                                                     |                                                               |                                    |                                      |
 | Chinese(苗语)   | hmn                    |                                        |                                        |                                         |                                  |                                          |                                 |                                    |                                  |                                   |                                                      |                                       |                                           |                                              | Y                                           |                                                     |                                                               |                                    |                                      |
 | Chinese(壮语)   | zyb                    |                                        |                                        |                                         |                                  |                                          |                                 |                                    |                                  |                                   |                                                      |                                       |                                           |                                              |                                             |                                                     |                                                               |                                    |                                      |
 
-</details>
-</details>
-
-<details>
-<summary>Debug Tips</summary>
+## Debug Tips
 
 ### Linux Runtime Environment
 
 1. To support javascript runtime environment, you should [download and install Node.js](https://nodejs.org/en/download/).
-2. baidu() doesn't work on Linux without desktop.
+2. Function baidu() doesn't work on Linux without desktop.
 
 ### HttpError 4xx
 
 1. Check whether you made high frequency requests, especially httperror 429.
 2. Check whether this service is provided in your region.
 3. Detail to solve [HttpError](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status) itself.
 4. [Issue me](https://github.com/UlionTse/translators/issues), thanks.
 
 ### NetworkError or ProxyError
 
 1. Check whether the network is connected correctly.
 2. Check the proxy are enabled on your computer. If it is enabled, try turning it off or otherwise. 
 
-</details>
+## Star History
 
+[![Star History Chart](https://api.star-history.com/svg?repos=UlionTse/translators&type=Date)](https://star-history.com/#UlionTse/translators&Date)
```

#### html2text {}

```diff
@@ -1,35 +1,56 @@
+Metadata-Version: 2.1 Name: translators Version: 5.8.2 Summary: Translators is
+a library which aims to bring free, multiple, enjoyable translation to
+individuals and students in Python. Home-page: https://github.com/uliontse/
+translators Author: UlionTse Author-email: uliontse@outlook.com License: GPLv3
+Project-URL: Source, https://github.com/UlionTse/translators Project-URL:
+Changelog, https://github.com/UlionTse/translators/blob/master/change_log.txt
+Project-URL: Documentation, https://github.com/UlionTse/translators/blob/
+master/README.md Keywords:
+translate,translate_text,translate_html,alibaba,apertium,argos,baidu,bing,caiyun,cloudTranslation,deepl,elia,google,iciba,iflytek,iflyrec,itranslate,judic,languageWire,lingvanex,mglip,mirai,modernMt,myMemory,niutrans,papago,qqFanyi,qqTranSmart,reverso,sogou,sysTran,tilde,translateCom,translateMe,utibet,volcEngine,yandex,yeekit,youdao
+Classifier: Development Status :: 5 - Production/Stable Classifier: Environment
+:: Web Environment Classifier: Intended Audience :: Developers Classifier:
+License :: OSI Approved :: GNU General Public License v3 (GPLv3) Classifier:
+Programming Language :: Python :: 3 :: Only Classifier: Programming Language ::
+Python :: 3.8 Classifier: Programming Language :: Python :: 3.9 Classifier:
+Programming Language :: Python :: 3.10 Classifier: Programming Language ::
+Python :: 3.11 Requires-Python: >=3.8 Description-Content-Type: text/markdown
+Provides-Extra: pypi License-File: LICENSE
 [https://github.com/UlionTse/translators/blob/master/docs/translators_logo.png]
   [PyPI_-_Version] [Conda_-_Version] [PyPI_-_License] [PyPI_-_Python] [PyPI_-
                    Status] [PyPI_-_Wheel] [PyPI_-_Downloads]
 * * * **Translators** is a library which aims to bring **free, multiple,
-enjoyable** translation to individuals and students in Python.  Supported
-Translation Services | ID | Translator | Number of Supported Languages |
-Advantage | Service | Status | | --- | ----------------------------------------
------------------------------------------ | ----------------------------- | ---
--------------------------------------------------------------------------------
---------- | -------------------------------------------------------------------
----------------------------------------------- | ------------------------------
-- | | 1 | [MyMemory](https://mymemory.translated.net) | 330 | support the most
-languages in the world | [Translated](https://translatedlabs.com/welcome),
-Italy | stable | | 2 | [Niutrans](https://niutrans.com/trans) | 302 | support
-the most languages in the world | [Northeastern University](http://
-english.neu.edu.cn/) / [Niutrans](https://github.com/NiuTrans), China | / | | 3
-| [Alibaba](https://translate.alibaba.com) | 221 | support most languages,
-support professional field | [Alibaba](https://damo.alibaba.com/about?lang=en),
-China | stable | | 4 | [Baidu](https://fanyi.baidu.com) | 201 | support most
-languages, support professional field, support classical Chinese | [Baidu]
-(https://ir.baidu.com/company-overview), China | stable | | 5 | [Iciba](https:/
-/www.iciba.com/fy) | 187 | support the most languages in the world | [Kingsoft]
-(https://www.wps.com/about-us/) / [Xiaomi](https://www.mi.com/us/about/), China
-| stable | | 6 | [Iflytek](https://fanyi.xfyun.cn/console/trans/text) | 140 |
-support the most languages in the world | [Iflytek](https://www.iflytek.com/en/
-about-us.html), China | / | | 7 | [Google](https://translate.google.com) | 134
-| support more languages in the world | [Google](https://about.google/),
-America | stable(offline in China inland) | | 8 | [VolcEngine](https://
+enjoyable** translation to individuals and students in Python. - [Supported
+Translation Services](#supported-translation-services) - [Installation]
+(#installation) - [Getting Started](#getting-started) - [Supported Languages]
+(#supported-languages) - [Debug Tips](#debug-tips) - [Star History](#star-
+history) ## Supported Translation Services | ID | Translator | Number of
+Supported Languages | Advantage | Service | Status | | --- | ------------------
+--------------------------------------------------------------- | -------------
+---------------- | ------------------------------------------------------------
+------------------------------- | ---------------------------------------------
+-------------------------------------------------------------------- | --------
+----------------------- | | 1 | [MyMemory](https://mymemory.translated.net) |
+330 | support the most languages in the world | [Translated](https://
+translatedlabs.com/welcome), Italy | stable | | 2 | [Niutrans](https://
+niutrans.com/trans) | 302 | support the most languages in the world |
+[Northeastern University](http://english.neu.edu.cn/) / [Niutrans](https://
+github.com/NiuTrans), China | / | | 3 | [Alibaba](https://
+translate.alibaba.com) | 221 | support most languages, support professional
+field | [Alibaba](https://damo.alibaba.com/about?lang=en), China | stable | | 4
+| [Baidu](https://fanyi.baidu.com) | 201 | support most languages, support
+professional field, support classical Chinese | [Baidu](https://ir.baidu.com/
+company-overview), China | stable | | 5 | [Iciba](https://www.iciba.com/fy) |
+187 | support the most languages in the world | [Kingsoft](https://www.wps.com/
+about-us/) / [Xiaomi](https://www.mi.com/us/about/), China | stable | | 6 |
+[Iflytek](https://fanyi.xfyun.cn/console/trans/text) | 140 | support the most
+languages in the world | [Iflytek](https://www.iflytek.com/en/about-us.html),
+China | / | | 7 | [Google](https://translate.google.com) | 134 | support more
+languages in the world | [Google](https://about.google/), America | stable
+(offline in China inland) | | 8 | [VolcEngine](https://
 translate.volcengine.com) | 122 | support more languages in the world, support
 professional field | [ByteDance](https://www.bytedance.com/en/), China | / | |
 9 | [Lingvanex](https://lingvanex.com/demo) | 112 | support translation of
 different regions but the same language | [Lingvanex](https://lingvanex.com/
 about-us/), Cyprus | stable | | 10 | [Bing](https://www.bing.com/Translator) |
 110 | support more languages in the world | [Microsoft](https://
 www.microsoft.com/en-us/about), America | stable | | 11 | [Yandex](https://
@@ -45,86 +66,87 @@
 (https://translatedlabs.com/welcome), Italy | stable | | 15 | [SysTran](https:/
 /www.systran.net/translate/) | 52 | support more languages in the world |
 [SysTran](https://www.systran.net/about/), France | stable | | 16 | [Apertium]
 (https://www.apertium.org/) | 45 | open-source | [Apertium](https://github.com/
 apertium), Spain | stable | | 17 | [Reverso](https://www.reverso.net/text-
 translation) | 42 | popular on Mac and Iphone | [Reverso](https://
 www.corporate-translation.reverso.com/about-us), France | stable | | 18 |
-[CloudYi](https://www.cloudtranslation.com/#/translate) | 28 | support main
-languages | [Xiamen University](http://nlp.xmu.edu.cn/) / [CloudTranslation]
-(https://www.cloudtranslation.com/#/about), China | stable | | 19 | [Deepl]
-(https://www.deepl.com/translator) | 27 | high quality to translate but
-response slowly | [Deepl](https://jobs.deepl.com/l/en), Germany | stable | | 20
-| [QQTranSmart](https://transmart.qq.com) | 22 | support main languages |
-[Tencent](https://www.tencent.com/en-us/about.html), China | stable | | 21 |
-[TranslateCom](https://www.translate.com/machine-translation) | 21 | good at
-English translation | [TranslateCom](https://www.translate.com/about-us),
-America | stable | | 22 | [Tilde](https://translate.tilde.com/) | 21 | good at
-lv, de, fr translation | [Tilde](https://tilde.com/about), Latvia | / | | 23 |
-[QQFanyi](https://fanyi.qq.com) | 17 | support main languages | [Tencent]
-(https://www.tencent.com/en-us/about.html), China | stable | | 24 | [Argos]
-(https://translate.argosopentech.com) | 17 | open-source | [Argos](https://
-github.com/argosopentech) / [Libre](https://github.com/LibreTranslate), America
-| stable | | 25 | [TranslateMe](https://translateme.network/) | 16 | good at
-English translation | [TranslateMe](https://translateme.network/our-team/) /
-[Neosus](https://neosus.net/about/), Lithuania | / | | 26 | [Youdao](https://
-ai.youdao.com/product-fanyi-text.s) | 15 | support main languages, high quality
-| [Netease](https://ir.netease.com/company-overview/corporate-profile), China |
-stable | | 27 | [Papago](https://papago.naver.com) | 15 | good at Korean
-translation | [Naver](https://www.navercorp.com/en/naver/company), South Korea
-| stable | | 28 | [Marai](https://miraitranslate.com/trial/) | 15 | good at
-Japanese translation | [MaraiTranslate](https://miraitranslate.com/en/company/
-), Japan | / | | 29 | [Iflyrec](https://fanyi.iflyrec.com) | 12 | good at
-Chinese translation | [Iflytek](https://www.iflytek.com/en/about-us.html),
-China | stable | | 30 | [Yeekit](https://www.yeekit.com/site/translate) | 10 |
-support main languages | [CTC](https://www.ctpc.com.cn/cms/enAboutUs.htm),
-China | / | | 31 | [LanguageWire](https://www.languagewire.com/en/technology/
-languagewire-translate) | 8 | good at English translation | [LanguageWire]
-(https://www.languagewire.com/about-us), Denmark | stable | | 32 | [Caiyun]
-(https://fanyi.caiyunapp.com) | 7 | high quality to translate but response
-slowly, support professional field | [ColorfulClouds](http://caiyunapp.com/
-jobs/), China | stable | | 33 | [Elia](https://elia.eus/translator) | 6 | good
-at Basque translation | [Elhuyar](https://www.elhuyar.eus/eu/nor-gara), Spain |
+[CloudTranslation](https://www.cloudtranslation.com/#/translate) | 28 | support
+main languages | [Xiamen University](http://nlp.xmu.edu.cn/) /
+[CloudTranslation](https://www.cloudtranslation.com/#/about), China | stable |
+| 19 | [Deepl](https://www.deepl.com/translator) | 27 | high quality to
+translate but response slowly | [Deepl](https://jobs.deepl.com/l/en), Germany |
+stable | | 20 | [QQTranSmart](https://transmart.qq.com) | 22 | support main
+languages | [Tencent](https://www.tencent.com/en-us/about.html), China | stable
+| | 21 | [TranslateCom](https://www.translate.com/machine-translation) | 21 |
+good at English translation | [TranslateCom](https://www.translate.com/about-
+us), America | stable | | 22 | [Tilde](https://translate.tilde.com/) | 21 |
+good at lv, de, fr translation | [Tilde](https://tilde.com/about), Latvia | / |
+| 23 | [QQFanyi](https://fanyi.qq.com) | 17 | support main languages |
+[Tencent](https://www.tencent.com/en-us/about.html), China | stable | | 24 |
+[Argos](https://translate.argosopentech.com) | 17 | open-source | [Argos]
+(https://github.com/argosopentech) / [Libre](https://github.com/
+LibreTranslate), America | stable | | 25 | [TranslateMe](https://
+translateme.network/) | 16 | good at English translation | [TranslateMe](https:
+//translateme.network/our-team/) / [Neosus](https://neosus.net/about/),
+Lithuania | / | | 26 | [Youdao](https://ai.youdao.com/product-fanyi-text.s) |
+15 | support main languages, high quality | [Netease](https://ir.netease.com/
+company-overview/corporate-profile), China | stable | | 27 | [Papago](https://
+papago.naver.com) | 15 | good at Korean translation | [Naver](https://
+www.navercorp.com/en/naver/company), South Korea | stable | | 28 | [Marai]
+(https://miraitranslate.com/trial/) | 15 | good at Japanese translation |
+[MaraiTranslate](https://miraitranslate.com/en/company/), Japan | / | | 29 |
+[Iflyrec](https://fanyi.iflyrec.com) | 12 | good at Chinese translation |
+[Iflytek](https://www.iflytek.com/en/about-us.html), China | stable | | 30 |
+[Yeekit](https://www.yeekit.com/site/translate) | 10 | support main languages |
+[CTC](https://www.ctpc.com.cn/cms/enAboutUs.htm), China | / | | 31 |
+[LanguageWire](https://www.languagewire.com/en/technology/languagewire-
+translate) | 8 | good at English translation | [LanguageWire](https://
+www.languagewire.com/about-us), Denmark | stable | | 32 | [Caiyun](https://
+fanyi.caiyunapp.com) | 7 | high quality to translate but response slowly,
+support professional field | [ColorfulClouds](http://caiyunapp.com/jobs/),
+China | stable | | 33 | [Elia](https://elia.eus/translator) | 6 | good at
+Basque translation | [Elhuyar](https://www.elhuyar.eus/eu/nor-gara), Spain |
 stable | | 34 | [Judic](https://judic.io/en/translate) | 4 | good at European
 translation | [CrossLang](https://crosslang.com/about-us/), Belgium | stable |
 | 35 | [Mglip](http://fy.mglip.com/pc) | 3 | good at Mongolia translation |
 [Inner Mongolia University](https://www.imu.edu.cn/yw/Home.htm), China | stable
 | | 36 | [Utibet](http://mt.utibet.edu.cn/mt) | 2 | good at Tibet translation |
-[Tibet University](http://www.utibet.edu.cn/), China | stable |   Installation
+[Tibet University](http://www.utibet.edu.cn/), China | stable | ## Installation
 ```sh # PYPI pip install --upgrade translators # Conda conda install -c conda-
 forge translators # Source git clone https://github.com/UlionTse/
-translators.git cd translators python setup.py install ```   Getting Started
+translators.git cd translators python setup.py install ``` ## Getting Started
 ```python import translators as ts q_text =
 'å­£å§¬å¯ï¼éé¸¡ï¼é¸¡å³æ£é¸¡ãæ£é¸¡é¥¥å½ï¼å­£å§¬åç®ç¨·æµé¸¡ã'
 q_html = '''
 è¿æå¦ä¸ç¯æç« ãæ½æ°é£ç®å²ãã
 ''' ### usage _ = ts.preaccelerate_and_speedtest() # Optional. Caching sessions
 in advance, which can help improve access speed. print(ts.translators_pool)
 print(ts.translate_text(q_text)) print(ts.translate_html(q_html,
 translator='alibaba')) ### parameters help(ts.translate_text) """
 translate_text(query_text: str, translator: str = 'bing', from_language: str =
 'auto', to_language: str = 'en', **kwargs) -> Union[str, dict] :param
 query_text: str, must. :param translator: str, default 'bing'. :param
 from_language: str, default 'auto'. :param to_language: str, default 'en'. :
 param if_use_preacceleration: bool, default False. :param **kwargs: :param
 is_detail_result: bool, default False. :param professional_field: str, default
-None. Support alibaba(), baidu(), caiyun(), cloudYi(), elia(), sysTran(),
-youdao(), volcEngine() only. :param timeout: float, default None. :param
+None. Support alibaba(), baidu(), caiyun(), cloudTranslation(), elia(), sysTran
+(), youdao(), volcEngine() only. :param timeout: float, default None. :param
 proxies: dict, default None. :param sleep_seconds: float, default 0. :param
 update_session_after_freq: int, default 1000. :param
 update_session_after_seconds: float, default 1500. :param if_use_cn_host: bool,
 default False. Support google(), bing() only. :param reset_host_url: str,
 default None. Support google(), argos(), yandex() only. :param
 if_check_reset_host_url: bool, default True. Support google(), yandex() only. :
 param if_ignore_empty_query: bool, default False. :param limit_of_length: int,
 default 20000. :param if_ignore_limit_of_length: bool, default False. :param
 if_show_time_stat: bool, default False. :param show_time_stat_precision: int,
 default 2. :param if_print_warning: bool, default True. :param lingvanex_mode:
 str, default 'B2C', choose from ("B2C", "B2B"). :param myMemory_mode: str,
-default "web", choose from ("web", "api"). :return: str or dict """ ```
+default "web", choose from ("web", "api"). :return: str or dict """ ``` ##
 Supported Languages | Language | Language of Translator | [Google](https://
 translate.google.com) | [Yandex](https://translate.yandex.com) | [Bing](https:/
 /www.bing.com/Translator) | [Baidu](https://fanyi.baidu.com) | [Alibaba](https:
 //translate.alibaba.com) | [Tencent](https://fanyi.qq.com) | [Youdao](https://
 fanyi.youdao.com) | [Sogou](https://fanyi.sogou.com) | [Deepl](https://
 www.deepl.com/translator) | [Caiyun](https://fanyi.caiyunapp.com) | [Argos]
 (https://translate.argosopentech.com) | others... | | -------------------- | --
@@ -178,19 +200,19 @@
 | | | | | | | | | | | telugu | te | Y | Y | Y | | | | | | | | | | | punjabi |
 pa | Y | Y | Y | | | | | | | | | | | amharic | am | Y | Y | | | | | | | | | | |
 | azerbaijani | az | Y | Y | | | | | | | | | | | | bashkir | ba | | Y | | | | |
 | | | | | | | belarusian | be | Y | Y | | | | | | | | | | | | cebuano | ceb | Y
 | Y | | | | | | | | | | | | chuvash | cv | | Y | | | | | | | | | | | |
 esperanto | eo | Y | Y | | | | | | | | | | | | basque | eu | Y | Y | | | | | |
 | | | | | | irish | ga | Y | Y | Y | | | | | | | | | | | emoji | emj | | Y | |
-| | | | | | | | | | ... | ... | | | | | | | | | | | | |  About Chinese Language
-| Language | Language of Translator | [Google](https://translate.google.com) |
-[Yandex](https://translate.yandex.com) | [Bing](https://www.bing.com/
-Translator) | [Baidu](https://fanyi.baidu.com) | [Alibaba](https://
-translate.alibaba.com) | [Tencent](https://fanyi.qq.com) | [Youdao](https://
+| | | | | | | | | | ... | ... | | | | | | | | | | | | | ### About Chinese
+Language | Language | Language of Translator | [Google](https://
+translate.google.com) | [Yandex](https://translate.yandex.com) | [Bing](https:/
+/www.bing.com/Translator) | [Baidu](https://fanyi.baidu.com) | [Alibaba](https:
+//translate.alibaba.com) | [Tencent](https://fanyi.qq.com) | [Youdao](https://
 fanyi.youdao.com) | [Sogou](https://fanyi.sogou.com) | [Iciba](https://
 www.iciba.com/fy) | [Iflytek](https://fanyi.xfyun.cn/console/trans/text) |
 [Caiyun](https://fanyi.caiyunapp.com) | [Deepl](https://www.deepl.com/
 translator) | [Argos](https://translate.argosopentech.com) | [Itranslate]
 (https://itranslate.com/webapp) | [Reverso](https://www.reverso.net/text-
 translation) | [TranslateCom](https://www.translate.com/machine-translation) |
 [Papago](https://papago.naver.com) | [Utibet](http://mt.utibet.edu.cn/mt) | | -
@@ -212,18 +234,20 @@
 | | | | Chinese(ç²¤è¯­) | yue | | | Y | Y | | | | Y | Y | Y | | | | Y(zh-HK) |
 | | | | | Chinese(åèè¯­) | mn | N[å¤è] | N[å¤è] | | | | | | | | Y
 [åè] | | | | N[å¤è] | | | | | | Chinese(ç»´å¾å°è¯­) | uy | | | | | | |
 | | Y | | | | | | | | | | | Chinese(èè¯­) | ti | | | | | | | | | Y | | | | |
 | | | | Y | | Chinese(ç½èæ) | mww | | | Y | | | | | Y | Y | | | | | | | |
 | | | Chinese(å½è¯­) | ii | | | | | | | | | | Y | | | | | | | | | | Chinese
 (èè¯­) | hmn | | | | | | | | | | | | | | Y | | | | | | Chinese(å£®è¯­) | zyb
-| | | | | | | | | | | | | | | | | | |    Debug Tips ### Linux Runtime
+| | | | | | | | | | | | | | | | | | | ## Debug Tips ### Linux Runtime
 Environment 1. To support javascript runtime environment, you should [download
-and install Node.js](https://nodejs.org/en/download/). 2. baidu() doesn't work
-on Linux without desktop. ### HttpError 4xx 1. Check whether you made high
-frequency requests, especially httperror 429. 2. Check whether this service is
-provided in your region. 3. Detail to solve [HttpError](https://
+and install Node.js](https://nodejs.org/en/download/). 2. Function baidu()
+doesn't work on Linux without desktop. ### HttpError 4xx 1. Check whether you
+made high frequency requests, especially httperror 429. 2. Check whether this
+service is provided in your region. 3. Detail to solve [HttpError](https://
 developer.mozilla.org/en-US/docs/Web/HTTP/Status) itself. 4. [Issue me](https:/
 /github.com/UlionTse/translators/issues), thanks. ### NetworkError or
 ProxyError 1. Check whether the network is connected correctly. 2. Check the
 proxy are enabled on your computer. If it is enabled, try turning it off or
-otherwise.
+otherwise. ## Star History [![Star History Chart](https://api.star-history.com/
+svg?repos=UlionTse/translators&type=Date)](https://star-history.com/#UlionTse/
+translators&Date)
```

### Comparing `translators-5.8.0/change_log.txt` & `translators-5.8.2/change_log.txt`

 * *Files 2% similar despite different names*

```diff
@@ -408,7 +408,13 @@
 no change (only for updates of conda information)
 
 5.8.0
 add func get_languages()
 stronger code of `update_session_after_freq`.  #134
 stronger code of `update_session_after_seconds`.
 update readme.md
+
+5.8.2
+stronger reverso().  #135
+replace cloudYi() to cloudTranslation(), add v2.
+fix alibaba_v1.
+update readme.md
```

### Comparing `translators-5.8.0/setup.py` & `translators-5.8.2/setup.py`

 * *Files 1% similar despite different names*

```diff
@@ -45,15 +45,15 @@
         "Programming Language :: Python :: 3.8",
         "Programming Language :: Python :: 3.9",
         "Programming Language :: Python :: 3.10",
         "Programming Language :: Python :: 3.11",
     ],
     keywords=[
         'translate', 'translate_text', 'translate_html',
-        'alibaba', 'apertium', 'argos', 'baidu', 'bing', 'caiyun', 'cloudYi', 'deepl', 'elia', 'google',
+        'alibaba', 'apertium', 'argos', 'baidu', 'bing', 'caiyun', 'cloudTranslation', 'deepl', 'elia', 'google',
         'iciba', 'iflytek', 'iflyrec', 'itranslate', 'judic', 'languageWire', 'lingvanex', 'mglip', 'mirai', 'modernMt',
         'myMemory', 'niutrans', 'papago', 'qqFanyi', 'qqTranSmart', 'reverso', 'sogou', 'sysTran', 'tilde', 'translateCom',
         'translateMe', 'utibet', 'volcEngine', 'yandex', 'yeekit', 'youdao',
     ],
     install_requires=[
         'requests>=2.29.0',
         'PyExecJS>=1.5.1',
```

### Comparing `translators-5.8.0/translators/server.py` & `translators-5.8.2/translators/server.py`

 * *Files 0% similar despite different names*

```diff
@@ -114,17458 +114,17852 @@
 00000710: 2027 7472 616e 736c 6174 655f 7465 7874   'translate_text
 00000720: 272c 2027 7472 616e 736c 6174 655f 6874  ', 'translate_ht
 00000730: 6d6c 272c 2027 7472 616e 736c 6174 6f72  ml', 'translator
 00000740: 735f 706f 6f6c 272c 0d0a 2020 2020 2761  s_pool',..    'a
 00000750: 6c69 6261 6261 272c 2027 6170 6572 7469  libaba', 'aperti
 00000760: 756d 272c 2027 6172 676f 7327 2c20 2762  um', 'argos', 'b
 00000770: 6169 6475 272c 2027 6269 6e67 272c 2027  aidu', 'bing', '
-00000780: 6361 6979 756e 272c 2027 636c 6f75 6459  caiyun', 'cloudY
-00000790: 6927 2c20 2764 6565 706c 272c 2027 656c  i', 'deepl', 'el
-000007a0: 6961 272c 2027 676f 6f67 6c65 272c 0d0a  ia', 'google',..
-000007b0: 2020 2020 2769 6369 6261 272c 2027 6966      'iciba', 'if
-000007c0: 6c79 7465 6b27 2c20 2769 666c 7972 6563  lytek', 'iflyrec
-000007d0: 272c 2027 6974 7261 6e73 6c61 7465 272c  ', 'itranslate',
-000007e0: 2027 6a75 6469 6327 2c20 276c 616e 6775   'judic', 'langu
-000007f0: 6167 6557 6972 6527 2c20 276c 696e 6776  ageWire', 'lingv
-00000800: 616e 6578 272c 2027 6d67 6c69 7027 2c20  anex', 'mglip', 
-00000810: 276d 6972 6169 272c 2027 6d6f 6465 726e  'mirai', 'modern
-00000820: 4d74 272c 0d0a 2020 2020 276d 794d 656d  Mt',..    'myMem
-00000830: 6f72 7927 2c20 276e 6975 7472 616e 7327  ory', 'niutrans'
-00000840: 2c20 2770 6170 6167 6f27 2c20 2771 7146  , 'papago', 'qqF
-00000850: 616e 7969 272c 2027 7171 5472 616e 536d  anyi', 'qqTranSm
-00000860: 6172 7427 2c20 2772 6576 6572 736f 272c  art', 'reverso',
-00000870: 2027 736f 676f 7527 2c20 2773 7973 5472   'sogou', 'sysTr
-00000880: 616e 272c 2027 7469 6c64 6527 2c20 2774  an', 'tilde', 't
-00000890: 7261 6e73 6c61 7465 436f 6d27 2c0d 0a20  ranslateCom',.. 
-000008a0: 2020 2027 7472 616e 736c 6174 654d 6527     'translateMe'
-000008b0: 2c20 2775 7469 6265 7427 2c20 2776 6f6c  , 'utibet', 'vol
-000008c0: 6345 6e67 696e 6527 2c20 2779 616e 6465  cEngine', 'yande
-000008d0: 7827 2c20 2779 6565 6b69 7427 2c20 2779  x', 'yeekit', 'y
-000008e0: 6f75 6461 6f27 2c0d 0a20 2020 2027 5f61  oudao',..    '_a
-000008f0: 6c69 6261 6261 272c 2027 5f61 7065 7274  libaba', '_apert
-00000900: 6975 6d27 2c20 275f 6172 676f 7327 2c20  ium', '_argos', 
-00000910: 275f 6261 6964 7527 2c20 275f 6269 6e67  '_baidu', '_bing
-00000920: 272c 2027 5f63 6169 7975 6e27 2c20 275f  ', '_caiyun', '_
-00000930: 636c 6f75 6459 6927 2c20 275f 6465 6570  cloudYi', '_deep
-00000940: 6c27 2c20 275f 656c 6961 272c 2027 5f67  l', '_elia', '_g
-00000950: 6f6f 676c 6527 2c0d 0a20 2020 2027 5f69  oogle',..    '_i
-00000960: 6369 6261 272c 2027 5f69 666c 7974 656b  ciba', '_iflytek
-00000970: 272c 2027 5f69 666c 7972 6563 272c 2027  ', '_iflyrec', '
-00000980: 5f69 7472 616e 736c 6174 6527 2c20 275f  _itranslate', '_
-00000990: 6a75 6469 6327 2c20 275f 6c61 6e67 7561  judic', '_langua
-000009a0: 6765 5769 7265 272c 2027 5f6c 696e 6776  geWire', '_lingv
-000009b0: 616e 6578 272c 2027 5f6d 676c 6970 272c  anex', '_mglip',
-000009c0: 2027 5f6d 6972 6169 272c 2027 5f6d 6f64   '_mirai', '_mod
-000009d0: 6572 6e4d 7427 2c0d 0a20 2020 2027 5f6d  ernMt',..    '_m
-000009e0: 794d 656d 6f72 7927 2c20 275f 6e69 7574  yMemory', '_niut
-000009f0: 7261 6e73 272c 2027 5f70 6170 6167 6f27  rans', '_papago'
-00000a00: 2c20 275f 7171 4661 6e79 6927 2c20 275f  , '_qqFanyi', '_
-00000a10: 7171 5472 616e 536d 6172 7427 2c20 275f  qqTranSmart', '_
-00000a20: 7265 7665 7273 6f27 2c20 275f 736f 676f  reverso', '_sogo
-00000a30: 7527 2c20 275f 7379 7354 7261 6e27 2c20  u', '_sysTran', 
-00000a40: 275f 7469 6c64 6527 2c20 275f 7472 616e  '_tilde', '_tran
-00000a50: 736c 6174 6543 6f6d 272c 0d0a 2020 2020  slateCom',..    
-00000a60: 275f 7472 616e 736c 6174 654d 6527 2c20  '_translateMe', 
-00000a70: 275f 7574 6962 6574 272c 2027 5f76 6f6c  '_utibet', '_vol
-00000a80: 6345 6e67 696e 6527 2c20 275f 7961 6e64  cEngine', '_yand
-00000a90: 6578 272c 2027 5f79 6565 6b69 7427 2c20  ex', '_yeekit', 
-00000aa0: 275f 796f 7564 616f 272c 0d0a 5d20 2023  '_youdao',..]  #
-00000ab0: 2033 360d 0a0d 0a0d 0a63 6c61 7373 2054   36......class T
-00000ac0: 7261 6e73 6c61 746f 7245 7272 6f72 2845  ranslatorError(E
-00000ad0: 7863 6570 7469 6f6e 293a 0d0a 2020 2020  xception):..    
-00000ae0: 7061 7373 0d0a 0d0a 0d0a 636c 6173 7320  pass......class 
-00000af0: 5473 653a 0d0a 2020 2020 6465 6620 5f5f  Tse:..    def __
-00000b00: 696e 6974 5f5f 2873 656c 6629 3a0d 0a20  init__(self):.. 
-00000b10: 2020 2020 2020 2073 656c 662e 6175 7468         self.auth
-00000b20: 6f72 203d 2027 556c 696f 6e2e 5473 6527  or = 'Ulion.Tse'
-00000b30: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00000b40: 6c6c 5f62 6567 696e 5f74 696d 6520 3d20  ll_begin_time = 
-00000b50: 7469 6d65 2e74 696d 6528 290d 0a20 2020  time.time()..   
-00000b60: 2020 2020 2073 656c 662e 6465 6661 756c       self.defaul
-00000b70: 745f 7365 7373 696f 6e5f 6672 6571 203d  t_session_freq =
-00000b80: 2069 6e74 2831 6533 290d 0a20 2020 2020   int(1e3)..     
-00000b90: 2020 2073 656c 662e 6465 6661 756c 745f     self.default_
-00000ba0: 7365 7373 696f 6e5f 7365 636f 6e64 7320  session_seconds 
-00000bb0: 3d20 312e 3565 330d 0a20 2020 2020 2020  = 1.5e3..       
-00000bc0: 2073 656c 662e 7472 616e 7366 6f72 6d5f   self.transform_
-00000bd0: 656e 5f74 7261 6e73 6c61 746f 725f 706f  en_translator_po
-00000be0: 6f6c 203d 2028 2769 7472 616e 736c 6174  ol = ('itranslat
-00000bf0: 6527 2c20 276c 696e 6776 616e 6578 272c  e', 'lingvanex',
-00000c00: 2027 6d79 4d65 6d6f 7279 272c 2027 6170   'myMemory', 'ap
-00000c10: 6572 7469 756d 272c 2027 636c 6f75 6459  ertium', 'cloudY
-00000c20: 6927 2c20 2774 7261 6e73 6c61 7465 4d65  i', 'translateMe
-00000c30: 2729 0d0a 2020 2020 2020 2020 7365 6c66  ')..        self
-00000c40: 2e61 7574 6f5f 706f 6f6c 203d 2028 2761  .auto_pool = ('a
-00000c50: 7574 6f27 2c20 2764 6574 6563 7427 2c20  uto', 'detect', 
-00000c60: 2761 7574 6f2d 6465 7465 6374 272c 2027  'auto-detect', '
-00000c70: 616c 6c27 290d 0a20 2020 2020 2020 2073  all')..        s
-00000c80: 656c 662e 7a68 5f70 6f6f 6c20 3d20 2827  elf.zh_pool = ('
-00000c90: 7a68 272c 2027 7a68 2d43 4e27 2c20 277a  zh', 'zh-CN', 'z
-00000ca0: 682d 636e 272c 2027 7a68 2d43 4853 272c  h-cn', 'zh-CHS',
-00000cb0: 2027 7a68 2d48 616e 7327 2c20 277a 682d   'zh-Hans', 'zh-
-00000cc0: 4861 6e73 5f43 4e27 2c20 2763 6e27 2c20  Hans_CN', 'cn', 
-00000cd0: 2763 6869 272c 2027 4368 696e 6573 6527  'chi', 'Chinese'
-00000ce0: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
-00000cf0: 6d65 7468 6f64 0d0a 2020 2020 6465 6620  method..    def 
-00000d00: 7469 6d65 5f73 7461 7428 6675 6e63 293a  time_stat(func):
-00000d10: 0d0a 2020 2020 2020 2020 4066 756e 6374  ..        @funct
-00000d20: 6f6f 6c73 2e77 7261 7073 2866 756e 6329  ools.wraps(func)
-00000d30: 0d0a 2020 2020 2020 2020 6465 6620 5f77  ..        def _w
-00000d40: 7261 7070 6572 282a 6172 6773 2c20 2a2a  rapper(*args, **
-00000d50: 6b77 6172 6773 293a 0d0a 2020 2020 2020  kwargs):..      
-00000d60: 2020 2020 2020 6966 5f73 686f 775f 7469        if_show_ti
-00000d70: 6d65 5f73 7461 7420 3d20 6b77 6172 6773  me_stat = kwargs
-00000d80: 2e67 6574 2827 6966 5f73 686f 775f 7469  .get('if_show_ti
-00000d90: 6d65 5f73 7461 7427 2c20 4661 6c73 6529  me_stat', False)
-00000da0: 0d0a 2020 2020 2020 2020 2020 2020 7368  ..            sh
-00000db0: 6f77 5f74 696d 655f 7374 6174 5f70 7265  ow_time_stat_pre
-00000dc0: 6369 7369 6f6e 203d 206b 7761 7267 732e  cision = kwargs.
-00000dd0: 6765 7428 2773 686f 775f 7469 6d65 5f73  get('show_time_s
-00000de0: 7461 745f 7072 6563 6973 696f 6e27 2c20  tat_precision', 
-00000df0: 3229 0d0a 2020 2020 2020 2020 2020 2020  2)..            
-00000e00: 736c 6565 705f 7365 636f 6e64 7320 3d20  sleep_seconds = 
-00000e10: 6b77 6172 6773 2e67 6574 2827 736c 6565  kwargs.get('slee
-00000e20: 705f 7365 636f 6e64 7327 2c20 3029 0d0a  p_seconds', 0)..
-00000e30: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00000e40: 2069 665f 7368 6f77 5f74 696d 655f 7374   if_show_time_st
-00000e50: 6174 2061 6e64 2073 6c65 6570 5f73 6563  at and sleep_sec
-00000e60: 6f6e 6473 203e 3d20 303a 0d0a 2020 2020  onds >= 0:..    
-00000e70: 2020 2020 2020 2020 2020 2020 7431 203d              t1 =
-00000e80: 2074 696d 652e 7469 6d65 2829 0d0a 2020   time.time()..  
-00000e90: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00000ea0: 7375 6c74 203d 2066 756e 6328 2a61 7267  sult = func(*arg
-00000eb0: 732c 202a 2a6b 7761 7267 7329 0d0a 2020  s, **kwargs)..  
-00000ec0: 2020 2020 2020 2020 2020 2020 2020 7432                t2
-00000ed0: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
-00000ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000ef0: 636f 7374 5f74 696d 6520 3d20 726f 756e  cost_time = roun
-00000f00: 6428 2874 3220 2d20 7431 202d 2073 6c65  d((t2 - t1 - sle
-00000f10: 6570 5f73 6563 6f6e 6473 292c 2073 686f  ep_seconds), sho
-00000f20: 775f 7469 6d65 5f73 7461 745f 7072 6563  w_time_stat_prec
-00000f30: 6973 696f 6e29 0d0a 2020 2020 2020 2020  ision)..        
-00000f40: 2020 2020 2020 2020 7379 732e 7374 6465          sys.stde
-00000f50: 7272 2e77 7269 7465 2866 2754 696d 6553  rr.write(f'TimeS
-00000f60: 7065 6e74 2866 756e 6374 696f 6e3a 207b  pent(function: {
-00000f70: 6675 6e63 2e5f 5f6e 616d 655f 5f5b 3a2d  func.__name__[:-
-00000f80: 345d 7d29 3a20 7b63 6f73 745f 7469 6d65  4]}): {cost_time
-00000f90: 7d73 5c6e 2729 0d0a 2020 2020 2020 2020  }s\n')..        
-00000fa0: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00000fb0: 6573 756c 740d 0a20 2020 2020 2020 2020  esult..         
-00000fc0: 2020 2072 6574 7572 6e20 6675 6e63 282a     return func(*
-00000fd0: 6172 6773 2c20 2a2a 6b77 6172 6773 290d  args, **kwargs).
-00000fe0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00000ff0: 5f77 7261 7070 6572 0d0a 0d0a 2020 2020  _wrapper....    
-00001000: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
-00001010: 2020 2064 6566 2067 6574 5f74 696d 6573     def get_times
-00001020: 7461 6d70 2829 202d 3e20 696e 743a 0d0a  tamp() -> int:..
-00001030: 2020 2020 2020 2020 7265 7475 726e 2069          return i
-00001040: 6e74 2874 696d 652e 7469 6d65 2829 202a  nt(time.time() *
-00001050: 2031 6533 290d 0a0d 0a20 2020 2040 7374   1e3)....    @st
-00001060: 6174 6963 6d65 7468 6f64 0d0a 2020 2020  aticmethod..    
-00001070: 6465 6620 6765 745f 6865 6164 6572 7328  def get_headers(
-00001080: 686f 7374 5f75 726c 3a20 7374 722c 0d0a  host_url: str,..
-00001090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000010a0: 2020 2020 6966 5f61 7069 3a20 626f 6f6c      if_api: bool
-000010b0: 203d 2046 616c 7365 2c0d 0a20 2020 2020   = False,..     
-000010c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000010d0: 665f 7265 6665 7265 725f 666f 725f 686f  f_referer_for_ho
-000010e0: 7374 3a20 626f 6f6c 203d 2054 7275 652c  st: bool = True,
-000010f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00001100: 2020 2020 2020 6966 5f61 6a61 785f 666f        if_ajax_fo
-00001110: 725f 6170 693a 2062 6f6f 6c20 3d20 5472  r_api: bool = Tr
-00001120: 7565 2c0d 0a20 2020 2020 2020 2020 2020  ue,..           
-00001130: 2020 2020 2020 2020 2069 665f 6a73 6f6e           if_json
-00001140: 5f66 6f72 5f61 7069 3a20 626f 6f6c 203d  _for_api: bool =
-00001150: 2046 616c 7365 2c0d 0a20 2020 2020 2020   False,..       
-00001160: 2020 2020 2020 2020 2020 2020 2069 665f               if_
-00001170: 6d75 6c74 6970 6172 745f 666f 725f 6170  multipart_for_ap
-00001180: 693a 2062 6f6f 6c20 3d20 4661 6c73 652c  i: bool = False,
-00001190: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000011a0: 2020 2020 2020 6966 5f68 7474 705f 6f76        if_http_ov
-000011b0: 6572 7269 6465 5f66 6f72 5f61 7069 3a20  erride_for_api: 
-000011c0: 626f 6f6c 203d 2046 616c 7365 0d0a 2020  bool = False..  
-000011d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000011e0: 2020 2920 2d3e 2064 6963 743a 0d0a 0d0a    ) -> dict:....
-000011f0: 2020 2020 2020 2020 7573 6572 5f61 6765          user_age
-00001200: 6e74 203d 2022 4d6f 7a69 6c6c 612f 352e  nt = "Mozilla/5.
-00001210: 3020 2857 696e 646f 7773 204e 5420 3130  0 (Windows NT 10
-00001220: 2e30 3b20 5769 6e36 343b 2078 3634 2920  .0; Win64; x64) 
-00001230: 4170 706c 6557 6562 4b69 742f 3533 372e  AppleWebKit/537.
-00001240: 3336 2028 4b48 544d 4c2c 206c 696b 6520  36 (KHTML, like 
-00001250: 4765 636b 6f29 2043 6872 6f6d 652f 3130  Gecko) Chrome/10
-00001260: 372e 302e 302e 3020 5361 6661 7269 2f35  7.0.0.0 Safari/5
-00001270: 3337 2e33 3622 0d0a 2020 2020 2020 2020  37.36"..        
-00001280: 7572 6c5f 7061 7468 203d 2075 726c 6c69  url_path = urlli
-00001290: 622e 7061 7273 652e 7572 6c70 6172 7365  b.parse.urlparse
-000012a0: 2868 6f73 745f 7572 6c2e 7374 7269 7028  (host_url.strip(
-000012b0: 272f 2729 292e 7061 7468 0d0a 2020 2020  '/')).path..    
-000012c0: 2020 2020 686f 7374 5f68 6561 6465 7273      host_headers
-000012d0: 203d 207b 0d0a 2020 2020 2020 2020 2020   = {..          
-000012e0: 2020 2752 6566 6572 6572 2720 6966 2069    'Referer' if i
-000012f0: 665f 7265 6665 7265 725f 666f 725f 686f  f_referer_for_ho
-00001300: 7374 2065 6c73 6520 2748 6f73 7427 3a20  st else 'Host': 
-00001310: 686f 7374 5f75 726c 2c0d 0a20 2020 2020  host_url,..     
-00001320: 2020 2020 2020 2022 5573 6572 2d41 6765         "User-Age
-00001330: 6e74 223a 2075 7365 725f 6167 656e 742c  nt": user_agent,
-00001340: 0d0a 2020 2020 2020 2020 7d0d 0a20 2020  ..        }..   
-00001350: 2020 2020 2061 7069 5f68 6561 6465 7273       api_headers
-00001360: 203d 207b 0d0a 2020 2020 2020 2020 2020   = {..          
-00001370: 2020 274f 7269 6769 6e27 3a20 686f 7374    'Origin': host
-00001380: 5f75 726c 2e73 706c 6974 2875 726c 5f70  _url.split(url_p
-00001390: 6174 6829 5b30 5d20 6966 2075 726c 5f70  ath)[0] if url_p
-000013a0: 6174 6820 656c 7365 2068 6f73 745f 7572  ath else host_ur
-000013b0: 6c2c 0d0a 2020 2020 2020 2020 2020 2020  l,..            
-000013c0: 2752 6566 6572 6572 273a 2068 6f73 745f  'Referer': host_
-000013d0: 7572 6c2c 0d0a 2020 2020 2020 2020 2020  url,..          
-000013e0: 2020 2758 2d52 6571 7565 7374 6564 2d57    'X-Requested-W
-000013f0: 6974 6827 3a20 2758 4d4c 4874 7470 5265  ith': 'XMLHttpRe
-00001400: 7175 6573 7427 2c0d 0a20 2020 2020 2020  quest',..       
-00001410: 2020 2020 2027 436f 6e74 656e 742d 5479       'Content-Ty
-00001420: 7065 273a 2027 6170 706c 6963 6174 696f  pe': 'applicatio
-00001430: 6e2f 782d 7777 772d 666f 726d 2d75 726c  n/x-www-form-url
-00001440: 656e 636f 6465 643b 2063 6861 7273 6574  encoded; charset
-00001450: 3d55 5446 2d38 272c 0d0a 2020 2020 2020  =UTF-8',..      
-00001460: 2020 2020 2020 2255 7365 722d 4167 656e        "User-Agen
-00001470: 7422 3a20 7573 6572 5f61 6765 6e74 2c0d  t": user_agent,.
-00001480: 0a20 2020 2020 2020 207d 0d0a 2020 2020  .        }..    
-00001490: 2020 2020 6966 2069 665f 6170 6920 616e      if if_api an
-000014a0: 6420 6e6f 7420 6966 5f61 6a61 785f 666f  d not if_ajax_fo
-000014b0: 725f 6170 693a 0d0a 2020 2020 2020 2020  r_api:..        
-000014c0: 2020 2020 6170 695f 6865 6164 6572 732e      api_headers.
-000014d0: 706f 7028 2758 2d52 6571 7565 7374 6564  pop('X-Requested
-000014e0: 2d57 6974 6827 290d 0a20 2020 2020 2020  -With')..       
-000014f0: 2020 2020 2061 7069 5f68 6561 6465 7273       api_headers
-00001500: 2e75 7064 6174 6528 7b27 436f 6e74 656e  .update({'Conten
-00001510: 742d 5479 7065 273a 2027 7465 7874 2f70  t-Type': 'text/p
-00001520: 6c61 696e 277d 290d 0a20 2020 2020 2020  lain'})..       
-00001530: 2069 6620 6966 5f61 7069 2061 6e64 2069   if if_api and i
-00001540: 665f 6a73 6f6e 5f66 6f72 5f61 7069 3a0d  f_json_for_api:.
-00001550: 0a20 2020 2020 2020 2020 2020 2061 7069  .            api
-00001560: 5f68 6561 6465 7273 2e75 7064 6174 6528  _headers.update(
-00001570: 7b27 436f 6e74 656e 742d 5479 7065 273a  {'Content-Type':
-00001580: 2027 6170 706c 6963 6174 696f 6e2f 6a73   'application/js
-00001590: 6f6e 277d 290d 0a20 2020 2020 2020 2069  on'})..        i
-000015a0: 6620 6966 5f61 7069 2061 6e64 2069 665f  f if_api and if_
-000015b0: 6d75 6c74 6970 6172 745f 666f 725f 6170  multipart_for_ap
-000015c0: 693a 0d0a 2020 2020 2020 2020 2020 2020  i:..            
-000015d0: 6170 695f 6865 6164 6572 732e 706f 7028  api_headers.pop(
-000015e0: 2743 6f6e 7465 6e74 2d54 7970 6527 290d  'Content-Type').
-000015f0: 0a20 2020 2020 2020 2069 6620 6966 5f61  .        if if_a
-00001600: 7069 2061 6e64 2069 665f 6874 7470 5f6f  pi and if_http_o
-00001610: 7665 7272 6964 655f 666f 725f 6170 693a  verride_for_api:
-00001620: 0d0a 2020 2020 2020 2020 2020 2020 6170  ..            ap
-00001630: 695f 6865 6164 6572 732e 7570 6461 7465  i_headers.update
-00001640: 287b 2758 2d48 5454 502d 4d65 7468 6f64  ({'X-HTTP-Method
-00001650: 2d4f 7665 7272 6964 6527 3a20 2747 4554  -Override': 'GET
-00001660: 277d 290d 0a20 2020 2020 2020 2072 6574  '})..        ret
-00001670: 7572 6e20 686f 7374 5f68 6561 6465 7273  urn host_headers
-00001680: 2069 6620 6e6f 7420 6966 5f61 7069 2065   if not if_api e
-00001690: 6c73 6520 6170 695f 6865 6164 6572 730d  lse api_headers.
-000016a0: 0a0d 0a20 2020 2064 6566 2063 6865 636b  ...    def check
-000016b0: 5f65 6e5f 6c61 6e67 2873 656c 662c 2066  _en_lang(self, f
-000016c0: 726f 6d5f 6c61 6e67 3a20 7374 722c 2074  rom_lang: str, t
-000016d0: 6f5f 6c61 6e67 3a20 7374 722c 2064 6566  o_lang: str, def
-000016e0: 6175 6c74 5f74 7261 6e73 6c61 746f 723a  ault_translator:
-000016f0: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
-00001700: 204e 6f6e 652c 2064 6566 6175 6c74 5f6c   None, default_l
-00001710: 616e 673a 2073 7472 203d 2027 656e 2d55  ang: str = 'en-U
-00001720: 5327 2920 2d3e 2054 7570 6c65 5b73 7472  S') -> Tuple[str
-00001730: 2c20 7374 725d 3a0d 0a20 2020 2020 2020  , str]:..       
-00001740: 2069 6620 6465 6661 756c 745f 7472 616e   if default_tran
-00001750: 736c 6174 6f72 2061 6e64 2064 6566 6175  slator and defau
-00001760: 6c74 5f74 7261 6e73 6c61 746f 7220 696e  lt_translator in
-00001770: 2073 656c 662e 7472 616e 7366 6f72 6d5f   self.transform_
-00001780: 656e 5f74 7261 6e73 6c61 746f 725f 706f  en_translator_po
-00001790: 6f6c 3a0d 0a20 2020 2020 2020 2020 2020  ol:..           
-000017a0: 2066 726f 6d5f 6c61 6e67 203d 2064 6566   from_lang = def
-000017b0: 6175 6c74 5f6c 616e 6720 6966 2066 726f  ault_lang if fro
-000017c0: 6d5f 6c61 6e67 203d 3d20 2765 6e27 2065  m_lang == 'en' e
-000017d0: 6c73 6520 6672 6f6d 5f6c 616e 670d 0a20  lse from_lang.. 
-000017e0: 2020 2020 2020 2020 2020 2074 6f5f 6c61             to_la
-000017f0: 6e67 203d 2064 6566 6175 6c74 5f6c 616e  ng = default_lan
-00001800: 6720 6966 2074 6f5f 6c61 6e67 203d 3d20  g if to_lang == 
-00001810: 2765 6e27 2065 6c73 6520 746f 5f6c 616e  'en' else to_lan
-00001820: 670d 0a20 2020 2020 2020 2020 2020 2066  g..            f
-00001830: 726f 6d5f 6c61 6e67 203d 2064 6566 6175  rom_lang = defau
-00001840: 6c74 5f6c 616e 672e 7265 706c 6163 6528  lt_lang.replace(
-00001850: 272d 272c 2027 5f27 2920 6966 2064 6566  '-', '_') if def
-00001860: 6175 6c74 5f74 7261 6e73 6c61 746f 7220  ault_translator 
-00001870: 3d3d 2027 6c69 6e67 7661 6e65 7827 2061  == 'lingvanex' a
-00001880: 6e64 2066 726f 6d5f 6c61 6e67 5b3a 335d  nd from_lang[:3]
-00001890: 203d 3d20 2765 6e2d 2720 656c 7365 2066   == 'en-' else f
-000018a0: 726f 6d5f 6c61 6e67 0d0a 2020 2020 2020  rom_lang..      
-000018b0: 2020 2020 2020 746f 5f6c 616e 6720 3d20        to_lang = 
-000018c0: 6465 6661 756c 745f 6c61 6e67 2e72 6570  default_lang.rep
-000018d0: 6c61 6365 2827 2d27 2c20 275f 2729 2069  lace('-', '_') i
-000018e0: 6620 6465 6661 756c 745f 7472 616e 736c  f default_transl
-000018f0: 6174 6f72 203d 3d20 276c 696e 6776 616e  ator == 'lingvan
-00001900: 6578 2720 616e 6420 746f 5f6c 616e 675b  ex' and to_lang[
-00001910: 3a33 5d20 3d3d 2027 656e 2d27 2065 6c73  :3] == 'en-' els
-00001920: 6520 746f 5f6c 616e 670d 0a20 2020 2020  e to_lang..     
-00001930: 2020 2072 6574 7572 6e20 6672 6f6d 5f6c     return from_l
-00001940: 616e 672c 2074 6f5f 6c61 6e67 0d0a 0d0a  ang, to_lang....
-00001950: 2020 2020 6465 6620 6368 6563 6b5f 6c61      def check_la
-00001960: 6e67 7561 6765 2873 656c 662c 0d0a 2020  nguage(self,..  
-00001970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001980: 2020 2020 2066 726f 6d5f 6c61 6e67 7561       from_langua
-00001990: 6765 3a20 7374 722c 0d0a 2020 2020 2020  ge: str,..      
-000019a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000019b0: 2074 6f5f 6c61 6e67 7561 6765 3a20 7374   to_language: st
-000019c0: 722c 0d0a 2020 2020 2020 2020 2020 2020  r,..            
-000019d0: 2020 2020 2020 2020 2020 206c 616e 6775             langu
-000019e0: 6167 655f 6d61 703a 2064 6963 742c 0d0a  age_map: dict,..
-000019f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001a00: 2020 2020 2020 206f 7574 7075 745f 6175         output_au
-00001a10: 746f 3a20 7374 7220 3d20 2761 7574 6f27  to: str = 'auto'
-00001a20: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00001a30: 2020 2020 2020 2020 2020 6f75 7470 7574            output
-00001a40: 5f7a 683a 2073 7472 203d 2027 7a68 272c  _zh: str = 'zh',
-00001a50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00001a60: 2020 2020 2020 2020 206f 7574 7075 745f           output_
-00001a70: 656e 5f74 7261 6e73 6c61 746f 723a 204f  en_translator: O
-00001a80: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
-00001a90: 6f6e 652c 0d0a 2020 2020 2020 2020 2020  one,..          
-00001aa0: 2020 2020 2020 2020 2020 2020 206f 7574               out
-00001ab0: 7075 745f 656e 3a20 7374 7220 3d20 2765  put_en: str = 'e
-00001ac0: 6e2d 5553 272c 0d0a 2020 2020 2020 2020  n-US',..        
-00001ad0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00001ae0: 665f 6368 6563 6b5f 6c61 6e67 5f72 6576  f_check_lang_rev
-00001af0: 6572 7365 3a20 626f 6f6c 203d 2054 7275  erse: bool = Tru
-00001b00: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-00001b10: 2020 2020 2020 2020 2020 2029 202d 3e20             ) -> 
-00001b20: 5475 706c 655b 7374 722c 2073 7472 5d3a  Tuple[str, str]:
-00001b30: 0d0a 0d0a 2020 2020 2020 2020 6966 206f  ....        if o
-00001b40: 7574 7075 745f 656e 5f74 7261 6e73 6c61  utput_en_transla
-00001b50: 746f 723a 0d0a 2020 2020 2020 2020 2020  tor:..          
-00001b60: 2020 6672 6f6d 5f6c 616e 6775 6167 652c    from_language,
-00001b70: 2074 6f5f 6c61 6e67 7561 6765 203d 2073   to_language = s
-00001b80: 656c 662e 6368 6563 6b5f 656e 5f6c 616e  elf.check_en_lan
-00001b90: 6728 6672 6f6d 5f6c 616e 6775 6167 652c  g(from_language,
-00001ba0: 2074 6f5f 6c61 6e67 7561 6765 2c20 6f75   to_language, ou
-00001bb0: 7470 7574 5f65 6e5f 7472 616e 736c 6174  tput_en_translat
-00001bc0: 6f72 2c20 6f75 7470 7574 5f65 6e29 0d0a  or, output_en)..
-00001bd0: 0d0a 2020 2020 2020 2020 6672 6f6d 5f6c  ..        from_l
-00001be0: 616e 6775 6167 6520 3d20 6f75 7470 7574  anguage = output
-00001bf0: 5f61 7574 6f20 6966 2066 726f 6d5f 6c61  _auto if from_la
-00001c00: 6e67 7561 6765 2069 6e20 7365 6c66 2e61  nguage in self.a
-00001c10: 7574 6f5f 706f 6f6c 2065 6c73 6520 6672  uto_pool else fr
-00001c20: 6f6d 5f6c 616e 6775 6167 650d 0a20 2020  om_language..   
-00001c30: 2020 2020 2066 726f 6d5f 6c61 6e67 7561       from_langua
-00001c40: 6765 203d 206f 7574 7075 745f 7a68 2069  ge = output_zh i
-00001c50: 6620 6672 6f6d 5f6c 616e 6775 6167 6520  f from_language 
-00001c60: 696e 2073 656c 662e 7a68 5f70 6f6f 6c20  in self.zh_pool 
-00001c70: 656c 7365 2066 726f 6d5f 6c61 6e67 7561  else from_langua
-00001c80: 6765 0d0a 2020 2020 2020 2020 746f 5f6c  ge..        to_l
-00001c90: 616e 6775 6167 6520 3d20 6f75 7470 7574  anguage = output
-00001ca0: 5f7a 6820 6966 2074 6f5f 6c61 6e67 7561  _zh if to_langua
-00001cb0: 6765 2069 6e20 7365 6c66 2e7a 685f 706f  ge in self.zh_po
-00001cc0: 6f6c 2065 6c73 6520 746f 5f6c 616e 6775  ol else to_langu
-00001cd0: 6167 650d 0a0d 0a20 2020 2020 2020 2069  age....        i
-00001ce0: 6620 6672 6f6d 5f6c 616e 6775 6167 6520  f from_language 
-00001cf0: 213d 206f 7574 7075 745f 6175 746f 2061  != output_auto a
-00001d00: 6e64 2066 726f 6d5f 6c61 6e67 7561 6765  nd from_language
-00001d10: 206e 6f74 2069 6e20 6c61 6e67 7561 6765   not in language
-00001d20: 5f6d 6170 3a0d 0a20 2020 2020 2020 2020  _map:..         
-00001d30: 2020 2072 6169 7365 2054 7261 6e73 6c61     raise Transla
-00001d40: 746f 7245 7272 6f72 2827 556e 7375 7070  torError('Unsupp
-00001d50: 6f72 7465 6420 6672 6f6d 5f6c 616e 6775  orted from_langu
-00001d60: 6167 655b 7b7d 5d20 696e 207b 7d2e 272e  age[{}] in {}.'.
-00001d70: 666f 726d 6174 2866 726f 6d5f 6c61 6e67  format(from_lang
-00001d80: 7561 6765 2c20 736f 7274 6564 286c 616e  uage, sorted(lan
-00001d90: 6775 6167 655f 6d61 702e 6b65 7973 2829  guage_map.keys()
-00001da0: 2929 290d 0a20 2020 2020 2020 2065 6c69  )))..        eli
-00001db0: 6620 746f 5f6c 616e 6775 6167 6520 6e6f  f to_language no
-00001dc0: 7420 696e 206c 616e 6775 6167 655f 6d61  t in language_ma
-00001dd0: 7020 616e 6420 6966 5f63 6865 636b 5f6c  p and if_check_l
-00001de0: 616e 675f 7265 7665 7273 653a 0d0a 2020  ang_reverse:..  
-00001df0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00001e00: 5472 616e 736c 6174 6f72 4572 726f 7228  TranslatorError(
-00001e10: 2755 6e73 7570 706f 7274 6564 2074 6f5f  'Unsupported to_
-00001e20: 6c61 6e67 7561 6765 5b7b 7d5d 2069 6e20  language[{}] in 
-00001e30: 7b7d 2e27 2e66 6f72 6d61 7428 746f 5f6c  {}.'.format(to_l
-00001e40: 616e 6775 6167 652c 2073 6f72 7465 6428  anguage, sorted(
-00001e50: 6c61 6e67 7561 6765 5f6d 6170 2e6b 6579  language_map.key
-00001e60: 7328 2929 2929 0d0a 2020 2020 2020 2020  s())))..        
-00001e70: 656c 6966 2066 726f 6d5f 6c61 6e67 7561  elif from_langua
-00001e80: 6765 2021 3d20 6f75 7470 7574 5f61 7574  ge != output_aut
-00001e90: 6f20 616e 6420 746f 5f6c 616e 6775 6167  o and to_languag
-00001ea0: 6520 6e6f 7420 696e 206c 616e 6775 6167  e not in languag
-00001eb0: 655f 6d61 705b 6672 6f6d 5f6c 616e 6775  e_map[from_langu
-00001ec0: 6167 655d 3a0d 0a20 2020 2020 2020 2020  age]:..         
-00001ed0: 2020 2072 6169 7365 2054 7261 6e73 6c61     raise Transla
-00001ee0: 746f 7245 7272 6f72 2827 556e 7375 7070  torError('Unsupp
-00001ef0: 6f72 7465 6420 7472 616e 736c 6174 696f  orted translatio
-00001f00: 6e3a 2066 726f 6d20 5b7b 307d 5d20 746f  n: from [{0}] to
-00001f10: 205b 7b31 7d5d 2127 2e66 6f72 6d61 7428   [{1}]!'.format(
-00001f20: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
-00001f30: 6f5f 6c61 6e67 7561 6765 2929 0d0a 2020  o_language))..  
-00001f40: 2020 2020 2020 656c 6966 2066 726f 6d5f        elif from_
-00001f50: 6c61 6e67 7561 6765 203d 3d20 746f 5f6c  language == to_l
-00001f60: 616e 6775 6167 653a 0d0a 2020 2020 2020  anguage:..      
-00001f70: 2020 2020 2020 7261 6973 6520 5472 616e        raise Tran
-00001f80: 736c 6174 6f72 4572 726f 7228 6627 6672  slatorError(f'fr
-00001f90: 6f6d 5f6c 616e 6775 6167 655b 7b66 726f  om_language[{fro
-00001fa0: 6d5f 6c61 6e67 7561 6765 7d5d 2061 6e64  m_language}] and
-00001fb0: 2074 6f5f 6c61 6e67 7561 6765 5b7b 746f   to_language[{to
-00001fc0: 5f6c 616e 6775 6167 657d 5d20 7368 6f75  _language}] shou
-00001fd0: 6c64 206e 6f74 2062 6520 7361 6d65 2e27  ld not be same.'
-00001fe0: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-00001ff0: 6e20 6672 6f6d 5f6c 616e 6775 6167 652c  n from_language,
-00002000: 2074 6f5f 6c61 6e67 7561 6765 0d0a 0d0a   to_language....
-00002010: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
-00002020: 640d 0a20 2020 2064 6566 2077 6172 6e69  d..    def warni
-00002030: 6e67 5f61 7574 6f5f 6c61 6e67 2874 7261  ng_auto_lang(tra
-00002040: 6e73 6c61 746f 723a 2073 7472 2c20 6465  nslator: str, de
-00002050: 6661 756c 745f 6672 6f6d 5f6c 616e 6775  fault_from_langu
-00002060: 6167 653a 2073 7472 2c20 6966 5f70 7269  age: str, if_pri
-00002070: 6e74 5f77 6172 6e69 6e67 3a20 626f 6f6c  nt_warning: bool
-00002080: 203d 2054 7275 6529 202d 3e20 7374 723a   = True) -> str:
-00002090: 0d0a 2020 2020 2020 2020 6966 2069 665f  ..        if if_
-000020a0: 7072 696e 745f 7761 726e 696e 673a 0d0a  print_warning:..
-000020b0: 2020 2020 2020 2020 2020 2020 7761 726e              warn
-000020c0: 5f74 6970 7320 3d20 6627 556e 7375 7070  _tips = f'Unsupp
-000020d0: 6f72 7465 6420 5b66 726f 6d5f 6c61 6e67  orted [from_lang
-000020e0: 7561 6765 3d61 7574 6f28 7b64 6566 6175  uage=auto({defau
-000020f0: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
-00002100: 7d20 696e 7374 6561 6429 5d20 7769 7468  } instead)] with
-00002110: 205b 7b74 7261 6e73 6c61 746f 727d 5d21   [{translator}]!
-00002120: 270d 0a20 2020 2020 2020 2020 2020 2077  '..            w
-00002130: 6172 6e69 6e67 732e 7761 726e 2866 277b  arnings.warn(f'{
-00002140: 7761 726e 5f74 6970 737d 2050 6c65 6173  warn_tips} Pleas
-00002150: 6520 7370 6563 6966 7920 6974 2e27 290d  e specify it.').
-00002160: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00002170: 6465 6661 756c 745f 6672 6f6d 5f6c 616e  default_from_lan
-00002180: 6775 6167 650d 0a0d 0a20 2020 2040 7374  guage....    @st
-00002190: 6174 6963 6d65 7468 6f64 0d0a 2020 2020  aticmethod..    
-000021a0: 6465 6620 6465 6275 675f 6c61 6e67 5f6b  def debug_lang_k
-000021b0: 7761 7267 7328 6672 6f6d 5f6c 616e 6775  wargs(from_langu
-000021c0: 6167 653a 2073 7472 2c20 746f 5f6c 616e  age: str, to_lan
-000021d0: 6775 6167 653a 2073 7472 2c20 6465 6661  guage: str, defa
-000021e0: 756c 745f 6672 6f6d 5f6c 616e 6775 6167  ult_from_languag
-000021f0: 653a 2073 7472 2c20 6966 5f70 7269 6e74  e: str, if_print
-00002200: 5f77 6172 6e69 6e67 3a20 626f 6f6c 203d  _warning: bool =
-00002210: 2054 7275 6529 202d 3e20 6469 6374 3a0d   True) -> dict:.
-00002220: 0a20 2020 2020 2020 206b 7761 7267 7320  .        kwargs 
-00002230: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
-00002240: 2027 6672 6f6d 5f6c 616e 6775 6167 6527   'from_language'
-00002250: 3a20 6672 6f6d 5f6c 616e 6775 6167 652c  : from_language,
-00002260: 0d0a 2020 2020 2020 2020 2020 2020 2774  ..            't
-00002270: 6f5f 6c61 6e67 7561 6765 273a 2074 6f5f  o_language': to_
-00002280: 6c61 6e67 7561 6765 2c0d 0a20 2020 2020  language,..     
-00002290: 2020 2020 2020 2027 6465 6661 756c 745f         'default_
-000022a0: 6672 6f6d 5f6c 616e 6775 6167 6527 3a20  from_language': 
-000022b0: 6465 6661 756c 745f 6672 6f6d 5f6c 616e  default_from_lan
-000022c0: 6775 6167 652c 0d0a 2020 2020 2020 2020  guage,..        
-000022d0: 2020 2020 2769 665f 7072 696e 745f 7761      'if_print_wa
-000022e0: 726e 696e 6727 3a20 6966 5f70 7269 6e74  rning': if_print
-000022f0: 5f77 6172 6e69 6e67 2c0d 0a20 2020 2020  _warning,..     
-00002300: 2020 207d 0d0a 2020 2020 2020 2020 7265     }..        re
-00002310: 7475 726e 206b 7761 7267 730d 0a0d 0a20  turn kwargs.... 
-00002320: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-00002330: 0d0a 2020 2020 6465 6620 6465 6275 675f  ..    def debug_
-00002340: 6c61 6e67 7561 6765 5f6d 6170 2866 756e  language_map(fun
-00002350: 6329 3a0d 0a20 2020 2020 2020 2064 6566  c):..        def
-00002360: 206d 616b 655f 7465 6d70 5f6c 616e 6775   make_temp_langu
-00002370: 6167 655f 6d61 7028 6672 6f6d 5f6c 616e  age_map(from_lan
-00002380: 6775 6167 653a 2073 7472 2c20 746f 5f6c  guage: str, to_l
-00002390: 616e 6775 6167 653a 2073 7472 2c20 6465  anguage: str, de
-000023a0: 6661 756c 745f 6672 6f6d 5f6c 616e 6775  fault_from_langu
-000023b0: 6167 653a 2073 7472 2920 2d3e 2064 6963  age: str) -> dic
-000023c0: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-000023d0: 6966 2066 726f 6d5f 6c61 6e67 7561 6765  if from_language
-000023e0: 203d 3d20 746f 5f6c 616e 6775 6167 6520   == to_language 
-000023f0: 6f72 2074 6f5f 6c61 6e67 7561 6765 203d  or to_language =
-00002400: 3d20 2761 7574 6f27 3a0d 0a20 2020 2020  = 'auto':..     
-00002410: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00002420: 2054 7261 6e73 6c61 746f 7245 7272 6f72   TranslatorError
-00002430: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00002440: 7465 6d70 5f6c 616e 6775 6167 655f 6d61  temp_language_ma
-00002450: 7020 3d20 7b66 726f 6d5f 6c61 6e67 7561  p = {from_langua
-00002460: 6765 3a20 746f 5f6c 616e 6775 6167 657d  ge: to_language}
-00002470: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00002480: 2066 726f 6d5f 6c61 6e67 7561 6765 2021   from_language !
-00002490: 3d20 2761 7574 6f27 3a0d 0a20 2020 2020  = 'auto':..     
-000024a0: 2020 2020 2020 2020 2020 2074 656d 705f             temp_
-000024b0: 6c61 6e67 7561 6765 5f6d 6170 2e75 7064  language_map.upd
-000024c0: 6174 6528 7b74 6f5f 6c61 6e67 7561 6765  ate({to_language
-000024d0: 3a20 6672 6f6d 5f6c 616e 6775 6167 657d  : from_language}
-000024e0: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
-000024f0: 6c69 6620 6465 6661 756c 745f 6672 6f6d  lif default_from
-00002500: 5f6c 616e 6775 6167 6520 213d 2074 6f5f  _language != to_
-00002510: 6c61 6e67 7561 6765 3a0d 0a20 2020 2020  language:..     
-00002520: 2020 2020 2020 2020 2020 2074 656d 705f             temp_
-00002530: 6c61 6e67 7561 6765 5f6d 6170 2e75 7064  language_map.upd
-00002540: 6174 6528 7b64 6566 6175 6c74 5f66 726f  ate({default_fro
-00002550: 6d5f 6c61 6e67 7561 6765 3a20 746f 5f6c  m_language: to_l
-00002560: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
-00002570: 7561 6765 3a20 6465 6661 756c 745f 6672  uage: default_fr
-00002580: 6f6d 5f6c 616e 6775 6167 657d 290d 0a0d  om_language})...
-00002590: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-000025a0: 7572 6e20 7465 6d70 5f6c 616e 6775 6167  urn temp_languag
-000025b0: 655f 6d61 700d 0a0d 0a20 2020 2020 2020  e_map....       
-000025c0: 2040 6675 6e63 746f 6f6c 732e 7772 6170   @functools.wrap
-000025d0: 7328 6675 6e63 290d 0a20 2020 2020 2020  s(func)..       
-000025e0: 2064 6566 205f 7772 6170 7065 7228 2a61   def _wrapper(*a
-000025f0: 7267 732c 202a 2a6b 7761 7267 7329 3a0d  rgs, **kwargs):.
-00002600: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
-00002610: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00002620: 2020 2072 6574 7572 6e20 6675 6e63 282a     return func(*
-00002630: 6172 6773 2c20 2a2a 6b77 6172 6773 290d  args, **kwargs).
-00002640: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
-00002650: 6570 7420 5472 616e 736c 6174 6f72 4572  ept TranslatorEr
-00002660: 726f 7220 6173 2065 3a0d 0a20 2020 2020  ror as e:..     
-00002670: 2020 2020 2020 2020 2020 2069 6620 6b77             if kw
-00002680: 6172 6773 2e67 6574 2827 6966 5f70 7269  args.get('if_pri
-00002690: 6e74 5f77 6172 6e69 6e67 272c 2054 7275  nt_warning', Tru
-000026a0: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
-000026b0: 2020 2020 2020 2020 2077 6172 6e69 6e67           warning
-000026c0: 732e 7761 726e 2866 2747 6574 4c61 6e67  s.warn(f'GetLang
-000026d0: 7561 6765 4d61 7045 7272 6f72 3a20 7b73  uageMapError: {s
-000026e0: 7472 2865 297d 2e5c 6e54 6865 2066 756e  tr(e)}.\nThe fun
-000026f0: 6374 696f 6e20 6d61 6b65 5f74 656d 705f  ction make_temp_
-00002700: 6c61 6e67 7561 6765 5f6d 6170 2829 2077  language_map() w
-00002710: 6f72 6b73 2e27 290d 0a20 2020 2020 2020  orks.')..       
-00002720: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00002730: 6d61 6b65 5f74 656d 705f 6c61 6e67 7561  make_temp_langua
-00002740: 6765 5f6d 6170 286b 7761 7267 732e 6765  ge_map(kwargs.ge
-00002750: 7428 2766 726f 6d5f 6c61 6e67 7561 6765  t('from_language
-00002760: 2729 2c20 6b77 6172 6773 2e67 6574 2827  '), kwargs.get('
-00002770: 746f 5f6c 616e 6775 6167 6527 292c 206b  to_language'), k
-00002780: 7761 7267 732e 6765 7428 2764 6566 6175  wargs.get('defau
-00002790: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
-000027a0: 2729 290d 0a20 2020 2020 2020 2072 6574  '))..        ret
-000027b0: 7572 6e20 5f77 7261 7070 6572 0d0a 2020  urn _wrapper..  
-000027c0: 2020 0d0a 2020 2020 4073 7461 7469 636d    ..    @staticm
-000027d0: 6574 686f 640d 0a20 2020 2064 6566 2063  ethod..    def c
-000027e0: 6865 636b 5f69 6e70 7574 5f6c 696d 6974  heck_input_limit
-000027f0: 2871 7565 7279 5f74 6578 743a 2073 7472  (query_text: str
-00002800: 2c20 696e 7075 745f 6c69 6d69 743a 2069  , input_limit: i
-00002810: 6e74 2920 2d3e 204e 6f6e 653a 0d0a 2020  nt) -> None:..  
-00002820: 2020 2020 2020 6966 206c 656e 2871 7565        if len(que
-00002830: 7279 5f74 6578 7429 203e 2069 6e70 7574  ry_text) > input
-00002840: 5f6c 696d 6974 3a0d 0a20 2020 2020 2020  _limit:..       
-00002850: 2020 2020 2072 6169 7365 2054 7261 6e73       raise Trans
-00002860: 6c61 746f 7245 7272 6f72 0d0a 0d0a 2020  latorError....  
-00002870: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
-00002880: 0a20 2020 2064 6566 2063 6865 636b 5f71  .    def check_q
-00002890: 7565 7279 2866 756e 6329 3a0d 0a20 2020  uery(func):..   
-000028a0: 2020 2020 2064 6566 2063 6865 636b 5f71       def check_q
-000028b0: 7565 7279 5f74 6578 7428 7175 6572 795f  uery_text(query_
-000028c0: 7465 7874 3a20 7374 722c 0d0a 2020 2020  text: str,..    
-000028d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000028e0: 2020 2020 2020 2020 2069 665f 6967 6e6f           if_igno
-000028f0: 7265 5f65 6d70 7479 5f71 7565 7279 3a20  re_empty_query: 
-00002900: 626f 6f6c 2c0d 0a20 2020 2020 2020 2020  bool,..         
-00002910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002920: 2020 2020 6966 5f69 676e 6f72 655f 6c69      if_ignore_li
-00002930: 6d69 745f 6f66 5f6c 656e 6774 683a 2062  mit_of_length: b
-00002940: 6f6f 6c2c 0d0a 2020 2020 2020 2020 2020  ool,..          
-00002950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002960: 2020 206c 696d 6974 5f6f 665f 6c65 6e67     limit_of_leng
-00002970: 7468 3a20 696e 740d 0a20 2020 2020 2020  th: int..       
-00002980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002990: 2020 2020 2020 2920 2d3e 2073 7472 3a0d        ) -> str:.
-000029a0: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
-000029b0: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
-000029c0: 2871 7565 7279 5f74 6578 742c 2073 7472  (query_text, str
-000029d0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-000029e0: 2020 2020 7261 6973 6520 5472 616e 736c      raise Transl
-000029f0: 6174 6f72 4572 726f 720d 0a0d 0a20 2020  atorError....   
-00002a00: 2020 2020 2020 2020 2071 7565 7279 5f74           query_t
-00002a10: 6578 7420 3d20 7175 6572 795f 7465 7874  ext = query_text
-00002a20: 2e73 7472 6970 2829 0d0a 2020 2020 2020  .strip()..      
-00002a30: 2020 2020 2020 7174 5f6c 656e 6774 6820        qt_length 
-00002a40: 3d20 6c65 6e28 7175 6572 795f 7465 7874  = len(query_text
-00002a50: 290d 0a20 2020 2020 2020 2020 2020 2069  )..            i
-00002a60: 6620 7174 5f6c 656e 6774 6820 3d3d 2030  f qt_length == 0
-00002a70: 2061 6e64 206e 6f74 2069 665f 6967 6e6f   and not if_igno
-00002a80: 7265 5f65 6d70 7479 5f71 7565 7279 3a0d  re_empty_query:.
-00002a90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002aa0: 2072 6169 7365 2054 7261 6e73 6c61 746f   raise Translato
-00002ab0: 7245 7272 6f72 2822 5468 6520 6071 7565  rError("The `que
-00002ac0: 7279 5f74 6578 7460 2063 616e 2774 2062  ry_text` can't b
-00002ad0: 6520 656d 7074 7921 2229 0d0a 2020 2020  e empty!")..    
-00002ae0: 2020 2020 2020 2020 6966 2071 745f 6c65          if qt_le
-00002af0: 6e67 7468 203e 3d20 6c69 6d69 745f 6f66  ngth >= limit_of
-00002b00: 5f6c 656e 6774 6820 616e 6420 6e6f 7420  _length and not 
-00002b10: 6966 5f69 676e 6f72 655f 6c69 6d69 745f  if_ignore_limit_
-00002b20: 6f66 5f6c 656e 6774 683a 0d0a 2020 2020  of_length:..    
-00002b30: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00002b40: 6520 5472 616e 736c 6174 6f72 4572 726f  e TranslatorErro
-00002b50: 7228 2754 6865 206c 656e 6774 6820 6f66  r('The length of
-00002b60: 2060 7175 6572 795f 7465 7874 6020 6578   `query_text` ex
-00002b70: 6365 6564 7320 7468 6520 6c69 6d69 742e  ceeds the limit.
-00002b80: 2729 0d0a 2020 2020 2020 2020 2020 2020  ')..            
-00002b90: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-00002ba0: 2020 2020 2020 2069 6620 7174 5f6c 656e         if qt_len
-00002bb0: 6774 6820 3e3d 206c 696d 6974 5f6f 665f  gth >= limit_of_
-00002bc0: 6c65 6e67 7468 3a0d 0a20 2020 2020 2020  length:..       
-00002bd0: 2020 2020 2020 2020 2020 2020 2077 6172               war
-00002be0: 6e69 6e67 732e 7761 726e 2866 2754 6865  nings.warn(f'The
-00002bf0: 206c 656e 6774 6820 6f66 2060 7175 6572   length of `quer
-00002c00: 795f 7465 7874 6020 6973 207b 7174 5f6c  y_text` is {qt_l
-00002c10: 656e 6774 687d 2c20 6162 6f76 6520 7b6c  ength}, above {l
-00002c20: 696d 6974 5f6f 665f 6c65 6e67 7468 7d2e  imit_of_length}.
-00002c30: 2729 0d0a 2020 2020 2020 2020 2020 2020  ')..            
-00002c40: 2020 2020 2020 2020 7265 7475 726e 2071          return q
-00002c50: 7565 7279 5f74 6578 745b 3a6c 696d 6974  uery_text[:limit
-00002c60: 5f6f 665f 6c65 6e67 7468 202d 2031 5d0d  _of_length - 1].
-00002c70: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00002c80: 7572 6e20 7175 6572 795f 7465 7874 0d0a  urn query_text..
-00002c90: 0d0a 2020 2020 2020 2020 4066 756e 6374  ..        @funct
-00002ca0: 6f6f 6c73 2e77 7261 7073 2866 756e 6329  ools.wraps(func)
-00002cb0: 0d0a 2020 2020 2020 2020 6465 6620 5f77  ..        def _w
-00002cc0: 7261 7070 6572 282a 6172 6773 2c20 2a2a  rapper(*args, **
-00002cd0: 6b77 6172 6773 293a 0d0a 2020 2020 2020  kwargs):..      
-00002ce0: 2020 2020 2020 6966 5f69 676e 6f72 655f        if_ignore_
-00002cf0: 656d 7074 795f 7175 6572 7920 3d20 6b77  empty_query = kw
-00002d00: 6172 6773 2e67 6574 2827 6966 5f69 676e  args.get('if_ign
-00002d10: 6f72 655f 656d 7074 795f 7175 6572 7927  ore_empty_query'
-00002d20: 2c20 4661 6c73 6529 0d0a 2020 2020 2020  , False)..      
-00002d30: 2020 2020 2020 6966 5f69 676e 6f72 655f        if_ignore_
-00002d40: 6c69 6d69 745f 6f66 5f6c 656e 6774 6820  limit_of_length 
-00002d50: 3d20 6b77 6172 6773 2e67 6574 2827 6966  = kwargs.get('if
-00002d60: 5f69 676e 6f72 655f 6c69 6d69 745f 6f66  _ignore_limit_of
-00002d70: 5f6c 656e 6774 6827 2c20 4661 6c73 6529  _length', False)
-00002d80: 0d0a 2020 2020 2020 2020 2020 2020 6c69  ..            li
-00002d90: 6d69 745f 6f66 5f6c 656e 6774 6820 3d20  mit_of_length = 
-00002da0: 6b77 6172 6773 2e67 6574 2827 6c69 6d69  kwargs.get('limi
-00002db0: 745f 6f66 5f6c 656e 6774 6827 2c20 3230  t_of_length', 20
-00002dc0: 3030 3029 0d0a 2020 2020 2020 2020 2020  000)..          
-00002dd0: 2020 6973 5f64 6574 6169 6c5f 7265 7375    is_detail_resu
-00002de0: 6c74 203d 206b 7761 7267 732e 6765 7428  lt = kwargs.get(
-00002df0: 2769 735f 6465 7461 696c 5f72 6573 756c  'is_detail_resul
-00002e00: 7427 2c20 4661 6c73 6529 0d0a 0d0a 2020  t', False)....  
-00002e10: 2020 2020 2020 2020 2020 7175 6572 795f            query_
-00002e20: 7465 7874 203d 206c 6973 7428 6172 6773  text = list(args
-00002e30: 295b 315d 2069 6620 6c65 6e28 6172 6773  )[1] if len(args
-00002e40: 2920 3e3d 2032 2065 6c73 6520 6b77 6172  ) >= 2 else kwar
-00002e50: 6773 2e67 6574 2827 7175 6572 795f 7465  gs.get('query_te
-00002e60: 7874 2729 0d0a 2020 2020 2020 2020 2020  xt')..          
-00002e70: 2020 7175 6572 795f 7465 7874 203d 2063    query_text = c
-00002e80: 6865 636b 5f71 7565 7279 5f74 6578 7428  heck_query_text(
-00002e90: 7175 6572 795f 7465 7874 2c20 6966 5f69  query_text, if_i
-00002ea0: 676e 6f72 655f 656d 7074 795f 7175 6572  gnore_empty_quer
-00002eb0: 792c 2069 665f 6967 6e6f 7265 5f6c 696d  y, if_ignore_lim
-00002ec0: 6974 5f6f 665f 6c65 6e67 7468 2c20 6c69  it_of_length, li
-00002ed0: 6d69 745f 6f66 5f6c 656e 6774 6829 0d0a  mit_of_length)..
-00002ee0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00002ef0: 6f74 2071 7565 7279 5f74 6578 7420 616e  ot query_text an
-00002f00: 6420 6966 5f69 676e 6f72 655f 656d 7074  d if_ignore_empt
-00002f10: 795f 7175 6572 793a 0d0a 2020 2020 2020  y_query:..      
-00002f20: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00002f30: 207b 2764 6174 6127 3a20 7175 6572 795f   {'data': query_
-00002f40: 7465 7874 7d20 6966 2069 735f 6465 7461  text} if is_deta
-00002f50: 696c 5f72 6573 756c 7420 656c 7365 2071  il_result else q
-00002f60: 7565 7279 5f74 6578 740d 0a0d 0a20 2020  uery_text....   
-00002f70: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
-00002f80: 6172 6773 2920 3e3d 2032 3a0d 0a20 2020  args) >= 2:..   
-00002f90: 2020 2020 2020 2020 2020 2020 206e 6577               new
-00002fa0: 5f61 7267 7320 3d20 6c69 7374 2861 7267  _args = list(arg
-00002fb0: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-00002fc0: 2020 2020 6e65 775f 6172 6773 5b31 5d20      new_args[1] 
-00002fd0: 3d20 7175 6572 795f 7465 7874 0d0a 2020  = query_text..  
-00002fe0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00002ff0: 7475 726e 2066 756e 6328 2a74 7570 6c65  turn func(*tuple
-00003000: 286e 6577 5f61 7267 7329 2c20 2a2a 6b77  (new_args), **kw
-00003010: 6172 6773 290d 0a20 2020 2020 2020 2020  args)..         
-00003020: 2020 2072 6574 7572 6e20 6675 6e63 282a     return func(*
-00003030: 6172 6773 2c20 2a2a 7b2a 2a6b 7761 7267  args, **{**kwarg
-00003040: 732c 202a 2a7b 2771 7565 7279 5f74 6578  s, **{'query_tex
-00003050: 7427 3a20 7175 6572 795f 7465 7874 7d7d  t': query_text}}
-00003060: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-00003070: 6e20 5f77 7261 7070 6572 0d0a 0d0a 2020  n _wrapper....  
-00003080: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
-00003090: 0a20 2020 2064 6566 2075 6e63 6572 7469  .    def uncerti
-000030a0: 6669 6564 2866 756e 6329 3a0d 0a20 2020  fied(func):..   
-000030b0: 2020 2020 2040 6675 6e63 746f 6f6c 732e       @functools.
-000030c0: 7772 6170 7328 6675 6e63 290d 0a20 2020  wraps(func)..   
-000030d0: 2020 2020 2064 6566 205f 7772 6170 7065       def _wrappe
-000030e0: 7228 2a61 7267 732c 202a 2a6b 7761 7267  r(*args, **kwarg
-000030f0: 7329 3a0d 0a20 2020 2020 2020 2020 2020  s):..           
-00003100: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00003110: 2020 2020 2020 2072 6574 7572 6e20 6675         return fu
-00003120: 6e63 282a 6172 6773 2c20 2a2a 6b77 6172  nc(*args, **kwar
-00003130: 6773 290d 0a20 2020 2020 2020 2020 2020  gs)..           
-00003140: 2065 7863 6570 743a 0d0a 2020 2020 2020   except:..      
-00003150: 2020 2020 2020 2020 2020 7261 6973 655f            raise_
-00003160: 7469 7073 3120 3d20 6627 5468 6520 6675  tips1 = f'The fu
-00003170: 6e63 7469 6f6e 207b 6675 6e63 2e5f 5f6e  nction {func.__n
-00003180: 616d 655f 5f5b 3a2d 345d 7d28 2920 6861  ame__[:-4]}() ha
-00003190: 7320 6265 656e 206e 6f74 2063 6572 7469  s been not certi
-000031a0: 6669 6564 2079 6574 2e27 0d0a 2020 2020  fied yet.'..    
-000031b0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-000031c0: 655f 7469 7073 325f 7572 6c20 3d20 2768  e_tips2_url = 'h
-000031d0: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-000031e0: 6d2f 556c 696f 6e54 7365 2f74 7261 6e73  m/UlionTse/trans
-000031f0: 6c61 746f 7273 2373 7570 706f 7274 6564  lators#supported
-00003200: 2d74 7261 6e73 6c61 7469 6f6e 2d73 6572  -translation-ser
-00003210: 7669 6365 7327 0d0a 2020 2020 2020 2020  vices'..        
-00003220: 2020 2020 2020 2020 7261 6973 655f 7469          raise_ti
-00003230: 7073 3220 3d20 6627 506c 6561 7365 2072  ps2 = f'Please r
-00003240: 6561 6420 666f 7220 6465 7461 696c 733a  ead for details:
-00003250: 2053 7461 7475 7320 6f66 2054 7261 6e73   Status of Trans
-00003260: 6c61 746f 7220 6f6e 2074 6869 7320 7765  lator on this we
-00003270: 6270 6167 6528 7b72 6169 7365 5f74 6970  bpage({raise_tip
-00003280: 7332 5f75 726c 7d29 2e27 0d0a 2020 2020  s2_url}).'..    
-00003290: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-000032a0: 6520 5472 616e 736c 6174 6f72 4572 726f  e TranslatorErro
-000032b0: 7228 6627 7b72 6169 7365 5f74 6970 7331  r(f'{raise_tips1
-000032c0: 7d20 7b72 6169 7365 5f74 6970 7332 7d27  } {raise_tips2}'
-000032d0: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-000032e0: 6e20 5f77 7261 7070 6572 0d0a 0d0a 2020  n _wrapper....  
-000032f0: 2020 2320 4073 7461 7469 636d 6574 686f    # @staticmetho
-00003300: 640d 0a20 2020 2023 2064 6566 2063 6572  d..    # def cer
-00003310: 7469 6669 6564 2866 756e 6329 3a0d 0a20  tified(func):.. 
-00003320: 2020 2023 2020 2020 2040 6675 6e63 746f     #     @functo
-00003330: 6f6c 732e 7772 6170 7328 6675 6e63 290d  ols.wraps(func).
-00003340: 0a20 2020 2023 2020 2020 2064 6566 205f  .    #     def _
-00003350: 7772 6170 7065 7228 2a61 7267 732c 202a  wrapper(*args, *
-00003360: 2a6b 7761 7267 7329 3a0d 0a20 2020 2023  *kwargs):..    #
-00003370: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
-00003380: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00003390: 2072 6574 7572 6e20 6675 6e63 282a 6172   return func(*ar
-000033a0: 6773 2c20 2a2a 6b77 6172 6773 290d 0a20  gs, **kwargs).. 
-000033b0: 2020 2023 2020 2020 2020 2020 2065 7863     #         exc
-000033c0: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-000033d0: 2065 3a0d 0a20 2020 2023 2020 2020 2020   e:..    #      
-000033e0: 2020 2020 2020 2072 6169 7365 2054 7261         raise Tra
-000033f0: 6e73 6c61 746f 7245 7272 6f72 2865 290d  nslatorError(e).
-00003400: 0a20 2020 2023 2020 2020 2072 6574 7572  .    #     retur
-00003410: 6e20 5f77 7261 7070 6572 0d0a 0d0a 0d0a  n _wrapper......
-00003420: 636c 6173 7320 4775 6573 7453 6576 6572  class GuestSever
-00003430: 5265 6769 6f6e 2854 7365 293a 0d0a 2020  Region(Tse):..  
-00003440: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
-00003450: 656c 6629 3a0d 0a20 2020 2020 2020 2073  elf):..        s
-00003460: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
-00003470: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00003480: 6765 745f 6164 6472 5f75 726c 203d 2027  get_addr_url = '
-00003490: 6874 7470 733a 2f2f 6765 6f6c 6f63 6174  https://geolocat
-000034a0: 696f 6e2e 6f6e 6574 7275 7374 2e63 6f6d  ion.onetrust.com
-000034b0: 2f63 6f6f 6b69 6563 6f6e 7365 6e74 7075  /cookieconsentpu
-000034c0: 622f 7631 2f67 656f 2f6c 6f63 6174 696f  b/v1/geo/locatio
-000034d0: 6e27 0d0a 2020 2020 2020 2020 7365 6c66  n'..        self
-000034e0: 2e67 6574 5f69 705f 7572 6c20 3d20 2768  .get_ip_url = 'h
-000034f0: 7474 7073 3a2f 2f68 7474 7062 696e 2e6f  ttps://httpbin.o
-00003500: 7267 2f69 7027 0d0a 2020 2020 2020 2020  rg/ip'..        
-00003510: 7365 6c66 2e69 705f 6170 695f 6164 6472  self.ip_api_addr
-00003520: 5f75 726c 203d 2027 6874 7470 3a2f 2f69  _url = 'http://i
-00003530: 702d 6170 692e 636f 6d2f 6a73 6f6e 2720  p-api.com/json' 
-00003540: 2023 206d 7573 7420 6874 7470 2e0d 0a20   # must http... 
-00003550: 2020 2020 2020 2073 656c 662e 6970 5f74         self.ip_t
-00003560: 625f 6164 645f 7572 6c20 3d20 2768 7474  b_add_url = 'htt
-00003570: 7073 3a2f 2f69 702e 7461 6f62 616f 2e63  ps://ip.taobao.c
-00003580: 6f6d 2f6f 7574 4765 7449 7049 6e66 6f27  om/outGetIpInfo'
-00003590: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
-000035a0: 6566 6175 6c74 5f72 6567 696f 6e20 3d20  efault_region = 
-000035b0: 6f73 2e65 6e76 6972 6f6e 2e67 6574 2827  os.environ.get('
-000035c0: 7472 616e 736c 6174 6f72 735f 6465 6661  translators_defa
-000035d0: 756c 745f 7265 6769 6f6e 272c 204e 6f6e  ult_region', Non
-000035e0: 6529 0d0a 0d0a 2020 2020 4070 726f 7065  e)....    @prope
-000035f0: 7274 790d 0a20 2020 2064 6566 2067 6574  rty..    def get
-00003600: 5f73 6572 7665 725f 7265 6769 6f6e 2873  _server_region(s
-00003610: 656c 662c 2069 665f 6a75 6467 655f 636e  elf, if_judge_cn
-00003620: 3a20 626f 6f6c 203d 2054 7275 6529 202d  : bool = True) -
-00003630: 3e20 7374 723a 0d0a 2020 2020 2020 2020  > str:..        
-00003640: 6966 2073 656c 662e 6465 6661 756c 745f  if self.default_
-00003650: 7265 6769 6f6e 3a0d 0a20 2020 2020 2020  region:..       
-00003660: 2020 2020 2073 7973 2e73 7464 6572 722e       sys.stderr.
-00003670: 7772 6974 6528 6627 5573 696e 6720 6375  write(f'Using cu
-00003680: 7374 6f6d 697a 6564 2072 6567 696f 6e20  stomized region 
-00003690: 7b73 656c 662e 6465 6661 756c 745f 7265  {self.default_re
-000036a0: 6769 6f6e 7d20 7365 7276 6572 2062 6163  gion} server bac
-000036b0: 6b65 6e64 2e5c 6e5c 6e27 290d 0a20 2020  kend.\n\n')..   
-000036c0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000036d0: 2827 434e 2720 6966 2073 656c 662e 6465  ('CN' if self.de
-000036e0: 6661 756c 745f 7265 6769 6f6e 203d 3d20  fault_region == 
-000036f0: 2743 6869 6e61 2720 656c 7365 2027 454e  'China' else 'EN
-00003700: 2729 2069 6620 6966 5f6a 7564 6765 5f63  ') if if_judge_c
-00003710: 6e20 656c 7365 2073 656c 662e 6465 6661  n else self.defa
-00003720: 756c 745f 7265 6769 6f6e 0d0a 0d0a 2020  ult_region....  
-00003730: 2020 2020 2020 5f68 6561 6465 7273 5f66        _headers_f
-00003740: 6e20 3d20 6c61 6d62 6461 2075 726c 3a20  n = lambda url: 
-00003750: 7365 6c66 2e67 6574 5f68 6561 6465 7273  self.get_headers
-00003760: 2875 726c 2c20 6966 5f61 7069 3d46 616c  (url, if_api=Fal
-00003770: 7365 2c20 6966 5f72 6566 6572 6572 5f66  se, if_referer_f
-00003780: 6f72 5f68 6f73 743d 5472 7565 290d 0a20  or_host=True).. 
-00003790: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-000037a0: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
-000037b0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-000037c0: 6174 6120 3d20 6a73 6f6e 2e6c 6f61 6473  ata = json.loads
-000037d0: 2872 6571 7565 7374 732e 6765 7428 7365  (requests.get(se
-000037e0: 6c66 2e67 6574 5f61 6464 725f 7572 6c2c  lf.get_addr_url,
-000037f0: 2068 6561 6465 7273 3d5f 6865 6164 6572   headers=_header
-00003800: 735f 666e 2873 656c 662e 6765 745f 6164  s_fn(self.get_ad
-00003810: 6472 5f75 726c 2929 2e74 6578 745b 393a  dr_url)).text[9:
-00003820: 2d32 5d29 0d0a 2020 2020 2020 2020 2020  -2])..          
-00003830: 2020 2020 2020 7379 732e 7374 6465 7272        sys.stderr
-00003840: 2e77 7269 7465 2866 2755 7369 6e67 2072  .write(f'Using r
-00003850: 6567 696f 6e20 7b64 6174 612e 6765 7428  egion {data.get(
-00003860: 2273 7461 7465 4e61 6d65 2229 7d20 7365  "stateName")} se
-00003870: 7276 6572 2062 6163 6b65 6e64 2e5c 6e5c  rver backend.\n\
-00003880: 6e27 290d 0a20 2020 2020 2020 2020 2020  n')..           
-00003890: 2020 2020 2072 6574 7572 6e20 6461 7461       return data
-000038a0: 2e67 6574 2827 636f 756e 7472 7927 2920  .get('country') 
-000038b0: 6966 2069 665f 6a75 6467 655f 636e 2065  if if_judge_cn e
-000038c0: 6c73 6520 6461 7461 2e67 6574 2822 7374  lse data.get("st
-000038d0: 6174 654e 616d 6522 290d 0a20 2020 2020  ateName")..     
-000038e0: 2020 2020 2020 2065 7863 6570 7420 7265         except re
-000038f0: 7175 6573 7473 2e65 7863 6570 7469 6f6e  quests.exception
-00003900: 732e 5469 6d65 6f75 743a 0d0a 2020 2020  s.Timeout:..    
-00003910: 2020 2020 2020 2020 2020 2020 6970 5f61              ip_a
-00003920: 6464 7265 7373 203d 2072 6571 7565 7374  ddress = request
-00003930: 732e 6765 7428 7365 6c66 2e67 6574 5f69  s.get(self.get_i
-00003940: 705f 7572 6c2c 2068 6561 6465 7273 3d5f  p_url, headers=_
-00003950: 6865 6164 6572 735f 666e 2873 656c 662e  headers_fn(self.
-00003960: 6765 745f 6970 5f75 726c 2929 2e6a 736f  get_ip_url)).jso
-00003970: 6e28 295b 276f 7269 6769 6e27 5d0d 0a20  n()['origin'].. 
-00003980: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00003990: 6179 6c6f 6164 203d 207b 2769 7027 3a20  ayload = {'ip': 
-000039a0: 6970 5f61 6464 7265 7373 2c20 2761 6363  ip_address, 'acc
-000039b0: 6573 734b 6579 273a 2027 616c 6962 6162  essKey': 'alibab
-000039c0: 612d 696e 6327 7d0d 0a20 2020 2020 2020  a-inc'}..       
-000039d0: 2020 2020 2020 2020 2064 6174 6120 3d20           data = 
-000039e0: 7265 7175 6573 7473 2e70 6f73 7428 7572  requests.post(ur
-000039f0: 6c3d 7365 6c66 2e69 705f 7462 5f61 6464  l=self.ip_tb_add
-00003a00: 5f75 726c 2c20 6461 7461 3d70 6179 6c6f  _url, data=paylo
-00003a10: 6164 2c20 6865 6164 6572 733d 5f68 6561  ad, headers=_hea
-00003a20: 6465 7273 5f66 6e28 7365 6c66 2e69 705f  ders_fn(self.ip_
-00003a30: 7462 5f61 6464 5f75 726c 2929 2e6a 736f  tb_add_url)).jso
-00003a40: 6e28 292e 6765 7428 2764 6174 6127 290d  n().get('data').
-00003a50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003a60: 2072 6574 7572 6e20 6461 7461 2e67 6574   return data.get
-00003a70: 2827 636f 756e 7472 795f 6964 2729 2020  ('country_id')  
-00003a80: 2320 7265 6769 6f6e 5f69 640d 0a0d 0a20  # region_id.... 
-00003a90: 2020 2020 2020 2065 7863 6570 7420 7265         except re
-00003aa0: 7175 6573 7473 2e65 7863 6570 7469 6f6e  quests.exception
-00003ab0: 732e 436f 6e6e 6563 7469 6f6e 4572 726f  s.ConnectionErro
-00003ac0: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
-00003ad0: 7261 6973 6520 5472 616e 736c 6174 6f72  raise Translator
-00003ae0: 4572 726f 7228 2755 6e61 626c 6520 746f  Error('Unable to
-00003af0: 2063 6f6e 6e65 6374 2074 6865 2049 6e74   connect the Int
-00003b00: 6572 6e65 742e 5c6e 5c6e 2729 0d0a 2020  ernet.\n\n')..  
-00003b10: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
-00003b20: 2020 2020 2020 2020 2020 2077 6172 6e69             warni
-00003b30: 6e67 732e 7761 726e 2827 556e 6162 6c65  ngs.warn('Unable
-00003b40: 2074 6f20 6669 6e64 2073 6572 7665 7220   to find server 
-00003b50: 6261 636b 656e 642e 5c6e 5c6e 2729 0d0a  backend.\n\n')..
-00003b60: 2020 2020 2020 2020 2020 2020 7265 6769              regi
-00003b70: 6f6e 203d 2069 6e70 7574 2827 506c 6561  on = input('Plea
-00003b80: 7365 2069 6e70 7574 2079 6f75 7220 7365  se input your se
-00003b90: 7276 6572 2072 6567 696f 6e20 6e65 6564  rver region need
-00003ba0: 2074 6f20 7669 7369 743a 5c6e 6567 3a20   to visit:\neg: 
-00003bb0: 5b51 6174 6172 2c20 4368 696e 612c 202e  [Qatar, China, .
-00003bc0: 2e2e 5d5c 6e5c 6e27 290d 0a20 2020 2020  ..]\n\n')..     
-00003bd0: 2020 2020 2020 2073 7973 2e73 7464 6572         sys.stder
-00003be0: 722e 7772 6974 6528 6627 5573 696e 6720  r.write(f'Using 
-00003bf0: 7265 6769 6f6e 207b 7265 6769 6f6e 7d20  region {region} 
-00003c00: 7365 7276 6572 2062 6163 6b65 6e64 2e5c  server backend.\
-00003c10: 6e5c 6e27 290d 0a20 2020 2020 2020 2020  n\n')..         
-00003c20: 2020 2072 6574 7572 6e20 2743 4e27 2069     return 'CN' i
-00003c30: 6620 7265 6769 6f6e 203d 3d20 2743 6869  f region == 'Chi
-00003c40: 6e61 2720 656c 7365 2027 454e 270d 0a0d  na' else 'EN'...
-00003c50: 0a0d 0a63 6c61 7373 2047 6f6f 676c 6556  ...class GoogleV
-00003c60: 3128 5473 6529 3a0d 0a20 2020 2064 6566  1(Tse):..    def
-00003c70: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
-00003c80: 7365 7276 6572 5f72 6567 696f 6e3d 2745  server_region='E
-00003c90: 4e27 293a 0d0a 2020 2020 2020 2020 7375  N'):..        su
-00003ca0: 7065 7228 292e 5f5f 696e 6974 5f5f 2829  per().__init__()
-00003cb0: 0d0a 2020 2020 2020 2020 7365 6c66 2e62  ..        self.b
-00003cc0: 6567 696e 5f74 696d 6520 3d20 7469 6d65  egin_time = time
-00003cd0: 2e74 696d 6528 290d 0a20 2020 2020 2020  .time()..       
-00003ce0: 2073 656c 662e 686f 7374 5f75 726c 203d   self.host_url =
-00003cf0: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
-00003d00: 656c 662e 636e 5f68 6f73 745f 7572 6c20  elf.cn_host_url 
-00003d10: 3d20 2768 7474 7073 3a2f 2f74 7261 6e73  = 'https://trans
-00003d20: 6c61 7465 2e67 6f6f 676c 652e 636e 270d  late.google.cn'.
-00003d30: 0a20 2020 2020 2020 2073 656c 662e 656e  .        self.en
-00003d40: 5f68 6f73 745f 7572 6c20 3d20 2768 7474  _host_url = 'htt
-00003d50: 7073 3a2f 2f74 7261 6e73 6c61 7465 2e67  ps://translate.g
-00003d60: 6f6f 676c 652e 636f 6d27 0d0a 2020 2020  oogle.com'..    
-00003d70: 2020 2020 7365 6c66 2e61 7069 5f75 726c      self.api_url
-00003d80: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
-00003d90: 2073 656c 662e 7365 7276 6572 5f72 6567   self.server_reg
-00003da0: 696f 6e20 3d20 7365 7276 6572 5f72 6567  ion = server_reg
-00003db0: 696f 6e0d 0a20 2020 2020 2020 2073 656c  ion..        sel
-00003dc0: 662e 686f 7374 5f68 6561 6465 7273 203d  f.host_headers =
-00003dd0: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
-00003de0: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
-00003df0: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
-00003e00: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
-00003e10: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-00003e20: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
-00003e30: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
-00003e40: 2e6f 7574 7075 745f 7a68 203d 2027 7a68  .output_zh = 'zh
-00003e50: 2d43 4e27 0d0a 2020 2020 2020 2020 7365  -CN'..        se
-00003e60: 6c66 2e69 6e70 7574 5f6c 696d 6974 203d  lf.input_limit =
-00003e70: 2069 6e74 2835 6533 290d 0a20 2020 2020   int(5e3)..     
-00003e80: 2020 2073 656c 662e 6465 6661 756c 745f     self.default_
-00003e90: 6672 6f6d 5f6c 616e 6775 6167 6520 3d20  from_language = 
-00003ea0: 7365 6c66 2e6f 7574 7075 745f 7a68 0d0a  self.output_zh..
-00003eb0: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
-00003ec0: 686f 640d 0a20 2020 2064 6566 205f 7872  hod..    def _xr
-00003ed0: 2861 3a20 696e 742c 2062 3a20 7374 7229  (a: int, b: str)
-00003ee0: 202d 3e20 696e 743a 0d0a 2020 2020 2020   -> int:..      
-00003ef0: 2020 7369 7a65 5f62 203d 206c 656e 2862    size_b = len(b
-00003f00: 290d 0a20 2020 2020 2020 2063 203d 2030  )..        c = 0
-00003f10: 0d0a 2020 2020 2020 2020 7768 696c 6520  ..        while 
-00003f20: 6320 3c20 7369 7a65 5f62 202d 2032 3a0d  c < size_b - 2:.
-00003f30: 0a20 2020 2020 2020 2020 2020 2064 203d  .            d =
-00003f40: 2062 5b63 202b 2032 5d0d 0a20 2020 2020   b[c + 2]..     
-00003f50: 2020 2020 2020 2064 203d 206f 7264 2864         d = ord(d
-00003f60: 5b30 5d29 202d 2038 3720 6966 2027 6127  [0]) - 87 if 'a'
-00003f70: 203c 3d20 6420 656c 7365 2069 6e74 2864   <= d else int(d
-00003f80: 290d 0a20 2020 2020 2020 2020 2020 2064  )..            d
-00003f90: 203d 2028 6120 2520 3220 2a2a 2033 3229   = (a % 2 ** 32)
-00003fa0: 203e 3e20 6420 6966 2027 2b27 203d 3d20   >> d if '+' == 
-00003fb0: 625b 6320 2b20 315d 2065 6c73 6520 6120  b[c + 1] else a 
-00003fc0: 3c3c 2064 0d0a 2020 2020 2020 2020 2020  << d..          
-00003fd0: 2020 6120 3d20 6120 2b20 6420 2620 2832    a = a + d & (2
-00003fe0: 202a 2a20 3332 202d 2031 2920 6966 2027   ** 32 - 1) if '
-00003ff0: 2b27 203d 3d20 625b 635d 2065 6c73 6520  +' == b[c] else 
-00004000: 6120 5e20 640d 0a20 2020 2020 2020 2020  a ^ d..         
-00004010: 2020 2063 202b 3d20 330d 0a20 2020 2020     c += 3..     
-00004020: 2020 2072 6574 7572 6e20 610d 0a0d 0a20     return a.... 
-00004030: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-00004040: 0d0a 2020 2020 6465 6620 5f69 6e74 7328  ..    def _ints(
-00004050: 7465 7874 3a20 7374 7229 202d 3e20 4c69  text: str) -> Li
-00004060: 7374 5b69 6e74 5d3a 0d0a 2020 2020 2020  st[int]:..      
-00004070: 2020 696e 7473 203d 205b 5d0d 0a20 2020    ints = []..   
-00004080: 2020 2020 2066 6f72 2076 2069 6e20 7465       for v in te
-00004090: 7874 3a0d 0a20 2020 2020 2020 2020 2020  xt:..           
-000040a0: 2069 6e74 5f76 203d 206f 7264 2876 290d   int_v = ord(v).
-000040b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000040c0: 696e 745f 7620 3c20 3220 2a2a 2031 363a  int_v < 2 ** 16:
-000040d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000040e0: 2020 696e 7473 2e61 7070 656e 6428 696e    ints.append(in
-000040f0: 745f 7629 0d0a 2020 2020 2020 2020 2020  t_v)..          
-00004100: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00004110: 2020 2020 2020 2020 2023 2075 6e69 636f           # unico
-00004120: 6465 2c20 656d 6f6a 690d 0a20 2020 2020  de, emoji..     
-00004130: 2020 2020 2020 2020 2020 2069 6e74 732e             ints.
-00004140: 6170 7065 6e64 2869 6e74 2828 696e 745f  append(int((int_
-00004150: 7620 2d20 3220 2a2a 2031 3629 202f 2032  v - 2 ** 16) / 2
-00004160: 202a 2a20 3130 202b 2035 3532 3936 2929   ** 10 + 55296))
-00004170: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00004180: 2020 696e 7473 2e61 7070 656e 6428 696e    ints.append(in
-00004190: 7428 2869 6e74 5f76 202d 2032 202a 2a20  t((int_v - 2 ** 
-000041a0: 3136 2920 2520 3220 2a2a 2031 3020 2b20  16) % 2 ** 10 + 
-000041b0: 3536 3332 3029 290d 0a20 2020 2020 2020  56320))..       
-000041c0: 2072 6574 7572 6e20 696e 7473 0d0a 0d0a   return ints....
-000041d0: 2020 2020 6465 6620 6163 7175 6972 6528      def acquire(
-000041e0: 7365 6c66 2c20 7465 7874 3a20 7374 722c  self, text: str,
-000041f0: 2074 6b6b 3a20 7374 7229 202d 3e20 7374   tkk: str) -> st
-00004200: 723a 0d0a 2020 2020 2020 2020 696e 7473  r:..        ints
-00004210: 203d 2073 656c 662e 5f69 6e74 7328 7465   = self._ints(te
-00004220: 7874 290d 0a20 2020 2020 2020 2073 697a  xt)..        siz
-00004230: 6520 3d20 6c65 6e28 696e 7473 290d 0a20  e = len(ints).. 
-00004240: 2020 2020 2020 2065 203d 205b 5d0d 0a20         e = [].. 
-00004250: 2020 2020 2020 2067 203d 2030 0d0a 0d0a         g = 0....
-00004260: 2020 2020 2020 2020 7768 696c 6520 6720          while g 
-00004270: 3c20 7369 7a65 3a0d 0a20 2020 2020 2020  < size:..       
-00004280: 2020 2020 206c 203d 2069 6e74 735b 675d       l = ints[g]
-00004290: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-000042a0: 206c 203c 2032 202a 2a20 373a 2020 2320   l < 2 ** 7:  # 
-000042b0: 3132 3828 6173 6369 6929 0d0a 2020 2020  128(ascii)..    
-000042c0: 2020 2020 2020 2020 2020 2020 652e 6170              e.ap
-000042d0: 7065 6e64 286c 290d 0a20 2020 2020 2020  pend(l)..       
-000042e0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-000042f0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-00004300: 203c 2032 202a 2a20 3131 3a20 2023 2032   < 2 ** 11:  # 2
-00004310: 3034 380d 0a20 2020 2020 2020 2020 2020  048..           
-00004320: 2020 2020 2020 2020 2065 2e61 7070 656e           e.appen
-00004330: 6428 6c20 3e3e 2036 207c 2031 3932 290d  d(l >> 6 | 192).
-00004340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004350: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00004360: 2020 2020 2020 2020 2020 2020 6966 2028              if (
-00004370: 6c20 2620 3634 3531 3229 203d 3d20 3535  l & 64512) == 55
-00004380: 3239 3620 616e 6420 6720 2b20 3120 3c20  296 and g + 1 < 
-00004390: 7369 7a65 2061 6e64 2069 6e74 735b 6720  size and ints[g 
-000043a0: 2b20 315d 2026 2036 3435 3132 203d 3d20  + 1] & 64512 == 
-000043b0: 3536 3332 303a 0d0a 2020 2020 2020 2020  56320:..        
-000043c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000043d0: 6720 2b3d 2031 0d0a 2020 2020 2020 2020  g += 1..        
-000043e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000043f0: 6c20 3d20 3635 3533 3620 2b20 2828 6c20  l = 65536 + ((l 
-00004400: 2620 3130 3233 2920 3c3c 2031 3029 202b  & 1023) << 10) +
-00004410: 2028 696e 7473 5b67 5d20 2620 3130 3233   (ints[g] & 1023
-00004420: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00004430: 2020 2020 2020 2020 2020 2065 2e61 7070             e.app
-00004440: 656e 6428 6c20 3e3e 2031 3820 7c20 3234  end(l >> 18 | 24
-00004450: 3029 0d0a 2020 2020 2020 2020 2020 2020  0)..            
-00004460: 2020 2020 2020 2020 2020 2020 652e 6170              e.ap
-00004470: 7065 6e64 286c 203e 3e20 3132 2026 2036  pend(l >> 12 & 6
-00004480: 3320 7c20 3132 3829 0d0a 2020 2020 2020  3 | 128)..      
-00004490: 2020 2020 2020 2020 2020 2020 2020 656c                el
-000044a0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-000044b0: 2020 2020 2020 2020 2020 2020 2065 2e61               e.a
-000044c0: 7070 656e 6428 6c20 3e3e 2031 3220 7c20  ppend(l >> 12 | 
-000044d0: 3232 3429 0d0a 2020 2020 2020 2020 2020  224)..          
-000044e0: 2020 2020 2020 2020 2020 652e 6170 7065            e.appe
-000044f0: 6e64 286c 203e 3e20 3620 2620 3633 207c  nd(l >> 6 & 63 |
-00004500: 2031 3238 290d 0a20 2020 2020 2020 2020   128)..         
-00004510: 2020 2020 2020 2065 2e61 7070 656e 6428         e.append(
-00004520: 6c20 2620 3633 207c 2031 3238 290d 0a20  l & 63 | 128).. 
-00004530: 2020 2020 2020 2020 2020 2067 202b 3d20             g += 
-00004540: 310d 0a0d 0a20 2020 2020 2020 2062 203d  1....        b =
-00004550: 2074 6b6b 2069 6620 746b 6b20 213d 2027   tkk if tkk != '
-00004560: 3027 2065 6c73 6520 2727 0d0a 2020 2020  0' else ''..    
-00004570: 2020 2020 6420 3d20 622e 7370 6c69 7428      d = b.split(
-00004580: 272e 2729 0d0a 2020 2020 2020 2020 6220  '.')..        b 
-00004590: 3d20 696e 7428 645b 305d 2920 6966 206c  = int(d[0]) if l
-000045a0: 656e 2864 2920 3e20 3120 656c 7365 2030  en(d) > 1 else 0
-000045b0: 0d0a 0d0a 2020 2020 2020 2020 6120 3d20  ....        a = 
-000045c0: 620d 0a20 2020 2020 2020 2066 6f72 2076  b..        for v
-000045d0: 616c 7565 2069 6e20 653a 0d0a 2020 2020  alue in e:..    
-000045e0: 2020 2020 2020 2020 6120 2b3d 2076 616c          a += val
-000045f0: 7565 0d0a 2020 2020 2020 2020 2020 2020  ue..            
-00004600: 6120 3d20 7365 6c66 2e5f 7872 2861 2c20  a = self._xr(a, 
-00004610: 272b 2d61 5e2b 3627 290d 0a20 2020 2020  '+-a^+6')..     
-00004620: 2020 2061 203d 2073 656c 662e 5f78 7228     a = self._xr(
-00004630: 612c 2027 2b2d 335e 2b62 2b2d 6627 290d  a, '+-3^+b+-f').
-00004640: 0a20 2020 2020 2020 2061 205e 3d20 696e  .        a ^= in
-00004650: 7428 645b 315d 2920 6966 206c 656e 2864  t(d[1]) if len(d
-00004660: 2920 3e20 3120 656c 7365 2030 0d0a 2020  ) > 1 else 0..  
-00004670: 2020 2020 2020 6966 2061 203c 2030 3a0d        if a < 0:.
-00004680: 0a20 2020 2020 2020 2020 2020 2061 203d  .            a =
-00004690: 2028 6120 2620 2832 202a 2a20 3331 202d   (a & (2 ** 31 -
-000046a0: 2031 2929 202b 2032 202a 2a20 3331 0d0a   1)) + 2 ** 31..
-000046b0: 2020 2020 2020 2020 6120 253d 2069 6e74          a %= int
-000046c0: 2831 4536 290d 0a20 2020 2020 2020 2072  (1E6)..        r
-000046d0: 6574 7572 6e20 277b 7d2e 7b7d 272e 666f  eturn '{}.{}'.fo
-000046e0: 726d 6174 2861 2c20 6120 5e20 6229 0d0a  rmat(a, a ^ b)..
-000046f0: 0d0a 2020 2020 4054 7365 2e64 6562 7567  ..    @Tse.debug
-00004700: 5f6c 616e 6775 6167 655f 6d61 700d 0a20  _language_map.. 
-00004710: 2020 2064 6566 2067 6574 5f6c 616e 6775     def get_langu
-00004720: 6167 655f 6d61 7028 7365 6c66 2c20 686f  age_map(self, ho
-00004730: 7374 5f68 746d 6c3a 2073 7472 2c20 2a2a  st_html: str, **
-00004740: 6b77 6172 6773 3a20 4c61 6e67 4d61 704b  kwargs: LangMapK
-00004750: 7761 7267 7354 7970 6529 202d 3e20 6469  wargsType) -> di
-00004760: 6374 3a0d 0a20 2020 2020 2020 2065 7420  ct:..        et 
-00004770: 3d20 6c78 6d6c 2e65 7472 6565 2e48 544d  = lxml.etree.HTM
-00004780: 4c28 686f 7374 5f68 746d 6c29 0d0a 2020  L(host_html)..  
-00004790: 2020 2020 2020 6c61 6e67 5f6c 6973 7420        lang_list 
-000047a0: 3d20 736f 7274 6564 286c 6973 7428 7365  = sorted(list(se
-000047b0: 7428 6574 2e78 7061 7468 2827 2f2f 2a2f  t(et.xpath('//*/
-000047c0: 4064 6174 612d 6c61 6e67 7561 6765 2d63  @data-language-c
-000047d0: 6f64 6527 2929 2929 0d0a 2020 2020 2020  ode'))))..      
-000047e0: 2020 7265 7475 726e 207b 7d2e 6672 6f6d    return {}.from
-000047f0: 6b65 7973 286c 616e 675f 6c69 7374 2c20  keys(lang_list, 
-00004800: 6c61 6e67 5f6c 6973 7429 0d0a 0d0a 2020  lang_list)....  
-00004810: 2020 6465 6620 6765 745f 746b 6b28 7365    def get_tkk(se
-00004820: 6c66 2c20 686f 7374 5f68 746d 6c3a 2073  lf, host_html: s
-00004830: 7472 2920 2d3e 2073 7472 3a0d 0a20 2020  tr) -> str:..   
-00004840: 2020 2020 2072 6574 7572 6e20 7265 2e63       return re.c
-00004850: 6f6d 7069 6c65 2822 746b 6b3a 2728 2e2a  ompile("tkk:'(.*
-00004860: 3f29 2722 292e 6669 6e64 616c 6c28 686f  ?)'").findall(ho
-00004870: 7374 5f68 746d 6c29 5b30 5d0d 0a0d 0a20  st_html)[0].... 
-00004880: 2020 2040 5473 652e 7469 6d65 5f73 7461     @Tse.time_sta
-00004890: 740d 0a20 2020 2040 5473 652e 6368 6563  t..    @Tse.chec
-000048a0: 6b5f 7175 6572 790d 0a20 2020 2064 6566  k_query..    def
-000048b0: 2067 6f6f 676c 655f 6170 6928 7365 6c66   google_api(self
-000048c0: 2c20 7175 6572 795f 7465 7874 3a20 7374  , query_text: st
-000048d0: 722c 2066 726f 6d5f 6c61 6e67 7561 6765  r, from_language
-000048e0: 3a20 7374 7220 3d20 2761 7574 6f27 2c20  : str = 'auto', 
-000048f0: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
-00004900: 203d 2027 656e 272c 202a 2a6b 7761 7267   = 'en', **kwarg
-00004910: 733a 2041 7069 4b77 6172 6773 5479 7065  s: ApiKwargsType
-00004920: 2920 2d3e 2055 6e69 6f6e 5b73 7472 2c20  ) -> Union[str, 
-00004930: 6469 6374 5d3a 0d0a 2020 2020 2020 2020  dict]:..        
-00004940: 2222 220d 0a20 2020 2020 2020 2068 7474  """..        htt
-00004950: 7073 3a2f 2f74 7261 6e73 6c61 7465 2e67  ps://translate.g
-00004960: 6f6f 676c 652e 636f 6d2c 2068 7474 7073  oogle.com, https
-00004970: 3a2f 2f74 7261 6e73 6c61 7465 2e67 6f6f  ://translate.goo
-00004980: 676c 652e 636e 2e0d 0a20 2020 2020 2020  gle.cn...       
-00004990: 203a 7061 7261 6d20 7175 6572 795f 7465   :param query_te
-000049a0: 7874 3a20 7374 722c 206d 7573 742e 0d0a  xt: str, must...
-000049b0: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
-000049c0: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
-000049d0: 722c 2064 6566 6175 6c74 2027 6175 746f  r, default 'auto
-000049e0: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
-000049f0: 616d 2074 6f5f 6c61 6e67 7561 6765 3a20  am to_language: 
-00004a00: 7374 722c 2064 6566 6175 6c74 2027 656e  str, default 'en
-00004a10: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
-00004a20: 616d 202a 2a6b 7761 7267 733a 0d0a 2020  am **kwargs:..  
-00004a30: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00004a40: 6172 616d 2074 696d 656f 7574 3a20 666c  aram timeout: fl
-00004a50: 6f61 742c 2064 6566 6175 6c74 204e 6f6e  oat, default Non
-00004a60: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-00004a70: 2020 2020 3a70 6172 616d 2070 726f 7869      :param proxi
-00004a80: 6573 3a20 6469 6374 2c20 6465 6661 756c  es: dict, defaul
-00004a90: 7420 4e6f 6e65 2e0d 0a20 2020 2020 2020  t None...       
-00004aa0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00004ab0: 736c 6565 705f 7365 636f 6e64 733a 2066  sleep_seconds: f
-00004ac0: 6c6f 6174 2c20 6465 6661 756c 7420 302e  loat, default 0.
-00004ad0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00004ae0: 2020 3a70 6172 616d 2069 735f 6465 7461    :param is_deta
-00004af0: 696c 5f72 6573 756c 743a 2062 6f6f 6c2c  il_result: bool,
-00004b00: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
-00004b10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004b20: 203a 7061 7261 6d20 6966 5f69 676e 6f72   :param if_ignor
-00004b30: 655f 6c69 6d69 745f 6f66 5f6c 656e 6774  e_limit_of_lengt
-00004b40: 683a 2062 6f6f 6c2c 2064 6566 6175 6c74  h: bool, default
-00004b50: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
-00004b60: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00004b70: 6c69 6d69 745f 6f66 5f6c 656e 6774 683a  limit_of_length:
-00004b80: 2069 6e74 2c20 6465 6661 756c 7420 3230   int, default 20
-00004b90: 3030 302e 0d0a 2020 2020 2020 2020 2020  000...          
-00004ba0: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
-00004bb0: 6967 6e6f 7265 5f65 6d70 7479 5f71 7565  ignore_empty_que
-00004bc0: 7279 3a20 626f 6f6c 2c20 6465 6661 756c  ry: bool, defaul
-00004bd0: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-00004be0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00004bf0: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-00004c00: 6166 7465 725f 6672 6571 3a20 696e 742c  after_freq: int,
-00004c10: 2064 6566 6175 6c74 2031 3030 302e 0d0a   default 1000...
-00004c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004c30: 3a70 6172 616d 2075 7064 6174 655f 7365  :param update_se
-00004c40: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
-00004c50: 6e64 733a 2066 6c6f 6174 2c20 6465 6661  nds: float, defa
-00004c60: 756c 7420 3135 3030 2e0d 0a20 2020 2020  ult 1500...     
-00004c70: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00004c80: 6d20 6966 5f73 686f 775f 7469 6d65 5f73  m if_show_time_s
-00004c90: 7461 743a 2062 6f6f 6c2c 2064 6566 6175  tat: bool, defau
-00004ca0: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
-00004cb0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00004cc0: 6d20 7368 6f77 5f74 696d 655f 7374 6174  m show_time_stat
-00004cd0: 5f70 7265 6369 7369 6f6e 3a20 696e 742c  _precision: int,
-00004ce0: 2064 6566 6175 6c74 2032 2e0d 0a20 2020   default 2...   
-00004cf0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00004d00: 7261 6d20 6966 5f70 7269 6e74 5f77 6172  ram if_print_war
-00004d10: 6e69 6e67 3a20 626f 6f6c 2c20 6465 6661  ning: bool, defa
-00004d20: 756c 7420 5472 7565 2e0d 0a20 2020 2020  ult True...     
-00004d30: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00004d40: 6d20 6966 5f75 7365 5f63 6e5f 686f 7374  m if_use_cn_host
-00004d50: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-00004d60: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
-00004d70: 2020 2020 2020 203a 7061 7261 6d20 7265         :param re
-00004d80: 7365 745f 686f 7374 5f75 726c 3a20 7374  set_host_url: st
-00004d90: 722c 2064 6566 6175 6c74 204e 6f6e 652e  r, default None.
-00004da0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00004db0: 2020 3a70 6172 616d 2069 665f 6368 6563    :param if_chec
-00004dc0: 6b5f 7265 7365 745f 686f 7374 5f75 726c  k_reset_host_url
-00004dd0: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-00004de0: 5472 7565 2e0d 0a20 2020 2020 2020 203a  True...        :
-00004df0: 7265 7475 726e 3a20 7374 7220 6f72 2064  return: str or d
-00004e00: 6963 740d 0a20 2020 2020 2020 2022 2222  ict..        """
-00004e10: 0d0a 0d0a 2020 2020 2020 2020 7265 7365  ....        rese
-00004e20: 745f 686f 7374 5f75 726c 203d 206b 7761  t_host_url = kwa
-00004e30: 7267 732e 6765 7428 2772 6573 6574 5f68  rgs.get('reset_h
-00004e40: 6f73 745f 7572 6c27 2c20 4e6f 6e65 290d  ost_url', None).
-00004e50: 0a20 2020 2020 2020 2069 6620 7265 7365  .        if rese
-00004e60: 745f 686f 7374 5f75 726c 2061 6e64 2072  t_host_url and r
-00004e70: 6573 6574 5f68 6f73 745f 7572 6c20 213d  eset_host_url !=
-00004e80: 2073 656c 662e 686f 7374 5f75 726c 3a0d   self.host_url:.
-00004e90: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00004ea0: 6b77 6172 6773 2e67 6574 2827 6966 5f63  kwargs.get('if_c
-00004eb0: 6865 636b 5f72 6573 6574 5f68 6f73 745f  heck_reset_host_
-00004ec0: 7572 6c27 2c20 5472 7565 2920 616e 6420  url', True) and 
-00004ed0: 6e6f 7420 7265 7365 745f 686f 7374 5f75  not reset_host_u
-00004ee0: 726c 5b3a 3235 5d20 3d3d 2027 6874 7470  rl[:25] == 'http
-00004ef0: 733a 2f2f 7472 616e 736c 6174 652e 676f  s://translate.go
-00004f00: 6f67 6c65 2e27 3a0d 0a20 2020 2020 2020  ogle.':..       
-00004f10: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
-00004f20: 7261 6e73 6c61 746f 7245 7272 6f72 0d0a  ranslatorError..
-00004f30: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00004f40: 2e68 6f73 745f 7572 6c20 3d20 7265 7365  .host_url = rese
-00004f50: 745f 686f 7374 5f75 726c 2e73 7472 6970  t_host_url.strip
-00004f60: 2827 2f27 290d 0a20 2020 2020 2020 2065  ('/')..        e
-00004f70: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00004f80: 2020 7573 655f 636e 5f63 6f6e 6469 7469    use_cn_conditi
-00004f90: 6f6e 203d 206b 7761 7267 732e 6765 7428  on = kwargs.get(
-00004fa0: 2769 665f 7573 655f 636e 5f68 6f73 7427  'if_use_cn_host'
-00004fb0: 2c20 4e6f 6e65 2920 6f72 2073 656c 662e  , None) or self.
-00004fc0: 7365 7276 6572 5f72 6567 696f 6e20 3d3d  server_region ==
-00004fd0: 2027 434e 270d 0a20 2020 2020 2020 2020   'CN'..         
-00004fe0: 2020 2073 656c 662e 686f 7374 5f75 726c     self.host_url
-00004ff0: 203d 2073 656c 662e 636e 5f68 6f73 745f   = self.cn_host_
-00005000: 7572 6c20 6966 2075 7365 5f63 6e5f 636f  url if use_cn_co
-00005010: 6e64 6974 696f 6e20 656c 7365 2073 656c  ndition else sel
-00005020: 662e 656e 5f68 6f73 745f 7572 6c0d 0a0d  f.en_host_url...
-00005030: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00005040: 2e68 6f73 745f 7572 6c5b 2d32 3a5d 203d  .host_url[-2:] =
-00005050: 3d20 2763 6e27 3a0d 0a20 2020 2020 2020  = 'cn':..       
-00005060: 2020 2020 2072 6169 7365 2054 7261 6e73       raise Trans
-00005070: 6c61 746f 7245 7272 6f72 2827 476f 6f67  latorError('Goog
-00005080: 6c65 2073 6572 7669 6365 2077 6173 206f  le service was o
-00005090: 6666 6c69 6e65 2069 6e20 696e 6c61 6e64  ffline in inland
-000050a0: 206f 6620 4368 696e 6120 6f6e 204f 6374   of China on Oct
-000050b0: 2032 3032 322e 2729 0d0a 0d0a 2020 2020   2022.')....    
-000050c0: 2020 2020 7365 6c66 2e68 6f73 745f 6865      self.host_he
-000050d0: 6164 6572 7320 3d20 7365 6c66 2e68 6f73  aders = self.hos
-000050e0: 745f 6865 6164 6572 7320 6f72 2073 656c  t_headers or sel
-000050f0: 662e 6765 745f 6865 6164 6572 7328 7365  f.get_headers(se
-00005100: 6c66 2e68 6f73 745f 7572 6c2c 2069 665f  lf.host_url, if_
-00005110: 6170 693d 4661 6c73 6529 0d0a 0d0a 2020  api=False)....  
-00005120: 2020 2020 2020 7469 6d65 6f75 7420 3d20        timeout = 
-00005130: 6b77 6172 6773 2e67 6574 2827 7469 6d65  kwargs.get('time
-00005140: 6f75 7427 2c20 4e6f 6e65 290d 0a20 2020  out', None)..   
-00005150: 2020 2020 2070 726f 7869 6573 203d 206b       proxies = k
-00005160: 7761 7267 732e 6765 7428 2770 726f 7869  wargs.get('proxi
-00005170: 6573 272c 204e 6f6e 6529 0d0a 2020 2020  es', None)..    
-00005180: 2020 2020 736c 6565 705f 7365 636f 6e64      sleep_second
-00005190: 7320 3d20 6b77 6172 6773 2e67 6574 2827  s = kwargs.get('
-000051a0: 736c 6565 705f 7365 636f 6e64 7327 2c20  sleep_seconds', 
-000051b0: 3029 0d0a 2020 2020 2020 2020 6966 5f70  0)..        if_p
-000051c0: 7269 6e74 5f77 6172 6e69 6e67 203d 206b  rint_warning = k
-000051d0: 7761 7267 732e 6765 7428 2769 665f 7072  wargs.get('if_pr
-000051e0: 696e 745f 7761 726e 696e 6727 2c20 5472  int_warning', Tr
-000051f0: 7565 290d 0a20 2020 2020 2020 2069 735f  ue)..        is_
-00005200: 6465 7461 696c 5f72 6573 756c 7420 3d20  detail_result = 
-00005210: 6b77 6172 6773 2e67 6574 2827 6973 5f64  kwargs.get('is_d
-00005220: 6574 6169 6c5f 7265 7375 6c74 272c 2046  etail_result', F
-00005230: 616c 7365 290d 0a20 2020 2020 2020 2075  alse)..        u
-00005240: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-00005250: 7465 725f 6672 6571 203d 206b 7761 7267  ter_freq = kwarg
-00005260: 732e 6765 7428 2775 7064 6174 655f 7365  s.get('update_se
-00005270: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
-00005280: 272c 2073 656c 662e 6465 6661 756c 745f  ', self.default_
-00005290: 7365 7373 696f 6e5f 6672 6571 290d 0a20  session_freq).. 
-000052a0: 2020 2020 2020 2075 7064 6174 655f 7365         update_se
-000052b0: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
-000052c0: 6e64 7320 3d20 6b77 6172 6773 2e67 6574  nds = kwargs.get
-000052d0: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
-000052e0: 5f61 6674 6572 5f73 6563 6f6e 6473 272c  _after_seconds',
-000052f0: 2073 656c 662e 6465 6661 756c 745f 7365   self.default_se
-00005300: 7373 696f 6e5f 7365 636f 6e64 7329 0d0a  ssion_seconds)..
-00005310: 2020 2020 2020 2020 7365 6c66 2e63 6865          self.che
-00005320: 636b 5f69 6e70 7574 5f6c 696d 6974 2871  ck_input_limit(q
-00005330: 7565 7279 5f74 6578 742c 2073 656c 662e  uery_text, self.
-00005340: 696e 7075 745f 6c69 6d69 7429 0d0a 0d0a  input_limit)....
-00005350: 2020 2020 2020 2020 6e6f 745f 7570 6461          not_upda
-00005360: 7465 5f63 6f6e 645f 6672 6571 203d 2031  te_cond_freq = 1
-00005370: 2069 6620 7365 6c66 2e71 7565 7279 5f63   if self.query_c
-00005380: 6f75 6e74 2025 2075 7064 6174 655f 7365  ount % update_se
-00005390: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
-000053a0: 2021 3d20 3020 656c 7365 2030 0d0a 2020   != 0 else 0..  
-000053b0: 2020 2020 2020 6e6f 745f 7570 6461 7465        not_update
-000053c0: 5f63 6f6e 645f 7469 6d65 203d 2031 2069  _cond_time = 1 i
-000053d0: 6620 7469 6d65 2e74 696d 6528 2920 2d20  f time.time() - 
-000053e0: 7365 6c66 2e62 6567 696e 5f74 696d 6520  self.begin_time 
-000053f0: 3c20 7570 6461 7465 5f73 6573 7369 6f6e  < update_session
-00005400: 5f61 6674 6572 5f73 6563 6f6e 6473 2065  _after_seconds e
-00005410: 6c73 6520 300d 0a20 2020 2020 2020 2069  lse 0..        i
-00005420: 6620 6e6f 7420 2873 656c 662e 7365 7373  f not (self.sess
-00005430: 696f 6e20 616e 6420 7365 6c66 2e6c 616e  ion and self.lan
-00005440: 6775 6167 655f 6d61 7020 616e 6420 6e6f  guage_map and no
-00005450: 745f 7570 6461 7465 5f63 6f6e 645f 6672  t_update_cond_fr
-00005460: 6571 2061 6e64 206e 6f74 5f75 7064 6174  eq and not_updat
-00005470: 655f 636f 6e64 5f74 696d 6520 616e 6420  e_cond_time and 
-00005480: 7365 6c66 2e61 7069 5f75 726c 293a 0d0a  self.api_url):..
-00005490: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000054a0: 2e62 6567 696e 5f74 696d 6520 3d20 7469  .begin_time = ti
-000054b0: 6d65 2e74 696d 6528 290d 0a20 2020 2020  me.time()..     
-000054c0: 2020 2020 2020 2073 656c 662e 7365 7373         self.sess
-000054d0: 696f 6e20 3d20 7265 7175 6573 7473 2e53  ion = requests.S
-000054e0: 6573 7369 6f6e 2829 0d0a 2020 2020 2020  ession()..      
-000054f0: 2020 2020 2020 686f 7374 5f68 746d 6c20        host_html 
-00005500: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e67  = self.session.g
-00005510: 6574 2873 656c 662e 686f 7374 5f75 726c  et(self.host_url
-00005520: 2c20 6865 6164 6572 733d 7365 6c66 2e68  , headers=self.h
-00005530: 6f73 745f 6865 6164 6572 732c 2074 696d  ost_headers, tim
-00005540: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
-00005550: 6f78 6965 733d 7072 6f78 6965 7329 2e74  oxies=proxies).t
-00005560: 6578 740d 0a0d 0a20 2020 2020 2020 2020  ext....         
-00005570: 2020 2064 6562 7567 5f6c 616e 675f 6b77     debug_lang_kw
-00005580: 6172 6773 203d 2073 656c 662e 6465 6275  args = self.debu
-00005590: 675f 6c61 6e67 5f6b 7761 7267 7328 6672  g_lang_kwargs(fr
-000055a0: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-000055b0: 6c61 6e67 7561 6765 2c20 7365 6c66 2e64  language, self.d
-000055c0: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
-000055d0: 7561 6765 2c20 6966 5f70 7269 6e74 5f77  uage, if_print_w
-000055e0: 6172 6e69 6e67 290d 0a20 2020 2020 2020  arning)..       
-000055f0: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-00005600: 6765 5f6d 6170 203d 2073 656c 662e 6765  ge_map = self.ge
-00005610: 745f 6c61 6e67 7561 6765 5f6d 6170 2868  t_language_map(h
-00005620: 6f73 745f 6874 6d6c 2c20 7365 6c66 2e73  ost_html, self.s
-00005630: 6573 7369 6f6e 2c20 7469 6d65 6f75 742c  ession, timeout,
-00005640: 2070 726f 7869 6573 2c20 2a2a 6465 6275   proxies, **debu
-00005650: 675f 6c61 6e67 5f6b 7761 7267 7329 0d0a  g_lang_kwargs)..
-00005660: 2020 2020 2020 2020 2020 2020 6672 6f6d              from
-00005670: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
-00005680: 6e67 7561 6765 203d 2073 656c 662e 6368  nguage = self.ch
-00005690: 6563 6b5f 6c61 6e67 7561 6765 2866 726f  eck_language(fro
-000056a0: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
-000056b0: 616e 6775 6167 652c 2073 656c 662e 6c61  anguage, self.la
-000056c0: 6e67 7561 6765 5f6d 6170 2c20 6f75 7470  nguage_map, outp
-000056d0: 7574 5f7a 683d 7365 6c66 2e6f 7574 7075  ut_zh=self.outpu
-000056e0: 745f 7a68 290d 0a0d 0a20 2020 2020 2020  t_zh)....       
-000056f0: 2020 2020 2074 6b6b 203d 2073 656c 662e       tkk = self.
-00005700: 6765 745f 746b 6b28 686f 7374 5f68 746d  get_tkk(host_htm
-00005710: 6c29 0d0a 2020 2020 2020 2020 2020 2020  l)..            
-00005720: 746b 203d 2073 656c 662e 6163 7175 6972  tk = self.acquir
-00005730: 6528 7175 6572 795f 7465 7874 2c20 746b  e(query_text, tk
-00005740: 6b29 0d0a 0d0a 2020 2020 2020 2020 2020  k)....          
-00005750: 2020 6170 695f 7572 6c5f 7061 7274 5f31    api_url_part_1
-00005760: 203d 2027 2f74 7261 6e73 6c61 7465 5f61   = '/translate_a
-00005770: 2f73 696e 676c 653f 636c 6965 6e74 3d7b  /single?client={
-00005780: 307d 2673 6c3d 7b31 7d26 746c 3d7b 327d  0}&sl={1}&tl={2}
-00005790: 2668 6c3d 7a68 2d43 4e26 6474 3d61 7426  &hl=zh-CN&dt=at&
-000057a0: 6474 3d62 6426 6474 3d65 7827 2e66 6f72  dt=bd&dt=ex'.for
-000057b0: 6d61 7428 2777 6562 6170 7027 2c20 6672  mat('webapp', fr
-000057c0: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-000057d0: 6c61 6e67 7561 6765 290d 0a20 2020 2020  language)..     
-000057e0: 2020 2020 2020 2061 7069 5f75 726c 5f70         api_url_p
-000057f0: 6172 745f 3220 3d20 2726 6474 3d6c 6426  art_2 = '&dt=ld&
-00005800: 6474 3d6d 6426 6474 3d71 6361 2664 743d  dt=md&dt=qca&dt=
-00005810: 7277 2664 743d 726d 2664 743d 7373 2664  rw&dt=rm&dt=ss&d
-00005820: 743d 7426 6965 3d55 5446 2d38 266f 653d  t=t&ie=UTF-8&oe=
-00005830: 5554 462d 3826 736f 7572 6365 3d62 6826  UTF-8&source=bh&
-00005840: 7373 656c 3d30 2674 7365 6c3d 3026 6b63  ssel=0&tsel=0&kc
-00005850: 3d31 270d 0a20 2020 2020 2020 2020 2020  =1'..           
-00005860: 2061 7069 5f75 726c 5f70 6172 745f 3320   api_url_part_3 
-00005870: 3d20 2726 746b 3d7b 307d 2671 3d7b 317d  = '&tk={0}&q={1}
-00005880: 272e 666f 726d 6174 2874 6b2c 2075 726c  '.format(tk, url
-00005890: 6c69 622e 7061 7273 652e 7175 6f74 6528  lib.parse.quote(
-000058a0: 7175 6572 795f 7465 7874 2929 0d0a 2020  query_text))..  
-000058b0: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-000058c0: 7069 5f75 726c 203d 2027 272e 6a6f 696e  pi_url = ''.join
-000058d0: 285b 7365 6c66 2e68 6f73 745f 7572 6c2c  ([self.host_url,
-000058e0: 2061 7069 5f75 726c 5f70 6172 745f 312c   api_url_part_1,
-000058f0: 2061 7069 5f75 726c 5f70 6172 745f 322c   api_url_part_2,
-00005900: 2061 7069 5f75 726c 5f70 6172 745f 335d   api_url_part_3]
-00005910: 2920 2023 205b 742c 7765 6261 7070 5d0d  )  # [t,webapp].
-00005920: 0a0d 0a20 2020 2020 2020 2072 203d 2073  ...        r = s
-00005930: 656c 662e 7365 7373 696f 6e2e 6765 7428  elf.session.get(
-00005940: 7365 6c66 2e61 7069 5f75 726c 2c20 6865  self.api_url, he
-00005950: 6164 6572 733d 7365 6c66 2e68 6f73 745f  aders=self.host_
-00005960: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
-00005970: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
-00005980: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
-00005990: 2020 2020 722e 7261 6973 655f 666f 725f      r.raise_for_
-000059a0: 7374 6174 7573 2829 0d0a 2020 2020 2020  status()..      
-000059b0: 2020 6461 7461 203d 2072 2e6a 736f 6e28    data = r.json(
-000059c0: 290d 0a20 2020 2020 2020 2074 696d 652e  )..        time.
-000059d0: 736c 6565 7028 736c 6565 705f 7365 636f  sleep(sleep_seco
-000059e0: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
-000059f0: 6c66 2e71 7565 7279 5f63 6f75 6e74 202b  lf.query_count +
-00005a00: 3d20 310d 0a20 2020 2020 2020 2072 6574  = 1..        ret
-00005a10: 7572 6e20 6461 7461 2069 6620 6973 5f64  urn data if is_d
-00005a20: 6574 6169 6c5f 7265 7375 6c74 2065 6c73  etail_result els
-00005a30: 6520 2727 2e6a 6f69 6e28 5b69 7465 6d5b  e ''.join([item[
-00005a40: 305d 2066 6f72 2069 7465 6d20 696e 2064  0] for item in d
-00005a50: 6174 615b 305d 2069 6620 6973 696e 7374  ata[0] if isinst
-00005a60: 616e 6365 2869 7465 6d5b 305d 2c20 7374  ance(item[0], st
-00005a70: 7229 5d29 0d0a 0d0a 0d0a 636c 6173 7320  r)])......class 
-00005a80: 476f 6f67 6c65 5632 2854 7365 293a 0d0a  GoogleV2(Tse):..
-00005a90: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-00005aa0: 2873 656c 662c 2073 6572 7665 725f 7265  (self, server_re
-00005ab0: 6769 6f6e 3d27 454e 2729 3a0d 0a20 2020  gion='EN'):..   
-00005ac0: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
-00005ad0: 6e69 745f 5f28 290d 0a20 2020 2020 2020  nit__()..       
-00005ae0: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
-00005af0: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
-00005b00: 2020 2020 2020 2020 7365 6c66 2e68 6f73          self.hos
-00005b10: 745f 7572 6c20 3d20 4e6f 6e65 0d0a 2020  t_url = None..  
-00005b20: 2020 2020 2020 7365 6c66 2e63 6e5f 686f        self.cn_ho
-00005b30: 7374 5f75 726c 203d 2027 6874 7470 733a  st_url = 'https:
-00005b40: 2f2f 7472 616e 736c 6174 652e 676f 6f67  //translate.goog
-00005b50: 6c65 2e63 6e27 0d0a 2020 2020 2020 2020  le.cn'..        
-00005b60: 7365 6c66 2e65 6e5f 686f 7374 5f75 726c  self.en_host_url
-00005b70: 203d 2027 6874 7470 733a 2f2f 7472 616e   = 'https://tran
-00005b80: 736c 6174 652e 676f 6f67 6c65 2e63 6f6d  slate.google.com
-00005b90: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
-00005ba0: 6170 695f 7572 6c20 3d20 4e6f 6e65 0d0a  api_url = None..
-00005bb0: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
-00005bc0: 5f75 726c 5f70 6174 6820 3d20 272f 5f2f  _url_path = '/_/
-00005bd0: 5472 616e 736c 6174 6557 6562 7365 7276  TranslateWebserv
-00005be0: 6572 5569 2f64 6174 612f 6261 7463 6865  erUi/data/batche
-00005bf0: 7865 6375 7465 270d 0a20 2020 2020 2020  xecute'..       
-00005c00: 2073 656c 662e 7365 7276 6572 5f72 6567   self.server_reg
-00005c10: 696f 6e20 3d20 7365 7276 6572 5f72 6567  ion = server_reg
-00005c20: 696f 6e0d 0a20 2020 2020 2020 2073 656c  ion..        sel
-00005c30: 662e 686f 7374 5f68 6561 6465 7273 203d  f.host_headers =
+00000780: 6361 6979 756e 272c 2027 636c 6f75 6454  caiyun', 'cloudT
+00000790: 7261 6e73 6c61 7469 6f6e 272c 2027 6465  ranslation', 'de
+000007a0: 6570 6c27 2c20 2765 6c69 6127 2c20 2767  epl', 'elia', 'g
+000007b0: 6f6f 676c 6527 2c0d 0a20 2020 2027 6963  oogle',..    'ic
+000007c0: 6962 6127 2c20 2769 666c 7974 656b 272c  iba', 'iflytek',
+000007d0: 2027 6966 6c79 7265 6327 2c20 2769 7472   'iflyrec', 'itr
+000007e0: 616e 736c 6174 6527 2c20 276a 7564 6963  anslate', 'judic
+000007f0: 272c 2027 6c61 6e67 7561 6765 5769 7265  ', 'languageWire
+00000800: 272c 2027 6c69 6e67 7661 6e65 7827 2c20  ', 'lingvanex', 
+00000810: 276d 676c 6970 272c 2027 6d69 7261 6927  'mglip', 'mirai'
+00000820: 2c20 276d 6f64 6572 6e4d 7427 2c0d 0a20  , 'modernMt',.. 
+00000830: 2020 2027 6d79 4d65 6d6f 7279 272c 2027     'myMemory', '
+00000840: 6e69 7574 7261 6e73 272c 2027 7061 7061  niutrans', 'papa
+00000850: 676f 272c 2027 7171 4661 6e79 6927 2c20  go', 'qqFanyi', 
+00000860: 2771 7154 7261 6e53 6d61 7274 272c 2027  'qqTranSmart', '
+00000870: 7265 7665 7273 6f27 2c20 2773 6f67 6f75  reverso', 'sogou
+00000880: 272c 2027 7379 7354 7261 6e27 2c20 2774  ', 'sysTran', 't
+00000890: 696c 6465 272c 2027 7472 616e 736c 6174  ilde', 'translat
+000008a0: 6543 6f6d 272c 0d0a 2020 2020 2774 7261  eCom',..    'tra
+000008b0: 6e73 6c61 7465 4d65 272c 2027 7574 6962  nslateMe', 'utib
+000008c0: 6574 272c 2027 766f 6c63 456e 6769 6e65  et', 'volcEngine
+000008d0: 272c 2027 7961 6e64 6578 272c 2027 7965  ', 'yandex', 'ye
+000008e0: 656b 6974 272c 2027 796f 7564 616f 272c  ekit', 'youdao',
+000008f0: 0d0a 2020 2020 275f 616c 6962 6162 6127  ..    '_alibaba'
+00000900: 2c20 275f 6170 6572 7469 756d 272c 2027  , '_apertium', '
+00000910: 5f61 7267 6f73 272c 2027 5f62 6169 6475  _argos', '_baidu
+00000920: 272c 2027 5f62 696e 6727 2c20 275f 6361  ', '_bing', '_ca
+00000930: 6979 756e 272c 2027 5f63 6c6f 7564 5472  iyun', '_cloudTr
+00000940: 616e 736c 6174 696f 6e27 2c20 275f 6465  anslation', '_de
+00000950: 6570 6c27 2c20 275f 656c 6961 272c 2027  epl', '_elia', '
+00000960: 5f67 6f6f 676c 6527 2c0d 0a20 2020 2027  _google',..    '
+00000970: 5f69 6369 6261 272c 2027 5f69 666c 7974  _iciba', '_iflyt
+00000980: 656b 272c 2027 5f69 666c 7972 6563 272c  ek', '_iflyrec',
+00000990: 2027 5f69 7472 616e 736c 6174 6527 2c20   '_itranslate', 
+000009a0: 275f 6a75 6469 6327 2c20 275f 6c61 6e67  '_judic', '_lang
+000009b0: 7561 6765 5769 7265 272c 2027 5f6c 696e  uageWire', '_lin
+000009c0: 6776 616e 6578 272c 2027 5f6d 676c 6970  gvanex', '_mglip
+000009d0: 272c 2027 5f6d 6972 6169 272c 2027 5f6d  ', '_mirai', '_m
+000009e0: 6f64 6572 6e4d 7427 2c0d 0a20 2020 2027  odernMt',..    '
+000009f0: 5f6d 794d 656d 6f72 7927 2c20 275f 6e69  _myMemory', '_ni
+00000a00: 7574 7261 6e73 272c 2027 5f70 6170 6167  utrans', '_papag
+00000a10: 6f27 2c20 275f 7171 4661 6e79 6927 2c20  o', '_qqFanyi', 
+00000a20: 275f 7171 5472 616e 536d 6172 7427 2c20  '_qqTranSmart', 
+00000a30: 275f 7265 7665 7273 6f27 2c20 275f 736f  '_reverso', '_so
+00000a40: 676f 7527 2c20 275f 7379 7354 7261 6e27  gou', '_sysTran'
+00000a50: 2c20 275f 7469 6c64 6527 2c20 275f 7472  , '_tilde', '_tr
+00000a60: 616e 736c 6174 6543 6f6d 272c 0d0a 2020  anslateCom',..  
+00000a70: 2020 275f 7472 616e 736c 6174 654d 6527    '_translateMe'
+00000a80: 2c20 275f 7574 6962 6574 272c 2027 5f76  , '_utibet', '_v
+00000a90: 6f6c 6345 6e67 696e 6527 2c20 275f 7961  olcEngine', '_ya
+00000aa0: 6e64 6578 272c 2027 5f79 6565 6b69 7427  ndex', '_yeekit'
+00000ab0: 2c20 275f 796f 7564 616f 272c 0d0a 5d20  , '_youdao',..] 
+00000ac0: 2023 2033 360d 0a0d 0a0d 0a63 6c61 7373   # 36......class
+00000ad0: 2054 7261 6e73 6c61 746f 7245 7272 6f72   TranslatorError
+00000ae0: 2845 7863 6570 7469 6f6e 293a 0d0a 2020  (Exception):..  
+00000af0: 2020 7061 7373 0d0a 0d0a 0d0a 636c 6173    pass......clas
+00000b00: 7320 5473 653a 0d0a 2020 2020 6465 6620  s Tse:..    def 
+00000b10: 5f5f 696e 6974 5f5f 2873 656c 6629 3a0d  __init__(self):.
+00000b20: 0a20 2020 2020 2020 2073 656c 662e 6175  .        self.au
+00000b30: 7468 6f72 203d 2027 556c 696f 6e2e 5473  thor = 'Ulion.Ts
+00000b40: 6527 0d0a 2020 2020 2020 2020 7365 6c66  e'..        self
+00000b50: 2e61 6c6c 5f62 6567 696e 5f74 696d 6520  .all_begin_time 
+00000b60: 3d20 7469 6d65 2e74 696d 6528 290d 0a20  = time.time().. 
+00000b70: 2020 2020 2020 2073 656c 662e 6465 6661         self.defa
+00000b80: 756c 745f 7365 7373 696f 6e5f 6672 6571  ult_session_freq
+00000b90: 203d 2069 6e74 2831 6533 290d 0a20 2020   = int(1e3)..   
+00000ba0: 2020 2020 2073 656c 662e 6465 6661 756c       self.defaul
+00000bb0: 745f 7365 7373 696f 6e5f 7365 636f 6e64  t_session_second
+00000bc0: 7320 3d20 312e 3565 330d 0a20 2020 2020  s = 1.5e3..     
+00000bd0: 2020 2073 656c 662e 7472 616e 7366 6f72     self.transfor
+00000be0: 6d5f 656e 5f74 7261 6e73 6c61 746f 725f  m_en_translator_
+00000bf0: 706f 6f6c 203d 2028 2769 7472 616e 736c  pool = ('itransl
+00000c00: 6174 6527 2c20 276c 696e 6776 616e 6578  ate', 'lingvanex
+00000c10: 272c 2027 6d79 4d65 6d6f 7279 272c 2027  ', 'myMemory', '
+00000c20: 6170 6572 7469 756d 272c 2027 636c 6f75  apertium', 'clou
+00000c30: 6454 7261 6e73 6c61 7469 6f6e 272c 2027  dTranslation', '
+00000c40: 7472 616e 736c 6174 654d 6527 290d 0a20  translateMe').. 
+00000c50: 2020 2020 2020 2073 656c 662e 6175 746f         self.auto
+00000c60: 5f70 6f6f 6c20 3d20 2827 6175 746f 272c  _pool = ('auto',
+00000c70: 2027 6465 7465 6374 272c 2027 6175 746f   'detect', 'auto
+00000c80: 2d64 6574 6563 7427 2c20 2761 6c6c 2729  -detect', 'all')
+00000c90: 0d0a 2020 2020 2020 2020 7365 6c66 2e7a  ..        self.z
+00000ca0: 685f 706f 6f6c 203d 2028 277a 6827 2c20  h_pool = ('zh', 
+00000cb0: 277a 682d 434e 272c 2027 7a68 2d63 6e27  'zh-CN', 'zh-cn'
+00000cc0: 2c20 277a 682d 4348 5327 2c20 277a 682d  , 'zh-CHS', 'zh-
+00000cd0: 4861 6e73 272c 2027 7a68 2d48 616e 735f  Hans', 'zh-Hans_
+00000ce0: 434e 272c 2027 636e 272c 2027 6368 6927  CN', 'cn', 'chi'
+00000cf0: 2c20 2743 6869 6e65 7365 2729 0d0a 0d0a  , 'Chinese')....
+00000d00: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
+00000d10: 640d 0a20 2020 2064 6566 2074 696d 655f  d..    def time_
+00000d20: 7374 6174 2866 756e 6329 3a0d 0a20 2020  stat(func):..   
+00000d30: 2020 2020 2040 6675 6e63 746f 6f6c 732e       @functools.
+00000d40: 7772 6170 7328 6675 6e63 290d 0a20 2020  wraps(func)..   
+00000d50: 2020 2020 2064 6566 205f 7772 6170 7065       def _wrappe
+00000d60: 7228 2a61 7267 732c 202a 2a6b 7761 7267  r(*args, **kwarg
+00000d70: 7329 3a0d 0a20 2020 2020 2020 2020 2020  s):..           
+00000d80: 2069 665f 7368 6f77 5f74 696d 655f 7374   if_show_time_st
+00000d90: 6174 203d 206b 7761 7267 732e 6765 7428  at = kwargs.get(
+00000da0: 2769 665f 7368 6f77 5f74 696d 655f 7374  'if_show_time_st
+00000db0: 6174 272c 2046 616c 7365 290d 0a20 2020  at', False)..   
+00000dc0: 2020 2020 2020 2020 2073 686f 775f 7469           show_ti
+00000dd0: 6d65 5f73 7461 745f 7072 6563 6973 696f  me_stat_precisio
+00000de0: 6e20 3d20 6b77 6172 6773 2e67 6574 2827  n = kwargs.get('
+00000df0: 7368 6f77 5f74 696d 655f 7374 6174 5f70  show_time_stat_p
+00000e00: 7265 6369 7369 6f6e 272c 2032 290d 0a20  recision', 2).. 
+00000e10: 2020 2020 2020 2020 2020 2073 6c65 6570             sleep
+00000e20: 5f73 6563 6f6e 6473 203d 206b 7761 7267  _seconds = kwarg
+00000e30: 732e 6765 7428 2773 6c65 6570 5f73 6563  s.get('sleep_sec
+00000e40: 6f6e 6473 272c 2030 290d 0a0d 0a20 2020  onds', 0)....   
+00000e50: 2020 2020 2020 2020 2069 6620 6966 5f73           if if_s
+00000e60: 686f 775f 7469 6d65 5f73 7461 7420 616e  how_time_stat an
+00000e70: 6420 736c 6565 705f 7365 636f 6e64 7320  d sleep_seconds 
+00000e80: 3e3d 2030 3a0d 0a20 2020 2020 2020 2020  >= 0:..         
+00000e90: 2020 2020 2020 2074 3120 3d20 7469 6d65         t1 = time
+00000ea0: 2e74 696d 6528 290d 0a20 2020 2020 2020  .time()..       
+00000eb0: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+00000ec0: 3d20 6675 6e63 282a 6172 6773 2c20 2a2a  = func(*args, **
+00000ed0: 6b77 6172 6773 290d 0a20 2020 2020 2020  kwargs)..       
+00000ee0: 2020 2020 2020 2020 2074 3220 3d20 7469           t2 = ti
+00000ef0: 6d65 2e74 696d 6528 290d 0a20 2020 2020  me.time()..     
+00000f00: 2020 2020 2020 2020 2020 2063 6f73 745f             cost_
+00000f10: 7469 6d65 203d 2072 6f75 6e64 2828 7432  time = round((t2
+00000f20: 202d 2074 3120 2d20 736c 6565 705f 7365   - t1 - sleep_se
+00000f30: 636f 6e64 7329 2c20 7368 6f77 5f74 696d  conds), show_tim
+00000f40: 655f 7374 6174 5f70 7265 6369 7369 6f6e  e_stat_precision
+00000f50: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00000f60: 2020 2073 7973 2e73 7464 6572 722e 7772     sys.stderr.wr
+00000f70: 6974 6528 6627 5469 6d65 5370 656e 7428  ite(f'TimeSpent(
+00000f80: 6675 6e63 7469 6f6e 3a20 7b66 756e 632e  function: {func.
+00000f90: 5f5f 6e61 6d65 5f5f 5b3a 2d34 5d7d 293a  __name__[:-4]}):
+00000fa0: 207b 636f 7374 5f74 696d 657d 735c 6e27   {cost_time}s\n'
+00000fb0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00000fc0: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
+00000fd0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00000fe0: 7475 726e 2066 756e 6328 2a61 7267 732c  turn func(*args,
+00000ff0: 202a 2a6b 7761 7267 7329 0d0a 2020 2020   **kwargs)..    
+00001000: 2020 2020 7265 7475 726e 205f 7772 6170      return _wrap
+00001010: 7065 720d 0a0d 0a20 2020 2040 7374 6174  per....    @stat
+00001020: 6963 6d65 7468 6f64 0d0a 2020 2020 6465  icmethod..    de
+00001030: 6620 6765 745f 7469 6d65 7374 616d 7028  f get_timestamp(
+00001040: 2920 2d3e 2069 6e74 3a0d 0a20 2020 2020  ) -> int:..     
+00001050: 2020 2072 6574 7572 6e20 696e 7428 7469     return int(ti
+00001060: 6d65 2e74 696d 6528 2920 2a20 3165 3329  me.time() * 1e3)
+00001070: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
+00001080: 6574 686f 640d 0a20 2020 2064 6566 2067  ethod..    def g
+00001090: 6574 5f68 6561 6465 7273 2868 6f73 745f  et_headers(host_
+000010a0: 7572 6c3a 2073 7472 2c0d 0a20 2020 2020  url: str,..     
+000010b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000010c0: 665f 6170 693a 2062 6f6f 6c20 3d20 4661  f_api: bool = Fa
+000010d0: 6c73 652c 0d0a 2020 2020 2020 2020 2020  lse,..          
+000010e0: 2020 2020 2020 2020 2020 6966 5f72 6566            if_ref
+000010f0: 6572 6572 5f66 6f72 5f68 6f73 743a 2062  erer_for_host: b
+00001100: 6f6f 6c20 3d20 5472 7565 2c0d 0a20 2020  ool = True,..   
+00001110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001120: 2069 665f 616a 6178 5f66 6f72 5f61 7069   if_ajax_for_api
+00001130: 3a20 626f 6f6c 203d 2054 7275 652c 0d0a  : bool = True,..
+00001140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001150: 2020 2020 6966 5f6a 736f 6e5f 666f 725f      if_json_for_
+00001160: 6170 693a 2062 6f6f 6c20 3d20 4661 6c73  api: bool = Fals
+00001170: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00001180: 2020 2020 2020 2020 6966 5f6d 756c 7469          if_multi
+00001190: 7061 7274 5f66 6f72 5f61 7069 3a20 626f  part_for_api: bo
+000011a0: 6f6c 203d 2046 616c 7365 2c0d 0a20 2020  ol = False,..   
+000011b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000011c0: 2069 665f 6874 7470 5f6f 7665 7272 6964   if_http_overrid
+000011d0: 655f 666f 725f 6170 693a 2062 6f6f 6c20  e_for_api: bool 
+000011e0: 3d20 4661 6c73 650d 0a20 2020 2020 2020  = False..       
+000011f0: 2020 2020 2020 2020 2020 2020 2029 202d               ) -
+00001200: 3e20 6469 6374 3a0d 0a0d 0a20 2020 2020  > dict:....     
+00001210: 2020 2075 7365 725f 6167 656e 7420 3d20     user_agent = 
+00001220: 224d 6f7a 696c 6c61 2f35 2e30 2028 5769  "Mozilla/5.0 (Wi
+00001230: 6e64 6f77 7320 4e54 2031 302e 303b 2057  ndows NT 10.0; W
+00001240: 696e 3634 3b20 7836 3429 2041 7070 6c65  in64; x64) Apple
+00001250: 5765 624b 6974 2f35 3337 2e33 3620 284b  WebKit/537.36 (K
+00001260: 4854 4d4c 2c20 6c69 6b65 2047 6563 6b6f  HTML, like Gecko
+00001270: 2920 4368 726f 6d65 2f31 3037 2e30 2e30  ) Chrome/107.0.0
+00001280: 2e30 2053 6166 6172 692f 3533 372e 3336  .0 Safari/537.36
+00001290: 220d 0a20 2020 2020 2020 2075 726c 5f70  "..        url_p
+000012a0: 6174 6820 3d20 7572 6c6c 6962 2e70 6172  ath = urllib.par
+000012b0: 7365 2e75 726c 7061 7273 6528 686f 7374  se.urlparse(host
+000012c0: 5f75 726c 2e73 7472 6970 2827 2f27 2929  _url.strip('/'))
+000012d0: 2e70 6174 680d 0a20 2020 2020 2020 2068  .path..        h
+000012e0: 6f73 745f 6865 6164 6572 7320 3d20 7b0d  ost_headers = {.
+000012f0: 0a20 2020 2020 2020 2020 2020 2027 5265  .            'Re
+00001300: 6665 7265 7227 2069 6620 6966 5f72 6566  ferer' if if_ref
+00001310: 6572 6572 5f66 6f72 5f68 6f73 7420 656c  erer_for_host el
+00001320: 7365 2027 486f 7374 273a 2068 6f73 745f  se 'Host': host_
+00001330: 7572 6c2c 0d0a 2020 2020 2020 2020 2020  url,..          
+00001340: 2020 2255 7365 722d 4167 656e 7422 3a20    "User-Agent": 
+00001350: 7573 6572 5f61 6765 6e74 2c0d 0a20 2020  user_agent,..   
+00001360: 2020 2020 207d 0d0a 2020 2020 2020 2020       }..        
+00001370: 6170 695f 6865 6164 6572 7320 3d20 7b0d  api_headers = {.
+00001380: 0a20 2020 2020 2020 2020 2020 2027 4f72  .            'Or
+00001390: 6967 696e 273a 2068 6f73 745f 7572 6c2e  igin': host_url.
+000013a0: 7370 6c69 7428 7572 6c5f 7061 7468 295b  split(url_path)[
+000013b0: 305d 2069 6620 7572 6c5f 7061 7468 2065  0] if url_path e
+000013c0: 6c73 6520 686f 7374 5f75 726c 2c0d 0a20  lse host_url,.. 
+000013d0: 2020 2020 2020 2020 2020 2027 5265 6665             'Refe
+000013e0: 7265 7227 3a20 686f 7374 5f75 726c 2c0d  rer': host_url,.
+000013f0: 0a20 2020 2020 2020 2020 2020 2027 582d  .            'X-
+00001400: 5265 7175 6573 7465 642d 5769 7468 273a  Requested-With':
+00001410: 2027 584d 4c48 7474 7052 6571 7565 7374   'XMLHttpRequest
+00001420: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+00001430: 2743 6f6e 7465 6e74 2d54 7970 6527 3a20  'Content-Type': 
+00001440: 2761 7070 6c69 6361 7469 6f6e 2f78 2d77  'application/x-w
+00001450: 7777 2d66 6f72 6d2d 7572 6c65 6e63 6f64  ww-form-urlencod
+00001460: 6564 3b20 6368 6172 7365 743d 5554 462d  ed; charset=UTF-
+00001470: 3827 2c0d 0a20 2020 2020 2020 2020 2020  8',..           
+00001480: 2022 5573 6572 2d41 6765 6e74 223a 2075   "User-Agent": u
+00001490: 7365 725f 6167 656e 742c 0d0a 2020 2020  ser_agent,..    
+000014a0: 2020 2020 7d0d 0a20 2020 2020 2020 2069      }..        i
+000014b0: 6620 6966 5f61 7069 2061 6e64 206e 6f74  f if_api and not
+000014c0: 2069 665f 616a 6178 5f66 6f72 5f61 7069   if_ajax_for_api
+000014d0: 3a0d 0a20 2020 2020 2020 2020 2020 2061  :..            a
+000014e0: 7069 5f68 6561 6465 7273 2e70 6f70 2827  pi_headers.pop('
+000014f0: 582d 5265 7175 6573 7465 642d 5769 7468  X-Requested-With
+00001500: 2729 0d0a 2020 2020 2020 2020 2020 2020  ')..            
+00001510: 6170 695f 6865 6164 6572 732e 7570 6461  api_headers.upda
+00001520: 7465 287b 2743 6f6e 7465 6e74 2d54 7970  te({'Content-Typ
+00001530: 6527 3a20 2774 6578 742f 706c 6169 6e27  e': 'text/plain'
+00001540: 7d29 0d0a 2020 2020 2020 2020 6966 2069  })..        if i
+00001550: 665f 6170 6920 616e 6420 6966 5f6a 736f  f_api and if_jso
+00001560: 6e5f 666f 725f 6170 693a 0d0a 2020 2020  n_for_api:..    
+00001570: 2020 2020 2020 2020 6170 695f 6865 6164          api_head
+00001580: 6572 732e 7570 6461 7465 287b 2743 6f6e  ers.update({'Con
+00001590: 7465 6e74 2d54 7970 6527 3a20 2761 7070  tent-Type': 'app
+000015a0: 6c69 6361 7469 6f6e 2f6a 736f 6e27 7d29  lication/json'})
+000015b0: 0d0a 2020 2020 2020 2020 6966 2069 665f  ..        if if_
+000015c0: 6170 6920 616e 6420 6966 5f6d 756c 7469  api and if_multi
+000015d0: 7061 7274 5f66 6f72 5f61 7069 3a0d 0a20  part_for_api:.. 
+000015e0: 2020 2020 2020 2020 2020 2061 7069 5f68             api_h
+000015f0: 6561 6465 7273 2e70 6f70 2827 436f 6e74  eaders.pop('Cont
+00001600: 656e 742d 5479 7065 2729 0d0a 2020 2020  ent-Type')..    
+00001610: 2020 2020 6966 2069 665f 6170 6920 616e      if if_api an
+00001620: 6420 6966 5f68 7474 705f 6f76 6572 7269  d if_http_overri
+00001630: 6465 5f66 6f72 5f61 7069 3a0d 0a20 2020  de_for_api:..   
+00001640: 2020 2020 2020 2020 2061 7069 5f68 6561           api_hea
+00001650: 6465 7273 2e75 7064 6174 6528 7b27 582d  ders.update({'X-
+00001660: 4854 5450 2d4d 6574 686f 642d 4f76 6572  HTTP-Method-Over
+00001670: 7269 6465 273a 2027 4745 5427 7d29 0d0a  ride': 'GET'})..
+00001680: 2020 2020 2020 2020 7265 7475 726e 2068          return h
+00001690: 6f73 745f 6865 6164 6572 7320 6966 206e  ost_headers if n
+000016a0: 6f74 2069 665f 6170 6920 656c 7365 2061  ot if_api else a
+000016b0: 7069 5f68 6561 6465 7273 0d0a 0d0a 2020  pi_headers....  
+000016c0: 2020 6465 6620 6368 6563 6b5f 656e 5f6c    def check_en_l
+000016d0: 616e 6728 7365 6c66 2c20 6672 6f6d 5f6c  ang(self, from_l
+000016e0: 616e 673a 2073 7472 2c20 746f 5f6c 616e  ang: str, to_lan
+000016f0: 673a 2073 7472 2c20 6465 6661 756c 745f  g: str, default_
+00001700: 7472 616e 736c 6174 6f72 3a20 4f70 7469  translator: Opti
+00001710: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
+00001720: 2c20 6465 6661 756c 745f 6c61 6e67 3a20  , default_lang: 
+00001730: 7374 7220 3d20 2765 6e2d 5553 2729 202d  str = 'en-US') -
+00001740: 3e20 5475 706c 655b 7374 722c 2073 7472  > Tuple[str, str
+00001750: 5d3a 0d0a 2020 2020 2020 2020 6966 2064  ]:..        if d
+00001760: 6566 6175 6c74 5f74 7261 6e73 6c61 746f  efault_translato
+00001770: 7220 616e 6420 6465 6661 756c 745f 7472  r and default_tr
+00001780: 616e 736c 6174 6f72 2069 6e20 7365 6c66  anslator in self
+00001790: 2e74 7261 6e73 666f 726d 5f65 6e5f 7472  .transform_en_tr
+000017a0: 616e 736c 6174 6f72 5f70 6f6f 6c3a 0d0a  anslator_pool:..
+000017b0: 2020 2020 2020 2020 2020 2020 6672 6f6d              from
+000017c0: 5f6c 616e 6720 3d20 6465 6661 756c 745f  _lang = default_
+000017d0: 6c61 6e67 2069 6620 6672 6f6d 5f6c 616e  lang if from_lan
+000017e0: 6720 3d3d 2027 656e 2720 656c 7365 2066  g == 'en' else f
+000017f0: 726f 6d5f 6c61 6e67 0d0a 2020 2020 2020  rom_lang..      
+00001800: 2020 2020 2020 746f 5f6c 616e 6720 3d20        to_lang = 
+00001810: 6465 6661 756c 745f 6c61 6e67 2069 6620  default_lang if 
+00001820: 746f 5f6c 616e 6720 3d3d 2027 656e 2720  to_lang == 'en' 
+00001830: 656c 7365 2074 6f5f 6c61 6e67 0d0a 2020  else to_lang..  
+00001840: 2020 2020 2020 2020 2020 6672 6f6d 5f6c            from_l
+00001850: 616e 6720 3d20 6465 6661 756c 745f 6c61  ang = default_la
+00001860: 6e67 2e72 6570 6c61 6365 2827 2d27 2c20  ng.replace('-', 
+00001870: 275f 2729 2069 6620 6465 6661 756c 745f  '_') if default_
+00001880: 7472 616e 736c 6174 6f72 203d 3d20 276c  translator == 'l
+00001890: 696e 6776 616e 6578 2720 616e 6420 6672  ingvanex' and fr
+000018a0: 6f6d 5f6c 616e 675b 3a33 5d20 3d3d 2027  om_lang[:3] == '
+000018b0: 656e 2d27 2065 6c73 6520 6672 6f6d 5f6c  en-' else from_l
+000018c0: 616e 670d 0a20 2020 2020 2020 2020 2020  ang..           
+000018d0: 2074 6f5f 6c61 6e67 203d 2064 6566 6175   to_lang = defau
+000018e0: 6c74 5f6c 616e 672e 7265 706c 6163 6528  lt_lang.replace(
+000018f0: 272d 272c 2027 5f27 2920 6966 2064 6566  '-', '_') if def
+00001900: 6175 6c74 5f74 7261 6e73 6c61 746f 7220  ault_translator 
+00001910: 3d3d 2027 6c69 6e67 7661 6e65 7827 2061  == 'lingvanex' a
+00001920: 6e64 2074 6f5f 6c61 6e67 5b3a 335d 203d  nd to_lang[:3] =
+00001930: 3d20 2765 6e2d 2720 656c 7365 2074 6f5f  = 'en-' else to_
+00001940: 6c61 6e67 0d0a 2020 2020 2020 2020 7265  lang..        re
+00001950: 7475 726e 2066 726f 6d5f 6c61 6e67 2c20  turn from_lang, 
+00001960: 746f 5f6c 616e 670d 0a0d 0a20 2020 2064  to_lang....    d
+00001970: 6566 2063 6865 636b 5f6c 616e 6775 6167  ef check_languag
+00001980: 6528 7365 6c66 2c0d 0a20 2020 2020 2020  e(self,..       
+00001990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000019a0: 6672 6f6d 5f6c 616e 6775 6167 653a 2073  from_language: s
+000019b0: 7472 2c0d 0a20 2020 2020 2020 2020 2020  tr,..           
+000019c0: 2020 2020 2020 2020 2020 2020 746f 5f6c              to_l
+000019d0: 616e 6775 6167 653a 2073 7472 2c0d 0a20  anguage: str,.. 
+000019e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000019f0: 2020 2020 2020 6c61 6e67 7561 6765 5f6d        language_m
+00001a00: 6170 3a20 6469 6374 2c0d 0a20 2020 2020  ap: dict,..     
+00001a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001a20: 2020 6f75 7470 7574 5f61 7574 6f3a 2073    output_auto: s
+00001a30: 7472 203d 2027 6175 746f 272c 0d0a 2020  tr = 'auto',..  
+00001a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001a50: 2020 2020 206f 7574 7075 745f 7a68 3a20       output_zh: 
+00001a60: 7374 7220 3d20 277a 6827 2c0d 0a20 2020  str = 'zh',..   
+00001a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001a80: 2020 2020 6f75 7470 7574 5f65 6e5f 7472      output_en_tr
+00001a90: 616e 736c 6174 6f72 3a20 4f70 7469 6f6e  anslator: Option
+00001aa0: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c0d  al[str] = None,.
+00001ab0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001ac0: 2020 2020 2020 2020 6f75 7470 7574 5f65          output_e
+00001ad0: 6e3a 2073 7472 203d 2027 656e 2d55 5327  n: str = 'en-US'
+00001ae0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00001af0: 2020 2020 2020 2020 2020 6966 5f63 6865            if_che
+00001b00: 636b 5f6c 616e 675f 7265 7665 7273 653a  ck_lang_reverse:
+00001b10: 2062 6f6f 6c20 3d20 5472 7565 2c0d 0a20   bool = True,.. 
+00001b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001b30: 2020 2020 2020 2920 2d3e 2054 7570 6c65        ) -> Tuple
+00001b40: 5b73 7472 2c20 7374 725d 3a0d 0a0d 0a20  [str, str]:.... 
+00001b50: 2020 2020 2020 2069 6620 6f75 7470 7574         if output
+00001b60: 5f65 6e5f 7472 616e 736c 6174 6f72 3a0d  _en_translator:.
+00001b70: 0a20 2020 2020 2020 2020 2020 2066 726f  .            fro
+00001b80: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
+00001b90: 616e 6775 6167 6520 3d20 7365 6c66 2e63  anguage = self.c
+00001ba0: 6865 636b 5f65 6e5f 6c61 6e67 2866 726f  heck_en_lang(fro
+00001bb0: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
+00001bc0: 616e 6775 6167 652c 206f 7574 7075 745f  anguage, output_
+00001bd0: 656e 5f74 7261 6e73 6c61 746f 722c 206f  en_translator, o
+00001be0: 7574 7075 745f 656e 290d 0a0d 0a20 2020  utput_en)....   
+00001bf0: 2020 2020 2066 726f 6d5f 6c61 6e67 7561       from_langua
+00001c00: 6765 203d 206f 7574 7075 745f 6175 746f  ge = output_auto
+00001c10: 2069 6620 6672 6f6d 5f6c 616e 6775 6167   if from_languag
+00001c20: 6520 696e 2073 656c 662e 6175 746f 5f70  e in self.auto_p
+00001c30: 6f6f 6c20 656c 7365 2066 726f 6d5f 6c61  ool else from_la
+00001c40: 6e67 7561 6765 0d0a 2020 2020 2020 2020  nguage..        
+00001c50: 6672 6f6d 5f6c 616e 6775 6167 6520 3d20  from_language = 
+00001c60: 6f75 7470 7574 5f7a 6820 6966 2066 726f  output_zh if fro
+00001c70: 6d5f 6c61 6e67 7561 6765 2069 6e20 7365  m_language in se
+00001c80: 6c66 2e7a 685f 706f 6f6c 2065 6c73 6520  lf.zh_pool else 
+00001c90: 6672 6f6d 5f6c 616e 6775 6167 650d 0a20  from_language.. 
+00001ca0: 2020 2020 2020 2074 6f5f 6c61 6e67 7561         to_langua
+00001cb0: 6765 203d 206f 7574 7075 745f 7a68 2069  ge = output_zh i
+00001cc0: 6620 746f 5f6c 616e 6775 6167 6520 696e  f to_language in
+00001cd0: 2073 656c 662e 7a68 5f70 6f6f 6c20 656c   self.zh_pool el
+00001ce0: 7365 2074 6f5f 6c61 6e67 7561 6765 0d0a  se to_language..
+00001cf0: 0d0a 2020 2020 2020 2020 6966 2066 726f  ..        if fro
+00001d00: 6d5f 6c61 6e67 7561 6765 2021 3d20 6f75  m_language != ou
+00001d10: 7470 7574 5f61 7574 6f20 616e 6420 6672  tput_auto and fr
+00001d20: 6f6d 5f6c 616e 6775 6167 6520 6e6f 7420  om_language not 
+00001d30: 696e 206c 616e 6775 6167 655f 6d61 703a  in language_map:
+00001d40: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
+00001d50: 6973 6520 5472 616e 736c 6174 6f72 4572  ise TranslatorEr
+00001d60: 726f 7228 2755 6e73 7570 706f 7274 6564  ror('Unsupported
+00001d70: 2066 726f 6d5f 6c61 6e67 7561 6765 5b7b   from_language[{
+00001d80: 7d5d 2069 6e20 7b7d 2e27 2e66 6f72 6d61  }] in {}.'.forma
+00001d90: 7428 6672 6f6d 5f6c 616e 6775 6167 652c  t(from_language,
+00001da0: 2073 6f72 7465 6428 6c61 6e67 7561 6765   sorted(language
+00001db0: 5f6d 6170 2e6b 6579 7328 2929 2929 0d0a  _map.keys())))..
+00001dc0: 2020 2020 2020 2020 656c 6966 2074 6f5f          elif to_
+00001dd0: 6c61 6e67 7561 6765 206e 6f74 2069 6e20  language not in 
+00001de0: 6c61 6e67 7561 6765 5f6d 6170 2061 6e64  language_map and
+00001df0: 2069 665f 6368 6563 6b5f 6c61 6e67 5f72   if_check_lang_r
+00001e00: 6576 6572 7365 3a0d 0a20 2020 2020 2020  everse:..       
+00001e10: 2020 2020 2072 6169 7365 2054 7261 6e73       raise Trans
+00001e20: 6c61 746f 7245 7272 6f72 2827 556e 7375  latorError('Unsu
+00001e30: 7070 6f72 7465 6420 746f 5f6c 616e 6775  pported to_langu
+00001e40: 6167 655b 7b7d 5d20 696e 207b 7d2e 272e  age[{}] in {}.'.
+00001e50: 666f 726d 6174 2874 6f5f 6c61 6e67 7561  format(to_langua
+00001e60: 6765 2c20 736f 7274 6564 286c 616e 6775  ge, sorted(langu
+00001e70: 6167 655f 6d61 702e 6b65 7973 2829 2929  age_map.keys()))
+00001e80: 290d 0a20 2020 2020 2020 2065 6c69 6620  )..        elif 
+00001e90: 6672 6f6d 5f6c 616e 6775 6167 6520 213d  from_language !=
+00001ea0: 206f 7574 7075 745f 6175 746f 2061 6e64   output_auto and
+00001eb0: 2074 6f5f 6c61 6e67 7561 6765 206e 6f74   to_language not
+00001ec0: 2069 6e20 6c61 6e67 7561 6765 5f6d 6170   in language_map
+00001ed0: 5b66 726f 6d5f 6c61 6e67 7561 6765 5d3a  [from_language]:
+00001ee0: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
+00001ef0: 6973 6520 5472 616e 736c 6174 6f72 4572  ise TranslatorEr
+00001f00: 726f 7228 2755 6e73 7570 706f 7274 6564  ror('Unsupported
+00001f10: 2074 7261 6e73 6c61 7469 6f6e 3a20 6672   translation: fr
+00001f20: 6f6d 205b 7b30 7d5d 2074 6f20 5b7b 317d  om [{0}] to [{1}
+00001f30: 5d21 272e 666f 726d 6174 2866 726f 6d5f  ]!'.format(from_
+00001f40: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
+00001f50: 6775 6167 6529 290d 0a20 2020 2020 2020  guage))..       
+00001f60: 2065 6c69 6620 6672 6f6d 5f6c 616e 6775   elif from_langu
+00001f70: 6167 6520 3d3d 2074 6f5f 6c61 6e67 7561  age == to_langua
+00001f80: 6765 3a0d 0a20 2020 2020 2020 2020 2020  ge:..           
+00001f90: 2072 6169 7365 2054 7261 6e73 6c61 746f   raise Translato
+00001fa0: 7245 7272 6f72 2866 2766 726f 6d5f 6c61  rError(f'from_la
+00001fb0: 6e67 7561 6765 5b7b 6672 6f6d 5f6c 616e  nguage[{from_lan
+00001fc0: 6775 6167 657d 5d20 616e 6420 746f 5f6c  guage}] and to_l
+00001fd0: 616e 6775 6167 655b 7b74 6f5f 6c61 6e67  anguage[{to_lang
+00001fe0: 7561 6765 7d5d 2073 686f 756c 6420 6e6f  uage}] should no
+00001ff0: 7420 6265 2073 616d 652e 2729 0d0a 2020  t be same.')..  
+00002000: 2020 2020 2020 7265 7475 726e 2066 726f        return fro
+00002010: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
+00002020: 616e 6775 6167 650d 0a0d 0a20 2020 2040  anguage....    @
+00002030: 7374 6174 6963 6d65 7468 6f64 0d0a 2020  staticmethod..  
+00002040: 2020 6465 6620 7761 726e 696e 675f 6175    def warning_au
+00002050: 746f 5f6c 616e 6728 7472 616e 736c 6174  to_lang(translat
+00002060: 6f72 3a20 7374 722c 2064 6566 6175 6c74  or: str, default
+00002070: 5f66 726f 6d5f 6c61 6e67 7561 6765 3a20  _from_language: 
+00002080: 7374 722c 2069 665f 7072 696e 745f 7761  str, if_print_wa
+00002090: 726e 696e 673a 2062 6f6f 6c20 3d20 5472  rning: bool = Tr
+000020a0: 7565 2920 2d3e 2073 7472 3a0d 0a20 2020  ue) -> str:..   
+000020b0: 2020 2020 2069 6620 6966 5f70 7269 6e74       if if_print
+000020c0: 5f77 6172 6e69 6e67 3a0d 0a20 2020 2020  _warning:..     
+000020d0: 2020 2020 2020 2077 6172 6e5f 7469 7073         warn_tips
+000020e0: 203d 2066 2755 6e73 7570 706f 7274 6564   = f'Unsupported
+000020f0: 205b 6672 6f6d 5f6c 616e 6775 6167 653d   [from_language=
+00002100: 6175 746f 287b 6465 6661 756c 745f 6672  auto({default_fr
+00002110: 6f6d 5f6c 616e 6775 6167 657d 2069 6e73  om_language} ins
+00002120: 7465 6164 295d 2077 6974 6820 5b7b 7472  tead)] with [{tr
+00002130: 616e 736c 6174 6f72 7d5d 2127 0d0a 2020  anslator}]!'..  
+00002140: 2020 2020 2020 2020 2020 7761 726e 696e            warnin
+00002150: 6773 2e77 6172 6e28 6627 7b77 6172 6e5f  gs.warn(f'{warn_
+00002160: 7469 7073 7d20 506c 6561 7365 2073 7065  tips} Please spe
+00002170: 6369 6679 2069 742e 2729 0d0a 2020 2020  cify it.')..    
+00002180: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
+00002190: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
+000021a0: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
+000021b0: 6574 686f 640d 0a20 2020 2064 6566 2064  ethod..    def d
+000021c0: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
+000021d0: 2866 726f 6d5f 6c61 6e67 7561 6765 3a20  (from_language: 
+000021e0: 7374 722c 2074 6f5f 6c61 6e67 7561 6765  str, to_language
+000021f0: 3a20 7374 722c 2064 6566 6175 6c74 5f66  : str, default_f
+00002200: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
+00002210: 722c 2069 665f 7072 696e 745f 7761 726e  r, if_print_warn
+00002220: 696e 673a 2062 6f6f 6c20 3d20 5472 7565  ing: bool = True
+00002230: 2920 2d3e 2064 6963 743a 0d0a 2020 2020  ) -> dict:..    
+00002240: 2020 2020 6b77 6172 6773 203d 207b 0d0a      kwargs = {..
+00002250: 2020 2020 2020 2020 2020 2020 2766 726f              'fro
+00002260: 6d5f 6c61 6e67 7561 6765 273a 2066 726f  m_language': fro
+00002270: 6d5f 6c61 6e67 7561 6765 2c0d 0a20 2020  m_language,..   
+00002280: 2020 2020 2020 2020 2027 746f 5f6c 616e           'to_lan
+00002290: 6775 6167 6527 3a20 746f 5f6c 616e 6775  guage': to_langu
+000022a0: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
+000022b0: 2020 2764 6566 6175 6c74 5f66 726f 6d5f    'default_from_
+000022c0: 6c61 6e67 7561 6765 273a 2064 6566 6175  language': defau
+000022d0: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
+000022e0: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+000022f0: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
+00002300: 273a 2069 665f 7072 696e 745f 7761 726e  ': if_print_warn
+00002310: 696e 672c 0d0a 2020 2020 2020 2020 7d0d  ing,..        }.
+00002320: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00002330: 6b77 6172 6773 0d0a 0d0a 2020 2020 4073  kwargs....    @s
+00002340: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
+00002350: 2064 6566 2064 6562 7567 5f6c 616e 6775   def debug_langu
+00002360: 6167 655f 6d61 7028 6675 6e63 293a 0d0a  age_map(func):..
+00002370: 2020 2020 2020 2020 6465 6620 6d61 6b65          def make
+00002380: 5f74 656d 705f 6c61 6e67 7561 6765 5f6d  _temp_language_m
+00002390: 6170 2866 726f 6d5f 6c61 6e67 7561 6765  ap(from_language
+000023a0: 3a20 7374 722c 2074 6f5f 6c61 6e67 7561  : str, to_langua
+000023b0: 6765 3a20 7374 722c 2064 6566 6175 6c74  ge: str, default
+000023c0: 5f66 726f 6d5f 6c61 6e67 7561 6765 3a20  _from_language: 
+000023d0: 7374 7229 202d 3e20 6469 6374 3a0d 0a20  str) -> dict:.. 
+000023e0: 2020 2020 2020 2020 2020 2069 6620 6672             if fr
+000023f0: 6f6d 5f6c 616e 6775 6167 6520 3d3d 2074  om_language == t
+00002400: 6f5f 6c61 6e67 7561 6765 206f 7220 746f  o_language or to
+00002410: 5f6c 616e 6775 6167 6520 3d3d 2027 6175  _language == 'au
+00002420: 746f 273a 0d0a 2020 2020 2020 2020 2020  to':..          
+00002430: 2020 2020 2020 7261 6973 6520 5472 616e        raise Tran
+00002440: 736c 6174 6f72 4572 726f 720d 0a0d 0a20  slatorError.... 
+00002450: 2020 2020 2020 2020 2020 2074 656d 705f             temp_
+00002460: 6c61 6e67 7561 6765 5f6d 6170 203d 207b  language_map = {
+00002470: 6672 6f6d 5f6c 616e 6775 6167 653a 2074  from_language: t
+00002480: 6f5f 6c61 6e67 7561 6765 7d0d 0a20 2020  o_language}..   
+00002490: 2020 2020 2020 2020 2069 6620 6672 6f6d           if from
+000024a0: 5f6c 616e 6775 6167 6520 213d 2027 6175  _language != 'au
+000024b0: 746f 273a 0d0a 2020 2020 2020 2020 2020  to':..          
+000024c0: 2020 2020 2020 7465 6d70 5f6c 616e 6775        temp_langu
+000024d0: 6167 655f 6d61 702e 7570 6461 7465 287b  age_map.update({
+000024e0: 746f 5f6c 616e 6775 6167 653a 2066 726f  to_language: fro
+000024f0: 6d5f 6c61 6e67 7561 6765 7d29 0d0a 2020  m_language})..  
+00002500: 2020 2020 2020 2020 2020 656c 6966 2064            elif d
+00002510: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
+00002520: 7561 6765 2021 3d20 746f 5f6c 616e 6775  uage != to_langu
+00002530: 6167 653a 0d0a 2020 2020 2020 2020 2020  age:..          
+00002540: 2020 2020 2020 7465 6d70 5f6c 616e 6775        temp_langu
+00002550: 6167 655f 6d61 702e 7570 6461 7465 287b  age_map.update({
+00002560: 6465 6661 756c 745f 6672 6f6d 5f6c 616e  default_from_lan
+00002570: 6775 6167 653a 2074 6f5f 6c61 6e67 7561  guage: to_langua
+00002580: 6765 2c20 746f 5f6c 616e 6775 6167 653a  ge, to_language:
+00002590: 2064 6566 6175 6c74 5f66 726f 6d5f 6c61   default_from_la
+000025a0: 6e67 7561 6765 7d29 0d0a 0d0a 2020 2020  nguage})....    
+000025b0: 2020 2020 2020 2020 7265 7475 726e 2074          return t
+000025c0: 656d 705f 6c61 6e67 7561 6765 5f6d 6170  emp_language_map
+000025d0: 0d0a 0d0a 2020 2020 2020 2020 4066 756e  ....        @fun
+000025e0: 6374 6f6f 6c73 2e77 7261 7073 2866 756e  ctools.wraps(fun
+000025f0: 6329 0d0a 2020 2020 2020 2020 6465 6620  c)..        def 
+00002600: 5f77 7261 7070 6572 282a 6172 6773 2c20  _wrapper(*args, 
+00002610: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
+00002620: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+00002630: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00002640: 7475 726e 2066 756e 6328 2a61 7267 732c  turn func(*args,
+00002650: 202a 2a6b 7761 7267 7329 0d0a 2020 2020   **kwargs)..    
+00002660: 2020 2020 2020 2020 6578 6365 7074 2054          except T
+00002670: 7261 6e73 6c61 746f 7245 7272 6f72 2061  ranslatorError a
+00002680: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
+00002690: 2020 2020 2020 6966 206b 7761 7267 732e        if kwargs.
+000026a0: 6765 7428 2769 665f 7072 696e 745f 7761  get('if_print_wa
+000026b0: 726e 696e 6727 2c20 5472 7565 293a 0d0a  rning', True):..
+000026c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000026d0: 2020 2020 7761 726e 696e 6773 2e77 6172      warnings.war
+000026e0: 6e28 6627 4765 744c 616e 6775 6167 654d  n(f'GetLanguageM
+000026f0: 6170 4572 726f 723a 207b 7374 7228 6529  apError: {str(e)
+00002700: 7d2e 5c6e 5468 6520 6675 6e63 7469 6f6e  }.\nThe function
+00002710: 206d 616b 655f 7465 6d70 5f6c 616e 6775   make_temp_langu
+00002720: 6167 655f 6d61 7028 2920 776f 726b 732e  age_map() works.
+00002730: 2729 0d0a 2020 2020 2020 2020 2020 2020  ')..            
+00002740: 2020 2020 7265 7475 726e 206d 616b 655f      return make_
+00002750: 7465 6d70 5f6c 616e 6775 6167 655f 6d61  temp_language_ma
+00002760: 7028 6b77 6172 6773 2e67 6574 2827 6672  p(kwargs.get('fr
+00002770: 6f6d 5f6c 616e 6775 6167 6527 292c 206b  om_language'), k
+00002780: 7761 7267 732e 6765 7428 2774 6f5f 6c61  wargs.get('to_la
+00002790: 6e67 7561 6765 2729 2c20 6b77 6172 6773  nguage'), kwargs
+000027a0: 2e67 6574 2827 6465 6661 756c 745f 6672  .get('default_fr
+000027b0: 6f6d 5f6c 616e 6775 6167 6527 2929 0d0a  om_language'))..
+000027c0: 2020 2020 2020 2020 7265 7475 726e 205f          return _
+000027d0: 7772 6170 7065 720d 0a20 2020 200d 0a20  wrapper..    .. 
+000027e0: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+000027f0: 0d0a 2020 2020 6465 6620 6368 6563 6b5f  ..    def check_
+00002800: 696e 7075 745f 6c69 6d69 7428 7175 6572  input_limit(quer
+00002810: 795f 7465 7874 3a20 7374 722c 2069 6e70  y_text: str, inp
+00002820: 7574 5f6c 696d 6974 3a20 696e 7429 202d  ut_limit: int) -
+00002830: 3e20 4e6f 6e65 3a0d 0a20 2020 2020 2020  > None:..       
+00002840: 2069 6620 6c65 6e28 7175 6572 795f 7465   if len(query_te
+00002850: 7874 2920 3e20 696e 7075 745f 6c69 6d69  xt) > input_limi
+00002860: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+00002870: 7261 6973 6520 5472 616e 736c 6174 6f72  raise Translator
+00002880: 4572 726f 720d 0a0d 0a20 2020 2040 7374  Error....    @st
+00002890: 6174 6963 6d65 7468 6f64 0d0a 2020 2020  aticmethod..    
+000028a0: 6465 6620 6368 6563 6b5f 7175 6572 7928  def check_query(
+000028b0: 6675 6e63 293a 0d0a 2020 2020 2020 2020  func):..        
+000028c0: 6465 6620 6368 6563 6b5f 7175 6572 795f  def check_query_
+000028d0: 7465 7874 2871 7565 7279 5f74 6578 743a  text(query_text:
+000028e0: 2073 7472 2c20 6966 5f69 676e 6f72 655f   str, if_ignore_
+000028f0: 656d 7074 795f 7175 6572 793a 2062 6f6f  empty_query: boo
+00002900: 6c2c 2069 665f 6967 6e6f 7265 5f6c 696d  l, if_ignore_lim
+00002910: 6974 5f6f 665f 6c65 6e67 7468 3a20 626f  it_of_length: bo
+00002920: 6f6c 2c20 6c69 6d69 745f 6f66 5f6c 656e  ol, limit_of_len
+00002930: 6774 683a 2069 6e74 2920 2d3e 2073 7472  gth: int) -> str
+00002940: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
+00002950: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
+00002960: 2871 7565 7279 5f74 6578 742c 2073 7472  (query_text, str
+00002970: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00002980: 2020 2020 7261 6973 6520 5472 616e 736c      raise Transl
+00002990: 6174 6f72 4572 726f 720d 0a0d 0a20 2020  atorError....   
+000029a0: 2020 2020 2020 2020 2071 7565 7279 5f74           query_t
+000029b0: 6578 7420 3d20 7175 6572 795f 7465 7874  ext = query_text
+000029c0: 2e73 7472 6970 2829 0d0a 2020 2020 2020  .strip()..      
+000029d0: 2020 2020 2020 7174 5f6c 656e 6774 6820        qt_length 
+000029e0: 3d20 6c65 6e28 7175 6572 795f 7465 7874  = len(query_text
+000029f0: 290d 0a20 2020 2020 2020 2020 2020 2069  )..            i
+00002a00: 6620 7174 5f6c 656e 6774 6820 3d3d 2030  f qt_length == 0
+00002a10: 2061 6e64 206e 6f74 2069 665f 6967 6e6f   and not if_igno
+00002a20: 7265 5f65 6d70 7479 5f71 7565 7279 3a0d  re_empty_query:.
+00002a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002a40: 2072 6169 7365 2054 7261 6e73 6c61 746f   raise Translato
+00002a50: 7245 7272 6f72 2822 5468 6520 6071 7565  rError("The `que
+00002a60: 7279 5f74 6578 7460 2063 616e 2774 2062  ry_text` can't b
+00002a70: 6520 656d 7074 7921 2229 0d0a 2020 2020  e empty!")..    
+00002a80: 2020 2020 2020 2020 6966 2071 745f 6c65          if qt_le
+00002a90: 6e67 7468 203e 3d20 6c69 6d69 745f 6f66  ngth >= limit_of
+00002aa0: 5f6c 656e 6774 6820 616e 6420 6e6f 7420  _length and not 
+00002ab0: 6966 5f69 676e 6f72 655f 6c69 6d69 745f  if_ignore_limit_
+00002ac0: 6f66 5f6c 656e 6774 683a 0d0a 2020 2020  of_length:..    
+00002ad0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00002ae0: 6520 5472 616e 736c 6174 6f72 4572 726f  e TranslatorErro
+00002af0: 7228 2754 6865 206c 656e 6774 6820 6f66  r('The length of
+00002b00: 2060 7175 6572 795f 7465 7874 6020 6578   `query_text` ex
+00002b10: 6365 6564 7320 7468 6520 6c69 6d69 742e  ceeds the limit.
+00002b20: 2729 0d0a 2020 2020 2020 2020 2020 2020  ')..            
+00002b30: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00002b40: 2020 2020 2020 2069 6620 7174 5f6c 656e         if qt_len
+00002b50: 6774 6820 3e3d 206c 696d 6974 5f6f 665f  gth >= limit_of_
+00002b60: 6c65 6e67 7468 3a0d 0a20 2020 2020 2020  length:..       
+00002b70: 2020 2020 2020 2020 2020 2020 2077 6172               war
+00002b80: 6e69 6e67 732e 7761 726e 2866 2754 6865  nings.warn(f'The
+00002b90: 206c 656e 6774 6820 6f66 2060 7175 6572   length of `quer
+00002ba0: 795f 7465 7874 6020 6973 207b 7174 5f6c  y_text` is {qt_l
+00002bb0: 656e 6774 687d 2c20 6162 6f76 6520 7b6c  ength}, above {l
+00002bc0: 696d 6974 5f6f 665f 6c65 6e67 7468 7d2e  imit_of_length}.
+00002bd0: 2729 0d0a 2020 2020 2020 2020 2020 2020  ')..            
+00002be0: 2020 2020 2020 2020 7265 7475 726e 2071          return q
+00002bf0: 7565 7279 5f74 6578 745b 3a6c 696d 6974  uery_text[:limit
+00002c00: 5f6f 665f 6c65 6e67 7468 202d 2031 5d0d  _of_length - 1].
+00002c10: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00002c20: 7572 6e20 7175 6572 795f 7465 7874 0d0a  urn query_text..
+00002c30: 0d0a 2020 2020 2020 2020 4066 756e 6374  ..        @funct
+00002c40: 6f6f 6c73 2e77 7261 7073 2866 756e 6329  ools.wraps(func)
+00002c50: 0d0a 2020 2020 2020 2020 6465 6620 5f77  ..        def _w
+00002c60: 7261 7070 6572 282a 6172 6773 2c20 2a2a  rapper(*args, **
+00002c70: 6b77 6172 6773 293a 0d0a 2020 2020 2020  kwargs):..      
+00002c80: 2020 2020 2020 6966 5f69 676e 6f72 655f        if_ignore_
+00002c90: 656d 7074 795f 7175 6572 7920 3d20 6b77  empty_query = kw
+00002ca0: 6172 6773 2e67 6574 2827 6966 5f69 676e  args.get('if_ign
+00002cb0: 6f72 655f 656d 7074 795f 7175 6572 7927  ore_empty_query'
+00002cc0: 2c20 4661 6c73 6529 0d0a 2020 2020 2020  , False)..      
+00002cd0: 2020 2020 2020 6966 5f69 676e 6f72 655f        if_ignore_
+00002ce0: 6c69 6d69 745f 6f66 5f6c 656e 6774 6820  limit_of_length 
+00002cf0: 3d20 6b77 6172 6773 2e67 6574 2827 6966  = kwargs.get('if
+00002d00: 5f69 676e 6f72 655f 6c69 6d69 745f 6f66  _ignore_limit_of
+00002d10: 5f6c 656e 6774 6827 2c20 4661 6c73 6529  _length', False)
+00002d20: 0d0a 2020 2020 2020 2020 2020 2020 6c69  ..            li
+00002d30: 6d69 745f 6f66 5f6c 656e 6774 6820 3d20  mit_of_length = 
+00002d40: 6b77 6172 6773 2e67 6574 2827 6c69 6d69  kwargs.get('limi
+00002d50: 745f 6f66 5f6c 656e 6774 6827 2c20 3230  t_of_length', 20
+00002d60: 3030 3029 0d0a 2020 2020 2020 2020 2020  000)..          
+00002d70: 2020 6973 5f64 6574 6169 6c5f 7265 7375    is_detail_resu
+00002d80: 6c74 203d 206b 7761 7267 732e 6765 7428  lt = kwargs.get(
+00002d90: 2769 735f 6465 7461 696c 5f72 6573 756c  'is_detail_resul
+00002da0: 7427 2c20 4661 6c73 6529 0d0a 0d0a 2020  t', False)....  
+00002db0: 2020 2020 2020 2020 2020 7175 6572 795f            query_
+00002dc0: 7465 7874 203d 206c 6973 7428 6172 6773  text = list(args
+00002dd0: 295b 315d 2069 6620 6c65 6e28 6172 6773  )[1] if len(args
+00002de0: 2920 3e3d 2032 2065 6c73 6520 6b77 6172  ) >= 2 else kwar
+00002df0: 6773 2e67 6574 2827 7175 6572 795f 7465  gs.get('query_te
+00002e00: 7874 2729 0d0a 2020 2020 2020 2020 2020  xt')..          
+00002e10: 2020 7175 6572 795f 7465 7874 203d 2063    query_text = c
+00002e20: 6865 636b 5f71 7565 7279 5f74 6578 7428  heck_query_text(
+00002e30: 7175 6572 795f 7465 7874 2c20 6966 5f69  query_text, if_i
+00002e40: 676e 6f72 655f 656d 7074 795f 7175 6572  gnore_empty_quer
+00002e50: 792c 2069 665f 6967 6e6f 7265 5f6c 696d  y, if_ignore_lim
+00002e60: 6974 5f6f 665f 6c65 6e67 7468 2c20 6c69  it_of_length, li
+00002e70: 6d69 745f 6f66 5f6c 656e 6774 6829 0d0a  mit_of_length)..
+00002e80: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00002e90: 6f74 2071 7565 7279 5f74 6578 7420 616e  ot query_text an
+00002ea0: 6420 6966 5f69 676e 6f72 655f 656d 7074  d if_ignore_empt
+00002eb0: 795f 7175 6572 793a 0d0a 2020 2020 2020  y_query:..      
+00002ec0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00002ed0: 207b 2764 6174 6127 3a20 7175 6572 795f   {'data': query_
+00002ee0: 7465 7874 7d20 6966 2069 735f 6465 7461  text} if is_deta
+00002ef0: 696c 5f72 6573 756c 7420 656c 7365 2071  il_result else q
+00002f00: 7565 7279 5f74 6578 740d 0a0d 0a20 2020  uery_text....   
+00002f10: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
+00002f20: 6172 6773 2920 3e3d 2032 3a0d 0a20 2020  args) >= 2:..   
+00002f30: 2020 2020 2020 2020 2020 2020 206e 6577               new
+00002f40: 5f61 7267 7320 3d20 6c69 7374 2861 7267  _args = list(arg
+00002f50: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
+00002f60: 2020 2020 6e65 775f 6172 6773 5b31 5d20      new_args[1] 
+00002f70: 3d20 7175 6572 795f 7465 7874 0d0a 2020  = query_text..  
+00002f80: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00002f90: 7475 726e 2066 756e 6328 2a74 7570 6c65  turn func(*tuple
+00002fa0: 286e 6577 5f61 7267 7329 2c20 2a2a 6b77  (new_args), **kw
+00002fb0: 6172 6773 290d 0a20 2020 2020 2020 2020  args)..         
+00002fc0: 2020 2072 6574 7572 6e20 6675 6e63 282a     return func(*
+00002fd0: 6172 6773 2c20 2a2a 7b2a 2a6b 7761 7267  args, **{**kwarg
+00002fe0: 732c 202a 2a7b 2771 7565 7279 5f74 6578  s, **{'query_tex
+00002ff0: 7427 3a20 7175 6572 795f 7465 7874 7d7d  t': query_text}}
+00003000: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00003010: 6e20 5f77 7261 7070 6572 0d0a 0d0a 2020  n _wrapper....  
+00003020: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
+00003030: 0a20 2020 2064 6566 2075 6e63 6572 7469  .    def uncerti
+00003040: 6669 6564 2866 756e 6329 3a0d 0a20 2020  fied(func):..   
+00003050: 2020 2020 2040 6675 6e63 746f 6f6c 732e       @functools.
+00003060: 7772 6170 7328 6675 6e63 290d 0a20 2020  wraps(func)..   
+00003070: 2020 2020 2064 6566 205f 7772 6170 7065       def _wrappe
+00003080: 7228 2a61 7267 732c 202a 2a6b 7761 7267  r(*args, **kwarg
+00003090: 7329 3a0d 0a20 2020 2020 2020 2020 2020  s):..           
+000030a0: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+000030b0: 2020 2020 2020 2072 6574 7572 6e20 6675         return fu
+000030c0: 6e63 282a 6172 6773 2c20 2a2a 6b77 6172  nc(*args, **kwar
+000030d0: 6773 290d 0a20 2020 2020 2020 2020 2020  gs)..           
+000030e0: 2065 7863 6570 743a 0d0a 2020 2020 2020   except:..      
+000030f0: 2020 2020 2020 2020 2020 7261 6973 655f            raise_
+00003100: 7469 7073 3120 3d20 6627 5468 6520 6675  tips1 = f'The fu
+00003110: 6e63 7469 6f6e 207b 6675 6e63 2e5f 5f6e  nction {func.__n
+00003120: 616d 655f 5f5b 3a2d 345d 7d28 2920 6861  ame__[:-4]}() ha
+00003130: 7320 6265 656e 206e 6f74 2063 6572 7469  s been not certi
+00003140: 6669 6564 2079 6574 2e27 0d0a 2020 2020  fied yet.'..    
+00003150: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00003160: 655f 7469 7073 325f 7572 6c20 3d20 2768  e_tips2_url = 'h
+00003170: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+00003180: 6d2f 556c 696f 6e54 7365 2f74 7261 6e73  m/UlionTse/trans
+00003190: 6c61 746f 7273 2373 7570 706f 7274 6564  lators#supported
+000031a0: 2d74 7261 6e73 6c61 7469 6f6e 2d73 6572  -translation-ser
+000031b0: 7669 6365 7327 0d0a 2020 2020 2020 2020  vices'..        
+000031c0: 2020 2020 2020 2020 7261 6973 655f 7469          raise_ti
+000031d0: 7073 3220 3d20 6627 506c 6561 7365 2072  ps2 = f'Please r
+000031e0: 6561 6420 666f 7220 6465 7461 696c 733a  ead for details:
+000031f0: 2053 7461 7475 7320 6f66 2054 7261 6e73   Status of Trans
+00003200: 6c61 746f 7220 6f6e 2074 6869 7320 7765  lator on this we
+00003210: 6270 6167 6528 7b72 6169 7365 5f74 6970  bpage({raise_tip
+00003220: 7332 5f75 726c 7d29 2e27 0d0a 2020 2020  s2_url}).'..    
+00003230: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00003240: 6520 5472 616e 736c 6174 6f72 4572 726f  e TranslatorErro
+00003250: 7228 6627 7b72 6169 7365 5f74 6970 7331  r(f'{raise_tips1
+00003260: 7d20 7b72 6169 7365 5f74 6970 7332 7d27  } {raise_tips2}'
+00003270: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00003280: 6e20 5f77 7261 7070 6572 0d0a 0d0a 2020  n _wrapper....  
+00003290: 2020 2320 4073 7461 7469 636d 6574 686f    # @staticmetho
+000032a0: 640d 0a20 2020 2023 2064 6566 2063 6572  d..    # def cer
+000032b0: 7469 6669 6564 2866 756e 6329 3a0d 0a20  tified(func):.. 
+000032c0: 2020 2023 2020 2020 2040 6675 6e63 746f     #     @functo
+000032d0: 6f6c 732e 7772 6170 7328 6675 6e63 290d  ols.wraps(func).
+000032e0: 0a20 2020 2023 2020 2020 2064 6566 205f  .    #     def _
+000032f0: 7772 6170 7065 7228 2a61 7267 732c 202a  wrapper(*args, *
+00003300: 2a6b 7761 7267 7329 3a0d 0a20 2020 2023  *kwargs):..    #
+00003310: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
+00003320: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00003330: 2072 6574 7572 6e20 6675 6e63 282a 6172   return func(*ar
+00003340: 6773 2c20 2a2a 6b77 6172 6773 290d 0a20  gs, **kwargs).. 
+00003350: 2020 2023 2020 2020 2020 2020 2065 7863     #         exc
+00003360: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+00003370: 2065 3a0d 0a20 2020 2023 2020 2020 2020   e:..    #      
+00003380: 2020 2020 2020 2072 6169 7365 2054 7261         raise Tra
+00003390: 6e73 6c61 746f 7245 7272 6f72 2865 290d  nslatorError(e).
+000033a0: 0a20 2020 2023 2020 2020 2072 6574 7572  .    #     retur
+000033b0: 6e20 5f77 7261 7070 6572 0d0a 0d0a 0d0a  n _wrapper......
+000033c0: 636c 6173 7320 4775 6573 7453 6576 6572  class GuestSever
+000033d0: 5265 6769 6f6e 2854 7365 293a 0d0a 2020  Region(Tse):..  
+000033e0: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
+000033f0: 656c 6629 3a0d 0a20 2020 2020 2020 2073  elf):..        s
+00003400: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
+00003410: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00003420: 6765 745f 6164 6472 5f75 726c 203d 2027  get_addr_url = '
+00003430: 6874 7470 733a 2f2f 6765 6f6c 6f63 6174  https://geolocat
+00003440: 696f 6e2e 6f6e 6574 7275 7374 2e63 6f6d  ion.onetrust.com
+00003450: 2f63 6f6f 6b69 6563 6f6e 7365 6e74 7075  /cookieconsentpu
+00003460: 622f 7631 2f67 656f 2f6c 6f63 6174 696f  b/v1/geo/locatio
+00003470: 6e27 0d0a 2020 2020 2020 2020 7365 6c66  n'..        self
+00003480: 2e67 6574 5f69 705f 7572 6c20 3d20 2768  .get_ip_url = 'h
+00003490: 7474 7073 3a2f 2f68 7474 7062 696e 2e6f  ttps://httpbin.o
+000034a0: 7267 2f69 7027 0d0a 2020 2020 2020 2020  rg/ip'..        
+000034b0: 7365 6c66 2e69 705f 6170 695f 6164 6472  self.ip_api_addr
+000034c0: 5f75 726c 203d 2027 6874 7470 3a2f 2f69  _url = 'http://i
+000034d0: 702d 6170 692e 636f 6d2f 6a73 6f6e 2720  p-api.com/json' 
+000034e0: 2023 206d 7573 7420 6874 7470 2e0d 0a20   # must http... 
+000034f0: 2020 2020 2020 2073 656c 662e 6970 5f74         self.ip_t
+00003500: 625f 6164 645f 7572 6c20 3d20 2768 7474  b_add_url = 'htt
+00003510: 7073 3a2f 2f69 702e 7461 6f62 616f 2e63  ps://ip.taobao.c
+00003520: 6f6d 2f6f 7574 4765 7449 7049 6e66 6f27  om/outGetIpInfo'
+00003530: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
+00003540: 6566 6175 6c74 5f72 6567 696f 6e20 3d20  efault_region = 
+00003550: 6f73 2e65 6e76 6972 6f6e 2e67 6574 2827  os.environ.get('
+00003560: 7472 616e 736c 6174 6f72 735f 6465 6661  translators_defa
+00003570: 756c 745f 7265 6769 6f6e 272c 204e 6f6e  ult_region', Non
+00003580: 6529 0d0a 0d0a 2020 2020 4070 726f 7065  e)....    @prope
+00003590: 7274 790d 0a20 2020 2064 6566 2067 6574  rty..    def get
+000035a0: 5f73 6572 7665 725f 7265 6769 6f6e 2873  _server_region(s
+000035b0: 656c 662c 2069 665f 6a75 6467 655f 636e  elf, if_judge_cn
+000035c0: 3a20 626f 6f6c 203d 2054 7275 6529 202d  : bool = True) -
+000035d0: 3e20 7374 723a 0d0a 2020 2020 2020 2020  > str:..        
+000035e0: 6966 2073 656c 662e 6465 6661 756c 745f  if self.default_
+000035f0: 7265 6769 6f6e 3a0d 0a20 2020 2020 2020  region:..       
+00003600: 2020 2020 2073 7973 2e73 7464 6572 722e       sys.stderr.
+00003610: 7772 6974 6528 6627 5573 696e 6720 6375  write(f'Using cu
+00003620: 7374 6f6d 697a 6564 2072 6567 696f 6e20  stomized region 
+00003630: 7b73 656c 662e 6465 6661 756c 745f 7265  {self.default_re
+00003640: 6769 6f6e 7d20 7365 7276 6572 2062 6163  gion} server bac
+00003650: 6b65 6e64 2e5c 6e5c 6e27 290d 0a20 2020  kend.\n\n')..   
+00003660: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00003670: 2827 434e 2720 6966 2073 656c 662e 6465  ('CN' if self.de
+00003680: 6661 756c 745f 7265 6769 6f6e 203d 3d20  fault_region == 
+00003690: 2743 6869 6e61 2720 656c 7365 2027 454e  'China' else 'EN
+000036a0: 2729 2069 6620 6966 5f6a 7564 6765 5f63  ') if if_judge_c
+000036b0: 6e20 656c 7365 2073 656c 662e 6465 6661  n else self.defa
+000036c0: 756c 745f 7265 6769 6f6e 0d0a 0d0a 2020  ult_region....  
+000036d0: 2020 2020 2020 5f68 6561 6465 7273 5f66        _headers_f
+000036e0: 6e20 3d20 6c61 6d62 6461 2075 726c 3a20  n = lambda url: 
+000036f0: 7365 6c66 2e67 6574 5f68 6561 6465 7273  self.get_headers
+00003700: 2875 726c 2c20 6966 5f61 7069 3d46 616c  (url, if_api=Fal
+00003710: 7365 2c20 6966 5f72 6566 6572 6572 5f66  se, if_referer_f
+00003720: 6f72 5f68 6f73 743d 5472 7565 290d 0a20  or_host=True).. 
+00003730: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+00003740: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
+00003750: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00003760: 6174 6120 3d20 6a73 6f6e 2e6c 6f61 6473  ata = json.loads
+00003770: 2872 6571 7565 7374 732e 6765 7428 7365  (requests.get(se
+00003780: 6c66 2e67 6574 5f61 6464 725f 7572 6c2c  lf.get_addr_url,
+00003790: 2068 6561 6465 7273 3d5f 6865 6164 6572   headers=_header
+000037a0: 735f 666e 2873 656c 662e 6765 745f 6164  s_fn(self.get_ad
+000037b0: 6472 5f75 726c 2929 2e74 6578 745b 393a  dr_url)).text[9:
+000037c0: 2d32 5d29 0d0a 2020 2020 2020 2020 2020  -2])..          
+000037d0: 2020 2020 2020 7379 732e 7374 6465 7272        sys.stderr
+000037e0: 2e77 7269 7465 2866 2755 7369 6e67 2072  .write(f'Using r
+000037f0: 6567 696f 6e20 7b64 6174 612e 6765 7428  egion {data.get(
+00003800: 2273 7461 7465 4e61 6d65 2229 7d20 7365  "stateName")} se
+00003810: 7276 6572 2062 6163 6b65 6e64 2e5c 6e5c  rver backend.\n\
+00003820: 6e27 290d 0a20 2020 2020 2020 2020 2020  n')..           
+00003830: 2020 2020 2072 6574 7572 6e20 6461 7461       return data
+00003840: 2e67 6574 2827 636f 756e 7472 7927 2920  .get('country') 
+00003850: 6966 2069 665f 6a75 6467 655f 636e 2065  if if_judge_cn e
+00003860: 6c73 6520 6461 7461 2e67 6574 2822 7374  lse data.get("st
+00003870: 6174 654e 616d 6522 290d 0a20 2020 2020  ateName")..     
+00003880: 2020 2020 2020 2065 7863 6570 7420 7265         except re
+00003890: 7175 6573 7473 2e65 7863 6570 7469 6f6e  quests.exception
+000038a0: 732e 5469 6d65 6f75 743a 0d0a 2020 2020  s.Timeout:..    
+000038b0: 2020 2020 2020 2020 2020 2020 6970 5f61              ip_a
+000038c0: 6464 7265 7373 203d 2072 6571 7565 7374  ddress = request
+000038d0: 732e 6765 7428 7365 6c66 2e67 6574 5f69  s.get(self.get_i
+000038e0: 705f 7572 6c2c 2068 6561 6465 7273 3d5f  p_url, headers=_
+000038f0: 6865 6164 6572 735f 666e 2873 656c 662e  headers_fn(self.
+00003900: 6765 745f 6970 5f75 726c 2929 2e6a 736f  get_ip_url)).jso
+00003910: 6e28 295b 276f 7269 6769 6e27 5d0d 0a20  n()['origin'].. 
+00003920: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00003930: 6179 6c6f 6164 203d 207b 2769 7027 3a20  ayload = {'ip': 
+00003940: 6970 5f61 6464 7265 7373 2c20 2761 6363  ip_address, 'acc
+00003950: 6573 734b 6579 273a 2027 616c 6962 6162  essKey': 'alibab
+00003960: 612d 696e 6327 7d0d 0a20 2020 2020 2020  a-inc'}..       
+00003970: 2020 2020 2020 2020 2064 6174 6120 3d20           data = 
+00003980: 7265 7175 6573 7473 2e70 6f73 7428 7572  requests.post(ur
+00003990: 6c3d 7365 6c66 2e69 705f 7462 5f61 6464  l=self.ip_tb_add
+000039a0: 5f75 726c 2c20 6461 7461 3d70 6179 6c6f  _url, data=paylo
+000039b0: 6164 2c20 6865 6164 6572 733d 5f68 6561  ad, headers=_hea
+000039c0: 6465 7273 5f66 6e28 7365 6c66 2e69 705f  ders_fn(self.ip_
+000039d0: 7462 5f61 6464 5f75 726c 2929 2e6a 736f  tb_add_url)).jso
+000039e0: 6e28 292e 6765 7428 2764 6174 6127 290d  n().get('data').
+000039f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003a00: 2072 6574 7572 6e20 6461 7461 2e67 6574   return data.get
+00003a10: 2827 636f 756e 7472 795f 6964 2729 2020  ('country_id')  
+00003a20: 2320 7265 6769 6f6e 5f69 640d 0a0d 0a20  # region_id.... 
+00003a30: 2020 2020 2020 2065 7863 6570 7420 7265         except re
+00003a40: 7175 6573 7473 2e65 7863 6570 7469 6f6e  quests.exception
+00003a50: 732e 436f 6e6e 6563 7469 6f6e 4572 726f  s.ConnectionErro
+00003a60: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
+00003a70: 7261 6973 6520 5472 616e 736c 6174 6f72  raise Translator
+00003a80: 4572 726f 7228 2755 6e61 626c 6520 746f  Error('Unable to
+00003a90: 2063 6f6e 6e65 6374 2074 6865 2049 6e74   connect the Int
+00003aa0: 6572 6e65 742e 5c6e 5c6e 2729 0d0a 2020  ernet.\n\n')..  
+00003ab0: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
+00003ac0: 2020 2020 2020 2020 2020 2077 6172 6e69             warni
+00003ad0: 6e67 732e 7761 726e 2827 556e 6162 6c65  ngs.warn('Unable
+00003ae0: 2074 6f20 6669 6e64 2073 6572 7665 7220   to find server 
+00003af0: 6261 636b 656e 642e 5c6e 5c6e 2729 0d0a  backend.\n\n')..
+00003b00: 2020 2020 2020 2020 2020 2020 7265 6769              regi
+00003b10: 6f6e 203d 2069 6e70 7574 2827 506c 6561  on = input('Plea
+00003b20: 7365 2069 6e70 7574 2079 6f75 7220 7365  se input your se
+00003b30: 7276 6572 2072 6567 696f 6e20 6e65 6564  rver region need
+00003b40: 2074 6f20 7669 7369 743a 5c6e 6567 3a20   to visit:\neg: 
+00003b50: 5b51 6174 6172 2c20 4368 696e 612c 202e  [Qatar, China, .
+00003b60: 2e2e 5d5c 6e5c 6e27 290d 0a20 2020 2020  ..]\n\n')..     
+00003b70: 2020 2020 2020 2073 7973 2e73 7464 6572         sys.stder
+00003b80: 722e 7772 6974 6528 6627 5573 696e 6720  r.write(f'Using 
+00003b90: 7265 6769 6f6e 207b 7265 6769 6f6e 7d20  region {region} 
+00003ba0: 7365 7276 6572 2062 6163 6b65 6e64 2e5c  server backend.\
+00003bb0: 6e5c 6e27 290d 0a20 2020 2020 2020 2020  n\n')..         
+00003bc0: 2020 2072 6574 7572 6e20 2743 4e27 2069     return 'CN' i
+00003bd0: 6620 7265 6769 6f6e 203d 3d20 2743 6869  f region == 'Chi
+00003be0: 6e61 2720 656c 7365 2027 454e 270d 0a0d  na' else 'EN'...
+00003bf0: 0a0d 0a63 6c61 7373 2047 6f6f 676c 6556  ...class GoogleV
+00003c00: 3128 5473 6529 3a0d 0a20 2020 2064 6566  1(Tse):..    def
+00003c10: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
+00003c20: 7365 7276 6572 5f72 6567 696f 6e3d 2745  server_region='E
+00003c30: 4e27 293a 0d0a 2020 2020 2020 2020 7375  N'):..        su
+00003c40: 7065 7228 292e 5f5f 696e 6974 5f5f 2829  per().__init__()
+00003c50: 0d0a 2020 2020 2020 2020 7365 6c66 2e62  ..        self.b
+00003c60: 6567 696e 5f74 696d 6520 3d20 7469 6d65  egin_time = time
+00003c70: 2e74 696d 6528 290d 0a20 2020 2020 2020  .time()..       
+00003c80: 2073 656c 662e 686f 7374 5f75 726c 203d   self.host_url =
+00003c90: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
+00003ca0: 656c 662e 636e 5f68 6f73 745f 7572 6c20  elf.cn_host_url 
+00003cb0: 3d20 2768 7474 7073 3a2f 2f74 7261 6e73  = 'https://trans
+00003cc0: 6c61 7465 2e67 6f6f 676c 652e 636e 270d  late.google.cn'.
+00003cd0: 0a20 2020 2020 2020 2073 656c 662e 656e  .        self.en
+00003ce0: 5f68 6f73 745f 7572 6c20 3d20 2768 7474  _host_url = 'htt
+00003cf0: 7073 3a2f 2f74 7261 6e73 6c61 7465 2e67  ps://translate.g
+00003d00: 6f6f 676c 652e 636f 6d27 0d0a 2020 2020  oogle.com'..    
+00003d10: 2020 2020 7365 6c66 2e61 7069 5f75 726c      self.api_url
+00003d20: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+00003d30: 2073 656c 662e 7365 7276 6572 5f72 6567   self.server_reg
+00003d40: 696f 6e20 3d20 7365 7276 6572 5f72 6567  ion = server_reg
+00003d50: 696f 6e0d 0a20 2020 2020 2020 2073 656c  ion..        sel
+00003d60: 662e 686f 7374 5f68 6561 6465 7273 203d  f.host_headers =
+00003d70: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
+00003d80: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
+00003d90: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+00003da0: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
+00003db0: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
+00003dc0: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
+00003dd0: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
+00003de0: 2e6f 7574 7075 745f 7a68 203d 2027 7a68  .output_zh = 'zh
+00003df0: 2d43 4e27 0d0a 2020 2020 2020 2020 7365  -CN'..        se
+00003e00: 6c66 2e69 6e70 7574 5f6c 696d 6974 203d  lf.input_limit =
+00003e10: 2069 6e74 2835 6533 290d 0a20 2020 2020   int(5e3)..     
+00003e20: 2020 2073 656c 662e 6465 6661 756c 745f     self.default_
+00003e30: 6672 6f6d 5f6c 616e 6775 6167 6520 3d20  from_language = 
+00003e40: 7365 6c66 2e6f 7574 7075 745f 7a68 0d0a  self.output_zh..
+00003e50: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
+00003e60: 686f 640d 0a20 2020 2064 6566 205f 7872  hod..    def _xr
+00003e70: 2861 3a20 696e 742c 2062 3a20 7374 7229  (a: int, b: str)
+00003e80: 202d 3e20 696e 743a 0d0a 2020 2020 2020   -> int:..      
+00003e90: 2020 7369 7a65 5f62 203d 206c 656e 2862    size_b = len(b
+00003ea0: 290d 0a20 2020 2020 2020 2063 203d 2030  )..        c = 0
+00003eb0: 0d0a 2020 2020 2020 2020 7768 696c 6520  ..        while 
+00003ec0: 6320 3c20 7369 7a65 5f62 202d 2032 3a0d  c < size_b - 2:.
+00003ed0: 0a20 2020 2020 2020 2020 2020 2064 203d  .            d =
+00003ee0: 2062 5b63 202b 2032 5d0d 0a20 2020 2020   b[c + 2]..     
+00003ef0: 2020 2020 2020 2064 203d 206f 7264 2864         d = ord(d
+00003f00: 5b30 5d29 202d 2038 3720 6966 2027 6127  [0]) - 87 if 'a'
+00003f10: 203c 3d20 6420 656c 7365 2069 6e74 2864   <= d else int(d
+00003f20: 290d 0a20 2020 2020 2020 2020 2020 2064  )..            d
+00003f30: 203d 2028 6120 2520 3220 2a2a 2033 3229   = (a % 2 ** 32)
+00003f40: 203e 3e20 6420 6966 2027 2b27 203d 3d20   >> d if '+' == 
+00003f50: 625b 6320 2b20 315d 2065 6c73 6520 6120  b[c + 1] else a 
+00003f60: 3c3c 2064 0d0a 2020 2020 2020 2020 2020  << d..          
+00003f70: 2020 6120 3d20 6120 2b20 6420 2620 2832    a = a + d & (2
+00003f80: 202a 2a20 3332 202d 2031 2920 6966 2027   ** 32 - 1) if '
+00003f90: 2b27 203d 3d20 625b 635d 2065 6c73 6520  +' == b[c] else 
+00003fa0: 6120 5e20 640d 0a20 2020 2020 2020 2020  a ^ d..         
+00003fb0: 2020 2063 202b 3d20 330d 0a20 2020 2020     c += 3..     
+00003fc0: 2020 2072 6574 7572 6e20 610d 0a0d 0a20     return a.... 
+00003fd0: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+00003fe0: 0d0a 2020 2020 6465 6620 5f69 6e74 7328  ..    def _ints(
+00003ff0: 7465 7874 3a20 7374 7229 202d 3e20 4c69  text: str) -> Li
+00004000: 7374 5b69 6e74 5d3a 0d0a 2020 2020 2020  st[int]:..      
+00004010: 2020 696e 7473 203d 205b 5d0d 0a20 2020    ints = []..   
+00004020: 2020 2020 2066 6f72 2076 2069 6e20 7465       for v in te
+00004030: 7874 3a0d 0a20 2020 2020 2020 2020 2020  xt:..           
+00004040: 2069 6e74 5f76 203d 206f 7264 2876 290d   int_v = ord(v).
+00004050: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00004060: 696e 745f 7620 3c20 3220 2a2a 2031 363a  int_v < 2 ** 16:
+00004070: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004080: 2020 696e 7473 2e61 7070 656e 6428 696e    ints.append(in
+00004090: 745f 7629 0d0a 2020 2020 2020 2020 2020  t_v)..          
+000040a0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+000040b0: 2020 2020 2020 2020 2023 2075 6e69 636f           # unico
+000040c0: 6465 2c20 656d 6f6a 690d 0a20 2020 2020  de, emoji..     
+000040d0: 2020 2020 2020 2020 2020 2069 6e74 732e             ints.
+000040e0: 6170 7065 6e64 2869 6e74 2828 696e 745f  append(int((int_
+000040f0: 7620 2d20 3220 2a2a 2031 3629 202f 2032  v - 2 ** 16) / 2
+00004100: 202a 2a20 3130 202b 2035 3532 3936 2929   ** 10 + 55296))
+00004110: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004120: 2020 696e 7473 2e61 7070 656e 6428 696e    ints.append(in
+00004130: 7428 2869 6e74 5f76 202d 2032 202a 2a20  t((int_v - 2 ** 
+00004140: 3136 2920 2520 3220 2a2a 2031 3020 2b20  16) % 2 ** 10 + 
+00004150: 3536 3332 3029 290d 0a20 2020 2020 2020  56320))..       
+00004160: 2072 6574 7572 6e20 696e 7473 0d0a 0d0a   return ints....
+00004170: 2020 2020 6465 6620 6163 7175 6972 6528      def acquire(
+00004180: 7365 6c66 2c20 7465 7874 3a20 7374 722c  self, text: str,
+00004190: 2074 6b6b 3a20 7374 7229 202d 3e20 7374   tkk: str) -> st
+000041a0: 723a 0d0a 2020 2020 2020 2020 696e 7473  r:..        ints
+000041b0: 203d 2073 656c 662e 5f69 6e74 7328 7465   = self._ints(te
+000041c0: 7874 290d 0a20 2020 2020 2020 2073 697a  xt)..        siz
+000041d0: 6520 3d20 6c65 6e28 696e 7473 290d 0a20  e = len(ints).. 
+000041e0: 2020 2020 2020 2065 203d 205b 5d0d 0a20         e = [].. 
+000041f0: 2020 2020 2020 2067 203d 2030 0d0a 0d0a         g = 0....
+00004200: 2020 2020 2020 2020 7768 696c 6520 6720          while g 
+00004210: 3c20 7369 7a65 3a0d 0a20 2020 2020 2020  < size:..       
+00004220: 2020 2020 206c 203d 2069 6e74 735b 675d       l = ints[g]
+00004230: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00004240: 206c 203c 2032 202a 2a20 373a 2020 2320   l < 2 ** 7:  # 
+00004250: 3132 3828 6173 6369 6929 0d0a 2020 2020  128(ascii)..    
+00004260: 2020 2020 2020 2020 2020 2020 652e 6170              e.ap
+00004270: 7065 6e64 286c 290d 0a20 2020 2020 2020  pend(l)..       
+00004280: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00004290: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+000042a0: 203c 2032 202a 2a20 3131 3a20 2023 2032   < 2 ** 11:  # 2
+000042b0: 3034 380d 0a20 2020 2020 2020 2020 2020  048..           
+000042c0: 2020 2020 2020 2020 2065 2e61 7070 656e           e.appen
+000042d0: 6428 6c20 3e3e 2036 207c 2031 3932 290d  d(l >> 6 | 192).
+000042e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000042f0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00004300: 2020 2020 2020 2020 2020 2020 6966 2028              if (
+00004310: 6c20 2620 3634 3531 3229 203d 3d20 3535  l & 64512) == 55
+00004320: 3239 3620 616e 6420 6720 2b20 3120 3c20  296 and g + 1 < 
+00004330: 7369 7a65 2061 6e64 2069 6e74 735b 6720  size and ints[g 
+00004340: 2b20 315d 2026 2036 3435 3132 203d 3d20  + 1] & 64512 == 
+00004350: 3536 3332 303a 0d0a 2020 2020 2020 2020  56320:..        
+00004360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004370: 6720 2b3d 2031 0d0a 2020 2020 2020 2020  g += 1..        
+00004380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004390: 6c20 3d20 3635 3533 3620 2b20 2828 6c20  l = 65536 + ((l 
+000043a0: 2620 3130 3233 2920 3c3c 2031 3029 202b  & 1023) << 10) +
+000043b0: 2028 696e 7473 5b67 5d20 2620 3130 3233   (ints[g] & 1023
+000043c0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+000043d0: 2020 2020 2020 2020 2020 2065 2e61 7070             e.app
+000043e0: 656e 6428 6c20 3e3e 2031 3820 7c20 3234  end(l >> 18 | 24
+000043f0: 3029 0d0a 2020 2020 2020 2020 2020 2020  0)..            
+00004400: 2020 2020 2020 2020 2020 2020 652e 6170              e.ap
+00004410: 7065 6e64 286c 203e 3e20 3132 2026 2036  pend(l >> 12 & 6
+00004420: 3320 7c20 3132 3829 0d0a 2020 2020 2020  3 | 128)..      
+00004430: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00004440: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00004450: 2020 2020 2020 2020 2020 2020 2065 2e61               e.a
+00004460: 7070 656e 6428 6c20 3e3e 2031 3220 7c20  ppend(l >> 12 | 
+00004470: 3232 3429 0d0a 2020 2020 2020 2020 2020  224)..          
+00004480: 2020 2020 2020 2020 2020 652e 6170 7065            e.appe
+00004490: 6e64 286c 203e 3e20 3620 2620 3633 207c  nd(l >> 6 & 63 |
+000044a0: 2031 3238 290d 0a20 2020 2020 2020 2020   128)..         
+000044b0: 2020 2020 2020 2065 2e61 7070 656e 6428         e.append(
+000044c0: 6c20 2620 3633 207c 2031 3238 290d 0a20  l & 63 | 128).. 
+000044d0: 2020 2020 2020 2020 2020 2067 202b 3d20             g += 
+000044e0: 310d 0a0d 0a20 2020 2020 2020 2062 203d  1....        b =
+000044f0: 2074 6b6b 2069 6620 746b 6b20 213d 2027   tkk if tkk != '
+00004500: 3027 2065 6c73 6520 2727 0d0a 2020 2020  0' else ''..    
+00004510: 2020 2020 6420 3d20 622e 7370 6c69 7428      d = b.split(
+00004520: 272e 2729 0d0a 2020 2020 2020 2020 6220  '.')..        b 
+00004530: 3d20 696e 7428 645b 305d 2920 6966 206c  = int(d[0]) if l
+00004540: 656e 2864 2920 3e20 3120 656c 7365 2030  en(d) > 1 else 0
+00004550: 0d0a 0d0a 2020 2020 2020 2020 6120 3d20  ....        a = 
+00004560: 620d 0a20 2020 2020 2020 2066 6f72 2076  b..        for v
+00004570: 616c 7565 2069 6e20 653a 0d0a 2020 2020  alue in e:..    
+00004580: 2020 2020 2020 2020 6120 2b3d 2076 616c          a += val
+00004590: 7565 0d0a 2020 2020 2020 2020 2020 2020  ue..            
+000045a0: 6120 3d20 7365 6c66 2e5f 7872 2861 2c20  a = self._xr(a, 
+000045b0: 272b 2d61 5e2b 3627 290d 0a20 2020 2020  '+-a^+6')..     
+000045c0: 2020 2061 203d 2073 656c 662e 5f78 7228     a = self._xr(
+000045d0: 612c 2027 2b2d 335e 2b62 2b2d 6627 290d  a, '+-3^+b+-f').
+000045e0: 0a20 2020 2020 2020 2061 205e 3d20 696e  .        a ^= in
+000045f0: 7428 645b 315d 2920 6966 206c 656e 2864  t(d[1]) if len(d
+00004600: 2920 3e20 3120 656c 7365 2030 0d0a 2020  ) > 1 else 0..  
+00004610: 2020 2020 2020 6966 2061 203c 2030 3a0d        if a < 0:.
+00004620: 0a20 2020 2020 2020 2020 2020 2061 203d  .            a =
+00004630: 2028 6120 2620 2832 202a 2a20 3331 202d   (a & (2 ** 31 -
+00004640: 2031 2929 202b 2032 202a 2a20 3331 0d0a   1)) + 2 ** 31..
+00004650: 2020 2020 2020 2020 6120 253d 2069 6e74          a %= int
+00004660: 2831 4536 290d 0a20 2020 2020 2020 2072  (1E6)..        r
+00004670: 6574 7572 6e20 277b 7d2e 7b7d 272e 666f  eturn '{}.{}'.fo
+00004680: 726d 6174 2861 2c20 6120 5e20 6229 0d0a  rmat(a, a ^ b)..
+00004690: 0d0a 2020 2020 4054 7365 2e64 6562 7567  ..    @Tse.debug
+000046a0: 5f6c 616e 6775 6167 655f 6d61 700d 0a20  _language_map.. 
+000046b0: 2020 2064 6566 2067 6574 5f6c 616e 6775     def get_langu
+000046c0: 6167 655f 6d61 7028 7365 6c66 2c20 686f  age_map(self, ho
+000046d0: 7374 5f68 746d 6c3a 2073 7472 2c20 2a2a  st_html: str, **
+000046e0: 6b77 6172 6773 3a20 4c61 6e67 4d61 704b  kwargs: LangMapK
+000046f0: 7761 7267 7354 7970 6529 202d 3e20 6469  wargsType) -> di
+00004700: 6374 3a0d 0a20 2020 2020 2020 2065 7420  ct:..        et 
+00004710: 3d20 6c78 6d6c 2e65 7472 6565 2e48 544d  = lxml.etree.HTM
+00004720: 4c28 686f 7374 5f68 746d 6c29 0d0a 2020  L(host_html)..  
+00004730: 2020 2020 2020 6c61 6e67 5f6c 6973 7420        lang_list 
+00004740: 3d20 736f 7274 6564 286c 6973 7428 7365  = sorted(list(se
+00004750: 7428 6574 2e78 7061 7468 2827 2f2f 2a2f  t(et.xpath('//*/
+00004760: 4064 6174 612d 6c61 6e67 7561 6765 2d63  @data-language-c
+00004770: 6f64 6527 2929 2929 0d0a 2020 2020 2020  ode'))))..      
+00004780: 2020 7265 7475 726e 207b 7d2e 6672 6f6d    return {}.from
+00004790: 6b65 7973 286c 616e 675f 6c69 7374 2c20  keys(lang_list, 
+000047a0: 6c61 6e67 5f6c 6973 7429 0d0a 0d0a 2020  lang_list)....  
+000047b0: 2020 6465 6620 6765 745f 746b 6b28 7365    def get_tkk(se
+000047c0: 6c66 2c20 686f 7374 5f68 746d 6c3a 2073  lf, host_html: s
+000047d0: 7472 2920 2d3e 2073 7472 3a0d 0a20 2020  tr) -> str:..   
+000047e0: 2020 2020 2072 6574 7572 6e20 7265 2e63       return re.c
+000047f0: 6f6d 7069 6c65 2822 746b 6b3a 2728 2e2a  ompile("tkk:'(.*
+00004800: 3f29 2722 292e 6669 6e64 616c 6c28 686f  ?)'").findall(ho
+00004810: 7374 5f68 746d 6c29 5b30 5d0d 0a0d 0a20  st_html)[0].... 
+00004820: 2020 2040 5473 652e 7469 6d65 5f73 7461     @Tse.time_sta
+00004830: 740d 0a20 2020 2040 5473 652e 6368 6563  t..    @Tse.chec
+00004840: 6b5f 7175 6572 790d 0a20 2020 2064 6566  k_query..    def
+00004850: 2067 6f6f 676c 655f 6170 6928 7365 6c66   google_api(self
+00004860: 2c20 7175 6572 795f 7465 7874 3a20 7374  , query_text: st
+00004870: 722c 2066 726f 6d5f 6c61 6e67 7561 6765  r, from_language
+00004880: 3a20 7374 7220 3d20 2761 7574 6f27 2c20  : str = 'auto', 
+00004890: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
+000048a0: 203d 2027 656e 272c 202a 2a6b 7761 7267   = 'en', **kwarg
+000048b0: 733a 2041 7069 4b77 6172 6773 5479 7065  s: ApiKwargsType
+000048c0: 2920 2d3e 2055 6e69 6f6e 5b73 7472 2c20  ) -> Union[str, 
+000048d0: 6469 6374 5d3a 0d0a 2020 2020 2020 2020  dict]:..        
+000048e0: 2222 220d 0a20 2020 2020 2020 2068 7474  """..        htt
+000048f0: 7073 3a2f 2f74 7261 6e73 6c61 7465 2e67  ps://translate.g
+00004900: 6f6f 676c 652e 636f 6d2c 2068 7474 7073  oogle.com, https
+00004910: 3a2f 2f74 7261 6e73 6c61 7465 2e67 6f6f  ://translate.goo
+00004920: 676c 652e 636e 2e0d 0a20 2020 2020 2020  gle.cn...       
+00004930: 203a 7061 7261 6d20 7175 6572 795f 7465   :param query_te
+00004940: 7874 3a20 7374 722c 206d 7573 742e 0d0a  xt: str, must...
+00004950: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
+00004960: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
+00004970: 722c 2064 6566 6175 6c74 2027 6175 746f  r, default 'auto
+00004980: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
+00004990: 616d 2074 6f5f 6c61 6e67 7561 6765 3a20  am to_language: 
+000049a0: 7374 722c 2064 6566 6175 6c74 2027 656e  str, default 'en
+000049b0: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
+000049c0: 616d 202a 2a6b 7761 7267 733a 0d0a 2020  am **kwargs:..  
+000049d0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+000049e0: 6172 616d 2074 696d 656f 7574 3a20 666c  aram timeout: fl
+000049f0: 6f61 742c 2064 6566 6175 6c74 204e 6f6e  oat, default Non
+00004a00: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+00004a10: 2020 2020 3a70 6172 616d 2070 726f 7869      :param proxi
+00004a20: 6573 3a20 6469 6374 2c20 6465 6661 756c  es: dict, defaul
+00004a30: 7420 4e6f 6e65 2e0d 0a20 2020 2020 2020  t None...       
+00004a40: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+00004a50: 736c 6565 705f 7365 636f 6e64 733a 2066  sleep_seconds: f
+00004a60: 6c6f 6174 2c20 6465 6661 756c 7420 302e  loat, default 0.
+00004a70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004a80: 2020 3a70 6172 616d 2069 735f 6465 7461    :param is_deta
+00004a90: 696c 5f72 6573 756c 743a 2062 6f6f 6c2c  il_result: bool,
+00004aa0: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
+00004ab0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004ac0: 203a 7061 7261 6d20 6966 5f69 676e 6f72   :param if_ignor
+00004ad0: 655f 6c69 6d69 745f 6f66 5f6c 656e 6774  e_limit_of_lengt
+00004ae0: 683a 2062 6f6f 6c2c 2064 6566 6175 6c74  h: bool, default
+00004af0: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
+00004b00: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+00004b10: 6c69 6d69 745f 6f66 5f6c 656e 6774 683a  limit_of_length:
+00004b20: 2069 6e74 2c20 6465 6661 756c 7420 3230   int, default 20
+00004b30: 3030 302e 0d0a 2020 2020 2020 2020 2020  000...          
+00004b40: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
+00004b50: 6967 6e6f 7265 5f65 6d70 7479 5f71 7565  ignore_empty_que
+00004b60: 7279 3a20 626f 6f6c 2c20 6465 6661 756c  ry: bool, defaul
+00004b70: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+00004b80: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00004b90: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
+00004ba0: 6166 7465 725f 6672 6571 3a20 696e 742c  after_freq: int,
+00004bb0: 2064 6566 6175 6c74 2031 3030 302e 0d0a   default 1000...
+00004bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004bd0: 3a70 6172 616d 2075 7064 6174 655f 7365  :param update_se
+00004be0: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
+00004bf0: 6e64 733a 2066 6c6f 6174 2c20 6465 6661  nds: float, defa
+00004c00: 756c 7420 3135 3030 2e0d 0a20 2020 2020  ult 1500...     
+00004c10: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00004c20: 6d20 6966 5f73 686f 775f 7469 6d65 5f73  m if_show_time_s
+00004c30: 7461 743a 2062 6f6f 6c2c 2064 6566 6175  tat: bool, defau
+00004c40: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+00004c50: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00004c60: 6d20 7368 6f77 5f74 696d 655f 7374 6174  m show_time_stat
+00004c70: 5f70 7265 6369 7369 6f6e 3a20 696e 742c  _precision: int,
+00004c80: 2064 6566 6175 6c74 2032 2e0d 0a20 2020   default 2...   
+00004c90: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00004ca0: 7261 6d20 6966 5f70 7269 6e74 5f77 6172  ram if_print_war
+00004cb0: 6e69 6e67 3a20 626f 6f6c 2c20 6465 6661  ning: bool, defa
+00004cc0: 756c 7420 5472 7565 2e0d 0a20 2020 2020  ult True...     
+00004cd0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00004ce0: 6d20 6966 5f75 7365 5f63 6e5f 686f 7374  m if_use_cn_host
+00004cf0: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+00004d00: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
+00004d10: 2020 2020 2020 203a 7061 7261 6d20 7265         :param re
+00004d20: 7365 745f 686f 7374 5f75 726c 3a20 7374  set_host_url: st
+00004d30: 722c 2064 6566 6175 6c74 204e 6f6e 652e  r, default None.
+00004d40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004d50: 2020 3a70 6172 616d 2069 665f 6368 6563    :param if_chec
+00004d60: 6b5f 7265 7365 745f 686f 7374 5f75 726c  k_reset_host_url
+00004d70: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+00004d80: 5472 7565 2e0d 0a20 2020 2020 2020 203a  True...        :
+00004d90: 7265 7475 726e 3a20 7374 7220 6f72 2064  return: str or d
+00004da0: 6963 740d 0a20 2020 2020 2020 2022 2222  ict..        """
+00004db0: 0d0a 0d0a 2020 2020 2020 2020 7265 7365  ....        rese
+00004dc0: 745f 686f 7374 5f75 726c 203d 206b 7761  t_host_url = kwa
+00004dd0: 7267 732e 6765 7428 2772 6573 6574 5f68  rgs.get('reset_h
+00004de0: 6f73 745f 7572 6c27 2c20 4e6f 6e65 290d  ost_url', None).
+00004df0: 0a20 2020 2020 2020 2069 6620 7265 7365  .        if rese
+00004e00: 745f 686f 7374 5f75 726c 2061 6e64 2072  t_host_url and r
+00004e10: 6573 6574 5f68 6f73 745f 7572 6c20 213d  eset_host_url !=
+00004e20: 2073 656c 662e 686f 7374 5f75 726c 3a0d   self.host_url:.
+00004e30: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00004e40: 6b77 6172 6773 2e67 6574 2827 6966 5f63  kwargs.get('if_c
+00004e50: 6865 636b 5f72 6573 6574 5f68 6f73 745f  heck_reset_host_
+00004e60: 7572 6c27 2c20 5472 7565 2920 616e 6420  url', True) and 
+00004e70: 6e6f 7420 7265 7365 745f 686f 7374 5f75  not reset_host_u
+00004e80: 726c 5b3a 3235 5d20 3d3d 2027 6874 7470  rl[:25] == 'http
+00004e90: 733a 2f2f 7472 616e 736c 6174 652e 676f  s://translate.go
+00004ea0: 6f67 6c65 2e27 3a0d 0a20 2020 2020 2020  ogle.':..       
+00004eb0: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
+00004ec0: 7261 6e73 6c61 746f 7245 7272 6f72 0d0a  ranslatorError..
+00004ed0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00004ee0: 2e68 6f73 745f 7572 6c20 3d20 7265 7365  .host_url = rese
+00004ef0: 745f 686f 7374 5f75 726c 2e73 7472 6970  t_host_url.strip
+00004f00: 2827 2f27 290d 0a20 2020 2020 2020 2065  ('/')..        e
+00004f10: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00004f20: 2020 7573 655f 636e 5f63 6f6e 6469 7469    use_cn_conditi
+00004f30: 6f6e 203d 206b 7761 7267 732e 6765 7428  on = kwargs.get(
+00004f40: 2769 665f 7573 655f 636e 5f68 6f73 7427  'if_use_cn_host'
+00004f50: 2c20 4e6f 6e65 2920 6f72 2073 656c 662e  , None) or self.
+00004f60: 7365 7276 6572 5f72 6567 696f 6e20 3d3d  server_region ==
+00004f70: 2027 434e 270d 0a20 2020 2020 2020 2020   'CN'..         
+00004f80: 2020 2073 656c 662e 686f 7374 5f75 726c     self.host_url
+00004f90: 203d 2073 656c 662e 636e 5f68 6f73 745f   = self.cn_host_
+00004fa0: 7572 6c20 6966 2075 7365 5f63 6e5f 636f  url if use_cn_co
+00004fb0: 6e64 6974 696f 6e20 656c 7365 2073 656c  ndition else sel
+00004fc0: 662e 656e 5f68 6f73 745f 7572 6c0d 0a0d  f.en_host_url...
+00004fd0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+00004fe0: 2e68 6f73 745f 7572 6c5b 2d32 3a5d 203d  .host_url[-2:] =
+00004ff0: 3d20 2763 6e27 3a0d 0a20 2020 2020 2020  = 'cn':..       
+00005000: 2020 2020 2072 6169 7365 2054 7261 6e73       raise Trans
+00005010: 6c61 746f 7245 7272 6f72 2827 476f 6f67  latorError('Goog
+00005020: 6c65 2073 6572 7669 6365 2077 6173 206f  le service was o
+00005030: 6666 6c69 6e65 2069 6e20 696e 6c61 6e64  ffline in inland
+00005040: 206f 6620 4368 696e 6120 6f6e 204f 6374   of China on Oct
+00005050: 2032 3032 322e 2729 0d0a 0d0a 2020 2020   2022.')....    
+00005060: 2020 2020 7365 6c66 2e68 6f73 745f 6865      self.host_he
+00005070: 6164 6572 7320 3d20 7365 6c66 2e68 6f73  aders = self.hos
+00005080: 745f 6865 6164 6572 7320 6f72 2073 656c  t_headers or sel
+00005090: 662e 6765 745f 6865 6164 6572 7328 7365  f.get_headers(se
+000050a0: 6c66 2e68 6f73 745f 7572 6c2c 2069 665f  lf.host_url, if_
+000050b0: 6170 693d 4661 6c73 6529 0d0a 0d0a 2020  api=False)....  
+000050c0: 2020 2020 2020 7469 6d65 6f75 7420 3d20        timeout = 
+000050d0: 6b77 6172 6773 2e67 6574 2827 7469 6d65  kwargs.get('time
+000050e0: 6f75 7427 2c20 4e6f 6e65 290d 0a20 2020  out', None)..   
+000050f0: 2020 2020 2070 726f 7869 6573 203d 206b       proxies = k
+00005100: 7761 7267 732e 6765 7428 2770 726f 7869  wargs.get('proxi
+00005110: 6573 272c 204e 6f6e 6529 0d0a 2020 2020  es', None)..    
+00005120: 2020 2020 736c 6565 705f 7365 636f 6e64      sleep_second
+00005130: 7320 3d20 6b77 6172 6773 2e67 6574 2827  s = kwargs.get('
+00005140: 736c 6565 705f 7365 636f 6e64 7327 2c20  sleep_seconds', 
+00005150: 3029 0d0a 2020 2020 2020 2020 6966 5f70  0)..        if_p
+00005160: 7269 6e74 5f77 6172 6e69 6e67 203d 206b  rint_warning = k
+00005170: 7761 7267 732e 6765 7428 2769 665f 7072  wargs.get('if_pr
+00005180: 696e 745f 7761 726e 696e 6727 2c20 5472  int_warning', Tr
+00005190: 7565 290d 0a20 2020 2020 2020 2069 735f  ue)..        is_
+000051a0: 6465 7461 696c 5f72 6573 756c 7420 3d20  detail_result = 
+000051b0: 6b77 6172 6773 2e67 6574 2827 6973 5f64  kwargs.get('is_d
+000051c0: 6574 6169 6c5f 7265 7375 6c74 272c 2046  etail_result', F
+000051d0: 616c 7365 290d 0a20 2020 2020 2020 2075  alse)..        u
+000051e0: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+000051f0: 7465 725f 6672 6571 203d 206b 7761 7267  ter_freq = kwarg
+00005200: 732e 6765 7428 2775 7064 6174 655f 7365  s.get('update_se
+00005210: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
+00005220: 272c 2073 656c 662e 6465 6661 756c 745f  ', self.default_
+00005230: 7365 7373 696f 6e5f 6672 6571 290d 0a20  session_freq).. 
+00005240: 2020 2020 2020 2075 7064 6174 655f 7365         update_se
+00005250: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
+00005260: 6e64 7320 3d20 6b77 6172 6773 2e67 6574  nds = kwargs.get
+00005270: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
+00005280: 5f61 6674 6572 5f73 6563 6f6e 6473 272c  _after_seconds',
+00005290: 2073 656c 662e 6465 6661 756c 745f 7365   self.default_se
+000052a0: 7373 696f 6e5f 7365 636f 6e64 7329 0d0a  ssion_seconds)..
+000052b0: 2020 2020 2020 2020 7365 6c66 2e63 6865          self.che
+000052c0: 636b 5f69 6e70 7574 5f6c 696d 6974 2871  ck_input_limit(q
+000052d0: 7565 7279 5f74 6578 742c 2073 656c 662e  uery_text, self.
+000052e0: 696e 7075 745f 6c69 6d69 7429 0d0a 0d0a  input_limit)....
+000052f0: 2020 2020 2020 2020 6e6f 745f 7570 6461          not_upda
+00005300: 7465 5f63 6f6e 645f 6672 6571 203d 2031  te_cond_freq = 1
+00005310: 2069 6620 7365 6c66 2e71 7565 7279 5f63   if self.query_c
+00005320: 6f75 6e74 2025 2075 7064 6174 655f 7365  ount % update_se
+00005330: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
+00005340: 2021 3d20 3020 656c 7365 2030 0d0a 2020   != 0 else 0..  
+00005350: 2020 2020 2020 6e6f 745f 7570 6461 7465        not_update
+00005360: 5f63 6f6e 645f 7469 6d65 203d 2031 2069  _cond_time = 1 i
+00005370: 6620 7469 6d65 2e74 696d 6528 2920 2d20  f time.time() - 
+00005380: 7365 6c66 2e62 6567 696e 5f74 696d 6520  self.begin_time 
+00005390: 3c20 7570 6461 7465 5f73 6573 7369 6f6e  < update_session
+000053a0: 5f61 6674 6572 5f73 6563 6f6e 6473 2065  _after_seconds e
+000053b0: 6c73 6520 300d 0a20 2020 2020 2020 2069  lse 0..        i
+000053c0: 6620 6e6f 7420 2873 656c 662e 7365 7373  f not (self.sess
+000053d0: 696f 6e20 616e 6420 7365 6c66 2e6c 616e  ion and self.lan
+000053e0: 6775 6167 655f 6d61 7020 616e 6420 6e6f  guage_map and no
+000053f0: 745f 7570 6461 7465 5f63 6f6e 645f 6672  t_update_cond_fr
+00005400: 6571 2061 6e64 206e 6f74 5f75 7064 6174  eq and not_updat
+00005410: 655f 636f 6e64 5f74 696d 6520 616e 6420  e_cond_time and 
+00005420: 7365 6c66 2e61 7069 5f75 726c 293a 0d0a  self.api_url):..
+00005430: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00005440: 2e62 6567 696e 5f74 696d 6520 3d20 7469  .begin_time = ti
+00005450: 6d65 2e74 696d 6528 290d 0a20 2020 2020  me.time()..     
+00005460: 2020 2020 2020 2073 656c 662e 7365 7373         self.sess
+00005470: 696f 6e20 3d20 7265 7175 6573 7473 2e53  ion = requests.S
+00005480: 6573 7369 6f6e 2829 0d0a 2020 2020 2020  ession()..      
+00005490: 2020 2020 2020 686f 7374 5f68 746d 6c20        host_html 
+000054a0: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e67  = self.session.g
+000054b0: 6574 2873 656c 662e 686f 7374 5f75 726c  et(self.host_url
+000054c0: 2c20 6865 6164 6572 733d 7365 6c66 2e68  , headers=self.h
+000054d0: 6f73 745f 6865 6164 6572 732c 2074 696d  ost_headers, tim
+000054e0: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
+000054f0: 6f78 6965 733d 7072 6f78 6965 7329 2e74  oxies=proxies).t
+00005500: 6578 740d 0a0d 0a20 2020 2020 2020 2020  ext....         
+00005510: 2020 2064 6562 7567 5f6c 616e 675f 6b77     debug_lang_kw
+00005520: 6172 6773 203d 2073 656c 662e 6465 6275  args = self.debu
+00005530: 675f 6c61 6e67 5f6b 7761 7267 7328 6672  g_lang_kwargs(fr
+00005540: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
+00005550: 6c61 6e67 7561 6765 2c20 7365 6c66 2e64  language, self.d
+00005560: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
+00005570: 7561 6765 2c20 6966 5f70 7269 6e74 5f77  uage, if_print_w
+00005580: 6172 6e69 6e67 290d 0a20 2020 2020 2020  arning)..       
+00005590: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
+000055a0: 6765 5f6d 6170 203d 2073 656c 662e 6765  ge_map = self.ge
+000055b0: 745f 6c61 6e67 7561 6765 5f6d 6170 2868  t_language_map(h
+000055c0: 6f73 745f 6874 6d6c 2c20 7365 6c66 2e73  ost_html, self.s
+000055d0: 6573 7369 6f6e 2c20 7469 6d65 6f75 742c  ession, timeout,
+000055e0: 2070 726f 7869 6573 2c20 2a2a 6465 6275   proxies, **debu
+000055f0: 675f 6c61 6e67 5f6b 7761 7267 7329 0d0a  g_lang_kwargs)..
+00005600: 2020 2020 2020 2020 2020 2020 6672 6f6d              from
+00005610: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
+00005620: 6e67 7561 6765 203d 2073 656c 662e 6368  nguage = self.ch
+00005630: 6563 6b5f 6c61 6e67 7561 6765 2866 726f  eck_language(fro
+00005640: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
+00005650: 616e 6775 6167 652c 2073 656c 662e 6c61  anguage, self.la
+00005660: 6e67 7561 6765 5f6d 6170 2c20 6f75 7470  nguage_map, outp
+00005670: 7574 5f7a 683d 7365 6c66 2e6f 7574 7075  ut_zh=self.outpu
+00005680: 745f 7a68 290d 0a0d 0a20 2020 2020 2020  t_zh)....       
+00005690: 2020 2020 2074 6b6b 203d 2073 656c 662e       tkk = self.
+000056a0: 6765 745f 746b 6b28 686f 7374 5f68 746d  get_tkk(host_htm
+000056b0: 6c29 0d0a 2020 2020 2020 2020 2020 2020  l)..            
+000056c0: 746b 203d 2073 656c 662e 6163 7175 6972  tk = self.acquir
+000056d0: 6528 7175 6572 795f 7465 7874 2c20 746b  e(query_text, tk
+000056e0: 6b29 0d0a 0d0a 2020 2020 2020 2020 2020  k)....          
+000056f0: 2020 6170 695f 7572 6c5f 7061 7274 5f31    api_url_part_1
+00005700: 203d 2027 2f74 7261 6e73 6c61 7465 5f61   = '/translate_a
+00005710: 2f73 696e 676c 653f 636c 6965 6e74 3d7b  /single?client={
+00005720: 307d 2673 6c3d 7b31 7d26 746c 3d7b 327d  0}&sl={1}&tl={2}
+00005730: 2668 6c3d 7a68 2d43 4e26 6474 3d61 7426  &hl=zh-CN&dt=at&
+00005740: 6474 3d62 6426 6474 3d65 7827 2e66 6f72  dt=bd&dt=ex'.for
+00005750: 6d61 7428 2777 6562 6170 7027 2c20 6672  mat('webapp', fr
+00005760: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
+00005770: 6c61 6e67 7561 6765 290d 0a20 2020 2020  language)..     
+00005780: 2020 2020 2020 2061 7069 5f75 726c 5f70         api_url_p
+00005790: 6172 745f 3220 3d20 2726 6474 3d6c 6426  art_2 = '&dt=ld&
+000057a0: 6474 3d6d 6426 6474 3d71 6361 2664 743d  dt=md&dt=qca&dt=
+000057b0: 7277 2664 743d 726d 2664 743d 7373 2664  rw&dt=rm&dt=ss&d
+000057c0: 743d 7426 6965 3d55 5446 2d38 266f 653d  t=t&ie=UTF-8&oe=
+000057d0: 5554 462d 3826 736f 7572 6365 3d62 6826  UTF-8&source=bh&
+000057e0: 7373 656c 3d30 2674 7365 6c3d 3026 6b63  ssel=0&tsel=0&kc
+000057f0: 3d31 270d 0a20 2020 2020 2020 2020 2020  =1'..           
+00005800: 2061 7069 5f75 726c 5f70 6172 745f 3320   api_url_part_3 
+00005810: 3d20 2726 746b 3d7b 307d 2671 3d7b 317d  = '&tk={0}&q={1}
+00005820: 272e 666f 726d 6174 2874 6b2c 2075 726c  '.format(tk, url
+00005830: 6c69 622e 7061 7273 652e 7175 6f74 6528  lib.parse.quote(
+00005840: 7175 6572 795f 7465 7874 2929 0d0a 2020  query_text))..  
+00005850: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+00005860: 7069 5f75 726c 203d 2027 272e 6a6f 696e  pi_url = ''.join
+00005870: 285b 7365 6c66 2e68 6f73 745f 7572 6c2c  ([self.host_url,
+00005880: 2061 7069 5f75 726c 5f70 6172 745f 312c   api_url_part_1,
+00005890: 2061 7069 5f75 726c 5f70 6172 745f 322c   api_url_part_2,
+000058a0: 2061 7069 5f75 726c 5f70 6172 745f 335d   api_url_part_3]
+000058b0: 2920 2023 205b 742c 7765 6261 7070 5d0d  )  # [t,webapp].
+000058c0: 0a0d 0a20 2020 2020 2020 2072 203d 2073  ...        r = s
+000058d0: 656c 662e 7365 7373 696f 6e2e 6765 7428  elf.session.get(
+000058e0: 7365 6c66 2e61 7069 5f75 726c 2c20 6865  self.api_url, he
+000058f0: 6164 6572 733d 7365 6c66 2e68 6f73 745f  aders=self.host_
+00005900: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
+00005910: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
+00005920: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
+00005930: 2020 2020 722e 7261 6973 655f 666f 725f      r.raise_for_
+00005940: 7374 6174 7573 2829 0d0a 2020 2020 2020  status()..      
+00005950: 2020 6461 7461 203d 2072 2e6a 736f 6e28    data = r.json(
+00005960: 290d 0a20 2020 2020 2020 2074 696d 652e  )..        time.
+00005970: 736c 6565 7028 736c 6565 705f 7365 636f  sleep(sleep_seco
+00005980: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
+00005990: 6c66 2e71 7565 7279 5f63 6f75 6e74 202b  lf.query_count +
+000059a0: 3d20 310d 0a20 2020 2020 2020 2072 6574  = 1..        ret
+000059b0: 7572 6e20 6461 7461 2069 6620 6973 5f64  urn data if is_d
+000059c0: 6574 6169 6c5f 7265 7375 6c74 2065 6c73  etail_result els
+000059d0: 6520 2727 2e6a 6f69 6e28 5b69 7465 6d5b  e ''.join([item[
+000059e0: 305d 2066 6f72 2069 7465 6d20 696e 2064  0] for item in d
+000059f0: 6174 615b 305d 2069 6620 6973 696e 7374  ata[0] if isinst
+00005a00: 616e 6365 2869 7465 6d5b 305d 2c20 7374  ance(item[0], st
+00005a10: 7229 5d29 0d0a 0d0a 0d0a 636c 6173 7320  r)])......class 
+00005a20: 476f 6f67 6c65 5632 2854 7365 293a 0d0a  GoogleV2(Tse):..
+00005a30: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00005a40: 2873 656c 662c 2073 6572 7665 725f 7265  (self, server_re
+00005a50: 6769 6f6e 3d27 454e 2729 3a0d 0a20 2020  gion='EN'):..   
+00005a60: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
+00005a70: 6e69 745f 5f28 290d 0a20 2020 2020 2020  nit__()..       
+00005a80: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
+00005a90: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
+00005aa0: 2020 2020 2020 2020 7365 6c66 2e68 6f73          self.hos
+00005ab0: 745f 7572 6c20 3d20 4e6f 6e65 0d0a 2020  t_url = None..  
+00005ac0: 2020 2020 2020 7365 6c66 2e63 6e5f 686f        self.cn_ho
+00005ad0: 7374 5f75 726c 203d 2027 6874 7470 733a  st_url = 'https:
+00005ae0: 2f2f 7472 616e 736c 6174 652e 676f 6f67  //translate.goog
+00005af0: 6c65 2e63 6e27 0d0a 2020 2020 2020 2020  le.cn'..        
+00005b00: 7365 6c66 2e65 6e5f 686f 7374 5f75 726c  self.en_host_url
+00005b10: 203d 2027 6874 7470 733a 2f2f 7472 616e   = 'https://tran
+00005b20: 736c 6174 652e 676f 6f67 6c65 2e63 6f6d  slate.google.com
+00005b30: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+00005b40: 6170 695f 7572 6c20 3d20 4e6f 6e65 0d0a  api_url = None..
+00005b50: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
+00005b60: 5f75 726c 5f70 6174 6820 3d20 272f 5f2f  _url_path = '/_/
+00005b70: 5472 616e 736c 6174 6557 6562 7365 7276  TranslateWebserv
+00005b80: 6572 5569 2f64 6174 612f 6261 7463 6865  erUi/data/batche
+00005b90: 7865 6375 7465 270d 0a20 2020 2020 2020  xecute'..       
+00005ba0: 2073 656c 662e 7365 7276 6572 5f72 6567   self.server_reg
+00005bb0: 696f 6e20 3d20 7365 7276 6572 5f72 6567  ion = server_reg
+00005bc0: 696f 6e0d 0a20 2020 2020 2020 2073 656c  ion..        sel
+00005bd0: 662e 686f 7374 5f68 6561 6465 7273 203d  f.host_headers =
+00005be0: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
+00005bf0: 656c 662e 6170 695f 6865 6164 6572 7320  elf.api_headers 
+00005c00: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+00005c10: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
+00005c20: 7020 3d20 4e6f 6e65 0d0a 2020 2020 2020  p = None..      
+00005c30: 2020 7365 6c66 2e73 6573 7369 6f6e 203d    self.session =
 00005c40: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
-00005c50: 656c 662e 6170 695f 6865 6164 6572 7320  elf.api_headers 
-00005c60: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00005c70: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
-00005c80: 7020 3d20 4e6f 6e65 0d0a 2020 2020 2020  p = None..      
-00005c90: 2020 7365 6c66 2e73 6573 7369 6f6e 203d    self.session =
-00005ca0: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
-00005cb0: 656c 662e 7270 6369 6420 3d20 274d 6b45  elf.rpcid = 'MkE
-00005cc0: 5742 6327 0d0a 2020 2020 2020 2020 7365  WBc'..        se
-00005cd0: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
-00005ce0: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
-00005cf0: 2e6f 7574 7075 745f 7a68 203d 2027 7a68  .output_zh = 'zh
-00005d00: 2d43 4e27 0d0a 2020 2020 2020 2020 7365  -CN'..        se
-00005d10: 6c66 2e69 6e70 7574 5f6c 696d 6974 203d  lf.input_limit =
-00005d20: 2069 6e74 2835 6533 290d 0a20 2020 2020   int(5e3)..     
-00005d30: 2020 2073 656c 662e 6465 6661 756c 745f     self.default_
-00005d40: 6672 6f6d 5f6c 616e 6775 6167 6520 3d20  from_language = 
-00005d50: 7365 6c66 2e6f 7574 7075 745f 7a68 0d0a  self.output_zh..
-00005d60: 0d0a 2020 2020 4054 7365 2e64 6562 7567  ..    @Tse.debug
-00005d70: 5f6c 616e 6775 6167 655f 6d61 700d 0a20  _language_map.. 
-00005d80: 2020 2064 6566 2067 6574 5f6c 616e 6775     def get_langu
-00005d90: 6167 655f 6d61 7028 7365 6c66 2c20 686f  age_map(self, ho
-00005da0: 7374 5f68 746d 6c3a 2073 7472 2c20 2a2a  st_html: str, **
-00005db0: 6b77 6172 6773 3a20 4c61 6e67 4d61 704b  kwargs: LangMapK
-00005dc0: 7761 7267 7354 7970 6529 202d 3e20 6469  wargsType) -> di
-00005dd0: 6374 3a0d 0a20 2020 2020 2020 2065 7420  ct:..        et 
-00005de0: 3d20 6c78 6d6c 2e65 7472 6565 2e48 544d  = lxml.etree.HTM
-00005df0: 4c28 686f 7374 5f68 746d 6c29 0d0a 2020  L(host_html)..  
-00005e00: 2020 2020 2020 6c61 6e67 5f6c 6973 7420        lang_list 
-00005e10: 3d20 736f 7274 6564 286c 6973 7428 7365  = sorted(list(se
-00005e20: 7428 6574 2e78 7061 7468 2827 2f2f 2a2f  t(et.xpath('//*/
-00005e30: 4064 6174 612d 6c61 6e67 7561 6765 2d63  @data-language-c
-00005e40: 6f64 6527 2929 2929 0d0a 2020 2020 2020  ode'))))..      
-00005e50: 2020 7265 7475 726e 207b 7d2e 6672 6f6d    return {}.from
-00005e60: 6b65 7973 286c 616e 675f 6c69 7374 2c20  keys(lang_list, 
-00005e70: 6c61 6e67 5f6c 6973 7429 0d0a 0d0a 2020  lang_list)....  
-00005e80: 2020 6465 6620 6765 745f 7270 6328 7365    def get_rpc(se
-00005e90: 6c66 2c20 7175 6572 795f 7465 7874 3a20  lf, query_text: 
-00005ea0: 7374 722c 2066 726f 6d5f 6c61 6e67 7561  str, from_langua
-00005eb0: 6765 3a20 7374 722c 2074 6f5f 6c61 6e67  ge: str, to_lang
-00005ec0: 7561 6765 3a20 7374 7229 202d 3e20 6469  uage: str) -> di
-00005ed0: 6374 3a0d 0a20 2020 2020 2020 2070 6172  ct:..        par
-00005ee0: 616d 203d 206a 736f 6e2e 6475 6d70 7328  am = json.dumps(
-00005ef0: 5b5b 7175 6572 795f 7465 7874 2c20 6672  [[query_text, fr
-00005f00: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-00005f10: 6c61 6e67 7561 6765 2c20 5472 7565 5d2c  language, True],
-00005f20: 205b 315d 5d29 0d0a 2020 2020 2020 2020   [1]])..        
-00005f30: 7270 6320 3d20 6a73 6f6e 2e64 756d 7073  rpc = json.dumps
-00005f40: 285b 5b5b 7365 6c66 2e72 7063 6964 2c20  ([[[self.rpcid, 
-00005f50: 7061 7261 6d2c 204e 6f6e 652c 2022 6765  param, None, "ge
-00005f60: 6e65 7269 6322 5d5d 5d29 0d0a 2020 2020  neric"]]])..    
-00005f70: 2020 2020 7265 7475 726e 207b 2766 2e72      return {'f.r
-00005f80: 6571 273a 2072 7063 7d0d 0a0d 0a20 2020  eq': rpc}....   
-00005f90: 2064 6566 2067 6574 5f69 6e66 6f28 7365   def get_info(se
-00005fa0: 6c66 2c20 686f 7374 5f68 746d 6c3a 2073  lf, host_html: s
-00005fb0: 7472 2920 2d3e 2064 6963 743a 0d0a 2020  tr) -> dict:..  
-00005fc0: 2020 2020 2020 6461 7461 5f73 7472 203d        data_str =
-00005fd0: 2072 652e 636f 6d70 696c 6528 7227 7769   re.compile(r'wi
-00005fe0: 6e64 6f77 2e57 495a 5f67 6c6f 6261 6c5f  ndow.WIZ_global_
-00005ff0: 6461 7461 203d 2028 2e2a 3f29 3b3c 2f73  data = (.*?);</s
-00006000: 6372 6970 743e 2729 2e66 696e 6461 6c6c  cript>').findall
-00006010: 2868 6f73 745f 6874 6d6c 295b 305d 0d0a  (host_html)[0]..
-00006020: 2020 2020 2020 2020 6461 7461 203d 2065          data = e
-00006030: 7865 636a 732e 6576 616c 2864 6174 615f  xecjs.eval(data_
-00006040: 7374 7229 0d0a 2020 2020 2020 2020 7265  str)..        re
-00006050: 7475 726e 207b 2762 6c27 3a20 6461 7461  turn {'bl': data
-00006060: 5b27 6366 6232 6827 5d2c 2027 662e 7369  ['cfb2h'], 'f.si
-00006070: 6427 3a20 6461 7461 5b27 4664 7246 4a65  d': data['FdrFJe
-00006080: 275d 7d0d 0a0d 0a20 2020 2064 6566 2067  ']}....    def g
-00006090: 6574 5f63 6f6e 7365 6e74 5f63 6f6f 6b69  et_consent_cooki
-000060a0: 6528 7365 6c66 2c20 636f 6e73 656e 745f  e(self, consent_
-000060b0: 6874 6d6c 3a20 7374 7229 202d 3e20 7374  html: str) -> st
-000060c0: 723a 2020 2320 6279 206d 6572 6375 7265  r:  # by mercure
-000060d0: 652e 206d 6572 6765 6420 6275 7420 6e6f  e. merged but no
-000060e0: 7420 7665 7269 6679 2e0d 0a20 2020 2020  t verify...     
-000060f0: 2020 2065 7420 3d20 6c78 6d6c 2e65 7472     et = lxml.etr
-00006100: 6565 2e48 544d 4c28 636f 6e73 656e 745f  ee.HTML(consent_
-00006110: 6874 6d6c 290d 0a20 2020 2020 2020 2069  html)..        i
-00006120: 6e70 7574 5f65 6c65 6d65 6e74 203d 2065  nput_element = e
-00006130: 742e 7870 6174 6828 272e 2f2f 696e 7075  t.xpath('.//inpu
-00006140: 745b 4074 7970 653d 2268 6964 6465 6e22  t[@type="hidden"
-00006150: 5d5b 406e 616d 653d 2276 225d 2729 0d0a  ][@name="v"]')..
-00006160: 2020 2020 2020 2020 636f 6f6b 6965 5f76          cookie_v
-00006170: 616c 7565 203d 2069 6e70 7574 5f65 6c65  alue = input_ele
-00006180: 6d65 6e74 5b30 5d2e 6174 7472 6962 2e67  ment[0].attrib.g
-00006190: 6574 2827 7661 6c75 6527 2920 6966 2069  et('value') if i
-000061a0: 6e70 7574 5f65 6c65 6d65 6e74 2065 6c73  nput_element els
-000061b0: 6520 2763 6227 0d0a 2020 2020 2020 2020  e 'cb'..        
-000061c0: 7265 7475 726e 2066 2743 4f4e 5345 4e54  return f'CONSENT
-000061d0: 3d59 4553 2b7b 636f 6f6b 6965 5f76 616c  =YES+{cookie_val
-000061e0: 7565 7d27 2020 2320 636f 6f6b 6965 2043  ue}'  # cookie C
-000061f0: 4f4e 5345 4e54 3d59 4553 2b63 6220 776f  ONSENT=YES+cb wo
-00006200: 726b 7320 666f 7220 6e6f 770d 0a0d 0a20  rks for now.... 
-00006210: 2020 2040 5473 652e 7469 6d65 5f73 7461     @Tse.time_sta
-00006220: 740d 0a20 2020 2040 5473 652e 6368 6563  t..    @Tse.chec
-00006230: 6b5f 7175 6572 790d 0a20 2020 2064 6566  k_query..    def
-00006240: 2067 6f6f 676c 655f 6170 6928 7365 6c66   google_api(self
-00006250: 2c20 7175 6572 795f 7465 7874 3a20 7374  , query_text: st
-00006260: 722c 2066 726f 6d5f 6c61 6e67 7561 6765  r, from_language
-00006270: 3a20 7374 7220 3d20 2761 7574 6f27 2c20  : str = 'auto', 
-00006280: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
-00006290: 203d 2027 656e 272c 202a 2a6b 7761 7267   = 'en', **kwarg
-000062a0: 733a 2041 7069 4b77 6172 6773 5479 7065  s: ApiKwargsType
-000062b0: 2920 2d3e 2055 6e69 6f6e 5b73 7472 2c20  ) -> Union[str, 
-000062c0: 6469 6374 5d3a 0d0a 2020 2020 2020 2020  dict]:..        
-000062d0: 2222 220d 0a20 2020 2020 2020 2068 7474  """..        htt
-000062e0: 7073 3a2f 2f74 7261 6e73 6c61 7465 2e67  ps://translate.g
-000062f0: 6f6f 676c 652e 636f 6d2c 2068 7474 7073  oogle.com, https
-00006300: 3a2f 2f74 7261 6e73 6c61 7465 2e67 6f6f  ://translate.goo
-00006310: 676c 652e 636e 2e0d 0a20 2020 2020 2020  gle.cn...       
-00006320: 203a 7061 7261 6d20 7175 6572 795f 7465   :param query_te
-00006330: 7874 3a20 7374 722c 206d 7573 742e 0d0a  xt: str, must...
-00006340: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
-00006350: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
-00006360: 722c 2064 6566 6175 6c74 2027 6175 746f  r, default 'auto
-00006370: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
-00006380: 616d 2074 6f5f 6c61 6e67 7561 6765 3a20  am to_language: 
-00006390: 7374 722c 2064 6566 6175 6c74 2027 656e  str, default 'en
-000063a0: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
-000063b0: 616d 202a 2a6b 7761 7267 733a 0d0a 2020  am **kwargs:..  
-000063c0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-000063d0: 6172 616d 2074 696d 656f 7574 3a20 666c  aram timeout: fl
-000063e0: 6f61 742c 2064 6566 6175 6c74 204e 6f6e  oat, default Non
-000063f0: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-00006400: 2020 2020 3a70 6172 616d 2070 726f 7869      :param proxi
-00006410: 6573 3a20 6469 6374 2c20 6465 6661 756c  es: dict, defaul
-00006420: 7420 4e6f 6e65 2e0d 0a20 2020 2020 2020  t None...       
-00006430: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00006440: 736c 6565 705f 7365 636f 6e64 733a 2066  sleep_seconds: f
-00006450: 6c6f 6174 2c20 6465 6661 756c 7420 302e  loat, default 0.
-00006460: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006470: 2020 3a70 6172 616d 2069 735f 6465 7461    :param is_deta
-00006480: 696c 5f72 6573 756c 743a 2062 6f6f 6c2c  il_result: bool,
-00006490: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
-000064a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000064b0: 203a 7061 7261 6d20 6966 5f69 676e 6f72   :param if_ignor
-000064c0: 655f 6c69 6d69 745f 6f66 5f6c 656e 6774  e_limit_of_lengt
-000064d0: 683a 2062 6f6f 6c2c 2064 6566 6175 6c74  h: bool, default
-000064e0: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
-000064f0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00006500: 6c69 6d69 745f 6f66 5f6c 656e 6774 683a  limit_of_length:
-00006510: 2069 6e74 2c20 6465 6661 756c 7420 3230   int, default 20
-00006520: 3030 302e 0d0a 2020 2020 2020 2020 2020  000...          
-00006530: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
-00006540: 6967 6e6f 7265 5f65 6d70 7479 5f71 7565  ignore_empty_que
-00006550: 7279 3a20 626f 6f6c 2c20 6465 6661 756c  ry: bool, defaul
-00006560: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-00006570: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00006580: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-00006590: 6166 7465 725f 6672 6571 3a20 696e 742c  after_freq: int,
-000065a0: 2064 6566 6175 6c74 2031 3030 302e 0d0a   default 1000...
-000065b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000065c0: 3a70 6172 616d 2075 7064 6174 655f 7365  :param update_se
-000065d0: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
-000065e0: 6e64 733a 2066 6c6f 6174 2c20 6465 6661  nds: float, defa
-000065f0: 756c 7420 3135 3030 2e0d 0a20 2020 2020  ult 1500...     
-00006600: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00006610: 6d20 6966 5f73 686f 775f 7469 6d65 5f73  m if_show_time_s
-00006620: 7461 743a 2062 6f6f 6c2c 2064 6566 6175  tat: bool, defau
-00006630: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
-00006640: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00006650: 6d20 7368 6f77 5f74 696d 655f 7374 6174  m show_time_stat
-00006660: 5f70 7265 6369 7369 6f6e 3a20 696e 742c  _precision: int,
-00006670: 2064 6566 6175 6c74 2032 2e0d 0a20 2020   default 2...   
-00006680: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00006690: 7261 6d20 6966 5f70 7269 6e74 5f77 6172  ram if_print_war
-000066a0: 6e69 6e67 3a20 626f 6f6c 2c20 6465 6661  ning: bool, defa
-000066b0: 756c 7420 5472 7565 2e0d 0a20 2020 2020  ult True...     
-000066c0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-000066d0: 6d20 7265 7365 745f 686f 7374 5f75 726c  m reset_host_url
-000066e0: 3a20 7374 722c 2064 6566 6175 6c74 204e  : str, default N
-000066f0: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
-00006700: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
-00006710: 6368 6563 6b5f 7265 7365 745f 686f 7374  check_reset_host
-00006720: 5f75 726c 3a20 626f 6f6c 2c20 6465 6661  _url: bool, defa
-00006730: 756c 7420 5472 7565 2e0d 0a20 2020 2020  ult True...     
-00006740: 2020 203a 7265 7475 726e 3a20 7374 7220     :return: str 
-00006750: 6f72 2064 6963 740d 0a20 2020 2020 2020  or dict..       
-00006760: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
-00006770: 7265 7365 745f 686f 7374 5f75 726c 203d  reset_host_url =
-00006780: 206b 7761 7267 732e 6765 7428 2772 6573   kwargs.get('res
-00006790: 6574 5f68 6f73 745f 7572 6c27 2c20 4e6f  et_host_url', No
-000067a0: 6e65 290d 0a20 2020 2020 2020 2069 6620  ne)..        if 
-000067b0: 7265 7365 745f 686f 7374 5f75 726c 2061  reset_host_url a
-000067c0: 6e64 2072 6573 6574 5f68 6f73 745f 7572  nd reset_host_ur
-000067d0: 6c20 213d 2073 656c 662e 686f 7374 5f75  l != self.host_u
-000067e0: 726c 3a0d 0a20 2020 2020 2020 2020 2020  rl:..           
-000067f0: 2069 6620 6b77 6172 6773 2e67 6574 2827   if kwargs.get('
-00006800: 6966 5f63 6865 636b 5f72 6573 6574 5f68  if_check_reset_h
-00006810: 6f73 745f 7572 6c27 2c20 5472 7565 2920  ost_url', True) 
-00006820: 616e 6420 6e6f 7420 7265 7365 745f 686f  and not reset_ho
-00006830: 7374 5f75 726c 5b3a 3235 5d20 3d3d 2027  st_url[:25] == '
-00006840: 6874 7470 733a 2f2f 7472 616e 736c 6174  https://translat
-00006850: 652e 676f 6f67 6c65 2e27 3a0d 0a20 2020  e.google.':..   
-00006860: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-00006870: 7365 2054 7261 6e73 6c61 746f 7245 7272  se TranslatorErr
-00006880: 6f72 0d0a 2020 2020 2020 2020 2020 2020  or..            
-00006890: 7365 6c66 2e68 6f73 745f 7572 6c20 3d20  self.host_url = 
-000068a0: 7265 7365 745f 686f 7374 5f75 726c 2e73  reset_host_url.s
-000068b0: 7472 6970 2827 2f27 290d 0a20 2020 2020  trip('/')..     
-000068c0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-000068d0: 2020 2020 2020 7573 655f 636e 5f63 6f6e        use_cn_con
-000068e0: 6469 7469 6f6e 203d 206b 7761 7267 732e  dition = kwargs.
-000068f0: 6765 7428 2769 665f 7573 655f 636e 5f68  get('if_use_cn_h
-00006900: 6f73 7427 2c20 4e6f 6e65 2920 6f72 2073  ost', None) or s
-00006910: 656c 662e 7365 7276 6572 5f72 6567 696f  elf.server_regio
-00006920: 6e20 3d3d 2027 434e 270d 0a20 2020 2020  n == 'CN'..     
-00006930: 2020 2020 2020 2073 656c 662e 686f 7374         self.host
-00006940: 5f75 726c 203d 2073 656c 662e 636e 5f68  _url = self.cn_h
-00006950: 6f73 745f 7572 6c20 6966 2075 7365 5f63  ost_url if use_c
-00006960: 6e5f 636f 6e64 6974 696f 6e20 656c 7365  n_condition else
-00006970: 2073 656c 662e 656e 5f68 6f73 745f 7572   self.en_host_ur
-00006980: 6c0d 0a0d 0a20 2020 2020 2020 2069 6620  l....        if 
-00006990: 7365 6c66 2e68 6f73 745f 7572 6c5b 2d32  self.host_url[-2
-000069a0: 3a5d 203d 3d20 2763 6e27 3a0d 0a20 2020  :] == 'cn':..   
-000069b0: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
-000069c0: 7261 6e73 6c61 746f 7245 7272 6f72 2827  ranslatorError('
-000069d0: 476f 6f67 6c65 2073 6572 7669 6365 2077  Google service w
-000069e0: 6173 206f 6666 6c69 6e65 2069 6e20 696e  as offline in in
-000069f0: 6c61 6e64 206f 6620 4368 696e 6120 6f6e  land of China on
-00006a00: 204f 6374 2032 3032 322e 2729 0d0a 0d0a   Oct 2022.')....
-00006a10: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
-00006a20: 5f75 726c 203d 2066 277b 7365 6c66 2e68  _url = f'{self.h
-00006a30: 6f73 745f 7572 6c7d 7b73 656c 662e 6170  ost_url}{self.ap
-00006a40: 695f 7572 6c5f 7061 7468 7d27 0d0a 2020  i_url_path}'..  
-00006a50: 2020 2020 2020 7365 6c66 2e68 6f73 745f        self.host_
-00006a60: 6865 6164 6572 7320 3d20 7365 6c66 2e68  headers = self.h
-00006a70: 6f73 745f 6865 6164 6572 7320 6f72 2073  ost_headers or s
-00006a80: 656c 662e 6765 745f 6865 6164 6572 7328  elf.get_headers(
-00006a90: 7365 6c66 2e68 6f73 745f 7572 6c2c 2069  self.host_url, i
-00006aa0: 665f 6170 693d 4661 6c73 6529 2020 2320  f_api=False)  # 
-00006ab0: 7265 7573 6520 636f 6f6b 6965 2068 6561  reuse cookie hea
-00006ac0: 6465 720d 0a20 2020 2020 2020 2073 656c  der..        sel
-00006ad0: 662e 6170 695f 6865 6164 6572 7320 3d20  f.api_headers = 
-00006ae0: 7365 6c66 2e67 6574 5f68 6561 6465 7273  self.get_headers
-00006af0: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
-00006b00: 6966 5f61 7069 3d54 7275 652c 2069 665f  if_api=True, if_
-00006b10: 7265 6665 7265 725f 666f 725f 686f 7374  referer_for_host
-00006b20: 3d54 7275 652c 2069 665f 616a 6178 5f66  =True, if_ajax_f
-00006b30: 6f72 5f61 7069 3d54 7275 6529 0d0a 0d0a  or_api=True)....
-00006b40: 2020 2020 2020 2020 7469 6d65 6f75 7420          timeout 
-00006b50: 3d20 6b77 6172 6773 2e67 6574 2827 7469  = kwargs.get('ti
-00006b60: 6d65 6f75 7427 2c20 4e6f 6e65 290d 0a20  meout', None).. 
-00006b70: 2020 2020 2020 2070 726f 7869 6573 203d         proxies =
-00006b80: 206b 7761 7267 732e 6765 7428 2770 726f   kwargs.get('pro
-00006b90: 7869 6573 272c 204e 6f6e 6529 0d0a 2020  xies', None)..  
-00006ba0: 2020 2020 2020 736c 6565 705f 7365 636f        sleep_seco
-00006bb0: 6e64 7320 3d20 6b77 6172 6773 2e67 6574  nds = kwargs.get
-00006bc0: 2827 736c 6565 705f 7365 636f 6e64 7327  ('sleep_seconds'
-00006bd0: 2c20 3029 0d0a 2020 2020 2020 2020 6966  , 0)..        if
-00006be0: 5f70 7269 6e74 5f77 6172 6e69 6e67 203d  _print_warning =
-00006bf0: 206b 7761 7267 732e 6765 7428 2769 665f   kwargs.get('if_
-00006c00: 7072 696e 745f 7761 726e 696e 6727 2c20  print_warning', 
-00006c10: 5472 7565 290d 0a20 2020 2020 2020 2069  True)..        i
-00006c20: 735f 6465 7461 696c 5f72 6573 756c 7420  s_detail_result 
-00006c30: 3d20 6b77 6172 6773 2e67 6574 2827 6973  = kwargs.get('is
-00006c40: 5f64 6574 6169 6c5f 7265 7375 6c74 272c  _detail_result',
-00006c50: 2046 616c 7365 290d 0a20 2020 2020 2020   False)..       
-00006c60: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-00006c70: 6166 7465 725f 6672 6571 203d 206b 7761  after_freq = kwa
-00006c80: 7267 732e 6765 7428 2775 7064 6174 655f  rgs.get('update_
-00006c90: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
-00006ca0: 6571 272c 2073 656c 662e 6465 6661 756c  eq', self.defaul
-00006cb0: 745f 7365 7373 696f 6e5f 6672 6571 290d  t_session_freq).
-00006cc0: 0a20 2020 2020 2020 2075 7064 6174 655f  .        update_
-00006cd0: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
-00006ce0: 636f 6e64 7320 3d20 6b77 6172 6773 2e67  conds = kwargs.g
-00006cf0: 6574 2827 7570 6461 7465 5f73 6573 7369  et('update_sessi
-00006d00: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-00006d10: 272c 2073 656c 662e 6465 6661 756c 745f  ', self.default_
-00006d20: 7365 7373 696f 6e5f 7365 636f 6e64 7329  session_seconds)
-00006d30: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
-00006d40: 6865 636b 5f69 6e70 7574 5f6c 696d 6974  heck_input_limit
-00006d50: 2871 7565 7279 5f74 6578 742c 2073 656c  (query_text, sel
-00006d60: 662e 696e 7075 745f 6c69 6d69 7429 0d0a  f.input_limit)..
-00006d70: 0d0a 2020 2020 2020 2020 6e6f 745f 7570  ..        not_up
-00006d80: 6461 7465 5f63 6f6e 645f 6672 6571 203d  date_cond_freq =
-00006d90: 2031 2069 6620 7365 6c66 2e71 7565 7279   1 if self.query
-00006da0: 5f63 6f75 6e74 2025 2075 7064 6174 655f  _count % update_
-00006db0: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
-00006dc0: 6571 2021 3d20 3020 656c 7365 2030 0d0a  eq != 0 else 0..
-00006dd0: 2020 2020 2020 2020 6e6f 745f 7570 6461          not_upda
-00006de0: 7465 5f63 6f6e 645f 7469 6d65 203d 2031  te_cond_time = 1
-00006df0: 2069 6620 7469 6d65 2e74 696d 6528 2920   if time.time() 
-00006e00: 2d20 7365 6c66 2e62 6567 696e 5f74 696d  - self.begin_tim
-00006e10: 6520 3c20 7570 6461 7465 5f73 6573 7369  e < update_sessi
-00006e20: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-00006e30: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
-00006e40: 2069 6620 6e6f 7420 2873 656c 662e 7365   if not (self.se
-00006e50: 7373 696f 6e20 616e 6420 7365 6c66 2e6c  ssion and self.l
-00006e60: 616e 6775 6167 655f 6d61 7020 616e 6420  anguage_map and 
-00006e70: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
-00006e80: 6672 6571 2061 6e64 206e 6f74 5f75 7064  freq and not_upd
-00006e90: 6174 655f 636f 6e64 5f74 696d 6529 3a0d  ate_cond_time):.
-00006ea0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00006eb0: 662e 6265 6769 6e5f 7469 6d65 203d 2074  f.begin_time = t
-00006ec0: 696d 652e 7469 6d65 2829 0d0a 2020 2020  ime.time()..    
-00006ed0: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
-00006ee0: 7369 6f6e 203d 2072 6571 7565 7374 732e  sion = requests.
-00006ef0: 5365 7373 696f 6e28 290d 0a20 2020 2020  Session()..     
-00006f00: 2020 2020 2020 2072 203d 2073 656c 662e         r = self.
-00006f10: 7365 7373 696f 6e2e 6765 7428 7365 6c66  session.get(self
-00006f20: 2e68 6f73 745f 7572 6c2c 2068 6561 6465  .host_url, heade
-00006f30: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
-00006f40: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
-00006f50: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
-00006f60: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
-00006f70: 2020 2020 2069 6620 2763 6f6e 7365 6e74       if 'consent
-00006f80: 2e67 6f6f 676c 652e 636f 6d27 203d 3d20  .google.com' == 
-00006f90: 7572 6c6c 6962 2e70 6172 7365 2e75 726c  urllib.parse.url
-00006fa0: 7061 7273 6528 722e 7572 6c29 2e68 6f73  parse(r.url).hos
-00006fb0: 746e 616d 653a 0d0a 2020 2020 2020 2020  tname:..        
-00006fc0: 2020 2020 2020 2020 7365 6c66 2e68 6f73          self.hos
-00006fd0: 745f 6865 6164 6572 732e 7570 6461 7465  t_headers.update
-00006fe0: 287b 2763 6f6f 6b69 6527 3a20 7365 6c66  ({'cookie': self
-00006ff0: 2e67 6574 5f63 6f6e 7365 6e74 5f63 6f6f  .get_consent_coo
-00007000: 6b69 6528 722e 7465 7874 297d 290d 0a20  kie(r.text)}).. 
-00007010: 2020 2020 2020 2020 2020 2020 2020 2068                 h
-00007020: 6f73 745f 6874 6d6c 203d 2073 656c 662e  ost_html = self.
-00007030: 7365 7373 696f 6e2e 6765 7428 7365 6c66  session.get(self
-00007040: 2e68 6f73 745f 7572 6c2c 2068 6561 6465  .host_url, heade
-00007050: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
-00007060: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
-00007070: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
-00007080: 726f 7869 6573 292e 7465 7874 0d0a 2020  roxies).text..  
-00007090: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-000070a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000070b0: 2068 6f73 745f 6874 6d6c 203d 2072 2e74   host_html = r.t
-000070c0: 6578 740d 0a20 2020 2020 2020 2020 2020  ext..           
-000070d0: 2064 6562 7567 5f6c 616e 675f 6b77 6172   debug_lang_kwar
-000070e0: 6773 203d 2073 656c 662e 6465 6275 675f  gs = self.debug_
-000070f0: 6c61 6e67 5f6b 7761 7267 7328 6672 6f6d  lang_kwargs(from
-00007100: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
-00007110: 6e67 7561 6765 2c20 7365 6c66 2e64 6566  nguage, self.def
-00007120: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
-00007130: 6765 2c20 6966 5f70 7269 6e74 5f77 6172  ge, if_print_war
-00007140: 6e69 6e67 290d 0a20 2020 2020 2020 2020  ning)..         
-00007150: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
-00007160: 5f6d 6170 203d 2073 656c 662e 6765 745f  _map = self.get_
-00007170: 6c61 6e67 7561 6765 5f6d 6170 2868 6f73  language_map(hos
-00007180: 745f 6874 6d6c 2c20 2a2a 6465 6275 675f  t_html, **debug_
-00007190: 6c61 6e67 5f6b 7761 7267 7329 0d0a 0d0a  lang_kwargs)....
-000071a0: 2020 2020 2020 2020 6672 6f6d 5f6c 616e          from_lan
-000071b0: 6775 6167 652c 2074 6f5f 6c61 6e67 7561  guage, to_langua
-000071c0: 6765 203d 2073 656c 662e 6368 6563 6b5f  ge = self.check_
-000071d0: 6c61 6e67 7561 6765 2866 726f 6d5f 6c61  language(from_la
-000071e0: 6e67 7561 6765 2c20 746f 5f6c 616e 6775  nguage, to_langu
-000071f0: 6167 652c 2073 656c 662e 6c61 6e67 7561  age, self.langua
-00007200: 6765 5f6d 6170 2c20 6f75 7470 7574 5f7a  ge_map, output_z
-00007210: 683d 7365 6c66 2e6f 7574 7075 745f 7a68  h=self.output_zh
-00007220: 290d 0a0d 0a20 2020 2020 2020 2072 7063  )....        rpc
-00007230: 5f64 6174 6120 3d20 7365 6c66 2e67 6574  _data = self.get
-00007240: 5f72 7063 2871 7565 7279 5f74 6578 742c  _rpc(query_text,
-00007250: 2066 726f 6d5f 6c61 6e67 7561 6765 2c20   from_language, 
-00007260: 746f 5f6c 616e 6775 6167 6529 0d0a 2020  to_language)..  
-00007270: 2020 2020 2020 7270 635f 6461 7461 203d        rpc_data =
-00007280: 2075 726c 6c69 622e 7061 7273 652e 7572   urllib.parse.ur
-00007290: 6c65 6e63 6f64 6528 7270 635f 6461 7461  lencode(rpc_data
-000072a0: 290d 0a20 2020 2020 2020 2072 203d 2073  )..        r = s
-000072b0: 656c 662e 7365 7373 696f 6e2e 706f 7374  elf.session.post
-000072c0: 2873 656c 662e 6170 695f 7572 6c2c 2068  (self.api_url, h
-000072d0: 6561 6465 7273 3d73 656c 662e 6170 695f  eaders=self.api_
-000072e0: 6865 6164 6572 732c 2064 6174 613d 7270  headers, data=rp
-000072f0: 635f 6461 7461 2c20 7469 6d65 6f75 743d  c_data, timeout=
-00007300: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
-00007310: 3d70 726f 7869 6573 290d 0a20 2020 2020  =proxies)..     
-00007320: 2020 2072 2e72 6169 7365 5f66 6f72 5f73     r.raise_for_s
-00007330: 7461 7475 7328 290d 0a20 2020 2020 2020  tatus()..       
-00007340: 206a 736f 6e5f 6461 7461 203d 206a 736f   json_data = jso
-00007350: 6e2e 6c6f 6164 7328 722e 7465 7874 5b36  n.loads(r.text[6
-00007360: 3a5d 290d 0a20 2020 2020 2020 2064 6174  :])..        dat
-00007370: 6120 3d20 6a73 6f6e 2e6c 6f61 6473 286a  a = json.loads(j
-00007380: 736f 6e5f 6461 7461 5b30 5d5b 325d 290d  son_data[0][2]).
-00007390: 0a20 2020 2020 2020 2074 696d 652e 736c  .        time.sl
-000073a0: 6565 7028 736c 6565 705f 7365 636f 6e64  eep(sleep_second
-000073b0: 7329 0d0a 2020 2020 2020 2020 7365 6c66  s)..        self
-000073c0: 2e71 7565 7279 5f63 6f75 6e74 202b 3d20  .query_count += 
-000073d0: 310d 0a20 2020 2020 2020 2072 6574 7572  1..        retur
-000073e0: 6e20 7b27 6461 7461 273a 2064 6174 617d  n {'data': data}
-000073f0: 2069 6620 6973 5f64 6574 6169 6c5f 7265   if is_detail_re
-00007400: 7375 6c74 2065 6c73 6520 2720 272e 6a6f  sult else ' '.jo
-00007410: 696e 285b 785b 305d 2066 6f72 2078 2069  in([x[0] for x i
-00007420: 6e20 2864 6174 615b 315d 5b30 5d5b 305d  n (data[1][0][0]
-00007430: 5b35 5d20 6f72 2064 6174 615b 315d 5b30  [5] or data[1][0
-00007440: 5d29 2069 6620 785b 305d 5d29 0d0a 0d0a  ]) if x[0]])....
-00007450: 0d0a 636c 6173 7320 4261 6964 7556 3128  ..class BaiduV1(
-00007460: 5473 6529 3a0d 0a20 2020 2064 6566 205f  Tse):..    def _
-00007470: 5f69 6e69 745f 5f28 7365 6c66 293a 0d0a  _init__(self):..
-00007480: 2020 2020 2020 2020 7375 7065 7228 292e          super().
-00007490: 5f5f 696e 6974 5f5f 2829 0d0a 2020 2020  __init__()..    
-000074a0: 2020 2020 7365 6c66 2e62 6567 696e 5f74      self.begin_t
-000074b0: 696d 6520 3d20 7469 6d65 2e74 696d 6528  ime = time.time(
-000074c0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-000074d0: 686f 7374 5f75 726c 203d 2027 6874 7470  host_url = 'http
-000074e0: 733a 2f2f 6661 6e79 692e 6261 6964 752e  s://fanyi.baidu.
-000074f0: 636f 6d27 0d0a 2020 2020 2020 2020 7365  com'..        se
-00007500: 6c66 2e61 7069 5f75 726c 203d 2027 6874  lf.api_url = 'ht
-00007510: 7470 733a 2f2f 6661 6e79 692e 6261 6964  tps://fanyi.baid
-00007520: 752e 636f 6d2f 7472 616e 7361 7069 270d  u.com/transapi'.
-00007530: 0a20 2020 2020 2020 2073 656c 662e 6765  .        self.ge
-00007540: 745f 6c61 6e67 5f75 726c 203d 204e 6f6e  t_lang_url = Non
-00007550: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
-00007560: 6765 745f 6c61 6e67 5f75 726c 5f70 6174  get_lang_url_pat
-00007570: 7465 726e 203d 2027 6874 7470 733a 2f2f  tern = 'https://
-00007580: 6661 6e79 692d 6364 6e2e 6364 6e2e 6263  fanyi-cdn.cdn.bc
-00007590: 6562 6f73 2e63 6f6d 2f77 6562 5374 6174  ebos.com/webStat
-000075a0: 6963 2f74 7261 6e73 6c61 7469 6f6e 2f6a  ic/translation/j
-000075b0: 732f 696e 6465 782e 282e 2a3f 292e 6a73  s/index.(.*?).js
-000075c0: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
-000075d0: 686f 7374 5f68 6561 6465 7273 203d 2073  host_headers = s
-000075e0: 656c 662e 6765 745f 6865 6164 6572 7328  elf.get_headers(
-000075f0: 7365 6c66 2e68 6f73 745f 7572 6c2c 2069  self.host_url, i
-00007600: 665f 6170 693d 4661 6c73 6529 0d0a 2020  f_api=False)..  
-00007610: 2020 2020 2020 7365 6c66 2e61 7069 5f68        self.api_h
-00007620: 6561 6465 7273 203d 2073 656c 662e 6765  eaders = self.ge
-00007630: 745f 6865 6164 6572 7328 7365 6c66 2e68  t_headers(self.h
-00007640: 6f73 745f 7572 6c2c 2069 665f 6170 693d  ost_url, if_api=
-00007650: 5472 7565 290d 0a20 2020 2020 2020 2073  True)..        s
-00007660: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
-00007670: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
-00007680: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
-00007690: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-000076a0: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
-000076b0: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
-000076c0: 2e6f 7574 7075 745f 7a68 203d 2027 7a68  .output_zh = 'zh
-000076d0: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
-000076e0: 696e 7075 745f 6c69 6d69 7420 3d20 696e  input_limit = in
-000076f0: 7428 3565 3329 0d0a 2020 2020 2020 2020  t(5e3)..        
-00007700: 7365 6c66 2e64 6566 6175 6c74 5f66 726f  self.default_fro
-00007710: 6d5f 6c61 6e67 7561 6765 203d 2073 656c  m_language = sel
-00007720: 662e 6f75 7470 7574 5f7a 680d 0a0d 0a20  f.output_zh.... 
-00007730: 2020 2023 2040 5473 652e 6465 6275 675f     # @Tse.debug_
-00007740: 6c61 6e67 7561 6765 5f6d 6170 0d0a 2020  language_map..  
-00007750: 2020 2320 6465 6620 6765 745f 6c61 6e67    # def get_lang
-00007760: 7561 6765 5f6d 6170 2873 656c 662c 2068  uage_map(self, h
-00007770: 6f73 745f 6874 6d6c 3a20 7374 722c 202a  ost_html: str, *
-00007780: 2a6b 7761 7267 733a 204c 616e 674d 6170  *kwargs: LangMap
-00007790: 4b77 6172 6773 5479 7065 2920 2d3e 2064  KwargsType) -> d
-000077a0: 6963 743a 0d0a 2020 2020 2320 2020 2020  ict:..    #     
-000077b0: 6c61 6e67 5f73 7472 203d 2072 652e 636f  lang_str = re.co
-000077c0: 6d70 696c 6528 276c 616e 674d 6170 3a20  mpile('langMap: 
-000077d0: 7b28 2e2a 3f29 7d27 292e 7365 6172 6368  {(.*?)}').search
-000077e0: 2868 6f73 745f 6874 6d6c 2e72 6570 6c61  (host_html.repla
-000077f0: 6365 2827 5c6e 272c 2027 2729 2e72 6570  ce('\n', '').rep
-00007800: 6c61 6365 2827 2020 272c 2027 2729 292e  lace('  ', '')).
-00007810: 6772 6f75 7028 295b 383a 5d0d 0a20 2020  group()[8:]..   
-00007820: 2023 2020 2020 2072 6574 7572 6e20 6578   #     return ex
-00007830: 6563 6a73 2e65 7661 6c28 6c61 6e67 5f73  ecjs.eval(lang_s
-00007840: 7472 290d 0a0d 0a20 2020 2040 5473 652e  tr)....    @Tse.
-00007850: 6465 6275 675f 6c61 6e67 7561 6765 5f6d  debug_language_m
-00007860: 6170 0d0a 2020 2020 6465 6620 6765 745f  ap..    def get_
-00007870: 6c61 6e67 7561 6765 5f6d 6170 2873 656c  language_map(sel
-00007880: 662c 206c 616e 675f 7572 6c3a 2073 7472  f, lang_url: str
-00007890: 2c20 7373 3a20 5365 7373 696f 6e54 7970  , ss: SessionTyp
-000078a0: 652c 2068 6561 6465 7273 3a20 6469 6374  e, headers: dict
-000078b0: 2c20 7469 6d65 6f75 743a 204f 7074 696f  , timeout: Optio
-000078c0: 6e61 6c5b 666c 6f61 745d 2c20 7072 6f78  nal[float], prox
-000078d0: 6965 733a 204f 7074 696f 6e61 6c5b 6469  ies: Optional[di
-000078e0: 6374 5d2c 202a 2a6b 7761 7267 733a 204c  ct], **kwargs: L
-000078f0: 616e 674d 6170 4b77 6172 6773 5479 7065  angMapKwargsType
-00007900: 2920 2d3e 2064 6963 743a 0d0a 2020 2020  ) -> dict:..    
-00007910: 2020 2020 6a73 5f68 746d 6c20 3d20 7373      js_html = ss
-00007920: 2e67 6574 286c 616e 675f 7572 6c2c 2068  .get(lang_url, h
-00007930: 6561 6465 7273 3d68 6561 6465 7273 2c20  eaders=headers, 
-00007940: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
-00007950: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
-00007960: 292e 7465 7874 0d0a 2020 2020 2020 2020  ).text..        
-00007970: 6c61 6e67 5f73 7472 203d 2072 652e 636f  lang_str = re.co
-00007980: 6d70 696c 6528 2765 7870 6f72 7473 3d7b  mpile('exports={
-00007990: 6175 746f 3a28 2e2a 3f29 7d7d 7d7d 2c27  auto:(.*?)}}}},'
-000079a0: 292e 7365 6172 6368 286a 735f 6874 6d6c  ).search(js_html
-000079b0: 292e 6772 6f75 7028 295b 383a 2d33 5d0d  ).group()[8:-3].
-000079c0: 0a20 2020 2020 2020 206c 616e 675f 6c69  .        lang_li
-000079d0: 7374 203d 2072 652e 636f 6d70 696c 6528  st = re.compile(
-000079e0: 2728 5c5c 772b 293a 7b7a 684e 616d 653a  '(\\w+):{zhName:
-000079f0: 2729 2e66 696e 6461 6c6c 286c 616e 675f  ').findall(lang_
-00007a00: 7374 7229 0d0a 2020 2020 2020 2020 6c61  str)..        la
-00007a10: 6e67 5f6c 6973 7420 3d20 736f 7274 6564  ng_list = sorted
-00007a20: 286c 6973 7428 7365 7428 6c61 6e67 5f6c  (list(set(lang_l
-00007a30: 6973 7429 2929 0d0a 2020 2020 2020 2020  ist)))..        
-00007a40: 7265 7475 726e 207b 7d2e 6672 6f6d 6b65  return {}.fromke
-00007a50: 7973 286c 616e 675f 6c69 7374 2c20 6c61  ys(lang_list, la
-00007a60: 6e67 5f6c 6973 7429 0d0a 0d0a 2020 2020  ng_list)....    
-00007a70: 4054 7365 2e74 696d 655f 7374 6174 0d0a  @Tse.time_stat..
-00007a80: 2020 2020 4054 7365 2e63 6865 636b 5f71      @Tse.check_q
-00007a90: 7565 7279 0d0a 2020 2020 6465 6620 6261  uery..    def ba
-00007aa0: 6964 755f 6170 6928 7365 6c66 2c20 7175  idu_api(self, qu
-00007ab0: 6572 795f 7465 7874 3a20 7374 722c 2066  ery_text: str, f
-00007ac0: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
-00007ad0: 7220 3d20 2761 7574 6f27 2c20 746f 5f6c  r = 'auto', to_l
-00007ae0: 616e 6775 6167 653a 2073 7472 203d 2027  anguage: str = '
-00007af0: 656e 272c 202a 2a6b 7761 7267 733a 2041  en', **kwargs: A
-00007b00: 7069 4b77 6172 6773 5479 7065 2920 2d3e  piKwargsType) ->
-00007b10: 2055 6e69 6f6e 5b73 7472 2c20 6469 6374   Union[str, dict
-00007b20: 5d3a 0d0a 2020 2020 2020 2020 2222 220d  ]:..        """.
-00007b30: 0a20 2020 2020 2020 2068 7474 7073 3a2f  .        https:/
-00007b40: 2f66 616e 7969 2e62 6169 6475 2e63 6f6d  /fanyi.baidu.com
-00007b50: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
-00007b60: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
-00007b70: 2c20 6d75 7374 2e0d 0a20 2020 2020 2020  , must...       
-00007b80: 203a 7061 7261 6d20 6672 6f6d 5f6c 616e   :param from_lan
-00007b90: 6775 6167 653a 2073 7472 2c20 6465 6661  guage: str, defa
-00007ba0: 756c 7420 2761 7574 6f27 2e0d 0a20 2020  ult 'auto'...   
-00007bb0: 2020 2020 203a 7061 7261 6d20 746f 5f6c       :param to_l
-00007bc0: 616e 6775 6167 653a 2073 7472 2c20 6465  anguage: str, de
-00007bd0: 6661 756c 7420 2765 6e27 2e0d 0a20 2020  fault 'en'...   
-00007be0: 2020 2020 203a 7061 7261 6d20 2a2a 6b77       :param **kw
-00007bf0: 6172 6773 3a0d 0a20 2020 2020 2020 2020  args:..         
-00007c00: 2020 2020 2020 203a 7061 7261 6d20 7469         :param ti
-00007c10: 6d65 6f75 743a 2066 6c6f 6174 2c20 6465  meout: float, de
-00007c20: 6661 756c 7420 4e6f 6e65 2e0d 0a20 2020  fault None...   
-00007c30: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00007c40: 7261 6d20 7072 6f78 6965 733a 2064 6963  ram proxies: dic
-00007c50: 742c 2064 6566 6175 6c74 204e 6f6e 652e  t, default None.
-00007c60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00007c70: 2020 3a70 6172 616d 2073 6c65 6570 5f73    :param sleep_s
-00007c80: 6563 6f6e 6473 3a20 666c 6f61 742c 2064  econds: float, d
-00007c90: 6566 6175 6c74 2030 2e0d 0a20 2020 2020  efault 0...     
-00007ca0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00007cb0: 6d20 6973 5f64 6574 6169 6c5f 7265 7375  m is_detail_resu
-00007cc0: 6c74 3a20 626f 6f6c 2c20 6465 6661 756c  lt: bool, defaul
-00007cd0: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-00007ce0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00007cf0: 2069 665f 6967 6e6f 7265 5f6c 696d 6974   if_ignore_limit
-00007d00: 5f6f 665f 6c65 6e67 7468 3a20 626f 6f6c  _of_length: bool
-00007d10: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-00007d20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00007d30: 2020 3a70 6172 616d 206c 696d 6974 5f6f    :param limit_o
-00007d40: 665f 6c65 6e67 7468 3a20 696e 742c 2064  f_length: int, d
-00007d50: 6566 6175 6c74 2032 3030 3030 2e0d 0a20  efault 20000... 
-00007d60: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-00007d70: 7061 7261 6d20 6966 5f69 676e 6f72 655f  param if_ignore_
-00007d80: 656d 7074 795f 7175 6572 793a 2062 6f6f  empty_query: boo
-00007d90: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
-00007da0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00007db0: 2020 203a 7061 7261 6d20 7570 6461 7465     :param update
-00007dc0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-00007dd0: 7265 713a 2069 6e74 2c20 6465 6661 756c  req: int, defaul
-00007de0: 7420 3130 3030 2e0d 0a20 2020 2020 2020  t 1000...       
-00007df0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00007e00: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
-00007e10: 6674 6572 5f73 6563 6f6e 6473 3a20 666c  fter_seconds: fl
-00007e20: 6f61 742c 2064 6566 6175 6c74 2031 3530  oat, default 150
-00007e30: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
-00007e40: 2020 2020 3a70 6172 616d 2069 665f 7368      :param if_sh
-00007e50: 6f77 5f74 696d 655f 7374 6174 3a20 626f  ow_time_stat: bo
-00007e60: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
-00007e70: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-00007e80: 2020 2020 3a70 6172 616d 2073 686f 775f      :param show_
-00007e90: 7469 6d65 5f73 7461 745f 7072 6563 6973  time_stat_precis
-00007ea0: 696f 6e3a 2069 6e74 2c20 6465 6661 756c  ion: int, defaul
-00007eb0: 7420 322e 0d0a 2020 2020 2020 2020 2020  t 2...          
-00007ec0: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
-00007ed0: 7072 696e 745f 7761 726e 696e 673a 2062  print_warning: b
-00007ee0: 6f6f 6c2c 2064 6566 6175 6c74 2054 7275  ool, default Tru
-00007ef0: 652e 0d0a 2020 2020 2020 2020 3a72 6574  e...        :ret
-00007f00: 7572 6e3a 2073 7472 206f 7220 6469 6374  urn: str or dict
-00007f10: 0d0a 2020 2020 2020 2020 2222 220d 0a0d  ..        """...
-00007f20: 0a20 2020 2020 2020 2074 696d 656f 7574  .        timeout
-00007f30: 203d 206b 7761 7267 732e 6765 7428 2774   = kwargs.get('t
-00007f40: 696d 656f 7574 272c 204e 6f6e 6529 0d0a  imeout', None)..
-00007f50: 2020 2020 2020 2020 7072 6f78 6965 7320          proxies 
-00007f60: 3d20 6b77 6172 6773 2e67 6574 2827 7072  = kwargs.get('pr
-00007f70: 6f78 6965 7327 2c20 4e6f 6e65 290d 0a20  oxies', None).. 
-00007f80: 2020 2020 2020 2073 6c65 6570 5f73 6563         sleep_sec
-00007f90: 6f6e 6473 203d 206b 7761 7267 732e 6765  onds = kwargs.ge
-00007fa0: 7428 2773 6c65 6570 5f73 6563 6f6e 6473  t('sleep_seconds
-00007fb0: 272c 2030 290d 0a20 2020 2020 2020 2069  ', 0)..        i
-00007fc0: 665f 7072 696e 745f 7761 726e 696e 6720  f_print_warning 
-00007fd0: 3d20 6b77 6172 6773 2e67 6574 2827 6966  = kwargs.get('if
-00007fe0: 5f70 7269 6e74 5f77 6172 6e69 6e67 272c  _print_warning',
-00007ff0: 2054 7275 6529 0d0a 2020 2020 2020 2020   True)..        
-00008000: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
-00008010: 203d 206b 7761 7267 732e 6765 7428 2769   = kwargs.get('i
-00008020: 735f 6465 7461 696c 5f72 6573 756c 7427  s_detail_result'
-00008030: 2c20 4661 6c73 6529 0d0a 2020 2020 2020  , False)..      
-00008040: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
-00008050: 5f61 6674 6572 5f66 7265 7120 3d20 6b77  _after_freq = kw
-00008060: 6172 6773 2e67 6574 2827 7570 6461 7465  args.get('update
-00008070: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-00008080: 7265 7127 2c20 7365 6c66 2e64 6566 6175  req', self.defau
-00008090: 6c74 5f73 6573 7369 6f6e 5f66 7265 7129  lt_session_freq)
-000080a0: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
-000080b0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
-000080c0: 6563 6f6e 6473 203d 206b 7761 7267 732e  econds = kwargs.
-000080d0: 6765 7428 2775 7064 6174 655f 7365 7373  get('update_sess
-000080e0: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
-000080f0: 7327 2c20 7365 6c66 2e64 6566 6175 6c74  s', self.default
-00008100: 5f73 6573 7369 6f6e 5f73 6563 6f6e 6473  _session_seconds
-00008110: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00008120: 6368 6563 6b5f 696e 7075 745f 6c69 6d69  check_input_limi
-00008130: 7428 7175 6572 795f 7465 7874 2c20 7365  t(query_text, se
-00008140: 6c66 2e69 6e70 7574 5f6c 696d 6974 290d  lf.input_limit).
-00008150: 0a0d 0a20 2020 2020 2020 206e 6f74 5f75  ...        not_u
-00008160: 7064 6174 655f 636f 6e64 5f66 7265 7120  pdate_cond_freq 
-00008170: 3d20 3120 6966 2073 656c 662e 7175 6572  = 1 if self.quer
-00008180: 795f 636f 756e 7420 2520 7570 6461 7465  y_count % update
-00008190: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-000081a0: 7265 7120 213d 2030 2065 6c73 6520 300d  req != 0 else 0.
-000081b0: 0a20 2020 2020 2020 206e 6f74 5f75 7064  .        not_upd
-000081c0: 6174 655f 636f 6e64 5f74 696d 6520 3d20  ate_cond_time = 
-000081d0: 3120 6966 2074 696d 652e 7469 6d65 2829  1 if time.time()
-000081e0: 202d 2073 656c 662e 6265 6769 6e5f 7469   - self.begin_ti
-000081f0: 6d65 203c 2075 7064 6174 655f 7365 7373  me < update_sess
-00008200: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
-00008210: 7320 656c 7365 2030 0d0a 2020 2020 2020  s else 0..      
-00008220: 2020 6966 206e 6f74 2028 7365 6c66 2e73    if not (self.s
-00008230: 6573 7369 6f6e 2061 6e64 2073 656c 662e  ession and self.
-00008240: 6c61 6e67 7561 6765 5f6d 6170 2061 6e64  language_map and
-00008250: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
-00008260: 5f66 7265 7120 616e 6420 6e6f 745f 7570  _freq and not_up
-00008270: 6461 7465 5f63 6f6e 645f 7469 6d65 293a  date_cond_time):
-00008280: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00008290: 6c66 2e62 6567 696e 5f74 696d 6520 3d20  lf.begin_time = 
-000082a0: 7469 6d65 2e74 696d 6528 290d 0a20 2020  time.time()..   
-000082b0: 2020 2020 2020 2020 2073 656c 662e 7365           self.se
-000082c0: 7373 696f 6e20 3d20 7265 7175 6573 7473  ssion = requests
-000082d0: 2e53 6573 7369 6f6e 2829 0d0a 2020 2020  .Session()..    
-000082e0: 2020 2020 2020 2020 5f20 3d20 7365 6c66          _ = self
-000082f0: 2e73 6573 7369 6f6e 2e67 6574 2873 656c  .session.get(sel
-00008300: 662e 686f 7374 5f75 726c 2c20 6865 6164  f.host_url, head
-00008310: 6572 733d 7365 6c66 2e68 6f73 745f 6865  ers=self.host_he
-00008320: 6164 6572 732c 2074 696d 656f 7574 3d74  aders, timeout=t
-00008330: 696d 656f 7574 2c20 7072 6f78 6965 733d  imeout, proxies=
-00008340: 7072 6f78 6965 7329 2020 2320 6d75 7374  proxies)  # must
-00008350: 2074 7769 6365 2c20 7365 6e64 2063 6f6f   twice, send coo
-00008360: 6b69 6573 2e0d 0a20 2020 2020 2020 2020  kies...         
-00008370: 2020 2068 6f73 745f 6874 6d6c 203d 2073     host_html = s
-00008380: 656c 662e 7365 7373 696f 6e2e 6765 7428  elf.session.get(
-00008390: 7365 6c66 2e68 6f73 745f 7572 6c2c 2068  self.host_url, h
-000083a0: 6561 6465 7273 3d73 656c 662e 686f 7374  eaders=self.host
-000083b0: 5f68 6561 6465 7273 2c20 7469 6d65 6f75  _headers, timeou
-000083c0: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
-000083d0: 6573 3d70 726f 7869 6573 292e 7465 7874  es=proxies).text
-000083e0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-000083f0: 6966 206e 6f74 2073 656c 662e 6765 745f  if not self.get_
-00008400: 6c61 6e67 5f75 726c 3a0d 0a20 2020 2020  lang_url:..     
-00008410: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00008420: 6765 745f 6c61 6e67 5f75 726c 203d 2072  get_lang_url = r
-00008430: 652e 636f 6d70 696c 6528 7365 6c66 2e67  e.compile(self.g
-00008440: 6574 5f6c 616e 675f 7572 6c5f 7061 7474  et_lang_url_patt
-00008450: 6572 6e29 2e73 6561 7263 6828 686f 7374  ern).search(host
-00008460: 5f68 746d 6c29 2e67 726f 7570 2829 0d0a  _html).group()..
-00008470: 0d0a 2020 2020 2020 2020 2020 2020 6465  ..            de
-00008480: 6275 675f 6c61 6e67 5f6b 7761 7267 7320  bug_lang_kwargs 
-00008490: 3d20 7365 6c66 2e64 6562 7567 5f6c 616e  = self.debug_lan
-000084a0: 675f 6b77 6172 6773 2866 726f 6d5f 6c61  g_kwargs(from_la
-000084b0: 6e67 7561 6765 2c20 746f 5f6c 616e 6775  nguage, to_langu
-000084c0: 6167 652c 2073 656c 662e 6465 6661 756c  age, self.defaul
-000084d0: 745f 6672 6f6d 5f6c 616e 6775 6167 652c  t_from_language,
-000084e0: 2069 665f 7072 696e 745f 7761 726e 696e   if_print_warnin
-000084f0: 6729 0d0a 2020 2020 2020 2020 2020 2020  g)..            
-00008500: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
-00008510: 7020 3d20 7365 6c66 2e67 6574 5f6c 616e  p = self.get_lan
-00008520: 6775 6167 655f 6d61 7028 7365 6c66 2e67  guage_map(self.g
-00008530: 6574 5f6c 616e 675f 7572 6c2c 2073 656c  et_lang_url, sel
-00008540: 662e 7365 7373 696f 6e2c 2073 656c 662e  f.session, self.
-00008550: 686f 7374 5f68 6561 6465 7273 2c20 7469  host_headers, ti
-00008560: 6d65 6f75 742c 2070 726f 7869 6573 2c20  meout, proxies, 
-00008570: 2a2a 6465 6275 675f 6c61 6e67 5f6b 7761  **debug_lang_kwa
-00008580: 7267 7329 0d0a 0d0a 2020 2020 2020 2020  rgs)....        
-00008590: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
-000085a0: 6f5f 6c61 6e67 7561 6765 203d 2073 656c  o_language = sel
-000085b0: 662e 6368 6563 6b5f 6c61 6e67 7561 6765  f.check_language
-000085c0: 2866 726f 6d5f 6c61 6e67 7561 6765 2c20  (from_language, 
-000085d0: 746f 5f6c 616e 6775 6167 652c 2073 656c  to_language, sel
-000085e0: 662e 6c61 6e67 7561 6765 5f6d 6170 2c20  f.language_map, 
-000085f0: 6f75 7470 7574 5f7a 683d 7365 6c66 2e6f  output_zh=self.o
-00008600: 7574 7075 745f 7a68 290d 0a0d 0a20 2020  utput_zh)....   
-00008610: 2020 2020 2070 6179 6c6f 6164 203d 207b       payload = {
-00008620: 0d0a 2020 2020 2020 2020 2020 2020 2766  ..            'f
-00008630: 726f 6d27 3a20 6672 6f6d 5f6c 616e 6775  rom': from_langu
-00008640: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
-00008650: 2020 2774 6f27 3a20 746f 5f6c 616e 6775    'to': to_langu
-00008660: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
-00008670: 2020 2771 7565 7279 273a 2071 7565 7279    'query': query
-00008680: 5f74 6578 742c 0d0a 2020 2020 2020 2020  _text,..        
-00008690: 2020 2020 2773 6f75 7263 6527 3a20 2774      'source': 't
-000086a0: 7874 272c 0d0a 2020 2020 2020 2020 7d0d  xt',..        }.
-000086b0: 0a20 2020 2020 2020 2072 203d 2073 656c  .        r = sel
-000086c0: 662e 7365 7373 696f 6e2e 706f 7374 2873  f.session.post(s
-000086d0: 656c 662e 6170 695f 7572 6c2c 2064 6174  elf.api_url, dat
-000086e0: 613d 7061 796c 6f61 642c 2068 6561 6465  a=payload, heade
-000086f0: 7273 3d73 656c 662e 6170 695f 6865 6164  rs=self.api_head
-00008700: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
-00008710: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
-00008720: 6f78 6965 7329 0d0a 2020 2020 2020 2020  oxies)..        
-00008730: 722e 7261 6973 655f 666f 725f 7374 6174  r.raise_for_stat
-00008740: 7573 2829 0d0a 2020 2020 2020 2020 6461  us()..        da
-00008750: 7461 203d 2072 2e6a 736f 6e28 290d 0a20  ta = r.json().. 
-00008760: 2020 2020 2020 2074 696d 652e 736c 6565         time.slee
-00008770: 7028 736c 6565 705f 7365 636f 6e64 7329  p(sleep_seconds)
-00008780: 0d0a 2020 2020 2020 2020 7365 6c66 2e71  ..        self.q
-00008790: 7565 7279 5f63 6f75 6e74 202b 3d20 310d  uery_count += 1.
-000087a0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000087b0: 6461 7461 2069 6620 6973 5f64 6574 6169  data if is_detai
-000087c0: 6c5f 7265 7375 6c74 2065 6c73 6520 275c  l_result else '\
-000087d0: 6e27 2e6a 6f69 6e28 5b69 7465 6d5b 2764  n'.join([item['d
-000087e0: 7374 275d 2066 6f72 2069 7465 6d20 696e  st'] for item in
-000087f0: 2064 6174 615b 2764 6174 6127 5d5d 290d   data['data']]).
-00008800: 0a0d 0a0d 0a63 6c61 7373 2042 6169 6475  .....class Baidu
-00008810: 5632 2854 7365 293a 0d0a 2020 2020 6465  V2(Tse):..    de
-00008820: 6620 5f5f 696e 6974 5f5f 2873 656c 6629  f __init__(self)
-00008830: 3a0d 0a20 2020 2020 2020 2073 7570 6572  :..        super
-00008840: 2829 2e5f 5f69 6e69 745f 5f28 290d 0a20  ().__init__().. 
-00008850: 2020 2020 2020 2073 656c 662e 6265 6769         self.begi
-00008860: 6e5f 7469 6d65 203d 2074 696d 652e 7469  n_time = time.ti
-00008870: 6d65 2829 0d0a 2020 2020 2020 2020 7365  me()..        se
-00008880: 6c66 2e68 6f73 745f 7572 6c20 3d20 2768  lf.host_url = 'h
-00008890: 7474 7073 3a2f 2f66 616e 7969 2e62 6169  ttps://fanyi.bai
-000088a0: 6475 2e63 6f6d 270d 0a20 2020 2020 2020  du.com'..       
-000088b0: 2073 656c 662e 6170 695f 7572 6c20 3d20   self.api_url = 
-000088c0: 2768 7474 7073 3a2f 2f66 616e 7969 2e62  'https://fanyi.b
-000088d0: 6169 6475 2e63 6f6d 2f76 3274 7261 6e73  aidu.com/v2trans
-000088e0: 6170 6927 0d0a 2020 2020 2020 2020 7365  api'..        se
-000088f0: 6c66 2e6c 616e 6764 6574 6563 745f 7572  lf.langdetect_ur
-00008900: 6c20 3d20 2768 7474 7073 3a2f 2f66 616e  l = 'https://fan
-00008910: 7969 2e62 6169 6475 2e63 6f6d 2f6c 616e  yi.baidu.com/lan
-00008920: 6764 6574 6563 7427 0d0a 2020 2020 2020  gdetect'..      
-00008930: 2020 7365 6c66 2e67 6574 5f73 6967 6e5f    self.get_sign_
-00008940: 7572 6c20 3d20 2768 7474 7073 3a2f 2f66  url = 'https://f
-00008950: 616e 7969 2d63 646e 2e63 646e 2e62 6365  anyi-cdn.cdn.bce
-00008960: 626f 732e 636f 6d2f 7374 6174 6963 2f74  bos.com/static/t
-00008970: 7261 6e73 6c61 7469 6f6e 2f70 6b67 2f69  ranslation/pkg/i
-00008980: 6e64 6578 5f62 6433 3663 6566 2e6a 7327  ndex_bd36cef.js'
-00008990: 0d0a 2020 2020 2020 2020 7365 6c66 2e67  ..        self.g
-000089a0: 6574 5f6c 616e 675f 7572 6c20 3d20 4e6f  et_lang_url = No
-000089b0: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
-000089c0: 2e67 6574 5f6c 616e 675f 7572 6c5f 7061  .get_lang_url_pa
-000089d0: 7474 6572 6e20 3d20 2768 7474 7073 3a2f  ttern = 'https:/
-000089e0: 2f66 616e 7969 2d63 646e 2e63 646e 2e62  /fanyi-cdn.cdn.b
-000089f0: 6365 626f 732e 636f 6d2f 7765 6253 7461  cebos.com/webSta
-00008a00: 7469 632f 7472 616e 736c 6174 696f 6e2f  tic/translation/
-00008a10: 6a73 2f69 6e64 6578 2e28 2e2a 3f29 2e6a  js/index.(.*?).j
-00008a20: 7327 0d0a 2020 2020 2020 2020 7365 6c66  s'..        self
-00008a30: 2e61 6373 5f75 726c 203d 2027 6874 7470  .acs_url = 'http
-00008a40: 733a 2f2f 646c 7377 6272 2e62 6169 6475  s://dlswbr.baidu
-00008a50: 2e63 6f6d 2f68 6569 6368 612f 6d6d 2f7b  .com/heicha/mm/{
-00008a60: 697d 2f61 6373 2d7b 697d 2e6a 7327 2e66  i}/acs-{i}.js'.f
-00008a70: 6f72 6d61 7428 693d 3230 3630 290d 0a20  ormat(i=2060).. 
-00008a80: 2020 2020 2020 2073 656c 662e 686f 7374         self.host
-00008a90: 5f68 6561 6465 7273 203d 2073 656c 662e  _headers = self.
-00008aa0: 6765 745f 6865 6164 6572 7328 7365 6c66  get_headers(self
-00008ab0: 2e68 6f73 745f 7572 6c2c 2069 665f 6170  .host_url, if_ap
-00008ac0: 693d 4661 6c73 6529 0d0a 2020 2020 2020  i=False)..      
-00008ad0: 2020 7365 6c66 2e61 7069 5f68 6561 6465    self.api_heade
-00008ae0: 7273 203d 2073 656c 662e 6765 745f 6865  rs = self.get_he
-00008af0: 6164 6572 7328 7365 6c66 2e68 6f73 745f  aders(self.host_
-00008b00: 7572 6c2c 2069 665f 6170 693d 5472 7565  url, if_api=True
-00008b10: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00008b20: 6c61 6e67 7561 6765 5f6d 6170 203d 204e  language_map = N
-00008b30: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
-00008b40: 662e 7365 7373 696f 6e20 3d20 4e6f 6e65  f.session = None
-00008b50: 0d0a 2020 2020 2020 2020 7365 6c66 2e70  ..        self.p
-00008b60: 726f 6665 7373 696f 6e61 6c5f 6669 656c  rofessional_fiel
-00008b70: 6420 3d20 2827 636f 6d6d 6f6e 272c 2027  d = ('common', '
-00008b80: 6d65 6469 6369 6e65 272c 2027 656c 6563  medicine', 'elec
-00008b90: 7472 6f6e 6963 7327 2c20 276d 6563 6861  tronics', 'mecha
-00008ba0: 6e69 6373 272c 2027 6e6f 7665 6c27 290d  nics', 'novel').
-00008bb0: 0a20 2020 2020 2020 2073 656c 662e 746f  .        self.to
-00008bc0: 6b65 6e20 3d20 4e6f 6e65 0d0a 2020 2020  ken = None..    
-00008bd0: 2020 2020 7365 6c66 2e73 6967 6e20 3d20      self.sign = 
-00008be0: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-00008bf0: 6c66 2e61 6373 5f74 6f6b 656e 203d 204e  lf.acs_token = N
-00008c00: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
-00008c10: 662e 7175 6572 795f 636f 756e 7420 3d20  f.query_count = 
-00008c20: 300d 0a20 2020 2020 2020 2073 656c 662e  0..        self.
-00008c30: 6f75 7470 7574 5f7a 6820 3d20 277a 6827  output_zh = 'zh'
-00008c40: 0d0a 2020 2020 2020 2020 7365 6c66 2e69  ..        self.i
-00008c50: 6e70 7574 5f6c 696d 6974 203d 2069 6e74  nput_limit = int
-00008c60: 2835 6533 290d 0a20 2020 2020 2020 2073  (5e3)..        s
-00008c70: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
-00008c80: 5f6c 616e 6775 6167 6520 3d20 7365 6c66  _language = self
-00008c90: 2e6f 7574 7075 745f 7a68 0d0a 0d0a 2020  .output_zh....  
-00008ca0: 2020 4054 7365 2e64 6562 7567 5f6c 616e    @Tse.debug_lan
-00008cb0: 6775 6167 655f 6d61 700d 0a20 2020 2064  guage_map..    d
-00008cc0: 6566 2067 6574 5f6c 616e 6775 6167 655f  ef get_language_
-00008cd0: 6d61 7028 7365 6c66 2c20 6c61 6e67 5f75  map(self, lang_u
-00008ce0: 726c 3a20 7374 722c 2073 733a 2053 6573  rl: str, ss: Ses
-00008cf0: 7369 6f6e 5479 7065 2c20 6865 6164 6572  sionType, header
-00008d00: 733a 2064 6963 742c 2074 696d 656f 7574  s: dict, timeout
-00008d10: 3a20 4f70 7469 6f6e 616c 5b66 6c6f 6174  : Optional[float
-00008d20: 5d2c 2070 726f 7869 6573 3a20 4f70 7469  ], proxies: Opti
-00008d30: 6f6e 616c 5b64 6963 745d 2c20 2a2a 6b77  onal[dict], **kw
-00008d40: 6172 6773 3a20 4c61 6e67 4d61 704b 7761  args: LangMapKwa
-00008d50: 7267 7354 7970 6529 202d 3e20 6469 6374  rgsType) -> dict
-00008d60: 3a0d 0a20 2020 2020 2020 206a 735f 6874  :..        js_ht
-00008d70: 6d6c 203d 2073 732e 6765 7428 6c61 6e67  ml = ss.get(lang
-00008d80: 5f75 726c 2c20 6865 6164 6572 733d 6865  _url, headers=he
-00008d90: 6164 6572 732c 2074 696d 656f 7574 3d74  aders, timeout=t
-00008da0: 696d 656f 7574 2c20 7072 6f78 6965 733d  imeout, proxies=
-00008db0: 7072 6f78 6965 7329 2e74 6578 740d 0a20  proxies).text.. 
-00008dc0: 2020 2020 2020 206c 616e 675f 7374 7220         lang_str 
-00008dd0: 3d20 7265 2e63 6f6d 7069 6c65 2827 6578  = re.compile('ex
-00008de0: 706f 7274 733d 7b61 7574 6f3a 282e 2a3f  ports={auto:(.*?
-00008df0: 297d 7d7d 7d2c 2729 2e73 6561 7263 6828  )}}}},').search(
-00008e00: 6a73 5f68 746d 6c29 2e67 726f 7570 2829  js_html).group()
-00008e10: 5b38 3a2d 335d 0d0a 2020 2020 2020 2020  [8:-3]..        
-00008e20: 6c61 6e67 5f6c 6973 7420 3d20 7265 2e63  lang_list = re.c
-00008e30: 6f6d 7069 6c65 2827 285c 5c77 2b29 3a7b  ompile('(\\w+):{
-00008e40: 7a68 4e61 6d65 3a27 292e 6669 6e64 616c  zhName:').findal
-00008e50: 6c28 6c61 6e67 5f73 7472 290d 0a20 2020  l(lang_str)..   
-00008e60: 2020 2020 206c 616e 675f 6c69 7374 203d       lang_list =
-00008e70: 2073 6f72 7465 6428 6c69 7374 2873 6574   sorted(list(set
-00008e80: 286c 616e 675f 6c69 7374 2929 290d 0a20  (lang_list))).. 
-00008e90: 2020 2020 2020 2072 6574 7572 6e20 7b7d         return {}
-00008ea0: 2e66 726f 6d6b 6579 7328 6c61 6e67 5f6c  .fromkeys(lang_l
-00008eb0: 6973 742c 206c 616e 675f 6c69 7374 290d  ist, lang_list).
-00008ec0: 0a0d 0a20 2020 2064 6566 2067 6574 5f73  ...    def get_s
-00008ed0: 6967 6e28 7365 6c66 2c20 7175 6572 795f  ign(self, query_
-00008ee0: 7465 7874 3a20 7374 722c 2068 6f73 745f  text: str, host_
-00008ef0: 6874 6d6c 3a20 7374 722c 2073 733a 2053  html: str, ss: S
-00008f00: 6573 7369 6f6e 5479 7065 2c20 6865 6164  essionType, head
-00008f10: 6572 733a 2064 6963 742c 2074 696d 656f  ers: dict, timeo
-00008f20: 7574 3a20 666c 6f61 742c 2070 726f 7869  ut: float, proxi
-00008f30: 6573 3a20 6469 6374 2920 2d3e 2073 7472  es: dict) -> str
-00008f40: 3a0d 0a20 2020 2020 2020 2067 746b 5f6c  :..        gtk_l
-00008f50: 6973 7420 3d20 7265 2e63 6f6d 7069 6c65  ist = re.compile
-00008f60: 2822 2222 7769 6e64 6f77 2e67 746b 203d  ("""window.gtk =
-00008f70: 2027 282e 2a3f 2927 3b7c 7769 6e64 6f77   '(.*?)';|window
-00008f80: 2e67 746b 203d 2022 282e 2a3f 2922 3b22  .gtk = "(.*?)";"
-00008f90: 2222 292e 6669 6e64 616c 6c28 686f 7374  "").findall(host
-00008fa0: 5f68 746d 6c29 5b30 5d0d 0a20 2020 2020  _html)[0]..     
-00008fb0: 2020 2067 746b 203d 2067 746b 5f6c 6973     gtk = gtk_lis
-00008fc0: 745b 305d 206f 7220 6774 6b5f 6c69 7374  t[0] or gtk_list
-00008fd0: 5b31 5d0d 0a0d 0a20 2020 2020 2020 2073  [1]....        s
-00008fe0: 6967 6e5f 6874 6d6c 203d 2073 732e 6765  ign_html = ss.ge
-00008ff0: 7428 7365 6c66 2e67 6574 5f73 6967 6e5f  t(self.get_sign_
-00009000: 7572 6c2c 2068 6561 6465 7273 3d68 6561  url, headers=hea
-00009010: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
-00009020: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
-00009030: 726f 7869 6573 292e 7465 7874 0d0a 2020  roxies).text..  
-00009040: 2020 2020 2020 6265 6769 6e5f 6c61 6265        begin_labe
-00009050: 6c20 3d20 2764 6566 696e 6528 2274 7261  l = 'define("tra
-00009060: 6e73 6c61 7469 6f6e 3a77 6964 6765 742f  nslation:widget/
-00009070: 7472 616e 736c 6174 652f 696e 7075 742f  translate/input/
-00009080: 7047 7261 6222 2c66 756e 6374 696f 6e28  pGrab",function(
-00009090: 722c 6f2c 7429 7b27 0d0a 2020 2020 2020  r,o,t){'..      
-000090a0: 2020 656e 645f 6c61 6265 6c20 3d20 2776    end_label = 'v
-000090b0: 6172 2069 3d6e 756c 6c3b 742e 6578 706f  ar i=null;t.expo
-000090c0: 7274 733d 657d 293b 270d 0a20 2020 2020  rts=e});'..     
-000090d0: 2020 2073 6967 6e5f 6a73 203d 2073 6967     sign_js = sig
-000090e0: 6e5f 6874 6d6c 5b73 6967 6e5f 6874 6d6c  n_html[sign_html
-000090f0: 2e66 696e 6428 6265 6769 6e5f 6c61 6265  .find(begin_labe
-00009100: 6c29 202b 206c 656e 2862 6567 696e 5f6c  l) + len(begin_l
-00009110: 6162 656c 293a 7369 676e 5f68 746d 6c2e  abel):sign_html.
-00009120: 6669 6e64 2865 6e64 5f6c 6162 656c 295d  find(end_label)]
-00009130: 0d0a 2020 2020 2020 2020 7369 676e 5f6a  ..        sign_j
-00009140: 7320 3d20 7369 676e 5f6a 732e 7265 706c  s = sign_js.repl
-00009150: 6163 6528 2766 756e 6374 696f 6e20 6528  ace('function e(
-00009160: 7229 272c 2027 6675 6e63 7469 6f6e 2065  r)', 'function e
-00009170: 2872 2c69 2927 290d 0a20 2020 2020 2020  (r,i)')..       
-00009180: 2072 6574 7572 6e20 6578 6563 6a73 2e63   return execjs.c
-00009190: 6f6d 7069 6c65 2873 6967 6e5f 6a73 292e  ompile(sign_js).
-000091a0: 6361 6c6c 2827 6527 2c20 7175 6572 795f  call('e', query_
-000091b0: 7465 7874 2c20 6774 6b29 0d0a 0d0a 2020  text, gtk)....  
-000091c0: 2020 6465 6620 6765 745f 746b 2873 656c    def get_tk(sel
-000091d0: 662c 2068 6f73 745f 6874 6d6c 3a20 7374  f, host_html: st
-000091e0: 7229 202d 3e20 7374 723a 0d0a 2020 2020  r) -> str:..    
-000091f0: 2020 2020 746b 5f6c 6973 7420 3d20 7265      tk_list = re
-00009200: 2e63 6f6d 7069 6c65 2822 2222 746f 6b65  .compile("""toke
-00009210: 6e3a 2027 282e 2a3f 2927 2c7c 746f 6b65  n: '(.*?)',|toke
-00009220: 6e3a 2022 282e 2a3f 2922 2c22 2222 292e  n: "(.*?)",""").
-00009230: 6669 6e64 616c 6c28 686f 7374 5f68 746d  findall(host_htm
-00009240: 6c29 5b30 5d0d 0a20 2020 2020 2020 2072  l)[0]..        r
-00009250: 6574 7572 6e20 746b 5f6c 6973 745b 305d  eturn tk_list[0]
-00009260: 206f 7220 746b 5f6c 6973 745b 315d 0d0a   or tk_list[1]..
-00009270: 0d0a 2020 2020 2320 6465 6620 6765 745f  ..    # def get_
-00009280: 6163 735f 746f 6b65 6e28 7365 6c66 293a  acs_token(self):
-00009290: 0d0a 2020 2020 2320 2020 2020 7061 7373  ..    #     pass
-000092a0: 0d0a 0d0a 2020 2020 4054 7365 2e74 696d  ....    @Tse.tim
-000092b0: 655f 7374 6174 0d0a 2020 2020 4054 7365  e_stat..    @Tse
-000092c0: 2e63 6865 636b 5f71 7565 7279 0d0a 2020  .check_query..  
-000092d0: 2020 6465 6620 6261 6964 755f 6170 6928    def baidu_api(
-000092e0: 7365 6c66 2c20 7175 6572 795f 7465 7874  self, query_text
-000092f0: 3a20 7374 722c 2066 726f 6d5f 6c61 6e67  : str, from_lang
-00009300: 7561 6765 3a20 7374 7220 3d20 2761 7574  uage: str = 'aut
-00009310: 6f27 2c20 746f 5f6c 616e 6775 6167 653a  o', to_language:
-00009320: 2073 7472 203d 2027 656e 272c 202a 2a6b   str = 'en', **k
-00009330: 7761 7267 733a 2041 7069 4b77 6172 6773  wargs: ApiKwargs
-00009340: 5479 7065 2920 2d3e 2055 6e69 6f6e 5b73  Type) -> Union[s
-00009350: 7472 2c20 6469 6374 5d3a 0d0a 2020 2020  tr, dict]:..    
-00009360: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00009370: 2068 7474 7073 3a2f 2f66 616e 7969 2e62   https://fanyi.b
-00009380: 6169 6475 2e63 6f6d 0d0a 2020 2020 2020  aidu.com..      
-00009390: 2020 3a70 6172 616d 2071 7565 7279 5f74    :param query_t
-000093a0: 6578 743a 2073 7472 2c20 6d75 7374 2e0d  ext: str, must..
-000093b0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-000093c0: 6672 6f6d 5f6c 616e 6775 6167 653a 2073  from_language: s
-000093d0: 7472 2c20 6465 6661 756c 7420 2761 7574  tr, default 'aut
-000093e0: 6f27 2e0d 0a20 2020 2020 2020 203a 7061  o'...        :pa
-000093f0: 7261 6d20 746f 5f6c 616e 6775 6167 653a  ram to_language:
-00009400: 2073 7472 2c20 6465 6661 756c 7420 2765   str, default 'e
-00009410: 6e27 2e0d 0a20 2020 2020 2020 203a 7061  n'...        :pa
-00009420: 7261 6d20 2a2a 6b77 6172 6773 3a0d 0a20  ram **kwargs:.. 
-00009430: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-00009440: 7061 7261 6d20 7469 6d65 6f75 743a 2066  param timeout: f
-00009450: 6c6f 6174 2c20 6465 6661 756c 7420 4e6f  loat, default No
-00009460: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
-00009470: 2020 2020 203a 7061 7261 6d20 7072 6f78       :param prox
-00009480: 6965 733a 2064 6963 742c 2064 6566 6175  ies: dict, defau
-00009490: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
-000094a0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-000094b0: 2073 6c65 6570 5f73 6563 6f6e 6473 3a20   sleep_seconds: 
-000094c0: 666c 6f61 742c 2064 6566 6175 6c74 2030  float, default 0
-000094d0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-000094e0: 2020 203a 7061 7261 6d20 6973 5f64 6574     :param is_det
-000094f0: 6169 6c5f 7265 7375 6c74 3a20 626f 6f6c  ail_result: bool
-00009500: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-00009510: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00009520: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
-00009530: 7265 5f6c 696d 6974 5f6f 665f 6c65 6e67  re_limit_of_leng
-00009540: 7468 3a20 626f 6f6c 2c20 6465 6661 756c  th: bool, defaul
-00009550: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-00009560: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00009570: 206c 696d 6974 5f6f 665f 6c65 6e67 7468   limit_of_length
-00009580: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
-00009590: 3030 3030 2e0d 0a20 2020 2020 2020 2020  0000...         
-000095a0: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-000095b0: 5f69 676e 6f72 655f 656d 7074 795f 7175  _ignore_empty_qu
-000095c0: 6572 793a 2062 6f6f 6c2c 2064 6566 6175  ery: bool, defau
-000095d0: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
-000095e0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-000095f0: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
-00009600: 5f61 6674 6572 5f66 7265 713a 2069 6e74  _after_freq: int
-00009610: 2c20 6465 6661 756c 7420 3130 3030 2e0d  , default 1000..
-00009620: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009630: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
-00009640: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-00009650: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
-00009660: 6175 6c74 2031 3530 302e 0d0a 2020 2020  ault 1500...    
-00009670: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00009680: 616d 2069 665f 7368 6f77 5f74 696d 655f  am if_show_time_
-00009690: 7374 6174 3a20 626f 6f6c 2c20 6465 6661  stat: bool, defa
-000096a0: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-000096b0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-000096c0: 616d 2073 686f 775f 7469 6d65 5f73 7461  am show_time_sta
-000096d0: 745f 7072 6563 6973 696f 6e3a 2069 6e74  t_precision: int
-000096e0: 2c20 6465 6661 756c 7420 322e 0d0a 2020  , default 2...  
-000096f0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00009700: 6172 616d 2069 665f 7072 696e 745f 7761  aram if_print_wa
-00009710: 726e 696e 673a 2062 6f6f 6c2c 2064 6566  rning: bool, def
-00009720: 6175 6c74 2054 7275 652e 0d0a 2020 2020  ault True...    
-00009730: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00009740: 616d 2070 726f 6665 7373 696f 6e61 6c5f  am professional_
-00009750: 6669 656c 643a 2073 7472 2c20 6465 6661  field: str, defa
-00009760: 756c 7420 2763 6f6d 6d6f 6e27 2e20 4368  ult 'common'. Ch
-00009770: 6f6f 7365 2066 726f 6d20 2827 636f 6d6d  oose from ('comm
-00009780: 6f6e 272c 2027 6d65 6469 6369 6e65 272c  on', 'medicine',
-00009790: 2027 656c 6563 7472 6f6e 6963 7327 2c20   'electronics', 
-000097a0: 276d 6563 6861 6e69 6373 272c 2027 6e6f  'mechanics', 'no
-000097b0: 7665 6c27 290d 0a20 2020 2020 2020 203a  vel')..        :
-000097c0: 7265 7475 726e 3a20 7374 7220 6f72 2064  return: str or d
-000097d0: 6963 740d 0a20 2020 2020 2020 2022 2222  ict..        """
-000097e0: 0d0a 0d0a 2020 2020 2020 2020 7573 655f  ....        use_
-000097f0: 646f 6d61 696e 203d 206b 7761 7267 732e  domain = kwargs.
-00009800: 6765 7428 2770 726f 6665 7373 696f 6e61  get('professiona
-00009810: 6c5f 6669 656c 6427 2c20 2763 6f6d 6d6f  l_field', 'commo
-00009820: 6e27 290d 0a20 2020 2020 2020 2069 6620  n')..        if 
-00009830: 7573 655f 646f 6d61 696e 206e 6f74 2069  use_domain not i
-00009840: 6e20 7365 6c66 2e70 726f 6665 7373 696f  n self.professio
-00009850: 6e61 6c5f 6669 656c 643a 2020 2320 6f6e  nal_field:  # on
-00009860: 6c79 2073 7570 706f 7274 207a 682d 656e  ly support zh-en
-00009870: 2c20 656e 2d7a 682e 0d0a 2020 2020 2020  , en-zh...      
-00009880: 2020 2020 2020 7261 6973 6520 5472 616e        raise Tran
-00009890: 736c 6174 6f72 4572 726f 720d 0a0d 0a20  slatorError.... 
-000098a0: 2020 2020 2020 2074 696d 656f 7574 203d         timeout =
-000098b0: 206b 7761 7267 732e 6765 7428 2774 696d   kwargs.get('tim
-000098c0: 656f 7574 272c 204e 6f6e 6529 0d0a 2020  eout', None)..  
-000098d0: 2020 2020 2020 7072 6f78 6965 7320 3d20        proxies = 
-000098e0: 6b77 6172 6773 2e67 6574 2827 7072 6f78  kwargs.get('prox
-000098f0: 6965 7327 2c20 4e6f 6e65 290d 0a20 2020  ies', None)..   
-00009900: 2020 2020 2073 6c65 6570 5f73 6563 6f6e       sleep_secon
-00009910: 6473 203d 206b 7761 7267 732e 6765 7428  ds = kwargs.get(
-00009920: 2773 6c65 6570 5f73 6563 6f6e 6473 272c  'sleep_seconds',
-00009930: 2030 290d 0a20 2020 2020 2020 2069 665f   0)..        if_
-00009940: 7072 696e 745f 7761 726e 696e 6720 3d20  print_warning = 
-00009950: 6b77 6172 6773 2e67 6574 2827 6966 5f70  kwargs.get('if_p
-00009960: 7269 6e74 5f77 6172 6e69 6e67 272c 2054  rint_warning', T
-00009970: 7275 6529 0d0a 2020 2020 2020 2020 6973  rue)..        is
-00009980: 5f64 6574 6169 6c5f 7265 7375 6c74 203d  _detail_result =
-00009990: 206b 7761 7267 732e 6765 7428 2769 735f   kwargs.get('is_
-000099a0: 6465 7461 696c 5f72 6573 756c 7427 2c20  detail_result', 
-000099b0: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
-000099c0: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
-000099d0: 6674 6572 5f66 7265 7120 3d20 6b77 6172  fter_freq = kwar
-000099e0: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
-000099f0: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
-00009a00: 7127 2c20 7365 6c66 2e64 6566 6175 6c74  q', self.default
-00009a10: 5f73 6573 7369 6f6e 5f66 7265 7129 0d0a  _session_freq)..
-00009a20: 2020 2020 2020 2020 7570 6461 7465 5f73          update_s
-00009a30: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-00009a40: 6f6e 6473 203d 206b 7761 7267 732e 6765  onds = kwargs.ge
-00009a50: 7428 2775 7064 6174 655f 7365 7373 696f  t('update_sessio
-00009a60: 6e5f 6166 7465 725f 7365 636f 6e64 7327  n_after_seconds'
-00009a70: 2c20 7365 6c66 2e64 6566 6175 6c74 5f73  , self.default_s
-00009a80: 6573 7369 6f6e 5f73 6563 6f6e 6473 290d  ession_seconds).
-00009a90: 0a20 2020 2020 2020 2073 656c 662e 6368  .        self.ch
-00009aa0: 6563 6b5f 696e 7075 745f 6c69 6d69 7428  eck_input_limit(
-00009ab0: 7175 6572 795f 7465 7874 2c20 7365 6c66  query_text, self
-00009ac0: 2e69 6e70 7574 5f6c 696d 6974 290d 0a0d  .input_limit)...
-00009ad0: 0a20 2020 2020 2020 206e 6f74 5f75 7064  .        not_upd
-00009ae0: 6174 655f 636f 6e64 5f66 7265 7120 3d20  ate_cond_freq = 
-00009af0: 3120 6966 2073 656c 662e 7175 6572 795f  1 if self.query_
-00009b00: 636f 756e 7420 2520 7570 6461 7465 5f73  count % update_s
-00009b10: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
-00009b20: 7120 213d 2030 2065 6c73 6520 300d 0a20  q != 0 else 0.. 
-00009b30: 2020 2020 2020 206e 6f74 5f75 7064 6174         not_updat
-00009b40: 655f 636f 6e64 5f74 696d 6520 3d20 3120  e_cond_time = 1 
-00009b50: 6966 2074 696d 652e 7469 6d65 2829 202d  if time.time() -
-00009b60: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
-00009b70: 203c 2075 7064 6174 655f 7365 7373 696f   < update_sessio
-00009b80: 6e5f 6166 7465 725f 7365 636f 6e64 7320  n_after_seconds 
-00009b90: 656c 7365 2030 0d0a 2020 2020 2020 2020  else 0..        
-00009ba0: 6966 206e 6f74 2028 7365 6c66 2e73 6573  if not (self.ses
-00009bb0: 7369 6f6e 2061 6e64 2073 656c 662e 6c61  sion and self.la
-00009bc0: 6e67 7561 6765 5f6d 6170 2061 6e64 206e  nguage_map and n
-00009bd0: 6f74 5f75 7064 6174 655f 636f 6e64 5f66  ot_update_cond_f
-00009be0: 7265 7120 616e 6420 6e6f 745f 7570 6461  req and not_upda
-00009bf0: 7465 5f63 6f6e 645f 7469 6d65 2061 6e64  te_cond_time and
-00009c00: 2073 656c 662e 746f 6b65 6e20 616e 6420   self.token and 
-00009c10: 7365 6c66 2e73 6967 6e29 3a0d 0a20 2020  self.sign):..   
-00009c20: 2020 2020 2020 2020 2073 656c 662e 6265           self.be
-00009c30: 6769 6e5f 7469 6d65 203d 2074 696d 652e  gin_time = time.
-00009c40: 7469 6d65 2829 0d0a 2020 2020 2020 2020  time()..        
-00009c50: 2020 2020 7365 6c66 2e73 6573 7369 6f6e      self.session
-00009c60: 203d 2072 6571 7565 7374 732e 5365 7373   = requests.Sess
-00009c70: 696f 6e28 290d 0a20 2020 2020 2020 2020  ion()..         
-00009c80: 2020 205f 203d 2073 656c 662e 7365 7373     _ = self.sess
-00009c90: 696f 6e2e 6765 7428 7365 6c66 2e68 6f73  ion.get(self.hos
-00009ca0: 745f 7572 6c2c 2068 6561 6465 7273 3d73  t_url, headers=s
-00009cb0: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
-00009cc0: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
-00009cd0: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
-00009ce0: 6573 2920 2023 206d 7573 7420 7477 6963  es)  # must twic
-00009cf0: 652c 2073 656e 6420 636f 6f6b 6965 732e  e, send cookies.
-00009d00: 0d0a 2020 2020 2020 2020 2020 2020 686f  ..            ho
-00009d10: 7374 5f68 746d 6c20 3d20 7365 6c66 2e73  st_html = self.s
-00009d20: 6573 7369 6f6e 2e67 6574 2873 656c 662e  ession.get(self.
-00009d30: 686f 7374 5f75 726c 2c20 6865 6164 6572  host_url, header
-00009d40: 733d 7365 6c66 2e68 6f73 745f 6865 6164  s=self.host_head
-00009d50: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
-00009d60: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
-00009d70: 6f78 6965 7329 2e74 6578 740d 0a20 2020  oxies).text..   
-00009d80: 2020 2020 2020 2020 2073 656c 662e 746f           self.to
-00009d90: 6b65 6e20 3d20 7365 6c66 2e67 6574 5f74  ken = self.get_t
-00009da0: 6b28 686f 7374 5f68 746d 6c29 0d0a 2020  k(host_html)..  
-00009db0: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
-00009dc0: 6967 6e20 3d20 7365 6c66 2e67 6574 5f73  ign = self.get_s
-00009dd0: 6967 6e28 7175 6572 795f 7465 7874 2c20  ign(query_text, 
-00009de0: 686f 7374 5f68 746d 6c2c 2073 656c 662e  host_html, self.
-00009df0: 7365 7373 696f 6e2c 2073 656c 662e 686f  session, self.ho
-00009e00: 7374 5f68 6561 6465 7273 2c20 7469 6d65  st_headers, time
-00009e10: 6f75 742c 2070 726f 7869 6573 290d 0a0d  out, proxies)...
-00009e20: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00009e30: 6e6f 7420 7365 6c66 2e67 6574 5f6c 616e  not self.get_lan
-00009e40: 675f 7572 6c3a 0d0a 2020 2020 2020 2020  g_url:..        
-00009e50: 2020 2020 2020 2020 7365 6c66 2e67 6574          self.get
-00009e60: 5f6c 616e 675f 7572 6c20 3d20 7265 2e63  _lang_url = re.c
-00009e70: 6f6d 7069 6c65 2873 656c 662e 6765 745f  ompile(self.get_
-00009e80: 6c61 6e67 5f75 726c 5f70 6174 7465 726e  lang_url_pattern
-00009e90: 292e 7365 6172 6368 2868 6f73 745f 6874  ).search(host_ht
-00009ea0: 6d6c 292e 6772 6f75 7028 290d 0a0d 0a20  ml).group().... 
-00009eb0: 2020 2020 2020 2020 2020 2064 6562 7567             debug
-00009ec0: 5f6c 616e 675f 6b77 6172 6773 203d 2073  _lang_kwargs = s
-00009ed0: 656c 662e 6465 6275 675f 6c61 6e67 5f6b  elf.debug_lang_k
-00009ee0: 7761 7267 7328 6672 6f6d 5f6c 616e 6775  wargs(from_langu
-00009ef0: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
-00009f00: 2c20 7365 6c66 2e64 6566 6175 6c74 5f66  , self.default_f
-00009f10: 726f 6d5f 6c61 6e67 7561 6765 2c20 6966  rom_language, if
-00009f20: 5f70 7269 6e74 5f77 6172 6e69 6e67 290d  _print_warning).
-00009f30: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00009f40: 662e 6c61 6e67 7561 6765 5f6d 6170 203d  f.language_map =
-00009f50: 2073 656c 662e 6765 745f 6c61 6e67 7561   self.get_langua
-00009f60: 6765 5f6d 6170 2873 656c 662e 6765 745f  ge_map(self.get_
-00009f70: 6c61 6e67 5f75 726c 2c20 7365 6c66 2e73  lang_url, self.s
-00009f80: 6573 7369 6f6e 2c20 7365 6c66 2e68 6f73  ession, self.hos
-00009f90: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
-00009fa0: 7574 2c20 7072 6f78 6965 732c 202a 2a64  ut, proxies, **d
-00009fb0: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
-00009fc0: 290d 0a0d 0a20 2020 2020 2020 2066 726f  )....        fro
-00009fd0: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
-00009fe0: 616e 6775 6167 6520 3d20 7365 6c66 2e63  anguage = self.c
-00009ff0: 6865 636b 5f6c 616e 6775 6167 6528 6672  heck_language(fr
-0000a000: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-0000a010: 6c61 6e67 7561 6765 2c20 7365 6c66 2e6c  language, self.l
-0000a020: 616e 6775 6167 655f 6d61 702c 206f 7574  anguage_map, out
-0000a030: 7075 745f 7a68 3d73 656c 662e 6f75 7470  put_zh=self.outp
-0000a040: 7574 5f7a 6829 0d0a 2020 2020 2020 2020  ut_zh)..        
-0000a050: 6966 2066 726f 6d5f 6c61 6e67 7561 6765  if from_language
-0000a060: 203d 3d20 2761 7574 6f27 3a0d 0a20 2020   == 'auto':..   
-0000a070: 2020 2020 2020 2020 2072 6573 203d 2073           res = s
-0000a080: 656c 662e 7365 7373 696f 6e2e 706f 7374  elf.session.post
-0000a090: 2873 656c 662e 6c61 6e67 6465 7465 6374  (self.langdetect
-0000a0a0: 5f75 726c 2c20 6865 6164 6572 733d 7365  _url, headers=se
-0000a0b0: 6c66 2e61 7069 5f68 6561 6465 7273 2c20  lf.api_headers, 
-0000a0c0: 6461 7461 3d7b 2271 7565 7279 223a 2071  data={"query": q
-0000a0d0: 7565 7279 5f74 6578 747d 2c20 7469 6d65  uery_text}, time
-0000a0e0: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
-0000a0f0: 7869 6573 3d70 726f 7869 6573 290d 0a20  xies=proxies).. 
-0000a100: 2020 2020 2020 2020 2020 2066 726f 6d5f             from_
-0000a110: 6c61 6e67 7561 6765 203d 2072 6573 2e6a  language = res.j
-0000a120: 736f 6e28 295b 276c 616e 275d 0d0a 0d0a  son()['lan']....
-0000a130: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
-0000a140: 207b 2266 726f 6d22 3a20 6672 6f6d 5f6c   {"from": from_l
-0000a150: 616e 6775 6167 652c 2022 746f 223a 2074  anguage, "to": t
-0000a160: 6f5f 6c61 6e67 7561 6765 7d0d 0a20 2020  o_language}..   
-0000a170: 2020 2020 2070 6179 6c6f 6164 203d 207b       payload = {
-0000a180: 0d0a 2020 2020 2020 2020 2020 2020 2266  ..            "f
-0000a190: 726f 6d22 3a20 6672 6f6d 5f6c 616e 6775  rom": from_langu
-0000a1a0: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
-0000a1b0: 2020 2274 6f22 3a20 746f 5f6c 616e 6775    "to": to_langu
-0000a1c0: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
-0000a1d0: 2020 2271 7565 7279 223a 2071 7565 7279    "query": query
-0000a1e0: 5f74 6578 742c 2020 2320 6672 6f6d 2075  _text,  # from u
-0000a1f0: 726c 6c69 622e 7061 7273 6520 696d 706f  rllib.parse impo
-0000a200: 7274 2071 756f 7465 5f70 6c75 730d 0a20  rt quote_plus.. 
-0000a210: 2020 2020 2020 2020 2020 2022 7472 616e             "tran
-0000a220: 7374 7970 6522 3a20 2272 6561 6c74 696d  stype": "realtim
-0000a230: 6522 2c20 2023 205b 2274 7261 6e73 6c61  e",  # ["transla
-0000a240: 6e67 222c 2272 6561 6c74 696d 6522 5d0d  ng","realtime"].
-0000a250: 0a20 2020 2020 2020 2020 2020 2022 7369  .            "si
-0000a260: 6d70 6c65 5f6d 6561 6e73 5f66 6c61 6722  mple_means_flag"
-0000a270: 3a20 2233 222c 0d0a 2020 2020 2020 2020  : "3",..        
-0000a280: 2020 2020 2273 6967 6e22 3a20 7365 6c66      "sign": self
-0000a290: 2e73 6967 6e2c 0d0a 2020 2020 2020 2020  .sign,..        
-0000a2a0: 2020 2020 2274 6f6b 656e 223a 2073 656c      "token": sel
-0000a2b0: 662e 746f 6b65 6e2c 0d0a 2020 2020 2020  f.token,..      
-0000a2c0: 2020 2020 2020 2264 6f6d 6169 6e22 3a20        "domain": 
-0000a2d0: 7573 655f 646f 6d61 696e 2c0d 0a20 2020  use_domain,..   
-0000a2e0: 2020 2020 207d 0d0a 2020 2020 2020 2020       }..        
-0000a2f0: 7061 796c 6f61 6420 3d20 7572 6c6c 6962  payload = urllib
-0000a300: 2e70 6172 7365 2e75 726c 656e 636f 6465  .parse.urlencode
-0000a310: 2870 6179 6c6f 6164 292e 656e 636f 6465  (payload).encode
-0000a320: 2827 7574 662d 3827 290d 0a20 2020 2020  ('utf-8')..     
-0000a330: 2020 2023 2073 656c 662e 6170 695f 6865     # self.api_he
-0000a340: 6164 6572 732e 7570 6461 7465 287b 2741  aders.update({'A
-0000a350: 6373 2d54 6f6b 656e 273a 2073 656c 662e  cs-Token': self.
-0000a360: 6163 735f 746f 6b65 6e7d 290d 0a20 2020  acs_token})..   
-0000a370: 2020 2020 2072 203d 2073 656c 662e 7365       r = self.se
-0000a380: 7373 696f 6e2e 706f 7374 2873 656c 662e  ssion.post(self.
-0000a390: 6170 695f 7572 6c2c 2070 6172 616d 733d  api_url, params=
-0000a3a0: 7061 7261 6d73 2c20 6461 7461 3d70 6179  params, data=pay
-0000a3b0: 6c6f 6164 2c20 6865 6164 6572 733d 7365  load, headers=se
-0000a3c0: 6c66 2e61 7069 5f68 6561 6465 7273 2c20  lf.api_headers, 
-0000a3d0: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
-0000a3e0: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
-0000a3f0: 290d 0a20 2020 2020 2020 2072 2e72 6169  )..        r.rai
-0000a400: 7365 5f66 6f72 5f73 7461 7475 7328 290d  se_for_status().
-0000a410: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
-0000a420: 722e 6a73 6f6e 2829 0d0a 2020 2020 2020  r.json()..      
-0000a430: 2020 7469 6d65 2e73 6c65 6570 2873 6c65    time.sleep(sle
-0000a440: 6570 5f73 6563 6f6e 6473 290d 0a20 2020  ep_seconds)..   
-0000a450: 2020 2020 2073 656c 662e 7175 6572 795f       self.query_
-0000a460: 636f 756e 7420 2b3d 2031 0d0a 2020 2020  count += 1..    
-0000a470: 2020 2020 7265 7475 726e 2064 6174 6120      return data 
-0000a480: 6966 2069 735f 6465 7461 696c 5f72 6573  if is_detail_res
-0000a490: 756c 7420 656c 7365 2027 5c6e 272e 6a6f  ult else '\n'.jo
-0000a4a0: 696e 285b 785b 2764 7374 275d 2066 6f72  in([x['dst'] for
-0000a4b0: 2078 2069 6e20 6461 7461 5b27 7472 616e   x in data['tran
-0000a4c0: 735f 7265 7375 6c74 275d 5b27 6461 7461  s_result']['data
-0000a4d0: 275d 5d29 0d0a 0d0a 0d0a 636c 6173 7320  ']])......class 
-0000a4e0: 596f 7564 616f 5631 2854 7365 293a 0d0a  YoudaoV1(Tse):..
-0000a4f0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-0000a500: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-0000a510: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
-0000a520: 5f28 290d 0a20 2020 2020 2020 2073 656c  _()..        sel
-0000a530: 662e 6265 6769 6e5f 7469 6d65 203d 2074  f.begin_time = t
-0000a540: 696d 652e 7469 6d65 2829 0d0a 2020 2020  ime.time()..    
-0000a550: 2020 2020 7365 6c66 2e68 6f73 745f 7572      self.host_ur
-0000a560: 6c20 3d20 2768 7474 7073 3a2f 2f66 616e  l = 'https://fan
-0000a570: 7969 2e79 6f75 6461 6f2e 636f 6d27 0d0a  yi.youdao.com'..
-0000a580: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
-0000a590: 5f75 726c 203d 2027 6874 7470 733a 2f2f  _url = 'https://
-0000a5a0: 6661 6e79 692e 796f 7564 616f 2e63 6f6d  fanyi.youdao.com
-0000a5b0: 2f74 7261 6e73 6c61 7465 5f6f 3f73 6d61  /translate_o?sma
-0000a5c0: 7274 7265 7375 6c74 3d64 6963 7426 736d  rtresult=dict&sm
-0000a5d0: 6172 7472 6573 756c 743d 7275 6c65 270d  artresult=rule'.
-0000a5e0: 0a20 2020 2020 2020 2073 656c 662e 6c61  .        self.la
-0000a5f0: 6e67 7561 6765 5f75 726c 203d 2027 6874  nguage_url = 'ht
-0000a600: 7470 733a 2f2f 6170 692d 6f76 6572 6d69  tps://api-overmi
-0000a610: 6e64 2e79 6f75 6461 6f2e 636f 6d2f 6f70  nd.youdao.com/op
-0000a620: 656e 6170 692f 6765 742f 6c75 6e61 2f64  enapi/get/luna/d
-0000a630: 6963 742f 6c75 6e61 2d66 726f 6e74 2f70  ict/luna-front/p
-0000a640: 726f 642f 6c61 6e67 5479 7065 270d 0a20  rod/langType'.. 
-0000a650: 2020 2020 2020 2073 656c 662e 6765 745f         self.get_
-0000a660: 7369 676e 5f6f 6c64 5f75 726c 203d 2027  sign_old_url = '
-0000a670: 6874 7470 733a 2f2f 7368 6172 6564 2e79  https://shared.y
-0000a680: 6473 7461 7469 632e 636f 6d2f 6661 6e79  dstatic.com/fany
-0000a690: 692f 6e65 7777 6562 2f76 312e 302e 3239  i/newweb/v1.0.29
-0000a6a0: 2f73 6372 6970 7473 2f6e 6577 7765 622f  /scripts/newweb/
-0000a6b0: 6661 6e79 692e 6d69 6e2e 6a73 270d 0a20  fanyi.min.js'.. 
-0000a6c0: 2020 2020 2020 2073 656c 662e 6765 745f         self.get_
-0000a6d0: 7369 676e 5f75 726c 203d 204e 6f6e 650d  sign_url = None.
-0000a6e0: 0a20 2020 2020 2020 2073 656c 662e 6765  .        self.ge
-0000a6f0: 745f 7369 676e 5f70 6174 7465 726e 203d  t_sign_pattern =
-0000a700: 2027 6874 7470 733a 2f2f 7368 6172 6564   'https://shared
-0000a710: 2e79 6473 7461 7469 632e 636f 6d2f 6661  .ydstatic.com/fa
-0000a720: 6e79 692f 6e65 7777 6562 2f28 2e2a 3f29  nyi/newweb/(.*?)
-0000a730: 2f73 6372 6970 7473 2f6e 6577 7765 622f  /scripts/newweb/
-0000a740: 6661 6e79 692e 6d69 6e2e 6a73 270d 0a20  fanyi.min.js'.. 
-0000a750: 2020 2020 2020 2073 656c 662e 686f 7374         self.host
-0000a760: 5f68 6561 6465 7273 203d 2073 656c 662e  _headers = self.
-0000a770: 6765 745f 6865 6164 6572 7328 7365 6c66  get_headers(self
-0000a780: 2e68 6f73 745f 7572 6c2c 2069 665f 6170  .host_url, if_ap
-0000a790: 693d 4661 6c73 6529 0d0a 2020 2020 2020  i=False)..      
-0000a7a0: 2020 7365 6c66 2e61 7069 5f68 6561 6465    self.api_heade
-0000a7b0: 7273 203d 2073 656c 662e 6765 745f 6865  rs = self.get_he
-0000a7c0: 6164 6572 7328 7365 6c66 2e68 6f73 745f  aders(self.host_
-0000a7d0: 7572 6c2c 2069 665f 6170 693d 5472 7565  url, if_api=True
-0000a7e0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000a7f0: 6c61 6e67 7561 6765 5f6d 6170 203d 204e  language_map = N
-0000a800: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
-0000a810: 662e 7365 7373 696f 6e20 3d20 4e6f 6e65  f.session = None
-0000a820: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
-0000a830: 6967 6e5f 6b65 7920 3d20 4e6f 6e65 0d0a  ign_key = None..
-0000a840: 2020 2020 2020 2020 7365 6c66 2e71 7565          self.que
-0000a850: 7279 5f63 6f75 6e74 203d 2030 0d0a 2020  ry_count = 0..  
-0000a860: 2020 2020 2020 7365 6c66 2e6f 7574 7075        self.outpu
-0000a870: 745f 7a68 203d 2027 7a68 2d43 4853 270d  t_zh = 'zh-CHS'.
-0000a880: 0a20 2020 2020 2020 2073 656c 662e 696e  .        self.in
-0000a890: 7075 745f 6c69 6d69 7420 3d20 696e 7428  put_limit = int(
-0000a8a0: 3565 3329 0d0a 2020 2020 2020 2020 7365  5e3)..        se
-0000a8b0: 6c66 2e64 6566 6175 6c74 5f66 726f 6d5f  lf.default_from_
-0000a8c0: 6c61 6e67 7561 6765 203d 2073 656c 662e  language = self.
-0000a8d0: 6f75 7470 7574 5f7a 680d 0a0d 0a20 2020  output_zh....   
-0000a8e0: 2023 2040 5473 652e 6465 6275 675f 6c61   # @Tse.debug_la
-0000a8f0: 6e67 7561 6765 5f6d 6170 0d0a 2020 2020  nguage_map..    
-0000a900: 2320 6465 6620 6765 745f 6c61 6e67 7561  # def get_langua
-0000a910: 6765 5f6d 6170 2873 656c 662c 2068 6f73  ge_map(self, hos
-0000a920: 745f 6874 6d6c 3a20 7374 722c 202a 2a6b  t_html: str, **k
-0000a930: 7761 7267 733a 204c 616e 674d 6170 4b77  wargs: LangMapKw
-0000a940: 6172 6773 5479 7065 2920 2d3e 2064 6963  argsType) -> dic
-0000a950: 743a 0d0a 2020 2020 2320 2020 2020 6574  t:..    #     et
-0000a960: 203d 206c 786d 6c2e 6574 7265 652e 4854   = lxml.etree.HT
-0000a970: 4d4c 2868 6f73 745f 6874 6d6c 290d 0a20  ML(host_html).. 
-0000a980: 2020 2023 2020 2020 206c 616e 675f 6c69     #     lang_li
-0000a990: 7374 203d 2065 742e 7870 6174 6828 272f  st = et.xpath('/
-0000a9a0: 2f2a 5b40 6964 3d22 6c61 6e67 7561 6765  /*[@id="language
-0000a9b0: 5365 6c65 6374 225d 2f6c 692f 4064 6174  Select"]/li/@dat
-0000a9c0: 612d 7661 6c75 6527 290d 0a20 2020 2023  a-value')..    #
-0000a9d0: 2020 2020 206c 616e 675f 6c69 7374 203d       lang_list =
-0000a9e0: 205b 2878 2e73 706c 6974 2827 3227 295b   [(x.split('2')[
-0000a9f0: 305d 2c20 5b78 2e73 706c 6974 2827 3227  0], [x.split('2'
-0000aa00: 295b 315d 5d29 2066 6f72 2078 2069 6e20  )[1]]) for x in 
-0000aa10: 6c61 6e67 5f6c 6973 7420 6966 2027 3227  lang_list if '2'
-0000aa20: 2069 6e20 785d 0d0a 2020 2020 2320 2020   in x]..    #   
-0000aa30: 2020 6c61 6e67 5f6d 6170 203d 2064 6963    lang_map = dic
-0000aa40: 7428 6d61 7028 6c61 6d62 6461 2078 3a20  t(map(lambda x: 
-0000aa50: 782c 206c 616e 675f 6c69 7374 2929 0d0a  x, lang_list))..
-0000aa60: 2020 2020 2320 2020 2020 6c61 6e67 5f6d      #     lang_m
-0000aa70: 6170 2e70 6f70 2827 7a68 2d43 4853 2729  ap.pop('zh-CHS')
-0000aa80: 0d0a 2020 2020 2320 2020 2020 6c61 6e67  ..    #     lang
-0000aa90: 5f6d 6170 2e75 7064 6174 6528 7b27 7a68  _map.update({'zh
-0000aaa0: 2d43 4853 273a 206c 6973 7428 6c61 6e67  -CHS': list(lang
-0000aab0: 5f6d 6170 2e6b 6579 7328 2929 7d29 0d0a  _map.keys())})..
-0000aac0: 2020 2020 2320 2020 2020 7265 7475 726e      #     return
-0000aad0: 206c 616e 675f 6d61 700d 0a0d 0a20 2020   lang_map....   
-0000aae0: 2040 5473 652e 6465 6275 675f 6c61 6e67   @Tse.debug_lang
-0000aaf0: 7561 6765 5f6d 6170 0d0a 2020 2020 6465  uage_map..    de
-0000ab00: 6620 6765 745f 6c61 6e67 7561 6765 5f6d  f get_language_m
-0000ab10: 6170 2873 656c 662c 206c 616e 675f 7572  ap(self, lang_ur
-0000ab20: 6c3a 2073 7472 2c20 7373 3a20 5365 7373  l: str, ss: Sess
-0000ab30: 696f 6e54 7970 652c 2068 6561 6465 7273  ionType, headers
-0000ab40: 3a20 6469 6374 2c20 7469 6d65 6f75 743a  : dict, timeout:
-0000ab50: 204f 7074 696f 6e61 6c5b 666c 6f61 745d   Optional[float]
-0000ab60: 2c20 7072 6f78 6965 733a 204f 7074 696f  , proxies: Optio
-0000ab70: 6e61 6c5b 6469 6374 5d2c 202a 2a6b 7761  nal[dict], **kwa
-0000ab80: 7267 733a 204c 616e 674d 6170 4b77 6172  rgs: LangMapKwar
-0000ab90: 6773 5479 7065 2920 2d3e 2064 6963 743a  gsType) -> dict:
-0000aba0: 0d0a 2020 2020 2020 2020 6461 7461 203d  ..        data =
-0000abb0: 2073 732e 6765 7428 6c61 6e67 5f75 726c   ss.get(lang_url
-0000abc0: 2c20 6865 6164 6572 733d 6865 6164 6572  , headers=header
-0000abd0: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
-0000abe0: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
-0000abf0: 6965 7329 2e6a 736f 6e28 290d 0a20 2020  ies).json()..   
-0000ac00: 2020 2020 206c 616e 675f 6c69 7374 203d       lang_list =
-0000ac10: 2073 6f72 7465 6428 5b69 745b 2763 6f64   sorted([it['cod
-0000ac20: 6527 5d20 666f 7220 6974 2069 6e20 6461  e'] for it in da
-0000ac30: 7461 5b27 6461 7461 275d 5b27 7661 6c75  ta['data']['valu
-0000ac40: 6527 5d5b 2774 6578 7454 7261 6e73 6c61  e']['textTransla
-0000ac50: 7465 275d 5b27 7370 6563 6966 7927 5d5d  te']['specify']]
-0000ac60: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-0000ac70: 6e20 7b7d 2e66 726f 6d6b 6579 7328 6c61  n {}.fromkeys(la
-0000ac80: 6e67 5f6c 6973 742c 206c 616e 675f 6c69  ng_list, lang_li
-0000ac90: 7374 290d 0a0d 0a20 2020 2064 6566 2067  st)....    def g
-0000aca0: 6574 5f73 6967 6e5f 6b65 7928 7365 6c66  et_sign_key(self
-0000acb0: 2c20 686f 7374 5f68 746d 6c3a 2073 7472  , host_html: str
-0000acc0: 2c20 7373 3a20 5365 7373 696f 6e54 7970  , ss: SessionTyp
-0000acd0: 652c 2074 696d 656f 7574 3a20 666c 6f61  e, timeout: floa
-0000ace0: 742c 2070 726f 7869 6573 3a20 6469 6374  t, proxies: dict
-0000acf0: 2920 2d3e 2073 7472 3a0d 0a20 2020 2020  ) -> str:..     
-0000ad00: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-0000ad10: 2020 2020 2069 6620 6e6f 7420 7365 6c66       if not self
-0000ad20: 2e67 6574 5f73 6967 6e5f 7572 6c3a 0d0a  .get_sign_url:..
-0000ad30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad40: 7365 6c66 2e67 6574 5f73 6967 6e5f 7572  self.get_sign_ur
-0000ad50: 6c20 3d20 7265 2e63 6f6d 7069 6c65 2873  l = re.compile(s
-0000ad60: 656c 662e 6765 745f 7369 676e 5f70 6174  elf.get_sign_pat
-0000ad70: 7465 726e 292e 7365 6172 6368 2868 6f73  tern).search(hos
-0000ad80: 745f 6874 6d6c 292e 6772 6f75 7028 290d  t_html).group().
-0000ad90: 0a20 2020 2020 2020 2020 2020 2072 203d  .            r =
-0000ada0: 2073 732e 6765 7428 7365 6c66 2e67 6574   ss.get(self.get
-0000adb0: 5f73 6967 6e5f 7572 6c2c 2068 6561 6465  _sign_url, heade
-0000adc0: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
-0000add0: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
-0000ade0: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
-0000adf0: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
-0000ae00: 2020 2020 2072 2e72 6169 7365 5f66 6f72       r.raise_for
-0000ae10: 5f73 7461 7475 7328 290d 0a20 2020 2020  _status()..     
-0000ae20: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
-0000ae30: 2020 2020 2020 2020 7220 3d20 7373 2e67          r = ss.g
-0000ae40: 6574 2873 656c 662e 6765 745f 7369 676e  et(self.get_sign
-0000ae50: 5f6f 6c64 5f75 726c 2c20 6865 6164 6572  _old_url, header
-0000ae60: 733d 7365 6c66 2e68 6f73 745f 6865 6164  s=self.host_head
-0000ae70: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
-0000ae80: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
-0000ae90: 6f78 6965 7329 0d0a 2020 2020 2020 2020  oxies)..        
-0000aea0: 2020 2020 722e 7261 6973 655f 666f 725f      r.raise_for_
-0000aeb0: 7374 6174 7573 2829 0d0a 2020 2020 2020  status()..      
-0000aec0: 2020 7369 676e 203d 2072 652e 636f 6d70    sign = re.comp
-0000aed0: 696c 6528 276d 6435 5c5c 2822 6661 6e79  ile('md5\\("fany
-0000aee0: 6964 6573 6b77 6562 2220 5c5c 2b20 6520  ideskweb" \\+ e 
-0000aef0: 5c5c 2b20 6920 5c5c 2b20 2228 2e2a 3f29  \\+ i \\+ "(.*?)
-0000af00: 225c 5c29 2729 2e66 696e 6461 6c6c 2872  "\\)').findall(r
-0000af10: 2e74 6578 7429 0d0a 2020 2020 2020 2020  .text)..        
-0000af20: 7265 7475 726e 2073 6967 6e5b 305d 2069  return sign[0] i
-0000af30: 6620 7369 676e 2061 6e64 2073 6967 6e20  f sign and sign 
-0000af40: 213d 205b 2727 5d20 656c 7365 2022 5967  != [''] else "Yg
-0000af50: 795f 3463 3d72 2365 2334 4558 5e4e 5547  y_4c=r#e#4EX^NUG
-0000af60: 5563 3522 2020 2320 7631 2e31 2e31 300d  Uc5"  # v1.1.10.
-0000af70: 0a0d 0a20 2020 2064 6566 2067 6574 5f66  ...    def get_f
-0000af80: 6f72 6d28 7365 6c66 2c20 7175 6572 795f  orm(self, query_
-0000af90: 7465 7874 3a20 7374 722c 2066 726f 6d5f  text: str, from_
-0000afa0: 6c61 6e67 7561 6765 3a20 7374 722c 2074  language: str, t
-0000afb0: 6f5f 6c61 6e67 7561 6765 3a20 7374 722c  o_language: str,
-0000afc0: 2073 6967 6e5f 6b65 793a 2073 7472 2920   sign_key: str) 
-0000afd0: 2d3e 2064 6963 743a 0d0a 2020 2020 2020  -> dict:..      
-0000afe0: 2020 7473 203d 2073 7472 2873 656c 662e    ts = str(self.
-0000aff0: 6765 745f 7469 6d65 7374 616d 7028 2929  get_timestamp())
-0000b000: 0d0a 2020 2020 2020 2020 7361 6c74 203d  ..        salt =
-0000b010: 2073 7472 2874 7329 202b 2073 7472 2872   str(ts) + str(r
-0000b020: 616e 646f 6d2e 7261 6e64 7261 6e67 6528  andom.randrange(
-0000b030: 302c 2031 3029 290d 0a20 2020 2020 2020  0, 10))..       
-0000b040: 2073 6967 6e5f 7465 7874 203d 2027 272e   sign_text = ''.
-0000b050: 6a6f 696e 285b 2766 616e 7969 6465 736b  join(['fanyidesk
-0000b060: 7765 6227 2c20 7175 6572 795f 7465 7874  web', query_text
-0000b070: 2c20 7361 6c74 2c20 7369 676e 5f6b 6579  , salt, sign_key
-0000b080: 5d29 0d0a 2020 2020 2020 2020 7369 676e  ])..        sign
-0000b090: 203d 2068 6173 686c 6962 2e6d 6435 2873   = hashlib.md5(s
-0000b0a0: 6967 6e5f 7465 7874 2e65 6e63 6f64 6528  ign_text.encode(
-0000b0b0: 2929 2e68 6578 6469 6765 7374 2829 0d0a  )).hexdigest()..
-0000b0c0: 2020 2020 2020 2020 6276 203d 2068 6173          bv = has
-0000b0d0: 686c 6962 2e6d 6435 2873 656c 662e 6170  hlib.md5(self.ap
-0000b0e0: 695f 6865 6164 6572 735b 2755 7365 722d  i_headers['User-
-0000b0f0: 4167 656e 7427 5d5b 383a 5d2e 656e 636f  Agent'][8:].enco
-0000b100: 6465 2829 292e 6865 7864 6967 6573 7428  de()).hexdigest(
-0000b110: 290d 0a20 2020 2020 2020 2066 6f72 6d20  )..        form 
-0000b120: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
-0000b130: 2027 6927 3a20 7175 6572 795f 7465 7874   'i': query_text
-0000b140: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-0000b150: 6672 6f6d 273a 2066 726f 6d5f 6c61 6e67  from': from_lang
-0000b160: 7561 6765 2c0d 0a20 2020 2020 2020 2020  uage,..         
-0000b170: 2020 2027 746f 273a 2074 6f5f 6c61 6e67     'to': to_lang
-0000b180: 7561 6765 2c0d 0a20 2020 2020 2020 2020  uage,..         
-0000b190: 2020 2027 6c74 7327 3a20 7473 2c20 2023     'lts': ts,  #
-0000b1a0: 2072 203d 2022 2220 2b20 286e 6577 2044   r = "" + (new D
-0000b1b0: 6174 6529 2e67 6574 5469 6d65 2829 0d0a  ate).getTime()..
-0000b1c0: 2020 2020 2020 2020 2020 2020 2773 616c              'sal
-0000b1d0: 7427 3a20 7361 6c74 2c20 2023 2069 203d  t': salt,  # i =
-0000b1e0: 2072 202b 2070 6172 7365 496e 7428 3130   r + parseInt(10
-0000b1f0: 202a 204d 6174 682e 7261 6e64 6f6d 2829   * Math.random()
-0000b200: 2c20 3130 290d 0a20 2020 2020 2020 2020  , 10)..         
-0000b210: 2020 2027 7369 676e 273a 2073 6967 6e2c     'sign': sign,
-0000b220: 2020 2320 6e2e 6d64 3528 2266 616e 7969    # n.md5("fanyi
-0000b230: 6465 736b 7765 6222 202b 2065 202b 2069  deskweb" + e + i
-0000b240: 202b 2022 6e25 412d 724b 6154 3566 625b   + "n%A-rKaT5fb[
-0000b250: 4779 3f3b 4e35 4054 6a22 292c 653d 7465  Gy?;N5@Tj"),e=te
-0000b260: 7874 0d0a 2020 2020 2020 2020 2020 2020  xt..            
-0000b270: 2762 7627 3a20 6276 2c20 2023 206e 2e6d  'bv': bv,  # n.m
-0000b280: 6435 286e 6176 6967 6174 6f72 2e61 7070  d5(navigator.app
-0000b290: 5665 7273 696f 6e29 0d0a 2020 2020 2020  Version)..      
-0000b2a0: 2020 2020 2020 2773 6d61 7274 7265 7375        'smartresu
-0000b2b0: 6c74 273a 2027 6469 6374 272c 0d0a 2020  lt': 'dict',..  
-0000b2c0: 2020 2020 2020 2020 2020 2763 6c69 656e            'clien
-0000b2d0: 7427 3a20 2766 616e 7969 6465 736b 7765  t': 'fanyideskwe
-0000b2e0: 6227 2c0d 0a20 2020 2020 2020 2020 2020  b',..           
-0000b2f0: 2027 646f 6374 7970 6527 3a20 276a 736f   'doctype': 'jso
-0000b300: 6e27 2c0d 0a20 2020 2020 2020 2020 2020  n',..           
-0000b310: 2027 7665 7273 696f 6e27 3a20 2732 2e31   'version': '2.1
-0000b320: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-0000b330: 276b 6579 6672 6f6d 273a 2027 6661 6e79  'keyfrom': 'fany
-0000b340: 692e 7765 6227 2c0d 0a20 2020 2020 2020  i.web',..       
-0000b350: 2020 2020 2027 6163 7469 6f6e 273a 2027       'action': '
-0000b360: 4659 5f42 595f 5245 414c 546c 4d45 272c  FY_BY_REALTlME',
-0000b370: 2020 2320 6e6f 7420 7469 6d65 2e5b 2246    # not time.["F
-0000b380: 595f 4259 5f52 4541 4c54 6c4d 4522 2c20  Y_BY_REALTlME", 
-0000b390: 2246 595f 4259 5f44 4546 4155 4c54 222c  "FY_BY_DEFAULT",
-0000b3a0: 2022 4659 5f42 595f 434c 4943 4b42 5554   "FY_BY_CLICKBUT
-0000b3b0: 5449 4f4e 222c 2022 6c61 6e2d 7365 6c65  TION", "lan-sele
-0000b3c0: 6374 225d 0d0a 2020 2020 2020 2020 2020  ct"]..          
-0000b3d0: 2020 2320 2774 7970 6f52 6573 756c 7427    # 'typoResult'
-0000b3e0: 3a20 2766 616c 7365 270d 0a20 2020 2020  : 'false'..     
-0000b3f0: 2020 207d 0d0a 2020 2020 2020 2020 7265     }..        re
-0000b400: 7475 726e 2066 6f72 6d0d 0a0d 0a20 2020  turn form....   
-0000b410: 2040 5473 652e 7469 6d65 5f73 7461 740d   @Tse.time_stat.
-0000b420: 0a20 2020 2040 5473 652e 6368 6563 6b5f  .    @Tse.check_
-0000b430: 7175 6572 790d 0a20 2020 2064 6566 2079  query..    def y
-0000b440: 6f75 6461 6f5f 6170 6928 7365 6c66 2c20  oudao_api(self, 
-0000b450: 7175 6572 795f 7465 7874 3a20 7374 722c  query_text: str,
-0000b460: 2066 726f 6d5f 6c61 6e67 7561 6765 3a20   from_language: 
-0000b470: 7374 7220 3d20 2761 7574 6f27 2c20 746f  str = 'auto', to
-0000b480: 5f6c 616e 6775 6167 653a 2073 7472 203d  _language: str =
-0000b490: 2027 656e 272c 202a 2a6b 7761 7267 733a   'en', **kwargs:
-0000b4a0: 2041 7069 4b77 6172 6773 5479 7065 2920   ApiKwargsType) 
-0000b4b0: 2d3e 2055 6e69 6f6e 5b73 7472 2c20 6469  -> Union[str, di
-0000b4c0: 6374 5d3a 0d0a 2020 2020 2020 2020 2222  ct]:..        ""
-0000b4d0: 220d 0a20 2020 2020 2020 2068 7474 7073  "..        https
-0000b4e0: 3a2f 2f66 616e 7969 2e79 6f75 6461 6f2e  ://fanyi.youdao.
-0000b4f0: 636f 6d0d 0a20 2020 2020 2020 203a 7061  com..        :pa
-0000b500: 7261 6d20 7175 6572 795f 7465 7874 3a20  ram query_text: 
-0000b510: 7374 722c 206d 7573 742e 0d0a 2020 2020  str, must...    
-0000b520: 2020 2020 3a70 6172 616d 2066 726f 6d5f      :param from_
-0000b530: 6c61 6e67 7561 6765 3a20 7374 722c 2064  language: str, d
-0000b540: 6566 6175 6c74 2027 6175 746f 272e 0d0a  efault 'auto'...
-0000b550: 2020 2020 2020 2020 3a70 6172 616d 2074          :param t
-0000b560: 6f5f 6c61 6e67 7561 6765 3a20 7374 722c  o_language: str,
-0000b570: 2064 6566 6175 6c74 2027 656e 272e 0d0a   default 'en'...
-0000b580: 2020 2020 2020 2020 3a70 6172 616d 202a          :param *
-0000b590: 2a6b 7761 7267 733a 0d0a 2020 2020 2020  *kwargs:..      
-0000b5a0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0000b5b0: 2074 696d 656f 7574 3a20 666c 6f61 742c   timeout: float,
-0000b5c0: 2064 6566 6175 6c74 204e 6f6e 652e 0d0a   default None...
-0000b5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b5e0: 3a70 6172 616d 2070 726f 7869 6573 3a20  :param proxies: 
-0000b5f0: 6469 6374 2c20 6465 6661 756c 7420 4e6f  dict, default No
-0000b600: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
-0000b610: 2020 2020 203a 7061 7261 6d20 736c 6565       :param slee
-0000b620: 705f 7365 636f 6e64 733a 2066 6c6f 6174  p_seconds: float
-0000b630: 2c20 6465 6661 756c 7420 302e 0d0a 2020  , default 0...  
-0000b640: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-0000b650: 6172 616d 2069 735f 6465 7461 696c 5f72  aram is_detail_r
-0000b660: 6573 756c 743a 2062 6f6f 6c2c 2064 6566  esult: bool, def
-0000b670: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
-0000b680: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-0000b690: 7261 6d20 6966 5f69 676e 6f72 655f 6c69  ram if_ignore_li
-0000b6a0: 6d69 745f 6f66 5f6c 656e 6774 683a 2062  mit_of_length: b
-0000b6b0: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
-0000b6c0: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
-0000b6d0: 2020 2020 203a 7061 7261 6d20 6c69 6d69       :param limi
-0000b6e0: 745f 6f66 5f6c 656e 6774 683a 2069 6e74  t_of_length: int
-0000b6f0: 2c20 6465 6661 756c 7420 3230 3030 302e  , default 20000.
-0000b700: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b710: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
-0000b720: 7265 5f65 6d70 7479 5f71 7565 7279 3a20  re_empty_query: 
-0000b730: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
-0000b740: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
-0000b750: 2020 2020 2020 3a70 6172 616d 2075 7064        :param upd
-0000b760: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0000b770: 725f 6672 6571 3a20 696e 742c 2064 6566  r_freq: int, def
-0000b780: 6175 6c74 2031 3030 302e 0d0a 2020 2020  ault 1000...    
-0000b790: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0000b7a0: 616d 2075 7064 6174 655f 7365 7373 696f  am update_sessio
-0000b7b0: 6e5f 6166 7465 725f 7365 636f 6e64 733a  n_after_seconds:
-0000b7c0: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
-0000b7d0: 3135 3030 2e0d 0a20 2020 2020 2020 2020  1500...         
-0000b7e0: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-0000b7f0: 5f73 686f 775f 7469 6d65 5f73 7461 743a  _show_time_stat:
-0000b800: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
-0000b810: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
-0000b820: 2020 2020 2020 203a 7061 7261 6d20 7368         :param sh
-0000b830: 6f77 5f74 696d 655f 7374 6174 5f70 7265  ow_time_stat_pre
-0000b840: 6369 7369 6f6e 3a20 696e 742c 2064 6566  cision: int, def
-0000b850: 6175 6c74 2032 2e0d 0a20 2020 2020 2020  ault 2...       
-0000b860: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-0000b870: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
-0000b880: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-0000b890: 5472 7565 2e0d 0a20 2020 2020 2020 203a  True...        :
-0000b8a0: 7265 7475 726e 3a20 7374 7220 6f72 2064  return: str or d
-0000b8b0: 6963 740d 0a20 2020 2020 2020 2022 2222  ict..        """
-0000b8c0: 0d0a 0d0a 2020 2020 2020 2020 7469 6d65  ....        time
-0000b8d0: 6f75 7420 3d20 6b77 6172 6773 2e67 6574  out = kwargs.get
-0000b8e0: 2827 7469 6d65 6f75 7427 2c20 4e6f 6e65  ('timeout', None
-0000b8f0: 290d 0a20 2020 2020 2020 2070 726f 7869  )..        proxi
-0000b900: 6573 203d 206b 7761 7267 732e 6765 7428  es = kwargs.get(
-0000b910: 2770 726f 7869 6573 272c 204e 6f6e 6529  'proxies', None)
-0000b920: 0d0a 2020 2020 2020 2020 736c 6565 705f  ..        sleep_
-0000b930: 7365 636f 6e64 7320 3d20 6b77 6172 6773  seconds = kwargs
-0000b940: 2e67 6574 2827 736c 6565 705f 7365 636f  .get('sleep_seco
-0000b950: 6e64 7327 2c20 3029 0d0a 2020 2020 2020  nds', 0)..      
-0000b960: 2020 6966 5f70 7269 6e74 5f77 6172 6e69    if_print_warni
-0000b970: 6e67 203d 206b 7761 7267 732e 6765 7428  ng = kwargs.get(
-0000b980: 2769 665f 7072 696e 745f 7761 726e 696e  'if_print_warnin
-0000b990: 6727 2c20 5472 7565 290d 0a20 2020 2020  g', True)..     
-0000b9a0: 2020 2069 735f 6465 7461 696c 5f72 6573     is_detail_res
-0000b9b0: 756c 7420 3d20 6b77 6172 6773 2e67 6574  ult = kwargs.get
-0000b9c0: 2827 6973 5f64 6574 6169 6c5f 7265 7375  ('is_detail_resu
-0000b9d0: 6c74 272c 2046 616c 7365 290d 0a20 2020  lt', False)..   
-0000b9e0: 2020 2020 2075 7064 6174 655f 7365 7373       update_sess
-0000b9f0: 696f 6e5f 6166 7465 725f 6672 6571 203d  ion_after_freq =
-0000ba00: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
-0000ba10: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0000ba20: 725f 6672 6571 272c 2073 656c 662e 6465  r_freq', self.de
-0000ba30: 6661 756c 745f 7365 7373 696f 6e5f 6672  fault_session_fr
-0000ba40: 6571 290d 0a20 2020 2020 2020 2075 7064  eq)..        upd
-0000ba50: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0000ba60: 725f 7365 636f 6e64 7320 3d20 6b77 6172  r_seconds = kwar
-0000ba70: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
-0000ba80: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-0000ba90: 6f6e 6473 272c 2073 656c 662e 6465 6661  onds', self.defa
-0000baa0: 756c 745f 7365 7373 696f 6e5f 7365 636f  ult_session_seco
-0000bab0: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
-0000bac0: 6c66 2e63 6865 636b 5f69 6e70 7574 5f6c  lf.check_input_l
-0000bad0: 696d 6974 2871 7565 7279 5f74 6578 742c  imit(query_text,
-0000bae0: 2073 656c 662e 696e 7075 745f 6c69 6d69   self.input_limi
-0000baf0: 7429 0d0a 0d0a 2020 2020 2020 2020 6e6f  t)....        no
-0000bb00: 745f 7570 6461 7465 5f63 6f6e 645f 6672  t_update_cond_fr
-0000bb10: 6571 203d 2031 2069 6620 7365 6c66 2e71  eq = 1 if self.q
-0000bb20: 7565 7279 5f63 6f75 6e74 2025 2075 7064  uery_count % upd
-0000bb30: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0000bb40: 725f 6672 6571 2021 3d20 3020 656c 7365  r_freq != 0 else
-0000bb50: 2030 0d0a 2020 2020 2020 2020 6e6f 745f   0..        not_
-0000bb60: 7570 6461 7465 5f63 6f6e 645f 7469 6d65  update_cond_time
-0000bb70: 203d 2031 2069 6620 7469 6d65 2e74 696d   = 1 if time.tim
-0000bb80: 6528 2920 2d20 7365 6c66 2e62 6567 696e  e() - self.begin
-0000bb90: 5f74 696d 6520 3c20 7570 6461 7465 5f73  _time < update_s
-0000bba0: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-0000bbb0: 6f6e 6473 2065 6c73 6520 300d 0a20 2020  onds else 0..   
-0000bbc0: 2020 2020 2069 6620 6e6f 7420 2873 656c       if not (sel
-0000bbd0: 662e 7365 7373 696f 6e20 616e 6420 7365  f.session and se
-0000bbe0: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
-0000bbf0: 616e 6420 6e6f 745f 7570 6461 7465 5f63  and not_update_c
-0000bc00: 6f6e 645f 6672 6571 2061 6e64 206e 6f74  ond_freq and not
-0000bc10: 5f75 7064 6174 655f 636f 6e64 5f74 696d  _update_cond_tim
-0000bc20: 6520 616e 6420 7365 6c66 2e73 6967 6e5f  e and self.sign_
-0000bc30: 6b65 7929 3a0d 0a20 2020 2020 2020 2020  key):..         
-0000bc40: 2020 2073 656c 662e 6265 6769 6e5f 7469     self.begin_ti
-0000bc50: 6d65 203d 2074 696d 652e 7469 6d65 2829  me = time.time()
-0000bc60: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0000bc70: 6c66 2e73 6573 7369 6f6e 203d 2072 6571  lf.session = req
-0000bc80: 7565 7374 732e 5365 7373 696f 6e28 290d  uests.Session().
-0000bc90: 0a20 2020 2020 2020 2020 2020 2068 6f73  .            hos
-0000bca0: 745f 6874 6d6c 203d 2073 656c 662e 7365  t_html = self.se
-0000bcb0: 7373 696f 6e2e 6765 7428 7365 6c66 2e68  ssion.get(self.h
-0000bcc0: 6f73 745f 7572 6c2c 2068 6561 6465 7273  ost_url, headers
-0000bcd0: 3d73 656c 662e 686f 7374 5f68 6561 6465  =self.host_heade
-0000bce0: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
-0000bcf0: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
-0000bd00: 7869 6573 292e 7465 7874 0d0a 2020 2020  xies).text..    
-0000bd10: 2020 2020 2020 2020 7365 6c66 2e73 6967          self.sig
-0000bd20: 6e5f 6b65 7920 3d20 7365 6c66 2e67 6574  n_key = self.get
-0000bd30: 5f73 6967 6e5f 6b65 7928 686f 7374 5f68  _sign_key(host_h
-0000bd40: 746d 6c2c 2073 656c 662e 7365 7373 696f  tml, self.sessio
-0000bd50: 6e2c 2074 696d 656f 7574 2c20 7072 6f78  n, timeout, prox
-0000bd60: 6965 7329 0d0a 2020 2020 2020 2020 2020  ies)..          
-0000bd70: 2020 6465 6275 675f 6c61 6e67 5f6b 7761    debug_lang_kwa
-0000bd80: 7267 7320 3d20 7365 6c66 2e64 6562 7567  rgs = self.debug
-0000bd90: 5f6c 616e 675f 6b77 6172 6773 2866 726f  _lang_kwargs(fro
-0000bda0: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
-0000bdb0: 616e 6775 6167 652c 2073 656c 662e 6465  anguage, self.de
-0000bdc0: 6661 756c 745f 6672 6f6d 5f6c 616e 6775  fault_from_langu
-0000bdd0: 6167 652c 2069 665f 7072 696e 745f 7761  age, if_print_wa
-0000bde0: 726e 696e 6729 0d0a 2020 2020 2020 2020  rning)..        
-0000bdf0: 2020 2020 7365 6c66 2e6c 616e 6775 6167      self.languag
-0000be00: 655f 6d61 7020 3d20 7365 6c66 2e67 6574  e_map = self.get
-0000be10: 5f6c 616e 6775 6167 655f 6d61 7028 7365  _language_map(se
-0000be20: 6c66 2e6c 616e 6775 6167 655f 7572 6c2c  lf.language_url,
-0000be30: 2073 656c 662e 7365 7373 696f 6e2c 2073   self.session, s
-0000be40: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
-0000be50: 2c20 7469 6d65 6f75 742c 2070 726f 7869  , timeout, proxi
-0000be60: 6573 2c20 2a2a 6465 6275 675f 6c61 6e67  es, **debug_lang
-0000be70: 5f6b 7761 7267 7329 0d0a 0d0a 2020 2020  _kwargs)....    
-0000be80: 2020 2020 6672 6f6d 5f6c 616e 6775 6167      from_languag
-0000be90: 652c 2074 6f5f 6c61 6e67 7561 6765 203d  e, to_language =
-0000bea0: 2073 656c 662e 6368 6563 6b5f 6c61 6e67   self.check_lang
-0000beb0: 7561 6765 2866 726f 6d5f 6c61 6e67 7561  uage(from_langua
-0000bec0: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
-0000bed0: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
-0000bee0: 6170 2c20 6f75 7470 7574 5f7a 683d 7365  ap, output_zh=se
-0000bef0: 6c66 2e6f 7574 7075 745f 7a68 290d 0a0d  lf.output_zh)...
-0000bf00: 0a20 2020 2020 2020 2066 6f72 6d20 3d20  .        form = 
-0000bf10: 7365 6c66 2e67 6574 5f66 6f72 6d28 7175  self.get_form(qu
-0000bf20: 6572 795f 7465 7874 2c20 6672 6f6d 5f6c  ery_text, from_l
-0000bf30: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
-0000bf40: 7561 6765 2c20 7365 6c66 2e73 6967 6e5f  uage, self.sign_
-0000bf50: 6b65 7929 0d0a 2020 2020 2020 2020 7220  key)..        r 
-0000bf60: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e70  = self.session.p
-0000bf70: 6f73 7428 7365 6c66 2e61 7069 5f75 726c  ost(self.api_url
-0000bf80: 2c20 6461 7461 3d66 6f72 6d2c 2068 6561  , data=form, hea
-0000bf90: 6465 7273 3d73 656c 662e 6170 695f 6865  ders=self.api_he
-0000bfa0: 6164 6572 732c 2074 696d 656f 7574 3d74  aders, timeout=t
-0000bfb0: 696d 656f 7574 2c20 7072 6f78 6965 733d  imeout, proxies=
-0000bfc0: 7072 6f78 6965 7329 0d0a 2020 2020 2020  proxies)..      
-0000bfd0: 2020 722e 7261 6973 655f 666f 725f 7374    r.raise_for_st
-0000bfe0: 6174 7573 2829 0d0a 2020 2020 2020 2020  atus()..        
-0000bff0: 6461 7461 203d 2072 2e6a 736f 6e28 290d  data = r.json().
-0000c000: 0a20 2020 2020 2020 2074 696d 652e 736c  .        time.sl
-0000c010: 6565 7028 736c 6565 705f 7365 636f 6e64  eep(sleep_second
-0000c020: 7329 0d0a 2020 2020 2020 2020 7365 6c66  s)..        self
-0000c030: 2e71 7565 7279 5f63 6f75 6e74 202b 3d20  .query_count += 
-0000c040: 310d 0a20 2020 2020 2020 2072 6574 7572  1..        retur
-0000c050: 6e20 6461 7461 2069 6620 6973 5f64 6574  n data if is_det
-0000c060: 6169 6c5f 7265 7375 6c74 2065 6c73 6520  ail_result else 
-0000c070: 275c 6e27 2e6a 6f69 6e28 5b27 2027 2e6a  '\n'.join([' '.j
-0000c080: 6f69 6e28 5b69 745b 2774 6774 275d 2066  oin([it['tgt'] f
-0000c090: 6f72 2069 7420 696e 2069 7465 6d5d 2920  or it in item]) 
-0000c0a0: 666f 7220 6974 656d 2069 6e20 6461 7461  for item in data
-0000c0b0: 5b27 7472 616e 736c 6174 6552 6573 756c  ['translateResul
-0000c0c0: 7427 5d5d 290d 0a0d 0a0d 0a63 6c61 7373  t']])......class
-0000c0d0: 2059 6f75 6461 6f56 3228 5473 6529 3a0d   YoudaoV2(Tse):.
-0000c0e0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-0000c0f0: 5f28 7365 6c66 293a 0d0a 2020 2020 2020  _(self):..      
-0000c100: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
-0000c110: 5f5f 2829 0d0a 2020 2020 2020 2020 7365  __()..        se
-0000c120: 6c66 2e62 6567 696e 5f74 696d 6520 3d20  lf.begin_time = 
-0000c130: 7469 6d65 2e74 696d 6528 290d 0a20 2020  time.time()..   
-0000c140: 2020 2020 2073 656c 662e 686f 7374 5f75       self.host_u
-0000c150: 726c 203d 2027 6874 7470 733a 2f2f 6661  rl = 'https://fa
-0000c160: 6e79 692e 796f 7564 616f 2e63 6f6d 270d  nyi.youdao.com'.
-0000c170: 0a20 2020 2020 2020 2073 656c 662e 6170  .        self.ap
-0000c180: 695f 7572 6c20 3d20 2768 7474 7073 3a2f  i_url = 'https:/
-0000c190: 2f64 6963 742e 796f 7564 616f 2e63 6f6d  /dict.youdao.com
-0000c1a0: 2f77 6562 7472 616e 736c 6174 6527 0d0a  /webtranslate'..
-0000c1b0: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
-0000c1c0: 5f68 6f73 7420 3d20 2768 7474 7073 3a2f  _host = 'https:/
-0000c1d0: 2f64 6963 742e 796f 7564 616f 2e63 6f6d  /dict.youdao.com
-0000c1e0: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
-0000c1f0: 6765 745f 6a73 5f75 726c 203d 204e 6f6e  get_js_url = Non
-0000c200: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
-0000c210: 6765 745f 6a73 5f70 6174 7465 726e 203d  get_js_pattern =
-0000c220: 2027 6a73 2f61 7070 2e28 2e2a 3f29 2e6a   'js/app.(.*?).j
-0000c230: 7327 0d0a 2020 2020 2020 2020 7365 6c66  s'..        self
-0000c240: 2e67 6574 5f73 6967 6e5f 7572 6c20 3d20  .get_sign_url = 
-0000c250: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-0000c260: 6c66 2e67 6574 5f73 6967 6e5f 7061 7474  lf.get_sign_patt
-0000c270: 6572 6e20 3d20 2727 0d0a 2020 2020 2020  ern = ''..      
-0000c280: 2020 7365 6c66 2e6c 6f67 696e 5f75 726c    self.login_url
-0000c290: 203d 2027 6874 7470 733a 2f2f 6469 6374   = 'https://dict
-0000c2a0: 2e79 6f75 6461 6f2e 636f 6d2f 6c6f 6769  .youdao.com/logi
-0000c2b0: 6e2f 6163 632f 7175 6572 792f 6163 636f  n/acc/query/acco
-0000c2c0: 756e 7469 6e66 6f27 0d0a 2020 2020 2020  untinfo'..      
-0000c2d0: 2020 7365 6c66 2e6c 616e 6775 6167 655f    self.language_
-0000c2e0: 7572 6c20 3d20 2768 7474 7073 3a2f 2f61  url = 'https://a
-0000c2f0: 7069 2d6f 7665 726d 696e 642e 796f 7564  pi-overmind.youd
-0000c300: 616f 2e63 6f6d 2f6f 7065 6e61 7069 2f67  ao.com/openapi/g
-0000c310: 6574 2f6c 756e 612f 6469 6374 2f6c 756e  et/luna/dict/lun
-0000c320: 612d 6672 6f6e 742f 7072 6f64 2f6c 616e  a-front/prod/lan
-0000c330: 6754 7970 6527 0d0a 2020 2020 2020 2020  gType'..        
-0000c340: 7365 6c66 2e64 6f6d 6169 6e5f 7572 6c20  self.domain_url 
-0000c350: 3d20 2768 7474 7073 3a2f 2f64 6f63 7472  = 'https://doctr
-0000c360: 616e 732d 7365 7276 6963 652e 796f 7564  ans-service.youd
-0000c370: 616f 2e63 6f6d 2f63 6f6d 6d6f 6e2f 656e  ao.com/common/en
-0000c380: 756d 732f 6c69 7374 3f6b 6579 3d64 6f6d  ums/list?key=dom
-0000c390: 6169 6e27 0d0a 2020 2020 2020 2020 7365  ain'..        se
-0000c3a0: 6c66 2e67 6574 5f6b 6579 5f75 726c 203d  lf.get_key_url =
-0000c3b0: 2027 6874 7470 733a 2f2f 6469 6374 2e79   'https://dict.y
-0000c3c0: 6f75 6461 6f2e 636f 6d2f 7765 6274 7261  oudao.com/webtra
-0000c3d0: 6e73 6c61 7465 2f6b 6579 270d 0a20 2020  nslate/key'..   
-0000c3e0: 2020 2020 2073 656c 662e 686f 7374 5f68       self.host_h
-0000c3f0: 6561 6465 7273 203d 2073 656c 662e 6765  eaders = self.ge
-0000c400: 745f 6865 6164 6572 7328 7365 6c66 2e68  t_headers(self.h
-0000c410: 6f73 745f 7572 6c2c 2069 665f 6170 693d  ost_url, if_api=
-0000c420: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
-0000c430: 7365 6c66 2e61 7069 5f68 6561 6465 7273  self.api_headers
-0000c440: 203d 2073 656c 662e 6765 745f 6865 6164   = self.get_head
-0000c450: 6572 7328 7365 6c66 2e68 6f73 745f 7572  ers(self.host_ur
-0000c460: 6c2c 2069 665f 6170 693d 5472 7565 290d  l, if_api=True).
-0000c470: 0a20 2020 2020 2020 2073 656c 662e 6170  .        self.ap
-0000c480: 695f 6865 6164 6572 732e 7570 6461 7465  i_headers.update
-0000c490: 287b 2748 6f73 7427 3a20 7365 6c66 2e61  ({'Host': self.a
-0000c4a0: 7069 5f68 6f73 747d 290d 0a20 2020 2020  pi_host})..     
-0000c4b0: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
-0000c4c0: 5f6d 6170 203d 204e 6f6e 650d 0a20 2020  _map = None..   
-0000c4d0: 2020 2020 2073 656c 662e 7365 7373 696f       self.sessio
-0000c4e0: 6e20 3d20 4e6f 6e65 0d0a 2020 2020 2020  n = None..      
-0000c4f0: 2020 7365 6c66 2e70 726f 6665 7373 696f    self.professio
-0000c500: 6e61 6c5f 6669 656c 6420 3d20 2827 3027  nal_field = ('0'
-0000c510: 2c20 2731 272c 2027 3227 2c20 2733 2729  , '1', '2', '3')
-0000c520: 0d0a 2020 2020 2020 2020 7365 6c66 2e70  ..        self.p
-0000c530: 726f 6665 7373 696f 6e61 6c5f 6669 656c  rofessional_fiel
-0000c540: 645f 6d61 7020 3d20 4e6f 6e65 0d0a 2020  d_map = None..  
-0000c550: 2020 2020 2020 7365 6c66 2e64 6566 6175        self.defau
-0000c560: 6c74 5f6b 6579 203d 204e 6f6e 650d 0a20  lt_key = None.. 
-0000c570: 2020 2020 2020 2073 656c 662e 7365 6372         self.secr
-0000c580: 6574 5f6b 6579 203d 204e 6f6e 650d 0a20  et_key = None.. 
-0000c590: 2020 2020 2020 2073 656c 662e 6465 636f         self.deco
-0000c5a0: 6465 5f6b 6579 203d 204e 6f6e 650d 0a20  de_key = None.. 
-0000c5b0: 2020 2020 2020 2073 656c 662e 6465 636f         self.deco
-0000c5c0: 6465 5f69 7620 3d20 4e6f 6e65 0d0a 2020  de_iv = None..  
-0000c5d0: 2020 2020 2020 7365 6c66 2e71 7565 7279        self.query
-0000c5e0: 5f63 6f75 6e74 203d 2030 0d0a 2020 2020  _count = 0..    
-0000c5f0: 2020 2020 7365 6c66 2e6f 7574 7075 745f      self.output_
-0000c600: 7a68 203d 2027 7a68 2d43 4853 270d 0a20  zh = 'zh-CHS'.. 
-0000c610: 2020 2020 2020 2073 656c 662e 696e 7075         self.inpu
-0000c620: 745f 6c69 6d69 7420 3d20 696e 7428 3565  t_limit = int(5e
-0000c630: 3329 0d0a 2020 2020 2020 2020 7365 6c66  3)..        self
-0000c640: 2e64 6566 6175 6c74 5f66 726f 6d5f 6c61  .default_from_la
-0000c650: 6e67 7561 6765 203d 2073 656c 662e 6f75  nguage = self.ou
-0000c660: 7470 7574 5f7a 680d 0a0d 0a20 2020 2040  tput_zh....    @
-0000c670: 5473 652e 6465 6275 675f 6c61 6e67 7561  Tse.debug_langua
-0000c680: 6765 5f6d 6170 0d0a 2020 2020 6465 6620  ge_map..    def 
-0000c690: 6765 745f 6c61 6e67 7561 6765 5f6d 6170  get_language_map
-0000c6a0: 2873 656c 662c 206c 616e 675f 7572 6c3a  (self, lang_url:
-0000c6b0: 2073 7472 2c20 7373 3a20 5365 7373 696f   str, ss: Sessio
-0000c6c0: 6e54 7970 652c 2068 6561 6465 7273 3a20  nType, headers: 
-0000c6d0: 6469 6374 2c20 7469 6d65 6f75 743a 204f  dict, timeout: O
-0000c6e0: 7074 696f 6e61 6c5b 666c 6f61 745d 2c20  ptional[float], 
-0000c6f0: 7072 6f78 6965 733a 204f 7074 696f 6e61  proxies: Optiona
-0000c700: 6c5b 6469 6374 5d2c 202a 2a6b 7761 7267  l[dict], **kwarg
-0000c710: 733a 204c 616e 674d 6170 4b77 6172 6773  s: LangMapKwargs
-0000c720: 5479 7065 2920 2d3e 2064 6963 743a 0d0a  Type) -> dict:..
-0000c730: 2020 2020 2020 2020 6461 7461 203d 2073          data = s
-0000c740: 732e 6765 7428 6c61 6e67 5f75 726c 2c20  s.get(lang_url, 
-0000c750: 6865 6164 6572 733d 6865 6164 6572 732c  headers=headers,
-0000c760: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
-0000c770: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
-0000c780: 7329 2e6a 736f 6e28 290d 0a20 2020 2020  s).json()..     
-0000c790: 2020 206c 616e 675f 6c69 7374 203d 2073     lang_list = s
-0000c7a0: 6f72 7465 6428 5b69 745b 2763 6f64 6527  orted([it['code'
-0000c7b0: 5d20 666f 7220 6974 2069 6e20 6461 7461  ] for it in data
-0000c7c0: 5b27 6461 7461 275d 5b27 7661 6c75 6527  ['data']['value'
-0000c7d0: 5d5b 2774 6578 7454 7261 6e73 6c61 7465  ]['textTranslate
-0000c7e0: 275d 5b27 7370 6563 6966 7927 5d5d 290d  ']['specify']]).
-0000c7f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000c800: 7b7d 2e66 726f 6d6b 6579 7328 6c61 6e67  {}.fromkeys(lang
-0000c810: 5f6c 6973 742c 206c 616e 675f 6c69 7374  _list, lang_list
-0000c820: 290d 0a0d 0a20 2020 2064 6566 2067 6574  )....    def get
-0000c830: 5f64 6566 6175 6c74 5f6b 6579 2873 656c  _default_key(sel
-0000c840: 662c 206a 735f 6874 6d6c 3a20 7374 7229  f, js_html: str)
-0000c850: 202d 3e20 7374 723a 0d0a 2020 2020 2020   -> str:..      
-0000c860: 2020 7265 7475 726e 2072 652e 636f 6d70    return re.comp
-0000c870: 696c 6528 273d 2277 6562 6661 6e79 692d  ile('="webfanyi-
-0000c880: 6b65 792d 6765 7474 6572 222c 285c 5c77  key-getter",(\\w
-0000c890: 2b29 3d22 285c 5c77 2b29 223b 2729 2e73  +)="(\\w+)";').s
-0000c8a0: 6561 7263 6828 6a73 5f68 746d 6c29 2e67  earch(js_html).g
-0000c8b0: 726f 7570 2832 290d 0a0d 0a20 2020 2064  roup(2)....    d
-0000c8c0: 6566 2067 6574 5f73 6967 6e28 7365 6c66  ef get_sign(self
-0000c8d0: 2c20 6b65 793a 2073 7472 2c20 7469 6d65  , key: str, time
-0000c8e0: 7374 6d70 3a20 696e 7429 202d 3e20 7374  stmp: int) -> st
-0000c8f0: 723a 0d0a 2020 2020 2020 2020 7661 6c75  r:..        valu
-0000c900: 6520 3d20 6627 636c 6965 6e74 3d66 616e  e = f'client=fan
-0000c910: 7969 6465 736b 7765 6226 6d79 7374 6963  yideskweb&mystic
-0000c920: 5469 6d65 3d7b 7469 6d65 7374 6d70 7d26  Time={timestmp}&
-0000c930: 7072 6f64 7563 743d 7765 6266 616e 7969  product=webfanyi
-0000c940: 266b 6579 3d7b 6b65 797d 270d 0a20 2020  &key={key}'..   
-0000c950: 2020 2020 2072 6574 7572 6e20 6861 7368       return hash
-0000c960: 6c69 622e 6d64 3528 7661 6c75 652e 656e  lib.md5(value.en
-0000c970: 636f 6465 2829 292e 6865 7864 6967 6573  code()).hexdiges
-0000c980: 7428 290d 0a0d 0a20 2020 2064 6566 2067  t()....    def g
-0000c990: 6574 5f70 6179 6c6f 6164 2873 656c 662c  et_payload(self,
-0000c9a0: 206b 6579 6964 3a20 7374 722c 206b 6579   keyid: str, key
-0000c9b0: 3a20 7374 722c 2074 696d 6573 7461 6d70  : str, timestamp
-0000c9c0: 3a20 696e 742c 202a 2a6b 7761 7267 733a  : int, **kwargs:
-0000c9d0: 2073 7472 2920 2d3e 2064 6963 743a 0d0a   str) -> dict:..
-0000c9e0: 2020 2020 2020 2020 6966 206b 6579 6964          if keyid
-0000c9f0: 206e 6f74 2069 6e20 2827 7765 6266 616e   not in ('webfan
-0000ca00: 7969 2d6b 6579 2d67 6574 7465 7227 2c20  yi-key-getter', 
-0000ca10: 2777 6562 6661 6e79 6927 293a 0d0a 2020  'webfanyi'):..  
-0000ca20: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0000ca30: 5472 616e 736c 6174 6f72 4572 726f 720d  TranslatorError.
-0000ca40: 0a0d 0a20 2020 2020 2020 2070 6179 6c6f  ...        paylo
-0000ca50: 6164 203d 207b 0d0a 2020 2020 2020 2020  ad = {..        
-0000ca60: 2020 2020 276b 6579 6964 273a 206b 6579      'keyid': key
-0000ca70: 6964 2c0d 0a20 2020 2020 2020 2020 2020  id,..           
-0000ca80: 2027 6d79 7374 6963 5469 6d65 273a 2073   'mysticTime': s
-0000ca90: 7472 2874 696d 6573 7461 6d70 292c 0d0a  tr(timestamp),..
-0000caa0: 2020 2020 2020 2020 2020 2020 2773 6967              'sig
-0000cab0: 6e27 3a20 7365 6c66 2e67 6574 5f73 6967  n': self.get_sig
-0000cac0: 6e28 6b65 792c 2074 696d 6573 7461 6d70  n(key, timestamp
-0000cad0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
-0000cae0: 2763 6c69 656e 7427 3a20 2766 616e 7969  'client': 'fanyi
-0000caf0: 6465 736b 7765 6227 2c0d 0a20 2020 2020  deskweb',..     
-0000cb00: 2020 2020 2020 2027 7072 6f64 7563 7427         'product'
-0000cb10: 3a20 2777 6562 6661 6e79 6927 2c0d 0a20  : 'webfanyi',.. 
-0000cb20: 2020 2020 2020 2020 2020 2027 6170 7056             'appV
-0000cb30: 6572 7369 6f6e 273a 2027 312e 302e 3027  ersion': '1.0.0'
-0000cb40: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-0000cb50: 7665 6e64 6f72 273a 2027 7765 6227 2c0d  vendor': 'web',.
-0000cb60: 0a20 2020 2020 2020 2020 2020 2027 6b65  .            'ke
-0000cb70: 7966 726f 6d27 3a20 2766 616e 7969 2e77  yfrom': 'fanyi.w
-0000cb80: 6562 272c 0d0a 2020 2020 2020 2020 2020  eb',..          
-0000cb90: 2020 2770 6f69 6e74 5061 7261 6d27 3a20    'pointParam': 
-0000cba0: 2763 6c69 656e 742c 6d79 7374 6963 5469  'client,mysticTi
-0000cbb0: 6d65 2c70 726f 6475 6374 272c 0d0a 2020  me,product',..  
-0000cbc0: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
-0000cbd0: 2072 6574 7572 6e20 7b2a 2a6b 7761 7267   return {**kwarg
-0000cbe0: 732c 202a 2a70 6179 6c6f 6164 7d20 6966  s, **payload} if
-0000cbf0: 206b 6579 6964 203d 3d20 2777 6562 6661   keyid == 'webfa
-0000cc00: 6e79 6927 2065 6c73 6520 7061 796c 6f61  nyi' else payloa
-0000cc10: 640d 0a0d 0a20 2020 2064 6566 2064 6563  d....    def dec
-0000cc20: 7279 7074 2873 656c 662c 2063 6970 6865  rypt(self, ciphe
-0000cc30: 725f 7465 7874 3a20 7374 722c 2064 6563  r_text: str, dec
-0000cc40: 7279 7074 5f64 6963 7469 6f6e 6172 793a  rypt_dictionary:
-0000cc50: 2064 6963 7429 202d 3e20 7374 723a 0d0a   dict) -> str:..
-0000cc60: 2020 2020 2020 2020 5f63 6970 6865 7274          _ciphert
-0000cc70: 6578 7420 3d20 2727 2e6a 6f69 6e28 6c69  ext = ''.join(li
-0000cc80: 7374 286d 6170 286c 616d 6264 6120 6b3a  st(map(lambda k:
-0000cc90: 2064 6563 7279 7074 5f64 6963 7469 6f6e   decrypt_diction
-0000cca0: 6172 795b 6b5d 2c20 6369 7068 6572 5f74  ary[k], cipher_t
-0000ccb0: 6578 7429 2929 0d0a 2020 2020 2020 2020  ext)))..        
-0000ccc0: 7265 7475 726e 2062 6173 6536 342e 6236  return base64.b6
-0000ccd0: 3464 6563 6f64 6528 5f63 6970 6865 7274  4decode(_ciphert
-0000cce0: 6578 7429 2e64 6563 6f64 6528 290d 0a0d  ext).decode()...
-0000ccf0: 0a20 2020 2040 5473 652e 756e 6365 7274  .    @Tse.uncert
-0000cd00: 6966 6965 640d 0a20 2020 2040 5473 652e  ified..    @Tse.
-0000cd10: 7469 6d65 5f73 7461 740d 0a20 2020 2040  time_stat..    @
-0000cd20: 5473 652e 6368 6563 6b5f 7175 6572 790d  Tse.check_query.
-0000cd30: 0a20 2020 2064 6566 2079 6f75 6461 6f5f  .    def youdao_
-0000cd40: 6170 6928 7365 6c66 2c20 7175 6572 795f  api(self, query_
-0000cd50: 7465 7874 3a20 7374 722c 2066 726f 6d5f  text: str, from_
-0000cd60: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
-0000cd70: 2761 7574 6f27 2c20 746f 5f6c 616e 6775  'auto', to_langu
-0000cd80: 6167 653a 2073 7472 203d 2027 656e 272c  age: str = 'en',
-0000cd90: 202a 2a6b 7761 7267 733a 2041 7069 4b77   **kwargs: ApiKw
-0000cda0: 6172 6773 5479 7065 2920 2d3e 2055 6e69  argsType) -> Uni
-0000cdb0: 6f6e 5b73 7472 2c20 6469 6374 5d3a 0d0a  on[str, dict]:..
-0000cdc0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-0000cdd0: 2020 2020 2068 7474 7073 3a2f 2f66 616e       https://fan
-0000cde0: 7969 2e79 6f75 6461 6f2e 636f 6d0d 0a20  yi.youdao.com.. 
-0000cdf0: 2020 2020 2020 203a 7061 7261 6d20 7175         :param qu
-0000ce00: 6572 795f 7465 7874 3a20 7374 722c 206d  ery_text: str, m
-0000ce10: 7573 742e 0d0a 2020 2020 2020 2020 3a70  ust...        :p
-0000ce20: 6172 616d 2066 726f 6d5f 6c61 6e67 7561  aram from_langua
-0000ce30: 6765 3a20 7374 722c 2064 6566 6175 6c74  ge: str, default
-0000ce40: 2027 6175 746f 272e 0d0a 2020 2020 2020   'auto'...      
-0000ce50: 2020 3a70 6172 616d 2074 6f5f 6c61 6e67    :param to_lang
-0000ce60: 7561 6765 3a20 7374 722c 2064 6566 6175  uage: str, defau
-0000ce70: 6c74 2027 656e 272e 0d0a 2020 2020 2020  lt 'en'...      
-0000ce80: 2020 3a70 6172 616d 202a 2a6b 7761 7267    :param **kwarg
-0000ce90: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-0000cea0: 2020 2020 3a70 6172 616d 2074 696d 656f      :param timeo
-0000ceb0: 7574 3a20 666c 6f61 742c 2064 6566 6175  ut: float, defau
-0000cec0: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
-0000ced0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0000cee0: 2070 726f 7869 6573 3a20 6469 6374 2c20   proxies: dict, 
-0000cef0: 6465 6661 756c 7420 4e6f 6e65 2e0d 0a20  default None... 
-0000cf00: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0000cf10: 7061 7261 6d20 736c 6565 705f 7365 636f  param sleep_seco
-0000cf20: 6e64 733a 2066 6c6f 6174 2c20 6465 6661  nds: float, defa
-0000cf30: 756c 7420 302e 0d0a 2020 2020 2020 2020  ult 0...        
-0000cf40: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-0000cf50: 735f 6465 7461 696c 5f72 6573 756c 743a  s_detail_result:
-0000cf60: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
-0000cf70: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
-0000cf80: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-0000cf90: 5f69 676e 6f72 655f 6c69 6d69 745f 6f66  _ignore_limit_of
-0000cfa0: 5f6c 656e 6774 683a 2062 6f6f 6c2c 2064  _length: bool, d
-0000cfb0: 6566 6175 6c74 2046 616c 7365 2e0d 0a20  efault False... 
-0000cfc0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0000cfd0: 7061 7261 6d20 6c69 6d69 745f 6f66 5f6c  param limit_of_l
-0000cfe0: 656e 6774 683a 2069 6e74 2c20 6465 6661  ength: int, defa
-0000cff0: 756c 7420 3230 3030 302e 0d0a 2020 2020  ult 20000...    
-0000d000: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0000d010: 616d 2069 665f 6967 6e6f 7265 5f65 6d70  am if_ignore_emp
-0000d020: 7479 5f71 7565 7279 3a20 626f 6f6c 2c20  ty_query: bool, 
-0000d030: 6465 6661 756c 7420 4661 6c73 652e 0d0a  default False...
-0000d040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d050: 3a70 6172 616d 2075 7064 6174 655f 7365  :param update_se
-0000d060: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
-0000d070: 3a20 696e 742c 2064 6566 6175 6c74 2031  : int, default 1
-0000d080: 3030 302e 0d0a 2020 2020 2020 2020 2020  000...          
-0000d090: 2020 2020 2020 3a70 6172 616d 2075 7064        :param upd
-0000d0a0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0000d0b0: 725f 7365 636f 6e64 733a 2066 6c6f 6174  r_seconds: float
-0000d0c0: 2c20 6465 6661 756c 7420 3135 3030 2e0d  , default 1500..
-0000d0d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d0e0: 203a 7061 7261 6d20 6966 5f73 686f 775f   :param if_show_
-0000d0f0: 7469 6d65 5f73 7461 743a 2062 6f6f 6c2c  time_stat: bool,
-0000d100: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
-0000d110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d120: 203a 7061 7261 6d20 7368 6f77 5f74 696d   :param show_tim
-0000d130: 655f 7374 6174 5f70 7265 6369 7369 6f6e  e_stat_precision
-0000d140: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
-0000d150: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000d160: 2020 203a 7061 7261 6d20 6966 5f70 7269     :param if_pri
-0000d170: 6e74 5f77 6172 6e69 6e67 3a20 626f 6f6c  nt_warning: bool
-0000d180: 2c20 6465 6661 756c 7420 5472 7565 2e0d  , default True..
-0000d190: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d1a0: 203a 7061 7261 6d20 7072 6f66 6573 7369   :param professi
-0000d1b0: 6f6e 616c 5f66 6965 6c64 3a20 7374 722c  onal_field: str,
-0000d1c0: 2064 6566 6175 6c74 2027 3027 2e20 4368   default '0'. Ch
-0000d1d0: 6f6f 7365 2066 726f 6d20 2827 3027 2c27  oose from ('0','
-0000d1e0: 3127 2c27 3227 2c27 3327 290d 0a20 2020  1','2','3')..   
-0000d1f0: 2020 2020 203a 7265 7475 726e 3a20 7374       :return: st
-0000d200: 7220 6f72 2064 6963 740d 0a20 2020 2020  r or dict..     
-0000d210: 2020 2022 2222 0d0a 0d0a 2020 2020 2020     """....      
-0000d220: 2020 646f 6d61 696e 203d 206b 7761 7267    domain = kwarg
-0000d230: 732e 6765 7428 2770 726f 6665 7373 696f  s.get('professio
-0000d240: 6e61 6c5f 6669 656c 6427 2c20 2730 2729  nal_field', '0')
-0000d250: 0d0a 2020 2020 2020 2020 6966 2064 6f6d  ..        if dom
-0000d260: 6169 6e20 6e6f 7420 696e 2073 656c 662e  ain not in self.
-0000d270: 7072 6f66 6573 7369 6f6e 616c 5f66 6965  professional_fie
-0000d280: 6c64 3a0d 0a20 2020 2020 2020 2020 2020  ld:..           
-0000d290: 2072 6169 7365 2054 7261 6e73 6c61 746f   raise Translato
-0000d2a0: 7245 7272 6f72 0d0a 0d0a 2020 2020 2020  rError....      
-0000d2b0: 2020 7469 6d65 6f75 7420 3d20 6b77 6172    timeout = kwar
-0000d2c0: 6773 2e67 6574 2827 7469 6d65 6f75 7427  gs.get('timeout'
-0000d2d0: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
-0000d2e0: 2070 726f 7869 6573 203d 206b 7761 7267   proxies = kwarg
-0000d2f0: 732e 6765 7428 2770 726f 7869 6573 272c  s.get('proxies',
-0000d300: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
-0000d310: 736c 6565 705f 7365 636f 6e64 7320 3d20  sleep_seconds = 
-0000d320: 6b77 6172 6773 2e67 6574 2827 736c 6565  kwargs.get('slee
-0000d330: 705f 7365 636f 6e64 7327 2c20 3029 0d0a  p_seconds', 0)..
-0000d340: 2020 2020 2020 2020 6966 5f70 7269 6e74          if_print
-0000d350: 5f77 6172 6e69 6e67 203d 206b 7761 7267  _warning = kwarg
-0000d360: 732e 6765 7428 2769 665f 7072 696e 745f  s.get('if_print_
-0000d370: 7761 726e 696e 6727 2c20 5472 7565 290d  warning', True).
-0000d380: 0a20 2020 2020 2020 2069 735f 6465 7461  .        is_deta
-0000d390: 696c 5f72 6573 756c 7420 3d20 6b77 6172  il_result = kwar
-0000d3a0: 6773 2e67 6574 2827 6973 5f64 6574 6169  gs.get('is_detai
-0000d3b0: 6c5f 7265 7375 6c74 272c 2046 616c 7365  l_result', False
-0000d3c0: 290d 0a20 2020 2020 2020 2075 7064 6174  )..        updat
-0000d3d0: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
-0000d3e0: 6672 6571 203d 206b 7761 7267 732e 6765  freq = kwargs.ge
-0000d3f0: 7428 2775 7064 6174 655f 7365 7373 696f  t('update_sessio
-0000d400: 6e5f 6166 7465 725f 6672 6571 272c 2073  n_after_freq', s
-0000d410: 656c 662e 6465 6661 756c 745f 7365 7373  elf.default_sess
-0000d420: 696f 6e5f 6672 6571 290d 0a20 2020 2020  ion_freq)..     
-0000d430: 2020 2075 7064 6174 655f 7365 7373 696f     update_sessio
-0000d440: 6e5f 6166 7465 725f 7365 636f 6e64 7320  n_after_seconds 
-0000d450: 3d20 6b77 6172 6773 2e67 6574 2827 7570  = kwargs.get('up
-0000d460: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-0000d470: 6572 5f73 6563 6f6e 6473 272c 2073 656c  er_seconds', sel
-0000d480: 662e 6465 6661 756c 745f 7365 7373 696f  f.default_sessio
-0000d490: 6e5f 7365 636f 6e64 7329 0d0a 2020 2020  n_seconds)..    
-0000d4a0: 2020 2020 7365 6c66 2e63 6865 636b 5f69      self.check_i
-0000d4b0: 6e70 7574 5f6c 696d 6974 2871 7565 7279  nput_limit(query
-0000d4c0: 5f74 6578 742c 2073 656c 662e 696e 7075  _text, self.inpu
-0000d4d0: 745f 6c69 6d69 7429 0d0a 0d0a 2020 2020  t_limit)....    
-0000d4e0: 2020 2020 6e6f 745f 7570 6461 7465 5f63      not_update_c
-0000d4f0: 6f6e 645f 6672 6571 203d 2031 2069 6620  ond_freq = 1 if 
-0000d500: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
-0000d510: 2025 2075 7064 6174 655f 7365 7373 696f   % update_sessio
-0000d520: 6e5f 6166 7465 725f 6672 6571 2021 3d20  n_after_freq != 
-0000d530: 3020 656c 7365 2030 0d0a 2020 2020 2020  0 else 0..      
-0000d540: 2020 6e6f 745f 7570 6461 7465 5f63 6f6e    not_update_con
-0000d550: 645f 7469 6d65 203d 2031 2069 6620 7469  d_time = 1 if ti
-0000d560: 6d65 2e74 696d 6528 2920 2d20 7365 6c66  me.time() - self
-0000d570: 2e62 6567 696e 5f74 696d 6520 3c20 7570  .begin_time < up
-0000d580: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-0000d590: 6572 5f73 6563 6f6e 6473 2065 6c73 6520  er_seconds else 
-0000d5a0: 300d 0a20 2020 2020 2020 2069 6620 6e6f  0..        if no
-0000d5b0: 7420 2873 656c 662e 7365 7373 696f 6e20  t (self.session 
-0000d5c0: 616e 6420 7365 6c66 2e6c 616e 6775 6167  and self.languag
-0000d5d0: 655f 6d61 7020 616e 6420 6e6f 745f 7570  e_map and not_up
-0000d5e0: 6461 7465 5f63 6f6e 645f 6672 6571 2061  date_cond_freq a
-0000d5f0: 6e64 206e 6f74 5f75 7064 6174 655f 636f  nd not_update_co
-0000d600: 6e64 5f74 696d 6520 616e 6420 7365 6c66  nd_time and self
-0000d610: 2e73 6563 7265 745f 6b65 7929 3a0d 0a20  .secret_key):.. 
-0000d620: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000d630: 6265 6769 6e5f 7469 6d65 203d 2074 696d  begin_time = tim
-0000d640: 652e 7469 6d65 2829 0d0a 2020 2020 2020  e.time()..      
-0000d650: 2020 2020 2020 7365 6c66 2e73 6573 7369        self.sessi
-0000d660: 6f6e 203d 2072 6571 7565 7374 732e 5365  on = requests.Se
-0000d670: 7373 696f 6e28 290d 0a20 2020 2020 2020  ssion()..       
-0000d680: 2020 2020 2068 6f73 745f 6874 6d6c 203d       host_html =
-0000d690: 2073 656c 662e 7365 7373 696f 6e2e 6765   self.session.ge
-0000d6a0: 7428 7365 6c66 2e68 6f73 745f 7572 6c2c  t(self.host_url,
-0000d6b0: 2068 6561 6465 7273 3d73 656c 662e 686f   headers=self.ho
-0000d6c0: 7374 5f68 6561 6465 7273 2c20 7469 6d65  st_headers, time
-0000d6d0: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
-0000d6e0: 7869 6573 3d70 726f 7869 6573 292e 7465  xies=proxies).te
-0000d6f0: 7874 0d0a 2020 2020 2020 2020 2020 2020  xt..            
-0000d700: 5f20 3d20 7365 6c66 2e73 6573 7369 6f6e  _ = self.session
-0000d710: 2e67 6574 2873 656c 662e 6c6f 6769 6e5f  .get(self.login_
-0000d720: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
-0000d730: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
-0000d740: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
-0000d750: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
-0000d760: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-0000d770: 656c 662e 7072 6f66 6573 7369 6f6e 616c  elf.professional
-0000d780: 5f66 6965 6c64 5f6d 6170 203d 2073 656c  _field_map = sel
-0000d790: 662e 7365 7373 696f 6e2e 6765 7428 7365  f.session.get(se
-0000d7a0: 6c66 2e64 6f6d 6169 6e5f 7572 6c2c 2068  lf.domain_url, h
-0000d7b0: 6561 6465 7273 3d73 656c 662e 686f 7374  eaders=self.host
-0000d7c0: 5f68 6561 6465 7273 2c20 7469 6d65 6f75  _headers, timeou
-0000d7d0: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
-0000d7e0: 6573 3d70 726f 7869 6573 292e 6a73 6f6e  es=proxies).json
-0000d7f0: 2829 5b27 6461 7461 275d 0d0a 2020 2020  ()['data']..    
-0000d800: 2020 2020 2020 2020 6465 6275 675f 6c61          debug_la
-0000d810: 6e67 5f6b 7761 7267 7320 3d20 7365 6c66  ng_kwargs = self
-0000d820: 2e64 6562 7567 5f6c 616e 675f 6b77 6172  .debug_lang_kwar
-0000d830: 6773 2866 726f 6d5f 6c61 6e67 7561 6765  gs(from_language
-0000d840: 2c20 746f 5f6c 616e 6775 6167 652c 2073  , to_language, s
-0000d850: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
-0000d860: 5f6c 616e 6775 6167 652c 2069 665f 7072  _language, if_pr
-0000d870: 696e 745f 7761 726e 696e 6729 0d0a 2020  int_warning)..  
-0000d880: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-0000d890: 616e 6775 6167 655f 6d61 7020 3d20 7365  anguage_map = se
-0000d8a0: 6c66 2e67 6574 5f6c 616e 6775 6167 655f  lf.get_language_
-0000d8b0: 6d61 7028 7365 6c66 2e6c 616e 6775 6167  map(self.languag
-0000d8c0: 655f 7572 6c2c 2073 656c 662e 7365 7373  e_url, self.sess
-0000d8d0: 696f 6e2c 2073 656c 662e 686f 7374 5f68  ion, self.host_h
-0000d8e0: 6561 6465 7273 2c20 7469 6d65 6f75 742c  eaders, timeout,
-0000d8f0: 2070 726f 7869 6573 2c20 2a2a 6465 6275   proxies, **debu
-0000d900: 675f 6c61 6e67 5f6b 7761 7267 7329 0d0a  g_lang_kwargs)..
-0000d910: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0000d920: 6c66 2e67 6574 5f6a 735f 7572 6c20 3d20  lf.get_js_url = 
-0000d930: 2727 2e6a 6f69 6e28 5b73 656c 662e 686f  ''.join([self.ho
-0000d940: 7374 5f75 726c 2c20 272f 272c 2072 652e  st_url, '/', re.
-0000d950: 636f 6d70 696c 6528 7365 6c66 2e67 6574  compile(self.get
-0000d960: 5f6a 735f 7061 7474 6572 6e29 2e73 6561  _js_pattern).sea
-0000d970: 7263 6828 686f 7374 5f68 746d 6c29 2e67  rch(host_html).g
-0000d980: 726f 7570 2829 5d29 0d0a 2020 2020 2020  roup()])..      
-0000d990: 2020 2020 2020 6a73 5f68 746d 6c20 3d20        js_html = 
-0000d9a0: 7365 6c66 2e73 6573 7369 6f6e 2e67 6574  self.session.get
-0000d9b0: 2873 656c 662e 6765 745f 6a73 5f75 726c  (self.get_js_url
-0000d9c0: 2c20 6865 6164 6572 733d 7365 6c66 2e68  , headers=self.h
-0000d9d0: 6f73 745f 6865 6164 6572 732c 2074 696d  ost_headers, tim
-0000d9e0: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
-0000d9f0: 6f78 6965 733d 7072 6f78 6965 7329 2e74  oxies=proxies).t
-0000da00: 6578 740d 0a0d 0a20 2020 2020 2020 2020  ext....         
-0000da10: 2020 2073 656c 662e 6465 636f 6465 5f6b     self.decode_k
-0000da20: 6579 203d 2072 652e 636f 6d70 696c 6528  ey = re.compile(
-0000da30: 2764 6563 6f64 654b 6579 3a22 282e 2a3f  'decodeKey:"(.*?
-0000da40: 2922 2c27 292e 7365 6172 6368 286a 735f  )",').search(js_
-0000da50: 6874 6d6c 292e 6772 6f75 7028 3129 0d0a  html).group(1)..
-0000da60: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000da70: 2e64 6563 6f64 655f 6976 203d 2072 652e  .decode_iv = re.
-0000da80: 636f 6d70 696c 6528 2764 6563 6f64 6549  compile('decodeI
-0000da90: 763a 2228 2e2a 3f29 222c 2729 2e73 6561  v:"(.*?)",').sea
-0000daa0: 7263 6828 6a73 5f68 746d 6c29 2e67 726f  rch(js_html).gro
-0000dab0: 7570 2831 290d 0a20 2020 2020 2020 2020  up(1)..         
-0000dac0: 2020 2073 656c 662e 6465 6661 756c 745f     self.default_
-0000dad0: 6b65 7920 3d20 7365 6c66 2e67 6574 5f64  key = self.get_d
-0000dae0: 6566 6175 6c74 5f6b 6579 286a 735f 6874  efault_key(js_ht
-0000daf0: 6d6c 290d 0a0d 0a20 2020 2020 2020 2020  ml)....         
-0000db00: 2020 2070 6172 616d 7320 3d20 7365 6c66     params = self
-0000db10: 2e67 6574 5f70 6179 6c6f 6164 286b 6579  .get_payload(key
-0000db20: 6964 3d27 7765 6266 616e 7969 2d6b 6579  id='webfanyi-key
-0000db30: 2d67 6574 7465 7227 2c20 6b65 793d 7365  -getter', key=se
-0000db40: 6c66 2e64 6566 6175 6c74 5f6b 6579 2c20  lf.default_key, 
-0000db50: 7469 6d65 7374 616d 703d 7365 6c66 2e67  timestamp=self.g
-0000db60: 6574 5f74 696d 6573 7461 6d70 2829 290d  et_timestamp()).
-0000db70: 0a20 2020 2020 2020 2020 2020 206b 6579  .            key
-0000db80: 5f72 203d 2073 656c 662e 7365 7373 696f  _r = self.sessio
-0000db90: 6e2e 6765 7428 7365 6c66 2e67 6574 5f6b  n.get(self.get_k
-0000dba0: 6579 5f75 726c 2c20 7061 7261 6d73 3d70  ey_url, params=p
-0000dbb0: 6172 616d 732c 2068 6561 6465 7273 3d73  arams, headers=s
-0000dbc0: 656c 662e 6170 695f 6865 6164 6572 732c  elf.api_headers,
-0000dbd0: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
-0000dbe0: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
-0000dbf0: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-0000dc00: 7365 6c66 2e73 6563 7265 745f 6b65 7920  self.secret_key 
-0000dc10: 3d20 6b65 795f 722e 6a73 6f6e 2829 5b27  = key_r.json()['
-0000dc20: 6461 7461 275d 5b27 7365 6372 6574 4b65  data']['secretKe
-0000dc30: 7927 5d0d 0a0d 0a20 2020 2020 2020 2066  y']....        f
-0000dc40: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
-0000dc50: 5f6c 616e 6775 6167 6520 3d20 7365 6c66  _language = self
-0000dc60: 2e63 6865 636b 5f6c 616e 6775 6167 6528  .check_language(
-0000dc70: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
-0000dc80: 6f5f 6c61 6e67 7561 6765 2c20 7365 6c66  o_language, self
-0000dc90: 2e6c 616e 6775 6167 655f 6d61 702c 206f  .language_map, o
-0000dca0: 7574 7075 745f 7a68 3d73 656c 662e 6f75  utput_zh=self.ou
-0000dcb0: 7470 7574 5f7a 6829 0d0a 0d0a 2020 2020  tput_zh)....    
-0000dcc0: 2020 2020 7472 616e 736c 6174 655f 666f      translate_fo
-0000dcd0: 726d 203d 207b 0d0a 2020 2020 2020 2020  rm = {..        
-0000dce0: 2020 2020 2769 273a 2071 7565 7279 5f74      'i': query_t
-0000dcf0: 6578 742c 0d0a 2020 2020 2020 2020 2020  ext,..          
-0000dd00: 2020 2766 726f 6d27 3a20 6672 6f6d 5f6c    'from': from_l
-0000dd10: 616e 6775 6167 652c 0d0a 2020 2020 2020  anguage,..      
-0000dd20: 2020 2020 2020 2774 6f27 3a20 746f 5f6c        'to': to_l
-0000dd30: 616e 6775 6167 6520 6966 2066 726f 6d5f  anguage if from_
-0000dd40: 6c61 6e67 7561 6765 2021 3d20 2761 7574  language != 'aut
-0000dd50: 6f27 2065 6c73 6520 2727 2c0d 0a20 2020  o' else '',..   
-0000dd60: 2020 2020 2020 2020 2027 646f 6d61 696e           'domain
-0000dd70: 273a 2064 6f6d 6169 6e2c 0d0a 2020 2020  ': domain,..    
-0000dd80: 2020 2020 2020 2020 2764 6963 7452 6573          'dictRes
-0000dd90: 756c 7427 3a20 2774 7275 6527 2c0d 0a20  ult': 'true',.. 
-0000dda0: 2020 2020 2020 207d 0d0a 2020 2020 2020         }..      
-0000ddb0: 2020 7061 796c 6f61 6420 3d20 7365 6c66    payload = self
-0000ddc0: 2e67 6574 5f70 6179 6c6f 6164 286b 6579  .get_payload(key
-0000ddd0: 6964 3d27 7765 6266 616e 7969 272c 206b  id='webfanyi', k
-0000dde0: 6579 3d73 656c 662e 6465 6661 756c 745f  ey=self.default_
-0000ddf0: 6b65 792c 2074 696d 6573 7461 6d70 3d73  key, timestamp=s
-0000de00: 656c 662e 6765 745f 7469 6d65 7374 616d  elf.get_timestam
-0000de10: 7028 292c 202a 2a74 7261 6e73 6c61 7465  p(), **translate
-0000de20: 5f66 6f72 6d29 0d0a 2020 2020 2020 2020  _form)..        
-0000de30: 7061 796c 6f61 6420 3d20 7572 6c6c 6962  payload = urllib
-0000de40: 2e70 6172 7365 2e75 726c 656e 636f 6465  .parse.urlencode
-0000de50: 2870 6179 6c6f 6164 290d 0a20 2020 2020  (payload)..     
-0000de60: 2020 2072 203d 2073 656c 662e 7365 7373     r = self.sess
-0000de70: 696f 6e2e 706f 7374 2873 656c 662e 6170  ion.post(self.ap
-0000de80: 695f 7572 6c2c 2064 6174 613d 7061 796c  i_url, data=payl
-0000de90: 6f61 642c 2068 6561 6465 7273 3d73 656c  oad, headers=sel
-0000dea0: 662e 6170 695f 6865 6164 6572 732c 2074  f.api_headers, t
-0000deb0: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
-0000dec0: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
-0000ded0: 0d0a 2020 2020 2020 2020 722e 7261 6973  ..        r.rais
-0000dee0: 655f 666f 725f 7374 6174 7573 2829 2020  e_for_status()  
-0000def0: 2320 7261 6973 6520 5472 616e 736c 6174  # raise Translat
-0000df00: 6f72 4572 726f 7228 2759 6f75 6461 6f56  orError('YoudaoV
-0000df10: 3220 6861 7320 6e6f 7420 6265 656e 2063  2 has not been c
-0000df20: 6f6d 706c 6574 6564 2e27 2920 2023 2054  ompleted.')  # T
-0000df30: 4f44 4f0d 0a20 2020 2020 2020 2064 6174  ODO..        dat
-0000df40: 6120 3d20 7365 6c66 2e64 6563 7279 7074  a = self.decrypt
-0000df50: 2872 2e74 6578 742c 2064 6563 7279 7074  (r.text, decrypt
-0000df60: 5f64 6963 7469 6f6e 6172 793d 7b7d 290d  _dictionary={}).
-0000df70: 0a20 2020 2020 2020 2074 696d 652e 736c  .        time.sl
-0000df80: 6565 7028 736c 6565 705f 7365 636f 6e64  eep(sleep_second
-0000df90: 7329 0d0a 2020 2020 2020 2020 7365 6c66  s)..        self
-0000dfa0: 2e71 7565 7279 5f63 6f75 6e74 202b 3d20  .query_count += 
-0000dfb0: 310d 0a20 2020 2020 2020 2072 6574 7572  1..        retur
-0000dfc0: 6e20 6461 7461 2069 6620 6973 5f64 6574  n data if is_det
-0000dfd0: 6169 6c5f 7265 7375 6c74 2065 6c73 6520  ail_result else 
-0000dfe0: 7374 7228 6461 7461 2920 2023 2054 4f44  str(data)  # TOD
-0000dff0: 4f0d 0a0d 0a0d 0a63 6c61 7373 2059 6f75  O......class You
-0000e000: 6461 6f56 3328 5473 6529 3a0d 0a20 2020  daoV3(Tse):..   
-0000e010: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
-0000e020: 6c66 293a 0d0a 2020 2020 2020 2020 7375  lf):..        su
-0000e030: 7065 7228 292e 5f5f 696e 6974 5f5f 2829  per().__init__()
-0000e040: 0d0a 2020 2020 2020 2020 7365 6c66 2e62  ..        self.b
-0000e050: 6567 696e 5f74 696d 6520 3d20 7469 6d65  egin_time = time
-0000e060: 2e74 696d 6528 290d 0a20 2020 2020 2020  .time()..       
-0000e070: 2073 656c 662e 686f 7374 5f75 726c 203d   self.host_url =
-0000e080: 2027 6874 7470 733a 2f2f 6169 2e79 6f75   'https://ai.you
-0000e090: 6461 6f2e 636f 6d2f 7072 6f64 7563 742d  dao.com/product-
-0000e0a0: 6661 6e79 692d 7465 7874 2e73 270d 0a20  fanyi-text.s'.. 
-0000e0b0: 2020 2020 2020 2073 656c 662e 6170 695f         self.api_
-0000e0c0: 7572 6c20 3d20 2768 7474 7073 3a2f 2f61  url = 'https://a
-0000e0d0: 6964 656d 6f2e 796f 7564 616f 2e63 6f6d  idemo.youdao.com
-0000e0e0: 2f74 7261 6e73 270d 0a20 2020 2020 2020  /trans'..       
-0000e0f0: 2073 656c 662e 686f 7374 5f68 6561 6465   self.host_heade
-0000e100: 7273 203d 2073 656c 662e 6765 745f 6865  rs = self.get_he
-0000e110: 6164 6572 7328 7365 6c66 2e68 6f73 745f  aders(self.host_
-0000e120: 7572 6c2c 2069 665f 6170 693d 4661 6c73  url, if_api=Fals
-0000e130: 6529 0d0a 2020 2020 2020 2020 7365 6c66  e)..        self
-0000e140: 2e61 7069 5f68 6561 6465 7273 203d 2073  .api_headers = s
-0000e150: 656c 662e 6765 745f 6865 6164 6572 7328  elf.get_headers(
-0000e160: 7365 6c66 2e68 6f73 745f 7572 6c2c 2069  self.host_url, i
-0000e170: 665f 6170 693d 5472 7565 290d 0a20 2020  f_api=True)..   
-0000e180: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-0000e190: 6765 5f6d 6170 203d 204e 6f6e 650d 0a20  ge_map = None.. 
-0000e1a0: 2020 2020 2020 2073 656c 662e 7365 7373         self.sess
-0000e1b0: 696f 6e20 3d20 4e6f 6e65 0d0a 2020 2020  ion = None..    
-0000e1c0: 2020 2020 7365 6c66 2e71 7565 7279 5f63      self.query_c
-0000e1d0: 6f75 6e74 203d 2030 0d0a 2020 2020 2020  ount = 0..      
-0000e1e0: 2020 7365 6c66 2e6f 7574 7075 745f 7a68    self.output_zh
-0000e1f0: 203d 2027 7a68 2d43 4853 270d 0a20 2020   = 'zh-CHS'..   
-0000e200: 2020 2020 2073 656c 662e 696e 7075 745f       self.input_
-0000e210: 6c69 6d69 7420 3d20 696e 7428 3165 3329  limit = int(1e3)
-0000e220: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
-0000e230: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
-0000e240: 7561 6765 203d 2073 656c 662e 6f75 7470  uage = self.outp
-0000e250: 7574 5f7a 680d 0a0d 0a20 2020 2040 5473  ut_zh....    @Ts
-0000e260: 652e 6465 6275 675f 6c61 6e67 7561 6765  e.debug_language
-0000e270: 5f6d 6170 0d0a 2020 2020 6465 6620 6765  _map..    def ge
-0000e280: 745f 6c61 6e67 7561 6765 5f6d 6170 2873  t_language_map(s
-0000e290: 656c 662c 2068 6f73 745f 6874 6d6c 3a20  elf, host_html: 
-0000e2a0: 7374 722c 202a 2a6b 7761 7267 733a 204c  str, **kwargs: L
-0000e2b0: 616e 674d 6170 4b77 6172 6773 5479 7065  angMapKwargsType
-0000e2c0: 2920 2d3e 2064 6963 743a 0d0a 2020 2020  ) -> dict:..    
-0000e2d0: 2020 2020 6574 203d 206c 786d 6c2e 6574      et = lxml.et
-0000e2e0: 7265 652e 4854 4d4c 2868 6f73 745f 6874  ree.HTML(host_ht
-0000e2f0: 6d6c 290d 0a20 2020 2020 2020 206c 616e  ml)..        lan
-0000e300: 675f 6c69 7374 203d 2065 742e 7870 6174  g_list = et.xpat
-0000e310: 6828 272f 2f2a 5b40 6964 3d22 6375 7374  h('//*[@id="cust
-0000e320: 6f6d 5365 6c65 6374 4f70 7469 6f6e 225d  omSelectOption"]
-0000e330: 2f6c 692f 612f 4076 616c 2729 0d0a 2020  /li/a/@val')..  
-0000e340: 2020 2020 2020 6c61 6e67 5f6c 6973 7420        lang_list 
-0000e350: 3d20 736f 7274 6564 285b 6974 2e73 706c  = sorted([it.spl
-0000e360: 6974 2827 3227 295b 315d 2066 6f72 2069  it('2')[1] for i
-0000e370: 7420 696e 206c 616e 675f 6c69 7374 2069  t in lang_list i
-0000e380: 6620 6627 7b73 656c 662e 6f75 7470 7574  f f'{self.output
-0000e390: 5f7a 687d 3227 2069 6e20 6974 5d29 0d0a  _zh}2' in it])..
-0000e3a0: 2020 2020 2020 2020 7265 7475 726e 207b          return {
-0000e3b0: 2a2a 7b6c 616e 673a 205b 7365 6c66 2e6f  **{lang: [self.o
-0000e3c0: 7574 7075 745f 7a68 5d20 666f 7220 6c61  utput_zh] for la
-0000e3d0: 6e67 2069 6e20 6c61 6e67 5f6c 6973 747d  ng in lang_list}
-0000e3e0: 2c20 2a2a 7b73 656c 662e 6f75 7470 7574  , **{self.output
-0000e3f0: 5f7a 683a 206c 616e 675f 6c69 7374 7d7d  _zh: lang_list}}
-0000e400: 0d0a 0d0a 2020 2020 4054 7365 2e74 696d  ....    @Tse.tim
-0000e410: 655f 7374 6174 0d0a 2020 2020 4054 7365  e_stat..    @Tse
-0000e420: 2e63 6865 636b 5f71 7565 7279 0d0a 2020  .check_query..  
-0000e430: 2020 6465 6620 796f 7564 616f 5f61 7069    def youdao_api
-0000e440: 2873 656c 662c 2071 7565 7279 5f74 6578  (self, query_tex
-0000e450: 743a 2073 7472 2c20 6672 6f6d 5f6c 616e  t: str, from_lan
-0000e460: 6775 6167 653a 2073 7472 203d 2027 6175  guage: str = 'au
-0000e470: 746f 272c 2074 6f5f 6c61 6e67 7561 6765  to', to_language
-0000e480: 3a20 7374 7220 3d20 2765 6e27 2c20 2a2a  : str = 'en', **
-0000e490: 6b77 6172 6773 3a20 4170 694b 7761 7267  kwargs: ApiKwarg
-0000e4a0: 7354 7970 6529 202d 3e20 556e 696f 6e5b  sType) -> Union[
-0000e4b0: 7374 722c 2064 6963 745d 3a0d 0a20 2020  str, dict]:..   
-0000e4c0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-0000e4d0: 2020 6874 7470 733a 2f2f 6169 2e79 6f75    https://ai.you
-0000e4e0: 6461 6f2e 636f 6d2f 7072 6f64 7563 742d  dao.com/product-
-0000e4f0: 6661 6e79 692d 7465 7874 2e73 0d0a 2020  fanyi-text.s..  
-0000e500: 2020 2020 2020 3a70 6172 616d 2071 7565        :param que
-0000e510: 7279 5f74 6578 743a 2073 7472 2c20 6d75  ry_text: str, mu
-0000e520: 7374 2e0d 0a20 2020 2020 2020 203a 7061  st...        :pa
-0000e530: 7261 6d20 6672 6f6d 5f6c 616e 6775 6167  ram from_languag
-0000e540: 653a 2073 7472 2c20 6465 6661 756c 7420  e: str, default 
-0000e550: 2761 7574 6f27 2e0d 0a20 2020 2020 2020  'auto'...       
-0000e560: 203a 7061 7261 6d20 746f 5f6c 616e 6775   :param to_langu
-0000e570: 6167 653a 2073 7472 2c20 6465 6661 756c  age: str, defaul
-0000e580: 7420 2765 6e27 2e0d 0a20 2020 2020 2020  t 'en'...       
-0000e590: 203a 7061 7261 6d20 2a2a 6b77 6172 6773   :param **kwargs
-0000e5a0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000e5b0: 2020 203a 7061 7261 6d20 7469 6d65 6f75     :param timeou
-0000e5c0: 743a 2066 6c6f 6174 2c20 6465 6661 756c  t: float, defaul
-0000e5d0: 7420 4e6f 6e65 2e0d 0a20 2020 2020 2020  t None...       
-0000e5e0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-0000e5f0: 7072 6f78 6965 733a 2064 6963 742c 2064  proxies: dict, d
-0000e600: 6566 6175 6c74 204e 6f6e 652e 0d0a 2020  efault None...  
-0000e610: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-0000e620: 6172 616d 2073 6c65 6570 5f73 6563 6f6e  aram sleep_secon
-0000e630: 6473 3a20 666c 6f61 742c 2064 6566 6175  ds: float, defau
-0000e640: 6c74 2030 2e0d 0a20 2020 2020 2020 2020  lt 0...         
-0000e650: 2020 2020 2020 203a 7061 7261 6d20 6973         :param is
-0000e660: 5f64 6574 6169 6c5f 7265 7375 6c74 3a20  _detail_result: 
-0000e670: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
-0000e680: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
-0000e690: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
-0000e6a0: 6967 6e6f 7265 5f6c 696d 6974 5f6f 665f  ignore_limit_of_
-0000e6b0: 6c65 6e67 7468 3a20 626f 6f6c 2c20 6465  length: bool, de
-0000e6c0: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
-0000e6d0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-0000e6e0: 6172 616d 206c 696d 6974 5f6f 665f 6c65  aram limit_of_le
-0000e6f0: 6e67 7468 3a20 696e 742c 2064 6566 6175  ngth: int, defau
-0000e700: 6c74 2032 3030 3030 2e0d 0a20 2020 2020  lt 20000...     
-0000e710: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-0000e720: 6d20 6966 5f69 676e 6f72 655f 656d 7074  m if_ignore_empt
-0000e730: 795f 7175 6572 793a 2062 6f6f 6c2c 2064  y_query: bool, d
-0000e740: 6566 6175 6c74 2046 616c 7365 2e0d 0a20  efault False... 
-0000e750: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0000e760: 7061 7261 6d20 7570 6461 7465 5f73 6573  param update_ses
-0000e770: 7369 6f6e 5f61 6674 6572 5f66 7265 713a  sion_after_freq:
-0000e780: 2069 6e74 2c20 6465 6661 756c 7420 3130   int, default 10
-0000e790: 3030 2e0d 0a20 2020 2020 2020 2020 2020  00...           
-0000e7a0: 2020 2020 203a 7061 7261 6d20 7570 6461       :param upda
-0000e7b0: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
-0000e7c0: 5f73 6563 6f6e 6473 3a20 666c 6f61 742c  _seconds: float,
-0000e7d0: 2064 6566 6175 6c74 2031 3530 302e 0d0a   default 1500...
-0000e7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e7f0: 3a70 6172 616d 2069 665f 7368 6f77 5f74  :param if_show_t
-0000e800: 696d 655f 7374 6174 3a20 626f 6f6c 2c20  ime_stat: bool, 
-0000e810: 6465 6661 756c 7420 4661 6c73 652e 0d0a  default False...
-0000e820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e830: 3a70 6172 616d 2073 686f 775f 7469 6d65  :param show_time
-0000e840: 5f73 7461 745f 7072 6563 6973 696f 6e3a  _stat_precision:
-0000e850: 2069 6e74 2c20 6465 6661 756c 7420 322e   int, default 2.
-0000e860: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000e870: 2020 3a70 6172 616d 2069 665f 7072 696e    :param if_prin
-0000e880: 745f 7761 726e 696e 673a 2062 6f6f 6c2c  t_warning: bool,
-0000e890: 2064 6566 6175 6c74 2054 7275 652e 0d0a   default True...
-0000e8a0: 2020 2020 2020 2020 3a72 6574 7572 6e3a          :return:
-0000e8b0: 2073 7472 206f 7220 6469 6374 0d0a 2020   str or dict..  
-0000e8c0: 2020 2020 2020 2222 220d 0a0d 0a20 2020        """....   
-0000e8d0: 2020 2020 2074 696d 656f 7574 203d 206b       timeout = k
-0000e8e0: 7761 7267 732e 6765 7428 2774 696d 656f  wargs.get('timeo
-0000e8f0: 7574 272c 204e 6f6e 6529 0d0a 2020 2020  ut', None)..    
-0000e900: 2020 2020 7072 6f78 6965 7320 3d20 6b77      proxies = kw
-0000e910: 6172 6773 2e67 6574 2827 7072 6f78 6965  args.get('proxie
-0000e920: 7327 2c20 4e6f 6e65 290d 0a20 2020 2020  s', None)..     
-0000e930: 2020 2073 6c65 6570 5f73 6563 6f6e 6473     sleep_seconds
-0000e940: 203d 206b 7761 7267 732e 6765 7428 2773   = kwargs.get('s
-0000e950: 6c65 6570 5f73 6563 6f6e 6473 272c 2030  leep_seconds', 0
-0000e960: 290d 0a20 2020 2020 2020 2069 665f 7072  )..        if_pr
-0000e970: 696e 745f 7761 726e 696e 6720 3d20 6b77  int_warning = kw
-0000e980: 6172 6773 2e67 6574 2827 6966 5f70 7269  args.get('if_pri
-0000e990: 6e74 5f77 6172 6e69 6e67 272c 2054 7275  nt_warning', Tru
-0000e9a0: 6529 0d0a 2020 2020 2020 2020 6973 5f64  e)..        is_d
-0000e9b0: 6574 6169 6c5f 7265 7375 6c74 203d 206b  etail_result = k
-0000e9c0: 7761 7267 732e 6765 7428 2769 735f 6465  wargs.get('is_de
-0000e9d0: 7461 696c 5f72 6573 756c 7427 2c20 4661  tail_result', Fa
-0000e9e0: 6c73 6529 0d0a 2020 2020 2020 2020 7570  lse)..        up
-0000e9f0: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-0000ea00: 6572 5f66 7265 7120 3d20 6b77 6172 6773  er_freq = kwargs
-0000ea10: 2e67 6574 2827 7570 6461 7465 5f73 6573  .get('update_ses
-0000ea20: 7369 6f6e 5f61 6674 6572 5f66 7265 7127  sion_after_freq'
-0000ea30: 2c20 7365 6c66 2e64 6566 6175 6c74 5f73  , self.default_s
-0000ea40: 6573 7369 6f6e 5f66 7265 7129 0d0a 2020  ession_freq)..  
-0000ea50: 2020 2020 2020 7570 6461 7465 5f73 6573        update_ses
-0000ea60: 7369 6f6e 5f61 6674 6572 5f73 6563 6f6e  sion_after_secon
-0000ea70: 6473 203d 206b 7761 7267 732e 6765 7428  ds = kwargs.get(
-0000ea80: 2775 7064 6174 655f 7365 7373 696f 6e5f  'update_session_
-0000ea90: 6166 7465 725f 7365 636f 6e64 7327 2c20  after_seconds', 
-0000eaa0: 7365 6c66 2e64 6566 6175 6c74 5f73 6573  self.default_ses
-0000eab0: 7369 6f6e 5f73 6563 6f6e 6473 290d 0a20  sion_seconds).. 
-0000eac0: 2020 2020 2020 2073 656c 662e 6368 6563         self.chec
-0000ead0: 6b5f 696e 7075 745f 6c69 6d69 7428 7175  k_input_limit(qu
-0000eae0: 6572 795f 7465 7874 2c20 7365 6c66 2e69  ery_text, self.i
-0000eaf0: 6e70 7574 5f6c 696d 6974 290d 0a0d 0a20  nput_limit).... 
-0000eb00: 2020 2020 2020 206e 6f74 5f75 7064 6174         not_updat
-0000eb10: 655f 636f 6e64 5f66 7265 7120 3d20 3120  e_cond_freq = 1 
-0000eb20: 6966 2073 656c 662e 7175 6572 795f 636f  if self.query_co
-0000eb30: 756e 7420 2520 7570 6461 7465 5f73 6573  unt % update_ses
-0000eb40: 7369 6f6e 5f61 6674 6572 5f66 7265 7120  sion_after_freq 
-0000eb50: 213d 2030 2065 6c73 6520 300d 0a20 2020  != 0 else 0..   
-0000eb60: 2020 2020 206e 6f74 5f75 7064 6174 655f       not_update_
-0000eb70: 636f 6e64 5f74 696d 6520 3d20 3120 6966  cond_time = 1 if
-0000eb80: 2074 696d 652e 7469 6d65 2829 202d 2073   time.time() - s
-0000eb90: 656c 662e 6265 6769 6e5f 7469 6d65 203c  elf.begin_time <
-0000eba0: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-0000ebb0: 6166 7465 725f 7365 636f 6e64 7320 656c  after_seconds el
-0000ebc0: 7365 2030 0d0a 2020 2020 2020 2020 6966  se 0..        if
-0000ebd0: 206e 6f74 2028 7365 6c66 2e73 6573 7369   not (self.sessi
-0000ebe0: 6f6e 2061 6e64 2073 656c 662e 6c61 6e67  on and self.lang
-0000ebf0: 7561 6765 5f6d 6170 2061 6e64 206e 6f74  uage_map and not
-0000ec00: 5f75 7064 6174 655f 636f 6e64 5f66 7265  _update_cond_fre
-0000ec10: 7120 616e 6420 6e6f 745f 7570 6461 7465  q and not_update
-0000ec20: 5f63 6f6e 645f 7469 6d65 293a 0d0a 2020  _cond_time):..  
-0000ec30: 2020 2020 2020 2020 2020 7365 6c66 2e62            self.b
-0000ec40: 6567 696e 5f74 696d 6520 3d20 7469 6d65  egin_time = time
-0000ec50: 2e74 696d 6528 290d 0a20 2020 2020 2020  .time()..       
-0000ec60: 2020 2020 2073 656c 662e 7365 7373 696f       self.sessio
-0000ec70: 6e20 3d20 7265 7175 6573 7473 2e53 6573  n = requests.Ses
-0000ec80: 7369 6f6e 2829 0d0a 2020 2020 2020 2020  sion()..        
-0000ec90: 2020 2020 686f 7374 5f68 746d 6c20 3d20      host_html = 
-0000eca0: 7365 6c66 2e73 6573 7369 6f6e 2e67 6574  self.session.get
-0000ecb0: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
-0000ecc0: 6865 6164 6572 733d 7365 6c66 2e68 6f73  headers=self.hos
-0000ecd0: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
-0000ece0: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
-0000ecf0: 6965 733d 7072 6f78 6965 7329 2e74 6578  ies=proxies).tex
-0000ed00: 740d 0a20 2020 2020 2020 2020 2020 2064  t..            d
-0000ed10: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
-0000ed20: 203d 2073 656c 662e 6465 6275 675f 6c61   = self.debug_la
-0000ed30: 6e67 5f6b 7761 7267 7328 6672 6f6d 5f6c  ng_kwargs(from_l
-0000ed40: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
-0000ed50: 7561 6765 2c20 7365 6c66 2e64 6566 6175  uage, self.defau
-0000ed60: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
-0000ed70: 2c20 6966 5f70 7269 6e74 5f77 6172 6e69  , if_print_warni
-0000ed80: 6e67 290d 0a20 2020 2020 2020 2020 2020  ng)..           
-0000ed90: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
-0000eda0: 6170 203d 2073 656c 662e 6765 745f 6c61  ap = self.get_la
-0000edb0: 6e67 7561 6765 5f6d 6170 2868 6f73 745f  nguage_map(host_
-0000edc0: 6874 6d6c 2c20 2a2a 6465 6275 675f 6c61  html, **debug_la
-0000edd0: 6e67 5f6b 7761 7267 7329 0d0a 0d0a 2020  ng_kwargs)....  
-0000ede0: 2020 2020 2020 6672 6f6d 5f6c 616e 6775        from_langu
-0000edf0: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
-0000ee00: 203d 2073 656c 662e 6368 6563 6b5f 6c61   = self.check_la
-0000ee10: 6e67 7561 6765 2866 726f 6d5f 6c61 6e67  nguage(from_lang
-0000ee20: 7561 6765 2c20 746f 5f6c 616e 6775 6167  uage, to_languag
-0000ee30: 652c 2073 656c 662e 6c61 6e67 7561 6765  e, self.language
-0000ee40: 5f6d 6170 2c20 6f75 7470 7574 5f7a 683d  _map, output_zh=
-0000ee50: 7365 6c66 2e6f 7574 7075 745f 7a68 290d  self.output_zh).
-0000ee60: 0a20 2020 2020 2020 2069 6620 6672 6f6d  .        if from
-0000ee70: 5f6c 616e 6775 6167 6520 3d3d 2027 6175  _language == 'au
-0000ee80: 746f 273a 0d0a 2020 2020 2020 2020 2020  to':..          
-0000ee90: 2020 6672 6f6d 5f6c 616e 6775 6167 6520    from_language 
-0000eea0: 3d20 746f 5f6c 616e 6775 6167 6520 3d20  = to_language = 
-0000eeb0: 2741 7574 6f27 0d0a 0d0a 2020 2020 2020  'Auto'....      
-0000eec0: 2020 7061 796c 6f61 6420 3d20 7b27 7127    payload = {'q'
-0000eed0: 3a20 7175 6572 795f 7465 7874 2c20 2766  : query_text, 'f
-0000eee0: 726f 6d27 3a20 6672 6f6d 5f6c 616e 6775  rom': from_langu
-0000eef0: 6167 652c 2027 746f 273a 2074 6f5f 6c61  age, 'to': to_la
-0000ef00: 6e67 7561 6765 7d0d 0a20 2020 2020 2020  nguage}..       
-0000ef10: 2070 6179 6c6f 6164 203d 2075 726c 6c69   payload = urlli
-0000ef20: 622e 7061 7273 652e 7572 6c65 6e63 6f64  b.parse.urlencod
-0000ef30: 6528 7061 796c 6f61 6429 0d0a 2020 2020  e(payload)..    
-0000ef40: 2020 2020 7220 3d20 7365 6c66 2e73 6573      r = self.ses
-0000ef50: 7369 6f6e 2e70 6f73 7428 7365 6c66 2e61  sion.post(self.a
-0000ef60: 7069 5f75 726c 2c20 6461 7461 3d70 6179  pi_url, data=pay
-0000ef70: 6c6f 6164 2c20 6865 6164 6572 733d 7365  load, headers=se
-0000ef80: 6c66 2e61 7069 5f68 6561 6465 7273 2c20  lf.api_headers, 
-0000ef90: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
-0000efa0: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
-0000efb0: 290d 0a20 2020 2020 2020 2072 2e72 6169  )..        r.rai
-0000efc0: 7365 5f66 6f72 5f73 7461 7475 7328 290d  se_for_status().
-0000efd0: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
-0000efe0: 722e 6a73 6f6e 2829 0d0a 2020 2020 2020  r.json()..      
-0000eff0: 2020 7469 6d65 2e73 6c65 6570 2873 6c65    time.sleep(sle
-0000f000: 6570 5f73 6563 6f6e 6473 290d 0a20 2020  ep_seconds)..   
-0000f010: 2020 2020 2073 656c 662e 7175 6572 795f       self.query_
-0000f020: 636f 756e 7420 2b3d 2031 0d0a 2020 2020  count += 1..    
-0000f030: 2020 2020 7265 7475 726e 2064 6174 6120      return data 
-0000f040: 6966 2069 735f 6465 7461 696c 5f72 6573  if is_detail_res
-0000f050: 756c 7420 656c 7365 2064 6174 615b 2774  ult else data['t
-0000f060: 7261 6e73 6c61 7469 6f6e 275d 5b30 5d0d  ranslation'][0].
-0000f070: 0a0d 0a0d 0a63 6c61 7373 2051 5146 616e  .....class QQFan
-0000f080: 7969 2854 7365 293a 0d0a 2020 2020 6465  yi(Tse):..    de
-0000f090: 6620 5f5f 696e 6974 5f5f 2873 656c 6629  f __init__(self)
-0000f0a0: 3a0d 0a20 2020 2020 2020 2073 7570 6572  :..        super
-0000f0b0: 2829 2e5f 5f69 6e69 745f 5f28 290d 0a20  ().__init__().. 
-0000f0c0: 2020 2020 2020 2073 656c 662e 6265 6769         self.begi
-0000f0d0: 6e5f 7469 6d65 203d 2074 696d 652e 7469  n_time = time.ti
-0000f0e0: 6d65 2829 0d0a 2020 2020 2020 2020 7365  me()..        se
-0000f0f0: 6c66 2e68 6f73 745f 7572 6c20 3d20 2768  lf.host_url = 'h
-0000f100: 7474 7073 3a2f 2f66 616e 7969 2e71 712e  ttps://fanyi.qq.
-0000f110: 636f 6d27 0d0a 2020 2020 2020 2020 7365  com'..        se
-0000f120: 6c66 2e61 7069 5f75 726c 203d 2027 6874  lf.api_url = 'ht
-0000f130: 7470 733a 2f2f 6661 6e79 692e 7171 2e63  tps://fanyi.qq.c
-0000f140: 6f6d 2f61 7069 2f74 7261 6e73 6c61 7465  om/api/translate
-0000f150: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
-0000f160: 6765 745f 6c61 6e67 7561 6765 5f75 726c  get_language_url
-0000f170: 203d 2027 6874 7470 733a 2f2f 6661 6e79   = 'https://fany
-0000f180: 692e 7171 2e63 6f6d 2f6a 732f 696e 6465  i.qq.com/js/inde
-0000f190: 782e 6a73 270d 0a20 2020 2020 2020 2073  x.js'..        s
-0000f1a0: 656c 662e 6765 745f 7174 5f75 726c 203d  elf.get_qt_url =
-0000f1b0: 2027 6874 7470 733a 2f2f 6661 6e79 692e   'https://fanyi.
-0000f1c0: 7171 2e63 6f6d 2f61 7069 2f72 6561 7574  qq.com/api/reaut
-0000f1d0: 6831 3266 270d 0a20 2020 2020 2020 2073  h12f'..        s
-0000f1e0: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
-0000f1f0: 203d 2073 656c 662e 6765 745f 6865 6164   = self.get_head
-0000f200: 6572 7328 7365 6c66 2e68 6f73 745f 7572  ers(self.host_ur
-0000f210: 6c2c 2069 665f 6170 693d 4661 6c73 6529  l, if_api=False)
-0000f220: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000f230: 7069 5f68 6561 6465 7273 203d 2073 656c  pi_headers = sel
-0000f240: 662e 6765 745f 6865 6164 6572 7328 7365  f.get_headers(se
-0000f250: 6c66 2e68 6f73 745f 7572 6c2c 2069 665f  lf.host_url, if_
-0000f260: 6170 693d 5472 7565 290d 0a20 2020 2020  api=True)..     
-0000f270: 2020 2073 656c 662e 7174 5f68 6561 6465     self.qt_heade
-0000f280: 7273 203d 2073 656c 662e 6765 745f 6865  rs = self.get_he
-0000f290: 6164 6572 7328 7365 6c66 2e68 6f73 745f  aders(self.host_
-0000f2a0: 7572 6c2c 2069 665f 6170 693d 5472 7565  url, if_api=True
-0000f2b0: 2c20 6966 5f6a 736f 6e5f 666f 725f 6170  , if_json_for_ap
-0000f2c0: 693d 5472 7565 290d 0a20 2020 2020 2020  i=True)..       
-0000f2d0: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
-0000f2e0: 6170 203d 204e 6f6e 650d 0a20 2020 2020  ap = None..     
-0000f2f0: 2020 2073 656c 662e 7365 7373 696f 6e20     self.session 
-0000f300: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-0000f310: 7365 6c66 2e71 7476 5f71 746b 203d 204e  self.qtv_qtk = N
-0000f320: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
-0000f330: 662e 7175 6572 795f 636f 756e 7420 3d20  f.query_count = 
-0000f340: 300d 0a20 2020 2020 2020 2073 656c 662e  0..        self.
-0000f350: 6f75 7470 7574 5f7a 6820 3d20 277a 6827  output_zh = 'zh'
-0000f360: 0d0a 2020 2020 2020 2020 7365 6c66 2e69  ..        self.i
-0000f370: 6e70 7574 5f6c 696d 6974 203d 2069 6e74  nput_limit = int
-0000f380: 2832 6533 290d 0a20 2020 2020 2020 2073  (2e3)..        s
-0000f390: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
-0000f3a0: 5f6c 616e 6775 6167 6520 3d20 7365 6c66  _language = self
-0000f3b0: 2e6f 7574 7075 745f 7a68 0d0a 0d0a 2020  .output_zh....  
-0000f3c0: 2020 4054 7365 2e64 6562 7567 5f6c 616e    @Tse.debug_lan
-0000f3d0: 6775 6167 655f 6d61 700d 0a20 2020 2064  guage_map..    d
-0000f3e0: 6566 2067 6574 5f6c 616e 6775 6167 655f  ef get_language_
-0000f3f0: 6d61 7028 7365 6c66 2c20 7373 3a20 5365  map(self, ss: Se
-0000f400: 7373 696f 6e54 7970 652c 206c 616e 6775  ssionType, langu
-0000f410: 6167 655f 7572 6c3a 2073 7472 2c20 7469  age_url: str, ti
-0000f420: 6d65 6f75 743a 204f 7074 696f 6e61 6c5b  meout: Optional[
-0000f430: 666c 6f61 745d 2c20 7072 6f78 6965 733a  float], proxies:
-0000f440: 204f 7074 696f 6e61 6c5b 6469 6374 5d2c   Optional[dict],
-0000f450: 202a 2a6b 7761 7267 733a 204c 616e 674d   **kwargs: LangM
-0000f460: 6170 4b77 6172 6773 5479 7065 2920 2d3e  apKwargsType) ->
-0000f470: 2064 6963 743a 0d0a 2020 2020 2020 2020   dict:..        
-0000f480: 7220 3d20 7373 2e67 6574 286c 616e 6775  r = ss.get(langu
-0000f490: 6167 655f 7572 6c2c 2068 6561 6465 7273  age_url, headers
-0000f4a0: 3d73 656c 662e 686f 7374 5f68 6561 6465  =self.host_heade
-0000f4b0: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
-0000f4c0: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
-0000f4d0: 7869 6573 290d 0a20 2020 2020 2020 2072  xies)..        r
-0000f4e0: 2e72 6169 7365 5f66 6f72 5f73 7461 7475  .raise_for_statu
-0000f4f0: 7328 290d 0a20 2020 2020 2020 206c 616e  s()..        lan
-0000f500: 675f 6d61 705f 7374 7220 3d20 7265 2e63  g_map_str = re.c
-0000f510: 6f6d 7069 6c65 2827 433d 7b28 2e2a 3f29  ompile('C={(.*?)
-0000f520: 7d7c 6c61 6e67 7561 6765 5061 6972 203d  }|languagePair =
-0000f530: 207b 282e 2a3f 297d 272c 2066 6c61 6773   {(.*?)}', flags
-0000f540: 3d72 652e 5329 2e73 6561 7263 6828 722e  =re.S).search(r.
-0000f550: 7465 7874 292e 6772 6f75 7028 2920 2023  text).group()  #
-0000f560: 2043 3d0d 0a20 2020 2020 2020 2072 6574   C=..        ret
-0000f570: 7572 6e20 6578 6563 6a73 2e65 7661 6c28  urn execjs.eval(
-0000f580: 6c61 6e67 5f6d 6170 5f73 7472 290d 0a0d  lang_map_str)...
-0000f590: 0a20 2020 2064 6566 2067 6574 5f71 7428  .    def get_qt(
-0000f5a0: 7365 6c66 2c20 7373 3a20 5365 7373 696f  self, ss: Sessio
-0000f5b0: 6e54 7970 652c 2074 696d 656f 7574 3a20  nType, timeout: 
-0000f5c0: 666c 6f61 742c 2070 726f 7869 6573 3a20  float, proxies: 
-0000f5d0: 6469 6374 2920 2d3e 2064 6963 743a 0d0a  dict) -> dict:..
-0000f5e0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000f5f0: 732e 706f 7374 2873 656c 662e 6765 745f  s.post(self.get_
-0000f600: 7174 5f75 726c 2c20 6865 6164 6572 733d  qt_url, headers=
-0000f610: 7365 6c66 2e71 745f 6865 6164 6572 732c  self.qt_headers,
-0000f620: 206a 736f 6e3d 7365 6c66 2e71 7476 5f71   json=self.qtv_q
-0000f630: 746b 2c20 7469 6d65 6f75 743d 7469 6d65  tk, timeout=time
-0000f640: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
-0000f650: 7869 6573 292e 6a73 6f6e 2829 0d0a 0d0a  xies).json()....
-0000f660: 2020 2020 4054 7365 2e74 696d 655f 7374      @Tse.time_st
-0000f670: 6174 0d0a 2020 2020 4054 7365 2e63 6865  at..    @Tse.che
-0000f680: 636b 5f71 7565 7279 0d0a 2020 2020 6465  ck_query..    de
-0000f690: 6620 7171 4661 6e79 695f 6170 6928 7365  f qqFanyi_api(se
-0000f6a0: 6c66 2c20 7175 6572 795f 7465 7874 3a20  lf, query_text: 
-0000f6b0: 7374 722c 2066 726f 6d5f 6c61 6e67 7561  str, from_langua
-0000f6c0: 6765 3a20 7374 7220 3d20 2761 7574 6f27  ge: str = 'auto'
-0000f6d0: 2c20 746f 5f6c 616e 6775 6167 653a 2073  , to_language: s
-0000f6e0: 7472 203d 2027 656e 272c 202a 2a6b 7761  tr = 'en', **kwa
-0000f6f0: 7267 733a 2041 7069 4b77 6172 6773 5479  rgs: ApiKwargsTy
-0000f700: 7065 2920 2d3e 2055 6e69 6f6e 5b73 7472  pe) -> Union[str
-0000f710: 2c20 6469 6374 5d3a 0d0a 2020 2020 2020  , dict]:..      
-0000f720: 2020 2222 220d 0a20 2020 2020 2020 2068    """..        h
-0000f730: 7474 7073 3a2f 2f66 616e 7969 2e71 712e  ttps://fanyi.qq.
-0000f740: 636f 6d0d 0a20 2020 2020 2020 203a 7061  com..        :pa
-0000f750: 7261 6d20 7175 6572 795f 7465 7874 3a20  ram query_text: 
-0000f760: 7374 722c 206d 7573 742e 0d0a 2020 2020  str, must...    
-0000f770: 2020 2020 3a70 6172 616d 2066 726f 6d5f      :param from_
-0000f780: 6c61 6e67 7561 6765 3a20 7374 722c 2064  language: str, d
-0000f790: 6566 6175 6c74 2027 6175 746f 272e 0d0a  efault 'auto'...
-0000f7a0: 2020 2020 2020 2020 3a70 6172 616d 2074          :param t
-0000f7b0: 6f5f 6c61 6e67 7561 6765 3a20 7374 722c  o_language: str,
-0000f7c0: 2064 6566 6175 6c74 2027 656e 272e 0d0a   default 'en'...
-0000f7d0: 2020 2020 2020 2020 3a70 6172 616d 202a          :param *
-0000f7e0: 2a6b 7761 7267 733a 0d0a 2020 2020 2020  *kwargs:..      
-0000f7f0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0000f800: 2074 696d 656f 7574 3a20 666c 6f61 742c   timeout: float,
-0000f810: 2064 6566 6175 6c74 204e 6f6e 652e 0d0a   default None...
-0000f820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f830: 3a70 6172 616d 2070 726f 7869 6573 3a20  :param proxies: 
-0000f840: 6469 6374 2c20 6465 6661 756c 7420 4e6f  dict, default No
-0000f850: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
-0000f860: 2020 2020 203a 7061 7261 6d20 736c 6565       :param slee
-0000f870: 705f 7365 636f 6e64 733a 2066 6c6f 6174  p_seconds: float
-0000f880: 2c20 6465 6661 756c 7420 302e 0d0a 2020  , default 0...  
-0000f890: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-0000f8a0: 6172 616d 2069 735f 6465 7461 696c 5f72  aram is_detail_r
-0000f8b0: 6573 756c 743a 2062 6f6f 6c2c 2064 6566  esult: bool, def
-0000f8c0: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
-0000f8d0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-0000f8e0: 7261 6d20 6966 5f69 676e 6f72 655f 6c69  ram if_ignore_li
-0000f8f0: 6d69 745f 6f66 5f6c 656e 6774 683a 2062  mit_of_length: b
-0000f900: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
-0000f910: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
-0000f920: 2020 2020 203a 7061 7261 6d20 6c69 6d69       :param limi
-0000f930: 745f 6f66 5f6c 656e 6774 683a 2069 6e74  t_of_length: int
-0000f940: 2c20 6465 6661 756c 7420 3230 3030 302e  , default 20000.
-0000f950: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000f960: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
-0000f970: 7265 5f65 6d70 7479 5f71 7565 7279 3a20  re_empty_query: 
-0000f980: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
-0000f990: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
-0000f9a0: 2020 2020 2020 3a70 6172 616d 2075 7064        :param upd
-0000f9b0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0000f9c0: 725f 6672 6571 3a20 696e 742c 2064 6566  r_freq: int, def
-0000f9d0: 6175 6c74 2031 3030 302e 0d0a 2020 2020  ault 1000...    
-0000f9e0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0000f9f0: 616d 2075 7064 6174 655f 7365 7373 696f  am update_sessio
-0000fa00: 6e5f 6166 7465 725f 7365 636f 6e64 733a  n_after_seconds:
-0000fa10: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
-0000fa20: 3135 3030 2e0d 0a20 2020 2020 2020 2020  1500...         
-0000fa30: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-0000fa40: 5f73 686f 775f 7469 6d65 5f73 7461 743a  _show_time_stat:
-0000fa50: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
-0000fa60: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
-0000fa70: 2020 2020 2020 203a 7061 7261 6d20 7368         :param sh
-0000fa80: 6f77 5f74 696d 655f 7374 6174 5f70 7265  ow_time_stat_pre
-0000fa90: 6369 7369 6f6e 3a20 696e 742c 2064 6566  cision: int, def
-0000faa0: 6175 6c74 2032 2e0d 0a20 2020 2020 2020  ault 2...       
-0000fab0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-0000fac0: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
-0000fad0: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-0000fae0: 5472 7565 2e0d 0a20 2020 2020 2020 203a  True...        :
-0000faf0: 7265 7475 726e 3a20 7374 7220 6f72 2064  return: str or d
-0000fb00: 6963 740d 0a20 2020 2020 2020 2022 2222  ict..        """
-0000fb10: 0d0a 0d0a 2020 2020 2020 2020 7469 6d65  ....        time
-0000fb20: 6f75 7420 3d20 6b77 6172 6773 2e67 6574  out = kwargs.get
-0000fb30: 2827 7469 6d65 6f75 7427 2c20 4e6f 6e65  ('timeout', None
-0000fb40: 290d 0a20 2020 2020 2020 2070 726f 7869  )..        proxi
-0000fb50: 6573 203d 206b 7761 7267 732e 6765 7428  es = kwargs.get(
-0000fb60: 2770 726f 7869 6573 272c 204e 6f6e 6529  'proxies', None)
-0000fb70: 0d0a 2020 2020 2020 2020 736c 6565 705f  ..        sleep_
-0000fb80: 7365 636f 6e64 7320 3d20 6b77 6172 6773  seconds = kwargs
-0000fb90: 2e67 6574 2827 736c 6565 705f 7365 636f  .get('sleep_seco
-0000fba0: 6e64 7327 2c20 3029 0d0a 2020 2020 2020  nds', 0)..      
-0000fbb0: 2020 6966 5f70 7269 6e74 5f77 6172 6e69    if_print_warni
-0000fbc0: 6e67 203d 206b 7761 7267 732e 6765 7428  ng = kwargs.get(
-0000fbd0: 2769 665f 7072 696e 745f 7761 726e 696e  'if_print_warnin
-0000fbe0: 6727 2c20 5472 7565 290d 0a20 2020 2020  g', True)..     
-0000fbf0: 2020 2069 735f 6465 7461 696c 5f72 6573     is_detail_res
-0000fc00: 756c 7420 3d20 6b77 6172 6773 2e67 6574  ult = kwargs.get
-0000fc10: 2827 6973 5f64 6574 6169 6c5f 7265 7375  ('is_detail_resu
-0000fc20: 6c74 272c 2046 616c 7365 290d 0a20 2020  lt', False)..   
-0000fc30: 2020 2020 2075 7064 6174 655f 7365 7373       update_sess
-0000fc40: 696f 6e5f 6166 7465 725f 6672 6571 203d  ion_after_freq =
-0000fc50: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
-0000fc60: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0000fc70: 725f 6672 6571 272c 2073 656c 662e 6465  r_freq', self.de
-0000fc80: 6661 756c 745f 7365 7373 696f 6e5f 6672  fault_session_fr
-0000fc90: 6571 290d 0a20 2020 2020 2020 2075 7064  eq)..        upd
-0000fca0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0000fcb0: 725f 7365 636f 6e64 7320 3d20 6b77 6172  r_seconds = kwar
-0000fcc0: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
-0000fcd0: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-0000fce0: 6f6e 6473 272c 2073 656c 662e 6465 6661  onds', self.defa
-0000fcf0: 756c 745f 7365 7373 696f 6e5f 7365 636f  ult_session_seco
-0000fd00: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
-0000fd10: 6c66 2e63 6865 636b 5f69 6e70 7574 5f6c  lf.check_input_l
-0000fd20: 696d 6974 2871 7565 7279 5f74 6578 742c  imit(query_text,
-0000fd30: 2073 656c 662e 696e 7075 745f 6c69 6d69   self.input_limi
-0000fd40: 7429 0d0a 0d0a 2020 2020 2020 2020 6e6f  t)....        no
-0000fd50: 745f 7570 6461 7465 5f63 6f6e 645f 6672  t_update_cond_fr
-0000fd60: 6571 203d 2031 2069 6620 7365 6c66 2e71  eq = 1 if self.q
-0000fd70: 7565 7279 5f63 6f75 6e74 2025 2075 7064  uery_count % upd
-0000fd80: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0000fd90: 725f 6672 6571 2021 3d20 3020 656c 7365  r_freq != 0 else
-0000fda0: 2030 0d0a 2020 2020 2020 2020 6e6f 745f   0..        not_
-0000fdb0: 7570 6461 7465 5f63 6f6e 645f 7469 6d65  update_cond_time
-0000fdc0: 203d 2031 2069 6620 7469 6d65 2e74 696d   = 1 if time.tim
-0000fdd0: 6528 2920 2d20 7365 6c66 2e62 6567 696e  e() - self.begin
-0000fde0: 5f74 696d 6520 3c20 7570 6461 7465 5f73  _time < update_s
-0000fdf0: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-0000fe00: 6f6e 6473 2065 6c73 6520 300d 0a20 2020  onds else 0..   
-0000fe10: 2020 2020 2069 6620 6e6f 7420 2873 656c       if not (sel
-0000fe20: 662e 7365 7373 696f 6e20 616e 6420 7365  f.session and se
-0000fe30: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
-0000fe40: 616e 6420 6e6f 745f 7570 6461 7465 5f63  and not_update_c
-0000fe50: 6f6e 645f 6672 6571 2061 6e64 206e 6f74  ond_freq and not
-0000fe60: 5f75 7064 6174 655f 636f 6e64 5f74 696d  _update_cond_tim
-0000fe70: 6520 616e 6420 7365 6c66 2e71 7476 5f71  e and self.qtv_q
-0000fe80: 746b 293a 0d0a 2020 2020 2020 2020 2020  tk):..          
-0000fe90: 2020 7365 6c66 2e62 6567 696e 5f74 696d    self.begin_tim
-0000fea0: 6520 3d20 7469 6d65 2e74 696d 6528 290d  e = time.time().
-0000feb0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000fec0: 662e 7365 7373 696f 6e20 3d20 7265 7175  f.session = requ
-0000fed0: 6573 7473 2e53 6573 7369 6f6e 2829 0d0a  ests.Session()..
-0000fee0: 2020 2020 2020 2020 2020 2020 5f20 3d20              _ = 
-0000fef0: 7365 6c66 2e73 6573 7369 6f6e 2e67 6574  self.session.get
-0000ff00: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
-0000ff10: 6865 6164 6572 733d 7365 6c66 2e68 6f73  headers=self.hos
-0000ff20: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
-0000ff30: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
-0000ff40: 6965 733d 7072 6f78 6965 7329 2e74 6578  ies=proxies).tex
-0000ff50: 740d 0a20 2020 2020 2020 2020 2020 2073  t..            s
-0000ff60: 656c 662e 7174 765f 7174 6b20 3d20 7365  elf.qtv_qtk = se
-0000ff70: 6c66 2e67 6574 5f71 7428 7365 6c66 2e73  lf.get_qt(self.s
-0000ff80: 6573 7369 6f6e 2c20 7469 6d65 6f75 742c  ession, timeout,
-0000ff90: 2070 726f 7869 6573 290d 0a20 2020 2020   proxies)..     
-0000ffa0: 2020 2020 2020 2064 6562 7567 5f6c 616e         debug_lan
-0000ffb0: 675f 6b77 6172 6773 203d 2073 656c 662e  g_kwargs = self.
-0000ffc0: 6465 6275 675f 6c61 6e67 5f6b 7761 7267  debug_lang_kwarg
-0000ffd0: 7328 6672 6f6d 5f6c 616e 6775 6167 652c  s(from_language,
-0000ffe0: 2074 6f5f 6c61 6e67 7561 6765 2c20 7365   to_language, se
-0000fff0: 6c66 2e64 6566 6175 6c74 5f66 726f 6d5f  lf.default_from_
-00010000: 6c61 6e67 7561 6765 2c20 6966 5f70 7269  language, if_pri
-00010010: 6e74 5f77 6172 6e69 6e67 290d 0a20 2020  nt_warning)..   
-00010020: 2020 2020 2020 2020 2073 656c 662e 6c61           self.la
-00010030: 6e67 7561 6765 5f6d 6170 203d 2073 656c  nguage_map = sel
-00010040: 662e 6765 745f 6c61 6e67 7561 6765 5f6d  f.get_language_m
-00010050: 6170 2873 656c 662e 7365 7373 696f 6e2c  ap(self.session,
-00010060: 2073 656c 662e 6765 745f 6c61 6e67 7561   self.get_langua
-00010070: 6765 5f75 726c 2c20 7469 6d65 6f75 742c  ge_url, timeout,
-00010080: 2070 726f 7869 6573 2c20 2a2a 6465 6275   proxies, **debu
-00010090: 675f 6c61 6e67 5f6b 7761 7267 7329 0d0a  g_lang_kwargs)..
-000100a0: 0d0a 2020 2020 2020 2020 6672 6f6d 5f6c  ..        from_l
-000100b0: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
-000100c0: 7561 6765 203d 2073 656c 662e 6368 6563  uage = self.chec
-000100d0: 6b5f 6c61 6e67 7561 6765 2866 726f 6d5f  k_language(from_
-000100e0: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
-000100f0: 6775 6167 652c 2073 656c 662e 6c61 6e67  guage, self.lang
-00010100: 7561 6765 5f6d 6170 2c20 6f75 7470 7574  uage_map, output
-00010110: 5f7a 683d 7365 6c66 2e6f 7574 7075 745f  _zh=self.output_
-00010120: 7a68 290d 0a0d 0a20 2020 2020 2020 2070  zh)....        p
-00010130: 6179 6c6f 6164 203d 207b 0d0a 2020 2020  ayload = {..    
-00010140: 2020 2020 2020 2020 2773 6f75 7263 6527          'source'
-00010150: 3a20 6672 6f6d 5f6c 616e 6775 6167 652c  : from_language,
-00010160: 0d0a 2020 2020 2020 2020 2020 2020 2774  ..            't
-00010170: 6172 6765 7427 3a20 746f 5f6c 616e 6775  arget': to_langu
-00010180: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
-00010190: 2020 2773 6f75 7263 6554 6578 7427 3a20    'sourceText': 
-000101a0: 7175 6572 795f 7465 7874 2c0d 0a20 2020  query_text,..   
-000101b0: 2020 2020 2020 2020 2027 7174 7627 3a20           'qtv': 
-000101c0: 7365 6c66 2e71 7476 5f71 746b 2e67 6574  self.qtv_qtk.get
-000101d0: 2827 7174 7627 2c20 2727 292c 0d0a 2020  ('qtv', ''),..  
-000101e0: 2020 2020 2020 2020 2020 2771 746b 273a            'qtk':
-000101f0: 2073 656c 662e 7174 765f 7174 6b2e 6765   self.qtv_qtk.ge
-00010200: 7428 2771 746b 272c 2027 2729 2c0d 0a20  t('qtk', ''),.. 
-00010210: 2020 2020 2020 2020 2020 2027 7469 636b             'tick
-00010220: 6574 273a 2027 272c 0d0a 2020 2020 2020  et': '',..      
-00010230: 2020 2020 2020 2772 616e 6473 7472 273a        'randstr':
-00010240: 2027 272c 0d0a 2020 2020 2020 2020 2020   '',..          
-00010250: 2020 2773 6573 7369 6f6e 5575 6964 273a    'sessionUuid':
-00010260: 2066 2774 7261 6e73 6c61 7465 5f75 7569   f'translate_uui
-00010270: 647b 7365 6c66 2e67 6574 5f74 696d 6573  d{self.get_times
-00010280: 7461 6d70 2829 7d27 2c0d 0a20 2020 2020  tamp()}',..     
-00010290: 2020 207d 0d0a 2020 2020 2020 2020 7220     }..        r 
-000102a0: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e70  = self.session.p
-000102b0: 6f73 7428 7365 6c66 2e61 7069 5f75 726c  ost(self.api_url
-000102c0: 2c20 6865 6164 6572 733d 7365 6c66 2e61  , headers=self.a
-000102d0: 7069 5f68 6561 6465 7273 2c20 6461 7461  pi_headers, data
-000102e0: 3d70 6179 6c6f 6164 2c20 7469 6d65 6f75  =payload, timeou
-000102f0: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
-00010300: 6573 3d70 726f 7869 6573 290d 0a20 2020  es=proxies)..   
-00010310: 2020 2020 2072 2e72 6169 7365 5f66 6f72       r.raise_for
-00010320: 5f73 7461 7475 7328 290d 0a20 2020 2020  _status()..     
-00010330: 2020 2064 6174 6120 3d20 722e 6a73 6f6e     data = r.json
-00010340: 2829 0d0a 2020 2020 2020 2020 7469 6d65  ()..        time
-00010350: 2e73 6c65 6570 2873 6c65 6570 5f73 6563  .sleep(sleep_sec
-00010360: 6f6e 6473 290d 0a20 2020 2020 2020 2073  onds)..        s
-00010370: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
-00010380: 2b3d 2031 0d0a 2020 2020 2020 2020 7265  += 1..        re
-00010390: 7475 726e 2064 6174 6120 6966 2069 735f  turn data if is_
-000103a0: 6465 7461 696c 5f72 6573 756c 7420 656c  detail_result el
-000103b0: 7365 2027 272e 6a6f 696e 2869 7465 6d5b  se ''.join(item[
-000103c0: 2774 6172 6765 7454 6578 7427 5d20 666f  'targetText'] fo
-000103d0: 7220 6974 656d 2069 6e20 6461 7461 5b27  r item in data['
-000103e0: 7472 616e 736c 6174 6527 5d5b 2772 6563  translate']['rec
-000103f0: 6f72 6473 275d 2920 2023 2061 7574 6f20  ords'])  # auto 
-00010400: 7768 6974 6573 7061 6365 0d0a 0d0a 0d0a  whitespace......
-00010410: 636c 6173 7320 5151 5472 616e 536d 6172  class QQTranSmar
-00010420: 7428 5473 6529 3a0d 0a20 2020 2064 6566  t(Tse):..    def
-00010430: 205f 5f69 6e69 745f 5f28 7365 6c66 293a   __init__(self):
-00010440: 0d0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
-00010450: 292e 5f5f 696e 6974 5f5f 2829 0d0a 2020  ).__init__()..  
-00010460: 2020 2020 2020 7365 6c66 2e62 6567 696e        self.begin
-00010470: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
-00010480: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
-00010490: 662e 686f 7374 5f75 726c 203d 2027 6874  f.host_url = 'ht
-000104a0: 7470 733a 2f2f 7472 616e 736d 6172 742e  tps://transmart.
-000104b0: 7171 2e63 6f6d 270d 0a20 2020 2020 2020  qq.com'..       
-000104c0: 2073 656c 662e 6170 695f 7572 6c20 3d20   self.api_url = 
-000104d0: 2768 7474 7073 3a2f 2f74 7261 6e73 6d61  'https://transma
-000104e0: 7274 2e71 712e 636f 6d2f 6170 692f 696d  rt.qq.com/api/im
-000104f0: 7427 0d0a 2020 2020 2020 2020 7365 6c66  t'..        self
-00010500: 2e67 6574 5f6c 616e 675f 7572 6c20 3d20  .get_lang_url = 
-00010510: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-00010520: 6c66 2e67 6574 5f6c 616e 675f 7572 6c5f  lf.get_lang_url_
-00010530: 7061 7474 6572 6e20 3d20 272f 6173 7365  pattern = '/asse
-00010540: 7473 2f76 656e 646f 722e 282e 2a3f 292e  ts/vendor.(.*?).
-00010550: 6a73 2720 2023 2065 3463 3638 3331 630d  js'  # e4c6831c.
-00010560: 0a20 2020 2020 2020 2073 656c 662e 686f  .        self.ho
-00010570: 7374 5f68 6561 6465 7273 203d 2073 656c  st_headers = sel
-00010580: 662e 6765 745f 6865 6164 6572 7328 7365  f.get_headers(se
-00010590: 6c66 2e68 6f73 745f 7572 6c2c 2069 665f  lf.host_url, if_
-000105a0: 6170 693d 4661 6c73 6529 0d0a 2020 2020  api=False)..    
-000105b0: 2020 2020 7365 6c66 2e61 7069 5f68 6561      self.api_hea
-000105c0: 6465 7273 203d 2073 656c 662e 6765 745f  ders = self.get_
-000105d0: 6865 6164 6572 7328 7365 6c66 2e68 6f73  headers(self.hos
-000105e0: 745f 7572 6c2c 2069 665f 6170 693d 5472  t_url, if_api=Tr
-000105f0: 7565 2c20 6966 5f6a 736f 6e5f 666f 725f  ue, if_json_for_
-00010600: 6170 693d 5472 7565 290d 0a20 2020 2020  api=True)..     
-00010610: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
-00010620: 5f6d 6170 203d 204e 6f6e 650d 0a20 2020  _map = None..   
-00010630: 2020 2020 2073 656c 662e 7365 7373 696f       self.sessio
-00010640: 6e20 3d20 4e6f 6e65 0d0a 2020 2020 2020  n = None..      
-00010650: 2020 7365 6c66 2e75 7569 6420 3d20 7374    self.uuid = st
-00010660: 7228 7575 6964 2e75 7569 6434 2829 290d  r(uuid.uuid4()).
-00010670: 0a20 2020 2020 2020 2073 656c 662e 7175  .        self.qu
-00010680: 6572 795f 636f 756e 7420 3d20 300d 0a20  ery_count = 0.. 
-00010690: 2020 2020 2020 2073 656c 662e 6f75 7470         self.outp
-000106a0: 7574 5f7a 6820 3d20 277a 6827 0d0a 2020  ut_zh = 'zh'..  
-000106b0: 2020 2020 2020 7365 6c66 2e69 6e70 7574        self.input
-000106c0: 5f6c 696d 6974 203d 2069 6e74 2835 6533  _limit = int(5e3
-000106d0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-000106e0: 6465 6661 756c 745f 6672 6f6d 5f6c 616e  default_from_lan
-000106f0: 6775 6167 6520 3d20 7365 6c66 2e6f 7574  guage = self.out
-00010700: 7075 745f 7a68 0d0a 0d0a 2020 2020 4054  put_zh....    @T
-00010710: 7365 2e64 6562 7567 5f6c 616e 6775 6167  se.debug_languag
-00010720: 655f 6d61 700d 0a20 2020 2064 6566 2067  e_map..    def g
-00010730: 6574 5f6c 616e 6775 6167 655f 6d61 7028  et_language_map(
-00010740: 7365 6c66 2c20 6c61 6e67 5f75 726c 3a20  self, lang_url: 
-00010750: 7374 722c 2073 733a 2053 6573 7369 6f6e  str, ss: Session
-00010760: 5479 7065 2c20 7469 6d65 6f75 743a 204f  Type, timeout: O
-00010770: 7074 696f 6e61 6c5b 666c 6f61 745d 2c20  ptional[float], 
-00010780: 7072 6f78 6965 733a 204f 7074 696f 6e61  proxies: Optiona
-00010790: 6c5b 6469 6374 5d2c 202a 2a6b 7761 7267  l[dict], **kwarg
-000107a0: 733a 204c 616e 674d 6170 4b77 6172 6773  s: LangMapKwargs
-000107b0: 5479 7065 2920 2d3e 2064 6963 743a 0d0a  Type) -> dict:..
-000107c0: 2020 2020 2020 2020 6a73 5f68 746d 6c20          js_html 
-000107d0: 3d20 7373 2e67 6574 286c 616e 675f 7572  = ss.get(lang_ur
-000107e0: 6c2c 2068 6561 6465 7273 3d73 656c 662e  l, headers=self.
-000107f0: 686f 7374 5f68 6561 6465 7273 2c20 7469  host_headers, ti
-00010800: 6d65 6f75 743d 7469 6d65 6f75 742c 2070  meout=timeout, p
-00010810: 726f 7869 6573 3d70 726f 7869 6573 292e  roxies=proxies).
-00010820: 7465 7874 0d0a 2020 2020 2020 2020 6c61  text..        la
-00010830: 6e67 5f73 7472 5f6c 6973 7420 3d20 7265  ng_str_list = re
-00010840: 2e63 6f6d 7069 6c65 2827 6c6e 6773 3a5c  .compile('lngs:\
-00010850: 5c5b 282e 2a3f 295d 2729 2e66 696e 6461  \[(.*?)]').finda
-00010860: 6c6c 286a 735f 6874 6d6c 2920 2023 2027  ll(js_html)  # '
-00010870: 6c6e 6773 3a5c 5c5b 282e 2a3f 295c 5c5d  lngs:\\[(.*?)\\]
-00010880: 270d 0a20 2020 2020 2020 206c 616e 675f  '..        lang_
-00010890: 6c69 7374 203d 205b 6578 6563 6a73 2e65  list = [execjs.e
-000108a0: 7661 6c28 6627 5b7b 787d 5d27 2920 666f  val(f'[{x}]') fo
-000108b0: 7220 7820 696e 206c 616e 675f 7374 725f  r x in lang_str_
-000108c0: 6c69 7374 5d0d 0a20 2020 2020 2020 206c  list]..        l
-000108d0: 616e 675f 6c69 7374 203d 2073 6f72 7465  ang_list = sorte
-000108e0: 6428 6c69 7374 2873 6574 285b 6c61 6e67  d(list(set([lang
-000108f0: 2066 6f72 206c 616e 6773 2069 6e20 6c61   for langs in la
-00010900: 6e67 5f6c 6973 7420 666f 7220 6c61 6e67  ng_list for lang
-00010910: 2069 6e20 6c61 6e67 735d 2929 290d 0a20   in langs]))).. 
-00010920: 2020 2020 2020 2072 6574 7572 6e20 7b7d         return {}
-00010930: 2e66 726f 6d6b 6579 7328 6c61 6e67 5f6c  .fromkeys(lang_l
-00010940: 6973 742c 206c 616e 675f 6c69 7374 290d  ist, lang_list).
-00010950: 0a0d 0a20 2020 2064 6566 2067 6574 5f63  ...    def get_c
-00010960: 6c69 656e 744b 6579 2873 656c 6629 202d  lientKey(self) -
-00010970: 3e20 7374 723a 0d0a 2020 2020 2020 2020  > str:..        
-00010980: 7265 7475 726e 2066 2762 726f 7773 6572  return f'browser
-00010990: 2d66 6972 6566 6f78 2d31 3130 2e30 2e30  -firefox-110.0.0
-000109a0: 2d57 696e 646f 7773 2031 302d 7b73 656c  -Windows 10-{sel
-000109b0: 662e 7575 6964 7d2d 7b73 656c 662e 6765  f.uuid}-{self.ge
-000109c0: 745f 7469 6d65 7374 616d 7028 297d 270d  t_timestamp()}'.
-000109d0: 0a0d 0a20 2020 2064 6566 2073 706c 6974  ...    def split
-000109e0: 5f73 656e 7465 6e63 6528 7365 6c66 2c20  _sentence(self, 
-000109f0: 6461 7461 3a20 6469 6374 2920 2d3e 204c  data: dict) -> L
-00010a00: 6973 745b 7374 725d 3a0d 0a20 2020 2020  ist[str]:..     
-00010a10: 2020 2069 6e64 6578 5f70 6169 725f 6c69     index_pair_li
-00010a20: 7374 203d 205b 5b69 7465 6d5b 2773 7461  st = [[item['sta
-00010a30: 7274 275d 2c20 6974 656d 5b27 7374 6172  rt'], item['star
-00010a40: 7427 5d20 2b20 6974 656d 5b27 6c65 6e27  t'] + item['len'
-00010a50: 5d5d 2066 6f72 2069 7465 6d20 696e 2064  ]] for item in d
-00010a60: 6174 615b 2773 656e 7465 6e63 655f 6c69  ata['sentence_li
-00010a70: 7374 275d 5d0d 0a20 2020 2020 2020 2069  st']]..        i
-00010a80: 6e64 6578 5f6c 6973 7420 3d20 5b69 2066  ndex_list = [i f
-00010a90: 6f72 2069 6920 696e 2069 6e64 6578 5f70  or ii in index_p
-00010aa0: 6169 725f 6c69 7374 2066 6f72 2069 2069  air_list for i i
-00010ab0: 6e20 6969 5d0d 0a20 2020 2020 2020 2072  n ii]..        r
-00010ac0: 6574 7572 6e20 5b64 6174 615b 2774 6578  eturn [data['tex
-00010ad0: 7427 5d5b 696e 6465 785f 6c69 7374 5b69  t'][index_list[i
-00010ae0: 5d3a 2069 6e64 6578 5f6c 6973 745b 692b  ]: index_list[i+
-00010af0: 315d 5d20 666f 7220 6920 696e 2072 616e  1]] for i in ran
-00010b00: 6765 286c 656e 2869 6e64 6578 5f6c 6973  ge(len(index_lis
-00010b10: 7429 202d 2031 295d 0d0a 0d0a 2020 2020  t) - 1)]....    
-00010b20: 4054 7365 2e74 696d 655f 7374 6174 0d0a  @Tse.time_stat..
-00010b30: 2020 2020 4054 7365 2e63 6865 636b 5f71      @Tse.check_q
-00010b40: 7565 7279 0d0a 2020 2020 6465 6620 7171  uery..    def qq
-00010b50: 5472 616e 536d 6172 745f 6170 6928 7365  TranSmart_api(se
-00010b60: 6c66 2c20 7175 6572 795f 7465 7874 3a20  lf, query_text: 
-00010b70: 7374 722c 2066 726f 6d5f 6c61 6e67 7561  str, from_langua
-00010b80: 6765 3a20 7374 7220 3d20 2761 7574 6f27  ge: str = 'auto'
-00010b90: 2c20 746f 5f6c 616e 6775 6167 653a 2073  , to_language: s
-00010ba0: 7472 203d 2027 656e 272c 202a 2a6b 7761  tr = 'en', **kwa
-00010bb0: 7267 733a 2041 7069 4b77 6172 6773 5479  rgs: ApiKwargsTy
-00010bc0: 7065 2920 2d3e 2055 6e69 6f6e 5b73 7472  pe) -> Union[str
-00010bd0: 2c20 6469 6374 5d3a 0d0a 2020 2020 2020  , dict]:..      
-00010be0: 2020 2222 220d 0a20 2020 2020 2020 2068    """..        h
-00010bf0: 7474 7073 3a2f 2f74 7261 6e73 6d61 7274  ttps://transmart
-00010c00: 2e71 712e 636f 6d0d 0a20 2020 2020 2020  .qq.com..       
-00010c10: 203a 7061 7261 6d20 7175 6572 795f 7465   :param query_te
-00010c20: 7874 3a20 7374 722c 206d 7573 742e 0d0a  xt: str, must...
-00010c30: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
-00010c40: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
-00010c50: 722c 2064 6566 6175 6c74 2027 6175 746f  r, default 'auto
-00010c60: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
-00010c70: 616d 2074 6f5f 6c61 6e67 7561 6765 3a20  am to_language: 
-00010c80: 7374 722c 2064 6566 6175 6c74 2027 656e  str, default 'en
-00010c90: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
-00010ca0: 616d 202a 2a6b 7761 7267 733a 0d0a 2020  am **kwargs:..  
-00010cb0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00010cc0: 6172 616d 2074 696d 656f 7574 3a20 666c  aram timeout: fl
-00010cd0: 6f61 742c 2064 6566 6175 6c74 204e 6f6e  oat, default Non
-00010ce0: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-00010cf0: 2020 2020 3a70 6172 616d 2070 726f 7869      :param proxi
-00010d00: 6573 3a20 6469 6374 2c20 6465 6661 756c  es: dict, defaul
-00010d10: 7420 4e6f 6e65 2e0d 0a20 2020 2020 2020  t None...       
-00010d20: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00010d30: 736c 6565 705f 7365 636f 6e64 733a 2066  sleep_seconds: f
-00010d40: 6c6f 6174 2c20 6465 6661 756c 7420 302e  loat, default 0.
-00010d50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00010d60: 2020 3a70 6172 616d 2069 735f 6465 7461    :param is_deta
-00010d70: 696c 5f72 6573 756c 743a 2062 6f6f 6c2c  il_result: bool,
-00010d80: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
-00010d90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010da0: 203a 7061 7261 6d20 6966 5f69 676e 6f72   :param if_ignor
-00010db0: 655f 6c69 6d69 745f 6f66 5f6c 656e 6774  e_limit_of_lengt
-00010dc0: 683a 2062 6f6f 6c2c 2064 6566 6175 6c74  h: bool, default
-00010dd0: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
-00010de0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00010df0: 6c69 6d69 745f 6f66 5f6c 656e 6774 683a  limit_of_length:
-00010e00: 2069 6e74 2c20 6465 6661 756c 7420 3230   int, default 20
-00010e10: 3030 302e 0d0a 2020 2020 2020 2020 2020  000...          
-00010e20: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
-00010e30: 6967 6e6f 7265 5f65 6d70 7479 5f71 7565  ignore_empty_que
-00010e40: 7279 3a20 626f 6f6c 2c20 6465 6661 756c  ry: bool, defaul
-00010e50: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-00010e60: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00010e70: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-00010e80: 6166 7465 725f 6672 6571 3a20 696e 742c  after_freq: int,
-00010e90: 2064 6566 6175 6c74 2031 3030 302e 0d0a   default 1000...
-00010ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010eb0: 3a70 6172 616d 2075 7064 6174 655f 7365  :param update_se
-00010ec0: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
-00010ed0: 6e64 733a 2066 6c6f 6174 2c20 6465 6661  nds: float, defa
-00010ee0: 756c 7420 3135 3030 2e0d 0a20 2020 2020  ult 1500...     
-00010ef0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00010f00: 6d20 6966 5f73 686f 775f 7469 6d65 5f73  m if_show_time_s
-00010f10: 7461 743a 2062 6f6f 6c2c 2064 6566 6175  tat: bool, defau
-00010f20: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
-00010f30: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00010f40: 6d20 7368 6f77 5f74 696d 655f 7374 6174  m show_time_stat
-00010f50: 5f70 7265 6369 7369 6f6e 3a20 696e 742c  _precision: int,
-00010f60: 2064 6566 6175 6c74 2032 2e0d 0a20 2020   default 2...   
-00010f70: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00010f80: 7261 6d20 6966 5f70 7269 6e74 5f77 6172  ram if_print_war
-00010f90: 6e69 6e67 3a20 626f 6f6c 2c20 6465 6661  ning: bool, defa
-00010fa0: 756c 7420 5472 7565 2e0d 0a20 2020 2020  ult True...     
-00010fb0: 2020 203a 7265 7475 726e 3a20 7374 7220     :return: str 
-00010fc0: 6f72 2064 6963 740d 0a20 2020 2020 2020  or dict..       
-00010fd0: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
-00010fe0: 7469 6d65 6f75 7420 3d20 6b77 6172 6773  timeout = kwargs
-00010ff0: 2e67 6574 2827 7469 6d65 6f75 7427 2c20  .get('timeout', 
-00011000: 4e6f 6e65 290d 0a20 2020 2020 2020 2070  None)..        p
-00011010: 726f 7869 6573 203d 206b 7761 7267 732e  roxies = kwargs.
-00011020: 6765 7428 2770 726f 7869 6573 272c 204e  get('proxies', N
-00011030: 6f6e 6529 0d0a 2020 2020 2020 2020 736c  one)..        sl
-00011040: 6565 705f 7365 636f 6e64 7320 3d20 6b77  eep_seconds = kw
-00011050: 6172 6773 2e67 6574 2827 736c 6565 705f  args.get('sleep_
-00011060: 7365 636f 6e64 7327 2c20 3029 0d0a 2020  seconds', 0)..  
-00011070: 2020 2020 2020 6966 5f70 7269 6e74 5f77        if_print_w
-00011080: 6172 6e69 6e67 203d 206b 7761 7267 732e  arning = kwargs.
-00011090: 6765 7428 2769 665f 7072 696e 745f 7761  get('if_print_wa
-000110a0: 726e 696e 6727 2c20 5472 7565 290d 0a20  rning', True).. 
-000110b0: 2020 2020 2020 2069 735f 6465 7461 696c         is_detail
-000110c0: 5f72 6573 756c 7420 3d20 6b77 6172 6773  _result = kwargs
-000110d0: 2e67 6574 2827 6973 5f64 6574 6169 6c5f  .get('is_detail_
-000110e0: 7265 7375 6c74 272c 2046 616c 7365 290d  result', False).
-000110f0: 0a20 2020 2020 2020 2075 7064 6174 655f  .        update_
-00011100: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
-00011110: 6571 203d 206b 7761 7267 732e 6765 7428  eq = kwargs.get(
-00011120: 2775 7064 6174 655f 7365 7373 696f 6e5f  'update_session_
-00011130: 6166 7465 725f 6672 6571 272c 2073 656c  after_freq', sel
-00011140: 662e 6465 6661 756c 745f 7365 7373 696f  f.default_sessio
-00011150: 6e5f 6672 6571 290d 0a20 2020 2020 2020  n_freq)..       
-00011160: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-00011170: 6166 7465 725f 7365 636f 6e64 7320 3d20  after_seconds = 
-00011180: 6b77 6172 6773 2e67 6574 2827 7570 6461  kwargs.get('upda
-00011190: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
-000111a0: 5f73 6563 6f6e 6473 272c 2073 656c 662e  _seconds', self.
-000111b0: 6465 6661 756c 745f 7365 7373 696f 6e5f  default_session_
-000111c0: 7365 636f 6e64 7329 0d0a 2020 2020 2020  seconds)..      
-000111d0: 2020 7365 6c66 2e63 6865 636b 5f69 6e70    self.check_inp
-000111e0: 7574 5f6c 696d 6974 2871 7565 7279 5f74  ut_limit(query_t
-000111f0: 6578 742c 2073 656c 662e 696e 7075 745f  ext, self.input_
-00011200: 6c69 6d69 7429 0d0a 0d0a 2020 2020 2020  limit)....      
-00011210: 2020 6e6f 745f 7570 6461 7465 5f63 6f6e    not_update_con
-00011220: 645f 6672 6571 203d 2031 2069 6620 7365  d_freq = 1 if se
-00011230: 6c66 2e71 7565 7279 5f63 6f75 6e74 2025  lf.query_count %
-00011240: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-00011250: 6166 7465 725f 6672 6571 2021 3d20 3020  after_freq != 0 
-00011260: 656c 7365 2030 0d0a 2020 2020 2020 2020  else 0..        
-00011270: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
-00011280: 7469 6d65 203d 2031 2069 6620 7469 6d65  time = 1 if time
-00011290: 2e74 696d 6528 2920 2d20 7365 6c66 2e62  .time() - self.b
-000112a0: 6567 696e 5f74 696d 6520 3c20 7570 6461  egin_time < upda
-000112b0: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
-000112c0: 5f73 6563 6f6e 6473 2065 6c73 6520 300d  _seconds else 0.
-000112d0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-000112e0: 2873 656c 662e 7365 7373 696f 6e20 616e  (self.session an
-000112f0: 6420 7365 6c66 2e6c 616e 6775 6167 655f  d self.language_
-00011300: 6d61 7020 616e 6420 6e6f 745f 7570 6461  map and not_upda
-00011310: 7465 5f63 6f6e 645f 6672 6571 2061 6e64  te_cond_freq and
-00011320: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
-00011330: 5f74 696d 6529 3a0d 0a20 2020 2020 2020  _time):..       
-00011340: 2020 2020 2073 656c 662e 6265 6769 6e5f       self.begin_
-00011350: 7469 6d65 203d 2074 696d 652e 7469 6d65  time = time.time
-00011360: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-00011370: 7365 6c66 2e73 6573 7369 6f6e 203d 2072  self.session = r
-00011380: 6571 7565 7374 732e 5365 7373 696f 6e28  equests.Session(
-00011390: 290d 0a20 2020 2020 2020 2020 2020 2068  )..            h
-000113a0: 6f73 745f 6874 6d6c 203d 2073 656c 662e  ost_html = self.
-000113b0: 7365 7373 696f 6e2e 6765 7428 7365 6c66  session.get(self
-000113c0: 2e68 6f73 745f 7572 6c2c 2068 6561 6465  .host_url, heade
-000113d0: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
-000113e0: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
-000113f0: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
-00011400: 726f 7869 6573 292e 7465 7874 0d0a 0d0a  roxies).text....
-00011410: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00011420: 6f74 2073 656c 662e 6765 745f 6c61 6e67  ot self.get_lang
-00011430: 5f75 726c 3a0d 0a20 2020 2020 2020 2020  _url:..         
-00011440: 2020 2020 2020 2073 656c 662e 6765 745f         self.get_
-00011450: 6c61 6e67 5f75 726c 203d 2066 277b 7365  lang_url = f'{se
-00011460: 6c66 2e68 6f73 745f 7572 6c7d 7b72 652e  lf.host_url}{re.
-00011470: 636f 6d70 696c 6528 7365 6c66 2e67 6574  compile(self.get
-00011480: 5f6c 616e 675f 7572 6c5f 7061 7474 6572  _lang_url_patter
-00011490: 6e29 2e73 6561 7263 6828 686f 7374 5f68  n).search(host_h
-000114a0: 746d 6c29 2e67 726f 7570 2829 7d27 0d0a  tml).group()}'..
-000114b0: 2020 2020 2020 2020 2020 2020 6465 6275              debu
-000114c0: 675f 6c61 6e67 5f6b 7761 7267 7320 3d20  g_lang_kwargs = 
-000114d0: 7365 6c66 2e64 6562 7567 5f6c 616e 675f  self.debug_lang_
-000114e0: 6b77 6172 6773 2866 726f 6d5f 6c61 6e67  kwargs(from_lang
-000114f0: 7561 6765 2c20 746f 5f6c 616e 6775 6167  uage, to_languag
-00011500: 652c 2073 656c 662e 6465 6661 756c 745f  e, self.default_
-00011510: 6672 6f6d 5f6c 616e 6775 6167 652c 2069  from_language, i
-00011520: 665f 7072 696e 745f 7761 726e 696e 6729  f_print_warning)
-00011530: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00011540: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
-00011550: 3d20 7365 6c66 2e67 6574 5f6c 616e 6775  = self.get_langu
-00011560: 6167 655f 6d61 7028 7365 6c66 2e67 6574  age_map(self.get
-00011570: 5f6c 616e 675f 7572 6c2c 2073 656c 662e  _lang_url, self.
-00011580: 7365 7373 696f 6e2c 2074 696d 656f 7574  session, timeout
-00011590: 2c20 7072 6f78 6965 732c 202a 2a64 6562  , proxies, **deb
-000115a0: 7567 5f6c 616e 675f 6b77 6172 6773 290d  ug_lang_kwargs).
-000115b0: 0a0d 0a20 2020 2020 2020 2069 6620 6672  ...        if fr
-000115c0: 6f6d 5f6c 616e 6775 6167 6520 3d3d 2027  om_language == '
-000115d0: 6175 746f 273a 0d0a 2020 2020 2020 2020  auto':..        
-000115e0: 2020 2020 6672 6f6d 5f6c 616e 6775 6167      from_languag
-000115f0: 6520 3d20 7365 6c66 2e77 6172 6e69 6e67  e = self.warning
-00011600: 5f61 7574 6f5f 6c61 6e67 2827 7171 5472  _auto_lang('qqTr
-00011610: 616e 536d 6172 7427 2c20 7365 6c66 2e64  anSmart', self.d
-00011620: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
-00011630: 7561 6765 2c20 6966 5f70 7269 6e74 5f77  uage, if_print_w
-00011640: 6172 6e69 6e67 290d 0a20 2020 2020 2020  arning)..       
-00011650: 2066 726f 6d5f 6c61 6e67 7561 6765 2c20   from_language, 
-00011660: 746f 5f6c 616e 6775 6167 6520 3d20 7365  to_language = se
-00011670: 6c66 2e63 6865 636b 5f6c 616e 6775 6167  lf.check_languag
-00011680: 6528 6672 6f6d 5f6c 616e 6775 6167 652c  e(from_language,
-00011690: 2074 6f5f 6c61 6e67 7561 6765 2c20 7365   to_language, se
-000116a0: 6c66 2e6c 616e 6775 6167 655f 6d61 702c  lf.language_map,
-000116b0: 206f 7574 7075 745f 7a68 3d73 656c 662e   output_zh=self.
-000116c0: 6f75 7470 7574 5f7a 6829 0d0a 0d0a 2020  output_zh)....  
-000116d0: 2020 2020 2020 636c 6965 6e74 5f6b 6579        client_key
-000116e0: 203d 2073 656c 662e 6765 745f 636c 6965   = self.get_clie
-000116f0: 6e74 4b65 7928 290d 0a20 2020 2020 2020  ntKey()..       
-00011700: 2073 656c 662e 6170 695f 6865 6164 6572   self.api_header
-00011710: 732e 7570 6461 7465 287b 2743 6f6f 6b69  s.update({'Cooki
-00011720: 6527 3a20 6627 636c 6965 6e74 5f6b 6579  e': f'client_key
-00011730: 3d7b 636c 6965 6e74 5f6b 6579 7d27 7d29  ={client_key}'})
-00011740: 0d0a 0d0a 2020 2020 2020 2020 7370 6c69  ....        spli
-00011750: 745f 7061 796c 6f61 6420 3d20 7b0d 0a20  t_payload = {.. 
-00011760: 2020 2020 2020 2020 2020 2027 6865 6164             'head
-00011770: 6572 273a 207b 0d0a 2020 2020 2020 2020  er': {..        
-00011780: 2020 2020 2020 2020 2766 6e27 3a20 2774          'fn': 't
-00011790: 6578 745f 616e 616c 7973 6973 272c 0d0a  ext_analysis',..
-000117a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000117b0: 2763 6c69 656e 745f 6b65 7927 3a20 636c  'client_key': cl
-000117c0: 6965 6e74 5f6b 6579 2c0d 0a20 2020 2020  ient_key,..     
-000117d0: 2020 2020 2020 207d 2c0d 0a20 2020 2020         },..     
-000117e0: 2020 2020 2020 2027 7479 7065 273a 2027         'type': '
-000117f0: 706c 6169 6e27 2c0d 0a20 2020 2020 2020  plain',..       
-00011800: 2020 2020 2027 7465 7874 273a 2071 7565       'text': que
-00011810: 7279 5f74 6578 742c 0d0a 2020 2020 2020  ry_text,..      
-00011820: 2020 2020 2020 276e 6f72 6d61 6c69 7a65        'normalize
-00011830: 273a 207b 276d 6572 6765 5f62 726f 6b65  ': {'merge_broke
-00011840: 6e5f 6c69 6e65 273a 2027 6661 6c73 6527  n_line': 'false'
-00011850: 7d0d 0a20 2020 2020 2020 207d 0d0a 2020  }..        }..  
-00011860: 2020 2020 2020 7370 6c69 745f 6461 7461        split_data
-00011870: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
-00011880: 706f 7374 2873 656c 662e 6170 695f 7572  post(self.api_ur
-00011890: 6c2c 206a 736f 6e3d 7370 6c69 745f 7061  l, json=split_pa
-000118a0: 796c 6f61 642c 2068 6561 6465 7273 3d73  yload, headers=s
-000118b0: 656c 662e 6170 695f 6865 6164 6572 732c  elf.api_headers,
-000118c0: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
-000118d0: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
-000118e0: 7329 2e6a 736f 6e28 290d 0a20 2020 2020  s).json()..     
-000118f0: 2020 2074 6578 745f 6c69 7374 203d 2073     text_list = s
-00011900: 656c 662e 7370 6c69 745f 7365 6e74 656e  elf.split_senten
-00011910: 6365 2873 706c 6974 5f64 6174 6129 0d0a  ce(split_data)..
-00011920: 0d0a 2020 2020 2020 2020 6170 695f 7061  ..        api_pa
-00011930: 796c 6f61 6420 3d20 7b0d 0a20 2020 2020  yload = {..     
-00011940: 2020 2020 2020 2027 6865 6164 6572 273a         'header':
-00011950: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
-00011960: 2020 2020 2766 6e27 3a20 2761 7574 6f5f      'fn': 'auto_
-00011970: 7472 616e 736c 6174 696f 6e27 2c0d 0a20  translation',.. 
-00011980: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00011990: 636c 6965 6e74 5f6b 6579 273a 2063 6c69  client_key': cli
-000119a0: 656e 745f 6b65 792c 0d0a 2020 2020 2020  ent_key,..      
-000119b0: 2020 2020 2020 7d2c 0d0a 2020 2020 2020        },..      
-000119c0: 2020 2020 2020 2774 7970 6527 3a20 2770        'type': 'p
-000119d0: 6c61 696e 272c 0d0a 2020 2020 2020 2020  lain',..        
-000119e0: 2020 2020 276d 6f64 656c 5f63 6174 6567      'model_categ
-000119f0: 6f72 7927 3a20 276e 6f72 6d61 6c27 2c0d  ory': 'normal',.
-00011a00: 0a20 2020 2020 2020 2020 2020 2027 736f  .            'so
-00011a10: 7572 6365 273a 207b 0d0a 2020 2020 2020  urce': {..      
-00011a20: 2020 2020 2020 2020 2020 276c 616e 6727            'lang'
-00011a30: 3a20 6672 6f6d 5f6c 616e 6775 6167 652c  : from_language,
-00011a40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011a50: 2020 2774 6578 745f 6c69 7374 273a 205b    'text_list': [
-00011a60: 2727 5d20 2b20 7465 7874 5f6c 6973 7420  ''] + text_list 
-00011a70: 2b20 5b27 275d 2c0d 0a20 2020 2020 2020  + [''],..       
-00011a80: 2020 2020 207d 2c0d 0a20 2020 2020 2020       },..       
-00011a90: 2020 2020 2027 7461 7267 6574 273a 207b       'target': {
-00011aa0: 276c 616e 6727 3a20 746f 5f6c 616e 6775  'lang': to_langu
-00011ab0: 6167 657d 0d0a 2020 2020 2020 2020 7d0d  age}..        }.
-00011ac0: 0a20 2020 2020 2020 2072 203d 2073 656c  .        r = sel
-00011ad0: 662e 7365 7373 696f 6e2e 706f 7374 2873  f.session.post(s
-00011ae0: 656c 662e 6170 695f 7572 6c2c 206a 736f  elf.api_url, jso
-00011af0: 6e3d 6170 695f 7061 796c 6f61 642c 2068  n=api_payload, h
-00011b00: 6561 6465 7273 3d73 656c 662e 6170 695f  eaders=self.api_
-00011b10: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
-00011b20: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
-00011b30: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
-00011b40: 2020 2020 722e 7261 6973 655f 666f 725f      r.raise_for_
-00011b50: 7374 6174 7573 2829 0d0a 2020 2020 2020  status()..      
-00011b60: 2020 6461 7461 203d 2072 2e6a 736f 6e28    data = r.json(
-00011b70: 290d 0a20 2020 2020 2020 2074 696d 652e  )..        time.
-00011b80: 736c 6565 7028 736c 6565 705f 7365 636f  sleep(sleep_seco
-00011b90: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
-00011ba0: 6c66 2e71 7565 7279 5f63 6f75 6e74 202b  lf.query_count +
-00011bb0: 3d20 310d 0a20 2020 2020 2020 2072 6574  = 1..        ret
-00011bc0: 7572 6e20 6461 7461 2069 6620 6973 5f64  urn data if is_d
-00011bd0: 6574 6169 6c5f 7265 7375 6c74 2065 6c73  etail_result els
-00011be0: 6520 2727 2e6a 6f69 6e28 6461 7461 5b27  e ''.join(data['
-00011bf0: 6175 746f 5f74 7261 6e73 6c61 7469 6f6e  auto_translation
-00011c00: 275d 290d 0a0d 0a0d 0a63 6c61 7373 2041  '])......class A
-00011c10: 6c69 6261 6261 5631 2854 7365 293a 0d0a  libabaV1(Tse):..
-00011c20: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-00011c30: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-00011c40: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
-00011c50: 5f28 290d 0a20 2020 2020 2020 2073 656c  _()..        sel
-00011c60: 662e 6265 6769 6e5f 7469 6d65 203d 2074  f.begin_time = t
-00011c70: 696d 652e 7469 6d65 2829 0d0a 2020 2020  ime.time()..    
-00011c80: 2020 2020 7365 6c66 2e68 6f73 745f 7572      self.host_ur
-00011c90: 6c20 3d20 2768 7474 7073 3a2f 2f74 7261  l = 'https://tra
-00011ca0: 6e73 6c61 7465 2e61 6c69 6261 6261 2e63  nslate.alibaba.c
-00011cb0: 6f6d 270d 0a20 2020 2020 2020 2073 656c  om'..        sel
-00011cc0: 662e 6170 695f 7572 6c20 3d20 2768 7474  f.api_url = 'htt
-00011cd0: 7073 3a2f 2f74 7261 6e73 6c61 7465 2e61  ps://translate.a
-00011ce0: 6c69 6261 6261 2e63 6f6d 2f74 7261 6e73  libaba.com/trans
-00011cf0: 6c61 7469 6f6e 6f70 656e 7365 7669 6365  lationopensevice
-00011d00: 6170 702f 7472 616e 732f 5472 616e 736c  app/trans/Transl
-00011d10: 6174 6554 6578 7441 6464 416c 6967 6e6d  ateTextAddAlignm
-00011d20: 656e 742e 646f 270d 0a20 2020 2020 2020  ent.do'..       
-00011d30: 2073 656c 662e 6765 745f 6c61 6e67 7561   self.get_langua
-00011d40: 6765 5f75 726c 203d 2027 6874 7470 733a  ge_url = 'https:
-00011d50: 2f2f 7472 616e 736c 6174 652e 616c 6962  //translate.alib
-00011d60: 6162 612e 636f 6d2f 7472 616e 736c 6174  aba.com/translat
-00011d70: 696f 6e6f 7065 6e73 6576 6963 6561 7070  ionopenseviceapp
-00011d80: 2f74 7261 6e73 2f61 6371 7569 7265 5f73  /trans/acquire_s
-00011d90: 7570 706f 7274 4c61 6e67 7561 6765 2e64  upportLanguage.d
-00011da0: 6f27 0d0a 2020 2020 2020 2020 7365 6c66  o'..        self
-00011db0: 2e68 6f73 745f 6865 6164 6572 7320 3d20  .host_headers = 
-00011dc0: 7365 6c66 2e67 6574 5f68 6561 6465 7273  self.get_headers
-00011dd0: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
-00011de0: 6966 5f61 7069 3d46 616c 7365 290d 0a20  if_api=False).. 
-00011df0: 2020 2020 2020 2073 656c 662e 6170 695f         self.api_
-00011e00: 6865 6164 6572 7320 3d20 7365 6c66 2e67  headers = self.g
-00011e10: 6574 5f68 6561 6465 7273 2873 656c 662e  et_headers(self.
-00011e20: 686f 7374 5f75 726c 2c20 6966 5f61 7069  host_url, if_api
-00011e30: 3d54 7275 6529 0d0a 2020 2020 2020 2020  =True)..        
-00011e40: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
-00011e50: 7020 3d20 4e6f 6e65 0d0a 2020 2020 2020  p = None..      
-00011e60: 2020 7365 6c66 2e70 726f 6665 7373 696f    self.professio
-00011e70: 6e61 6c5f 6669 656c 6420 3d20 2822 6765  nal_field = ("ge
-00011e80: 6e65 7261 6c22 2c20 226d 6573 7361 6765  neral", "message
-00011e90: 222c 2022 6f66 6665 7222 290d 0a20 2020  ", "offer")..   
-00011ea0: 2020 2020 2073 656c 662e 646d 7472 6163       self.dmtrac
-00011eb0: 6b5f 7061 6765 6964 203d 204e 6f6e 650d  k_pageid = None.
-00011ec0: 0a20 2020 2020 2020 2073 656c 662e 7365  .        self.se
-00011ed0: 7373 696f 6e20 3d20 4e6f 6e65 0d0a 2020  ssion = None..  
-00011ee0: 2020 2020 2020 7365 6c66 2e71 7565 7279        self.query
-00011ef0: 5f63 6f75 6e74 203d 2030 0d0a 2020 2020  _count = 0..    
-00011f00: 2020 2020 7365 6c66 2e6f 7574 7075 745f      self.output_
-00011f10: 7a68 203d 2027 7a68 270d 0a20 2020 2020  zh = 'zh'..     
-00011f20: 2020 2073 656c 662e 696e 7075 745f 6c69     self.input_li
-00011f30: 6d69 7420 3d20 696e 7428 3565 3329 0d0a  mit = int(5e3)..
-00011f40: 2020 2020 2020 2020 7365 6c66 2e64 6566          self.def
-00011f50: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
-00011f60: 6765 203d 2073 656c 662e 6f75 7470 7574  ge = self.output
-00011f70: 5f7a 680d 0a0d 0a20 2020 2064 6566 2067  _zh....    def g
-00011f80: 6574 5f64 6d74 7261 636b 5f70 6167 6569  et_dmtrack_pagei
-00011f90: 6428 7365 6c66 2c20 686f 7374 5f72 6573  d(self, host_res
-00011fa0: 706f 6e73 653a 2052 6573 706f 6e73 6554  ponse: ResponseT
-00011fb0: 7970 6529 202d 3e20 7374 723a 0d0a 2020  ype) -> str:..  
-00011fc0: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-00011fd0: 2020 2020 2020 2020 6520 3d20 7265 2e63          e = re.c
-00011fe0: 6f6d 7069 6c65 2822 646d 7472 6163 6b5f  ompile("dmtrack_
-00011ff0: 7061 6765 6964 3d27 285c 5c77 2b29 273b  pageid='(\\w+)';
-00012000: 2229 2e66 696e 6461 6c6c 2868 6f73 745f  ").findall(host_
-00012010: 7265 7370 6f6e 7365 2e74 6578 7429 5b30  response.text)[0
-00012020: 5d0d 0a20 2020 2020 2020 2065 7863 6570  ]..        excep
-00012030: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-00012040: 6520 3d20 2727 0d0a 2020 2020 2020 2020  e = ''..        
-00012050: 6966 206e 6f74 2065 3a0d 0a20 2020 2020  if not e:..     
-00012060: 2020 2020 2020 2065 203d 2068 6f73 745f         e = host_
-00012070: 7265 7370 6f6e 7365 2e63 6f6f 6b69 6573  response.cookies
-00012080: 2e67 6574 5f64 6963 7428 292e 6765 7428  .get_dict().get(
-00012090: 2263 6e61 222c 2022 3030 3122 290d 0a20  "cna", "001").. 
-000120a0: 2020 2020 2020 2020 2020 2065 203d 2072             e = r
-000120b0: 652e 636f 6d70 696c 6528 275b 5e61 2d7a  e.compile('[^a-z
-000120c0: 5c5c 645d 2729 2e73 7562 2872 6570 6c3d  \\d]').sub(repl=
-000120d0: 2727 2c20 7374 7269 6e67 3d65 2e6c 6f77  '', string=e.low
-000120e0: 6572 2829 295b 3a31 365d 0d0a 2020 2020  er())[:16]..    
-000120f0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00012100: 2020 2020 2020 206e 2c20 7220 3d20 655b         n, r = e[
-00012110: 303a 3136 5d2c 2065 5b31 363a 3236 5d0d  0:16], e[16:26].
-00012120: 0a20 2020 2020 2020 2020 2020 2069 203d  .            i =
-00012130: 2068 6578 2869 6e74 2872 2c20 3130 2929   hex(int(r, 10))
-00012140: 5b32 3a5d 2069 6620 7265 2e63 6f6d 7069  [2:] if re.compi
-00012150: 6c65 2827 5e5b 5c5c 2d2b 5d3f 5b30 2d39  le('^[\\-+]?[0-9
-00012160: 5d2b 2427 292e 6d61 7463 6828 7229 2065  ]+$').match(r) e
-00012170: 6c73 6520 720d 0a20 2020 2020 2020 2020  lse r..         
-00012180: 2020 2065 203d 206e 202b 2069 0d0a 0d0a     e = n + i....
-00012190: 2020 2020 2020 2020 7320 3d20 7365 6c66          s = self
-000121a0: 2e67 6574 5f74 696d 6573 7461 6d70 2829  .get_timestamp()
-000121b0: 0d0a 2020 2020 2020 2020 6f20 3d20 2727  ..        o = ''
-000121c0: 2e6a 6f69 6e28 5b65 2c20 6865 7828 7329  .join([e, hex(s)
-000121d0: 5b32 3a5d 5d29 0d0a 2020 2020 2020 2020  [2:]])..        
-000121e0: 666f 7220 5f20 696e 2072 616e 6765 2831  for _ in range(1
-000121f0: 2c20 3130 293a 0d0a 2020 2020 2020 2020  , 10):..        
-00012200: 2020 2020 6120 3d20 6865 7828 696e 7428      a = hex(int(
-00012210: 3020 2a20 3165 3130 2929 5b32 3a5d 2020  0 * 1e10))[2:]  
-00012220: 2320 696e 742d 3e73 7472 3a20 3136 2c20  # int->str: 16, 
-00012230: 2730 7827 0d0a 2020 2020 2020 2020 2020  '0x'..          
-00012240: 2020 6f20 2b3d 2061 0d0a 2020 2020 2020    o += a..      
-00012250: 2020 7265 7475 726e 206f 5b3a 3432 5d0d    return o[:42].
-00012260: 0a0d 0a20 2020 2040 5473 652e 6465 6275  ...    @Tse.debu
-00012270: 675f 6c61 6e67 7561 6765 5f6d 6170 0d0a  g_language_map..
-00012280: 2020 2020 6465 6620 6765 745f 6c61 6e67      def get_lang
-00012290: 7561 6765 5f6d 6170 2873 656c 662c 2073  uage_map(self, s
-000122a0: 733a 2053 6573 7369 6f6e 5479 7065 2c20  s: SessionType, 
-000122b0: 6c61 6e67 5f75 726c 3a20 7374 722c 2075  lang_url: str, u
-000122c0: 7365 5f64 6f6d 6169 6e3a 2073 7472 2c20  se_domain: str, 
-000122d0: 646d 7472 6163 6b5f 7061 6765 6964 3a20  dmtrack_pageid: 
-000122e0: 7374 722c 2074 696d 656f 7574 3a20 4f70  str, timeout: Op
-000122f0: 7469 6f6e 616c 5b66 6c6f 6174 5d2c 2070  tional[float], p
-00012300: 726f 7869 6573 3a20 4f70 7469 6f6e 616c  roxies: Optional
-00012310: 5b64 6963 745d 2c20 2a2a 6b77 6172 6773  [dict], **kwargs
-00012320: 3a20 4c61 6e67 4d61 704b 7761 7267 7354  : LangMapKwargsT
-00012330: 7970 6529 202d 3e20 6469 6374 3a0d 0a20  ype) -> dict:.. 
-00012340: 2020 2020 2020 2070 6172 616d 7320 3d20         params = 
-00012350: 7b27 646d 7472 6163 6b5f 7061 6765 6964  {'dmtrack_pageid
-00012360: 273a 2064 6d74 7261 636b 5f70 6167 6569  ': dmtrack_pagei
-00012370: 642c 2027 6269 7a5f 7479 7065 273a 2075  d, 'biz_type': u
-00012380: 7365 5f64 6f6d 6169 6e7d 0d0a 2020 2020  se_domain}..    
-00012390: 2020 2020 6c61 6e67 7561 6765 5f64 6963      language_dic
-000123a0: 7420 3d20 7373 2e67 6574 286c 616e 675f  t = ss.get(lang_
-000123b0: 7572 6c2c 2070 6172 616d 733d 7061 7261  url, params=para
-000123c0: 6d73 2c20 6865 6164 6572 733d 7365 6c66  ms, headers=self
-000123d0: 2e68 6f73 745f 6865 6164 6572 732c 2074  .host_headers, t
-000123e0: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
-000123f0: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
-00012400: 2e6a 736f 6e28 290d 0a20 2020 2020 2020  .json()..       
-00012410: 2072 6574 7572 6e20 6469 6374 286d 6170   return dict(map
-00012420: 286c 616d 6264 6120 783a 2078 2c20 5b28  (lambda x: x, [(
-00012430: 785b 2773 6f75 7263 654c 7561 6e67 6527  x['sourceLuange'
-00012440: 5d2c 2078 5b27 7461 7267 6574 4c61 6e67  ], x['targetLang
-00012450: 7561 6765 7327 5d29 2066 6f72 2078 2069  uages']) for x i
-00012460: 6e20 6c61 6e67 7561 6765 5f64 6963 745b  n language_dict[
-00012470: 276c 616e 6775 6167 654d 6170 275d 5d29  'languageMap']])
-00012480: 290d 0a0d 0a20 2020 2040 5473 652e 7469  )....    @Tse.ti
-00012490: 6d65 5f73 7461 740d 0a20 2020 2040 5473  me_stat..    @Ts
-000124a0: 652e 6368 6563 6b5f 7175 6572 790d 0a20  e.check_query.. 
-000124b0: 2020 2064 6566 2061 6c69 6261 6261 5f61     def alibaba_a
-000124c0: 7069 2873 656c 662c 2071 7565 7279 5f74  pi(self, query_t
-000124d0: 6578 743a 2073 7472 2c20 6672 6f6d 5f6c  ext: str, from_l
-000124e0: 616e 6775 6167 653a 2073 7472 203d 2027  anguage: str = '
-000124f0: 6175 746f 272c 2074 6f5f 6c61 6e67 7561  auto', to_langua
-00012500: 6765 3a20 7374 7220 3d20 2765 6e27 2c20  ge: str = 'en', 
-00012510: 2a2a 6b77 6172 6773 3a20 4170 694b 7761  **kwargs: ApiKwa
-00012520: 7267 7354 7970 6529 202d 3e20 556e 696f  rgsType) -> Unio
-00012530: 6e5b 7374 722c 2064 6963 745d 3a0d 0a20  n[str, dict]:.. 
-00012540: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00012550: 2020 2020 6874 7470 733a 2f2f 7472 616e      https://tran
-00012560: 736c 6174 652e 616c 6962 6162 612e 636f  slate.alibaba.co
-00012570: 6d0d 0a20 2020 2020 2020 203a 7061 7261  m..        :para
-00012580: 6d20 7175 6572 795f 7465 7874 3a20 7374  m query_text: st
-00012590: 722c 206d 7573 742e 0d0a 2020 2020 2020  r, must...      
-000125a0: 2020 3a70 6172 616d 2066 726f 6d5f 6c61    :param from_la
-000125b0: 6e67 7561 6765 3a20 7374 722c 2064 6566  nguage: str, def
-000125c0: 6175 6c74 2027 6175 746f 272e 0d0a 2020  ault 'auto'...  
-000125d0: 2020 2020 2020 3a70 6172 616d 2074 6f5f        :param to_
-000125e0: 6c61 6e67 7561 6765 3a20 7374 722c 2064  language: str, d
-000125f0: 6566 6175 6c74 2027 656e 272e 0d0a 2020  efault 'en'...  
-00012600: 2020 2020 2020 3a70 6172 616d 202a 2a6b        :param **k
-00012610: 7761 7267 733a 0d0a 2020 2020 2020 2020  wargs:..        
-00012620: 2020 2020 2020 2020 3a70 6172 616d 2074          :param t
-00012630: 696d 656f 7574 3a20 666c 6f61 742c 2064  imeout: float, d
-00012640: 6566 6175 6c74 204e 6f6e 652e 0d0a 2020  efault None...  
-00012650: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00012660: 6172 616d 2070 726f 7869 6573 3a20 6469  aram proxies: di
-00012670: 6374 2c20 6465 6661 756c 7420 4e6f 6e65  ct, default None
-00012680: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00012690: 2020 203a 7061 7261 6d20 736c 6565 705f     :param sleep_
-000126a0: 7365 636f 6e64 733a 2066 6c6f 6174 2c20  seconds: float, 
-000126b0: 6465 6661 756c 7420 302e 0d0a 2020 2020  default 0...    
-000126c0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-000126d0: 616d 2069 735f 6465 7461 696c 5f72 6573  am is_detail_res
-000126e0: 756c 743a 2062 6f6f 6c2c 2064 6566 6175  ult: bool, defau
-000126f0: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
-00012700: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00012710: 6d20 6966 5f69 676e 6f72 655f 6c69 6d69  m if_ignore_limi
-00012720: 745f 6f66 5f6c 656e 6774 683a 2062 6f6f  t_of_length: boo
-00012730: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
-00012740: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00012750: 2020 203a 7061 7261 6d20 6c69 6d69 745f     :param limit_
-00012760: 6f66 5f6c 656e 6774 683a 2069 6e74 2c20  of_length: int, 
-00012770: 6465 6661 756c 7420 3230 3030 302e 0d0a  default 20000...
-00012780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012790: 3a70 6172 616d 2069 665f 6967 6e6f 7265  :param if_ignore
-000127a0: 5f65 6d70 7479 5f71 7565 7279 3a20 626f  _empty_query: bo
-000127b0: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
-000127c0: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-000127d0: 2020 2020 3a70 6172 616d 2075 7064 6174      :param updat
-000127e0: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
-000127f0: 6672 6571 3a20 696e 742c 2064 6566 6175  freq: int, defau
-00012800: 6c74 2031 3030 302e 0d0a 2020 2020 2020  lt 1000...      
-00012810: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00012820: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-00012830: 6166 7465 725f 7365 636f 6e64 733a 2066  after_seconds: f
-00012840: 6c6f 6174 2c20 6465 6661 756c 7420 3135  loat, default 15
-00012850: 3030 2e0d 0a20 2020 2020 2020 2020 2020  00...           
-00012860: 2020 2020 203a 7061 7261 6d20 6966 5f73       :param if_s
-00012870: 686f 775f 7469 6d65 5f73 7461 743a 2062  how_time_stat: b
-00012880: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
-00012890: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
-000128a0: 2020 2020 203a 7061 7261 6d20 7368 6f77       :param show
-000128b0: 5f74 696d 655f 7374 6174 5f70 7265 6369  _time_stat_preci
-000128c0: 7369 6f6e 3a20 696e 742c 2064 6566 6175  sion: int, defau
-000128d0: 6c74 2032 2e0d 0a20 2020 2020 2020 2020  lt 2...         
-000128e0: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-000128f0: 5f70 7269 6e74 5f77 6172 6e69 6e67 3a20  _print_warning: 
-00012900: 626f 6f6c 2c20 6465 6661 756c 7420 5472  bool, default Tr
-00012910: 7565 2e0d 0a20 2020 2020 2020 2020 2020  ue...           
-00012920: 2020 2020 203a 7061 7261 6d20 7072 6f66       :param prof
-00012930: 6573 7369 6f6e 616c 5f66 6965 6c64 3a20  essional_field: 
-00012940: 7374 722c 2064 6566 6175 6c74 2027 6d65  str, default 'me
-00012950: 7373 6167 6527 2c20 6368 6f6f 7365 2066  ssage', choose f
-00012960: 726f 6d20 2822 6765 6e65 7261 6c22 2c22  rom ("general","
-00012970: 6d65 7373 6167 6522 2c22 6f66 6665 7222  message","offer"
-00012980: 290d 0a20 2020 2020 2020 203a 7265 7475  )..        :retu
-00012990: 726e 3a20 7374 7220 6f72 2064 6963 740d  rn: str or dict.
-000129a0: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
-000129b0: 2020 2020 2020 2020 7573 655f 646f 6d61          use_doma
-000129c0: 696e 203d 206b 7761 7267 732e 6765 7428  in = kwargs.get(
-000129d0: 2770 726f 6665 7373 696f 6e61 6c5f 6669  'professional_fi
-000129e0: 656c 6427 2c20 276d 6573 7361 6765 2729  eld', 'message')
-000129f0: 0d0a 2020 2020 2020 2020 6966 2075 7365  ..        if use
-00012a00: 5f64 6f6d 6169 6e20 6e6f 7420 696e 2073  _domain not in s
-00012a10: 656c 662e 7072 6f66 6573 7369 6f6e 616c  elf.professional
-00012a20: 5f66 6965 6c64 3a0d 0a20 2020 2020 2020  _field:..       
-00012a30: 2020 2020 2072 6169 7365 2054 7261 6e73       raise Trans
-00012a40: 6c61 746f 7245 7272 6f72 0d0a 0d0a 2020  latorError....  
-00012a50: 2020 2020 2020 7469 6d65 6f75 7420 3d20        timeout = 
-00012a60: 6b77 6172 6773 2e67 6574 2827 7469 6d65  kwargs.get('time
-00012a70: 6f75 7427 2c20 4e6f 6e65 290d 0a20 2020  out', None)..   
-00012a80: 2020 2020 2070 726f 7869 6573 203d 206b       proxies = k
-00012a90: 7761 7267 732e 6765 7428 2770 726f 7869  wargs.get('proxi
-00012aa0: 6573 272c 204e 6f6e 6529 0d0a 2020 2020  es', None)..    
-00012ab0: 2020 2020 736c 6565 705f 7365 636f 6e64      sleep_second
-00012ac0: 7320 3d20 6b77 6172 6773 2e67 6574 2827  s = kwargs.get('
-00012ad0: 736c 6565 705f 7365 636f 6e64 7327 2c20  sleep_seconds', 
-00012ae0: 3029 0d0a 2020 2020 2020 2020 6966 5f70  0)..        if_p
-00012af0: 7269 6e74 5f77 6172 6e69 6e67 203d 206b  rint_warning = k
-00012b00: 7761 7267 732e 6765 7428 2769 665f 7072  wargs.get('if_pr
-00012b10: 696e 745f 7761 726e 696e 6727 2c20 5472  int_warning', Tr
-00012b20: 7565 290d 0a20 2020 2020 2020 2069 735f  ue)..        is_
-00012b30: 6465 7461 696c 5f72 6573 756c 7420 3d20  detail_result = 
-00012b40: 6b77 6172 6773 2e67 6574 2827 6973 5f64  kwargs.get('is_d
-00012b50: 6574 6169 6c5f 7265 7375 6c74 272c 2046  etail_result', F
-00012b60: 616c 7365 290d 0a20 2020 2020 2020 2075  alse)..        u
-00012b70: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-00012b80: 7465 725f 6672 6571 203d 206b 7761 7267  ter_freq = kwarg
-00012b90: 732e 6765 7428 2775 7064 6174 655f 7365  s.get('update_se
-00012ba0: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
-00012bb0: 272c 2073 656c 662e 6465 6661 756c 745f  ', self.default_
-00012bc0: 7365 7373 696f 6e5f 6672 6571 290d 0a20  session_freq).. 
-00012bd0: 2020 2020 2020 2075 7064 6174 655f 7365         update_se
-00012be0: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
-00012bf0: 6e64 7320 3d20 6b77 6172 6773 2e67 6574  nds = kwargs.get
-00012c00: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
-00012c10: 5f61 6674 6572 5f73 6563 6f6e 6473 272c  _after_seconds',
-00012c20: 2073 656c 662e 6465 6661 756c 745f 7365   self.default_se
-00012c30: 7373 696f 6e5f 7365 636f 6e64 7329 0d0a  ssion_seconds)..
-00012c40: 2020 2020 2020 2020 7365 6c66 2e63 6865          self.che
-00012c50: 636b 5f69 6e70 7574 5f6c 696d 6974 2871  ck_input_limit(q
-00012c60: 7565 7279 5f74 6578 742c 2073 656c 662e  uery_text, self.
-00012c70: 696e 7075 745f 6c69 6d69 7429 0d0a 0d0a  input_limit)....
-00012c80: 2020 2020 2020 2020 6e6f 745f 7570 6461          not_upda
-00012c90: 7465 5f63 6f6e 645f 6672 6571 203d 2031  te_cond_freq = 1
-00012ca0: 2069 6620 7365 6c66 2e71 7565 7279 5f63   if self.query_c
-00012cb0: 6f75 6e74 2025 2075 7064 6174 655f 7365  ount % update_se
-00012cc0: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
-00012cd0: 2021 3d20 3020 656c 7365 2030 0d0a 2020   != 0 else 0..  
-00012ce0: 2020 2020 2020 6e6f 745f 7570 6461 7465        not_update
-00012cf0: 5f63 6f6e 645f 7469 6d65 203d 2031 2069  _cond_time = 1 i
-00012d00: 6620 7469 6d65 2e74 696d 6528 2920 2d20  f time.time() - 
-00012d10: 7365 6c66 2e62 6567 696e 5f74 696d 6520  self.begin_time 
-00012d20: 3c20 7570 6461 7465 5f73 6573 7369 6f6e  < update_session
-00012d30: 5f61 6674 6572 5f73 6563 6f6e 6473 2065  _after_seconds e
-00012d40: 6c73 6520 300d 0a20 2020 2020 2020 2069  lse 0..        i
-00012d50: 6620 6e6f 7420 2873 656c 662e 7365 7373  f not (self.sess
-00012d60: 696f 6e20 616e 6420 7365 6c66 2e6c 616e  ion and self.lan
-00012d70: 6775 6167 655f 6d61 7020 616e 6420 6e6f  guage_map and no
-00012d80: 745f 7570 6461 7465 5f63 6f6e 645f 6672  t_update_cond_fr
-00012d90: 6571 2061 6e64 206e 6f74 5f75 7064 6174  eq and not_updat
-00012da0: 655f 636f 6e64 5f74 696d 6520 616e 6420  e_cond_time and 
-00012db0: 7365 6c66 2e64 6d74 7261 636b 5f70 6167  self.dmtrack_pag
-00012dc0: 6569 6429 3a0d 0a20 2020 2020 2020 2020  eid):..         
-00012dd0: 2020 2073 656c 662e 6265 6769 6e5f 7469     self.begin_ti
-00012de0: 6d65 203d 2074 696d 652e 7469 6d65 2829  me = time.time()
-00012df0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00012e00: 6c66 2e73 6573 7369 6f6e 203d 2072 6571  lf.session = req
-00012e10: 7565 7374 732e 5365 7373 696f 6e28 290d  uests.Session().
-00012e20: 0a20 2020 2020 2020 2020 2020 2068 6f73  .            hos
-00012e30: 745f 7265 7370 6f6e 7365 203d 2073 656c  t_response = sel
-00012e40: 662e 7365 7373 696f 6e2e 6765 7428 7365  f.session.get(se
-00012e50: 6c66 2e68 6f73 745f 7572 6c2c 2068 6561  lf.host_url, hea
-00012e60: 6465 7273 3d73 656c 662e 686f 7374 5f68  ders=self.host_h
-00012e70: 6561 6465 7273 2c20 7469 6d65 6f75 743d  eaders, timeout=
-00012e80: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
-00012e90: 3d70 726f 7869 6573 290d 0a20 2020 2020  =proxies)..     
-00012ea0: 2020 2020 2020 2073 656c 662e 646d 7472         self.dmtr
-00012eb0: 6163 6b5f 7061 6765 6964 203d 2073 656c  ack_pageid = sel
-00012ec0: 662e 6765 745f 646d 7472 6163 6b5f 7061  f.get_dmtrack_pa
-00012ed0: 6765 6964 2868 6f73 745f 7265 7370 6f6e  geid(host_respon
-00012ee0: 7365 290d 0a20 2020 2020 2020 2020 2020  se)..           
-00012ef0: 2064 6562 7567 5f6c 616e 675f 6b77 6172   debug_lang_kwar
-00012f00: 6773 203d 2073 656c 662e 6465 6275 675f  gs = self.debug_
-00012f10: 6c61 6e67 5f6b 7761 7267 7328 6672 6f6d  lang_kwargs(from
-00012f20: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
-00012f30: 6e67 7561 6765 2c20 7365 6c66 2e64 6566  nguage, self.def
-00012f40: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
-00012f50: 6765 2c20 6966 5f70 7269 6e74 5f77 6172  ge, if_print_war
-00012f60: 6e69 6e67 290d 0a20 2020 2020 2020 2020  ning)..         
-00012f70: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
-00012f80: 5f6d 6170 203d 2073 656c 662e 6765 745f  _map = self.get_
-00012f90: 6c61 6e67 7561 6765 5f6d 6170 2873 656c  language_map(sel
-00012fa0: 662e 7365 7373 696f 6e2c 2073 656c 662e  f.session, self.
-00012fb0: 6765 745f 6c61 6e67 7561 6765 5f75 726c  get_language_url
-00012fc0: 2c20 7573 655f 646f 6d61 696e 2c20 7365  , use_domain, se
-00012fd0: 6c66 2e64 6d74 7261 636b 5f70 6167 6569  lf.dmtrack_pagei
-00012fe0: 642c 2074 696d 656f 7574 2c20 7072 6f78  d, timeout, prox
-00012ff0: 6965 732c 202a 2a64 6562 7567 5f6c 616e  ies, **debug_lan
-00013000: 675f 6b77 6172 6773 290d 0a0d 0a20 2020  g_kwargs)....   
-00013010: 2020 2020 2066 726f 6d5f 6c61 6e67 7561       from_langua
-00013020: 6765 2c20 746f 5f6c 616e 6775 6167 6520  ge, to_language 
-00013030: 3d20 7365 6c66 2e63 6865 636b 5f6c 616e  = self.check_lan
-00013040: 6775 6167 6528 6672 6f6d 5f6c 616e 6775  guage(from_langu
-00013050: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
-00013060: 2c20 7365 6c66 2e6c 616e 6775 6167 655f  , self.language_
-00013070: 6d61 702c 206f 7574 7075 745f 7a68 3d73  map, output_zh=s
-00013080: 656c 662e 6f75 7470 7574 5f7a 6829 0d0a  elf.output_zh)..
-00013090: 2020 2020 2020 2020 7061 796c 6f61 6420          payload 
-000130a0: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
-000130b0: 2022 7372 634c 616e 6775 6167 6522 3a20   "srcLanguage": 
-000130c0: 6672 6f6d 5f6c 616e 6775 6167 652c 0d0a  from_language,..
-000130d0: 2020 2020 2020 2020 2020 2020 2274 6774              "tgt
-000130e0: 4c61 6e67 7561 6765 223a 2074 6f5f 6c61  Language": to_la
-000130f0: 6e67 7561 6765 2c0d 0a20 2020 2020 2020  nguage,..       
-00013100: 2020 2020 2022 7372 6354 6578 7422 3a20       "srcText": 
-00013110: 7175 6572 795f 7465 7874 2c0d 0a20 2020  query_text,..   
-00013120: 2020 2020 2020 2020 2022 6269 7a54 7970           "bizTyp
-00013130: 6522 3a20 7573 655f 646f 6d61 696e 2c0d  e": use_domain,.
-00013140: 0a20 2020 2020 2020 2020 2020 2022 7669  .            "vi
-00013150: 6577 5479 7065 223a 2022 222c 0d0a 2020  ewType": "",..  
-00013160: 2020 2020 2020 2020 2020 2273 6f75 7263            "sourc
-00013170: 6522 3a20 2222 2c0d 0a20 2020 2020 2020  e": "",..       
-00013180: 207d 0d0a 2020 2020 2020 2020 7061 7261   }..        para
-00013190: 6d73 203d 207b 2264 6d74 7261 636b 5f70  ms = {"dmtrack_p
-000131a0: 6167 6569 6422 3a20 7365 6c66 2e64 6d74  ageid": self.dmt
-000131b0: 7261 636b 5f70 6167 6569 647d 0d0a 2020  rack_pageid}..  
-000131c0: 2020 2020 2020 7220 3d20 7365 6c66 2e73        r = self.s
-000131d0: 6573 7369 6f6e 2e70 6f73 7428 7365 6c66  ession.post(self
-000131e0: 2e61 7069 5f75 726c 2c20 6865 6164 6572  .api_url, header
-000131f0: 733d 7365 6c66 2e61 7069 5f68 6561 6465  s=self.api_heade
-00013200: 7273 2c20 7061 7261 6d73 3d70 6172 616d  rs, params=param
-00013210: 732c 2064 6174 613d 7061 796c 6f61 642c  s, data=payload,
-00013220: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
-00013230: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
-00013240: 7329 0d0a 2020 2020 2020 2020 722e 7261  s)..        r.ra
-00013250: 6973 655f 666f 725f 7374 6174 7573 2829  ise_for_status()
-00013260: 0d0a 2020 2020 2020 2020 6461 7461 203d  ..        data =
-00013270: 2072 2e6a 736f 6e28 290d 0a20 2020 2020   r.json()..     
-00013280: 2020 2074 696d 652e 736c 6565 7028 736c     time.sleep(sl
-00013290: 6565 705f 7365 636f 6e64 7329 0d0a 2020  eep_seconds)..  
-000132a0: 2020 2020 2020 7365 6c66 2e71 7565 7279        self.query
-000132b0: 5f63 6f75 6e74 202b 3d20 310d 0a20 2020  _count += 1..   
-000132c0: 2020 2020 2072 6574 7572 6e20 6461 7461       return data
-000132d0: 2069 6620 6973 5f64 6574 6169 6c5f 7265   if is_detail_re
-000132e0: 7375 6c74 2065 6c73 6520 6461 7461 5b27  sult else data['
-000132f0: 6c69 7374 5461 7267 6574 5465 7874 275d  listTargetText']
-00013300: 5b30 5d0d 0a0d 0a0d 0a63 6c61 7373 2041  [0]......class A
-00013310: 6c69 6261 6261 5632 2854 7365 293a 0d0a  libabaV2(Tse):..
-00013320: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-00013330: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-00013340: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
-00013350: 5f28 290d 0a20 2020 2020 2020 2073 656c  _()..        sel
-00013360: 662e 6265 6769 6e5f 7469 6d65 203d 2074  f.begin_time = t
-00013370: 696d 652e 7469 6d65 2829 0d0a 2020 2020  ime.time()..    
-00013380: 2020 2020 7365 6c66 2e68 6f73 745f 7572      self.host_ur
-00013390: 6c20 3d20 2768 7474 7073 3a2f 2f74 7261  l = 'https://tra
-000133a0: 6e73 6c61 7465 2e61 6c69 6261 6261 2e63  nslate.alibaba.c
-000133b0: 6f6d 270d 0a20 2020 2020 2020 2073 656c  om'..        sel
-000133c0: 662e 6170 695f 7572 6c20 3d20 2768 7474  f.api_url = 'htt
-000133d0: 7073 3a2f 2f74 7261 6e73 6c61 7465 2e61  ps://translate.a
-000133e0: 6c69 6261 6261 2e63 6f6d 2f61 7069 2f74  libaba.com/api/t
-000133f0: 7261 6e73 6c61 7465 2f74 6578 7427 0d0a  ranslate/text'..
-00013400: 2020 2020 2020 2020 7365 6c66 2e63 7372          self.csr
-00013410: 665f 7572 6c20 3d20 2768 7474 7073 3a2f  f_url = 'https:/
-00013420: 2f74 7261 6e73 6c61 7465 2e61 6c69 6261  /translate.aliba
-00013430: 6261 2e63 6f6d 2f61 7069 2f74 7261 6e73  ba.com/api/trans
-00013440: 6c61 7465 2f63 7372 6674 6f6b 656e 270d  late/csrftoken'.
-00013450: 0a20 2020 2020 2020 2073 656c 662e 6765  .        self.ge
-00013460: 745f 6c61 6e67 7561 6765 5f70 6174 7465  t_language_patte
-00013470: 726e 203d 2027 2f2f 6c61 6e67 2e61 6c69  rn = '//lang.ali
-00013480: 6364 6e2e 636f 6d2f 6d63 6d73 2f74 7261  cdn.com/mcms/tra
-00013490: 6e73 6c61 7469 6f6e 2d6f 7065 6e2d 706f  nslation-open-po
-000134a0: 7274 616c 2f28 2e2a 3f29 2f74 7261 6e73  rtal/(.*?)/trans
-000134b0: 6c61 7469 6f6e 2d6f 7065 6e2d 706f 7274  lation-open-port
-000134c0: 616c 5f69 6e74 6572 6661 6365 2e6a 736f  al_interface.jso
-000134d0: 6e27 0d0a 2020 2020 2020 2020 7365 6c66  n'..        self
-000134e0: 2e67 6574 5f6c 616e 6775 6167 655f 7572  .get_language_ur
-000134f0: 6c20 3d20 4e6f 6e65 0d0a 2020 2020 2020  l = None..      
-00013500: 2020 7365 6c66 2e68 6f73 745f 6865 6164    self.host_head
-00013510: 6572 7320 3d20 7365 6c66 2e67 6574 5f68  ers = self.get_h
-00013520: 6561 6465 7273 2873 656c 662e 686f 7374  eaders(self.host
-00013530: 5f75 726c 2c20 6966 5f61 7069 3d46 616c  _url, if_api=Fal
-00013540: 7365 290d 0a20 2020 2020 2020 2073 656c  se)..        sel
-00013550: 662e 6170 695f 6865 6164 6572 7320 3d20  f.api_headers = 
-00013560: 7365 6c66 2e67 6574 5f68 6561 6465 7273  self.get_headers
-00013570: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
-00013580: 6966 5f61 7069 3d54 7275 652c 2069 665f  if_api=True, if_
-00013590: 616a 6178 5f66 6f72 5f61 7069 3d46 616c  ajax_for_api=Fal
-000135a0: 7365 2c20 6966 5f6d 756c 7469 7061 7274  se, if_multipart
-000135b0: 5f66 6f72 5f61 7069 3d54 7275 6529 0d0a  _for_api=True)..
-000135c0: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
-000135d0: 6775 6167 655f 6d61 7020 3d20 4e6f 6e65  guage_map = None
-000135e0: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
-000135f0: 6574 6169 6c5f 6c61 6e67 7561 6765 5f6d  etail_language_m
-00013600: 6170 203d 204e 6f6e 650d 0a20 2020 2020  ap = None..     
-00013610: 2020 2073 656c 662e 7072 6f66 6573 7369     self.professi
-00013620: 6f6e 616c 5f66 6965 6c64 203d 2028 2767  onal_field = ('g
-00013630: 656e 6572 616c 272c 290d 0a20 2020 2020  eneral',)..     
-00013640: 2020 2073 656c 662e 6373 7266 5f74 6f6b     self.csrf_tok
-00013650: 656e 203d 204e 6f6e 650d 0a20 2020 2020  en = None..     
-00013660: 2020 2073 656c 662e 7365 7373 696f 6e20     self.session 
-00013670: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00013680: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
-00013690: 203d 2030 0d0a 2020 2020 2020 2020 7365   = 0..        se
-000136a0: 6c66 2e6f 7574 7075 745f 7a68 203d 2027  lf.output_zh = '
-000136b0: 7a68 270d 0a20 2020 2020 2020 2073 656c  zh'..        sel
-000136c0: 662e 696e 7075 745f 6c69 6d69 7420 3d20  f.input_limit = 
-000136d0: 696e 7428 3565 3329 0d0a 2020 2020 2020  int(5e3)..      
-000136e0: 2020 7365 6c66 2e64 6566 6175 6c74 5f66    self.default_f
-000136f0: 726f 6d5f 6c61 6e67 7561 6765 203d 2073  rom_language = s
-00013700: 656c 662e 6f75 7470 7574 5f7a 680d 0a0d  elf.output_zh...
-00013710: 0a20 2020 2040 5473 652e 6465 6275 675f  .    @Tse.debug_
-00013720: 6c61 6e67 7561 6765 5f6d 6170 0d0a 2020  language_map..  
-00013730: 2020 6465 6620 6765 745f 6c61 6e67 7561    def get_langua
-00013740: 6765 5f6d 6170 2873 656c 662c 206c 616e  ge_map(self, lan
-00013750: 675f 6874 6d6c 3a20 7374 722c 202a 2a6b  g_html: str, **k
-00013760: 7761 7267 733a 204c 616e 674d 6170 4b77  wargs: LangMapKw
-00013770: 6172 6773 5479 7065 2920 2d3e 2064 6963  argsType) -> dic
-00013780: 743a 0d0a 2020 2020 2020 2020 6c61 6e67  t:..        lang
-00013790: 5f70 6172 6167 7261 7068 203d 2072 652e  _paragraph = re.
-000137a0: 636f 6d70 696c 6528 2722 656e 5f55 5322  compile('"en_US"
-000137b0: 3a7b 282e 2a3f 297d 2c22 7a68 5f43 4e22  :{(.*?)},"zh_CN"
-000137c0: 3a7b 2729 2e73 6561 7263 6828 6c61 6e67  :{').search(lang
-000137d0: 5f68 746d 6c29 2e67 726f 7570 2829 2e72  _html).group().r
-000137e0: 6570 6c61 6365 2827 222c 272c 2027 222c  eplace('",', '",
-000137f0: 5c6e 2729 0d0a 2020 2020 2020 2020 6c61  \n')..        la
-00013800: 6e67 5f69 7465 6d73 203d 2072 652e 636f  ng_items = re.co
-00013810: 6d70 696c 6528 2769 6e74 6572 6661 6365  mpile('interface
-00013820: 2e28 2e2a 3f29 223a 2228 2e2a 3f29 2227  .(.*?)":"(.*?)"'
-00013830: 292e 6669 6e64 616c 6c28 6c61 6e67 5f70  ).findall(lang_p
-00013840: 6172 6167 7261 7068 290d 0a20 2020 2020  aragraph)..     
-00013850: 2020 205f 666e 5f66 696c 7465 7220 3d20     _fn_filter = 
-00013860: 6c61 6d62 6461 206b 2c20 763a 2031 2069  lambda k, v: 1 i
-00013870: 6620 286c 656e 286b 2920 3c3d 2033 206f  f (len(k) <= 3 o
-00013880: 7220 286c 656e 286b 2920 3d3d 2035 2061  r (len(k) == 5 a
-00013890: 6e64 2027 2d27 2069 6e20 6b29 2920 616e  nd '-' in k)) an
-000138a0: 6420 6c65 6e28 762e 7370 6c69 7428 2720  d len(v.split(' 
-000138b0: 2729 2920 3c3d 2032 2065 6c73 6520 300d  ')) <= 2 else 0.
-000138c0: 0a20 2020 2020 2020 206c 616e 675f 6974  .        lang_it
-000138d0: 656d 7320 3d20 736f 7274 6564 285b 286b  ems = sorted([(k
-000138e0: 2c20 7629 2066 6f72 206b 2c20 7620 696e  , v) for k, v in
-000138f0: 206c 616e 675f 6974 656d 7320 6966 205f   lang_items if _
-00013900: 666e 5f66 696c 7465 7228 6b2c 2076 295d  fn_filter(k, v)]
-00013910: 290d 0a20 2020 2020 2020 2064 5f6c 616e  )..        d_lan
-00013920: 675f 6d61 7020 3d20 7b6b 3a20 7620 666f  g_map = {k: v fo
-00013930: 7220 6b2c 2076 2069 6e20 6c61 6e67 5f69  r k, v in lang_i
-00013940: 7465 6d73 7d0d 0a20 2020 2020 2020 206c  tems}..        l
-00013950: 616e 675f 6c69 7374 203d 206c 6973 7428  ang_list = list(
-00013960: 645f 6c61 6e67 5f6d 6170 2e6b 6579 7328  d_lang_map.keys(
-00013970: 2929 0d0a 2020 2020 2020 2020 7265 7475  ))..        retu
-00013980: 726e 207b 7d2e 6672 6f6d 6b65 7973 286c  rn {}.fromkeys(l
-00013990: 616e 675f 6c69 7374 2c20 6c61 6e67 5f6c  ang_list, lang_l
-000139a0: 6973 7429 0d0a 0d0a 2020 2020 6465 6620  ist)....    def 
-000139b0: 6765 745f 645f 6c61 6e67 5f6d 6170 2873  get_d_lang_map(s
-000139c0: 656c 662c 206c 616e 675f 6874 6d6c 3a20  elf, lang_html: 
-000139d0: 7374 7229 202d 3e20 6469 6374 3a0d 0a20  str) -> dict:.. 
-000139e0: 2020 2020 2020 206c 616e 675f 7061 7261         lang_para
-000139f0: 6772 6170 6820 3d20 7265 2e63 6f6d 7069  graph = re.compi
-00013a00: 6c65 2827 2265 6e5f 5553 223a 7b28 2e2a  le('"en_US":{(.*
-00013a10: 3f29 7d2c 227a 685f 434e 223a 7b27 292e  ?)},"zh_CN":{').
-00013a20: 7365 6172 6368 286c 616e 675f 6874 6d6c  search(lang_html
-00013a30: 292e 6772 6f75 7028 292e 7265 706c 6163  ).group().replac
-00013a40: 6528 2722 2c27 2c20 2722 2c5c 6e27 290d  e('",', '",\n').
-00013a50: 0a20 2020 2020 2020 206c 616e 675f 6974  .        lang_it
-00013a60: 656d 7320 3d20 7265 2e63 6f6d 7069 6c65  ems = re.compile
-00013a70: 2827 696e 7465 7266 6163 652e 282e 2a3f  ('interface.(.*?
-00013a80: 2922 3a22 282e 2a3f 2922 2729 2e66 696e  )":"(.*?)"').fin
-00013a90: 6461 6c6c 286c 616e 675f 7061 7261 6772  dall(lang_paragr
-00013aa0: 6170 6829 0d0a 2020 2020 2020 2020 5f66  aph)..        _f
-00013ab0: 6e5f 6669 6c74 6572 203d 206c 616d 6264  n_filter = lambd
-00013ac0: 6120 6b2c 2076 3a20 3120 6966 2028 6c65  a k, v: 1 if (le
-00013ad0: 6e28 6b29 203c 3d20 3320 6f72 2028 6c65  n(k) <= 3 or (le
-00013ae0: 6e28 6b29 203d 3d20 3520 616e 6420 272d  n(k) == 5 and '-
-00013af0: 2720 696e 206b 2929 2061 6e64 206c 656e  ' in k)) and len
-00013b00: 2876 2e73 706c 6974 2827 2027 2929 203c  (v.split(' ')) <
-00013b10: 3d20 3220 656c 7365 2030 0d0a 2020 2020  = 2 else 0..    
-00013b20: 2020 2020 6c61 6e67 5f69 7465 6d73 203d      lang_items =
-00013b30: 2073 6f72 7465 6428 5b28 6b2c 2076 2920   sorted([(k, v) 
-00013b40: 666f 7220 6b2c 2076 2069 6e20 6c61 6e67  for k, v in lang
-00013b50: 5f69 7465 6d73 2069 6620 5f66 6e5f 6669  _items if _fn_fi
-00013b60: 6c74 6572 286b 2c20 7629 5d29 0d0a 2020  lter(k, v)])..  
-00013b70: 2020 2020 2020 7265 7475 726e 207b 6b3a        return {k:
-00013b80: 2076 2066 6f72 206b 2c20 7620 696e 206c   v for k, v in l
-00013b90: 616e 675f 6974 656d 737d 0d0a 0d0a 2020  ang_items}....  
-00013ba0: 2020 4054 7365 2e74 696d 655f 7374 6174    @Tse.time_stat
-00013bb0: 0d0a 2020 2020 4054 7365 2e63 6865 636b  ..    @Tse.check
-00013bc0: 5f71 7565 7279 0d0a 2020 2020 6465 6620  _query..    def 
-00013bd0: 616c 6962 6162 615f 6170 6928 7365 6c66  alibaba_api(self
-00013be0: 2c20 7175 6572 795f 7465 7874 3a20 7374  , query_text: st
-00013bf0: 722c 2066 726f 6d5f 6c61 6e67 7561 6765  r, from_language
-00013c00: 3a20 7374 7220 3d20 2761 7574 6f27 2c20  : str = 'auto', 
-00013c10: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
-00013c20: 203d 2027 656e 272c 202a 2a6b 7761 7267   = 'en', **kwarg
-00013c30: 733a 2041 7069 4b77 6172 6773 5479 7065  s: ApiKwargsType
-00013c40: 2920 2d3e 2055 6e69 6f6e 5b73 7472 2c20  ) -> Union[str, 
-00013c50: 6469 6374 5d3a 0d0a 2020 2020 2020 2020  dict]:..        
-00013c60: 2222 220d 0a20 2020 2020 2020 2068 7474  """..        htt
-00013c70: 7073 3a2f 2f74 7261 6e73 6c61 7465 2e61  ps://translate.a
-00013c80: 6c69 6261 6261 2e63 6f6d 0d0a 2020 2020  libaba.com..    
-00013c90: 2020 2020 3a70 6172 616d 2071 7565 7279      :param query
-00013ca0: 5f74 6578 743a 2073 7472 2c20 6d75 7374  _text: str, must
-00013cb0: 2e0d 0a20 2020 2020 2020 203a 7061 7261  ...        :para
-00013cc0: 6d20 6672 6f6d 5f6c 616e 6775 6167 653a  m from_language:
-00013cd0: 2073 7472 2c20 6465 6661 756c 7420 2761   str, default 'a
-00013ce0: 7574 6f27 2e0d 0a20 2020 2020 2020 203a  uto'...        :
-00013cf0: 7061 7261 6d20 746f 5f6c 616e 6775 6167  param to_languag
-00013d00: 653a 2073 7472 2c20 6465 6661 756c 7420  e: str, default 
-00013d10: 2765 6e27 2e0d 0a20 2020 2020 2020 203a  'en'...        :
-00013d20: 7061 7261 6d20 2a2a 6b77 6172 6773 3a0d  param **kwargs:.
-00013d30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013d40: 203a 7061 7261 6d20 7469 6d65 6f75 743a   :param timeout:
-00013d50: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
-00013d60: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
-00013d70: 2020 2020 2020 203a 7061 7261 6d20 7072         :param pr
-00013d80: 6f78 6965 733a 2064 6963 742c 2064 6566  oxies: dict, def
-00013d90: 6175 6c74 204e 6f6e 652e 0d0a 2020 2020  ault None...    
-00013da0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00013db0: 616d 2073 6c65 6570 5f73 6563 6f6e 6473  am sleep_seconds
-00013dc0: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
-00013dd0: 2030 2e0d 0a20 2020 2020 2020 2020 2020   0...           
-00013de0: 2020 2020 203a 7061 7261 6d20 6973 5f64       :param is_d
-00013df0: 6574 6169 6c5f 7265 7375 6c74 3a20 626f  etail_result: bo
-00013e00: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
-00013e10: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-00013e20: 2020 2020 3a70 6172 616d 2069 665f 6967      :param if_ig
-00013e30: 6e6f 7265 5f6c 696d 6974 5f6f 665f 6c65  nore_limit_of_le
-00013e40: 6e67 7468 3a20 626f 6f6c 2c20 6465 6661  ngth: bool, defa
-00013e50: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-00013e60: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00013e70: 616d 206c 696d 6974 5f6f 665f 6c65 6e67  am limit_of_leng
-00013e80: 7468 3a20 696e 742c 2064 6566 6175 6c74  th: int, default
-00013e90: 2032 3030 3030 2e0d 0a20 2020 2020 2020   20000...       
-00013ea0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00013eb0: 6966 5f69 676e 6f72 655f 656d 7074 795f  if_ignore_empty_
-00013ec0: 7175 6572 793a 2062 6f6f 6c2c 2064 6566  query: bool, def
-00013ed0: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
-00013ee0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00013ef0: 7261 6d20 7570 6461 7465 5f73 6573 7369  ram update_sessi
-00013f00: 6f6e 5f61 6674 6572 5f66 7265 713a 2069  on_after_freq: i
-00013f10: 6e74 2c20 6465 6661 756c 7420 3130 3030  nt, default 1000
-00013f20: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00013f30: 2020 203a 7061 7261 6d20 7570 6461 7465     :param update
-00013f40: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
-00013f50: 6563 6f6e 6473 3a20 666c 6f61 742c 2064  econds: float, d
-00013f60: 6566 6175 6c74 2031 3530 302e 0d0a 2020  efault 1500...  
-00013f70: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00013f80: 6172 616d 2069 665f 7368 6f77 5f74 696d  aram if_show_tim
-00013f90: 655f 7374 6174 3a20 626f 6f6c 2c20 6465  e_stat: bool, de
-00013fa0: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
-00013fb0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00013fc0: 6172 616d 2073 686f 775f 7469 6d65 5f73  aram show_time_s
-00013fd0: 7461 745f 7072 6563 6973 696f 6e3a 2069  tat_precision: i
-00013fe0: 6e74 2c20 6465 6661 756c 7420 322e 0d0a  nt, default 2...
-00013ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014000: 3a70 6172 616d 2069 665f 7072 696e 745f  :param if_print_
-00014010: 7761 726e 696e 673a 2062 6f6f 6c2c 2064  warning: bool, d
-00014020: 6566 6175 6c74 2054 7275 652e 0d0a 2020  efault True...  
-00014030: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00014040: 6172 616d 2070 726f 6665 7373 696f 6e61  aram professiona
-00014050: 6c5f 6669 656c 643a 2073 7472 2c20 6465  l_field: str, de
-00014060: 6661 756c 7420 276d 6573 7361 6765 272c  fault 'message',
-00014070: 2063 686f 6f73 6520 6672 6f6d 2028 2267   choose from ("g
-00014080: 656e 6572 616c 222c 290d 0a20 2020 2020  eneral",)..     
-00014090: 2020 203a 7265 7475 726e 3a20 7374 7220     :return: str 
-000140a0: 6f72 2064 6963 740d 0a20 2020 2020 2020  or dict..       
-000140b0: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
-000140c0: 7573 655f 646f 6d61 696e 203d 206b 7761  use_domain = kwa
-000140d0: 7267 732e 6765 7428 2770 726f 6665 7373  rgs.get('profess
-000140e0: 696f 6e61 6c5f 6669 656c 6427 2c20 2767  ional_field', 'g
-000140f0: 656e 6572 616c 2729 0d0a 2020 2020 2020  eneral')..      
-00014100: 2020 6966 2075 7365 5f64 6f6d 6169 6e20    if use_domain 
-00014110: 6e6f 7420 696e 2073 656c 662e 7072 6f66  not in self.prof
-00014120: 6573 7369 6f6e 616c 5f66 6965 6c64 3a0d  essional_field:.
-00014130: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00014140: 7365 2054 7261 6e73 6c61 746f 7245 7272  se TranslatorErr
-00014150: 6f72 0d0a 0d0a 2020 2020 2020 2020 7469  or....        ti
-00014160: 6d65 6f75 7420 3d20 6b77 6172 6773 2e67  meout = kwargs.g
-00014170: 6574 2827 7469 6d65 6f75 7427 2c20 4e6f  et('timeout', No
-00014180: 6e65 290d 0a20 2020 2020 2020 2070 726f  ne)..        pro
-00014190: 7869 6573 203d 206b 7761 7267 732e 6765  xies = kwargs.ge
-000141a0: 7428 2770 726f 7869 6573 272c 204e 6f6e  t('proxies', Non
-000141b0: 6529 0d0a 2020 2020 2020 2020 736c 6565  e)..        slee
-000141c0: 705f 7365 636f 6e64 7320 3d20 6b77 6172  p_seconds = kwar
-000141d0: 6773 2e67 6574 2827 736c 6565 705f 7365  gs.get('sleep_se
-000141e0: 636f 6e64 7327 2c20 3029 0d0a 2020 2020  conds', 0)..    
-000141f0: 2020 2020 6966 5f70 7269 6e74 5f77 6172      if_print_war
-00014200: 6e69 6e67 203d 206b 7761 7267 732e 6765  ning = kwargs.ge
-00014210: 7428 2769 665f 7072 696e 745f 7761 726e  t('if_print_warn
-00014220: 696e 6727 2c20 5472 7565 290d 0a20 2020  ing', True)..   
-00014230: 2020 2020 2069 735f 6465 7461 696c 5f72       is_detail_r
-00014240: 6573 756c 7420 3d20 6b77 6172 6773 2e67  esult = kwargs.g
-00014250: 6574 2827 6973 5f64 6574 6169 6c5f 7265  et('is_detail_re
-00014260: 7375 6c74 272c 2046 616c 7365 290d 0a20  sult', False).. 
-00014270: 2020 2020 2020 2075 7064 6174 655f 7365         update_se
-00014280: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
-00014290: 203d 206b 7761 7267 732e 6765 7428 2775   = kwargs.get('u
-000142a0: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-000142b0: 7465 725f 6672 6571 272c 2073 656c 662e  ter_freq', self.
-000142c0: 6465 6661 756c 745f 7365 7373 696f 6e5f  default_session_
-000142d0: 6672 6571 290d 0a20 2020 2020 2020 2075  freq)..        u
-000142e0: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-000142f0: 7465 725f 7365 636f 6e64 7320 3d20 6b77  ter_seconds = kw
-00014300: 6172 6773 2e67 6574 2827 7570 6461 7465  args.get('update
-00014310: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
-00014320: 6563 6f6e 6473 272c 2073 656c 662e 6465  econds', self.de
-00014330: 6661 756c 745f 7365 7373 696f 6e5f 7365  fault_session_se
-00014340: 636f 6e64 7329 0d0a 2020 2020 2020 2020  conds)..        
-00014350: 7365 6c66 2e63 6865 636b 5f69 6e70 7574  self.check_input
-00014360: 5f6c 696d 6974 2871 7565 7279 5f74 6578  _limit(query_tex
-00014370: 742c 2073 656c 662e 696e 7075 745f 6c69  t, self.input_li
-00014380: 6d69 7429 0d0a 0d0a 2020 2020 2020 2020  mit)....        
-00014390: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
-000143a0: 6672 6571 203d 2031 2069 6620 7365 6c66  freq = 1 if self
-000143b0: 2e71 7565 7279 5f63 6f75 6e74 2025 2075  .query_count % u
-000143c0: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-000143d0: 7465 725f 6672 6571 2021 3d20 3020 656c  ter_freq != 0 el
-000143e0: 7365 2030 0d0a 2020 2020 2020 2020 6e6f  se 0..        no
-000143f0: 745f 7570 6461 7465 5f63 6f6e 645f 7469  t_update_cond_ti
-00014400: 6d65 203d 2031 2069 6620 7469 6d65 2e74  me = 1 if time.t
-00014410: 696d 6528 2920 2d20 7365 6c66 2e62 6567  ime() - self.beg
-00014420: 696e 5f74 696d 6520 3c20 7570 6461 7465  in_time < update
-00014430: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
-00014440: 6563 6f6e 6473 2065 6c73 6520 300d 0a20  econds else 0.. 
-00014450: 2020 2020 2020 2069 6620 6e6f 7420 2873         if not (s
-00014460: 656c 662e 7365 7373 696f 6e20 616e 6420  elf.session and 
-00014470: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
-00014480: 7020 616e 6420 6e6f 745f 7570 6461 7465  p and not_update
-00014490: 5f63 6f6e 645f 6672 6571 2061 6e64 206e  _cond_freq and n
-000144a0: 6f74 5f75 7064 6174 655f 636f 6e64 5f74  ot_update_cond_t
-000144b0: 696d 6520 616e 6420 7365 6c66 2e63 7372  ime and self.csr
-000144c0: 665f 746f 6b65 6e29 3a0d 0a20 2020 2020  f_token):..     
-000144d0: 2020 2020 2020 2073 656c 662e 6265 6769         self.begi
-000144e0: 6e5f 7469 6d65 203d 2074 696d 652e 7469  n_time = time.ti
-000144f0: 6d65 2829 0d0a 2020 2020 2020 2020 2020  me()..          
-00014500: 2020 7365 6c66 2e73 6573 7369 6f6e 203d    self.session =
-00014510: 2072 6571 7565 7374 732e 5365 7373 696f   requests.Sessio
-00014520: 6e28 290d 0a20 2020 2020 2020 2020 2020  n()..           
-00014530: 2068 6f73 745f 6874 6d6c 203d 2073 656c   host_html = sel
-00014540: 662e 7365 7373 696f 6e2e 6765 7428 7365  f.session.get(se
-00014550: 6c66 2e68 6f73 745f 7572 6c2c 2068 6561  lf.host_url, hea
-00014560: 6465 7273 3d73 656c 662e 686f 7374 5f68  ders=self.host_h
-00014570: 6561 6465 7273 2c20 7469 6d65 6f75 743d  eaders, timeout=
-00014580: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
-00014590: 3d70 726f 7869 6573 292e 7465 7874 0d0a  =proxies).text..
-000145a0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000145b0: 2e67 6574 5f6c 616e 6775 6167 655f 7572  .get_language_ur
-000145c0: 6c20 3d20 6627 6874 7470 733a 7b72 652e  l = f'https:{re.
-000145d0: 636f 6d70 696c 6528 7365 6c66 2e67 6574  compile(self.get
-000145e0: 5f6c 616e 6775 6167 655f 7061 7474 6572  _language_patter
-000145f0: 6e29 2e73 6561 7263 6828 686f 7374 5f68  n).search(host_h
-00014600: 746d 6c29 2e67 726f 7570 2829 7d27 0d0a  tml).group()}'..
-00014610: 2020 2020 2020 2020 2020 2020 6c61 6e67              lang
-00014620: 5f68 746d 6c20 3d20 7365 6c66 2e73 6573  _html = self.ses
-00014630: 7369 6f6e 2e67 6574 2873 656c 662e 6765  sion.get(self.ge
-00014640: 745f 6c61 6e67 7561 6765 5f75 726c 2c20  t_language_url, 
-00014650: 6865 6164 6572 733d 7365 6c66 2e68 6f73  headers=self.hos
-00014660: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
-00014670: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
-00014680: 6965 733d 7072 6f78 6965 7329 2e74 6578  ies=proxies).tex
-00014690: 740d 0a20 2020 2020 2020 2020 2020 2064  t..            d
-000146a0: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
-000146b0: 203d 2073 656c 662e 6465 6275 675f 6c61   = self.debug_la
-000146c0: 6e67 5f6b 7761 7267 7328 6672 6f6d 5f6c  ng_kwargs(from_l
-000146d0: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
-000146e0: 7561 6765 2c20 7365 6c66 2e64 6566 6175  uage, self.defau
-000146f0: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
-00014700: 2c20 6966 5f70 7269 6e74 5f77 6172 6e69  , if_print_warni
-00014710: 6e67 290d 0a20 2020 2020 2020 2020 2020  ng)..           
-00014720: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
-00014730: 6170 203d 2073 656c 662e 6765 745f 6c61  ap = self.get_la
-00014740: 6e67 7561 6765 5f6d 6170 286c 616e 675f  nguage_map(lang_
-00014750: 6874 6d6c 2c20 2a2a 6465 6275 675f 6c61  html, **debug_la
-00014760: 6e67 5f6b 7761 7267 7329 0d0a 2020 2020  ng_kwargs)..    
-00014770: 2020 2020 2020 2020 7365 6c66 2e64 6574          self.det
-00014780: 6169 6c5f 6c61 6e67 7561 6765 5f6d 6170  ail_language_map
-00014790: 203d 2073 656c 662e 6765 745f 645f 6c61   = self.get_d_la
-000147a0: 6e67 5f6d 6170 286c 616e 675f 6874 6d6c  ng_map(lang_html
-000147b0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-000147c0: 205f 203d 2073 656c 662e 7365 7373 696f   _ = self.sessio
-000147d0: 6e2e 6765 7428 7365 6c66 2e63 7372 665f  n.get(self.csrf_
-000147e0: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
-000147f0: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
-00014800: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
-00014810: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
-00014820: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-00014830: 656c 662e 6373 7266 5f74 6f6b 656e 203d  elf.csrf_token =
-00014840: 2073 656c 662e 7365 7373 696f 6e2e 6765   self.session.ge
-00014850: 7428 7365 6c66 2e63 7372 665f 7572 6c2c  t(self.csrf_url,
-00014860: 2068 6561 6465 7273 3d73 656c 662e 686f   headers=self.ho
-00014870: 7374 5f68 6561 6465 7273 2c20 7469 6d65  st_headers, time
-00014880: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
-00014890: 7869 6573 3d70 726f 7869 6573 292e 6a73  xies=proxies).js
-000148a0: 6f6e 2829 0d0a 2020 2020 2020 2020 2020  on()..          
-000148b0: 2020 7365 6c66 2e61 7069 5f68 6561 6465    self.api_heade
-000148c0: 7273 2e75 7064 6174 6528 7b73 656c 662e  rs.update({self.
-000148d0: 6373 7266 5f74 6f6b 656e 5b27 6865 6164  csrf_token['head
-000148e0: 6572 4e61 6d65 275d 3a20 7365 6c66 2e63  erName']: self.c
-000148f0: 7372 665f 746f 6b65 6e5b 2774 6f6b 656e  srf_token['token
-00014900: 275d 7d29 0d0a 0d0a 2020 2020 2020 2020  ']})....        
-00014910: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
-00014920: 6f5f 6c61 6e67 7561 6765 203d 2073 656c  o_language = sel
-00014930: 662e 6368 6563 6b5f 6c61 6e67 7561 6765  f.check_language
-00014940: 2866 726f 6d5f 6c61 6e67 7561 6765 2c20  (from_language, 
-00014950: 746f 5f6c 616e 6775 6167 652c 2073 656c  to_language, sel
-00014960: 662e 6c61 6e67 7561 6765 5f6d 6170 2c20  f.language_map, 
-00014970: 7365 6c66 2e6f 7574 7075 745f 7a68 290d  self.output_zh).
-00014980: 0a20 2020 2020 2020 2066 696c 6573 5f64  .        files_d
-00014990: 6174 6120 3d20 7b0d 0a20 2020 2020 2020  ata = {..       
-000149a0: 2020 2020 2027 7175 6572 7927 3a20 284e       'query': (N
-000149b0: 6f6e 652c 2071 7565 7279 5f74 6578 7429  one, query_text)
-000149c0: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-000149d0: 7372 634c 616e 6727 3a20 284e 6f6e 652c  srcLang': (None,
-000149e0: 2066 726f 6d5f 6c61 6e67 7561 6765 292c   from_language),
-000149f0: 0d0a 2020 2020 2020 2020 2020 2020 2774  ..            't
-00014a00: 6774 4c61 6e67 273a 2028 4e6f 6e65 2c20  gtLang': (None, 
-00014a10: 746f 5f6c 616e 6775 6167 6529 2c0d 0a20  to_language),.. 
-00014a20: 2020 2020 2020 2020 2020 2027 5f63 7372             '_csr
-00014a30: 6627 3a20 284e 6f6e 652c 2073 656c 662e  f': (None, self.
-00014a40: 6373 7266 5f74 6f6b 656e 5b27 746f 6b65  csrf_token['toke
-00014a50: 6e27 5d29 2c0d 0a20 2020 2020 2020 2020  n']),..         
-00014a60: 2020 2027 646f 6d61 696e 273a 2028 4e6f     'domain': (No
-00014a70: 6e65 2c20 7365 6c66 2e70 726f 6665 7373  ne, self.profess
-00014a80: 696f 6e61 6c5f 6669 656c 645b 305d 292c  ional_field[0]),
-00014a90: 0d0a 2020 2020 2020 2020 7d20 2023 2043  ..        }  # C
-00014aa0: 6f6e 7465 6e74 2d54 7970 653a 206d 756c  ontent-Type: mul
-00014ab0: 7469 7061 7274 2f66 6f72 6d2d 6461 7461  tipart/form-data
-00014ac0: 0d0a 2020 2020 2020 2020 7220 3d20 7365  ..        r = se
-00014ad0: 6c66 2e73 6573 7369 6f6e 2e70 6f73 7428  lf.session.post(
-00014ae0: 7365 6c66 2e61 7069 5f75 726c 2c20 6669  self.api_url, fi
-00014af0: 6c65 733d 6669 6c65 735f 6461 7461 2c20  les=files_data, 
-00014b00: 6865 6164 6572 733d 7365 6c66 2e61 7069  headers=self.api
-00014b10: 5f68 6561 6465 7273 2c20 7469 6d65 6f75  _headers, timeou
-00014b20: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
-00014b30: 6573 3d70 726f 7869 6573 290d 0a20 2020  es=proxies)..   
-00014b40: 2020 2020 2072 2e72 6169 7365 5f66 6f72       r.raise_for
-00014b50: 5f73 7461 7475 7328 290d 0a20 2020 2020  _status()..     
-00014b60: 2020 2064 6174 6120 3d20 722e 6a73 6f6e     data = r.json
-00014b70: 2829 0d0a 2020 2020 2020 2020 7469 6d65  ()..        time
-00014b80: 2e73 6c65 6570 2873 6c65 6570 5f73 6563  .sleep(sleep_sec
-00014b90: 6f6e 6473 290d 0a20 2020 2020 2020 2073  onds)..        s
-00014ba0: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
-00014bb0: 2b3d 2031 0d0a 2020 2020 2020 2020 7265  += 1..        re
-00014bc0: 7475 726e 2064 6174 6120 6966 2069 735f  turn data if is_
-00014bd0: 6465 7461 696c 5f72 6573 756c 7420 656c  detail_result el
-00014be0: 7365 2064 6174 615b 2764 6174 6127 5d5b  se data['data'][
-00014bf0: 2774 7261 6e73 6c61 7465 5465 7874 275d  'translateText']
-00014c00: 0d0a 0d0a 0d0a 636c 6173 7320 4269 6e67  ......class Bing
-00014c10: 2854 7365 293a 0d0a 2020 2020 6465 6620  (Tse):..    def 
-00014c20: 5f5f 696e 6974 5f5f 2873 656c 662c 2073  __init__(self, s
-00014c30: 6572 7665 725f 7265 6769 6f6e 3d27 454e  erver_region='EN
-00014c40: 2729 3a0d 0a20 2020 2020 2020 2073 7570  '):..        sup
-00014c50: 6572 2829 2e5f 5f69 6e69 745f 5f28 290d  er().__init__().
-00014c60: 0a20 2020 2020 2020 2073 656c 662e 6265  .        self.be
-00014c70: 6769 6e5f 7469 6d65 203d 2074 696d 652e  gin_time = time.
-00014c80: 7469 6d65 2829 0d0a 2020 2020 2020 2020  time()..        
-00014c90: 7365 6c66 2e68 6f73 745f 7572 6c20 3d20  self.host_url = 
-00014ca0: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-00014cb0: 6c66 2e63 6e5f 686f 7374 5f75 726c 203d  lf.cn_host_url =
-00014cc0: 2027 6874 7470 733a 2f2f 636e 2e62 696e   'https://cn.bin
-00014cd0: 672e 636f 6d2f 5472 616e 736c 6174 6f72  g.com/Translator
-00014ce0: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
-00014cf0: 656e 5f68 6f73 745f 7572 6c20 3d20 2768  en_host_url = 'h
-00014d00: 7474 7073 3a2f 2f77 7777 2e62 696e 672e  ttps://www.bing.
-00014d10: 636f 6d2f 5472 616e 736c 6174 6f72 270d  com/Translator'.
-00014d20: 0a20 2020 2020 2020 2073 656c 662e 7365  .        self.se
-00014d30: 7276 6572 5f72 6567 696f 6e20 3d20 7365  rver_region = se
-00014d40: 7276 6572 5f72 6567 696f 6e0d 0a20 2020  rver_region..   
-00014d50: 2020 2020 2073 656c 662e 6170 695f 7572       self.api_ur
-00014d60: 6c20 3d20 4e6f 6e65 0d0a 2020 2020 2020  l = None..      
-00014d70: 2020 7365 6c66 2e68 6f73 745f 6865 6164    self.host_head
-00014d80: 6572 7320 3d20 4e6f 6e65 0d0a 2020 2020  ers = None..    
-00014d90: 2020 2020 7365 6c66 2e61 7069 5f68 6561      self.api_hea
-00014da0: 6465 7273 203d 204e 6f6e 650d 0a20 2020  ders = None..   
-00014db0: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-00014dc0: 6765 5f6d 6170 203d 204e 6f6e 650d 0a20  ge_map = None.. 
-00014dd0: 2020 2020 2020 2073 656c 662e 7365 7373         self.sess
-00014de0: 696f 6e20 3d20 4e6f 6e65 0d0a 2020 2020  ion = None..    
-00014df0: 2020 2020 7365 6c66 2e74 6b20 3d20 4e6f      self.tk = No
-00014e00: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
-00014e10: 2e69 675f 6969 6420 3d20 4e6f 6e65 0d0a  .ig_iid = None..
-00014e20: 2020 2020 2020 2020 7365 6c66 2e71 7565          self.que
-00014e30: 7279 5f63 6f75 6e74 203d 2030 0d0a 2020  ry_count = 0..  
-00014e40: 2020 2020 2020 7365 6c66 2e6f 7574 7075        self.outpu
-00014e50: 745f 6175 746f 203d 2027 6175 746f 2d64  t_auto = 'auto-d
-00014e60: 6574 6563 7427 0d0a 2020 2020 2020 2020  etect'..        
-00014e70: 7365 6c66 2e6f 7574 7075 745f 7a68 203d  self.output_zh =
-00014e80: 2027 7a68 2d48 616e 7327 0d0a 2020 2020   'zh-Hans'..    
-00014e90: 2020 2020 7365 6c66 2e69 6e70 7574 5f6c      self.input_l
-00014ea0: 696d 6974 203d 2069 6e74 2831 6533 290d  imit = int(1e3).
-00014eb0: 0a20 2020 2020 2020 2073 656c 662e 6465  .        self.de
-00014ec0: 6661 756c 745f 6672 6f6d 5f6c 616e 6775  fault_from_langu
-00014ed0: 6167 6520 3d20 7365 6c66 2e6f 7574 7075  age = self.outpu
-00014ee0: 745f 7a68 0d0a 0d0a 2020 2020 4054 7365  t_zh....    @Tse
-00014ef0: 2e64 6562 7567 5f6c 616e 6775 6167 655f  .debug_language_
-00014f00: 6d61 700d 0a20 2020 2064 6566 2067 6574  map..    def get
-00014f10: 5f6c 616e 6775 6167 655f 6d61 7028 7365  _language_map(se
-00014f20: 6c66 2c20 686f 7374 5f68 746d 6c3a 2073  lf, host_html: s
-00014f30: 7472 2c20 2a2a 6b77 6172 6773 3a20 4c61  tr, **kwargs: La
-00014f40: 6e67 4d61 704b 7761 7267 7354 7970 6529  ngMapKwargsType)
-00014f50: 202d 3e20 6469 6374 3a0d 0a20 2020 2020   -> dict:..     
-00014f60: 2020 2065 7420 3d20 6c78 6d6c 2e65 7472     et = lxml.etr
-00014f70: 6565 2e48 544d 4c28 686f 7374 5f68 746d  ee.HTML(host_htm
-00014f80: 6c29 0d0a 2020 2020 2020 2020 6c61 6e67  l)..        lang
-00014f90: 5f6c 6973 7420 3d20 6574 2e78 7061 7468  _list = et.xpath
-00014fa0: 2827 2f2f 2a5b 4069 643d 2274 7461 5f73  ('//*[@id="tta_s
-00014fb0: 7263 736c 225d 2f6f 7074 696f 6e2f 4076  rcsl"]/option/@v
-00014fc0: 616c 7565 2729 206f 7220 6574 2e78 7061  alue') or et.xpa
-00014fd0: 7468 2827 2f2f 2a5b 4069 643d 2274 5f73  th('//*[@id="t_s
-00014fe0: 7263 416c 6c4c 616e 6722 5d2f 6f70 7469  rcAllLang"]/opti
-00014ff0: 6f6e 2f40 7661 6c75 6527 290d 0a20 2020  on/@value')..   
-00015000: 2020 2020 206c 616e 675f 6c69 7374 203d       lang_list =
-00015010: 2073 6f72 7465 6428 6c69 7374 2873 6574   sorted(list(set
-00015020: 286c 616e 675f 6c69 7374 2929 290d 0a20  (lang_list))).. 
-00015030: 2020 2020 2020 2072 6574 7572 6e20 7b7d         return {}
-00015040: 2e66 726f 6d6b 6579 7328 6c61 6e67 5f6c  .fromkeys(lang_l
-00015050: 6973 742c 206c 616e 675f 6c69 7374 290d  ist, lang_list).
-00015060: 0a0d 0a20 2020 2064 6566 2067 6574 5f69  ...    def get_i
-00015070: 675f 6969 6428 7365 6c66 2c20 686f 7374  g_iid(self, host
-00015080: 5f68 746d 6c3a 2073 7472 2920 2d3e 2064  _html: str) -> d
-00015090: 6963 743a 0d0a 2020 2020 2020 2020 6574  ict:..        et
-000150a0: 203d 206c 786d 6c2e 6574 7265 652e 4854   = lxml.etree.HT
-000150b0: 4d4c 2868 6f73 745f 6874 6d6c 290d 0a20  ML(host_html).. 
-000150c0: 2020 2020 2020 2023 2069 6964 203d 2065         # iid = e
-000150d0: 742e 7870 6174 6828 272f 2f2a 5b40 6964  t.xpath('//*[@id
-000150e0: 3d22 7474 615f 6f75 7447 4443 6f6e 7422  ="tta_outGDCont"
-000150f0: 5d2f 4064 6174 612d 6969 6427 295b 305d  ]/@data-iid')[0]
-00015100: 2020 2320 6272 6f77 7365 7220 7061 6765    # browser page
-00015110: 2069 7320 6469 6666 6572 656e 7420 6265   is different be
-00015120: 7477 6565 6e20 7265 7175 6573 7420 7061  tween request pa
-00015130: 6765 2e0d 0a20 2020 2020 2020 2069 6964  ge...        iid
-00015140: 203d 2027 7472 616e 736c 6174 6f72 2e35   = 'translator.5
-00015150: 3032 3827 0d0a 2020 2020 2020 2020 6967  028'..        ig
-00015160: 203d 2072 652e 636f 6d70 696c 6528 2749   = re.compile('I
-00015170: 473a 2228 2e2a 3f29 2227 292e 6669 6e64  G:"(.*?)"').find
-00015180: 616c 6c28 686f 7374 5f68 746d 6c29 5b30  all(host_html)[0
-00015190: 5d0d 0a20 2020 2020 2020 2072 6574 7572  ]..        retur
-000151a0: 6e20 7b27 6969 6427 3a20 6969 642c 2027  n {'iid': iid, '
-000151b0: 6967 273a 2069 677d 0d0a 0d0a 2020 2020  ig': ig}....    
-000151c0: 6465 6620 6765 745f 746b 2873 656c 662c  def get_tk(self,
-000151d0: 2068 6f73 745f 6874 6d6c 3a20 7374 7229   host_html: str)
-000151e0: 202d 3e20 6469 6374 3a0d 0a20 2020 2020   -> dict:..     
-000151f0: 2020 2072 6573 756c 745f 7374 7220 3d20     result_str = 
-00015200: 7265 2e63 6f6d 7069 6c65 2827 7661 7220  re.compile('var 
-00015210: 7061 7261 6d73 5f41 6275 7365 5072 6576  params_AbusePrev
-00015220: 656e 7469 6f6e 4865 6c70 6572 203d 2028  entionHelper = (
-00015230: 2e2a 3f29 3b27 292e 6669 6e64 616c 6c28  .*?);').findall(
-00015240: 686f 7374 5f68 746d 6c29 5b30 5d0d 0a20  host_html)[0].. 
-00015250: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00015260: 6578 6563 6a73 2e65 7661 6c28 7265 7375  execjs.eval(resu
-00015270: 6c74 5f73 7472 290d 0a20 2020 2020 2020  lt_str)..       
-00015280: 2072 6574 7572 6e20 7b27 6b65 7927 3a20   return {'key': 
-00015290: 7265 7375 6c74 5b30 5d2c 2027 746f 6b65  result[0], 'toke
-000152a0: 6e27 3a20 7265 7375 6c74 5b31 5d7d 0d0a  n': result[1]}..
-000152b0: 0d0a 2020 2020 4054 7365 2e74 696d 655f  ..    @Tse.time_
-000152c0: 7374 6174 0d0a 2020 2020 4054 7365 2e63  stat..    @Tse.c
-000152d0: 6865 636b 5f71 7565 7279 0d0a 2020 2020  heck_query..    
-000152e0: 6465 6620 6269 6e67 5f61 7069 2873 656c  def bing_api(sel
-000152f0: 662c 2071 7565 7279 5f74 6578 743a 2073  f, query_text: s
-00015300: 7472 2c20 6672 6f6d 5f6c 616e 6775 6167  tr, from_languag
-00015310: 653a 2073 7472 203d 2027 6175 746f 272c  e: str = 'auto',
-00015320: 2074 6f5f 6c61 6e67 7561 6765 3a20 7374   to_language: st
-00015330: 7220 3d20 2765 6e27 2c20 2a2a 6b77 6172  r = 'en', **kwar
-00015340: 6773 3a20 4170 694b 7761 7267 7354 7970  gs: ApiKwargsTyp
-00015350: 6529 202d 3e20 556e 696f 6e5b 7374 722c  e) -> Union[str,
-00015360: 2064 6963 745d 3a0d 0a20 2020 2020 2020   dict]:..       
-00015370: 2022 2222 0d0a 2020 2020 2020 2020 6874   """..        ht
-00015380: 7470 733a 2f2f 6269 6e67 2e63 6f6d 2f54  tps://bing.com/T
-00015390: 7261 6e73 6c61 746f 722c 2068 7474 7073  ranslator, https
-000153a0: 3a2f 2f63 6e2e 6269 6e67 2e63 6f6d 2f54  ://cn.bing.com/T
-000153b0: 7261 6e73 6c61 746f 722e 0d0a 2020 2020  ranslator...    
-000153c0: 2020 2020 3a70 6172 616d 2071 7565 7279      :param query
-000153d0: 5f74 6578 743a 2073 7472 2c20 6d75 7374  _text: str, must
-000153e0: 2e0d 0a20 2020 2020 2020 203a 7061 7261  ...        :para
-000153f0: 6d20 6672 6f6d 5f6c 616e 6775 6167 653a  m from_language:
-00015400: 2073 7472 2c20 6465 6661 756c 7420 2761   str, default 'a
-00015410: 7574 6f27 2e0d 0a20 2020 2020 2020 203a  uto'...        :
-00015420: 7061 7261 6d20 746f 5f6c 616e 6775 6167  param to_languag
-00015430: 653a 2073 7472 2c20 6465 6661 756c 7420  e: str, default 
-00015440: 2765 6e27 2e0d 0a20 2020 2020 2020 203a  'en'...        :
-00015450: 7061 7261 6d20 2a2a 6b77 6172 6773 3a0d  param **kwargs:.
-00015460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015470: 203a 7061 7261 6d20 7469 6d65 6f75 743a   :param timeout:
-00015480: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
-00015490: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
-000154a0: 2020 2020 2020 203a 7061 7261 6d20 7072         :param pr
-000154b0: 6f78 6965 733a 2064 6963 742c 2064 6566  oxies: dict, def
-000154c0: 6175 6c74 204e 6f6e 652e 0d0a 2020 2020  ault None...    
-000154d0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-000154e0: 616d 2073 6c65 6570 5f73 6563 6f6e 6473  am sleep_seconds
-000154f0: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
-00015500: 2030 2e0d 0a20 2020 2020 2020 2020 2020   0...           
-00015510: 2020 2020 203a 7061 7261 6d20 6973 5f64       :param is_d
-00015520: 6574 6169 6c5f 7265 7375 6c74 3a20 626f  etail_result: bo
-00015530: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
-00015540: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-00015550: 2020 2020 3a70 6172 616d 2069 665f 6967      :param if_ig
-00015560: 6e6f 7265 5f6c 696d 6974 5f6f 665f 6c65  nore_limit_of_le
-00015570: 6e67 7468 3a20 626f 6f6c 2c20 6465 6661  ngth: bool, defa
-00015580: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-00015590: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-000155a0: 616d 206c 696d 6974 5f6f 665f 6c65 6e67  am limit_of_leng
-000155b0: 7468 3a20 696e 742c 2064 6566 6175 6c74  th: int, default
-000155c0: 2032 3030 3030 2e0d 0a20 2020 2020 2020   20000...       
-000155d0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-000155e0: 6966 5f69 676e 6f72 655f 656d 7074 795f  if_ignore_empty_
-000155f0: 7175 6572 793a 2062 6f6f 6c2c 2064 6566  query: bool, def
-00015600: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
-00015610: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00015620: 7261 6d20 7570 6461 7465 5f73 6573 7369  ram update_sessi
-00015630: 6f6e 5f61 6674 6572 5f66 7265 713a 2069  on_after_freq: i
-00015640: 6e74 2c20 6465 6661 756c 7420 3130 3030  nt, default 1000
-00015650: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00015660: 2020 203a 7061 7261 6d20 7570 6461 7465     :param update
-00015670: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
-00015680: 6563 6f6e 6473 3a20 666c 6f61 742c 2064  econds: float, d
-00015690: 6566 6175 6c74 2031 3530 302e 0d0a 2020  efault 1500...  
-000156a0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-000156b0: 6172 616d 2069 665f 7368 6f77 5f74 696d  aram if_show_tim
-000156c0: 655f 7374 6174 3a20 626f 6f6c 2c20 6465  e_stat: bool, de
-000156d0: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
-000156e0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-000156f0: 6172 616d 2073 686f 775f 7469 6d65 5f73  aram show_time_s
-00015700: 7461 745f 7072 6563 6973 696f 6e3a 2069  tat_precision: i
-00015710: 6e74 2c20 6465 6661 756c 7420 322e 0d0a  nt, default 2...
-00015720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015730: 3a70 6172 616d 2069 665f 7072 696e 745f  :param if_print_
-00015740: 7761 726e 696e 673a 2062 6f6f 6c2c 2064  warning: bool, d
-00015750: 6566 6175 6c74 2054 7275 652e 0d0a 2020  efault True...  
-00015760: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00015770: 6172 616d 2069 665f 7573 655f 636e 5f68  aram if_use_cn_h
-00015780: 6f73 743a 2062 6f6f 6c2c 2064 6566 6175  ost: bool, defau
-00015790: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
-000157a0: 2020 3a72 6574 7572 6e3a 2073 7472 206f    :return: str o
-000157b0: 7220 6469 6374 0d0a 2020 2020 2020 2020  r dict..        
-000157c0: 2222 220d 0a0d 0a20 2020 2020 2020 2075  """....        u
-000157d0: 7365 5f63 6e5f 636f 6e64 6974 696f 6e20  se_cn_condition 
-000157e0: 3d20 6b77 6172 6773 2e67 6574 2827 6966  = kwargs.get('if
-000157f0: 5f75 7365 5f63 6e5f 686f 7374 272c 204e  _use_cn_host', N
-00015800: 6f6e 6529 206f 7220 7365 6c66 2e73 6572  one) or self.ser
-00015810: 7665 725f 7265 6769 6f6e 203d 3d20 2743  ver_region == 'C
-00015820: 4e27 0d0a 2020 2020 2020 2020 7365 6c66  N'..        self
-00015830: 2e68 6f73 745f 7572 6c20 3d20 7365 6c66  .host_url = self
-00015840: 2e63 6e5f 686f 7374 5f75 726c 2069 6620  .cn_host_url if 
-00015850: 7573 655f 636e 5f63 6f6e 6469 7469 6f6e  use_cn_condition
-00015860: 2065 6c73 6520 7365 6c66 2e65 6e5f 686f   else self.en_ho
-00015870: 7374 5f75 726c 0d0a 2020 2020 2020 2020  st_url..        
-00015880: 7365 6c66 2e61 7069 5f75 726c 203d 2073  self.api_url = s
-00015890: 656c 662e 686f 7374 5f75 726c 2e72 6570  elf.host_url.rep
-000158a0: 6c61 6365 2827 5472 616e 736c 6174 6f72  lace('Translator
-000158b0: 272c 2027 7474 7261 6e73 6c61 7465 7633  ', 'ttranslatev3
-000158c0: 2729 0d0a 2020 2020 2020 2020 7365 6c66  ')..        self
-000158d0: 2e68 6f73 745f 6865 6164 6572 7320 3d20  .host_headers = 
-000158e0: 7365 6c66 2e67 6574 5f68 6561 6465 7273  self.get_headers
-000158f0: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
-00015900: 6966 5f61 7069 3d46 616c 7365 290d 0a20  if_api=False).. 
-00015910: 2020 2020 2020 2073 656c 662e 6170 695f         self.api_
-00015920: 6865 6164 6572 7320 3d20 7365 6c66 2e67  headers = self.g
-00015930: 6574 5f68 6561 6465 7273 2873 656c 662e  et_headers(self.
-00015940: 686f 7374 5f75 726c 2c20 6966 5f61 7069  host_url, if_api
-00015950: 3d54 7275 6529 0d0a 0d0a 2020 2020 2020  =True)....      
-00015960: 2020 7469 6d65 6f75 7420 3d20 6b77 6172    timeout = kwar
-00015970: 6773 2e67 6574 2827 7469 6d65 6f75 7427  gs.get('timeout'
-00015980: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
-00015990: 2070 726f 7869 6573 203d 206b 7761 7267   proxies = kwarg
-000159a0: 732e 6765 7428 2770 726f 7869 6573 272c  s.get('proxies',
-000159b0: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
-000159c0: 736c 6565 705f 7365 636f 6e64 7320 3d20  sleep_seconds = 
-000159d0: 6b77 6172 6773 2e67 6574 2827 736c 6565  kwargs.get('slee
-000159e0: 705f 7365 636f 6e64 7327 2c20 3029 0d0a  p_seconds', 0)..
-000159f0: 2020 2020 2020 2020 6966 5f70 7269 6e74          if_print
-00015a00: 5f77 6172 6e69 6e67 203d 206b 7761 7267  _warning = kwarg
-00015a10: 732e 6765 7428 2769 665f 7072 696e 745f  s.get('if_print_
-00015a20: 7761 726e 696e 6727 2c20 5472 7565 290d  warning', True).
-00015a30: 0a20 2020 2020 2020 2069 735f 6465 7461  .        is_deta
-00015a40: 696c 5f72 6573 756c 7420 3d20 6b77 6172  il_result = kwar
-00015a50: 6773 2e67 6574 2827 6973 5f64 6574 6169  gs.get('is_detai
-00015a60: 6c5f 7265 7375 6c74 272c 2046 616c 7365  l_result', False
-00015a70: 290d 0a20 2020 2020 2020 2075 7064 6174  )..        updat
-00015a80: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
-00015a90: 6672 6571 203d 206b 7761 7267 732e 6765  freq = kwargs.ge
-00015aa0: 7428 2775 7064 6174 655f 7365 7373 696f  t('update_sessio
-00015ab0: 6e5f 6166 7465 725f 6672 6571 272c 2073  n_after_freq', s
-00015ac0: 656c 662e 6465 6661 756c 745f 7365 7373  elf.default_sess
-00015ad0: 696f 6e5f 6672 6571 290d 0a20 2020 2020  ion_freq)..     
-00015ae0: 2020 2075 7064 6174 655f 7365 7373 696f     update_sessio
-00015af0: 6e5f 6166 7465 725f 7365 636f 6e64 7320  n_after_seconds 
-00015b00: 3d20 6b77 6172 6773 2e67 6574 2827 7570  = kwargs.get('up
-00015b10: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-00015b20: 6572 5f73 6563 6f6e 6473 272c 2073 656c  er_seconds', sel
-00015b30: 662e 6465 6661 756c 745f 7365 7373 696f  f.default_sessio
-00015b40: 6e5f 7365 636f 6e64 7329 0d0a 2020 2020  n_seconds)..    
-00015b50: 2020 2020 7365 6c66 2e63 6865 636b 5f69      self.check_i
-00015b60: 6e70 7574 5f6c 696d 6974 2871 7565 7279  nput_limit(query
-00015b70: 5f74 6578 742c 2073 656c 662e 696e 7075  _text, self.inpu
-00015b80: 745f 6c69 6d69 7429 0d0a 0d0a 2020 2020  t_limit)....    
-00015b90: 2020 2020 6e6f 745f 7570 6461 7465 5f63      not_update_c
-00015ba0: 6f6e 645f 6672 6571 203d 2031 2069 6620  ond_freq = 1 if 
-00015bb0: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
-00015bc0: 2025 2075 7064 6174 655f 7365 7373 696f   % update_sessio
-00015bd0: 6e5f 6166 7465 725f 6672 6571 2021 3d20  n_after_freq != 
-00015be0: 3020 656c 7365 2030 0d0a 2020 2020 2020  0 else 0..      
-00015bf0: 2020 6e6f 745f 7570 6461 7465 5f63 6f6e    not_update_con
-00015c00: 645f 7469 6d65 203d 2031 2069 6620 7469  d_time = 1 if ti
-00015c10: 6d65 2e74 696d 6528 2920 2d20 7365 6c66  me.time() - self
-00015c20: 2e62 6567 696e 5f74 696d 6520 3c20 7570  .begin_time < up
-00015c30: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-00015c40: 6572 5f73 6563 6f6e 6473 2065 6c73 6520  er_seconds else 
-00015c50: 300d 0a20 2020 2020 2020 2069 6620 6e6f  0..        if no
-00015c60: 7420 2873 656c 662e 7365 7373 696f 6e20  t (self.session 
-00015c70: 616e 6420 7365 6c66 2e6c 616e 6775 6167  and self.languag
-00015c80: 655f 6d61 7020 616e 6420 6e6f 745f 7570  e_map and not_up
-00015c90: 6461 7465 5f63 6f6e 645f 6672 6571 2061  date_cond_freq a
-00015ca0: 6e64 206e 6f74 5f75 7064 6174 655f 636f  nd not_update_co
-00015cb0: 6e64 5f74 696d 6520 616e 6420 7365 6c66  nd_time and self
-00015cc0: 2e74 6b20 616e 6420 7365 6c66 2e69 675f  .tk and self.ig_
-00015cd0: 6969 6429 3a0d 0a20 2020 2020 2020 2020  iid):..         
-00015ce0: 2020 2073 656c 662e 6265 6769 6e5f 7469     self.begin_ti
-00015cf0: 6d65 203d 2074 696d 652e 7469 6d65 2829  me = time.time()
-00015d00: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00015d10: 6c66 2e73 6573 7369 6f6e 203d 2072 6571  lf.session = req
-00015d20: 7565 7374 732e 5365 7373 696f 6e28 290d  uests.Session().
-00015d30: 0a20 2020 2020 2020 2020 2020 2068 6f73  .            hos
-00015d40: 745f 6874 6d6c 203d 2073 656c 662e 7365  t_html = self.se
-00015d50: 7373 696f 6e2e 6765 7428 7365 6c66 2e68  ssion.get(self.h
-00015d60: 6f73 745f 7572 6c2c 2068 6561 6465 7273  ost_url, headers
-00015d70: 3d73 656c 662e 686f 7374 5f68 6561 6465  =self.host_heade
-00015d80: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
-00015d90: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
-00015da0: 7869 6573 292e 7465 7874 0d0a 2020 2020  xies).text..    
-00015db0: 2020 2020 2020 2020 7365 6c66 2e74 6b20          self.tk 
-00015dc0: 3d20 7365 6c66 2e67 6574 5f74 6b28 686f  = self.get_tk(ho
-00015dd0: 7374 5f68 746d 6c29 0d0a 2020 2020 2020  st_html)..      
-00015de0: 2020 2020 2020 7365 6c66 2e69 675f 6969        self.ig_ii
-00015df0: 6420 3d20 7365 6c66 2e67 6574 5f69 675f  d = self.get_ig_
-00015e00: 6969 6428 686f 7374 5f68 746d 6c29 0d0a  iid(host_html)..
-00015e10: 2020 2020 2020 2020 2020 2020 6465 6275              debu
-00015e20: 675f 6c61 6e67 5f6b 7761 7267 7320 3d20  g_lang_kwargs = 
-00015e30: 7365 6c66 2e64 6562 7567 5f6c 616e 675f  self.debug_lang_
-00015e40: 6b77 6172 6773 2866 726f 6d5f 6c61 6e67  kwargs(from_lang
-00015e50: 7561 6765 2c20 746f 5f6c 616e 6775 6167  uage, to_languag
-00015e60: 652c 2073 656c 662e 6465 6661 756c 745f  e, self.default_
-00015e70: 6672 6f6d 5f6c 616e 6775 6167 652c 2069  from_language, i
-00015e80: 665f 7072 696e 745f 7761 726e 696e 6729  f_print_warning)
-00015e90: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00015ea0: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
-00015eb0: 3d20 7365 6c66 2e67 6574 5f6c 616e 6775  = self.get_langu
-00015ec0: 6167 655f 6d61 7028 686f 7374 5f68 746d  age_map(host_htm
-00015ed0: 6c2c 202a 2a64 6562 7567 5f6c 616e 675f  l, **debug_lang_
-00015ee0: 6b77 6172 6773 290d 0a0d 0a20 2020 2020  kwargs)....     
-00015ef0: 2020 2066 726f 6d5f 6c61 6e67 7561 6765     from_language
-00015f00: 2c20 746f 5f6c 616e 6775 6167 6520 3d20  , to_language = 
-00015f10: 7365 6c66 2e63 6865 636b 5f6c 616e 6775  self.check_langu
-00015f20: 6167 6528 6672 6f6d 5f6c 616e 6775 6167  age(from_languag
-00015f30: 652c 2074 6f5f 6c61 6e67 7561 6765 2c20  e, to_language, 
-00015f40: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
-00015f50: 702c 0d0a 2020 2020 2020 2020 2020 2020  p,..            
-00015f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015f80: 2020 2020 2020 2020 2020 2020 206f 7574               out
-00015f90: 7075 745f 7a68 3d73 656c 662e 6f75 7470  put_zh=self.outp
-00015fa0: 7574 5f7a 682c 206f 7574 7075 745f 6175  ut_zh, output_au
-00015fb0: 746f 3d73 656c 662e 6f75 7470 7574 5f61  to=self.output_a
-00015fc0: 7574 6f29 0d0a 0d0a 2020 2020 2020 2020  uto)....        
-00015fd0: 7061 796c 6f61 6420 3d20 7b0d 0a20 2020  payload = {..   
-00015fe0: 2020 2020 2020 2020 2027 7465 7874 273a           'text':
-00015ff0: 2071 7565 7279 5f74 6578 742c 0d0a 2020   query_text,..  
-00016000: 2020 2020 2020 2020 2020 2766 726f 6d4c            'fromL
-00016010: 616e 6727 3a20 6672 6f6d 5f6c 616e 6775  ang': from_langu
-00016020: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
-00016030: 2020 2774 6f27 3a20 746f 5f6c 616e 6775    'to': to_langu
-00016040: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
-00016050: 2020 2774 7279 4665 7463 6869 6e67 4765    'tryFetchingGe
-00016060: 6e64 6572 4465 6269 6173 6564 5472 616e  nderDebiasedTran
-00016070: 736c 6174 696f 6e73 273a 2027 7472 7565  slations': 'true
-00016080: 270d 0a20 2020 2020 2020 207d 0d0a 2020  '..        }..  
-00016090: 2020 2020 2020 7061 796c 6f61 6420 3d20        payload = 
-000160a0: 7b2a 2a70 6179 6c6f 6164 2c20 2a2a 7365  {**payload, **se
-000160b0: 6c66 2e74 6b7d 0d0a 2020 2020 2020 2020  lf.tk}..        
-000160c0: 6170 695f 7572 6c5f 7061 7261 6d20 3d20  api_url_param = 
-000160d0: 6627 3f69 7356 6572 7469 6361 6c3d 3126  f'?isVertical=1&
-000160e0: 2649 473d 7b73 656c 662e 6967 5f69 6964  &IG={self.ig_iid
-000160f0: 5b22 6967 225d 7d26 4949 443d 7b73 656c  ["ig"]}&IID={sel
-00016100: 662e 6967 5f69 6964 5b22 6969 6422 5d7d  f.ig_iid["iid"]}
-00016110: 270d 0a20 2020 2020 2020 2061 7069 5f75  '..        api_u
-00016120: 726c 203d 2027 272e 6a6f 696e 285b 7365  rl = ''.join([se
-00016130: 6c66 2e61 7069 5f75 726c 2c20 6170 695f  lf.api_url, api_
-00016140: 7572 6c5f 7061 7261 6d5d 290d 0a20 2020  url_param])..   
-00016150: 2020 2020 2072 203d 2073 656c 662e 7365       r = self.se
-00016160: 7373 696f 6e2e 706f 7374 2861 7069 5f75  ssion.post(api_u
-00016170: 726c 2c20 6865 6164 6572 733d 7365 6c66  rl, headers=self
-00016180: 2e68 6f73 745f 6865 6164 6572 732c 2064  .host_headers, d
-00016190: 6174 613d 7061 796c 6f61 642c 2074 696d  ata=payload, tim
-000161a0: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
-000161b0: 6f78 6965 733d 7072 6f78 6965 7329 0d0a  oxies=proxies)..
-000161c0: 2020 2020 2020 2020 722e 7261 6973 655f          r.raise_
-000161d0: 666f 725f 7374 6174 7573 2829 0d0a 2020  for_status()..  
-000161e0: 2020 2020 2020 6461 7461 203d 2072 2e6a        data = r.j
-000161f0: 736f 6e28 290d 0a20 2020 2020 2020 2074  son()..        t
-00016200: 696d 652e 736c 6565 7028 736c 6565 705f  ime.sleep(sleep_
-00016210: 7365 636f 6e64 7329 0d0a 2020 2020 2020  seconds)..      
-00016220: 2020 7365 6c66 2e71 7565 7279 5f63 6f75    self.query_cou
-00016230: 6e74 202b 3d20 310d 0a20 2020 2020 2020  nt += 1..       
-00016240: 2072 6574 7572 6e20 6461 7461 5b30 5d20   return data[0] 
-00016250: 6966 2069 735f 6465 7461 696c 5f72 6573  if is_detail_res
-00016260: 756c 7420 656c 7365 2064 6174 615b 305d  ult else data[0]
-00016270: 5b27 7472 616e 736c 6174 696f 6e73 275d  ['translations']
-00016280: 5b30 5d5b 2774 6578 7427 5d0d 0a0d 0a0d  [0]['text'].....
-00016290: 0a63 6c61 7373 2053 6f67 6f75 2854 7365  .class Sogou(Tse
-000162a0: 293a 0d0a 2020 2020 6465 6620 5f5f 696e  ):..    def __in
-000162b0: 6974 5f5f 2873 656c 6629 3a0d 0a20 2020  it__(self):..   
-000162c0: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
-000162d0: 6e69 745f 5f28 290d 0a20 2020 2020 2020  nit__()..       
-000162e0: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
-000162f0: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
-00016300: 2020 2020 2020 2020 7365 6c66 2e68 6f73          self.hos
-00016310: 745f 7572 6c20 3d20 2768 7474 7073 3a2f  t_url = 'https:/
-00016320: 2f66 616e 7969 2e73 6f67 6f75 2e63 6f6d  /fanyi.sogou.com
-00016330: 2f74 6578 7427 0d0a 2020 2020 2020 2020  /text'..        
-00016340: 7365 6c66 2e61 7069 5f75 726c 203d 2027  self.api_url = '
-00016350: 6874 7470 733a 2f2f 6661 6e79 692e 736f  https://fanyi.so
-00016360: 676f 752e 636f 6d2f 6170 692f 7472 616e  gou.com/api/tran
-00016370: 7370 632f 7465 7874 2f72 6573 756c 7427  spc/text/result'
-00016380: 0d0a 2020 2020 2020 2020 7365 6c66 2e67  ..        self.g
-00016390: 6574 5f6c 616e 6775 6167 655f 6f6c 645f  et_language_old_
-000163a0: 7572 6c20 3d20 2768 7474 7073 3a2f 2f73  url = 'https://s
-000163b0: 6561 7263 682e 736f 676f 7563 646e 2e63  earch.sogoucdn.c
-000163c0: 6f6d 2f74 7261 6e73 6c61 7465 2f70 632f  om/translate/pc/
-000163d0: 7374 6174 6963 2f6a 732f 6170 702e 3730  static/js/app.70
-000163e0: 3136 6530 6466 2e6a 7327 0d0a 2020 2020  16e0df.js'..    
-000163f0: 2020 2020 7365 6c66 2e67 6574 5f6c 616e      self.get_lan
-00016400: 6775 6167 655f 7061 7474 6572 6e20 3d20  guage_pattern = 
-00016410: 272f 2f73 6561 7263 682e 736f 676f 7563  '//search.sogouc
-00016420: 646e 2e63 6f6d 2f74 7261 6e73 6c61 7465  dn.com/translate
-00016430: 2f70 632f 7374 6174 6963 2f6a 732f 7665  /pc/static/js/ve
-00016440: 6e64 6f72 732e 282e 2a3f 292e 6a73 270d  ndors.(.*?).js'.
-00016450: 0a20 2020 2020 2020 2073 656c 662e 6765  .        self.ge
-00016460: 745f 6c61 6e67 7561 6765 5f75 726c 203d  t_language_url =
-00016470: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
-00016480: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
-00016490: 203d 2073 656c 662e 6765 745f 6865 6164   = self.get_head
-000164a0: 6572 7328 7365 6c66 2e68 6f73 745f 7572  ers(self.host_ur
-000164b0: 6c2c 2069 665f 6170 693d 4661 6c73 6529  l, if_api=False)
-000164c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-000164d0: 7069 5f68 6561 6465 7273 203d 2073 656c  pi_headers = sel
-000164e0: 662e 6765 745f 6865 6164 6572 7328 7365  f.get_headers(se
-000164f0: 6c66 2e68 6f73 745f 7572 6c2c 2069 665f  lf.host_url, if_
-00016500: 6170 693d 5472 7565 290d 0a20 2020 2020  api=True)..     
-00016510: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
-00016520: 5f6d 6170 203d 204e 6f6e 650d 0a20 2020  _map = None..   
-00016530: 2020 2020 2073 656c 662e 7575 6964 203d       self.uuid =
-00016540: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
-00016550: 656c 662e 7365 7373 696f 6e20 3d20 4e6f  elf.session = No
-00016560: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
-00016570: 2e71 7565 7279 5f63 6f75 6e74 203d 2030  .query_count = 0
-00016580: 0d0a 2020 2020 2020 2020 7365 6c66 2e6f  ..        self.o
-00016590: 7574 7075 745f 7a68 203d 2027 7a68 2d43  utput_zh = 'zh-C
-000165a0: 4853 270d 0a20 2020 2020 2020 2073 656c  HS'..        sel
-000165b0: 662e 696e 7075 745f 6c69 6d69 7420 3d20  f.input_limit = 
-000165c0: 696e 7428 3565 3329 0d0a 2020 2020 2020  int(5e3)..      
-000165d0: 2020 7365 6c66 2e64 6566 6175 6c74 5f66    self.default_f
-000165e0: 726f 6d5f 6c61 6e67 7561 6765 203d 2073  rom_language = s
-000165f0: 656c 662e 6f75 7470 7574 5f7a 680d 0a0d  elf.output_zh...
-00016600: 0a20 2020 2040 5473 652e 6465 6275 675f  .    @Tse.debug_
-00016610: 6c61 6e67 7561 6765 5f6d 6170 0d0a 2020  language_map..  
-00016620: 2020 6465 6620 6765 745f 6c61 6e67 7561    def get_langua
-00016630: 6765 5f6d 6170 2873 656c 662c 2068 6f73  ge_map(self, hos
-00016640: 745f 6874 6d6c 3a20 7374 722c 206c 616e  t_html: str, lan
-00016650: 675f 6f6c 645f 7572 6c3a 2073 7472 2c20  g_old_url: str, 
-00016660: 7373 3a20 5365 7373 696f 6e54 7970 652c  ss: SessionType,
-00016670: 2074 696d 656f 7574 3a20 4f70 7469 6f6e   timeout: Option
-00016680: 616c 5b66 6c6f 6174 5d2c 2070 726f 7869  al[float], proxi
-00016690: 6573 3a20 4f70 7469 6f6e 616c 5b64 6963  es: Optional[dic
-000166a0: 745d 2c20 2a2a 6b77 6172 6773 3a20 4c61  t], **kwargs: La
-000166b0: 6e67 4d61 704b 7761 7267 7354 7970 6529  ngMapKwargsType)
-000166c0: 202d 3e20 6469 6374 3a0d 0a20 2020 2020   -> dict:..     
-000166d0: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-000166e0: 2020 2020 2069 6620 6e6f 7420 7365 6c66       if not self
-000166f0: 2e67 6574 5f6c 616e 6775 6167 655f 7572  .get_language_ur
-00016700: 6c3a 0d0a 2020 2020 2020 2020 2020 2020  l:..            
-00016710: 2020 2020 6c61 6e67 5f75 726c 5f70 6174      lang_url_pat
-00016720: 6820 3d20 7265 2e63 6f6d 7069 6c65 2873  h = re.compile(s
-00016730: 656c 662e 6765 745f 6c61 6e67 7561 6765  elf.get_language
-00016740: 5f70 6174 7465 726e 292e 7365 6172 6368  _pattern).search
-00016750: 2868 6f73 745f 6874 6d6c 292e 6772 6f75  (host_html).grou
-00016760: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
-00016770: 2020 2020 2073 656c 662e 6765 745f 6c61       self.get_la
-00016780: 6e67 7561 6765 5f75 726c 203d 2027 272e  nguage_url = ''.
-00016790: 6a6f 696e 285b 2768 7474 7073 3a27 2c20  join(['https:', 
-000167a0: 6c61 6e67 5f75 726c 5f70 6174 685d 290d  lang_url_path]).
-000167b0: 0a20 2020 2020 2020 2020 2020 206c 616e  .            lan
-000167c0: 675f 6874 6d6c 203d 2073 732e 6765 7428  g_html = ss.get(
-000167d0: 7365 6c66 2e67 6574 5f6c 616e 6775 6167  self.get_languag
-000167e0: 655f 7572 6c2c 2068 6561 6465 7273 3d73  e_url, headers=s
-000167f0: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
-00016800: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
-00016810: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
-00016820: 6573 292e 7465 7874 0d0a 2020 2020 2020  es).text..      
-00016830: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
-00016840: 2020 2020 2020 206c 616e 675f 6874 6d6c         lang_html
-00016850: 203d 2073 732e 6765 7428 6c61 6e67 5f6f   = ss.get(lang_o
-00016860: 6c64 5f75 726c 2c20 6865 6164 6572 733d  ld_url, headers=
-00016870: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
-00016880: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
-00016890: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
-000168a0: 6965 7329 2e74 6578 740d 0a0d 0a20 2020  ies).text....   
-000168b0: 2020 2020 206c 616e 675f 6c69 7374 5f73       lang_list_s
-000168c0: 7472 203d 2072 652e 636f 6d70 696c 6528  tr = re.compile(
-000168d0: 2722 414c 4c22 3a5c 5c5b 282e 2a3f 295d  '"ALL":\\[(.*?)]
-000168e0: 2729 2e73 6561 7263 6828 6c61 6e67 5f68  ').search(lang_h
-000168f0: 746d 6c29 2e67 726f 7570 2829 2e72 6570  tml).group().rep
-00016900: 6c61 6365 2827 2130 272c 2027 3127 292e  lace('!0', '1').
-00016910: 7265 706c 6163 6528 2721 3127 2c20 2730  replace('!1', '0
-00016920: 2729 5b36 3a5d 0d0a 2020 2020 2020 2020  ')[6:]..        
-00016930: 6c61 6e67 5f69 7465 6d5f 6c69 7374 203d  lang_item_list =
-00016940: 206a 736f 6e2e 6c6f 6164 7328 6c61 6e67   json.loads(lang
-00016950: 5f6c 6973 745f 7374 7229 0d0a 2020 2020  _list_str)..    
-00016960: 2020 2020 6c61 6e67 5f6c 6973 7420 3d20      lang_list = 
-00016970: 5b69 7465 6d5b 276c 616e 6727 5d20 666f  [item['lang'] fo
-00016980: 7220 6974 656d 2069 6e20 6c61 6e67 5f69  r item in lang_i
-00016990: 7465 6d5f 6c69 7374 2069 6620 6974 656d  tem_list if item
-000169a0: 5b27 706c 6179 275d 203d 3d20 315d 0d0a  ['play'] == 1]..
-000169b0: 2020 2020 2020 2020 7265 7475 726e 207b          return {
-000169c0: 7d2e 6672 6f6d 6b65 7973 286c 616e 675f  }.fromkeys(lang_
-000169d0: 6c69 7374 2c20 6c61 6e67 5f6c 6973 7429  list, lang_list)
-000169e0: 0d0a 0d0a 2020 2020 2320 6465 6620 6765  ....    # def ge
-000169f0: 745f 7575 6964 2873 656c 6629 202d 3e20  t_uuid(self) -> 
-00016a00: 7374 723a 0d0a 2020 2020 2320 2020 2020  str:..    #     
-00016a10: 5f75 7569 6420 3d20 2727 0d0a 2020 2020  _uuid = ''..    
-00016a20: 2320 2020 2020 666f 7220 6920 696e 2072  #     for i in r
-00016a30: 616e 6765 2838 293a 0d0a 2020 2020 2320  ange(8):..    # 
-00016a40: 2020 2020 2020 2020 5f75 7569 6420 2b3d          _uuid +=
-00016a50: 2068 6578 2869 6e74 2836 3535 3336 202a   hex(int(65536 *
-00016a60: 2028 3120 2b20 3029 2929 5b32 3a5d 5b31   (1 + 0)))[2:][1
-00016a70: 3a5d 0d0a 2020 2020 2320 2020 2020 2020  :]..    #       
-00016a80: 2020 6966 2069 2069 6e20 7261 6e67 6528    if i in range(
-00016a90: 312c 2035 293a 0d0a 2020 2020 2320 2020  1, 5):..    #   
-00016aa0: 2020 2020 2020 2020 2020 5f75 7569 6420            _uuid 
-00016ab0: 2b3d 2027 2d27 0d0a 2020 2020 2320 2020  += '-'..    #   
-00016ac0: 2020 7265 7475 726e 205f 7575 6964 0d0a    return _uuid..
-00016ad0: 0d0a 2020 2020 6465 6620 6765 745f 666f  ..    def get_fo
-00016ae0: 726d 2873 656c 662c 2071 7565 7279 5f74  rm(self, query_t
-00016af0: 6578 743a 2073 7472 2c20 6672 6f6d 5f6c  ext: str, from_l
-00016b00: 616e 6775 6167 653a 2073 7472 2c20 746f  anguage: str, to
-00016b10: 5f6c 616e 6775 6167 653a 2073 7472 2c20  _language: str, 
-00016b20: 7569 643a 2073 7472 2920 2d3e 2064 6963  uid: str) -> dic
-00016b30: 743a 0d0a 2020 2020 2020 2020 7369 676e  t:..        sign
-00016b40: 5f74 6578 7420 3d20 2222 202b 2066 726f  _text = "" + fro
-00016b50: 6d5f 6c61 6e67 7561 6765 202b 2074 6f5f  m_language + to_
-00016b60: 6c61 6e67 7561 6765 202b 2071 7565 7279  language + query
-00016b70: 5f74 6578 7420 2b20 2731 3039 3938 3434  _text + '1099844
-00016b80: 3537 2720 2023 2077 696e 646f 772e 5f5f  57'  # window.__
-00016b90: 494e 4954 4941 4c5f 5354 4154 455f 5f2e  INITIAL_STATE__.
-00016ba0: 636f 6d6d 6f6e 2e43 4f4e 4649 472e 7365  common.CONFIG.se
-00016bb0: 6372 6574 436f 6465 0d0a 2020 2020 2020  cretCode..      
-00016bc0: 2020 7369 676e 203d 2068 6173 686c 6962    sign = hashlib
-00016bd0: 2e6d 6435 2873 6967 6e5f 7465 7874 2e65  .md5(sign_text.e
-00016be0: 6e63 6f64 6528 2929 2e68 6578 6469 6765  ncode()).hexdige
-00016bf0: 7374 2829 0d0a 2020 2020 2020 2020 666f  st()..        fo
-00016c00: 726d 203d 207b 0d0a 2020 2020 2020 2020  rm = {..        
-00016c10: 2020 2020 2266 726f 6d22 3a20 6672 6f6d      "from": from
-00016c20: 5f6c 616e 6775 6167 652c 0d0a 2020 2020  _language,..    
-00016c30: 2020 2020 2020 2020 2274 6f22 3a20 746f          "to": to
-00016c40: 5f6c 616e 6775 6167 652c 0d0a 2020 2020  _language,..    
-00016c50: 2020 2020 2020 2020 2274 6578 7422 3a20          "text": 
-00016c60: 7175 6572 795f 7465 7874 2c0d 0a20 2020  query_text,..   
-00016c70: 2020 2020 2020 2020 2022 7575 6964 223a           "uuid":
-00016c80: 2075 6964 2c0d 0a20 2020 2020 2020 2020   uid,..         
-00016c90: 2020 2022 7322 3a20 7369 676e 2c0d 0a20     "s": sign,.. 
-00016ca0: 2020 2020 2020 2020 2020 2022 636c 6965             "clie
-00016cb0: 6e74 223a 2022 7063 222c 2020 2320 7761  nt": "pc",  # wa
-00016cc0: 700d 0a20 2020 2020 2020 2020 2020 2022  p..            "
-00016cd0: 6672 223a 2022 6272 6f77 7365 725f 7063  fr": "browser_pc
-00016ce0: 222c 2020 2320 6272 6f77 7365 725f 7761  ",  # browser_wa
-00016cf0: 700d 0a20 2020 2020 2020 2020 2020 2022  p..            "
-00016d00: 6e65 6564 5163 223a 2022 3122 2c0d 0a20  needQc": "1",.. 
-00016d10: 2020 2020 2020 207d 0d0a 2020 2020 2020         }..      
-00016d20: 2020 7265 7475 726e 2066 6f72 6d0d 0a0d    return form...
-00016d30: 0a20 2020 2040 5473 652e 7469 6d65 5f73  .    @Tse.time_s
-00016d40: 7461 740d 0a20 2020 2040 5473 652e 6368  tat..    @Tse.ch
-00016d50: 6563 6b5f 7175 6572 790d 0a20 2020 2064  eck_query..    d
-00016d60: 6566 2073 6f67 6f75 5f61 7069 2873 656c  ef sogou_api(sel
-00016d70: 662c 2071 7565 7279 5f74 6578 743a 2073  f, query_text: s
-00016d80: 7472 2c20 6672 6f6d 5f6c 616e 6775 6167  tr, from_languag
-00016d90: 653a 2073 7472 203d 2027 6175 746f 272c  e: str = 'auto',
-00016da0: 2074 6f5f 6c61 6e67 7561 6765 3a20 7374   to_language: st
-00016db0: 7220 3d20 2765 6e27 2c20 2a2a 6b77 6172  r = 'en', **kwar
-00016dc0: 6773 3a20 4170 694b 7761 7267 7354 7970  gs: ApiKwargsTyp
-00016dd0: 6529 202d 3e20 556e 696f 6e5b 7374 722c  e) -> Union[str,
-00016de0: 2064 6963 745d 3a0d 0a20 2020 2020 2020   dict]:..       
-00016df0: 2022 2222 0d0a 2020 2020 2020 2020 6874   """..        ht
-00016e00: 7470 733a 2f2f 6661 6e79 692e 736f 676f  tps://fanyi.sogo
-00016e10: 752e 636f 6d2f 7465 7874 0d0a 2020 2020  u.com/text..    
-00016e20: 2020 2020 3a70 6172 616d 2071 7565 7279      :param query
-00016e30: 5f74 6578 743a 2073 7472 2c20 6d75 7374  _text: str, must
-00016e40: 2e0d 0a20 2020 2020 2020 203a 7061 7261  ...        :para
-00016e50: 6d20 6672 6f6d 5f6c 616e 6775 6167 653a  m from_language:
-00016e60: 2073 7472 2c20 6465 6661 756c 7420 2761   str, default 'a
-00016e70: 7574 6f27 2e0d 0a20 2020 2020 2020 203a  uto'...        :
-00016e80: 7061 7261 6d20 746f 5f6c 616e 6775 6167  param to_languag
-00016e90: 653a 2073 7472 2c20 6465 6661 756c 7420  e: str, default 
-00016ea0: 2765 6e27 2e0d 0a20 2020 2020 2020 203a  'en'...        :
-00016eb0: 7061 7261 6d20 2a2a 6b77 6172 6773 3a0d  param **kwargs:.
-00016ec0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016ed0: 203a 7061 7261 6d20 7469 6d65 6f75 743a   :param timeout:
-00016ee0: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
-00016ef0: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
-00016f00: 2020 2020 2020 203a 7061 7261 6d20 7072         :param pr
-00016f10: 6f78 6965 733a 2064 6963 742c 2064 6566  oxies: dict, def
-00016f20: 6175 6c74 204e 6f6e 652e 0d0a 2020 2020  ault None...    
-00016f30: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00016f40: 616d 2073 6c65 6570 5f73 6563 6f6e 6473  am sleep_seconds
-00016f50: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
-00016f60: 2030 2e0d 0a20 2020 2020 2020 2020 2020   0...           
-00016f70: 2020 2020 203a 7061 7261 6d20 6973 5f64       :param is_d
-00016f80: 6574 6169 6c5f 7265 7375 6c74 3a20 626f  etail_result: bo
-00016f90: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
-00016fa0: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-00016fb0: 2020 2020 3a70 6172 616d 2069 665f 6967      :param if_ig
-00016fc0: 6e6f 7265 5f6c 696d 6974 5f6f 665f 6c65  nore_limit_of_le
-00016fd0: 6e67 7468 3a20 626f 6f6c 2c20 6465 6661  ngth: bool, defa
-00016fe0: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-00016ff0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00017000: 616d 206c 696d 6974 5f6f 665f 6c65 6e67  am limit_of_leng
-00017010: 7468 3a20 696e 742c 2064 6566 6175 6c74  th: int, default
-00017020: 2032 3030 3030 2e0d 0a20 2020 2020 2020   20000...       
-00017030: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00017040: 6966 5f69 676e 6f72 655f 656d 7074 795f  if_ignore_empty_
-00017050: 7175 6572 793a 2062 6f6f 6c2c 2064 6566  query: bool, def
-00017060: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
-00017070: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00017080: 7261 6d20 7570 6461 7465 5f73 6573 7369  ram update_sessi
-00017090: 6f6e 5f61 6674 6572 5f66 7265 713a 2069  on_after_freq: i
-000170a0: 6e74 2c20 6465 6661 756c 7420 3130 3030  nt, default 1000
-000170b0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-000170c0: 2020 203a 7061 7261 6d20 7570 6461 7465     :param update
-000170d0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
-000170e0: 6563 6f6e 6473 3a20 666c 6f61 742c 2064  econds: float, d
-000170f0: 6566 6175 6c74 2031 3530 302e 0d0a 2020  efault 1500...  
-00017100: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00017110: 6172 616d 2069 665f 7368 6f77 5f74 696d  aram if_show_tim
-00017120: 655f 7374 6174 3a20 626f 6f6c 2c20 6465  e_stat: bool, de
-00017130: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
-00017140: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00017150: 6172 616d 2073 686f 775f 7469 6d65 5f73  aram show_time_s
-00017160: 7461 745f 7072 6563 6973 696f 6e3a 2069  tat_precision: i
-00017170: 6e74 2c20 6465 6661 756c 7420 322e 0d0a  nt, default 2...
-00017180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017190: 3a70 6172 616d 2069 665f 7072 696e 745f  :param if_print_
-000171a0: 7761 726e 696e 673a 2062 6f6f 6c2c 2064  warning: bool, d
-000171b0: 6566 6175 6c74 2054 7275 652e 0d0a 2020  efault True...  
-000171c0: 2020 2020 2020 3a72 6574 7572 6e3a 2073        :return: s
-000171d0: 7472 206f 7220 6469 6374 0d0a 2020 2020  tr or dict..    
-000171e0: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
-000171f0: 2020 2074 696d 656f 7574 203d 206b 7761     timeout = kwa
-00017200: 7267 732e 6765 7428 2774 696d 656f 7574  rgs.get('timeout
-00017210: 272c 204e 6f6e 6529 0d0a 2020 2020 2020  ', None)..      
-00017220: 2020 7072 6f78 6965 7320 3d20 6b77 6172    proxies = kwar
-00017230: 6773 2e67 6574 2827 7072 6f78 6965 7327  gs.get('proxies'
-00017240: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
-00017250: 2073 6c65 6570 5f73 6563 6f6e 6473 203d   sleep_seconds =
-00017260: 206b 7761 7267 732e 6765 7428 2773 6c65   kwargs.get('sle
-00017270: 6570 5f73 6563 6f6e 6473 272c 2030 290d  ep_seconds', 0).
-00017280: 0a20 2020 2020 2020 2069 665f 7072 696e  .        if_prin
-00017290: 745f 7761 726e 696e 6720 3d20 6b77 6172  t_warning = kwar
-000172a0: 6773 2e67 6574 2827 6966 5f70 7269 6e74  gs.get('if_print
-000172b0: 5f77 6172 6e69 6e67 272c 2054 7275 6529  _warning', True)
-000172c0: 0d0a 2020 2020 2020 2020 6973 5f64 6574  ..        is_det
-000172d0: 6169 6c5f 7265 7375 6c74 203d 206b 7761  ail_result = kwa
-000172e0: 7267 732e 6765 7428 2769 735f 6465 7461  rgs.get('is_deta
-000172f0: 696c 5f72 6573 756c 7427 2c20 4661 6c73  il_result', Fals
-00017300: 6529 0d0a 2020 2020 2020 2020 7570 6461  e)..        upda
-00017310: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
-00017320: 5f66 7265 7120 3d20 6b77 6172 6773 2e67  _freq = kwargs.g
-00017330: 6574 2827 7570 6461 7465 5f73 6573 7369  et('update_sessi
-00017340: 6f6e 5f61 6674 6572 5f66 7265 7127 2c20  on_after_freq', 
-00017350: 7365 6c66 2e64 6566 6175 6c74 5f73 6573  self.default_ses
-00017360: 7369 6f6e 5f66 7265 7129 0d0a 2020 2020  sion_freq)..    
-00017370: 2020 2020 7570 6461 7465 5f73 6573 7369      update_sessi
-00017380: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-00017390: 203d 206b 7761 7267 732e 6765 7428 2775   = kwargs.get('u
-000173a0: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-000173b0: 7465 725f 7365 636f 6e64 7327 2c20 7365  ter_seconds', se
-000173c0: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
-000173d0: 6f6e 5f73 6563 6f6e 6473 290d 0a20 2020  on_seconds)..   
-000173e0: 2020 2020 2073 656c 662e 6368 6563 6b5f       self.check_
-000173f0: 696e 7075 745f 6c69 6d69 7428 7175 6572  input_limit(quer
-00017400: 795f 7465 7874 2c20 7365 6c66 2e69 6e70  y_text, self.inp
-00017410: 7574 5f6c 696d 6974 290d 0a0d 0a20 2020  ut_limit)....   
-00017420: 2020 2020 206e 6f74 5f75 7064 6174 655f       not_update_
-00017430: 636f 6e64 5f66 7265 7120 3d20 3120 6966  cond_freq = 1 if
-00017440: 2073 656c 662e 7175 6572 795f 636f 756e   self.query_coun
-00017450: 7420 2520 7570 6461 7465 5f73 6573 7369  t % update_sessi
-00017460: 6f6e 5f61 6674 6572 5f66 7265 7120 213d  on_after_freq !=
-00017470: 2030 2065 6c73 6520 300d 0a20 2020 2020   0 else 0..     
-00017480: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
-00017490: 6e64 5f74 696d 6520 3d20 3120 6966 2074  nd_time = 1 if t
-000174a0: 696d 652e 7469 6d65 2829 202d 2073 656c  ime.time() - sel
-000174b0: 662e 6265 6769 6e5f 7469 6d65 203c 2075  f.begin_time < u
-000174c0: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-000174d0: 7465 725f 7365 636f 6e64 7320 656c 7365  ter_seconds else
-000174e0: 2030 0d0a 2020 2020 2020 2020 6966 206e   0..        if n
-000174f0: 6f74 2028 7365 6c66 2e73 6573 7369 6f6e  ot (self.session
-00017500: 2061 6e64 2073 656c 662e 6c61 6e67 7561   and self.langua
-00017510: 6765 5f6d 6170 2061 6e64 206e 6f74 5f75  ge_map and not_u
-00017520: 7064 6174 655f 636f 6e64 5f66 7265 7120  pdate_cond_freq 
-00017530: 616e 6420 6e6f 745f 7570 6461 7465 5f63  and not_update_c
-00017540: 6f6e 645f 7469 6d65 2061 6e64 2073 656c  ond_time and sel
-00017550: 662e 7575 6964 293a 0d0a 2020 2020 2020  f.uuid):..      
-00017560: 2020 2020 2020 7365 6c66 2e75 7569 6420        self.uuid 
-00017570: 3d20 7374 7228 7575 6964 2e75 7569 6434  = str(uuid.uuid4
-00017580: 2829 290d 0a20 2020 2020 2020 2020 2020  ())..           
-00017590: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
-000175a0: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
-000175b0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000175c0: 2e73 6573 7369 6f6e 203d 2072 6571 7565  .session = reque
-000175d0: 7374 732e 5365 7373 696f 6e28 290d 0a20  sts.Session().. 
-000175e0: 2020 2020 2020 2020 2020 2068 6f73 745f             host_
-000175f0: 6874 6d6c 203d 2073 656c 662e 7365 7373  html = self.sess
-00017600: 696f 6e2e 6765 7428 7365 6c66 2e68 6f73  ion.get(self.hos
-00017610: 745f 7572 6c2c 2068 6561 6465 7273 3d73  t_url, headers=s
-00017620: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
-00017630: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
-00017640: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
-00017650: 6573 292e 7465 7874 0d0a 2020 2020 2020  es).text..      
-00017660: 2020 2020 2020 6465 6275 675f 6c61 6e67        debug_lang
-00017670: 5f6b 7761 7267 7320 3d20 7365 6c66 2e64  _kwargs = self.d
-00017680: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
-00017690: 2866 726f 6d5f 6c61 6e67 7561 6765 2c20  (from_language, 
-000176a0: 746f 5f6c 616e 6775 6167 652c 2073 656c  to_language, sel
-000176b0: 662e 6465 6661 756c 745f 6672 6f6d 5f6c  f.default_from_l
-000176c0: 616e 6775 6167 652c 2069 665f 7072 696e  anguage, if_prin
-000176d0: 745f 7761 726e 696e 6729 0d0a 2020 2020  t_warning)..    
-000176e0: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
-000176f0: 6775 6167 655f 6d61 7020 3d20 7365 6c66  guage_map = self
-00017700: 2e67 6574 5f6c 616e 6775 6167 655f 6d61  .get_language_ma
-00017710: 7028 686f 7374 5f68 746d 6c2c 2073 656c  p(host_html, sel
-00017720: 662e 6765 745f 6c61 6e67 7561 6765 5f6f  f.get_language_o
-00017730: 6c64 5f75 726c 2c20 7365 6c66 2e73 6573  ld_url, self.ses
-00017740: 7369 6f6e 2c20 7469 6d65 6f75 742c 2070  sion, timeout, p
-00017750: 726f 7869 6573 2c20 2a2a 6465 6275 675f  roxies, **debug_
-00017760: 6c61 6e67 5f6b 7761 7267 7329 0d0a 0d0a  lang_kwargs)....
-00017770: 2020 2020 2020 2020 6672 6f6d 5f6c 616e          from_lan
-00017780: 6775 6167 652c 2074 6f5f 6c61 6e67 7561  guage, to_langua
-00017790: 6765 203d 2073 656c 662e 6368 6563 6b5f  ge = self.check_
-000177a0: 6c61 6e67 7561 6765 2866 726f 6d5f 6c61  language(from_la
-000177b0: 6e67 7561 6765 2c20 746f 5f6c 616e 6775  nguage, to_langu
-000177c0: 6167 652c 2073 656c 662e 6c61 6e67 7561  age, self.langua
-000177d0: 6765 5f6d 6170 2c20 6f75 7470 7574 5f7a  ge_map, output_z
-000177e0: 683d 7365 6c66 2e6f 7574 7075 745f 7a68  h=self.output_zh
-000177f0: 290d 0a0d 0a20 2020 2020 2020 2070 6179  )....        pay
-00017800: 6c6f 6164 203d 2073 656c 662e 6765 745f  load = self.get_
-00017810: 666f 726d 2871 7565 7279 5f74 6578 742c  form(query_text,
-00017820: 2066 726f 6d5f 6c61 6e67 7561 6765 2c20   from_language, 
-00017830: 746f 5f6c 616e 6775 6167 652c 2073 656c  to_language, sel
-00017840: 662e 7575 6964 290d 0a20 2020 2020 2020  f.uuid)..       
-00017850: 2072 203d 2073 656c 662e 7365 7373 696f   r = self.sessio
-00017860: 6e2e 706f 7374 2873 656c 662e 6170 695f  n.post(self.api_
-00017870: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
-00017880: 662e 6170 695f 6865 6164 6572 732c 2064  f.api_headers, d
-00017890: 6174 613d 7061 796c 6f61 642c 2074 696d  ata=payload, tim
-000178a0: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
-000178b0: 6f78 6965 733d 7072 6f78 6965 7329 0d0a  oxies=proxies)..
-000178c0: 2020 2020 2020 2020 722e 7261 6973 655f          r.raise_
-000178d0: 666f 725f 7374 6174 7573 2829 0d0a 2020  for_status()..  
-000178e0: 2020 2020 2020 6461 7461 203d 2072 2e6a        data = r.j
-000178f0: 736f 6e28 290d 0a20 2020 2020 2020 2074  son()..        t
-00017900: 696d 652e 736c 6565 7028 736c 6565 705f  ime.sleep(sleep_
-00017910: 7365 636f 6e64 7329 0d0a 2020 2020 2020  seconds)..      
-00017920: 2020 7365 6c66 2e71 7565 7279 5f63 6f75    self.query_cou
-00017930: 6e74 202b 3d20 310d 0a20 2020 2020 2020  nt += 1..       
-00017940: 2072 6574 7572 6e20 6461 7461 2069 6620   return data if 
-00017950: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
-00017960: 2065 6c73 6520 6461 7461 5b27 6461 7461   else data['data
-00017970: 275d 5b27 7472 616e 736c 6174 6527 5d5b  ']['translate'][
-00017980: 2764 6974 275d 0d0a 0d0a 0d0a 636c 6173  'dit']......clas
-00017990: 7320 4361 6979 756e 2854 7365 293a 0d0a  s Caiyun(Tse):..
-000179a0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-000179b0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-000179c0: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
-000179d0: 5f28 290d 0a20 2020 2020 2020 2073 656c  _()..        sel
-000179e0: 662e 6265 6769 6e5f 7469 6d65 203d 2074  f.begin_time = t
-000179f0: 696d 652e 7469 6d65 2829 0d0a 2020 2020  ime.time()..    
-00017a00: 2020 2020 7365 6c66 2e68 6f73 745f 7572      self.host_ur
-00017a10: 6c20 3d20 2768 7474 7073 3a2f 2f66 616e  l = 'https://fan
-00017a20: 7969 2e63 6169 7975 6e61 7070 2e63 6f6d  yi.caiyunapp.com
-00017a30: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
-00017a40: 6170 695f 7572 6c20 3d20 2768 7474 7073  api_url = 'https
-00017a50: 3a2f 2f61 7069 2e69 6e74 6572 7072 6574  ://api.interpret
-00017a60: 6572 2e63 6169 7975 6e61 692e 636f 6d2f  er.caiyunai.com/
-00017a70: 7631 2f74 7261 6e73 6c61 746f 7227 0d0a  v1/translator'..
-00017a80: 2020 2020 2020 2020 7365 6c66 2e67 6574          self.get
-00017a90: 5f6a 735f 7061 7474 6572 6e20 3d20 272f  _js_pattern = '/
-00017aa0: 6173 7365 7473 2f69 6e64 6578 2e28 2e2a  assets/index.(.*
-00017ab0: 3f29 2e6a 7327 0d0a 2020 2020 2020 2020  ?).js'..        
-00017ac0: 7365 6c66 2e67 6574 5f6a 735f 7572 6c20  self.get_js_url 
-00017ad0: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00017ae0: 7365 6c66 2e67 6574 5f6a 7774 5f75 726c  self.get_jwt_url
-00017af0: 203d 2027 6874 7470 733a 2f2f 6170 692e   = 'https://api.
-00017b00: 696e 7465 7270 7265 7465 722e 6361 6979  interpreter.caiy
-00017b10: 756e 6169 2e63 6f6d 2f76 312f 7573 6572  unai.com/v1/user
-00017b20: 2f6a 7774 2f67 656e 6572 6174 6527 0d0a  /jwt/generate'..
-00017b30: 2020 2020 2020 2020 7365 6c66 2e68 6f73          self.hos
-00017b40: 745f 6865 6164 6572 7320 3d20 7365 6c66  t_headers = self
-00017b50: 2e67 6574 5f68 6561 6465 7273 2873 656c  .get_headers(sel
-00017b60: 662e 686f 7374 5f75 726c 2c20 6966 5f61  f.host_url, if_a
-00017b70: 7069 3d46 616c 7365 2c20 6966 5f72 6566  pi=False, if_ref
-00017b80: 6572 6572 5f66 6f72 5f68 6f73 743d 5472  erer_for_host=Tr
-00017b90: 7565 290d 0a20 2020 2020 2020 2073 656c  ue)..        sel
-00017ba0: 662e 6170 695f 6865 6164 6572 7320 3d20  f.api_headers = 
-00017bb0: 7365 6c66 2e67 6574 5f68 6561 6465 7273  self.get_headers
-00017bc0: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
-00017bd0: 6966 5f61 7069 3d54 7275 652c 2069 665f  if_api=True, if_
-00017be0: 616a 6178 5f66 6f72 5f61 7069 3d46 616c  ajax_for_api=Fal
-00017bf0: 7365 2c20 6966 5f6a 736f 6e5f 666f 725f  se, if_json_for_
-00017c00: 6170 693d 5472 7565 290d 0a20 2020 2020  api=True)..     
-00017c10: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
-00017c20: 5f6d 6170 203d 204e 6f6e 650d 0a20 2020  _map = None..   
-00017c30: 2020 2020 2073 656c 662e 7365 7373 696f       self.sessio
-00017c40: 6e20 3d20 4e6f 6e65 0d0a 2020 2020 2020  n = None..      
-00017c50: 2020 7365 6c66 2e70 726f 6665 7373 696f    self.professio
-00017c60: 6e61 6c5f 6669 656c 6420 3d20 284e 6f6e  nal_field = (Non
-00017c70: 652c 2022 6d65 6469 6369 6e65 222c 2022  e, "medicine", "
-00017c80: 6c61 7722 2c20 226d 6163 6869 6e65 7279  law", "machinery
-00017c90: 222c 290d 0a20 2020 2020 2020 2073 656c  ",)..        sel
-00017ca0: 662e 6272 6f77 7365 725f 6461 7461 203d  f.browser_data =
-00017cb0: 207b 2762 726f 7773 6572 5f69 6427 3a20   {'browser_id': 
-00017cc0: 2727 2e6a 6f69 6e28 7261 6e64 6f6d 2e73  ''.join(random.s
-00017cd0: 616d 706c 6528 2761 6263 6465 6667 6869  ample('abcdefghi
-00017ce0: 6a6b 6c6d 6e6f 7071 7273 7475 7677 7879  jklmnopqrstuvwxy
-00017cf0: 7a30 3132 3334 3536 3738 3927 2c20 3332  z0123456789', 32
-00017d00: 2929 7d0d 0a20 2020 2020 2020 2073 656c  ))}..        sel
-00017d10: 662e 6e6f 726d 616c 5f6b 6579 203d 2027  f.normal_key = '
-00017d20: 4142 4344 4546 4748 494a 4b4c 4d4e 4f50  ABCDEFGHIJKLMNOP
-00017d30: 5152 5354 5556 5758 595a 6162 6364 6566  QRSTUVWXYZabcdef
-00017d40: 6768 696a 6b6c 6d6e 6f70 7172 7374 7576  ghijklmnopqrstuv
-00017d50: 7778 797a 2720 2b20 2730 3132 3334 3536  wxyz' + '0123456
-00017d60: 3738 3927 202b 2027 3d2e 2b2d 5f2f 270d  789' + '=.+-_/'.
-00017d70: 0a20 2020 2020 2020 2073 656c 662e 6369  .        self.ci
-00017d80: 7068 6572 5f6b 6579 203d 2027 4e4f 5051  pher_key = 'NOPQ
-00017d90: 5253 5455 5657 5859 5a41 4243 4445 4647  RSTUVWXYZABCDEFG
-00017da0: 4849 4a4b 4c4d 6e6f 7071 7273 7475 7677  HIJKLMnopqrstuvw
-00017db0: 7879 7a61 6263 6465 6667 6869 6a6b 6c6d  xyzabcdefghijklm
-00017dc0: 2720 2b20 2730 3132 3334 3536 3738 3927  ' + '0123456789'
-00017dd0: 202b 2027 3d2e 2b2d 5f2f 270d 0a20 2020   + '=.+-_/'..   
-00017de0: 2020 2020 2073 656c 662e 6465 6372 7970       self.decryp
-00017df0: 745f 6469 6374 696f 6e61 7279 203d 2073  t_dictionary = s
-00017e00: 656c 662e 6372 7970 7428 6966 5f64 653d  elf.crypt(if_de=
-00017e10: 5472 7565 290d 0a20 2020 2020 2020 2073  True)..        s
-00017e20: 656c 662e 746b 203d 204e 6f6e 650d 0a20  elf.tk = None.. 
-00017e30: 2020 2020 2020 2073 656c 662e 6a77 7420         self.jwt 
-00017e40: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00017e50: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
-00017e60: 203d 2030 0d0a 2020 2020 2020 2020 7365   = 0..        se
-00017e70: 6c66 2e6f 7574 7075 745f 7a68 203d 2027  lf.output_zh = '
-00017e80: 7a68 270d 0a20 2020 2020 2020 2073 656c  zh'..        sel
-00017e90: 662e 696e 7075 745f 6c69 6d69 7420 3d20  f.input_limit = 
-00017ea0: 696e 7428 3565 3329 0d0a 2020 2020 2020  int(5e3)..      
-00017eb0: 2020 7365 6c66 2e64 6566 6175 6c74 5f66    self.default_f
-00017ec0: 726f 6d5f 6c61 6e67 7561 6765 203d 2073  rom_language = s
-00017ed0: 656c 662e 6f75 7470 7574 5f7a 680d 0a0d  elf.output_zh...
-00017ee0: 0a20 2020 2040 5473 652e 6465 6275 675f  .    @Tse.debug_
-00017ef0: 6c61 6e67 7561 6765 5f6d 6170 0d0a 2020  language_map..  
-00017f00: 2020 6465 6620 6765 745f 6c61 6e67 7561    def get_langua
-00017f10: 6765 5f6d 6170 2873 656c 662c 206a 735f  ge_map(self, js_
-00017f20: 6874 6d6c 3a20 7374 722c 202a 2a6b 7761  html: str, **kwa
-00017f30: 7267 733a 204c 616e 674d 6170 4b77 6172  rgs: LangMapKwar
-00017f40: 6773 5479 7065 2920 2d3e 2064 6963 743a  gsType) -> dict:
-00017f50: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00017f60: 2065 7865 636a 732e 6576 616c 2872 652e   execjs.eval(re.
-00017f70: 636f 6d70 696c 6528 273d 7b61 7574 6f3a  compile('={auto:
-00017f80: 5c5c 5b28 2e2a 3f29 7d27 292e 7365 6172  \\[(.*?)}').sear
-00017f90: 6368 286a 735f 6874 6d6c 292e 6772 6f75  ch(js_html).grou
-00017fa0: 7028 295b 313a 5d29 0d0a 0d0a 2020 2020  p()[1:])....    
-00017fb0: 6465 6620 6765 745f 746b 2873 656c 662c  def get_tk(self,
-00017fc0: 206a 735f 6874 6d6c 3a20 7374 7229 202d   js_html: str) -
-00017fd0: 3e20 7374 723a 0d0a 2020 2020 2020 2020  > str:..        
-00017fe0: 7265 7475 726e 2072 652e 636f 6d70 696c  return re.compil
-00017ff0: 6528 2768 6561 6465 7273 5c5c 5b22 582d  e('headers\\["X-
-00018000: 4175 7468 6f72 697a 6174 696f 6e22 5d3d  Authorization"]=
-00018010: 2228 2e2a 3f29 222c 2729 2e66 696e 6461  "(.*?)",').finda
-00018020: 6c6c 286a 735f 6874 6d6c 295b 305d 0d0a  ll(js_html)[0]..
-00018030: 0d0a 2020 2020 2320 6465 6620 6765 745f  ..    # def get_
-00018040: 6a77 7428 7365 6c66 2c20 6272 6f77 7365  jwt(self, browse
-00018050: 725f 6964 3a20 7374 722c 2061 7069 5f68  r_id: str, api_h
-00018060: 6561 6465 7273 3a20 6469 6374 2c20 7373  eaders: dict, ss
-00018070: 3a20 5365 7373 696f 6e54 7970 652c 2074  : SessionType, t
-00018080: 696d 656f 7574 3a20 666c 6f61 742c 2070  imeout: float, p
-00018090: 726f 7869 6573 3a20 6469 6374 2920 2d3e  roxies: dict) ->
-000180a0: 2073 7472 3a0d 0a20 2020 2023 2020 2020   str:..    #    
-000180b0: 2064 6174 6120 3d20 7b22 6272 6f77 7365   data = {"browse
-000180c0: 725f 6964 223a 2062 726f 7773 6572 5f69  r_id": browser_i
-000180d0: 647d 0d0a 2020 2020 2320 2020 2020 7265  d}..    #     re
-000180e0: 7475 726e 2073 732e 706f 7374 2873 656c  turn ss.post(sel
-000180f0: 662e 6765 745f 6a77 745f 7572 6c2c 206a  f.get_jwt_url, j
-00018100: 736f 6e3d 6461 7461 2c20 6865 6164 6572  son=data, header
-00018110: 733d 6170 695f 6865 6164 6572 732c 2074  s=api_headers, t
-00018120: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
-00018130: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
-00018140: 2e6a 736f 6e28 295b 276a 7774 275d 0d0a  .json()['jwt']..
-00018150: 0d0a 2020 2020 6465 6620 6372 7970 7428  ..    def crypt(
-00018160: 7365 6c66 2c20 6966 5f64 653a 2062 6f6f  self, if_de: boo
-00018170: 6c20 3d20 5472 7565 2920 2d3e 2064 6963  l = True) -> dic
-00018180: 743a 0d0a 2020 2020 2020 2020 6966 2069  t:..        if i
-00018190: 665f 6465 3a0d 0a20 2020 2020 2020 2020  f_de:..         
-000181a0: 2020 2072 6574 7572 6e20 7b6b 3a20 7620     return {k: v 
-000181b0: 666f 7220 6b2c 2076 2069 6e20 7a69 7028  for k, v in zip(
-000181c0: 7365 6c66 2e63 6970 6865 725f 6b65 792c  self.cipher_key,
-000181d0: 2073 656c 662e 6e6f 726d 616c 5f6b 6579   self.normal_key
-000181e0: 297d 0d0a 2020 2020 2020 2020 7265 7475  )}..        retu
-000181f0: 726e 207b 763a 206b 2066 6f72 206b 2c20  rn {v: k for k, 
-00018200: 7620 696e 207a 6970 2873 656c 662e 6369  v in zip(self.ci
-00018210: 7068 6572 5f6b 6579 2c20 7365 6c66 2e6e  pher_key, self.n
-00018220: 6f72 6d61 6c5f 6b65 7929 7d0d 0a0d 0a20  ormal_key)}.... 
-00018230: 2020 2064 6566 2065 6e63 7279 7074 2873     def encrypt(s
-00018240: 656c 662c 2070 6c61 696e 5f74 6578 743a  elf, plain_text:
-00018250: 2073 7472 2920 2d3e 2073 7472 3a0d 0a20   str) -> str:.. 
-00018260: 2020 2020 2020 2065 6e63 7279 7074 5f64         encrypt_d
-00018270: 6963 7469 6f6e 6172 7920 3d20 7365 6c66  ictionary = self
-00018280: 2e63 7279 7074 2869 665f 6465 3d46 616c  .crypt(if_de=Fal
-00018290: 7365 290d 0a20 2020 2020 2020 205f 6369  se)..        _ci
-000182a0: 7068 6572 5f74 6578 7420 3d20 6261 7365  pher_text = base
-000182b0: 3634 2e62 3634 656e 636f 6465 2870 6c61  64.b64encode(pla
-000182c0: 696e 5f74 6578 742e 656e 636f 6465 2829  in_text.encode()
-000182d0: 292e 6465 636f 6465 2829 0d0a 2020 2020  ).decode()..    
-000182e0: 2020 2020 7265 7475 726e 2027 272e 6a6f      return ''.jo
-000182f0: 696e 286c 6973 7428 6d61 7028 6c61 6d62  in(list(map(lamb
-00018300: 6461 206b 3a20 656e 6372 7970 745f 6469  da k: encrypt_di
-00018310: 6374 696f 6e61 7279 5b6b 5d2c 205f 6369  ctionary[k], _ci
-00018320: 7068 6572 5f74 6578 7429 2929 0d0a 0d0a  pher_text)))....
-00018330: 2020 2020 6465 6620 6465 6372 7970 7428      def decrypt(
-00018340: 7365 6c66 2c20 6369 7068 6572 5f74 6578  self, cipher_tex
-00018350: 743a 2073 7472 2920 2d3e 2073 7472 3a0d  t: str) -> str:.
-00018360: 0a20 2020 2020 2020 205f 6369 7068 6572  .        _cipher
-00018370: 7465 7874 203d 2027 272e 6a6f 696e 286c  text = ''.join(l
-00018380: 6973 7428 6d61 7028 6c61 6d62 6461 206b  ist(map(lambda k
-00018390: 3a20 7365 6c66 2e64 6563 7279 7074 5f64  : self.decrypt_d
-000183a0: 6963 7469 6f6e 6172 795b 6b5d 2c20 6369  ictionary[k], ci
-000183b0: 7068 6572 5f74 6578 7429 2929 0d0a 2020  pher_text)))..  
-000183c0: 2020 2020 2020 7265 7475 726e 2062 6173        return bas
-000183d0: 6536 342e 6236 3464 6563 6f64 6528 5f63  e64.b64decode(_c
-000183e0: 6970 6865 7274 6578 7429 2e64 6563 6f64  iphertext).decod
-000183f0: 6528 290d 0a0d 0a20 2020 2040 5473 652e  e()....    @Tse.
-00018400: 7469 6d65 5f73 7461 740d 0a20 2020 2040  time_stat..    @
-00018410: 5473 652e 6368 6563 6b5f 7175 6572 790d  Tse.check_query.
-00018420: 0a20 2020 2064 6566 2063 6169 7975 6e5f  .    def caiyun_
-00018430: 6170 6928 7365 6c66 2c20 7175 6572 795f  api(self, query_
-00018440: 7465 7874 3a20 7374 722c 2066 726f 6d5f  text: str, from_
-00018450: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
-00018460: 2761 7574 6f27 2c20 746f 5f6c 616e 6775  'auto', to_langu
-00018470: 6167 653a 2073 7472 203d 2027 656e 272c  age: str = 'en',
-00018480: 202a 2a6b 7761 7267 733a 2041 7069 4b77   **kwargs: ApiKw
-00018490: 6172 6773 5479 7065 2920 2d3e 2055 6e69  argsType) -> Uni
-000184a0: 6f6e 5b73 7472 2c20 6469 6374 5d3a 0d0a  on[str, dict]:..
-000184b0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-000184c0: 2020 2020 2068 7474 7073 3a2f 2f66 616e       https://fan
-000184d0: 7969 2e63 6169 7975 6e61 7070 2e63 6f6d  yi.caiyunapp.com
-000184e0: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
-000184f0: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
-00018500: 2c20 6d75 7374 2e0d 0a20 2020 2020 2020  , must...       
-00018510: 203a 7061 7261 6d20 6672 6f6d 5f6c 616e   :param from_lan
-00018520: 6775 6167 653a 2073 7472 2c20 6465 6661  guage: str, defa
-00018530: 756c 7420 2761 7574 6f27 2e0d 0a20 2020  ult 'auto'...   
-00018540: 2020 2020 203a 7061 7261 6d20 746f 5f6c       :param to_l
-00018550: 616e 6775 6167 653a 2073 7472 2c20 6465  anguage: str, de
-00018560: 6661 756c 7420 2765 6e27 2e0d 0a20 2020  fault 'en'...   
-00018570: 2020 2020 203a 7061 7261 6d20 2a2a 6b77       :param **kw
-00018580: 6172 6773 3a0d 0a20 2020 2020 2020 2020  args:..         
-00018590: 2020 2020 2020 203a 7061 7261 6d20 7469         :param ti
-000185a0: 6d65 6f75 743a 2066 6c6f 6174 2c20 6465  meout: float, de
-000185b0: 6661 756c 7420 4e6f 6e65 2e0d 0a20 2020  fault None...   
-000185c0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-000185d0: 7261 6d20 7072 6f78 6965 733a 2064 6963  ram proxies: dic
-000185e0: 742c 2064 6566 6175 6c74 204e 6f6e 652e  t, default None.
-000185f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018600: 2020 3a70 6172 616d 2073 6c65 6570 5f73    :param sleep_s
-00018610: 6563 6f6e 6473 3a20 666c 6f61 742c 2064  econds: float, d
-00018620: 6566 6175 6c74 2030 2e0d 0a20 2020 2020  efault 0...     
-00018630: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00018640: 6d20 6973 5f64 6574 6169 6c5f 7265 7375  m is_detail_resu
-00018650: 6c74 3a20 626f 6f6c 2c20 6465 6661 756c  lt: bool, defaul
-00018660: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-00018670: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00018680: 2069 665f 6967 6e6f 7265 5f6c 696d 6974   if_ignore_limit
-00018690: 5f6f 665f 6c65 6e67 7468 3a20 626f 6f6c  _of_length: bool
-000186a0: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-000186b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000186c0: 2020 3a70 6172 616d 206c 696d 6974 5f6f    :param limit_o
-000186d0: 665f 6c65 6e67 7468 3a20 696e 742c 2064  f_length: int, d
-000186e0: 6566 6175 6c74 2032 3030 3030 2e0d 0a20  efault 20000... 
-000186f0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-00018700: 7061 7261 6d20 6966 5f69 676e 6f72 655f  param if_ignore_
-00018710: 656d 7074 795f 7175 6572 793a 2062 6f6f  empty_query: boo
-00018720: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
-00018730: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00018740: 2020 203a 7061 7261 6d20 7570 6461 7465     :param update
-00018750: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-00018760: 7265 713a 2069 6e74 2c20 6465 6661 756c  req: int, defaul
-00018770: 7420 3130 3030 2e0d 0a20 2020 2020 2020  t 1000...       
-00018780: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00018790: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
-000187a0: 6674 6572 5f73 6563 6f6e 6473 3a20 666c  fter_seconds: fl
-000187b0: 6f61 742c 2064 6566 6175 6c74 2031 3530  oat, default 150
-000187c0: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
-000187d0: 2020 2020 3a70 6172 616d 2069 665f 7368      :param if_sh
-000187e0: 6f77 5f74 696d 655f 7374 6174 3a20 626f  ow_time_stat: bo
-000187f0: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
-00018800: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-00018810: 2020 2020 3a70 6172 616d 2073 686f 775f      :param show_
-00018820: 7469 6d65 5f73 7461 745f 7072 6563 6973  time_stat_precis
-00018830: 696f 6e3a 2069 6e74 2c20 6465 6661 756c  ion: int, defaul
-00018840: 7420 322e 0d0a 2020 2020 2020 2020 2020  t 2...          
-00018850: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
-00018860: 7072 696e 745f 7761 726e 696e 673a 2062  print_warning: b
-00018870: 6f6f 6c2c 2064 6566 6175 6c74 2054 7275  ool, default Tru
-00018880: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-00018890: 2020 2020 3a70 6172 616d 2070 726f 6665      :param profe
-000188a0: 7373 696f 6e61 6c5f 6669 656c 643a 2073  ssional_field: s
-000188b0: 7472 2c20 6465 6661 756c 7420 4e6f 6e65  tr, default None
-000188c0: 2c20 6368 6f6f 7365 2066 726f 6d20 284e  , choose from (N
-000188d0: 6f6e 652c 2022 6d65 6469 6369 6e65 222c  one, "medicine",
-000188e0: 226c 6177 222c 226d 6163 6869 6e65 7279  "law","machinery
-000188f0: 2229 0d0a 2020 2020 2020 2020 3a72 6574  ")..        :ret
-00018900: 7572 6e3a 2073 7472 206f 7220 6469 6374  urn: str or dict
-00018910: 0d0a 2020 2020 2020 2020 2222 220d 0a0d  ..        """...
-00018920: 0a20 2020 2020 2020 2075 7365 5f64 6f6d  .        use_dom
-00018930: 6169 6e20 3d20 6b77 6172 6773 2e67 6574  ain = kwargs.get
-00018940: 2827 7072 6f66 6573 7369 6f6e 616c 5f66  ('professional_f
-00018950: 6965 6c64 272c 204e 6f6e 6529 0d0a 2020  ield', None)..  
-00018960: 2020 2020 2020 6966 2075 7365 5f64 6f6d        if use_dom
-00018970: 6169 6e20 6e6f 7420 696e 2028 4e6f 6e65  ain not in (None
-00018980: 2c20 226d 6564 6963 696e 6522 2c20 226c  , "medicine", "l
-00018990: 6177 222c 2022 6d61 6368 696e 6572 7922  aw", "machinery"
-000189a0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-000189b0: 7261 6973 6520 5472 616e 736c 6174 6f72  raise Translator
-000189c0: 4572 726f 720d 0a0d 0a20 2020 2020 2020  Error....       
-000189d0: 2074 696d 656f 7574 203d 206b 7761 7267   timeout = kwarg
-000189e0: 732e 6765 7428 2774 696d 656f 7574 272c  s.get('timeout',
-000189f0: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
-00018a00: 7072 6f78 6965 7320 3d20 6b77 6172 6773  proxies = kwargs
-00018a10: 2e67 6574 2827 7072 6f78 6965 7327 2c20  .get('proxies', 
-00018a20: 4e6f 6e65 290d 0a20 2020 2020 2020 2073  None)..        s
-00018a30: 6c65 6570 5f73 6563 6f6e 6473 203d 206b  leep_seconds = k
-00018a40: 7761 7267 732e 6765 7428 2773 6c65 6570  wargs.get('sleep
-00018a50: 5f73 6563 6f6e 6473 272c 2030 290d 0a20  _seconds', 0).. 
-00018a60: 2020 2020 2020 2069 665f 7072 696e 745f         if_print_
-00018a70: 7761 726e 696e 6720 3d20 6b77 6172 6773  warning = kwargs
-00018a80: 2e67 6574 2827 6966 5f70 7269 6e74 5f77  .get('if_print_w
-00018a90: 6172 6e69 6e67 272c 2054 7275 6529 0d0a  arning', True)..
-00018aa0: 2020 2020 2020 2020 6973 5f64 6574 6169          is_detai
-00018ab0: 6c5f 7265 7375 6c74 203d 206b 7761 7267  l_result = kwarg
-00018ac0: 732e 6765 7428 2769 735f 6465 7461 696c  s.get('is_detail
-00018ad0: 5f72 6573 756c 7427 2c20 4661 6c73 6529  _result', False)
-00018ae0: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
-00018af0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-00018b00: 7265 7120 3d20 6b77 6172 6773 2e67 6574  req = kwargs.get
-00018b10: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
-00018b20: 5f61 6674 6572 5f66 7265 7127 2c20 7365  _after_freq', se
-00018b30: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
-00018b40: 6f6e 5f66 7265 7129 0d0a 2020 2020 2020  on_freq)..      
-00018b50: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
-00018b60: 5f61 6674 6572 5f73 6563 6f6e 6473 203d  _after_seconds =
-00018b70: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
-00018b80: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-00018b90: 725f 7365 636f 6e64 7327 2c20 7365 6c66  r_seconds', self
-00018ba0: 2e64 6566 6175 6c74 5f73 6573 7369 6f6e  .default_session
-00018bb0: 5f73 6563 6f6e 6473 290d 0a20 2020 2020  _seconds)..     
-00018bc0: 2020 2073 656c 662e 6368 6563 6b5f 696e     self.check_in
-00018bd0: 7075 745f 6c69 6d69 7428 7175 6572 795f  put_limit(query_
-00018be0: 7465 7874 2c20 7365 6c66 2e69 6e70 7574  text, self.input
-00018bf0: 5f6c 696d 6974 290d 0a0d 0a20 2020 2020  _limit)....     
-00018c00: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
-00018c10: 6e64 5f66 7265 7120 3d20 3120 6966 2073  nd_freq = 1 if s
-00018c20: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
-00018c30: 2520 7570 6461 7465 5f73 6573 7369 6f6e  % update_session
-00018c40: 5f61 6674 6572 5f66 7265 7120 213d 2030  _after_freq != 0
-00018c50: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
-00018c60: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
-00018c70: 5f74 696d 6520 3d20 3120 6966 2074 696d  _time = 1 if tim
-00018c80: 652e 7469 6d65 2829 202d 2073 656c 662e  e.time() - self.
-00018c90: 6265 6769 6e5f 7469 6d65 203c 2075 7064  begin_time < upd
-00018ca0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-00018cb0: 725f 7365 636f 6e64 7320 656c 7365 2030  r_seconds else 0
-00018cc0: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
-00018cd0: 2028 7365 6c66 2e73 6573 7369 6f6e 2061   (self.session a
-00018ce0: 6e64 2073 656c 662e 6c61 6e67 7561 6765  nd self.language
-00018cf0: 5f6d 6170 2061 6e64 206e 6f74 5f75 7064  _map and not_upd
-00018d00: 6174 655f 636f 6e64 5f66 7265 7120 616e  ate_cond_freq an
-00018d10: 6420 6e6f 745f 7570 6461 7465 5f63 6f6e  d not_update_con
-00018d20: 645f 7469 6d65 2061 6e64 2073 656c 662e  d_time and self.
-00018d30: 746b 2061 6e64 2073 656c 662e 6a77 7429  tk and self.jwt)
-00018d40: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-00018d50: 656c 662e 6265 6769 6e5f 7469 6d65 203d  elf.begin_time =
-00018d60: 2074 696d 652e 7469 6d65 2829 0d0a 2020   time.time()..  
-00018d70: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
-00018d80: 6573 7369 6f6e 203d 2072 6571 7565 7374  ession = request
-00018d90: 732e 5365 7373 696f 6e28 290d 0a20 2020  s.Session()..   
-00018da0: 2020 2020 2020 2020 2068 6f73 745f 6874           host_ht
-00018db0: 6d6c 203d 2073 656c 662e 7365 7373 696f  ml = self.sessio
-00018dc0: 6e2e 6765 7428 7365 6c66 2e68 6f73 745f  n.get(self.host_
-00018dd0: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
-00018de0: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
-00018df0: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
-00018e00: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
-00018e10: 292e 7465 7874 0d0a 2020 2020 2020 2020  ).text..        
-00018e20: 2020 2020 6a73 5f75 726c 5f70 6174 6820      js_url_path 
-00018e30: 3d20 7265 2e63 6f6d 7069 6c65 2873 656c  = re.compile(sel
-00018e40: 662e 6765 745f 6a73 5f70 6174 7465 726e  f.get_js_pattern
-00018e50: 292e 7365 6172 6368 2868 6f73 745f 6874  ).search(host_ht
-00018e60: 6d6c 292e 6772 6f75 7028 290d 0a20 2020  ml).group()..   
-00018e70: 2020 2020 2020 2020 2073 656c 662e 6765           self.ge
-00018e80: 745f 6a73 5f75 726c 203d 2027 272e 6a6f  t_js_url = ''.jo
-00018e90: 696e 285b 7365 6c66 2e68 6f73 745f 7572  in([self.host_ur
-00018ea0: 6c2c 206a 735f 7572 6c5f 7061 7468 5d29  l, js_url_path])
-00018eb0: 0d0a 2020 2020 2020 2020 2020 2020 6a73  ..            js
-00018ec0: 5f68 746d 6c20 3d20 7365 6c66 2e73 6573  _html = self.ses
-00018ed0: 7369 6f6e 2e67 6574 2873 656c 662e 6765  sion.get(self.ge
-00018ee0: 745f 6a73 5f75 726c 2c20 6865 6164 6572  t_js_url, header
-00018ef0: 733d 7365 6c66 2e68 6f73 745f 6865 6164  s=self.host_head
-00018f00: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
-00018f10: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
-00018f20: 6f78 6965 7329 2e74 6578 740d 0a20 2020  oxies).text..   
-00018f30: 2020 2020 2020 2020 2073 656c 662e 746b           self.tk
-00018f40: 203d 2073 656c 662e 6765 745f 746b 286a   = self.get_tk(j
-00018f50: 735f 6874 6d6c 290d 0a20 2020 2020 2020  s_html)..       
-00018f60: 2020 2020 2064 6562 7567 5f6c 616e 675f       debug_lang_
-00018f70: 6b77 6172 6773 203d 2073 656c 662e 6465  kwargs = self.de
-00018f80: 6275 675f 6c61 6e67 5f6b 7761 7267 7328  bug_lang_kwargs(
-00018f90: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
-00018fa0: 6f5f 6c61 6e67 7561 6765 2c20 7365 6c66  o_language, self
-00018fb0: 2e64 6566 6175 6c74 5f66 726f 6d5f 6c61  .default_from_la
-00018fc0: 6e67 7561 6765 2c20 6966 5f70 7269 6e74  nguage, if_print
-00018fd0: 5f77 6172 6e69 6e67 290d 0a20 2020 2020  _warning)..     
-00018fe0: 2020 2020 2020 2073 656c 662e 6c61 6e67         self.lang
-00018ff0: 7561 6765 5f6d 6170 203d 2073 656c 662e  uage_map = self.
-00019000: 6765 745f 6c61 6e67 7561 6765 5f6d 6170  get_language_map
-00019010: 286a 735f 6874 6d6c 2c20 2a2a 6465 6275  (js_html, **debu
-00019020: 675f 6c61 6e67 5f6b 7761 7267 7329 0d0a  g_lang_kwargs)..
-00019030: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00019040: 6c66 2e61 7069 5f68 6561 6465 7273 2e75  lf.api_headers.u
-00019050: 7064 6174 6528 7b0d 0a20 2020 2020 2020  pdate({..       
-00019060: 2020 2020 2020 2020 2022 6170 702d 6e61           "app-na
-00019070: 6d65 223a 2022 7879 222c 0d0a 2020 2020  me": "xy",..    
-00019080: 2020 2020 2020 2020 2020 2020 2264 6576              "dev
-00019090: 6963 652d 6964 223a 2022 222c 0d0a 2020  ice-id": "",..  
-000190a0: 2020 2020 2020 2020 2020 2020 2020 226f                "o
-000190b0: 732d 7479 7065 223a 2022 7765 6222 2c0d  s-type": "web",.
-000190c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000190d0: 2022 6f73 2d76 6572 7369 6f6e 223a 2022   "os-version": "
-000190e0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-000190f0: 2020 2020 2276 6572 7369 6f6e 223a 2022      "version": "
-00019100: 312e 382e 3022 2c0d 0a20 2020 2020 2020  1.8.0",..       
-00019110: 2020 2020 2020 2020 2022 582d 4175 7468           "X-Auth
-00019120: 6f72 697a 6174 696f 6e22 3a20 7365 6c66  orization": self
-00019130: 2e74 6b2c 0d0a 2020 2020 2020 2020 2020  .tk,..          
-00019140: 2020 7d29 0d0a 2020 2020 2020 2020 2020    })..          
-00019150: 2020 6a77 745f 7220 3d20 7365 6c66 2e73    jwt_r = self.s
-00019160: 6573 7369 6f6e 2e70 6f73 7428 7365 6c66  ession.post(self
-00019170: 2e67 6574 5f6a 7774 5f75 726c 2c20 6a73  .get_jwt_url, js
-00019180: 6f6e 3d73 656c 662e 6272 6f77 7365 725f  on=self.browser_
-00019190: 6461 7461 2c20 6865 6164 6572 733d 7365  data, headers=se
-000191a0: 6c66 2e61 7069 5f68 6561 6465 7273 2c20  lf.api_headers, 
-000191b0: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
-000191c0: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
-000191d0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-000191e0: 656c 662e 6a77 7420 3d20 6a77 745f 722e  elf.jwt = jwt_r.
-000191f0: 6a73 6f6e 2829 5b27 6a77 7427 5d0d 0a20  json()['jwt'].. 
-00019200: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00019210: 6170 695f 6865 6164 6572 732e 7570 6461  api_headers.upda
-00019220: 7465 287b 2254 2d41 7574 686f 7269 7a61  te({"T-Authoriza
-00019230: 7469 6f6e 223a 2073 656c 662e 6a77 747d  tion": self.jwt}
-00019240: 290d 0a0d 0a20 2020 2020 2020 2066 726f  )....        fro
-00019250: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
-00019260: 616e 6775 6167 6520 3d20 7365 6c66 2e63  anguage = self.c
-00019270: 6865 636b 5f6c 616e 6775 6167 6528 6672  heck_language(fr
-00019280: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-00019290: 6c61 6e67 7561 6765 2c20 7365 6c66 2e6c  language, self.l
-000192a0: 616e 6775 6167 655f 6d61 702c 206f 7574  anguage_map, out
-000192b0: 7075 745f 7a68 3d73 656c 662e 6f75 7470  put_zh=self.outp
-000192c0: 7574 5f7a 6829 0d0a 0d0a 2020 2020 2020  ut_zh)....      
-000192d0: 2020 7061 796c 6f61 6420 3d20 7b0d 0a20    payload = {.. 
-000192e0: 2020 2020 2020 2020 2020 2022 6361 6368             "cach
-000192f0: 6564 223a 2022 7472 7565 222c 0d0a 2020  ed": "true",..  
-00019300: 2020 2020 2020 2020 2020 2264 6963 7422            "dict"
-00019310: 3a20 2274 7275 6522 2c0d 0a20 2020 2020  : "true",..     
-00019320: 2020 2020 2020 2022 6d65 6469 6122 3a20         "media": 
-00019330: 2274 6578 7422 2c0d 0a20 2020 2020 2020  "text",..       
-00019340: 2020 2020 2022 6f73 5f74 7970 6522 3a20       "os_type": 
-00019350: 2277 6562 222c 0d0a 2020 2020 2020 2020  "web",..        
-00019360: 2020 2020 2272 6570 6c61 6365 6422 3a20      "replaced": 
-00019370: 2274 7275 6522 2c0d 0a20 2020 2020 2020  "true",..       
-00019380: 2020 2020 2022 7265 7175 6573 745f 6964       "request_id
-00019390: 223a 2022 7765 625f 6661 6e79 6922 2c0d  ": "web_fanyi",.
-000193a0: 0a20 2020 2020 2020 2020 2020 2022 736f  .            "so
-000193b0: 7572 6365 223a 2071 7565 7279 5f74 6578  urce": query_tex
-000193c0: 742e 7370 6c69 7428 275c 6e27 292c 0d0a  t.split('\n'),..
-000193d0: 2020 2020 2020 2020 2020 2020 2274 7261              "tra
-000193e0: 6e73 5f74 7970 6522 3a20 6622 7b66 726f  ns_type": f"{fro
-000193f0: 6d5f 6c61 6e67 7561 6765 7d32 7b74 6f5f  m_language}2{to_
-00019400: 6c61 6e67 7561 6765 7d22 2c0d 0a20 2020  language}",..   
-00019410: 2020 2020 2020 2020 2022 6272 6f77 7365           "browse
-00019420: 725f 6964 223a 2073 656c 662e 6272 6f77  r_id": self.brow
-00019430: 7365 725f 6461 7461 5b27 6272 6f77 7365  ser_data['browse
-00019440: 725f 6964 275d 2c0d 0a20 2020 2020 2020  r_id'],..       
-00019450: 207d 0d0a 0d0a 2020 2020 2020 2020 6966   }....        if
-00019460: 2066 726f 6d5f 6c61 6e67 7561 6765 203d   from_language =
-00019470: 3d20 2761 7574 6f27 3a0d 0a20 2020 2020  = 'auto':..     
-00019480: 2020 2020 2020 2070 6179 6c6f 6164 2e75         payload.u
-00019490: 7064 6174 6528 7b27 6465 7465 6374 273a  pdate({'detect':
-000194a0: 2027 7472 7565 277d 290d 0a20 2020 2020   'true'})..     
-000194b0: 2020 2069 6620 7573 655f 646f 6d61 696e     if use_domain
-000194c0: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
-000194d0: 6179 6c6f 6164 2e75 7064 6174 6528 7b22  ayload.update({"
-000194e0: 6469 6374 5f6e 616d 6522 3a20 7573 655f  dict_name": use_
-000194f0: 646f 6d61 696e 2c20 2275 7365 5f63 6f6d  domain, "use_com
-00019500: 6d6f 6e5f 6469 6374 223a 2022 7472 7565  mon_dict": "true
-00019510: 227d 290d 0a0d 0a20 2020 2020 2020 205f  "})....        _
-00019520: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
-00019530: 6f70 7469 6f6e 7328 7365 6c66 2e61 7069  options(self.api
-00019540: 5f75 726c 2c20 6865 6164 6572 733d 7365  _url, headers=se
-00019550: 6c66 2e68 6f73 745f 6865 6164 6572 732c  lf.host_headers,
-00019560: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
-00019570: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
-00019580: 7329 0d0a 2020 2020 2020 2020 7220 3d20  s)..        r = 
-00019590: 7365 6c66 2e73 6573 7369 6f6e 2e70 6f73  self.session.pos
-000195a0: 7428 7365 6c66 2e61 7069 5f75 726c 2c20  t(self.api_url, 
-000195b0: 6865 6164 6572 733d 7365 6c66 2e61 7069  headers=self.api
-000195c0: 5f68 6561 6465 7273 2c20 6a73 6f6e 3d70  _headers, json=p
-000195d0: 6179 6c6f 6164 2c20 7469 6d65 6f75 743d  ayload, timeout=
-000195e0: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
-000195f0: 3d70 726f 7869 6573 290d 0a20 2020 2020  =proxies)..     
-00019600: 2020 2072 2e72 6169 7365 5f66 6f72 5f73     r.raise_for_s
-00019610: 7461 7475 7328 290d 0a20 2020 2020 2020  tatus()..       
-00019620: 2064 6174 6120 3d20 722e 6a73 6f6e 2829   data = r.json()
-00019630: 0d0a 2020 2020 2020 2020 7469 6d65 2e73  ..        time.s
-00019640: 6c65 6570 2873 6c65 6570 5f73 6563 6f6e  leep(sleep_secon
-00019650: 6473 290d 0a20 2020 2020 2020 2073 656c  ds)..        sel
-00019660: 662e 7175 6572 795f 636f 756e 7420 2b3d  f.query_count +=
-00019670: 2031 0d0a 2020 2020 2020 2020 7265 7475   1..        retu
-00019680: 726e 2064 6174 6120 6966 2069 735f 6465  rn data if is_de
-00019690: 7461 696c 5f72 6573 756c 7420 656c 7365  tail_result else
-000196a0: 2027 5c6e 272e 6a6f 696e 285b 7365 6c66   '\n'.join([self
-000196b0: 2e64 6563 7279 7074 2869 7465 6d29 2066  .decrypt(item) f
-000196c0: 6f72 2069 7465 6d20 696e 2064 6174 615b  or item in data[
-000196d0: 2774 6172 6765 7427 5d5d 290d 0a0d 0a0d  'target']]).....
-000196e0: 0a63 6c61 7373 2044 6565 706c 2854 7365  .class Deepl(Tse
-000196f0: 293a 0d0a 2020 2020 6465 6620 5f5f 696e  ):..    def __in
-00019700: 6974 5f5f 2873 656c 6629 3a0d 0a20 2020  it__(self):..   
-00019710: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
-00019720: 6e69 745f 5f28 290d 0a20 2020 2020 2020  nit__()..       
-00019730: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
-00019740: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
-00019750: 2020 2020 2020 2020 7365 6c66 2e68 6f73          self.hos
-00019760: 745f 7572 6c20 3d20 2768 7474 7073 3a2f  t_url = 'https:/
-00019770: 2f77 7777 2e64 6565 706c 2e63 6f6d 2f74  /www.deepl.com/t
-00019780: 7261 6e73 6c61 746f 7227 0d0a 2020 2020  ranslator'..    
-00019790: 2020 2020 7365 6c66 2e61 7069 5f75 726c      self.api_url
-000197a0: 203d 2027 6874 7470 733a 2f2f 7777 7732   = 'https://www2
-000197b0: 2e64 6565 706c 2e63 6f6d 2f6a 736f 6e72  .deepl.com/jsonr
-000197c0: 7063 270d 0a20 2020 2020 2020 2073 656c  pc'..        sel
-000197d0: 662e 686f 7374 5f68 6561 6465 7273 203d  f.host_headers =
-000197e0: 2073 656c 662e 6765 745f 6865 6164 6572   self.get_header
-000197f0: 7328 7365 6c66 2e68 6f73 745f 7572 6c2c  s(self.host_url,
-00019800: 2069 665f 6170 693d 4661 6c73 6529 0d0a   if_api=False)..
-00019810: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
-00019820: 5f68 6561 6465 7273 203d 2073 656c 662e  _headers = self.
-00019830: 6765 745f 6865 6164 6572 7328 7365 6c66  get_headers(self
-00019840: 2e68 6f73 745f 7572 6c2c 2069 665f 6170  .host_url, if_ap
-00019850: 693d 5472 7565 2c20 6966 5f61 6a61 785f  i=True, if_ajax_
-00019860: 666f 725f 6170 693d 4661 6c73 652c 2069  for_api=False, i
-00019870: 665f 6a73 6f6e 5f66 6f72 5f61 7069 3d54  f_json_for_api=T
-00019880: 7275 6529 0d0a 2020 2020 2020 2020 7365  rue)..        se
-00019890: 6c66 2e70 6172 616d 7320 3d20 7b27 7370  lf.params = {'sp
-000198a0: 6c69 7427 3a20 7b27 6d65 7468 6f64 273a  lit': {'method':
-000198b0: 2027 4c4d 545f 7370 6c69 745f 7465 7874   'LMT_split_text
-000198c0: 277d 2c20 2768 616e 646c 6527 3a20 7b27  '}, 'handle': {'
-000198d0: 6d65 7468 6f64 273a 2027 4c4d 545f 6861  method': 'LMT_ha
-000198e0: 6e64 6c65 5f6a 6f62 7327 7d7d 0d0a 2020  ndle_jobs'}}..  
-000198f0: 2020 2020 2020 7365 6c66 2e72 6571 7565        self.reque
-00019900: 7374 5f69 6420 3d20 696e 7428 7261 6e64  st_id = int(rand
-00019910: 6f6d 2e72 616e 6472 616e 6765 2831 3030  om.randrange(100
-00019920: 2c20 3130 3030 3029 202a 2031 3030 3030  , 10000) * 10000
-00019930: 202b 2034 290d 0a20 2020 2020 2020 2073   + 4)..        s
-00019940: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
-00019950: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
-00019960: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
-00019970: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-00019980: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
-00019990: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
-000199a0: 2e6f 7574 7075 745f 7a68 203d 2027 7a68  .output_zh = 'zh
-000199b0: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
-000199c0: 696e 7075 745f 6c69 6d69 7420 3d20 696e  input_limit = in
-000199d0: 7428 3565 3329 0d0a 2020 2020 2020 2020  t(5e3)..        
-000199e0: 7365 6c66 2e64 6566 6175 6c74 5f66 726f  self.default_fro
-000199f0: 6d5f 6c61 6e67 7561 6765 203d 2073 656c  m_language = sel
-00019a00: 662e 6f75 7470 7574 5f7a 680d 0a0d 0a20  f.output_zh.... 
-00019a10: 2020 2040 5473 652e 6465 6275 675f 6c61     @Tse.debug_la
-00019a20: 6e67 7561 6765 5f6d 6170 0d0a 2020 2020  nguage_map..    
-00019a30: 6465 6620 6765 745f 6c61 6e67 7561 6765  def get_language
-00019a40: 5f6d 6170 2873 656c 662c 2068 6f73 745f  _map(self, host_
-00019a50: 6874 6d6c 3a20 7374 722c 202a 2a6b 7761  html: str, **kwa
-00019a60: 7267 733a 204c 616e 674d 6170 4b77 6172  rgs: LangMapKwar
-00019a70: 6773 5479 7065 2920 2d3e 2064 6963 743a  gsType) -> dict:
-00019a80: 0d0a 2020 2020 2020 2020 6c61 6e67 5f6c  ..        lang_l
-00019a90: 6973 7420 3d20 6c69 7374 2873 6574 2872  ist = list(set(r
-00019aa0: 652e 636f 6d70 696c 6528 2774 7261 6e73  e.compile('trans
-00019ab0: 6c61 7465 496e 746f 4c61 6e67 5c5c 2e28  lateIntoLang\\.(
-00019ac0: 5c5c 772b 2922 3a27 292e 6669 6e64 616c  \\w+)":').findal
-00019ad0: 6c28 686f 7374 5f68 746d 6c29 2929 0d0a  l(host_html)))..
-00019ae0: 2020 2020 2020 2020 7265 7475 726e 207b          return {
-00019af0: 7d2e 6672 6f6d 6b65 7973 286c 616e 675f  }.fromkeys(lang_
-00019b00: 6c69 7374 2c20 6c61 6e67 5f6c 6973 7429  list, lang_list)
-00019b10: 0d0a 0d0a 2020 2020 6465 6620 7370 6c69  ....    def spli
-00019b20: 745f 7365 6e74 656e 6365 735f 7061 7261  t_sentences_para
-00019b30: 6d28 7365 6c66 2c20 7175 6572 795f 7465  m(self, query_te
-00019b40: 7874 3a20 7374 722c 2066 726f 6d5f 6c61  xt: str, from_la
-00019b50: 6e67 7561 6765 3a20 7374 7229 202d 3e20  nguage: str) -> 
-00019b60: 6469 6374 3a0d 0a20 2020 2020 2020 2064  dict:..        d
-00019b70: 6174 6120 3d20 7b0d 0a20 2020 2020 2020  ata = {..       
-00019b80: 2020 2020 2027 6964 273a 2073 656c 662e       'id': self.
-00019b90: 7265 7175 6573 745f 6964 2c0d 0a20 2020  request_id,..   
-00019ba0: 2020 2020 2020 2020 2027 6a73 6f6e 7270           'jsonrp
-00019bb0: 6327 3a20 2732 2e30 272c 0d0a 2020 2020  c': '2.0',..    
-00019bc0: 2020 2020 2020 2020 2770 6172 616d 7327          'params'
-00019bd0: 3a20 7b0d 0a20 2020 2020 2020 2020 2020  : {..           
-00019be0: 2020 2020 2027 7465 7874 7327 3a20 7175       'texts': qu
-00019bf0: 6572 795f 7465 7874 2e73 706c 6974 2827  ery_text.split('
-00019c00: 5c6e 2729 2c0d 0a20 2020 2020 2020 2020  \n'),..         
-00019c10: 2020 2020 2020 2027 636f 6d6d 6f6e 4a6f         'commonJo
-00019c20: 6250 6172 616d 7327 3a20 7b27 6d6f 6465  bParams': {'mode
-00019c30: 273a 2027 7472 616e 736c 6174 6527 7d2c  ': 'translate'},
-00019c40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019c50: 2020 276c 616e 6727 3a20 7b0d 0a20 2020    'lang': {..   
-00019c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019c70: 2027 6c61 6e67 5f75 7365 725f 7365 6c65   'lang_user_sele
-00019c80: 6374 6564 273a 2066 726f 6d5f 6c61 6e67  cted': from_lang
-00019c90: 7561 6765 2c0d 0a20 2020 2020 2020 2020  uage,..         
-00019ca0: 2020 2020 2020 2020 2020 2027 7072 6566             'pref
-00019cb0: 6572 656e 6365 273a 207b 0d0a 2020 2020  erence': {..    
+00005c50: 656c 662e 7270 6369 6420 3d20 274d 6b45  elf.rpcid = 'MkE
+00005c60: 5742 6327 0d0a 2020 2020 2020 2020 7365  WBc'..        se
+00005c70: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
+00005c80: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
+00005c90: 2e6f 7574 7075 745f 7a68 203d 2027 7a68  .output_zh = 'zh
+00005ca0: 2d43 4e27 0d0a 2020 2020 2020 2020 7365  -CN'..        se
+00005cb0: 6c66 2e69 6e70 7574 5f6c 696d 6974 203d  lf.input_limit =
+00005cc0: 2069 6e74 2835 6533 290d 0a20 2020 2020   int(5e3)..     
+00005cd0: 2020 2073 656c 662e 6465 6661 756c 745f     self.default_
+00005ce0: 6672 6f6d 5f6c 616e 6775 6167 6520 3d20  from_language = 
+00005cf0: 7365 6c66 2e6f 7574 7075 745f 7a68 0d0a  self.output_zh..
+00005d00: 0d0a 2020 2020 4054 7365 2e64 6562 7567  ..    @Tse.debug
+00005d10: 5f6c 616e 6775 6167 655f 6d61 700d 0a20  _language_map.. 
+00005d20: 2020 2064 6566 2067 6574 5f6c 616e 6775     def get_langu
+00005d30: 6167 655f 6d61 7028 7365 6c66 2c20 686f  age_map(self, ho
+00005d40: 7374 5f68 746d 6c3a 2073 7472 2c20 2a2a  st_html: str, **
+00005d50: 6b77 6172 6773 3a20 4c61 6e67 4d61 704b  kwargs: LangMapK
+00005d60: 7761 7267 7354 7970 6529 202d 3e20 6469  wargsType) -> di
+00005d70: 6374 3a0d 0a20 2020 2020 2020 2065 7420  ct:..        et 
+00005d80: 3d20 6c78 6d6c 2e65 7472 6565 2e48 544d  = lxml.etree.HTM
+00005d90: 4c28 686f 7374 5f68 746d 6c29 0d0a 2020  L(host_html)..  
+00005da0: 2020 2020 2020 6c61 6e67 5f6c 6973 7420        lang_list 
+00005db0: 3d20 736f 7274 6564 286c 6973 7428 7365  = sorted(list(se
+00005dc0: 7428 6574 2e78 7061 7468 2827 2f2f 2a2f  t(et.xpath('//*/
+00005dd0: 4064 6174 612d 6c61 6e67 7561 6765 2d63  @data-language-c
+00005de0: 6f64 6527 2929 2929 0d0a 2020 2020 2020  ode'))))..      
+00005df0: 2020 7265 7475 726e 207b 7d2e 6672 6f6d    return {}.from
+00005e00: 6b65 7973 286c 616e 675f 6c69 7374 2c20  keys(lang_list, 
+00005e10: 6c61 6e67 5f6c 6973 7429 0d0a 0d0a 2020  lang_list)....  
+00005e20: 2020 6465 6620 6765 745f 7270 6328 7365    def get_rpc(se
+00005e30: 6c66 2c20 7175 6572 795f 7465 7874 3a20  lf, query_text: 
+00005e40: 7374 722c 2066 726f 6d5f 6c61 6e67 7561  str, from_langua
+00005e50: 6765 3a20 7374 722c 2074 6f5f 6c61 6e67  ge: str, to_lang
+00005e60: 7561 6765 3a20 7374 7229 202d 3e20 6469  uage: str) -> di
+00005e70: 6374 3a0d 0a20 2020 2020 2020 2070 6172  ct:..        par
+00005e80: 616d 203d 206a 736f 6e2e 6475 6d70 7328  am = json.dumps(
+00005e90: 5b5b 7175 6572 795f 7465 7874 2c20 6672  [[query_text, fr
+00005ea0: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
+00005eb0: 6c61 6e67 7561 6765 2c20 5472 7565 5d2c  language, True],
+00005ec0: 205b 315d 5d29 0d0a 2020 2020 2020 2020   [1]])..        
+00005ed0: 7270 6320 3d20 6a73 6f6e 2e64 756d 7073  rpc = json.dumps
+00005ee0: 285b 5b5b 7365 6c66 2e72 7063 6964 2c20  ([[[self.rpcid, 
+00005ef0: 7061 7261 6d2c 204e 6f6e 652c 2022 6765  param, None, "ge
+00005f00: 6e65 7269 6322 5d5d 5d29 0d0a 2020 2020  neric"]]])..    
+00005f10: 2020 2020 7265 7475 726e 207b 2766 2e72      return {'f.r
+00005f20: 6571 273a 2072 7063 7d0d 0a0d 0a20 2020  eq': rpc}....   
+00005f30: 2064 6566 2067 6574 5f69 6e66 6f28 7365   def get_info(se
+00005f40: 6c66 2c20 686f 7374 5f68 746d 6c3a 2073  lf, host_html: s
+00005f50: 7472 2920 2d3e 2064 6963 743a 0d0a 2020  tr) -> dict:..  
+00005f60: 2020 2020 2020 6461 7461 5f73 7472 203d        data_str =
+00005f70: 2072 652e 636f 6d70 696c 6528 7227 7769   re.compile(r'wi
+00005f80: 6e64 6f77 2e57 495a 5f67 6c6f 6261 6c5f  ndow.WIZ_global_
+00005f90: 6461 7461 203d 2028 2e2a 3f29 3b3c 2f73  data = (.*?);</s
+00005fa0: 6372 6970 743e 2729 2e66 696e 6461 6c6c  cript>').findall
+00005fb0: 2868 6f73 745f 6874 6d6c 295b 305d 0d0a  (host_html)[0]..
+00005fc0: 2020 2020 2020 2020 6461 7461 203d 2065          data = e
+00005fd0: 7865 636a 732e 6576 616c 2864 6174 615f  xecjs.eval(data_
+00005fe0: 7374 7229 0d0a 2020 2020 2020 2020 7265  str)..        re
+00005ff0: 7475 726e 207b 2762 6c27 3a20 6461 7461  turn {'bl': data
+00006000: 5b27 6366 6232 6827 5d2c 2027 662e 7369  ['cfb2h'], 'f.si
+00006010: 6427 3a20 6461 7461 5b27 4664 7246 4a65  d': data['FdrFJe
+00006020: 275d 7d0d 0a0d 0a20 2020 2064 6566 2067  ']}....    def g
+00006030: 6574 5f63 6f6e 7365 6e74 5f63 6f6f 6b69  et_consent_cooki
+00006040: 6528 7365 6c66 2c20 636f 6e73 656e 745f  e(self, consent_
+00006050: 6874 6d6c 3a20 7374 7229 202d 3e20 7374  html: str) -> st
+00006060: 723a 2020 2320 6279 206d 6572 6375 7265  r:  # by mercure
+00006070: 652e 206d 6572 6765 6420 6275 7420 6e6f  e. merged but no
+00006080: 7420 7665 7269 6679 2e0d 0a20 2020 2020  t verify...     
+00006090: 2020 2065 7420 3d20 6c78 6d6c 2e65 7472     et = lxml.etr
+000060a0: 6565 2e48 544d 4c28 636f 6e73 656e 745f  ee.HTML(consent_
+000060b0: 6874 6d6c 290d 0a20 2020 2020 2020 2069  html)..        i
+000060c0: 6e70 7574 5f65 6c65 6d65 6e74 203d 2065  nput_element = e
+000060d0: 742e 7870 6174 6828 272e 2f2f 696e 7075  t.xpath('.//inpu
+000060e0: 745b 4074 7970 653d 2268 6964 6465 6e22  t[@type="hidden"
+000060f0: 5d5b 406e 616d 653d 2276 225d 2729 0d0a  ][@name="v"]')..
+00006100: 2020 2020 2020 2020 636f 6f6b 6965 5f76          cookie_v
+00006110: 616c 7565 203d 2069 6e70 7574 5f65 6c65  alue = input_ele
+00006120: 6d65 6e74 5b30 5d2e 6174 7472 6962 2e67  ment[0].attrib.g
+00006130: 6574 2827 7661 6c75 6527 2920 6966 2069  et('value') if i
+00006140: 6e70 7574 5f65 6c65 6d65 6e74 2065 6c73  nput_element els
+00006150: 6520 2763 6227 0d0a 2020 2020 2020 2020  e 'cb'..        
+00006160: 7265 7475 726e 2066 2743 4f4e 5345 4e54  return f'CONSENT
+00006170: 3d59 4553 2b7b 636f 6f6b 6965 5f76 616c  =YES+{cookie_val
+00006180: 7565 7d27 2020 2320 636f 6f6b 6965 2043  ue}'  # cookie C
+00006190: 4f4e 5345 4e54 3d59 4553 2b63 6220 776f  ONSENT=YES+cb wo
+000061a0: 726b 7320 666f 7220 6e6f 770d 0a0d 0a20  rks for now.... 
+000061b0: 2020 2040 5473 652e 7469 6d65 5f73 7461     @Tse.time_sta
+000061c0: 740d 0a20 2020 2040 5473 652e 6368 6563  t..    @Tse.chec
+000061d0: 6b5f 7175 6572 790d 0a20 2020 2064 6566  k_query..    def
+000061e0: 2067 6f6f 676c 655f 6170 6928 7365 6c66   google_api(self
+000061f0: 2c20 7175 6572 795f 7465 7874 3a20 7374  , query_text: st
+00006200: 722c 2066 726f 6d5f 6c61 6e67 7561 6765  r, from_language
+00006210: 3a20 7374 7220 3d20 2761 7574 6f27 2c20  : str = 'auto', 
+00006220: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
+00006230: 203d 2027 656e 272c 202a 2a6b 7761 7267   = 'en', **kwarg
+00006240: 733a 2041 7069 4b77 6172 6773 5479 7065  s: ApiKwargsType
+00006250: 2920 2d3e 2055 6e69 6f6e 5b73 7472 2c20  ) -> Union[str, 
+00006260: 6469 6374 5d3a 0d0a 2020 2020 2020 2020  dict]:..        
+00006270: 2222 220d 0a20 2020 2020 2020 2068 7474  """..        htt
+00006280: 7073 3a2f 2f74 7261 6e73 6c61 7465 2e67  ps://translate.g
+00006290: 6f6f 676c 652e 636f 6d2c 2068 7474 7073  oogle.com, https
+000062a0: 3a2f 2f74 7261 6e73 6c61 7465 2e67 6f6f  ://translate.goo
+000062b0: 676c 652e 636e 2e0d 0a20 2020 2020 2020  gle.cn...       
+000062c0: 203a 7061 7261 6d20 7175 6572 795f 7465   :param query_te
+000062d0: 7874 3a20 7374 722c 206d 7573 742e 0d0a  xt: str, must...
+000062e0: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
+000062f0: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
+00006300: 722c 2064 6566 6175 6c74 2027 6175 746f  r, default 'auto
+00006310: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
+00006320: 616d 2074 6f5f 6c61 6e67 7561 6765 3a20  am to_language: 
+00006330: 7374 722c 2064 6566 6175 6c74 2027 656e  str, default 'en
+00006340: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
+00006350: 616d 202a 2a6b 7761 7267 733a 0d0a 2020  am **kwargs:..  
+00006360: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+00006370: 6172 616d 2074 696d 656f 7574 3a20 666c  aram timeout: fl
+00006380: 6f61 742c 2064 6566 6175 6c74 204e 6f6e  oat, default Non
+00006390: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+000063a0: 2020 2020 3a70 6172 616d 2070 726f 7869      :param proxi
+000063b0: 6573 3a20 6469 6374 2c20 6465 6661 756c  es: dict, defaul
+000063c0: 7420 4e6f 6e65 2e0d 0a20 2020 2020 2020  t None...       
+000063d0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+000063e0: 736c 6565 705f 7365 636f 6e64 733a 2066  sleep_seconds: f
+000063f0: 6c6f 6174 2c20 6465 6661 756c 7420 302e  loat, default 0.
+00006400: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00006410: 2020 3a70 6172 616d 2069 735f 6465 7461    :param is_deta
+00006420: 696c 5f72 6573 756c 743a 2062 6f6f 6c2c  il_result: bool,
+00006430: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
+00006440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006450: 203a 7061 7261 6d20 6966 5f69 676e 6f72   :param if_ignor
+00006460: 655f 6c69 6d69 745f 6f66 5f6c 656e 6774  e_limit_of_lengt
+00006470: 683a 2062 6f6f 6c2c 2064 6566 6175 6c74  h: bool, default
+00006480: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
+00006490: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+000064a0: 6c69 6d69 745f 6f66 5f6c 656e 6774 683a  limit_of_length:
+000064b0: 2069 6e74 2c20 6465 6661 756c 7420 3230   int, default 20
+000064c0: 3030 302e 0d0a 2020 2020 2020 2020 2020  000...          
+000064d0: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
+000064e0: 6967 6e6f 7265 5f65 6d70 7479 5f71 7565  ignore_empty_que
+000064f0: 7279 3a20 626f 6f6c 2c20 6465 6661 756c  ry: bool, defaul
+00006500: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+00006510: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00006520: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
+00006530: 6166 7465 725f 6672 6571 3a20 696e 742c  after_freq: int,
+00006540: 2064 6566 6175 6c74 2031 3030 302e 0d0a   default 1000...
+00006550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006560: 3a70 6172 616d 2075 7064 6174 655f 7365  :param update_se
+00006570: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
+00006580: 6e64 733a 2066 6c6f 6174 2c20 6465 6661  nds: float, defa
+00006590: 756c 7420 3135 3030 2e0d 0a20 2020 2020  ult 1500...     
+000065a0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+000065b0: 6d20 6966 5f73 686f 775f 7469 6d65 5f73  m if_show_time_s
+000065c0: 7461 743a 2062 6f6f 6c2c 2064 6566 6175  tat: bool, defau
+000065d0: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+000065e0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+000065f0: 6d20 7368 6f77 5f74 696d 655f 7374 6174  m show_time_stat
+00006600: 5f70 7265 6369 7369 6f6e 3a20 696e 742c  _precision: int,
+00006610: 2064 6566 6175 6c74 2032 2e0d 0a20 2020   default 2...   
+00006620: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00006630: 7261 6d20 6966 5f70 7269 6e74 5f77 6172  ram if_print_war
+00006640: 6e69 6e67 3a20 626f 6f6c 2c20 6465 6661  ning: bool, defa
+00006650: 756c 7420 5472 7565 2e0d 0a20 2020 2020  ult True...     
+00006660: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00006670: 6d20 7265 7365 745f 686f 7374 5f75 726c  m reset_host_url
+00006680: 3a20 7374 722c 2064 6566 6175 6c74 204e  : str, default N
+00006690: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
+000066a0: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
+000066b0: 6368 6563 6b5f 7265 7365 745f 686f 7374  check_reset_host
+000066c0: 5f75 726c 3a20 626f 6f6c 2c20 6465 6661  _url: bool, defa
+000066d0: 756c 7420 5472 7565 2e0d 0a20 2020 2020  ult True...     
+000066e0: 2020 203a 7265 7475 726e 3a20 7374 7220     :return: str 
+000066f0: 6f72 2064 6963 740d 0a20 2020 2020 2020  or dict..       
+00006700: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
+00006710: 7265 7365 745f 686f 7374 5f75 726c 203d  reset_host_url =
+00006720: 206b 7761 7267 732e 6765 7428 2772 6573   kwargs.get('res
+00006730: 6574 5f68 6f73 745f 7572 6c27 2c20 4e6f  et_host_url', No
+00006740: 6e65 290d 0a20 2020 2020 2020 2069 6620  ne)..        if 
+00006750: 7265 7365 745f 686f 7374 5f75 726c 2061  reset_host_url a
+00006760: 6e64 2072 6573 6574 5f68 6f73 745f 7572  nd reset_host_ur
+00006770: 6c20 213d 2073 656c 662e 686f 7374 5f75  l != self.host_u
+00006780: 726c 3a0d 0a20 2020 2020 2020 2020 2020  rl:..           
+00006790: 2069 6620 6b77 6172 6773 2e67 6574 2827   if kwargs.get('
+000067a0: 6966 5f63 6865 636b 5f72 6573 6574 5f68  if_check_reset_h
+000067b0: 6f73 745f 7572 6c27 2c20 5472 7565 2920  ost_url', True) 
+000067c0: 616e 6420 6e6f 7420 7265 7365 745f 686f  and not reset_ho
+000067d0: 7374 5f75 726c 5b3a 3235 5d20 3d3d 2027  st_url[:25] == '
+000067e0: 6874 7470 733a 2f2f 7472 616e 736c 6174  https://translat
+000067f0: 652e 676f 6f67 6c65 2e27 3a0d 0a20 2020  e.google.':..   
+00006800: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+00006810: 7365 2054 7261 6e73 6c61 746f 7245 7272  se TranslatorErr
+00006820: 6f72 0d0a 2020 2020 2020 2020 2020 2020  or..            
+00006830: 7365 6c66 2e68 6f73 745f 7572 6c20 3d20  self.host_url = 
+00006840: 7265 7365 745f 686f 7374 5f75 726c 2e73  reset_host_url.s
+00006850: 7472 6970 2827 2f27 290d 0a20 2020 2020  trip('/')..     
+00006860: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00006870: 2020 2020 2020 7573 655f 636e 5f63 6f6e        use_cn_con
+00006880: 6469 7469 6f6e 203d 206b 7761 7267 732e  dition = kwargs.
+00006890: 6765 7428 2769 665f 7573 655f 636e 5f68  get('if_use_cn_h
+000068a0: 6f73 7427 2c20 4e6f 6e65 2920 6f72 2073  ost', None) or s
+000068b0: 656c 662e 7365 7276 6572 5f72 6567 696f  elf.server_regio
+000068c0: 6e20 3d3d 2027 434e 270d 0a20 2020 2020  n == 'CN'..     
+000068d0: 2020 2020 2020 2073 656c 662e 686f 7374         self.host
+000068e0: 5f75 726c 203d 2073 656c 662e 636e 5f68  _url = self.cn_h
+000068f0: 6f73 745f 7572 6c20 6966 2075 7365 5f63  ost_url if use_c
+00006900: 6e5f 636f 6e64 6974 696f 6e20 656c 7365  n_condition else
+00006910: 2073 656c 662e 656e 5f68 6f73 745f 7572   self.en_host_ur
+00006920: 6c0d 0a0d 0a20 2020 2020 2020 2069 6620  l....        if 
+00006930: 7365 6c66 2e68 6f73 745f 7572 6c5b 2d32  self.host_url[-2
+00006940: 3a5d 203d 3d20 2763 6e27 3a0d 0a20 2020  :] == 'cn':..   
+00006950: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
+00006960: 7261 6e73 6c61 746f 7245 7272 6f72 2827  ranslatorError('
+00006970: 476f 6f67 6c65 2073 6572 7669 6365 2077  Google service w
+00006980: 6173 206f 6666 6c69 6e65 2069 6e20 696e  as offline in in
+00006990: 6c61 6e64 206f 6620 4368 696e 6120 6f6e  land of China on
+000069a0: 204f 6374 2032 3032 322e 2729 0d0a 0d0a   Oct 2022.')....
+000069b0: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
+000069c0: 5f75 726c 203d 2066 277b 7365 6c66 2e68  _url = f'{self.h
+000069d0: 6f73 745f 7572 6c7d 7b73 656c 662e 6170  ost_url}{self.ap
+000069e0: 695f 7572 6c5f 7061 7468 7d27 0d0a 2020  i_url_path}'..  
+000069f0: 2020 2020 2020 7365 6c66 2e68 6f73 745f        self.host_
+00006a00: 6865 6164 6572 7320 3d20 7365 6c66 2e68  headers = self.h
+00006a10: 6f73 745f 6865 6164 6572 7320 6f72 2073  ost_headers or s
+00006a20: 656c 662e 6765 745f 6865 6164 6572 7328  elf.get_headers(
+00006a30: 7365 6c66 2e68 6f73 745f 7572 6c2c 2069  self.host_url, i
+00006a40: 665f 6170 693d 4661 6c73 6529 2020 2320  f_api=False)  # 
+00006a50: 7265 7573 6520 636f 6f6b 6965 2068 6561  reuse cookie hea
+00006a60: 6465 720d 0a20 2020 2020 2020 2073 656c  der..        sel
+00006a70: 662e 6170 695f 6865 6164 6572 7320 3d20  f.api_headers = 
+00006a80: 7365 6c66 2e67 6574 5f68 6561 6465 7273  self.get_headers
+00006a90: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
+00006aa0: 6966 5f61 7069 3d54 7275 652c 2069 665f  if_api=True, if_
+00006ab0: 7265 6665 7265 725f 666f 725f 686f 7374  referer_for_host
+00006ac0: 3d54 7275 652c 2069 665f 616a 6178 5f66  =True, if_ajax_f
+00006ad0: 6f72 5f61 7069 3d54 7275 6529 0d0a 0d0a  or_api=True)....
+00006ae0: 2020 2020 2020 2020 7469 6d65 6f75 7420          timeout 
+00006af0: 3d20 6b77 6172 6773 2e67 6574 2827 7469  = kwargs.get('ti
+00006b00: 6d65 6f75 7427 2c20 4e6f 6e65 290d 0a20  meout', None).. 
+00006b10: 2020 2020 2020 2070 726f 7869 6573 203d         proxies =
+00006b20: 206b 7761 7267 732e 6765 7428 2770 726f   kwargs.get('pro
+00006b30: 7869 6573 272c 204e 6f6e 6529 0d0a 2020  xies', None)..  
+00006b40: 2020 2020 2020 736c 6565 705f 7365 636f        sleep_seco
+00006b50: 6e64 7320 3d20 6b77 6172 6773 2e67 6574  nds = kwargs.get
+00006b60: 2827 736c 6565 705f 7365 636f 6e64 7327  ('sleep_seconds'
+00006b70: 2c20 3029 0d0a 2020 2020 2020 2020 6966  , 0)..        if
+00006b80: 5f70 7269 6e74 5f77 6172 6e69 6e67 203d  _print_warning =
+00006b90: 206b 7761 7267 732e 6765 7428 2769 665f   kwargs.get('if_
+00006ba0: 7072 696e 745f 7761 726e 696e 6727 2c20  print_warning', 
+00006bb0: 5472 7565 290d 0a20 2020 2020 2020 2069  True)..        i
+00006bc0: 735f 6465 7461 696c 5f72 6573 756c 7420  s_detail_result 
+00006bd0: 3d20 6b77 6172 6773 2e67 6574 2827 6973  = kwargs.get('is
+00006be0: 5f64 6574 6169 6c5f 7265 7375 6c74 272c  _detail_result',
+00006bf0: 2046 616c 7365 290d 0a20 2020 2020 2020   False)..       
+00006c00: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
+00006c10: 6166 7465 725f 6672 6571 203d 206b 7761  after_freq = kwa
+00006c20: 7267 732e 6765 7428 2775 7064 6174 655f  rgs.get('update_
+00006c30: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
+00006c40: 6571 272c 2073 656c 662e 6465 6661 756c  eq', self.defaul
+00006c50: 745f 7365 7373 696f 6e5f 6672 6571 290d  t_session_freq).
+00006c60: 0a20 2020 2020 2020 2075 7064 6174 655f  .        update_
+00006c70: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
+00006c80: 636f 6e64 7320 3d20 6b77 6172 6773 2e67  conds = kwargs.g
+00006c90: 6574 2827 7570 6461 7465 5f73 6573 7369  et('update_sessi
+00006ca0: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
+00006cb0: 272c 2073 656c 662e 6465 6661 756c 745f  ', self.default_
+00006cc0: 7365 7373 696f 6e5f 7365 636f 6e64 7329  session_seconds)
+00006cd0: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
+00006ce0: 6865 636b 5f69 6e70 7574 5f6c 696d 6974  heck_input_limit
+00006cf0: 2871 7565 7279 5f74 6578 742c 2073 656c  (query_text, sel
+00006d00: 662e 696e 7075 745f 6c69 6d69 7429 0d0a  f.input_limit)..
+00006d10: 0d0a 2020 2020 2020 2020 6e6f 745f 7570  ..        not_up
+00006d20: 6461 7465 5f63 6f6e 645f 6672 6571 203d  date_cond_freq =
+00006d30: 2031 2069 6620 7365 6c66 2e71 7565 7279   1 if self.query
+00006d40: 5f63 6f75 6e74 2025 2075 7064 6174 655f  _count % update_
+00006d50: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
+00006d60: 6571 2021 3d20 3020 656c 7365 2030 0d0a  eq != 0 else 0..
+00006d70: 2020 2020 2020 2020 6e6f 745f 7570 6461          not_upda
+00006d80: 7465 5f63 6f6e 645f 7469 6d65 203d 2031  te_cond_time = 1
+00006d90: 2069 6620 7469 6d65 2e74 696d 6528 2920   if time.time() 
+00006da0: 2d20 7365 6c66 2e62 6567 696e 5f74 696d  - self.begin_tim
+00006db0: 6520 3c20 7570 6461 7465 5f73 6573 7369  e < update_sessi
+00006dc0: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
+00006dd0: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
+00006de0: 2069 6620 6e6f 7420 2873 656c 662e 7365   if not (self.se
+00006df0: 7373 696f 6e20 616e 6420 7365 6c66 2e6c  ssion and self.l
+00006e00: 616e 6775 6167 655f 6d61 7020 616e 6420  anguage_map and 
+00006e10: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
+00006e20: 6672 6571 2061 6e64 206e 6f74 5f75 7064  freq and not_upd
+00006e30: 6174 655f 636f 6e64 5f74 696d 6529 3a0d  ate_cond_time):.
+00006e40: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00006e50: 662e 6265 6769 6e5f 7469 6d65 203d 2074  f.begin_time = t
+00006e60: 696d 652e 7469 6d65 2829 0d0a 2020 2020  ime.time()..    
+00006e70: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
+00006e80: 7369 6f6e 203d 2072 6571 7565 7374 732e  sion = requests.
+00006e90: 5365 7373 696f 6e28 290d 0a20 2020 2020  Session()..     
+00006ea0: 2020 2020 2020 2072 203d 2073 656c 662e         r = self.
+00006eb0: 7365 7373 696f 6e2e 6765 7428 7365 6c66  session.get(self
+00006ec0: 2e68 6f73 745f 7572 6c2c 2068 6561 6465  .host_url, heade
+00006ed0: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
+00006ee0: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+00006ef0: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+00006f00: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
+00006f10: 2020 2020 2069 6620 2763 6f6e 7365 6e74       if 'consent
+00006f20: 2e67 6f6f 676c 652e 636f 6d27 203d 3d20  .google.com' == 
+00006f30: 7572 6c6c 6962 2e70 6172 7365 2e75 726c  urllib.parse.url
+00006f40: 7061 7273 6528 722e 7572 6c29 2e68 6f73  parse(r.url).hos
+00006f50: 746e 616d 653a 0d0a 2020 2020 2020 2020  tname:..        
+00006f60: 2020 2020 2020 2020 7365 6c66 2e68 6f73          self.hos
+00006f70: 745f 6865 6164 6572 732e 7570 6461 7465  t_headers.update
+00006f80: 287b 2763 6f6f 6b69 6527 3a20 7365 6c66  ({'cookie': self
+00006f90: 2e67 6574 5f63 6f6e 7365 6e74 5f63 6f6f  .get_consent_coo
+00006fa0: 6b69 6528 722e 7465 7874 297d 290d 0a20  kie(r.text)}).. 
+00006fb0: 2020 2020 2020 2020 2020 2020 2020 2068                 h
+00006fc0: 6f73 745f 6874 6d6c 203d 2073 656c 662e  ost_html = self.
+00006fd0: 7365 7373 696f 6e2e 6765 7428 7365 6c66  session.get(self
+00006fe0: 2e68 6f73 745f 7572 6c2c 2068 6561 6465  .host_url, heade
+00006ff0: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
+00007000: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+00007010: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+00007020: 726f 7869 6573 292e 7465 7874 0d0a 2020  roxies).text..  
+00007030: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+00007040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007050: 2068 6f73 745f 6874 6d6c 203d 2072 2e74   host_html = r.t
+00007060: 6578 740d 0a20 2020 2020 2020 2020 2020  ext..           
+00007070: 2064 6562 7567 5f6c 616e 675f 6b77 6172   debug_lang_kwar
+00007080: 6773 203d 2073 656c 662e 6465 6275 675f  gs = self.debug_
+00007090: 6c61 6e67 5f6b 7761 7267 7328 6672 6f6d  lang_kwargs(from
+000070a0: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
+000070b0: 6e67 7561 6765 2c20 7365 6c66 2e64 6566  nguage, self.def
+000070c0: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
+000070d0: 6765 2c20 6966 5f70 7269 6e74 5f77 6172  ge, if_print_war
+000070e0: 6e69 6e67 290d 0a20 2020 2020 2020 2020  ning)..         
+000070f0: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
+00007100: 5f6d 6170 203d 2073 656c 662e 6765 745f  _map = self.get_
+00007110: 6c61 6e67 7561 6765 5f6d 6170 2868 6f73  language_map(hos
+00007120: 745f 6874 6d6c 2c20 2a2a 6465 6275 675f  t_html, **debug_
+00007130: 6c61 6e67 5f6b 7761 7267 7329 0d0a 0d0a  lang_kwargs)....
+00007140: 2020 2020 2020 2020 6672 6f6d 5f6c 616e          from_lan
+00007150: 6775 6167 652c 2074 6f5f 6c61 6e67 7561  guage, to_langua
+00007160: 6765 203d 2073 656c 662e 6368 6563 6b5f  ge = self.check_
+00007170: 6c61 6e67 7561 6765 2866 726f 6d5f 6c61  language(from_la
+00007180: 6e67 7561 6765 2c20 746f 5f6c 616e 6775  nguage, to_langu
+00007190: 6167 652c 2073 656c 662e 6c61 6e67 7561  age, self.langua
+000071a0: 6765 5f6d 6170 2c20 6f75 7470 7574 5f7a  ge_map, output_z
+000071b0: 683d 7365 6c66 2e6f 7574 7075 745f 7a68  h=self.output_zh
+000071c0: 290d 0a0d 0a20 2020 2020 2020 2072 7063  )....        rpc
+000071d0: 5f64 6174 6120 3d20 7365 6c66 2e67 6574  _data = self.get
+000071e0: 5f72 7063 2871 7565 7279 5f74 6578 742c  _rpc(query_text,
+000071f0: 2066 726f 6d5f 6c61 6e67 7561 6765 2c20   from_language, 
+00007200: 746f 5f6c 616e 6775 6167 6529 0d0a 2020  to_language)..  
+00007210: 2020 2020 2020 7270 635f 6461 7461 203d        rpc_data =
+00007220: 2075 726c 6c69 622e 7061 7273 652e 7572   urllib.parse.ur
+00007230: 6c65 6e63 6f64 6528 7270 635f 6461 7461  lencode(rpc_data
+00007240: 290d 0a20 2020 2020 2020 2072 203d 2073  )..        r = s
+00007250: 656c 662e 7365 7373 696f 6e2e 706f 7374  elf.session.post
+00007260: 2873 656c 662e 6170 695f 7572 6c2c 2068  (self.api_url, h
+00007270: 6561 6465 7273 3d73 656c 662e 6170 695f  eaders=self.api_
+00007280: 6865 6164 6572 732c 2064 6174 613d 7270  headers, data=rp
+00007290: 635f 6461 7461 2c20 7469 6d65 6f75 743d  c_data, timeout=
+000072a0: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
+000072b0: 3d70 726f 7869 6573 290d 0a20 2020 2020  =proxies)..     
+000072c0: 2020 2072 2e72 6169 7365 5f66 6f72 5f73     r.raise_for_s
+000072d0: 7461 7475 7328 290d 0a20 2020 2020 2020  tatus()..       
+000072e0: 206a 736f 6e5f 6461 7461 203d 206a 736f   json_data = jso
+000072f0: 6e2e 6c6f 6164 7328 722e 7465 7874 5b36  n.loads(r.text[6
+00007300: 3a5d 290d 0a20 2020 2020 2020 2064 6174  :])..        dat
+00007310: 6120 3d20 6a73 6f6e 2e6c 6f61 6473 286a  a = json.loads(j
+00007320: 736f 6e5f 6461 7461 5b30 5d5b 325d 290d  son_data[0][2]).
+00007330: 0a20 2020 2020 2020 2074 696d 652e 736c  .        time.sl
+00007340: 6565 7028 736c 6565 705f 7365 636f 6e64  eep(sleep_second
+00007350: 7329 0d0a 2020 2020 2020 2020 7365 6c66  s)..        self
+00007360: 2e71 7565 7279 5f63 6f75 6e74 202b 3d20  .query_count += 
+00007370: 310d 0a20 2020 2020 2020 2072 6574 7572  1..        retur
+00007380: 6e20 7b27 6461 7461 273a 2064 6174 617d  n {'data': data}
+00007390: 2069 6620 6973 5f64 6574 6169 6c5f 7265   if is_detail_re
+000073a0: 7375 6c74 2065 6c73 6520 2720 272e 6a6f  sult else ' '.jo
+000073b0: 696e 285b 785b 305d 2066 6f72 2078 2069  in([x[0] for x i
+000073c0: 6e20 2864 6174 615b 315d 5b30 5d5b 305d  n (data[1][0][0]
+000073d0: 5b35 5d20 6f72 2064 6174 615b 315d 5b30  [5] or data[1][0
+000073e0: 5d29 2069 6620 785b 305d 5d29 0d0a 0d0a  ]) if x[0]])....
+000073f0: 0d0a 636c 6173 7320 4261 6964 7556 3128  ..class BaiduV1(
+00007400: 5473 6529 3a0d 0a20 2020 2064 6566 205f  Tse):..    def _
+00007410: 5f69 6e69 745f 5f28 7365 6c66 293a 0d0a  _init__(self):..
+00007420: 2020 2020 2020 2020 7375 7065 7228 292e          super().
+00007430: 5f5f 696e 6974 5f5f 2829 0d0a 2020 2020  __init__()..    
+00007440: 2020 2020 7365 6c66 2e62 6567 696e 5f74      self.begin_t
+00007450: 696d 6520 3d20 7469 6d65 2e74 696d 6528  ime = time.time(
+00007460: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00007470: 686f 7374 5f75 726c 203d 2027 6874 7470  host_url = 'http
+00007480: 733a 2f2f 6661 6e79 692e 6261 6964 752e  s://fanyi.baidu.
+00007490: 636f 6d27 0d0a 2020 2020 2020 2020 7365  com'..        se
+000074a0: 6c66 2e61 7069 5f75 726c 203d 2027 6874  lf.api_url = 'ht
+000074b0: 7470 733a 2f2f 6661 6e79 692e 6261 6964  tps://fanyi.baid
+000074c0: 752e 636f 6d2f 7472 616e 7361 7069 270d  u.com/transapi'.
+000074d0: 0a20 2020 2020 2020 2073 656c 662e 6765  .        self.ge
+000074e0: 745f 6c61 6e67 5f75 726c 203d 204e 6f6e  t_lang_url = Non
+000074f0: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
+00007500: 6765 745f 6c61 6e67 5f75 726c 5f70 6174  get_lang_url_pat
+00007510: 7465 726e 203d 2027 6874 7470 733a 2f2f  tern = 'https://
+00007520: 6661 6e79 692d 6364 6e2e 6364 6e2e 6263  fanyi-cdn.cdn.bc
+00007530: 6562 6f73 2e63 6f6d 2f77 6562 5374 6174  ebos.com/webStat
+00007540: 6963 2f74 7261 6e73 6c61 7469 6f6e 2f6a  ic/translation/j
+00007550: 732f 696e 6465 782e 282e 2a3f 292e 6a73  s/index.(.*?).js
+00007560: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+00007570: 686f 7374 5f68 6561 6465 7273 203d 2073  host_headers = s
+00007580: 656c 662e 6765 745f 6865 6164 6572 7328  elf.get_headers(
+00007590: 7365 6c66 2e68 6f73 745f 7572 6c2c 2069  self.host_url, i
+000075a0: 665f 6170 693d 4661 6c73 6529 0d0a 2020  f_api=False)..  
+000075b0: 2020 2020 2020 7365 6c66 2e61 7069 5f68        self.api_h
+000075c0: 6561 6465 7273 203d 2073 656c 662e 6765  eaders = self.ge
+000075d0: 745f 6865 6164 6572 7328 7365 6c66 2e68  t_headers(self.h
+000075e0: 6f73 745f 7572 6c2c 2069 665f 6170 693d  ost_url, if_api=
+000075f0: 5472 7565 290d 0a20 2020 2020 2020 2073  True)..        s
+00007600: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
+00007610: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+00007620: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
+00007630: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
+00007640: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
+00007650: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
+00007660: 2e6f 7574 7075 745f 7a68 203d 2027 7a68  .output_zh = 'zh
+00007670: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+00007680: 696e 7075 745f 6c69 6d69 7420 3d20 696e  input_limit = in
+00007690: 7428 3565 3329 0d0a 2020 2020 2020 2020  t(5e3)..        
+000076a0: 7365 6c66 2e64 6566 6175 6c74 5f66 726f  self.default_fro
+000076b0: 6d5f 6c61 6e67 7561 6765 203d 2073 656c  m_language = sel
+000076c0: 662e 6f75 7470 7574 5f7a 680d 0a0d 0a20  f.output_zh.... 
+000076d0: 2020 2023 2040 5473 652e 6465 6275 675f     # @Tse.debug_
+000076e0: 6c61 6e67 7561 6765 5f6d 6170 0d0a 2020  language_map..  
+000076f0: 2020 2320 6465 6620 6765 745f 6c61 6e67    # def get_lang
+00007700: 7561 6765 5f6d 6170 2873 656c 662c 2068  uage_map(self, h
+00007710: 6f73 745f 6874 6d6c 3a20 7374 722c 202a  ost_html: str, *
+00007720: 2a6b 7761 7267 733a 204c 616e 674d 6170  *kwargs: LangMap
+00007730: 4b77 6172 6773 5479 7065 2920 2d3e 2064  KwargsType) -> d
+00007740: 6963 743a 0d0a 2020 2020 2320 2020 2020  ict:..    #     
+00007750: 6c61 6e67 5f73 7472 203d 2072 652e 636f  lang_str = re.co
+00007760: 6d70 696c 6528 276c 616e 674d 6170 3a20  mpile('langMap: 
+00007770: 7b28 2e2a 3f29 7d27 292e 7365 6172 6368  {(.*?)}').search
+00007780: 2868 6f73 745f 6874 6d6c 2e72 6570 6c61  (host_html.repla
+00007790: 6365 2827 5c6e 272c 2027 2729 2e72 6570  ce('\n', '').rep
+000077a0: 6c61 6365 2827 2020 272c 2027 2729 292e  lace('  ', '')).
+000077b0: 6772 6f75 7028 295b 383a 5d0d 0a20 2020  group()[8:]..   
+000077c0: 2023 2020 2020 2072 6574 7572 6e20 6578   #     return ex
+000077d0: 6563 6a73 2e65 7661 6c28 6c61 6e67 5f73  ecjs.eval(lang_s
+000077e0: 7472 290d 0a0d 0a20 2020 2040 5473 652e  tr)....    @Tse.
+000077f0: 6465 6275 675f 6c61 6e67 7561 6765 5f6d  debug_language_m
+00007800: 6170 0d0a 2020 2020 6465 6620 6765 745f  ap..    def get_
+00007810: 6c61 6e67 7561 6765 5f6d 6170 2873 656c  language_map(sel
+00007820: 662c 206c 616e 675f 7572 6c3a 2073 7472  f, lang_url: str
+00007830: 2c20 7373 3a20 5365 7373 696f 6e54 7970  , ss: SessionTyp
+00007840: 652c 2068 6561 6465 7273 3a20 6469 6374  e, headers: dict
+00007850: 2c20 7469 6d65 6f75 743a 204f 7074 696f  , timeout: Optio
+00007860: 6e61 6c5b 666c 6f61 745d 2c20 7072 6f78  nal[float], prox
+00007870: 6965 733a 204f 7074 696f 6e61 6c5b 6469  ies: Optional[di
+00007880: 6374 5d2c 202a 2a6b 7761 7267 733a 204c  ct], **kwargs: L
+00007890: 616e 674d 6170 4b77 6172 6773 5479 7065  angMapKwargsType
+000078a0: 2920 2d3e 2064 6963 743a 0d0a 2020 2020  ) -> dict:..    
+000078b0: 2020 2020 6a73 5f68 746d 6c20 3d20 7373      js_html = ss
+000078c0: 2e67 6574 286c 616e 675f 7572 6c2c 2068  .get(lang_url, h
+000078d0: 6561 6465 7273 3d68 6561 6465 7273 2c20  eaders=headers, 
+000078e0: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+000078f0: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+00007900: 292e 7465 7874 0d0a 2020 2020 2020 2020  ).text..        
+00007910: 6c61 6e67 5f73 7472 203d 2072 652e 636f  lang_str = re.co
+00007920: 6d70 696c 6528 2765 7870 6f72 7473 3d7b  mpile('exports={
+00007930: 6175 746f 3a28 2e2a 3f29 7d7d 7d7d 2c27  auto:(.*?)}}}},'
+00007940: 292e 7365 6172 6368 286a 735f 6874 6d6c  ).search(js_html
+00007950: 292e 6772 6f75 7028 295b 383a 2d33 5d0d  ).group()[8:-3].
+00007960: 0a20 2020 2020 2020 206c 616e 675f 6c69  .        lang_li
+00007970: 7374 203d 2072 652e 636f 6d70 696c 6528  st = re.compile(
+00007980: 2728 5c5c 772b 293a 7b7a 684e 616d 653a  '(\\w+):{zhName:
+00007990: 2729 2e66 696e 6461 6c6c 286c 616e 675f  ').findall(lang_
+000079a0: 7374 7229 0d0a 2020 2020 2020 2020 6c61  str)..        la
+000079b0: 6e67 5f6c 6973 7420 3d20 736f 7274 6564  ng_list = sorted
+000079c0: 286c 6973 7428 7365 7428 6c61 6e67 5f6c  (list(set(lang_l
+000079d0: 6973 7429 2929 0d0a 2020 2020 2020 2020  ist)))..        
+000079e0: 7265 7475 726e 207b 7d2e 6672 6f6d 6b65  return {}.fromke
+000079f0: 7973 286c 616e 675f 6c69 7374 2c20 6c61  ys(lang_list, la
+00007a00: 6e67 5f6c 6973 7429 0d0a 0d0a 2020 2020  ng_list)....    
+00007a10: 4054 7365 2e74 696d 655f 7374 6174 0d0a  @Tse.time_stat..
+00007a20: 2020 2020 4054 7365 2e63 6865 636b 5f71      @Tse.check_q
+00007a30: 7565 7279 0d0a 2020 2020 6465 6620 6261  uery..    def ba
+00007a40: 6964 755f 6170 6928 7365 6c66 2c20 7175  idu_api(self, qu
+00007a50: 6572 795f 7465 7874 3a20 7374 722c 2066  ery_text: str, f
+00007a60: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
+00007a70: 7220 3d20 2761 7574 6f27 2c20 746f 5f6c  r = 'auto', to_l
+00007a80: 616e 6775 6167 653a 2073 7472 203d 2027  anguage: str = '
+00007a90: 656e 272c 202a 2a6b 7761 7267 733a 2041  en', **kwargs: A
+00007aa0: 7069 4b77 6172 6773 5479 7065 2920 2d3e  piKwargsType) ->
+00007ab0: 2055 6e69 6f6e 5b73 7472 2c20 6469 6374   Union[str, dict
+00007ac0: 5d3a 0d0a 2020 2020 2020 2020 2222 220d  ]:..        """.
+00007ad0: 0a20 2020 2020 2020 2068 7474 7073 3a2f  .        https:/
+00007ae0: 2f66 616e 7969 2e62 6169 6475 2e63 6f6d  /fanyi.baidu.com
+00007af0: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+00007b00: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
+00007b10: 2c20 6d75 7374 2e0d 0a20 2020 2020 2020  , must...       
+00007b20: 203a 7061 7261 6d20 6672 6f6d 5f6c 616e   :param from_lan
+00007b30: 6775 6167 653a 2073 7472 2c20 6465 6661  guage: str, defa
+00007b40: 756c 7420 2761 7574 6f27 2e0d 0a20 2020  ult 'auto'...   
+00007b50: 2020 2020 203a 7061 7261 6d20 746f 5f6c       :param to_l
+00007b60: 616e 6775 6167 653a 2073 7472 2c20 6465  anguage: str, de
+00007b70: 6661 756c 7420 2765 6e27 2e0d 0a20 2020  fault 'en'...   
+00007b80: 2020 2020 203a 7061 7261 6d20 2a2a 6b77       :param **kw
+00007b90: 6172 6773 3a0d 0a20 2020 2020 2020 2020  args:..         
+00007ba0: 2020 2020 2020 203a 7061 7261 6d20 7469         :param ti
+00007bb0: 6d65 6f75 743a 2066 6c6f 6174 2c20 6465  meout: float, de
+00007bc0: 6661 756c 7420 4e6f 6e65 2e0d 0a20 2020  fault None...   
+00007bd0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00007be0: 7261 6d20 7072 6f78 6965 733a 2064 6963  ram proxies: dic
+00007bf0: 742c 2064 6566 6175 6c74 204e 6f6e 652e  t, default None.
+00007c00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007c10: 2020 3a70 6172 616d 2073 6c65 6570 5f73    :param sleep_s
+00007c20: 6563 6f6e 6473 3a20 666c 6f61 742c 2064  econds: float, d
+00007c30: 6566 6175 6c74 2030 2e0d 0a20 2020 2020  efault 0...     
+00007c40: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00007c50: 6d20 6973 5f64 6574 6169 6c5f 7265 7375  m is_detail_resu
+00007c60: 6c74 3a20 626f 6f6c 2c20 6465 6661 756c  lt: bool, defaul
+00007c70: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+00007c80: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00007c90: 2069 665f 6967 6e6f 7265 5f6c 696d 6974   if_ignore_limit
+00007ca0: 5f6f 665f 6c65 6e67 7468 3a20 626f 6f6c  _of_length: bool
+00007cb0: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+00007cc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007cd0: 2020 3a70 6172 616d 206c 696d 6974 5f6f    :param limit_o
+00007ce0: 665f 6c65 6e67 7468 3a20 696e 742c 2064  f_length: int, d
+00007cf0: 6566 6175 6c74 2032 3030 3030 2e0d 0a20  efault 20000... 
+00007d00: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00007d10: 7061 7261 6d20 6966 5f69 676e 6f72 655f  param if_ignore_
+00007d20: 656d 7074 795f 7175 6572 793a 2062 6f6f  empty_query: boo
+00007d30: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+00007d40: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00007d50: 2020 203a 7061 7261 6d20 7570 6461 7465     :param update
+00007d60: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
+00007d70: 7265 713a 2069 6e74 2c20 6465 6661 756c  req: int, defaul
+00007d80: 7420 3130 3030 2e0d 0a20 2020 2020 2020  t 1000...       
+00007d90: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+00007da0: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+00007db0: 6674 6572 5f73 6563 6f6e 6473 3a20 666c  fter_seconds: fl
+00007dc0: 6f61 742c 2064 6566 6175 6c74 2031 3530  oat, default 150
+00007dd0: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+00007de0: 2020 2020 3a70 6172 616d 2069 665f 7368      :param if_sh
+00007df0: 6f77 5f74 696d 655f 7374 6174 3a20 626f  ow_time_stat: bo
+00007e00: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
+00007e10: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+00007e20: 2020 2020 3a70 6172 616d 2073 686f 775f      :param show_
+00007e30: 7469 6d65 5f73 7461 745f 7072 6563 6973  time_stat_precis
+00007e40: 696f 6e3a 2069 6e74 2c20 6465 6661 756c  ion: int, defaul
+00007e50: 7420 322e 0d0a 2020 2020 2020 2020 2020  t 2...          
+00007e60: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
+00007e70: 7072 696e 745f 7761 726e 696e 673a 2062  print_warning: b
+00007e80: 6f6f 6c2c 2064 6566 6175 6c74 2054 7275  ool, default Tru
+00007e90: 652e 0d0a 2020 2020 2020 2020 3a72 6574  e...        :ret
+00007ea0: 7572 6e3a 2073 7472 206f 7220 6469 6374  urn: str or dict
+00007eb0: 0d0a 2020 2020 2020 2020 2222 220d 0a0d  ..        """...
+00007ec0: 0a20 2020 2020 2020 2074 696d 656f 7574  .        timeout
+00007ed0: 203d 206b 7761 7267 732e 6765 7428 2774   = kwargs.get('t
+00007ee0: 696d 656f 7574 272c 204e 6f6e 6529 0d0a  imeout', None)..
+00007ef0: 2020 2020 2020 2020 7072 6f78 6965 7320          proxies 
+00007f00: 3d20 6b77 6172 6773 2e67 6574 2827 7072  = kwargs.get('pr
+00007f10: 6f78 6965 7327 2c20 4e6f 6e65 290d 0a20  oxies', None).. 
+00007f20: 2020 2020 2020 2073 6c65 6570 5f73 6563         sleep_sec
+00007f30: 6f6e 6473 203d 206b 7761 7267 732e 6765  onds = kwargs.ge
+00007f40: 7428 2773 6c65 6570 5f73 6563 6f6e 6473  t('sleep_seconds
+00007f50: 272c 2030 290d 0a20 2020 2020 2020 2069  ', 0)..        i
+00007f60: 665f 7072 696e 745f 7761 726e 696e 6720  f_print_warning 
+00007f70: 3d20 6b77 6172 6773 2e67 6574 2827 6966  = kwargs.get('if
+00007f80: 5f70 7269 6e74 5f77 6172 6e69 6e67 272c  _print_warning',
+00007f90: 2054 7275 6529 0d0a 2020 2020 2020 2020   True)..        
+00007fa0: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
+00007fb0: 203d 206b 7761 7267 732e 6765 7428 2769   = kwargs.get('i
+00007fc0: 735f 6465 7461 696c 5f72 6573 756c 7427  s_detail_result'
+00007fd0: 2c20 4661 6c73 6529 0d0a 2020 2020 2020  , False)..      
+00007fe0: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
+00007ff0: 5f61 6674 6572 5f66 7265 7120 3d20 6b77  _after_freq = kw
+00008000: 6172 6773 2e67 6574 2827 7570 6461 7465  args.get('update
+00008010: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
+00008020: 7265 7127 2c20 7365 6c66 2e64 6566 6175  req', self.defau
+00008030: 6c74 5f73 6573 7369 6f6e 5f66 7265 7129  lt_session_freq)
+00008040: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
+00008050: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
+00008060: 6563 6f6e 6473 203d 206b 7761 7267 732e  econds = kwargs.
+00008070: 6765 7428 2775 7064 6174 655f 7365 7373  get('update_sess
+00008080: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
+00008090: 7327 2c20 7365 6c66 2e64 6566 6175 6c74  s', self.default
+000080a0: 5f73 6573 7369 6f6e 5f73 6563 6f6e 6473  _session_seconds
+000080b0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+000080c0: 6368 6563 6b5f 696e 7075 745f 6c69 6d69  check_input_limi
+000080d0: 7428 7175 6572 795f 7465 7874 2c20 7365  t(query_text, se
+000080e0: 6c66 2e69 6e70 7574 5f6c 696d 6974 290d  lf.input_limit).
+000080f0: 0a0d 0a20 2020 2020 2020 206e 6f74 5f75  ...        not_u
+00008100: 7064 6174 655f 636f 6e64 5f66 7265 7120  pdate_cond_freq 
+00008110: 3d20 3120 6966 2073 656c 662e 7175 6572  = 1 if self.quer
+00008120: 795f 636f 756e 7420 2520 7570 6461 7465  y_count % update
+00008130: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
+00008140: 7265 7120 213d 2030 2065 6c73 6520 300d  req != 0 else 0.
+00008150: 0a20 2020 2020 2020 206e 6f74 5f75 7064  .        not_upd
+00008160: 6174 655f 636f 6e64 5f74 696d 6520 3d20  ate_cond_time = 
+00008170: 3120 6966 2074 696d 652e 7469 6d65 2829  1 if time.time()
+00008180: 202d 2073 656c 662e 6265 6769 6e5f 7469   - self.begin_ti
+00008190: 6d65 203c 2075 7064 6174 655f 7365 7373  me < update_sess
+000081a0: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
+000081b0: 7320 656c 7365 2030 0d0a 2020 2020 2020  s else 0..      
+000081c0: 2020 6966 206e 6f74 2028 7365 6c66 2e73    if not (self.s
+000081d0: 6573 7369 6f6e 2061 6e64 2073 656c 662e  ession and self.
+000081e0: 6c61 6e67 7561 6765 5f6d 6170 2061 6e64  language_map and
+000081f0: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
+00008200: 5f66 7265 7120 616e 6420 6e6f 745f 7570  _freq and not_up
+00008210: 6461 7465 5f63 6f6e 645f 7469 6d65 293a  date_cond_time):
+00008220: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00008230: 6c66 2e62 6567 696e 5f74 696d 6520 3d20  lf.begin_time = 
+00008240: 7469 6d65 2e74 696d 6528 290d 0a20 2020  time.time()..   
+00008250: 2020 2020 2020 2020 2073 656c 662e 7365           self.se
+00008260: 7373 696f 6e20 3d20 7265 7175 6573 7473  ssion = requests
+00008270: 2e53 6573 7369 6f6e 2829 0d0a 2020 2020  .Session()..    
+00008280: 2020 2020 2020 2020 5f20 3d20 7365 6c66          _ = self
+00008290: 2e73 6573 7369 6f6e 2e67 6574 2873 656c  .session.get(sel
+000082a0: 662e 686f 7374 5f75 726c 2c20 6865 6164  f.host_url, head
+000082b0: 6572 733d 7365 6c66 2e68 6f73 745f 6865  ers=self.host_he
+000082c0: 6164 6572 732c 2074 696d 656f 7574 3d74  aders, timeout=t
+000082d0: 696d 656f 7574 2c20 7072 6f78 6965 733d  imeout, proxies=
+000082e0: 7072 6f78 6965 7329 2020 2320 6d75 7374  proxies)  # must
+000082f0: 2074 7769 6365 2c20 7365 6e64 2063 6f6f   twice, send coo
+00008300: 6b69 6573 2e0d 0a20 2020 2020 2020 2020  kies...         
+00008310: 2020 2068 6f73 745f 6874 6d6c 203d 2073     host_html = s
+00008320: 656c 662e 7365 7373 696f 6e2e 6765 7428  elf.session.get(
+00008330: 7365 6c66 2e68 6f73 745f 7572 6c2c 2068  self.host_url, h
+00008340: 6561 6465 7273 3d73 656c 662e 686f 7374  eaders=self.host
+00008350: 5f68 6561 6465 7273 2c20 7469 6d65 6f75  _headers, timeou
+00008360: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
+00008370: 6573 3d70 726f 7869 6573 292e 7465 7874  es=proxies).text
+00008380: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00008390: 6966 206e 6f74 2073 656c 662e 6765 745f  if not self.get_
+000083a0: 6c61 6e67 5f75 726c 3a0d 0a20 2020 2020  lang_url:..     
+000083b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000083c0: 6765 745f 6c61 6e67 5f75 726c 203d 2072  get_lang_url = r
+000083d0: 652e 636f 6d70 696c 6528 7365 6c66 2e67  e.compile(self.g
+000083e0: 6574 5f6c 616e 675f 7572 6c5f 7061 7474  et_lang_url_patt
+000083f0: 6572 6e29 2e73 6561 7263 6828 686f 7374  ern).search(host
+00008400: 5f68 746d 6c29 2e67 726f 7570 2829 0d0a  _html).group()..
+00008410: 0d0a 2020 2020 2020 2020 2020 2020 6465  ..            de
+00008420: 6275 675f 6c61 6e67 5f6b 7761 7267 7320  bug_lang_kwargs 
+00008430: 3d20 7365 6c66 2e64 6562 7567 5f6c 616e  = self.debug_lan
+00008440: 675f 6b77 6172 6773 2866 726f 6d5f 6c61  g_kwargs(from_la
+00008450: 6e67 7561 6765 2c20 746f 5f6c 616e 6775  nguage, to_langu
+00008460: 6167 652c 2073 656c 662e 6465 6661 756c  age, self.defaul
+00008470: 745f 6672 6f6d 5f6c 616e 6775 6167 652c  t_from_language,
+00008480: 2069 665f 7072 696e 745f 7761 726e 696e   if_print_warnin
+00008490: 6729 0d0a 2020 2020 2020 2020 2020 2020  g)..            
+000084a0: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
+000084b0: 7020 3d20 7365 6c66 2e67 6574 5f6c 616e  p = self.get_lan
+000084c0: 6775 6167 655f 6d61 7028 7365 6c66 2e67  guage_map(self.g
+000084d0: 6574 5f6c 616e 675f 7572 6c2c 2073 656c  et_lang_url, sel
+000084e0: 662e 7365 7373 696f 6e2c 2073 656c 662e  f.session, self.
+000084f0: 686f 7374 5f68 6561 6465 7273 2c20 7469  host_headers, ti
+00008500: 6d65 6f75 742c 2070 726f 7869 6573 2c20  meout, proxies, 
+00008510: 2a2a 6465 6275 675f 6c61 6e67 5f6b 7761  **debug_lang_kwa
+00008520: 7267 7329 0d0a 0d0a 2020 2020 2020 2020  rgs)....        
+00008530: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
+00008540: 6f5f 6c61 6e67 7561 6765 203d 2073 656c  o_language = sel
+00008550: 662e 6368 6563 6b5f 6c61 6e67 7561 6765  f.check_language
+00008560: 2866 726f 6d5f 6c61 6e67 7561 6765 2c20  (from_language, 
+00008570: 746f 5f6c 616e 6775 6167 652c 2073 656c  to_language, sel
+00008580: 662e 6c61 6e67 7561 6765 5f6d 6170 2c20  f.language_map, 
+00008590: 6f75 7470 7574 5f7a 683d 7365 6c66 2e6f  output_zh=self.o
+000085a0: 7574 7075 745f 7a68 290d 0a0d 0a20 2020  utput_zh)....   
+000085b0: 2020 2020 2070 6179 6c6f 6164 203d 207b       payload = {
+000085c0: 0d0a 2020 2020 2020 2020 2020 2020 2766  ..            'f
+000085d0: 726f 6d27 3a20 6672 6f6d 5f6c 616e 6775  rom': from_langu
+000085e0: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
+000085f0: 2020 2774 6f27 3a20 746f 5f6c 616e 6775    'to': to_langu
+00008600: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
+00008610: 2020 2771 7565 7279 273a 2071 7565 7279    'query': query
+00008620: 5f74 6578 742c 0d0a 2020 2020 2020 2020  _text,..        
+00008630: 2020 2020 2773 6f75 7263 6527 3a20 2774      'source': 't
+00008640: 7874 272c 0d0a 2020 2020 2020 2020 7d0d  xt',..        }.
+00008650: 0a20 2020 2020 2020 2072 203d 2073 656c  .        r = sel
+00008660: 662e 7365 7373 696f 6e2e 706f 7374 2873  f.session.post(s
+00008670: 656c 662e 6170 695f 7572 6c2c 2064 6174  elf.api_url, dat
+00008680: 613d 7061 796c 6f61 642c 2068 6561 6465  a=payload, heade
+00008690: 7273 3d73 656c 662e 6170 695f 6865 6164  rs=self.api_head
+000086a0: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
+000086b0: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
+000086c0: 6f78 6965 7329 0d0a 2020 2020 2020 2020  oxies)..        
+000086d0: 722e 7261 6973 655f 666f 725f 7374 6174  r.raise_for_stat
+000086e0: 7573 2829 0d0a 2020 2020 2020 2020 6461  us()..        da
+000086f0: 7461 203d 2072 2e6a 736f 6e28 290d 0a20  ta = r.json().. 
+00008700: 2020 2020 2020 2074 696d 652e 736c 6565         time.slee
+00008710: 7028 736c 6565 705f 7365 636f 6e64 7329  p(sleep_seconds)
+00008720: 0d0a 2020 2020 2020 2020 7365 6c66 2e71  ..        self.q
+00008730: 7565 7279 5f63 6f75 6e74 202b 3d20 310d  uery_count += 1.
+00008740: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00008750: 6461 7461 2069 6620 6973 5f64 6574 6169  data if is_detai
+00008760: 6c5f 7265 7375 6c74 2065 6c73 6520 275c  l_result else '\
+00008770: 6e27 2e6a 6f69 6e28 5b69 7465 6d5b 2764  n'.join([item['d
+00008780: 7374 275d 2066 6f72 2069 7465 6d20 696e  st'] for item in
+00008790: 2064 6174 615b 2764 6174 6127 5d5d 290d   data['data']]).
+000087a0: 0a0d 0a0d 0a63 6c61 7373 2042 6169 6475  .....class Baidu
+000087b0: 5632 2854 7365 293a 0d0a 2020 2020 6465  V2(Tse):..    de
+000087c0: 6620 5f5f 696e 6974 5f5f 2873 656c 6629  f __init__(self)
+000087d0: 3a0d 0a20 2020 2020 2020 2073 7570 6572  :..        super
+000087e0: 2829 2e5f 5f69 6e69 745f 5f28 290d 0a20  ().__init__().. 
+000087f0: 2020 2020 2020 2073 656c 662e 6265 6769         self.begi
+00008800: 6e5f 7469 6d65 203d 2074 696d 652e 7469  n_time = time.ti
+00008810: 6d65 2829 0d0a 2020 2020 2020 2020 7365  me()..        se
+00008820: 6c66 2e68 6f73 745f 7572 6c20 3d20 2768  lf.host_url = 'h
+00008830: 7474 7073 3a2f 2f66 616e 7969 2e62 6169  ttps://fanyi.bai
+00008840: 6475 2e63 6f6d 270d 0a20 2020 2020 2020  du.com'..       
+00008850: 2073 656c 662e 6170 695f 7572 6c20 3d20   self.api_url = 
+00008860: 2768 7474 7073 3a2f 2f66 616e 7969 2e62  'https://fanyi.b
+00008870: 6169 6475 2e63 6f6d 2f76 3274 7261 6e73  aidu.com/v2trans
+00008880: 6170 6927 0d0a 2020 2020 2020 2020 7365  api'..        se
+00008890: 6c66 2e6c 616e 6764 6574 6563 745f 7572  lf.langdetect_ur
+000088a0: 6c20 3d20 2768 7474 7073 3a2f 2f66 616e  l = 'https://fan
+000088b0: 7969 2e62 6169 6475 2e63 6f6d 2f6c 616e  yi.baidu.com/lan
+000088c0: 6764 6574 6563 7427 0d0a 2020 2020 2020  gdetect'..      
+000088d0: 2020 7365 6c66 2e67 6574 5f73 6967 6e5f    self.get_sign_
+000088e0: 7572 6c20 3d20 2768 7474 7073 3a2f 2f66  url = 'https://f
+000088f0: 616e 7969 2d63 646e 2e63 646e 2e62 6365  anyi-cdn.cdn.bce
+00008900: 626f 732e 636f 6d2f 7374 6174 6963 2f74  bos.com/static/t
+00008910: 7261 6e73 6c61 7469 6f6e 2f70 6b67 2f69  ranslation/pkg/i
+00008920: 6e64 6578 5f62 6433 3663 6566 2e6a 7327  ndex_bd36cef.js'
+00008930: 0d0a 2020 2020 2020 2020 7365 6c66 2e67  ..        self.g
+00008940: 6574 5f6c 616e 675f 7572 6c20 3d20 4e6f  et_lang_url = No
+00008950: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
+00008960: 2e67 6574 5f6c 616e 675f 7572 6c5f 7061  .get_lang_url_pa
+00008970: 7474 6572 6e20 3d20 2768 7474 7073 3a2f  ttern = 'https:/
+00008980: 2f66 616e 7969 2d63 646e 2e63 646e 2e62  /fanyi-cdn.cdn.b
+00008990: 6365 626f 732e 636f 6d2f 7765 6253 7461  cebos.com/webSta
+000089a0: 7469 632f 7472 616e 736c 6174 696f 6e2f  tic/translation/
+000089b0: 6a73 2f69 6e64 6578 2e28 2e2a 3f29 2e6a  js/index.(.*?).j
+000089c0: 7327 0d0a 2020 2020 2020 2020 7365 6c66  s'..        self
+000089d0: 2e61 6373 5f75 726c 203d 2027 6874 7470  .acs_url = 'http
+000089e0: 733a 2f2f 646c 7377 6272 2e62 6169 6475  s://dlswbr.baidu
+000089f0: 2e63 6f6d 2f68 6569 6368 612f 6d6d 2f7b  .com/heicha/mm/{
+00008a00: 697d 2f61 6373 2d7b 697d 2e6a 7327 2e66  i}/acs-{i}.js'.f
+00008a10: 6f72 6d61 7428 693d 3230 3630 290d 0a20  ormat(i=2060).. 
+00008a20: 2020 2020 2020 2073 656c 662e 686f 7374         self.host
+00008a30: 5f68 6561 6465 7273 203d 2073 656c 662e  _headers = self.
+00008a40: 6765 745f 6865 6164 6572 7328 7365 6c66  get_headers(self
+00008a50: 2e68 6f73 745f 7572 6c2c 2069 665f 6170  .host_url, if_ap
+00008a60: 693d 4661 6c73 6529 0d0a 2020 2020 2020  i=False)..      
+00008a70: 2020 7365 6c66 2e61 7069 5f68 6561 6465    self.api_heade
+00008a80: 7273 203d 2073 656c 662e 6765 745f 6865  rs = self.get_he
+00008a90: 6164 6572 7328 7365 6c66 2e68 6f73 745f  aders(self.host_
+00008aa0: 7572 6c2c 2069 665f 6170 693d 5472 7565  url, if_api=True
+00008ab0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00008ac0: 6c61 6e67 7561 6765 5f6d 6170 203d 204e  language_map = N
+00008ad0: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
+00008ae0: 662e 7365 7373 696f 6e20 3d20 4e6f 6e65  f.session = None
+00008af0: 0d0a 2020 2020 2020 2020 7365 6c66 2e70  ..        self.p
+00008b00: 726f 6665 7373 696f 6e61 6c5f 6669 656c  rofessional_fiel
+00008b10: 6420 3d20 2827 636f 6d6d 6f6e 272c 2027  d = ('common', '
+00008b20: 6d65 6469 6369 6e65 272c 2027 656c 6563  medicine', 'elec
+00008b30: 7472 6f6e 6963 7327 2c20 276d 6563 6861  tronics', 'mecha
+00008b40: 6e69 6373 272c 2027 6e6f 7665 6c27 290d  nics', 'novel').
+00008b50: 0a20 2020 2020 2020 2073 656c 662e 746f  .        self.to
+00008b60: 6b65 6e20 3d20 4e6f 6e65 0d0a 2020 2020  ken = None..    
+00008b70: 2020 2020 7365 6c66 2e73 6967 6e20 3d20      self.sign = 
+00008b80: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
+00008b90: 6c66 2e61 6373 5f74 6f6b 656e 203d 204e  lf.acs_token = N
+00008ba0: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
+00008bb0: 662e 7175 6572 795f 636f 756e 7420 3d20  f.query_count = 
+00008bc0: 300d 0a20 2020 2020 2020 2073 656c 662e  0..        self.
+00008bd0: 6f75 7470 7574 5f7a 6820 3d20 277a 6827  output_zh = 'zh'
+00008be0: 0d0a 2020 2020 2020 2020 7365 6c66 2e69  ..        self.i
+00008bf0: 6e70 7574 5f6c 696d 6974 203d 2069 6e74  nput_limit = int
+00008c00: 2835 6533 290d 0a20 2020 2020 2020 2073  (5e3)..        s
+00008c10: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
+00008c20: 5f6c 616e 6775 6167 6520 3d20 7365 6c66  _language = self
+00008c30: 2e6f 7574 7075 745f 7a68 0d0a 0d0a 2020  .output_zh....  
+00008c40: 2020 4054 7365 2e64 6562 7567 5f6c 616e    @Tse.debug_lan
+00008c50: 6775 6167 655f 6d61 700d 0a20 2020 2064  guage_map..    d
+00008c60: 6566 2067 6574 5f6c 616e 6775 6167 655f  ef get_language_
+00008c70: 6d61 7028 7365 6c66 2c20 6c61 6e67 5f75  map(self, lang_u
+00008c80: 726c 3a20 7374 722c 2073 733a 2053 6573  rl: str, ss: Ses
+00008c90: 7369 6f6e 5479 7065 2c20 6865 6164 6572  sionType, header
+00008ca0: 733a 2064 6963 742c 2074 696d 656f 7574  s: dict, timeout
+00008cb0: 3a20 4f70 7469 6f6e 616c 5b66 6c6f 6174  : Optional[float
+00008cc0: 5d2c 2070 726f 7869 6573 3a20 4f70 7469  ], proxies: Opti
+00008cd0: 6f6e 616c 5b64 6963 745d 2c20 2a2a 6b77  onal[dict], **kw
+00008ce0: 6172 6773 3a20 4c61 6e67 4d61 704b 7761  args: LangMapKwa
+00008cf0: 7267 7354 7970 6529 202d 3e20 6469 6374  rgsType) -> dict
+00008d00: 3a0d 0a20 2020 2020 2020 206a 735f 6874  :..        js_ht
+00008d10: 6d6c 203d 2073 732e 6765 7428 6c61 6e67  ml = ss.get(lang
+00008d20: 5f75 726c 2c20 6865 6164 6572 733d 6865  _url, headers=he
+00008d30: 6164 6572 732c 2074 696d 656f 7574 3d74  aders, timeout=t
+00008d40: 696d 656f 7574 2c20 7072 6f78 6965 733d  imeout, proxies=
+00008d50: 7072 6f78 6965 7329 2e74 6578 740d 0a20  proxies).text.. 
+00008d60: 2020 2020 2020 206c 616e 675f 7374 7220         lang_str 
+00008d70: 3d20 7265 2e63 6f6d 7069 6c65 2827 6578  = re.compile('ex
+00008d80: 706f 7274 733d 7b61 7574 6f3a 282e 2a3f  ports={auto:(.*?
+00008d90: 297d 7d7d 7d2c 2729 2e73 6561 7263 6828  )}}}},').search(
+00008da0: 6a73 5f68 746d 6c29 2e67 726f 7570 2829  js_html).group()
+00008db0: 5b38 3a2d 335d 0d0a 2020 2020 2020 2020  [8:-3]..        
+00008dc0: 6c61 6e67 5f6c 6973 7420 3d20 7265 2e63  lang_list = re.c
+00008dd0: 6f6d 7069 6c65 2827 285c 5c77 2b29 3a7b  ompile('(\\w+):{
+00008de0: 7a68 4e61 6d65 3a27 292e 6669 6e64 616c  zhName:').findal
+00008df0: 6c28 6c61 6e67 5f73 7472 290d 0a20 2020  l(lang_str)..   
+00008e00: 2020 2020 206c 616e 675f 6c69 7374 203d       lang_list =
+00008e10: 2073 6f72 7465 6428 6c69 7374 2873 6574   sorted(list(set
+00008e20: 286c 616e 675f 6c69 7374 2929 290d 0a20  (lang_list))).. 
+00008e30: 2020 2020 2020 2072 6574 7572 6e20 7b7d         return {}
+00008e40: 2e66 726f 6d6b 6579 7328 6c61 6e67 5f6c  .fromkeys(lang_l
+00008e50: 6973 742c 206c 616e 675f 6c69 7374 290d  ist, lang_list).
+00008e60: 0a0d 0a20 2020 2064 6566 2067 6574 5f73  ...    def get_s
+00008e70: 6967 6e28 7365 6c66 2c20 7175 6572 795f  ign(self, query_
+00008e80: 7465 7874 3a20 7374 722c 2068 6f73 745f  text: str, host_
+00008e90: 6874 6d6c 3a20 7374 722c 2073 733a 2053  html: str, ss: S
+00008ea0: 6573 7369 6f6e 5479 7065 2c20 6865 6164  essionType, head
+00008eb0: 6572 733a 2064 6963 742c 2074 696d 656f  ers: dict, timeo
+00008ec0: 7574 3a20 666c 6f61 742c 2070 726f 7869  ut: float, proxi
+00008ed0: 6573 3a20 6469 6374 2920 2d3e 2073 7472  es: dict) -> str
+00008ee0: 3a0d 0a20 2020 2020 2020 2067 746b 5f6c  :..        gtk_l
+00008ef0: 6973 7420 3d20 7265 2e63 6f6d 7069 6c65  ist = re.compile
+00008f00: 2822 2222 7769 6e64 6f77 2e67 746b 203d  ("""window.gtk =
+00008f10: 2027 282e 2a3f 2927 3b7c 7769 6e64 6f77   '(.*?)';|window
+00008f20: 2e67 746b 203d 2022 282e 2a3f 2922 3b22  .gtk = "(.*?)";"
+00008f30: 2222 292e 6669 6e64 616c 6c28 686f 7374  "").findall(host
+00008f40: 5f68 746d 6c29 5b30 5d0d 0a20 2020 2020  _html)[0]..     
+00008f50: 2020 2067 746b 203d 2067 746b 5f6c 6973     gtk = gtk_lis
+00008f60: 745b 305d 206f 7220 6774 6b5f 6c69 7374  t[0] or gtk_list
+00008f70: 5b31 5d0d 0a0d 0a20 2020 2020 2020 2073  [1]....        s
+00008f80: 6967 6e5f 6874 6d6c 203d 2073 732e 6765  ign_html = ss.ge
+00008f90: 7428 7365 6c66 2e67 6574 5f73 6967 6e5f  t(self.get_sign_
+00008fa0: 7572 6c2c 2068 6561 6465 7273 3d68 6561  url, headers=hea
+00008fb0: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+00008fc0: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+00008fd0: 726f 7869 6573 292e 7465 7874 0d0a 2020  roxies).text..  
+00008fe0: 2020 2020 2020 6265 6769 6e5f 6c61 6265        begin_labe
+00008ff0: 6c20 3d20 2764 6566 696e 6528 2274 7261  l = 'define("tra
+00009000: 6e73 6c61 7469 6f6e 3a77 6964 6765 742f  nslation:widget/
+00009010: 7472 616e 736c 6174 652f 696e 7075 742f  translate/input/
+00009020: 7047 7261 6222 2c66 756e 6374 696f 6e28  pGrab",function(
+00009030: 722c 6f2c 7429 7b27 0d0a 2020 2020 2020  r,o,t){'..      
+00009040: 2020 656e 645f 6c61 6265 6c20 3d20 2776    end_label = 'v
+00009050: 6172 2069 3d6e 756c 6c3b 742e 6578 706f  ar i=null;t.expo
+00009060: 7274 733d 657d 293b 270d 0a20 2020 2020  rts=e});'..     
+00009070: 2020 2073 6967 6e5f 6a73 203d 2073 6967     sign_js = sig
+00009080: 6e5f 6874 6d6c 5b73 6967 6e5f 6874 6d6c  n_html[sign_html
+00009090: 2e66 696e 6428 6265 6769 6e5f 6c61 6265  .find(begin_labe
+000090a0: 6c29 202b 206c 656e 2862 6567 696e 5f6c  l) + len(begin_l
+000090b0: 6162 656c 293a 7369 676e 5f68 746d 6c2e  abel):sign_html.
+000090c0: 6669 6e64 2865 6e64 5f6c 6162 656c 295d  find(end_label)]
+000090d0: 0d0a 2020 2020 2020 2020 7369 676e 5f6a  ..        sign_j
+000090e0: 7320 3d20 7369 676e 5f6a 732e 7265 706c  s = sign_js.repl
+000090f0: 6163 6528 2766 756e 6374 696f 6e20 6528  ace('function e(
+00009100: 7229 272c 2027 6675 6e63 7469 6f6e 2065  r)', 'function e
+00009110: 2872 2c69 2927 290d 0a20 2020 2020 2020  (r,i)')..       
+00009120: 2072 6574 7572 6e20 6578 6563 6a73 2e63   return execjs.c
+00009130: 6f6d 7069 6c65 2873 6967 6e5f 6a73 292e  ompile(sign_js).
+00009140: 6361 6c6c 2827 6527 2c20 7175 6572 795f  call('e', query_
+00009150: 7465 7874 2c20 6774 6b29 0d0a 0d0a 2020  text, gtk)....  
+00009160: 2020 6465 6620 6765 745f 746b 2873 656c    def get_tk(sel
+00009170: 662c 2068 6f73 745f 6874 6d6c 3a20 7374  f, host_html: st
+00009180: 7229 202d 3e20 7374 723a 0d0a 2020 2020  r) -> str:..    
+00009190: 2020 2020 746b 5f6c 6973 7420 3d20 7265      tk_list = re
+000091a0: 2e63 6f6d 7069 6c65 2822 2222 746f 6b65  .compile("""toke
+000091b0: 6e3a 2027 282e 2a3f 2927 2c7c 746f 6b65  n: '(.*?)',|toke
+000091c0: 6e3a 2022 282e 2a3f 2922 2c22 2222 292e  n: "(.*?)",""").
+000091d0: 6669 6e64 616c 6c28 686f 7374 5f68 746d  findall(host_htm
+000091e0: 6c29 5b30 5d0d 0a20 2020 2020 2020 2072  l)[0]..        r
+000091f0: 6574 7572 6e20 746b 5f6c 6973 745b 305d  eturn tk_list[0]
+00009200: 206f 7220 746b 5f6c 6973 745b 315d 0d0a   or tk_list[1]..
+00009210: 0d0a 2020 2020 2320 6465 6620 6765 745f  ..    # def get_
+00009220: 6163 735f 746f 6b65 6e28 7365 6c66 293a  acs_token(self):
+00009230: 0d0a 2020 2020 2320 2020 2020 7061 7373  ..    #     pass
+00009240: 0d0a 0d0a 2020 2020 4054 7365 2e74 696d  ....    @Tse.tim
+00009250: 655f 7374 6174 0d0a 2020 2020 4054 7365  e_stat..    @Tse
+00009260: 2e63 6865 636b 5f71 7565 7279 0d0a 2020  .check_query..  
+00009270: 2020 6465 6620 6261 6964 755f 6170 6928    def baidu_api(
+00009280: 7365 6c66 2c20 7175 6572 795f 7465 7874  self, query_text
+00009290: 3a20 7374 722c 2066 726f 6d5f 6c61 6e67  : str, from_lang
+000092a0: 7561 6765 3a20 7374 7220 3d20 2761 7574  uage: str = 'aut
+000092b0: 6f27 2c20 746f 5f6c 616e 6775 6167 653a  o', to_language:
+000092c0: 2073 7472 203d 2027 656e 272c 202a 2a6b   str = 'en', **k
+000092d0: 7761 7267 733a 2041 7069 4b77 6172 6773  wargs: ApiKwargs
+000092e0: 5479 7065 2920 2d3e 2055 6e69 6f6e 5b73  Type) -> Union[s
+000092f0: 7472 2c20 6469 6374 5d3a 0d0a 2020 2020  tr, dict]:..    
+00009300: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00009310: 2068 7474 7073 3a2f 2f66 616e 7969 2e62   https://fanyi.b
+00009320: 6169 6475 2e63 6f6d 0d0a 2020 2020 2020  aidu.com..      
+00009330: 2020 3a70 6172 616d 2071 7565 7279 5f74    :param query_t
+00009340: 6578 743a 2073 7472 2c20 6d75 7374 2e0d  ext: str, must..
+00009350: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00009360: 6672 6f6d 5f6c 616e 6775 6167 653a 2073  from_language: s
+00009370: 7472 2c20 6465 6661 756c 7420 2761 7574  tr, default 'aut
+00009380: 6f27 2e0d 0a20 2020 2020 2020 203a 7061  o'...        :pa
+00009390: 7261 6d20 746f 5f6c 616e 6775 6167 653a  ram to_language:
+000093a0: 2073 7472 2c20 6465 6661 756c 7420 2765   str, default 'e
+000093b0: 6e27 2e0d 0a20 2020 2020 2020 203a 7061  n'...        :pa
+000093c0: 7261 6d20 2a2a 6b77 6172 6773 3a0d 0a20  ram **kwargs:.. 
+000093d0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+000093e0: 7061 7261 6d20 7469 6d65 6f75 743a 2066  param timeout: f
+000093f0: 6c6f 6174 2c20 6465 6661 756c 7420 4e6f  loat, default No
+00009400: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
+00009410: 2020 2020 203a 7061 7261 6d20 7072 6f78       :param prox
+00009420: 6965 733a 2064 6963 742c 2064 6566 6175  ies: dict, defau
+00009430: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
+00009440: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00009450: 2073 6c65 6570 5f73 6563 6f6e 6473 3a20   sleep_seconds: 
+00009460: 666c 6f61 742c 2064 6566 6175 6c74 2030  float, default 0
+00009470: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00009480: 2020 203a 7061 7261 6d20 6973 5f64 6574     :param is_det
+00009490: 6169 6c5f 7265 7375 6c74 3a20 626f 6f6c  ail_result: bool
+000094a0: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+000094b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000094c0: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
+000094d0: 7265 5f6c 696d 6974 5f6f 665f 6c65 6e67  re_limit_of_leng
+000094e0: 7468 3a20 626f 6f6c 2c20 6465 6661 756c  th: bool, defaul
+000094f0: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+00009500: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00009510: 206c 696d 6974 5f6f 665f 6c65 6e67 7468   limit_of_length
+00009520: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
+00009530: 3030 3030 2e0d 0a20 2020 2020 2020 2020  0000...         
+00009540: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+00009550: 5f69 676e 6f72 655f 656d 7074 795f 7175  _ignore_empty_qu
+00009560: 6572 793a 2062 6f6f 6c2c 2064 6566 6175  ery: bool, defau
+00009570: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+00009580: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00009590: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
+000095a0: 5f61 6674 6572 5f66 7265 713a 2069 6e74  _after_freq: int
+000095b0: 2c20 6465 6661 756c 7420 3130 3030 2e0d  , default 1000..
+000095c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000095d0: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
+000095e0: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+000095f0: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
+00009600: 6175 6c74 2031 3530 302e 0d0a 2020 2020  ault 1500...    
+00009610: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00009620: 616d 2069 665f 7368 6f77 5f74 696d 655f  am if_show_time_
+00009630: 7374 6174 3a20 626f 6f6c 2c20 6465 6661  stat: bool, defa
+00009640: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+00009650: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00009660: 616d 2073 686f 775f 7469 6d65 5f73 7461  am show_time_sta
+00009670: 745f 7072 6563 6973 696f 6e3a 2069 6e74  t_precision: int
+00009680: 2c20 6465 6661 756c 7420 322e 0d0a 2020  , default 2...  
+00009690: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+000096a0: 6172 616d 2069 665f 7072 696e 745f 7761  aram if_print_wa
+000096b0: 726e 696e 673a 2062 6f6f 6c2c 2064 6566  rning: bool, def
+000096c0: 6175 6c74 2054 7275 652e 0d0a 2020 2020  ault True...    
+000096d0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+000096e0: 616d 2070 726f 6665 7373 696f 6e61 6c5f  am professional_
+000096f0: 6669 656c 643a 2073 7472 2c20 6465 6661  field: str, defa
+00009700: 756c 7420 2763 6f6d 6d6f 6e27 2e20 4368  ult 'common'. Ch
+00009710: 6f6f 7365 2066 726f 6d20 2827 636f 6d6d  oose from ('comm
+00009720: 6f6e 272c 2027 6d65 6469 6369 6e65 272c  on', 'medicine',
+00009730: 2027 656c 6563 7472 6f6e 6963 7327 2c20   'electronics', 
+00009740: 276d 6563 6861 6e69 6373 272c 2027 6e6f  'mechanics', 'no
+00009750: 7665 6c27 290d 0a20 2020 2020 2020 203a  vel')..        :
+00009760: 7265 7475 726e 3a20 7374 7220 6f72 2064  return: str or d
+00009770: 6963 740d 0a20 2020 2020 2020 2022 2222  ict..        """
+00009780: 0d0a 0d0a 2020 2020 2020 2020 7573 655f  ....        use_
+00009790: 646f 6d61 696e 203d 206b 7761 7267 732e  domain = kwargs.
+000097a0: 6765 7428 2770 726f 6665 7373 696f 6e61  get('professiona
+000097b0: 6c5f 6669 656c 6427 2c20 2763 6f6d 6d6f  l_field', 'commo
+000097c0: 6e27 290d 0a20 2020 2020 2020 2069 6620  n')..        if 
+000097d0: 7573 655f 646f 6d61 696e 206e 6f74 2069  use_domain not i
+000097e0: 6e20 7365 6c66 2e70 726f 6665 7373 696f  n self.professio
+000097f0: 6e61 6c5f 6669 656c 643a 2020 2320 6f6e  nal_field:  # on
+00009800: 6c79 2073 7570 706f 7274 207a 682d 656e  ly support zh-en
+00009810: 2c20 656e 2d7a 682e 0d0a 2020 2020 2020  , en-zh...      
+00009820: 2020 2020 2020 7261 6973 6520 5472 616e        raise Tran
+00009830: 736c 6174 6f72 4572 726f 720d 0a0d 0a20  slatorError.... 
+00009840: 2020 2020 2020 2074 696d 656f 7574 203d         timeout =
+00009850: 206b 7761 7267 732e 6765 7428 2774 696d   kwargs.get('tim
+00009860: 656f 7574 272c 204e 6f6e 6529 0d0a 2020  eout', None)..  
+00009870: 2020 2020 2020 7072 6f78 6965 7320 3d20        proxies = 
+00009880: 6b77 6172 6773 2e67 6574 2827 7072 6f78  kwargs.get('prox
+00009890: 6965 7327 2c20 4e6f 6e65 290d 0a20 2020  ies', None)..   
+000098a0: 2020 2020 2073 6c65 6570 5f73 6563 6f6e       sleep_secon
+000098b0: 6473 203d 206b 7761 7267 732e 6765 7428  ds = kwargs.get(
+000098c0: 2773 6c65 6570 5f73 6563 6f6e 6473 272c  'sleep_seconds',
+000098d0: 2030 290d 0a20 2020 2020 2020 2069 665f   0)..        if_
+000098e0: 7072 696e 745f 7761 726e 696e 6720 3d20  print_warning = 
+000098f0: 6b77 6172 6773 2e67 6574 2827 6966 5f70  kwargs.get('if_p
+00009900: 7269 6e74 5f77 6172 6e69 6e67 272c 2054  rint_warning', T
+00009910: 7275 6529 0d0a 2020 2020 2020 2020 6973  rue)..        is
+00009920: 5f64 6574 6169 6c5f 7265 7375 6c74 203d  _detail_result =
+00009930: 206b 7761 7267 732e 6765 7428 2769 735f   kwargs.get('is_
+00009940: 6465 7461 696c 5f72 6573 756c 7427 2c20  detail_result', 
+00009950: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
+00009960: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+00009970: 6674 6572 5f66 7265 7120 3d20 6b77 6172  fter_freq = kwar
+00009980: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
+00009990: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
+000099a0: 7127 2c20 7365 6c66 2e64 6566 6175 6c74  q', self.default
+000099b0: 5f73 6573 7369 6f6e 5f66 7265 7129 0d0a  _session_freq)..
+000099c0: 2020 2020 2020 2020 7570 6461 7465 5f73          update_s
+000099d0: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+000099e0: 6f6e 6473 203d 206b 7761 7267 732e 6765  onds = kwargs.ge
+000099f0: 7428 2775 7064 6174 655f 7365 7373 696f  t('update_sessio
+00009a00: 6e5f 6166 7465 725f 7365 636f 6e64 7327  n_after_seconds'
+00009a10: 2c20 7365 6c66 2e64 6566 6175 6c74 5f73  , self.default_s
+00009a20: 6573 7369 6f6e 5f73 6563 6f6e 6473 290d  ession_seconds).
+00009a30: 0a20 2020 2020 2020 2073 656c 662e 6368  .        self.ch
+00009a40: 6563 6b5f 696e 7075 745f 6c69 6d69 7428  eck_input_limit(
+00009a50: 7175 6572 795f 7465 7874 2c20 7365 6c66  query_text, self
+00009a60: 2e69 6e70 7574 5f6c 696d 6974 290d 0a0d  .input_limit)...
+00009a70: 0a20 2020 2020 2020 206e 6f74 5f75 7064  .        not_upd
+00009a80: 6174 655f 636f 6e64 5f66 7265 7120 3d20  ate_cond_freq = 
+00009a90: 3120 6966 2073 656c 662e 7175 6572 795f  1 if self.query_
+00009aa0: 636f 756e 7420 2520 7570 6461 7465 5f73  count % update_s
+00009ab0: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
+00009ac0: 7120 213d 2030 2065 6c73 6520 300d 0a20  q != 0 else 0.. 
+00009ad0: 2020 2020 2020 206e 6f74 5f75 7064 6174         not_updat
+00009ae0: 655f 636f 6e64 5f74 696d 6520 3d20 3120  e_cond_time = 1 
+00009af0: 6966 2074 696d 652e 7469 6d65 2829 202d  if time.time() -
+00009b00: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
+00009b10: 203c 2075 7064 6174 655f 7365 7373 696f   < update_sessio
+00009b20: 6e5f 6166 7465 725f 7365 636f 6e64 7320  n_after_seconds 
+00009b30: 656c 7365 2030 0d0a 2020 2020 2020 2020  else 0..        
+00009b40: 6966 206e 6f74 2028 7365 6c66 2e73 6573  if not (self.ses
+00009b50: 7369 6f6e 2061 6e64 2073 656c 662e 6c61  sion and self.la
+00009b60: 6e67 7561 6765 5f6d 6170 2061 6e64 206e  nguage_map and n
+00009b70: 6f74 5f75 7064 6174 655f 636f 6e64 5f66  ot_update_cond_f
+00009b80: 7265 7120 616e 6420 6e6f 745f 7570 6461  req and not_upda
+00009b90: 7465 5f63 6f6e 645f 7469 6d65 2061 6e64  te_cond_time and
+00009ba0: 2073 656c 662e 746f 6b65 6e20 616e 6420   self.token and 
+00009bb0: 7365 6c66 2e73 6967 6e29 3a0d 0a20 2020  self.sign):..   
+00009bc0: 2020 2020 2020 2020 2073 656c 662e 6265           self.be
+00009bd0: 6769 6e5f 7469 6d65 203d 2074 696d 652e  gin_time = time.
+00009be0: 7469 6d65 2829 0d0a 2020 2020 2020 2020  time()..        
+00009bf0: 2020 2020 7365 6c66 2e73 6573 7369 6f6e      self.session
+00009c00: 203d 2072 6571 7565 7374 732e 5365 7373   = requests.Sess
+00009c10: 696f 6e28 290d 0a20 2020 2020 2020 2020  ion()..         
+00009c20: 2020 205f 203d 2073 656c 662e 7365 7373     _ = self.sess
+00009c30: 696f 6e2e 6765 7428 7365 6c66 2e68 6f73  ion.get(self.hos
+00009c40: 745f 7572 6c2c 2068 6561 6465 7273 3d73  t_url, headers=s
+00009c50: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
+00009c60: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
+00009c70: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
+00009c80: 6573 2920 2023 206d 7573 7420 7477 6963  es)  # must twic
+00009c90: 652c 2073 656e 6420 636f 6f6b 6965 732e  e, send cookies.
+00009ca0: 0d0a 2020 2020 2020 2020 2020 2020 686f  ..            ho
+00009cb0: 7374 5f68 746d 6c20 3d20 7365 6c66 2e73  st_html = self.s
+00009cc0: 6573 7369 6f6e 2e67 6574 2873 656c 662e  ession.get(self.
+00009cd0: 686f 7374 5f75 726c 2c20 6865 6164 6572  host_url, header
+00009ce0: 733d 7365 6c66 2e68 6f73 745f 6865 6164  s=self.host_head
+00009cf0: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
+00009d00: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
+00009d10: 6f78 6965 7329 2e74 6578 740d 0a20 2020  oxies).text..   
+00009d20: 2020 2020 2020 2020 2073 656c 662e 746f           self.to
+00009d30: 6b65 6e20 3d20 7365 6c66 2e67 6574 5f74  ken = self.get_t
+00009d40: 6b28 686f 7374 5f68 746d 6c29 0d0a 2020  k(host_html)..  
+00009d50: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+00009d60: 6967 6e20 3d20 7365 6c66 2e67 6574 5f73  ign = self.get_s
+00009d70: 6967 6e28 7175 6572 795f 7465 7874 2c20  ign(query_text, 
+00009d80: 686f 7374 5f68 746d 6c2c 2073 656c 662e  host_html, self.
+00009d90: 7365 7373 696f 6e2c 2073 656c 662e 686f  session, self.ho
+00009da0: 7374 5f68 6561 6465 7273 2c20 7469 6d65  st_headers, time
+00009db0: 6f75 742c 2070 726f 7869 6573 290d 0a0d  out, proxies)...
+00009dc0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00009dd0: 6e6f 7420 7365 6c66 2e67 6574 5f6c 616e  not self.get_lan
+00009de0: 675f 7572 6c3a 0d0a 2020 2020 2020 2020  g_url:..        
+00009df0: 2020 2020 2020 2020 7365 6c66 2e67 6574          self.get
+00009e00: 5f6c 616e 675f 7572 6c20 3d20 7265 2e63  _lang_url = re.c
+00009e10: 6f6d 7069 6c65 2873 656c 662e 6765 745f  ompile(self.get_
+00009e20: 6c61 6e67 5f75 726c 5f70 6174 7465 726e  lang_url_pattern
+00009e30: 292e 7365 6172 6368 2868 6f73 745f 6874  ).search(host_ht
+00009e40: 6d6c 292e 6772 6f75 7028 290d 0a0d 0a20  ml).group().... 
+00009e50: 2020 2020 2020 2020 2020 2064 6562 7567             debug
+00009e60: 5f6c 616e 675f 6b77 6172 6773 203d 2073  _lang_kwargs = s
+00009e70: 656c 662e 6465 6275 675f 6c61 6e67 5f6b  elf.debug_lang_k
+00009e80: 7761 7267 7328 6672 6f6d 5f6c 616e 6775  wargs(from_langu
+00009e90: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
+00009ea0: 2c20 7365 6c66 2e64 6566 6175 6c74 5f66  , self.default_f
+00009eb0: 726f 6d5f 6c61 6e67 7561 6765 2c20 6966  rom_language, if
+00009ec0: 5f70 7269 6e74 5f77 6172 6e69 6e67 290d  _print_warning).
+00009ed0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00009ee0: 662e 6c61 6e67 7561 6765 5f6d 6170 203d  f.language_map =
+00009ef0: 2073 656c 662e 6765 745f 6c61 6e67 7561   self.get_langua
+00009f00: 6765 5f6d 6170 2873 656c 662e 6765 745f  ge_map(self.get_
+00009f10: 6c61 6e67 5f75 726c 2c20 7365 6c66 2e73  lang_url, self.s
+00009f20: 6573 7369 6f6e 2c20 7365 6c66 2e68 6f73  ession, self.hos
+00009f30: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
+00009f40: 7574 2c20 7072 6f78 6965 732c 202a 2a64  ut, proxies, **d
+00009f50: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
+00009f60: 290d 0a0d 0a20 2020 2020 2020 2066 726f  )....        fro
+00009f70: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
+00009f80: 616e 6775 6167 6520 3d20 7365 6c66 2e63  anguage = self.c
+00009f90: 6865 636b 5f6c 616e 6775 6167 6528 6672  heck_language(fr
+00009fa0: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
+00009fb0: 6c61 6e67 7561 6765 2c20 7365 6c66 2e6c  language, self.l
+00009fc0: 616e 6775 6167 655f 6d61 702c 206f 7574  anguage_map, out
+00009fd0: 7075 745f 7a68 3d73 656c 662e 6f75 7470  put_zh=self.outp
+00009fe0: 7574 5f7a 6829 0d0a 2020 2020 2020 2020  ut_zh)..        
+00009ff0: 6966 2066 726f 6d5f 6c61 6e67 7561 6765  if from_language
+0000a000: 203d 3d20 2761 7574 6f27 3a0d 0a20 2020   == 'auto':..   
+0000a010: 2020 2020 2020 2020 2072 6573 203d 2073           res = s
+0000a020: 656c 662e 7365 7373 696f 6e2e 706f 7374  elf.session.post
+0000a030: 2873 656c 662e 6c61 6e67 6465 7465 6374  (self.langdetect
+0000a040: 5f75 726c 2c20 6865 6164 6572 733d 7365  _url, headers=se
+0000a050: 6c66 2e61 7069 5f68 6561 6465 7273 2c20  lf.api_headers, 
+0000a060: 6461 7461 3d7b 2271 7565 7279 223a 2071  data={"query": q
+0000a070: 7565 7279 5f74 6578 747d 2c20 7469 6d65  uery_text}, time
+0000a080: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
+0000a090: 7869 6573 3d70 726f 7869 6573 290d 0a20  xies=proxies).. 
+0000a0a0: 2020 2020 2020 2020 2020 2066 726f 6d5f             from_
+0000a0b0: 6c61 6e67 7561 6765 203d 2072 6573 2e6a  language = res.j
+0000a0c0: 736f 6e28 295b 276c 616e 275d 0d0a 0d0a  son()['lan']....
+0000a0d0: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
+0000a0e0: 207b 2266 726f 6d22 3a20 6672 6f6d 5f6c   {"from": from_l
+0000a0f0: 616e 6775 6167 652c 2022 746f 223a 2074  anguage, "to": t
+0000a100: 6f5f 6c61 6e67 7561 6765 7d0d 0a20 2020  o_language}..   
+0000a110: 2020 2020 2070 6179 6c6f 6164 203d 207b       payload = {
+0000a120: 0d0a 2020 2020 2020 2020 2020 2020 2266  ..            "f
+0000a130: 726f 6d22 3a20 6672 6f6d 5f6c 616e 6775  rom": from_langu
+0000a140: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
+0000a150: 2020 2274 6f22 3a20 746f 5f6c 616e 6775    "to": to_langu
+0000a160: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
+0000a170: 2020 2271 7565 7279 223a 2071 7565 7279    "query": query
+0000a180: 5f74 6578 742c 2020 2320 6672 6f6d 2075  _text,  # from u
+0000a190: 726c 6c69 622e 7061 7273 6520 696d 706f  rllib.parse impo
+0000a1a0: 7274 2071 756f 7465 5f70 6c75 730d 0a20  rt quote_plus.. 
+0000a1b0: 2020 2020 2020 2020 2020 2022 7472 616e             "tran
+0000a1c0: 7374 7970 6522 3a20 2272 6561 6c74 696d  stype": "realtim
+0000a1d0: 6522 2c20 2023 205b 2274 7261 6e73 6c61  e",  # ["transla
+0000a1e0: 6e67 222c 2272 6561 6c74 696d 6522 5d0d  ng","realtime"].
+0000a1f0: 0a20 2020 2020 2020 2020 2020 2022 7369  .            "si
+0000a200: 6d70 6c65 5f6d 6561 6e73 5f66 6c61 6722  mple_means_flag"
+0000a210: 3a20 2233 222c 0d0a 2020 2020 2020 2020  : "3",..        
+0000a220: 2020 2020 2273 6967 6e22 3a20 7365 6c66      "sign": self
+0000a230: 2e73 6967 6e2c 0d0a 2020 2020 2020 2020  .sign,..        
+0000a240: 2020 2020 2274 6f6b 656e 223a 2073 656c      "token": sel
+0000a250: 662e 746f 6b65 6e2c 0d0a 2020 2020 2020  f.token,..      
+0000a260: 2020 2020 2020 2264 6f6d 6169 6e22 3a20        "domain": 
+0000a270: 7573 655f 646f 6d61 696e 2c0d 0a20 2020  use_domain,..   
+0000a280: 2020 2020 207d 0d0a 2020 2020 2020 2020       }..        
+0000a290: 7061 796c 6f61 6420 3d20 7572 6c6c 6962  payload = urllib
+0000a2a0: 2e70 6172 7365 2e75 726c 656e 636f 6465  .parse.urlencode
+0000a2b0: 2870 6179 6c6f 6164 292e 656e 636f 6465  (payload).encode
+0000a2c0: 2827 7574 662d 3827 290d 0a20 2020 2020  ('utf-8')..     
+0000a2d0: 2020 2023 2073 656c 662e 6170 695f 6865     # self.api_he
+0000a2e0: 6164 6572 732e 7570 6461 7465 287b 2741  aders.update({'A
+0000a2f0: 6373 2d54 6f6b 656e 273a 2073 656c 662e  cs-Token': self.
+0000a300: 6163 735f 746f 6b65 6e7d 290d 0a20 2020  acs_token})..   
+0000a310: 2020 2020 2072 203d 2073 656c 662e 7365       r = self.se
+0000a320: 7373 696f 6e2e 706f 7374 2873 656c 662e  ssion.post(self.
+0000a330: 6170 695f 7572 6c2c 2070 6172 616d 733d  api_url, params=
+0000a340: 7061 7261 6d73 2c20 6461 7461 3d70 6179  params, data=pay
+0000a350: 6c6f 6164 2c20 6865 6164 6572 733d 7365  load, headers=se
+0000a360: 6c66 2e61 7069 5f68 6561 6465 7273 2c20  lf.api_headers, 
+0000a370: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+0000a380: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+0000a390: 290d 0a20 2020 2020 2020 2072 2e72 6169  )..        r.rai
+0000a3a0: 7365 5f66 6f72 5f73 7461 7475 7328 290d  se_for_status().
+0000a3b0: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
+0000a3c0: 722e 6a73 6f6e 2829 0d0a 2020 2020 2020  r.json()..      
+0000a3d0: 2020 7469 6d65 2e73 6c65 6570 2873 6c65    time.sleep(sle
+0000a3e0: 6570 5f73 6563 6f6e 6473 290d 0a20 2020  ep_seconds)..   
+0000a3f0: 2020 2020 2073 656c 662e 7175 6572 795f       self.query_
+0000a400: 636f 756e 7420 2b3d 2031 0d0a 2020 2020  count += 1..    
+0000a410: 2020 2020 7265 7475 726e 2064 6174 6120      return data 
+0000a420: 6966 2069 735f 6465 7461 696c 5f72 6573  if is_detail_res
+0000a430: 756c 7420 656c 7365 2027 5c6e 272e 6a6f  ult else '\n'.jo
+0000a440: 696e 285b 785b 2764 7374 275d 2066 6f72  in([x['dst'] for
+0000a450: 2078 2069 6e20 6461 7461 5b27 7472 616e   x in data['tran
+0000a460: 735f 7265 7375 6c74 275d 5b27 6461 7461  s_result']['data
+0000a470: 275d 5d29 0d0a 0d0a 0d0a 636c 6173 7320  ']])......class 
+0000a480: 596f 7564 616f 5631 2854 7365 293a 0d0a  YoudaoV1(Tse):..
+0000a490: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+0000a4a0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+0000a4b0: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
+0000a4c0: 5f28 290d 0a20 2020 2020 2020 2073 656c  _()..        sel
+0000a4d0: 662e 6265 6769 6e5f 7469 6d65 203d 2074  f.begin_time = t
+0000a4e0: 696d 652e 7469 6d65 2829 0d0a 2020 2020  ime.time()..    
+0000a4f0: 2020 2020 7365 6c66 2e68 6f73 745f 7572      self.host_ur
+0000a500: 6c20 3d20 2768 7474 7073 3a2f 2f66 616e  l = 'https://fan
+0000a510: 7969 2e79 6f75 6461 6f2e 636f 6d27 0d0a  yi.youdao.com'..
+0000a520: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
+0000a530: 5f75 726c 203d 2027 6874 7470 733a 2f2f  _url = 'https://
+0000a540: 6661 6e79 692e 796f 7564 616f 2e63 6f6d  fanyi.youdao.com
+0000a550: 2f74 7261 6e73 6c61 7465 5f6f 3f73 6d61  /translate_o?sma
+0000a560: 7274 7265 7375 6c74 3d64 6963 7426 736d  rtresult=dict&sm
+0000a570: 6172 7472 6573 756c 743d 7275 6c65 270d  artresult=rule'.
+0000a580: 0a20 2020 2020 2020 2073 656c 662e 6c61  .        self.la
+0000a590: 6e67 7561 6765 5f75 726c 203d 2027 6874  nguage_url = 'ht
+0000a5a0: 7470 733a 2f2f 6170 692d 6f76 6572 6d69  tps://api-overmi
+0000a5b0: 6e64 2e79 6f75 6461 6f2e 636f 6d2f 6f70  nd.youdao.com/op
+0000a5c0: 656e 6170 692f 6765 742f 6c75 6e61 2f64  enapi/get/luna/d
+0000a5d0: 6963 742f 6c75 6e61 2d66 726f 6e74 2f70  ict/luna-front/p
+0000a5e0: 726f 642f 6c61 6e67 5479 7065 270d 0a20  rod/langType'.. 
+0000a5f0: 2020 2020 2020 2073 656c 662e 6765 745f         self.get_
+0000a600: 7369 676e 5f6f 6c64 5f75 726c 203d 2027  sign_old_url = '
+0000a610: 6874 7470 733a 2f2f 7368 6172 6564 2e79  https://shared.y
+0000a620: 6473 7461 7469 632e 636f 6d2f 6661 6e79  dstatic.com/fany
+0000a630: 692f 6e65 7777 6562 2f76 312e 302e 3239  i/newweb/v1.0.29
+0000a640: 2f73 6372 6970 7473 2f6e 6577 7765 622f  /scripts/newweb/
+0000a650: 6661 6e79 692e 6d69 6e2e 6a73 270d 0a20  fanyi.min.js'.. 
+0000a660: 2020 2020 2020 2073 656c 662e 6765 745f         self.get_
+0000a670: 7369 676e 5f75 726c 203d 204e 6f6e 650d  sign_url = None.
+0000a680: 0a20 2020 2020 2020 2073 656c 662e 6765  .        self.ge
+0000a690: 745f 7369 676e 5f70 6174 7465 726e 203d  t_sign_pattern =
+0000a6a0: 2027 6874 7470 733a 2f2f 7368 6172 6564   'https://shared
+0000a6b0: 2e79 6473 7461 7469 632e 636f 6d2f 6661  .ydstatic.com/fa
+0000a6c0: 6e79 692f 6e65 7777 6562 2f28 2e2a 3f29  nyi/newweb/(.*?)
+0000a6d0: 2f73 6372 6970 7473 2f6e 6577 7765 622f  /scripts/newweb/
+0000a6e0: 6661 6e79 692e 6d69 6e2e 6a73 270d 0a20  fanyi.min.js'.. 
+0000a6f0: 2020 2020 2020 2073 656c 662e 686f 7374         self.host
+0000a700: 5f68 6561 6465 7273 203d 2073 656c 662e  _headers = self.
+0000a710: 6765 745f 6865 6164 6572 7328 7365 6c66  get_headers(self
+0000a720: 2e68 6f73 745f 7572 6c2c 2069 665f 6170  .host_url, if_ap
+0000a730: 693d 4661 6c73 6529 0d0a 2020 2020 2020  i=False)..      
+0000a740: 2020 7365 6c66 2e61 7069 5f68 6561 6465    self.api_heade
+0000a750: 7273 203d 2073 656c 662e 6765 745f 6865  rs = self.get_he
+0000a760: 6164 6572 7328 7365 6c66 2e68 6f73 745f  aders(self.host_
+0000a770: 7572 6c2c 2069 665f 6170 693d 5472 7565  url, if_api=True
+0000a780: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+0000a790: 6c61 6e67 7561 6765 5f6d 6170 203d 204e  language_map = N
+0000a7a0: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
+0000a7b0: 662e 7365 7373 696f 6e20 3d20 4e6f 6e65  f.session = None
+0000a7c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
+0000a7d0: 6967 6e5f 6b65 7920 3d20 4e6f 6e65 0d0a  ign_key = None..
+0000a7e0: 2020 2020 2020 2020 7365 6c66 2e71 7565          self.que
+0000a7f0: 7279 5f63 6f75 6e74 203d 2030 0d0a 2020  ry_count = 0..  
+0000a800: 2020 2020 2020 7365 6c66 2e6f 7574 7075        self.outpu
+0000a810: 745f 7a68 203d 2027 7a68 2d43 4853 270d  t_zh = 'zh-CHS'.
+0000a820: 0a20 2020 2020 2020 2073 656c 662e 696e  .        self.in
+0000a830: 7075 745f 6c69 6d69 7420 3d20 696e 7428  put_limit = int(
+0000a840: 3565 3329 0d0a 2020 2020 2020 2020 7365  5e3)..        se
+0000a850: 6c66 2e64 6566 6175 6c74 5f66 726f 6d5f  lf.default_from_
+0000a860: 6c61 6e67 7561 6765 203d 2073 656c 662e  language = self.
+0000a870: 6f75 7470 7574 5f7a 680d 0a0d 0a20 2020  output_zh....   
+0000a880: 2023 2040 5473 652e 6465 6275 675f 6c61   # @Tse.debug_la
+0000a890: 6e67 7561 6765 5f6d 6170 0d0a 2020 2020  nguage_map..    
+0000a8a0: 2320 6465 6620 6765 745f 6c61 6e67 7561  # def get_langua
+0000a8b0: 6765 5f6d 6170 2873 656c 662c 2068 6f73  ge_map(self, hos
+0000a8c0: 745f 6874 6d6c 3a20 7374 722c 202a 2a6b  t_html: str, **k
+0000a8d0: 7761 7267 733a 204c 616e 674d 6170 4b77  wargs: LangMapKw
+0000a8e0: 6172 6773 5479 7065 2920 2d3e 2064 6963  argsType) -> dic
+0000a8f0: 743a 0d0a 2020 2020 2320 2020 2020 6574  t:..    #     et
+0000a900: 203d 206c 786d 6c2e 6574 7265 652e 4854   = lxml.etree.HT
+0000a910: 4d4c 2868 6f73 745f 6874 6d6c 290d 0a20  ML(host_html).. 
+0000a920: 2020 2023 2020 2020 206c 616e 675f 6c69     #     lang_li
+0000a930: 7374 203d 2065 742e 7870 6174 6828 272f  st = et.xpath('/
+0000a940: 2f2a 5b40 6964 3d22 6c61 6e67 7561 6765  /*[@id="language
+0000a950: 5365 6c65 6374 225d 2f6c 692f 4064 6174  Select"]/li/@dat
+0000a960: 612d 7661 6c75 6527 290d 0a20 2020 2023  a-value')..    #
+0000a970: 2020 2020 206c 616e 675f 6c69 7374 203d       lang_list =
+0000a980: 205b 2878 2e73 706c 6974 2827 3227 295b   [(x.split('2')[
+0000a990: 305d 2c20 5b78 2e73 706c 6974 2827 3227  0], [x.split('2'
+0000a9a0: 295b 315d 5d29 2066 6f72 2078 2069 6e20  )[1]]) for x in 
+0000a9b0: 6c61 6e67 5f6c 6973 7420 6966 2027 3227  lang_list if '2'
+0000a9c0: 2069 6e20 785d 0d0a 2020 2020 2320 2020   in x]..    #   
+0000a9d0: 2020 6c61 6e67 5f6d 6170 203d 2064 6963    lang_map = dic
+0000a9e0: 7428 6d61 7028 6c61 6d62 6461 2078 3a20  t(map(lambda x: 
+0000a9f0: 782c 206c 616e 675f 6c69 7374 2929 0d0a  x, lang_list))..
+0000aa00: 2020 2020 2320 2020 2020 6c61 6e67 5f6d      #     lang_m
+0000aa10: 6170 2e70 6f70 2827 7a68 2d43 4853 2729  ap.pop('zh-CHS')
+0000aa20: 0d0a 2020 2020 2320 2020 2020 6c61 6e67  ..    #     lang
+0000aa30: 5f6d 6170 2e75 7064 6174 6528 7b27 7a68  _map.update({'zh
+0000aa40: 2d43 4853 273a 206c 6973 7428 6c61 6e67  -CHS': list(lang
+0000aa50: 5f6d 6170 2e6b 6579 7328 2929 7d29 0d0a  _map.keys())})..
+0000aa60: 2020 2020 2320 2020 2020 7265 7475 726e      #     return
+0000aa70: 206c 616e 675f 6d61 700d 0a0d 0a20 2020   lang_map....   
+0000aa80: 2040 5473 652e 6465 6275 675f 6c61 6e67   @Tse.debug_lang
+0000aa90: 7561 6765 5f6d 6170 0d0a 2020 2020 6465  uage_map..    de
+0000aaa0: 6620 6765 745f 6c61 6e67 7561 6765 5f6d  f get_language_m
+0000aab0: 6170 2873 656c 662c 206c 616e 675f 7572  ap(self, lang_ur
+0000aac0: 6c3a 2073 7472 2c20 7373 3a20 5365 7373  l: str, ss: Sess
+0000aad0: 696f 6e54 7970 652c 2068 6561 6465 7273  ionType, headers
+0000aae0: 3a20 6469 6374 2c20 7469 6d65 6f75 743a  : dict, timeout:
+0000aaf0: 204f 7074 696f 6e61 6c5b 666c 6f61 745d   Optional[float]
+0000ab00: 2c20 7072 6f78 6965 733a 204f 7074 696f  , proxies: Optio
+0000ab10: 6e61 6c5b 6469 6374 5d2c 202a 2a6b 7761  nal[dict], **kwa
+0000ab20: 7267 733a 204c 616e 674d 6170 4b77 6172  rgs: LangMapKwar
+0000ab30: 6773 5479 7065 2920 2d3e 2064 6963 743a  gsType) -> dict:
+0000ab40: 0d0a 2020 2020 2020 2020 6461 7461 203d  ..        data =
+0000ab50: 2073 732e 6765 7428 6c61 6e67 5f75 726c   ss.get(lang_url
+0000ab60: 2c20 6865 6164 6572 733d 6865 6164 6572  , headers=header
+0000ab70: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
+0000ab80: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
+0000ab90: 6965 7329 2e6a 736f 6e28 290d 0a20 2020  ies).json()..   
+0000aba0: 2020 2020 206c 616e 675f 6c69 7374 203d       lang_list =
+0000abb0: 2073 6f72 7465 6428 5b69 745b 2763 6f64   sorted([it['cod
+0000abc0: 6527 5d20 666f 7220 6974 2069 6e20 6461  e'] for it in da
+0000abd0: 7461 5b27 6461 7461 275d 5b27 7661 6c75  ta['data']['valu
+0000abe0: 6527 5d5b 2774 6578 7454 7261 6e73 6c61  e']['textTransla
+0000abf0: 7465 275d 5b27 7370 6563 6966 7927 5d5d  te']['specify']]
+0000ac00: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+0000ac10: 6e20 7b7d 2e66 726f 6d6b 6579 7328 6c61  n {}.fromkeys(la
+0000ac20: 6e67 5f6c 6973 742c 206c 616e 675f 6c69  ng_list, lang_li
+0000ac30: 7374 290d 0a0d 0a20 2020 2064 6566 2067  st)....    def g
+0000ac40: 6574 5f73 6967 6e5f 6b65 7928 7365 6c66  et_sign_key(self
+0000ac50: 2c20 686f 7374 5f68 746d 6c3a 2073 7472  , host_html: str
+0000ac60: 2c20 7373 3a20 5365 7373 696f 6e54 7970  , ss: SessionTyp
+0000ac70: 652c 2074 696d 656f 7574 3a20 666c 6f61  e, timeout: floa
+0000ac80: 742c 2070 726f 7869 6573 3a20 6469 6374  t, proxies: dict
+0000ac90: 2920 2d3e 2073 7472 3a0d 0a20 2020 2020  ) -> str:..     
+0000aca0: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+0000acb0: 2020 2020 2069 6620 6e6f 7420 7365 6c66       if not self
+0000acc0: 2e67 6574 5f73 6967 6e5f 7572 6c3a 0d0a  .get_sign_url:..
+0000acd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ace0: 7365 6c66 2e67 6574 5f73 6967 6e5f 7572  self.get_sign_ur
+0000acf0: 6c20 3d20 7265 2e63 6f6d 7069 6c65 2873  l = re.compile(s
+0000ad00: 656c 662e 6765 745f 7369 676e 5f70 6174  elf.get_sign_pat
+0000ad10: 7465 726e 292e 7365 6172 6368 2868 6f73  tern).search(hos
+0000ad20: 745f 6874 6d6c 292e 6772 6f75 7028 290d  t_html).group().
+0000ad30: 0a20 2020 2020 2020 2020 2020 2072 203d  .            r =
+0000ad40: 2073 732e 6765 7428 7365 6c66 2e67 6574   ss.get(self.get
+0000ad50: 5f73 6967 6e5f 7572 6c2c 2068 6561 6465  _sign_url, heade
+0000ad60: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
+0000ad70: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+0000ad80: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+0000ad90: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
+0000ada0: 2020 2020 2072 2e72 6169 7365 5f66 6f72       r.raise_for
+0000adb0: 5f73 7461 7475 7328 290d 0a20 2020 2020  _status()..     
+0000adc0: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
+0000add0: 2020 2020 2020 2020 7220 3d20 7373 2e67          r = ss.g
+0000ade0: 6574 2873 656c 662e 6765 745f 7369 676e  et(self.get_sign
+0000adf0: 5f6f 6c64 5f75 726c 2c20 6865 6164 6572  _old_url, header
+0000ae00: 733d 7365 6c66 2e68 6f73 745f 6865 6164  s=self.host_head
+0000ae10: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
+0000ae20: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
+0000ae30: 6f78 6965 7329 0d0a 2020 2020 2020 2020  oxies)..        
+0000ae40: 2020 2020 722e 7261 6973 655f 666f 725f      r.raise_for_
+0000ae50: 7374 6174 7573 2829 0d0a 2020 2020 2020  status()..      
+0000ae60: 2020 7369 676e 203d 2072 652e 636f 6d70    sign = re.comp
+0000ae70: 696c 6528 276d 6435 5c5c 2822 6661 6e79  ile('md5\\("fany
+0000ae80: 6964 6573 6b77 6562 2220 5c5c 2b20 6520  ideskweb" \\+ e 
+0000ae90: 5c5c 2b20 6920 5c5c 2b20 2228 2e2a 3f29  \\+ i \\+ "(.*?)
+0000aea0: 225c 5c29 2729 2e66 696e 6461 6c6c 2872  "\\)').findall(r
+0000aeb0: 2e74 6578 7429 0d0a 2020 2020 2020 2020  .text)..        
+0000aec0: 7265 7475 726e 2073 6967 6e5b 305d 2069  return sign[0] i
+0000aed0: 6620 7369 676e 2061 6e64 2073 6967 6e20  f sign and sign 
+0000aee0: 213d 205b 2727 5d20 656c 7365 2022 5967  != [''] else "Yg
+0000aef0: 795f 3463 3d72 2365 2334 4558 5e4e 5547  y_4c=r#e#4EX^NUG
+0000af00: 5563 3522 2020 2320 7631 2e31 2e31 300d  Uc5"  # v1.1.10.
+0000af10: 0a0d 0a20 2020 2064 6566 2067 6574 5f66  ...    def get_f
+0000af20: 6f72 6d28 7365 6c66 2c20 7175 6572 795f  orm(self, query_
+0000af30: 7465 7874 3a20 7374 722c 2066 726f 6d5f  text: str, from_
+0000af40: 6c61 6e67 7561 6765 3a20 7374 722c 2074  language: str, t
+0000af50: 6f5f 6c61 6e67 7561 6765 3a20 7374 722c  o_language: str,
+0000af60: 2073 6967 6e5f 6b65 793a 2073 7472 2920   sign_key: str) 
+0000af70: 2d3e 2064 6963 743a 0d0a 2020 2020 2020  -> dict:..      
+0000af80: 2020 7473 203d 2073 7472 2873 656c 662e    ts = str(self.
+0000af90: 6765 745f 7469 6d65 7374 616d 7028 2929  get_timestamp())
+0000afa0: 0d0a 2020 2020 2020 2020 7361 6c74 203d  ..        salt =
+0000afb0: 2073 7472 2874 7329 202b 2073 7472 2872   str(ts) + str(r
+0000afc0: 616e 646f 6d2e 7261 6e64 7261 6e67 6528  andom.randrange(
+0000afd0: 302c 2031 3029 290d 0a20 2020 2020 2020  0, 10))..       
+0000afe0: 2073 6967 6e5f 7465 7874 203d 2027 272e   sign_text = ''.
+0000aff0: 6a6f 696e 285b 2766 616e 7969 6465 736b  join(['fanyidesk
+0000b000: 7765 6227 2c20 7175 6572 795f 7465 7874  web', query_text
+0000b010: 2c20 7361 6c74 2c20 7369 676e 5f6b 6579  , salt, sign_key
+0000b020: 5d29 0d0a 2020 2020 2020 2020 7369 676e  ])..        sign
+0000b030: 203d 2068 6173 686c 6962 2e6d 6435 2873   = hashlib.md5(s
+0000b040: 6967 6e5f 7465 7874 2e65 6e63 6f64 6528  ign_text.encode(
+0000b050: 2929 2e68 6578 6469 6765 7374 2829 0d0a  )).hexdigest()..
+0000b060: 2020 2020 2020 2020 6276 203d 2068 6173          bv = has
+0000b070: 686c 6962 2e6d 6435 2873 656c 662e 6170  hlib.md5(self.ap
+0000b080: 695f 6865 6164 6572 735b 2755 7365 722d  i_headers['User-
+0000b090: 4167 656e 7427 5d5b 383a 5d2e 656e 636f  Agent'][8:].enco
+0000b0a0: 6465 2829 292e 6865 7864 6967 6573 7428  de()).hexdigest(
+0000b0b0: 290d 0a20 2020 2020 2020 2066 6f72 6d20  )..        form 
+0000b0c0: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
+0000b0d0: 2027 6927 3a20 7175 6572 795f 7465 7874   'i': query_text
+0000b0e0: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+0000b0f0: 6672 6f6d 273a 2066 726f 6d5f 6c61 6e67  from': from_lang
+0000b100: 7561 6765 2c0d 0a20 2020 2020 2020 2020  uage,..         
+0000b110: 2020 2027 746f 273a 2074 6f5f 6c61 6e67     'to': to_lang
+0000b120: 7561 6765 2c0d 0a20 2020 2020 2020 2020  uage,..         
+0000b130: 2020 2027 6c74 7327 3a20 7473 2c20 2023     'lts': ts,  #
+0000b140: 2072 203d 2022 2220 2b20 286e 6577 2044   r = "" + (new D
+0000b150: 6174 6529 2e67 6574 5469 6d65 2829 0d0a  ate).getTime()..
+0000b160: 2020 2020 2020 2020 2020 2020 2773 616c              'sal
+0000b170: 7427 3a20 7361 6c74 2c20 2023 2069 203d  t': salt,  # i =
+0000b180: 2072 202b 2070 6172 7365 496e 7428 3130   r + parseInt(10
+0000b190: 202a 204d 6174 682e 7261 6e64 6f6d 2829   * Math.random()
+0000b1a0: 2c20 3130 290d 0a20 2020 2020 2020 2020  , 10)..         
+0000b1b0: 2020 2027 7369 676e 273a 2073 6967 6e2c     'sign': sign,
+0000b1c0: 2020 2320 6e2e 6d64 3528 2266 616e 7969    # n.md5("fanyi
+0000b1d0: 6465 736b 7765 6222 202b 2065 202b 2069  deskweb" + e + i
+0000b1e0: 202b 2022 6e25 412d 724b 6154 3566 625b   + "n%A-rKaT5fb[
+0000b1f0: 4779 3f3b 4e35 4054 6a22 292c 653d 7465  Gy?;N5@Tj"),e=te
+0000b200: 7874 0d0a 2020 2020 2020 2020 2020 2020  xt..            
+0000b210: 2762 7627 3a20 6276 2c20 2023 206e 2e6d  'bv': bv,  # n.m
+0000b220: 6435 286e 6176 6967 6174 6f72 2e61 7070  d5(navigator.app
+0000b230: 5665 7273 696f 6e29 0d0a 2020 2020 2020  Version)..      
+0000b240: 2020 2020 2020 2773 6d61 7274 7265 7375        'smartresu
+0000b250: 6c74 273a 2027 6469 6374 272c 0d0a 2020  lt': 'dict',..  
+0000b260: 2020 2020 2020 2020 2020 2763 6c69 656e            'clien
+0000b270: 7427 3a20 2766 616e 7969 6465 736b 7765  t': 'fanyideskwe
+0000b280: 6227 2c0d 0a20 2020 2020 2020 2020 2020  b',..           
+0000b290: 2027 646f 6374 7970 6527 3a20 276a 736f   'doctype': 'jso
+0000b2a0: 6e27 2c0d 0a20 2020 2020 2020 2020 2020  n',..           
+0000b2b0: 2027 7665 7273 696f 6e27 3a20 2732 2e31   'version': '2.1
+0000b2c0: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+0000b2d0: 276b 6579 6672 6f6d 273a 2027 6661 6e79  'keyfrom': 'fany
+0000b2e0: 692e 7765 6227 2c0d 0a20 2020 2020 2020  i.web',..       
+0000b2f0: 2020 2020 2027 6163 7469 6f6e 273a 2027       'action': '
+0000b300: 4659 5f42 595f 5245 414c 546c 4d45 272c  FY_BY_REALTlME',
+0000b310: 2020 2320 6e6f 7420 7469 6d65 2e5b 2246    # not time.["F
+0000b320: 595f 4259 5f52 4541 4c54 6c4d 4522 2c20  Y_BY_REALTlME", 
+0000b330: 2246 595f 4259 5f44 4546 4155 4c54 222c  "FY_BY_DEFAULT",
+0000b340: 2022 4659 5f42 595f 434c 4943 4b42 5554   "FY_BY_CLICKBUT
+0000b350: 5449 4f4e 222c 2022 6c61 6e2d 7365 6c65  TION", "lan-sele
+0000b360: 6374 225d 0d0a 2020 2020 2020 2020 2020  ct"]..          
+0000b370: 2020 2320 2774 7970 6f52 6573 756c 7427    # 'typoResult'
+0000b380: 3a20 2766 616c 7365 270d 0a20 2020 2020  : 'false'..     
+0000b390: 2020 207d 0d0a 2020 2020 2020 2020 7265     }..        re
+0000b3a0: 7475 726e 2066 6f72 6d0d 0a0d 0a20 2020  turn form....   
+0000b3b0: 2040 5473 652e 7469 6d65 5f73 7461 740d   @Tse.time_stat.
+0000b3c0: 0a20 2020 2040 5473 652e 6368 6563 6b5f  .    @Tse.check_
+0000b3d0: 7175 6572 790d 0a20 2020 2064 6566 2079  query..    def y
+0000b3e0: 6f75 6461 6f5f 6170 6928 7365 6c66 2c20  oudao_api(self, 
+0000b3f0: 7175 6572 795f 7465 7874 3a20 7374 722c  query_text: str,
+0000b400: 2066 726f 6d5f 6c61 6e67 7561 6765 3a20   from_language: 
+0000b410: 7374 7220 3d20 2761 7574 6f27 2c20 746f  str = 'auto', to
+0000b420: 5f6c 616e 6775 6167 653a 2073 7472 203d  _language: str =
+0000b430: 2027 656e 272c 202a 2a6b 7761 7267 733a   'en', **kwargs:
+0000b440: 2041 7069 4b77 6172 6773 5479 7065 2920   ApiKwargsType) 
+0000b450: 2d3e 2055 6e69 6f6e 5b73 7472 2c20 6469  -> Union[str, di
+0000b460: 6374 5d3a 0d0a 2020 2020 2020 2020 2222  ct]:..        ""
+0000b470: 220d 0a20 2020 2020 2020 2068 7474 7073  "..        https
+0000b480: 3a2f 2f66 616e 7969 2e79 6f75 6461 6f2e  ://fanyi.youdao.
+0000b490: 636f 6d0d 0a20 2020 2020 2020 203a 7061  com..        :pa
+0000b4a0: 7261 6d20 7175 6572 795f 7465 7874 3a20  ram query_text: 
+0000b4b0: 7374 722c 206d 7573 742e 0d0a 2020 2020  str, must...    
+0000b4c0: 2020 2020 3a70 6172 616d 2066 726f 6d5f      :param from_
+0000b4d0: 6c61 6e67 7561 6765 3a20 7374 722c 2064  language: str, d
+0000b4e0: 6566 6175 6c74 2027 6175 746f 272e 0d0a  efault 'auto'...
+0000b4f0: 2020 2020 2020 2020 3a70 6172 616d 2074          :param t
+0000b500: 6f5f 6c61 6e67 7561 6765 3a20 7374 722c  o_language: str,
+0000b510: 2064 6566 6175 6c74 2027 656e 272e 0d0a   default 'en'...
+0000b520: 2020 2020 2020 2020 3a70 6172 616d 202a          :param *
+0000b530: 2a6b 7761 7267 733a 0d0a 2020 2020 2020  *kwargs:..      
+0000b540: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+0000b550: 2074 696d 656f 7574 3a20 666c 6f61 742c   timeout: float,
+0000b560: 2064 6566 6175 6c74 204e 6f6e 652e 0d0a   default None...
+0000b570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b580: 3a70 6172 616d 2070 726f 7869 6573 3a20  :param proxies: 
+0000b590: 6469 6374 2c20 6465 6661 756c 7420 4e6f  dict, default No
+0000b5a0: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
+0000b5b0: 2020 2020 203a 7061 7261 6d20 736c 6565       :param slee
+0000b5c0: 705f 7365 636f 6e64 733a 2066 6c6f 6174  p_seconds: float
+0000b5d0: 2c20 6465 6661 756c 7420 302e 0d0a 2020  , default 0...  
+0000b5e0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+0000b5f0: 6172 616d 2069 735f 6465 7461 696c 5f72  aram is_detail_r
+0000b600: 6573 756c 743a 2062 6f6f 6c2c 2064 6566  esult: bool, def
+0000b610: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
+0000b620: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+0000b630: 7261 6d20 6966 5f69 676e 6f72 655f 6c69  ram if_ignore_li
+0000b640: 6d69 745f 6f66 5f6c 656e 6774 683a 2062  mit_of_length: b
+0000b650: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
+0000b660: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
+0000b670: 2020 2020 203a 7061 7261 6d20 6c69 6d69       :param limi
+0000b680: 745f 6f66 5f6c 656e 6774 683a 2069 6e74  t_of_length: int
+0000b690: 2c20 6465 6661 756c 7420 3230 3030 302e  , default 20000.
+0000b6a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b6b0: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
+0000b6c0: 7265 5f65 6d70 7479 5f71 7565 7279 3a20  re_empty_query: 
+0000b6d0: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
+0000b6e0: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
+0000b6f0: 2020 2020 2020 3a70 6172 616d 2075 7064        :param upd
+0000b700: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0000b710: 725f 6672 6571 3a20 696e 742c 2064 6566  r_freq: int, def
+0000b720: 6175 6c74 2031 3030 302e 0d0a 2020 2020  ault 1000...    
+0000b730: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+0000b740: 616d 2075 7064 6174 655f 7365 7373 696f  am update_sessio
+0000b750: 6e5f 6166 7465 725f 7365 636f 6e64 733a  n_after_seconds:
+0000b760: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
+0000b770: 3135 3030 2e0d 0a20 2020 2020 2020 2020  1500...         
+0000b780: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+0000b790: 5f73 686f 775f 7469 6d65 5f73 7461 743a  _show_time_stat:
+0000b7a0: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
+0000b7b0: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
+0000b7c0: 2020 2020 2020 203a 7061 7261 6d20 7368         :param sh
+0000b7d0: 6f77 5f74 696d 655f 7374 6174 5f70 7265  ow_time_stat_pre
+0000b7e0: 6369 7369 6f6e 3a20 696e 742c 2064 6566  cision: int, def
+0000b7f0: 6175 6c74 2032 2e0d 0a20 2020 2020 2020  ault 2...       
+0000b800: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+0000b810: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
+0000b820: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+0000b830: 5472 7565 2e0d 0a20 2020 2020 2020 203a  True...        :
+0000b840: 7265 7475 726e 3a20 7374 7220 6f72 2064  return: str or d
+0000b850: 6963 740d 0a20 2020 2020 2020 2022 2222  ict..        """
+0000b860: 0d0a 0d0a 2020 2020 2020 2020 7469 6d65  ....        time
+0000b870: 6f75 7420 3d20 6b77 6172 6773 2e67 6574  out = kwargs.get
+0000b880: 2827 7469 6d65 6f75 7427 2c20 4e6f 6e65  ('timeout', None
+0000b890: 290d 0a20 2020 2020 2020 2070 726f 7869  )..        proxi
+0000b8a0: 6573 203d 206b 7761 7267 732e 6765 7428  es = kwargs.get(
+0000b8b0: 2770 726f 7869 6573 272c 204e 6f6e 6529  'proxies', None)
+0000b8c0: 0d0a 2020 2020 2020 2020 736c 6565 705f  ..        sleep_
+0000b8d0: 7365 636f 6e64 7320 3d20 6b77 6172 6773  seconds = kwargs
+0000b8e0: 2e67 6574 2827 736c 6565 705f 7365 636f  .get('sleep_seco
+0000b8f0: 6e64 7327 2c20 3029 0d0a 2020 2020 2020  nds', 0)..      
+0000b900: 2020 6966 5f70 7269 6e74 5f77 6172 6e69    if_print_warni
+0000b910: 6e67 203d 206b 7761 7267 732e 6765 7428  ng = kwargs.get(
+0000b920: 2769 665f 7072 696e 745f 7761 726e 696e  'if_print_warnin
+0000b930: 6727 2c20 5472 7565 290d 0a20 2020 2020  g', True)..     
+0000b940: 2020 2069 735f 6465 7461 696c 5f72 6573     is_detail_res
+0000b950: 756c 7420 3d20 6b77 6172 6773 2e67 6574  ult = kwargs.get
+0000b960: 2827 6973 5f64 6574 6169 6c5f 7265 7375  ('is_detail_resu
+0000b970: 6c74 272c 2046 616c 7365 290d 0a20 2020  lt', False)..   
+0000b980: 2020 2020 2075 7064 6174 655f 7365 7373       update_sess
+0000b990: 696f 6e5f 6166 7465 725f 6672 6571 203d  ion_after_freq =
+0000b9a0: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
+0000b9b0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0000b9c0: 725f 6672 6571 272c 2073 656c 662e 6465  r_freq', self.de
+0000b9d0: 6661 756c 745f 7365 7373 696f 6e5f 6672  fault_session_fr
+0000b9e0: 6571 290d 0a20 2020 2020 2020 2075 7064  eq)..        upd
+0000b9f0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0000ba00: 725f 7365 636f 6e64 7320 3d20 6b77 6172  r_seconds = kwar
+0000ba10: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
+0000ba20: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+0000ba30: 6f6e 6473 272c 2073 656c 662e 6465 6661  onds', self.defa
+0000ba40: 756c 745f 7365 7373 696f 6e5f 7365 636f  ult_session_seco
+0000ba50: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
+0000ba60: 6c66 2e63 6865 636b 5f69 6e70 7574 5f6c  lf.check_input_l
+0000ba70: 696d 6974 2871 7565 7279 5f74 6578 742c  imit(query_text,
+0000ba80: 2073 656c 662e 696e 7075 745f 6c69 6d69   self.input_limi
+0000ba90: 7429 0d0a 0d0a 2020 2020 2020 2020 6e6f  t)....        no
+0000baa0: 745f 7570 6461 7465 5f63 6f6e 645f 6672  t_update_cond_fr
+0000bab0: 6571 203d 2031 2069 6620 7365 6c66 2e71  eq = 1 if self.q
+0000bac0: 7565 7279 5f63 6f75 6e74 2025 2075 7064  uery_count % upd
+0000bad0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0000bae0: 725f 6672 6571 2021 3d20 3020 656c 7365  r_freq != 0 else
+0000baf0: 2030 0d0a 2020 2020 2020 2020 6e6f 745f   0..        not_
+0000bb00: 7570 6461 7465 5f63 6f6e 645f 7469 6d65  update_cond_time
+0000bb10: 203d 2031 2069 6620 7469 6d65 2e74 696d   = 1 if time.tim
+0000bb20: 6528 2920 2d20 7365 6c66 2e62 6567 696e  e() - self.begin
+0000bb30: 5f74 696d 6520 3c20 7570 6461 7465 5f73  _time < update_s
+0000bb40: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+0000bb50: 6f6e 6473 2065 6c73 6520 300d 0a20 2020  onds else 0..   
+0000bb60: 2020 2020 2069 6620 6e6f 7420 2873 656c       if not (sel
+0000bb70: 662e 7365 7373 696f 6e20 616e 6420 7365  f.session and se
+0000bb80: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
+0000bb90: 616e 6420 6e6f 745f 7570 6461 7465 5f63  and not_update_c
+0000bba0: 6f6e 645f 6672 6571 2061 6e64 206e 6f74  ond_freq and not
+0000bbb0: 5f75 7064 6174 655f 636f 6e64 5f74 696d  _update_cond_tim
+0000bbc0: 6520 616e 6420 7365 6c66 2e73 6967 6e5f  e and self.sign_
+0000bbd0: 6b65 7929 3a0d 0a20 2020 2020 2020 2020  key):..         
+0000bbe0: 2020 2073 656c 662e 6265 6769 6e5f 7469     self.begin_ti
+0000bbf0: 6d65 203d 2074 696d 652e 7469 6d65 2829  me = time.time()
+0000bc00: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0000bc10: 6c66 2e73 6573 7369 6f6e 203d 2072 6571  lf.session = req
+0000bc20: 7565 7374 732e 5365 7373 696f 6e28 290d  uests.Session().
+0000bc30: 0a20 2020 2020 2020 2020 2020 2068 6f73  .            hos
+0000bc40: 745f 6874 6d6c 203d 2073 656c 662e 7365  t_html = self.se
+0000bc50: 7373 696f 6e2e 6765 7428 7365 6c66 2e68  ssion.get(self.h
+0000bc60: 6f73 745f 7572 6c2c 2068 6561 6465 7273  ost_url, headers
+0000bc70: 3d73 656c 662e 686f 7374 5f68 6561 6465  =self.host_heade
+0000bc80: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
+0000bc90: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
+0000bca0: 7869 6573 292e 7465 7874 0d0a 2020 2020  xies).text..    
+0000bcb0: 2020 2020 2020 2020 7365 6c66 2e73 6967          self.sig
+0000bcc0: 6e5f 6b65 7920 3d20 7365 6c66 2e67 6574  n_key = self.get
+0000bcd0: 5f73 6967 6e5f 6b65 7928 686f 7374 5f68  _sign_key(host_h
+0000bce0: 746d 6c2c 2073 656c 662e 7365 7373 696f  tml, self.sessio
+0000bcf0: 6e2c 2074 696d 656f 7574 2c20 7072 6f78  n, timeout, prox
+0000bd00: 6965 7329 0d0a 2020 2020 2020 2020 2020  ies)..          
+0000bd10: 2020 6465 6275 675f 6c61 6e67 5f6b 7761    debug_lang_kwa
+0000bd20: 7267 7320 3d20 7365 6c66 2e64 6562 7567  rgs = self.debug
+0000bd30: 5f6c 616e 675f 6b77 6172 6773 2866 726f  _lang_kwargs(fro
+0000bd40: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
+0000bd50: 616e 6775 6167 652c 2073 656c 662e 6465  anguage, self.de
+0000bd60: 6661 756c 745f 6672 6f6d 5f6c 616e 6775  fault_from_langu
+0000bd70: 6167 652c 2069 665f 7072 696e 745f 7761  age, if_print_wa
+0000bd80: 726e 696e 6729 0d0a 2020 2020 2020 2020  rning)..        
+0000bd90: 2020 2020 7365 6c66 2e6c 616e 6775 6167      self.languag
+0000bda0: 655f 6d61 7020 3d20 7365 6c66 2e67 6574  e_map = self.get
+0000bdb0: 5f6c 616e 6775 6167 655f 6d61 7028 7365  _language_map(se
+0000bdc0: 6c66 2e6c 616e 6775 6167 655f 7572 6c2c  lf.language_url,
+0000bdd0: 2073 656c 662e 7365 7373 696f 6e2c 2073   self.session, s
+0000bde0: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
+0000bdf0: 2c20 7469 6d65 6f75 742c 2070 726f 7869  , timeout, proxi
+0000be00: 6573 2c20 2a2a 6465 6275 675f 6c61 6e67  es, **debug_lang
+0000be10: 5f6b 7761 7267 7329 0d0a 0d0a 2020 2020  _kwargs)....    
+0000be20: 2020 2020 6672 6f6d 5f6c 616e 6775 6167      from_languag
+0000be30: 652c 2074 6f5f 6c61 6e67 7561 6765 203d  e, to_language =
+0000be40: 2073 656c 662e 6368 6563 6b5f 6c61 6e67   self.check_lang
+0000be50: 7561 6765 2866 726f 6d5f 6c61 6e67 7561  uage(from_langua
+0000be60: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
+0000be70: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+0000be80: 6170 2c20 6f75 7470 7574 5f7a 683d 7365  ap, output_zh=se
+0000be90: 6c66 2e6f 7574 7075 745f 7a68 290d 0a0d  lf.output_zh)...
+0000bea0: 0a20 2020 2020 2020 2066 6f72 6d20 3d20  .        form = 
+0000beb0: 7365 6c66 2e67 6574 5f66 6f72 6d28 7175  self.get_form(qu
+0000bec0: 6572 795f 7465 7874 2c20 6672 6f6d 5f6c  ery_text, from_l
+0000bed0: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
+0000bee0: 7561 6765 2c20 7365 6c66 2e73 6967 6e5f  uage, self.sign_
+0000bef0: 6b65 7929 0d0a 2020 2020 2020 2020 7220  key)..        r 
+0000bf00: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e70  = self.session.p
+0000bf10: 6f73 7428 7365 6c66 2e61 7069 5f75 726c  ost(self.api_url
+0000bf20: 2c20 6461 7461 3d66 6f72 6d2c 2068 6561  , data=form, hea
+0000bf30: 6465 7273 3d73 656c 662e 6170 695f 6865  ders=self.api_he
+0000bf40: 6164 6572 732c 2074 696d 656f 7574 3d74  aders, timeout=t
+0000bf50: 696d 656f 7574 2c20 7072 6f78 6965 733d  imeout, proxies=
+0000bf60: 7072 6f78 6965 7329 0d0a 2020 2020 2020  proxies)..      
+0000bf70: 2020 722e 7261 6973 655f 666f 725f 7374    r.raise_for_st
+0000bf80: 6174 7573 2829 0d0a 2020 2020 2020 2020  atus()..        
+0000bf90: 6461 7461 203d 2072 2e6a 736f 6e28 290d  data = r.json().
+0000bfa0: 0a20 2020 2020 2020 2074 696d 652e 736c  .        time.sl
+0000bfb0: 6565 7028 736c 6565 705f 7365 636f 6e64  eep(sleep_second
+0000bfc0: 7329 0d0a 2020 2020 2020 2020 7365 6c66  s)..        self
+0000bfd0: 2e71 7565 7279 5f63 6f75 6e74 202b 3d20  .query_count += 
+0000bfe0: 310d 0a20 2020 2020 2020 2072 6574 7572  1..        retur
+0000bff0: 6e20 6461 7461 2069 6620 6973 5f64 6574  n data if is_det
+0000c000: 6169 6c5f 7265 7375 6c74 2065 6c73 6520  ail_result else 
+0000c010: 275c 6e27 2e6a 6f69 6e28 5b27 2027 2e6a  '\n'.join([' '.j
+0000c020: 6f69 6e28 5b69 745b 2774 6774 275d 2066  oin([it['tgt'] f
+0000c030: 6f72 2069 7420 696e 2069 7465 6d5d 2920  or it in item]) 
+0000c040: 666f 7220 6974 656d 2069 6e20 6461 7461  for item in data
+0000c050: 5b27 7472 616e 736c 6174 6552 6573 756c  ['translateResul
+0000c060: 7427 5d5d 290d 0a0d 0a0d 0a63 6c61 7373  t']])......class
+0000c070: 2059 6f75 6461 6f56 3228 5473 6529 3a0d   YoudaoV2(Tse):.
+0000c080: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+0000c090: 5f28 7365 6c66 293a 0d0a 2020 2020 2020  _(self):..      
+0000c0a0: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
+0000c0b0: 5f5f 2829 0d0a 2020 2020 2020 2020 7365  __()..        se
+0000c0c0: 6c66 2e62 6567 696e 5f74 696d 6520 3d20  lf.begin_time = 
+0000c0d0: 7469 6d65 2e74 696d 6528 290d 0a20 2020  time.time()..   
+0000c0e0: 2020 2020 2073 656c 662e 686f 7374 5f75       self.host_u
+0000c0f0: 726c 203d 2027 6874 7470 733a 2f2f 6661  rl = 'https://fa
+0000c100: 6e79 692e 796f 7564 616f 2e63 6f6d 270d  nyi.youdao.com'.
+0000c110: 0a20 2020 2020 2020 2073 656c 662e 6170  .        self.ap
+0000c120: 695f 7572 6c20 3d20 2768 7474 7073 3a2f  i_url = 'https:/
+0000c130: 2f64 6963 742e 796f 7564 616f 2e63 6f6d  /dict.youdao.com
+0000c140: 2f77 6562 7472 616e 736c 6174 6527 0d0a  /webtranslate'..
+0000c150: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
+0000c160: 5f68 6f73 7420 3d20 2768 7474 7073 3a2f  _host = 'https:/
+0000c170: 2f64 6963 742e 796f 7564 616f 2e63 6f6d  /dict.youdao.com
+0000c180: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+0000c190: 6765 745f 6a73 5f75 726c 203d 204e 6f6e  get_js_url = Non
+0000c1a0: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
+0000c1b0: 6765 745f 6a73 5f70 6174 7465 726e 203d  get_js_pattern =
+0000c1c0: 2027 6a73 2f61 7070 2e28 2e2a 3f29 2e6a   'js/app.(.*?).j
+0000c1d0: 7327 0d0a 2020 2020 2020 2020 7365 6c66  s'..        self
+0000c1e0: 2e67 6574 5f73 6967 6e5f 7572 6c20 3d20  .get_sign_url = 
+0000c1f0: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
+0000c200: 6c66 2e67 6574 5f73 6967 6e5f 7061 7474  lf.get_sign_patt
+0000c210: 6572 6e20 3d20 2727 0d0a 2020 2020 2020  ern = ''..      
+0000c220: 2020 7365 6c66 2e6c 6f67 696e 5f75 726c    self.login_url
+0000c230: 203d 2027 6874 7470 733a 2f2f 6469 6374   = 'https://dict
+0000c240: 2e79 6f75 6461 6f2e 636f 6d2f 6c6f 6769  .youdao.com/logi
+0000c250: 6e2f 6163 632f 7175 6572 792f 6163 636f  n/acc/query/acco
+0000c260: 756e 7469 6e66 6f27 0d0a 2020 2020 2020  untinfo'..      
+0000c270: 2020 7365 6c66 2e6c 616e 6775 6167 655f    self.language_
+0000c280: 7572 6c20 3d20 2768 7474 7073 3a2f 2f61  url = 'https://a
+0000c290: 7069 2d6f 7665 726d 696e 642e 796f 7564  pi-overmind.youd
+0000c2a0: 616f 2e63 6f6d 2f6f 7065 6e61 7069 2f67  ao.com/openapi/g
+0000c2b0: 6574 2f6c 756e 612f 6469 6374 2f6c 756e  et/luna/dict/lun
+0000c2c0: 612d 6672 6f6e 742f 7072 6f64 2f6c 616e  a-front/prod/lan
+0000c2d0: 6754 7970 6527 0d0a 2020 2020 2020 2020  gType'..        
+0000c2e0: 7365 6c66 2e64 6f6d 6169 6e5f 7572 6c20  self.domain_url 
+0000c2f0: 3d20 2768 7474 7073 3a2f 2f64 6f63 7472  = 'https://doctr
+0000c300: 616e 732d 7365 7276 6963 652e 796f 7564  ans-service.youd
+0000c310: 616f 2e63 6f6d 2f63 6f6d 6d6f 6e2f 656e  ao.com/common/en
+0000c320: 756d 732f 6c69 7374 3f6b 6579 3d64 6f6d  ums/list?key=dom
+0000c330: 6169 6e27 0d0a 2020 2020 2020 2020 7365  ain'..        se
+0000c340: 6c66 2e67 6574 5f6b 6579 5f75 726c 203d  lf.get_key_url =
+0000c350: 2027 6874 7470 733a 2f2f 6469 6374 2e79   'https://dict.y
+0000c360: 6f75 6461 6f2e 636f 6d2f 7765 6274 7261  oudao.com/webtra
+0000c370: 6e73 6c61 7465 2f6b 6579 270d 0a20 2020  nslate/key'..   
+0000c380: 2020 2020 2073 656c 662e 686f 7374 5f68       self.host_h
+0000c390: 6561 6465 7273 203d 2073 656c 662e 6765  eaders = self.ge
+0000c3a0: 745f 6865 6164 6572 7328 7365 6c66 2e68  t_headers(self.h
+0000c3b0: 6f73 745f 7572 6c2c 2069 665f 6170 693d  ost_url, if_api=
+0000c3c0: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
+0000c3d0: 7365 6c66 2e61 7069 5f68 6561 6465 7273  self.api_headers
+0000c3e0: 203d 2073 656c 662e 6765 745f 6865 6164   = self.get_head
+0000c3f0: 6572 7328 7365 6c66 2e68 6f73 745f 7572  ers(self.host_ur
+0000c400: 6c2c 2069 665f 6170 693d 5472 7565 290d  l, if_api=True).
+0000c410: 0a20 2020 2020 2020 2073 656c 662e 6170  .        self.ap
+0000c420: 695f 6865 6164 6572 732e 7570 6461 7465  i_headers.update
+0000c430: 287b 2748 6f73 7427 3a20 7365 6c66 2e61  ({'Host': self.a
+0000c440: 7069 5f68 6f73 747d 290d 0a20 2020 2020  pi_host})..     
+0000c450: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
+0000c460: 5f6d 6170 203d 204e 6f6e 650d 0a20 2020  _map = None..   
+0000c470: 2020 2020 2073 656c 662e 7365 7373 696f       self.sessio
+0000c480: 6e20 3d20 4e6f 6e65 0d0a 2020 2020 2020  n = None..      
+0000c490: 2020 7365 6c66 2e70 726f 6665 7373 696f    self.professio
+0000c4a0: 6e61 6c5f 6669 656c 6420 3d20 2827 3027  nal_field = ('0'
+0000c4b0: 2c20 2731 272c 2027 3227 2c20 2733 2729  , '1', '2', '3')
+0000c4c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e70  ..        self.p
+0000c4d0: 726f 6665 7373 696f 6e61 6c5f 6669 656c  rofessional_fiel
+0000c4e0: 645f 6d61 7020 3d20 4e6f 6e65 0d0a 2020  d_map = None..  
+0000c4f0: 2020 2020 2020 7365 6c66 2e64 6566 6175        self.defau
+0000c500: 6c74 5f6b 6579 203d 204e 6f6e 650d 0a20  lt_key = None.. 
+0000c510: 2020 2020 2020 2073 656c 662e 7365 6372         self.secr
+0000c520: 6574 5f6b 6579 203d 204e 6f6e 650d 0a20  et_key = None.. 
+0000c530: 2020 2020 2020 2073 656c 662e 6465 636f         self.deco
+0000c540: 6465 5f6b 6579 203d 204e 6f6e 650d 0a20  de_key = None.. 
+0000c550: 2020 2020 2020 2073 656c 662e 6465 636f         self.deco
+0000c560: 6465 5f69 7620 3d20 4e6f 6e65 0d0a 2020  de_iv = None..  
+0000c570: 2020 2020 2020 7365 6c66 2e71 7565 7279        self.query
+0000c580: 5f63 6f75 6e74 203d 2030 0d0a 2020 2020  _count = 0..    
+0000c590: 2020 2020 7365 6c66 2e6f 7574 7075 745f      self.output_
+0000c5a0: 7a68 203d 2027 7a68 2d43 4853 270d 0a20  zh = 'zh-CHS'.. 
+0000c5b0: 2020 2020 2020 2073 656c 662e 696e 7075         self.inpu
+0000c5c0: 745f 6c69 6d69 7420 3d20 696e 7428 3565  t_limit = int(5e
+0000c5d0: 3329 0d0a 2020 2020 2020 2020 7365 6c66  3)..        self
+0000c5e0: 2e64 6566 6175 6c74 5f66 726f 6d5f 6c61  .default_from_la
+0000c5f0: 6e67 7561 6765 203d 2073 656c 662e 6f75  nguage = self.ou
+0000c600: 7470 7574 5f7a 680d 0a0d 0a20 2020 2040  tput_zh....    @
+0000c610: 5473 652e 6465 6275 675f 6c61 6e67 7561  Tse.debug_langua
+0000c620: 6765 5f6d 6170 0d0a 2020 2020 6465 6620  ge_map..    def 
+0000c630: 6765 745f 6c61 6e67 7561 6765 5f6d 6170  get_language_map
+0000c640: 2873 656c 662c 206c 616e 675f 7572 6c3a  (self, lang_url:
+0000c650: 2073 7472 2c20 7373 3a20 5365 7373 696f   str, ss: Sessio
+0000c660: 6e54 7970 652c 2068 6561 6465 7273 3a20  nType, headers: 
+0000c670: 6469 6374 2c20 7469 6d65 6f75 743a 204f  dict, timeout: O
+0000c680: 7074 696f 6e61 6c5b 666c 6f61 745d 2c20  ptional[float], 
+0000c690: 7072 6f78 6965 733a 204f 7074 696f 6e61  proxies: Optiona
+0000c6a0: 6c5b 6469 6374 5d2c 202a 2a6b 7761 7267  l[dict], **kwarg
+0000c6b0: 733a 204c 616e 674d 6170 4b77 6172 6773  s: LangMapKwargs
+0000c6c0: 5479 7065 2920 2d3e 2064 6963 743a 0d0a  Type) -> dict:..
+0000c6d0: 2020 2020 2020 2020 6461 7461 203d 2073          data = s
+0000c6e0: 732e 6765 7428 6c61 6e67 5f75 726c 2c20  s.get(lang_url, 
+0000c6f0: 6865 6164 6572 733d 6865 6164 6572 732c  headers=headers,
+0000c700: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
+0000c710: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
+0000c720: 7329 2e6a 736f 6e28 290d 0a20 2020 2020  s).json()..     
+0000c730: 2020 206c 616e 675f 6c69 7374 203d 2073     lang_list = s
+0000c740: 6f72 7465 6428 5b69 745b 2763 6f64 6527  orted([it['code'
+0000c750: 5d20 666f 7220 6974 2069 6e20 6461 7461  ] for it in data
+0000c760: 5b27 6461 7461 275d 5b27 7661 6c75 6527  ['data']['value'
+0000c770: 5d5b 2774 6578 7454 7261 6e73 6c61 7465  ]['textTranslate
+0000c780: 275d 5b27 7370 6563 6966 7927 5d5d 290d  ']['specify']]).
+0000c790: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000c7a0: 7b7d 2e66 726f 6d6b 6579 7328 6c61 6e67  {}.fromkeys(lang
+0000c7b0: 5f6c 6973 742c 206c 616e 675f 6c69 7374  _list, lang_list
+0000c7c0: 290d 0a0d 0a20 2020 2064 6566 2067 6574  )....    def get
+0000c7d0: 5f64 6566 6175 6c74 5f6b 6579 2873 656c  _default_key(sel
+0000c7e0: 662c 206a 735f 6874 6d6c 3a20 7374 7229  f, js_html: str)
+0000c7f0: 202d 3e20 7374 723a 0d0a 2020 2020 2020   -> str:..      
+0000c800: 2020 7265 7475 726e 2072 652e 636f 6d70    return re.comp
+0000c810: 696c 6528 273d 2277 6562 6661 6e79 692d  ile('="webfanyi-
+0000c820: 6b65 792d 6765 7474 6572 222c 285c 5c77  key-getter",(\\w
+0000c830: 2b29 3d22 285c 5c77 2b29 223b 2729 2e73  +)="(\\w+)";').s
+0000c840: 6561 7263 6828 6a73 5f68 746d 6c29 2e67  earch(js_html).g
+0000c850: 726f 7570 2832 290d 0a0d 0a20 2020 2064  roup(2)....    d
+0000c860: 6566 2067 6574 5f73 6967 6e28 7365 6c66  ef get_sign(self
+0000c870: 2c20 6b65 793a 2073 7472 2c20 7469 6d65  , key: str, time
+0000c880: 7374 6d70 3a20 696e 7429 202d 3e20 7374  stmp: int) -> st
+0000c890: 723a 0d0a 2020 2020 2020 2020 7661 6c75  r:..        valu
+0000c8a0: 6520 3d20 6627 636c 6965 6e74 3d66 616e  e = f'client=fan
+0000c8b0: 7969 6465 736b 7765 6226 6d79 7374 6963  yideskweb&mystic
+0000c8c0: 5469 6d65 3d7b 7469 6d65 7374 6d70 7d26  Time={timestmp}&
+0000c8d0: 7072 6f64 7563 743d 7765 6266 616e 7969  product=webfanyi
+0000c8e0: 266b 6579 3d7b 6b65 797d 270d 0a20 2020  &key={key}'..   
+0000c8f0: 2020 2020 2072 6574 7572 6e20 6861 7368       return hash
+0000c900: 6c69 622e 6d64 3528 7661 6c75 652e 656e  lib.md5(value.en
+0000c910: 636f 6465 2829 292e 6865 7864 6967 6573  code()).hexdiges
+0000c920: 7428 290d 0a0d 0a20 2020 2064 6566 2067  t()....    def g
+0000c930: 6574 5f70 6179 6c6f 6164 2873 656c 662c  et_payload(self,
+0000c940: 206b 6579 6964 3a20 7374 722c 206b 6579   keyid: str, key
+0000c950: 3a20 7374 722c 2074 696d 6573 7461 6d70  : str, timestamp
+0000c960: 3a20 696e 742c 202a 2a6b 7761 7267 733a  : int, **kwargs:
+0000c970: 2073 7472 2920 2d3e 2064 6963 743a 0d0a   str) -> dict:..
+0000c980: 2020 2020 2020 2020 6966 206b 6579 6964          if keyid
+0000c990: 206e 6f74 2069 6e20 2827 7765 6266 616e   not in ('webfan
+0000c9a0: 7969 2d6b 6579 2d67 6574 7465 7227 2c20  yi-key-getter', 
+0000c9b0: 2777 6562 6661 6e79 6927 293a 0d0a 2020  'webfanyi'):..  
+0000c9c0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0000c9d0: 5472 616e 736c 6174 6f72 4572 726f 720d  TranslatorError.
+0000c9e0: 0a0d 0a20 2020 2020 2020 2070 6179 6c6f  ...        paylo
+0000c9f0: 6164 203d 207b 0d0a 2020 2020 2020 2020  ad = {..        
+0000ca00: 2020 2020 276b 6579 6964 273a 206b 6579      'keyid': key
+0000ca10: 6964 2c0d 0a20 2020 2020 2020 2020 2020  id,..           
+0000ca20: 2027 6d79 7374 6963 5469 6d65 273a 2073   'mysticTime': s
+0000ca30: 7472 2874 696d 6573 7461 6d70 292c 0d0a  tr(timestamp),..
+0000ca40: 2020 2020 2020 2020 2020 2020 2773 6967              'sig
+0000ca50: 6e27 3a20 7365 6c66 2e67 6574 5f73 6967  n': self.get_sig
+0000ca60: 6e28 6b65 792c 2074 696d 6573 7461 6d70  n(key, timestamp
+0000ca70: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+0000ca80: 2763 6c69 656e 7427 3a20 2766 616e 7969  'client': 'fanyi
+0000ca90: 6465 736b 7765 6227 2c0d 0a20 2020 2020  deskweb',..     
+0000caa0: 2020 2020 2020 2027 7072 6f64 7563 7427         'product'
+0000cab0: 3a20 2777 6562 6661 6e79 6927 2c0d 0a20  : 'webfanyi',.. 
+0000cac0: 2020 2020 2020 2020 2020 2027 6170 7056             'appV
+0000cad0: 6572 7369 6f6e 273a 2027 312e 302e 3027  ersion': '1.0.0'
+0000cae0: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+0000caf0: 7665 6e64 6f72 273a 2027 7765 6227 2c0d  vendor': 'web',.
+0000cb00: 0a20 2020 2020 2020 2020 2020 2027 6b65  .            'ke
+0000cb10: 7966 726f 6d27 3a20 2766 616e 7969 2e77  yfrom': 'fanyi.w
+0000cb20: 6562 272c 0d0a 2020 2020 2020 2020 2020  eb',..          
+0000cb30: 2020 2770 6f69 6e74 5061 7261 6d27 3a20    'pointParam': 
+0000cb40: 2763 6c69 656e 742c 6d79 7374 6963 5469  'client,mysticTi
+0000cb50: 6d65 2c70 726f 6475 6374 272c 0d0a 2020  me,product',..  
+0000cb60: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
+0000cb70: 2072 6574 7572 6e20 7b2a 2a6b 7761 7267   return {**kwarg
+0000cb80: 732c 202a 2a70 6179 6c6f 6164 7d20 6966  s, **payload} if
+0000cb90: 206b 6579 6964 203d 3d20 2777 6562 6661   keyid == 'webfa
+0000cba0: 6e79 6927 2065 6c73 6520 7061 796c 6f61  nyi' else payloa
+0000cbb0: 640d 0a0d 0a20 2020 2064 6566 2064 6563  d....    def dec
+0000cbc0: 7279 7074 2873 656c 662c 2063 6970 6865  rypt(self, ciphe
+0000cbd0: 725f 7465 7874 3a20 7374 722c 2064 6563  r_text: str, dec
+0000cbe0: 7279 7074 5f64 6963 7469 6f6e 6172 793a  rypt_dictionary:
+0000cbf0: 2064 6963 7429 202d 3e20 7374 723a 0d0a   dict) -> str:..
+0000cc00: 2020 2020 2020 2020 5f63 6970 6865 7274          _ciphert
+0000cc10: 6578 7420 3d20 2727 2e6a 6f69 6e28 6c69  ext = ''.join(li
+0000cc20: 7374 286d 6170 286c 616d 6264 6120 6b3a  st(map(lambda k:
+0000cc30: 2064 6563 7279 7074 5f64 6963 7469 6f6e   decrypt_diction
+0000cc40: 6172 795b 6b5d 2c20 6369 7068 6572 5f74  ary[k], cipher_t
+0000cc50: 6578 7429 2929 0d0a 2020 2020 2020 2020  ext)))..        
+0000cc60: 7265 7475 726e 2062 6173 6536 342e 6236  return base64.b6
+0000cc70: 3464 6563 6f64 6528 5f63 6970 6865 7274  4decode(_ciphert
+0000cc80: 6578 7429 2e64 6563 6f64 6528 290d 0a0d  ext).decode()...
+0000cc90: 0a20 2020 2040 5473 652e 756e 6365 7274  .    @Tse.uncert
+0000cca0: 6966 6965 640d 0a20 2020 2040 5473 652e  ified..    @Tse.
+0000ccb0: 7469 6d65 5f73 7461 740d 0a20 2020 2040  time_stat..    @
+0000ccc0: 5473 652e 6368 6563 6b5f 7175 6572 790d  Tse.check_query.
+0000ccd0: 0a20 2020 2064 6566 2079 6f75 6461 6f5f  .    def youdao_
+0000cce0: 6170 6928 7365 6c66 2c20 7175 6572 795f  api(self, query_
+0000ccf0: 7465 7874 3a20 7374 722c 2066 726f 6d5f  text: str, from_
+0000cd00: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
+0000cd10: 2761 7574 6f27 2c20 746f 5f6c 616e 6775  'auto', to_langu
+0000cd20: 6167 653a 2073 7472 203d 2027 656e 272c  age: str = 'en',
+0000cd30: 202a 2a6b 7761 7267 733a 2041 7069 4b77   **kwargs: ApiKw
+0000cd40: 6172 6773 5479 7065 2920 2d3e 2055 6e69  argsType) -> Uni
+0000cd50: 6f6e 5b73 7472 2c20 6469 6374 5d3a 0d0a  on[str, dict]:..
+0000cd60: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+0000cd70: 2020 2020 2068 7474 7073 3a2f 2f66 616e       https://fan
+0000cd80: 7969 2e79 6f75 6461 6f2e 636f 6d0d 0a20  yi.youdao.com.. 
+0000cd90: 2020 2020 2020 203a 7061 7261 6d20 7175         :param qu
+0000cda0: 6572 795f 7465 7874 3a20 7374 722c 206d  ery_text: str, m
+0000cdb0: 7573 742e 0d0a 2020 2020 2020 2020 3a70  ust...        :p
+0000cdc0: 6172 616d 2066 726f 6d5f 6c61 6e67 7561  aram from_langua
+0000cdd0: 6765 3a20 7374 722c 2064 6566 6175 6c74  ge: str, default
+0000cde0: 2027 6175 746f 272e 0d0a 2020 2020 2020   'auto'...      
+0000cdf0: 2020 3a70 6172 616d 2074 6f5f 6c61 6e67    :param to_lang
+0000ce00: 7561 6765 3a20 7374 722c 2064 6566 6175  uage: str, defau
+0000ce10: 6c74 2027 656e 272e 0d0a 2020 2020 2020  lt 'en'...      
+0000ce20: 2020 3a70 6172 616d 202a 2a6b 7761 7267    :param **kwarg
+0000ce30: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+0000ce40: 2020 2020 3a70 6172 616d 2074 696d 656f      :param timeo
+0000ce50: 7574 3a20 666c 6f61 742c 2064 6566 6175  ut: float, defau
+0000ce60: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
+0000ce70: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+0000ce80: 2070 726f 7869 6573 3a20 6469 6374 2c20   proxies: dict, 
+0000ce90: 6465 6661 756c 7420 4e6f 6e65 2e0d 0a20  default None... 
+0000cea0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0000ceb0: 7061 7261 6d20 736c 6565 705f 7365 636f  param sleep_seco
+0000cec0: 6e64 733a 2066 6c6f 6174 2c20 6465 6661  nds: float, defa
+0000ced0: 756c 7420 302e 0d0a 2020 2020 2020 2020  ult 0...        
+0000cee0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+0000cef0: 735f 6465 7461 696c 5f72 6573 756c 743a  s_detail_result:
+0000cf00: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
+0000cf10: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
+0000cf20: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+0000cf30: 5f69 676e 6f72 655f 6c69 6d69 745f 6f66  _ignore_limit_of
+0000cf40: 5f6c 656e 6774 683a 2062 6f6f 6c2c 2064  _length: bool, d
+0000cf50: 6566 6175 6c74 2046 616c 7365 2e0d 0a20  efault False... 
+0000cf60: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0000cf70: 7061 7261 6d20 6c69 6d69 745f 6f66 5f6c  param limit_of_l
+0000cf80: 656e 6774 683a 2069 6e74 2c20 6465 6661  ength: int, defa
+0000cf90: 756c 7420 3230 3030 302e 0d0a 2020 2020  ult 20000...    
+0000cfa0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+0000cfb0: 616d 2069 665f 6967 6e6f 7265 5f65 6d70  am if_ignore_emp
+0000cfc0: 7479 5f71 7565 7279 3a20 626f 6f6c 2c20  ty_query: bool, 
+0000cfd0: 6465 6661 756c 7420 4661 6c73 652e 0d0a  default False...
+0000cfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cff0: 3a70 6172 616d 2075 7064 6174 655f 7365  :param update_se
+0000d000: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
+0000d010: 3a20 696e 742c 2064 6566 6175 6c74 2031  : int, default 1
+0000d020: 3030 302e 0d0a 2020 2020 2020 2020 2020  000...          
+0000d030: 2020 2020 2020 3a70 6172 616d 2075 7064        :param upd
+0000d040: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0000d050: 725f 7365 636f 6e64 733a 2066 6c6f 6174  r_seconds: float
+0000d060: 2c20 6465 6661 756c 7420 3135 3030 2e0d  , default 1500..
+0000d070: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d080: 203a 7061 7261 6d20 6966 5f73 686f 775f   :param if_show_
+0000d090: 7469 6d65 5f73 7461 743a 2062 6f6f 6c2c  time_stat: bool,
+0000d0a0: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
+0000d0b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d0c0: 203a 7061 7261 6d20 7368 6f77 5f74 696d   :param show_tim
+0000d0d0: 655f 7374 6174 5f70 7265 6369 7369 6f6e  e_stat_precision
+0000d0e0: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
+0000d0f0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000d100: 2020 203a 7061 7261 6d20 6966 5f70 7269     :param if_pri
+0000d110: 6e74 5f77 6172 6e69 6e67 3a20 626f 6f6c  nt_warning: bool
+0000d120: 2c20 6465 6661 756c 7420 5472 7565 2e0d  , default True..
+0000d130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d140: 203a 7061 7261 6d20 7072 6f66 6573 7369   :param professi
+0000d150: 6f6e 616c 5f66 6965 6c64 3a20 7374 722c  onal_field: str,
+0000d160: 2064 6566 6175 6c74 2027 3027 2e20 4368   default '0'. Ch
+0000d170: 6f6f 7365 2066 726f 6d20 2827 3027 2c27  oose from ('0','
+0000d180: 3127 2c27 3227 2c27 3327 290d 0a20 2020  1','2','3')..   
+0000d190: 2020 2020 203a 7265 7475 726e 3a20 7374       :return: st
+0000d1a0: 7220 6f72 2064 6963 740d 0a20 2020 2020  r or dict..     
+0000d1b0: 2020 2022 2222 0d0a 0d0a 2020 2020 2020     """....      
+0000d1c0: 2020 646f 6d61 696e 203d 206b 7761 7267    domain = kwarg
+0000d1d0: 732e 6765 7428 2770 726f 6665 7373 696f  s.get('professio
+0000d1e0: 6e61 6c5f 6669 656c 6427 2c20 2730 2729  nal_field', '0')
+0000d1f0: 0d0a 2020 2020 2020 2020 6966 2064 6f6d  ..        if dom
+0000d200: 6169 6e20 6e6f 7420 696e 2073 656c 662e  ain not in self.
+0000d210: 7072 6f66 6573 7369 6f6e 616c 5f66 6965  professional_fie
+0000d220: 6c64 3a0d 0a20 2020 2020 2020 2020 2020  ld:..           
+0000d230: 2072 6169 7365 2054 7261 6e73 6c61 746f   raise Translato
+0000d240: 7245 7272 6f72 0d0a 0d0a 2020 2020 2020  rError....      
+0000d250: 2020 7469 6d65 6f75 7420 3d20 6b77 6172    timeout = kwar
+0000d260: 6773 2e67 6574 2827 7469 6d65 6f75 7427  gs.get('timeout'
+0000d270: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
+0000d280: 2070 726f 7869 6573 203d 206b 7761 7267   proxies = kwarg
+0000d290: 732e 6765 7428 2770 726f 7869 6573 272c  s.get('proxies',
+0000d2a0: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
+0000d2b0: 736c 6565 705f 7365 636f 6e64 7320 3d20  sleep_seconds = 
+0000d2c0: 6b77 6172 6773 2e67 6574 2827 736c 6565  kwargs.get('slee
+0000d2d0: 705f 7365 636f 6e64 7327 2c20 3029 0d0a  p_seconds', 0)..
+0000d2e0: 2020 2020 2020 2020 6966 5f70 7269 6e74          if_print
+0000d2f0: 5f77 6172 6e69 6e67 203d 206b 7761 7267  _warning = kwarg
+0000d300: 732e 6765 7428 2769 665f 7072 696e 745f  s.get('if_print_
+0000d310: 7761 726e 696e 6727 2c20 5472 7565 290d  warning', True).
+0000d320: 0a20 2020 2020 2020 2069 735f 6465 7461  .        is_deta
+0000d330: 696c 5f72 6573 756c 7420 3d20 6b77 6172  il_result = kwar
+0000d340: 6773 2e67 6574 2827 6973 5f64 6574 6169  gs.get('is_detai
+0000d350: 6c5f 7265 7375 6c74 272c 2046 616c 7365  l_result', False
+0000d360: 290d 0a20 2020 2020 2020 2075 7064 6174  )..        updat
+0000d370: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
+0000d380: 6672 6571 203d 206b 7761 7267 732e 6765  freq = kwargs.ge
+0000d390: 7428 2775 7064 6174 655f 7365 7373 696f  t('update_sessio
+0000d3a0: 6e5f 6166 7465 725f 6672 6571 272c 2073  n_after_freq', s
+0000d3b0: 656c 662e 6465 6661 756c 745f 7365 7373  elf.default_sess
+0000d3c0: 696f 6e5f 6672 6571 290d 0a20 2020 2020  ion_freq)..     
+0000d3d0: 2020 2075 7064 6174 655f 7365 7373 696f     update_sessio
+0000d3e0: 6e5f 6166 7465 725f 7365 636f 6e64 7320  n_after_seconds 
+0000d3f0: 3d20 6b77 6172 6773 2e67 6574 2827 7570  = kwargs.get('up
+0000d400: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+0000d410: 6572 5f73 6563 6f6e 6473 272c 2073 656c  er_seconds', sel
+0000d420: 662e 6465 6661 756c 745f 7365 7373 696f  f.default_sessio
+0000d430: 6e5f 7365 636f 6e64 7329 0d0a 2020 2020  n_seconds)..    
+0000d440: 2020 2020 7365 6c66 2e63 6865 636b 5f69      self.check_i
+0000d450: 6e70 7574 5f6c 696d 6974 2871 7565 7279  nput_limit(query
+0000d460: 5f74 6578 742c 2073 656c 662e 696e 7075  _text, self.inpu
+0000d470: 745f 6c69 6d69 7429 0d0a 0d0a 2020 2020  t_limit)....    
+0000d480: 2020 2020 6e6f 745f 7570 6461 7465 5f63      not_update_c
+0000d490: 6f6e 645f 6672 6571 203d 2031 2069 6620  ond_freq = 1 if 
+0000d4a0: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
+0000d4b0: 2025 2075 7064 6174 655f 7365 7373 696f   % update_sessio
+0000d4c0: 6e5f 6166 7465 725f 6672 6571 2021 3d20  n_after_freq != 
+0000d4d0: 3020 656c 7365 2030 0d0a 2020 2020 2020  0 else 0..      
+0000d4e0: 2020 6e6f 745f 7570 6461 7465 5f63 6f6e    not_update_con
+0000d4f0: 645f 7469 6d65 203d 2031 2069 6620 7469  d_time = 1 if ti
+0000d500: 6d65 2e74 696d 6528 2920 2d20 7365 6c66  me.time() - self
+0000d510: 2e62 6567 696e 5f74 696d 6520 3c20 7570  .begin_time < up
+0000d520: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+0000d530: 6572 5f73 6563 6f6e 6473 2065 6c73 6520  er_seconds else 
+0000d540: 300d 0a20 2020 2020 2020 2069 6620 6e6f  0..        if no
+0000d550: 7420 2873 656c 662e 7365 7373 696f 6e20  t (self.session 
+0000d560: 616e 6420 7365 6c66 2e6c 616e 6775 6167  and self.languag
+0000d570: 655f 6d61 7020 616e 6420 6e6f 745f 7570  e_map and not_up
+0000d580: 6461 7465 5f63 6f6e 645f 6672 6571 2061  date_cond_freq a
+0000d590: 6e64 206e 6f74 5f75 7064 6174 655f 636f  nd not_update_co
+0000d5a0: 6e64 5f74 696d 6520 616e 6420 7365 6c66  nd_time and self
+0000d5b0: 2e73 6563 7265 745f 6b65 7929 3a0d 0a20  .secret_key):.. 
+0000d5c0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000d5d0: 6265 6769 6e5f 7469 6d65 203d 2074 696d  begin_time = tim
+0000d5e0: 652e 7469 6d65 2829 0d0a 2020 2020 2020  e.time()..      
+0000d5f0: 2020 2020 2020 7365 6c66 2e73 6573 7369        self.sessi
+0000d600: 6f6e 203d 2072 6571 7565 7374 732e 5365  on = requests.Se
+0000d610: 7373 696f 6e28 290d 0a20 2020 2020 2020  ssion()..       
+0000d620: 2020 2020 2068 6f73 745f 6874 6d6c 203d       host_html =
+0000d630: 2073 656c 662e 7365 7373 696f 6e2e 6765   self.session.ge
+0000d640: 7428 7365 6c66 2e68 6f73 745f 7572 6c2c  t(self.host_url,
+0000d650: 2068 6561 6465 7273 3d73 656c 662e 686f   headers=self.ho
+0000d660: 7374 5f68 6561 6465 7273 2c20 7469 6d65  st_headers, time
+0000d670: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
+0000d680: 7869 6573 3d70 726f 7869 6573 292e 7465  xies=proxies).te
+0000d690: 7874 0d0a 2020 2020 2020 2020 2020 2020  xt..            
+0000d6a0: 5f20 3d20 7365 6c66 2e73 6573 7369 6f6e  _ = self.session
+0000d6b0: 2e67 6574 2873 656c 662e 6c6f 6769 6e5f  .get(self.login_
+0000d6c0: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
+0000d6d0: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
+0000d6e0: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+0000d6f0: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+0000d700: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+0000d710: 656c 662e 7072 6f66 6573 7369 6f6e 616c  elf.professional
+0000d720: 5f66 6965 6c64 5f6d 6170 203d 2073 656c  _field_map = sel
+0000d730: 662e 7365 7373 696f 6e2e 6765 7428 7365  f.session.get(se
+0000d740: 6c66 2e64 6f6d 6169 6e5f 7572 6c2c 2068  lf.domain_url, h
+0000d750: 6561 6465 7273 3d73 656c 662e 686f 7374  eaders=self.host
+0000d760: 5f68 6561 6465 7273 2c20 7469 6d65 6f75  _headers, timeou
+0000d770: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
+0000d780: 6573 3d70 726f 7869 6573 292e 6a73 6f6e  es=proxies).json
+0000d790: 2829 5b27 6461 7461 275d 0d0a 2020 2020  ()['data']..    
+0000d7a0: 2020 2020 2020 2020 6465 6275 675f 6c61          debug_la
+0000d7b0: 6e67 5f6b 7761 7267 7320 3d20 7365 6c66  ng_kwargs = self
+0000d7c0: 2e64 6562 7567 5f6c 616e 675f 6b77 6172  .debug_lang_kwar
+0000d7d0: 6773 2866 726f 6d5f 6c61 6e67 7561 6765  gs(from_language
+0000d7e0: 2c20 746f 5f6c 616e 6775 6167 652c 2073  , to_language, s
+0000d7f0: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
+0000d800: 5f6c 616e 6775 6167 652c 2069 665f 7072  _language, if_pr
+0000d810: 696e 745f 7761 726e 696e 6729 0d0a 2020  int_warning)..  
+0000d820: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
+0000d830: 616e 6775 6167 655f 6d61 7020 3d20 7365  anguage_map = se
+0000d840: 6c66 2e67 6574 5f6c 616e 6775 6167 655f  lf.get_language_
+0000d850: 6d61 7028 7365 6c66 2e6c 616e 6775 6167  map(self.languag
+0000d860: 655f 7572 6c2c 2073 656c 662e 7365 7373  e_url, self.sess
+0000d870: 696f 6e2c 2073 656c 662e 686f 7374 5f68  ion, self.host_h
+0000d880: 6561 6465 7273 2c20 7469 6d65 6f75 742c  eaders, timeout,
+0000d890: 2070 726f 7869 6573 2c20 2a2a 6465 6275   proxies, **debu
+0000d8a0: 675f 6c61 6e67 5f6b 7761 7267 7329 0d0a  g_lang_kwargs)..
+0000d8b0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0000d8c0: 6c66 2e67 6574 5f6a 735f 7572 6c20 3d20  lf.get_js_url = 
+0000d8d0: 2727 2e6a 6f69 6e28 5b73 656c 662e 686f  ''.join([self.ho
+0000d8e0: 7374 5f75 726c 2c20 272f 272c 2072 652e  st_url, '/', re.
+0000d8f0: 636f 6d70 696c 6528 7365 6c66 2e67 6574  compile(self.get
+0000d900: 5f6a 735f 7061 7474 6572 6e29 2e73 6561  _js_pattern).sea
+0000d910: 7263 6828 686f 7374 5f68 746d 6c29 2e67  rch(host_html).g
+0000d920: 726f 7570 2829 5d29 0d0a 2020 2020 2020  roup()])..      
+0000d930: 2020 2020 2020 6a73 5f68 746d 6c20 3d20        js_html = 
+0000d940: 7365 6c66 2e73 6573 7369 6f6e 2e67 6574  self.session.get
+0000d950: 2873 656c 662e 6765 745f 6a73 5f75 726c  (self.get_js_url
+0000d960: 2c20 6865 6164 6572 733d 7365 6c66 2e68  , headers=self.h
+0000d970: 6f73 745f 6865 6164 6572 732c 2074 696d  ost_headers, tim
+0000d980: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
+0000d990: 6f78 6965 733d 7072 6f78 6965 7329 2e74  oxies=proxies).t
+0000d9a0: 6578 740d 0a0d 0a20 2020 2020 2020 2020  ext....         
+0000d9b0: 2020 2073 656c 662e 6465 636f 6465 5f6b     self.decode_k
+0000d9c0: 6579 203d 2072 652e 636f 6d70 696c 6528  ey = re.compile(
+0000d9d0: 2764 6563 6f64 654b 6579 3a22 282e 2a3f  'decodeKey:"(.*?
+0000d9e0: 2922 2c27 292e 7365 6172 6368 286a 735f  )",').search(js_
+0000d9f0: 6874 6d6c 292e 6772 6f75 7028 3129 0d0a  html).group(1)..
+0000da00: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000da10: 2e64 6563 6f64 655f 6976 203d 2072 652e  .decode_iv = re.
+0000da20: 636f 6d70 696c 6528 2764 6563 6f64 6549  compile('decodeI
+0000da30: 763a 2228 2e2a 3f29 222c 2729 2e73 6561  v:"(.*?)",').sea
+0000da40: 7263 6828 6a73 5f68 746d 6c29 2e67 726f  rch(js_html).gro
+0000da50: 7570 2831 290d 0a20 2020 2020 2020 2020  up(1)..         
+0000da60: 2020 2073 656c 662e 6465 6661 756c 745f     self.default_
+0000da70: 6b65 7920 3d20 7365 6c66 2e67 6574 5f64  key = self.get_d
+0000da80: 6566 6175 6c74 5f6b 6579 286a 735f 6874  efault_key(js_ht
+0000da90: 6d6c 290d 0a0d 0a20 2020 2020 2020 2020  ml)....         
+0000daa0: 2020 2070 6172 616d 7320 3d20 7365 6c66     params = self
+0000dab0: 2e67 6574 5f70 6179 6c6f 6164 286b 6579  .get_payload(key
+0000dac0: 6964 3d27 7765 6266 616e 7969 2d6b 6579  id='webfanyi-key
+0000dad0: 2d67 6574 7465 7227 2c20 6b65 793d 7365  -getter', key=se
+0000dae0: 6c66 2e64 6566 6175 6c74 5f6b 6579 2c20  lf.default_key, 
+0000daf0: 7469 6d65 7374 616d 703d 7365 6c66 2e67  timestamp=self.g
+0000db00: 6574 5f74 696d 6573 7461 6d70 2829 290d  et_timestamp()).
+0000db10: 0a20 2020 2020 2020 2020 2020 206b 6579  .            key
+0000db20: 5f72 203d 2073 656c 662e 7365 7373 696f  _r = self.sessio
+0000db30: 6e2e 6765 7428 7365 6c66 2e67 6574 5f6b  n.get(self.get_k
+0000db40: 6579 5f75 726c 2c20 7061 7261 6d73 3d70  ey_url, params=p
+0000db50: 6172 616d 732c 2068 6561 6465 7273 3d73  arams, headers=s
+0000db60: 656c 662e 6170 695f 6865 6164 6572 732c  elf.api_headers,
+0000db70: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
+0000db80: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
+0000db90: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
+0000dba0: 7365 6c66 2e73 6563 7265 745f 6b65 7920  self.secret_key 
+0000dbb0: 3d20 6b65 795f 722e 6a73 6f6e 2829 5b27  = key_r.json()['
+0000dbc0: 6461 7461 275d 5b27 7365 6372 6574 4b65  data']['secretKe
+0000dbd0: 7927 5d0d 0a0d 0a20 2020 2020 2020 2066  y']....        f
+0000dbe0: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
+0000dbf0: 5f6c 616e 6775 6167 6520 3d20 7365 6c66  _language = self
+0000dc00: 2e63 6865 636b 5f6c 616e 6775 6167 6528  .check_language(
+0000dc10: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
+0000dc20: 6f5f 6c61 6e67 7561 6765 2c20 7365 6c66  o_language, self
+0000dc30: 2e6c 616e 6775 6167 655f 6d61 702c 206f  .language_map, o
+0000dc40: 7574 7075 745f 7a68 3d73 656c 662e 6f75  utput_zh=self.ou
+0000dc50: 7470 7574 5f7a 6829 0d0a 0d0a 2020 2020  tput_zh)....    
+0000dc60: 2020 2020 7472 616e 736c 6174 655f 666f      translate_fo
+0000dc70: 726d 203d 207b 0d0a 2020 2020 2020 2020  rm = {..        
+0000dc80: 2020 2020 2769 273a 2071 7565 7279 5f74      'i': query_t
+0000dc90: 6578 742c 0d0a 2020 2020 2020 2020 2020  ext,..          
+0000dca0: 2020 2766 726f 6d27 3a20 6672 6f6d 5f6c    'from': from_l
+0000dcb0: 616e 6775 6167 652c 0d0a 2020 2020 2020  anguage,..      
+0000dcc0: 2020 2020 2020 2774 6f27 3a20 746f 5f6c        'to': to_l
+0000dcd0: 616e 6775 6167 6520 6966 2066 726f 6d5f  anguage if from_
+0000dce0: 6c61 6e67 7561 6765 2021 3d20 2761 7574  language != 'aut
+0000dcf0: 6f27 2065 6c73 6520 2727 2c0d 0a20 2020  o' else '',..   
+0000dd00: 2020 2020 2020 2020 2027 646f 6d61 696e           'domain
+0000dd10: 273a 2064 6f6d 6169 6e2c 0d0a 2020 2020  ': domain,..    
+0000dd20: 2020 2020 2020 2020 2764 6963 7452 6573          'dictRes
+0000dd30: 756c 7427 3a20 2774 7275 6527 2c0d 0a20  ult': 'true',.. 
+0000dd40: 2020 2020 2020 207d 0d0a 2020 2020 2020         }..      
+0000dd50: 2020 7061 796c 6f61 6420 3d20 7365 6c66    payload = self
+0000dd60: 2e67 6574 5f70 6179 6c6f 6164 286b 6579  .get_payload(key
+0000dd70: 6964 3d27 7765 6266 616e 7969 272c 206b  id='webfanyi', k
+0000dd80: 6579 3d73 656c 662e 6465 6661 756c 745f  ey=self.default_
+0000dd90: 6b65 792c 2074 696d 6573 7461 6d70 3d73  key, timestamp=s
+0000dda0: 656c 662e 6765 745f 7469 6d65 7374 616d  elf.get_timestam
+0000ddb0: 7028 292c 202a 2a74 7261 6e73 6c61 7465  p(), **translate
+0000ddc0: 5f66 6f72 6d29 0d0a 2020 2020 2020 2020  _form)..        
+0000ddd0: 7061 796c 6f61 6420 3d20 7572 6c6c 6962  payload = urllib
+0000dde0: 2e70 6172 7365 2e75 726c 656e 636f 6465  .parse.urlencode
+0000ddf0: 2870 6179 6c6f 6164 290d 0a20 2020 2020  (payload)..     
+0000de00: 2020 2072 203d 2073 656c 662e 7365 7373     r = self.sess
+0000de10: 696f 6e2e 706f 7374 2873 656c 662e 6170  ion.post(self.ap
+0000de20: 695f 7572 6c2c 2064 6174 613d 7061 796c  i_url, data=payl
+0000de30: 6f61 642c 2068 6561 6465 7273 3d73 656c  oad, headers=sel
+0000de40: 662e 6170 695f 6865 6164 6572 732c 2074  f.api_headers, t
+0000de50: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
+0000de60: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
+0000de70: 0d0a 2020 2020 2020 2020 722e 7261 6973  ..        r.rais
+0000de80: 655f 666f 725f 7374 6174 7573 2829 2020  e_for_status()  
+0000de90: 2320 7261 6973 6520 5472 616e 736c 6174  # raise Translat
+0000dea0: 6f72 4572 726f 7228 2759 6f75 6461 6f56  orError('YoudaoV
+0000deb0: 3220 6861 7320 6e6f 7420 6265 656e 2063  2 has not been c
+0000dec0: 6f6d 706c 6574 6564 2e27 2920 2023 2054  ompleted.')  # T
+0000ded0: 4f44 4f0d 0a20 2020 2020 2020 2064 6174  ODO..        dat
+0000dee0: 6120 3d20 7365 6c66 2e64 6563 7279 7074  a = self.decrypt
+0000def0: 2872 2e74 6578 742c 2064 6563 7279 7074  (r.text, decrypt
+0000df00: 5f64 6963 7469 6f6e 6172 793d 7b7d 290d  _dictionary={}).
+0000df10: 0a20 2020 2020 2020 2074 696d 652e 736c  .        time.sl
+0000df20: 6565 7028 736c 6565 705f 7365 636f 6e64  eep(sleep_second
+0000df30: 7329 0d0a 2020 2020 2020 2020 7365 6c66  s)..        self
+0000df40: 2e71 7565 7279 5f63 6f75 6e74 202b 3d20  .query_count += 
+0000df50: 310d 0a20 2020 2020 2020 2072 6574 7572  1..        retur
+0000df60: 6e20 6461 7461 2069 6620 6973 5f64 6574  n data if is_det
+0000df70: 6169 6c5f 7265 7375 6c74 2065 6c73 6520  ail_result else 
+0000df80: 7374 7228 6461 7461 2920 2023 2054 4f44  str(data)  # TOD
+0000df90: 4f0d 0a0d 0a0d 0a63 6c61 7373 2059 6f75  O......class You
+0000dfa0: 6461 6f56 3328 5473 6529 3a0d 0a20 2020  daoV3(Tse):..   
+0000dfb0: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
+0000dfc0: 6c66 293a 0d0a 2020 2020 2020 2020 7375  lf):..        su
+0000dfd0: 7065 7228 292e 5f5f 696e 6974 5f5f 2829  per().__init__()
+0000dfe0: 0d0a 2020 2020 2020 2020 7365 6c66 2e62  ..        self.b
+0000dff0: 6567 696e 5f74 696d 6520 3d20 7469 6d65  egin_time = time
+0000e000: 2e74 696d 6528 290d 0a20 2020 2020 2020  .time()..       
+0000e010: 2073 656c 662e 686f 7374 5f75 726c 203d   self.host_url =
+0000e020: 2027 6874 7470 733a 2f2f 6169 2e79 6f75   'https://ai.you
+0000e030: 6461 6f2e 636f 6d2f 7072 6f64 7563 742d  dao.com/product-
+0000e040: 6661 6e79 692d 7465 7874 2e73 270d 0a20  fanyi-text.s'.. 
+0000e050: 2020 2020 2020 2073 656c 662e 6170 695f         self.api_
+0000e060: 7572 6c20 3d20 2768 7474 7073 3a2f 2f61  url = 'https://a
+0000e070: 6964 656d 6f2e 796f 7564 616f 2e63 6f6d  idemo.youdao.com
+0000e080: 2f74 7261 6e73 270d 0a20 2020 2020 2020  /trans'..       
+0000e090: 2073 656c 662e 686f 7374 5f68 6561 6465   self.host_heade
+0000e0a0: 7273 203d 2073 656c 662e 6765 745f 6865  rs = self.get_he
+0000e0b0: 6164 6572 7328 7365 6c66 2e68 6f73 745f  aders(self.host_
+0000e0c0: 7572 6c2c 2069 665f 6170 693d 4661 6c73  url, if_api=Fals
+0000e0d0: 6529 0d0a 2020 2020 2020 2020 7365 6c66  e)..        self
+0000e0e0: 2e61 7069 5f68 6561 6465 7273 203d 2073  .api_headers = s
+0000e0f0: 656c 662e 6765 745f 6865 6164 6572 7328  elf.get_headers(
+0000e100: 7365 6c66 2e68 6f73 745f 7572 6c2c 2069  self.host_url, i
+0000e110: 665f 6170 693d 5472 7565 290d 0a20 2020  f_api=True)..   
+0000e120: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
+0000e130: 6765 5f6d 6170 203d 204e 6f6e 650d 0a20  ge_map = None.. 
+0000e140: 2020 2020 2020 2073 656c 662e 7365 7373         self.sess
+0000e150: 696f 6e20 3d20 4e6f 6e65 0d0a 2020 2020  ion = None..    
+0000e160: 2020 2020 7365 6c66 2e71 7565 7279 5f63      self.query_c
+0000e170: 6f75 6e74 203d 2030 0d0a 2020 2020 2020  ount = 0..      
+0000e180: 2020 7365 6c66 2e6f 7574 7075 745f 7a68    self.output_zh
+0000e190: 203d 2027 7a68 2d43 4853 270d 0a20 2020   = 'zh-CHS'..   
+0000e1a0: 2020 2020 2073 656c 662e 696e 7075 745f       self.input_
+0000e1b0: 6c69 6d69 7420 3d20 696e 7428 3165 3329  limit = int(1e3)
+0000e1c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
+0000e1d0: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
+0000e1e0: 7561 6765 203d 2073 656c 662e 6f75 7470  uage = self.outp
+0000e1f0: 7574 5f7a 680d 0a0d 0a20 2020 2040 5473  ut_zh....    @Ts
+0000e200: 652e 6465 6275 675f 6c61 6e67 7561 6765  e.debug_language
+0000e210: 5f6d 6170 0d0a 2020 2020 6465 6620 6765  _map..    def ge
+0000e220: 745f 6c61 6e67 7561 6765 5f6d 6170 2873  t_language_map(s
+0000e230: 656c 662c 2068 6f73 745f 6874 6d6c 3a20  elf, host_html: 
+0000e240: 7374 722c 202a 2a6b 7761 7267 733a 204c  str, **kwargs: L
+0000e250: 616e 674d 6170 4b77 6172 6773 5479 7065  angMapKwargsType
+0000e260: 2920 2d3e 2064 6963 743a 0d0a 2020 2020  ) -> dict:..    
+0000e270: 2020 2020 6574 203d 206c 786d 6c2e 6574      et = lxml.et
+0000e280: 7265 652e 4854 4d4c 2868 6f73 745f 6874  ree.HTML(host_ht
+0000e290: 6d6c 290d 0a20 2020 2020 2020 206c 616e  ml)..        lan
+0000e2a0: 675f 6c69 7374 203d 2065 742e 7870 6174  g_list = et.xpat
+0000e2b0: 6828 272f 2f2a 5b40 6964 3d22 6375 7374  h('//*[@id="cust
+0000e2c0: 6f6d 5365 6c65 6374 4f70 7469 6f6e 225d  omSelectOption"]
+0000e2d0: 2f6c 692f 612f 4076 616c 2729 0d0a 2020  /li/a/@val')..  
+0000e2e0: 2020 2020 2020 6c61 6e67 5f6c 6973 7420        lang_list 
+0000e2f0: 3d20 736f 7274 6564 285b 6974 2e73 706c  = sorted([it.spl
+0000e300: 6974 2827 3227 295b 315d 2066 6f72 2069  it('2')[1] for i
+0000e310: 7420 696e 206c 616e 675f 6c69 7374 2069  t in lang_list i
+0000e320: 6620 6627 7b73 656c 662e 6f75 7470 7574  f f'{self.output
+0000e330: 5f7a 687d 3227 2069 6e20 6974 5d29 0d0a  _zh}2' in it])..
+0000e340: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+0000e350: 2a2a 7b6c 616e 673a 205b 7365 6c66 2e6f  **{lang: [self.o
+0000e360: 7574 7075 745f 7a68 5d20 666f 7220 6c61  utput_zh] for la
+0000e370: 6e67 2069 6e20 6c61 6e67 5f6c 6973 747d  ng in lang_list}
+0000e380: 2c20 2a2a 7b73 656c 662e 6f75 7470 7574  , **{self.output
+0000e390: 5f7a 683a 206c 616e 675f 6c69 7374 7d7d  _zh: lang_list}}
+0000e3a0: 0d0a 0d0a 2020 2020 4054 7365 2e74 696d  ....    @Tse.tim
+0000e3b0: 655f 7374 6174 0d0a 2020 2020 4054 7365  e_stat..    @Tse
+0000e3c0: 2e63 6865 636b 5f71 7565 7279 0d0a 2020  .check_query..  
+0000e3d0: 2020 6465 6620 796f 7564 616f 5f61 7069    def youdao_api
+0000e3e0: 2873 656c 662c 2071 7565 7279 5f74 6578  (self, query_tex
+0000e3f0: 743a 2073 7472 2c20 6672 6f6d 5f6c 616e  t: str, from_lan
+0000e400: 6775 6167 653a 2073 7472 203d 2027 6175  guage: str = 'au
+0000e410: 746f 272c 2074 6f5f 6c61 6e67 7561 6765  to', to_language
+0000e420: 3a20 7374 7220 3d20 2765 6e27 2c20 2a2a  : str = 'en', **
+0000e430: 6b77 6172 6773 3a20 4170 694b 7761 7267  kwargs: ApiKwarg
+0000e440: 7354 7970 6529 202d 3e20 556e 696f 6e5b  sType) -> Union[
+0000e450: 7374 722c 2064 6963 745d 3a0d 0a20 2020  str, dict]:..   
+0000e460: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+0000e470: 2020 6874 7470 733a 2f2f 6169 2e79 6f75    https://ai.you
+0000e480: 6461 6f2e 636f 6d2f 7072 6f64 7563 742d  dao.com/product-
+0000e490: 6661 6e79 692d 7465 7874 2e73 0d0a 2020  fanyi-text.s..  
+0000e4a0: 2020 2020 2020 3a70 6172 616d 2071 7565        :param que
+0000e4b0: 7279 5f74 6578 743a 2073 7472 2c20 6d75  ry_text: str, mu
+0000e4c0: 7374 2e0d 0a20 2020 2020 2020 203a 7061  st...        :pa
+0000e4d0: 7261 6d20 6672 6f6d 5f6c 616e 6775 6167  ram from_languag
+0000e4e0: 653a 2073 7472 2c20 6465 6661 756c 7420  e: str, default 
+0000e4f0: 2761 7574 6f27 2e0d 0a20 2020 2020 2020  'auto'...       
+0000e500: 203a 7061 7261 6d20 746f 5f6c 616e 6775   :param to_langu
+0000e510: 6167 653a 2073 7472 2c20 6465 6661 756c  age: str, defaul
+0000e520: 7420 2765 6e27 2e0d 0a20 2020 2020 2020  t 'en'...       
+0000e530: 203a 7061 7261 6d20 2a2a 6b77 6172 6773   :param **kwargs
+0000e540: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000e550: 2020 203a 7061 7261 6d20 7469 6d65 6f75     :param timeou
+0000e560: 743a 2066 6c6f 6174 2c20 6465 6661 756c  t: float, defaul
+0000e570: 7420 4e6f 6e65 2e0d 0a20 2020 2020 2020  t None...       
+0000e580: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+0000e590: 7072 6f78 6965 733a 2064 6963 742c 2064  proxies: dict, d
+0000e5a0: 6566 6175 6c74 204e 6f6e 652e 0d0a 2020  efault None...  
+0000e5b0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+0000e5c0: 6172 616d 2073 6c65 6570 5f73 6563 6f6e  aram sleep_secon
+0000e5d0: 6473 3a20 666c 6f61 742c 2064 6566 6175  ds: float, defau
+0000e5e0: 6c74 2030 2e0d 0a20 2020 2020 2020 2020  lt 0...         
+0000e5f0: 2020 2020 2020 203a 7061 7261 6d20 6973         :param is
+0000e600: 5f64 6574 6169 6c5f 7265 7375 6c74 3a20  _detail_result: 
+0000e610: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
+0000e620: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
+0000e630: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
+0000e640: 6967 6e6f 7265 5f6c 696d 6974 5f6f 665f  ignore_limit_of_
+0000e650: 6c65 6e67 7468 3a20 626f 6f6c 2c20 6465  length: bool, de
+0000e660: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
+0000e670: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+0000e680: 6172 616d 206c 696d 6974 5f6f 665f 6c65  aram limit_of_le
+0000e690: 6e67 7468 3a20 696e 742c 2064 6566 6175  ngth: int, defau
+0000e6a0: 6c74 2032 3030 3030 2e0d 0a20 2020 2020  lt 20000...     
+0000e6b0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+0000e6c0: 6d20 6966 5f69 676e 6f72 655f 656d 7074  m if_ignore_empt
+0000e6d0: 795f 7175 6572 793a 2062 6f6f 6c2c 2064  y_query: bool, d
+0000e6e0: 6566 6175 6c74 2046 616c 7365 2e0d 0a20  efault False... 
+0000e6f0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0000e700: 7061 7261 6d20 7570 6461 7465 5f73 6573  param update_ses
+0000e710: 7369 6f6e 5f61 6674 6572 5f66 7265 713a  sion_after_freq:
+0000e720: 2069 6e74 2c20 6465 6661 756c 7420 3130   int, default 10
+0000e730: 3030 2e0d 0a20 2020 2020 2020 2020 2020  00...           
+0000e740: 2020 2020 203a 7061 7261 6d20 7570 6461       :param upda
+0000e750: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+0000e760: 5f73 6563 6f6e 6473 3a20 666c 6f61 742c  _seconds: float,
+0000e770: 2064 6566 6175 6c74 2031 3530 302e 0d0a   default 1500...
+0000e780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e790: 3a70 6172 616d 2069 665f 7368 6f77 5f74  :param if_show_t
+0000e7a0: 696d 655f 7374 6174 3a20 626f 6f6c 2c20  ime_stat: bool, 
+0000e7b0: 6465 6661 756c 7420 4661 6c73 652e 0d0a  default False...
+0000e7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e7d0: 3a70 6172 616d 2073 686f 775f 7469 6d65  :param show_time
+0000e7e0: 5f73 7461 745f 7072 6563 6973 696f 6e3a  _stat_precision:
+0000e7f0: 2069 6e74 2c20 6465 6661 756c 7420 322e   int, default 2.
+0000e800: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000e810: 2020 3a70 6172 616d 2069 665f 7072 696e    :param if_prin
+0000e820: 745f 7761 726e 696e 673a 2062 6f6f 6c2c  t_warning: bool,
+0000e830: 2064 6566 6175 6c74 2054 7275 652e 0d0a   default True...
+0000e840: 2020 2020 2020 2020 3a72 6574 7572 6e3a          :return:
+0000e850: 2073 7472 206f 7220 6469 6374 0d0a 2020   str or dict..  
+0000e860: 2020 2020 2020 2222 220d 0a0d 0a20 2020        """....   
+0000e870: 2020 2020 2074 696d 656f 7574 203d 206b       timeout = k
+0000e880: 7761 7267 732e 6765 7428 2774 696d 656f  wargs.get('timeo
+0000e890: 7574 272c 204e 6f6e 6529 0d0a 2020 2020  ut', None)..    
+0000e8a0: 2020 2020 7072 6f78 6965 7320 3d20 6b77      proxies = kw
+0000e8b0: 6172 6773 2e67 6574 2827 7072 6f78 6965  args.get('proxie
+0000e8c0: 7327 2c20 4e6f 6e65 290d 0a20 2020 2020  s', None)..     
+0000e8d0: 2020 2073 6c65 6570 5f73 6563 6f6e 6473     sleep_seconds
+0000e8e0: 203d 206b 7761 7267 732e 6765 7428 2773   = kwargs.get('s
+0000e8f0: 6c65 6570 5f73 6563 6f6e 6473 272c 2030  leep_seconds', 0
+0000e900: 290d 0a20 2020 2020 2020 2069 665f 7072  )..        if_pr
+0000e910: 696e 745f 7761 726e 696e 6720 3d20 6b77  int_warning = kw
+0000e920: 6172 6773 2e67 6574 2827 6966 5f70 7269  args.get('if_pri
+0000e930: 6e74 5f77 6172 6e69 6e67 272c 2054 7275  nt_warning', Tru
+0000e940: 6529 0d0a 2020 2020 2020 2020 6973 5f64  e)..        is_d
+0000e950: 6574 6169 6c5f 7265 7375 6c74 203d 206b  etail_result = k
+0000e960: 7761 7267 732e 6765 7428 2769 735f 6465  wargs.get('is_de
+0000e970: 7461 696c 5f72 6573 756c 7427 2c20 4661  tail_result', Fa
+0000e980: 6c73 6529 0d0a 2020 2020 2020 2020 7570  lse)..        up
+0000e990: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+0000e9a0: 6572 5f66 7265 7120 3d20 6b77 6172 6773  er_freq = kwargs
+0000e9b0: 2e67 6574 2827 7570 6461 7465 5f73 6573  .get('update_ses
+0000e9c0: 7369 6f6e 5f61 6674 6572 5f66 7265 7127  sion_after_freq'
+0000e9d0: 2c20 7365 6c66 2e64 6566 6175 6c74 5f73  , self.default_s
+0000e9e0: 6573 7369 6f6e 5f66 7265 7129 0d0a 2020  ession_freq)..  
+0000e9f0: 2020 2020 2020 7570 6461 7465 5f73 6573        update_ses
+0000ea00: 7369 6f6e 5f61 6674 6572 5f73 6563 6f6e  sion_after_secon
+0000ea10: 6473 203d 206b 7761 7267 732e 6765 7428  ds = kwargs.get(
+0000ea20: 2775 7064 6174 655f 7365 7373 696f 6e5f  'update_session_
+0000ea30: 6166 7465 725f 7365 636f 6e64 7327 2c20  after_seconds', 
+0000ea40: 7365 6c66 2e64 6566 6175 6c74 5f73 6573  self.default_ses
+0000ea50: 7369 6f6e 5f73 6563 6f6e 6473 290d 0a20  sion_seconds).. 
+0000ea60: 2020 2020 2020 2073 656c 662e 6368 6563         self.chec
+0000ea70: 6b5f 696e 7075 745f 6c69 6d69 7428 7175  k_input_limit(qu
+0000ea80: 6572 795f 7465 7874 2c20 7365 6c66 2e69  ery_text, self.i
+0000ea90: 6e70 7574 5f6c 696d 6974 290d 0a0d 0a20  nput_limit).... 
+0000eaa0: 2020 2020 2020 206e 6f74 5f75 7064 6174         not_updat
+0000eab0: 655f 636f 6e64 5f66 7265 7120 3d20 3120  e_cond_freq = 1 
+0000eac0: 6966 2073 656c 662e 7175 6572 795f 636f  if self.query_co
+0000ead0: 756e 7420 2520 7570 6461 7465 5f73 6573  unt % update_ses
+0000eae0: 7369 6f6e 5f61 6674 6572 5f66 7265 7120  sion_after_freq 
+0000eaf0: 213d 2030 2065 6c73 6520 300d 0a20 2020  != 0 else 0..   
+0000eb00: 2020 2020 206e 6f74 5f75 7064 6174 655f       not_update_
+0000eb10: 636f 6e64 5f74 696d 6520 3d20 3120 6966  cond_time = 1 if
+0000eb20: 2074 696d 652e 7469 6d65 2829 202d 2073   time.time() - s
+0000eb30: 656c 662e 6265 6769 6e5f 7469 6d65 203c  elf.begin_time <
+0000eb40: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
+0000eb50: 6166 7465 725f 7365 636f 6e64 7320 656c  after_seconds el
+0000eb60: 7365 2030 0d0a 2020 2020 2020 2020 6966  se 0..        if
+0000eb70: 206e 6f74 2028 7365 6c66 2e73 6573 7369   not (self.sessi
+0000eb80: 6f6e 2061 6e64 2073 656c 662e 6c61 6e67  on and self.lang
+0000eb90: 7561 6765 5f6d 6170 2061 6e64 206e 6f74  uage_map and not
+0000eba0: 5f75 7064 6174 655f 636f 6e64 5f66 7265  _update_cond_fre
+0000ebb0: 7120 616e 6420 6e6f 745f 7570 6461 7465  q and not_update
+0000ebc0: 5f63 6f6e 645f 7469 6d65 293a 0d0a 2020  _cond_time):..  
+0000ebd0: 2020 2020 2020 2020 2020 7365 6c66 2e62            self.b
+0000ebe0: 6567 696e 5f74 696d 6520 3d20 7469 6d65  egin_time = time
+0000ebf0: 2e74 696d 6528 290d 0a20 2020 2020 2020  .time()..       
+0000ec00: 2020 2020 2073 656c 662e 7365 7373 696f       self.sessio
+0000ec10: 6e20 3d20 7265 7175 6573 7473 2e53 6573  n = requests.Ses
+0000ec20: 7369 6f6e 2829 0d0a 2020 2020 2020 2020  sion()..        
+0000ec30: 2020 2020 686f 7374 5f68 746d 6c20 3d20      host_html = 
+0000ec40: 7365 6c66 2e73 6573 7369 6f6e 2e67 6574  self.session.get
+0000ec50: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
+0000ec60: 6865 6164 6572 733d 7365 6c66 2e68 6f73  headers=self.hos
+0000ec70: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
+0000ec80: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
+0000ec90: 6965 733d 7072 6f78 6965 7329 2e74 6578  ies=proxies).tex
+0000eca0: 740d 0a20 2020 2020 2020 2020 2020 2064  t..            d
+0000ecb0: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
+0000ecc0: 203d 2073 656c 662e 6465 6275 675f 6c61   = self.debug_la
+0000ecd0: 6e67 5f6b 7761 7267 7328 6672 6f6d 5f6c  ng_kwargs(from_l
+0000ece0: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
+0000ecf0: 7561 6765 2c20 7365 6c66 2e64 6566 6175  uage, self.defau
+0000ed00: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
+0000ed10: 2c20 6966 5f70 7269 6e74 5f77 6172 6e69  , if_print_warni
+0000ed20: 6e67 290d 0a20 2020 2020 2020 2020 2020  ng)..           
+0000ed30: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+0000ed40: 6170 203d 2073 656c 662e 6765 745f 6c61  ap = self.get_la
+0000ed50: 6e67 7561 6765 5f6d 6170 2868 6f73 745f  nguage_map(host_
+0000ed60: 6874 6d6c 2c20 2a2a 6465 6275 675f 6c61  html, **debug_la
+0000ed70: 6e67 5f6b 7761 7267 7329 0d0a 0d0a 2020  ng_kwargs)....  
+0000ed80: 2020 2020 2020 6672 6f6d 5f6c 616e 6775        from_langu
+0000ed90: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
+0000eda0: 203d 2073 656c 662e 6368 6563 6b5f 6c61   = self.check_la
+0000edb0: 6e67 7561 6765 2866 726f 6d5f 6c61 6e67  nguage(from_lang
+0000edc0: 7561 6765 2c20 746f 5f6c 616e 6775 6167  uage, to_languag
+0000edd0: 652c 2073 656c 662e 6c61 6e67 7561 6765  e, self.language
+0000ede0: 5f6d 6170 2c20 6f75 7470 7574 5f7a 683d  _map, output_zh=
+0000edf0: 7365 6c66 2e6f 7574 7075 745f 7a68 290d  self.output_zh).
+0000ee00: 0a20 2020 2020 2020 2069 6620 6672 6f6d  .        if from
+0000ee10: 5f6c 616e 6775 6167 6520 3d3d 2027 6175  _language == 'au
+0000ee20: 746f 273a 0d0a 2020 2020 2020 2020 2020  to':..          
+0000ee30: 2020 6672 6f6d 5f6c 616e 6775 6167 6520    from_language 
+0000ee40: 3d20 746f 5f6c 616e 6775 6167 6520 3d20  = to_language = 
+0000ee50: 2741 7574 6f27 0d0a 0d0a 2020 2020 2020  'Auto'....      
+0000ee60: 2020 7061 796c 6f61 6420 3d20 7b27 7127    payload = {'q'
+0000ee70: 3a20 7175 6572 795f 7465 7874 2c20 2766  : query_text, 'f
+0000ee80: 726f 6d27 3a20 6672 6f6d 5f6c 616e 6775  rom': from_langu
+0000ee90: 6167 652c 2027 746f 273a 2074 6f5f 6c61  age, 'to': to_la
+0000eea0: 6e67 7561 6765 7d0d 0a20 2020 2020 2020  nguage}..       
+0000eeb0: 2070 6179 6c6f 6164 203d 2075 726c 6c69   payload = urlli
+0000eec0: 622e 7061 7273 652e 7572 6c65 6e63 6f64  b.parse.urlencod
+0000eed0: 6528 7061 796c 6f61 6429 0d0a 2020 2020  e(payload)..    
+0000eee0: 2020 2020 7220 3d20 7365 6c66 2e73 6573      r = self.ses
+0000eef0: 7369 6f6e 2e70 6f73 7428 7365 6c66 2e61  sion.post(self.a
+0000ef00: 7069 5f75 726c 2c20 6461 7461 3d70 6179  pi_url, data=pay
+0000ef10: 6c6f 6164 2c20 6865 6164 6572 733d 7365  load, headers=se
+0000ef20: 6c66 2e61 7069 5f68 6561 6465 7273 2c20  lf.api_headers, 
+0000ef30: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+0000ef40: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+0000ef50: 290d 0a20 2020 2020 2020 2072 2e72 6169  )..        r.rai
+0000ef60: 7365 5f66 6f72 5f73 7461 7475 7328 290d  se_for_status().
+0000ef70: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
+0000ef80: 722e 6a73 6f6e 2829 0d0a 2020 2020 2020  r.json()..      
+0000ef90: 2020 7469 6d65 2e73 6c65 6570 2873 6c65    time.sleep(sle
+0000efa0: 6570 5f73 6563 6f6e 6473 290d 0a20 2020  ep_seconds)..   
+0000efb0: 2020 2020 2073 656c 662e 7175 6572 795f       self.query_
+0000efc0: 636f 756e 7420 2b3d 2031 0d0a 2020 2020  count += 1..    
+0000efd0: 2020 2020 7265 7475 726e 2064 6174 6120      return data 
+0000efe0: 6966 2069 735f 6465 7461 696c 5f72 6573  if is_detail_res
+0000eff0: 756c 7420 656c 7365 2064 6174 615b 2774  ult else data['t
+0000f000: 7261 6e73 6c61 7469 6f6e 275d 5b30 5d0d  ranslation'][0].
+0000f010: 0a0d 0a0d 0a63 6c61 7373 2051 5146 616e  .....class QQFan
+0000f020: 7969 2854 7365 293a 0d0a 2020 2020 6465  yi(Tse):..    de
+0000f030: 6620 5f5f 696e 6974 5f5f 2873 656c 6629  f __init__(self)
+0000f040: 3a0d 0a20 2020 2020 2020 2073 7570 6572  :..        super
+0000f050: 2829 2e5f 5f69 6e69 745f 5f28 290d 0a20  ().__init__().. 
+0000f060: 2020 2020 2020 2073 656c 662e 6265 6769         self.begi
+0000f070: 6e5f 7469 6d65 203d 2074 696d 652e 7469  n_time = time.ti
+0000f080: 6d65 2829 0d0a 2020 2020 2020 2020 7365  me()..        se
+0000f090: 6c66 2e68 6f73 745f 7572 6c20 3d20 2768  lf.host_url = 'h
+0000f0a0: 7474 7073 3a2f 2f66 616e 7969 2e71 712e  ttps://fanyi.qq.
+0000f0b0: 636f 6d27 0d0a 2020 2020 2020 2020 7365  com'..        se
+0000f0c0: 6c66 2e61 7069 5f75 726c 203d 2027 6874  lf.api_url = 'ht
+0000f0d0: 7470 733a 2f2f 6661 6e79 692e 7171 2e63  tps://fanyi.qq.c
+0000f0e0: 6f6d 2f61 7069 2f74 7261 6e73 6c61 7465  om/api/translate
+0000f0f0: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+0000f100: 6765 745f 6c61 6e67 7561 6765 5f75 726c  get_language_url
+0000f110: 203d 2027 6874 7470 733a 2f2f 6661 6e79   = 'https://fany
+0000f120: 692e 7171 2e63 6f6d 2f6a 732f 696e 6465  i.qq.com/js/inde
+0000f130: 782e 6a73 270d 0a20 2020 2020 2020 2073  x.js'..        s
+0000f140: 656c 662e 6765 745f 7174 5f75 726c 203d  elf.get_qt_url =
+0000f150: 2027 6874 7470 733a 2f2f 6661 6e79 692e   'https://fanyi.
+0000f160: 7171 2e63 6f6d 2f61 7069 2f72 6561 7574  qq.com/api/reaut
+0000f170: 6831 3266 270d 0a20 2020 2020 2020 2073  h12f'..        s
+0000f180: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
+0000f190: 203d 2073 656c 662e 6765 745f 6865 6164   = self.get_head
+0000f1a0: 6572 7328 7365 6c66 2e68 6f73 745f 7572  ers(self.host_ur
+0000f1b0: 6c2c 2069 665f 6170 693d 4661 6c73 6529  l, if_api=False)
+0000f1c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+0000f1d0: 7069 5f68 6561 6465 7273 203d 2073 656c  pi_headers = sel
+0000f1e0: 662e 6765 745f 6865 6164 6572 7328 7365  f.get_headers(se
+0000f1f0: 6c66 2e68 6f73 745f 7572 6c2c 2069 665f  lf.host_url, if_
+0000f200: 6170 693d 5472 7565 290d 0a20 2020 2020  api=True)..     
+0000f210: 2020 2073 656c 662e 7174 5f68 6561 6465     self.qt_heade
+0000f220: 7273 203d 2073 656c 662e 6765 745f 6865  rs = self.get_he
+0000f230: 6164 6572 7328 7365 6c66 2e68 6f73 745f  aders(self.host_
+0000f240: 7572 6c2c 2069 665f 6170 693d 5472 7565  url, if_api=True
+0000f250: 2c20 6966 5f6a 736f 6e5f 666f 725f 6170  , if_json_for_ap
+0000f260: 693d 5472 7565 290d 0a20 2020 2020 2020  i=True)..       
+0000f270: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+0000f280: 6170 203d 204e 6f6e 650d 0a20 2020 2020  ap = None..     
+0000f290: 2020 2073 656c 662e 7365 7373 696f 6e20     self.session 
+0000f2a0: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+0000f2b0: 7365 6c66 2e71 7476 5f71 746b 203d 204e  self.qtv_qtk = N
+0000f2c0: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
+0000f2d0: 662e 7175 6572 795f 636f 756e 7420 3d20  f.query_count = 
+0000f2e0: 300d 0a20 2020 2020 2020 2073 656c 662e  0..        self.
+0000f2f0: 6f75 7470 7574 5f7a 6820 3d20 277a 6827  output_zh = 'zh'
+0000f300: 0d0a 2020 2020 2020 2020 7365 6c66 2e69  ..        self.i
+0000f310: 6e70 7574 5f6c 696d 6974 203d 2069 6e74  nput_limit = int
+0000f320: 2832 6533 290d 0a20 2020 2020 2020 2073  (2e3)..        s
+0000f330: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
+0000f340: 5f6c 616e 6775 6167 6520 3d20 7365 6c66  _language = self
+0000f350: 2e6f 7574 7075 745f 7a68 0d0a 0d0a 2020  .output_zh....  
+0000f360: 2020 4054 7365 2e64 6562 7567 5f6c 616e    @Tse.debug_lan
+0000f370: 6775 6167 655f 6d61 700d 0a20 2020 2064  guage_map..    d
+0000f380: 6566 2067 6574 5f6c 616e 6775 6167 655f  ef get_language_
+0000f390: 6d61 7028 7365 6c66 2c20 7373 3a20 5365  map(self, ss: Se
+0000f3a0: 7373 696f 6e54 7970 652c 206c 616e 6775  ssionType, langu
+0000f3b0: 6167 655f 7572 6c3a 2073 7472 2c20 7469  age_url: str, ti
+0000f3c0: 6d65 6f75 743a 204f 7074 696f 6e61 6c5b  meout: Optional[
+0000f3d0: 666c 6f61 745d 2c20 7072 6f78 6965 733a  float], proxies:
+0000f3e0: 204f 7074 696f 6e61 6c5b 6469 6374 5d2c   Optional[dict],
+0000f3f0: 202a 2a6b 7761 7267 733a 204c 616e 674d   **kwargs: LangM
+0000f400: 6170 4b77 6172 6773 5479 7065 2920 2d3e  apKwargsType) ->
+0000f410: 2064 6963 743a 0d0a 2020 2020 2020 2020   dict:..        
+0000f420: 7220 3d20 7373 2e67 6574 286c 616e 6775  r = ss.get(langu
+0000f430: 6167 655f 7572 6c2c 2068 6561 6465 7273  age_url, headers
+0000f440: 3d73 656c 662e 686f 7374 5f68 6561 6465  =self.host_heade
+0000f450: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
+0000f460: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
+0000f470: 7869 6573 290d 0a20 2020 2020 2020 2072  xies)..        r
+0000f480: 2e72 6169 7365 5f66 6f72 5f73 7461 7475  .raise_for_statu
+0000f490: 7328 290d 0a20 2020 2020 2020 206c 616e  s()..        lan
+0000f4a0: 675f 6d61 705f 7374 7220 3d20 7265 2e63  g_map_str = re.c
+0000f4b0: 6f6d 7069 6c65 2827 433d 7b28 2e2a 3f29  ompile('C={(.*?)
+0000f4c0: 7d7c 6c61 6e67 7561 6765 5061 6972 203d  }|languagePair =
+0000f4d0: 207b 282e 2a3f 297d 272c 2066 6c61 6773   {(.*?)}', flags
+0000f4e0: 3d72 652e 5329 2e73 6561 7263 6828 722e  =re.S).search(r.
+0000f4f0: 7465 7874 292e 6772 6f75 7028 2920 2023  text).group()  #
+0000f500: 2043 3d0d 0a20 2020 2020 2020 2072 6574   C=..        ret
+0000f510: 7572 6e20 6578 6563 6a73 2e65 7661 6c28  urn execjs.eval(
+0000f520: 6c61 6e67 5f6d 6170 5f73 7472 290d 0a0d  lang_map_str)...
+0000f530: 0a20 2020 2064 6566 2067 6574 5f71 7428  .    def get_qt(
+0000f540: 7365 6c66 2c20 7373 3a20 5365 7373 696f  self, ss: Sessio
+0000f550: 6e54 7970 652c 2074 696d 656f 7574 3a20  nType, timeout: 
+0000f560: 666c 6f61 742c 2070 726f 7869 6573 3a20  float, proxies: 
+0000f570: 6469 6374 2920 2d3e 2064 6963 743a 0d0a  dict) -> dict:..
+0000f580: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0000f590: 732e 706f 7374 2873 656c 662e 6765 745f  s.post(self.get_
+0000f5a0: 7174 5f75 726c 2c20 6865 6164 6572 733d  qt_url, headers=
+0000f5b0: 7365 6c66 2e71 745f 6865 6164 6572 732c  self.qt_headers,
+0000f5c0: 206a 736f 6e3d 7365 6c66 2e71 7476 5f71   json=self.qtv_q
+0000f5d0: 746b 2c20 7469 6d65 6f75 743d 7469 6d65  tk, timeout=time
+0000f5e0: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
+0000f5f0: 7869 6573 292e 6a73 6f6e 2829 0d0a 0d0a  xies).json()....
+0000f600: 2020 2020 4054 7365 2e74 696d 655f 7374      @Tse.time_st
+0000f610: 6174 0d0a 2020 2020 4054 7365 2e63 6865  at..    @Tse.che
+0000f620: 636b 5f71 7565 7279 0d0a 2020 2020 6465  ck_query..    de
+0000f630: 6620 7171 4661 6e79 695f 6170 6928 7365  f qqFanyi_api(se
+0000f640: 6c66 2c20 7175 6572 795f 7465 7874 3a20  lf, query_text: 
+0000f650: 7374 722c 2066 726f 6d5f 6c61 6e67 7561  str, from_langua
+0000f660: 6765 3a20 7374 7220 3d20 2761 7574 6f27  ge: str = 'auto'
+0000f670: 2c20 746f 5f6c 616e 6775 6167 653a 2073  , to_language: s
+0000f680: 7472 203d 2027 656e 272c 202a 2a6b 7761  tr = 'en', **kwa
+0000f690: 7267 733a 2041 7069 4b77 6172 6773 5479  rgs: ApiKwargsTy
+0000f6a0: 7065 2920 2d3e 2055 6e69 6f6e 5b73 7472  pe) -> Union[str
+0000f6b0: 2c20 6469 6374 5d3a 0d0a 2020 2020 2020  , dict]:..      
+0000f6c0: 2020 2222 220d 0a20 2020 2020 2020 2068    """..        h
+0000f6d0: 7474 7073 3a2f 2f66 616e 7969 2e71 712e  ttps://fanyi.qq.
+0000f6e0: 636f 6d0d 0a20 2020 2020 2020 203a 7061  com..        :pa
+0000f6f0: 7261 6d20 7175 6572 795f 7465 7874 3a20  ram query_text: 
+0000f700: 7374 722c 206d 7573 742e 0d0a 2020 2020  str, must...    
+0000f710: 2020 2020 3a70 6172 616d 2066 726f 6d5f      :param from_
+0000f720: 6c61 6e67 7561 6765 3a20 7374 722c 2064  language: str, d
+0000f730: 6566 6175 6c74 2027 6175 746f 272e 0d0a  efault 'auto'...
+0000f740: 2020 2020 2020 2020 3a70 6172 616d 2074          :param t
+0000f750: 6f5f 6c61 6e67 7561 6765 3a20 7374 722c  o_language: str,
+0000f760: 2064 6566 6175 6c74 2027 656e 272e 0d0a   default 'en'...
+0000f770: 2020 2020 2020 2020 3a70 6172 616d 202a          :param *
+0000f780: 2a6b 7761 7267 733a 0d0a 2020 2020 2020  *kwargs:..      
+0000f790: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+0000f7a0: 2074 696d 656f 7574 3a20 666c 6f61 742c   timeout: float,
+0000f7b0: 2064 6566 6175 6c74 204e 6f6e 652e 0d0a   default None...
+0000f7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f7d0: 3a70 6172 616d 2070 726f 7869 6573 3a20  :param proxies: 
+0000f7e0: 6469 6374 2c20 6465 6661 756c 7420 4e6f  dict, default No
+0000f7f0: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
+0000f800: 2020 2020 203a 7061 7261 6d20 736c 6565       :param slee
+0000f810: 705f 7365 636f 6e64 733a 2066 6c6f 6174  p_seconds: float
+0000f820: 2c20 6465 6661 756c 7420 302e 0d0a 2020  , default 0...  
+0000f830: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+0000f840: 6172 616d 2069 735f 6465 7461 696c 5f72  aram is_detail_r
+0000f850: 6573 756c 743a 2062 6f6f 6c2c 2064 6566  esult: bool, def
+0000f860: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
+0000f870: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+0000f880: 7261 6d20 6966 5f69 676e 6f72 655f 6c69  ram if_ignore_li
+0000f890: 6d69 745f 6f66 5f6c 656e 6774 683a 2062  mit_of_length: b
+0000f8a0: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
+0000f8b0: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
+0000f8c0: 2020 2020 203a 7061 7261 6d20 6c69 6d69       :param limi
+0000f8d0: 745f 6f66 5f6c 656e 6774 683a 2069 6e74  t_of_length: int
+0000f8e0: 2c20 6465 6661 756c 7420 3230 3030 302e  , default 20000.
+0000f8f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000f900: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
+0000f910: 7265 5f65 6d70 7479 5f71 7565 7279 3a20  re_empty_query: 
+0000f920: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
+0000f930: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
+0000f940: 2020 2020 2020 3a70 6172 616d 2075 7064        :param upd
+0000f950: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0000f960: 725f 6672 6571 3a20 696e 742c 2064 6566  r_freq: int, def
+0000f970: 6175 6c74 2031 3030 302e 0d0a 2020 2020  ault 1000...    
+0000f980: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+0000f990: 616d 2075 7064 6174 655f 7365 7373 696f  am update_sessio
+0000f9a0: 6e5f 6166 7465 725f 7365 636f 6e64 733a  n_after_seconds:
+0000f9b0: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
+0000f9c0: 3135 3030 2e0d 0a20 2020 2020 2020 2020  1500...         
+0000f9d0: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+0000f9e0: 5f73 686f 775f 7469 6d65 5f73 7461 743a  _show_time_stat:
+0000f9f0: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
+0000fa00: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
+0000fa10: 2020 2020 2020 203a 7061 7261 6d20 7368         :param sh
+0000fa20: 6f77 5f74 696d 655f 7374 6174 5f70 7265  ow_time_stat_pre
+0000fa30: 6369 7369 6f6e 3a20 696e 742c 2064 6566  cision: int, def
+0000fa40: 6175 6c74 2032 2e0d 0a20 2020 2020 2020  ault 2...       
+0000fa50: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+0000fa60: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
+0000fa70: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+0000fa80: 5472 7565 2e0d 0a20 2020 2020 2020 203a  True...        :
+0000fa90: 7265 7475 726e 3a20 7374 7220 6f72 2064  return: str or d
+0000faa0: 6963 740d 0a20 2020 2020 2020 2022 2222  ict..        """
+0000fab0: 0d0a 0d0a 2020 2020 2020 2020 7469 6d65  ....        time
+0000fac0: 6f75 7420 3d20 6b77 6172 6773 2e67 6574  out = kwargs.get
+0000fad0: 2827 7469 6d65 6f75 7427 2c20 4e6f 6e65  ('timeout', None
+0000fae0: 290d 0a20 2020 2020 2020 2070 726f 7869  )..        proxi
+0000faf0: 6573 203d 206b 7761 7267 732e 6765 7428  es = kwargs.get(
+0000fb00: 2770 726f 7869 6573 272c 204e 6f6e 6529  'proxies', None)
+0000fb10: 0d0a 2020 2020 2020 2020 736c 6565 705f  ..        sleep_
+0000fb20: 7365 636f 6e64 7320 3d20 6b77 6172 6773  seconds = kwargs
+0000fb30: 2e67 6574 2827 736c 6565 705f 7365 636f  .get('sleep_seco
+0000fb40: 6e64 7327 2c20 3029 0d0a 2020 2020 2020  nds', 0)..      
+0000fb50: 2020 6966 5f70 7269 6e74 5f77 6172 6e69    if_print_warni
+0000fb60: 6e67 203d 206b 7761 7267 732e 6765 7428  ng = kwargs.get(
+0000fb70: 2769 665f 7072 696e 745f 7761 726e 696e  'if_print_warnin
+0000fb80: 6727 2c20 5472 7565 290d 0a20 2020 2020  g', True)..     
+0000fb90: 2020 2069 735f 6465 7461 696c 5f72 6573     is_detail_res
+0000fba0: 756c 7420 3d20 6b77 6172 6773 2e67 6574  ult = kwargs.get
+0000fbb0: 2827 6973 5f64 6574 6169 6c5f 7265 7375  ('is_detail_resu
+0000fbc0: 6c74 272c 2046 616c 7365 290d 0a20 2020  lt', False)..   
+0000fbd0: 2020 2020 2075 7064 6174 655f 7365 7373       update_sess
+0000fbe0: 696f 6e5f 6166 7465 725f 6672 6571 203d  ion_after_freq =
+0000fbf0: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
+0000fc00: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0000fc10: 725f 6672 6571 272c 2073 656c 662e 6465  r_freq', self.de
+0000fc20: 6661 756c 745f 7365 7373 696f 6e5f 6672  fault_session_fr
+0000fc30: 6571 290d 0a20 2020 2020 2020 2075 7064  eq)..        upd
+0000fc40: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0000fc50: 725f 7365 636f 6e64 7320 3d20 6b77 6172  r_seconds = kwar
+0000fc60: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
+0000fc70: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+0000fc80: 6f6e 6473 272c 2073 656c 662e 6465 6661  onds', self.defa
+0000fc90: 756c 745f 7365 7373 696f 6e5f 7365 636f  ult_session_seco
+0000fca0: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
+0000fcb0: 6c66 2e63 6865 636b 5f69 6e70 7574 5f6c  lf.check_input_l
+0000fcc0: 696d 6974 2871 7565 7279 5f74 6578 742c  imit(query_text,
+0000fcd0: 2073 656c 662e 696e 7075 745f 6c69 6d69   self.input_limi
+0000fce0: 7429 0d0a 0d0a 2020 2020 2020 2020 6e6f  t)....        no
+0000fcf0: 745f 7570 6461 7465 5f63 6f6e 645f 6672  t_update_cond_fr
+0000fd00: 6571 203d 2031 2069 6620 7365 6c66 2e71  eq = 1 if self.q
+0000fd10: 7565 7279 5f63 6f75 6e74 2025 2075 7064  uery_count % upd
+0000fd20: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0000fd30: 725f 6672 6571 2021 3d20 3020 656c 7365  r_freq != 0 else
+0000fd40: 2030 0d0a 2020 2020 2020 2020 6e6f 745f   0..        not_
+0000fd50: 7570 6461 7465 5f63 6f6e 645f 7469 6d65  update_cond_time
+0000fd60: 203d 2031 2069 6620 7469 6d65 2e74 696d   = 1 if time.tim
+0000fd70: 6528 2920 2d20 7365 6c66 2e62 6567 696e  e() - self.begin
+0000fd80: 5f74 696d 6520 3c20 7570 6461 7465 5f73  _time < update_s
+0000fd90: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+0000fda0: 6f6e 6473 2065 6c73 6520 300d 0a20 2020  onds else 0..   
+0000fdb0: 2020 2020 2069 6620 6e6f 7420 2873 656c       if not (sel
+0000fdc0: 662e 7365 7373 696f 6e20 616e 6420 7365  f.session and se
+0000fdd0: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
+0000fde0: 616e 6420 6e6f 745f 7570 6461 7465 5f63  and not_update_c
+0000fdf0: 6f6e 645f 6672 6571 2061 6e64 206e 6f74  ond_freq and not
+0000fe00: 5f75 7064 6174 655f 636f 6e64 5f74 696d  _update_cond_tim
+0000fe10: 6520 616e 6420 7365 6c66 2e71 7476 5f71  e and self.qtv_q
+0000fe20: 746b 293a 0d0a 2020 2020 2020 2020 2020  tk):..          
+0000fe30: 2020 7365 6c66 2e62 6567 696e 5f74 696d    self.begin_tim
+0000fe40: 6520 3d20 7469 6d65 2e74 696d 6528 290d  e = time.time().
+0000fe50: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000fe60: 662e 7365 7373 696f 6e20 3d20 7265 7175  f.session = requ
+0000fe70: 6573 7473 2e53 6573 7369 6f6e 2829 0d0a  ests.Session()..
+0000fe80: 2020 2020 2020 2020 2020 2020 5f20 3d20              _ = 
+0000fe90: 7365 6c66 2e73 6573 7369 6f6e 2e67 6574  self.session.get
+0000fea0: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
+0000feb0: 6865 6164 6572 733d 7365 6c66 2e68 6f73  headers=self.hos
+0000fec0: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
+0000fed0: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
+0000fee0: 6965 733d 7072 6f78 6965 7329 2e74 6578  ies=proxies).tex
+0000fef0: 740d 0a20 2020 2020 2020 2020 2020 2073  t..            s
+0000ff00: 656c 662e 7174 765f 7174 6b20 3d20 7365  elf.qtv_qtk = se
+0000ff10: 6c66 2e67 6574 5f71 7428 7365 6c66 2e73  lf.get_qt(self.s
+0000ff20: 6573 7369 6f6e 2c20 7469 6d65 6f75 742c  ession, timeout,
+0000ff30: 2070 726f 7869 6573 290d 0a20 2020 2020   proxies)..     
+0000ff40: 2020 2020 2020 2064 6562 7567 5f6c 616e         debug_lan
+0000ff50: 675f 6b77 6172 6773 203d 2073 656c 662e  g_kwargs = self.
+0000ff60: 6465 6275 675f 6c61 6e67 5f6b 7761 7267  debug_lang_kwarg
+0000ff70: 7328 6672 6f6d 5f6c 616e 6775 6167 652c  s(from_language,
+0000ff80: 2074 6f5f 6c61 6e67 7561 6765 2c20 7365   to_language, se
+0000ff90: 6c66 2e64 6566 6175 6c74 5f66 726f 6d5f  lf.default_from_
+0000ffa0: 6c61 6e67 7561 6765 2c20 6966 5f70 7269  language, if_pri
+0000ffb0: 6e74 5f77 6172 6e69 6e67 290d 0a20 2020  nt_warning)..   
+0000ffc0: 2020 2020 2020 2020 2073 656c 662e 6c61           self.la
+0000ffd0: 6e67 7561 6765 5f6d 6170 203d 2073 656c  nguage_map = sel
+0000ffe0: 662e 6765 745f 6c61 6e67 7561 6765 5f6d  f.get_language_m
+0000fff0: 6170 2873 656c 662e 7365 7373 696f 6e2c  ap(self.session,
+00010000: 2073 656c 662e 6765 745f 6c61 6e67 7561   self.get_langua
+00010010: 6765 5f75 726c 2c20 7469 6d65 6f75 742c  ge_url, timeout,
+00010020: 2070 726f 7869 6573 2c20 2a2a 6465 6275   proxies, **debu
+00010030: 675f 6c61 6e67 5f6b 7761 7267 7329 0d0a  g_lang_kwargs)..
+00010040: 0d0a 2020 2020 2020 2020 6672 6f6d 5f6c  ..        from_l
+00010050: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
+00010060: 7561 6765 203d 2073 656c 662e 6368 6563  uage = self.chec
+00010070: 6b5f 6c61 6e67 7561 6765 2866 726f 6d5f  k_language(from_
+00010080: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
+00010090: 6775 6167 652c 2073 656c 662e 6c61 6e67  guage, self.lang
+000100a0: 7561 6765 5f6d 6170 2c20 6f75 7470 7574  uage_map, output
+000100b0: 5f7a 683d 7365 6c66 2e6f 7574 7075 745f  _zh=self.output_
+000100c0: 7a68 290d 0a0d 0a20 2020 2020 2020 2070  zh)....        p
+000100d0: 6179 6c6f 6164 203d 207b 0d0a 2020 2020  ayload = {..    
+000100e0: 2020 2020 2020 2020 2773 6f75 7263 6527          'source'
+000100f0: 3a20 6672 6f6d 5f6c 616e 6775 6167 652c  : from_language,
+00010100: 0d0a 2020 2020 2020 2020 2020 2020 2774  ..            't
+00010110: 6172 6765 7427 3a20 746f 5f6c 616e 6775  arget': to_langu
+00010120: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
+00010130: 2020 2773 6f75 7263 6554 6578 7427 3a20    'sourceText': 
+00010140: 7175 6572 795f 7465 7874 2c0d 0a20 2020  query_text,..   
+00010150: 2020 2020 2020 2020 2027 7174 7627 3a20           'qtv': 
+00010160: 7365 6c66 2e71 7476 5f71 746b 2e67 6574  self.qtv_qtk.get
+00010170: 2827 7174 7627 2c20 2727 292c 0d0a 2020  ('qtv', ''),..  
+00010180: 2020 2020 2020 2020 2020 2771 746b 273a            'qtk':
+00010190: 2073 656c 662e 7174 765f 7174 6b2e 6765   self.qtv_qtk.ge
+000101a0: 7428 2771 746b 272c 2027 2729 2c0d 0a20  t('qtk', ''),.. 
+000101b0: 2020 2020 2020 2020 2020 2027 7469 636b             'tick
+000101c0: 6574 273a 2027 272c 0d0a 2020 2020 2020  et': '',..      
+000101d0: 2020 2020 2020 2772 616e 6473 7472 273a        'randstr':
+000101e0: 2027 272c 0d0a 2020 2020 2020 2020 2020   '',..          
+000101f0: 2020 2773 6573 7369 6f6e 5575 6964 273a    'sessionUuid':
+00010200: 2066 2774 7261 6e73 6c61 7465 5f75 7569   f'translate_uui
+00010210: 647b 7365 6c66 2e67 6574 5f74 696d 6573  d{self.get_times
+00010220: 7461 6d70 2829 7d27 2c0d 0a20 2020 2020  tamp()}',..     
+00010230: 2020 207d 0d0a 2020 2020 2020 2020 7220     }..        r 
+00010240: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e70  = self.session.p
+00010250: 6f73 7428 7365 6c66 2e61 7069 5f75 726c  ost(self.api_url
+00010260: 2c20 6865 6164 6572 733d 7365 6c66 2e61  , headers=self.a
+00010270: 7069 5f68 6561 6465 7273 2c20 6461 7461  pi_headers, data
+00010280: 3d70 6179 6c6f 6164 2c20 7469 6d65 6f75  =payload, timeou
+00010290: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
+000102a0: 6573 3d70 726f 7869 6573 290d 0a20 2020  es=proxies)..   
+000102b0: 2020 2020 2072 2e72 6169 7365 5f66 6f72       r.raise_for
+000102c0: 5f73 7461 7475 7328 290d 0a20 2020 2020  _status()..     
+000102d0: 2020 2064 6174 6120 3d20 722e 6a73 6f6e     data = r.json
+000102e0: 2829 0d0a 2020 2020 2020 2020 7469 6d65  ()..        time
+000102f0: 2e73 6c65 6570 2873 6c65 6570 5f73 6563  .sleep(sleep_sec
+00010300: 6f6e 6473 290d 0a20 2020 2020 2020 2073  onds)..        s
+00010310: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
+00010320: 2b3d 2031 0d0a 2020 2020 2020 2020 7265  += 1..        re
+00010330: 7475 726e 2064 6174 6120 6966 2069 735f  turn data if is_
+00010340: 6465 7461 696c 5f72 6573 756c 7420 656c  detail_result el
+00010350: 7365 2027 272e 6a6f 696e 2869 7465 6d5b  se ''.join(item[
+00010360: 2774 6172 6765 7454 6578 7427 5d20 666f  'targetText'] fo
+00010370: 7220 6974 656d 2069 6e20 6461 7461 5b27  r item in data['
+00010380: 7472 616e 736c 6174 6527 5d5b 2772 6563  translate']['rec
+00010390: 6f72 6473 275d 2920 2023 2061 7574 6f20  ords'])  # auto 
+000103a0: 7768 6974 6573 7061 6365 0d0a 0d0a 0d0a  whitespace......
+000103b0: 636c 6173 7320 5151 5472 616e 536d 6172  class QQTranSmar
+000103c0: 7428 5473 6529 3a0d 0a20 2020 2064 6566  t(Tse):..    def
+000103d0: 205f 5f69 6e69 745f 5f28 7365 6c66 293a   __init__(self):
+000103e0: 0d0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
+000103f0: 292e 5f5f 696e 6974 5f5f 2829 0d0a 2020  ).__init__()..  
+00010400: 2020 2020 2020 7365 6c66 2e62 6567 696e        self.begin
+00010410: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
+00010420: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
+00010430: 662e 686f 7374 5f75 726c 203d 2027 6874  f.host_url = 'ht
+00010440: 7470 733a 2f2f 7472 616e 736d 6172 742e  tps://transmart.
+00010450: 7171 2e63 6f6d 270d 0a20 2020 2020 2020  qq.com'..       
+00010460: 2073 656c 662e 6170 695f 7572 6c20 3d20   self.api_url = 
+00010470: 2768 7474 7073 3a2f 2f74 7261 6e73 6d61  'https://transma
+00010480: 7274 2e71 712e 636f 6d2f 6170 692f 696d  rt.qq.com/api/im
+00010490: 7427 0d0a 2020 2020 2020 2020 7365 6c66  t'..        self
+000104a0: 2e67 6574 5f6c 616e 675f 7572 6c20 3d20  .get_lang_url = 
+000104b0: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
+000104c0: 6c66 2e67 6574 5f6c 616e 675f 7572 6c5f  lf.get_lang_url_
+000104d0: 7061 7474 6572 6e20 3d20 272f 6173 7365  pattern = '/asse
+000104e0: 7473 2f76 656e 646f 722e 282e 2a3f 292e  ts/vendor.(.*?).
+000104f0: 6a73 2720 2023 2065 3463 3638 3331 630d  js'  # e4c6831c.
+00010500: 0a20 2020 2020 2020 2073 656c 662e 686f  .        self.ho
+00010510: 7374 5f68 6561 6465 7273 203d 2073 656c  st_headers = sel
+00010520: 662e 6765 745f 6865 6164 6572 7328 7365  f.get_headers(se
+00010530: 6c66 2e68 6f73 745f 7572 6c2c 2069 665f  lf.host_url, if_
+00010540: 6170 693d 4661 6c73 6529 0d0a 2020 2020  api=False)..    
+00010550: 2020 2020 7365 6c66 2e61 7069 5f68 6561      self.api_hea
+00010560: 6465 7273 203d 2073 656c 662e 6765 745f  ders = self.get_
+00010570: 6865 6164 6572 7328 7365 6c66 2e68 6f73  headers(self.hos
+00010580: 745f 7572 6c2c 2069 665f 6170 693d 5472  t_url, if_api=Tr
+00010590: 7565 2c20 6966 5f6a 736f 6e5f 666f 725f  ue, if_json_for_
+000105a0: 6170 693d 5472 7565 290d 0a20 2020 2020  api=True)..     
+000105b0: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
+000105c0: 5f6d 6170 203d 204e 6f6e 650d 0a20 2020  _map = None..   
+000105d0: 2020 2020 2073 656c 662e 7365 7373 696f       self.sessio
+000105e0: 6e20 3d20 4e6f 6e65 0d0a 2020 2020 2020  n = None..      
+000105f0: 2020 7365 6c66 2e75 7569 6420 3d20 7374    self.uuid = st
+00010600: 7228 7575 6964 2e75 7569 6434 2829 290d  r(uuid.uuid4()).
+00010610: 0a20 2020 2020 2020 2073 656c 662e 7175  .        self.qu
+00010620: 6572 795f 636f 756e 7420 3d20 300d 0a20  ery_count = 0.. 
+00010630: 2020 2020 2020 2073 656c 662e 6f75 7470         self.outp
+00010640: 7574 5f7a 6820 3d20 277a 6827 0d0a 2020  ut_zh = 'zh'..  
+00010650: 2020 2020 2020 7365 6c66 2e69 6e70 7574        self.input
+00010660: 5f6c 696d 6974 203d 2069 6e74 2835 6533  _limit = int(5e3
+00010670: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00010680: 6465 6661 756c 745f 6672 6f6d 5f6c 616e  default_from_lan
+00010690: 6775 6167 6520 3d20 7365 6c66 2e6f 7574  guage = self.out
+000106a0: 7075 745f 7a68 0d0a 0d0a 2020 2020 4054  put_zh....    @T
+000106b0: 7365 2e64 6562 7567 5f6c 616e 6775 6167  se.debug_languag
+000106c0: 655f 6d61 700d 0a20 2020 2064 6566 2067  e_map..    def g
+000106d0: 6574 5f6c 616e 6775 6167 655f 6d61 7028  et_language_map(
+000106e0: 7365 6c66 2c20 6c61 6e67 5f75 726c 3a20  self, lang_url: 
+000106f0: 7374 722c 2073 733a 2053 6573 7369 6f6e  str, ss: Session
+00010700: 5479 7065 2c20 7469 6d65 6f75 743a 204f  Type, timeout: O
+00010710: 7074 696f 6e61 6c5b 666c 6f61 745d 2c20  ptional[float], 
+00010720: 7072 6f78 6965 733a 204f 7074 696f 6e61  proxies: Optiona
+00010730: 6c5b 6469 6374 5d2c 202a 2a6b 7761 7267  l[dict], **kwarg
+00010740: 733a 204c 616e 674d 6170 4b77 6172 6773  s: LangMapKwargs
+00010750: 5479 7065 2920 2d3e 2064 6963 743a 0d0a  Type) -> dict:..
+00010760: 2020 2020 2020 2020 6a73 5f68 746d 6c20          js_html 
+00010770: 3d20 7373 2e67 6574 286c 616e 675f 7572  = ss.get(lang_ur
+00010780: 6c2c 2068 6561 6465 7273 3d73 656c 662e  l, headers=self.
+00010790: 686f 7374 5f68 6561 6465 7273 2c20 7469  host_headers, ti
+000107a0: 6d65 6f75 743d 7469 6d65 6f75 742c 2070  meout=timeout, p
+000107b0: 726f 7869 6573 3d70 726f 7869 6573 292e  roxies=proxies).
+000107c0: 7465 7874 0d0a 2020 2020 2020 2020 6c61  text..        la
+000107d0: 6e67 5f73 7472 5f6c 6973 7420 3d20 7265  ng_str_list = re
+000107e0: 2e63 6f6d 7069 6c65 2827 6c6e 6773 3a5c  .compile('lngs:\
+000107f0: 5c5b 282e 2a3f 295d 2729 2e66 696e 6461  \[(.*?)]').finda
+00010800: 6c6c 286a 735f 6874 6d6c 2920 2023 2027  ll(js_html)  # '
+00010810: 6c6e 6773 3a5c 5c5b 282e 2a3f 295c 5c5d  lngs:\\[(.*?)\\]
+00010820: 270d 0a20 2020 2020 2020 206c 616e 675f  '..        lang_
+00010830: 6c69 7374 203d 205b 6578 6563 6a73 2e65  list = [execjs.e
+00010840: 7661 6c28 6627 5b7b 787d 5d27 2920 666f  val(f'[{x}]') fo
+00010850: 7220 7820 696e 206c 616e 675f 7374 725f  r x in lang_str_
+00010860: 6c69 7374 5d0d 0a20 2020 2020 2020 206c  list]..        l
+00010870: 616e 675f 6c69 7374 203d 2073 6f72 7465  ang_list = sorte
+00010880: 6428 6c69 7374 2873 6574 285b 6c61 6e67  d(list(set([lang
+00010890: 2066 6f72 206c 616e 6773 2069 6e20 6c61   for langs in la
+000108a0: 6e67 5f6c 6973 7420 666f 7220 6c61 6e67  ng_list for lang
+000108b0: 2069 6e20 6c61 6e67 735d 2929 290d 0a20   in langs]))).. 
+000108c0: 2020 2020 2020 2072 6574 7572 6e20 7b7d         return {}
+000108d0: 2e66 726f 6d6b 6579 7328 6c61 6e67 5f6c  .fromkeys(lang_l
+000108e0: 6973 742c 206c 616e 675f 6c69 7374 290d  ist, lang_list).
+000108f0: 0a0d 0a20 2020 2064 6566 2067 6574 5f63  ...    def get_c
+00010900: 6c69 656e 744b 6579 2873 656c 6629 202d  lientKey(self) -
+00010910: 3e20 7374 723a 0d0a 2020 2020 2020 2020  > str:..        
+00010920: 7265 7475 726e 2066 2762 726f 7773 6572  return f'browser
+00010930: 2d66 6972 6566 6f78 2d31 3130 2e30 2e30  -firefox-110.0.0
+00010940: 2d57 696e 646f 7773 2031 302d 7b73 656c  -Windows 10-{sel
+00010950: 662e 7575 6964 7d2d 7b73 656c 662e 6765  f.uuid}-{self.ge
+00010960: 745f 7469 6d65 7374 616d 7028 297d 270d  t_timestamp()}'.
+00010970: 0a0d 0a20 2020 2064 6566 2073 706c 6974  ...    def split
+00010980: 5f73 656e 7465 6e63 6528 7365 6c66 2c20  _sentence(self, 
+00010990: 6461 7461 3a20 6469 6374 2920 2d3e 204c  data: dict) -> L
+000109a0: 6973 745b 7374 725d 3a0d 0a20 2020 2020  ist[str]:..     
+000109b0: 2020 2069 6e64 6578 5f70 6169 725f 6c69     index_pair_li
+000109c0: 7374 203d 205b 5b69 7465 6d5b 2773 7461  st = [[item['sta
+000109d0: 7274 275d 2c20 6974 656d 5b27 7374 6172  rt'], item['star
+000109e0: 7427 5d20 2b20 6974 656d 5b27 6c65 6e27  t'] + item['len'
+000109f0: 5d5d 2066 6f72 2069 7465 6d20 696e 2064  ]] for item in d
+00010a00: 6174 615b 2773 656e 7465 6e63 655f 6c69  ata['sentence_li
+00010a10: 7374 275d 5d0d 0a20 2020 2020 2020 2069  st']]..        i
+00010a20: 6e64 6578 5f6c 6973 7420 3d20 5b69 2066  ndex_list = [i f
+00010a30: 6f72 2069 6920 696e 2069 6e64 6578 5f70  or ii in index_p
+00010a40: 6169 725f 6c69 7374 2066 6f72 2069 2069  air_list for i i
+00010a50: 6e20 6969 5d0d 0a20 2020 2020 2020 2072  n ii]..        r
+00010a60: 6574 7572 6e20 5b64 6174 615b 2774 6578  eturn [data['tex
+00010a70: 7427 5d5b 696e 6465 785f 6c69 7374 5b69  t'][index_list[i
+00010a80: 5d3a 2069 6e64 6578 5f6c 6973 745b 692b  ]: index_list[i+
+00010a90: 315d 5d20 666f 7220 6920 696e 2072 616e  1]] for i in ran
+00010aa0: 6765 286c 656e 2869 6e64 6578 5f6c 6973  ge(len(index_lis
+00010ab0: 7429 202d 2031 295d 0d0a 0d0a 2020 2020  t) - 1)]....    
+00010ac0: 4054 7365 2e74 696d 655f 7374 6174 0d0a  @Tse.time_stat..
+00010ad0: 2020 2020 4054 7365 2e63 6865 636b 5f71      @Tse.check_q
+00010ae0: 7565 7279 0d0a 2020 2020 6465 6620 7171  uery..    def qq
+00010af0: 5472 616e 536d 6172 745f 6170 6928 7365  TranSmart_api(se
+00010b00: 6c66 2c20 7175 6572 795f 7465 7874 3a20  lf, query_text: 
+00010b10: 7374 722c 2066 726f 6d5f 6c61 6e67 7561  str, from_langua
+00010b20: 6765 3a20 7374 7220 3d20 2761 7574 6f27  ge: str = 'auto'
+00010b30: 2c20 746f 5f6c 616e 6775 6167 653a 2073  , to_language: s
+00010b40: 7472 203d 2027 656e 272c 202a 2a6b 7761  tr = 'en', **kwa
+00010b50: 7267 733a 2041 7069 4b77 6172 6773 5479  rgs: ApiKwargsTy
+00010b60: 7065 2920 2d3e 2055 6e69 6f6e 5b73 7472  pe) -> Union[str
+00010b70: 2c20 6469 6374 5d3a 0d0a 2020 2020 2020  , dict]:..      
+00010b80: 2020 2222 220d 0a20 2020 2020 2020 2068    """..        h
+00010b90: 7474 7073 3a2f 2f74 7261 6e73 6d61 7274  ttps://transmart
+00010ba0: 2e71 712e 636f 6d0d 0a20 2020 2020 2020  .qq.com..       
+00010bb0: 203a 7061 7261 6d20 7175 6572 795f 7465   :param query_te
+00010bc0: 7874 3a20 7374 722c 206d 7573 742e 0d0a  xt: str, must...
+00010bd0: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
+00010be0: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
+00010bf0: 722c 2064 6566 6175 6c74 2027 6175 746f  r, default 'auto
+00010c00: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
+00010c10: 616d 2074 6f5f 6c61 6e67 7561 6765 3a20  am to_language: 
+00010c20: 7374 722c 2064 6566 6175 6c74 2027 656e  str, default 'en
+00010c30: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
+00010c40: 616d 202a 2a6b 7761 7267 733a 0d0a 2020  am **kwargs:..  
+00010c50: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+00010c60: 6172 616d 2074 696d 656f 7574 3a20 666c  aram timeout: fl
+00010c70: 6f61 742c 2064 6566 6175 6c74 204e 6f6e  oat, default Non
+00010c80: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+00010c90: 2020 2020 3a70 6172 616d 2070 726f 7869      :param proxi
+00010ca0: 6573 3a20 6469 6374 2c20 6465 6661 756c  es: dict, defaul
+00010cb0: 7420 4e6f 6e65 2e0d 0a20 2020 2020 2020  t None...       
+00010cc0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+00010cd0: 736c 6565 705f 7365 636f 6e64 733a 2066  sleep_seconds: f
+00010ce0: 6c6f 6174 2c20 6465 6661 756c 7420 302e  loat, default 0.
+00010cf0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00010d00: 2020 3a70 6172 616d 2069 735f 6465 7461    :param is_deta
+00010d10: 696c 5f72 6573 756c 743a 2062 6f6f 6c2c  il_result: bool,
+00010d20: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
+00010d30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010d40: 203a 7061 7261 6d20 6966 5f69 676e 6f72   :param if_ignor
+00010d50: 655f 6c69 6d69 745f 6f66 5f6c 656e 6774  e_limit_of_lengt
+00010d60: 683a 2062 6f6f 6c2c 2064 6566 6175 6c74  h: bool, default
+00010d70: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
+00010d80: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+00010d90: 6c69 6d69 745f 6f66 5f6c 656e 6774 683a  limit_of_length:
+00010da0: 2069 6e74 2c20 6465 6661 756c 7420 3230   int, default 20
+00010db0: 3030 302e 0d0a 2020 2020 2020 2020 2020  000...          
+00010dc0: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
+00010dd0: 6967 6e6f 7265 5f65 6d70 7479 5f71 7565  ignore_empty_que
+00010de0: 7279 3a20 626f 6f6c 2c20 6465 6661 756c  ry: bool, defaul
+00010df0: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+00010e00: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00010e10: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
+00010e20: 6166 7465 725f 6672 6571 3a20 696e 742c  after_freq: int,
+00010e30: 2064 6566 6175 6c74 2031 3030 302e 0d0a   default 1000...
+00010e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010e50: 3a70 6172 616d 2075 7064 6174 655f 7365  :param update_se
+00010e60: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
+00010e70: 6e64 733a 2066 6c6f 6174 2c20 6465 6661  nds: float, defa
+00010e80: 756c 7420 3135 3030 2e0d 0a20 2020 2020  ult 1500...     
+00010e90: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00010ea0: 6d20 6966 5f73 686f 775f 7469 6d65 5f73  m if_show_time_s
+00010eb0: 7461 743a 2062 6f6f 6c2c 2064 6566 6175  tat: bool, defau
+00010ec0: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+00010ed0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00010ee0: 6d20 7368 6f77 5f74 696d 655f 7374 6174  m show_time_stat
+00010ef0: 5f70 7265 6369 7369 6f6e 3a20 696e 742c  _precision: int,
+00010f00: 2064 6566 6175 6c74 2032 2e0d 0a20 2020   default 2...   
+00010f10: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00010f20: 7261 6d20 6966 5f70 7269 6e74 5f77 6172  ram if_print_war
+00010f30: 6e69 6e67 3a20 626f 6f6c 2c20 6465 6661  ning: bool, defa
+00010f40: 756c 7420 5472 7565 2e0d 0a20 2020 2020  ult True...     
+00010f50: 2020 203a 7265 7475 726e 3a20 7374 7220     :return: str 
+00010f60: 6f72 2064 6963 740d 0a20 2020 2020 2020  or dict..       
+00010f70: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
+00010f80: 7469 6d65 6f75 7420 3d20 6b77 6172 6773  timeout = kwargs
+00010f90: 2e67 6574 2827 7469 6d65 6f75 7427 2c20  .get('timeout', 
+00010fa0: 4e6f 6e65 290d 0a20 2020 2020 2020 2070  None)..        p
+00010fb0: 726f 7869 6573 203d 206b 7761 7267 732e  roxies = kwargs.
+00010fc0: 6765 7428 2770 726f 7869 6573 272c 204e  get('proxies', N
+00010fd0: 6f6e 6529 0d0a 2020 2020 2020 2020 736c  one)..        sl
+00010fe0: 6565 705f 7365 636f 6e64 7320 3d20 6b77  eep_seconds = kw
+00010ff0: 6172 6773 2e67 6574 2827 736c 6565 705f  args.get('sleep_
+00011000: 7365 636f 6e64 7327 2c20 3029 0d0a 2020  seconds', 0)..  
+00011010: 2020 2020 2020 6966 5f70 7269 6e74 5f77        if_print_w
+00011020: 6172 6e69 6e67 203d 206b 7761 7267 732e  arning = kwargs.
+00011030: 6765 7428 2769 665f 7072 696e 745f 7761  get('if_print_wa
+00011040: 726e 696e 6727 2c20 5472 7565 290d 0a20  rning', True).. 
+00011050: 2020 2020 2020 2069 735f 6465 7461 696c         is_detail
+00011060: 5f72 6573 756c 7420 3d20 6b77 6172 6773  _result = kwargs
+00011070: 2e67 6574 2827 6973 5f64 6574 6169 6c5f  .get('is_detail_
+00011080: 7265 7375 6c74 272c 2046 616c 7365 290d  result', False).
+00011090: 0a20 2020 2020 2020 2075 7064 6174 655f  .        update_
+000110a0: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
+000110b0: 6571 203d 206b 7761 7267 732e 6765 7428  eq = kwargs.get(
+000110c0: 2775 7064 6174 655f 7365 7373 696f 6e5f  'update_session_
+000110d0: 6166 7465 725f 6672 6571 272c 2073 656c  after_freq', sel
+000110e0: 662e 6465 6661 756c 745f 7365 7373 696f  f.default_sessio
+000110f0: 6e5f 6672 6571 290d 0a20 2020 2020 2020  n_freq)..       
+00011100: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
+00011110: 6166 7465 725f 7365 636f 6e64 7320 3d20  after_seconds = 
+00011120: 6b77 6172 6773 2e67 6574 2827 7570 6461  kwargs.get('upda
+00011130: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+00011140: 5f73 6563 6f6e 6473 272c 2073 656c 662e  _seconds', self.
+00011150: 6465 6661 756c 745f 7365 7373 696f 6e5f  default_session_
+00011160: 7365 636f 6e64 7329 0d0a 2020 2020 2020  seconds)..      
+00011170: 2020 7365 6c66 2e63 6865 636b 5f69 6e70    self.check_inp
+00011180: 7574 5f6c 696d 6974 2871 7565 7279 5f74  ut_limit(query_t
+00011190: 6578 742c 2073 656c 662e 696e 7075 745f  ext, self.input_
+000111a0: 6c69 6d69 7429 0d0a 0d0a 2020 2020 2020  limit)....      
+000111b0: 2020 6e6f 745f 7570 6461 7465 5f63 6f6e    not_update_con
+000111c0: 645f 6672 6571 203d 2031 2069 6620 7365  d_freq = 1 if se
+000111d0: 6c66 2e71 7565 7279 5f63 6f75 6e74 2025  lf.query_count %
+000111e0: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
+000111f0: 6166 7465 725f 6672 6571 2021 3d20 3020  after_freq != 0 
+00011200: 656c 7365 2030 0d0a 2020 2020 2020 2020  else 0..        
+00011210: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
+00011220: 7469 6d65 203d 2031 2069 6620 7469 6d65  time = 1 if time
+00011230: 2e74 696d 6528 2920 2d20 7365 6c66 2e62  .time() - self.b
+00011240: 6567 696e 5f74 696d 6520 3c20 7570 6461  egin_time < upda
+00011250: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+00011260: 5f73 6563 6f6e 6473 2065 6c73 6520 300d  _seconds else 0.
+00011270: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00011280: 2873 656c 662e 7365 7373 696f 6e20 616e  (self.session an
+00011290: 6420 7365 6c66 2e6c 616e 6775 6167 655f  d self.language_
+000112a0: 6d61 7020 616e 6420 6e6f 745f 7570 6461  map and not_upda
+000112b0: 7465 5f63 6f6e 645f 6672 6571 2061 6e64  te_cond_freq and
+000112c0: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
+000112d0: 5f74 696d 6529 3a0d 0a20 2020 2020 2020  _time):..       
+000112e0: 2020 2020 2073 656c 662e 6265 6769 6e5f       self.begin_
+000112f0: 7469 6d65 203d 2074 696d 652e 7469 6d65  time = time.time
+00011300: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+00011310: 7365 6c66 2e73 6573 7369 6f6e 203d 2072  self.session = r
+00011320: 6571 7565 7374 732e 5365 7373 696f 6e28  equests.Session(
+00011330: 290d 0a20 2020 2020 2020 2020 2020 2068  )..            h
+00011340: 6f73 745f 6874 6d6c 203d 2073 656c 662e  ost_html = self.
+00011350: 7365 7373 696f 6e2e 6765 7428 7365 6c66  session.get(self
+00011360: 2e68 6f73 745f 7572 6c2c 2068 6561 6465  .host_url, heade
+00011370: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
+00011380: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+00011390: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+000113a0: 726f 7869 6573 292e 7465 7874 0d0a 0d0a  roxies).text....
+000113b0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+000113c0: 6f74 2073 656c 662e 6765 745f 6c61 6e67  ot self.get_lang
+000113d0: 5f75 726c 3a0d 0a20 2020 2020 2020 2020  _url:..         
+000113e0: 2020 2020 2020 2073 656c 662e 6765 745f         self.get_
+000113f0: 6c61 6e67 5f75 726c 203d 2066 277b 7365  lang_url = f'{se
+00011400: 6c66 2e68 6f73 745f 7572 6c7d 7b72 652e  lf.host_url}{re.
+00011410: 636f 6d70 696c 6528 7365 6c66 2e67 6574  compile(self.get
+00011420: 5f6c 616e 675f 7572 6c5f 7061 7474 6572  _lang_url_patter
+00011430: 6e29 2e73 6561 7263 6828 686f 7374 5f68  n).search(host_h
+00011440: 746d 6c29 2e67 726f 7570 2829 7d27 0d0a  tml).group()}'..
+00011450: 2020 2020 2020 2020 2020 2020 6465 6275              debu
+00011460: 675f 6c61 6e67 5f6b 7761 7267 7320 3d20  g_lang_kwargs = 
+00011470: 7365 6c66 2e64 6562 7567 5f6c 616e 675f  self.debug_lang_
+00011480: 6b77 6172 6773 2866 726f 6d5f 6c61 6e67  kwargs(from_lang
+00011490: 7561 6765 2c20 746f 5f6c 616e 6775 6167  uage, to_languag
+000114a0: 652c 2073 656c 662e 6465 6661 756c 745f  e, self.default_
+000114b0: 6672 6f6d 5f6c 616e 6775 6167 652c 2069  from_language, i
+000114c0: 665f 7072 696e 745f 7761 726e 696e 6729  f_print_warning)
+000114d0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+000114e0: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
+000114f0: 3d20 7365 6c66 2e67 6574 5f6c 616e 6775  = self.get_langu
+00011500: 6167 655f 6d61 7028 7365 6c66 2e67 6574  age_map(self.get
+00011510: 5f6c 616e 675f 7572 6c2c 2073 656c 662e  _lang_url, self.
+00011520: 7365 7373 696f 6e2c 2074 696d 656f 7574  session, timeout
+00011530: 2c20 7072 6f78 6965 732c 202a 2a64 6562  , proxies, **deb
+00011540: 7567 5f6c 616e 675f 6b77 6172 6773 290d  ug_lang_kwargs).
+00011550: 0a0d 0a20 2020 2020 2020 2069 6620 6672  ...        if fr
+00011560: 6f6d 5f6c 616e 6775 6167 6520 3d3d 2027  om_language == '
+00011570: 6175 746f 273a 0d0a 2020 2020 2020 2020  auto':..        
+00011580: 2020 2020 6672 6f6d 5f6c 616e 6775 6167      from_languag
+00011590: 6520 3d20 7365 6c66 2e77 6172 6e69 6e67  e = self.warning
+000115a0: 5f61 7574 6f5f 6c61 6e67 2827 7171 5472  _auto_lang('qqTr
+000115b0: 616e 536d 6172 7427 2c20 7365 6c66 2e64  anSmart', self.d
+000115c0: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
+000115d0: 7561 6765 2c20 6966 5f70 7269 6e74 5f77  uage, if_print_w
+000115e0: 6172 6e69 6e67 290d 0a20 2020 2020 2020  arning)..       
+000115f0: 2066 726f 6d5f 6c61 6e67 7561 6765 2c20   from_language, 
+00011600: 746f 5f6c 616e 6775 6167 6520 3d20 7365  to_language = se
+00011610: 6c66 2e63 6865 636b 5f6c 616e 6775 6167  lf.check_languag
+00011620: 6528 6672 6f6d 5f6c 616e 6775 6167 652c  e(from_language,
+00011630: 2074 6f5f 6c61 6e67 7561 6765 2c20 7365   to_language, se
+00011640: 6c66 2e6c 616e 6775 6167 655f 6d61 702c  lf.language_map,
+00011650: 206f 7574 7075 745f 7a68 3d73 656c 662e   output_zh=self.
+00011660: 6f75 7470 7574 5f7a 6829 0d0a 0d0a 2020  output_zh)....  
+00011670: 2020 2020 2020 636c 6965 6e74 5f6b 6579        client_key
+00011680: 203d 2073 656c 662e 6765 745f 636c 6965   = self.get_clie
+00011690: 6e74 4b65 7928 290d 0a20 2020 2020 2020  ntKey()..       
+000116a0: 2073 656c 662e 6170 695f 6865 6164 6572   self.api_header
+000116b0: 732e 7570 6461 7465 287b 2743 6f6f 6b69  s.update({'Cooki
+000116c0: 6527 3a20 6627 636c 6965 6e74 5f6b 6579  e': f'client_key
+000116d0: 3d7b 636c 6965 6e74 5f6b 6579 7d27 7d29  ={client_key}'})
+000116e0: 0d0a 0d0a 2020 2020 2020 2020 7370 6c69  ....        spli
+000116f0: 745f 7061 796c 6f61 6420 3d20 7b0d 0a20  t_payload = {.. 
+00011700: 2020 2020 2020 2020 2020 2027 6865 6164             'head
+00011710: 6572 273a 207b 0d0a 2020 2020 2020 2020  er': {..        
+00011720: 2020 2020 2020 2020 2766 6e27 3a20 2774          'fn': 't
+00011730: 6578 745f 616e 616c 7973 6973 272c 0d0a  ext_analysis',..
+00011740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011750: 2763 6c69 656e 745f 6b65 7927 3a20 636c  'client_key': cl
+00011760: 6965 6e74 5f6b 6579 2c0d 0a20 2020 2020  ient_key,..     
+00011770: 2020 2020 2020 207d 2c0d 0a20 2020 2020         },..     
+00011780: 2020 2020 2020 2027 7479 7065 273a 2027         'type': '
+00011790: 706c 6169 6e27 2c0d 0a20 2020 2020 2020  plain',..       
+000117a0: 2020 2020 2027 7465 7874 273a 2071 7565       'text': que
+000117b0: 7279 5f74 6578 742c 0d0a 2020 2020 2020  ry_text,..      
+000117c0: 2020 2020 2020 276e 6f72 6d61 6c69 7a65        'normalize
+000117d0: 273a 207b 276d 6572 6765 5f62 726f 6b65  ': {'merge_broke
+000117e0: 6e5f 6c69 6e65 273a 2027 6661 6c73 6527  n_line': 'false'
+000117f0: 7d0d 0a20 2020 2020 2020 207d 0d0a 2020  }..        }..  
+00011800: 2020 2020 2020 7370 6c69 745f 6461 7461        split_data
+00011810: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
+00011820: 706f 7374 2873 656c 662e 6170 695f 7572  post(self.api_ur
+00011830: 6c2c 206a 736f 6e3d 7370 6c69 745f 7061  l, json=split_pa
+00011840: 796c 6f61 642c 2068 6561 6465 7273 3d73  yload, headers=s
+00011850: 656c 662e 6170 695f 6865 6164 6572 732c  elf.api_headers,
+00011860: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
+00011870: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
+00011880: 7329 2e6a 736f 6e28 290d 0a20 2020 2020  s).json()..     
+00011890: 2020 2074 6578 745f 6c69 7374 203d 2073     text_list = s
+000118a0: 656c 662e 7370 6c69 745f 7365 6e74 656e  elf.split_senten
+000118b0: 6365 2873 706c 6974 5f64 6174 6129 0d0a  ce(split_data)..
+000118c0: 0d0a 2020 2020 2020 2020 6170 695f 7061  ..        api_pa
+000118d0: 796c 6f61 6420 3d20 7b0d 0a20 2020 2020  yload = {..     
+000118e0: 2020 2020 2020 2027 6865 6164 6572 273a         'header':
+000118f0: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
+00011900: 2020 2020 2766 6e27 3a20 2761 7574 6f5f      'fn': 'auto_
+00011910: 7472 616e 736c 6174 696f 6e27 2c0d 0a20  translation',.. 
+00011920: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+00011930: 636c 6965 6e74 5f6b 6579 273a 2063 6c69  client_key': cli
+00011940: 656e 745f 6b65 792c 0d0a 2020 2020 2020  ent_key,..      
+00011950: 2020 2020 2020 7d2c 0d0a 2020 2020 2020        },..      
+00011960: 2020 2020 2020 2774 7970 6527 3a20 2770        'type': 'p
+00011970: 6c61 696e 272c 0d0a 2020 2020 2020 2020  lain',..        
+00011980: 2020 2020 276d 6f64 656c 5f63 6174 6567      'model_categ
+00011990: 6f72 7927 3a20 276e 6f72 6d61 6c27 2c0d  ory': 'normal',.
+000119a0: 0a20 2020 2020 2020 2020 2020 2027 736f  .            'so
+000119b0: 7572 6365 273a 207b 0d0a 2020 2020 2020  urce': {..      
+000119c0: 2020 2020 2020 2020 2020 276c 616e 6727            'lang'
+000119d0: 3a20 6672 6f6d 5f6c 616e 6775 6167 652c  : from_language,
+000119e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000119f0: 2020 2774 6578 745f 6c69 7374 273a 205b    'text_list': [
+00011a00: 2727 5d20 2b20 7465 7874 5f6c 6973 7420  ''] + text_list 
+00011a10: 2b20 5b27 275d 2c0d 0a20 2020 2020 2020  + [''],..       
+00011a20: 2020 2020 207d 2c0d 0a20 2020 2020 2020       },..       
+00011a30: 2020 2020 2027 7461 7267 6574 273a 207b       'target': {
+00011a40: 276c 616e 6727 3a20 746f 5f6c 616e 6775  'lang': to_langu
+00011a50: 6167 657d 0d0a 2020 2020 2020 2020 7d0d  age}..        }.
+00011a60: 0a20 2020 2020 2020 2072 203d 2073 656c  .        r = sel
+00011a70: 662e 7365 7373 696f 6e2e 706f 7374 2873  f.session.post(s
+00011a80: 656c 662e 6170 695f 7572 6c2c 206a 736f  elf.api_url, jso
+00011a90: 6e3d 6170 695f 7061 796c 6f61 642c 2068  n=api_payload, h
+00011aa0: 6561 6465 7273 3d73 656c 662e 6170 695f  eaders=self.api_
+00011ab0: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
+00011ac0: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
+00011ad0: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
+00011ae0: 2020 2020 722e 7261 6973 655f 666f 725f      r.raise_for_
+00011af0: 7374 6174 7573 2829 0d0a 2020 2020 2020  status()..      
+00011b00: 2020 6461 7461 203d 2072 2e6a 736f 6e28    data = r.json(
+00011b10: 290d 0a20 2020 2020 2020 2074 696d 652e  )..        time.
+00011b20: 736c 6565 7028 736c 6565 705f 7365 636f  sleep(sleep_seco
+00011b30: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
+00011b40: 6c66 2e71 7565 7279 5f63 6f75 6e74 202b  lf.query_count +
+00011b50: 3d20 310d 0a20 2020 2020 2020 2072 6574  = 1..        ret
+00011b60: 7572 6e20 6461 7461 2069 6620 6973 5f64  urn data if is_d
+00011b70: 6574 6169 6c5f 7265 7375 6c74 2065 6c73  etail_result els
+00011b80: 6520 2727 2e6a 6f69 6e28 6461 7461 5b27  e ''.join(data['
+00011b90: 6175 746f 5f74 7261 6e73 6c61 7469 6f6e  auto_translation
+00011ba0: 275d 290d 0a0d 0a0d 0a63 6c61 7373 2041  '])......class A
+00011bb0: 6c69 6261 6261 5631 2854 7365 293a 0d0a  libabaV1(Tse):..
+00011bc0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00011bd0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+00011be0: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
+00011bf0: 5f28 290d 0a20 2020 2020 2020 2073 656c  _()..        sel
+00011c00: 662e 6265 6769 6e5f 7469 6d65 203d 2074  f.begin_time = t
+00011c10: 696d 652e 7469 6d65 2829 0d0a 2020 2020  ime.time()..    
+00011c20: 2020 2020 7365 6c66 2e68 6f73 745f 7572      self.host_ur
+00011c30: 6c20 3d20 2768 7474 7073 3a2f 2f74 7261  l = 'https://tra
+00011c40: 6e73 6c61 7465 2e61 6c69 6261 6261 2e63  nslate.alibaba.c
+00011c50: 6f6d 270d 0a20 2020 2020 2020 2073 656c  om'..        sel
+00011c60: 662e 6170 695f 7572 6c20 3d20 2768 7474  f.api_url = 'htt
+00011c70: 7073 3a2f 2f74 7261 6e73 6c61 7465 2e61  ps://translate.a
+00011c80: 6c69 6261 6261 2e63 6f6d 2f74 7261 6e73  libaba.com/trans
+00011c90: 6c61 7469 6f6e 6f70 656e 7365 7669 6365  lationopensevice
+00011ca0: 6170 702f 7472 616e 732f 5472 616e 736c  app/trans/Transl
+00011cb0: 6174 6554 6578 7441 6464 416c 6967 6e6d  ateTextAddAlignm
+00011cc0: 656e 742e 646f 270d 0a20 2020 2020 2020  ent.do'..       
+00011cd0: 2073 656c 662e 6765 745f 6c61 6e67 7561   self.get_langua
+00011ce0: 6765 5f75 726c 203d 2027 6874 7470 733a  ge_url = 'https:
+00011cf0: 2f2f 7472 616e 736c 6174 652e 616c 6962  //translate.alib
+00011d00: 6162 612e 636f 6d2f 7472 616e 736c 6174  aba.com/translat
+00011d10: 696f 6e6f 7065 6e73 6576 6963 6561 7070  ionopenseviceapp
+00011d20: 2f74 7261 6e73 2f61 6371 7569 7265 5f73  /trans/acquire_s
+00011d30: 7570 706f 7274 4c61 6e67 7561 6765 2e64  upportLanguage.d
+00011d40: 6f27 0d0a 2020 2020 2020 2020 7365 6c66  o'..        self
+00011d50: 2e68 6f73 745f 6865 6164 6572 7320 3d20  .host_headers = 
+00011d60: 7365 6c66 2e67 6574 5f68 6561 6465 7273  self.get_headers
+00011d70: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
+00011d80: 6966 5f61 7069 3d46 616c 7365 290d 0a20  if_api=False).. 
+00011d90: 2020 2020 2020 2073 656c 662e 6170 695f         self.api_
+00011da0: 6865 6164 6572 7320 3d20 7365 6c66 2e67  headers = self.g
+00011db0: 6574 5f68 6561 6465 7273 2873 656c 662e  et_headers(self.
+00011dc0: 686f 7374 5f75 726c 2c20 6966 5f61 7069  host_url, if_api
+00011dd0: 3d54 7275 6529 0d0a 2020 2020 2020 2020  =True)..        
+00011de0: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
+00011df0: 7020 3d20 4e6f 6e65 0d0a 2020 2020 2020  p = None..      
+00011e00: 2020 7365 6c66 2e70 726f 6665 7373 696f    self.professio
+00011e10: 6e61 6c5f 6669 656c 6420 3d20 2822 6765  nal_field = ("ge
+00011e20: 6e65 7261 6c22 2c20 226d 6573 7361 6765  neral", "message
+00011e30: 222c 2022 6f66 6665 7222 290d 0a20 2020  ", "offer")..   
+00011e40: 2020 2020 2073 656c 662e 646d 7472 6163       self.dmtrac
+00011e50: 6b5f 7061 6765 6964 203d 204e 6f6e 650d  k_pageid = None.
+00011e60: 0a20 2020 2020 2020 2073 656c 662e 7365  .        self.se
+00011e70: 7373 696f 6e20 3d20 4e6f 6e65 0d0a 2020  ssion = None..  
+00011e80: 2020 2020 2020 7365 6c66 2e71 7565 7279        self.query
+00011e90: 5f63 6f75 6e74 203d 2030 0d0a 2020 2020  _count = 0..    
+00011ea0: 2020 2020 7365 6c66 2e6f 7574 7075 745f      self.output_
+00011eb0: 7a68 203d 2027 7a68 270d 0a20 2020 2020  zh = 'zh'..     
+00011ec0: 2020 2073 656c 662e 696e 7075 745f 6c69     self.input_li
+00011ed0: 6d69 7420 3d20 696e 7428 3565 3329 0d0a  mit = int(5e3)..
+00011ee0: 2020 2020 2020 2020 7365 6c66 2e64 6566          self.def
+00011ef0: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
+00011f00: 6765 203d 2073 656c 662e 6f75 7470 7574  ge = self.output
+00011f10: 5f7a 680d 0a0d 0a20 2020 2064 6566 2067  _zh....    def g
+00011f20: 6574 5f64 6d74 7261 636b 5f70 6167 6569  et_dmtrack_pagei
+00011f30: 6428 7365 6c66 2c20 686f 7374 5f72 6573  d(self, host_res
+00011f40: 706f 6e73 653a 2052 6573 706f 6e73 6554  ponse: ResponseT
+00011f50: 7970 6529 202d 3e20 7374 723a 0d0a 2020  ype) -> str:..  
+00011f60: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+00011f70: 2020 2020 2020 2020 6520 3d20 7265 2e63          e = re.c
+00011f80: 6f6d 7069 6c65 2822 646d 7472 6163 6b5f  ompile("dmtrack_
+00011f90: 7061 6765 6964 3d27 285c 5c77 2b29 273b  pageid='(\\w+)';
+00011fa0: 2229 2e66 696e 6461 6c6c 2868 6f73 745f  ").findall(host_
+00011fb0: 7265 7370 6f6e 7365 2e74 6578 7429 5b30  response.text)[0
+00011fc0: 5d0d 0a20 2020 2020 2020 2065 7863 6570  ]..        excep
+00011fd0: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+00011fe0: 6520 3d20 2727 0d0a 2020 2020 2020 2020  e = ''..        
+00011ff0: 6966 206e 6f74 2065 3a0d 0a20 2020 2020  if not e:..     
+00012000: 2020 2020 2020 2065 203d 2068 6f73 745f         e = host_
+00012010: 7265 7370 6f6e 7365 2e63 6f6f 6b69 6573  response.cookies
+00012020: 2e67 6574 5f64 6963 7428 292e 6765 7428  .get_dict().get(
+00012030: 2263 6e61 222c 2022 3030 3122 290d 0a20  "cna", "001").. 
+00012040: 2020 2020 2020 2020 2020 2065 203d 2072             e = r
+00012050: 652e 636f 6d70 696c 6528 275b 5e61 2d7a  e.compile('[^a-z
+00012060: 5c5c 645d 2729 2e73 7562 2872 6570 6c3d  \\d]').sub(repl=
+00012070: 2727 2c20 7374 7269 6e67 3d65 2e6c 6f77  '', string=e.low
+00012080: 6572 2829 295b 3a31 365d 0d0a 2020 2020  er())[:16]..    
+00012090: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+000120a0: 2020 2020 2020 206e 2c20 7220 3d20 655b         n, r = e[
+000120b0: 303a 3136 5d2c 2065 5b31 363a 3236 5d0d  0:16], e[16:26].
+000120c0: 0a20 2020 2020 2020 2020 2020 2069 203d  .            i =
+000120d0: 2068 6578 2869 6e74 2872 2c20 3130 2929   hex(int(r, 10))
+000120e0: 5b32 3a5d 2069 6620 7265 2e63 6f6d 7069  [2:] if re.compi
+000120f0: 6c65 2827 5e5b 5c5c 2d2b 5d3f 5b30 2d39  le('^[\\-+]?[0-9
+00012100: 5d2b 2427 292e 6d61 7463 6828 7229 2065  ]+$').match(r) e
+00012110: 6c73 6520 720d 0a20 2020 2020 2020 2020  lse r..         
+00012120: 2020 2065 203d 206e 202b 2069 0d0a 0d0a     e = n + i....
+00012130: 2020 2020 2020 2020 7320 3d20 7365 6c66          s = self
+00012140: 2e67 6574 5f74 696d 6573 7461 6d70 2829  .get_timestamp()
+00012150: 0d0a 2020 2020 2020 2020 6f20 3d20 2727  ..        o = ''
+00012160: 2e6a 6f69 6e28 5b65 2c20 6865 7828 7329  .join([e, hex(s)
+00012170: 5b32 3a5d 5d29 0d0a 2020 2020 2020 2020  [2:]])..        
+00012180: 666f 7220 5f20 696e 2072 616e 6765 2831  for _ in range(1
+00012190: 2c20 3130 293a 0d0a 2020 2020 2020 2020  , 10):..        
+000121a0: 2020 2020 6120 3d20 6865 7828 696e 7428      a = hex(int(
+000121b0: 7261 6e64 6f6d 2e72 616e 646f 6d28 2920  random.random() 
+000121c0: 2a20 3165 3130 2929 5b32 3a5d 2020 2320  * 1e10))[2:]  # 
+000121d0: 696e 742d 3e73 7472 3a20 3136 2c20 2730  int->str: 16, '0
+000121e0: 7827 0d0a 2020 2020 2020 2020 2020 2020  x'..            
+000121f0: 6f20 2b3d 2061 0d0a 2020 2020 2020 2020  o += a..        
+00012200: 7265 7475 726e 206f 5b3a 3432 5d0d 0a0d  return o[:42]...
+00012210: 0a20 2020 2040 5473 652e 6465 6275 675f  .    @Tse.debug_
+00012220: 6c61 6e67 7561 6765 5f6d 6170 0d0a 2020  language_map..  
+00012230: 2020 6465 6620 6765 745f 6c61 6e67 7561    def get_langua
+00012240: 6765 5f6d 6170 2873 656c 662c 2073 733a  ge_map(self, ss:
+00012250: 2053 6573 7369 6f6e 5479 7065 2c20 6c61   SessionType, la
+00012260: 6e67 5f75 726c 3a20 7374 722c 2075 7365  ng_url: str, use
+00012270: 5f64 6f6d 6169 6e3a 2073 7472 2c20 646d  _domain: str, dm
+00012280: 7472 6163 6b5f 7061 6765 6964 3a20 7374  track_pageid: st
+00012290: 722c 2074 696d 656f 7574 3a20 4f70 7469  r, timeout: Opti
+000122a0: 6f6e 616c 5b66 6c6f 6174 5d2c 2070 726f  onal[float], pro
+000122b0: 7869 6573 3a20 4f70 7469 6f6e 616c 5b64  xies: Optional[d
+000122c0: 6963 745d 2c20 2a2a 6b77 6172 6773 3a20  ict], **kwargs: 
+000122d0: 4c61 6e67 4d61 704b 7761 7267 7354 7970  LangMapKwargsTyp
+000122e0: 6529 202d 3e20 6469 6374 3a0d 0a20 2020  e) -> dict:..   
+000122f0: 2020 2020 2070 6172 616d 7320 3d20 7b27       params = {'
+00012300: 646d 7472 6163 6b5f 7061 6765 6964 273a  dmtrack_pageid':
+00012310: 2064 6d74 7261 636b 5f70 6167 6569 642c   dmtrack_pageid,
+00012320: 2027 6269 7a5f 7479 7065 273a 2075 7365   'biz_type': use
+00012330: 5f64 6f6d 6169 6e7d 0d0a 2020 2020 2020  _domain}..      
+00012340: 2020 6c61 6e67 7561 6765 5f64 6963 7420    language_dict 
+00012350: 3d20 7373 2e67 6574 286c 616e 675f 7572  = ss.get(lang_ur
+00012360: 6c2c 2070 6172 616d 733d 7061 7261 6d73  l, params=params
+00012370: 2c20 6865 6164 6572 733d 7365 6c66 2e68  , headers=self.h
+00012380: 6f73 745f 6865 6164 6572 732c 2074 696d  ost_headers, tim
+00012390: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
+000123a0: 6f78 6965 733d 7072 6f78 6965 7329 2e6a  oxies=proxies).j
+000123b0: 736f 6e28 290d 0a20 2020 2020 2020 2072  son()..        r
+000123c0: 6574 7572 6e20 6469 6374 286d 6170 286c  eturn dict(map(l
+000123d0: 616d 6264 6120 783a 2078 2c20 5b28 785b  ambda x: x, [(x[
+000123e0: 2773 6f75 7263 654c 7561 6e67 6527 5d2c  'sourceLuange'],
+000123f0: 2078 5b27 7461 7267 6574 4c61 6e67 7561   x['targetLangua
+00012400: 6765 7327 5d29 2066 6f72 2078 2069 6e20  ges']) for x in 
+00012410: 6c61 6e67 7561 6765 5f64 6963 745b 276c  language_dict['l
+00012420: 616e 6775 6167 654d 6170 275d 5d29 290d  anguageMap']])).
+00012430: 0a0d 0a20 2020 2040 5473 652e 7469 6d65  ...    @Tse.time
+00012440: 5f73 7461 740d 0a20 2020 2040 5473 652e  _stat..    @Tse.
+00012450: 6368 6563 6b5f 7175 6572 790d 0a20 2020  check_query..   
+00012460: 2064 6566 2061 6c69 6261 6261 5f61 7069   def alibaba_api
+00012470: 2873 656c 662c 2071 7565 7279 5f74 6578  (self, query_tex
+00012480: 743a 2073 7472 2c20 6672 6f6d 5f6c 616e  t: str, from_lan
+00012490: 6775 6167 653a 2073 7472 203d 2027 6175  guage: str = 'au
+000124a0: 746f 272c 2074 6f5f 6c61 6e67 7561 6765  to', to_language
+000124b0: 3a20 7374 7220 3d20 2765 6e27 2c20 2a2a  : str = 'en', **
+000124c0: 6b77 6172 6773 3a20 4170 694b 7761 7267  kwargs: ApiKwarg
+000124d0: 7354 7970 6529 202d 3e20 556e 696f 6e5b  sType) -> Union[
+000124e0: 7374 722c 2064 6963 745d 3a0d 0a20 2020  str, dict]:..   
+000124f0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00012500: 2020 6874 7470 733a 2f2f 7472 616e 736c    https://transl
+00012510: 6174 652e 616c 6962 6162 612e 636f 6d0d  ate.alibaba.com.
+00012520: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00012530: 7175 6572 795f 7465 7874 3a20 7374 722c  query_text: str,
+00012540: 206d 7573 742e 0d0a 2020 2020 2020 2020   must...        
+00012550: 3a70 6172 616d 2066 726f 6d5f 6c61 6e67  :param from_lang
+00012560: 7561 6765 3a20 7374 722c 2064 6566 6175  uage: str, defau
+00012570: 6c74 2027 6175 746f 272e 0d0a 2020 2020  lt 'auto'...    
+00012580: 2020 2020 3a70 6172 616d 2074 6f5f 6c61      :param to_la
+00012590: 6e67 7561 6765 3a20 7374 722c 2064 6566  nguage: str, def
+000125a0: 6175 6c74 2027 656e 272e 0d0a 2020 2020  ault 'en'...    
+000125b0: 2020 2020 3a70 6172 616d 202a 2a6b 7761      :param **kwa
+000125c0: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
+000125d0: 2020 2020 2020 3a70 6172 616d 2074 696d        :param tim
+000125e0: 656f 7574 3a20 666c 6f61 742c 2064 6566  eout: float, def
+000125f0: 6175 6c74 204e 6f6e 652e 0d0a 2020 2020  ault None...    
+00012600: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00012610: 616d 2070 726f 7869 6573 3a20 6469 6374  am proxies: dict
+00012620: 2c20 6465 6661 756c 7420 4e6f 6e65 2e0d  , default None..
+00012630: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012640: 203a 7061 7261 6d20 736c 6565 705f 7365   :param sleep_se
+00012650: 636f 6e64 733a 2066 6c6f 6174 2c20 6465  conds: float, de
+00012660: 6661 756c 7420 302e 0d0a 2020 2020 2020  fault 0...      
+00012670: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00012680: 2069 735f 6465 7461 696c 5f72 6573 756c   is_detail_resul
+00012690: 743a 2062 6f6f 6c2c 2064 6566 6175 6c74  t: bool, default
+000126a0: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
+000126b0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+000126c0: 6966 5f69 676e 6f72 655f 6c69 6d69 745f  if_ignore_limit_
+000126d0: 6f66 5f6c 656e 6774 683a 2062 6f6f 6c2c  of_length: bool,
+000126e0: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
+000126f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012700: 203a 7061 7261 6d20 6c69 6d69 745f 6f66   :param limit_of
+00012710: 5f6c 656e 6774 683a 2069 6e74 2c20 6465  _length: int, de
+00012720: 6661 756c 7420 3230 3030 302e 0d0a 2020  fault 20000...  
+00012730: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+00012740: 6172 616d 2069 665f 6967 6e6f 7265 5f65  aram if_ignore_e
+00012750: 6d70 7479 5f71 7565 7279 3a20 626f 6f6c  mpty_query: bool
+00012760: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+00012770: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012780: 2020 3a70 6172 616d 2075 7064 6174 655f    :param update_
+00012790: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
+000127a0: 6571 3a20 696e 742c 2064 6566 6175 6c74  eq: int, default
+000127b0: 2031 3030 302e 0d0a 2020 2020 2020 2020   1000...        
+000127c0: 2020 2020 2020 2020 3a70 6172 616d 2075          :param u
+000127d0: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+000127e0: 7465 725f 7365 636f 6e64 733a 2066 6c6f  ter_seconds: flo
+000127f0: 6174 2c20 6465 6661 756c 7420 3135 3030  at, default 1500
+00012800: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00012810: 2020 203a 7061 7261 6d20 6966 5f73 686f     :param if_sho
+00012820: 775f 7469 6d65 5f73 7461 743a 2062 6f6f  w_time_stat: boo
+00012830: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+00012840: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00012850: 2020 203a 7061 7261 6d20 7368 6f77 5f74     :param show_t
+00012860: 696d 655f 7374 6174 5f70 7265 6369 7369  ime_stat_precisi
+00012870: 6f6e 3a20 696e 742c 2064 6566 6175 6c74  on: int, default
+00012880: 2032 2e0d 0a20 2020 2020 2020 2020 2020   2...           
+00012890: 2020 2020 203a 7061 7261 6d20 6966 5f70       :param if_p
+000128a0: 7269 6e74 5f77 6172 6e69 6e67 3a20 626f  rint_warning: bo
+000128b0: 6f6c 2c20 6465 6661 756c 7420 5472 7565  ol, default True
+000128c0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+000128d0: 2020 203a 7061 7261 6d20 7072 6f66 6573     :param profes
+000128e0: 7369 6f6e 616c 5f66 6965 6c64 3a20 7374  sional_field: st
+000128f0: 722c 2064 6566 6175 6c74 2027 6d65 7373  r, default 'mess
+00012900: 6167 6527 2c20 6368 6f6f 7365 2066 726f  age', choose fro
+00012910: 6d20 2822 6765 6e65 7261 6c22 2c22 6d65  m ("general","me
+00012920: 7373 6167 6522 2c22 6f66 6665 7222 290d  ssage","offer").
+00012930: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+00012940: 3a20 7374 7220 6f72 2064 6963 740d 0a20  : str or dict.. 
+00012950: 2020 2020 2020 2022 2222 0d0a 0d0a 2020         """....  
+00012960: 2020 2020 2020 7573 655f 646f 6d61 696e        use_domain
+00012970: 203d 206b 7761 7267 732e 6765 7428 2770   = kwargs.get('p
+00012980: 726f 6665 7373 696f 6e61 6c5f 6669 656c  rofessional_fiel
+00012990: 6427 2c20 276d 6573 7361 6765 2729 0d0a  d', 'message')..
+000129a0: 2020 2020 2020 2020 6966 2075 7365 5f64          if use_d
+000129b0: 6f6d 6169 6e20 6e6f 7420 696e 2073 656c  omain not in sel
+000129c0: 662e 7072 6f66 6573 7369 6f6e 616c 5f66  f.professional_f
+000129d0: 6965 6c64 3a0d 0a20 2020 2020 2020 2020  ield:..         
+000129e0: 2020 2072 6169 7365 2054 7261 6e73 6c61     raise Transla
+000129f0: 746f 7245 7272 6f72 0d0a 0d0a 2020 2020  torError....    
+00012a00: 2020 2020 7469 6d65 6f75 7420 3d20 6b77      timeout = kw
+00012a10: 6172 6773 2e67 6574 2827 7469 6d65 6f75  args.get('timeou
+00012a20: 7427 2c20 4e6f 6e65 290d 0a20 2020 2020  t', None)..     
+00012a30: 2020 2070 726f 7869 6573 203d 206b 7761     proxies = kwa
+00012a40: 7267 732e 6765 7428 2770 726f 7869 6573  rgs.get('proxies
+00012a50: 272c 204e 6f6e 6529 0d0a 2020 2020 2020  ', None)..      
+00012a60: 2020 736c 6565 705f 7365 636f 6e64 7320    sleep_seconds 
+00012a70: 3d20 6b77 6172 6773 2e67 6574 2827 736c  = kwargs.get('sl
+00012a80: 6565 705f 7365 636f 6e64 7327 2c20 3029  eep_seconds', 0)
+00012a90: 0d0a 2020 2020 2020 2020 6966 5f70 7269  ..        if_pri
+00012aa0: 6e74 5f77 6172 6e69 6e67 203d 206b 7761  nt_warning = kwa
+00012ab0: 7267 732e 6765 7428 2769 665f 7072 696e  rgs.get('if_prin
+00012ac0: 745f 7761 726e 696e 6727 2c20 5472 7565  t_warning', True
+00012ad0: 290d 0a20 2020 2020 2020 2069 735f 6465  )..        is_de
+00012ae0: 7461 696c 5f72 6573 756c 7420 3d20 6b77  tail_result = kw
+00012af0: 6172 6773 2e67 6574 2827 6973 5f64 6574  args.get('is_det
+00012b00: 6169 6c5f 7265 7375 6c74 272c 2046 616c  ail_result', Fal
+00012b10: 7365 290d 0a20 2020 2020 2020 2075 7064  se)..        upd
+00012b20: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+00012b30: 725f 6672 6571 203d 206b 7761 7267 732e  r_freq = kwargs.
+00012b40: 6765 7428 2775 7064 6174 655f 7365 7373  get('update_sess
+00012b50: 696f 6e5f 6166 7465 725f 6672 6571 272c  ion_after_freq',
+00012b60: 2073 656c 662e 6465 6661 756c 745f 7365   self.default_se
+00012b70: 7373 696f 6e5f 6672 6571 290d 0a20 2020  ssion_freq)..   
+00012b80: 2020 2020 2075 7064 6174 655f 7365 7373       update_sess
+00012b90: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
+00012ba0: 7320 3d20 6b77 6172 6773 2e67 6574 2827  s = kwargs.get('
+00012bb0: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+00012bc0: 6674 6572 5f73 6563 6f6e 6473 272c 2073  fter_seconds', s
+00012bd0: 656c 662e 6465 6661 756c 745f 7365 7373  elf.default_sess
+00012be0: 696f 6e5f 7365 636f 6e64 7329 0d0a 2020  ion_seconds)..  
+00012bf0: 2020 2020 2020 7365 6c66 2e63 6865 636b        self.check
+00012c00: 5f69 6e70 7574 5f6c 696d 6974 2871 7565  _input_limit(que
+00012c10: 7279 5f74 6578 742c 2073 656c 662e 696e  ry_text, self.in
+00012c20: 7075 745f 6c69 6d69 7429 0d0a 0d0a 2020  put_limit)....  
+00012c30: 2020 2020 2020 6e6f 745f 7570 6461 7465        not_update
+00012c40: 5f63 6f6e 645f 6672 6571 203d 2031 2069  _cond_freq = 1 i
+00012c50: 6620 7365 6c66 2e71 7565 7279 5f63 6f75  f self.query_cou
+00012c60: 6e74 2025 2075 7064 6174 655f 7365 7373  nt % update_sess
+00012c70: 696f 6e5f 6166 7465 725f 6672 6571 2021  ion_after_freq !
+00012c80: 3d20 3020 656c 7365 2030 0d0a 2020 2020  = 0 else 0..    
+00012c90: 2020 2020 6e6f 745f 7570 6461 7465 5f63      not_update_c
+00012ca0: 6f6e 645f 7469 6d65 203d 2031 2069 6620  ond_time = 1 if 
+00012cb0: 7469 6d65 2e74 696d 6528 2920 2d20 7365  time.time() - se
+00012cc0: 6c66 2e62 6567 696e 5f74 696d 6520 3c20  lf.begin_time < 
+00012cd0: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+00012ce0: 6674 6572 5f73 6563 6f6e 6473 2065 6c73  fter_seconds els
+00012cf0: 6520 300d 0a20 2020 2020 2020 2069 6620  e 0..        if 
+00012d00: 6e6f 7420 2873 656c 662e 7365 7373 696f  not (self.sessio
+00012d10: 6e20 616e 6420 7365 6c66 2e6c 616e 6775  n and self.langu
+00012d20: 6167 655f 6d61 7020 616e 6420 6e6f 745f  age_map and not_
+00012d30: 7570 6461 7465 5f63 6f6e 645f 6672 6571  update_cond_freq
+00012d40: 2061 6e64 206e 6f74 5f75 7064 6174 655f   and not_update_
+00012d50: 636f 6e64 5f74 696d 6520 616e 6420 7365  cond_time and se
+00012d60: 6c66 2e64 6d74 7261 636b 5f70 6167 6569  lf.dmtrack_pagei
+00012d70: 6429 3a0d 0a20 2020 2020 2020 2020 2020  d):..           
+00012d80: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
+00012d90: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
+00012da0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00012db0: 2e73 6573 7369 6f6e 203d 2072 6571 7565  .session = reque
+00012dc0: 7374 732e 5365 7373 696f 6e28 290d 0a20  sts.Session().. 
+00012dd0: 2020 2020 2020 2020 2020 2068 6f73 745f             host_
+00012de0: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
+00012df0: 7365 7373 696f 6e2e 6765 7428 7365 6c66  session.get(self
+00012e00: 2e68 6f73 745f 7572 6c2c 2068 6561 6465  .host_url, heade
+00012e10: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
+00012e20: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+00012e30: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+00012e40: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
+00012e50: 2020 2020 2073 656c 662e 646d 7472 6163       self.dmtrac
+00012e60: 6b5f 7061 6765 6964 203d 2073 656c 662e  k_pageid = self.
+00012e70: 6765 745f 646d 7472 6163 6b5f 7061 6765  get_dmtrack_page
+00012e80: 6964 2868 6f73 745f 7265 7370 6f6e 7365  id(host_response
+00012e90: 290d 0a20 2020 2020 2020 2020 2020 2064  )..            d
+00012ea0: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
+00012eb0: 203d 2073 656c 662e 6465 6275 675f 6c61   = self.debug_la
+00012ec0: 6e67 5f6b 7761 7267 7328 6672 6f6d 5f6c  ng_kwargs(from_l
+00012ed0: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
+00012ee0: 7561 6765 2c20 7365 6c66 2e64 6566 6175  uage, self.defau
+00012ef0: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
+00012f00: 2c20 6966 5f70 7269 6e74 5f77 6172 6e69  , if_print_warni
+00012f10: 6e67 290d 0a20 2020 2020 2020 2020 2020  ng)..           
+00012f20: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+00012f30: 6170 203d 2073 656c 662e 6765 745f 6c61  ap = self.get_la
+00012f40: 6e67 7561 6765 5f6d 6170 2873 656c 662e  nguage_map(self.
+00012f50: 7365 7373 696f 6e2c 2073 656c 662e 6765  session, self.ge
+00012f60: 745f 6c61 6e67 7561 6765 5f75 726c 2c20  t_language_url, 
+00012f70: 7573 655f 646f 6d61 696e 2c20 7365 6c66  use_domain, self
+00012f80: 2e64 6d74 7261 636b 5f70 6167 6569 642c  .dmtrack_pageid,
+00012f90: 2074 696d 656f 7574 2c20 7072 6f78 6965   timeout, proxie
+00012fa0: 732c 202a 2a64 6562 7567 5f6c 616e 675f  s, **debug_lang_
+00012fb0: 6b77 6172 6773 290d 0a0d 0a20 2020 2020  kwargs)....     
+00012fc0: 2020 2066 726f 6d5f 6c61 6e67 7561 6765     from_language
+00012fd0: 2c20 746f 5f6c 616e 6775 6167 6520 3d20  , to_language = 
+00012fe0: 7365 6c66 2e63 6865 636b 5f6c 616e 6775  self.check_langu
+00012ff0: 6167 6528 6672 6f6d 5f6c 616e 6775 6167  age(from_languag
+00013000: 652c 2074 6f5f 6c61 6e67 7561 6765 2c20  e, to_language, 
+00013010: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
+00013020: 702c 206f 7574 7075 745f 7a68 3d73 656c  p, output_zh=sel
+00013030: 662e 6f75 7470 7574 5f7a 6829 0d0a 2020  f.output_zh)..  
+00013040: 2020 2020 2020 7061 796c 6f61 6420 3d20        payload = 
+00013050: 7b0d 0a20 2020 2020 2020 2020 2020 2022  {..            "
+00013060: 7372 634c 616e 6775 6167 6522 3a20 6672  srcLanguage": fr
+00013070: 6f6d 5f6c 616e 6775 6167 652c 0d0a 2020  om_language,..  
+00013080: 2020 2020 2020 2020 2020 2274 6774 4c61            "tgtLa
+00013090: 6e67 7561 6765 223a 2074 6f5f 6c61 6e67  nguage": to_lang
+000130a0: 7561 6765 2c0d 0a20 2020 2020 2020 2020  uage,..         
+000130b0: 2020 2022 7372 6354 6578 7422 3a20 7175     "srcText": qu
+000130c0: 6572 795f 7465 7874 2c0d 0a20 2020 2020  ery_text,..     
+000130d0: 2020 2020 2020 2022 6269 7a54 7970 6522         "bizType"
+000130e0: 3a20 7573 655f 646f 6d61 696e 2c0d 0a20  : use_domain,.. 
+000130f0: 2020 2020 2020 2020 2020 2022 7669 6577             "view
+00013100: 5479 7065 223a 2022 222c 0d0a 2020 2020  Type": "",..    
+00013110: 2020 2020 2020 2020 2273 6f75 7263 6522          "source"
+00013120: 3a20 2222 2c0d 0a20 2020 2020 2020 207d  : "",..        }
+00013130: 0d0a 2020 2020 2020 2020 7061 7261 6d73  ..        params
+00013140: 203d 207b 2264 6d74 7261 636b 5f70 6167   = {"dmtrack_pag
+00013150: 6569 6422 3a20 7365 6c66 2e64 6d74 7261  eid": self.dmtra
+00013160: 636b 5f70 6167 6569 647d 0d0a 2020 2020  ck_pageid}..    
+00013170: 2020 2020 7220 3d20 7365 6c66 2e73 6573      r = self.ses
+00013180: 7369 6f6e 2e70 6f73 7428 7365 6c66 2e61  sion.post(self.a
+00013190: 7069 5f75 726c 2c20 6865 6164 6572 733d  pi_url, headers=
+000131a0: 7365 6c66 2e61 7069 5f68 6561 6465 7273  self.api_headers
+000131b0: 2c20 7061 7261 6d73 3d70 6172 616d 732c  , params=params,
+000131c0: 2064 6174 613d 7061 796c 6f61 642c 2074   data=payload, t
+000131d0: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
+000131e0: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
+000131f0: 0d0a 2020 2020 2020 2020 722e 7261 6973  ..        r.rais
+00013200: 655f 666f 725f 7374 6174 7573 2829 0d0a  e_for_status()..
+00013210: 2020 2020 2020 2020 6461 7461 203d 2072          data = r
+00013220: 2e6a 736f 6e28 290d 0a20 2020 2020 2020  .json()..       
+00013230: 2074 696d 652e 736c 6565 7028 736c 6565   time.sleep(slee
+00013240: 705f 7365 636f 6e64 7329 0d0a 2020 2020  p_seconds)..    
+00013250: 2020 2020 7365 6c66 2e71 7565 7279 5f63      self.query_c
+00013260: 6f75 6e74 202b 3d20 310d 0a20 2020 2020  ount += 1..     
+00013270: 2020 2072 6574 7572 6e20 6461 7461 2069     return data i
+00013280: 6620 6973 5f64 6574 6169 6c5f 7265 7375  f is_detail_resu
+00013290: 6c74 2065 6c73 6520 6461 7461 5b27 6c69  lt else data['li
+000132a0: 7374 5461 7267 6574 5465 7874 275d 5b30  stTargetText'][0
+000132b0: 5d0d 0a0d 0a0d 0a63 6c61 7373 2041 6c69  ]......class Ali
+000132c0: 6261 6261 5632 2854 7365 293a 0d0a 2020  babaV2(Tse):..  
+000132d0: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
+000132e0: 656c 6629 3a0d 0a20 2020 2020 2020 2073  elf):..        s
+000132f0: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
+00013300: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00013310: 6265 6769 6e5f 7469 6d65 203d 2074 696d  begin_time = tim
+00013320: 652e 7469 6d65 2829 0d0a 2020 2020 2020  e.time()..      
+00013330: 2020 7365 6c66 2e68 6f73 745f 7572 6c20    self.host_url 
+00013340: 3d20 2768 7474 7073 3a2f 2f74 7261 6e73  = 'https://trans
+00013350: 6c61 7465 2e61 6c69 6261 6261 2e63 6f6d  late.alibaba.com
+00013360: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+00013370: 6170 695f 7572 6c20 3d20 2768 7474 7073  api_url = 'https
+00013380: 3a2f 2f74 7261 6e73 6c61 7465 2e61 6c69  ://translate.ali
+00013390: 6261 6261 2e63 6f6d 2f61 7069 2f74 7261  baba.com/api/tra
+000133a0: 6e73 6c61 7465 2f74 6578 7427 0d0a 2020  nslate/text'..  
+000133b0: 2020 2020 2020 7365 6c66 2e63 7372 665f        self.csrf_
+000133c0: 7572 6c20 3d20 2768 7474 7073 3a2f 2f74  url = 'https://t
+000133d0: 7261 6e73 6c61 7465 2e61 6c69 6261 6261  ranslate.alibaba
+000133e0: 2e63 6f6d 2f61 7069 2f74 7261 6e73 6c61  .com/api/transla
+000133f0: 7465 2f63 7372 6674 6f6b 656e 270d 0a20  te/csrftoken'.. 
+00013400: 2020 2020 2020 2073 656c 662e 6765 745f         self.get_
+00013410: 6c61 6e67 7561 6765 5f70 6174 7465 726e  language_pattern
+00013420: 203d 2027 2f2f 6c61 6e67 2e61 6c69 6364   = '//lang.alicd
+00013430: 6e2e 636f 6d2f 6d63 6d73 2f74 7261 6e73  n.com/mcms/trans
+00013440: 6c61 7469 6f6e 2d6f 7065 6e2d 706f 7274  lation-open-port
+00013450: 616c 2f28 2e2a 3f29 2f74 7261 6e73 6c61  al/(.*?)/transla
+00013460: 7469 6f6e 2d6f 7065 6e2d 706f 7274 616c  tion-open-portal
+00013470: 5f69 6e74 6572 6661 6365 2e6a 736f 6e27  _interface.json'
+00013480: 0d0a 2020 2020 2020 2020 7365 6c66 2e67  ..        self.g
+00013490: 6574 5f6c 616e 6775 6167 655f 7572 6c20  et_language_url 
+000134a0: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+000134b0: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
+000134c0: 7320 3d20 7365 6c66 2e67 6574 5f68 6561  s = self.get_hea
+000134d0: 6465 7273 2873 656c 662e 686f 7374 5f75  ders(self.host_u
+000134e0: 726c 2c20 6966 5f61 7069 3d46 616c 7365  rl, if_api=False
+000134f0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00013500: 6170 695f 6865 6164 6572 7320 3d20 7365  api_headers = se
+00013510: 6c66 2e67 6574 5f68 6561 6465 7273 2873  lf.get_headers(s
+00013520: 656c 662e 686f 7374 5f75 726c 2c20 6966  elf.host_url, if
+00013530: 5f61 7069 3d54 7275 652c 2069 665f 616a  _api=True, if_aj
+00013540: 6178 5f66 6f72 5f61 7069 3d46 616c 7365  ax_for_api=False
+00013550: 2c20 6966 5f6d 756c 7469 7061 7274 5f66  , if_multipart_f
+00013560: 6f72 5f61 7069 3d54 7275 6529 0d0a 2020  or_api=True)..  
+00013570: 2020 2020 2020 7365 6c66 2e6c 616e 6775        self.langu
+00013580: 6167 655f 6d61 7020 3d20 4e6f 6e65 0d0a  age_map = None..
+00013590: 2020 2020 2020 2020 7365 6c66 2e64 6574          self.det
+000135a0: 6169 6c5f 6c61 6e67 7561 6765 5f6d 6170  ail_language_map
+000135b0: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+000135c0: 2073 656c 662e 7072 6f66 6573 7369 6f6e   self.profession
+000135d0: 616c 5f66 6965 6c64 203d 2028 2767 656e  al_field = ('gen
+000135e0: 6572 616c 272c 290d 0a20 2020 2020 2020  eral',)..       
+000135f0: 2073 656c 662e 6373 7266 5f74 6f6b 656e   self.csrf_token
+00013600: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+00013610: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
+00013620: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
+00013630: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
+00013640: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
+00013650: 2e6f 7574 7075 745f 7a68 203d 2027 7a68  .output_zh = 'zh
+00013660: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+00013670: 696e 7075 745f 6c69 6d69 7420 3d20 696e  input_limit = in
+00013680: 7428 3565 3329 0d0a 2020 2020 2020 2020  t(5e3)..        
+00013690: 7365 6c66 2e64 6566 6175 6c74 5f66 726f  self.default_fro
+000136a0: 6d5f 6c61 6e67 7561 6765 203d 2073 656c  m_language = sel
+000136b0: 662e 6f75 7470 7574 5f7a 680d 0a0d 0a20  f.output_zh.... 
+000136c0: 2020 2040 5473 652e 6465 6275 675f 6c61     @Tse.debug_la
+000136d0: 6e67 7561 6765 5f6d 6170 0d0a 2020 2020  nguage_map..    
+000136e0: 6465 6620 6765 745f 6c61 6e67 7561 6765  def get_language
+000136f0: 5f6d 6170 2873 656c 662c 206c 616e 675f  _map(self, lang_
+00013700: 6874 6d6c 3a20 7374 722c 202a 2a6b 7761  html: str, **kwa
+00013710: 7267 733a 204c 616e 674d 6170 4b77 6172  rgs: LangMapKwar
+00013720: 6773 5479 7065 2920 2d3e 2064 6963 743a  gsType) -> dict:
+00013730: 0d0a 2020 2020 2020 2020 6c61 6e67 5f70  ..        lang_p
+00013740: 6172 6167 7261 7068 203d 2072 652e 636f  aragraph = re.co
+00013750: 6d70 696c 6528 2722 656e 5f55 5322 3a7b  mpile('"en_US":{
+00013760: 282e 2a3f 297d 2c22 7a68 5f43 4e22 3a7b  (.*?)},"zh_CN":{
+00013770: 2729 2e73 6561 7263 6828 6c61 6e67 5f68  ').search(lang_h
+00013780: 746d 6c29 2e67 726f 7570 2829 2e72 6570  tml).group().rep
+00013790: 6c61 6365 2827 222c 272c 2027 222c 5c6e  lace('",', '",\n
+000137a0: 2729 0d0a 2020 2020 2020 2020 6c61 6e67  ')..        lang
+000137b0: 5f69 7465 6d73 203d 2072 652e 636f 6d70  _items = re.comp
+000137c0: 696c 6528 2769 6e74 6572 6661 6365 2e28  ile('interface.(
+000137d0: 2e2a 3f29 223a 2228 2e2a 3f29 2227 292e  .*?)":"(.*?)"').
+000137e0: 6669 6e64 616c 6c28 6c61 6e67 5f70 6172  findall(lang_par
+000137f0: 6167 7261 7068 290d 0a20 2020 2020 2020  agraph)..       
+00013800: 205f 666e 5f66 696c 7465 7220 3d20 6c61   _fn_filter = la
+00013810: 6d62 6461 206b 2c20 763a 2031 2069 6620  mbda k, v: 1 if 
+00013820: 286c 656e 286b 2920 3c3d 2033 206f 7220  (len(k) <= 3 or 
+00013830: 286c 656e 286b 2920 3d3d 2035 2061 6e64  (len(k) == 5 and
+00013840: 2027 2d27 2069 6e20 6b29 2920 616e 6420   '-' in k)) and 
+00013850: 6c65 6e28 762e 7370 6c69 7428 2720 2729  len(v.split(' ')
+00013860: 2920 3c3d 2032 2065 6c73 6520 300d 0a20  ) <= 2 else 0.. 
+00013870: 2020 2020 2020 206c 616e 675f 6974 656d         lang_item
+00013880: 7320 3d20 736f 7274 6564 285b 286b 2c20  s = sorted([(k, 
+00013890: 7629 2066 6f72 206b 2c20 7620 696e 206c  v) for k, v in l
+000138a0: 616e 675f 6974 656d 7320 6966 205f 666e  ang_items if _fn
+000138b0: 5f66 696c 7465 7228 6b2c 2076 295d 290d  _filter(k, v)]).
+000138c0: 0a20 2020 2020 2020 2064 5f6c 616e 675f  .        d_lang_
+000138d0: 6d61 7020 3d20 7b6b 3a20 7620 666f 7220  map = {k: v for 
+000138e0: 6b2c 2076 2069 6e20 6c61 6e67 5f69 7465  k, v in lang_ite
+000138f0: 6d73 7d0d 0a20 2020 2020 2020 206c 616e  ms}..        lan
+00013900: 675f 6c69 7374 203d 206c 6973 7428 645f  g_list = list(d_
+00013910: 6c61 6e67 5f6d 6170 2e6b 6579 7328 2929  lang_map.keys())
+00013920: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00013930: 207b 7d2e 6672 6f6d 6b65 7973 286c 616e   {}.fromkeys(lan
+00013940: 675f 6c69 7374 2c20 6c61 6e67 5f6c 6973  g_list, lang_lis
+00013950: 7429 0d0a 0d0a 2020 2020 6465 6620 6765  t)....    def ge
+00013960: 745f 645f 6c61 6e67 5f6d 6170 2873 656c  t_d_lang_map(sel
+00013970: 662c 206c 616e 675f 6874 6d6c 3a20 7374  f, lang_html: st
+00013980: 7229 202d 3e20 6469 6374 3a0d 0a20 2020  r) -> dict:..   
+00013990: 2020 2020 206c 616e 675f 7061 7261 6772       lang_paragr
+000139a0: 6170 6820 3d20 7265 2e63 6f6d 7069 6c65  aph = re.compile
+000139b0: 2827 2265 6e5f 5553 223a 7b28 2e2a 3f29  ('"en_US":{(.*?)
+000139c0: 7d2c 227a 685f 434e 223a 7b27 292e 7365  },"zh_CN":{').se
+000139d0: 6172 6368 286c 616e 675f 6874 6d6c 292e  arch(lang_html).
+000139e0: 6772 6f75 7028 292e 7265 706c 6163 6528  group().replace(
+000139f0: 2722 2c27 2c20 2722 2c5c 6e27 290d 0a20  '",', '",\n').. 
+00013a00: 2020 2020 2020 206c 616e 675f 6974 656d         lang_item
+00013a10: 7320 3d20 7265 2e63 6f6d 7069 6c65 2827  s = re.compile('
+00013a20: 696e 7465 7266 6163 652e 282e 2a3f 2922  interface.(.*?)"
+00013a30: 3a22 282e 2a3f 2922 2729 2e66 696e 6461  :"(.*?)"').finda
+00013a40: 6c6c 286c 616e 675f 7061 7261 6772 6170  ll(lang_paragrap
+00013a50: 6829 0d0a 2020 2020 2020 2020 5f66 6e5f  h)..        _fn_
+00013a60: 6669 6c74 6572 203d 206c 616d 6264 6120  filter = lambda 
+00013a70: 6b2c 2076 3a20 3120 6966 2028 6c65 6e28  k, v: 1 if (len(
+00013a80: 6b29 203c 3d20 3320 6f72 2028 6c65 6e28  k) <= 3 or (len(
+00013a90: 6b29 203d 3d20 3520 616e 6420 272d 2720  k) == 5 and '-' 
+00013aa0: 696e 206b 2929 2061 6e64 206c 656e 2876  in k)) and len(v
+00013ab0: 2e73 706c 6974 2827 2027 2929 203c 3d20  .split(' ')) <= 
+00013ac0: 3220 656c 7365 2030 0d0a 2020 2020 2020  2 else 0..      
+00013ad0: 2020 6c61 6e67 5f69 7465 6d73 203d 2073    lang_items = s
+00013ae0: 6f72 7465 6428 5b28 6b2c 2076 2920 666f  orted([(k, v) fo
+00013af0: 7220 6b2c 2076 2069 6e20 6c61 6e67 5f69  r k, v in lang_i
+00013b00: 7465 6d73 2069 6620 5f66 6e5f 6669 6c74  tems if _fn_filt
+00013b10: 6572 286b 2c20 7629 5d29 0d0a 2020 2020  er(k, v)])..    
+00013b20: 2020 2020 7265 7475 726e 207b 6b3a 2076      return {k: v
+00013b30: 2066 6f72 206b 2c20 7620 696e 206c 616e   for k, v in lan
+00013b40: 675f 6974 656d 737d 0d0a 0d0a 2020 2020  g_items}....    
+00013b50: 4054 7365 2e74 696d 655f 7374 6174 0d0a  @Tse.time_stat..
+00013b60: 2020 2020 4054 7365 2e63 6865 636b 5f71      @Tse.check_q
+00013b70: 7565 7279 0d0a 2020 2020 6465 6620 616c  uery..    def al
+00013b80: 6962 6162 615f 6170 6928 7365 6c66 2c20  ibaba_api(self, 
+00013b90: 7175 6572 795f 7465 7874 3a20 7374 722c  query_text: str,
+00013ba0: 2066 726f 6d5f 6c61 6e67 7561 6765 3a20   from_language: 
+00013bb0: 7374 7220 3d20 2761 7574 6f27 2c20 746f  str = 'auto', to
+00013bc0: 5f6c 616e 6775 6167 653a 2073 7472 203d  _language: str =
+00013bd0: 2027 656e 272c 202a 2a6b 7761 7267 733a   'en', **kwargs:
+00013be0: 2041 7069 4b77 6172 6773 5479 7065 2920   ApiKwargsType) 
+00013bf0: 2d3e 2055 6e69 6f6e 5b73 7472 2c20 6469  -> Union[str, di
+00013c00: 6374 5d3a 0d0a 2020 2020 2020 2020 2222  ct]:..        ""
+00013c10: 220d 0a20 2020 2020 2020 2068 7474 7073  "..        https
+00013c20: 3a2f 2f74 7261 6e73 6c61 7465 2e61 6c69  ://translate.ali
+00013c30: 6261 6261 2e63 6f6d 0d0a 2020 2020 2020  baba.com..      
+00013c40: 2020 3a70 6172 616d 2071 7565 7279 5f74    :param query_t
+00013c50: 6578 743a 2073 7472 2c20 6d75 7374 2e0d  ext: str, must..
+00013c60: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00013c70: 6672 6f6d 5f6c 616e 6775 6167 653a 2073  from_language: s
+00013c80: 7472 2c20 6465 6661 756c 7420 2761 7574  tr, default 'aut
+00013c90: 6f27 2e0d 0a20 2020 2020 2020 203a 7061  o'...        :pa
+00013ca0: 7261 6d20 746f 5f6c 616e 6775 6167 653a  ram to_language:
+00013cb0: 2073 7472 2c20 6465 6661 756c 7420 2765   str, default 'e
+00013cc0: 6e27 2e0d 0a20 2020 2020 2020 203a 7061  n'...        :pa
+00013cd0: 7261 6d20 2a2a 6b77 6172 6773 3a0d 0a20  ram **kwargs:.. 
+00013ce0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00013cf0: 7061 7261 6d20 7469 6d65 6f75 743a 2066  param timeout: f
+00013d00: 6c6f 6174 2c20 6465 6661 756c 7420 4e6f  loat, default No
+00013d10: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
+00013d20: 2020 2020 203a 7061 7261 6d20 7072 6f78       :param prox
+00013d30: 6965 733a 2064 6963 742c 2064 6566 6175  ies: dict, defau
+00013d40: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
+00013d50: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00013d60: 2073 6c65 6570 5f73 6563 6f6e 6473 3a20   sleep_seconds: 
+00013d70: 666c 6f61 742c 2064 6566 6175 6c74 2030  float, default 0
+00013d80: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00013d90: 2020 203a 7061 7261 6d20 6973 5f64 6574     :param is_det
+00013da0: 6169 6c5f 7265 7375 6c74 3a20 626f 6f6c  ail_result: bool
+00013db0: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+00013dc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00013dd0: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
+00013de0: 7265 5f6c 696d 6974 5f6f 665f 6c65 6e67  re_limit_of_leng
+00013df0: 7468 3a20 626f 6f6c 2c20 6465 6661 756c  th: bool, defaul
+00013e00: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+00013e10: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00013e20: 206c 696d 6974 5f6f 665f 6c65 6e67 7468   limit_of_length
+00013e30: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
+00013e40: 3030 3030 2e0d 0a20 2020 2020 2020 2020  0000...         
+00013e50: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+00013e60: 5f69 676e 6f72 655f 656d 7074 795f 7175  _ignore_empty_qu
+00013e70: 6572 793a 2062 6f6f 6c2c 2064 6566 6175  ery: bool, defau
+00013e80: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+00013e90: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00013ea0: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
+00013eb0: 5f61 6674 6572 5f66 7265 713a 2069 6e74  _after_freq: int
+00013ec0: 2c20 6465 6661 756c 7420 3130 3030 2e0d  , default 1000..
+00013ed0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013ee0: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
+00013ef0: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+00013f00: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
+00013f10: 6175 6c74 2031 3530 302e 0d0a 2020 2020  ault 1500...    
+00013f20: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00013f30: 616d 2069 665f 7368 6f77 5f74 696d 655f  am if_show_time_
+00013f40: 7374 6174 3a20 626f 6f6c 2c20 6465 6661  stat: bool, defa
+00013f50: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+00013f60: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00013f70: 616d 2073 686f 775f 7469 6d65 5f73 7461  am show_time_sta
+00013f80: 745f 7072 6563 6973 696f 6e3a 2069 6e74  t_precision: int
+00013f90: 2c20 6465 6661 756c 7420 322e 0d0a 2020  , default 2...  
+00013fa0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+00013fb0: 6172 616d 2069 665f 7072 696e 745f 7761  aram if_print_wa
+00013fc0: 726e 696e 673a 2062 6f6f 6c2c 2064 6566  rning: bool, def
+00013fd0: 6175 6c74 2054 7275 652e 0d0a 2020 2020  ault True...    
+00013fe0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00013ff0: 616d 2070 726f 6665 7373 696f 6e61 6c5f  am professional_
+00014000: 6669 656c 643a 2073 7472 2c20 6465 6661  field: str, defa
+00014010: 756c 7420 276d 6573 7361 6765 272c 2063  ult 'message', c
+00014020: 686f 6f73 6520 6672 6f6d 2028 2267 656e  hoose from ("gen
+00014030: 6572 616c 222c 290d 0a20 2020 2020 2020  eral",)..       
+00014040: 203a 7265 7475 726e 3a20 7374 7220 6f72   :return: str or
+00014050: 2064 6963 740d 0a20 2020 2020 2020 2022   dict..        "
+00014060: 2222 0d0a 0d0a 2020 2020 2020 2020 7573  ""....        us
+00014070: 655f 646f 6d61 696e 203d 206b 7761 7267  e_domain = kwarg
+00014080: 732e 6765 7428 2770 726f 6665 7373 696f  s.get('professio
+00014090: 6e61 6c5f 6669 656c 6427 2c20 2767 656e  nal_field', 'gen
+000140a0: 6572 616c 2729 0d0a 2020 2020 2020 2020  eral')..        
+000140b0: 6966 2075 7365 5f64 6f6d 6169 6e20 6e6f  if use_domain no
+000140c0: 7420 696e 2073 656c 662e 7072 6f66 6573  t in self.profes
+000140d0: 7369 6f6e 616c 5f66 6965 6c64 3a0d 0a20  sional_field:.. 
+000140e0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+000140f0: 2054 7261 6e73 6c61 746f 7245 7272 6f72   TranslatorError
+00014100: 0d0a 0d0a 2020 2020 2020 2020 7469 6d65  ....        time
+00014110: 6f75 7420 3d20 6b77 6172 6773 2e67 6574  out = kwargs.get
+00014120: 2827 7469 6d65 6f75 7427 2c20 4e6f 6e65  ('timeout', None
+00014130: 290d 0a20 2020 2020 2020 2070 726f 7869  )..        proxi
+00014140: 6573 203d 206b 7761 7267 732e 6765 7428  es = kwargs.get(
+00014150: 2770 726f 7869 6573 272c 204e 6f6e 6529  'proxies', None)
+00014160: 0d0a 2020 2020 2020 2020 736c 6565 705f  ..        sleep_
+00014170: 7365 636f 6e64 7320 3d20 6b77 6172 6773  seconds = kwargs
+00014180: 2e67 6574 2827 736c 6565 705f 7365 636f  .get('sleep_seco
+00014190: 6e64 7327 2c20 3029 0d0a 2020 2020 2020  nds', 0)..      
+000141a0: 2020 6966 5f70 7269 6e74 5f77 6172 6e69    if_print_warni
+000141b0: 6e67 203d 206b 7761 7267 732e 6765 7428  ng = kwargs.get(
+000141c0: 2769 665f 7072 696e 745f 7761 726e 696e  'if_print_warnin
+000141d0: 6727 2c20 5472 7565 290d 0a20 2020 2020  g', True)..     
+000141e0: 2020 2069 735f 6465 7461 696c 5f72 6573     is_detail_res
+000141f0: 756c 7420 3d20 6b77 6172 6773 2e67 6574  ult = kwargs.get
+00014200: 2827 6973 5f64 6574 6169 6c5f 7265 7375  ('is_detail_resu
+00014210: 6c74 272c 2046 616c 7365 290d 0a20 2020  lt', False)..   
+00014220: 2020 2020 2075 7064 6174 655f 7365 7373       update_sess
+00014230: 696f 6e5f 6166 7465 725f 6672 6571 203d  ion_after_freq =
+00014240: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
+00014250: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+00014260: 725f 6672 6571 272c 2073 656c 662e 6465  r_freq', self.de
+00014270: 6661 756c 745f 7365 7373 696f 6e5f 6672  fault_session_fr
+00014280: 6571 290d 0a20 2020 2020 2020 2075 7064  eq)..        upd
+00014290: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+000142a0: 725f 7365 636f 6e64 7320 3d20 6b77 6172  r_seconds = kwar
+000142b0: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
+000142c0: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+000142d0: 6f6e 6473 272c 2073 656c 662e 6465 6661  onds', self.defa
+000142e0: 756c 745f 7365 7373 696f 6e5f 7365 636f  ult_session_seco
+000142f0: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
+00014300: 6c66 2e63 6865 636b 5f69 6e70 7574 5f6c  lf.check_input_l
+00014310: 696d 6974 2871 7565 7279 5f74 6578 742c  imit(query_text,
+00014320: 2073 656c 662e 696e 7075 745f 6c69 6d69   self.input_limi
+00014330: 7429 0d0a 0d0a 2020 2020 2020 2020 6e6f  t)....        no
+00014340: 745f 7570 6461 7465 5f63 6f6e 645f 6672  t_update_cond_fr
+00014350: 6571 203d 2031 2069 6620 7365 6c66 2e71  eq = 1 if self.q
+00014360: 7565 7279 5f63 6f75 6e74 2025 2075 7064  uery_count % upd
+00014370: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+00014380: 725f 6672 6571 2021 3d20 3020 656c 7365  r_freq != 0 else
+00014390: 2030 0d0a 2020 2020 2020 2020 6e6f 745f   0..        not_
+000143a0: 7570 6461 7465 5f63 6f6e 645f 7469 6d65  update_cond_time
+000143b0: 203d 2031 2069 6620 7469 6d65 2e74 696d   = 1 if time.tim
+000143c0: 6528 2920 2d20 7365 6c66 2e62 6567 696e  e() - self.begin
+000143d0: 5f74 696d 6520 3c20 7570 6461 7465 5f73  _time < update_s
+000143e0: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+000143f0: 6f6e 6473 2065 6c73 6520 300d 0a20 2020  onds else 0..   
+00014400: 2020 2020 2069 6620 6e6f 7420 2873 656c       if not (sel
+00014410: 662e 7365 7373 696f 6e20 616e 6420 7365  f.session and se
+00014420: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
+00014430: 616e 6420 6e6f 745f 7570 6461 7465 5f63  and not_update_c
+00014440: 6f6e 645f 6672 6571 2061 6e64 206e 6f74  ond_freq and not
+00014450: 5f75 7064 6174 655f 636f 6e64 5f74 696d  _update_cond_tim
+00014460: 6520 616e 6420 7365 6c66 2e63 7372 665f  e and self.csrf_
+00014470: 746f 6b65 6e29 3a0d 0a20 2020 2020 2020  token):..       
+00014480: 2020 2020 2073 656c 662e 6265 6769 6e5f       self.begin_
+00014490: 7469 6d65 203d 2074 696d 652e 7469 6d65  time = time.time
+000144a0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+000144b0: 7365 6c66 2e73 6573 7369 6f6e 203d 2072  self.session = r
+000144c0: 6571 7565 7374 732e 5365 7373 696f 6e28  equests.Session(
+000144d0: 290d 0a20 2020 2020 2020 2020 2020 2068  )..            h
+000144e0: 6f73 745f 6874 6d6c 203d 2073 656c 662e  ost_html = self.
+000144f0: 7365 7373 696f 6e2e 6765 7428 7365 6c66  session.get(self
+00014500: 2e68 6f73 745f 7572 6c2c 2068 6561 6465  .host_url, heade
+00014510: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
+00014520: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+00014530: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+00014540: 726f 7869 6573 292e 7465 7874 0d0a 2020  roxies).text..  
+00014550: 2020 2020 2020 2020 2020 7365 6c66 2e67            self.g
+00014560: 6574 5f6c 616e 6775 6167 655f 7572 6c20  et_language_url 
+00014570: 3d20 6627 6874 7470 733a 7b72 652e 636f  = f'https:{re.co
+00014580: 6d70 696c 6528 7365 6c66 2e67 6574 5f6c  mpile(self.get_l
+00014590: 616e 6775 6167 655f 7061 7474 6572 6e29  anguage_pattern)
+000145a0: 2e73 6561 7263 6828 686f 7374 5f68 746d  .search(host_htm
+000145b0: 6c29 2e67 726f 7570 2829 7d27 0d0a 2020  l).group()}'..  
+000145c0: 2020 2020 2020 2020 2020 6c61 6e67 5f68            lang_h
+000145d0: 746d 6c20 3d20 7365 6c66 2e73 6573 7369  tml = self.sessi
+000145e0: 6f6e 2e67 6574 2873 656c 662e 6765 745f  on.get(self.get_
+000145f0: 6c61 6e67 7561 6765 5f75 726c 2c20 6865  language_url, he
+00014600: 6164 6572 733d 7365 6c66 2e68 6f73 745f  aders=self.host_
+00014610: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
+00014620: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
+00014630: 733d 7072 6f78 6965 7329 2e74 6578 740d  s=proxies).text.
+00014640: 0a20 2020 2020 2020 2020 2020 2064 6562  .            deb
+00014650: 7567 5f6c 616e 675f 6b77 6172 6773 203d  ug_lang_kwargs =
+00014660: 2073 656c 662e 6465 6275 675f 6c61 6e67   self.debug_lang
+00014670: 5f6b 7761 7267 7328 6672 6f6d 5f6c 616e  _kwargs(from_lan
+00014680: 6775 6167 652c 2074 6f5f 6c61 6e67 7561  guage, to_langua
+00014690: 6765 2c20 7365 6c66 2e64 6566 6175 6c74  ge, self.default
+000146a0: 5f66 726f 6d5f 6c61 6e67 7561 6765 2c20  _from_language, 
+000146b0: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
+000146c0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+000146d0: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
+000146e0: 203d 2073 656c 662e 6765 745f 6c61 6e67   = self.get_lang
+000146f0: 7561 6765 5f6d 6170 286c 616e 675f 6874  uage_map(lang_ht
+00014700: 6d6c 2c20 2a2a 6465 6275 675f 6c61 6e67  ml, **debug_lang
+00014710: 5f6b 7761 7267 7329 0d0a 2020 2020 2020  _kwargs)..      
+00014720: 2020 2020 2020 7365 6c66 2e64 6574 6169        self.detai
+00014730: 6c5f 6c61 6e67 7561 6765 5f6d 6170 203d  l_language_map =
+00014740: 2073 656c 662e 6765 745f 645f 6c61 6e67   self.get_d_lang
+00014750: 5f6d 6170 286c 616e 675f 6874 6d6c 290d  _map(lang_html).
+00014760: 0a0d 0a20 2020 2020 2020 2020 2020 205f  ...            _
+00014770: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
+00014780: 6765 7428 7365 6c66 2e63 7372 665f 7572  get(self.csrf_ur
+00014790: 6c2c 2068 6561 6465 7273 3d73 656c 662e  l, headers=self.
+000147a0: 686f 7374 5f68 6561 6465 7273 2c20 7469  host_headers, ti
+000147b0: 6d65 6f75 743d 7469 6d65 6f75 742c 2070  meout=timeout, p
+000147c0: 726f 7869 6573 3d70 726f 7869 6573 290d  roxies=proxies).
+000147d0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+000147e0: 662e 6373 7266 5f74 6f6b 656e 203d 2073  f.csrf_token = s
+000147f0: 656c 662e 7365 7373 696f 6e2e 6765 7428  elf.session.get(
+00014800: 7365 6c66 2e63 7372 665f 7572 6c2c 2068  self.csrf_url, h
+00014810: 6561 6465 7273 3d73 656c 662e 686f 7374  eaders=self.host
+00014820: 5f68 6561 6465 7273 2c20 7469 6d65 6f75  _headers, timeou
+00014830: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
+00014840: 6573 3d70 726f 7869 6573 292e 6a73 6f6e  es=proxies).json
+00014850: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+00014860: 7365 6c66 2e61 7069 5f68 6561 6465 7273  self.api_headers
+00014870: 2e75 7064 6174 6528 7b73 656c 662e 6373  .update({self.cs
+00014880: 7266 5f74 6f6b 656e 5b27 6865 6164 6572  rf_token['header
+00014890: 4e61 6d65 275d 3a20 7365 6c66 2e63 7372  Name']: self.csr
+000148a0: 665f 746f 6b65 6e5b 2774 6f6b 656e 275d  f_token['token']
+000148b0: 7d29 0d0a 0d0a 2020 2020 2020 2020 6672  })....        fr
+000148c0: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
+000148d0: 6c61 6e67 7561 6765 203d 2073 656c 662e  language = self.
+000148e0: 6368 6563 6b5f 6c61 6e67 7561 6765 2866  check_language(f
+000148f0: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
+00014900: 5f6c 616e 6775 6167 652c 2073 656c 662e  _language, self.
+00014910: 6c61 6e67 7561 6765 5f6d 6170 2c20 7365  language_map, se
+00014920: 6c66 2e6f 7574 7075 745f 7a68 290d 0a20  lf.output_zh).. 
+00014930: 2020 2020 2020 2066 696c 6573 5f64 6174         files_dat
+00014940: 6120 3d20 7b0d 0a20 2020 2020 2020 2020  a = {..         
+00014950: 2020 2027 7175 6572 7927 3a20 284e 6f6e     'query': (Non
+00014960: 652c 2071 7565 7279 5f74 6578 7429 2c0d  e, query_text),.
+00014970: 0a20 2020 2020 2020 2020 2020 2027 7372  .            'sr
+00014980: 634c 616e 6727 3a20 284e 6f6e 652c 2066  cLang': (None, f
+00014990: 726f 6d5f 6c61 6e67 7561 6765 292c 0d0a  rom_language),..
+000149a0: 2020 2020 2020 2020 2020 2020 2774 6774              'tgt
+000149b0: 4c61 6e67 273a 2028 4e6f 6e65 2c20 746f  Lang': (None, to
+000149c0: 5f6c 616e 6775 6167 6529 2c0d 0a20 2020  _language),..   
+000149d0: 2020 2020 2020 2020 2027 5f63 7372 6627           '_csrf'
+000149e0: 3a20 284e 6f6e 652c 2073 656c 662e 6373  : (None, self.cs
+000149f0: 7266 5f74 6f6b 656e 5b27 746f 6b65 6e27  rf_token['token'
+00014a00: 5d29 2c0d 0a20 2020 2020 2020 2020 2020  ]),..           
+00014a10: 2027 646f 6d61 696e 273a 2028 4e6f 6e65   'domain': (None
+00014a20: 2c20 7365 6c66 2e70 726f 6665 7373 696f  , self.professio
+00014a30: 6e61 6c5f 6669 656c 645b 305d 292c 0d0a  nal_field[0]),..
+00014a40: 2020 2020 2020 2020 7d20 2023 2043 6f6e          }  # Con
+00014a50: 7465 6e74 2d54 7970 653a 206d 756c 7469  tent-Type: multi
+00014a60: 7061 7274 2f66 6f72 6d2d 6461 7461 0d0a  part/form-data..
+00014a70: 2020 2020 2020 2020 7220 3d20 7365 6c66          r = self
+00014a80: 2e73 6573 7369 6f6e 2e70 6f73 7428 7365  .session.post(se
+00014a90: 6c66 2e61 7069 5f75 726c 2c20 6669 6c65  lf.api_url, file
+00014aa0: 733d 6669 6c65 735f 6461 7461 2c20 6865  s=files_data, he
+00014ab0: 6164 6572 733d 7365 6c66 2e61 7069 5f68  aders=self.api_h
+00014ac0: 6561 6465 7273 2c20 7469 6d65 6f75 743d  eaders, timeout=
+00014ad0: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
+00014ae0: 3d70 726f 7869 6573 290d 0a20 2020 2020  =proxies)..     
+00014af0: 2020 2072 2e72 6169 7365 5f66 6f72 5f73     r.raise_for_s
+00014b00: 7461 7475 7328 290d 0a20 2020 2020 2020  tatus()..       
+00014b10: 2064 6174 6120 3d20 722e 6a73 6f6e 2829   data = r.json()
+00014b20: 0d0a 2020 2020 2020 2020 7469 6d65 2e73  ..        time.s
+00014b30: 6c65 6570 2873 6c65 6570 5f73 6563 6f6e  leep(sleep_secon
+00014b40: 6473 290d 0a20 2020 2020 2020 2073 656c  ds)..        sel
+00014b50: 662e 7175 6572 795f 636f 756e 7420 2b3d  f.query_count +=
+00014b60: 2031 0d0a 2020 2020 2020 2020 7265 7475   1..        retu
+00014b70: 726e 2064 6174 6120 6966 2069 735f 6465  rn data if is_de
+00014b80: 7461 696c 5f72 6573 756c 7420 656c 7365  tail_result else
+00014b90: 2064 6174 615b 2764 6174 6127 5d5b 2774   data['data']['t
+00014ba0: 7261 6e73 6c61 7465 5465 7874 275d 0d0a  ranslateText']..
+00014bb0: 0d0a 0d0a 636c 6173 7320 4269 6e67 2854  ....class Bing(T
+00014bc0: 7365 293a 0d0a 2020 2020 6465 6620 5f5f  se):..    def __
+00014bd0: 696e 6974 5f5f 2873 656c 662c 2073 6572  init__(self, ser
+00014be0: 7665 725f 7265 6769 6f6e 3d27 454e 2729  ver_region='EN')
+00014bf0: 3a0d 0a20 2020 2020 2020 2073 7570 6572  :..        super
+00014c00: 2829 2e5f 5f69 6e69 745f 5f28 290d 0a20  ().__init__().. 
+00014c10: 2020 2020 2020 2073 656c 662e 6265 6769         self.begi
+00014c20: 6e5f 7469 6d65 203d 2074 696d 652e 7469  n_time = time.ti
+00014c30: 6d65 2829 0d0a 2020 2020 2020 2020 7365  me()..        se
+00014c40: 6c66 2e68 6f73 745f 7572 6c20 3d20 4e6f  lf.host_url = No
+00014c50: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
+00014c60: 2e63 6e5f 686f 7374 5f75 726c 203d 2027  .cn_host_url = '
+00014c70: 6874 7470 733a 2f2f 636e 2e62 696e 672e  https://cn.bing.
+00014c80: 636f 6d2f 5472 616e 736c 6174 6f72 270d  com/Translator'.
+00014c90: 0a20 2020 2020 2020 2073 656c 662e 656e  .        self.en
+00014ca0: 5f68 6f73 745f 7572 6c20 3d20 2768 7474  _host_url = 'htt
+00014cb0: 7073 3a2f 2f77 7777 2e62 696e 672e 636f  ps://www.bing.co
+00014cc0: 6d2f 5472 616e 736c 6174 6f72 270d 0a20  m/Translator'.. 
+00014cd0: 2020 2020 2020 2073 656c 662e 7365 7276         self.serv
+00014ce0: 6572 5f72 6567 696f 6e20 3d20 7365 7276  er_region = serv
+00014cf0: 6572 5f72 6567 696f 6e0d 0a20 2020 2020  er_region..     
+00014d00: 2020 2073 656c 662e 6170 695f 7572 6c20     self.api_url 
+00014d10: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+00014d20: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
+00014d30: 7320 3d20 4e6f 6e65 0d0a 2020 2020 2020  s = None..      
+00014d40: 2020 7365 6c66 2e61 7069 5f68 6561 6465    self.api_heade
+00014d50: 7273 203d 204e 6f6e 650d 0a20 2020 2020  rs = None..     
+00014d60: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
+00014d70: 5f6d 6170 203d 204e 6f6e 650d 0a20 2020  _map = None..   
+00014d80: 2020 2020 2073 656c 662e 7365 7373 696f       self.sessio
+00014d90: 6e20 3d20 4e6f 6e65 0d0a 2020 2020 2020  n = None..      
+00014da0: 2020 7365 6c66 2e74 6b20 3d20 4e6f 6e65    self.tk = None
+00014db0: 0d0a 2020 2020 2020 2020 7365 6c66 2e69  ..        self.i
+00014dc0: 675f 6969 6420 3d20 4e6f 6e65 0d0a 2020  g_iid = None..  
+00014dd0: 2020 2020 2020 7365 6c66 2e71 7565 7279        self.query
+00014de0: 5f63 6f75 6e74 203d 2030 0d0a 2020 2020  _count = 0..    
+00014df0: 2020 2020 7365 6c66 2e6f 7574 7075 745f      self.output_
+00014e00: 6175 746f 203d 2027 6175 746f 2d64 6574  auto = 'auto-det
+00014e10: 6563 7427 0d0a 2020 2020 2020 2020 7365  ect'..        se
+00014e20: 6c66 2e6f 7574 7075 745f 7a68 203d 2027  lf.output_zh = '
+00014e30: 7a68 2d48 616e 7327 0d0a 2020 2020 2020  zh-Hans'..      
+00014e40: 2020 7365 6c66 2e69 6e70 7574 5f6c 696d    self.input_lim
+00014e50: 6974 203d 2069 6e74 2831 6533 290d 0a20  it = int(1e3).. 
+00014e60: 2020 2020 2020 2073 656c 662e 6465 6661         self.defa
+00014e70: 756c 745f 6672 6f6d 5f6c 616e 6775 6167  ult_from_languag
+00014e80: 6520 3d20 7365 6c66 2e6f 7574 7075 745f  e = self.output_
+00014e90: 7a68 0d0a 0d0a 2020 2020 4054 7365 2e64  zh....    @Tse.d
+00014ea0: 6562 7567 5f6c 616e 6775 6167 655f 6d61  ebug_language_ma
+00014eb0: 700d 0a20 2020 2064 6566 2067 6574 5f6c  p..    def get_l
+00014ec0: 616e 6775 6167 655f 6d61 7028 7365 6c66  anguage_map(self
+00014ed0: 2c20 686f 7374 5f68 746d 6c3a 2073 7472  , host_html: str
+00014ee0: 2c20 2a2a 6b77 6172 6773 3a20 4c61 6e67  , **kwargs: Lang
+00014ef0: 4d61 704b 7761 7267 7354 7970 6529 202d  MapKwargsType) -
+00014f00: 3e20 6469 6374 3a0d 0a20 2020 2020 2020  > dict:..       
+00014f10: 2065 7420 3d20 6c78 6d6c 2e65 7472 6565   et = lxml.etree
+00014f20: 2e48 544d 4c28 686f 7374 5f68 746d 6c29  .HTML(host_html)
+00014f30: 0d0a 2020 2020 2020 2020 6c61 6e67 5f6c  ..        lang_l
+00014f40: 6973 7420 3d20 6574 2e78 7061 7468 2827  ist = et.xpath('
+00014f50: 2f2f 2a5b 4069 643d 2274 7461 5f73 7263  //*[@id="tta_src
+00014f60: 736c 225d 2f6f 7074 696f 6e2f 4076 616c  sl"]/option/@val
+00014f70: 7565 2729 206f 7220 6574 2e78 7061 7468  ue') or et.xpath
+00014f80: 2827 2f2f 2a5b 4069 643d 2274 5f73 7263  ('//*[@id="t_src
+00014f90: 416c 6c4c 616e 6722 5d2f 6f70 7469 6f6e  AllLang"]/option
+00014fa0: 2f40 7661 6c75 6527 290d 0a20 2020 2020  /@value')..     
+00014fb0: 2020 206c 616e 675f 6c69 7374 203d 2073     lang_list = s
+00014fc0: 6f72 7465 6428 6c69 7374 2873 6574 286c  orted(list(set(l
+00014fd0: 616e 675f 6c69 7374 2929 290d 0a20 2020  ang_list)))..   
+00014fe0: 2020 2020 2072 6574 7572 6e20 7b7d 2e66       return {}.f
+00014ff0: 726f 6d6b 6579 7328 6c61 6e67 5f6c 6973  romkeys(lang_lis
+00015000: 742c 206c 616e 675f 6c69 7374 290d 0a0d  t, lang_list)...
+00015010: 0a20 2020 2064 6566 2067 6574 5f69 675f  .    def get_ig_
+00015020: 6969 6428 7365 6c66 2c20 686f 7374 5f68  iid(self, host_h
+00015030: 746d 6c3a 2073 7472 2920 2d3e 2064 6963  tml: str) -> dic
+00015040: 743a 0d0a 2020 2020 2020 2020 6574 203d  t:..        et =
+00015050: 206c 786d 6c2e 6574 7265 652e 4854 4d4c   lxml.etree.HTML
+00015060: 2868 6f73 745f 6874 6d6c 290d 0a20 2020  (host_html)..   
+00015070: 2020 2020 2023 2069 6964 203d 2065 742e       # iid = et.
+00015080: 7870 6174 6828 272f 2f2a 5b40 6964 3d22  xpath('//*[@id="
+00015090: 7474 615f 6f75 7447 4443 6f6e 7422 5d2f  tta_outGDCont"]/
+000150a0: 4064 6174 612d 6969 6427 295b 305d 2020  @data-iid')[0]  
+000150b0: 2320 6272 6f77 7365 7220 7061 6765 2069  # browser page i
+000150c0: 7320 6469 6666 6572 656e 7420 6265 7477  s different betw
+000150d0: 6565 6e20 7265 7175 6573 7420 7061 6765  een request page
+000150e0: 2e0d 0a20 2020 2020 2020 2069 6964 203d  ...        iid =
+000150f0: 2027 7472 616e 736c 6174 6f72 2e35 3032   'translator.502
+00015100: 3827 0d0a 2020 2020 2020 2020 6967 203d  8'..        ig =
+00015110: 2072 652e 636f 6d70 696c 6528 2749 473a   re.compile('IG:
+00015120: 2228 2e2a 3f29 2227 292e 6669 6e64 616c  "(.*?)"').findal
+00015130: 6c28 686f 7374 5f68 746d 6c29 5b30 5d0d  l(host_html)[0].
+00015140: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00015150: 7b27 6969 6427 3a20 6969 642c 2027 6967  {'iid': iid, 'ig
+00015160: 273a 2069 677d 0d0a 0d0a 2020 2020 6465  ': ig}....    de
+00015170: 6620 6765 745f 746b 2873 656c 662c 2068  f get_tk(self, h
+00015180: 6f73 745f 6874 6d6c 3a20 7374 7229 202d  ost_html: str) -
+00015190: 3e20 6469 6374 3a0d 0a20 2020 2020 2020  > dict:..       
+000151a0: 2072 6573 756c 745f 7374 7220 3d20 7265   result_str = re
+000151b0: 2e63 6f6d 7069 6c65 2827 7661 7220 7061  .compile('var pa
+000151c0: 7261 6d73 5f41 6275 7365 5072 6576 656e  rams_AbusePreven
+000151d0: 7469 6f6e 4865 6c70 6572 203d 2028 2e2a  tionHelper = (.*
+000151e0: 3f29 3b27 292e 6669 6e64 616c 6c28 686f  ?);').findall(ho
+000151f0: 7374 5f68 746d 6c29 5b30 5d0d 0a20 2020  st_html)[0]..   
+00015200: 2020 2020 2072 6573 756c 7420 3d20 6578       result = ex
+00015210: 6563 6a73 2e65 7661 6c28 7265 7375 6c74  ecjs.eval(result
+00015220: 5f73 7472 290d 0a20 2020 2020 2020 2072  _str)..        r
+00015230: 6574 7572 6e20 7b27 6b65 7927 3a20 7265  eturn {'key': re
+00015240: 7375 6c74 5b30 5d2c 2027 746f 6b65 6e27  sult[0], 'token'
+00015250: 3a20 7265 7375 6c74 5b31 5d7d 0d0a 0d0a  : result[1]}....
+00015260: 2020 2020 4054 7365 2e74 696d 655f 7374      @Tse.time_st
+00015270: 6174 0d0a 2020 2020 4054 7365 2e63 6865  at..    @Tse.che
+00015280: 636b 5f71 7565 7279 0d0a 2020 2020 6465  ck_query..    de
+00015290: 6620 6269 6e67 5f61 7069 2873 656c 662c  f bing_api(self,
+000152a0: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
+000152b0: 2c20 6672 6f6d 5f6c 616e 6775 6167 653a  , from_language:
+000152c0: 2073 7472 203d 2027 6175 746f 272c 2074   str = 'auto', t
+000152d0: 6f5f 6c61 6e67 7561 6765 3a20 7374 7220  o_language: str 
+000152e0: 3d20 2765 6e27 2c20 2a2a 6b77 6172 6773  = 'en', **kwargs
+000152f0: 3a20 4170 694b 7761 7267 7354 7970 6529  : ApiKwargsType)
+00015300: 202d 3e20 556e 696f 6e5b 7374 722c 2064   -> Union[str, d
+00015310: 6963 745d 3a0d 0a20 2020 2020 2020 2022  ict]:..        "
+00015320: 2222 0d0a 2020 2020 2020 2020 6874 7470  ""..        http
+00015330: 733a 2f2f 6269 6e67 2e63 6f6d 2f54 7261  s://bing.com/Tra
+00015340: 6e73 6c61 746f 722c 2068 7474 7073 3a2f  nslator, https:/
+00015350: 2f63 6e2e 6269 6e67 2e63 6f6d 2f54 7261  /cn.bing.com/Tra
+00015360: 6e73 6c61 746f 722e 0d0a 2020 2020 2020  nslator...      
+00015370: 2020 3a70 6172 616d 2071 7565 7279 5f74    :param query_t
+00015380: 6578 743a 2073 7472 2c20 6d75 7374 2e0d  ext: str, must..
+00015390: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+000153a0: 6672 6f6d 5f6c 616e 6775 6167 653a 2073  from_language: s
+000153b0: 7472 2c20 6465 6661 756c 7420 2761 7574  tr, default 'aut
+000153c0: 6f27 2e0d 0a20 2020 2020 2020 203a 7061  o'...        :pa
+000153d0: 7261 6d20 746f 5f6c 616e 6775 6167 653a  ram to_language:
+000153e0: 2073 7472 2c20 6465 6661 756c 7420 2765   str, default 'e
+000153f0: 6e27 2e0d 0a20 2020 2020 2020 203a 7061  n'...        :pa
+00015400: 7261 6d20 2a2a 6b77 6172 6773 3a0d 0a20  ram **kwargs:.. 
+00015410: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00015420: 7061 7261 6d20 7469 6d65 6f75 743a 2066  param timeout: f
+00015430: 6c6f 6174 2c20 6465 6661 756c 7420 4e6f  loat, default No
+00015440: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
+00015450: 2020 2020 203a 7061 7261 6d20 7072 6f78       :param prox
+00015460: 6965 733a 2064 6963 742c 2064 6566 6175  ies: dict, defau
+00015470: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
+00015480: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00015490: 2073 6c65 6570 5f73 6563 6f6e 6473 3a20   sleep_seconds: 
+000154a0: 666c 6f61 742c 2064 6566 6175 6c74 2030  float, default 0
+000154b0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+000154c0: 2020 203a 7061 7261 6d20 6973 5f64 6574     :param is_det
+000154d0: 6169 6c5f 7265 7375 6c74 3a20 626f 6f6c  ail_result: bool
+000154e0: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+000154f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00015500: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
+00015510: 7265 5f6c 696d 6974 5f6f 665f 6c65 6e67  re_limit_of_leng
+00015520: 7468 3a20 626f 6f6c 2c20 6465 6661 756c  th: bool, defaul
+00015530: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+00015540: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00015550: 206c 696d 6974 5f6f 665f 6c65 6e67 7468   limit_of_length
+00015560: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
+00015570: 3030 3030 2e0d 0a20 2020 2020 2020 2020  0000...         
+00015580: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+00015590: 5f69 676e 6f72 655f 656d 7074 795f 7175  _ignore_empty_qu
+000155a0: 6572 793a 2062 6f6f 6c2c 2064 6566 6175  ery: bool, defau
+000155b0: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+000155c0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+000155d0: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
+000155e0: 5f61 6674 6572 5f66 7265 713a 2069 6e74  _after_freq: int
+000155f0: 2c20 6465 6661 756c 7420 3130 3030 2e0d  , default 1000..
+00015600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015610: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
+00015620: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+00015630: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
+00015640: 6175 6c74 2031 3530 302e 0d0a 2020 2020  ault 1500...    
+00015650: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00015660: 616d 2069 665f 7368 6f77 5f74 696d 655f  am if_show_time_
+00015670: 7374 6174 3a20 626f 6f6c 2c20 6465 6661  stat: bool, defa
+00015680: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+00015690: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+000156a0: 616d 2073 686f 775f 7469 6d65 5f73 7461  am show_time_sta
+000156b0: 745f 7072 6563 6973 696f 6e3a 2069 6e74  t_precision: int
+000156c0: 2c20 6465 6661 756c 7420 322e 0d0a 2020  , default 2...  
+000156d0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+000156e0: 6172 616d 2069 665f 7072 696e 745f 7761  aram if_print_wa
+000156f0: 726e 696e 673a 2062 6f6f 6c2c 2064 6566  rning: bool, def
+00015700: 6175 6c74 2054 7275 652e 0d0a 2020 2020  ault True...    
+00015710: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00015720: 616d 2069 665f 7573 655f 636e 5f68 6f73  am if_use_cn_hos
+00015730: 743a 2062 6f6f 6c2c 2064 6566 6175 6c74  t: bool, default
+00015740: 204e 6f6e 652e 0d0a 2020 2020 2020 2020   None...        
+00015750: 3a72 6574 7572 6e3a 2073 7472 206f 7220  :return: str or 
+00015760: 6469 6374 0d0a 2020 2020 2020 2020 2222  dict..        ""
+00015770: 220d 0a0d 0a20 2020 2020 2020 2075 7365  "....        use
+00015780: 5f63 6e5f 636f 6e64 6974 696f 6e20 3d20  _cn_condition = 
+00015790: 6b77 6172 6773 2e67 6574 2827 6966 5f75  kwargs.get('if_u
+000157a0: 7365 5f63 6e5f 686f 7374 272c 204e 6f6e  se_cn_host', Non
+000157b0: 6529 206f 7220 7365 6c66 2e73 6572 7665  e) or self.serve
+000157c0: 725f 7265 6769 6f6e 203d 3d20 2743 4e27  r_region == 'CN'
+000157d0: 0d0a 2020 2020 2020 2020 7365 6c66 2e68  ..        self.h
+000157e0: 6f73 745f 7572 6c20 3d20 7365 6c66 2e63  ost_url = self.c
+000157f0: 6e5f 686f 7374 5f75 726c 2069 6620 7573  n_host_url if us
+00015800: 655f 636e 5f63 6f6e 6469 7469 6f6e 2065  e_cn_condition e
+00015810: 6c73 6520 7365 6c66 2e65 6e5f 686f 7374  lse self.en_host
+00015820: 5f75 726c 0d0a 2020 2020 2020 2020 7365  _url..        se
+00015830: 6c66 2e61 7069 5f75 726c 203d 2073 656c  lf.api_url = sel
+00015840: 662e 686f 7374 5f75 726c 2e72 6570 6c61  f.host_url.repla
+00015850: 6365 2827 5472 616e 736c 6174 6f72 272c  ce('Translator',
+00015860: 2027 7474 7261 6e73 6c61 7465 7633 2729   'ttranslatev3')
+00015870: 0d0a 2020 2020 2020 2020 7365 6c66 2e68  ..        self.h
+00015880: 6f73 745f 6865 6164 6572 7320 3d20 7365  ost_headers = se
+00015890: 6c66 2e67 6574 5f68 6561 6465 7273 2873  lf.get_headers(s
+000158a0: 656c 662e 686f 7374 5f75 726c 2c20 6966  elf.host_url, if
+000158b0: 5f61 7069 3d46 616c 7365 290d 0a20 2020  _api=False)..   
+000158c0: 2020 2020 2073 656c 662e 6170 695f 6865       self.api_he
+000158d0: 6164 6572 7320 3d20 7365 6c66 2e67 6574  aders = self.get
+000158e0: 5f68 6561 6465 7273 2873 656c 662e 686f  _headers(self.ho
+000158f0: 7374 5f75 726c 2c20 6966 5f61 7069 3d54  st_url, if_api=T
+00015900: 7275 6529 0d0a 0d0a 2020 2020 2020 2020  rue)....        
+00015910: 7469 6d65 6f75 7420 3d20 6b77 6172 6773  timeout = kwargs
+00015920: 2e67 6574 2827 7469 6d65 6f75 7427 2c20  .get('timeout', 
+00015930: 4e6f 6e65 290d 0a20 2020 2020 2020 2070  None)..        p
+00015940: 726f 7869 6573 203d 206b 7761 7267 732e  roxies = kwargs.
+00015950: 6765 7428 2770 726f 7869 6573 272c 204e  get('proxies', N
+00015960: 6f6e 6529 0d0a 2020 2020 2020 2020 736c  one)..        sl
+00015970: 6565 705f 7365 636f 6e64 7320 3d20 6b77  eep_seconds = kw
+00015980: 6172 6773 2e67 6574 2827 736c 6565 705f  args.get('sleep_
+00015990: 7365 636f 6e64 7327 2c20 3029 0d0a 2020  seconds', 0)..  
+000159a0: 2020 2020 2020 6966 5f70 7269 6e74 5f77        if_print_w
+000159b0: 6172 6e69 6e67 203d 206b 7761 7267 732e  arning = kwargs.
+000159c0: 6765 7428 2769 665f 7072 696e 745f 7761  get('if_print_wa
+000159d0: 726e 696e 6727 2c20 5472 7565 290d 0a20  rning', True).. 
+000159e0: 2020 2020 2020 2069 735f 6465 7461 696c         is_detail
+000159f0: 5f72 6573 756c 7420 3d20 6b77 6172 6773  _result = kwargs
+00015a00: 2e67 6574 2827 6973 5f64 6574 6169 6c5f  .get('is_detail_
+00015a10: 7265 7375 6c74 272c 2046 616c 7365 290d  result', False).
+00015a20: 0a20 2020 2020 2020 2075 7064 6174 655f  .        update_
+00015a30: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
+00015a40: 6571 203d 206b 7761 7267 732e 6765 7428  eq = kwargs.get(
+00015a50: 2775 7064 6174 655f 7365 7373 696f 6e5f  'update_session_
+00015a60: 6166 7465 725f 6672 6571 272c 2073 656c  after_freq', sel
+00015a70: 662e 6465 6661 756c 745f 7365 7373 696f  f.default_sessio
+00015a80: 6e5f 6672 6571 290d 0a20 2020 2020 2020  n_freq)..       
+00015a90: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
+00015aa0: 6166 7465 725f 7365 636f 6e64 7320 3d20  after_seconds = 
+00015ab0: 6b77 6172 6773 2e67 6574 2827 7570 6461  kwargs.get('upda
+00015ac0: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+00015ad0: 5f73 6563 6f6e 6473 272c 2073 656c 662e  _seconds', self.
+00015ae0: 6465 6661 756c 745f 7365 7373 696f 6e5f  default_session_
+00015af0: 7365 636f 6e64 7329 0d0a 2020 2020 2020  seconds)..      
+00015b00: 2020 7365 6c66 2e63 6865 636b 5f69 6e70    self.check_inp
+00015b10: 7574 5f6c 696d 6974 2871 7565 7279 5f74  ut_limit(query_t
+00015b20: 6578 742c 2073 656c 662e 696e 7075 745f  ext, self.input_
+00015b30: 6c69 6d69 7429 0d0a 0d0a 2020 2020 2020  limit)....      
+00015b40: 2020 6e6f 745f 7570 6461 7465 5f63 6f6e    not_update_con
+00015b50: 645f 6672 6571 203d 2031 2069 6620 7365  d_freq = 1 if se
+00015b60: 6c66 2e71 7565 7279 5f63 6f75 6e74 2025  lf.query_count %
+00015b70: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
+00015b80: 6166 7465 725f 6672 6571 2021 3d20 3020  after_freq != 0 
+00015b90: 656c 7365 2030 0d0a 2020 2020 2020 2020  else 0..        
+00015ba0: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
+00015bb0: 7469 6d65 203d 2031 2069 6620 7469 6d65  time = 1 if time
+00015bc0: 2e74 696d 6528 2920 2d20 7365 6c66 2e62  .time() - self.b
+00015bd0: 6567 696e 5f74 696d 6520 3c20 7570 6461  egin_time < upda
+00015be0: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+00015bf0: 5f73 6563 6f6e 6473 2065 6c73 6520 300d  _seconds else 0.
+00015c00: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00015c10: 2873 656c 662e 7365 7373 696f 6e20 616e  (self.session an
+00015c20: 6420 7365 6c66 2e6c 616e 6775 6167 655f  d self.language_
+00015c30: 6d61 7020 616e 6420 6e6f 745f 7570 6461  map and not_upda
+00015c40: 7465 5f63 6f6e 645f 6672 6571 2061 6e64  te_cond_freq and
+00015c50: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
+00015c60: 5f74 696d 6520 616e 6420 7365 6c66 2e74  _time and self.t
+00015c70: 6b20 616e 6420 7365 6c66 2e69 675f 6969  k and self.ig_ii
+00015c80: 6429 3a0d 0a20 2020 2020 2020 2020 2020  d):..           
+00015c90: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
+00015ca0: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
+00015cb0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00015cc0: 2e73 6573 7369 6f6e 203d 2072 6571 7565  .session = reque
+00015cd0: 7374 732e 5365 7373 696f 6e28 290d 0a20  sts.Session().. 
+00015ce0: 2020 2020 2020 2020 2020 2068 6f73 745f             host_
+00015cf0: 6874 6d6c 203d 2073 656c 662e 7365 7373  html = self.sess
+00015d00: 696f 6e2e 6765 7428 7365 6c66 2e68 6f73  ion.get(self.hos
+00015d10: 745f 7572 6c2c 2068 6561 6465 7273 3d73  t_url, headers=s
+00015d20: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
+00015d30: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
+00015d40: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
+00015d50: 6573 292e 7465 7874 0d0a 2020 2020 2020  es).text..      
+00015d60: 2020 2020 2020 7365 6c66 2e74 6b20 3d20        self.tk = 
+00015d70: 7365 6c66 2e67 6574 5f74 6b28 686f 7374  self.get_tk(host
+00015d80: 5f68 746d 6c29 0d0a 2020 2020 2020 2020  _html)..        
+00015d90: 2020 2020 7365 6c66 2e69 675f 6969 6420      self.ig_iid 
+00015da0: 3d20 7365 6c66 2e67 6574 5f69 675f 6969  = self.get_ig_ii
+00015db0: 6428 686f 7374 5f68 746d 6c29 0d0a 2020  d(host_html)..  
+00015dc0: 2020 2020 2020 2020 2020 6465 6275 675f            debug_
+00015dd0: 6c61 6e67 5f6b 7761 7267 7320 3d20 7365  lang_kwargs = se
+00015de0: 6c66 2e64 6562 7567 5f6c 616e 675f 6b77  lf.debug_lang_kw
+00015df0: 6172 6773 2866 726f 6d5f 6c61 6e67 7561  args(from_langua
+00015e00: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
+00015e10: 2073 656c 662e 6465 6661 756c 745f 6672   self.default_fr
+00015e20: 6f6d 5f6c 616e 6775 6167 652c 2069 665f  om_language, if_
+00015e30: 7072 696e 745f 7761 726e 696e 6729 0d0a  print_warning)..
+00015e40: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00015e50: 2e6c 616e 6775 6167 655f 6d61 7020 3d20  .language_map = 
+00015e60: 7365 6c66 2e67 6574 5f6c 616e 6775 6167  self.get_languag
+00015e70: 655f 6d61 7028 686f 7374 5f68 746d 6c2c  e_map(host_html,
+00015e80: 202a 2a64 6562 7567 5f6c 616e 675f 6b77   **debug_lang_kw
+00015e90: 6172 6773 290d 0a0d 0a20 2020 2020 2020  args)....       
+00015ea0: 2066 726f 6d5f 6c61 6e67 7561 6765 2c20   from_language, 
+00015eb0: 746f 5f6c 616e 6775 6167 6520 3d20 7365  to_language = se
+00015ec0: 6c66 2e63 6865 636b 5f6c 616e 6775 6167  lf.check_languag
+00015ed0: 6528 6672 6f6d 5f6c 616e 6775 6167 652c  e(from_language,
+00015ee0: 2074 6f5f 6c61 6e67 7561 6765 2c20 7365   to_language, se
+00015ef0: 6c66 2e6c 616e 6775 6167 655f 6d61 702c  lf.language_map,
+00015f00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00015f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015f30: 2020 2020 2020 2020 2020 206f 7574 7075             outpu
+00015f40: 745f 7a68 3d73 656c 662e 6f75 7470 7574  t_zh=self.output
+00015f50: 5f7a 682c 206f 7574 7075 745f 6175 746f  _zh, output_auto
+00015f60: 3d73 656c 662e 6f75 7470 7574 5f61 7574  =self.output_aut
+00015f70: 6f29 0d0a 0d0a 2020 2020 2020 2020 7061  o)....        pa
+00015f80: 796c 6f61 6420 3d20 7b0d 0a20 2020 2020  yload = {..     
+00015f90: 2020 2020 2020 2027 7465 7874 273a 2071         'text': q
+00015fa0: 7565 7279 5f74 6578 742c 0d0a 2020 2020  uery_text,..    
+00015fb0: 2020 2020 2020 2020 2766 726f 6d4c 616e          'fromLan
+00015fc0: 6727 3a20 6672 6f6d 5f6c 616e 6775 6167  g': from_languag
+00015fd0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00015fe0: 2774 6f27 3a20 746f 5f6c 616e 6775 6167  'to': to_languag
+00015ff0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00016000: 2774 7279 4665 7463 6869 6e67 4765 6e64  'tryFetchingGend
+00016010: 6572 4465 6269 6173 6564 5472 616e 736c  erDebiasedTransl
+00016020: 6174 696f 6e73 273a 2027 7472 7565 270d  ations': 'true'.
+00016030: 0a20 2020 2020 2020 207d 0d0a 2020 2020  .        }..    
+00016040: 2020 2020 7061 796c 6f61 6420 3d20 7b2a      payload = {*
+00016050: 2a70 6179 6c6f 6164 2c20 2a2a 7365 6c66  *payload, **self
+00016060: 2e74 6b7d 0d0a 2020 2020 2020 2020 6170  .tk}..        ap
+00016070: 695f 7572 6c5f 7061 7261 6d20 3d20 6627  i_url_param = f'
+00016080: 3f69 7356 6572 7469 6361 6c3d 3126 2649  ?isVertical=1&&I
+00016090: 473d 7b73 656c 662e 6967 5f69 6964 5b22  G={self.ig_iid["
+000160a0: 6967 225d 7d26 4949 443d 7b73 656c 662e  ig"]}&IID={self.
+000160b0: 6967 5f69 6964 5b22 6969 6422 5d7d 270d  ig_iid["iid"]}'.
+000160c0: 0a20 2020 2020 2020 2061 7069 5f75 726c  .        api_url
+000160d0: 203d 2027 272e 6a6f 696e 285b 7365 6c66   = ''.join([self
+000160e0: 2e61 7069 5f75 726c 2c20 6170 695f 7572  .api_url, api_ur
+000160f0: 6c5f 7061 7261 6d5d 290d 0a20 2020 2020  l_param])..     
+00016100: 2020 2072 203d 2073 656c 662e 7365 7373     r = self.sess
+00016110: 696f 6e2e 706f 7374 2861 7069 5f75 726c  ion.post(api_url
+00016120: 2c20 6865 6164 6572 733d 7365 6c66 2e68  , headers=self.h
+00016130: 6f73 745f 6865 6164 6572 732c 2064 6174  ost_headers, dat
+00016140: 613d 7061 796c 6f61 642c 2074 696d 656f  a=payload, timeo
+00016150: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
+00016160: 6965 733d 7072 6f78 6965 7329 0d0a 2020  ies=proxies)..  
+00016170: 2020 2020 2020 722e 7261 6973 655f 666f        r.raise_fo
+00016180: 725f 7374 6174 7573 2829 0d0a 2020 2020  r_status()..    
+00016190: 2020 2020 6461 7461 203d 2072 2e6a 736f      data = r.jso
+000161a0: 6e28 290d 0a20 2020 2020 2020 2074 696d  n()..        tim
+000161b0: 652e 736c 6565 7028 736c 6565 705f 7365  e.sleep(sleep_se
+000161c0: 636f 6e64 7329 0d0a 2020 2020 2020 2020  conds)..        
+000161d0: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
+000161e0: 202b 3d20 310d 0a20 2020 2020 2020 2072   += 1..        r
+000161f0: 6574 7572 6e20 6461 7461 5b30 5d20 6966  eturn data[0] if
+00016200: 2069 735f 6465 7461 696c 5f72 6573 756c   is_detail_resul
+00016210: 7420 656c 7365 2064 6174 615b 305d 5b27  t else data[0]['
+00016220: 7472 616e 736c 6174 696f 6e73 275d 5b30  translations'][0
+00016230: 5d5b 2774 6578 7427 5d0d 0a0d 0a0d 0a63  ]['text']......c
+00016240: 6c61 7373 2053 6f67 6f75 2854 7365 293a  lass Sogou(Tse):
+00016250: 0d0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+00016260: 5f5f 2873 656c 6629 3a0d 0a20 2020 2020  __(self):..     
+00016270: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
+00016280: 745f 5f28 290d 0a20 2020 2020 2020 2073  t__()..        s
+00016290: 656c 662e 6265 6769 6e5f 7469 6d65 203d  elf.begin_time =
+000162a0: 2074 696d 652e 7469 6d65 2829 0d0a 2020   time.time()..  
+000162b0: 2020 2020 2020 7365 6c66 2e68 6f73 745f        self.host_
+000162c0: 7572 6c20 3d20 2768 7474 7073 3a2f 2f66  url = 'https://f
+000162d0: 616e 7969 2e73 6f67 6f75 2e63 6f6d 2f74  anyi.sogou.com/t
+000162e0: 6578 7427 0d0a 2020 2020 2020 2020 7365  ext'..        se
+000162f0: 6c66 2e61 7069 5f75 726c 203d 2027 6874  lf.api_url = 'ht
+00016300: 7470 733a 2f2f 6661 6e79 692e 736f 676f  tps://fanyi.sogo
+00016310: 752e 636f 6d2f 6170 692f 7472 616e 7370  u.com/api/transp
+00016320: 632f 7465 7874 2f72 6573 756c 7427 0d0a  c/text/result'..
+00016330: 2020 2020 2020 2020 7365 6c66 2e67 6574          self.get
+00016340: 5f6c 616e 6775 6167 655f 6f6c 645f 7572  _language_old_ur
+00016350: 6c20 3d20 2768 7474 7073 3a2f 2f73 6561  l = 'https://sea
+00016360: 7263 682e 736f 676f 7563 646e 2e63 6f6d  rch.sogoucdn.com
+00016370: 2f74 7261 6e73 6c61 7465 2f70 632f 7374  /translate/pc/st
+00016380: 6174 6963 2f6a 732f 6170 702e 3730 3136  atic/js/app.7016
+00016390: 6530 6466 2e6a 7327 0d0a 2020 2020 2020  e0df.js'..      
+000163a0: 2020 7365 6c66 2e67 6574 5f6c 616e 6775    self.get_langu
+000163b0: 6167 655f 7061 7474 6572 6e20 3d20 272f  age_pattern = '/
+000163c0: 2f73 6561 7263 682e 736f 676f 7563 646e  /search.sogoucdn
+000163d0: 2e63 6f6d 2f74 7261 6e73 6c61 7465 2f70  .com/translate/p
+000163e0: 632f 7374 6174 6963 2f6a 732f 7665 6e64  c/static/js/vend
+000163f0: 6f72 732e 282e 2a3f 292e 6a73 270d 0a20  ors.(.*?).js'.. 
+00016400: 2020 2020 2020 2073 656c 662e 6765 745f         self.get_
+00016410: 6c61 6e67 7561 6765 5f75 726c 203d 204e  language_url = N
+00016420: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
+00016430: 662e 686f 7374 5f68 6561 6465 7273 203d  f.host_headers =
+00016440: 2073 656c 662e 6765 745f 6865 6164 6572   self.get_header
+00016450: 7328 7365 6c66 2e68 6f73 745f 7572 6c2c  s(self.host_url,
+00016460: 2069 665f 6170 693d 4661 6c73 6529 0d0a   if_api=False)..
+00016470: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
+00016480: 5f68 6561 6465 7273 203d 2073 656c 662e  _headers = self.
+00016490: 6765 745f 6865 6164 6572 7328 7365 6c66  get_headers(self
+000164a0: 2e68 6f73 745f 7572 6c2c 2069 665f 6170  .host_url, if_ap
+000164b0: 693d 5472 7565 290d 0a20 2020 2020 2020  i=True)..       
+000164c0: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+000164d0: 6170 203d 204e 6f6e 650d 0a20 2020 2020  ap = None..     
+000164e0: 2020 2073 656c 662e 7575 6964 203d 204e     self.uuid = N
+000164f0: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
+00016500: 662e 7365 7373 696f 6e20 3d20 4e6f 6e65  f.session = None
+00016510: 0d0a 2020 2020 2020 2020 7365 6c66 2e71  ..        self.q
+00016520: 7565 7279 5f63 6f75 6e74 203d 2030 0d0a  uery_count = 0..
+00016530: 2020 2020 2020 2020 7365 6c66 2e6f 7574          self.out
+00016540: 7075 745f 7a68 203d 2027 7a68 2d43 4853  put_zh = 'zh-CHS
+00016550: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+00016560: 696e 7075 745f 6c69 6d69 7420 3d20 696e  input_limit = in
+00016570: 7428 3565 3329 0d0a 2020 2020 2020 2020  t(5e3)..        
+00016580: 7365 6c66 2e64 6566 6175 6c74 5f66 726f  self.default_fro
+00016590: 6d5f 6c61 6e67 7561 6765 203d 2073 656c  m_language = sel
+000165a0: 662e 6f75 7470 7574 5f7a 680d 0a0d 0a20  f.output_zh.... 
+000165b0: 2020 2040 5473 652e 6465 6275 675f 6c61     @Tse.debug_la
+000165c0: 6e67 7561 6765 5f6d 6170 0d0a 2020 2020  nguage_map..    
+000165d0: 6465 6620 6765 745f 6c61 6e67 7561 6765  def get_language
+000165e0: 5f6d 6170 2873 656c 662c 2068 6f73 745f  _map(self, host_
+000165f0: 6874 6d6c 3a20 7374 722c 206c 616e 675f  html: str, lang_
+00016600: 6f6c 645f 7572 6c3a 2073 7472 2c20 7373  old_url: str, ss
+00016610: 3a20 5365 7373 696f 6e54 7970 652c 2074  : SessionType, t
+00016620: 696d 656f 7574 3a20 4f70 7469 6f6e 616c  imeout: Optional
+00016630: 5b66 6c6f 6174 5d2c 2070 726f 7869 6573  [float], proxies
+00016640: 3a20 4f70 7469 6f6e 616c 5b64 6963 745d  : Optional[dict]
+00016650: 2c20 2a2a 6b77 6172 6773 3a20 4c61 6e67  , **kwargs: Lang
+00016660: 4d61 704b 7761 7267 7354 7970 6529 202d  MapKwargsType) -
+00016670: 3e20 6469 6374 3a0d 0a20 2020 2020 2020  > dict:..       
+00016680: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+00016690: 2020 2069 6620 6e6f 7420 7365 6c66 2e67     if not self.g
+000166a0: 6574 5f6c 616e 6775 6167 655f 7572 6c3a  et_language_url:
+000166b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000166c0: 2020 6c61 6e67 5f75 726c 5f70 6174 6820    lang_url_path 
+000166d0: 3d20 7265 2e63 6f6d 7069 6c65 2873 656c  = re.compile(sel
+000166e0: 662e 6765 745f 6c61 6e67 7561 6765 5f70  f.get_language_p
+000166f0: 6174 7465 726e 292e 7365 6172 6368 2868  attern).search(h
+00016700: 6f73 745f 6874 6d6c 292e 6772 6f75 7028  ost_html).group(
+00016710: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00016720: 2020 2073 656c 662e 6765 745f 6c61 6e67     self.get_lang
+00016730: 7561 6765 5f75 726c 203d 2027 272e 6a6f  uage_url = ''.jo
+00016740: 696e 285b 2768 7474 7073 3a27 2c20 6c61  in(['https:', la
+00016750: 6e67 5f75 726c 5f70 6174 685d 290d 0a20  ng_url_path]).. 
+00016760: 2020 2020 2020 2020 2020 206c 616e 675f             lang_
+00016770: 6874 6d6c 203d 2073 732e 6765 7428 7365  html = ss.get(se
+00016780: 6c66 2e67 6574 5f6c 616e 6775 6167 655f  lf.get_language_
+00016790: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
+000167a0: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
+000167b0: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+000167c0: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+000167d0: 292e 7465 7874 0d0a 2020 2020 2020 2020  ).text..        
+000167e0: 6578 6365 7074 3a0d 0a20 2020 2020 2020  except:..       
+000167f0: 2020 2020 206c 616e 675f 6874 6d6c 203d       lang_html =
+00016800: 2073 732e 6765 7428 6c61 6e67 5f6f 6c64   ss.get(lang_old
+00016810: 5f75 726c 2c20 6865 6164 6572 733d 7365  _url, headers=se
+00016820: 6c66 2e68 6f73 745f 6865 6164 6572 732c  lf.host_headers,
+00016830: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
+00016840: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
+00016850: 7329 2e74 6578 740d 0a0d 0a20 2020 2020  s).text....     
+00016860: 2020 206c 616e 675f 6c69 7374 5f73 7472     lang_list_str
+00016870: 203d 2072 652e 636f 6d70 696c 6528 2722   = re.compile('"
+00016880: 414c 4c22 3a5c 5c5b 282e 2a3f 295d 2729  ALL":\\[(.*?)]')
+00016890: 2e73 6561 7263 6828 6c61 6e67 5f68 746d  .search(lang_htm
+000168a0: 6c29 2e67 726f 7570 2829 2e72 6570 6c61  l).group().repla
+000168b0: 6365 2827 2130 272c 2027 3127 292e 7265  ce('!0', '1').re
+000168c0: 706c 6163 6528 2721 3127 2c20 2730 2729  place('!1', '0')
+000168d0: 5b36 3a5d 0d0a 2020 2020 2020 2020 6c61  [6:]..        la
+000168e0: 6e67 5f69 7465 6d5f 6c69 7374 203d 206a  ng_item_list = j
+000168f0: 736f 6e2e 6c6f 6164 7328 6c61 6e67 5f6c  son.loads(lang_l
+00016900: 6973 745f 7374 7229 0d0a 2020 2020 2020  ist_str)..      
+00016910: 2020 6c61 6e67 5f6c 6973 7420 3d20 5b69    lang_list = [i
+00016920: 7465 6d5b 276c 616e 6727 5d20 666f 7220  tem['lang'] for 
+00016930: 6974 656d 2069 6e20 6c61 6e67 5f69 7465  item in lang_ite
+00016940: 6d5f 6c69 7374 2069 6620 6974 656d 5b27  m_list if item['
+00016950: 706c 6179 275d 203d 3d20 315d 0d0a 2020  play'] == 1]..  
+00016960: 2020 2020 2020 7265 7475 726e 207b 7d2e        return {}.
+00016970: 6672 6f6d 6b65 7973 286c 616e 675f 6c69  fromkeys(lang_li
+00016980: 7374 2c20 6c61 6e67 5f6c 6973 7429 0d0a  st, lang_list)..
+00016990: 0d0a 2020 2020 2320 6465 6620 6765 745f  ..    # def get_
+000169a0: 7575 6964 2873 656c 6629 202d 3e20 7374  uuid(self) -> st
+000169b0: 723a 0d0a 2020 2020 2320 2020 2020 5f75  r:..    #     _u
+000169c0: 7569 6420 3d20 2727 0d0a 2020 2020 2320  uid = ''..    # 
+000169d0: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
+000169e0: 6765 2838 293a 0d0a 2020 2020 2320 2020  ge(8):..    #   
+000169f0: 2020 2020 2020 5f75 7569 6420 2b3d 2068        _uuid += h
+00016a00: 6578 2869 6e74 2836 3535 3336 202a 2028  ex(int(65536 * (
+00016a10: 3120 2b20 3029 2929 5b32 3a5d 5b31 3a5d  1 + 0)))[2:][1:]
+00016a20: 0d0a 2020 2020 2320 2020 2020 2020 2020  ..    #         
+00016a30: 6966 2069 2069 6e20 7261 6e67 6528 312c  if i in range(1,
+00016a40: 2035 293a 0d0a 2020 2020 2320 2020 2020   5):..    #     
+00016a50: 2020 2020 2020 2020 5f75 7569 6420 2b3d          _uuid +=
+00016a60: 2027 2d27 0d0a 2020 2020 2320 2020 2020   '-'..    #     
+00016a70: 7265 7475 726e 205f 7575 6964 0d0a 0d0a  return _uuid....
+00016a80: 2020 2020 6465 6620 6765 745f 666f 726d      def get_form
+00016a90: 2873 656c 662c 2071 7565 7279 5f74 6578  (self, query_tex
+00016aa0: 743a 2073 7472 2c20 6672 6f6d 5f6c 616e  t: str, from_lan
+00016ab0: 6775 6167 653a 2073 7472 2c20 746f 5f6c  guage: str, to_l
+00016ac0: 616e 6775 6167 653a 2073 7472 2c20 7569  anguage: str, ui
+00016ad0: 643a 2073 7472 2920 2d3e 2064 6963 743a  d: str) -> dict:
+00016ae0: 0d0a 2020 2020 2020 2020 7369 676e 5f74  ..        sign_t
+00016af0: 6578 7420 3d20 2222 202b 2066 726f 6d5f  ext = "" + from_
+00016b00: 6c61 6e67 7561 6765 202b 2074 6f5f 6c61  language + to_la
+00016b10: 6e67 7561 6765 202b 2071 7565 7279 5f74  nguage + query_t
+00016b20: 6578 7420 2b20 2731 3039 3938 3434 3537  ext + '109984457
+00016b30: 2720 2023 2077 696e 646f 772e 5f5f 494e  '  # window.__IN
+00016b40: 4954 4941 4c5f 5354 4154 455f 5f2e 636f  ITIAL_STATE__.co
+00016b50: 6d6d 6f6e 2e43 4f4e 4649 472e 7365 6372  mmon.CONFIG.secr
+00016b60: 6574 436f 6465 0d0a 2020 2020 2020 2020  etCode..        
+00016b70: 7369 676e 203d 2068 6173 686c 6962 2e6d  sign = hashlib.m
+00016b80: 6435 2873 6967 6e5f 7465 7874 2e65 6e63  d5(sign_text.enc
+00016b90: 6f64 6528 2929 2e68 6578 6469 6765 7374  ode()).hexdigest
+00016ba0: 2829 0d0a 2020 2020 2020 2020 666f 726d  ()..        form
+00016bb0: 203d 207b 0d0a 2020 2020 2020 2020 2020   = {..          
+00016bc0: 2020 2266 726f 6d22 3a20 6672 6f6d 5f6c    "from": from_l
+00016bd0: 616e 6775 6167 652c 0d0a 2020 2020 2020  anguage,..      
+00016be0: 2020 2020 2020 2274 6f22 3a20 746f 5f6c        "to": to_l
+00016bf0: 616e 6775 6167 652c 0d0a 2020 2020 2020  anguage,..      
+00016c00: 2020 2020 2020 2274 6578 7422 3a20 7175        "text": qu
+00016c10: 6572 795f 7465 7874 2c0d 0a20 2020 2020  ery_text,..     
+00016c20: 2020 2020 2020 2022 7575 6964 223a 2075         "uuid": u
+00016c30: 6964 2c0d 0a20 2020 2020 2020 2020 2020  id,..           
+00016c40: 2022 7322 3a20 7369 676e 2c0d 0a20 2020   "s": sign,..   
+00016c50: 2020 2020 2020 2020 2022 636c 6965 6e74           "client
+00016c60: 223a 2022 7063 222c 2020 2320 7761 700d  ": "pc",  # wap.
+00016c70: 0a20 2020 2020 2020 2020 2020 2022 6672  .            "fr
+00016c80: 223a 2022 6272 6f77 7365 725f 7063 222c  ": "browser_pc",
+00016c90: 2020 2320 6272 6f77 7365 725f 7761 700d    # browser_wap.
+00016ca0: 0a20 2020 2020 2020 2020 2020 2022 6e65  .            "ne
+00016cb0: 6564 5163 223a 2022 3122 2c0d 0a20 2020  edQc": "1",..   
+00016cc0: 2020 2020 207d 0d0a 2020 2020 2020 2020       }..        
+00016cd0: 7265 7475 726e 2066 6f72 6d0d 0a0d 0a20  return form.... 
+00016ce0: 2020 2040 5473 652e 7469 6d65 5f73 7461     @Tse.time_sta
+00016cf0: 740d 0a20 2020 2040 5473 652e 6368 6563  t..    @Tse.chec
+00016d00: 6b5f 7175 6572 790d 0a20 2020 2064 6566  k_query..    def
+00016d10: 2073 6f67 6f75 5f61 7069 2873 656c 662c   sogou_api(self,
+00016d20: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
+00016d30: 2c20 6672 6f6d 5f6c 616e 6775 6167 653a  , from_language:
+00016d40: 2073 7472 203d 2027 6175 746f 272c 2074   str = 'auto', t
+00016d50: 6f5f 6c61 6e67 7561 6765 3a20 7374 7220  o_language: str 
+00016d60: 3d20 2765 6e27 2c20 2a2a 6b77 6172 6773  = 'en', **kwargs
+00016d70: 3a20 4170 694b 7761 7267 7354 7970 6529  : ApiKwargsType)
+00016d80: 202d 3e20 556e 696f 6e5b 7374 722c 2064   -> Union[str, d
+00016d90: 6963 745d 3a0d 0a20 2020 2020 2020 2022  ict]:..        "
+00016da0: 2222 0d0a 2020 2020 2020 2020 6874 7470  ""..        http
+00016db0: 733a 2f2f 6661 6e79 692e 736f 676f 752e  s://fanyi.sogou.
+00016dc0: 636f 6d2f 7465 7874 0d0a 2020 2020 2020  com/text..      
+00016dd0: 2020 3a70 6172 616d 2071 7565 7279 5f74    :param query_t
+00016de0: 6578 743a 2073 7472 2c20 6d75 7374 2e0d  ext: str, must..
+00016df0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00016e00: 6672 6f6d 5f6c 616e 6775 6167 653a 2073  from_language: s
+00016e10: 7472 2c20 6465 6661 756c 7420 2761 7574  tr, default 'aut
+00016e20: 6f27 2e0d 0a20 2020 2020 2020 203a 7061  o'...        :pa
+00016e30: 7261 6d20 746f 5f6c 616e 6775 6167 653a  ram to_language:
+00016e40: 2073 7472 2c20 6465 6661 756c 7420 2765   str, default 'e
+00016e50: 6e27 2e0d 0a20 2020 2020 2020 203a 7061  n'...        :pa
+00016e60: 7261 6d20 2a2a 6b77 6172 6773 3a0d 0a20  ram **kwargs:.. 
+00016e70: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00016e80: 7061 7261 6d20 7469 6d65 6f75 743a 2066  param timeout: f
+00016e90: 6c6f 6174 2c20 6465 6661 756c 7420 4e6f  loat, default No
+00016ea0: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
+00016eb0: 2020 2020 203a 7061 7261 6d20 7072 6f78       :param prox
+00016ec0: 6965 733a 2064 6963 742c 2064 6566 6175  ies: dict, defau
+00016ed0: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
+00016ee0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00016ef0: 2073 6c65 6570 5f73 6563 6f6e 6473 3a20   sleep_seconds: 
+00016f00: 666c 6f61 742c 2064 6566 6175 6c74 2030  float, default 0
+00016f10: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00016f20: 2020 203a 7061 7261 6d20 6973 5f64 6574     :param is_det
+00016f30: 6169 6c5f 7265 7375 6c74 3a20 626f 6f6c  ail_result: bool
+00016f40: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+00016f50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00016f60: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
+00016f70: 7265 5f6c 696d 6974 5f6f 665f 6c65 6e67  re_limit_of_leng
+00016f80: 7468 3a20 626f 6f6c 2c20 6465 6661 756c  th: bool, defaul
+00016f90: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+00016fa0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00016fb0: 206c 696d 6974 5f6f 665f 6c65 6e67 7468   limit_of_length
+00016fc0: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
+00016fd0: 3030 3030 2e0d 0a20 2020 2020 2020 2020  0000...         
+00016fe0: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+00016ff0: 5f69 676e 6f72 655f 656d 7074 795f 7175  _ignore_empty_qu
+00017000: 6572 793a 2062 6f6f 6c2c 2064 6566 6175  ery: bool, defau
+00017010: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+00017020: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00017030: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
+00017040: 5f61 6674 6572 5f66 7265 713a 2069 6e74  _after_freq: int
+00017050: 2c20 6465 6661 756c 7420 3130 3030 2e0d  , default 1000..
+00017060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017070: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
+00017080: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+00017090: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
+000170a0: 6175 6c74 2031 3530 302e 0d0a 2020 2020  ault 1500...    
+000170b0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+000170c0: 616d 2069 665f 7368 6f77 5f74 696d 655f  am if_show_time_
+000170d0: 7374 6174 3a20 626f 6f6c 2c20 6465 6661  stat: bool, defa
+000170e0: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+000170f0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00017100: 616d 2073 686f 775f 7469 6d65 5f73 7461  am show_time_sta
+00017110: 745f 7072 6563 6973 696f 6e3a 2069 6e74  t_precision: int
+00017120: 2c20 6465 6661 756c 7420 322e 0d0a 2020  , default 2...  
+00017130: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+00017140: 6172 616d 2069 665f 7072 696e 745f 7761  aram if_print_wa
+00017150: 726e 696e 673a 2062 6f6f 6c2c 2064 6566  rning: bool, def
+00017160: 6175 6c74 2054 7275 652e 0d0a 2020 2020  ault True...    
+00017170: 2020 2020 3a72 6574 7572 6e3a 2073 7472      :return: str
+00017180: 206f 7220 6469 6374 0d0a 2020 2020 2020   or dict..      
+00017190: 2020 2222 220d 0a0d 0a20 2020 2020 2020    """....       
+000171a0: 2074 696d 656f 7574 203d 206b 7761 7267   timeout = kwarg
+000171b0: 732e 6765 7428 2774 696d 656f 7574 272c  s.get('timeout',
+000171c0: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
+000171d0: 7072 6f78 6965 7320 3d20 6b77 6172 6773  proxies = kwargs
+000171e0: 2e67 6574 2827 7072 6f78 6965 7327 2c20  .get('proxies', 
+000171f0: 4e6f 6e65 290d 0a20 2020 2020 2020 2073  None)..        s
+00017200: 6c65 6570 5f73 6563 6f6e 6473 203d 206b  leep_seconds = k
+00017210: 7761 7267 732e 6765 7428 2773 6c65 6570  wargs.get('sleep
+00017220: 5f73 6563 6f6e 6473 272c 2030 290d 0a20  _seconds', 0).. 
+00017230: 2020 2020 2020 2069 665f 7072 696e 745f         if_print_
+00017240: 7761 726e 696e 6720 3d20 6b77 6172 6773  warning = kwargs
+00017250: 2e67 6574 2827 6966 5f70 7269 6e74 5f77  .get('if_print_w
+00017260: 6172 6e69 6e67 272c 2054 7275 6529 0d0a  arning', True)..
+00017270: 2020 2020 2020 2020 6973 5f64 6574 6169          is_detai
+00017280: 6c5f 7265 7375 6c74 203d 206b 7761 7267  l_result = kwarg
+00017290: 732e 6765 7428 2769 735f 6465 7461 696c  s.get('is_detail
+000172a0: 5f72 6573 756c 7427 2c20 4661 6c73 6529  _result', False)
+000172b0: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
+000172c0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
+000172d0: 7265 7120 3d20 6b77 6172 6773 2e67 6574  req = kwargs.get
+000172e0: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
+000172f0: 5f61 6674 6572 5f66 7265 7127 2c20 7365  _after_freq', se
+00017300: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
+00017310: 6f6e 5f66 7265 7129 0d0a 2020 2020 2020  on_freq)..      
+00017320: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
+00017330: 5f61 6674 6572 5f73 6563 6f6e 6473 203d  _after_seconds =
+00017340: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
+00017350: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+00017360: 725f 7365 636f 6e64 7327 2c20 7365 6c66  r_seconds', self
+00017370: 2e64 6566 6175 6c74 5f73 6573 7369 6f6e  .default_session
+00017380: 5f73 6563 6f6e 6473 290d 0a20 2020 2020  _seconds)..     
+00017390: 2020 2073 656c 662e 6368 6563 6b5f 696e     self.check_in
+000173a0: 7075 745f 6c69 6d69 7428 7175 6572 795f  put_limit(query_
+000173b0: 7465 7874 2c20 7365 6c66 2e69 6e70 7574  text, self.input
+000173c0: 5f6c 696d 6974 290d 0a0d 0a20 2020 2020  _limit)....     
+000173d0: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
+000173e0: 6e64 5f66 7265 7120 3d20 3120 6966 2073  nd_freq = 1 if s
+000173f0: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
+00017400: 2520 7570 6461 7465 5f73 6573 7369 6f6e  % update_session
+00017410: 5f61 6674 6572 5f66 7265 7120 213d 2030  _after_freq != 0
+00017420: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
+00017430: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
+00017440: 5f74 696d 6520 3d20 3120 6966 2074 696d  _time = 1 if tim
+00017450: 652e 7469 6d65 2829 202d 2073 656c 662e  e.time() - self.
+00017460: 6265 6769 6e5f 7469 6d65 203c 2075 7064  begin_time < upd
+00017470: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+00017480: 725f 7365 636f 6e64 7320 656c 7365 2030  r_seconds else 0
+00017490: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
+000174a0: 2028 7365 6c66 2e73 6573 7369 6f6e 2061   (self.session a
+000174b0: 6e64 2073 656c 662e 6c61 6e67 7561 6765  nd self.language
+000174c0: 5f6d 6170 2061 6e64 206e 6f74 5f75 7064  _map and not_upd
+000174d0: 6174 655f 636f 6e64 5f66 7265 7120 616e  ate_cond_freq an
+000174e0: 6420 6e6f 745f 7570 6461 7465 5f63 6f6e  d not_update_con
+000174f0: 645f 7469 6d65 2061 6e64 2073 656c 662e  d_time and self.
+00017500: 7575 6964 293a 0d0a 2020 2020 2020 2020  uuid):..        
+00017510: 2020 2020 7365 6c66 2e75 7569 6420 3d20      self.uuid = 
+00017520: 7374 7228 7575 6964 2e75 7569 6434 2829  str(uuid.uuid4()
+00017530: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+00017540: 656c 662e 6265 6769 6e5f 7469 6d65 203d  elf.begin_time =
+00017550: 2074 696d 652e 7469 6d65 2829 0d0a 2020   time.time()..  
+00017560: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+00017570: 6573 7369 6f6e 203d 2072 6571 7565 7374  ession = request
+00017580: 732e 5365 7373 696f 6e28 290d 0a20 2020  s.Session()..   
+00017590: 2020 2020 2020 2020 2068 6f73 745f 6874           host_ht
+000175a0: 6d6c 203d 2073 656c 662e 7365 7373 696f  ml = self.sessio
+000175b0: 6e2e 6765 7428 7365 6c66 2e68 6f73 745f  n.get(self.host_
+000175c0: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
+000175d0: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
+000175e0: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+000175f0: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+00017600: 292e 7465 7874 0d0a 2020 2020 2020 2020  ).text..        
+00017610: 2020 2020 6465 6275 675f 6c61 6e67 5f6b      debug_lang_k
+00017620: 7761 7267 7320 3d20 7365 6c66 2e64 6562  wargs = self.deb
+00017630: 7567 5f6c 616e 675f 6b77 6172 6773 2866  ug_lang_kwargs(f
+00017640: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
+00017650: 5f6c 616e 6775 6167 652c 2073 656c 662e  _language, self.
+00017660: 6465 6661 756c 745f 6672 6f6d 5f6c 616e  default_from_lan
+00017670: 6775 6167 652c 2069 665f 7072 696e 745f  guage, if_print_
+00017680: 7761 726e 696e 6729 0d0a 2020 2020 2020  warning)..      
+00017690: 2020 2020 2020 7365 6c66 2e6c 616e 6775        self.langu
+000176a0: 6167 655f 6d61 7020 3d20 7365 6c66 2e67  age_map = self.g
+000176b0: 6574 5f6c 616e 6775 6167 655f 6d61 7028  et_language_map(
+000176c0: 686f 7374 5f68 746d 6c2c 2073 656c 662e  host_html, self.
+000176d0: 6765 745f 6c61 6e67 7561 6765 5f6f 6c64  get_language_old
+000176e0: 5f75 726c 2c20 7365 6c66 2e73 6573 7369  _url, self.sessi
+000176f0: 6f6e 2c20 7469 6d65 6f75 742c 2070 726f  on, timeout, pro
+00017700: 7869 6573 2c20 2a2a 6465 6275 675f 6c61  xies, **debug_la
+00017710: 6e67 5f6b 7761 7267 7329 0d0a 0d0a 2020  ng_kwargs)....  
+00017720: 2020 2020 2020 6672 6f6d 5f6c 616e 6775        from_langu
+00017730: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
+00017740: 203d 2073 656c 662e 6368 6563 6b5f 6c61   = self.check_la
+00017750: 6e67 7561 6765 2866 726f 6d5f 6c61 6e67  nguage(from_lang
+00017760: 7561 6765 2c20 746f 5f6c 616e 6775 6167  uage, to_languag
+00017770: 652c 2073 656c 662e 6c61 6e67 7561 6765  e, self.language
+00017780: 5f6d 6170 2c20 6f75 7470 7574 5f7a 683d  _map, output_zh=
+00017790: 7365 6c66 2e6f 7574 7075 745f 7a68 290d  self.output_zh).
+000177a0: 0a0d 0a20 2020 2020 2020 2070 6179 6c6f  ...        paylo
+000177b0: 6164 203d 2073 656c 662e 6765 745f 666f  ad = self.get_fo
+000177c0: 726d 2871 7565 7279 5f74 6578 742c 2066  rm(query_text, f
+000177d0: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
+000177e0: 5f6c 616e 6775 6167 652c 2073 656c 662e  _language, self.
+000177f0: 7575 6964 290d 0a20 2020 2020 2020 2072  uuid)..        r
+00017800: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
+00017810: 706f 7374 2873 656c 662e 6170 695f 7572  post(self.api_ur
+00017820: 6c2c 2068 6561 6465 7273 3d73 656c 662e  l, headers=self.
+00017830: 6170 695f 6865 6164 6572 732c 2064 6174  api_headers, dat
+00017840: 613d 7061 796c 6f61 642c 2074 696d 656f  a=payload, timeo
+00017850: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
+00017860: 6965 733d 7072 6f78 6965 7329 0d0a 2020  ies=proxies)..  
+00017870: 2020 2020 2020 722e 7261 6973 655f 666f        r.raise_fo
+00017880: 725f 7374 6174 7573 2829 0d0a 2020 2020  r_status()..    
+00017890: 2020 2020 6461 7461 203d 2072 2e6a 736f      data = r.jso
+000178a0: 6e28 290d 0a20 2020 2020 2020 2074 696d  n()..        tim
+000178b0: 652e 736c 6565 7028 736c 6565 705f 7365  e.sleep(sleep_se
+000178c0: 636f 6e64 7329 0d0a 2020 2020 2020 2020  conds)..        
+000178d0: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
+000178e0: 202b 3d20 310d 0a20 2020 2020 2020 2072   += 1..        r
+000178f0: 6574 7572 6e20 6461 7461 2069 6620 6973  eturn data if is
+00017900: 5f64 6574 6169 6c5f 7265 7375 6c74 2065  _detail_result e
+00017910: 6c73 6520 6461 7461 5b27 6461 7461 275d  lse data['data']
+00017920: 5b27 7472 616e 736c 6174 6527 5d5b 2764  ['translate']['d
+00017930: 6974 275d 0d0a 0d0a 0d0a 636c 6173 7320  it']......class 
+00017940: 4361 6979 756e 2854 7365 293a 0d0a 2020  Caiyun(Tse):..  
+00017950: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
+00017960: 656c 6629 3a0d 0a20 2020 2020 2020 2073  elf):..        s
+00017970: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
+00017980: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00017990: 6265 6769 6e5f 7469 6d65 203d 2074 696d  begin_time = tim
+000179a0: 652e 7469 6d65 2829 0d0a 2020 2020 2020  e.time()..      
+000179b0: 2020 7365 6c66 2e68 6f73 745f 7572 6c20    self.host_url 
+000179c0: 3d20 2768 7474 7073 3a2f 2f66 616e 7969  = 'https://fanyi
+000179d0: 2e63 6169 7975 6e61 7070 2e63 6f6d 270d  .caiyunapp.com'.
+000179e0: 0a20 2020 2020 2020 2073 656c 662e 6170  .        self.ap
+000179f0: 695f 7572 6c20 3d20 2768 7474 7073 3a2f  i_url = 'https:/
+00017a00: 2f61 7069 2e69 6e74 6572 7072 6574 6572  /api.interpreter
+00017a10: 2e63 6169 7975 6e61 692e 636f 6d2f 7631  .caiyunai.com/v1
+00017a20: 2f74 7261 6e73 6c61 746f 7227 0d0a 2020  /translator'..  
+00017a30: 2020 2020 2020 7365 6c66 2e67 6574 5f6a        self.get_j
+00017a40: 735f 7061 7474 6572 6e20 3d20 272f 6173  s_pattern = '/as
+00017a50: 7365 7473 2f69 6e64 6578 2e28 2e2a 3f29  sets/index.(.*?)
+00017a60: 2e6a 7327 0d0a 2020 2020 2020 2020 7365  .js'..        se
+00017a70: 6c66 2e67 6574 5f6a 735f 7572 6c20 3d20  lf.get_js_url = 
+00017a80: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
+00017a90: 6c66 2e67 6574 5f6a 7774 5f75 726c 203d  lf.get_jwt_url =
+00017aa0: 2027 6874 7470 733a 2f2f 6170 692e 696e   'https://api.in
+00017ab0: 7465 7270 7265 7465 722e 6361 6979 756e  terpreter.caiyun
+00017ac0: 6169 2e63 6f6d 2f76 312f 7573 6572 2f6a  ai.com/v1/user/j
+00017ad0: 7774 2f67 656e 6572 6174 6527 0d0a 2020  wt/generate'..  
+00017ae0: 2020 2020 2020 7365 6c66 2e68 6f73 745f        self.host_
+00017af0: 6865 6164 6572 7320 3d20 7365 6c66 2e67  headers = self.g
+00017b00: 6574 5f68 6561 6465 7273 2873 656c 662e  et_headers(self.
+00017b10: 686f 7374 5f75 726c 2c20 6966 5f61 7069  host_url, if_api
+00017b20: 3d46 616c 7365 2c20 6966 5f72 6566 6572  =False, if_refer
+00017b30: 6572 5f66 6f72 5f68 6f73 743d 5472 7565  er_for_host=True
+00017b40: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00017b50: 6170 695f 6865 6164 6572 7320 3d20 7365  api_headers = se
+00017b60: 6c66 2e67 6574 5f68 6561 6465 7273 2873  lf.get_headers(s
+00017b70: 656c 662e 686f 7374 5f75 726c 2c20 6966  elf.host_url, if
+00017b80: 5f61 7069 3d54 7275 652c 2069 665f 616a  _api=True, if_aj
+00017b90: 6178 5f66 6f72 5f61 7069 3d46 616c 7365  ax_for_api=False
+00017ba0: 2c20 6966 5f6a 736f 6e5f 666f 725f 6170  , if_json_for_ap
+00017bb0: 693d 5472 7565 290d 0a20 2020 2020 2020  i=True)..       
+00017bc0: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+00017bd0: 6170 203d 204e 6f6e 650d 0a20 2020 2020  ap = None..     
+00017be0: 2020 2073 656c 662e 7365 7373 696f 6e20     self.session 
+00017bf0: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+00017c00: 7365 6c66 2e70 726f 6665 7373 696f 6e61  self.professiona
+00017c10: 6c5f 6669 656c 6420 3d20 284e 6f6e 652c  l_field = (None,
+00017c20: 2022 6d65 6469 6369 6e65 222c 2022 6c61   "medicine", "la
+00017c30: 7722 2c20 226d 6163 6869 6e65 7279 222c  w", "machinery",
+00017c40: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00017c50: 6272 6f77 7365 725f 6461 7461 203d 207b  browser_data = {
+00017c60: 2762 726f 7773 6572 5f69 6427 3a20 2727  'browser_id': ''
+00017c70: 2e6a 6f69 6e28 7261 6e64 6f6d 2e73 616d  .join(random.sam
+00017c80: 706c 6528 2761 6263 6465 6667 6869 6a6b  ple('abcdefghijk
+00017c90: 6c6d 6e6f 7071 7273 7475 7677 7879 7a30  lmnopqrstuvwxyz0
+00017ca0: 3132 3334 3536 3738 3927 2c20 3332 2929  123456789', 32))
+00017cb0: 7d0d 0a20 2020 2020 2020 2073 656c 662e  }..        self.
+00017cc0: 6e6f 726d 616c 5f6b 6579 203d 2027 4142  normal_key = 'AB
+00017cd0: 4344 4546 4748 494a 4b4c 4d4e 4f50 5152  CDEFGHIJKLMNOPQR
+00017ce0: 5354 5556 5758 595a 6162 6364 6566 6768  STUVWXYZabcdefgh
+00017cf0: 696a 6b6c 6d6e 6f70 7172 7374 7576 7778  ijklmnopqrstuvwx
+00017d00: 797a 2720 2b20 2730 3132 3334 3536 3738  yz' + '012345678
+00017d10: 3927 202b 2027 3d2e 2b2d 5f2f 270d 0a20  9' + '=.+-_/'.. 
+00017d20: 2020 2020 2020 2073 656c 662e 6369 7068         self.ciph
+00017d30: 6572 5f6b 6579 203d 2027 4e4f 5051 5253  er_key = 'NOPQRS
+00017d40: 5455 5657 5859 5a41 4243 4445 4647 4849  TUVWXYZABCDEFGHI
+00017d50: 4a4b 4c4d 6e6f 7071 7273 7475 7677 7879  JKLMnopqrstuvwxy
+00017d60: 7a61 6263 6465 6667 6869 6a6b 6c6d 2720  zabcdefghijklm' 
+00017d70: 2b20 2730 3132 3334 3536 3738 3927 202b  + '0123456789' +
+00017d80: 2027 3d2e 2b2d 5f2f 270d 0a20 2020 2020   '=.+-_/'..     
+00017d90: 2020 2073 656c 662e 6465 6372 7970 745f     self.decrypt_
+00017da0: 6469 6374 696f 6e61 7279 203d 2073 656c  dictionary = sel
+00017db0: 662e 6372 7970 7428 6966 5f64 653d 5472  f.crypt(if_de=Tr
+00017dc0: 7565 290d 0a20 2020 2020 2020 2073 656c  ue)..        sel
+00017dd0: 662e 746b 203d 204e 6f6e 650d 0a20 2020  f.tk = None..   
+00017de0: 2020 2020 2073 656c 662e 6a77 7420 3d20       self.jwt = 
+00017df0: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
+00017e00: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
+00017e10: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
+00017e20: 2e6f 7574 7075 745f 7a68 203d 2027 7a68  .output_zh = 'zh
+00017e30: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+00017e40: 696e 7075 745f 6c69 6d69 7420 3d20 696e  input_limit = in
+00017e50: 7428 3565 3329 0d0a 2020 2020 2020 2020  t(5e3)..        
+00017e60: 7365 6c66 2e64 6566 6175 6c74 5f66 726f  self.default_fro
+00017e70: 6d5f 6c61 6e67 7561 6765 203d 2073 656c  m_language = sel
+00017e80: 662e 6f75 7470 7574 5f7a 680d 0a0d 0a20  f.output_zh.... 
+00017e90: 2020 2040 5473 652e 6465 6275 675f 6c61     @Tse.debug_la
+00017ea0: 6e67 7561 6765 5f6d 6170 0d0a 2020 2020  nguage_map..    
+00017eb0: 6465 6620 6765 745f 6c61 6e67 7561 6765  def get_language
+00017ec0: 5f6d 6170 2873 656c 662c 206a 735f 6874  _map(self, js_ht
+00017ed0: 6d6c 3a20 7374 722c 202a 2a6b 7761 7267  ml: str, **kwarg
+00017ee0: 733a 204c 616e 674d 6170 4b77 6172 6773  s: LangMapKwargs
+00017ef0: 5479 7065 2920 2d3e 2064 6963 743a 0d0a  Type) -> dict:..
+00017f00: 2020 2020 2020 2020 7265 7475 726e 2065          return e
+00017f10: 7865 636a 732e 6576 616c 2872 652e 636f  xecjs.eval(re.co
+00017f20: 6d70 696c 6528 273d 7b61 7574 6f3a 5c5c  mpile('={auto:\\
+00017f30: 5b28 2e2a 3f29 7d27 292e 7365 6172 6368  [(.*?)}').search
+00017f40: 286a 735f 6874 6d6c 292e 6772 6f75 7028  (js_html).group(
+00017f50: 295b 313a 5d29 0d0a 0d0a 2020 2020 6465  )[1:])....    de
+00017f60: 6620 6765 745f 746b 2873 656c 662c 206a  f get_tk(self, j
+00017f70: 735f 6874 6d6c 3a20 7374 7229 202d 3e20  s_html: str) -> 
+00017f80: 7374 723a 0d0a 2020 2020 2020 2020 7265  str:..        re
+00017f90: 7475 726e 2072 652e 636f 6d70 696c 6528  turn re.compile(
+00017fa0: 2768 6561 6465 7273 5c5c 5b22 582d 4175  'headers\\["X-Au
+00017fb0: 7468 6f72 697a 6174 696f 6e22 5d3d 2228  thorization"]="(
+00017fc0: 2e2a 3f29 222c 2729 2e66 696e 6461 6c6c  .*?)",').findall
+00017fd0: 286a 735f 6874 6d6c 295b 305d 0d0a 0d0a  (js_html)[0]....
+00017fe0: 2020 2020 2320 6465 6620 6765 745f 6a77      # def get_jw
+00017ff0: 7428 7365 6c66 2c20 6272 6f77 7365 725f  t(self, browser_
+00018000: 6964 3a20 7374 722c 2061 7069 5f68 6561  id: str, api_hea
+00018010: 6465 7273 3a20 6469 6374 2c20 7373 3a20  ders: dict, ss: 
+00018020: 5365 7373 696f 6e54 7970 652c 2074 696d  SessionType, tim
+00018030: 656f 7574 3a20 666c 6f61 742c 2070 726f  eout: float, pro
+00018040: 7869 6573 3a20 6469 6374 2920 2d3e 2073  xies: dict) -> s
+00018050: 7472 3a0d 0a20 2020 2023 2020 2020 2064  tr:..    #     d
+00018060: 6174 6120 3d20 7b22 6272 6f77 7365 725f  ata = {"browser_
+00018070: 6964 223a 2062 726f 7773 6572 5f69 647d  id": browser_id}
+00018080: 0d0a 2020 2020 2320 2020 2020 7265 7475  ..    #     retu
+00018090: 726e 2073 732e 706f 7374 2873 656c 662e  rn ss.post(self.
+000180a0: 6765 745f 6a77 745f 7572 6c2c 206a 736f  get_jwt_url, jso
+000180b0: 6e3d 6461 7461 2c20 6865 6164 6572 733d  n=data, headers=
+000180c0: 6170 695f 6865 6164 6572 732c 2074 696d  api_headers, tim
+000180d0: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
+000180e0: 6f78 6965 733d 7072 6f78 6965 7329 2e6a  oxies=proxies).j
+000180f0: 736f 6e28 295b 276a 7774 275d 0d0a 0d0a  son()['jwt']....
+00018100: 2020 2020 6465 6620 6372 7970 7428 7365      def crypt(se
+00018110: 6c66 2c20 6966 5f64 653a 2062 6f6f 6c20  lf, if_de: bool 
+00018120: 3d20 5472 7565 2920 2d3e 2064 6963 743a  = True) -> dict:
+00018130: 0d0a 2020 2020 2020 2020 6966 2069 665f  ..        if if_
+00018140: 6465 3a0d 0a20 2020 2020 2020 2020 2020  de:..           
+00018150: 2072 6574 7572 6e20 7b6b 3a20 7620 666f   return {k: v fo
+00018160: 7220 6b2c 2076 2069 6e20 7a69 7028 7365  r k, v in zip(se
+00018170: 6c66 2e63 6970 6865 725f 6b65 792c 2073  lf.cipher_key, s
+00018180: 656c 662e 6e6f 726d 616c 5f6b 6579 297d  elf.normal_key)}
+00018190: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+000181a0: 207b 763a 206b 2066 6f72 206b 2c20 7620   {v: k for k, v 
+000181b0: 696e 207a 6970 2873 656c 662e 6369 7068  in zip(self.ciph
+000181c0: 6572 5f6b 6579 2c20 7365 6c66 2e6e 6f72  er_key, self.nor
+000181d0: 6d61 6c5f 6b65 7929 7d0d 0a0d 0a20 2020  mal_key)}....   
+000181e0: 2064 6566 2065 6e63 7279 7074 2873 656c   def encrypt(sel
+000181f0: 662c 2070 6c61 696e 5f74 6578 743a 2073  f, plain_text: s
+00018200: 7472 2920 2d3e 2073 7472 3a0d 0a20 2020  tr) -> str:..   
+00018210: 2020 2020 2065 6e63 7279 7074 5f64 6963       encrypt_dic
+00018220: 7469 6f6e 6172 7920 3d20 7365 6c66 2e63  tionary = self.c
+00018230: 7279 7074 2869 665f 6465 3d46 616c 7365  rypt(if_de=False
+00018240: 290d 0a20 2020 2020 2020 205f 6369 7068  )..        _ciph
+00018250: 6572 5f74 6578 7420 3d20 6261 7365 3634  er_text = base64
+00018260: 2e62 3634 656e 636f 6465 2870 6c61 696e  .b64encode(plain
+00018270: 5f74 6578 742e 656e 636f 6465 2829 292e  _text.encode()).
+00018280: 6465 636f 6465 2829 0d0a 2020 2020 2020  decode()..      
+00018290: 2020 7265 7475 726e 2027 272e 6a6f 696e    return ''.join
+000182a0: 286c 6973 7428 6d61 7028 6c61 6d62 6461  (list(map(lambda
+000182b0: 206b 3a20 656e 6372 7970 745f 6469 6374   k: encrypt_dict
+000182c0: 696f 6e61 7279 5b6b 5d2c 205f 6369 7068  ionary[k], _ciph
+000182d0: 6572 5f74 6578 7429 2929 0d0a 0d0a 2020  er_text)))....  
+000182e0: 2020 6465 6620 6465 6372 7970 7428 7365    def decrypt(se
+000182f0: 6c66 2c20 6369 7068 6572 5f74 6578 743a  lf, cipher_text:
+00018300: 2073 7472 2920 2d3e 2073 7472 3a0d 0a20   str) -> str:.. 
+00018310: 2020 2020 2020 205f 6369 7068 6572 7465         _cipherte
+00018320: 7874 203d 2027 272e 6a6f 696e 286c 6973  xt = ''.join(lis
+00018330: 7428 6d61 7028 6c61 6d62 6461 206b 3a20  t(map(lambda k: 
+00018340: 7365 6c66 2e64 6563 7279 7074 5f64 6963  self.decrypt_dic
+00018350: 7469 6f6e 6172 795b 6b5d 2c20 6369 7068  tionary[k], ciph
+00018360: 6572 5f74 6578 7429 2929 0d0a 2020 2020  er_text)))..    
+00018370: 2020 2020 7265 7475 726e 2062 6173 6536      return base6
+00018380: 342e 6236 3464 6563 6f64 6528 5f63 6970  4.b64decode(_cip
+00018390: 6865 7274 6578 7429 2e64 6563 6f64 6528  hertext).decode(
+000183a0: 290d 0a0d 0a20 2020 2040 5473 652e 7469  )....    @Tse.ti
+000183b0: 6d65 5f73 7461 740d 0a20 2020 2040 5473  me_stat..    @Ts
+000183c0: 652e 6368 6563 6b5f 7175 6572 790d 0a20  e.check_query.. 
+000183d0: 2020 2064 6566 2063 6169 7975 6e5f 6170     def caiyun_ap
+000183e0: 6928 7365 6c66 2c20 7175 6572 795f 7465  i(self, query_te
+000183f0: 7874 3a20 7374 722c 2066 726f 6d5f 6c61  xt: str, from_la
+00018400: 6e67 7561 6765 3a20 7374 7220 3d20 2761  nguage: str = 'a
+00018410: 7574 6f27 2c20 746f 5f6c 616e 6775 6167  uto', to_languag
+00018420: 653a 2073 7472 203d 2027 656e 272c 202a  e: str = 'en', *
+00018430: 2a6b 7761 7267 733a 2041 7069 4b77 6172  *kwargs: ApiKwar
+00018440: 6773 5479 7065 2920 2d3e 2055 6e69 6f6e  gsType) -> Union
+00018450: 5b73 7472 2c20 6469 6374 5d3a 0d0a 2020  [str, dict]:..  
+00018460: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00018470: 2020 2068 7474 7073 3a2f 2f66 616e 7969     https://fanyi
+00018480: 2e63 6169 7975 6e61 7070 2e63 6f6d 0d0a  .caiyunapp.com..
+00018490: 2020 2020 2020 2020 3a70 6172 616d 2071          :param q
+000184a0: 7565 7279 5f74 6578 743a 2073 7472 2c20  uery_text: str, 
+000184b0: 6d75 7374 2e0d 0a20 2020 2020 2020 203a  must...        :
+000184c0: 7061 7261 6d20 6672 6f6d 5f6c 616e 6775  param from_langu
+000184d0: 6167 653a 2073 7472 2c20 6465 6661 756c  age: str, defaul
+000184e0: 7420 2761 7574 6f27 2e0d 0a20 2020 2020  t 'auto'...     
+000184f0: 2020 203a 7061 7261 6d20 746f 5f6c 616e     :param to_lan
+00018500: 6775 6167 653a 2073 7472 2c20 6465 6661  guage: str, defa
+00018510: 756c 7420 2765 6e27 2e0d 0a20 2020 2020  ult 'en'...     
+00018520: 2020 203a 7061 7261 6d20 2a2a 6b77 6172     :param **kwar
+00018530: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
+00018540: 2020 2020 203a 7061 7261 6d20 7469 6d65       :param time
+00018550: 6f75 743a 2066 6c6f 6174 2c20 6465 6661  out: float, defa
+00018560: 756c 7420 4e6f 6e65 2e0d 0a20 2020 2020  ult None...     
+00018570: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00018580: 6d20 7072 6f78 6965 733a 2064 6963 742c  m proxies: dict,
+00018590: 2064 6566 6175 6c74 204e 6f6e 652e 0d0a   default None...
+000185a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000185b0: 3a70 6172 616d 2073 6c65 6570 5f73 6563  :param sleep_sec
+000185c0: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
+000185d0: 6175 6c74 2030 2e0d 0a20 2020 2020 2020  ault 0...       
+000185e0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+000185f0: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
+00018600: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+00018610: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
+00018620: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00018630: 665f 6967 6e6f 7265 5f6c 696d 6974 5f6f  f_ignore_limit_o
+00018640: 665f 6c65 6e67 7468 3a20 626f 6f6c 2c20  f_length: bool, 
+00018650: 6465 6661 756c 7420 4661 6c73 652e 0d0a  default False...
+00018660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018670: 3a70 6172 616d 206c 696d 6974 5f6f 665f  :param limit_of_
+00018680: 6c65 6e67 7468 3a20 696e 742c 2064 6566  length: int, def
+00018690: 6175 6c74 2032 3030 3030 2e0d 0a20 2020  ault 20000...   
+000186a0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+000186b0: 7261 6d20 6966 5f69 676e 6f72 655f 656d  ram if_ignore_em
+000186c0: 7074 795f 7175 6572 793a 2062 6f6f 6c2c  pty_query: bool,
+000186d0: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
+000186e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000186f0: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
+00018700: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
+00018710: 713a 2069 6e74 2c20 6465 6661 756c 7420  q: int, default 
+00018720: 3130 3030 2e0d 0a20 2020 2020 2020 2020  1000...         
+00018730: 2020 2020 2020 203a 7061 7261 6d20 7570         :param up
+00018740: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+00018750: 6572 5f73 6563 6f6e 6473 3a20 666c 6f61  er_seconds: floa
+00018760: 742c 2064 6566 6175 6c74 2031 3530 302e  t, default 1500.
+00018770: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018780: 2020 3a70 6172 616d 2069 665f 7368 6f77    :param if_show
+00018790: 5f74 696d 655f 7374 6174 3a20 626f 6f6c  _time_stat: bool
+000187a0: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+000187b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000187c0: 2020 3a70 6172 616d 2073 686f 775f 7469    :param show_ti
+000187d0: 6d65 5f73 7461 745f 7072 6563 6973 696f  me_stat_precisio
+000187e0: 6e3a 2069 6e74 2c20 6465 6661 756c 7420  n: int, default 
+000187f0: 322e 0d0a 2020 2020 2020 2020 2020 2020  2...            
+00018800: 2020 2020 3a70 6172 616d 2069 665f 7072      :param if_pr
+00018810: 696e 745f 7761 726e 696e 673a 2062 6f6f  int_warning: boo
+00018820: 6c2c 2064 6566 6175 6c74 2054 7275 652e  l, default True.
+00018830: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018840: 2020 3a70 6172 616d 2070 726f 6665 7373    :param profess
+00018850: 696f 6e61 6c5f 6669 656c 643a 2073 7472  ional_field: str
+00018860: 2c20 6465 6661 756c 7420 4e6f 6e65 2c20  , default None, 
+00018870: 6368 6f6f 7365 2066 726f 6d20 284e 6f6e  choose from (Non
+00018880: 652c 2022 6d65 6469 6369 6e65 222c 226c  e, "medicine","l
+00018890: 6177 222c 226d 6163 6869 6e65 7279 2229  aw","machinery")
+000188a0: 0d0a 2020 2020 2020 2020 3a72 6574 7572  ..        :retur
+000188b0: 6e3a 2073 7472 206f 7220 6469 6374 0d0a  n: str or dict..
+000188c0: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
+000188d0: 2020 2020 2020 2075 7365 5f64 6f6d 6169         use_domai
+000188e0: 6e20 3d20 6b77 6172 6773 2e67 6574 2827  n = kwargs.get('
+000188f0: 7072 6f66 6573 7369 6f6e 616c 5f66 6965  professional_fie
+00018900: 6c64 272c 204e 6f6e 6529 0d0a 2020 2020  ld', None)..    
+00018910: 2020 2020 6966 2075 7365 5f64 6f6d 6169      if use_domai
+00018920: 6e20 6e6f 7420 696e 2028 4e6f 6e65 2c20  n not in (None, 
+00018930: 226d 6564 6963 696e 6522 2c20 226c 6177  "medicine", "law
+00018940: 222c 2022 6d61 6368 696e 6572 7922 293a  ", "machinery"):
+00018950: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
+00018960: 6973 6520 5472 616e 736c 6174 6f72 4572  ise TranslatorEr
+00018970: 726f 720d 0a0d 0a20 2020 2020 2020 2074  ror....        t
+00018980: 696d 656f 7574 203d 206b 7761 7267 732e  imeout = kwargs.
+00018990: 6765 7428 2774 696d 656f 7574 272c 204e  get('timeout', N
+000189a0: 6f6e 6529 0d0a 2020 2020 2020 2020 7072  one)..        pr
+000189b0: 6f78 6965 7320 3d20 6b77 6172 6773 2e67  oxies = kwargs.g
+000189c0: 6574 2827 7072 6f78 6965 7327 2c20 4e6f  et('proxies', No
+000189d0: 6e65 290d 0a20 2020 2020 2020 2073 6c65  ne)..        sle
+000189e0: 6570 5f73 6563 6f6e 6473 203d 206b 7761  ep_seconds = kwa
+000189f0: 7267 732e 6765 7428 2773 6c65 6570 5f73  rgs.get('sleep_s
+00018a00: 6563 6f6e 6473 272c 2030 290d 0a20 2020  econds', 0)..   
+00018a10: 2020 2020 2069 665f 7072 696e 745f 7761       if_print_wa
+00018a20: 726e 696e 6720 3d20 6b77 6172 6773 2e67  rning = kwargs.g
+00018a30: 6574 2827 6966 5f70 7269 6e74 5f77 6172  et('if_print_war
+00018a40: 6e69 6e67 272c 2054 7275 6529 0d0a 2020  ning', True)..  
+00018a50: 2020 2020 2020 6973 5f64 6574 6169 6c5f        is_detail_
+00018a60: 7265 7375 6c74 203d 206b 7761 7267 732e  result = kwargs.
+00018a70: 6765 7428 2769 735f 6465 7461 696c 5f72  get('is_detail_r
+00018a80: 6573 756c 7427 2c20 4661 6c73 6529 0d0a  esult', False)..
+00018a90: 2020 2020 2020 2020 7570 6461 7465 5f73          update_s
+00018aa0: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
+00018ab0: 7120 3d20 6b77 6172 6773 2e67 6574 2827  q = kwargs.get('
+00018ac0: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+00018ad0: 6674 6572 5f66 7265 7127 2c20 7365 6c66  fter_freq', self
+00018ae0: 2e64 6566 6175 6c74 5f73 6573 7369 6f6e  .default_session
+00018af0: 5f66 7265 7129 0d0a 2020 2020 2020 2020  _freq)..        
+00018b00: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+00018b10: 6674 6572 5f73 6563 6f6e 6473 203d 206b  fter_seconds = k
+00018b20: 7761 7267 732e 6765 7428 2775 7064 6174  wargs.get('updat
+00018b30: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
+00018b40: 7365 636f 6e64 7327 2c20 7365 6c66 2e64  seconds', self.d
+00018b50: 6566 6175 6c74 5f73 6573 7369 6f6e 5f73  efault_session_s
+00018b60: 6563 6f6e 6473 290d 0a20 2020 2020 2020  econds)..       
+00018b70: 2073 656c 662e 6368 6563 6b5f 696e 7075   self.check_inpu
+00018b80: 745f 6c69 6d69 7428 7175 6572 795f 7465  t_limit(query_te
+00018b90: 7874 2c20 7365 6c66 2e69 6e70 7574 5f6c  xt, self.input_l
+00018ba0: 696d 6974 290d 0a0d 0a20 2020 2020 2020  imit)....       
+00018bb0: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
+00018bc0: 5f66 7265 7120 3d20 3120 6966 2073 656c  _freq = 1 if sel
+00018bd0: 662e 7175 6572 795f 636f 756e 7420 2520  f.query_count % 
+00018be0: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+00018bf0: 6674 6572 5f66 7265 7120 213d 2030 2065  fter_freq != 0 e
+00018c00: 6c73 6520 300d 0a20 2020 2020 2020 206e  lse 0..        n
+00018c10: 6f74 5f75 7064 6174 655f 636f 6e64 5f74  ot_update_cond_t
+00018c20: 696d 6520 3d20 3120 6966 2074 696d 652e  ime = 1 if time.
+00018c30: 7469 6d65 2829 202d 2073 656c 662e 6265  time() - self.be
+00018c40: 6769 6e5f 7469 6d65 203c 2075 7064 6174  gin_time < updat
+00018c50: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
+00018c60: 7365 636f 6e64 7320 656c 7365 2030 0d0a  seconds else 0..
+00018c70: 2020 2020 2020 2020 6966 206e 6f74 2028          if not (
+00018c80: 7365 6c66 2e73 6573 7369 6f6e 2061 6e64  self.session and
+00018c90: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+00018ca0: 6170 2061 6e64 206e 6f74 5f75 7064 6174  ap and not_updat
+00018cb0: 655f 636f 6e64 5f66 7265 7120 616e 6420  e_cond_freq and 
+00018cc0: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
+00018cd0: 7469 6d65 2061 6e64 2073 656c 662e 746b  time and self.tk
+00018ce0: 2061 6e64 2073 656c 662e 6a77 7429 3a0d   and self.jwt):.
+00018cf0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00018d00: 662e 6265 6769 6e5f 7469 6d65 203d 2074  f.begin_time = t
+00018d10: 696d 652e 7469 6d65 2829 0d0a 2020 2020  ime.time()..    
+00018d20: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
+00018d30: 7369 6f6e 203d 2072 6571 7565 7374 732e  sion = requests.
+00018d40: 5365 7373 696f 6e28 290d 0a20 2020 2020  Session()..     
+00018d50: 2020 2020 2020 2068 6f73 745f 6874 6d6c         host_html
+00018d60: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
+00018d70: 6765 7428 7365 6c66 2e68 6f73 745f 7572  get(self.host_ur
+00018d80: 6c2c 2068 6561 6465 7273 3d73 656c 662e  l, headers=self.
+00018d90: 686f 7374 5f68 6561 6465 7273 2c20 7469  host_headers, ti
+00018da0: 6d65 6f75 743d 7469 6d65 6f75 742c 2070  meout=timeout, p
+00018db0: 726f 7869 6573 3d70 726f 7869 6573 292e  roxies=proxies).
+00018dc0: 7465 7874 0d0a 2020 2020 2020 2020 2020  text..          
+00018dd0: 2020 6a73 5f75 726c 5f70 6174 6820 3d20    js_url_path = 
+00018de0: 7265 2e63 6f6d 7069 6c65 2873 656c 662e  re.compile(self.
+00018df0: 6765 745f 6a73 5f70 6174 7465 726e 292e  get_js_pattern).
+00018e00: 7365 6172 6368 2868 6f73 745f 6874 6d6c  search(host_html
+00018e10: 292e 6772 6f75 7028 290d 0a20 2020 2020  ).group()..     
+00018e20: 2020 2020 2020 2073 656c 662e 6765 745f         self.get_
+00018e30: 6a73 5f75 726c 203d 2027 272e 6a6f 696e  js_url = ''.join
+00018e40: 285b 7365 6c66 2e68 6f73 745f 7572 6c2c  ([self.host_url,
+00018e50: 206a 735f 7572 6c5f 7061 7468 5d29 0d0a   js_url_path])..
+00018e60: 2020 2020 2020 2020 2020 2020 6a73 5f68              js_h
+00018e70: 746d 6c20 3d20 7365 6c66 2e73 6573 7369  tml = self.sessi
+00018e80: 6f6e 2e67 6574 2873 656c 662e 6765 745f  on.get(self.get_
+00018e90: 6a73 5f75 726c 2c20 6865 6164 6572 733d  js_url, headers=
+00018ea0: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
+00018eb0: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
+00018ec0: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
+00018ed0: 6965 7329 2e74 6578 740d 0a20 2020 2020  ies).text..     
+00018ee0: 2020 2020 2020 2073 656c 662e 746b 203d         self.tk =
+00018ef0: 2073 656c 662e 6765 745f 746b 286a 735f   self.get_tk(js_
+00018f00: 6874 6d6c 290d 0a20 2020 2020 2020 2020  html)..         
+00018f10: 2020 2064 6562 7567 5f6c 616e 675f 6b77     debug_lang_kw
+00018f20: 6172 6773 203d 2073 656c 662e 6465 6275  args = self.debu
+00018f30: 675f 6c61 6e67 5f6b 7761 7267 7328 6672  g_lang_kwargs(fr
+00018f40: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
+00018f50: 6c61 6e67 7561 6765 2c20 7365 6c66 2e64  language, self.d
+00018f60: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
+00018f70: 7561 6765 2c20 6966 5f70 7269 6e74 5f77  uage, if_print_w
+00018f80: 6172 6e69 6e67 290d 0a20 2020 2020 2020  arning)..       
+00018f90: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
+00018fa0: 6765 5f6d 6170 203d 2073 656c 662e 6765  ge_map = self.ge
+00018fb0: 745f 6c61 6e67 7561 6765 5f6d 6170 286a  t_language_map(j
+00018fc0: 735f 6874 6d6c 2c20 2a2a 6465 6275 675f  s_html, **debug_
+00018fd0: 6c61 6e67 5f6b 7761 7267 7329 0d0a 0d0a  lang_kwargs)....
+00018fe0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00018ff0: 2e61 7069 5f68 6561 6465 7273 2e75 7064  .api_headers.upd
+00019000: 6174 6528 7b0d 0a20 2020 2020 2020 2020  ate({..         
+00019010: 2020 2020 2020 2022 6170 702d 6e61 6d65         "app-name
+00019020: 223a 2022 7879 222c 0d0a 2020 2020 2020  ": "xy",..      
+00019030: 2020 2020 2020 2020 2020 2264 6576 6963            "devic
+00019040: 652d 6964 223a 2022 222c 0d0a 2020 2020  e-id": "",..    
+00019050: 2020 2020 2020 2020 2020 2020 226f 732d              "os-
+00019060: 7479 7065 223a 2022 7765 6222 2c0d 0a20  type": "web",.. 
+00019070: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00019080: 6f73 2d76 6572 7369 6f6e 223a 2022 222c  os-version": "",
+00019090: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000190a0: 2020 2276 6572 7369 6f6e 223a 2022 312e    "version": "1.
+000190b0: 382e 3022 2c0d 0a20 2020 2020 2020 2020  8.0",..         
+000190c0: 2020 2020 2020 2022 582d 4175 7468 6f72         "X-Author
+000190d0: 697a 6174 696f 6e22 3a20 7365 6c66 2e74  ization": self.t
+000190e0: 6b2c 0d0a 2020 2020 2020 2020 2020 2020  k,..            
+000190f0: 7d29 0d0a 2020 2020 2020 2020 2020 2020  })..            
+00019100: 6a77 745f 7220 3d20 7365 6c66 2e73 6573  jwt_r = self.ses
+00019110: 7369 6f6e 2e70 6f73 7428 7365 6c66 2e67  sion.post(self.g
+00019120: 6574 5f6a 7774 5f75 726c 2c20 6a73 6f6e  et_jwt_url, json
+00019130: 3d73 656c 662e 6272 6f77 7365 725f 6461  =self.browser_da
+00019140: 7461 2c20 6865 6164 6572 733d 7365 6c66  ta, headers=self
+00019150: 2e61 7069 5f68 6561 6465 7273 2c20 7469  .api_headers, ti
+00019160: 6d65 6f75 743d 7469 6d65 6f75 742c 2070  meout=timeout, p
+00019170: 726f 7869 6573 3d70 726f 7869 6573 290d  roxies=proxies).
+00019180: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00019190: 662e 6a77 7420 3d20 6a77 745f 722e 6a73  f.jwt = jwt_r.js
+000191a0: 6f6e 2829 5b27 6a77 7427 5d0d 0a20 2020  on()['jwt']..   
+000191b0: 2020 2020 2020 2020 2073 656c 662e 6170           self.ap
+000191c0: 695f 6865 6164 6572 732e 7570 6461 7465  i_headers.update
+000191d0: 287b 2254 2d41 7574 686f 7269 7a61 7469  ({"T-Authorizati
+000191e0: 6f6e 223a 2073 656c 662e 6a77 747d 290d  on": self.jwt}).
+000191f0: 0a0d 0a20 2020 2020 2020 2066 726f 6d5f  ...        from_
+00019200: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
+00019210: 6775 6167 6520 3d20 7365 6c66 2e63 6865  guage = self.che
+00019220: 636b 5f6c 616e 6775 6167 6528 6672 6f6d  ck_language(from
+00019230: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
+00019240: 6e67 7561 6765 2c20 7365 6c66 2e6c 616e  nguage, self.lan
+00019250: 6775 6167 655f 6d61 702c 206f 7574 7075  guage_map, outpu
+00019260: 745f 7a68 3d73 656c 662e 6f75 7470 7574  t_zh=self.output
+00019270: 5f7a 6829 0d0a 0d0a 2020 2020 2020 2020  _zh)....        
+00019280: 7061 796c 6f61 6420 3d20 7b0d 0a20 2020  payload = {..   
+00019290: 2020 2020 2020 2020 2022 6361 6368 6564           "cached
+000192a0: 223a 2022 7472 7565 222c 0d0a 2020 2020  ": "true",..    
+000192b0: 2020 2020 2020 2020 2264 6963 7422 3a20          "dict": 
+000192c0: 2274 7275 6522 2c0d 0a20 2020 2020 2020  "true",..       
+000192d0: 2020 2020 2022 6d65 6469 6122 3a20 2274       "media": "t
+000192e0: 6578 7422 2c0d 0a20 2020 2020 2020 2020  ext",..         
+000192f0: 2020 2022 6f73 5f74 7970 6522 3a20 2277     "os_type": "w
+00019300: 6562 222c 0d0a 2020 2020 2020 2020 2020  eb",..          
+00019310: 2020 2272 6570 6c61 6365 6422 3a20 2274    "replaced": "t
+00019320: 7275 6522 2c0d 0a20 2020 2020 2020 2020  rue",..         
+00019330: 2020 2022 7265 7175 6573 745f 6964 223a     "request_id":
+00019340: 2022 7765 625f 6661 6e79 6922 2c0d 0a20   "web_fanyi",.. 
+00019350: 2020 2020 2020 2020 2020 2022 736f 7572             "sour
+00019360: 6365 223a 2071 7565 7279 5f74 6578 742e  ce": query_text.
+00019370: 7370 6c69 7428 275c 6e27 292c 0d0a 2020  split('\n'),..  
+00019380: 2020 2020 2020 2020 2020 2274 7261 6e73            "trans
+00019390: 5f74 7970 6522 3a20 6622 7b66 726f 6d5f  _type": f"{from_
+000193a0: 6c61 6e67 7561 6765 7d32 7b74 6f5f 6c61  language}2{to_la
+000193b0: 6e67 7561 6765 7d22 2c0d 0a20 2020 2020  nguage}",..     
+000193c0: 2020 2020 2020 2022 6272 6f77 7365 725f         "browser_
+000193d0: 6964 223a 2073 656c 662e 6272 6f77 7365  id": self.browse
+000193e0: 725f 6461 7461 5b27 6272 6f77 7365 725f  r_data['browser_
+000193f0: 6964 275d 2c0d 0a20 2020 2020 2020 207d  id'],..        }
+00019400: 0d0a 0d0a 2020 2020 2020 2020 6966 2066  ....        if f
+00019410: 726f 6d5f 6c61 6e67 7561 6765 203d 3d20  rom_language == 
+00019420: 2761 7574 6f27 3a0d 0a20 2020 2020 2020  'auto':..       
+00019430: 2020 2020 2070 6179 6c6f 6164 2e75 7064       payload.upd
+00019440: 6174 6528 7b27 6465 7465 6374 273a 2027  ate({'detect': '
+00019450: 7472 7565 277d 290d 0a20 2020 2020 2020  true'})..       
+00019460: 2069 6620 7573 655f 646f 6d61 696e 3a0d   if use_domain:.
+00019470: 0a20 2020 2020 2020 2020 2020 2070 6179  .            pay
+00019480: 6c6f 6164 2e75 7064 6174 6528 7b22 6469  load.update({"di
+00019490: 6374 5f6e 616d 6522 3a20 7573 655f 646f  ct_name": use_do
+000194a0: 6d61 696e 2c20 2275 7365 5f63 6f6d 6d6f  main, "use_commo
+000194b0: 6e5f 6469 6374 223a 2022 7472 7565 227d  n_dict": "true"}
+000194c0: 290d 0a0d 0a20 2020 2020 2020 205f 203d  )....        _ =
+000194d0: 2073 656c 662e 7365 7373 696f 6e2e 6f70   self.session.op
+000194e0: 7469 6f6e 7328 7365 6c66 2e61 7069 5f75  tions(self.api_u
+000194f0: 726c 2c20 6865 6164 6572 733d 7365 6c66  rl, headers=self
+00019500: 2e68 6f73 745f 6865 6164 6572 732c 2074  .host_headers, t
+00019510: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
+00019520: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
+00019530: 0d0a 2020 2020 2020 2020 7220 3d20 7365  ..        r = se
+00019540: 6c66 2e73 6573 7369 6f6e 2e70 6f73 7428  lf.session.post(
+00019550: 7365 6c66 2e61 7069 5f75 726c 2c20 6865  self.api_url, he
+00019560: 6164 6572 733d 7365 6c66 2e61 7069 5f68  aders=self.api_h
+00019570: 6561 6465 7273 2c20 6a73 6f6e 3d70 6179  eaders, json=pay
+00019580: 6c6f 6164 2c20 7469 6d65 6f75 743d 7469  load, timeout=ti
+00019590: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+000195a0: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
+000195b0: 2072 2e72 6169 7365 5f66 6f72 5f73 7461   r.raise_for_sta
+000195c0: 7475 7328 290d 0a20 2020 2020 2020 2064  tus()..        d
+000195d0: 6174 6120 3d20 722e 6a73 6f6e 2829 0d0a  ata = r.json()..
+000195e0: 2020 2020 2020 2020 7469 6d65 2e73 6c65          time.sle
+000195f0: 6570 2873 6c65 6570 5f73 6563 6f6e 6473  ep(sleep_seconds
+00019600: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00019610: 7175 6572 795f 636f 756e 7420 2b3d 2031  query_count += 1
+00019620: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00019630: 2064 6174 6120 6966 2069 735f 6465 7461   data if is_deta
+00019640: 696c 5f72 6573 756c 7420 656c 7365 2027  il_result else '
+00019650: 5c6e 272e 6a6f 696e 285b 7365 6c66 2e64  \n'.join([self.d
+00019660: 6563 7279 7074 2869 7465 6d29 2066 6f72  ecrypt(item) for
+00019670: 2069 7465 6d20 696e 2064 6174 615b 2774   item in data['t
+00019680: 6172 6765 7427 5d5d 290d 0a0d 0a0d 0a63  arget']])......c
+00019690: 6c61 7373 2044 6565 706c 2854 7365 293a  lass Deepl(Tse):
+000196a0: 0d0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+000196b0: 5f5f 2873 656c 6629 3a0d 0a20 2020 2020  __(self):..     
+000196c0: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
+000196d0: 745f 5f28 290d 0a20 2020 2020 2020 2073  t__()..        s
+000196e0: 656c 662e 6265 6769 6e5f 7469 6d65 203d  elf.begin_time =
+000196f0: 2074 696d 652e 7469 6d65 2829 0d0a 2020   time.time()..  
+00019700: 2020 2020 2020 7365 6c66 2e68 6f73 745f        self.host_
+00019710: 7572 6c20 3d20 2768 7474 7073 3a2f 2f77  url = 'https://w
+00019720: 7777 2e64 6565 706c 2e63 6f6d 2f74 7261  ww.deepl.com/tra
+00019730: 6e73 6c61 746f 7227 0d0a 2020 2020 2020  nslator'..      
+00019740: 2020 7365 6c66 2e61 7069 5f75 726c 203d    self.api_url =
+00019750: 2027 6874 7470 733a 2f2f 7777 7732 2e64   'https://www2.d
+00019760: 6565 706c 2e63 6f6d 2f6a 736f 6e72 7063  eepl.com/jsonrpc
+00019770: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+00019780: 686f 7374 5f68 6561 6465 7273 203d 2073  host_headers = s
+00019790: 656c 662e 6765 745f 6865 6164 6572 7328  elf.get_headers(
+000197a0: 7365 6c66 2e68 6f73 745f 7572 6c2c 2069  self.host_url, i
+000197b0: 665f 6170 693d 4661 6c73 6529 0d0a 2020  f_api=False)..  
+000197c0: 2020 2020 2020 7365 6c66 2e61 7069 5f68        self.api_h
+000197d0: 6561 6465 7273 203d 2073 656c 662e 6765  eaders = self.ge
+000197e0: 745f 6865 6164 6572 7328 7365 6c66 2e68  t_headers(self.h
+000197f0: 6f73 745f 7572 6c2c 2069 665f 6170 693d  ost_url, if_api=
+00019800: 5472 7565 2c20 6966 5f61 6a61 785f 666f  True, if_ajax_fo
+00019810: 725f 6170 693d 4661 6c73 652c 2069 665f  r_api=False, if_
+00019820: 6a73 6f6e 5f66 6f72 5f61 7069 3d54 7275  json_for_api=Tru
+00019830: 6529 0d0a 2020 2020 2020 2020 7365 6c66  e)..        self
+00019840: 2e70 6172 616d 7320 3d20 7b27 7370 6c69  .params = {'spli
+00019850: 7427 3a20 7b27 6d65 7468 6f64 273a 2027  t': {'method': '
+00019860: 4c4d 545f 7370 6c69 745f 7465 7874 277d  LMT_split_text'}
+00019870: 2c20 2768 616e 646c 6527 3a20 7b27 6d65  , 'handle': {'me
+00019880: 7468 6f64 273a 2027 4c4d 545f 6861 6e64  thod': 'LMT_hand
+00019890: 6c65 5f6a 6f62 7327 7d7d 0d0a 2020 2020  le_jobs'}}..    
+000198a0: 2020 2020 7365 6c66 2e72 6571 7565 7374      self.request
+000198b0: 5f69 6420 3d20 696e 7428 7261 6e64 6f6d  _id = int(random
+000198c0: 2e72 616e 6472 616e 6765 2831 3030 2c20  .randrange(100, 
+000198d0: 3130 3030 3029 202a 2031 3030 3030 202b  10000) * 10000 +
+000198e0: 2034 290d 0a20 2020 2020 2020 2073 656c   4)..        sel
+000198f0: 662e 6c61 6e67 7561 6765 5f6d 6170 203d  f.language_map =
+00019900: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
+00019910: 656c 662e 7365 7373 696f 6e20 3d20 4e6f  elf.session = No
+00019920: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
+00019930: 2e71 7565 7279 5f63 6f75 6e74 203d 2030  .query_count = 0
+00019940: 0d0a 2020 2020 2020 2020 7365 6c66 2e6f  ..        self.o
+00019950: 7574 7075 745f 7a68 203d 2027 7a68 270d  utput_zh = 'zh'.
+00019960: 0a20 2020 2020 2020 2073 656c 662e 696e  .        self.in
+00019970: 7075 745f 6c69 6d69 7420 3d20 696e 7428  put_limit = int(
+00019980: 3565 3329 0d0a 2020 2020 2020 2020 7365  5e3)..        se
+00019990: 6c66 2e64 6566 6175 6c74 5f66 726f 6d5f  lf.default_from_
+000199a0: 6c61 6e67 7561 6765 203d 2073 656c 662e  language = self.
+000199b0: 6f75 7470 7574 5f7a 680d 0a0d 0a20 2020  output_zh....   
+000199c0: 2040 5473 652e 6465 6275 675f 6c61 6e67   @Tse.debug_lang
+000199d0: 7561 6765 5f6d 6170 0d0a 2020 2020 6465  uage_map..    de
+000199e0: 6620 6765 745f 6c61 6e67 7561 6765 5f6d  f get_language_m
+000199f0: 6170 2873 656c 662c 2068 6f73 745f 6874  ap(self, host_ht
+00019a00: 6d6c 3a20 7374 722c 202a 2a6b 7761 7267  ml: str, **kwarg
+00019a10: 733a 204c 616e 674d 6170 4b77 6172 6773  s: LangMapKwargs
+00019a20: 5479 7065 2920 2d3e 2064 6963 743a 0d0a  Type) -> dict:..
+00019a30: 2020 2020 2020 2020 6c61 6e67 5f6c 6973          lang_lis
+00019a40: 7420 3d20 6c69 7374 2873 6574 2872 652e  t = list(set(re.
+00019a50: 636f 6d70 696c 6528 2774 7261 6e73 6c61  compile('transla
+00019a60: 7465 496e 746f 4c61 6e67 5c5c 2e28 5c5c  teIntoLang\\.(\\
+00019a70: 772b 2922 3a27 292e 6669 6e64 616c 6c28  w+)":').findall(
+00019a80: 686f 7374 5f68 746d 6c29 2929 0d0a 2020  host_html)))..  
+00019a90: 2020 2020 2020 7265 7475 726e 207b 7d2e        return {}.
+00019aa0: 6672 6f6d 6b65 7973 286c 616e 675f 6c69  fromkeys(lang_li
+00019ab0: 7374 2c20 6c61 6e67 5f6c 6973 7429 0d0a  st, lang_list)..
+00019ac0: 0d0a 2020 2020 6465 6620 7370 6c69 745f  ..    def split_
+00019ad0: 7365 6e74 656e 6365 735f 7061 7261 6d28  sentences_param(
+00019ae0: 7365 6c66 2c20 7175 6572 795f 7465 7874  self, query_text
+00019af0: 3a20 7374 722c 2066 726f 6d5f 6c61 6e67  : str, from_lang
+00019b00: 7561 6765 3a20 7374 7229 202d 3e20 6469  uage: str) -> di
+00019b10: 6374 3a0d 0a20 2020 2020 2020 2064 6174  ct:..        dat
+00019b20: 6120 3d20 7b0d 0a20 2020 2020 2020 2020  a = {..         
+00019b30: 2020 2027 6964 273a 2073 656c 662e 7265     'id': self.re
+00019b40: 7175 6573 745f 6964 2c0d 0a20 2020 2020  quest_id,..     
+00019b50: 2020 2020 2020 2027 6a73 6f6e 7270 6327         'jsonrpc'
+00019b60: 3a20 2732 2e30 272c 0d0a 2020 2020 2020  : '2.0',..      
+00019b70: 2020 2020 2020 2770 6172 616d 7327 3a20        'params': 
+00019b80: 7b0d 0a20 2020 2020 2020 2020 2020 2020  {..             
+00019b90: 2020 2027 7465 7874 7327 3a20 7175 6572     'texts': quer
+00019ba0: 795f 7465 7874 2e73 706c 6974 2827 5c6e  y_text.split('\n
+00019bb0: 2729 2c0d 0a20 2020 2020 2020 2020 2020  '),..           
+00019bc0: 2020 2020 2027 636f 6d6d 6f6e 4a6f 6250       'commonJobP
+00019bd0: 6172 616d 7327 3a20 7b27 6d6f 6465 273a  arams': {'mode':
+00019be0: 2027 7472 616e 736c 6174 6527 7d2c 0d0a   'translate'},..
+00019bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019c00: 276c 616e 6727 3a20 7b0d 0a20 2020 2020  'lang': {..     
+00019c10: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+00019c20: 6c61 6e67 5f75 7365 725f 7365 6c65 6374  lang_user_select
+00019c30: 6564 273a 2066 726f 6d5f 6c61 6e67 7561  ed': from_langua
+00019c40: 6765 2c0d 0a20 2020 2020 2020 2020 2020  ge,..           
+00019c50: 2020 2020 2020 2020 2027 7072 6566 6572           'prefer
+00019c60: 656e 6365 273a 207b 0d0a 2020 2020 2020  ence': {..      
+00019c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019c80: 2020 2777 6569 6768 7427 3a20 7b7d 2c0d    'weight': {},.
+00019c90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019ca0: 2020 2020 2020 2020 2027 6465 6661 756c           'defaul
+00019cb0: 7427 3a20 2764 6566 6175 6c74 272c 0d0a  t': 'default',..
 00019cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019cd0: 2020 2020 2777 6569 6768 7427 3a20 7b7d      'weight': {}
-00019ce0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00019cf0: 2020 2020 2020 2020 2020 2027 6465 6661             'defa
-00019d00: 756c 7427 3a20 2764 6566 6175 6c74 272c  ult': 'default',
-00019d10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019d20: 2020 2020 2020 7d2c 0d0a 2020 2020 2020        },..      
-00019d30: 2020 2020 2020 2020 2020 7d2c 0d0a 2020            },..  
-00019d40: 2020 2020 2020 2020 2020 7d2c 0d0a 2020            },..  
-00019d50: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
-00019d60: 2072 6574 7572 6e20 7b2a 2a73 656c 662e   return {**self.
-00019d70: 7061 7261 6d73 5b27 7370 6c69 7427 5d2c  params['split'],
-00019d80: 202a 2a64 6174 617d 0d0a 0d0a 2020 2020   **data}....    
-00019d90: 6465 6620 636f 6e74 6578 745f 7365 6e74  def context_sent
-00019da0: 656e 6365 735f 7061 7261 6d28 7365 6c66  ences_param(self
-00019db0: 2c20 7365 6e74 656e 6365 733a 204c 6973  , sentences: Lis
-00019dc0: 745b 7374 725d 2c20 6672 6f6d 5f6c 616e  t[str], from_lan
-00019dd0: 6775 6167 653a 2073 7472 2c20 746f 5f6c  guage: str, to_l
-00019de0: 616e 6775 6167 653a 2073 7472 2920 2d3e  anguage: str) ->
-00019df0: 2064 6963 743a 0d0a 2020 2020 2020 2020   dict:..        
-00019e00: 7365 6e74 656e 6365 7320 3d20 5b27 275d  sentences = ['']
-00019e10: 202b 2073 656e 7465 6e63 6573 202b 205b   + sentences + [
-00019e20: 2727 5d0d 0a20 2020 2020 2020 2064 6174  '']..        dat
-00019e30: 6120 3d20 7b0d 0a20 2020 2020 2020 2020  a = {..         
-00019e40: 2020 2027 6964 273a 2073 656c 662e 7265     'id': self.re
-00019e50: 7175 6573 745f 6964 202b 2031 2c0d 0a20  quest_id + 1,.. 
-00019e60: 2020 2020 2020 2020 2020 2027 6a73 6f6e             'json
-00019e70: 7270 6327 3a20 2720 322e 3027 2c0d 0a20  rpc': ' 2.0',.. 
-00019e80: 2020 2020 2020 2020 2020 2027 7061 7261             'para
-00019e90: 6d73 273a 207b 0d0a 2020 2020 2020 2020  ms': {..        
-00019ea0: 2020 2020 2020 2020 2770 7269 6f72 6974          'priorit
-00019eb0: 7927 3a20 312c 2020 2320 2d31 2069 6620  y': 1,  # -1 if 
-00019ec0: 2771 7561 6c69 7479 273a 2027 6661 7374  'quality': 'fast
-00019ed0: 270d 0a20 2020 2020 2020 2020 2020 2020  '..             
-00019ee0: 2020 2027 7469 6d65 7374 616d 7027 3a20     'timestamp': 
-00019ef0: 7365 6c66 2e67 6574 5f74 696d 6573 7461  self.get_timesta
-00019f00: 6d70 2829 2c0d 0a20 2020 2020 2020 2020  mp(),..         
-00019f10: 2020 2020 2020 2027 636f 6d6d 6f6e 4a6f         'commonJo
-00019f20: 6250 6172 616d 7327 3a20 7b0d 0a20 2020  bParams': {..   
-00019f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019f40: 2023 2027 7265 6769 6f6e 616c 5661 7269   # 'regionalVari
-00019f50: 616e 7427 3a20 2765 6e2d 5553 272c 0d0a  ant': 'en-US',..
-00019f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019f70: 2020 2020 2762 726f 7773 6572 5479 7065      'browserType
-00019f80: 273a 2031 2c0d 0a20 2020 2020 2020 2020  ': 1,..         
-00019f90: 2020 2020 2020 2020 2020 2027 6d6f 6465             'mode
-00019fa0: 273a 2027 7472 616e 736c 6174 6527 2c0d  ': 'translate',.
-00019fb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019fc0: 207d 2c0d 0a20 2020 2020 2020 2020 2020   },..           
-00019fd0: 2020 2020 2027 6a6f 6273 273a 205b 0d0a       'jobs': [..
-00019fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019ff0: 2020 2020 7b0d 0a20 2020 2020 2020 2020      {..         
-0001a000: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0001a010: 6b69 6e64 273a 2027 6465 6661 756c 7427  kind': 'default'
-0001a020: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001a030: 2020 2020 2020 2020 2020 2023 2027 7175             # 'qu
-0001a040: 616c 6974 7927 3a20 2766 6173 7427 2c20  ality': 'fast', 
-0001a050: 2320 2d31 0d0a 2020 2020 2020 2020 2020  # -1..          
-0001a060: 2020 2020 2020 2020 2020 2020 2020 2773                's
-0001a070: 656e 7465 6e63 6573 273a 205b 7b27 6964  entences': [{'id
-0001a080: 273a 2069 2d31 2c20 2770 7265 6669 7827  ': i-1, 'prefix'
-0001a090: 3a20 2727 2c20 2774 6578 7427 3a20 7365  : '', 'text': se
-0001a0a0: 6e74 656e 6365 735b 695d 7d5d 2c0d 0a20  ntences[i]}],.. 
-0001a0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a0c0: 2020 2020 2020 2027 7261 775f 656e 5f63         'raw_en_c
-0001a0d0: 6f6e 7465 7874 5f62 6566 6f72 6527 3a20  ontext_before': 
-0001a0e0: 7365 6e74 656e 6365 735b 313a 695d 2069  sentences[1:i] i
-0001a0f0: 6620 7365 6e74 656e 6365 735b 692d 315d  f sentences[i-1]
-0001a100: 2065 6c73 6520 5b5d 2c0d 0a20 2020 2020   else [],..     
-0001a110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a120: 2020 2027 7261 775f 656e 5f63 6f6e 7465     'raw_en_conte
-0001a130: 7874 5f61 6674 6572 273a 205b 7365 6e74  xt_after': [sent
-0001a140: 656e 6365 735b 692b 315d 5d20 6966 2073  ences[i+1]] if s
-0001a150: 656e 7465 6e63 6573 5b69 2b31 5d20 656c  entences[i+1] el
-0001a160: 7365 205b 5d2c 0d0a 2020 2020 2020 2020  se [],..        
-0001a170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a180: 2770 7265 6665 7272 6564 5f6e 756d 5f62  'preferred_num_b
-0001a190: 6561 6d73 273a 2031 2069 6620 6c65 6e28  eams': 1 if len(
-0001a1a0: 7365 6e74 656e 6365 7329 203e 3d20 3420  sentences) >= 4 
-0001a1b0: 656c 7365 2034 2c20 2023 2031 2069 6620  else 4,  # 1 if 
-0001a1c0: 7477 6f20 7365 6e74 656e 6365 7320 656c  two sentences el
-0001a1d0: 7365 2034 2c20 6c65 6e3e 3d32 2b32 0d0a  se 4, len>=2+2..
-0001a1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a1f0: 2020 2020 7d20 666f 7220 6920 696e 2072      } for i in r
-0001a200: 616e 6765 2831 2c20 6c65 6e28 7365 6e74  ange(1, len(sent
-0001a210: 656e 6365 7329 202d 2031 290d 0a20 2020  ences) - 1)..   
-0001a220: 2020 2020 2020 2020 2020 2020 205d 2c0d               ],.
-0001a230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a240: 2027 6c61 6e67 273a 207b 0d0a 2020 2020   'lang': {..    
-0001a250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a260: 2770 7265 6665 7265 6e63 6527 3a20 7b0d  'preference': {.
-0001a270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a280: 2020 2020 2020 2020 2027 7765 6967 6874           'weight
-0001a290: 273a 207b 7d2c 0d0a 2020 2020 2020 2020  ': {},..        
-0001a2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a2b0: 2764 6566 6175 6c74 273a 2027 6465 6661  'default': 'defa
-0001a2c0: 756c 7427 2c0d 0a20 2020 2020 2020 2020  ult',..         
-0001a2d0: 2020 2020 2020 2020 2020 207d 2c0d 0a20             },.. 
-0001a2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a2f0: 2020 2027 736f 7572 6365 5f6c 616e 675f     'source_lang_
-0001a300: 7573 6572 5f73 656c 6563 7465 6427 3a20  user_selected': 
-0001a310: 6672 6f6d 5f6c 616e 6775 6167 652c 2020  from_language,  
-0001a320: 2320 2273 6f75 7263 655f 6c61 6e67 5f63  # "source_lang_c
-0001a330: 6f6d 7075 7465 6422 0d0a 2020 2020 2020  omputed"..      
-0001a340: 2020 2020 2020 2020 2020 2020 2020 2774                't
-0001a350: 6172 6765 745f 6c61 6e67 273a 2074 6f5f  arget_lang': to_
-0001a360: 6c61 6e67 7561 6765 2c0d 0a20 2020 2020  language,..     
-0001a370: 2020 2020 2020 2020 2020 207d 2c0d 0a20             },.. 
-0001a380: 2020 2020 2020 2020 2020 207d 2c0d 0a20             },.. 
-0001a390: 2020 2020 2020 207d 0d0a 2020 2020 2020         }..      
-0001a3a0: 2020 7265 7475 726e 207b 2a2a 7365 6c66    return {**self
-0001a3b0: 2e70 6172 616d 735b 2768 616e 646c 6527  .params['handle'
-0001a3c0: 5d2c 202a 2a64 6174 617d 0d0a 0d0a 2020  ], **data}....  
-0001a3d0: 2020 4054 7365 2e74 696d 655f 7374 6174    @Tse.time_stat
-0001a3e0: 0d0a 2020 2020 4054 7365 2e63 6865 636b  ..    @Tse.check
-0001a3f0: 5f71 7565 7279 0d0a 2020 2020 6465 6620  _query..    def 
-0001a400: 6465 6570 6c5f 6170 6928 7365 6c66 2c20  deepl_api(self, 
-0001a410: 7175 6572 795f 7465 7874 3a20 7374 722c  query_text: str,
-0001a420: 2066 726f 6d5f 6c61 6e67 7561 6765 3a20   from_language: 
-0001a430: 7374 7220 3d20 2761 7574 6f27 2c20 746f  str = 'auto', to
-0001a440: 5f6c 616e 6775 6167 653a 2073 7472 203d  _language: str =
-0001a450: 2027 656e 272c 202a 2a6b 7761 7267 733a   'en', **kwargs:
-0001a460: 2041 7069 4b77 6172 6773 5479 7065 2920   ApiKwargsType) 
-0001a470: 2d3e 2055 6e69 6f6e 5b73 7472 2c20 6469  -> Union[str, di
-0001a480: 6374 5d3a 0d0a 2020 2020 2020 2020 2222  ct]:..        ""
-0001a490: 220d 0a20 2020 2020 2020 2068 7474 7073  "..        https
-0001a4a0: 3a2f 2f77 7777 2e64 6565 706c 2e63 6f6d  ://www.deepl.com
-0001a4b0: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
-0001a4c0: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
-0001a4d0: 2c20 6d75 7374 2e0d 0a20 2020 2020 2020  , must...       
-0001a4e0: 203a 7061 7261 6d20 6672 6f6d 5f6c 616e   :param from_lan
-0001a4f0: 6775 6167 653a 2073 7472 2c20 6465 6661  guage: str, defa
-0001a500: 756c 7420 2761 7574 6f27 2e0d 0a20 2020  ult 'auto'...   
-0001a510: 2020 2020 203a 7061 7261 6d20 746f 5f6c       :param to_l
-0001a520: 616e 6775 6167 653a 2073 7472 2c20 6465  anguage: str, de
-0001a530: 6661 756c 7420 2765 6e27 2e0d 0a20 2020  fault 'en'...   
-0001a540: 2020 2020 203a 7061 7261 6d20 2a2a 6b77       :param **kw
-0001a550: 6172 6773 3a0d 0a20 2020 2020 2020 2020  args:..         
-0001a560: 2020 2020 2020 203a 7061 7261 6d20 7469         :param ti
-0001a570: 6d65 6f75 743a 2066 6c6f 6174 2c20 6465  meout: float, de
-0001a580: 6661 756c 7420 4e6f 6e65 2e0d 0a20 2020  fault None...   
-0001a590: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-0001a5a0: 7261 6d20 7072 6f78 6965 733a 2064 6963  ram proxies: dic
-0001a5b0: 742c 2064 6566 6175 6c74 204e 6f6e 652e  t, default None.
-0001a5c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001a5d0: 2020 3a70 6172 616d 2073 6c65 6570 5f73    :param sleep_s
-0001a5e0: 6563 6f6e 6473 3a20 666c 6f61 742c 2064  econds: float, d
-0001a5f0: 6566 6175 6c74 2030 2e0d 0a20 2020 2020  efault 0...     
-0001a600: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-0001a610: 6d20 6973 5f64 6574 6169 6c5f 7265 7375  m is_detail_resu
-0001a620: 6c74 3a20 626f 6f6c 2c20 6465 6661 756c  lt: bool, defaul
-0001a630: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-0001a640: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0001a650: 2069 665f 6967 6e6f 7265 5f6c 696d 6974   if_ignore_limit
-0001a660: 5f6f 665f 6c65 6e67 7468 3a20 626f 6f6c  _of_length: bool
-0001a670: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-0001a680: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001a690: 2020 3a70 6172 616d 206c 696d 6974 5f6f    :param limit_o
-0001a6a0: 665f 6c65 6e67 7468 3a20 696e 742c 2064  f_length: int, d
-0001a6b0: 6566 6175 6c74 2032 3030 3030 2e0d 0a20  efault 20000... 
-0001a6c0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0001a6d0: 7061 7261 6d20 6966 5f69 676e 6f72 655f  param if_ignore_
-0001a6e0: 656d 7074 795f 7175 6572 793a 2062 6f6f  empty_query: boo
-0001a6f0: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
-0001a700: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001a710: 2020 203a 7061 7261 6d20 7570 6461 7465     :param update
-0001a720: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-0001a730: 7265 713a 2069 6e74 2c20 6465 6661 756c  req: int, defaul
-0001a740: 7420 3130 3030 2e0d 0a20 2020 2020 2020  t 1000...       
-0001a750: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-0001a760: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
-0001a770: 6674 6572 5f73 6563 6f6e 6473 3a20 666c  fter_seconds: fl
-0001a780: 6f61 742c 2064 6566 6175 6c74 2031 3530  oat, default 150
-0001a790: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
-0001a7a0: 2020 2020 3a70 6172 616d 2069 665f 7368      :param if_sh
-0001a7b0: 6f77 5f74 696d 655f 7374 6174 3a20 626f  ow_time_stat: bo
-0001a7c0: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
-0001a7d0: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-0001a7e0: 2020 2020 3a70 6172 616d 2073 686f 775f      :param show_
-0001a7f0: 7469 6d65 5f73 7461 745f 7072 6563 6973  time_stat_precis
-0001a800: 696f 6e3a 2069 6e74 2c20 6465 6661 756c  ion: int, defaul
-0001a810: 7420 322e 0d0a 2020 2020 2020 2020 2020  t 2...          
-0001a820: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
-0001a830: 7072 696e 745f 7761 726e 696e 673a 2062  print_warning: b
-0001a840: 6f6f 6c2c 2064 6566 6175 6c74 2054 7275  ool, default Tru
-0001a850: 652e 0d0a 2020 2020 2020 2020 3a72 6574  e...        :ret
-0001a860: 7572 6e3a 2073 7472 206f 7220 6469 6374  urn: str or dict
-0001a870: 0d0a 2020 2020 2020 2020 2222 220d 0a0d  ..        """...
-0001a880: 0a20 2020 2020 2020 2074 696d 656f 7574  .        timeout
-0001a890: 203d 206b 7761 7267 732e 6765 7428 2774   = kwargs.get('t
-0001a8a0: 696d 656f 7574 272c 204e 6f6e 6529 0d0a  imeout', None)..
-0001a8b0: 2020 2020 2020 2020 7072 6f78 6965 7320          proxies 
-0001a8c0: 3d20 6b77 6172 6773 2e67 6574 2827 7072  = kwargs.get('pr
-0001a8d0: 6f78 6965 7327 2c20 4e6f 6e65 290d 0a20  oxies', None).. 
-0001a8e0: 2020 2020 2020 2073 6c65 6570 5f73 6563         sleep_sec
-0001a8f0: 6f6e 6473 203d 206b 7761 7267 732e 6765  onds = kwargs.ge
-0001a900: 7428 2773 6c65 6570 5f73 6563 6f6e 6473  t('sleep_seconds
-0001a910: 272c 2030 290d 0a20 2020 2020 2020 2069  ', 0)..        i
-0001a920: 665f 7072 696e 745f 7761 726e 696e 6720  f_print_warning 
-0001a930: 3d20 6b77 6172 6773 2e67 6574 2827 6966  = kwargs.get('if
-0001a940: 5f70 7269 6e74 5f77 6172 6e69 6e67 272c  _print_warning',
-0001a950: 2054 7275 6529 0d0a 2020 2020 2020 2020   True)..        
-0001a960: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
-0001a970: 203d 206b 7761 7267 732e 6765 7428 2769   = kwargs.get('i
-0001a980: 735f 6465 7461 696c 5f72 6573 756c 7427  s_detail_result'
-0001a990: 2c20 4661 6c73 6529 0d0a 2020 2020 2020  , False)..      
-0001a9a0: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
-0001a9b0: 5f61 6674 6572 5f66 7265 7120 3d20 6b77  _after_freq = kw
-0001a9c0: 6172 6773 2e67 6574 2827 7570 6461 7465  args.get('update
-0001a9d0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-0001a9e0: 7265 7127 2c20 7365 6c66 2e64 6566 6175  req', self.defau
-0001a9f0: 6c74 5f73 6573 7369 6f6e 5f66 7265 7129  lt_session_freq)
-0001aa00: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
-0001aa10: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
-0001aa20: 6563 6f6e 6473 203d 206b 7761 7267 732e  econds = kwargs.
-0001aa30: 6765 7428 2775 7064 6174 655f 7365 7373  get('update_sess
-0001aa40: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
-0001aa50: 7327 2c20 7365 6c66 2e64 6566 6175 6c74  s', self.default
-0001aa60: 5f73 6573 7369 6f6e 5f73 6563 6f6e 6473  _session_seconds
-0001aa70: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0001aa80: 6368 6563 6b5f 696e 7075 745f 6c69 6d69  check_input_limi
-0001aa90: 7428 7175 6572 795f 7465 7874 2c20 7365  t(query_text, se
-0001aaa0: 6c66 2e69 6e70 7574 5f6c 696d 6974 290d  lf.input_limit).
-0001aab0: 0a0d 0a20 2020 2020 2020 206e 6f74 5f75  ...        not_u
-0001aac0: 7064 6174 655f 636f 6e64 5f66 7265 7120  pdate_cond_freq 
-0001aad0: 3d20 3120 6966 2073 656c 662e 7175 6572  = 1 if self.quer
-0001aae0: 795f 636f 756e 7420 2520 7570 6461 7465  y_count % update
-0001aaf0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-0001ab00: 7265 7120 213d 2030 2065 6c73 6520 300d  req != 0 else 0.
-0001ab10: 0a20 2020 2020 2020 206e 6f74 5f75 7064  .        not_upd
-0001ab20: 6174 655f 636f 6e64 5f74 696d 6520 3d20  ate_cond_time = 
-0001ab30: 3120 6966 2074 696d 652e 7469 6d65 2829  1 if time.time()
-0001ab40: 202d 2073 656c 662e 6265 6769 6e5f 7469   - self.begin_ti
-0001ab50: 6d65 203c 2075 7064 6174 655f 7365 7373  me < update_sess
-0001ab60: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
-0001ab70: 7320 656c 7365 2030 0d0a 2020 2020 2020  s else 0..      
-0001ab80: 2020 6966 206e 6f74 2028 7365 6c66 2e73    if not (self.s
-0001ab90: 6573 7369 6f6e 2061 6e64 2073 656c 662e  ession and self.
-0001aba0: 6c61 6e67 7561 6765 5f6d 6170 2061 6e64  language_map and
-0001abb0: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
-0001abc0: 5f66 7265 7120 616e 6420 6e6f 745f 7570  _freq and not_up
-0001abd0: 6461 7465 5f63 6f6e 645f 7469 6d65 293a  date_cond_time):
-0001abe0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0001abf0: 6c66 2e62 6567 696e 5f74 696d 6520 3d20  lf.begin_time = 
-0001ac00: 7469 6d65 2e74 696d 6528 290d 0a20 2020  time.time()..   
-0001ac10: 2020 2020 2020 2020 2073 656c 662e 7365           self.se
-0001ac20: 7373 696f 6e20 3d20 7265 7175 6573 7473  ssion = requests
-0001ac30: 2e53 6573 7369 6f6e 2829 0d0a 2020 2020  .Session()..    
-0001ac40: 2020 2020 2020 2020 686f 7374 5f68 746d          host_htm
-0001ac50: 6c20 3d20 7365 6c66 2e73 6573 7369 6f6e  l = self.session
-0001ac60: 2e67 6574 2873 656c 662e 686f 7374 5f75  .get(self.host_u
-0001ac70: 726c 2c20 6865 6164 6572 733d 7365 6c66  rl, headers=self
-0001ac80: 2e68 6f73 745f 6865 6164 6572 732c 2074  .host_headers, t
-0001ac90: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
-0001aca0: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
-0001acb0: 2e74 6578 740d 0a20 2020 2020 2020 2020  .text..         
-0001acc0: 2020 2064 6562 7567 5f6c 616e 675f 6b77     debug_lang_kw
-0001acd0: 6172 6773 203d 2073 656c 662e 6465 6275  args = self.debu
-0001ace0: 675f 6c61 6e67 5f6b 7761 7267 7328 6672  g_lang_kwargs(fr
-0001acf0: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-0001ad00: 6c61 6e67 7561 6765 2c20 7365 6c66 2e64  language, self.d
-0001ad10: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
-0001ad20: 7561 6765 2c20 6966 5f70 7269 6e74 5f77  uage, if_print_w
-0001ad30: 6172 6e69 6e67 290d 0a20 2020 2020 2020  arning)..       
-0001ad40: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-0001ad50: 6765 5f6d 6170 203d 2073 656c 662e 6765  ge_map = self.ge
-0001ad60: 745f 6c61 6e67 7561 6765 5f6d 6170 2868  t_language_map(h
-0001ad70: 6f73 745f 6874 6d6c 2c20 2a2a 6465 6275  ost_html, **debu
-0001ad80: 675f 6c61 6e67 5f6b 7761 7267 7329 0d0a  g_lang_kwargs)..
-0001ad90: 0d0a 2020 2020 2020 2020 6672 6f6d 5f6c  ..        from_l
-0001ada0: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
-0001adb0: 7561 6765 203d 2073 656c 662e 6368 6563  uage = self.chec
-0001adc0: 6b5f 6c61 6e67 7561 6765 2866 726f 6d5f  k_language(from_
-0001add0: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
-0001ade0: 6775 6167 652c 206c 616e 6775 6167 655f  guage, language_
-0001adf0: 6d61 703d 7365 6c66 2e6c 616e 6775 6167  map=self.languag
-0001ae00: 655f 6d61 702c 206f 7574 7075 745f 7a68  e_map, output_zh
-0001ae10: 3d73 656c 662e 6f75 7470 7574 5f7a 682c  =self.output_zh,
-0001ae20: 206f 7574 7075 745f 6175 746f 3d27 6175   output_auto='au
-0001ae30: 746f 2729 0d0a 2020 2020 2020 2020 6672  to')..        fr
-0001ae40: 6f6d 5f6c 616e 6775 6167 6520 3d20 6672  om_language = fr
-0001ae50: 6f6d 5f6c 616e 6775 6167 652e 7570 7065  om_language.uppe
-0001ae60: 7228 2920 6966 2066 726f 6d5f 6c61 6e67  r() if from_lang
-0001ae70: 7561 6765 2021 3d20 2761 7574 6f27 2065  uage != 'auto' e
-0001ae80: 6c73 6520 6672 6f6d 5f6c 616e 6775 6167  lse from_languag
-0001ae90: 650d 0a20 2020 2020 2020 2074 6f5f 6c61  e..        to_la
-0001aea0: 6e67 7561 6765 203d 2074 6f5f 6c61 6e67  nguage = to_lang
-0001aeb0: 7561 6765 2e75 7070 6572 2829 2069 6620  uage.upper() if 
-0001aec0: 746f 5f6c 616e 6775 6167 6520 213d 2027  to_language != '
-0001aed0: 6175 746f 2720 656c 7365 2074 6f5f 6c61  auto' else to_la
-0001aee0: 6e67 7561 6765 0d0a 0d0a 2020 2020 2020  nguage....      
-0001aef0: 2020 7373 705f 6461 7461 203d 2073 656c    ssp_data = sel
-0001af00: 662e 7370 6c69 745f 7365 6e74 656e 6365  f.split_sentence
-0001af10: 735f 7061 7261 6d28 7175 6572 795f 7465  s_param(query_te
-0001af20: 7874 2c20 6672 6f6d 5f6c 616e 6775 6167  xt, from_languag
-0001af30: 6529 0d0a 2020 2020 2020 2020 725f 7320  e)..        r_s 
-0001af40: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e70  = self.session.p
-0001af50: 6f73 7428 7365 6c66 2e61 7069 5f75 726c  ost(self.api_url
-0001af60: 2c20 7061 7261 6d73 3d73 656c 662e 7061  , params=self.pa
-0001af70: 7261 6d73 5b27 7370 6c69 7427 5d2c 206a  rams['split'], j
-0001af80: 736f 6e3d 7373 705f 6461 7461 2c20 6865  son=ssp_data, he
-0001af90: 6164 6572 733d 7365 6c66 2e61 7069 5f68  aders=self.api_h
-0001afa0: 6561 6465 7273 2c20 7469 6d65 6f75 743d  eaders, timeout=
-0001afb0: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
-0001afc0: 3d70 726f 7869 6573 290d 0a20 2020 2020  =proxies)..     
-0001afd0: 2020 2072 5f73 2e72 6169 7365 5f66 6f72     r_s.raise_for
-0001afe0: 5f73 7461 7475 7328 290d 0a20 2020 2020  _status()..     
-0001aff0: 2020 2073 5f64 6174 6120 3d20 725f 732e     s_data = r_s.
-0001b000: 6a73 6f6e 2829 0d0a 0d0a 2020 2020 2020  json()....      
-0001b010: 2020 735f 7365 6e74 656e 6365 7320 3d20    s_sentences = 
-0001b020: 5b69 745b 2773 656e 7465 6e63 6573 275d  [it['sentences']
-0001b030: 5b30 5d5b 2774 6578 7427 5d20 666f 7220  [0]['text'] for 
-0001b040: 6974 656d 2069 6e20 735f 6461 7461 5b27  item in s_data['
-0001b050: 7265 7375 6c74 275d 5b27 7465 7874 7327  result']['texts'
-0001b060: 5d20 666f 7220 6974 2069 6e20 6974 656d  ] for it in item
-0001b070: 5b27 6368 756e 6b73 275d 5d0d 0a20 2020  ['chunks']]..   
-0001b080: 2020 2020 2068 5f64 6174 6120 3d20 7365       h_data = se
-0001b090: 6c66 2e63 6f6e 7465 7874 5f73 656e 7465  lf.context_sente
-0001b0a0: 6e63 6573 5f70 6172 616d 2873 5f73 656e  nces_param(s_sen
-0001b0b0: 7465 6e63 6573 2c20 6672 6f6d 5f6c 616e  tences, from_lan
-0001b0c0: 6775 6167 652c 2074 6f5f 6c61 6e67 7561  guage, to_langua
-0001b0d0: 6765 290d 0a0d 0a20 2020 2020 2020 2072  ge)....        r
-0001b0e0: 5f63 7320 3d20 7365 6c66 2e73 6573 7369  _cs = self.sessi
-0001b0f0: 6f6e 2e70 6f73 7428 7365 6c66 2e61 7069  on.post(self.api
-0001b100: 5f75 726c 2c20 7061 7261 6d73 3d73 656c  _url, params=sel
-0001b110: 662e 7061 7261 6d73 5b27 6861 6e64 6c65  f.params['handle
-0001b120: 275d 2c20 6a73 6f6e 3d68 5f64 6174 612c  '], json=h_data,
-0001b130: 2068 6561 6465 7273 3d73 656c 662e 6170   headers=self.ap
-0001b140: 695f 6865 6164 6572 732c 2074 696d 656f  i_headers, timeo
-0001b150: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
-0001b160: 6965 733d 7072 6f78 6965 7329 0d0a 2020  ies=proxies)..  
-0001b170: 2020 2020 2020 725f 6373 2e72 6169 7365        r_cs.raise
-0001b180: 5f66 6f72 5f73 7461 7475 7328 290d 0a20  _for_status().. 
-0001b190: 2020 2020 2020 2064 6174 6120 3d20 725f         data = r_
-0001b1a0: 6373 2e6a 736f 6e28 290d 0a20 2020 2020  cs.json()..     
-0001b1b0: 2020 2074 696d 652e 736c 6565 7028 736c     time.sleep(sl
-0001b1c0: 6565 705f 7365 636f 6e64 7329 0d0a 2020  eep_seconds)..  
-0001b1d0: 2020 2020 2020 7365 6c66 2e72 6571 7565        self.reque
-0001b1e0: 7374 5f69 6420 2b3d 2033 0d0a 2020 2020  st_id += 3..    
-0001b1f0: 2020 2020 7365 6c66 2e71 7565 7279 5f63      self.query_c
-0001b200: 6f75 6e74 202b 3d20 310d 0a20 2020 2020  ount += 1..     
-0001b210: 2020 2072 6574 7572 6e20 6461 7461 2069     return data i
-0001b220: 6620 6973 5f64 6574 6169 6c5f 7265 7375  f is_detail_resu
-0001b230: 6c74 2065 6c73 6520 275c 6e27 2e6a 6f69  lt else '\n'.joi
-0001b240: 6e28 6974 656d 5b27 6265 616d 7327 5d5b  n(item['beams'][
-0001b250: 305d 5b27 7365 6e74 656e 6365 7327 5d5b  0]['sentences'][
-0001b260: 305d 5b22 7465 7874 225d 2066 6f72 2069  0]["text"] for i
-0001b270: 7465 6d20 696e 2064 6174 615b 2772 6573  tem in data['res
-0001b280: 756c 7427 5d5b 2774 7261 6e73 6c61 7469  ult']['translati
-0001b290: 6f6e 7327 5d29 0d0a 0d0a 0d0a 636c 6173  ons'])......clas
-0001b2a0: 7320 5961 6e64 6578 2854 7365 293a 0d0a  s Yandex(Tse):..
-0001b2b0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-0001b2c0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-0001b2d0: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
-0001b2e0: 5f28 290d 0a20 2020 2020 2020 2073 656c  _()..        sel
-0001b2f0: 662e 6265 6769 6e5f 7469 6d65 203d 2074  f.begin_time = t
-0001b300: 696d 652e 7469 6d65 2829 0d0a 2020 2020  ime.time()..    
-0001b310: 2020 2020 7365 6c66 2e68 6f6d 655f 7572      self.home_ur
-0001b320: 6c20 3d20 2768 7474 7073 3a2f 2f79 616e  l = 'https://yan
-0001b330: 6465 782e 636f 6d27 0d0a 2020 2020 2020  dex.com'..      
-0001b340: 2020 7365 6c66 2e68 6f73 745f 7572 6c20    self.host_url 
-0001b350: 3d20 2768 7474 7073 3a2f 2f74 7261 6e73  = 'https://trans
-0001b360: 6c61 7465 2e79 616e 6465 782e 636f 6d27  late.yandex.com'
-0001b370: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0001b380: 7069 5f75 726c 203d 2027 6874 7470 733a  pi_url = 'https:
-0001b390: 2f2f 7472 616e 736c 6174 652e 7961 6e64  //translate.yand
-0001b3a0: 6578 2e6e 6574 2f61 7069 2f76 312f 7472  ex.net/api/v1/tr
-0001b3b0: 2e6a 736f 6e2f 7472 616e 736c 6174 6527  .json/translate'
-0001b3c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0001b3d0: 7069 5f68 6f73 7420 3d20 2768 7474 7073  pi_host = 'https
-0001b3e0: 3a2f 2f74 7261 6e73 6c61 7465 2e79 616e  ://translate.yan
-0001b3f0: 6465 782e 6e65 7427 0d0a 2020 2020 2020  dex.net'..      
-0001b400: 2020 7365 6c66 2e64 6574 6563 745f 6c61    self.detect_la
-0001b410: 6e67 7561 6765 5f75 726c 203d 2027 6874  nguage_url = 'ht
-0001b420: 7470 733a 2f2f 7472 616e 736c 6174 652e  tps://translate.
-0001b430: 7961 6e64 6578 2e6e 6574 2f61 7069 2f76  yandex.net/api/v
-0001b440: 312f 7472 2e6a 736f 6e2f 6465 7465 6374  1/tr.json/detect
-0001b450: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
-0001b460: 686f 7374 5f68 6561 6465 7273 203d 2073  host_headers = s
-0001b470: 656c 662e 6765 745f 6865 6164 6572 7328  elf.get_headers(
-0001b480: 7365 6c66 2e68 6f73 745f 7572 6c2c 2069  self.host_url, i
-0001b490: 665f 6170 693d 4661 6c73 6529 0d0a 2020  f_api=False)..  
-0001b4a0: 2020 2020 2020 7365 6c66 2e61 7069 5f68        self.api_h
-0001b4b0: 6561 6465 7273 203d 2073 656c 662e 6765  eaders = self.ge
-0001b4c0: 745f 6865 6164 6572 7328 7365 6c66 2e68  t_headers(self.h
-0001b4d0: 6f73 745f 7572 6c2c 2069 665f 6170 693d  ost_url, if_api=
-0001b4e0: 5472 7565 290d 0a20 2020 2020 2020 2073  True)..        s
-0001b4f0: 656c 662e 6170 695f 6865 6164 6572 732e  elf.api_headers.
-0001b500: 7570 6461 7465 287b 2752 6566 6572 6572  update({'Referer
-0001b510: 273a 2073 656c 662e 6170 695f 686f 7374  ': self.api_host
-0001b520: 2c20 2778 2d72 6574 7061 7468 2d79 273a  , 'x-retpath-y':
-0001b530: 2073 656c 662e 686f 7374 5f75 726c 7d29   self.host_url})
-0001b540: 0d0a 2020 2020 2020 2020 7365 6c66 2e6c  ..        self.l
-0001b550: 616e 6775 6167 655f 6d61 7020 3d20 4e6f  anguage_map = No
-0001b560: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
-0001b570: 2e73 6573 7369 6f6e 203d 204e 6f6e 650d  .session = None.
-0001b580: 0a20 2020 2020 2020 2073 656c 662e 7369  .        self.si
-0001b590: 6420 3d20 4e6f 6e65 0d0a 2020 2020 2020  d = None..      
-0001b5a0: 2020 7365 6c66 2e79 7520 3d20 4e6f 6e65    self.yu = None
-0001b5b0: 0d0a 2020 2020 2020 2020 7365 6c66 2e79  ..        self.y
-0001b5c0: 756d 203d 204e 6f6e 650d 0a20 2020 2020  um = None..     
-0001b5d0: 2020 2073 656c 662e 7370 7276 6b20 3d20     self.sprvk = 
-0001b5e0: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-0001b5f0: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
-0001b600: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
-0001b610: 2e6f 7574 7075 745f 7a68 203d 2027 7a68  .output_zh = 'zh
-0001b620: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
-0001b630: 696e 7075 745f 6c69 6d69 7420 3d20 696e  input_limit = in
-0001b640: 7428 3165 3429 2020 2320 7465 6e20 7468  t(1e4)  # ten th
-0001b650: 6f75 7361 6e64 2e0d 0a20 2020 2020 2020  ousand...       
-0001b660: 2073 656c 662e 6465 6661 756c 745f 6672   self.default_fr
-0001b670: 6f6d 5f6c 616e 6775 6167 6520 3d20 7365  om_language = se
-0001b680: 6c66 2e6f 7574 7075 745f 7a68 0d0a 0d0a  lf.output_zh....
-0001b690: 2020 2020 4054 7365 2e64 6562 7567 5f6c      @Tse.debug_l
-0001b6a0: 616e 6775 6167 655f 6d61 700d 0a20 2020  anguage_map..   
-0001b6b0: 2064 6566 2067 6574 5f6c 616e 6775 6167   def get_languag
-0001b6c0: 655f 6d61 7028 7365 6c66 2c20 686f 7374  e_map(self, host
-0001b6d0: 5f68 746d 6c3a 2073 7472 2c20 2a2a 6b77  _html: str, **kw
-0001b6e0: 6172 6773 3a20 4c61 6e67 4d61 704b 7761  args: LangMapKwa
-0001b6f0: 7267 7354 7970 6529 202d 3e20 6469 6374  rgsType) -> dict
-0001b700: 3a0d 0a20 2020 2020 2020 206c 616e 675f  :..        lang_
-0001b710: 7374 7220 3d20 7265 2e63 6f6d 7069 6c65  str = re.compile
-0001b720: 2827 5452 414e 534c 4154 4f52 5f4c 414e  ('TRANSLATOR_LAN
-0001b730: 4753 3a20 7b28 2e2a 3f29 7d2c 2729 2e73  GS: {(.*?)},').s
-0001b740: 6561 7263 6828 686f 7374 5f68 746d 6c29  earch(host_html)
-0001b750: 2e67 726f 7570 2830 295b 3138 3a2d 315d  .group(0)[18:-1]
-0001b760: 0d0a 2020 2020 2020 2020 6c61 6e67 5f64  ..        lang_d
-0001b770: 6963 7420 3d20 6a73 6f6e 2e6c 6f61 6473  ict = json.loads
-0001b780: 286c 616e 675f 7374 7229 0d0a 2020 2020  (lang_str)..    
-0001b790: 2020 2020 6c61 6e67 5f6c 6973 7420 3d20      lang_list = 
-0001b7a0: 736f 7274 6564 286c 6973 7428 6c61 6e67  sorted(list(lang
-0001b7b0: 5f64 6963 742e 6b65 7973 2829 2929 0d0a  _dict.keys()))..
-0001b7c0: 2020 2020 2020 2020 7265 7475 726e 207b          return {
-0001b7d0: 7d2e 6672 6f6d 6b65 7973 286c 616e 675f  }.fromkeys(lang_
-0001b7e0: 6c69 7374 2c20 6c61 6e67 5f6c 6973 7429  list, lang_list)
-0001b7f0: 0d0a 0d0a 2020 2020 6465 6620 6765 745f  ....    def get_
-0001b800: 7975 6d28 7365 6c66 2920 2d3e 2073 7472  yum(self) -> str
-0001b810: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-0001b820: 6e20 7374 7228 696e 7428 7469 6d65 2e74  n str(int(time.t
-0001b830: 696d 6528 2920 2a20 3165 3130 2929 0d0a  ime() * 1e10))..
-0001b840: 0d0a 2020 2020 2320 6465 6620 6765 745f  ..    # def get_
-0001b850: 6373 7266 5f74 6f6b 656e 2873 656c 662c  csrf_token(self,
-0001b860: 2068 6f73 745f 6874 6d6c 3a20 7374 7229   host_html: str)
-0001b870: 202d 3e20 7374 723a 0d0a 2020 2020 2320   -> str:..    # 
-0001b880: 2020 2020 7265 7475 726e 2072 652e 636f      return re.co
-0001b890: 6d70 696c 6528 7061 7474 6572 6e3d 2243  mpile(pattern="C
-0001b8a0: 5352 465f 544f 4b45 4e3a 2027 282e 2a3f  SRF_TOKEN: '(.*?
-0001b8b0: 2927 2c22 292e 6669 6e64 616c 6c28 686f  )',").findall(ho
-0001b8c0: 7374 5f68 746d 6c29 5b30 5d0d 0a20 2020  st_html)[0]..   
-0001b8d0: 2023 0d0a 2020 2020 2320 6465 6620 6765   #..    # def ge
-0001b8e0: 745f 6b65 7928 7365 6c66 2c20 686f 7374  t_key(self, host
-0001b8f0: 5f68 746d 6c3a 2073 7472 2920 2d3e 2073  _html: str) -> s
-0001b900: 7472 3a0d 0a20 2020 2023 2020 2020 2072  tr:..    #     r
-0001b910: 6574 7572 6e20 7265 2e63 6f6d 7069 6c65  eturn re.compile
-0001b920: 2870 6174 7465 726e 3d22 5350 4545 4348  (pattern="SPEECH
-0001b930: 4b49 545f 4b45 593a 2027 282e 2a3f 2927  KIT_KEY: '(.*?)'
-0001b940: 2c22 292e 6669 6e64 616c 6c28 686f 7374  ,").findall(host
-0001b950: 5f68 746d 6c29 5b30 5d0d 0a0d 0a20 2020  _html)[0]....   
-0001b960: 2064 6566 2067 6574 5f73 6964 2873 656c   def get_sid(sel
-0001b970: 662c 2068 6f73 745f 6874 6d6c 3a20 7374  f, host_html: st
-0001b980: 7229 202d 3e20 7374 723a 0d0a 2020 2020  r) -> str:..    
-0001b990: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-0001b9a0: 2020 2020 2020 7369 645f 6669 6e64 203d        sid_find =
-0001b9b0: 2072 652e 636f 6d70 696c 6528 2253 4944   re.compile("SID
-0001b9c0: 3a20 2728 2e2a 3f29 272c 2229 2e66 696e  : '(.*?)',").fin
-0001b9d0: 6461 6c6c 2868 6f73 745f 6874 6d6c 295b  dall(host_html)[
-0001b9e0: 305d 0d0a 2020 2020 2020 2020 2020 2020  0]..            
-0001b9f0: 7265 7475 726e 2027 2e27 2e6a 6f69 6e28  return '.'.join(
-0001ba00: 5b77 5b3a 3a2d 315d 2066 6f72 2077 2069  [w[::-1] for w i
-0001ba10: 6e20 7369 645f 6669 6e64 2e73 706c 6974  n sid_find.split
-0001ba20: 2827 2e27 295d 290d 0a20 2020 2020 2020  ('.')])..       
-0001ba30: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-0001ba40: 6e20 6173 2065 3a0d 0a20 2020 2020 2020  n as e:..       
-0001ba50: 2020 2020 2063 6170 7463 6861 5f69 6e66       captcha_inf
-0001ba60: 6f20 3d20 2753 6d61 7274 4361 7074 6368  o = 'SmartCaptch
-0001ba70: 6120 6e65 6564 7320 7665 7269 6669 6361  a needs verifica
-0001ba80: 7469 6f6e 270d 0a20 2020 2020 2020 2020  tion'..         
-0001ba90: 2020 2069 6620 6361 7074 6368 615f 696e     if captcha_in
-0001baa0: 666f 2069 6e20 686f 7374 5f68 746d 6c3a  fo in host_html:
-0001bab0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001bac0: 2020 7261 6973 6520 5472 616e 736c 6174    raise Translat
-0001bad0: 6f72 4572 726f 7228 6361 7074 6368 615f  orError(captcha_
-0001bae0: 696e 666f 290d 0a20 2020 2020 2020 2020  info)..         
-0001baf0: 2020 2072 6169 7365 2054 7261 6e73 6c61     raise Transla
-0001bb00: 746f 7245 7272 6f72 2873 7472 2865 2929  torError(str(e))
-0001bb10: 0d0a 0d0a 2020 2020 6465 6620 6465 7465  ....    def dete
-0001bb20: 6374 5f6c 616e 6775 6167 6528 7365 6c66  ct_language(self
-0001bb30: 2c20 7373 3a20 5365 7373 696f 6e54 7970  , ss: SessionTyp
-0001bb40: 652c 2071 7565 7279 5f74 6578 743a 2073  e, query_text: s
-0001bb50: 7472 2c20 7369 643a 2073 7472 2c20 7975  tr, sid: str, yu
-0001bb60: 3a20 7374 722c 2068 6561 6465 7273 3a20  : str, headers: 
-0001bb70: 6469 6374 2c20 7469 6d65 6f75 743a 2066  dict, timeout: f
-0001bb80: 6c6f 6174 2c20 7072 6f78 6965 733a 2064  loat, proxies: d
-0001bb90: 6963 7429 202d 3e20 7374 723a 0d0a 2020  ict) -> str:..  
-0001bba0: 2020 2020 2020 7061 7261 6d73 203d 207b        params = {
-0001bbb0: 0d0a 2020 2020 2020 2020 2020 2020 2773  ..            's
-0001bbc0: 6964 273a 2073 6964 2c0d 0a20 2020 2020  id': sid,..     
-0001bbd0: 2020 2020 2020 2027 7975 273a 2079 752c         'yu': yu,
-0001bbe0: 0d0a 2020 2020 2020 2020 2020 2020 2774  ..            't
-0001bbf0: 6578 7427 3a20 7175 6572 795f 7465 7874  ext': query_text
-0001bc00: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-0001bc10: 7372 7627 3a20 2774 722d 7465 7874 272c  srv': 'tr-text',
-0001bc20: 0d0a 2020 2020 2020 2020 2020 2020 2768  ..            'h
-0001bc30: 696e 7427 3a20 2765 6e2c 7275 272c 0d0a  int': 'en,ru',..
-0001bc40: 2020 2020 2020 2020 2020 2020 276f 7074              'opt
-0001bc50: 696f 6e73 273a 2031 0d0a 2020 2020 2020  ions': 1..      
-0001bc60: 2020 7d0d 0a20 2020 2020 2020 2072 203d    }..        r =
-0001bc70: 2073 732e 6765 7428 7365 6c66 2e64 6574   ss.get(self.det
-0001bc80: 6563 745f 6c61 6e67 7561 6765 5f75 726c  ect_language_url
-0001bc90: 2c20 7061 7261 6d73 3d70 6172 616d 732c  , params=params,
-0001bca0: 2068 6561 6465 7273 3d68 6561 6465 7273   headers=headers
-0001bcb0: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
-0001bcc0: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
-0001bcd0: 6573 290d 0a20 2020 2020 2020 206c 616e  es)..        lan
-0001bce0: 6720 3d20 722e 6a73 6f6e 2829 2e67 6574  g = r.json().get
-0001bcf0: 2827 6c61 6e67 2729 0d0a 2020 2020 2020  ('lang')..      
-0001bd00: 2020 7265 7475 726e 206c 616e 6720 6966    return lang if
-0001bd10: 206c 616e 6720 656c 7365 2027 656e 270d   lang else 'en'.
-0001bd20: 0a0d 0a20 2020 2040 5473 652e 756e 6365  ...    @Tse.unce
-0001bd30: 7274 6966 6965 640d 0a20 2020 2040 5473  rtified..    @Ts
-0001bd40: 652e 7469 6d65 5f73 7461 740d 0a20 2020  e.time_stat..   
-0001bd50: 2040 5473 652e 6368 6563 6b5f 7175 6572   @Tse.check_quer
-0001bd60: 790d 0a20 2020 2064 6566 2079 616e 6465  y..    def yande
-0001bd70: 785f 6170 6928 7365 6c66 2c20 7175 6572  x_api(self, quer
-0001bd80: 795f 7465 7874 3a20 7374 722c 2066 726f  y_text: str, fro
-0001bd90: 6d5f 6c61 6e67 7561 6765 3a20 7374 7220  m_language: str 
-0001bda0: 3d20 2761 7574 6f27 2c20 746f 5f6c 616e  = 'auto', to_lan
-0001bdb0: 6775 6167 653a 2073 7472 203d 2027 656e  guage: str = 'en
-0001bdc0: 272c 202a 2a6b 7761 7267 733a 2041 7069  ', **kwargs: Api
-0001bdd0: 4b77 6172 6773 5479 7065 2920 2d3e 2055  KwargsType) -> U
-0001bde0: 6e69 6f6e 5b73 7472 2c20 6469 6374 5d3a  nion[str, dict]:
-0001bdf0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-0001be00: 2020 2020 2020 2068 7474 7073 3a2f 2f74         https://t
-0001be10: 7261 6e73 6c61 7465 2e79 616e 6465 782e  ranslate.yandex.
-0001be20: 636f 6d0d 0a20 2020 2020 2020 203a 7061  com..        :pa
-0001be30: 7261 6d20 7175 6572 795f 7465 7874 3a20  ram query_text: 
-0001be40: 7374 722c 206d 7573 742e 0d0a 2020 2020  str, must...    
-0001be50: 2020 2020 3a70 6172 616d 2066 726f 6d5f      :param from_
-0001be60: 6c61 6e67 7561 6765 3a20 7374 722c 2064  language: str, d
-0001be70: 6566 6175 6c74 2027 6175 746f 272e 0d0a  efault 'auto'...
+00019cd0: 2020 2020 7d2c 0d0a 2020 2020 2020 2020      },..        
+00019ce0: 2020 2020 2020 2020 7d2c 0d0a 2020 2020          },..    
+00019cf0: 2020 2020 2020 2020 7d2c 0d0a 2020 2020          },..    
+00019d00: 2020 2020 7d0d 0a20 2020 2020 2020 2072      }..        r
+00019d10: 6574 7572 6e20 7b2a 2a73 656c 662e 7061  eturn {**self.pa
+00019d20: 7261 6d73 5b27 7370 6c69 7427 5d2c 202a  rams['split'], *
+00019d30: 2a64 6174 617d 0d0a 0d0a 2020 2020 6465  *data}....    de
+00019d40: 6620 636f 6e74 6578 745f 7365 6e74 656e  f context_senten
+00019d50: 6365 735f 7061 7261 6d28 7365 6c66 2c20  ces_param(self, 
+00019d60: 7365 6e74 656e 6365 733a 204c 6973 745b  sentences: List[
+00019d70: 7374 725d 2c20 6672 6f6d 5f6c 616e 6775  str], from_langu
+00019d80: 6167 653a 2073 7472 2c20 746f 5f6c 616e  age: str, to_lan
+00019d90: 6775 6167 653a 2073 7472 2920 2d3e 2064  guage: str) -> d
+00019da0: 6963 743a 0d0a 2020 2020 2020 2020 7365  ict:..        se
+00019db0: 6e74 656e 6365 7320 3d20 5b27 275d 202b  ntences = [''] +
+00019dc0: 2073 656e 7465 6e63 6573 202b 205b 2727   sentences + [''
+00019dd0: 5d0d 0a20 2020 2020 2020 2064 6174 6120  ]..        data 
+00019de0: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
+00019df0: 2027 6964 273a 2073 656c 662e 7265 7175   'id': self.requ
+00019e00: 6573 745f 6964 202b 2031 2c0d 0a20 2020  est_id + 1,..   
+00019e10: 2020 2020 2020 2020 2027 6a73 6f6e 7270           'jsonrp
+00019e20: 6327 3a20 2720 322e 3027 2c0d 0a20 2020  c': ' 2.0',..   
+00019e30: 2020 2020 2020 2020 2027 7061 7261 6d73           'params
+00019e40: 273a 207b 0d0a 2020 2020 2020 2020 2020  ': {..          
+00019e50: 2020 2020 2020 2770 7269 6f72 6974 7927        'priority'
+00019e60: 3a20 312c 2020 2320 2d31 2069 6620 2771  : 1,  # -1 if 'q
+00019e70: 7561 6c69 7479 273a 2027 6661 7374 270d  uality': 'fast'.
+00019e80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019e90: 2027 7469 6d65 7374 616d 7027 3a20 7365   'timestamp': se
+00019ea0: 6c66 2e67 6574 5f74 696d 6573 7461 6d70  lf.get_timestamp
+00019eb0: 2829 2c0d 0a20 2020 2020 2020 2020 2020  (),..           
+00019ec0: 2020 2020 2027 636f 6d6d 6f6e 4a6f 6250       'commonJobP
+00019ed0: 6172 616d 7327 3a20 7b0d 0a20 2020 2020  arams': {..     
+00019ee0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00019ef0: 2027 7265 6769 6f6e 616c 5661 7269 616e   'regionalVarian
+00019f00: 7427 3a20 2765 6e2d 5553 272c 0d0a 2020  t': 'en-US',..  
+00019f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019f20: 2020 2762 726f 7773 6572 5479 7065 273a    'browserType':
+00019f30: 2031 2c0d 0a20 2020 2020 2020 2020 2020   1,..           
+00019f40: 2020 2020 2020 2020 2027 6d6f 6465 273a           'mode':
+00019f50: 2027 7472 616e 736c 6174 6527 2c0d 0a20   'translate',.. 
+00019f60: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00019f70: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00019f80: 2020 2027 6a6f 6273 273a 205b 0d0a 2020     'jobs': [..  
+00019f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019fa0: 2020 7b0d 0a20 2020 2020 2020 2020 2020    {..           
+00019fb0: 2020 2020 2020 2020 2020 2020 2027 6b69               'ki
+00019fc0: 6e64 273a 2027 6465 6661 756c 7427 2c0d  nd': 'default',.
+00019fd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019fe0: 2020 2020 2020 2020 2023 2027 7175 616c           # 'qual
+00019ff0: 6974 7927 3a20 2766 6173 7427 2c20 2320  ity': 'fast', # 
+0001a000: 2d31 0d0a 2020 2020 2020 2020 2020 2020  -1..            
+0001a010: 2020 2020 2020 2020 2020 2020 2773 656e              'sen
+0001a020: 7465 6e63 6573 273a 205b 7b27 6964 273a  tences': [{'id':
+0001a030: 2069 2d31 2c20 2770 7265 6669 7827 3a20   i-1, 'prefix': 
+0001a040: 2727 2c20 2774 6578 7427 3a20 7365 6e74  '', 'text': sent
+0001a050: 656e 6365 735b 695d 7d5d 2c0d 0a20 2020  ences[i]}],..   
+0001a060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a070: 2020 2020 2027 7261 775f 656e 5f63 6f6e       'raw_en_con
+0001a080: 7465 7874 5f62 6566 6f72 6527 3a20 7365  text_before': se
+0001a090: 6e74 656e 6365 735b 313a 695d 2069 6620  ntences[1:i] if 
+0001a0a0: 7365 6e74 656e 6365 735b 692d 315d 2065  sentences[i-1] e
+0001a0b0: 6c73 6520 5b5d 2c0d 0a20 2020 2020 2020  lse [],..       
+0001a0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a0d0: 2027 7261 775f 656e 5f63 6f6e 7465 7874   'raw_en_context
+0001a0e0: 5f61 6674 6572 273a 205b 7365 6e74 656e  _after': [senten
+0001a0f0: 6365 735b 692b 315d 5d20 6966 2073 656e  ces[i+1]] if sen
+0001a100: 7465 6e63 6573 5b69 2b31 5d20 656c 7365  tences[i+1] else
+0001a110: 205b 5d2c 0d0a 2020 2020 2020 2020 2020   [],..          
+0001a120: 2020 2020 2020 2020 2020 2020 2020 2770                'p
+0001a130: 7265 6665 7272 6564 5f6e 756d 5f62 6561  referred_num_bea
+0001a140: 6d73 273a 2031 2069 6620 6c65 6e28 7365  ms': 1 if len(se
+0001a150: 6e74 656e 6365 7329 203e 3d20 3420 656c  ntences) >= 4 el
+0001a160: 7365 2034 2c20 2023 2031 2069 6620 7477  se 4,  # 1 if tw
+0001a170: 6f20 7365 6e74 656e 6365 7320 656c 7365  o sentences else
+0001a180: 2034 2c20 6c65 6e3e 3d32 2b32 0d0a 2020   4, len>=2+2..  
+0001a190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a1a0: 2020 7d20 666f 7220 6920 696e 2072 616e    } for i in ran
+0001a1b0: 6765 2831 2c20 6c65 6e28 7365 6e74 656e  ge(1, len(senten
+0001a1c0: 6365 7329 202d 2031 290d 0a20 2020 2020  ces) - 1)..     
+0001a1d0: 2020 2020 2020 2020 2020 205d 2c0d 0a20             ],.. 
+0001a1e0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0001a1f0: 6c61 6e67 273a 207b 0d0a 2020 2020 2020  lang': {..      
+0001a200: 2020 2020 2020 2020 2020 2020 2020 2770                'p
+0001a210: 7265 6665 7265 6e63 6527 3a20 7b0d 0a20  reference': {.. 
+0001a220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a230: 2020 2020 2020 2027 7765 6967 6874 273a         'weight':
+0001a240: 207b 7d2c 0d0a 2020 2020 2020 2020 2020   {},..          
+0001a250: 2020 2020 2020 2020 2020 2020 2020 2764                'd
+0001a260: 6566 6175 6c74 273a 2027 6465 6661 756c  efault': 'defaul
+0001a270: 7427 2c0d 0a20 2020 2020 2020 2020 2020  t',..           
+0001a280: 2020 2020 2020 2020 207d 2c0d 0a20 2020           },..   
+0001a290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a2a0: 2027 736f 7572 6365 5f6c 616e 675f 7573   'source_lang_us
+0001a2b0: 6572 5f73 656c 6563 7465 6427 3a20 6672  er_selected': fr
+0001a2c0: 6f6d 5f6c 616e 6775 6167 652c 2020 2320  om_language,  # 
+0001a2d0: 2273 6f75 7263 655f 6c61 6e67 5f63 6f6d  "source_lang_com
+0001a2e0: 7075 7465 6422 0d0a 2020 2020 2020 2020  puted"..        
+0001a2f0: 2020 2020 2020 2020 2020 2020 2774 6172              'tar
+0001a300: 6765 745f 6c61 6e67 273a 2074 6f5f 6c61  get_lang': to_la
+0001a310: 6e67 7561 6765 2c0d 0a20 2020 2020 2020  nguage,..       
+0001a320: 2020 2020 2020 2020 207d 2c0d 0a20 2020           },..   
+0001a330: 2020 2020 2020 2020 207d 2c0d 0a20 2020           },..   
+0001a340: 2020 2020 207d 0d0a 2020 2020 2020 2020       }..        
+0001a350: 7265 7475 726e 207b 2a2a 7365 6c66 2e70  return {**self.p
+0001a360: 6172 616d 735b 2768 616e 646c 6527 5d2c  arams['handle'],
+0001a370: 202a 2a64 6174 617d 0d0a 0d0a 2020 2020   **data}....    
+0001a380: 4054 7365 2e74 696d 655f 7374 6174 0d0a  @Tse.time_stat..
+0001a390: 2020 2020 4054 7365 2e63 6865 636b 5f71      @Tse.check_q
+0001a3a0: 7565 7279 0d0a 2020 2020 6465 6620 6465  uery..    def de
+0001a3b0: 6570 6c5f 6170 6928 7365 6c66 2c20 7175  epl_api(self, qu
+0001a3c0: 6572 795f 7465 7874 3a20 7374 722c 2066  ery_text: str, f
+0001a3d0: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
+0001a3e0: 7220 3d20 2761 7574 6f27 2c20 746f 5f6c  r = 'auto', to_l
+0001a3f0: 616e 6775 6167 653a 2073 7472 203d 2027  anguage: str = '
+0001a400: 656e 272c 202a 2a6b 7761 7267 733a 2041  en', **kwargs: A
+0001a410: 7069 4b77 6172 6773 5479 7065 2920 2d3e  piKwargsType) ->
+0001a420: 2055 6e69 6f6e 5b73 7472 2c20 6469 6374   Union[str, dict
+0001a430: 5d3a 0d0a 2020 2020 2020 2020 2222 220d  ]:..        """.
+0001a440: 0a20 2020 2020 2020 2068 7474 7073 3a2f  .        https:/
+0001a450: 2f77 7777 2e64 6565 706c 2e63 6f6d 0d0a  /www.deepl.com..
+0001a460: 2020 2020 2020 2020 3a70 6172 616d 2071          :param q
+0001a470: 7565 7279 5f74 6578 743a 2073 7472 2c20  uery_text: str, 
+0001a480: 6d75 7374 2e0d 0a20 2020 2020 2020 203a  must...        :
+0001a490: 7061 7261 6d20 6672 6f6d 5f6c 616e 6775  param from_langu
+0001a4a0: 6167 653a 2073 7472 2c20 6465 6661 756c  age: str, defaul
+0001a4b0: 7420 2761 7574 6f27 2e0d 0a20 2020 2020  t 'auto'...     
+0001a4c0: 2020 203a 7061 7261 6d20 746f 5f6c 616e     :param to_lan
+0001a4d0: 6775 6167 653a 2073 7472 2c20 6465 6661  guage: str, defa
+0001a4e0: 756c 7420 2765 6e27 2e0d 0a20 2020 2020  ult 'en'...     
+0001a4f0: 2020 203a 7061 7261 6d20 2a2a 6b77 6172     :param **kwar
+0001a500: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
+0001a510: 2020 2020 203a 7061 7261 6d20 7469 6d65       :param time
+0001a520: 6f75 743a 2066 6c6f 6174 2c20 6465 6661  out: float, defa
+0001a530: 756c 7420 4e6f 6e65 2e0d 0a20 2020 2020  ult None...     
+0001a540: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+0001a550: 6d20 7072 6f78 6965 733a 2064 6963 742c  m proxies: dict,
+0001a560: 2064 6566 6175 6c74 204e 6f6e 652e 0d0a   default None...
+0001a570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a580: 3a70 6172 616d 2073 6c65 6570 5f73 6563  :param sleep_sec
+0001a590: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
+0001a5a0: 6175 6c74 2030 2e0d 0a20 2020 2020 2020  ault 0...       
+0001a5b0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+0001a5c0: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
+0001a5d0: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+0001a5e0: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
+0001a5f0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+0001a600: 665f 6967 6e6f 7265 5f6c 696d 6974 5f6f  f_ignore_limit_o
+0001a610: 665f 6c65 6e67 7468 3a20 626f 6f6c 2c20  f_length: bool, 
+0001a620: 6465 6661 756c 7420 4661 6c73 652e 0d0a  default False...
+0001a630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a640: 3a70 6172 616d 206c 696d 6974 5f6f 665f  :param limit_of_
+0001a650: 6c65 6e67 7468 3a20 696e 742c 2064 6566  length: int, def
+0001a660: 6175 6c74 2032 3030 3030 2e0d 0a20 2020  ault 20000...   
+0001a670: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+0001a680: 7261 6d20 6966 5f69 676e 6f72 655f 656d  ram if_ignore_em
+0001a690: 7074 795f 7175 6572 793a 2062 6f6f 6c2c  pty_query: bool,
+0001a6a0: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
+0001a6b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a6c0: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
+0001a6d0: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
+0001a6e0: 713a 2069 6e74 2c20 6465 6661 756c 7420  q: int, default 
+0001a6f0: 3130 3030 2e0d 0a20 2020 2020 2020 2020  1000...         
+0001a700: 2020 2020 2020 203a 7061 7261 6d20 7570         :param up
+0001a710: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+0001a720: 6572 5f73 6563 6f6e 6473 3a20 666c 6f61  er_seconds: floa
+0001a730: 742c 2064 6566 6175 6c74 2031 3530 302e  t, default 1500.
+0001a740: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001a750: 2020 3a70 6172 616d 2069 665f 7368 6f77    :param if_show
+0001a760: 5f74 696d 655f 7374 6174 3a20 626f 6f6c  _time_stat: bool
+0001a770: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+0001a780: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001a790: 2020 3a70 6172 616d 2073 686f 775f 7469    :param show_ti
+0001a7a0: 6d65 5f73 7461 745f 7072 6563 6973 696f  me_stat_precisio
+0001a7b0: 6e3a 2069 6e74 2c20 6465 6661 756c 7420  n: int, default 
+0001a7c0: 322e 0d0a 2020 2020 2020 2020 2020 2020  2...            
+0001a7d0: 2020 2020 3a70 6172 616d 2069 665f 7072      :param if_pr
+0001a7e0: 696e 745f 7761 726e 696e 673a 2062 6f6f  int_warning: boo
+0001a7f0: 6c2c 2064 6566 6175 6c74 2054 7275 652e  l, default True.
+0001a800: 0d0a 2020 2020 2020 2020 3a72 6574 7572  ..        :retur
+0001a810: 6e3a 2073 7472 206f 7220 6469 6374 0d0a  n: str or dict..
+0001a820: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
+0001a830: 2020 2020 2020 2074 696d 656f 7574 203d         timeout =
+0001a840: 206b 7761 7267 732e 6765 7428 2774 696d   kwargs.get('tim
+0001a850: 656f 7574 272c 204e 6f6e 6529 0d0a 2020  eout', None)..  
+0001a860: 2020 2020 2020 7072 6f78 6965 7320 3d20        proxies = 
+0001a870: 6b77 6172 6773 2e67 6574 2827 7072 6f78  kwargs.get('prox
+0001a880: 6965 7327 2c20 4e6f 6e65 290d 0a20 2020  ies', None)..   
+0001a890: 2020 2020 2073 6c65 6570 5f73 6563 6f6e       sleep_secon
+0001a8a0: 6473 203d 206b 7761 7267 732e 6765 7428  ds = kwargs.get(
+0001a8b0: 2773 6c65 6570 5f73 6563 6f6e 6473 272c  'sleep_seconds',
+0001a8c0: 2030 290d 0a20 2020 2020 2020 2069 665f   0)..        if_
+0001a8d0: 7072 696e 745f 7761 726e 696e 6720 3d20  print_warning = 
+0001a8e0: 6b77 6172 6773 2e67 6574 2827 6966 5f70  kwargs.get('if_p
+0001a8f0: 7269 6e74 5f77 6172 6e69 6e67 272c 2054  rint_warning', T
+0001a900: 7275 6529 0d0a 2020 2020 2020 2020 6973  rue)..        is
+0001a910: 5f64 6574 6169 6c5f 7265 7375 6c74 203d  _detail_result =
+0001a920: 206b 7761 7267 732e 6765 7428 2769 735f   kwargs.get('is_
+0001a930: 6465 7461 696c 5f72 6573 756c 7427 2c20  detail_result', 
+0001a940: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
+0001a950: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+0001a960: 6674 6572 5f66 7265 7120 3d20 6b77 6172  fter_freq = kwar
+0001a970: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
+0001a980: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
+0001a990: 7127 2c20 7365 6c66 2e64 6566 6175 6c74  q', self.default
+0001a9a0: 5f73 6573 7369 6f6e 5f66 7265 7129 0d0a  _session_freq)..
+0001a9b0: 2020 2020 2020 2020 7570 6461 7465 5f73          update_s
+0001a9c0: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+0001a9d0: 6f6e 6473 203d 206b 7761 7267 732e 6765  onds = kwargs.ge
+0001a9e0: 7428 2775 7064 6174 655f 7365 7373 696f  t('update_sessio
+0001a9f0: 6e5f 6166 7465 725f 7365 636f 6e64 7327  n_after_seconds'
+0001aa00: 2c20 7365 6c66 2e64 6566 6175 6c74 5f73  , self.default_s
+0001aa10: 6573 7369 6f6e 5f73 6563 6f6e 6473 290d  ession_seconds).
+0001aa20: 0a20 2020 2020 2020 2073 656c 662e 6368  .        self.ch
+0001aa30: 6563 6b5f 696e 7075 745f 6c69 6d69 7428  eck_input_limit(
+0001aa40: 7175 6572 795f 7465 7874 2c20 7365 6c66  query_text, self
+0001aa50: 2e69 6e70 7574 5f6c 696d 6974 290d 0a0d  .input_limit)...
+0001aa60: 0a20 2020 2020 2020 206e 6f74 5f75 7064  .        not_upd
+0001aa70: 6174 655f 636f 6e64 5f66 7265 7120 3d20  ate_cond_freq = 
+0001aa80: 3120 6966 2073 656c 662e 7175 6572 795f  1 if self.query_
+0001aa90: 636f 756e 7420 2520 7570 6461 7465 5f73  count % update_s
+0001aaa0: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
+0001aab0: 7120 213d 2030 2065 6c73 6520 300d 0a20  q != 0 else 0.. 
+0001aac0: 2020 2020 2020 206e 6f74 5f75 7064 6174         not_updat
+0001aad0: 655f 636f 6e64 5f74 696d 6520 3d20 3120  e_cond_time = 1 
+0001aae0: 6966 2074 696d 652e 7469 6d65 2829 202d  if time.time() -
+0001aaf0: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
+0001ab00: 203c 2075 7064 6174 655f 7365 7373 696f   < update_sessio
+0001ab10: 6e5f 6166 7465 725f 7365 636f 6e64 7320  n_after_seconds 
+0001ab20: 656c 7365 2030 0d0a 2020 2020 2020 2020  else 0..        
+0001ab30: 6966 206e 6f74 2028 7365 6c66 2e73 6573  if not (self.ses
+0001ab40: 7369 6f6e 2061 6e64 2073 656c 662e 6c61  sion and self.la
+0001ab50: 6e67 7561 6765 5f6d 6170 2061 6e64 206e  nguage_map and n
+0001ab60: 6f74 5f75 7064 6174 655f 636f 6e64 5f66  ot_update_cond_f
+0001ab70: 7265 7120 616e 6420 6e6f 745f 7570 6461  req and not_upda
+0001ab80: 7465 5f63 6f6e 645f 7469 6d65 293a 0d0a  te_cond_time):..
+0001ab90: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001aba0: 2e62 6567 696e 5f74 696d 6520 3d20 7469  .begin_time = ti
+0001abb0: 6d65 2e74 696d 6528 290d 0a20 2020 2020  me.time()..     
+0001abc0: 2020 2020 2020 2073 656c 662e 7365 7373         self.sess
+0001abd0: 696f 6e20 3d20 7265 7175 6573 7473 2e53  ion = requests.S
+0001abe0: 6573 7369 6f6e 2829 0d0a 2020 2020 2020  ession()..      
+0001abf0: 2020 2020 2020 686f 7374 5f68 746d 6c20        host_html 
+0001ac00: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e67  = self.session.g
+0001ac10: 6574 2873 656c 662e 686f 7374 5f75 726c  et(self.host_url
+0001ac20: 2c20 6865 6164 6572 733d 7365 6c66 2e68  , headers=self.h
+0001ac30: 6f73 745f 6865 6164 6572 732c 2074 696d  ost_headers, tim
+0001ac40: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
+0001ac50: 6f78 6965 733d 7072 6f78 6965 7329 2e74  oxies=proxies).t
+0001ac60: 6578 740d 0a20 2020 2020 2020 2020 2020  ext..           
+0001ac70: 2064 6562 7567 5f6c 616e 675f 6b77 6172   debug_lang_kwar
+0001ac80: 6773 203d 2073 656c 662e 6465 6275 675f  gs = self.debug_
+0001ac90: 6c61 6e67 5f6b 7761 7267 7328 6672 6f6d  lang_kwargs(from
+0001aca0: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
+0001acb0: 6e67 7561 6765 2c20 7365 6c66 2e64 6566  nguage, self.def
+0001acc0: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
+0001acd0: 6765 2c20 6966 5f70 7269 6e74 5f77 6172  ge, if_print_war
+0001ace0: 6e69 6e67 290d 0a20 2020 2020 2020 2020  ning)..         
+0001acf0: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
+0001ad00: 5f6d 6170 203d 2073 656c 662e 6765 745f  _map = self.get_
+0001ad10: 6c61 6e67 7561 6765 5f6d 6170 2868 6f73  language_map(hos
+0001ad20: 745f 6874 6d6c 2c20 2a2a 6465 6275 675f  t_html, **debug_
+0001ad30: 6c61 6e67 5f6b 7761 7267 7329 0d0a 0d0a  lang_kwargs)....
+0001ad40: 2020 2020 2020 2020 6672 6f6d 5f6c 616e          from_lan
+0001ad50: 6775 6167 652c 2074 6f5f 6c61 6e67 7561  guage, to_langua
+0001ad60: 6765 203d 2073 656c 662e 6368 6563 6b5f  ge = self.check_
+0001ad70: 6c61 6e67 7561 6765 2866 726f 6d5f 6c61  language(from_la
+0001ad80: 6e67 7561 6765 2c20 746f 5f6c 616e 6775  nguage, to_langu
+0001ad90: 6167 652c 206c 616e 6775 6167 655f 6d61  age, language_ma
+0001ada0: 703d 7365 6c66 2e6c 616e 6775 6167 655f  p=self.language_
+0001adb0: 6d61 702c 206f 7574 7075 745f 7a68 3d73  map, output_zh=s
+0001adc0: 656c 662e 6f75 7470 7574 5f7a 682c 206f  elf.output_zh, o
+0001add0: 7574 7075 745f 6175 746f 3d27 6175 746f  utput_auto='auto
+0001ade0: 2729 0d0a 2020 2020 2020 2020 6672 6f6d  ')..        from
+0001adf0: 5f6c 616e 6775 6167 6520 3d20 6672 6f6d  _language = from
+0001ae00: 5f6c 616e 6775 6167 652e 7570 7065 7228  _language.upper(
+0001ae10: 2920 6966 2066 726f 6d5f 6c61 6e67 7561  ) if from_langua
+0001ae20: 6765 2021 3d20 2761 7574 6f27 2065 6c73  ge != 'auto' els
+0001ae30: 6520 6672 6f6d 5f6c 616e 6775 6167 650d  e from_language.
+0001ae40: 0a20 2020 2020 2020 2074 6f5f 6c61 6e67  .        to_lang
+0001ae50: 7561 6765 203d 2074 6f5f 6c61 6e67 7561  uage = to_langua
+0001ae60: 6765 2e75 7070 6572 2829 2069 6620 746f  ge.upper() if to
+0001ae70: 5f6c 616e 6775 6167 6520 213d 2027 6175  _language != 'au
+0001ae80: 746f 2720 656c 7365 2074 6f5f 6c61 6e67  to' else to_lang
+0001ae90: 7561 6765 0d0a 0d0a 2020 2020 2020 2020  uage....        
+0001aea0: 7373 705f 6461 7461 203d 2073 656c 662e  ssp_data = self.
+0001aeb0: 7370 6c69 745f 7365 6e74 656e 6365 735f  split_sentences_
+0001aec0: 7061 7261 6d28 7175 6572 795f 7465 7874  param(query_text
+0001aed0: 2c20 6672 6f6d 5f6c 616e 6775 6167 6529  , from_language)
+0001aee0: 0d0a 2020 2020 2020 2020 725f 7320 3d20  ..        r_s = 
+0001aef0: 7365 6c66 2e73 6573 7369 6f6e 2e70 6f73  self.session.pos
+0001af00: 7428 7365 6c66 2e61 7069 5f75 726c 2c20  t(self.api_url, 
+0001af10: 7061 7261 6d73 3d73 656c 662e 7061 7261  params=self.para
+0001af20: 6d73 5b27 7370 6c69 7427 5d2c 206a 736f  ms['split'], jso
+0001af30: 6e3d 7373 705f 6461 7461 2c20 6865 6164  n=ssp_data, head
+0001af40: 6572 733d 7365 6c66 2e61 7069 5f68 6561  ers=self.api_hea
+0001af50: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+0001af60: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+0001af70: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
+0001af80: 2072 5f73 2e72 6169 7365 5f66 6f72 5f73   r_s.raise_for_s
+0001af90: 7461 7475 7328 290d 0a20 2020 2020 2020  tatus()..       
+0001afa0: 2073 5f64 6174 6120 3d20 725f 732e 6a73   s_data = r_s.js
+0001afb0: 6f6e 2829 0d0a 0d0a 2020 2020 2020 2020  on()....        
+0001afc0: 735f 7365 6e74 656e 6365 7320 3d20 5b69  s_sentences = [i
+0001afd0: 745b 2773 656e 7465 6e63 6573 275d 5b30  t['sentences'][0
+0001afe0: 5d5b 2774 6578 7427 5d20 666f 7220 6974  ]['text'] for it
+0001aff0: 656d 2069 6e20 735f 6461 7461 5b27 7265  em in s_data['re
+0001b000: 7375 6c74 275d 5b27 7465 7874 7327 5d20  sult']['texts'] 
+0001b010: 666f 7220 6974 2069 6e20 6974 656d 5b27  for it in item['
+0001b020: 6368 756e 6b73 275d 5d0d 0a20 2020 2020  chunks']]..     
+0001b030: 2020 2068 5f64 6174 6120 3d20 7365 6c66     h_data = self
+0001b040: 2e63 6f6e 7465 7874 5f73 656e 7465 6e63  .context_sentenc
+0001b050: 6573 5f70 6172 616d 2873 5f73 656e 7465  es_param(s_sente
+0001b060: 6e63 6573 2c20 6672 6f6d 5f6c 616e 6775  nces, from_langu
+0001b070: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
+0001b080: 290d 0a0d 0a20 2020 2020 2020 2072 5f63  )....        r_c
+0001b090: 7320 3d20 7365 6c66 2e73 6573 7369 6f6e  s = self.session
+0001b0a0: 2e70 6f73 7428 7365 6c66 2e61 7069 5f75  .post(self.api_u
+0001b0b0: 726c 2c20 7061 7261 6d73 3d73 656c 662e  rl, params=self.
+0001b0c0: 7061 7261 6d73 5b27 6861 6e64 6c65 275d  params['handle']
+0001b0d0: 2c20 6a73 6f6e 3d68 5f64 6174 612c 2068  , json=h_data, h
+0001b0e0: 6561 6465 7273 3d73 656c 662e 6170 695f  eaders=self.api_
+0001b0f0: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
+0001b100: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
+0001b110: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
+0001b120: 2020 2020 725f 6373 2e72 6169 7365 5f66      r_cs.raise_f
+0001b130: 6f72 5f73 7461 7475 7328 290d 0a20 2020  or_status()..   
+0001b140: 2020 2020 2064 6174 6120 3d20 725f 6373       data = r_cs
+0001b150: 2e6a 736f 6e28 290d 0a20 2020 2020 2020  .json()..       
+0001b160: 2074 696d 652e 736c 6565 7028 736c 6565   time.sleep(slee
+0001b170: 705f 7365 636f 6e64 7329 0d0a 2020 2020  p_seconds)..    
+0001b180: 2020 2020 7365 6c66 2e72 6571 7565 7374      self.request
+0001b190: 5f69 6420 2b3d 2033 0d0a 2020 2020 2020  _id += 3..      
+0001b1a0: 2020 7365 6c66 2e71 7565 7279 5f63 6f75    self.query_cou
+0001b1b0: 6e74 202b 3d20 310d 0a20 2020 2020 2020  nt += 1..       
+0001b1c0: 2072 6574 7572 6e20 6461 7461 2069 6620   return data if 
+0001b1d0: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
+0001b1e0: 2065 6c73 6520 275c 6e27 2e6a 6f69 6e28   else '\n'.join(
+0001b1f0: 6974 656d 5b27 6265 616d 7327 5d5b 305d  item['beams'][0]
+0001b200: 5b27 7365 6e74 656e 6365 7327 5d5b 305d  ['sentences'][0]
+0001b210: 5b22 7465 7874 225d 2066 6f72 2069 7465  ["text"] for ite
+0001b220: 6d20 696e 2064 6174 615b 2772 6573 756c  m in data['resul
+0001b230: 7427 5d5b 2774 7261 6e73 6c61 7469 6f6e  t']['translation
+0001b240: 7327 5d29 0d0a 0d0a 0d0a 636c 6173 7320  s'])......class 
+0001b250: 5961 6e64 6578 2854 7365 293a 0d0a 2020  Yandex(Tse):..  
+0001b260: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
+0001b270: 656c 6629 3a0d 0a20 2020 2020 2020 2073  elf):..        s
+0001b280: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
+0001b290: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+0001b2a0: 6265 6769 6e5f 7469 6d65 203d 2074 696d  begin_time = tim
+0001b2b0: 652e 7469 6d65 2829 0d0a 2020 2020 2020  e.time()..      
+0001b2c0: 2020 7365 6c66 2e68 6f6d 655f 7572 6c20    self.home_url 
+0001b2d0: 3d20 2768 7474 7073 3a2f 2f79 616e 6465  = 'https://yande
+0001b2e0: 782e 636f 6d27 0d0a 2020 2020 2020 2020  x.com'..        
+0001b2f0: 7365 6c66 2e68 6f73 745f 7572 6c20 3d20  self.host_url = 
+0001b300: 2768 7474 7073 3a2f 2f74 7261 6e73 6c61  'https://transla
+0001b310: 7465 2e79 616e 6465 782e 636f 6d27 0d0a  te.yandex.com'..
+0001b320: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
+0001b330: 5f75 726c 203d 2027 6874 7470 733a 2f2f  _url = 'https://
+0001b340: 7472 616e 736c 6174 652e 7961 6e64 6578  translate.yandex
+0001b350: 2e6e 6574 2f61 7069 2f76 312f 7472 2e6a  .net/api/v1/tr.j
+0001b360: 736f 6e2f 7472 616e 736c 6174 6527 0d0a  son/translate'..
+0001b370: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
+0001b380: 5f68 6f73 7420 3d20 2768 7474 7073 3a2f  _host = 'https:/
+0001b390: 2f74 7261 6e73 6c61 7465 2e79 616e 6465  /translate.yande
+0001b3a0: 782e 6e65 7427 0d0a 2020 2020 2020 2020  x.net'..        
+0001b3b0: 7365 6c66 2e64 6574 6563 745f 6c61 6e67  self.detect_lang
+0001b3c0: 7561 6765 5f75 726c 203d 2027 6874 7470  uage_url = 'http
+0001b3d0: 733a 2f2f 7472 616e 736c 6174 652e 7961  s://translate.ya
+0001b3e0: 6e64 6578 2e6e 6574 2f61 7069 2f76 312f  ndex.net/api/v1/
+0001b3f0: 7472 2e6a 736f 6e2f 6465 7465 6374 270d  tr.json/detect'.
+0001b400: 0a20 2020 2020 2020 2073 656c 662e 686f  .        self.ho
+0001b410: 7374 5f68 6561 6465 7273 203d 2073 656c  st_headers = sel
+0001b420: 662e 6765 745f 6865 6164 6572 7328 7365  f.get_headers(se
+0001b430: 6c66 2e68 6f73 745f 7572 6c2c 2069 665f  lf.host_url, if_
+0001b440: 6170 693d 4661 6c73 6529 0d0a 2020 2020  api=False)..    
+0001b450: 2020 2020 7365 6c66 2e61 7069 5f68 6561      self.api_hea
+0001b460: 6465 7273 203d 2073 656c 662e 6765 745f  ders = self.get_
+0001b470: 6865 6164 6572 7328 7365 6c66 2e68 6f73  headers(self.hos
+0001b480: 745f 7572 6c2c 2069 665f 6170 693d 5472  t_url, if_api=Tr
+0001b490: 7565 290d 0a20 2020 2020 2020 2073 656c  ue)..        sel
+0001b4a0: 662e 6170 695f 6865 6164 6572 732e 7570  f.api_headers.up
+0001b4b0: 6461 7465 287b 2752 6566 6572 6572 273a  date({'Referer':
+0001b4c0: 2073 656c 662e 6170 695f 686f 7374 2c20   self.api_host, 
+0001b4d0: 2778 2d72 6574 7061 7468 2d79 273a 2073  'x-retpath-y': s
+0001b4e0: 656c 662e 686f 7374 5f75 726c 7d29 0d0a  elf.host_url})..
+0001b4f0: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
+0001b500: 6775 6167 655f 6d61 7020 3d20 4e6f 6e65  guage_map = None
+0001b510: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
+0001b520: 6573 7369 6f6e 203d 204e 6f6e 650d 0a20  ession = None.. 
+0001b530: 2020 2020 2020 2073 656c 662e 7369 6420         self.sid 
+0001b540: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+0001b550: 7365 6c66 2e79 7520 3d20 4e6f 6e65 0d0a  self.yu = None..
+0001b560: 2020 2020 2020 2020 7365 6c66 2e79 756d          self.yum
+0001b570: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+0001b580: 2073 656c 662e 7370 7276 6b20 3d20 4e6f   self.sprvk = No
+0001b590: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
+0001b5a0: 2e71 7565 7279 5f63 6f75 6e74 203d 2030  .query_count = 0
+0001b5b0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6f  ..        self.o
+0001b5c0: 7574 7075 745f 7a68 203d 2027 7a68 270d  utput_zh = 'zh'.
+0001b5d0: 0a20 2020 2020 2020 2073 656c 662e 696e  .        self.in
+0001b5e0: 7075 745f 6c69 6d69 7420 3d20 696e 7428  put_limit = int(
+0001b5f0: 3165 3429 2020 2320 7465 6e20 7468 6f75  1e4)  # ten thou
+0001b600: 7361 6e64 2e0d 0a20 2020 2020 2020 2073  sand...        s
+0001b610: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
+0001b620: 5f6c 616e 6775 6167 6520 3d20 7365 6c66  _language = self
+0001b630: 2e6f 7574 7075 745f 7a68 0d0a 0d0a 2020  .output_zh....  
+0001b640: 2020 4054 7365 2e64 6562 7567 5f6c 616e    @Tse.debug_lan
+0001b650: 6775 6167 655f 6d61 700d 0a20 2020 2064  guage_map..    d
+0001b660: 6566 2067 6574 5f6c 616e 6775 6167 655f  ef get_language_
+0001b670: 6d61 7028 7365 6c66 2c20 686f 7374 5f68  map(self, host_h
+0001b680: 746d 6c3a 2073 7472 2c20 2a2a 6b77 6172  tml: str, **kwar
+0001b690: 6773 3a20 4c61 6e67 4d61 704b 7761 7267  gs: LangMapKwarg
+0001b6a0: 7354 7970 6529 202d 3e20 6469 6374 3a0d  sType) -> dict:.
+0001b6b0: 0a20 2020 2020 2020 206c 616e 675f 7374  .        lang_st
+0001b6c0: 7220 3d20 7265 2e63 6f6d 7069 6c65 2827  r = re.compile('
+0001b6d0: 5452 414e 534c 4154 4f52 5f4c 414e 4753  TRANSLATOR_LANGS
+0001b6e0: 3a20 7b28 2e2a 3f29 7d2c 2729 2e73 6561  : {(.*?)},').sea
+0001b6f0: 7263 6828 686f 7374 5f68 746d 6c29 2e67  rch(host_html).g
+0001b700: 726f 7570 2830 295b 3138 3a2d 315d 0d0a  roup(0)[18:-1]..
+0001b710: 2020 2020 2020 2020 6c61 6e67 5f64 6963          lang_dic
+0001b720: 7420 3d20 6a73 6f6e 2e6c 6f61 6473 286c  t = json.loads(l
+0001b730: 616e 675f 7374 7229 0d0a 2020 2020 2020  ang_str)..      
+0001b740: 2020 6c61 6e67 5f6c 6973 7420 3d20 736f    lang_list = so
+0001b750: 7274 6564 286c 6973 7428 6c61 6e67 5f64  rted(list(lang_d
+0001b760: 6963 742e 6b65 7973 2829 2929 0d0a 2020  ict.keys()))..  
+0001b770: 2020 2020 2020 7265 7475 726e 207b 7d2e        return {}.
+0001b780: 6672 6f6d 6b65 7973 286c 616e 675f 6c69  fromkeys(lang_li
+0001b790: 7374 2c20 6c61 6e67 5f6c 6973 7429 0d0a  st, lang_list)..
+0001b7a0: 0d0a 2020 2020 6465 6620 6765 745f 7975  ..    def get_yu
+0001b7b0: 6d28 7365 6c66 2920 2d3e 2073 7472 3a0d  m(self) -> str:.
+0001b7c0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0001b7d0: 7374 7228 696e 7428 7469 6d65 2e74 696d  str(int(time.tim
+0001b7e0: 6528 2920 2a20 3165 3130 2929 0d0a 0d0a  e() * 1e10))....
+0001b7f0: 2020 2020 2320 6465 6620 6765 745f 6373      # def get_cs
+0001b800: 7266 5f74 6f6b 656e 2873 656c 662c 2068  rf_token(self, h
+0001b810: 6f73 745f 6874 6d6c 3a20 7374 7229 202d  ost_html: str) -
+0001b820: 3e20 7374 723a 0d0a 2020 2020 2320 2020  > str:..    #   
+0001b830: 2020 7265 7475 726e 2072 652e 636f 6d70    return re.comp
+0001b840: 696c 6528 7061 7474 6572 6e3d 2243 5352  ile(pattern="CSR
+0001b850: 465f 544f 4b45 4e3a 2027 282e 2a3f 2927  F_TOKEN: '(.*?)'
+0001b860: 2c22 292e 6669 6e64 616c 6c28 686f 7374  ,").findall(host
+0001b870: 5f68 746d 6c29 5b30 5d0d 0a20 2020 2023  _html)[0]..    #
+0001b880: 0d0a 2020 2020 2320 6465 6620 6765 745f  ..    # def get_
+0001b890: 6b65 7928 7365 6c66 2c20 686f 7374 5f68  key(self, host_h
+0001b8a0: 746d 6c3a 2073 7472 2920 2d3e 2073 7472  tml: str) -> str
+0001b8b0: 3a0d 0a20 2020 2023 2020 2020 2072 6574  :..    #     ret
+0001b8c0: 7572 6e20 7265 2e63 6f6d 7069 6c65 2870  urn re.compile(p
+0001b8d0: 6174 7465 726e 3d22 5350 4545 4348 4b49  attern="SPEECHKI
+0001b8e0: 545f 4b45 593a 2027 282e 2a3f 2927 2c22  T_KEY: '(.*?)',"
+0001b8f0: 292e 6669 6e64 616c 6c28 686f 7374 5f68  ).findall(host_h
+0001b900: 746d 6c29 5b30 5d0d 0a0d 0a20 2020 2064  tml)[0]....    d
+0001b910: 6566 2067 6574 5f73 6964 2873 656c 662c  ef get_sid(self,
+0001b920: 2068 6f73 745f 6874 6d6c 3a20 7374 7229   host_html: str)
+0001b930: 202d 3e20 7374 723a 0d0a 2020 2020 2020   -> str:..      
+0001b940: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+0001b950: 2020 2020 7369 645f 6669 6e64 203d 2072      sid_find = r
+0001b960: 652e 636f 6d70 696c 6528 2253 4944 3a20  e.compile("SID: 
+0001b970: 2728 2e2a 3f29 272c 2229 2e66 696e 6461  '(.*?)',").finda
+0001b980: 6c6c 2868 6f73 745f 6874 6d6c 295b 305d  ll(host_html)[0]
+0001b990: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0001b9a0: 7475 726e 2027 2e27 2e6a 6f69 6e28 5b77  turn '.'.join([w
+0001b9b0: 5b3a 3a2d 315d 2066 6f72 2077 2069 6e20  [::-1] for w in 
+0001b9c0: 7369 645f 6669 6e64 2e73 706c 6974 2827  sid_find.split('
+0001b9d0: 2e27 295d 290d 0a20 2020 2020 2020 2065  .')])..        e
+0001b9e0: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
+0001b9f0: 6173 2065 3a0d 0a20 2020 2020 2020 2020  as e:..         
+0001ba00: 2020 2063 6170 7463 6861 5f69 6e66 6f20     captcha_info 
+0001ba10: 3d20 2753 6d61 7274 4361 7074 6368 6120  = 'SmartCaptcha 
+0001ba20: 6e65 6564 7320 7665 7269 6669 6361 7469  needs verificati
+0001ba30: 6f6e 270d 0a20 2020 2020 2020 2020 2020  on'..           
+0001ba40: 2069 6620 6361 7074 6368 615f 696e 666f   if captcha_info
+0001ba50: 2069 6e20 686f 7374 5f68 746d 6c3a 0d0a   in host_html:..
+0001ba60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ba70: 7261 6973 6520 5472 616e 736c 6174 6f72  raise Translator
+0001ba80: 4572 726f 7228 6361 7074 6368 615f 696e  Error(captcha_in
+0001ba90: 666f 290d 0a20 2020 2020 2020 2020 2020  fo)..           
+0001baa0: 2072 6169 7365 2054 7261 6e73 6c61 746f   raise Translato
+0001bab0: 7245 7272 6f72 2873 7472 2865 2929 0d0a  rError(str(e))..
+0001bac0: 0d0a 2020 2020 6465 6620 6465 7465 6374  ..    def detect
+0001bad0: 5f6c 616e 6775 6167 6528 7365 6c66 2c20  _language(self, 
+0001bae0: 7373 3a20 5365 7373 696f 6e54 7970 652c  ss: SessionType,
+0001baf0: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
+0001bb00: 2c20 7369 643a 2073 7472 2c20 7975 3a20  , sid: str, yu: 
+0001bb10: 7374 722c 2068 6561 6465 7273 3a20 6469  str, headers: di
+0001bb20: 6374 2c20 7469 6d65 6f75 743a 2066 6c6f  ct, timeout: flo
+0001bb30: 6174 2c20 7072 6f78 6965 733a 2064 6963  at, proxies: dic
+0001bb40: 7429 202d 3e20 7374 723a 0d0a 2020 2020  t) -> str:..    
+0001bb50: 2020 2020 7061 7261 6d73 203d 207b 0d0a      params = {..
+0001bb60: 2020 2020 2020 2020 2020 2020 2773 6964              'sid
+0001bb70: 273a 2073 6964 2c0d 0a20 2020 2020 2020  ': sid,..       
+0001bb80: 2020 2020 2027 7975 273a 2079 752c 0d0a       'yu': yu,..
+0001bb90: 2020 2020 2020 2020 2020 2020 2774 6578              'tex
+0001bba0: 7427 3a20 7175 6572 795f 7465 7874 2c0d  t': query_text,.
+0001bbb0: 0a20 2020 2020 2020 2020 2020 2027 7372  .            'sr
+0001bbc0: 7627 3a20 2774 722d 7465 7874 272c 0d0a  v': 'tr-text',..
+0001bbd0: 2020 2020 2020 2020 2020 2020 2768 696e              'hin
+0001bbe0: 7427 3a20 2765 6e2c 7275 272c 0d0a 2020  t': 'en,ru',..  
+0001bbf0: 2020 2020 2020 2020 2020 276f 7074 696f            'optio
+0001bc00: 6e73 273a 2031 0d0a 2020 2020 2020 2020  ns': 1..        
+0001bc10: 7d0d 0a20 2020 2020 2020 2072 203d 2073  }..        r = s
+0001bc20: 732e 6765 7428 7365 6c66 2e64 6574 6563  s.get(self.detec
+0001bc30: 745f 6c61 6e67 7561 6765 5f75 726c 2c20  t_language_url, 
+0001bc40: 7061 7261 6d73 3d70 6172 616d 732c 2068  params=params, h
+0001bc50: 6561 6465 7273 3d68 6561 6465 7273 2c20  eaders=headers, 
+0001bc60: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+0001bc70: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+0001bc80: 290d 0a20 2020 2020 2020 206c 616e 6720  )..        lang 
+0001bc90: 3d20 722e 6a73 6f6e 2829 2e67 6574 2827  = r.json().get('
+0001bca0: 6c61 6e67 2729 0d0a 2020 2020 2020 2020  lang')..        
+0001bcb0: 7265 7475 726e 206c 616e 6720 6966 206c  return lang if l
+0001bcc0: 616e 6720 656c 7365 2027 656e 270d 0a0d  ang else 'en'...
+0001bcd0: 0a20 2020 2040 5473 652e 756e 6365 7274  .    @Tse.uncert
+0001bce0: 6966 6965 640d 0a20 2020 2040 5473 652e  ified..    @Tse.
+0001bcf0: 7469 6d65 5f73 7461 740d 0a20 2020 2040  time_stat..    @
+0001bd00: 5473 652e 6368 6563 6b5f 7175 6572 790d  Tse.check_query.
+0001bd10: 0a20 2020 2064 6566 2079 616e 6465 785f  .    def yandex_
+0001bd20: 6170 6928 7365 6c66 2c20 7175 6572 795f  api(self, query_
+0001bd30: 7465 7874 3a20 7374 722c 2066 726f 6d5f  text: str, from_
+0001bd40: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
+0001bd50: 2761 7574 6f27 2c20 746f 5f6c 616e 6775  'auto', to_langu
+0001bd60: 6167 653a 2073 7472 203d 2027 656e 272c  age: str = 'en',
+0001bd70: 202a 2a6b 7761 7267 733a 2041 7069 4b77   **kwargs: ApiKw
+0001bd80: 6172 6773 5479 7065 2920 2d3e 2055 6e69  argsType) -> Uni
+0001bd90: 6f6e 5b73 7472 2c20 6469 6374 5d3a 0d0a  on[str, dict]:..
+0001bda0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+0001bdb0: 2020 2020 2068 7474 7073 3a2f 2f74 7261       https://tra
+0001bdc0: 6e73 6c61 7465 2e79 616e 6465 782e 636f  nslate.yandex.co
+0001bdd0: 6d0d 0a20 2020 2020 2020 203a 7061 7261  m..        :para
+0001bde0: 6d20 7175 6572 795f 7465 7874 3a20 7374  m query_text: st
+0001bdf0: 722c 206d 7573 742e 0d0a 2020 2020 2020  r, must...      
+0001be00: 2020 3a70 6172 616d 2066 726f 6d5f 6c61    :param from_la
+0001be10: 6e67 7561 6765 3a20 7374 722c 2064 6566  nguage: str, def
+0001be20: 6175 6c74 2027 6175 746f 272e 0d0a 2020  ault 'auto'...  
+0001be30: 2020 2020 2020 3a70 6172 616d 2074 6f5f        :param to_
+0001be40: 6c61 6e67 7561 6765 3a20 7374 722c 2064  language: str, d
+0001be50: 6566 6175 6c74 2027 656e 272e 0d0a 2020  efault 'en'...  
+0001be60: 2020 2020 2020 3a70 6172 616d 202a 2a6b        :param **k
+0001be70: 7761 7267 733a 0d0a 2020 2020 2020 2020  wargs:..        
 0001be80: 2020 2020 2020 2020 3a70 6172 616d 2074          :param t
-0001be90: 6f5f 6c61 6e67 7561 6765 3a20 7374 722c  o_language: str,
-0001bea0: 2064 6566 6175 6c74 2027 656e 272e 0d0a   default 'en'...
-0001beb0: 2020 2020 2020 2020 3a70 6172 616d 202a          :param *
-0001bec0: 2a6b 7761 7267 733a 0d0a 2020 2020 2020  *kwargs:..      
-0001bed0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0001bee0: 2074 696d 656f 7574 3a20 666c 6f61 742c   timeout: float,
-0001bef0: 2064 6566 6175 6c74 204e 6f6e 652e 0d0a   default None...
-0001bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bf10: 3a70 6172 616d 2070 726f 7869 6573 3a20  :param proxies: 
-0001bf20: 6469 6374 2c20 6465 6661 756c 7420 4e6f  dict, default No
-0001bf30: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
-0001bf40: 2020 2020 203a 7061 7261 6d20 736c 6565       :param slee
-0001bf50: 705f 7365 636f 6e64 733a 2066 6c6f 6174  p_seconds: float
-0001bf60: 2c20 6465 6661 756c 7420 302e 0d0a 2020  , default 0...  
-0001bf70: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-0001bf80: 6172 616d 2069 735f 6465 7461 696c 5f72  aram is_detail_r
-0001bf90: 6573 756c 743a 2062 6f6f 6c2c 2064 6566  esult: bool, def
-0001bfa0: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
-0001bfb0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-0001bfc0: 7261 6d20 6966 5f69 676e 6f72 655f 6c69  ram if_ignore_li
-0001bfd0: 6d69 745f 6f66 5f6c 656e 6774 683a 2062  mit_of_length: b
-0001bfe0: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
-0001bff0: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
-0001c000: 2020 2020 203a 7061 7261 6d20 6c69 6d69       :param limi
-0001c010: 745f 6f66 5f6c 656e 6774 683a 2069 6e74  t_of_length: int
-0001c020: 2c20 6465 6661 756c 7420 3230 3030 302e  , default 20000.
-0001c030: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001c040: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
-0001c050: 7265 5f65 6d70 7479 5f71 7565 7279 3a20  re_empty_query: 
-0001c060: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
-0001c070: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
-0001c080: 2020 2020 2020 3a70 6172 616d 2075 7064        :param upd
-0001c090: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0001c0a0: 725f 6672 6571 3a20 696e 742c 2064 6566  r_freq: int, def
-0001c0b0: 6175 6c74 2031 3030 302e 0d0a 2020 2020  ault 1000...    
-0001c0c0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0001c0d0: 616d 2075 7064 6174 655f 7365 7373 696f  am update_sessio
-0001c0e0: 6e5f 6166 7465 725f 7365 636f 6e64 733a  n_after_seconds:
-0001c0f0: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
-0001c100: 3135 3030 2e0d 0a20 2020 2020 2020 2020  1500...         
-0001c110: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-0001c120: 5f73 686f 775f 7469 6d65 5f73 7461 743a  _show_time_stat:
-0001c130: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
-0001c140: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
-0001c150: 2020 2020 2020 203a 7061 7261 6d20 7368         :param sh
-0001c160: 6f77 5f74 696d 655f 7374 6174 5f70 7265  ow_time_stat_pre
-0001c170: 6369 7369 6f6e 3a20 696e 742c 2064 6566  cision: int, def
-0001c180: 6175 6c74 2032 2e0d 0a20 2020 2020 2020  ault 2...       
-0001c190: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-0001c1a0: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
-0001c1b0: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-0001c1c0: 5472 7565 2e0d 0a20 2020 2020 2020 2020  True...         
-0001c1d0: 2020 2020 2020 203a 7061 7261 6d20 7265         :param re
-0001c1e0: 7365 745f 686f 7374 5f75 726c 3a20 7374  set_host_url: st
-0001c1f0: 722c 2064 6566 6175 6c74 204e 6f6e 652e  r, default None.
-0001c200: 2065 673a 2027 6874 7470 733a 2f2f 7472   eg: 'https://tr
-0001c210: 616e 736c 6174 652e 7961 6e64 6578 2e66  anslate.yandex.f
-0001c220: 7227 0d0a 2020 2020 2020 2020 2020 2020  r'..            
-0001c230: 2020 2020 3a70 6172 616d 2069 665f 6368      :param if_ch
-0001c240: 6563 6b5f 7265 7365 745f 686f 7374 5f75  eck_reset_host_u
-0001c250: 726c 3a20 626f 6f6c 2c20 6465 6661 756c  rl: bool, defaul
-0001c260: 7420 5472 7565 2e0d 0a20 2020 2020 2020  t True...       
-0001c270: 203a 7265 7475 726e 3a20 7374 7220 6f72   :return: str or
-0001c280: 2064 6963 740d 0a20 2020 2020 2020 2022   dict..        "
-0001c290: 2222 0d0a 0d0a 2020 2020 2020 2020 7265  ""....        re
-0001c2a0: 7365 745f 686f 7374 5f75 726c 203d 206b  set_host_url = k
-0001c2b0: 7761 7267 732e 6765 7428 2772 6573 6574  wargs.get('reset
-0001c2c0: 5f68 6f73 745f 7572 6c27 2c20 4e6f 6e65  _host_url', None
-0001c2d0: 290d 0a20 2020 2020 2020 2069 6620 7265  )..        if re
-0001c2e0: 7365 745f 686f 7374 5f75 726c 2061 6e64  set_host_url and
-0001c2f0: 2072 6573 6574 5f68 6f73 745f 7572 6c20   reset_host_url 
-0001c300: 213d 2073 656c 662e 686f 7374 5f75 726c  != self.host_url
-0001c310: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
-0001c320: 6620 6b77 6172 6773 2e67 6574 2827 6966  f kwargs.get('if
-0001c330: 5f63 6865 636b 5f72 6573 6574 5f68 6f73  _check_reset_hos
-0001c340: 745f 7572 6c27 2c20 5472 7565 2920 616e  t_url', True) an
-0001c350: 6420 6e6f 7420 7265 7365 745f 686f 7374  d not reset_host
-0001c360: 5f75 726c 5b3a 3235 5d20 3d3d 2027 6874  _url[:25] == 'ht
-0001c370: 7470 733a 2f2f 7472 616e 736c 6174 652e  tps://translate.
-0001c380: 7961 6e64 6578 2e27 3a0d 0a20 2020 2020  yandex.':..     
-0001c390: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0001c3a0: 2054 7261 6e73 6c61 746f 7245 7272 6f72   TranslatorError
-0001c3b0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0001c3c0: 6c66 2e68 6f73 745f 7572 6c20 3d20 7265  lf.host_url = re
-0001c3d0: 7365 745f 686f 7374 5f75 726c 2e73 7472  set_host_url.str
-0001c3e0: 6970 2827 2f27 290d 0a0d 0a20 2020 2020  ip('/')....     
-0001c3f0: 2020 2074 696d 656f 7574 203d 206b 7761     timeout = kwa
-0001c400: 7267 732e 6765 7428 2774 696d 656f 7574  rgs.get('timeout
-0001c410: 272c 204e 6f6e 6529 0d0a 2020 2020 2020  ', None)..      
-0001c420: 2020 7072 6f78 6965 7320 3d20 6b77 6172    proxies = kwar
-0001c430: 6773 2e67 6574 2827 7072 6f78 6965 7327  gs.get('proxies'
-0001c440: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
-0001c450: 2073 6c65 6570 5f73 6563 6f6e 6473 203d   sleep_seconds =
-0001c460: 206b 7761 7267 732e 6765 7428 2773 6c65   kwargs.get('sle
-0001c470: 6570 5f73 6563 6f6e 6473 272c 2030 290d  ep_seconds', 0).
-0001c480: 0a20 2020 2020 2020 2069 665f 7072 696e  .        if_prin
-0001c490: 745f 7761 726e 696e 6720 3d20 6b77 6172  t_warning = kwar
-0001c4a0: 6773 2e67 6574 2827 6966 5f70 7269 6e74  gs.get('if_print
-0001c4b0: 5f77 6172 6e69 6e67 272c 2054 7275 6529  _warning', True)
-0001c4c0: 0d0a 2020 2020 2020 2020 6973 5f64 6574  ..        is_det
-0001c4d0: 6169 6c5f 7265 7375 6c74 203d 206b 7761  ail_result = kwa
-0001c4e0: 7267 732e 6765 7428 2769 735f 6465 7461  rgs.get('is_deta
-0001c4f0: 696c 5f72 6573 756c 7427 2c20 4661 6c73  il_result', Fals
-0001c500: 6529 0d0a 2020 2020 2020 2020 7570 6461  e)..        upda
-0001c510: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
-0001c520: 5f66 7265 7120 3d20 6b77 6172 6773 2e67  _freq = kwargs.g
-0001c530: 6574 2827 7570 6461 7465 5f73 6573 7369  et('update_sessi
-0001c540: 6f6e 5f61 6674 6572 5f66 7265 7127 2c20  on_after_freq', 
-0001c550: 7365 6c66 2e64 6566 6175 6c74 5f73 6573  self.default_ses
-0001c560: 7369 6f6e 5f66 7265 7129 0d0a 2020 2020  sion_freq)..    
-0001c570: 2020 2020 7570 6461 7465 5f73 6573 7369      update_sessi
-0001c580: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-0001c590: 203d 206b 7761 7267 732e 6765 7428 2775   = kwargs.get('u
-0001c5a0: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-0001c5b0: 7465 725f 7365 636f 6e64 7327 2c20 7365  ter_seconds', se
-0001c5c0: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
-0001c5d0: 6f6e 5f73 6563 6f6e 6473 290d 0a20 2020  on_seconds)..   
-0001c5e0: 2020 2020 2073 656c 662e 6368 6563 6b5f       self.check_
-0001c5f0: 696e 7075 745f 6c69 6d69 7428 7175 6572  input_limit(quer
-0001c600: 795f 7465 7874 2c20 7365 6c66 2e69 6e70  y_text, self.inp
-0001c610: 7574 5f6c 696d 6974 290d 0a0d 0a20 2020  ut_limit)....   
-0001c620: 2020 2020 206e 6f74 5f75 7064 6174 655f       not_update_
-0001c630: 636f 6e64 5f66 7265 7120 3d20 3120 6966  cond_freq = 1 if
-0001c640: 2073 656c 662e 7175 6572 795f 636f 756e   self.query_coun
-0001c650: 7420 2520 7570 6461 7465 5f73 6573 7369  t % update_sessi
-0001c660: 6f6e 5f61 6674 6572 5f66 7265 7120 213d  on_after_freq !=
-0001c670: 2030 2065 6c73 6520 300d 0a20 2020 2020   0 else 0..     
-0001c680: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
-0001c690: 6e64 5f74 696d 6520 3d20 3120 6966 2074  nd_time = 1 if t
-0001c6a0: 696d 652e 7469 6d65 2829 202d 2073 656c  ime.time() - sel
-0001c6b0: 662e 6265 6769 6e5f 7469 6d65 203c 2075  f.begin_time < u
-0001c6c0: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-0001c6d0: 7465 725f 7365 636f 6e64 7320 656c 7365  ter_seconds else
-0001c6e0: 2030 0d0a 2020 2020 2020 2020 6966 206e   0..        if n
-0001c6f0: 6f74 2028 7365 6c66 2e73 6573 7369 6f6e  ot (self.session
-0001c700: 2061 6e64 2073 656c 662e 6c61 6e67 7561   and self.langua
-0001c710: 6765 5f6d 6170 2061 6e64 206e 6f74 5f75  ge_map and not_u
-0001c720: 7064 6174 655f 636f 6e64 5f66 7265 7120  pdate_cond_freq 
-0001c730: 616e 6420 6e6f 745f 7570 6461 7465 5f63  and not_update_c
-0001c740: 6f6e 645f 7469 6d65 2061 6e64 2073 656c  ond_time and sel
-0001c750: 662e 7369 6420 616e 6420 7365 6c66 2e79  f.sid and self.y
-0001c760: 7529 3a0d 0a20 2020 2020 2020 2020 2020  u):..           
-0001c770: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
-0001c780: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
-0001c790: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001c7a0: 2e73 6573 7369 6f6e 203d 2072 6571 7565  .session = reque
-0001c7b0: 7374 732e 5365 7373 696f 6e28 290d 0a20  sts.Session().. 
-0001c7c0: 2020 2020 2020 2020 2020 205f 203d 2073             _ = s
-0001c7d0: 656c 662e 7365 7373 696f 6e2e 6765 7428  elf.session.get(
-0001c7e0: 7365 6c66 2e68 6f6d 655f 7572 6c2c 2068  self.home_url, h
-0001c7f0: 6561 6465 7273 3d73 656c 662e 686f 7374  eaders=self.host
-0001c800: 5f68 6561 6465 7273 2c20 7469 6d65 6f75  _headers, timeou
-0001c810: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
-0001c820: 6573 3d70 726f 7869 6573 290d 0a20 2020  es=proxies)..   
-0001c830: 2020 2020 2020 2020 205f 203d 2073 656c           _ = sel
-0001c840: 662e 7365 7373 696f 6e2e 6765 7428 7365  f.session.get(se
-0001c850: 6c66 2e68 6f73 745f 7572 6c2c 2068 6561  lf.host_url, hea
-0001c860: 6465 7273 3d73 656c 662e 686f 7374 5f68  ders=self.host_h
-0001c870: 6561 6465 7273 2c20 7469 6d65 6f75 743d  eaders, timeout=
-0001c880: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
-0001c890: 3d70 726f 7869 6573 290d 0a20 2020 2020  =proxies)..     
-0001c8a0: 2020 2020 2020 2068 6f73 745f 6874 6d6c         host_html
-0001c8b0: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
-0001c8c0: 6765 7428 7365 6c66 2e68 6f73 745f 7572  get(self.host_ur
-0001c8d0: 6c2c 2068 6561 6465 7273 3d73 656c 662e  l, headers=self.
-0001c8e0: 686f 7374 5f68 6561 6465 7273 2c20 7469  host_headers, ti
-0001c8f0: 6d65 6f75 743d 7469 6d65 6f75 742c 2070  meout=timeout, p
-0001c900: 726f 7869 6573 3d70 726f 7869 6573 292e  roxies=proxies).
-0001c910: 7465 7874 0d0a 0d0a 2020 2020 2020 2020  text....        
-0001c920: 2020 2020 6465 6275 675f 6c61 6e67 5f6b      debug_lang_k
-0001c930: 7761 7267 7320 3d20 7365 6c66 2e64 6562  wargs = self.deb
-0001c940: 7567 5f6c 616e 675f 6b77 6172 6773 2866  ug_lang_kwargs(f
-0001c950: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
-0001c960: 5f6c 616e 6775 6167 652c 2073 656c 662e  _language, self.
-0001c970: 6465 6661 756c 745f 6672 6f6d 5f6c 616e  default_from_lan
-0001c980: 6775 6167 652c 2069 665f 7072 696e 745f  guage, if_print_
-0001c990: 7761 726e 696e 6729 0d0a 2020 2020 2020  warning)..      
-0001c9a0: 2020 2020 2020 7365 6c66 2e6c 616e 6775        self.langu
-0001c9b0: 6167 655f 6d61 7020 3d20 7365 6c66 2e67  age_map = self.g
-0001c9c0: 6574 5f6c 616e 6775 6167 655f 6d61 7028  et_language_map(
-0001c9d0: 686f 7374 5f68 746d 6c2c 202a 2a64 6562  host_html, **deb
-0001c9e0: 7567 5f6c 616e 675f 6b77 6172 6773 290d  ug_lang_kwargs).
-0001c9f0: 0a0d 0a20 2020 2020 2020 2020 2020 2073  ...            s
-0001ca00: 656c 662e 7369 6420 3d20 7365 6c66 2e67  elf.sid = self.g
-0001ca10: 6574 5f73 6964 2868 6f73 745f 6874 6d6c  et_sid(host_html
-0001ca20: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-0001ca30: 656c 662e 7975 6d20 3d20 7365 6c66 2e67  elf.yum = self.g
-0001ca40: 6574 5f79 756d 2829 0d0a 2020 2020 2020  et_yum()..      
-0001ca50: 2020 2020 2020 7365 6c66 2e79 7520 3d20        self.yu = 
-0001ca60: 7365 6c66 2e73 6573 7369 6f6e 2e63 6f6f  self.session.coo
-0001ca70: 6b69 6573 2e67 6574 5f64 6963 7428 292e  kies.get_dict().
-0001ca80: 6765 7428 2779 7569 6473 7327 2920 6f72  get('yuidss') or
-0001ca90: 2066 277b 7261 6e64 6f6d 2e72 616e 6469   f'{random.randi
-0001caa0: 6e74 2869 6e74 2831 6538 292c 2069 6e74  nt(int(1e8), int
-0001cab0: 2839 6538 2929 7d7b 696e 7428 7469 6d65  (9e8))}{int(time
-0001cac0: 2e74 696d 6528 2929 7d27 0d0a 2020 2020  .time())}'..    
-0001cad0: 2020 2020 2020 2020 7365 6c66 2e73 7072          self.spr
-0001cae0: 766b 203d 2073 656c 662e 7365 7373 696f  vk = self.sessio
-0001caf0: 6e2e 636f 6f6b 6965 732e 6765 745f 6469  n.cookies.get_di
-0001cb00: 6374 2829 2e67 6574 2827 7370 7261 766b  ct().get('spravk
-0001cb10: 6127 290d 0a0d 0a20 2020 2020 2020 2066  a')....        f
-0001cb20: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
-0001cb30: 5f6c 616e 6775 6167 6520 3d20 7365 6c66  _language = self
-0001cb40: 2e63 6865 636b 5f6c 616e 6775 6167 6528  .check_language(
-0001cb50: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
-0001cb60: 6f5f 6c61 6e67 7561 6765 2c20 7365 6c66  o_language, self
-0001cb70: 2e6c 616e 6775 6167 655f 6d61 702c 206f  .language_map, o
-0001cb80: 7574 7075 745f 7a68 3d73 656c 662e 6f75  utput_zh=self.ou
-0001cb90: 7470 7574 5f7a 6829 0d0a 2020 2020 2020  tput_zh)..      
-0001cba0: 2020 6966 2066 726f 6d5f 6c61 6e67 7561    if from_langua
-0001cbb0: 6765 203d 3d20 2761 7574 6f27 3a0d 0a20  ge == 'auto':.. 
-0001cbc0: 2020 2020 2020 2020 2020 2066 726f 6d5f             from_
-0001cbd0: 6c61 6e67 7561 6765 203d 2073 656c 662e  language = self.
-0001cbe0: 6465 7465 6374 5f6c 616e 6775 6167 6528  detect_language(
-0001cbf0: 7365 6c66 2e73 6573 7369 6f6e 2c20 7175  self.session, qu
-0001cc00: 6572 795f 7465 7874 2c20 7365 6c66 2e73  ery_text, self.s
-0001cc10: 6964 2c20 7365 6c66 2e79 752c 2073 656c  id, self.yu, sel
-0001cc20: 662e 6170 695f 6865 6164 6572 732c 2074  f.api_headers, t
-0001cc30: 696d 656f 7574 2c20 7072 6f78 6965 7329  imeout, proxies)
-0001cc40: 0d0a 0d0a 2020 2020 2020 2020 7061 7261  ....        para
-0001cc50: 6d73 203d 207b 0d0a 2020 2020 2020 2020  ms = {..        
-0001cc60: 2020 2020 2769 6427 3a20 6627 7b73 656c      'id': f'{sel
-0001cc70: 662e 7369 647d 2d7b 7365 6c66 2e71 7565  f.sid}-{self.que
-0001cc80: 7279 5f63 6f75 6e74 7d2d 3027 2c0d 0a20  ry_count}-0',.. 
-0001cc90: 2020 2020 2020 2020 2020 2027 736f 7572             'sour
-0001cca0: 6365 5f6c 616e 6727 3a20 6672 6f6d 5f6c  ce_lang': from_l
-0001ccb0: 616e 6775 6167 652c 0d0a 2020 2020 2020  anguage,..      
-0001ccc0: 2020 2020 2020 2774 6172 6765 745f 6c61        'target_la
-0001ccd0: 6e67 273a 2074 6f5f 6c61 6e67 7561 6765  ng': to_language
-0001cce0: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-0001ccf0: 7372 7627 3a20 2774 722d 7465 7874 272c  srv': 'tr-text',
-0001cd00: 0d0a 2020 2020 2020 2020 2020 2020 2772  ..            'r
-0001cd10: 6561 736f 6e27 3a20 2770 6173 7465 272c  eason': 'paste',
-0001cd20: 2020 2320 2761 7574 6f27 0d0a 2020 2020    # 'auto'..    
-0001cd30: 2020 2020 2020 2020 2766 6f72 6d61 7427          'format'
-0001cd40: 3a20 2774 6578 7427 2c0d 0a20 2020 2020  : 'text',..     
-0001cd50: 2020 2020 2020 2027 616a 6178 273a 2031         'ajax': 1
-0001cd60: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-0001cd70: 7975 273a 2073 656c 662e 7975 2c0d 0a20  yu': self.yu,.. 
-0001cd80: 2020 2020 2020 207d 0d0a 2020 2020 2020         }..      
-0001cd90: 2020 6966 2073 656c 662e 7370 7276 6b3a    if self.sprvk:
-0001cda0: 0d0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
-0001cdb0: 7261 6d73 2e75 7064 6174 6528 7b27 7370  rams.update({'sp
-0001cdc0: 7276 6b27 3a20 7365 6c66 2e73 7072 766b  rvk': self.sprvk
-0001cdd0: 2c20 2779 756d 273a 2073 656c 662e 7975  , 'yum': self.yu
-0001cde0: 6d7d 290d 0a0d 0a20 2020 2020 2020 2070  m})....        p
-0001cdf0: 6179 6c6f 6164 203d 2075 726c 6c69 622e  ayload = urllib.
-0001ce00: 7061 7273 652e 7572 6c65 6e63 6f64 6528  parse.urlencode(
-0001ce10: 7b27 7465 7874 273a 2071 7565 7279 5f74  {'text': query_t
-0001ce20: 6578 742c 2027 6f70 7469 6f6e 7327 3a20  ext, 'options': 
-0001ce30: 347d 290d 0a20 2020 2020 2020 2072 203d  4})..        r =
-0001ce40: 2073 656c 662e 7365 7373 696f 6e2e 706f   self.session.po
-0001ce50: 7374 2873 656c 662e 6170 695f 7572 6c2c  st(self.api_url,
-0001ce60: 2070 6172 616d 733d 7061 7261 6d73 2c20   params=params, 
-0001ce70: 6461 7461 3d70 6179 6c6f 6164 2c20 6865  data=payload, he
-0001ce80: 6164 6572 733d 7365 6c66 2e61 7069 5f68  aders=self.api_h
-0001ce90: 6561 6465 7273 2c20 7469 6d65 6f75 743d  eaders, timeout=
-0001cea0: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
-0001ceb0: 3d70 726f 7869 6573 290d 0a20 2020 2020  =proxies)..     
-0001cec0: 2020 2072 2e72 6169 7365 5f66 6f72 5f73     r.raise_for_s
-0001ced0: 7461 7475 7328 290d 0a20 2020 2020 2020  tatus()..       
-0001cee0: 2064 6174 6120 3d20 722e 6a73 6f6e 2829   data = r.json()
-0001cef0: 0d0a 2020 2020 2020 2020 7469 6d65 2e73  ..        time.s
-0001cf00: 6c65 6570 2873 6c65 6570 5f73 6563 6f6e  leep(sleep_secon
-0001cf10: 6473 290d 0a20 2020 2020 2020 2073 656c  ds)..        sel
-0001cf20: 662e 7175 6572 795f 636f 756e 7420 2b3d  f.query_count +=
-0001cf30: 2031 0d0a 2020 2020 2020 2020 7265 7475   1..        retu
-0001cf40: 726e 2064 6174 6120 6966 2069 735f 6465  rn data if is_de
-0001cf50: 7461 696c 5f72 6573 756c 7420 656c 7365  tail_result else
-0001cf60: 2027 5c6e 272e 6a6f 696e 2864 6174 615b   '\n'.join(data[
-0001cf70: 2774 6578 7427 5d29 0d0a 0d0a 0d0a 636c  'text'])......cl
-0001cf80: 6173 7320 4172 676f 7328 5473 6529 3a0d  ass Argos(Tse):.
-0001cf90: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-0001cfa0: 5f28 7365 6c66 293a 0d0a 2020 2020 2020  _(self):..      
-0001cfb0: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
-0001cfc0: 5f5f 2829 0d0a 2020 2020 2020 2020 7365  __()..        se
-0001cfd0: 6c66 2e62 6567 696e 5f74 696d 6520 3d20  lf.begin_time = 
-0001cfe0: 7469 6d65 2e74 696d 6528 290d 0a20 2020  time.time()..   
-0001cff0: 2020 2020 2073 656c 662e 686f 7374 5f75       self.host_u
-0001d000: 726c 203d 2027 6874 7470 733a 2f2f 7472  rl = 'https://tr
-0001d010: 616e 736c 6174 652e 6172 676f 736f 7065  anslate.argosope
-0001d020: 6e74 6563 682e 636f 6d27 0d0a 2020 2020  ntech.com'..    
-0001d030: 2020 2020 7365 6c66 2e61 7069 5f75 726c      self.api_url
-0001d040: 203d 2066 277b 7365 6c66 2e68 6f73 745f   = f'{self.host_
-0001d050: 7572 6c7d 2f74 7261 6e73 6c61 7465 270d  url}/translate'.
-0001d060: 0a20 2020 2020 2020 2073 656c 662e 6c61  .        self.la
-0001d070: 6e67 7561 6765 5f75 726c 203d 2066 277b  nguage_url = f'{
-0001d080: 7365 6c66 2e68 6f73 745f 7572 6c7d 2f6c  self.host_url}/l
-0001d090: 616e 6775 6167 6573 270d 0a20 2020 2020  anguages'..     
-0001d0a0: 2020 2073 656c 662e 686f 7374 5f68 6561     self.host_hea
-0001d0b0: 6465 7273 203d 2073 656c 662e 6765 745f  ders = self.get_
-0001d0c0: 6865 6164 6572 7328 7365 6c66 2e68 6f73  headers(self.hos
-0001d0d0: 745f 7572 6c2c 2069 665f 6170 693d 4661  t_url, if_api=Fa
-0001d0e0: 6c73 652c 2069 665f 616a 6178 5f66 6f72  lse, if_ajax_for
-0001d0f0: 5f61 7069 3d46 616c 7365 290d 0a20 2020  _api=False)..   
-0001d100: 2020 2020 2073 656c 662e 6170 695f 6865       self.api_he
-0001d110: 6164 6572 7320 3d20 7365 6c66 2e67 6574  aders = self.get
-0001d120: 5f68 6561 6465 7273 2873 656c 662e 686f  _headers(self.ho
-0001d130: 7374 5f75 726c 2c20 6966 5f61 7069 3d54  st_url, if_api=T
-0001d140: 7275 652c 2069 665f 616a 6178 5f66 6f72  rue, if_ajax_for
-0001d150: 5f61 7069 3d46 616c 7365 2c20 6966 5f6a  _api=False, if_j
-0001d160: 736f 6e5f 666f 725f 6170 693d 5472 7565  son_for_api=True
-0001d170: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0001d180: 6c61 6e67 7561 6765 5f68 6561 6465 7273  language_headers
-0001d190: 203d 2073 656c 662e 6765 745f 6865 6164   = self.get_head
-0001d1a0: 6572 7328 7365 6c66 2e68 6f73 745f 7572  ers(self.host_ur
-0001d1b0: 6c2c 2069 665f 6170 693d 4661 6c73 652c  l, if_api=False,
-0001d1c0: 2069 665f 6a73 6f6e 5f66 6f72 5f61 7069   if_json_for_api
-0001d1d0: 3d54 7275 6529 0d0a 2020 2020 2020 2020  =True)..        
-0001d1e0: 7365 6c66 2e68 6f73 745f 706f 6f6c 203d  self.host_pool =
-0001d1f0: 205b 2768 7474 7073 3a2f 2f74 7261 6e73   ['https://trans
-0001d200: 6c61 7465 2e61 7267 6f73 6f70 656e 7465  late.argosopente
-0001d210: 6368 2e63 6f6d 272c 2027 6874 7470 733a  ch.com', 'https:
-0001d220: 2f2f 6c69 6272 6574 7261 6e73 6c61 7465  //libretranslate
-0001d230: 2e64 6527 2c0d 0a20 2020 2020 2020 2020  .de',..         
-0001d240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d250: 2027 6874 7470 733a 2f2f 7472 616e 736c   'https://transl
-0001d260: 6174 652e 6173 7469 616e 2e6f 7267 272c  ate.astian.org',
-0001d270: 2027 6874 7470 733a 2f2f 7472 616e 736c   'https://transl
-0001d280: 6174 652e 6d65 6e74 616c 6974 792e 7269  ate.mentality.ri
-0001d290: 7027 2c0d 0a20 2020 2020 2020 2020 2020  p',..           
-0001d2a0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0001d2b0: 6874 7470 733a 2f2f 7472 616e 736c 6174  https://translat
-0001d2c0: 652e 6170 692e 736b 6974 7a65 6e2e 636f  e.api.skitzen.co
-0001d2d0: 6d27 2c20 2768 7474 7073 3a2f 2f74 7261  m', 'https://tra
-0001d2e0: 6e73 2e7a 696c 6c79 6875 686e 2e63 6f6d  ns.zillyhuhn.com
-0001d2f0: 275d 0d0a 2020 2020 2020 2020 7365 6c66  ']..        self
-0001d300: 2e6c 616e 6775 6167 655f 6d61 7020 3d20  .language_map = 
-0001d310: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-0001d320: 6c66 2e73 6573 7369 6f6e 203d 204e 6f6e  lf.session = Non
-0001d330: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
-0001d340: 7175 6572 795f 636f 756e 7420 3d20 300d  query_count = 0.
-0001d350: 0a20 2020 2020 2020 2073 656c 662e 6f75  .        self.ou
-0001d360: 7470 7574 5f7a 6820 3d20 277a 6827 0d0a  tput_zh = 'zh'..
-0001d370: 2020 2020 2020 2020 7365 6c66 2e69 6e70          self.inp
-0001d380: 7574 5f6c 696d 6974 203d 2069 6e74 2835  ut_limit = int(5
-0001d390: 6533 2920 2023 2075 6e6b 6e6f 776e 0d0a  e3)  # unknown..
-0001d3a0: 2020 2020 2020 2020 7365 6c66 2e64 6566          self.def
-0001d3b0: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
-0001d3c0: 6765 203d 2073 656c 662e 6f75 7470 7574  ge = self.output
-0001d3d0: 5f7a 680d 0a0d 0a20 2020 2040 5473 652e  _zh....    @Tse.
-0001d3e0: 6465 6275 675f 6c61 6e67 7561 6765 5f6d  debug_language_m
-0001d3f0: 6170 0d0a 2020 2020 6465 6620 6765 745f  ap..    def get_
-0001d400: 6c61 6e67 7561 6765 5f6d 6170 2873 656c  language_map(sel
-0001d410: 662c 206c 616e 675f 7572 6c3a 2073 7472  f, lang_url: str
-0001d420: 2c20 7373 3a20 5365 7373 696f 6e54 7970  , ss: SessionTyp
-0001d430: 652c 2068 6561 6465 7273 3a20 6469 6374  e, headers: dict
-0001d440: 2c20 7469 6d65 6f75 743a 204f 7074 696f  , timeout: Optio
-0001d450: 6e61 6c5b 666c 6f61 745d 2c20 7072 6f78  nal[float], prox
-0001d460: 6965 733a 204f 7074 696f 6e61 6c5b 6469  ies: Optional[di
-0001d470: 6374 5d2c 202a 2a6b 7761 7267 733a 204c  ct], **kwargs: L
-0001d480: 616e 674d 6170 4b77 6172 6773 5479 7065  angMapKwargsType
-0001d490: 2920 2d3e 2064 6963 743a 0d0a 2020 2020  ) -> dict:..    
-0001d4a0: 2020 2020 6c61 6e67 5f6c 6973 7420 3d20      lang_list = 
-0001d4b0: 7373 2e67 6574 286c 616e 675f 7572 6c2c  ss.get(lang_url,
-0001d4c0: 2068 6561 6465 7273 3d68 6561 6465 7273   headers=headers
-0001d4d0: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
-0001d4e0: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
-0001d4f0: 6573 292e 6a73 6f6e 2829 0d0a 2020 2020  es).json()..    
-0001d500: 2020 2020 6c61 6e67 5f6c 6973 7420 3d20      lang_list = 
-0001d510: 736f 7274 6564 285b 6c61 6e67 5b27 636f  sorted([lang['co
-0001d520: 6465 275d 2066 6f72 206c 616e 6720 696e  de'] for lang in
-0001d530: 206c 616e 675f 6c69 7374 5d29 0d0a 2020   lang_list])..  
-0001d540: 2020 2020 2020 7265 7475 726e 207b 7d2e        return {}.
-0001d550: 6672 6f6d 6b65 7973 286c 616e 675f 6c69  fromkeys(lang_li
-0001d560: 7374 2c20 6c61 6e67 5f6c 6973 7429 0d0a  st, lang_list)..
-0001d570: 0d0a 2020 2020 4054 7365 2e74 696d 655f  ..    @Tse.time_
-0001d580: 7374 6174 0d0a 2020 2020 4054 7365 2e63  stat..    @Tse.c
-0001d590: 6865 636b 5f71 7565 7279 0d0a 2020 2020  heck_query..    
-0001d5a0: 6465 6620 6172 676f 735f 6170 6928 7365  def argos_api(se
-0001d5b0: 6c66 2c20 7175 6572 795f 7465 7874 3a20  lf, query_text: 
-0001d5c0: 7374 722c 2066 726f 6d5f 6c61 6e67 7561  str, from_langua
-0001d5d0: 6765 3a20 7374 7220 3d20 2761 7574 6f27  ge: str = 'auto'
-0001d5e0: 2c20 746f 5f6c 616e 6775 6167 653a 2073  , to_language: s
-0001d5f0: 7472 203d 2027 656e 272c 202a 2a6b 7761  tr = 'en', **kwa
-0001d600: 7267 733a 2041 7069 4b77 6172 6773 5479  rgs: ApiKwargsTy
-0001d610: 7065 2920 2d3e 2055 6e69 6f6e 5b73 7472  pe) -> Union[str
-0001d620: 2c20 6469 6374 5d3a 0d0a 2020 2020 2020  , dict]:..      
-0001d630: 2020 2222 220d 0a20 2020 2020 2020 2068    """..        h
-0001d640: 7474 7073 3a2f 2f74 7261 6e73 6c61 7465  ttps://translate
-0001d650: 2e61 7267 6f73 6f70 656e 7465 6368 2e63  .argosopentech.c
-0001d660: 6f6d 0d0a 2020 2020 2020 2020 3a70 6172  om..        :par
-0001d670: 616d 2071 7565 7279 5f74 6578 743a 2073  am query_text: s
-0001d680: 7472 2c20 6d75 7374 2e0d 0a20 2020 2020  tr, must...     
-0001d690: 2020 203a 7061 7261 6d20 6672 6f6d 5f6c     :param from_l
-0001d6a0: 616e 6775 6167 653a 2073 7472 2c20 6465  anguage: str, de
-0001d6b0: 6661 756c 7420 2761 7574 6f27 2e0d 0a20  fault 'auto'... 
-0001d6c0: 2020 2020 2020 203a 7061 7261 6d20 746f         :param to
-0001d6d0: 5f6c 616e 6775 6167 653a 2073 7472 2c20  _language: str, 
-0001d6e0: 6465 6661 756c 7420 2765 6e27 2e0d 0a20  default 'en'... 
-0001d6f0: 2020 2020 2020 203a 7061 7261 6d20 2a2a         :param **
-0001d700: 6b77 6172 6773 3a0d 0a20 2020 2020 2020  kwargs:..       
-0001d710: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-0001d720: 7469 6d65 6f75 743a 2066 6c6f 6174 2c20  timeout: float, 
-0001d730: 6465 6661 756c 7420 4e6f 6e65 2e0d 0a20  default None... 
-0001d740: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0001d750: 7061 7261 6d20 7072 6f78 6965 733a 2064  param proxies: d
-0001d760: 6963 742c 2064 6566 6175 6c74 204e 6f6e  ict, default Non
-0001d770: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-0001d780: 2020 2020 3a70 6172 616d 2073 6c65 6570      :param sleep
-0001d790: 5f73 6563 6f6e 6473 3a20 666c 6f61 742c  _seconds: float,
-0001d7a0: 2064 6566 6175 6c74 2030 2e0d 0a20 2020   default 0...   
-0001d7b0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-0001d7c0: 7261 6d20 6973 5f64 6574 6169 6c5f 7265  ram is_detail_re
-0001d7d0: 7375 6c74 3a20 626f 6f6c 2c20 6465 6661  sult: bool, defa
-0001d7e0: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-0001d7f0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0001d800: 616d 2069 665f 6967 6e6f 7265 5f6c 696d  am if_ignore_lim
-0001d810: 6974 5f6f 665f 6c65 6e67 7468 3a20 626f  it_of_length: bo
-0001d820: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
-0001d830: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-0001d840: 2020 2020 3a70 6172 616d 206c 696d 6974      :param limit
-0001d850: 5f6f 665f 6c65 6e67 7468 3a20 696e 742c  _of_length: int,
-0001d860: 2064 6566 6175 6c74 2032 3030 3030 2e0d   default 20000..
-0001d870: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001d880: 203a 7061 7261 6d20 6966 5f69 676e 6f72   :param if_ignor
-0001d890: 655f 656d 7074 795f 7175 6572 793a 2062  e_empty_query: b
-0001d8a0: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
-0001d8b0: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
-0001d8c0: 2020 2020 203a 7061 7261 6d20 7570 6461       :param upda
-0001d8d0: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
-0001d8e0: 5f66 7265 713a 2069 6e74 2c20 6465 6661  _freq: int, defa
-0001d8f0: 756c 7420 3130 3030 2e0d 0a20 2020 2020  ult 1000...     
-0001d900: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-0001d910: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
-0001d920: 5f61 6674 6572 5f73 6563 6f6e 6473 3a20  _after_seconds: 
-0001d930: 666c 6f61 742c 2064 6566 6175 6c74 2031  float, default 1
-0001d940: 3530 302e 0d0a 2020 2020 2020 2020 2020  500...          
-0001d950: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
-0001d960: 7368 6f77 5f74 696d 655f 7374 6174 3a20  show_time_stat: 
-0001d970: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
-0001d980: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
-0001d990: 2020 2020 2020 3a70 6172 616d 2073 686f        :param sho
-0001d9a0: 775f 7469 6d65 5f73 7461 745f 7072 6563  w_time_stat_prec
-0001d9b0: 6973 696f 6e3a 2069 6e74 2c20 6465 6661  ision: int, defa
-0001d9c0: 756c 7420 322e 0d0a 2020 2020 2020 2020  ult 2...        
-0001d9d0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-0001d9e0: 665f 7072 696e 745f 7761 726e 696e 673a  f_print_warning:
-0001d9f0: 2062 6f6f 6c2c 2064 6566 6175 6c74 2054   bool, default T
-0001da00: 7275 652e 0d0a 2020 2020 2020 2020 2020  rue...          
-0001da10: 2020 2020 2020 3a70 6172 616d 2072 6573        :param res
-0001da20: 6574 5f68 6f73 745f 7572 6c3a 2073 7472  et_host_url: str
-0001da30: 2c20 6465 6661 756c 7420 4e6f 6e65 2e0d  , default None..
-0001da40: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-0001da50: 3a20 7374 7220 6f72 2064 6963 740d 0a20  : str or dict.. 
-0001da60: 2020 2020 2020 2022 2222 0d0a 0d0a 2020         """....  
-0001da70: 2020 2020 2020 7265 7365 745f 686f 7374        reset_host
-0001da80: 5f75 726c 203d 206b 7761 7267 732e 6765  _url = kwargs.ge
-0001da90: 7428 2772 6573 6574 5f68 6f73 745f 7572  t('reset_host_ur
-0001daa0: 6c27 2c20 4e6f 6e65 290d 0a20 2020 2020  l', None)..     
-0001dab0: 2020 2069 6620 7265 7365 745f 686f 7374     if reset_host
-0001dac0: 5f75 726c 2061 6e64 2072 6573 6574 5f68  _url and reset_h
-0001dad0: 6f73 745f 7572 6c20 213d 2073 656c 662e  ost_url != self.
-0001dae0: 686f 7374 5f75 726c 3a0d 0a20 2020 2020  host_url:..     
-0001daf0: 2020 2020 2020 2069 6620 7265 7365 745f         if reset_
-0001db00: 686f 7374 5f75 726c 206e 6f74 2069 6e20  host_url not in 
-0001db10: 7365 6c66 2e68 6f73 745f 706f 6f6c 3a0d  self.host_pool:.
-0001db20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001db30: 2072 6169 7365 2054 7261 6e73 6c61 746f   raise Translato
-0001db40: 7245 7272 6f72 0d0a 2020 2020 2020 2020  rError..        
-0001db50: 2020 2020 7365 6c66 2e68 6f73 745f 7572      self.host_ur
-0001db60: 6c20 3d20 7265 7365 745f 686f 7374 5f75  l = reset_host_u
-0001db70: 726c 0d0a 2020 2020 2020 2020 2020 2020  rl..            
-0001db80: 7365 6c66 2e61 7069 5f75 726c 203d 2066  self.api_url = f
-0001db90: 277b 7365 6c66 2e68 6f73 745f 7572 6c7d  '{self.host_url}
-0001dba0: 2f74 7261 6e73 6c61 7465 270d 0a20 2020  /translate'..   
-0001dbb0: 2020 2020 2020 2020 2073 656c 662e 6c61           self.la
-0001dbc0: 6e67 7561 6765 5f75 726c 203d 2066 277b  nguage_url = f'{
-0001dbd0: 7365 6c66 2e68 6f73 745f 7572 6c7d 2f6c  self.host_url}/l
-0001dbe0: 616e 6775 6167 6573 270d 0a0d 0a20 2020  anguages'....   
-0001dbf0: 2020 2020 2074 696d 656f 7574 203d 206b       timeout = k
-0001dc00: 7761 7267 732e 6765 7428 2774 696d 656f  wargs.get('timeo
-0001dc10: 7574 272c 204e 6f6e 6529 0d0a 2020 2020  ut', None)..    
-0001dc20: 2020 2020 7072 6f78 6965 7320 3d20 6b77      proxies = kw
-0001dc30: 6172 6773 2e67 6574 2827 7072 6f78 6965  args.get('proxie
-0001dc40: 7327 2c20 4e6f 6e65 290d 0a20 2020 2020  s', None)..     
-0001dc50: 2020 2073 6c65 6570 5f73 6563 6f6e 6473     sleep_seconds
-0001dc60: 203d 206b 7761 7267 732e 6765 7428 2773   = kwargs.get('s
-0001dc70: 6c65 6570 5f73 6563 6f6e 6473 272c 2030  leep_seconds', 0
-0001dc80: 290d 0a20 2020 2020 2020 2069 665f 7072  )..        if_pr
-0001dc90: 696e 745f 7761 726e 696e 6720 3d20 6b77  int_warning = kw
-0001dca0: 6172 6773 2e67 6574 2827 6966 5f70 7269  args.get('if_pri
-0001dcb0: 6e74 5f77 6172 6e69 6e67 272c 2054 7275  nt_warning', Tru
-0001dcc0: 6529 0d0a 2020 2020 2020 2020 6973 5f64  e)..        is_d
-0001dcd0: 6574 6169 6c5f 7265 7375 6c74 203d 206b  etail_result = k
-0001dce0: 7761 7267 732e 6765 7428 2769 735f 6465  wargs.get('is_de
-0001dcf0: 7461 696c 5f72 6573 756c 7427 2c20 4661  tail_result', Fa
-0001dd00: 6c73 6529 0d0a 2020 2020 2020 2020 7570  lse)..        up
-0001dd10: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-0001dd20: 6572 5f66 7265 7120 3d20 6b77 6172 6773  er_freq = kwargs
-0001dd30: 2e67 6574 2827 7570 6461 7465 5f73 6573  .get('update_ses
-0001dd40: 7369 6f6e 5f61 6674 6572 5f66 7265 7127  sion_after_freq'
-0001dd50: 2c20 7365 6c66 2e64 6566 6175 6c74 5f73  , self.default_s
-0001dd60: 6573 7369 6f6e 5f66 7265 7129 0d0a 2020  ession_freq)..  
-0001dd70: 2020 2020 2020 7570 6461 7465 5f73 6573        update_ses
-0001dd80: 7369 6f6e 5f61 6674 6572 5f73 6563 6f6e  sion_after_secon
-0001dd90: 6473 203d 206b 7761 7267 732e 6765 7428  ds = kwargs.get(
-0001dda0: 2775 7064 6174 655f 7365 7373 696f 6e5f  'update_session_
-0001ddb0: 6166 7465 725f 7365 636f 6e64 7327 2c20  after_seconds', 
-0001ddc0: 7365 6c66 2e64 6566 6175 6c74 5f73 6573  self.default_ses
-0001ddd0: 7369 6f6e 5f73 6563 6f6e 6473 290d 0a20  sion_seconds).. 
-0001dde0: 2020 2020 2020 2073 656c 662e 6368 6563         self.chec
-0001ddf0: 6b5f 696e 7075 745f 6c69 6d69 7428 7175  k_input_limit(qu
-0001de00: 6572 795f 7465 7874 2c20 7365 6c66 2e69  ery_text, self.i
-0001de10: 6e70 7574 5f6c 696d 6974 290d 0a0d 0a20  nput_limit).... 
-0001de20: 2020 2020 2020 206e 6f74 5f75 7064 6174         not_updat
-0001de30: 655f 636f 6e64 5f66 7265 7120 3d20 3120  e_cond_freq = 1 
-0001de40: 6966 2073 656c 662e 7175 6572 795f 636f  if self.query_co
-0001de50: 756e 7420 2520 7570 6461 7465 5f73 6573  unt % update_ses
-0001de60: 7369 6f6e 5f61 6674 6572 5f66 7265 7120  sion_after_freq 
-0001de70: 213d 2030 2065 6c73 6520 300d 0a20 2020  != 0 else 0..   
-0001de80: 2020 2020 206e 6f74 5f75 7064 6174 655f       not_update_
-0001de90: 636f 6e64 5f74 696d 6520 3d20 3120 6966  cond_time = 1 if
-0001dea0: 2074 696d 652e 7469 6d65 2829 202d 2073   time.time() - s
-0001deb0: 656c 662e 6265 6769 6e5f 7469 6d65 203c  elf.begin_time <
-0001dec0: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-0001ded0: 6166 7465 725f 7365 636f 6e64 7320 656c  after_seconds el
-0001dee0: 7365 2030 0d0a 2020 2020 2020 2020 6966  se 0..        if
-0001def0: 206e 6f74 2028 7365 6c66 2e73 6573 7369   not (self.sessi
-0001df00: 6f6e 2061 6e64 2073 656c 662e 6c61 6e67  on and self.lang
-0001df10: 7561 6765 5f6d 6170 2061 6e64 206e 6f74  uage_map and not
-0001df20: 5f75 7064 6174 655f 636f 6e64 5f66 7265  _update_cond_fre
-0001df30: 7120 616e 6420 6e6f 745f 7570 6461 7465  q and not_update
-0001df40: 5f63 6f6e 645f 7469 6d65 293a 0d0a 2020  _cond_time):..  
-0001df50: 2020 2020 2020 2020 2020 7365 6c66 2e62            self.b
-0001df60: 6567 696e 5f74 696d 6520 3d20 7469 6d65  egin_time = time
-0001df70: 2e74 696d 6528 290d 0a20 2020 2020 2020  .time()..       
-0001df80: 2020 2020 2073 656c 662e 7365 7373 696f       self.sessio
-0001df90: 6e20 3d20 7265 7175 6573 7473 2e53 6573  n = requests.Ses
-0001dfa0: 7369 6f6e 2829 0d0a 2020 2020 2020 2020  sion()..        
-0001dfb0: 2020 2020 5f20 3d20 7365 6c66 2e73 6573      _ = self.ses
-0001dfc0: 7369 6f6e 2e67 6574 2873 656c 662e 686f  sion.get(self.ho
-0001dfd0: 7374 5f75 726c 2c20 6865 6164 6572 733d  st_url, headers=
-0001dfe0: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
-0001dff0: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
-0001e000: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
-0001e010: 6965 7329 2e74 6578 740d 0a20 2020 2020  ies).text..     
-0001e020: 2020 2020 2020 2064 6562 7567 5f6c 616e         debug_lan
-0001e030: 675f 6b77 6172 6773 203d 2073 656c 662e  g_kwargs = self.
-0001e040: 6465 6275 675f 6c61 6e67 5f6b 7761 7267  debug_lang_kwarg
-0001e050: 7328 6672 6f6d 5f6c 616e 6775 6167 652c  s(from_language,
-0001e060: 2074 6f5f 6c61 6e67 7561 6765 2c20 7365   to_language, se
-0001e070: 6c66 2e64 6566 6175 6c74 5f66 726f 6d5f  lf.default_from_
-0001e080: 6c61 6e67 7561 6765 2c20 6966 5f70 7269  language, if_pri
-0001e090: 6e74 5f77 6172 6e69 6e67 290d 0a20 2020  nt_warning)..   
-0001e0a0: 2020 2020 2020 2020 2073 656c 662e 6c61           self.la
-0001e0b0: 6e67 7561 6765 5f6d 6170 203d 2073 656c  nguage_map = sel
-0001e0c0: 662e 6765 745f 6c61 6e67 7561 6765 5f6d  f.get_language_m
-0001e0d0: 6170 2873 656c 662e 6c61 6e67 7561 6765  ap(self.language
-0001e0e0: 5f75 726c 2c20 7365 6c66 2e73 6573 7369  _url, self.sessi
-0001e0f0: 6f6e 2c20 7365 6c66 2e6c 616e 6775 6167  on, self.languag
-0001e100: 655f 6865 6164 6572 732c 2074 696d 656f  e_headers, timeo
-0001e110: 7574 2c20 7072 6f78 6965 732c 202a 2a64  ut, proxies, **d
-0001e120: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
-0001e130: 290d 0a0d 0a20 2020 2020 2020 2066 726f  )....        fro
-0001e140: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
-0001e150: 616e 6775 6167 6520 3d20 7365 6c66 2e63  anguage = self.c
-0001e160: 6865 636b 5f6c 616e 6775 6167 6528 6672  heck_language(fr
-0001e170: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-0001e180: 6c61 6e67 7561 6765 2c20 7365 6c66 2e6c  language, self.l
-0001e190: 616e 6775 6167 655f 6d61 702c 206f 7574  anguage_map, out
-0001e1a0: 7075 745f 7a68 3d73 656c 662e 6f75 7470  put_zh=self.outp
-0001e1b0: 7574 5f7a 6829 0d0a 2020 2020 2020 2020  ut_zh)..        
-0001e1c0: 7061 796c 6f61 6420 3d20 7b27 7127 3a20  payload = {'q': 
-0001e1d0: 7175 6572 795f 7465 7874 2c20 2773 6f75  query_text, 'sou
-0001e1e0: 7263 6527 3a20 6672 6f6d 5f6c 616e 6775  rce': from_langu
-0001e1f0: 6167 652c 2027 7461 7267 6574 273a 2074  age, 'target': t
-0001e200: 6f5f 6c61 6e67 7561 6765 2c20 2766 6f72  o_language, 'for
-0001e210: 6d61 7427 3a20 2774 6578 7427 7d0d 0a20  mat': 'text'}.. 
-0001e220: 2020 2020 2020 2072 203d 2073 656c 662e         r = self.
-0001e230: 7365 7373 696f 6e2e 706f 7374 2873 656c  session.post(sel
-0001e240: 662e 6170 695f 7572 6c2c 2068 6561 6465  f.api_url, heade
-0001e250: 7273 3d73 656c 662e 6170 695f 6865 6164  rs=self.api_head
-0001e260: 6572 732c 206a 736f 6e3d 7061 796c 6f61  ers, json=payloa
-0001e270: 642c 2074 696d 656f 7574 3d74 696d 656f  d, timeout=timeo
-0001e280: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
-0001e290: 6965 7329 0d0a 2020 2020 2020 2020 722e  ies)..        r.
-0001e2a0: 7261 6973 655f 666f 725f 7374 6174 7573  raise_for_status
-0001e2b0: 2829 0d0a 2020 2020 2020 2020 6461 7461  ()..        data
-0001e2c0: 203d 2072 2e6a 736f 6e28 290d 0a20 2020   = r.json()..   
-0001e2d0: 2020 2020 2074 696d 652e 736c 6565 7028       time.sleep(
-0001e2e0: 736c 6565 705f 7365 636f 6e64 7329 0d0a  sleep_seconds)..
-0001e2f0: 2020 2020 2020 2020 7365 6c66 2e71 7565          self.que
-0001e300: 7279 5f63 6f75 6e74 202b 3d20 310d 0a20  ry_count += 1.. 
-0001e310: 2020 2020 2020 2072 6574 7572 6e20 6461         return da
-0001e320: 7461 2069 6620 6973 5f64 6574 6169 6c5f  ta if is_detail_
-0001e330: 7265 7375 6c74 2065 6c73 6520 6461 7461  result else data
-0001e340: 5b27 7472 616e 736c 6174 6564 5465 7874  ['translatedText
-0001e350: 275d 0d0a 0d0a 0d0a 636c 6173 7320 4963  ']......class Ic
-0001e360: 6962 6128 5473 6529 3a0d 0a20 2020 2064  iba(Tse):..    d
-0001e370: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-0001e380: 293a 0d0a 2020 2020 2020 2020 7375 7065  ):..        supe
-0001e390: 7228 292e 5f5f 696e 6974 5f5f 2829 0d0a  r().__init__()..
-0001e3a0: 2020 2020 2020 2020 7365 6c66 2e62 6567          self.beg
-0001e3b0: 696e 5f74 696d 6520 3d20 7469 6d65 2e74  in_time = time.t
-0001e3c0: 696d 6528 290d 0a20 2020 2020 2020 2073  ime()..        s
-0001e3d0: 656c 662e 686f 7374 5f75 726c 203d 2027  elf.host_url = '
-0001e3e0: 6874 7470 733a 2f2f 7777 772e 6963 6962  https://www.icib
-0001e3f0: 612e 636f 6d2f 6679 270d 0a20 2020 2020  a.com/fy'..     
-0001e400: 2020 2073 656c 662e 6170 695f 7572 6c20     self.api_url 
-0001e410: 3d20 2768 7474 7073 3a2f 2f69 6661 6e79  = 'https://ifany
-0001e420: 692e 6963 6962 612e 636f 6d2f 696e 6465  i.iciba.com/inde
-0001e430: 782e 7068 7027 0d0a 2020 2020 2020 2020  x.php'..        
-0001e440: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
-0001e450: 7320 3d20 7365 6c66 2e67 6574 5f68 6561  s = self.get_hea
-0001e460: 6465 7273 2873 656c 662e 686f 7374 5f75  ders(self.host_u
-0001e470: 726c 2c20 6966 5f61 7069 3d46 616c 7365  rl, if_api=False
-0001e480: 2c20 6966 5f61 6a61 785f 666f 725f 6170  , if_ajax_for_ap
-0001e490: 693d 4661 6c73 6529 0d0a 2020 2020 2020  i=False)..      
-0001e4a0: 2020 7365 6c66 2e61 7069 5f68 6561 6465    self.api_heade
-0001e4b0: 7273 203d 2073 656c 662e 6765 745f 6865  rs = self.get_he
-0001e4c0: 6164 6572 7328 7365 6c66 2e68 6f73 745f  aders(self.host_
-0001e4d0: 7572 6c2c 2069 665f 6170 693d 5472 7565  url, if_api=True
-0001e4e0: 2c20 6966 5f61 6a61 785f 666f 725f 6170  , if_ajax_for_ap
-0001e4f0: 693d 5472 7565 2c20 6966 5f6a 736f 6e5f  i=True, if_json_
-0001e500: 666f 725f 6170 693d 4661 6c73 6529 0d0a  for_api=False)..
-0001e510: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
-0001e520: 6775 6167 655f 6865 6164 6572 7320 3d20  guage_headers = 
-0001e530: 7365 6c66 2e67 6574 5f68 6561 6465 7273  self.get_headers
-0001e540: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
-0001e550: 6966 5f61 7069 3d46 616c 7365 2c20 6966  if_api=False, if
-0001e560: 5f6a 736f 6e5f 666f 725f 6170 693d 5472  _json_for_api=Tr
-0001e570: 7565 290d 0a20 2020 2020 2020 2073 656c  ue)..        sel
-0001e580: 662e 6c61 6e67 7561 6765 5f6d 6170 203d  f.language_map =
-0001e590: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
-0001e5a0: 656c 662e 7365 7373 696f 6e20 3d20 4e6f  elf.session = No
-0001e5b0: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
-0001e5c0: 2e73 5f79 3220 3d20 2769 6661 6e79 6977  .s_y2 = 'ifanyiw
-0001e5d0: 6562 3868 6339 7339 3865 270d 0a20 2020  eb8hc9s98e'..   
-0001e5e0: 2020 2020 2073 656c 662e 7175 6572 795f       self.query_
-0001e5f0: 636f 756e 7420 3d20 300d 0a20 2020 2020  count = 0..     
-0001e600: 2020 2073 656c 662e 6f75 7470 7574 5f7a     self.output_z
-0001e610: 6820 3d20 277a 6827 0d0a 2020 2020 2020  h = 'zh'..      
-0001e620: 2020 7365 6c66 2e69 6e70 7574 5f6c 696d    self.input_lim
-0001e630: 6974 203d 2069 6e74 2833 6533 290d 0a20  it = int(3e3).. 
-0001e640: 2020 2020 2020 2073 656c 662e 6465 6661         self.defa
-0001e650: 756c 745f 6672 6f6d 5f6c 616e 6775 6167  ult_from_languag
-0001e660: 6520 3d20 7365 6c66 2e6f 7574 7075 745f  e = self.output_
-0001e670: 7a68 0d0a 0d0a 2020 2020 4054 7365 2e64  zh....    @Tse.d
-0001e680: 6562 7567 5f6c 616e 6775 6167 655f 6d61  ebug_language_ma
-0001e690: 700d 0a20 2020 2064 6566 2067 6574 5f6c  p..    def get_l
-0001e6a0: 616e 6775 6167 655f 6d61 7028 7365 6c66  anguage_map(self
-0001e6b0: 2c20 6170 695f 7572 6c3a 2073 7472 2c20  , api_url: str, 
-0001e6c0: 7373 3a20 5365 7373 696f 6e54 7970 652c  ss: SessionType,
-0001e6d0: 2068 6561 6465 7273 3a20 6469 6374 2c20   headers: dict, 
-0001e6e0: 7469 6d65 6f75 743a 204f 7074 696f 6e61  timeout: Optiona
-0001e6f0: 6c5b 666c 6f61 745d 2c20 7072 6f78 6965  l[float], proxie
-0001e700: 733a 204f 7074 696f 6e61 6c5b 6469 6374  s: Optional[dict
-0001e710: 5d2c 202a 2a6b 7761 7267 733a 204c 616e  ], **kwargs: Lan
-0001e720: 674d 6170 4b77 6172 6773 5479 7065 2920  gMapKwargsType) 
-0001e730: 2d3e 2064 6963 743a 0d0a 2020 2020 2020  -> dict:..      
-0001e740: 2020 7061 7261 6d73 203d 207b 2763 273a    params = {'c':
-0001e750: 2027 7472 616e 7327 2c20 276d 273a 2027   'trans', 'm': '
-0001e760: 6765 744c 616e 6775 6167 6527 2c20 2771  getLanguage', 'q
-0001e770: 273a 2030 2c20 2774 7970 6527 3a20 2765  ': 0, 'type': 'e
-0001e780: 6e27 2c20 2773 7472 273a 2027 277d 0d0a  n', 'str': ''}..
-0001e790: 2020 2020 2020 2020 6464 203d 2073 732e          dd = ss.
-0001e7a0: 6765 7428 6170 695f 7572 6c2c 2070 6172  get(api_url, par
-0001e7b0: 616d 733d 7061 7261 6d73 2c20 6865 6164  ams=params, head
-0001e7c0: 6572 733d 6865 6164 6572 732c 2074 696d  ers=headers, tim
-0001e7d0: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
-0001e7e0: 6f78 6965 733d 7072 6f78 6965 7329 2e6a  oxies=proxies).j
-0001e7f0: 736f 6e28 290d 0a20 2020 2020 2020 206c  son()..        l
-0001e800: 616e 675f 6c69 7374 203d 2073 6f72 7465  ang_list = sorte
-0001e810: 6428 6c69 7374 2873 6574 285b 6c61 6e67  d(list(set([lang
-0001e820: 2066 6f72 2064 2069 6e20 6464 2066 6f72   for d in dd for
-0001e830: 206c 616e 6720 696e 2064 645b 645d 5d29   lang in dd[d]])
-0001e840: 2929 0d0a 2020 2020 2020 2020 7265 7475  ))..        retu
-0001e850: 726e 207b 7d2e 6672 6f6d 6b65 7973 286c  rn {}.fromkeys(l
-0001e860: 616e 675f 6c69 7374 2c20 6c61 6e67 5f6c  ang_list, lang_l
-0001e870: 6973 7429 0d0a 0d0a 2020 2020 4054 7365  ist)....    @Tse
-0001e880: 2e74 696d 655f 7374 6174 0d0a 2020 2020  .time_stat..    
-0001e890: 4054 7365 2e63 6865 636b 5f71 7565 7279  @Tse.check_query
-0001e8a0: 0d0a 2020 2020 6465 6620 6963 6962 615f  ..    def iciba_
-0001e8b0: 6170 6928 7365 6c66 2c20 7175 6572 795f  api(self, query_
-0001e8c0: 7465 7874 3a20 7374 722c 2066 726f 6d5f  text: str, from_
-0001e8d0: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
-0001e8e0: 2761 7574 6f27 2c20 746f 5f6c 616e 6775  'auto', to_langu
-0001e8f0: 6167 653a 2073 7472 203d 2027 656e 272c  age: str = 'en',
-0001e900: 202a 2a6b 7761 7267 733a 2041 7069 4b77   **kwargs: ApiKw
-0001e910: 6172 6773 5479 7065 2920 2d3e 2055 6e69  argsType) -> Uni
-0001e920: 6f6e 5b73 7472 2c20 6469 6374 5d3a 0d0a  on[str, dict]:..
-0001e930: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-0001e940: 2020 2020 2068 7474 7073 3a2f 2f77 7777       https://www
-0001e950: 2e69 6369 6261 2e63 6f6d 2f66 790d 0a20  .iciba.com/fy.. 
-0001e960: 2020 2020 2020 203a 7061 7261 6d20 7175         :param qu
-0001e970: 6572 795f 7465 7874 3a20 7374 722c 206d  ery_text: str, m
-0001e980: 7573 742e 0d0a 2020 2020 2020 2020 3a70  ust...        :p
-0001e990: 6172 616d 2066 726f 6d5f 6c61 6e67 7561  aram from_langua
-0001e9a0: 6765 3a20 7374 722c 2064 6566 6175 6c74  ge: str, default
-0001e9b0: 2027 6175 746f 272e 0d0a 2020 2020 2020   'auto'...      
-0001e9c0: 2020 3a70 6172 616d 2074 6f5f 6c61 6e67    :param to_lang
-0001e9d0: 7561 6765 3a20 7374 722c 2064 6566 6175  uage: str, defau
-0001e9e0: 6c74 2027 656e 272e 0d0a 2020 2020 2020  lt 'en'...      
-0001e9f0: 2020 3a70 6172 616d 202a 2a6b 7761 7267    :param **kwarg
-0001ea00: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-0001ea10: 2020 2020 3a70 6172 616d 2074 696d 656f      :param timeo
-0001ea20: 7574 3a20 666c 6f61 742c 2064 6566 6175  ut: float, defau
-0001ea30: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
-0001ea40: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0001ea50: 2070 726f 7869 6573 3a20 6469 6374 2c20   proxies: dict, 
-0001ea60: 6465 6661 756c 7420 4e6f 6e65 2e0d 0a20  default None... 
-0001ea70: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0001ea80: 7061 7261 6d20 736c 6565 705f 7365 636f  param sleep_seco
-0001ea90: 6e64 733a 2066 6c6f 6174 2c20 6465 6661  nds: float, defa
-0001eaa0: 756c 7420 302e 0d0a 2020 2020 2020 2020  ult 0...        
-0001eab0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-0001eac0: 735f 6465 7461 696c 5f72 6573 756c 743a  s_detail_result:
-0001ead0: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
-0001eae0: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
-0001eaf0: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-0001eb00: 5f69 676e 6f72 655f 6c69 6d69 745f 6f66  _ignore_limit_of
-0001eb10: 5f6c 656e 6774 683a 2062 6f6f 6c2c 2064  _length: bool, d
-0001eb20: 6566 6175 6c74 2046 616c 7365 2e0d 0a20  efault False... 
-0001eb30: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0001eb40: 7061 7261 6d20 6c69 6d69 745f 6f66 5f6c  param limit_of_l
-0001eb50: 656e 6774 683a 2069 6e74 2c20 6465 6661  ength: int, defa
-0001eb60: 756c 7420 3230 3030 302e 0d0a 2020 2020  ult 20000...    
-0001eb70: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0001eb80: 616d 2069 665f 6967 6e6f 7265 5f65 6d70  am if_ignore_emp
-0001eb90: 7479 5f71 7565 7279 3a20 626f 6f6c 2c20  ty_query: bool, 
-0001eba0: 6465 6661 756c 7420 4661 6c73 652e 0d0a  default False...
-0001ebb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ebc0: 3a70 6172 616d 2075 7064 6174 655f 7365  :param update_se
-0001ebd0: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
-0001ebe0: 3a20 696e 742c 2064 6566 6175 6c74 2031  : int, default 1
-0001ebf0: 3030 302e 0d0a 2020 2020 2020 2020 2020  000...          
-0001ec00: 2020 2020 2020 3a70 6172 616d 2075 7064        :param upd
-0001ec10: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0001ec20: 725f 7365 636f 6e64 733a 2066 6c6f 6174  r_seconds: float
-0001ec30: 2c20 6465 6661 756c 7420 3135 3030 2e0d  , default 1500..
-0001ec40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ec50: 203a 7061 7261 6d20 6966 5f73 686f 775f   :param if_show_
-0001ec60: 7469 6d65 5f73 7461 743a 2062 6f6f 6c2c  time_stat: bool,
-0001ec70: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
-0001ec80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ec90: 203a 7061 7261 6d20 7368 6f77 5f74 696d   :param show_tim
-0001eca0: 655f 7374 6174 5f70 7265 6369 7369 6f6e  e_stat_precision
-0001ecb0: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
-0001ecc0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001ecd0: 2020 203a 7061 7261 6d20 6966 5f70 7269     :param if_pri
-0001ece0: 6e74 5f77 6172 6e69 6e67 3a20 626f 6f6c  nt_warning: bool
-0001ecf0: 2c20 6465 6661 756c 7420 5472 7565 2e0d  , default True..
-0001ed00: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-0001ed10: 3a20 7374 7220 6f72 2064 6963 740d 0a20  : str or dict.. 
-0001ed20: 2020 2020 2020 2022 2222 0d0a 0d0a 2020         """....  
-0001ed30: 2020 2020 2020 7469 6d65 6f75 7420 3d20        timeout = 
-0001ed40: 6b77 6172 6773 2e67 6574 2827 7469 6d65  kwargs.get('time
-0001ed50: 6f75 7427 2c20 4e6f 6e65 290d 0a20 2020  out', None)..   
-0001ed60: 2020 2020 2070 726f 7869 6573 203d 206b       proxies = k
-0001ed70: 7761 7267 732e 6765 7428 2770 726f 7869  wargs.get('proxi
-0001ed80: 6573 272c 204e 6f6e 6529 0d0a 2020 2020  es', None)..    
-0001ed90: 2020 2020 736c 6565 705f 7365 636f 6e64      sleep_second
-0001eda0: 7320 3d20 6b77 6172 6773 2e67 6574 2827  s = kwargs.get('
-0001edb0: 736c 6565 705f 7365 636f 6e64 7327 2c20  sleep_seconds', 
-0001edc0: 3029 0d0a 2020 2020 2020 2020 6966 5f70  0)..        if_p
-0001edd0: 7269 6e74 5f77 6172 6e69 6e67 203d 206b  rint_warning = k
-0001ede0: 7761 7267 732e 6765 7428 2769 665f 7072  wargs.get('if_pr
-0001edf0: 696e 745f 7761 726e 696e 6727 2c20 5472  int_warning', Tr
-0001ee00: 7565 290d 0a20 2020 2020 2020 2069 735f  ue)..        is_
-0001ee10: 6465 7461 696c 5f72 6573 756c 7420 3d20  detail_result = 
-0001ee20: 6b77 6172 6773 2e67 6574 2827 6973 5f64  kwargs.get('is_d
-0001ee30: 6574 6169 6c5f 7265 7375 6c74 272c 2046  etail_result', F
-0001ee40: 616c 7365 290d 0a20 2020 2020 2020 2075  alse)..        u
-0001ee50: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-0001ee60: 7465 725f 6672 6571 203d 206b 7761 7267  ter_freq = kwarg
-0001ee70: 732e 6765 7428 2775 7064 6174 655f 7365  s.get('update_se
-0001ee80: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
-0001ee90: 272c 2073 656c 662e 6465 6661 756c 745f  ', self.default_
-0001eea0: 7365 7373 696f 6e5f 6672 6571 290d 0a20  session_freq).. 
-0001eeb0: 2020 2020 2020 2075 7064 6174 655f 7365         update_se
-0001eec0: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
-0001eed0: 6e64 7320 3d20 6b77 6172 6773 2e67 6574  nds = kwargs.get
-0001eee0: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
-0001eef0: 5f61 6674 6572 5f73 6563 6f6e 6473 272c  _after_seconds',
-0001ef00: 2073 656c 662e 6465 6661 756c 745f 7365   self.default_se
-0001ef10: 7373 696f 6e5f 7365 636f 6e64 7329 0d0a  ssion_seconds)..
-0001ef20: 2020 2020 2020 2020 7365 6c66 2e63 6865          self.che
-0001ef30: 636b 5f69 6e70 7574 5f6c 696d 6974 2871  ck_input_limit(q
-0001ef40: 7565 7279 5f74 6578 742c 2073 656c 662e  uery_text, self.
-0001ef50: 696e 7075 745f 6c69 6d69 7429 0d0a 0d0a  input_limit)....
-0001ef60: 2020 2020 2020 2020 6e6f 745f 7570 6461          not_upda
-0001ef70: 7465 5f63 6f6e 645f 6672 6571 203d 2031  te_cond_freq = 1
-0001ef80: 2069 6620 7365 6c66 2e71 7565 7279 5f63   if self.query_c
-0001ef90: 6f75 6e74 2025 2075 7064 6174 655f 7365  ount % update_se
-0001efa0: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
-0001efb0: 2021 3d20 3020 656c 7365 2030 0d0a 2020   != 0 else 0..  
-0001efc0: 2020 2020 2020 6e6f 745f 7570 6461 7465        not_update
-0001efd0: 5f63 6f6e 645f 7469 6d65 203d 2031 2069  _cond_time = 1 i
-0001efe0: 6620 7469 6d65 2e74 696d 6528 2920 2d20  f time.time() - 
-0001eff0: 7365 6c66 2e62 6567 696e 5f74 696d 6520  self.begin_time 
-0001f000: 3c20 7570 6461 7465 5f73 6573 7369 6f6e  < update_session
-0001f010: 5f61 6674 6572 5f73 6563 6f6e 6473 2065  _after_seconds e
-0001f020: 6c73 6520 300d 0a20 2020 2020 2020 2069  lse 0..        i
-0001f030: 6620 6e6f 7420 2873 656c 662e 7365 7373  f not (self.sess
-0001f040: 696f 6e20 616e 6420 7365 6c66 2e6c 616e  ion and self.lan
-0001f050: 6775 6167 655f 6d61 7020 616e 6420 6e6f  guage_map and no
-0001f060: 745f 7570 6461 7465 5f63 6f6e 645f 6672  t_update_cond_fr
-0001f070: 6571 2061 6e64 206e 6f74 5f75 7064 6174  eq and not_updat
-0001f080: 655f 636f 6e64 5f74 696d 6529 3a0d 0a20  e_cond_time):.. 
-0001f090: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001f0a0: 6265 6769 6e5f 7469 6d65 203d 2074 696d  begin_time = tim
-0001f0b0: 652e 7469 6d65 2829 0d0a 2020 2020 2020  e.time()..      
-0001f0c0: 2020 2020 2020 7365 6c66 2e73 6573 7369        self.sessi
-0001f0d0: 6f6e 203d 2072 6571 7565 7374 732e 5365  on = requests.Se
-0001f0e0: 7373 696f 6e28 290d 0a20 2020 2020 2020  ssion()..       
-0001f0f0: 2020 2020 205f 203d 2073 656c 662e 7365       _ = self.se
-0001f100: 7373 696f 6e2e 6765 7428 7365 6c66 2e68  ssion.get(self.h
-0001f110: 6f73 745f 7572 6c2c 2068 6561 6465 7273  ost_url, headers
-0001f120: 3d73 656c 662e 686f 7374 5f68 6561 6465  =self.host_heade
-0001f130: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
-0001f140: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
-0001f150: 7869 6573 290d 0a20 2020 2020 2020 2020  xies)..         
-0001f160: 2020 2064 6562 7567 5f6c 616e 675f 6b77     debug_lang_kw
-0001f170: 6172 6773 203d 2073 656c 662e 6465 6275  args = self.debu
-0001f180: 675f 6c61 6e67 5f6b 7761 7267 7328 6672  g_lang_kwargs(fr
-0001f190: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-0001f1a0: 6c61 6e67 7561 6765 2c20 7365 6c66 2e64  language, self.d
-0001f1b0: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
-0001f1c0: 7561 6765 2c20 6966 5f70 7269 6e74 5f77  uage, if_print_w
-0001f1d0: 6172 6e69 6e67 290d 0a20 2020 2020 2020  arning)..       
-0001f1e0: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-0001f1f0: 6765 5f6d 6170 203d 2073 656c 662e 6765  ge_map = self.ge
-0001f200: 745f 6c61 6e67 7561 6765 5f6d 6170 2873  t_language_map(s
-0001f210: 656c 662e 6170 695f 7572 6c2c 2073 656c  elf.api_url, sel
-0001f220: 662e 7365 7373 696f 6e2c 2073 656c 662e  f.session, self.
-0001f230: 6c61 6e67 7561 6765 5f68 6561 6465 7273  language_headers
-0001f240: 2c20 7469 6d65 6f75 742c 2070 726f 7869  , timeout, proxi
-0001f250: 6573 2c20 2a2a 6465 6275 675f 6c61 6e67  es, **debug_lang
-0001f260: 5f6b 7761 7267 7329 0d0a 0d0a 2020 2020  _kwargs)....    
-0001f270: 2020 2020 6672 6f6d 5f6c 616e 6775 6167      from_languag
-0001f280: 652c 2074 6f5f 6c61 6e67 7561 6765 203d  e, to_language =
-0001f290: 2073 656c 662e 6368 6563 6b5f 6c61 6e67   self.check_lang
-0001f2a0: 7561 6765 2866 726f 6d5f 6c61 6e67 7561  uage(from_langua
-0001f2b0: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
-0001f2c0: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
-0001f2d0: 6170 2c20 6f75 7470 7574 5f7a 683d 7365  ap, output_zh=se
-0001f2e0: 6c66 2e6f 7574 7075 745f 7a68 290d 0a0d  lf.output_zh)...
-0001f2f0: 0a20 2020 2020 2020 2073 6967 6e20 3d20  .        sign = 
-0001f300: 6861 7368 6c69 622e 6d64 3528 6622 366b  hashlib.md5(f"6k
-0001f310: 6579 5f77 6562 5f66 616e 7969 7b73 656c  ey_web_fanyi{sel
-0001f320: 662e 735f 7932 7d7b 7175 6572 795f 7465  f.s_y2}{query_te
-0001f330: 7874 7d22 2e65 6e63 6f64 6528 2929 2e68  xt}".encode()).h
-0001f340: 6578 6469 6765 7374 2829 5b3a 3136 5d20  exdigest()[:16] 
-0001f350: 2023 2073 7472 6970 2829 0d0a 2020 2020   # strip()..    
-0001f360: 2020 2020 7061 7261 6d73 203d 207b 2763      params = {'c
-0001f370: 273a 2027 7472 616e 7327 2c20 276d 273a  ': 'trans', 'm':
-0001f380: 2027 6679 272c 2027 636c 6965 6e74 273a   'fy', 'client':
-0001f390: 2036 2c20 2761 7574 685f 7573 6572 273a   6, 'auth_user':
-0001f3a0: 2027 6b65 795f 7765 625f 6661 6e79 6927   'key_web_fanyi'
-0001f3b0: 2c20 2773 6967 6e27 3a20 7369 676e 7d0d  , 'sign': sign}.
-0001f3c0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0001f3d0: 203d 207b 2766 726f 6d27 3a20 6672 6f6d   = {'from': from
-0001f3e0: 5f6c 616e 6775 6167 652c 2027 746f 273a  _language, 'to':
-0001f3f0: 2074 6f5f 6c61 6e67 7561 6765 2c20 2771   to_language, 'q
-0001f400: 273a 2071 7565 7279 5f74 6578 747d 0d0a  ': query_text}..
-0001f410: 2020 2020 2020 2020 7220 3d20 7365 6c66          r = self
-0001f420: 2e73 6573 7369 6f6e 2e70 6f73 7428 7365  .session.post(se
-0001f430: 6c66 2e61 7069 5f75 726c 2c20 6865 6164  lf.api_url, head
-0001f440: 6572 733d 7365 6c66 2e61 7069 5f68 6561  ers=self.api_hea
-0001f450: 6465 7273 2c20 7061 7261 6d73 3d70 6172  ders, params=par
-0001f460: 616d 732c 2064 6174 613d 7061 796c 6f61  ams, data=payloa
-0001f470: 642c 2074 696d 656f 7574 3d74 696d 656f  d, timeout=timeo
-0001f480: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
-0001f490: 6965 7329 0d0a 2020 2020 2020 2020 722e  ies)..        r.
-0001f4a0: 7261 6973 655f 666f 725f 7374 6174 7573  raise_for_status
-0001f4b0: 2829 0d0a 2020 2020 2020 2020 6461 7461  ()..        data
-0001f4c0: 203d 2072 2e6a 736f 6e28 290d 0a20 2020   = r.json()..   
-0001f4d0: 2020 2020 2074 696d 652e 736c 6565 7028       time.sleep(
-0001f4e0: 736c 6565 705f 7365 636f 6e64 7329 0d0a  sleep_seconds)..
-0001f4f0: 2020 2020 2020 2020 7365 6c66 2e71 7565          self.que
-0001f500: 7279 5f63 6f75 6e74 202b 3d20 310d 0a20  ry_count += 1.. 
-0001f510: 2020 2020 2020 2072 6574 7572 6e20 6461         return da
-0001f520: 7461 2069 6620 6973 5f64 6574 6169 6c5f  ta if is_detail_
-0001f530: 7265 7375 6c74 2065 6c73 6520 6461 7461  result else data
-0001f540: 5b27 636f 6e74 656e 7427 5d20 6966 2064  ['content'] if d
-0001f550: 6174 612e 6765 7428 2769 7353 656e 7369  ata.get('isSensi
-0001f560: 7469 7665 2729 203d 3d20 3120 656c 7365  tive') == 1 else
-0001f570: 2064 6174 615b 2763 6f6e 7465 6e74 275d   data['content']
-0001f580: 5b27 6f75 7427 5d0d 0a0d 0a0d 0a63 6c61  ['out']......cla
-0001f590: 7373 2049 666c 7974 656b 5631 2854 7365  ss IflytekV1(Tse
-0001f5a0: 293a 0d0a 2020 2020 6465 6620 5f5f 696e  ):..    def __in
-0001f5b0: 6974 5f5f 2873 656c 6629 3a0d 0a20 2020  it__(self):..   
-0001f5c0: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
-0001f5d0: 6e69 745f 5f28 290d 0a20 2020 2020 2020  nit__()..       
-0001f5e0: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
-0001f5f0: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
-0001f600: 2020 2020 2020 2020 7365 6c66 2e68 6f73          self.hos
-0001f610: 745f 7572 6c20 3d20 2768 7474 7073 3a2f  t_url = 'https:/
-0001f620: 2f73 6161 732e 7866 7975 6e2e 636e 2f74  /saas.xfyun.cn/t
-0001f630: 7261 6e73 6c61 7465 3f74 6162 4b65 793d  ranslate?tabKey=
-0001f640: 7465 7874 270d 0a20 2020 2020 2020 2073  text'..        s
-0001f650: 656c 662e 6170 695f 7572 6c20 3d20 2768  elf.api_url = 'h
+0001be90: 696d 656f 7574 3a20 666c 6f61 742c 2064  imeout: float, d
+0001bea0: 6566 6175 6c74 204e 6f6e 652e 0d0a 2020  efault None...  
+0001beb0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+0001bec0: 6172 616d 2070 726f 7869 6573 3a20 6469  aram proxies: di
+0001bed0: 6374 2c20 6465 6661 756c 7420 4e6f 6e65  ct, default None
+0001bee0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001bef0: 2020 203a 7061 7261 6d20 736c 6565 705f     :param sleep_
+0001bf00: 7365 636f 6e64 733a 2066 6c6f 6174 2c20  seconds: float, 
+0001bf10: 6465 6661 756c 7420 302e 0d0a 2020 2020  default 0...    
+0001bf20: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+0001bf30: 616d 2069 735f 6465 7461 696c 5f72 6573  am is_detail_res
+0001bf40: 756c 743a 2062 6f6f 6c2c 2064 6566 6175  ult: bool, defau
+0001bf50: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+0001bf60: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+0001bf70: 6d20 6966 5f69 676e 6f72 655f 6c69 6d69  m if_ignore_limi
+0001bf80: 745f 6f66 5f6c 656e 6774 683a 2062 6f6f  t_of_length: boo
+0001bf90: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+0001bfa0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001bfb0: 2020 203a 7061 7261 6d20 6c69 6d69 745f     :param limit_
+0001bfc0: 6f66 5f6c 656e 6774 683a 2069 6e74 2c20  of_length: int, 
+0001bfd0: 6465 6661 756c 7420 3230 3030 302e 0d0a  default 20000...
+0001bfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bff0: 3a70 6172 616d 2069 665f 6967 6e6f 7265  :param if_ignore
+0001c000: 5f65 6d70 7479 5f71 7565 7279 3a20 626f  _empty_query: bo
+0001c010: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
+0001c020: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+0001c030: 2020 2020 3a70 6172 616d 2075 7064 6174      :param updat
+0001c040: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
+0001c050: 6672 6571 3a20 696e 742c 2064 6566 6175  freq: int, defau
+0001c060: 6c74 2031 3030 302e 0d0a 2020 2020 2020  lt 1000...      
+0001c070: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+0001c080: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
+0001c090: 6166 7465 725f 7365 636f 6e64 733a 2066  after_seconds: f
+0001c0a0: 6c6f 6174 2c20 6465 6661 756c 7420 3135  loat, default 15
+0001c0b0: 3030 2e0d 0a20 2020 2020 2020 2020 2020  00...           
+0001c0c0: 2020 2020 203a 7061 7261 6d20 6966 5f73       :param if_s
+0001c0d0: 686f 775f 7469 6d65 5f73 7461 743a 2062  how_time_stat: b
+0001c0e0: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
+0001c0f0: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
+0001c100: 2020 2020 203a 7061 7261 6d20 7368 6f77       :param show
+0001c110: 5f74 696d 655f 7374 6174 5f70 7265 6369  _time_stat_preci
+0001c120: 7369 6f6e 3a20 696e 742c 2064 6566 6175  sion: int, defau
+0001c130: 6c74 2032 2e0d 0a20 2020 2020 2020 2020  lt 2...         
+0001c140: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+0001c150: 5f70 7269 6e74 5f77 6172 6e69 6e67 3a20  _print_warning: 
+0001c160: 626f 6f6c 2c20 6465 6661 756c 7420 5472  bool, default Tr
+0001c170: 7565 2e0d 0a20 2020 2020 2020 2020 2020  ue...           
+0001c180: 2020 2020 203a 7061 7261 6d20 7265 7365       :param rese
+0001c190: 745f 686f 7374 5f75 726c 3a20 7374 722c  t_host_url: str,
+0001c1a0: 2064 6566 6175 6c74 204e 6f6e 652e 2065   default None. e
+0001c1b0: 673a 2027 6874 7470 733a 2f2f 7472 616e  g: 'https://tran
+0001c1c0: 736c 6174 652e 7961 6e64 6578 2e66 7227  slate.yandex.fr'
+0001c1d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001c1e0: 2020 3a70 6172 616d 2069 665f 6368 6563    :param if_chec
+0001c1f0: 6b5f 7265 7365 745f 686f 7374 5f75 726c  k_reset_host_url
+0001c200: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+0001c210: 5472 7565 2e0d 0a20 2020 2020 2020 203a  True...        :
+0001c220: 7265 7475 726e 3a20 7374 7220 6f72 2064  return: str or d
+0001c230: 6963 740d 0a20 2020 2020 2020 2022 2222  ict..        """
+0001c240: 0d0a 0d0a 2020 2020 2020 2020 7265 7365  ....        rese
+0001c250: 745f 686f 7374 5f75 726c 203d 206b 7761  t_host_url = kwa
+0001c260: 7267 732e 6765 7428 2772 6573 6574 5f68  rgs.get('reset_h
+0001c270: 6f73 745f 7572 6c27 2c20 4e6f 6e65 290d  ost_url', None).
+0001c280: 0a20 2020 2020 2020 2069 6620 7265 7365  .        if rese
+0001c290: 745f 686f 7374 5f75 726c 2061 6e64 2072  t_host_url and r
+0001c2a0: 6573 6574 5f68 6f73 745f 7572 6c20 213d  eset_host_url !=
+0001c2b0: 2073 656c 662e 686f 7374 5f75 726c 3a0d   self.host_url:.
+0001c2c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001c2d0: 6b77 6172 6773 2e67 6574 2827 6966 5f63  kwargs.get('if_c
+0001c2e0: 6865 636b 5f72 6573 6574 5f68 6f73 745f  heck_reset_host_
+0001c2f0: 7572 6c27 2c20 5472 7565 2920 616e 6420  url', True) and 
+0001c300: 6e6f 7420 7265 7365 745f 686f 7374 5f75  not reset_host_u
+0001c310: 726c 5b3a 3235 5d20 3d3d 2027 6874 7470  rl[:25] == 'http
+0001c320: 733a 2f2f 7472 616e 736c 6174 652e 7961  s://translate.ya
+0001c330: 6e64 6578 2e27 3a0d 0a20 2020 2020 2020  ndex.':..       
+0001c340: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
+0001c350: 7261 6e73 6c61 746f 7245 7272 6f72 0d0a  ranslatorError..
+0001c360: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001c370: 2e68 6f73 745f 7572 6c20 3d20 7265 7365  .host_url = rese
+0001c380: 745f 686f 7374 5f75 726c 2e73 7472 6970  t_host_url.strip
+0001c390: 2827 2f27 290d 0a0d 0a20 2020 2020 2020  ('/')....       
+0001c3a0: 2074 696d 656f 7574 203d 206b 7761 7267   timeout = kwarg
+0001c3b0: 732e 6765 7428 2774 696d 656f 7574 272c  s.get('timeout',
+0001c3c0: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
+0001c3d0: 7072 6f78 6965 7320 3d20 6b77 6172 6773  proxies = kwargs
+0001c3e0: 2e67 6574 2827 7072 6f78 6965 7327 2c20  .get('proxies', 
+0001c3f0: 4e6f 6e65 290d 0a20 2020 2020 2020 2073  None)..        s
+0001c400: 6c65 6570 5f73 6563 6f6e 6473 203d 206b  leep_seconds = k
+0001c410: 7761 7267 732e 6765 7428 2773 6c65 6570  wargs.get('sleep
+0001c420: 5f73 6563 6f6e 6473 272c 2030 290d 0a20  _seconds', 0).. 
+0001c430: 2020 2020 2020 2069 665f 7072 696e 745f         if_print_
+0001c440: 7761 726e 696e 6720 3d20 6b77 6172 6773  warning = kwargs
+0001c450: 2e67 6574 2827 6966 5f70 7269 6e74 5f77  .get('if_print_w
+0001c460: 6172 6e69 6e67 272c 2054 7275 6529 0d0a  arning', True)..
+0001c470: 2020 2020 2020 2020 6973 5f64 6574 6169          is_detai
+0001c480: 6c5f 7265 7375 6c74 203d 206b 7761 7267  l_result = kwarg
+0001c490: 732e 6765 7428 2769 735f 6465 7461 696c  s.get('is_detail
+0001c4a0: 5f72 6573 756c 7427 2c20 4661 6c73 6529  _result', False)
+0001c4b0: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
+0001c4c0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
+0001c4d0: 7265 7120 3d20 6b77 6172 6773 2e67 6574  req = kwargs.get
+0001c4e0: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
+0001c4f0: 5f61 6674 6572 5f66 7265 7127 2c20 7365  _after_freq', se
+0001c500: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
+0001c510: 6f6e 5f66 7265 7129 0d0a 2020 2020 2020  on_freq)..      
+0001c520: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
+0001c530: 5f61 6674 6572 5f73 6563 6f6e 6473 203d  _after_seconds =
+0001c540: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
+0001c550: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0001c560: 725f 7365 636f 6e64 7327 2c20 7365 6c66  r_seconds', self
+0001c570: 2e64 6566 6175 6c74 5f73 6573 7369 6f6e  .default_session
+0001c580: 5f73 6563 6f6e 6473 290d 0a20 2020 2020  _seconds)..     
+0001c590: 2020 2073 656c 662e 6368 6563 6b5f 696e     self.check_in
+0001c5a0: 7075 745f 6c69 6d69 7428 7175 6572 795f  put_limit(query_
+0001c5b0: 7465 7874 2c20 7365 6c66 2e69 6e70 7574  text, self.input
+0001c5c0: 5f6c 696d 6974 290d 0a0d 0a20 2020 2020  _limit)....     
+0001c5d0: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
+0001c5e0: 6e64 5f66 7265 7120 3d20 3120 6966 2073  nd_freq = 1 if s
+0001c5f0: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
+0001c600: 2520 7570 6461 7465 5f73 6573 7369 6f6e  % update_session
+0001c610: 5f61 6674 6572 5f66 7265 7120 213d 2030  _after_freq != 0
+0001c620: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
+0001c630: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
+0001c640: 5f74 696d 6520 3d20 3120 6966 2074 696d  _time = 1 if tim
+0001c650: 652e 7469 6d65 2829 202d 2073 656c 662e  e.time() - self.
+0001c660: 6265 6769 6e5f 7469 6d65 203c 2075 7064  begin_time < upd
+0001c670: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0001c680: 725f 7365 636f 6e64 7320 656c 7365 2030  r_seconds else 0
+0001c690: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
+0001c6a0: 2028 7365 6c66 2e73 6573 7369 6f6e 2061   (self.session a
+0001c6b0: 6e64 2073 656c 662e 6c61 6e67 7561 6765  nd self.language
+0001c6c0: 5f6d 6170 2061 6e64 206e 6f74 5f75 7064  _map and not_upd
+0001c6d0: 6174 655f 636f 6e64 5f66 7265 7120 616e  ate_cond_freq an
+0001c6e0: 6420 6e6f 745f 7570 6461 7465 5f63 6f6e  d not_update_con
+0001c6f0: 645f 7469 6d65 2061 6e64 2073 656c 662e  d_time and self.
+0001c700: 7369 6420 616e 6420 7365 6c66 2e79 7529  sid and self.yu)
+0001c710: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+0001c720: 656c 662e 6265 6769 6e5f 7469 6d65 203d  elf.begin_time =
+0001c730: 2074 696d 652e 7469 6d65 2829 0d0a 2020   time.time()..  
+0001c740: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+0001c750: 6573 7369 6f6e 203d 2072 6571 7565 7374  ession = request
+0001c760: 732e 5365 7373 696f 6e28 290d 0a20 2020  s.Session()..   
+0001c770: 2020 2020 2020 2020 205f 203d 2073 656c           _ = sel
+0001c780: 662e 7365 7373 696f 6e2e 6765 7428 7365  f.session.get(se
+0001c790: 6c66 2e68 6f6d 655f 7572 6c2c 2068 6561  lf.home_url, hea
+0001c7a0: 6465 7273 3d73 656c 662e 686f 7374 5f68  ders=self.host_h
+0001c7b0: 6561 6465 7273 2c20 7469 6d65 6f75 743d  eaders, timeout=
+0001c7c0: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
+0001c7d0: 3d70 726f 7869 6573 290d 0a20 2020 2020  =proxies)..     
+0001c7e0: 2020 2020 2020 205f 203d 2073 656c 662e         _ = self.
+0001c7f0: 7365 7373 696f 6e2e 6765 7428 7365 6c66  session.get(self
+0001c800: 2e68 6f73 745f 7572 6c2c 2068 6561 6465  .host_url, heade
+0001c810: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
+0001c820: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+0001c830: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+0001c840: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
+0001c850: 2020 2020 2068 6f73 745f 6874 6d6c 203d       host_html =
+0001c860: 2073 656c 662e 7365 7373 696f 6e2e 6765   self.session.ge
+0001c870: 7428 7365 6c66 2e68 6f73 745f 7572 6c2c  t(self.host_url,
+0001c880: 2068 6561 6465 7273 3d73 656c 662e 686f   headers=self.ho
+0001c890: 7374 5f68 6561 6465 7273 2c20 7469 6d65  st_headers, time
+0001c8a0: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
+0001c8b0: 7869 6573 3d70 726f 7869 6573 292e 7465  xies=proxies).te
+0001c8c0: 7874 0d0a 0d0a 2020 2020 2020 2020 2020  xt....          
+0001c8d0: 2020 6465 6275 675f 6c61 6e67 5f6b 7761    debug_lang_kwa
+0001c8e0: 7267 7320 3d20 7365 6c66 2e64 6562 7567  rgs = self.debug
+0001c8f0: 5f6c 616e 675f 6b77 6172 6773 2866 726f  _lang_kwargs(fro
+0001c900: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
+0001c910: 616e 6775 6167 652c 2073 656c 662e 6465  anguage, self.de
+0001c920: 6661 756c 745f 6672 6f6d 5f6c 616e 6775  fault_from_langu
+0001c930: 6167 652c 2069 665f 7072 696e 745f 7761  age, if_print_wa
+0001c940: 726e 696e 6729 0d0a 2020 2020 2020 2020  rning)..        
+0001c950: 2020 2020 7365 6c66 2e6c 616e 6775 6167      self.languag
+0001c960: 655f 6d61 7020 3d20 7365 6c66 2e67 6574  e_map = self.get
+0001c970: 5f6c 616e 6775 6167 655f 6d61 7028 686f  _language_map(ho
+0001c980: 7374 5f68 746d 6c2c 202a 2a64 6562 7567  st_html, **debug
+0001c990: 5f6c 616e 675f 6b77 6172 6773 290d 0a0d  _lang_kwargs)...
+0001c9a0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0001c9b0: 662e 7369 6420 3d20 7365 6c66 2e67 6574  f.sid = self.get
+0001c9c0: 5f73 6964 2868 6f73 745f 6874 6d6c 290d  _sid(host_html).
+0001c9d0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0001c9e0: 662e 7975 6d20 3d20 7365 6c66 2e67 6574  f.yum = self.get
+0001c9f0: 5f79 756d 2829 0d0a 2020 2020 2020 2020  _yum()..        
+0001ca00: 2020 2020 7365 6c66 2e79 7520 3d20 7365      self.yu = se
+0001ca10: 6c66 2e73 6573 7369 6f6e 2e63 6f6f 6b69  lf.session.cooki
+0001ca20: 6573 2e67 6574 5f64 6963 7428 292e 6765  es.get_dict().ge
+0001ca30: 7428 2779 7569 6473 7327 2920 6f72 2066  t('yuidss') or f
+0001ca40: 277b 7261 6e64 6f6d 2e72 616e 6469 6e74  '{random.randint
+0001ca50: 2869 6e74 2831 6538 292c 2069 6e74 2839  (int(1e8), int(9
+0001ca60: 6538 2929 7d7b 696e 7428 7469 6d65 2e74  e8))}{int(time.t
+0001ca70: 696d 6528 2929 7d27 0d0a 2020 2020 2020  ime())}'..      
+0001ca80: 2020 2020 2020 7365 6c66 2e73 7072 766b        self.sprvk
+0001ca90: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
+0001caa0: 636f 6f6b 6965 732e 6765 745f 6469 6374  cookies.get_dict
+0001cab0: 2829 2e67 6574 2827 7370 7261 766b 6127  ().get('spravka'
+0001cac0: 290d 0a0d 0a20 2020 2020 2020 2066 726f  )....        fro
+0001cad0: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
+0001cae0: 616e 6775 6167 6520 3d20 7365 6c66 2e63  anguage = self.c
+0001caf0: 6865 636b 5f6c 616e 6775 6167 6528 6672  heck_language(fr
+0001cb00: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
+0001cb10: 6c61 6e67 7561 6765 2c20 7365 6c66 2e6c  language, self.l
+0001cb20: 616e 6775 6167 655f 6d61 702c 206f 7574  anguage_map, out
+0001cb30: 7075 745f 7a68 3d73 656c 662e 6f75 7470  put_zh=self.outp
+0001cb40: 7574 5f7a 6829 0d0a 2020 2020 2020 2020  ut_zh)..        
+0001cb50: 6966 2066 726f 6d5f 6c61 6e67 7561 6765  if from_language
+0001cb60: 203d 3d20 2761 7574 6f27 3a0d 0a20 2020   == 'auto':..   
+0001cb70: 2020 2020 2020 2020 2066 726f 6d5f 6c61           from_la
+0001cb80: 6e67 7561 6765 203d 2073 656c 662e 6465  nguage = self.de
+0001cb90: 7465 6374 5f6c 616e 6775 6167 6528 7365  tect_language(se
+0001cba0: 6c66 2e73 6573 7369 6f6e 2c20 7175 6572  lf.session, quer
+0001cbb0: 795f 7465 7874 2c20 7365 6c66 2e73 6964  y_text, self.sid
+0001cbc0: 2c20 7365 6c66 2e79 752c 2073 656c 662e  , self.yu, self.
+0001cbd0: 6170 695f 6865 6164 6572 732c 2074 696d  api_headers, tim
+0001cbe0: 656f 7574 2c20 7072 6f78 6965 7329 0d0a  eout, proxies)..
+0001cbf0: 0d0a 2020 2020 2020 2020 7061 7261 6d73  ..        params
+0001cc00: 203d 207b 0d0a 2020 2020 2020 2020 2020   = {..          
+0001cc10: 2020 2769 6427 3a20 6627 7b73 656c 662e    'id': f'{self.
+0001cc20: 7369 647d 2d7b 7365 6c66 2e71 7565 7279  sid}-{self.query
+0001cc30: 5f63 6f75 6e74 7d2d 3027 2c0d 0a20 2020  _count}-0',..   
+0001cc40: 2020 2020 2020 2020 2027 736f 7572 6365           'source
+0001cc50: 5f6c 616e 6727 3a20 6672 6f6d 5f6c 616e  _lang': from_lan
+0001cc60: 6775 6167 652c 0d0a 2020 2020 2020 2020  guage,..        
+0001cc70: 2020 2020 2774 6172 6765 745f 6c61 6e67      'target_lang
+0001cc80: 273a 2074 6f5f 6c61 6e67 7561 6765 2c0d  ': to_language,.
+0001cc90: 0a20 2020 2020 2020 2020 2020 2027 7372  .            'sr
+0001cca0: 7627 3a20 2774 722d 7465 7874 272c 0d0a  v': 'tr-text',..
+0001ccb0: 2020 2020 2020 2020 2020 2020 2772 6561              'rea
+0001ccc0: 736f 6e27 3a20 2770 6173 7465 272c 2020  son': 'paste',  
+0001ccd0: 2320 2761 7574 6f27 0d0a 2020 2020 2020  # 'auto'..      
+0001cce0: 2020 2020 2020 2766 6f72 6d61 7427 3a20        'format': 
+0001ccf0: 2774 6578 7427 2c0d 0a20 2020 2020 2020  'text',..       
+0001cd00: 2020 2020 2027 616a 6178 273a 2031 2c0d       'ajax': 1,.
+0001cd10: 0a20 2020 2020 2020 2020 2020 2027 7975  .            'yu
+0001cd20: 273a 2073 656c 662e 7975 2c0d 0a20 2020  ': self.yu,..   
+0001cd30: 2020 2020 207d 0d0a 2020 2020 2020 2020       }..        
+0001cd40: 6966 2073 656c 662e 7370 7276 6b3a 0d0a  if self.sprvk:..
+0001cd50: 2020 2020 2020 2020 2020 2020 7061 7261              para
+0001cd60: 6d73 2e75 7064 6174 6528 7b27 7370 7276  ms.update({'sprv
+0001cd70: 6b27 3a20 7365 6c66 2e73 7072 766b 2c20  k': self.sprvk, 
+0001cd80: 2779 756d 273a 2073 656c 662e 7975 6d7d  'yum': self.yum}
+0001cd90: 290d 0a0d 0a20 2020 2020 2020 2070 6179  )....        pay
+0001cda0: 6c6f 6164 203d 2075 726c 6c69 622e 7061  load = urllib.pa
+0001cdb0: 7273 652e 7572 6c65 6e63 6f64 6528 7b27  rse.urlencode({'
+0001cdc0: 7465 7874 273a 2071 7565 7279 5f74 6578  text': query_tex
+0001cdd0: 742c 2027 6f70 7469 6f6e 7327 3a20 347d  t, 'options': 4}
+0001cde0: 290d 0a20 2020 2020 2020 2072 203d 2073  )..        r = s
+0001cdf0: 656c 662e 7365 7373 696f 6e2e 706f 7374  elf.session.post
+0001ce00: 2873 656c 662e 6170 695f 7572 6c2c 2070  (self.api_url, p
+0001ce10: 6172 616d 733d 7061 7261 6d73 2c20 6461  arams=params, da
+0001ce20: 7461 3d70 6179 6c6f 6164 2c20 6865 6164  ta=payload, head
+0001ce30: 6572 733d 7365 6c66 2e61 7069 5f68 6561  ers=self.api_hea
+0001ce40: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+0001ce50: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+0001ce60: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
+0001ce70: 2072 2e72 6169 7365 5f66 6f72 5f73 7461   r.raise_for_sta
+0001ce80: 7475 7328 290d 0a20 2020 2020 2020 2064  tus()..        d
+0001ce90: 6174 6120 3d20 722e 6a73 6f6e 2829 0d0a  ata = r.json()..
+0001cea0: 2020 2020 2020 2020 7469 6d65 2e73 6c65          time.sle
+0001ceb0: 6570 2873 6c65 6570 5f73 6563 6f6e 6473  ep(sleep_seconds
+0001cec0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+0001ced0: 7175 6572 795f 636f 756e 7420 2b3d 2031  query_count += 1
+0001cee0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+0001cef0: 2064 6174 6120 6966 2069 735f 6465 7461   data if is_deta
+0001cf00: 696c 5f72 6573 756c 7420 656c 7365 2027  il_result else '
+0001cf10: 5c6e 272e 6a6f 696e 2864 6174 615b 2774  \n'.join(data['t
+0001cf20: 6578 7427 5d29 0d0a 0d0a 0d0a 636c 6173  ext'])......clas
+0001cf30: 7320 4172 676f 7328 5473 6529 3a0d 0a20  s Argos(Tse):.. 
+0001cf40: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+0001cf50: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+0001cf60: 7375 7065 7228 292e 5f5f 696e 6974 5f5f  super().__init__
+0001cf70: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
+0001cf80: 2e62 6567 696e 5f74 696d 6520 3d20 7469  .begin_time = ti
+0001cf90: 6d65 2e74 696d 6528 290d 0a20 2020 2020  me.time()..     
+0001cfa0: 2020 2073 656c 662e 686f 7374 5f75 726c     self.host_url
+0001cfb0: 203d 2027 6874 7470 733a 2f2f 7472 616e   = 'https://tran
+0001cfc0: 736c 6174 652e 6172 676f 736f 7065 6e74  slate.argosopent
+0001cfd0: 6563 682e 636f 6d27 0d0a 2020 2020 2020  ech.com'..      
+0001cfe0: 2020 7365 6c66 2e61 7069 5f75 726c 203d    self.api_url =
+0001cff0: 2066 277b 7365 6c66 2e68 6f73 745f 7572   f'{self.host_ur
+0001d000: 6c7d 2f74 7261 6e73 6c61 7465 270d 0a20  l}/translate'.. 
+0001d010: 2020 2020 2020 2073 656c 662e 6c61 6e67         self.lang
+0001d020: 7561 6765 5f75 726c 203d 2066 277b 7365  uage_url = f'{se
+0001d030: 6c66 2e68 6f73 745f 7572 6c7d 2f6c 616e  lf.host_url}/lan
+0001d040: 6775 6167 6573 270d 0a20 2020 2020 2020  guages'..       
+0001d050: 2073 656c 662e 686f 7374 5f68 6561 6465   self.host_heade
+0001d060: 7273 203d 2073 656c 662e 6765 745f 6865  rs = self.get_he
+0001d070: 6164 6572 7328 7365 6c66 2e68 6f73 745f  aders(self.host_
+0001d080: 7572 6c2c 2069 665f 6170 693d 4661 6c73  url, if_api=Fals
+0001d090: 652c 2069 665f 616a 6178 5f66 6f72 5f61  e, if_ajax_for_a
+0001d0a0: 7069 3d46 616c 7365 290d 0a20 2020 2020  pi=False)..     
+0001d0b0: 2020 2073 656c 662e 6170 695f 6865 6164     self.api_head
+0001d0c0: 6572 7320 3d20 7365 6c66 2e67 6574 5f68  ers = self.get_h
+0001d0d0: 6561 6465 7273 2873 656c 662e 686f 7374  eaders(self.host
+0001d0e0: 5f75 726c 2c20 6966 5f61 7069 3d54 7275  _url, if_api=Tru
+0001d0f0: 652c 2069 665f 616a 6178 5f66 6f72 5f61  e, if_ajax_for_a
+0001d100: 7069 3d46 616c 7365 2c20 6966 5f6a 736f  pi=False, if_jso
+0001d110: 6e5f 666f 725f 6170 693d 5472 7565 290d  n_for_api=True).
+0001d120: 0a20 2020 2020 2020 2073 656c 662e 6c61  .        self.la
+0001d130: 6e67 7561 6765 5f68 6561 6465 7273 203d  nguage_headers =
+0001d140: 2073 656c 662e 6765 745f 6865 6164 6572   self.get_header
+0001d150: 7328 7365 6c66 2e68 6f73 745f 7572 6c2c  s(self.host_url,
+0001d160: 2069 665f 6170 693d 4661 6c73 652c 2069   if_api=False, i
+0001d170: 665f 6a73 6f6e 5f66 6f72 5f61 7069 3d54  f_json_for_api=T
+0001d180: 7275 6529 0d0a 2020 2020 2020 2020 7365  rue)..        se
+0001d190: 6c66 2e68 6f73 745f 706f 6f6c 203d 205b  lf.host_pool = [
+0001d1a0: 2768 7474 7073 3a2f 2f74 7261 6e73 6c61  'https://transla
+0001d1b0: 7465 2e61 7267 6f73 6f70 656e 7465 6368  te.argosopentech
+0001d1c0: 2e63 6f6d 272c 2027 6874 7470 733a 2f2f  .com', 'https://
+0001d1d0: 6c69 6272 6574 7261 6e73 6c61 7465 2e64  libretranslate.d
+0001d1e0: 6527 2c0d 0a20 2020 2020 2020 2020 2020  e',..           
+0001d1f0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0001d200: 6874 7470 733a 2f2f 7472 616e 736c 6174  https://translat
+0001d210: 652e 6173 7469 616e 2e6f 7267 272c 2027  e.astian.org', '
+0001d220: 6874 7470 733a 2f2f 7472 616e 736c 6174  https://translat
+0001d230: 652e 6d65 6e74 616c 6974 792e 7269 7027  e.mentality.rip'
+0001d240: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001d250: 2020 2020 2020 2020 2020 2020 2027 6874               'ht
+0001d260: 7470 733a 2f2f 7472 616e 736c 6174 652e  tps://translate.
+0001d270: 6170 692e 736b 6974 7a65 6e2e 636f 6d27  api.skitzen.com'
+0001d280: 2c20 2768 7474 7073 3a2f 2f74 7261 6e73  , 'https://trans
+0001d290: 2e7a 696c 6c79 6875 686e 2e63 6f6d 275d  .zillyhuhn.com']
+0001d2a0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6c  ..        self.l
+0001d2b0: 616e 6775 6167 655f 6d61 7020 3d20 4e6f  anguage_map = No
+0001d2c0: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
+0001d2d0: 2e73 6573 7369 6f6e 203d 204e 6f6e 650d  .session = None.
+0001d2e0: 0a20 2020 2020 2020 2073 656c 662e 7175  .        self.qu
+0001d2f0: 6572 795f 636f 756e 7420 3d20 300d 0a20  ery_count = 0.. 
+0001d300: 2020 2020 2020 2073 656c 662e 6f75 7470         self.outp
+0001d310: 7574 5f7a 6820 3d20 277a 6827 0d0a 2020  ut_zh = 'zh'..  
+0001d320: 2020 2020 2020 7365 6c66 2e69 6e70 7574        self.input
+0001d330: 5f6c 696d 6974 203d 2069 6e74 2835 6533  _limit = int(5e3
+0001d340: 2920 2023 2075 6e6b 6e6f 776e 0d0a 2020  )  # unknown..  
+0001d350: 2020 2020 2020 7365 6c66 2e64 6566 6175        self.defau
+0001d360: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
+0001d370: 203d 2073 656c 662e 6f75 7470 7574 5f7a   = self.output_z
+0001d380: 680d 0a0d 0a20 2020 2040 5473 652e 6465  h....    @Tse.de
+0001d390: 6275 675f 6c61 6e67 7561 6765 5f6d 6170  bug_language_map
+0001d3a0: 0d0a 2020 2020 6465 6620 6765 745f 6c61  ..    def get_la
+0001d3b0: 6e67 7561 6765 5f6d 6170 2873 656c 662c  nguage_map(self,
+0001d3c0: 206c 616e 675f 7572 6c3a 2073 7472 2c20   lang_url: str, 
+0001d3d0: 7373 3a20 5365 7373 696f 6e54 7970 652c  ss: SessionType,
+0001d3e0: 2068 6561 6465 7273 3a20 6469 6374 2c20   headers: dict, 
+0001d3f0: 7469 6d65 6f75 743a 204f 7074 696f 6e61  timeout: Optiona
+0001d400: 6c5b 666c 6f61 745d 2c20 7072 6f78 6965  l[float], proxie
+0001d410: 733a 204f 7074 696f 6e61 6c5b 6469 6374  s: Optional[dict
+0001d420: 5d2c 202a 2a6b 7761 7267 733a 204c 616e  ], **kwargs: Lan
+0001d430: 674d 6170 4b77 6172 6773 5479 7065 2920  gMapKwargsType) 
+0001d440: 2d3e 2064 6963 743a 0d0a 2020 2020 2020  -> dict:..      
+0001d450: 2020 6c61 6e67 5f6c 6973 7420 3d20 7373    lang_list = ss
+0001d460: 2e67 6574 286c 616e 675f 7572 6c2c 2068  .get(lang_url, h
+0001d470: 6561 6465 7273 3d68 6561 6465 7273 2c20  eaders=headers, 
+0001d480: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+0001d490: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+0001d4a0: 292e 6a73 6f6e 2829 0d0a 2020 2020 2020  ).json()..      
+0001d4b0: 2020 6c61 6e67 5f6c 6973 7420 3d20 736f    lang_list = so
+0001d4c0: 7274 6564 285b 6c61 6e67 5b27 636f 6465  rted([lang['code
+0001d4d0: 275d 2066 6f72 206c 616e 6720 696e 206c  '] for lang in l
+0001d4e0: 616e 675f 6c69 7374 5d29 0d0a 2020 2020  ang_list])..    
+0001d4f0: 2020 2020 7265 7475 726e 207b 7d2e 6672      return {}.fr
+0001d500: 6f6d 6b65 7973 286c 616e 675f 6c69 7374  omkeys(lang_list
+0001d510: 2c20 6c61 6e67 5f6c 6973 7429 0d0a 0d0a  , lang_list)....
+0001d520: 2020 2020 4054 7365 2e74 696d 655f 7374      @Tse.time_st
+0001d530: 6174 0d0a 2020 2020 4054 7365 2e63 6865  at..    @Tse.che
+0001d540: 636b 5f71 7565 7279 0d0a 2020 2020 6465  ck_query..    de
+0001d550: 6620 6172 676f 735f 6170 6928 7365 6c66  f argos_api(self
+0001d560: 2c20 7175 6572 795f 7465 7874 3a20 7374  , query_text: st
+0001d570: 722c 2066 726f 6d5f 6c61 6e67 7561 6765  r, from_language
+0001d580: 3a20 7374 7220 3d20 2761 7574 6f27 2c20  : str = 'auto', 
+0001d590: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
+0001d5a0: 203d 2027 656e 272c 202a 2a6b 7761 7267   = 'en', **kwarg
+0001d5b0: 733a 2041 7069 4b77 6172 6773 5479 7065  s: ApiKwargsType
+0001d5c0: 2920 2d3e 2055 6e69 6f6e 5b73 7472 2c20  ) -> Union[str, 
+0001d5d0: 6469 6374 5d3a 0d0a 2020 2020 2020 2020  dict]:..        
+0001d5e0: 2222 220d 0a20 2020 2020 2020 2068 7474  """..        htt
+0001d5f0: 7073 3a2f 2f74 7261 6e73 6c61 7465 2e61  ps://translate.a
+0001d600: 7267 6f73 6f70 656e 7465 6368 2e63 6f6d  rgosopentech.com
+0001d610: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+0001d620: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
+0001d630: 2c20 6d75 7374 2e0d 0a20 2020 2020 2020  , must...       
+0001d640: 203a 7061 7261 6d20 6672 6f6d 5f6c 616e   :param from_lan
+0001d650: 6775 6167 653a 2073 7472 2c20 6465 6661  guage: str, defa
+0001d660: 756c 7420 2761 7574 6f27 2e0d 0a20 2020  ult 'auto'...   
+0001d670: 2020 2020 203a 7061 7261 6d20 746f 5f6c       :param to_l
+0001d680: 616e 6775 6167 653a 2073 7472 2c20 6465  anguage: str, de
+0001d690: 6661 756c 7420 2765 6e27 2e0d 0a20 2020  fault 'en'...   
+0001d6a0: 2020 2020 203a 7061 7261 6d20 2a2a 6b77       :param **kw
+0001d6b0: 6172 6773 3a0d 0a20 2020 2020 2020 2020  args:..         
+0001d6c0: 2020 2020 2020 203a 7061 7261 6d20 7469         :param ti
+0001d6d0: 6d65 6f75 743a 2066 6c6f 6174 2c20 6465  meout: float, de
+0001d6e0: 6661 756c 7420 4e6f 6e65 2e0d 0a20 2020  fault None...   
+0001d6f0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+0001d700: 7261 6d20 7072 6f78 6965 733a 2064 6963  ram proxies: dic
+0001d710: 742c 2064 6566 6175 6c74 204e 6f6e 652e  t, default None.
+0001d720: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001d730: 2020 3a70 6172 616d 2073 6c65 6570 5f73    :param sleep_s
+0001d740: 6563 6f6e 6473 3a20 666c 6f61 742c 2064  econds: float, d
+0001d750: 6566 6175 6c74 2030 2e0d 0a20 2020 2020  efault 0...     
+0001d760: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+0001d770: 6d20 6973 5f64 6574 6169 6c5f 7265 7375  m is_detail_resu
+0001d780: 6c74 3a20 626f 6f6c 2c20 6465 6661 756c  lt: bool, defaul
+0001d790: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+0001d7a0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+0001d7b0: 2069 665f 6967 6e6f 7265 5f6c 696d 6974   if_ignore_limit
+0001d7c0: 5f6f 665f 6c65 6e67 7468 3a20 626f 6f6c  _of_length: bool
+0001d7d0: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+0001d7e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001d7f0: 2020 3a70 6172 616d 206c 696d 6974 5f6f    :param limit_o
+0001d800: 665f 6c65 6e67 7468 3a20 696e 742c 2064  f_length: int, d
+0001d810: 6566 6175 6c74 2032 3030 3030 2e0d 0a20  efault 20000... 
+0001d820: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0001d830: 7061 7261 6d20 6966 5f69 676e 6f72 655f  param if_ignore_
+0001d840: 656d 7074 795f 7175 6572 793a 2062 6f6f  empty_query: boo
+0001d850: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+0001d860: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001d870: 2020 203a 7061 7261 6d20 7570 6461 7465     :param update
+0001d880: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
+0001d890: 7265 713a 2069 6e74 2c20 6465 6661 756c  req: int, defaul
+0001d8a0: 7420 3130 3030 2e0d 0a20 2020 2020 2020  t 1000...       
+0001d8b0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+0001d8c0: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+0001d8d0: 6674 6572 5f73 6563 6f6e 6473 3a20 666c  fter_seconds: fl
+0001d8e0: 6f61 742c 2064 6566 6175 6c74 2031 3530  oat, default 150
+0001d8f0: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+0001d900: 2020 2020 3a70 6172 616d 2069 665f 7368      :param if_sh
+0001d910: 6f77 5f74 696d 655f 7374 6174 3a20 626f  ow_time_stat: bo
+0001d920: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
+0001d930: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+0001d940: 2020 2020 3a70 6172 616d 2073 686f 775f      :param show_
+0001d950: 7469 6d65 5f73 7461 745f 7072 6563 6973  time_stat_precis
+0001d960: 696f 6e3a 2069 6e74 2c20 6465 6661 756c  ion: int, defaul
+0001d970: 7420 322e 0d0a 2020 2020 2020 2020 2020  t 2...          
+0001d980: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
+0001d990: 7072 696e 745f 7761 726e 696e 673a 2062  print_warning: b
+0001d9a0: 6f6f 6c2c 2064 6566 6175 6c74 2054 7275  ool, default Tru
+0001d9b0: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+0001d9c0: 2020 2020 3a70 6172 616d 2072 6573 6574      :param reset
+0001d9d0: 5f68 6f73 745f 7572 6c3a 2073 7472 2c20  _host_url: str, 
+0001d9e0: 6465 6661 756c 7420 4e6f 6e65 2e0d 0a20  default None... 
+0001d9f0: 2020 2020 2020 203a 7265 7475 726e 3a20         :return: 
+0001da00: 7374 7220 6f72 2064 6963 740d 0a20 2020  str or dict..   
+0001da10: 2020 2020 2022 2222 0d0a 0d0a 2020 2020       """....    
+0001da20: 2020 2020 7265 7365 745f 686f 7374 5f75      reset_host_u
+0001da30: 726c 203d 206b 7761 7267 732e 6765 7428  rl = kwargs.get(
+0001da40: 2772 6573 6574 5f68 6f73 745f 7572 6c27  'reset_host_url'
+0001da50: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
+0001da60: 2069 6620 7265 7365 745f 686f 7374 5f75   if reset_host_u
+0001da70: 726c 2061 6e64 2072 6573 6574 5f68 6f73  rl and reset_hos
+0001da80: 745f 7572 6c20 213d 2073 656c 662e 686f  t_url != self.ho
+0001da90: 7374 5f75 726c 3a0d 0a20 2020 2020 2020  st_url:..       
+0001daa0: 2020 2020 2069 6620 7265 7365 745f 686f       if reset_ho
+0001dab0: 7374 5f75 726c 206e 6f74 2069 6e20 7365  st_url not in se
+0001dac0: 6c66 2e68 6f73 745f 706f 6f6c 3a0d 0a20  lf.host_pool:.. 
+0001dad0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001dae0: 6169 7365 2054 7261 6e73 6c61 746f 7245  aise TranslatorE
+0001daf0: 7272 6f72 0d0a 2020 2020 2020 2020 2020  rror..          
+0001db00: 2020 7365 6c66 2e68 6f73 745f 7572 6c20    self.host_url 
+0001db10: 3d20 7265 7365 745f 686f 7374 5f75 726c  = reset_host_url
+0001db20: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0001db30: 6c66 2e61 7069 5f75 726c 203d 2066 277b  lf.api_url = f'{
+0001db40: 7365 6c66 2e68 6f73 745f 7572 6c7d 2f74  self.host_url}/t
+0001db50: 7261 6e73 6c61 7465 270d 0a20 2020 2020  ranslate'..     
+0001db60: 2020 2020 2020 2073 656c 662e 6c61 6e67         self.lang
+0001db70: 7561 6765 5f75 726c 203d 2066 277b 7365  uage_url = f'{se
+0001db80: 6c66 2e68 6f73 745f 7572 6c7d 2f6c 616e  lf.host_url}/lan
+0001db90: 6775 6167 6573 270d 0a0d 0a20 2020 2020  guages'....     
+0001dba0: 2020 2074 696d 656f 7574 203d 206b 7761     timeout = kwa
+0001dbb0: 7267 732e 6765 7428 2774 696d 656f 7574  rgs.get('timeout
+0001dbc0: 272c 204e 6f6e 6529 0d0a 2020 2020 2020  ', None)..      
+0001dbd0: 2020 7072 6f78 6965 7320 3d20 6b77 6172    proxies = kwar
+0001dbe0: 6773 2e67 6574 2827 7072 6f78 6965 7327  gs.get('proxies'
+0001dbf0: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
+0001dc00: 2073 6c65 6570 5f73 6563 6f6e 6473 203d   sleep_seconds =
+0001dc10: 206b 7761 7267 732e 6765 7428 2773 6c65   kwargs.get('sle
+0001dc20: 6570 5f73 6563 6f6e 6473 272c 2030 290d  ep_seconds', 0).
+0001dc30: 0a20 2020 2020 2020 2069 665f 7072 696e  .        if_prin
+0001dc40: 745f 7761 726e 696e 6720 3d20 6b77 6172  t_warning = kwar
+0001dc50: 6773 2e67 6574 2827 6966 5f70 7269 6e74  gs.get('if_print
+0001dc60: 5f77 6172 6e69 6e67 272c 2054 7275 6529  _warning', True)
+0001dc70: 0d0a 2020 2020 2020 2020 6973 5f64 6574  ..        is_det
+0001dc80: 6169 6c5f 7265 7375 6c74 203d 206b 7761  ail_result = kwa
+0001dc90: 7267 732e 6765 7428 2769 735f 6465 7461  rgs.get('is_deta
+0001dca0: 696c 5f72 6573 756c 7427 2c20 4661 6c73  il_result', Fals
+0001dcb0: 6529 0d0a 2020 2020 2020 2020 7570 6461  e)..        upda
+0001dcc0: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+0001dcd0: 5f66 7265 7120 3d20 6b77 6172 6773 2e67  _freq = kwargs.g
+0001dce0: 6574 2827 7570 6461 7465 5f73 6573 7369  et('update_sessi
+0001dcf0: 6f6e 5f61 6674 6572 5f66 7265 7127 2c20  on_after_freq', 
+0001dd00: 7365 6c66 2e64 6566 6175 6c74 5f73 6573  self.default_ses
+0001dd10: 7369 6f6e 5f66 7265 7129 0d0a 2020 2020  sion_freq)..    
+0001dd20: 2020 2020 7570 6461 7465 5f73 6573 7369      update_sessi
+0001dd30: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
+0001dd40: 203d 206b 7761 7267 732e 6765 7428 2775   = kwargs.get('u
+0001dd50: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+0001dd60: 7465 725f 7365 636f 6e64 7327 2c20 7365  ter_seconds', se
+0001dd70: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
+0001dd80: 6f6e 5f73 6563 6f6e 6473 290d 0a20 2020  on_seconds)..   
+0001dd90: 2020 2020 2073 656c 662e 6368 6563 6b5f       self.check_
+0001dda0: 696e 7075 745f 6c69 6d69 7428 7175 6572  input_limit(quer
+0001ddb0: 795f 7465 7874 2c20 7365 6c66 2e69 6e70  y_text, self.inp
+0001ddc0: 7574 5f6c 696d 6974 290d 0a0d 0a20 2020  ut_limit)....   
+0001ddd0: 2020 2020 206e 6f74 5f75 7064 6174 655f       not_update_
+0001dde0: 636f 6e64 5f66 7265 7120 3d20 3120 6966  cond_freq = 1 if
+0001ddf0: 2073 656c 662e 7175 6572 795f 636f 756e   self.query_coun
+0001de00: 7420 2520 7570 6461 7465 5f73 6573 7369  t % update_sessi
+0001de10: 6f6e 5f61 6674 6572 5f66 7265 7120 213d  on_after_freq !=
+0001de20: 2030 2065 6c73 6520 300d 0a20 2020 2020   0 else 0..     
+0001de30: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
+0001de40: 6e64 5f74 696d 6520 3d20 3120 6966 2074  nd_time = 1 if t
+0001de50: 696d 652e 7469 6d65 2829 202d 2073 656c  ime.time() - sel
+0001de60: 662e 6265 6769 6e5f 7469 6d65 203c 2075  f.begin_time < u
+0001de70: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+0001de80: 7465 725f 7365 636f 6e64 7320 656c 7365  ter_seconds else
+0001de90: 2030 0d0a 2020 2020 2020 2020 6966 206e   0..        if n
+0001dea0: 6f74 2028 7365 6c66 2e73 6573 7369 6f6e  ot (self.session
+0001deb0: 2061 6e64 2073 656c 662e 6c61 6e67 7561   and self.langua
+0001dec0: 6765 5f6d 6170 2061 6e64 206e 6f74 5f75  ge_map and not_u
+0001ded0: 7064 6174 655f 636f 6e64 5f66 7265 7120  pdate_cond_freq 
+0001dee0: 616e 6420 6e6f 745f 7570 6461 7465 5f63  and not_update_c
+0001def0: 6f6e 645f 7469 6d65 293a 0d0a 2020 2020  ond_time):..    
+0001df00: 2020 2020 2020 2020 7365 6c66 2e62 6567          self.beg
+0001df10: 696e 5f74 696d 6520 3d20 7469 6d65 2e74  in_time = time.t
+0001df20: 696d 6528 290d 0a20 2020 2020 2020 2020  ime()..         
+0001df30: 2020 2073 656c 662e 7365 7373 696f 6e20     self.session 
+0001df40: 3d20 7265 7175 6573 7473 2e53 6573 7369  = requests.Sessi
+0001df50: 6f6e 2829 0d0a 2020 2020 2020 2020 2020  on()..          
+0001df60: 2020 5f20 3d20 7365 6c66 2e73 6573 7369    _ = self.sessi
+0001df70: 6f6e 2e67 6574 2873 656c 662e 686f 7374  on.get(self.host
+0001df80: 5f75 726c 2c20 6865 6164 6572 733d 7365  _url, headers=se
+0001df90: 6c66 2e68 6f73 745f 6865 6164 6572 732c  lf.host_headers,
+0001dfa0: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
+0001dfb0: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
+0001dfc0: 7329 2e74 6578 740d 0a20 2020 2020 2020  s).text..       
+0001dfd0: 2020 2020 2064 6562 7567 5f6c 616e 675f       debug_lang_
+0001dfe0: 6b77 6172 6773 203d 2073 656c 662e 6465  kwargs = self.de
+0001dff0: 6275 675f 6c61 6e67 5f6b 7761 7267 7328  bug_lang_kwargs(
+0001e000: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
+0001e010: 6f5f 6c61 6e67 7561 6765 2c20 7365 6c66  o_language, self
+0001e020: 2e64 6566 6175 6c74 5f66 726f 6d5f 6c61  .default_from_la
+0001e030: 6e67 7561 6765 2c20 6966 5f70 7269 6e74  nguage, if_print
+0001e040: 5f77 6172 6e69 6e67 290d 0a20 2020 2020  _warning)..     
+0001e050: 2020 2020 2020 2073 656c 662e 6c61 6e67         self.lang
+0001e060: 7561 6765 5f6d 6170 203d 2073 656c 662e  uage_map = self.
+0001e070: 6765 745f 6c61 6e67 7561 6765 5f6d 6170  get_language_map
+0001e080: 2873 656c 662e 6c61 6e67 7561 6765 5f75  (self.language_u
+0001e090: 726c 2c20 7365 6c66 2e73 6573 7369 6f6e  rl, self.session
+0001e0a0: 2c20 7365 6c66 2e6c 616e 6775 6167 655f  , self.language_
+0001e0b0: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
+0001e0c0: 2c20 7072 6f78 6965 732c 202a 2a64 6562  , proxies, **deb
+0001e0d0: 7567 5f6c 616e 675f 6b77 6172 6773 290d  ug_lang_kwargs).
+0001e0e0: 0a0d 0a20 2020 2020 2020 2066 726f 6d5f  ...        from_
+0001e0f0: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
+0001e100: 6775 6167 6520 3d20 7365 6c66 2e63 6865  guage = self.che
+0001e110: 636b 5f6c 616e 6775 6167 6528 6672 6f6d  ck_language(from
+0001e120: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
+0001e130: 6e67 7561 6765 2c20 7365 6c66 2e6c 616e  nguage, self.lan
+0001e140: 6775 6167 655f 6d61 702c 206f 7574 7075  guage_map, outpu
+0001e150: 745f 7a68 3d73 656c 662e 6f75 7470 7574  t_zh=self.output
+0001e160: 5f7a 6829 0d0a 2020 2020 2020 2020 7061  _zh)..        pa
+0001e170: 796c 6f61 6420 3d20 7b27 7127 3a20 7175  yload = {'q': qu
+0001e180: 6572 795f 7465 7874 2c20 2773 6f75 7263  ery_text, 'sourc
+0001e190: 6527 3a20 6672 6f6d 5f6c 616e 6775 6167  e': from_languag
+0001e1a0: 652c 2027 7461 7267 6574 273a 2074 6f5f  e, 'target': to_
+0001e1b0: 6c61 6e67 7561 6765 2c20 2766 6f72 6d61  language, 'forma
+0001e1c0: 7427 3a20 2774 6578 7427 7d0d 0a20 2020  t': 'text'}..   
+0001e1d0: 2020 2020 2072 203d 2073 656c 662e 7365       r = self.se
+0001e1e0: 7373 696f 6e2e 706f 7374 2873 656c 662e  ssion.post(self.
+0001e1f0: 6170 695f 7572 6c2c 2068 6561 6465 7273  api_url, headers
+0001e200: 3d73 656c 662e 6170 695f 6865 6164 6572  =self.api_header
+0001e210: 732c 206a 736f 6e3d 7061 796c 6f61 642c  s, json=payload,
+0001e220: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
+0001e230: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
+0001e240: 7329 0d0a 2020 2020 2020 2020 722e 7261  s)..        r.ra
+0001e250: 6973 655f 666f 725f 7374 6174 7573 2829  ise_for_status()
+0001e260: 0d0a 2020 2020 2020 2020 6461 7461 203d  ..        data =
+0001e270: 2072 2e6a 736f 6e28 290d 0a20 2020 2020   r.json()..     
+0001e280: 2020 2074 696d 652e 736c 6565 7028 736c     time.sleep(sl
+0001e290: 6565 705f 7365 636f 6e64 7329 0d0a 2020  eep_seconds)..  
+0001e2a0: 2020 2020 2020 7365 6c66 2e71 7565 7279        self.query
+0001e2b0: 5f63 6f75 6e74 202b 3d20 310d 0a20 2020  _count += 1..   
+0001e2c0: 2020 2020 2072 6574 7572 6e20 6461 7461       return data
+0001e2d0: 2069 6620 6973 5f64 6574 6169 6c5f 7265   if is_detail_re
+0001e2e0: 7375 6c74 2065 6c73 6520 6461 7461 5b27  sult else data['
+0001e2f0: 7472 616e 736c 6174 6564 5465 7874 275d  translatedText']
+0001e300: 0d0a 0d0a 0d0a 636c 6173 7320 4963 6962  ......class Icib
+0001e310: 6128 5473 6529 3a0d 0a20 2020 2064 6566  a(Tse):..    def
+0001e320: 205f 5f69 6e69 745f 5f28 7365 6c66 293a   __init__(self):
+0001e330: 0d0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
+0001e340: 292e 5f5f 696e 6974 5f5f 2829 0d0a 2020  ).__init__()..  
+0001e350: 2020 2020 2020 7365 6c66 2e62 6567 696e        self.begin
+0001e360: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
+0001e370: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
+0001e380: 662e 686f 7374 5f75 726c 203d 2027 6874  f.host_url = 'ht
+0001e390: 7470 733a 2f2f 7777 772e 6963 6962 612e  tps://www.iciba.
+0001e3a0: 636f 6d2f 6679 270d 0a20 2020 2020 2020  com/fy'..       
+0001e3b0: 2073 656c 662e 6170 695f 7572 6c20 3d20   self.api_url = 
+0001e3c0: 2768 7474 7073 3a2f 2f69 6661 6e79 692e  'https://ifanyi.
+0001e3d0: 6963 6962 612e 636f 6d2f 696e 6465 782e  iciba.com/index.
+0001e3e0: 7068 7027 0d0a 2020 2020 2020 2020 7365  php'..        se
+0001e3f0: 6c66 2e68 6f73 745f 6865 6164 6572 7320  lf.host_headers 
+0001e400: 3d20 7365 6c66 2e67 6574 5f68 6561 6465  = self.get_heade
+0001e410: 7273 2873 656c 662e 686f 7374 5f75 726c  rs(self.host_url
+0001e420: 2c20 6966 5f61 7069 3d46 616c 7365 2c20  , if_api=False, 
+0001e430: 6966 5f61 6a61 785f 666f 725f 6170 693d  if_ajax_for_api=
+0001e440: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
+0001e450: 7365 6c66 2e61 7069 5f68 6561 6465 7273  self.api_headers
+0001e460: 203d 2073 656c 662e 6765 745f 6865 6164   = self.get_head
+0001e470: 6572 7328 7365 6c66 2e68 6f73 745f 7572  ers(self.host_ur
+0001e480: 6c2c 2069 665f 6170 693d 5472 7565 2c20  l, if_api=True, 
+0001e490: 6966 5f61 6a61 785f 666f 725f 6170 693d  if_ajax_for_api=
+0001e4a0: 5472 7565 2c20 6966 5f6a 736f 6e5f 666f  True, if_json_fo
+0001e4b0: 725f 6170 693d 4661 6c73 6529 0d0a 2020  r_api=False)..  
+0001e4c0: 2020 2020 2020 7365 6c66 2e6c 616e 6775        self.langu
+0001e4d0: 6167 655f 6865 6164 6572 7320 3d20 7365  age_headers = se
+0001e4e0: 6c66 2e67 6574 5f68 6561 6465 7273 2873  lf.get_headers(s
+0001e4f0: 656c 662e 686f 7374 5f75 726c 2c20 6966  elf.host_url, if
+0001e500: 5f61 7069 3d46 616c 7365 2c20 6966 5f6a  _api=False, if_j
+0001e510: 736f 6e5f 666f 725f 6170 693d 5472 7565  son_for_api=True
+0001e520: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+0001e530: 6c61 6e67 7561 6765 5f6d 6170 203d 204e  language_map = N
+0001e540: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
+0001e550: 662e 7365 7373 696f 6e20 3d20 4e6f 6e65  f.session = None
+0001e560: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
+0001e570: 5f79 3220 3d20 2769 6661 6e79 6977 6562  _y2 = 'ifanyiweb
+0001e580: 3868 6339 7339 3865 270d 0a20 2020 2020  8hc9s98e'..     
+0001e590: 2020 2073 656c 662e 7175 6572 795f 636f     self.query_co
+0001e5a0: 756e 7420 3d20 300d 0a20 2020 2020 2020  unt = 0..       
+0001e5b0: 2073 656c 662e 6f75 7470 7574 5f7a 6820   self.output_zh 
+0001e5c0: 3d20 277a 6827 0d0a 2020 2020 2020 2020  = 'zh'..        
+0001e5d0: 7365 6c66 2e69 6e70 7574 5f6c 696d 6974  self.input_limit
+0001e5e0: 203d 2069 6e74 2833 6533 290d 0a20 2020   = int(3e3)..   
+0001e5f0: 2020 2020 2073 656c 662e 6465 6661 756c       self.defaul
+0001e600: 745f 6672 6f6d 5f6c 616e 6775 6167 6520  t_from_language 
+0001e610: 3d20 7365 6c66 2e6f 7574 7075 745f 7a68  = self.output_zh
+0001e620: 0d0a 0d0a 2020 2020 4054 7365 2e64 6562  ....    @Tse.deb
+0001e630: 7567 5f6c 616e 6775 6167 655f 6d61 700d  ug_language_map.
+0001e640: 0a20 2020 2064 6566 2067 6574 5f6c 616e  .    def get_lan
+0001e650: 6775 6167 655f 6d61 7028 7365 6c66 2c20  guage_map(self, 
+0001e660: 6170 695f 7572 6c3a 2073 7472 2c20 7373  api_url: str, ss
+0001e670: 3a20 5365 7373 696f 6e54 7970 652c 2068  : SessionType, h
+0001e680: 6561 6465 7273 3a20 6469 6374 2c20 7469  eaders: dict, ti
+0001e690: 6d65 6f75 743a 204f 7074 696f 6e61 6c5b  meout: Optional[
+0001e6a0: 666c 6f61 745d 2c20 7072 6f78 6965 733a  float], proxies:
+0001e6b0: 204f 7074 696f 6e61 6c5b 6469 6374 5d2c   Optional[dict],
+0001e6c0: 202a 2a6b 7761 7267 733a 204c 616e 674d   **kwargs: LangM
+0001e6d0: 6170 4b77 6172 6773 5479 7065 2920 2d3e  apKwargsType) ->
+0001e6e0: 2064 6963 743a 0d0a 2020 2020 2020 2020   dict:..        
+0001e6f0: 7061 7261 6d73 203d 207b 2763 273a 2027  params = {'c': '
+0001e700: 7472 616e 7327 2c20 276d 273a 2027 6765  trans', 'm': 'ge
+0001e710: 744c 616e 6775 6167 6527 2c20 2771 273a  tLanguage', 'q':
+0001e720: 2030 2c20 2774 7970 6527 3a20 2765 6e27   0, 'type': 'en'
+0001e730: 2c20 2773 7472 273a 2027 277d 0d0a 2020  , 'str': ''}..  
+0001e740: 2020 2020 2020 6464 203d 2073 732e 6765        dd = ss.ge
+0001e750: 7428 6170 695f 7572 6c2c 2070 6172 616d  t(api_url, param
+0001e760: 733d 7061 7261 6d73 2c20 6865 6164 6572  s=params, header
+0001e770: 733d 6865 6164 6572 732c 2074 696d 656f  s=headers, timeo
+0001e780: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
+0001e790: 6965 733d 7072 6f78 6965 7329 2e6a 736f  ies=proxies).jso
+0001e7a0: 6e28 290d 0a20 2020 2020 2020 206c 616e  n()..        lan
+0001e7b0: 675f 6c69 7374 203d 2073 6f72 7465 6428  g_list = sorted(
+0001e7c0: 6c69 7374 2873 6574 285b 6c61 6e67 2066  list(set([lang f
+0001e7d0: 6f72 2064 2069 6e20 6464 2066 6f72 206c  or d in dd for l
+0001e7e0: 616e 6720 696e 2064 645b 645d 5d29 2929  ang in dd[d]])))
+0001e7f0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+0001e800: 207b 7d2e 6672 6f6d 6b65 7973 286c 616e   {}.fromkeys(lan
+0001e810: 675f 6c69 7374 2c20 6c61 6e67 5f6c 6973  g_list, lang_lis
+0001e820: 7429 0d0a 0d0a 2020 2020 4054 7365 2e74  t)....    @Tse.t
+0001e830: 696d 655f 7374 6174 0d0a 2020 2020 4054  ime_stat..    @T
+0001e840: 7365 2e63 6865 636b 5f71 7565 7279 0d0a  se.check_query..
+0001e850: 2020 2020 6465 6620 6963 6962 615f 6170      def iciba_ap
+0001e860: 6928 7365 6c66 2c20 7175 6572 795f 7465  i(self, query_te
+0001e870: 7874 3a20 7374 722c 2066 726f 6d5f 6c61  xt: str, from_la
+0001e880: 6e67 7561 6765 3a20 7374 7220 3d20 2761  nguage: str = 'a
+0001e890: 7574 6f27 2c20 746f 5f6c 616e 6775 6167  uto', to_languag
+0001e8a0: 653a 2073 7472 203d 2027 656e 272c 202a  e: str = 'en', *
+0001e8b0: 2a6b 7761 7267 733a 2041 7069 4b77 6172  *kwargs: ApiKwar
+0001e8c0: 6773 5479 7065 2920 2d3e 2055 6e69 6f6e  gsType) -> Union
+0001e8d0: 5b73 7472 2c20 6469 6374 5d3a 0d0a 2020  [str, dict]:..  
+0001e8e0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0001e8f0: 2020 2068 7474 7073 3a2f 2f77 7777 2e69     https://www.i
+0001e900: 6369 6261 2e63 6f6d 2f66 790d 0a20 2020  ciba.com/fy..   
+0001e910: 2020 2020 203a 7061 7261 6d20 7175 6572       :param quer
+0001e920: 795f 7465 7874 3a20 7374 722c 206d 7573  y_text: str, mus
+0001e930: 742e 0d0a 2020 2020 2020 2020 3a70 6172  t...        :par
+0001e940: 616d 2066 726f 6d5f 6c61 6e67 7561 6765  am from_language
+0001e950: 3a20 7374 722c 2064 6566 6175 6c74 2027  : str, default '
+0001e960: 6175 746f 272e 0d0a 2020 2020 2020 2020  auto'...        
+0001e970: 3a70 6172 616d 2074 6f5f 6c61 6e67 7561  :param to_langua
+0001e980: 6765 3a20 7374 722c 2064 6566 6175 6c74  ge: str, default
+0001e990: 2027 656e 272e 0d0a 2020 2020 2020 2020   'en'...        
+0001e9a0: 3a70 6172 616d 202a 2a6b 7761 7267 733a  :param **kwargs:
+0001e9b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001e9c0: 2020 3a70 6172 616d 2074 696d 656f 7574    :param timeout
+0001e9d0: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
+0001e9e0: 204e 6f6e 652e 0d0a 2020 2020 2020 2020   None...        
+0001e9f0: 2020 2020 2020 2020 3a70 6172 616d 2070          :param p
+0001ea00: 726f 7869 6573 3a20 6469 6374 2c20 6465  roxies: dict, de
+0001ea10: 6661 756c 7420 4e6f 6e65 2e0d 0a20 2020  fault None...   
+0001ea20: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+0001ea30: 7261 6d20 736c 6565 705f 7365 636f 6e64  ram sleep_second
+0001ea40: 733a 2066 6c6f 6174 2c20 6465 6661 756c  s: float, defaul
+0001ea50: 7420 302e 0d0a 2020 2020 2020 2020 2020  t 0...          
+0001ea60: 2020 2020 2020 3a70 6172 616d 2069 735f        :param is_
+0001ea70: 6465 7461 696c 5f72 6573 756c 743a 2062  detail_result: b
+0001ea80: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
+0001ea90: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
+0001eaa0: 2020 2020 203a 7061 7261 6d20 6966 5f69       :param if_i
+0001eab0: 676e 6f72 655f 6c69 6d69 745f 6f66 5f6c  gnore_limit_of_l
+0001eac0: 656e 6774 683a 2062 6f6f 6c2c 2064 6566  ength: bool, def
+0001ead0: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
+0001eae0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+0001eaf0: 7261 6d20 6c69 6d69 745f 6f66 5f6c 656e  ram limit_of_len
+0001eb00: 6774 683a 2069 6e74 2c20 6465 6661 756c  gth: int, defaul
+0001eb10: 7420 3230 3030 302e 0d0a 2020 2020 2020  t 20000...      
+0001eb20: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+0001eb30: 2069 665f 6967 6e6f 7265 5f65 6d70 7479   if_ignore_empty
+0001eb40: 5f71 7565 7279 3a20 626f 6f6c 2c20 6465  _query: bool, de
+0001eb50: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
+0001eb60: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+0001eb70: 6172 616d 2075 7064 6174 655f 7365 7373  aram update_sess
+0001eb80: 696f 6e5f 6166 7465 725f 6672 6571 3a20  ion_after_freq: 
+0001eb90: 696e 742c 2064 6566 6175 6c74 2031 3030  int, default 100
+0001eba0: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+0001ebb0: 2020 2020 3a70 6172 616d 2075 7064 6174      :param updat
+0001ebc0: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
+0001ebd0: 7365 636f 6e64 733a 2066 6c6f 6174 2c20  seconds: float, 
+0001ebe0: 6465 6661 756c 7420 3135 3030 2e0d 0a20  default 1500... 
+0001ebf0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0001ec00: 7061 7261 6d20 6966 5f73 686f 775f 7469  param if_show_ti
+0001ec10: 6d65 5f73 7461 743a 2062 6f6f 6c2c 2064  me_stat: bool, d
+0001ec20: 6566 6175 6c74 2046 616c 7365 2e0d 0a20  efault False... 
+0001ec30: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0001ec40: 7061 7261 6d20 7368 6f77 5f74 696d 655f  param show_time_
+0001ec50: 7374 6174 5f70 7265 6369 7369 6f6e 3a20  stat_precision: 
+0001ec60: 696e 742c 2064 6566 6175 6c74 2032 2e0d  int, default 2..
+0001ec70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ec80: 203a 7061 7261 6d20 6966 5f70 7269 6e74   :param if_print
+0001ec90: 5f77 6172 6e69 6e67 3a20 626f 6f6c 2c20  _warning: bool, 
+0001eca0: 6465 6661 756c 7420 5472 7565 2e0d 0a20  default True... 
+0001ecb0: 2020 2020 2020 203a 7265 7475 726e 3a20         :return: 
+0001ecc0: 7374 7220 6f72 2064 6963 740d 0a20 2020  str or dict..   
+0001ecd0: 2020 2020 2022 2222 0d0a 0d0a 2020 2020       """....    
+0001ece0: 2020 2020 7469 6d65 6f75 7420 3d20 6b77      timeout = kw
+0001ecf0: 6172 6773 2e67 6574 2827 7469 6d65 6f75  args.get('timeou
+0001ed00: 7427 2c20 4e6f 6e65 290d 0a20 2020 2020  t', None)..     
+0001ed10: 2020 2070 726f 7869 6573 203d 206b 7761     proxies = kwa
+0001ed20: 7267 732e 6765 7428 2770 726f 7869 6573  rgs.get('proxies
+0001ed30: 272c 204e 6f6e 6529 0d0a 2020 2020 2020  ', None)..      
+0001ed40: 2020 736c 6565 705f 7365 636f 6e64 7320    sleep_seconds 
+0001ed50: 3d20 6b77 6172 6773 2e67 6574 2827 736c  = kwargs.get('sl
+0001ed60: 6565 705f 7365 636f 6e64 7327 2c20 3029  eep_seconds', 0)
+0001ed70: 0d0a 2020 2020 2020 2020 6966 5f70 7269  ..        if_pri
+0001ed80: 6e74 5f77 6172 6e69 6e67 203d 206b 7761  nt_warning = kwa
+0001ed90: 7267 732e 6765 7428 2769 665f 7072 696e  rgs.get('if_prin
+0001eda0: 745f 7761 726e 696e 6727 2c20 5472 7565  t_warning', True
+0001edb0: 290d 0a20 2020 2020 2020 2069 735f 6465  )..        is_de
+0001edc0: 7461 696c 5f72 6573 756c 7420 3d20 6b77  tail_result = kw
+0001edd0: 6172 6773 2e67 6574 2827 6973 5f64 6574  args.get('is_det
+0001ede0: 6169 6c5f 7265 7375 6c74 272c 2046 616c  ail_result', Fal
+0001edf0: 7365 290d 0a20 2020 2020 2020 2075 7064  se)..        upd
+0001ee00: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0001ee10: 725f 6672 6571 203d 206b 7761 7267 732e  r_freq = kwargs.
+0001ee20: 6765 7428 2775 7064 6174 655f 7365 7373  get('update_sess
+0001ee30: 696f 6e5f 6166 7465 725f 6672 6571 272c  ion_after_freq',
+0001ee40: 2073 656c 662e 6465 6661 756c 745f 7365   self.default_se
+0001ee50: 7373 696f 6e5f 6672 6571 290d 0a20 2020  ssion_freq)..   
+0001ee60: 2020 2020 2075 7064 6174 655f 7365 7373       update_sess
+0001ee70: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
+0001ee80: 7320 3d20 6b77 6172 6773 2e67 6574 2827  s = kwargs.get('
+0001ee90: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+0001eea0: 6674 6572 5f73 6563 6f6e 6473 272c 2073  fter_seconds', s
+0001eeb0: 656c 662e 6465 6661 756c 745f 7365 7373  elf.default_sess
+0001eec0: 696f 6e5f 7365 636f 6e64 7329 0d0a 2020  ion_seconds)..  
+0001eed0: 2020 2020 2020 7365 6c66 2e63 6865 636b        self.check
+0001eee0: 5f69 6e70 7574 5f6c 696d 6974 2871 7565  _input_limit(que
+0001eef0: 7279 5f74 6578 742c 2073 656c 662e 696e  ry_text, self.in
+0001ef00: 7075 745f 6c69 6d69 7429 0d0a 0d0a 2020  put_limit)....  
+0001ef10: 2020 2020 2020 6e6f 745f 7570 6461 7465        not_update
+0001ef20: 5f63 6f6e 645f 6672 6571 203d 2031 2069  _cond_freq = 1 i
+0001ef30: 6620 7365 6c66 2e71 7565 7279 5f63 6f75  f self.query_cou
+0001ef40: 6e74 2025 2075 7064 6174 655f 7365 7373  nt % update_sess
+0001ef50: 696f 6e5f 6166 7465 725f 6672 6571 2021  ion_after_freq !
+0001ef60: 3d20 3020 656c 7365 2030 0d0a 2020 2020  = 0 else 0..    
+0001ef70: 2020 2020 6e6f 745f 7570 6461 7465 5f63      not_update_c
+0001ef80: 6f6e 645f 7469 6d65 203d 2031 2069 6620  ond_time = 1 if 
+0001ef90: 7469 6d65 2e74 696d 6528 2920 2d20 7365  time.time() - se
+0001efa0: 6c66 2e62 6567 696e 5f74 696d 6520 3c20  lf.begin_time < 
+0001efb0: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+0001efc0: 6674 6572 5f73 6563 6f6e 6473 2065 6c73  fter_seconds els
+0001efd0: 6520 300d 0a20 2020 2020 2020 2069 6620  e 0..        if 
+0001efe0: 6e6f 7420 2873 656c 662e 7365 7373 696f  not (self.sessio
+0001eff0: 6e20 616e 6420 7365 6c66 2e6c 616e 6775  n and self.langu
+0001f000: 6167 655f 6d61 7020 616e 6420 6e6f 745f  age_map and not_
+0001f010: 7570 6461 7465 5f63 6f6e 645f 6672 6571  update_cond_freq
+0001f020: 2061 6e64 206e 6f74 5f75 7064 6174 655f   and not_update_
+0001f030: 636f 6e64 5f74 696d 6529 3a0d 0a20 2020  cond_time):..   
+0001f040: 2020 2020 2020 2020 2073 656c 662e 6265           self.be
+0001f050: 6769 6e5f 7469 6d65 203d 2074 696d 652e  gin_time = time.
+0001f060: 7469 6d65 2829 0d0a 2020 2020 2020 2020  time()..        
+0001f070: 2020 2020 7365 6c66 2e73 6573 7369 6f6e      self.session
+0001f080: 203d 2072 6571 7565 7374 732e 5365 7373   = requests.Sess
+0001f090: 696f 6e28 290d 0a20 2020 2020 2020 2020  ion()..         
+0001f0a0: 2020 205f 203d 2073 656c 662e 7365 7373     _ = self.sess
+0001f0b0: 696f 6e2e 6765 7428 7365 6c66 2e68 6f73  ion.get(self.hos
+0001f0c0: 745f 7572 6c2c 2068 6561 6465 7273 3d73  t_url, headers=s
+0001f0d0: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
+0001f0e0: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
+0001f0f0: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
+0001f100: 6573 290d 0a20 2020 2020 2020 2020 2020  es)..           
+0001f110: 2064 6562 7567 5f6c 616e 675f 6b77 6172   debug_lang_kwar
+0001f120: 6773 203d 2073 656c 662e 6465 6275 675f  gs = self.debug_
+0001f130: 6c61 6e67 5f6b 7761 7267 7328 6672 6f6d  lang_kwargs(from
+0001f140: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
+0001f150: 6e67 7561 6765 2c20 7365 6c66 2e64 6566  nguage, self.def
+0001f160: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
+0001f170: 6765 2c20 6966 5f70 7269 6e74 5f77 6172  ge, if_print_war
+0001f180: 6e69 6e67 290d 0a20 2020 2020 2020 2020  ning)..         
+0001f190: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
+0001f1a0: 5f6d 6170 203d 2073 656c 662e 6765 745f  _map = self.get_
+0001f1b0: 6c61 6e67 7561 6765 5f6d 6170 2873 656c  language_map(sel
+0001f1c0: 662e 6170 695f 7572 6c2c 2073 656c 662e  f.api_url, self.
+0001f1d0: 7365 7373 696f 6e2c 2073 656c 662e 6c61  session, self.la
+0001f1e0: 6e67 7561 6765 5f68 6561 6465 7273 2c20  nguage_headers, 
+0001f1f0: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
+0001f200: 2c20 2a2a 6465 6275 675f 6c61 6e67 5f6b  , **debug_lang_k
+0001f210: 7761 7267 7329 0d0a 0d0a 2020 2020 2020  wargs)....      
+0001f220: 2020 6672 6f6d 5f6c 616e 6775 6167 652c    from_language,
+0001f230: 2074 6f5f 6c61 6e67 7561 6765 203d 2073   to_language = s
+0001f240: 656c 662e 6368 6563 6b5f 6c61 6e67 7561  elf.check_langua
+0001f250: 6765 2866 726f 6d5f 6c61 6e67 7561 6765  ge(from_language
+0001f260: 2c20 746f 5f6c 616e 6775 6167 652c 2073  , to_language, s
+0001f270: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
+0001f280: 2c20 6f75 7470 7574 5f7a 683d 7365 6c66  , output_zh=self
+0001f290: 2e6f 7574 7075 745f 7a68 290d 0a0d 0a20  .output_zh).... 
+0001f2a0: 2020 2020 2020 2073 6967 6e20 3d20 6861         sign = ha
+0001f2b0: 7368 6c69 622e 6d64 3528 6622 366b 6579  shlib.md5(f"6key
+0001f2c0: 5f77 6562 5f66 616e 7969 7b73 656c 662e  _web_fanyi{self.
+0001f2d0: 735f 7932 7d7b 7175 6572 795f 7465 7874  s_y2}{query_text
+0001f2e0: 7d22 2e65 6e63 6f64 6528 2929 2e68 6578  }".encode()).hex
+0001f2f0: 6469 6765 7374 2829 5b3a 3136 5d20 2023  digest()[:16]  #
+0001f300: 2073 7472 6970 2829 0d0a 2020 2020 2020   strip()..      
+0001f310: 2020 7061 7261 6d73 203d 207b 2763 273a    params = {'c':
+0001f320: 2027 7472 616e 7327 2c20 276d 273a 2027   'trans', 'm': '
+0001f330: 6679 272c 2027 636c 6965 6e74 273a 2036  fy', 'client': 6
+0001f340: 2c20 2761 7574 685f 7573 6572 273a 2027  , 'auth_user': '
+0001f350: 6b65 795f 7765 625f 6661 6e79 6927 2c20  key_web_fanyi', 
+0001f360: 2773 6967 6e27 3a20 7369 676e 7d0d 0a20  'sign': sign}.. 
+0001f370: 2020 2020 2020 2070 6179 6c6f 6164 203d         payload =
+0001f380: 207b 2766 726f 6d27 3a20 6672 6f6d 5f6c   {'from': from_l
+0001f390: 616e 6775 6167 652c 2027 746f 273a 2074  anguage, 'to': t
+0001f3a0: 6f5f 6c61 6e67 7561 6765 2c20 2771 273a  o_language, 'q':
+0001f3b0: 2071 7565 7279 5f74 6578 747d 0d0a 2020   query_text}..  
+0001f3c0: 2020 2020 2020 7220 3d20 7365 6c66 2e73        r = self.s
+0001f3d0: 6573 7369 6f6e 2e70 6f73 7428 7365 6c66  ession.post(self
+0001f3e0: 2e61 7069 5f75 726c 2c20 6865 6164 6572  .api_url, header
+0001f3f0: 733d 7365 6c66 2e61 7069 5f68 6561 6465  s=self.api_heade
+0001f400: 7273 2c20 7061 7261 6d73 3d70 6172 616d  rs, params=param
+0001f410: 732c 2064 6174 613d 7061 796c 6f61 642c  s, data=payload,
+0001f420: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
+0001f430: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
+0001f440: 7329 0d0a 2020 2020 2020 2020 722e 7261  s)..        r.ra
+0001f450: 6973 655f 666f 725f 7374 6174 7573 2829  ise_for_status()
+0001f460: 0d0a 2020 2020 2020 2020 6461 7461 203d  ..        data =
+0001f470: 2072 2e6a 736f 6e28 290d 0a20 2020 2020   r.json()..     
+0001f480: 2020 2074 696d 652e 736c 6565 7028 736c     time.sleep(sl
+0001f490: 6565 705f 7365 636f 6e64 7329 0d0a 2020  eep_seconds)..  
+0001f4a0: 2020 2020 2020 7365 6c66 2e71 7565 7279        self.query
+0001f4b0: 5f63 6f75 6e74 202b 3d20 310d 0a20 2020  _count += 1..   
+0001f4c0: 2020 2020 2072 6574 7572 6e20 6461 7461       return data
+0001f4d0: 2069 6620 6973 5f64 6574 6169 6c5f 7265   if is_detail_re
+0001f4e0: 7375 6c74 2065 6c73 6520 6461 7461 5b27  sult else data['
+0001f4f0: 636f 6e74 656e 7427 5d20 6966 2064 6174  content'] if dat
+0001f500: 612e 6765 7428 2769 7353 656e 7369 7469  a.get('isSensiti
+0001f510: 7665 2729 203d 3d20 3120 656c 7365 2064  ve') == 1 else d
+0001f520: 6174 615b 2763 6f6e 7465 6e74 275d 5b27  ata['content']['
+0001f530: 6f75 7427 5d0d 0a0d 0a0d 0a63 6c61 7373  out']......class
+0001f540: 2049 666c 7974 656b 5631 2854 7365 293a   IflytekV1(Tse):
+0001f550: 0d0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+0001f560: 5f5f 2873 656c 6629 3a0d 0a20 2020 2020  __(self):..     
+0001f570: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
+0001f580: 745f 5f28 290d 0a20 2020 2020 2020 2073  t__()..        s
+0001f590: 656c 662e 6265 6769 6e5f 7469 6d65 203d  elf.begin_time =
+0001f5a0: 2074 696d 652e 7469 6d65 2829 0d0a 2020   time.time()..  
+0001f5b0: 2020 2020 2020 7365 6c66 2e68 6f73 745f        self.host_
+0001f5c0: 7572 6c20 3d20 2768 7474 7073 3a2f 2f73  url = 'https://s
+0001f5d0: 6161 732e 7866 7975 6e2e 636e 2f74 7261  aas.xfyun.cn/tra
+0001f5e0: 6e73 6c61 7465 3f74 6162 4b65 793d 7465  nslate?tabKey=te
+0001f5f0: 7874 270d 0a20 2020 2020 2020 2073 656c  xt'..        sel
+0001f600: 662e 6170 695f 7572 6c20 3d20 2768 7474  f.api_url = 'htt
+0001f610: 7073 3a2f 2f73 6161 732e 7866 7975 6e2e  ps://saas.xfyun.
+0001f620: 636e 2f61 692d 6170 706c 6963 6174 696f  cn/ai-applicatio
+0001f630: 6e2f 7472 616e 732f 6974 7327 0d0a 2020  n/trans/its'..  
+0001f640: 2020 2020 2020 7365 6c66 2e6c 616e 6775        self.langu
+0001f650: 6167 655f 6f6c 645f 7572 6c20 3d20 2768  age_old_url = 'h
 0001f660: 7474 7073 3a2f 2f73 6161 732e 7866 7975  ttps://saas.xfyu
-0001f670: 6e2e 636e 2f61 692d 6170 706c 6963 6174  n.cn/ai-applicat
-0001f680: 696f 6e2f 7472 616e 732f 6974 7327 0d0a  ion/trans/its'..
-0001f690: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
-0001f6a0: 6775 6167 655f 6f6c 645f 7572 6c20 3d20  guage_old_url = 
-0001f6b0: 2768 7474 7073 3a2f 2f73 6161 732e 7866  'https://saas.xf
-0001f6c0: 7975 6e2e 636e 2f5f 6e65 7874 2f73 7461  yun.cn/_next/sta
-0001f6d0: 7469 632f 3462 7a4c 5347 4357 554e 6c36  tic/4bzLSGCWUNl6
-0001f6e0: 3758 616c 2d41 6649 6c2f 7061 6765 732f  7Xal-AfIl/pages/
-0001f6f0: 7472 616e 736c 6174 652e 6a73 270d 0a20  translate.js'.. 
-0001f700: 2020 2020 2020 2073 656c 662e 6c61 6e67         self.lang
-0001f710: 7561 6765 5f75 726c 5f70 6174 7465 726e  uage_url_pattern
-0001f720: 203d 2027 2f5f 6e65 7874 2f73 7461 7469   = '/_next/stati
-0001f730: 632f 285c 772b 285b 2d5d 3f5c 772b 2929  c/(\w+([-]?\w+))
-0001f740: 2f70 6167 6573 2f74 7261 6e73 6c61 7465  /pages/translate
-0001f750: 2e6a 7327 0d0a 2020 2020 2020 2020 7365  .js'..        se
-0001f760: 6c66 2e6c 616e 6775 6167 655f 7572 6c20  lf.language_url 
-0001f770: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-0001f780: 7365 6c66 2e63 6f6f 6b69 6573 5f75 726c  self.cookies_url
-0001f790: 203d 2027 6874 7470 733a 2f2f 7373 6f2e   = 'https://sso.
-0001f7a0: 7866 7975 6e2e 636e 2f2f 5353 4f53 6572  xfyun.cn//SSOSer
-0001f7b0: 7669 6365 2f6c 6f67 696e 2f67 6574 636f  vice/login/getco
-0001f7c0: 6f6b 6965 7327 0d0a 2020 2020 2020 2020  okies'..        
-0001f7d0: 7365 6c66 2e69 6e66 6f5f 7572 6c20 3d20  self.info_url = 
-0001f7e0: 2768 7474 7073 3a2f 2f73 6161 732e 7866  'https://saas.xf
-0001f7f0: 7975 6e2e 636e 2f61 692d 6170 706c 6963  yun.cn/ai-applic
-0001f800: 6174 696f 6e2f 7573 6572 2f69 6e66 6f27  ation/user/info'
-0001f810: 0d0a 2020 2020 2020 2020 7365 6c66 2e68  ..        self.h
-0001f820: 6f73 745f 6865 6164 6572 7320 3d20 7365  ost_headers = se
-0001f830: 6c66 2e67 6574 5f68 6561 6465 7273 2873  lf.get_headers(s
-0001f840: 656c 662e 686f 7374 5f75 726c 2c20 6966  elf.host_url, if
-0001f850: 5f61 7069 3d46 616c 7365 290d 0a20 2020  _api=False)..   
-0001f860: 2020 2020 2073 656c 662e 6170 695f 6865       self.api_he
-0001f870: 6164 6572 7320 3d20 7365 6c66 2e67 6574  aders = self.get
-0001f880: 5f68 6561 6465 7273 2873 656c 662e 686f  _headers(self.ho
-0001f890: 7374 5f75 726c 2c20 6966 5f61 7069 3d54  st_url, if_api=T
-0001f8a0: 7275 6529 0d0a 2020 2020 2020 2020 7365  rue)..        se
-0001f8b0: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
-0001f8c0: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-0001f8d0: 7365 6c66 2e73 6573 7369 6f6e 203d 204e  self.session = N
-0001f8e0: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
-0001f8f0: 662e 7175 6572 795f 636f 756e 7420 3d20  f.query_count = 
-0001f900: 300d 0a20 2020 2020 2020 2073 656c 662e  0..        self.
-0001f910: 6f75 7470 7574 5f7a 6820 3d20 2763 6e27  output_zh = 'cn'
-0001f920: 0d0a 2020 2020 2020 2020 7365 6c66 2e69  ..        self.i
-0001f930: 6e70 7574 5f6c 696d 6974 203d 2069 6e74  nput_limit = int
-0001f940: 2832 6533 290d 0a20 2020 2020 2020 2073  (2e3)..        s
-0001f950: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
-0001f960: 5f6c 616e 6775 6167 6520 3d20 7365 6c66  _language = self
-0001f970: 2e6f 7574 7075 745f 7a68 0d0a 0d0a 2020  .output_zh....  
-0001f980: 2020 4054 7365 2e64 6562 7567 5f6c 616e    @Tse.debug_lan
-0001f990: 6775 6167 655f 6d61 700d 0a20 2020 2064  guage_map..    d
-0001f9a0: 6566 2067 6574 5f6c 616e 6775 6167 655f  ef get_language_
-0001f9b0: 6d61 7028 7365 6c66 2c20 686f 7374 5f68  map(self, host_h
-0001f9c0: 746d 6c3a 2073 7472 2c20 7373 3a20 5365  tml: str, ss: Se
-0001f9d0: 7373 696f 6e54 7970 652c 2068 6561 6465  ssionType, heade
-0001f9e0: 7273 3a20 6469 6374 2c20 7469 6d65 6f75  rs: dict, timeou
-0001f9f0: 743a 204f 7074 696f 6e61 6c5b 666c 6f61  t: Optional[floa
-0001fa00: 745d 2c20 7072 6f78 6965 733a 204f 7074  t], proxies: Opt
-0001fa10: 696f 6e61 6c5b 6469 6374 5d2c 202a 2a6b  ional[dict], **k
-0001fa20: 7761 7267 733a 204c 616e 674d 6170 4b77  wargs: LangMapKw
-0001fa30: 6172 6773 5479 7065 2920 2d3e 2064 6963  argsType) -> dic
-0001fa40: 743a 0d0a 2020 2020 2020 2020 7472 793a  t:..        try:
-0001fa50: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-0001fa60: 206e 6f74 2073 656c 662e 6c61 6e67 7561   not self.langua
-0001fa70: 6765 5f75 726c 3a0d 0a20 2020 2020 2020  ge_url:..       
-0001fa80: 2020 2020 2020 2020 2075 726c 5f70 6174           url_pat
-0001fa90: 6820 3d20 7265 2e63 6f6d 7069 6c65 2873  h = re.compile(s
-0001faa0: 656c 662e 6c61 6e67 7561 6765 5f75 726c  elf.language_url
-0001fab0: 5f70 6174 7465 726e 292e 7365 6172 6368  _pattern).search
-0001fac0: 2868 6f73 745f 6874 6d6c 292e 6772 6f75  (host_html).grou
-0001fad0: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
-0001fae0: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-0001faf0: 6765 5f75 726c 203d 2066 277b 7365 6c66  ge_url = f'{self
-0001fb00: 2e68 6f73 745f 7572 6c5b 3a32 315d 7d7b  .host_url[:21]}{
-0001fb10: 7572 6c5f 7061 7468 7d27 0d0a 2020 2020  url_path}'..    
-0001fb20: 2020 2020 2020 2020 7220 3d20 7373 2e67          r = ss.g
-0001fb30: 6574 2873 656c 662e 6c61 6e67 7561 6765  et(self.language
-0001fb40: 5f75 726c 2c20 6865 6164 6572 733d 6865  _url, headers=he
-0001fb50: 6164 6572 732c 2074 696d 656f 7574 3d74  aders, timeout=t
-0001fb60: 696d 656f 7574 2c20 7072 6f78 6965 733d  imeout, proxies=
-0001fb70: 7072 6f78 6965 7329 0d0a 2020 2020 2020  proxies)..      
-0001fb80: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
-0001fb90: 2020 2020 2020 2072 203d 2073 732e 6765         r = ss.ge
-0001fba0: 7428 7365 6c66 2e6c 616e 6775 6167 655f  t(self.language_
-0001fbb0: 6f6c 645f 7572 6c2c 2068 6561 6465 7273  old_url, headers
-0001fbc0: 3d68 6561 6465 7273 2c20 7469 6d65 6f75  =headers, timeou
-0001fbd0: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
-0001fbe0: 6573 3d70 726f 7869 6573 290d 0a0d 0a20  es=proxies).... 
-0001fbf0: 2020 2020 2020 206a 735f 6874 6d6c 203d         js_html =
-0001fc00: 2072 2e74 6578 740d 0a20 2020 2020 2020   r.text..       
-0001fc10: 206c 616e 675f 7374 7220 3d20 7265 2e63   lang_str = re.c
-0001fc20: 6f6d 7069 6c65 2827 6c61 6e67 7561 6765  ompile('language
-0001fc30: 4c69 7374 3a5c 5c28 653d 7b28 2e2a 3f29  List:\\(e={(.*?)
-0001fc40: 7d27 292e 7365 6172 6368 286a 735f 6874  }').search(js_ht
-0001fc50: 6d6c 292e 6772 6f75 7028 295b 3136 3a5d  ml).group()[16:]
-0001fc60: 0d0a 2020 2020 2020 2020 6c61 6e67 5f6c  ..        lang_l
-0001fc70: 6973 7420 3d20 736f 7274 6564 286c 6973  ist = sorted(lis
-0001fc80: 7428 6578 6563 6a73 2e65 7661 6c28 6c61  t(execjs.eval(la
-0001fc90: 6e67 5f73 7472 292e 6b65 7973 2829 2929  ng_str).keys()))
-0001fca0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-0001fcb0: 207b 7d2e 6672 6f6d 6b65 7973 286c 616e   {}.fromkeys(lan
-0001fcc0: 675f 6c69 7374 2c20 6c61 6e67 5f6c 6973  g_list, lang_lis
-0001fcd0: 7429 0d0a 0d0a 2020 2020 4054 7365 2e75  t)....    @Tse.u
-0001fce0: 6e63 6572 7469 6669 6564 0d0a 2020 2020  ncertified..    
-0001fcf0: 4054 7365 2e74 696d 655f 7374 6174 0d0a  @Tse.time_stat..
-0001fd00: 2020 2020 4054 7365 2e63 6865 636b 5f71      @Tse.check_q
-0001fd10: 7565 7279 0d0a 2020 2020 6465 6620 6966  uery..    def if
-0001fd20: 6c79 7465 6b5f 6170 6928 7365 6c66 2c20  lytek_api(self, 
-0001fd30: 7175 6572 795f 7465 7874 3a20 7374 722c  query_text: str,
-0001fd40: 2066 726f 6d5f 6c61 6e67 7561 6765 3a20   from_language: 
-0001fd50: 7374 7220 3d20 2761 7574 6f27 2c20 746f  str = 'auto', to
-0001fd60: 5f6c 616e 6775 6167 653a 2073 7472 203d  _language: str =
-0001fd70: 2027 656e 272c 202a 2a6b 7761 7267 733a   'en', **kwargs:
-0001fd80: 2041 7069 4b77 6172 6773 5479 7065 2920   ApiKwargsType) 
-0001fd90: 2d3e 2055 6e69 6f6e 5b73 7472 2c20 6469  -> Union[str, di
-0001fda0: 6374 5d3a 0d0a 2020 2020 2020 2020 2222  ct]:..        ""
-0001fdb0: 220d 0a20 2020 2020 2020 2068 7474 7073  "..        https
-0001fdc0: 3a2f 2f73 6161 732e 7866 7975 6e2e 636e  ://saas.xfyun.cn
-0001fdd0: 2f74 7261 6e73 6c61 7465 3f74 6162 4b65  /translate?tabKe
-0001fde0: 793d 7465 7874 0d0a 2020 2020 2020 2020  y=text..        
-0001fdf0: 3a70 6172 616d 2071 7565 7279 5f74 6578  :param query_tex
-0001fe00: 743a 2073 7472 2c20 6d75 7374 2e0d 0a20  t: str, must... 
-0001fe10: 2020 2020 2020 203a 7061 7261 6d20 6672         :param fr
-0001fe20: 6f6d 5f6c 616e 6775 6167 653a 2073 7472  om_language: str
-0001fe30: 2c20 6465 6661 756c 7420 277a 6827 2c20  , default 'zh', 
-0001fe40: 756e 7375 7070 6f72 7465 6420 2761 7574  unsupported 'aut
-0001fe50: 6f27 2e0d 0a20 2020 2020 2020 203a 7061  o'...        :pa
-0001fe60: 7261 6d20 746f 5f6c 616e 6775 6167 653a  ram to_language:
-0001fe70: 2073 7472 2c20 6465 6661 756c 7420 2765   str, default 'e
-0001fe80: 6e27 2e0d 0a20 2020 2020 2020 203a 7061  n'...        :pa
-0001fe90: 7261 6d20 2a2a 6b77 6172 6773 3a0d 0a20  ram **kwargs:.. 
-0001fea0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0001feb0: 7061 7261 6d20 7469 6d65 6f75 743a 2066  param timeout: f
-0001fec0: 6c6f 6174 2c20 6465 6661 756c 7420 4e6f  loat, default No
-0001fed0: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
-0001fee0: 2020 2020 203a 7061 7261 6d20 7072 6f78       :param prox
-0001fef0: 6965 733a 2064 6963 742c 2064 6566 6175  ies: dict, defau
-0001ff00: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
-0001ff10: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0001ff20: 2073 6c65 6570 5f73 6563 6f6e 6473 3a20   sleep_seconds: 
-0001ff30: 666c 6f61 742c 2064 6566 6175 6c74 2030  float, default 0
-0001ff40: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001ff50: 2020 203a 7061 7261 6d20 6973 5f64 6574     :param is_det
-0001ff60: 6169 6c5f 7265 7375 6c74 3a20 626f 6f6c  ail_result: bool
-0001ff70: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-0001ff80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001ff90: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
-0001ffa0: 7265 5f6c 696d 6974 5f6f 665f 6c65 6e67  re_limit_of_leng
-0001ffb0: 7468 3a20 626f 6f6c 2c20 6465 6661 756c  th: bool, defaul
-0001ffc0: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-0001ffd0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0001ffe0: 206c 696d 6974 5f6f 665f 6c65 6e67 7468   limit_of_length
-0001fff0: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
-00020000: 3030 3030 2e0d 0a20 2020 2020 2020 2020  0000...         
-00020010: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-00020020: 5f69 676e 6f72 655f 656d 7074 795f 7175  _ignore_empty_qu
-00020030: 6572 793a 2062 6f6f 6c2c 2064 6566 6175  ery: bool, defau
-00020040: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
-00020050: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00020060: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
-00020070: 5f61 6674 6572 5f66 7265 713a 2069 6e74  _after_freq: int
-00020080: 2c20 6465 6661 756c 7420 3130 3030 2e0d  , default 1000..
-00020090: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000200a0: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
-000200b0: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-000200c0: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
-000200d0: 6175 6c74 2031 3530 302e 0d0a 2020 2020  ault 1500...    
-000200e0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-000200f0: 616d 2069 665f 7368 6f77 5f74 696d 655f  am if_show_time_
-00020100: 7374 6174 3a20 626f 6f6c 2c20 6465 6661  stat: bool, defa
-00020110: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-00020120: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00020130: 616d 2073 686f 775f 7469 6d65 5f73 7461  am show_time_sta
-00020140: 745f 7072 6563 6973 696f 6e3a 2069 6e74  t_precision: int
-00020150: 2c20 6465 6661 756c 7420 322e 0d0a 2020  , default 2...  
-00020160: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00020170: 6172 616d 2069 665f 7072 696e 745f 7761  aram if_print_wa
-00020180: 726e 696e 673a 2062 6f6f 6c2c 2064 6566  rning: bool, def
-00020190: 6175 6c74 2054 7275 652e 0d0a 2020 2020  ault True...    
-000201a0: 2020 2020 3a72 6574 7572 6e3a 2073 7472      :return: str
-000201b0: 206f 7220 6469 6374 0d0a 2020 2020 2020   or dict..      
-000201c0: 2020 2222 220d 0a0d 0a20 2020 2020 2020    """....       
-000201d0: 2074 696d 656f 7574 203d 206b 7761 7267   timeout = kwarg
-000201e0: 732e 6765 7428 2774 696d 656f 7574 272c  s.get('timeout',
-000201f0: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
-00020200: 7072 6f78 6965 7320 3d20 6b77 6172 6773  proxies = kwargs
-00020210: 2e67 6574 2827 7072 6f78 6965 7327 2c20  .get('proxies', 
-00020220: 4e6f 6e65 290d 0a20 2020 2020 2020 2073  None)..        s
-00020230: 6c65 6570 5f73 6563 6f6e 6473 203d 206b  leep_seconds = k
-00020240: 7761 7267 732e 6765 7428 2773 6c65 6570  wargs.get('sleep
-00020250: 5f73 6563 6f6e 6473 272c 2030 290d 0a20  _seconds', 0).. 
-00020260: 2020 2020 2020 2069 665f 7072 696e 745f         if_print_
-00020270: 7761 726e 696e 6720 3d20 6b77 6172 6773  warning = kwargs
-00020280: 2e67 6574 2827 6966 5f70 7269 6e74 5f77  .get('if_print_w
-00020290: 6172 6e69 6e67 272c 2054 7275 6529 0d0a  arning', True)..
-000202a0: 2020 2020 2020 2020 6973 5f64 6574 6169          is_detai
-000202b0: 6c5f 7265 7375 6c74 203d 206b 7761 7267  l_result = kwarg
-000202c0: 732e 6765 7428 2769 735f 6465 7461 696c  s.get('is_detail
-000202d0: 5f72 6573 756c 7427 2c20 4661 6c73 6529  _result', False)
-000202e0: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
-000202f0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-00020300: 7265 7120 3d20 6b77 6172 6773 2e67 6574  req = kwargs.get
-00020310: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
-00020320: 5f61 6674 6572 5f66 7265 7127 2c20 7365  _after_freq', se
-00020330: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
-00020340: 6f6e 5f66 7265 7129 0d0a 2020 2020 2020  on_freq)..      
-00020350: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
-00020360: 5f61 6674 6572 5f73 6563 6f6e 6473 203d  _after_seconds =
-00020370: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
-00020380: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-00020390: 725f 7365 636f 6e64 7327 2c20 7365 6c66  r_seconds', self
-000203a0: 2e64 6566 6175 6c74 5f73 6573 7369 6f6e  .default_session
-000203b0: 5f73 6563 6f6e 6473 290d 0a20 2020 2020  _seconds)..     
-000203c0: 2020 2073 656c 662e 6368 6563 6b5f 696e     self.check_in
-000203d0: 7075 745f 6c69 6d69 7428 7175 6572 795f  put_limit(query_
-000203e0: 7465 7874 2c20 7365 6c66 2e69 6e70 7574  text, self.input
-000203f0: 5f6c 696d 6974 290d 0a0d 0a20 2020 2020  _limit)....     
-00020400: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
-00020410: 6e64 5f66 7265 7120 3d20 3120 6966 2073  nd_freq = 1 if s
-00020420: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
-00020430: 2520 7570 6461 7465 5f73 6573 7369 6f6e  % update_session
-00020440: 5f61 6674 6572 5f66 7265 7120 213d 2030  _after_freq != 0
-00020450: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
-00020460: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
-00020470: 5f74 696d 6520 3d20 3120 6966 2074 696d  _time = 1 if tim
-00020480: 652e 7469 6d65 2829 202d 2073 656c 662e  e.time() - self.
-00020490: 6265 6769 6e5f 7469 6d65 203c 2075 7064  begin_time < upd
-000204a0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-000204b0: 725f 7365 636f 6e64 7320 656c 7365 2030  r_seconds else 0
-000204c0: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
-000204d0: 2028 7365 6c66 2e73 6573 7369 6f6e 2061   (self.session a
-000204e0: 6e64 2073 656c 662e 6c61 6e67 7561 6765  nd self.language
-000204f0: 5f6d 6170 2061 6e64 206e 6f74 5f75 7064  _map and not_upd
-00020500: 6174 655f 636f 6e64 5f66 7265 7120 616e  ate_cond_freq an
-00020510: 6420 6e6f 745f 7570 6461 7465 5f63 6f6e  d not_update_con
-00020520: 645f 7469 6d65 293a 0d0a 2020 2020 2020  d_time):..      
-00020530: 2020 2020 2020 7365 6c66 2e62 6567 696e        self.begin
-00020540: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
-00020550: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
-00020560: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
-00020570: 7265 7175 6573 7473 2e53 6573 7369 6f6e  requests.Session
-00020580: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-00020590: 686f 7374 5f68 746d 6c20 3d20 7365 6c66  host_html = self
-000205a0: 2e73 6573 7369 6f6e 2e67 6574 2873 656c  .session.get(sel
-000205b0: 662e 686f 7374 5f75 726c 2c20 6865 6164  f.host_url, head
-000205c0: 6572 733d 7365 6c66 2e68 6f73 745f 6865  ers=self.host_he
-000205d0: 6164 6572 732c 2074 696d 656f 7574 3d74  aders, timeout=t
-000205e0: 696d 656f 7574 2c20 7072 6f78 6965 733d  imeout, proxies=
-000205f0: 7072 6f78 6965 7329 2e74 6578 740d 0a20  proxies).text.. 
-00020600: 2020 2020 2020 2020 2020 205f 203d 2073             _ = s
-00020610: 656c 662e 7365 7373 696f 6e2e 6765 7428  elf.session.get(
-00020620: 7365 6c66 2e63 6f6f 6b69 6573 5f75 726c  self.cookies_url
-00020630: 2c20 6865 6164 6572 733d 7365 6c66 2e68  , headers=self.h
-00020640: 6f73 745f 6865 6164 6572 732c 2074 696d  ost_headers, tim
-00020650: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
-00020660: 6f78 6965 733d 7072 6f78 6965 7329 0d0a  oxies=proxies)..
-00020670: 2020 2020 2020 2020 2020 2020 5f20 3d20              _ = 
-00020680: 7365 6c66 2e73 6573 7369 6f6e 2e67 6574  self.session.get
-00020690: 2873 656c 662e 696e 666f 5f75 726c 2c20  (self.info_url, 
-000206a0: 6865 6164 6572 733d 7365 6c66 2e68 6f73  headers=self.hos
-000206b0: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
-000206c0: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
-000206d0: 6965 733d 7072 6f78 6965 7329 0d0a 2020  ies=proxies)..  
-000206e0: 2020 2020 2020 2020 2020 6465 6275 675f            debug_
-000206f0: 6c61 6e67 5f6b 7761 7267 7320 3d20 7365  lang_kwargs = se
-00020700: 6c66 2e64 6562 7567 5f6c 616e 675f 6b77  lf.debug_lang_kw
-00020710: 6172 6773 2866 726f 6d5f 6c61 6e67 7561  args(from_langua
-00020720: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
-00020730: 2073 656c 662e 6465 6661 756c 745f 6672   self.default_fr
-00020740: 6f6d 5f6c 616e 6775 6167 652c 2069 665f  om_language, if_
-00020750: 7072 696e 745f 7761 726e 696e 6729 0d0a  print_warning)..
-00020760: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00020770: 2e6c 616e 6775 6167 655f 6d61 7020 3d20  .language_map = 
-00020780: 7365 6c66 2e67 6574 5f6c 616e 6775 6167  self.get_languag
-00020790: 655f 6d61 7028 686f 7374 5f68 746d 6c2c  e_map(host_html,
-000207a0: 2073 656c 662e 7365 7373 696f 6e2c 2073   self.session, s
-000207b0: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
-000207c0: 2c20 7469 6d65 6f75 742c 2070 726f 7869  , timeout, proxi
-000207d0: 6573 2c20 2a2a 6465 6275 675f 6c61 6e67  es, **debug_lang
-000207e0: 5f6b 7761 7267 7329 0d0a 0d0a 2020 2020  _kwargs)....    
-000207f0: 2020 2020 6966 2066 726f 6d5f 6c61 6e67      if from_lang
-00020800: 7561 6765 203d 3d20 2761 7574 6f27 3a0d  uage == 'auto':.
-00020810: 0a20 2020 2020 2020 2020 2020 2066 726f  .            fro
-00020820: 6d5f 6c61 6e67 7561 6765 203d 2073 656c  m_language = sel
-00020830: 662e 7761 726e 696e 675f 6175 746f 5f6c  f.warning_auto_l
-00020840: 616e 6728 2769 666c 7974 656b 272c 2073  ang('iflytek', s
-00020850: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
-00020860: 5f6c 616e 6775 6167 652c 2069 665f 7072  _language, if_pr
-00020870: 696e 745f 7761 726e 696e 6729 0d0a 2020  int_warning)..  
-00020880: 2020 2020 2020 6672 6f6d 5f6c 616e 6775        from_langu
-00020890: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
-000208a0: 203d 2073 656c 662e 6368 6563 6b5f 6c61   = self.check_la
-000208b0: 6e67 7561 6765 2866 726f 6d5f 6c61 6e67  nguage(from_lang
-000208c0: 7561 6765 2c20 746f 5f6c 616e 6775 6167  uage, to_languag
-000208d0: 652c 2073 656c 662e 6c61 6e67 7561 6765  e, self.language
-000208e0: 5f6d 6170 2c20 6f75 7470 7574 5f7a 683d  _map, output_zh=
-000208f0: 7365 6c66 2e6f 7574 7075 745f 7a68 290d  self.output_zh).
-00020900: 0a0d 0a20 2020 2020 2020 2023 2063 6970  ...        # cip
-00020910: 6865 725f 7175 6572 795f 7465 7874 203d  her_query_text =
-00020920: 2062 6173 6536 342e 6236 3465 6e63 6f64   base64.b64encod
-00020930: 6528 7175 6572 795f 7465 7874 2e65 6e63  e(query_text.enc
-00020940: 6f64 6528 2929 2e64 6563 6f64 6528 290d  ode()).decode().
-00020950: 0a20 2020 2020 2020 2063 6970 6865 725f  .        cipher_
-00020960: 7175 6572 795f 7465 7874 203d 2071 7565  query_text = que
-00020970: 7279 5f74 6578 740d 0a20 2020 2020 2020  ry_text..       
-00020980: 2070 6179 6c6f 6164 203d 207b 2766 726f   payload = {'fro
-00020990: 6d27 3a20 6672 6f6d 5f6c 616e 6775 6167  m': from_languag
-000209a0: 652c 2027 746f 273a 2074 6f5f 6c61 6e67  e, 'to': to_lang
-000209b0: 7561 6765 2c20 2774 6578 7427 3a20 6369  uage, 'text': ci
-000209c0: 7068 6572 5f71 7565 7279 5f74 6578 747d  pher_query_text}
-000209d0: 0d0a 2020 2020 2020 2020 7220 3d20 7365  ..        r = se
-000209e0: 6c66 2e73 6573 7369 6f6e 2e70 6f73 7428  lf.session.post(
-000209f0: 7365 6c66 2e61 7069 5f75 726c 2c20 6865  self.api_url, he
-00020a00: 6164 6572 733d 7365 6c66 2e61 7069 5f68  aders=self.api_h
-00020a10: 6561 6465 7273 2c20 6461 7461 3d70 6179  eaders, data=pay
-00020a20: 6c6f 6164 2c20 7469 6d65 6f75 743d 7469  load, timeout=ti
-00020a30: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
-00020a40: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
-00020a50: 2072 2e72 6169 7365 5f66 6f72 5f73 7461   r.raise_for_sta
-00020a60: 7475 7328 290d 0a20 2020 2020 2020 2064  tus()..        d
-00020a70: 6174 6120 3d20 722e 6a73 6f6e 2829 0d0a  ata = r.json()..
-00020a80: 2020 2020 2020 2020 7469 6d65 2e73 6c65          time.sle
-00020a90: 6570 2873 6c65 6570 5f73 6563 6f6e 6473  ep(sleep_seconds
-00020aa0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00020ab0: 7175 6572 795f 636f 756e 7420 2b3d 2031  query_count += 1
-00020ac0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00020ad0: 2064 6174 6120 6966 2069 735f 6465 7461   data if is_deta
-00020ae0: 696c 5f72 6573 756c 7420 656c 7365 206a  il_result else j
-00020af0: 736f 6e2e 6c6f 6164 7328 6461 7461 5b27  son.loads(data['
-00020b00: 6461 7461 275d 295b 2774 7261 6e73 5f72  data'])['trans_r
-00020b10: 6573 756c 7427 5d5b 2764 7374 275d 0d0a  esult']['dst']..
-00020b20: 0d0a 0d0a 636c 6173 7320 4966 6c79 7465  ....class Iflyte
-00020b30: 6b56 3228 5473 6529 3a0d 0a20 2020 2064  kV2(Tse):..    d
-00020b40: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-00020b50: 293a 0d0a 2020 2020 2020 2020 7375 7065  ):..        supe
-00020b60: 7228 292e 5f5f 696e 6974 5f5f 2829 0d0a  r().__init__()..
-00020b70: 2020 2020 2020 2020 7365 6c66 2e62 6567          self.beg
-00020b80: 696e 5f74 696d 6520 3d20 7469 6d65 2e74  in_time = time.t
-00020b90: 696d 6528 290d 0a20 2020 2020 2020 2073  ime()..        s
-00020ba0: 656c 662e 686f 7374 5f75 726c 203d 2027  elf.host_url = '
-00020bb0: 6874 7470 733a 2f2f 6661 6e79 692e 7866  https://fanyi.xf
-00020bc0: 7975 6e2e 636e 2f63 6f6e 736f 6c65 2f74  yun.cn/console/t
-00020bd0: 7261 6e73 2f74 6578 7427 2020 2320 6874  rans/text'  # ht
-00020be0: 7470 733a 2f2f 7777 772e 6966 6c79 7265  tps://www.iflyre
-00020bf0: 632e 636f 6d2f 6874 6d6c 2f74 7261 6e73  c.com/html/trans
-00020c00: 6c61 7465 2e68 746d 6c0d 0a20 2020 2020  late.html..     
-00020c10: 2020 2073 656c 662e 6170 695f 7572 6c20     self.api_url 
-00020c20: 3d20 2768 7474 7073 3a2f 2f66 616e 7969  = 'https://fanyi
-00020c30: 2e78 6679 756e 2e63 6e2f 6170 692d 7472  .xfyun.cn/api-tr
-00020c40: 616e 2f74 7261 6e73 2f69 7473 270d 0a20  an/trans/its'.. 
-00020c50: 2020 2020 2020 2073 656c 662e 6465 7465         self.dete
-00020c60: 6374 5f6c 616e 6775 6167 655f 7572 6c20  ct_language_url 
-00020c70: 3d20 2768 7474 7073 3a2f 2f66 616e 7969  = 'https://fanyi
-00020c80: 2e78 6679 756e 2e63 6e2f 6170 692d 7472  .xfyun.cn/api-tr
-00020c90: 616e 2f74 7261 6e73 2f64 6574 6563 7469  an/trans/detecti
-00020ca0: 6f6e 270d 0a20 2020 2020 2020 2073 656c  on'..        sel
-00020cb0: 662e 6c61 6e67 7561 6765 5f75 726c 5f70  f.language_url_p
-00020cc0: 6174 7465 726e 203d 2027 2f6a 732f 7472  attern = '/js/tr
-00020cd0: 616e 732d 7465 7874 2f69 6e64 6578 2e28  ans-text/index.(
-00020ce0: 2e2a 3f29 2e6a 7327 0d0a 2020 2020 2020  .*?).js'..      
-00020cf0: 2020 7365 6c66 2e6c 616e 6775 6167 655f    self.language_
-00020d00: 7572 6c20 3d20 4e6f 6e65 0d0a 2020 2020  url = None..    
-00020d10: 2020 2020 7365 6c66 2e68 6f73 745f 6865      self.host_he
-00020d20: 6164 6572 7320 3d20 7365 6c66 2e67 6574  aders = self.get
-00020d30: 5f68 6561 6465 7273 2873 656c 662e 686f  _headers(self.ho
-00020d40: 7374 5f75 726c 2c20 6966 5f61 7069 3d46  st_url, if_api=F
-00020d50: 616c 7365 290d 0a20 2020 2020 2020 2073  alse)..        s
-00020d60: 656c 662e 6170 695f 6865 6164 6572 7320  elf.api_headers 
-00020d70: 3d20 7365 6c66 2e67 6574 5f68 6561 6465  = self.get_heade
-00020d80: 7273 2873 656c 662e 686f 7374 5f75 726c  rs(self.host_url
-00020d90: 2c20 6966 5f61 7069 3d54 7275 6529 0d0a  , if_api=True)..
-00020da0: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
-00020db0: 6775 6167 655f 6d61 7020 3d20 4e6f 6e65  guage_map = None
-00020dc0: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
-00020dd0: 6573 7369 6f6e 203d 204e 6f6e 650d 0a20  ession = None.. 
-00020de0: 2020 2020 2020 2073 656c 662e 7175 6572         self.quer
-00020df0: 795f 636f 756e 7420 3d20 300d 0a20 2020  y_count = 0..   
-00020e00: 2020 2020 2073 656c 662e 6f75 7470 7574       self.output
-00020e10: 5f7a 6820 3d20 2763 6e27 0d0a 2020 2020  _zh = 'cn'..    
-00020e20: 2020 2020 7365 6c66 2e69 6e70 7574 5f6c      self.input_l
-00020e30: 696d 6974 203d 2069 6e74 2832 6533 290d  imit = int(2e3).
-00020e40: 0a20 2020 2020 2020 2073 656c 662e 6465  .        self.de
-00020e50: 6661 756c 745f 6672 6f6d 5f6c 616e 6775  fault_from_langu
-00020e60: 6167 6520 3d20 7365 6c66 2e6f 7574 7075  age = self.outpu
-00020e70: 745f 7a68 0d0a 0d0a 2020 2020 4054 7365  t_zh....    @Tse
-00020e80: 2e64 6562 7567 5f6c 616e 6775 6167 655f  .debug_language_
-00020e90: 6d61 700d 0a20 2020 2064 6566 2067 6574  map..    def get
-00020ea0: 5f6c 616e 6775 6167 655f 6d61 7028 7365  _language_map(se
-00020eb0: 6c66 2c20 686f 7374 5f68 746d 6c3a 2073  lf, host_html: s
-00020ec0: 7472 2c20 7373 3a20 5365 7373 696f 6e54  tr, ss: SessionT
-00020ed0: 7970 652c 2068 6561 6465 7273 3a20 6469  ype, headers: di
-00020ee0: 6374 2c20 7469 6d65 6f75 743a 204f 7074  ct, timeout: Opt
-00020ef0: 696f 6e61 6c5b 666c 6f61 745d 2c20 7072  ional[float], pr
-00020f00: 6f78 6965 733a 204f 7074 696f 6e61 6c5b  oxies: Optional[
-00020f10: 6469 6374 5d2c 202a 2a6b 7761 7267 733a  dict], **kwargs:
-00020f20: 204c 616e 674d 6170 4b77 6172 6773 5479   LangMapKwargsTy
-00020f30: 7065 2920 2d3e 2064 6963 743a 0d0a 2020  pe) -> dict:..  
-00020f40: 2020 2020 2020 686f 7374 5f74 7275 655f        host_true_
-00020f50: 7572 6c20 3d20 6627 6874 7470 733a 2f2f  url = f'https://
-00020f60: 7b75 726c 6c69 622e 7061 7273 652e 7572  {urllib.parse.ur
-00020f70: 6c70 6172 7365 2873 656c 662e 686f 7374  lparse(self.host
-00020f80: 5f75 726c 292e 686f 7374 6e61 6d65 7d27  _url).hostname}'
-00020f90: 0d0a 0d0a 2020 2020 2020 2020 6574 203d  ....        et =
-00020fa0: 206c 786d 6c2e 6574 7265 652e 4854 4d4c   lxml.etree.HTML
-00020fb0: 2868 6f73 745f 6874 6d6c 290d 0a20 2020  (host_html)..   
-00020fc0: 2020 2020 2068 6f73 745f 6a73 5f75 726c       host_js_url
-00020fd0: 203d 2066 2222 227b 686f 7374 5f74 7275   = f"""{host_tru
-00020fe0: 655f 7572 6c7d 7b65 742e 7870 6174 6828  e_url}{et.xpath(
-00020ff0: 272f 2f73 6372 6970 745b 4074 7970 653d  '//script[@type=
-00021000: 226d 6f64 756c 6522 5d2f 4073 7263 2729  "module"]/@src')
-00021010: 5b30 5d7d 2222 220d 0a20 2020 2020 2020  [0]}"""..       
-00021020: 2068 6f73 745f 6a73 5f68 746d 6c20 3d20   host_js_html = 
-00021030: 7373 2e67 6574 2868 6f73 745f 6a73 5f75  ss.get(host_js_u
-00021040: 726c 2c20 6865 6164 6572 733d 6865 6164  rl, headers=head
-00021050: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
-00021060: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
-00021070: 6f78 6965 7329 2e74 6578 740d 0a20 2020  oxies).text..   
-00021080: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-00021090: 6765 5f75 726c 203d 2066 2222 227b 686f  ge_url = f"""{ho
-000210a0: 7374 5f74 7275 655f 7572 6c7d 7b72 652e  st_true_url}{re.
-000210b0: 636f 6d70 696c 6528 7365 6c66 2e6c 616e  compile(self.lan
-000210c0: 6775 6167 655f 7572 6c5f 7061 7474 6572  guage_url_patter
-000210d0: 6e29 2e73 6561 7263 6828 686f 7374 5f6a  n).search(host_j
-000210e0: 735f 6874 6d6c 292e 6772 6f75 7028 297d  s_html).group()}
-000210f0: 2222 220d 0a0d 0a20 2020 2020 2020 206c  """....        l
-00021100: 616e 675f 6a73 5f68 746d 6c20 3d20 7373  ang_js_html = ss
-00021110: 2e67 6574 2873 656c 662e 6c61 6e67 7561  .get(self.langua
-00021120: 6765 5f75 726c 2c20 6865 6164 6572 733d  ge_url, headers=
-00021130: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
-00021140: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
-00021150: 733d 7072 6f78 6965 7329 2e74 6578 740d  s=proxies).text.
-00021160: 0a20 2020 2020 2020 206c 616e 675f 6c69  .        lang_li
-00021170: 7374 203d 2072 652e 636f 6d70 696c 6528  st = re.compile(
-00021180: 276c 616e 6775 6167 6543 6f64 653a 2228  'languageCode:"(
-00021190: 2e2a 3f29 222c 2729 2e66 696e 6461 6c6c  .*?)",').findall
-000211a0: 286c 616e 675f 6a73 5f68 746d 6c29 0d0a  (lang_js_html)..
-000211b0: 2020 2020 2020 2020 6c61 6e67 5f6c 6973          lang_lis
-000211c0: 7420 3d20 736f 7274 6564 286c 6973 7428  t = sorted(list(
-000211d0: 7365 7428 6c61 6e67 5f6c 6973 7429 2929  set(lang_list)))
-000211e0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000211f0: 207b 7d2e 6672 6f6d 6b65 7973 286c 616e   {}.fromkeys(lan
-00021200: 675f 6c69 7374 2c20 6c61 6e67 5f6c 6973  g_list, lang_lis
-00021210: 7429 0d0a 0d0a 2020 2020 4054 7365 2e75  t)....    @Tse.u
-00021220: 6e63 6572 7469 6669 6564 0d0a 2020 2020  ncertified..    
-00021230: 4054 7365 2e74 696d 655f 7374 6174 0d0a  @Tse.time_stat..
-00021240: 2020 2020 4054 7365 2e63 6865 636b 5f71      @Tse.check_q
-00021250: 7565 7279 0d0a 2020 2020 6465 6620 6966  uery..    def if
-00021260: 6c79 7465 6b5f 6170 6928 7365 6c66 2c20  lytek_api(self, 
-00021270: 7175 6572 795f 7465 7874 3a20 7374 722c  query_text: str,
-00021280: 2066 726f 6d5f 6c61 6e67 7561 6765 3a20   from_language: 
-00021290: 7374 7220 3d20 2761 7574 6f27 2c20 746f  str = 'auto', to
-000212a0: 5f6c 616e 6775 6167 653a 2073 7472 203d  _language: str =
-000212b0: 2027 656e 272c 202a 2a6b 7761 7267 733a   'en', **kwargs:
-000212c0: 2041 7069 4b77 6172 6773 5479 7065 2920   ApiKwargsType) 
-000212d0: 2d3e 2055 6e69 6f6e 5b73 7472 2c20 6469  -> Union[str, di
-000212e0: 6374 5d3a 0d0a 2020 2020 2020 2020 2222  ct]:..        ""
-000212f0: 220d 0a20 2020 2020 2020 2068 7474 7073  "..        https
-00021300: 3a2f 2f66 616e 7969 2e78 6679 756e 2e63  ://fanyi.xfyun.c
-00021310: 6e2f 636f 6e73 6f6c 652f 7472 616e 732f  n/console/trans/
-00021320: 7465 7874 0d0a 2020 2020 2020 2020 3a70  text..        :p
-00021330: 6172 616d 2071 7565 7279 5f74 6578 743a  aram query_text:
-00021340: 2073 7472 2c20 6d75 7374 2e0d 0a20 2020   str, must...   
-00021350: 2020 2020 203a 7061 7261 6d20 6672 6f6d       :param from
-00021360: 5f6c 616e 6775 6167 653a 2073 7472 2c20  _language: str, 
-00021370: 6465 6661 756c 7420 2761 7574 6f27 2e0d  default 'auto'..
-00021380: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00021390: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
-000213a0: 2c20 6465 6661 756c 7420 2765 6e27 2e0d  , default 'en'..
-000213b0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-000213c0: 2a2a 6b77 6172 6773 3a0d 0a20 2020 2020  **kwargs:..     
-000213d0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-000213e0: 6d20 7469 6d65 6f75 743a 2066 6c6f 6174  m timeout: float
-000213f0: 2c20 6465 6661 756c 7420 4e6f 6e65 2e0d  , default None..
-00021400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021410: 203a 7061 7261 6d20 7072 6f78 6965 733a   :param proxies:
-00021420: 2064 6963 742c 2064 6566 6175 6c74 204e   dict, default N
-00021430: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
-00021440: 2020 2020 2020 3a70 6172 616d 2073 6c65        :param sle
-00021450: 6570 5f73 6563 6f6e 6473 3a20 666c 6f61  ep_seconds: floa
-00021460: 742c 2064 6566 6175 6c74 2030 2e0d 0a20  t, default 0... 
-00021470: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-00021480: 7061 7261 6d20 6973 5f64 6574 6169 6c5f  param is_detail_
-00021490: 7265 7375 6c74 3a20 626f 6f6c 2c20 6465  result: bool, de
-000214a0: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
-000214b0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-000214c0: 6172 616d 2069 665f 6967 6e6f 7265 5f6c  aram if_ignore_l
-000214d0: 696d 6974 5f6f 665f 6c65 6e67 7468 3a20  imit_of_length: 
-000214e0: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
-000214f0: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
-00021500: 2020 2020 2020 3a70 6172 616d 206c 696d        :param lim
-00021510: 6974 5f6f 665f 6c65 6e67 7468 3a20 696e  it_of_length: in
-00021520: 742c 2064 6566 6175 6c74 2032 3030 3030  t, default 20000
-00021530: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00021540: 2020 203a 7061 7261 6d20 6966 5f69 676e     :param if_ign
-00021550: 6f72 655f 656d 7074 795f 7175 6572 793a  ore_empty_query:
-00021560: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
-00021570: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
-00021580: 2020 2020 2020 203a 7061 7261 6d20 7570         :param up
-00021590: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-000215a0: 6572 5f66 7265 713a 2069 6e74 2c20 6465  er_freq: int, de
-000215b0: 6661 756c 7420 3130 3030 2e0d 0a20 2020  fault 1000...   
-000215c0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-000215d0: 7261 6d20 7570 6461 7465 5f73 6573 7369  ram update_sessi
-000215e0: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-000215f0: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
-00021600: 2031 3530 302e 0d0a 2020 2020 2020 2020   1500...        
-00021610: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-00021620: 665f 7368 6f77 5f74 696d 655f 7374 6174  f_show_time_stat
-00021630: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-00021640: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
-00021650: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-00021660: 686f 775f 7469 6d65 5f73 7461 745f 7072  how_time_stat_pr
-00021670: 6563 6973 696f 6e3a 2069 6e74 2c20 6465  ecision: int, de
-00021680: 6661 756c 7420 322e 0d0a 2020 2020 2020  fault 2...      
-00021690: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-000216a0: 2069 665f 7072 696e 745f 7761 726e 696e   if_print_warnin
-000216b0: 673a 2062 6f6f 6c2c 2064 6566 6175 6c74  g: bool, default
-000216c0: 2054 7275 652e 0d0a 2020 2020 2020 2020   True...        
-000216d0: 3a72 6574 7572 6e3a 2073 7472 206f 7220  :return: str or 
-000216e0: 6469 6374 0d0a 2020 2020 2020 2020 2222  dict..        ""
-000216f0: 220d 0a0d 0a20 2020 2020 2020 2074 696d  "....        tim
-00021700: 656f 7574 203d 206b 7761 7267 732e 6765  eout = kwargs.ge
-00021710: 7428 2774 696d 656f 7574 272c 204e 6f6e  t('timeout', Non
-00021720: 6529 0d0a 2020 2020 2020 2020 7072 6f78  e)..        prox
-00021730: 6965 7320 3d20 6b77 6172 6773 2e67 6574  ies = kwargs.get
-00021740: 2827 7072 6f78 6965 7327 2c20 4e6f 6e65  ('proxies', None
-00021750: 290d 0a20 2020 2020 2020 2073 6c65 6570  )..        sleep
-00021760: 5f73 6563 6f6e 6473 203d 206b 7761 7267  _seconds = kwarg
-00021770: 732e 6765 7428 2773 6c65 6570 5f73 6563  s.get('sleep_sec
-00021780: 6f6e 6473 272c 2030 290d 0a20 2020 2020  onds', 0)..     
-00021790: 2020 2069 665f 7072 696e 745f 7761 726e     if_print_warn
-000217a0: 696e 6720 3d20 6b77 6172 6773 2e67 6574  ing = kwargs.get
-000217b0: 2827 6966 5f70 7269 6e74 5f77 6172 6e69  ('if_print_warni
-000217c0: 6e67 272c 2054 7275 6529 0d0a 2020 2020  ng', True)..    
-000217d0: 2020 2020 6973 5f64 6574 6169 6c5f 7265      is_detail_re
-000217e0: 7375 6c74 203d 206b 7761 7267 732e 6765  sult = kwargs.ge
-000217f0: 7428 2769 735f 6465 7461 696c 5f72 6573  t('is_detail_res
-00021800: 756c 7427 2c20 4661 6c73 6529 0d0a 2020  ult', False)..  
-00021810: 2020 2020 2020 7570 6461 7465 5f73 6573        update_ses
-00021820: 7369 6f6e 5f61 6674 6572 5f66 7265 7120  sion_after_freq 
-00021830: 3d20 6b77 6172 6773 2e67 6574 2827 7570  = kwargs.get('up
-00021840: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-00021850: 6572 5f66 7265 7127 2c20 7365 6c66 2e64  er_freq', self.d
-00021860: 6566 6175 6c74 5f73 6573 7369 6f6e 5f66  efault_session_f
-00021870: 7265 7129 0d0a 2020 2020 2020 2020 7570  req)..        up
-00021880: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-00021890: 6572 5f73 6563 6f6e 6473 203d 206b 7761  er_seconds = kwa
-000218a0: 7267 732e 6765 7428 2775 7064 6174 655f  rgs.get('update_
-000218b0: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
-000218c0: 636f 6e64 7327 2c20 7365 6c66 2e64 6566  conds', self.def
-000218d0: 6175 6c74 5f73 6573 7369 6f6e 5f73 6563  ault_session_sec
-000218e0: 6f6e 6473 290d 0a20 2020 2020 2020 2073  onds)..        s
-000218f0: 656c 662e 6368 6563 6b5f 696e 7075 745f  elf.check_input_
-00021900: 6c69 6d69 7428 7175 6572 795f 7465 7874  limit(query_text
-00021910: 2c20 7365 6c66 2e69 6e70 7574 5f6c 696d  , self.input_lim
-00021920: 6974 290d 0a0d 0a20 2020 2020 2020 206e  it)....        n
-00021930: 6f74 5f75 7064 6174 655f 636f 6e64 5f66  ot_update_cond_f
-00021940: 7265 7120 3d20 3120 6966 2073 656c 662e  req = 1 if self.
-00021950: 7175 6572 795f 636f 756e 7420 2520 7570  query_count % up
-00021960: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-00021970: 6572 5f66 7265 7120 213d 2030 2065 6c73  er_freq != 0 els
-00021980: 6520 300d 0a20 2020 2020 2020 206e 6f74  e 0..        not
-00021990: 5f75 7064 6174 655f 636f 6e64 5f74 696d  _update_cond_tim
-000219a0: 6520 3d20 3120 6966 2074 696d 652e 7469  e = 1 if time.ti
-000219b0: 6d65 2829 202d 2073 656c 662e 6265 6769  me() - self.begi
-000219c0: 6e5f 7469 6d65 203c 2075 7064 6174 655f  n_time < update_
-000219d0: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
-000219e0: 636f 6e64 7320 656c 7365 2030 0d0a 2020  conds else 0..  
-000219f0: 2020 2020 2020 6966 206e 6f74 2028 7365        if not (se
-00021a00: 6c66 2e73 6573 7369 6f6e 2061 6e64 2073  lf.session and s
-00021a10: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
-00021a20: 2061 6e64 206e 6f74 5f75 7064 6174 655f   and not_update_
-00021a30: 636f 6e64 5f66 7265 7120 616e 6420 6e6f  cond_freq and no
-00021a40: 745f 7570 6461 7465 5f63 6f6e 645f 7469  t_update_cond_ti
-00021a50: 6d65 293a 0d0a 2020 2020 2020 2020 2020  me):..          
-00021a60: 2020 7365 6c66 2e62 6567 696e 5f74 696d    self.begin_tim
-00021a70: 6520 3d20 7469 6d65 2e74 696d 6528 290d  e = time.time().
-00021a80: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00021a90: 662e 7365 7373 696f 6e20 3d20 7265 7175  f.session = requ
-00021aa0: 6573 7473 2e53 6573 7369 6f6e 2829 0d0a  ests.Session()..
-00021ab0: 2020 2020 2020 2020 2020 2020 686f 7374              host
-00021ac0: 5f68 746d 6c20 3d20 7365 6c66 2e73 6573  _html = self.ses
-00021ad0: 7369 6f6e 2e67 6574 2873 656c 662e 686f  sion.get(self.ho
-00021ae0: 7374 5f75 726c 2c20 6865 6164 6572 733d  st_url, headers=
-00021af0: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
-00021b00: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
-00021b10: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
-00021b20: 6965 7329 2e74 6578 740d 0a20 2020 2020  ies).text..     
-00021b30: 2020 2020 2020 2064 6562 7567 5f6c 616e         debug_lan
-00021b40: 675f 6b77 6172 6773 203d 2073 656c 662e  g_kwargs = self.
-00021b50: 6465 6275 675f 6c61 6e67 5f6b 7761 7267  debug_lang_kwarg
-00021b60: 7328 6672 6f6d 5f6c 616e 6775 6167 652c  s(from_language,
-00021b70: 2074 6f5f 6c61 6e67 7561 6765 2c20 7365   to_language, se
-00021b80: 6c66 2e64 6566 6175 6c74 5f66 726f 6d5f  lf.default_from_
-00021b90: 6c61 6e67 7561 6765 2c20 6966 5f70 7269  language, if_pri
-00021ba0: 6e74 5f77 6172 6e69 6e67 290d 0a20 2020  nt_warning)..   
-00021bb0: 2020 2020 2020 2020 2073 656c 662e 6c61           self.la
-00021bc0: 6e67 7561 6765 5f6d 6170 203d 2073 656c  nguage_map = sel
-00021bd0: 662e 6765 745f 6c61 6e67 7561 6765 5f6d  f.get_language_m
-00021be0: 6170 2868 6f73 745f 6874 6d6c 2c20 7365  ap(host_html, se
-00021bf0: 6c66 2e73 6573 7369 6f6e 2c20 7365 6c66  lf.session, self
-00021c00: 2e68 6f73 745f 6865 6164 6572 732c 2074  .host_headers, t
-00021c10: 696d 656f 7574 2c20 7072 6f78 6965 732c  imeout, proxies,
-00021c20: 202a 2a64 6562 7567 5f6c 616e 675f 6b77   **debug_lang_kw
-00021c30: 6172 6773 290d 0a0d 0a20 2020 2020 2020  args)....       
-00021c40: 2069 6620 6672 6f6d 5f6c 616e 6775 6167   if from_languag
-00021c50: 6520 3d3d 2027 6175 746f 273a 0d0a 2020  e == 'auto':..  
-00021c60: 2020 2020 2020 2020 2020 7061 7261 6d73            params
-00021c70: 203d 207b 2774 6578 7427 3a20 7175 6572   = {'text': quer
-00021c80: 795f 7465 7874 7d0d 0a20 2020 2020 2020  y_text}..       
-00021c90: 2020 2020 2064 6574 6563 745f 7220 3d20       detect_r = 
-00021ca0: 7365 6c66 2e73 6573 7369 6f6e 2e67 6574  self.session.get
-00021cb0: 2873 656c 662e 6465 7465 6374 5f6c 616e  (self.detect_lan
-00021cc0: 6775 6167 655f 7572 6c2c 2070 6172 616d  guage_url, param
-00021cd0: 733d 7061 7261 6d73 2c20 6865 6164 6572  s=params, header
-00021ce0: 733d 7365 6c66 2e68 6f73 745f 6865 6164  s=self.host_head
-00021cf0: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
-00021d00: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
-00021d10: 6f78 6965 7329 0d0a 2020 2020 2020 2020  oxies)..        
-00021d20: 2020 2020 6672 6f6d 5f6c 616e 6775 6167      from_languag
-00021d30: 6520 3d20 6465 7465 6374 5f72 2e6a 736f  e = detect_r.jso
-00021d40: 6e28 295b 2764 6174 6127 5d20 6966 2064  n()['data'] if d
-00021d50: 6574 6563 745f 722e 7374 6174 7573 5f63  etect_r.status_c
-00021d60: 6f64 6520 3d3d 2032 3030 2061 6e64 2064  ode == 200 and d
-00021d70: 6574 6563 745f 722e 7465 7874 2e73 7472  etect_r.text.str
-00021d80: 6970 2829 2021 3d20 2727 2065 6c73 6520  ip() != '' else 
-00021d90: 7365 6c66 2e6f 7574 7075 745f 7a68 0d0a  self.output_zh..
-00021da0: 2020 2020 2020 2020 6672 6f6d 5f6c 616e          from_lan
-00021db0: 6775 6167 652c 2074 6f5f 6c61 6e67 7561  guage, to_langua
-00021dc0: 6765 203d 2073 656c 662e 6368 6563 6b5f  ge = self.check_
-00021dd0: 6c61 6e67 7561 6765 2866 726f 6d5f 6c61  language(from_la
-00021de0: 6e67 7561 6765 2c20 746f 5f6c 616e 6775  nguage, to_langu
-00021df0: 6167 652c 2073 656c 662e 6c61 6e67 7561  age, self.langua
-00021e00: 6765 5f6d 6170 2c20 6f75 7470 7574 5f7a  ge_map, output_z
-00021e10: 683d 7365 6c66 2e6f 7574 7075 745f 7a68  h=self.output_zh
-00021e20: 290d 0a0d 0a20 2020 2020 2020 2070 6179  )....        pay
-00021e30: 6c6f 6164 203d 207b 2766 726f 6d27 3a20  load = {'from': 
-00021e40: 6672 6f6d 5f6c 616e 6775 6167 652c 2027  from_language, '
-00021e50: 746f 273a 2074 6f5f 6c61 6e67 7561 6765  to': to_language
-00021e60: 2c20 2774 6578 7427 3a20 7175 6572 795f  , 'text': query_
-00021e70: 7465 7874 7d0d 0a20 2020 2020 2020 2072  text}..        r
-00021e80: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
-00021e90: 706f 7374 2873 656c 662e 6170 695f 7572  post(self.api_ur
-00021ea0: 6c2c 2068 6561 6465 7273 3d73 656c 662e  l, headers=self.
-00021eb0: 6170 695f 6865 6164 6572 732c 2064 6174  api_headers, dat
-00021ec0: 613d 7061 796c 6f61 642c 2074 696d 656f  a=payload, timeo
-00021ed0: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
-00021ee0: 6965 733d 7072 6f78 6965 7329 0d0a 2020  ies=proxies)..  
-00021ef0: 2020 2020 2020 722e 7261 6973 655f 666f        r.raise_fo
-00021f00: 725f 7374 6174 7573 2829 0d0a 2020 2020  r_status()..    
-00021f10: 2020 2020 6461 7461 203d 2072 2e6a 736f      data = r.jso
-00021f20: 6e28 290d 0a20 2020 2020 2020 2074 696d  n()..        tim
-00021f30: 652e 736c 6565 7028 736c 6565 705f 7365  e.sleep(sleep_se
-00021f40: 636f 6e64 7329 0d0a 2020 2020 2020 2020  conds)..        
-00021f50: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
-00021f60: 202b 3d20 310d 0a20 2020 2020 2020 2072   += 1..        r
-00021f70: 6574 7572 6e20 6461 7461 2069 6620 6973  eturn data if is
-00021f80: 5f64 6574 6169 6c5f 7265 7375 6c74 2065  _detail_result e
-00021f90: 6c73 6520 6a73 6f6e 2e6c 6f61 6473 2864  lse json.loads(d
-00021fa0: 6174 615b 2764 6174 6127 5d29 5b27 7472  ata['data'])['tr
-00021fb0: 616e 735f 7265 7375 6c74 275d 5b27 6473  ans_result']['ds
-00021fc0: 7427 5d0d 0a0d 0a0d 0a63 6c61 7373 2049  t']......class I
-00021fd0: 666c 7972 6563 2854 7365 293a 0d0a 2020  flyrec(Tse):..  
-00021fe0: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
-00021ff0: 656c 6629 3a0d 0a20 2020 2020 2020 2073  elf):..        s
-00022000: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
-00022010: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00022020: 6265 6769 6e5f 7469 6d65 203d 2074 696d  begin_time = tim
-00022030: 652e 7469 6d65 2829 0d0a 2020 2020 2020  e.time()..      
-00022040: 2020 7365 6c66 2e68 6f73 745f 7572 6c20    self.host_url 
-00022050: 3d20 2768 7474 7073 3a2f 2f66 616e 7969  = 'https://fanyi
-00022060: 2e69 666c 7972 6563 2e63 6f6d 270d 0a20  .iflyrec.com'.. 
-00022070: 2020 2020 2020 2073 656c 662e 6170 695f         self.api_
-00022080: 7572 6c20 3d20 2768 7474 7073 3a2f 2f66  url = 'https://f
-00022090: 616e 7969 2e69 666c 7972 6563 2e63 6f6d  anyi.iflyrec.com
-000220a0: 2f54 7261 6e73 6c61 7469 6f6e 5365 7276  /TranslationServ
-000220b0: 6963 652f 7631 2f74 6578 7441 7574 6f54  ice/v1/textAutoT
-000220c0: 7261 6e73 6c61 7469 6f6e 270d 0a20 2020  ranslation'..   
-000220d0: 2020 2020 2073 656c 662e 6465 7465 6374       self.detect
-000220e0: 5f6c 616e 675f 7572 6c20 3d20 2768 7474  _lang_url = 'htt
-000220f0: 7073 3a2f 2f66 616e 7969 2e69 666c 7972  ps://fanyi.iflyr
-00022100: 6563 2e63 6f6d 2f54 7261 6e73 6c61 7469  ec.com/Translati
-00022110: 6f6e 5365 7276 6963 652f 7631 2f6c 616e  onService/v1/lan
-00022120: 6775 6167 6544 6574 6563 7469 6f6e 270d  guageDetection'.
-00022130: 0a20 2020 2020 2020 2073 656c 662e 6c61  .        self.la
-00022140: 6e67 7561 6765 5f75 726c 203d 2027 6874  nguage_url = 'ht
-00022150: 7470 733a 2f2f 6661 6e79 692e 6966 6c79  tps://fanyi.ifly
-00022160: 7265 632e 636f 6d2f 5472 616e 736c 6174  rec.com/Translat
-00022170: 696f 6e53 6572 7669 6365 2f76 312f 7465  ionService/v1/te
-00022180: 7874 5472 616e 736c 6174 696f 6e2f 6c61  xtTranslation/la
-00022190: 6e67 7561 6765 7327 0d0a 2020 2020 2020  nguages'..      
-000221a0: 2020 7365 6c66 2e68 6f73 745f 6865 6164    self.host_head
-000221b0: 6572 7320 3d20 7365 6c66 2e67 6574 5f68  ers = self.get_h
-000221c0: 6561 6465 7273 2873 656c 662e 686f 7374  eaders(self.host
-000221d0: 5f75 726c 2c20 6966 5f61 7069 3d46 616c  _url, if_api=Fal
-000221e0: 7365 290d 0a20 2020 2020 2020 2073 656c  se)..        sel
-000221f0: 662e 6170 695f 6865 6164 6572 7320 3d20  f.api_headers = 
-00022200: 7365 6c66 2e67 6574 5f68 6561 6465 7273  self.get_headers
-00022210: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
-00022220: 6966 5f61 7069 3d54 7275 652c 2069 665f  if_api=True, if_
-00022230: 6a73 6f6e 5f66 6f72 5f61 7069 3d54 7275  json_for_api=Tru
-00022240: 6529 0d0a 2020 2020 2020 2020 7365 6c66  e)..        self
-00022250: 2e6c 616e 675f 696e 6465 7820 3d20 7b27  .lang_index = {'
-00022260: 7a68 273a 2031 2c20 2765 6e27 3a20 322c  zh': 1, 'en': 2,
-00022270: 2027 6a61 273a 2033 2c20 276b 6f27 3a20   'ja': 3, 'ko': 
-00022280: 342c 2027 7275 273a 2035 2c20 2766 7227  4, 'ru': 5, 'fr'
-00022290: 3a20 362c 2027 6573 273a 2037 2c20 2776  : 6, 'es': 7, 'v
-000222a0: 6927 3a20 382c 2027 7975 6527 3a20 392c  i': 8, 'yue': 9,
-000222b0: 2027 6172 273a 2031 322c 2027 6465 273a   'ar': 12, 'de':
-000222c0: 2031 332c 2027 6974 273a 2031 347d 0d0a   13, 'it': 14}..
-000222d0: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
-000222e0: 675f 696e 6465 785f 6d69 7272 6f72 203d  g_index_mirror =
-000222f0: 207b 763a 206b 2066 6f72 206b 2c20 7620   {v: k for k, v 
-00022300: 696e 2073 656c 662e 6c61 6e67 5f69 6e64  in self.lang_ind
-00022310: 6578 2e69 7465 6d73 2829 7d0d 0a20 2020  ex.items()}..   
-00022320: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-00022330: 6765 5f6d 6170 203d 204e 6f6e 650d 0a20  ge_map = None.. 
-00022340: 2020 2020 2020 2073 656c 662e 7365 7373         self.sess
-00022350: 696f 6e20 3d20 4e6f 6e65 0d0a 2020 2020  ion = None..    
-00022360: 2020 2020 7365 6c66 2e71 7565 7279 5f63      self.query_c
-00022370: 6f75 6e74 203d 2030 0d0a 2020 2020 2020  ount = 0..      
-00022380: 2020 7365 6c66 2e6f 7574 7075 745f 7a68    self.output_zh
-00022390: 203d 2027 7a68 270d 0a20 2020 2020 2020   = 'zh'..       
-000223a0: 2073 656c 662e 696e 7075 745f 6c69 6d69   self.input_limi
-000223b0: 7420 3d20 696e 7428 3265 3329 0d0a 2020  t = int(2e3)..  
-000223c0: 2020 2020 2020 7365 6c66 2e64 6566 6175        self.defau
-000223d0: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
-000223e0: 203d 2073 656c 662e 6f75 7470 7574 5f7a   = self.output_z
-000223f0: 680d 0a0d 0a20 2020 2040 5473 652e 6465  h....    @Tse.de
-00022400: 6275 675f 6c61 6e67 7561 6765 5f6d 6170  bug_language_map
-00022410: 0d0a 2020 2020 6465 6620 6765 745f 6c61  ..    def get_la
-00022420: 6e67 7561 6765 5f6d 6170 2873 656c 662c  nguage_map(self,
-00022430: 206c 616e 675f 696e 6465 783a 2064 6963   lang_index: dic
-00022440: 742c 202a 2a6b 7761 7267 733a 204c 616e  t, **kwargs: Lan
-00022450: 674d 6170 4b77 6172 6773 5479 7065 2920  gMapKwargsType) 
-00022460: 2d3e 2064 6963 743a 0d0a 2020 2020 2020  -> dict:..      
-00022470: 2020 6c61 6e67 5f6c 6973 7420 3d20 736f    lang_list = so
-00022480: 7274 6564 286c 6973 7428 6c61 6e67 5f69  rted(list(lang_i
-00022490: 6e64 6578 2e6b 6579 7328 2929 290d 0a20  ndex.keys())).. 
-000224a0: 2020 2020 2020 206c 616e 675f 6d61 7020         lang_map 
-000224b0: 3d20 7b6c 616e 673a 205b 277a 6827 5d20  = {lang: ['zh'] 
-000224c0: 666f 7220 6c61 6e67 2069 6e20 6c61 6e67  for lang in lang
-000224d0: 5f6c 6973 7420 6966 206c 616e 6720 213d  _list if lang !=
-000224e0: 2027 7a68 277d 0d0a 2020 2020 2020 2020   'zh'}..        
-000224f0: 7265 7475 726e 207b 2a2a 6c61 6e67 5f6d  return {**lang_m
-00022500: 6170 2c20 2a2a 7b27 7a68 273a 206c 616e  ap, **{'zh': lan
-00022510: 675f 6c69 7374 7d7d 0d0a 0d0a 2020 2020  g_list}}....    
-00022520: 4054 7365 2e74 696d 655f 7374 6174 0d0a  @Tse.time_stat..
-00022530: 2020 2020 4054 7365 2e63 6865 636b 5f71      @Tse.check_q
-00022540: 7565 7279 0d0a 2020 2020 6465 6620 6966  uery..    def if
-00022550: 6c79 7265 635f 6170 6928 7365 6c66 2c20  lyrec_api(self, 
-00022560: 7175 6572 795f 7465 7874 3a20 7374 722c  query_text: str,
-00022570: 2066 726f 6d5f 6c61 6e67 7561 6765 3a20   from_language: 
-00022580: 7374 7220 3d20 2761 7574 6f27 2c20 746f  str = 'auto', to
-00022590: 5f6c 616e 6775 6167 653a 2073 7472 203d  _language: str =
-000225a0: 2027 656e 272c 202a 2a6b 7761 7267 733a   'en', **kwargs:
-000225b0: 2041 7069 4b77 6172 6773 5479 7065 2920   ApiKwargsType) 
-000225c0: 2d3e 2055 6e69 6f6e 5b73 7472 2c20 6469  -> Union[str, di
-000225d0: 6374 5d3a 0d0a 2020 2020 2020 2020 2222  ct]:..        ""
-000225e0: 220d 0a20 2020 2020 2020 2068 7474 7073  "..        https
-000225f0: 3a2f 2f66 616e 7969 2e69 666c 7972 6563  ://fanyi.iflyrec
-00022600: 2e63 6f6d 0d0a 2020 2020 2020 2020 3a70  .com..        :p
-00022610: 6172 616d 2071 7565 7279 5f74 6578 743a  aram query_text:
-00022620: 2073 7472 2c20 6d75 7374 2e0d 0a20 2020   str, must...   
-00022630: 2020 2020 203a 7061 7261 6d20 6672 6f6d       :param from
-00022640: 5f6c 616e 6775 6167 653a 2073 7472 2c20  _language: str, 
-00022650: 6465 6661 756c 7420 2761 7574 6f27 2e0d  default 'auto'..
-00022660: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00022670: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
-00022680: 2c20 6465 6661 756c 7420 2765 6e27 2e0d  , default 'en'..
-00022690: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-000226a0: 2a2a 6b77 6172 6773 3a0d 0a20 2020 2020  **kwargs:..     
-000226b0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-000226c0: 6d20 7469 6d65 6f75 743a 2066 6c6f 6174  m timeout: float
-000226d0: 2c20 6465 6661 756c 7420 4e6f 6e65 2e0d  , default None..
-000226e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000226f0: 203a 7061 7261 6d20 7072 6f78 6965 733a   :param proxies:
-00022700: 2064 6963 742c 2064 6566 6175 6c74 204e   dict, default N
-00022710: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
-00022720: 2020 2020 2020 3a70 6172 616d 2073 6c65        :param sle
-00022730: 6570 5f73 6563 6f6e 6473 3a20 666c 6f61  ep_seconds: floa
-00022740: 742c 2064 6566 6175 6c74 2030 2e0d 0a20  t, default 0... 
-00022750: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-00022760: 7061 7261 6d20 6973 5f64 6574 6169 6c5f  param is_detail_
-00022770: 7265 7375 6c74 3a20 626f 6f6c 2c20 6465  result: bool, de
-00022780: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
-00022790: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-000227a0: 6172 616d 2069 665f 6967 6e6f 7265 5f6c  aram if_ignore_l
-000227b0: 696d 6974 5f6f 665f 6c65 6e67 7468 3a20  imit_of_length: 
-000227c0: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
-000227d0: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
-000227e0: 2020 2020 2020 3a70 6172 616d 206c 696d        :param lim
-000227f0: 6974 5f6f 665f 6c65 6e67 7468 3a20 696e  it_of_length: in
-00022800: 742c 2064 6566 6175 6c74 2032 3030 3030  t, default 20000
-00022810: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00022820: 2020 203a 7061 7261 6d20 6966 5f69 676e     :param if_ign
-00022830: 6f72 655f 656d 7074 795f 7175 6572 793a  ore_empty_query:
-00022840: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
-00022850: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
-00022860: 2020 2020 2020 203a 7061 7261 6d20 7570         :param up
-00022870: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-00022880: 6572 5f66 7265 713a 2069 6e74 2c20 6465  er_freq: int, de
-00022890: 6661 756c 7420 3130 3030 2e0d 0a20 2020  fault 1000...   
-000228a0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-000228b0: 7261 6d20 7570 6461 7465 5f73 6573 7369  ram update_sessi
-000228c0: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-000228d0: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
-000228e0: 2031 3530 302e 0d0a 2020 2020 2020 2020   1500...        
-000228f0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-00022900: 665f 7368 6f77 5f74 696d 655f 7374 6174  f_show_time_stat
-00022910: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-00022920: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
-00022930: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-00022940: 686f 775f 7469 6d65 5f73 7461 745f 7072  how_time_stat_pr
-00022950: 6563 6973 696f 6e3a 2069 6e74 2c20 6465  ecision: int, de
-00022960: 6661 756c 7420 322e 0d0a 2020 2020 2020  fault 2...      
-00022970: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00022980: 2069 665f 7072 696e 745f 7761 726e 696e   if_print_warnin
-00022990: 673a 2062 6f6f 6c2c 2064 6566 6175 6c74  g: bool, default
-000229a0: 2054 7275 652e 0d0a 2020 2020 2020 2020   True...        
-000229b0: 3a72 6574 7572 6e3a 2073 7472 206f 7220  :return: str or 
-000229c0: 6469 6374 0d0a 2020 2020 2020 2020 2222  dict..        ""
-000229d0: 220d 0a0d 0a20 2020 2020 2020 2074 696d  "....        tim
-000229e0: 656f 7574 203d 206b 7761 7267 732e 6765  eout = kwargs.ge
-000229f0: 7428 2774 696d 656f 7574 272c 204e 6f6e  t('timeout', Non
-00022a00: 6529 0d0a 2020 2020 2020 2020 7072 6f78  e)..        prox
-00022a10: 6965 7320 3d20 6b77 6172 6773 2e67 6574  ies = kwargs.get
-00022a20: 2827 7072 6f78 6965 7327 2c20 4e6f 6e65  ('proxies', None
-00022a30: 290d 0a20 2020 2020 2020 2073 6c65 6570  )..        sleep
-00022a40: 5f73 6563 6f6e 6473 203d 206b 7761 7267  _seconds = kwarg
-00022a50: 732e 6765 7428 2773 6c65 6570 5f73 6563  s.get('sleep_sec
-00022a60: 6f6e 6473 272c 2030 290d 0a20 2020 2020  onds', 0)..     
-00022a70: 2020 2069 665f 7072 696e 745f 7761 726e     if_print_warn
-00022a80: 696e 6720 3d20 6b77 6172 6773 2e67 6574  ing = kwargs.get
-00022a90: 2827 6966 5f70 7269 6e74 5f77 6172 6e69  ('if_print_warni
-00022aa0: 6e67 272c 2054 7275 6529 0d0a 2020 2020  ng', True)..    
-00022ab0: 2020 2020 6973 5f64 6574 6169 6c5f 7265      is_detail_re
-00022ac0: 7375 6c74 203d 206b 7761 7267 732e 6765  sult = kwargs.ge
-00022ad0: 7428 2769 735f 6465 7461 696c 5f72 6573  t('is_detail_res
-00022ae0: 756c 7427 2c20 4661 6c73 6529 0d0a 2020  ult', False)..  
-00022af0: 2020 2020 2020 7570 6461 7465 5f73 6573        update_ses
-00022b00: 7369 6f6e 5f61 6674 6572 5f66 7265 7120  sion_after_freq 
-00022b10: 3d20 6b77 6172 6773 2e67 6574 2827 7570  = kwargs.get('up
-00022b20: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-00022b30: 6572 5f66 7265 7127 2c20 7365 6c66 2e64  er_freq', self.d
-00022b40: 6566 6175 6c74 5f73 6573 7369 6f6e 5f66  efault_session_f
-00022b50: 7265 7129 0d0a 2020 2020 2020 2020 7570  req)..        up
-00022b60: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-00022b70: 6572 5f73 6563 6f6e 6473 203d 206b 7761  er_seconds = kwa
-00022b80: 7267 732e 6765 7428 2775 7064 6174 655f  rgs.get('update_
-00022b90: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
-00022ba0: 636f 6e64 7327 2c20 7365 6c66 2e64 6566  conds', self.def
-00022bb0: 6175 6c74 5f73 6573 7369 6f6e 5f73 6563  ault_session_sec
-00022bc0: 6f6e 6473 290d 0a20 2020 2020 2020 2073  onds)..        s
-00022bd0: 656c 662e 6368 6563 6b5f 696e 7075 745f  elf.check_input_
-00022be0: 6c69 6d69 7428 7175 6572 795f 7465 7874  limit(query_text
-00022bf0: 2c20 7365 6c66 2e69 6e70 7574 5f6c 696d  , self.input_lim
-00022c00: 6974 290d 0a0d 0a20 2020 2020 2020 206e  it)....        n
-00022c10: 6f74 5f75 7064 6174 655f 636f 6e64 5f66  ot_update_cond_f
-00022c20: 7265 7120 3d20 3120 6966 2073 656c 662e  req = 1 if self.
-00022c30: 7175 6572 795f 636f 756e 7420 2520 7570  query_count % up
-00022c40: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-00022c50: 6572 5f66 7265 7120 213d 2030 2065 6c73  er_freq != 0 els
-00022c60: 6520 300d 0a20 2020 2020 2020 206e 6f74  e 0..        not
-00022c70: 5f75 7064 6174 655f 636f 6e64 5f74 696d  _update_cond_tim
-00022c80: 6520 3d20 3120 6966 2074 696d 652e 7469  e = 1 if time.ti
-00022c90: 6d65 2829 202d 2073 656c 662e 6265 6769  me() - self.begi
-00022ca0: 6e5f 7469 6d65 203c 2075 7064 6174 655f  n_time < update_
-00022cb0: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
-00022cc0: 636f 6e64 7320 656c 7365 2030 0d0a 2020  conds else 0..  
-00022cd0: 2020 2020 2020 6966 206e 6f74 2028 7365        if not (se
-00022ce0: 6c66 2e73 6573 7369 6f6e 2061 6e64 2073  lf.session and s
-00022cf0: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
-00022d00: 2061 6e64 206e 6f74 5f75 7064 6174 655f   and not_update_
-00022d10: 636f 6e64 5f66 7265 7120 616e 6420 6e6f  cond_freq and no
-00022d20: 745f 7570 6461 7465 5f63 6f6e 645f 7469  t_update_cond_ti
-00022d30: 6d65 293a 0d0a 2020 2020 2020 2020 2020  me):..          
-00022d40: 2020 7365 6c66 2e62 6567 696e 5f74 696d    self.begin_tim
-00022d50: 6520 3d20 7469 6d65 2e74 696d 6528 290d  e = time.time().
-00022d60: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00022d70: 662e 7365 7373 696f 6e20 3d20 7265 7175  f.session = requ
-00022d80: 6573 7473 2e53 6573 7369 6f6e 2829 0d0a  ests.Session()..
-00022d90: 2020 2020 2020 2020 2020 2020 5f20 3d20              _ = 
-00022da0: 7365 6c66 2e73 6573 7369 6f6e 2e67 6574  self.session.get
-00022db0: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
-00022dc0: 6865 6164 6572 733d 7365 6c66 2e68 6f73  headers=self.hos
-00022dd0: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
-00022de0: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
-00022df0: 6965 733d 7072 6f78 6965 7329 0d0a 2020  ies=proxies)..  
-00022e00: 2020 2020 2020 2020 2020 6465 6275 675f            debug_
-00022e10: 6c61 6e67 5f6b 7761 7267 7320 3d20 7365  lang_kwargs = se
-00022e20: 6c66 2e64 6562 7567 5f6c 616e 675f 6b77  lf.debug_lang_kw
-00022e30: 6172 6773 2866 726f 6d5f 6c61 6e67 7561  args(from_langua
-00022e40: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
-00022e50: 2073 656c 662e 6465 6661 756c 745f 6672   self.default_fr
-00022e60: 6f6d 5f6c 616e 6775 6167 652c 2069 665f  om_language, if_
-00022e70: 7072 696e 745f 7761 726e 696e 6729 0d0a  print_warning)..
-00022e80: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00022e90: 2e6c 616e 6775 6167 655f 6d61 7020 3d20  .language_map = 
-00022ea0: 7365 6c66 2e67 6574 5f6c 616e 6775 6167  self.get_languag
-00022eb0: 655f 6d61 7028 7365 6c66 2e6c 616e 675f  e_map(self.lang_
-00022ec0: 696e 6465 782c 202a 2a64 6562 7567 5f6c  index, **debug_l
-00022ed0: 616e 675f 6b77 6172 6773 290d 0a0d 0a20  ang_kwargs).... 
-00022ee0: 2020 2020 2020 2069 6620 6672 6f6d 5f6c         if from_l
-00022ef0: 616e 6775 6167 6520 3d3d 2027 6175 746f  anguage == 'auto
-00022f00: 273a 0d0a 2020 2020 2020 2020 2020 2020  ':..            
-00022f10: 7061 7261 6d73 203d 207b 2774 273a 2073  params = {'t': s
-00022f20: 656c 662e 6765 745f 7469 6d65 7374 616d  elf.get_timestam
-00022f30: 7028 297d 0d0a 2020 2020 2020 2020 2020  p()}..          
-00022f40: 2020 666f 726d 203d 207b 276f 7269 6769    form = {'origi
-00022f50: 6e61 6c54 6578 7427 3a20 7175 6572 795f  nalText': query_
-00022f60: 7465 7874 7d0d 0a20 2020 2020 2020 2020  text}..         
-00022f70: 2020 2064 6574 6563 745f 7220 3d20 7365     detect_r = se
-00022f80: 6c66 2e73 6573 7369 6f6e 2e70 6f73 7428  lf.session.post(
-00022f90: 7365 6c66 2e64 6574 6563 745f 6c61 6e67  self.detect_lang
-00022fa0: 5f75 726c 2c20 7061 7261 6d73 3d70 6172  _url, params=par
-00022fb0: 616d 732c 206a 736f 6e3d 666f 726d 2c20  ams, json=form, 
-00022fc0: 6865 6164 6572 733d 7365 6c66 2e61 7069  headers=self.api
-00022fd0: 5f68 6561 6465 7273 2c20 7469 6d65 6f75  _headers, timeou
-00022fe0: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
-00022ff0: 6573 3d70 726f 7869 6573 290d 0a20 2020  es=proxies)..   
-00023000: 2020 2020 2020 2020 2066 726f 6d5f 6c61           from_la
-00023010: 6e67 7561 6765 5f69 6420 3d20 6465 7465  nguage_id = dete
-00023020: 6374 5f72 2e6a 736f 6e28 295b 2762 697a  ct_r.json()['biz
-00023030: 275d 5b30 5d5b 2764 6574 6563 7469 6f6e  '][0]['detection
-00023040: 4c61 6e67 7561 6765 275d 0d0a 2020 2020  Language']..    
-00023050: 2020 2020 2020 2020 6672 6f6d 5f6c 616e          from_lan
-00023060: 6775 6167 6520 3d20 7365 6c66 2e6c 616e  guage = self.lan
-00023070: 675f 696e 6465 785f 6d69 7272 6f72 5b66  g_index_mirror[f
-00023080: 726f 6d5f 6c61 6e67 7561 6765 5f69 645d  rom_language_id]
-00023090: 0d0a 2020 2020 2020 2020 6672 6f6d 5f6c  ..        from_l
-000230a0: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
-000230b0: 7561 6765 203d 2073 656c 662e 6368 6563  uage = self.chec
-000230c0: 6b5f 6c61 6e67 7561 6765 2866 726f 6d5f  k_language(from_
-000230d0: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
-000230e0: 6775 6167 652c 2073 656c 662e 6c61 6e67  guage, self.lang
-000230f0: 7561 6765 5f6d 6170 2c20 6f75 7470 7574  uage_map, output
-00023100: 5f7a 683d 7365 6c66 2e6f 7574 7075 745f  _zh=self.output_
-00023110: 7a68 290d 0a0d 0a20 2020 2020 2020 2061  zh)....        a
-00023120: 7069 5f70 6172 616d 7320 3d20 7b27 7427  pi_params = {'t'
-00023130: 3a20 7365 6c66 2e67 6574 5f74 696d 6573  : self.get_times
-00023140: 7461 6d70 2829 7d0d 0a20 2020 2020 2020  tamp()}..       
-00023150: 2061 7069 5f66 6f72 6d20 3d20 7b0d 0a20   api_form = {.. 
-00023160: 2020 2020 2020 2020 2020 2027 6672 6f6d             'from
-00023170: 273a 2073 656c 662e 6c61 6e67 5f69 6e64  ': self.lang_ind
-00023180: 6578 5b66 726f 6d5f 6c61 6e67 7561 6765  ex[from_language
-00023190: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-000231a0: 2774 6f27 3a20 7365 6c66 2e6c 616e 675f  'to': self.lang_
-000231b0: 696e 6465 785b 746f 5f6c 616e 6775 6167  index[to_languag
-000231c0: 655d 2c0d 0a20 2020 2020 2020 2020 2020  e],..           
-000231d0: 2027 6f70 656e 5465 726d 696e 6f6c 6f67   'openTerminolog
-000231e0: 7927 3a20 2766 616c 7365 272c 0d0a 2020  y': 'false',..  
-000231f0: 2020 2020 2020 2020 2020 2763 6f6e 7465            'conte
-00023200: 6e74 7327 3a20 5b7b 2774 6578 7427 3a20  nts': [{'text': 
-00023210: 742e 7374 7269 7028 292c 2027 6672 6f6e  t.strip(), 'fron
-00023220: 7442 6c61 6e6b 4c69 6e65 273a 2030 7d20  tBlankLine': 0} 
-00023230: 666f 7220 7420 696e 2071 7565 7279 5f74  for t in query_t
-00023240: 6578 742e 7370 6c69 7428 275c 6e27 2920  ext.split('\n') 
-00023250: 6966 2074 2e73 7472 6970 2829 2021 3d20  if t.strip() != 
-00023260: 2727 5d2c 0d0a 2020 2020 2020 2020 7d0d  ''],..        }.
-00023270: 0a20 2020 2020 2020 2072 203d 2073 656c  .        r = sel
-00023280: 662e 7365 7373 696f 6e2e 706f 7374 2873  f.session.post(s
-00023290: 656c 662e 6170 695f 7572 6c2c 2070 6172  elf.api_url, par
-000232a0: 616d 733d 6170 695f 7061 7261 6d73 2c20  ams=api_params, 
-000232b0: 6a73 6f6e 3d61 7069 5f66 6f72 6d2c 2068  json=api_form, h
-000232c0: 6561 6465 7273 3d73 656c 662e 6170 695f  eaders=self.api_
-000232d0: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
-000232e0: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
-000232f0: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
-00023300: 2020 2020 722e 7261 6973 655f 666f 725f      r.raise_for_
-00023310: 7374 6174 7573 2829 0d0a 2020 2020 2020  status()..      
-00023320: 2020 6461 7461 203d 2072 2e6a 736f 6e28    data = r.json(
-00023330: 290d 0a20 2020 2020 2020 2074 696d 652e  )..        time.
-00023340: 736c 6565 7028 736c 6565 705f 7365 636f  sleep(sleep_seco
-00023350: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
-00023360: 6c66 2e71 7565 7279 5f63 6f75 6e74 202b  lf.query_count +
-00023370: 3d20 310d 0a20 2020 2020 2020 2072 6574  = 1..        ret
-00023380: 7572 6e20 6461 7461 2069 6620 6973 5f64  urn data if is_d
-00023390: 6574 6169 6c5f 7265 7375 6c74 2065 6c73  etail_result els
-000233a0: 6520 275c 6e27 2e6a 6f69 6e28 5b69 7465  e '\n'.join([ite
-000233b0: 6d5b 2774 7261 6e73 6c61 7465 5265 7375  m['translateResu
-000233c0: 6c74 275d 2066 6f72 2069 7465 6d20 696e  lt'] for item in
-000233d0: 2064 6174 615b 2762 697a 275d 5d29 0d0a   data['biz']])..
-000233e0: 0d0a 0d0a 636c 6173 7320 5265 7665 7273  ....class Revers
-000233f0: 6f28 5473 6529 3a0d 0a20 2020 2064 6566  o(Tse):..    def
-00023400: 205f 5f69 6e69 745f 5f28 7365 6c66 293a   __init__(self):
-00023410: 0d0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
-00023420: 292e 5f5f 696e 6974 5f5f 2829 0d0a 2020  ).__init__()..  
-00023430: 2020 2020 2020 7365 6c66 2e62 6567 696e        self.begin
-00023440: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
-00023450: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
-00023460: 662e 686f 7374 5f75 726c 203d 2027 6874  f.host_url = 'ht
-00023470: 7470 733a 2f2f 7777 772e 7265 7665 7273  tps://www.revers
-00023480: 6f2e 6e65 742f 7465 7874 2d74 7261 6e73  o.net/text-trans
-00023490: 6c61 7469 6f6e 270d 0a20 2020 2020 2020  lation'..       
-000234a0: 2073 656c 662e 6170 695f 7572 6c20 3d20   self.api_url = 
-000234b0: 2768 7474 7073 3a2f 2f61 7069 2e72 6576  'https://api.rev
-000234c0: 6572 736f 2e6e 6574 2f74 7261 6e73 6c61  erso.net/transla
-000234d0: 7465 2f76 312f 7472 616e 736c 6174 696f  te/v1/translatio
-000234e0: 6e27 0d0a 2020 2020 2020 2020 7365 6c66  n'..        self
-000234f0: 2e6c 616e 6775 6167 655f 7572 6c20 3d20  .language_url = 
-00023500: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-00023510: 6c66 2e6c 616e 6775 6167 655f 7061 7474  lf.language_patt
-00023520: 6572 6e20 3d20 2768 7474 7073 3a2f 2f63  ern = 'https://c
-00023530: 646e 2e72 6576 6572 736f 2e6e 6574 2f74  dn.reverso.net/t
-00023540: 7261 6e73 2f76 285c 5c64 292e 285c 5c64  rans/v(\\d).(\\d
-00023550: 292e 285c 5c64 292f 6d61 696e 2e6a 7327  ).(\\d)/main.js'
-00023560: 0d0a 2020 2020 2020 2020 7365 6c66 2e68  ..        self.h
-00023570: 6f73 745f 6865 6164 6572 7320 3d20 7365  ost_headers = se
-00023580: 6c66 2e67 6574 5f68 6561 6465 7273 2873  lf.get_headers(s
-00023590: 656c 662e 686f 7374 5f75 726c 2c20 6966  elf.host_url, if
-000235a0: 5f61 7069 3d46 616c 7365 290d 0a20 2020  _api=False)..   
-000235b0: 2020 2020 2073 656c 662e 6170 695f 6865       self.api_he
-000235c0: 6164 6572 7320 3d20 7365 6c66 2e67 6574  aders = self.get
-000235d0: 5f68 6561 6465 7273 2873 656c 662e 686f  _headers(self.ho
-000235e0: 7374 5f75 726c 2c20 6966 5f61 7069 3d54  st_url, if_api=T
-000235f0: 7275 652c 2069 665f 6a73 6f6e 5f66 6f72  rue, if_json_for
-00023600: 5f61 7069 3d54 7275 6529 0d0a 2020 2020  _api=True)..    
-00023610: 2020 2020 7365 6c66 2e73 6573 7369 6f6e      self.session
-00023620: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
-00023630: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
-00023640: 6170 203d 204e 6f6e 650d 0a20 2020 2020  ap = None..     
-00023650: 2020 2073 656c 662e 6465 6372 7970 745f     self.decrypt_
-00023660: 6c61 6e67 7561 6765 5f6d 6170 203d 204e  language_map = N
-00023670: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
-00023680: 662e 7175 6572 795f 636f 756e 7420 3d20  f.query_count = 
-00023690: 300d 0a20 2020 2020 2020 2073 656c 662e  0..        self.
-000236a0: 6f75 7470 7574 5f7a 6820 3d20 277a 6827  output_zh = 'zh'
-000236b0: 2020 2320 2763 6869 272c 2062 6563 6175    # 'chi', becau
-000236c0: 7365 2074 6865 7265 2061 7265 2073 656c  se there are sel
-000236d0: 662e 6c61 6e67 7561 6765 5f74 7261 6e0d  f.language_tran.
-000236e0: 0a20 2020 2020 2020 2073 656c 662e 696e  .        self.in
-000236f0: 7075 745f 6c69 6d69 7420 3d20 696e 7428  put_limit = int(
-00023700: 3265 3329 0d0a 2020 2020 2020 2020 7365  2e3)..        se
-00023710: 6c66 2e64 6566 6175 6c74 5f66 726f 6d5f  lf.default_from_
-00023720: 6c61 6e67 7561 6765 203d 2073 656c 662e  language = self.
-00023730: 6f75 7470 7574 5f7a 680d 0a0d 0a20 2020  output_zh....   
-00023740: 2040 5473 652e 6465 6275 675f 6c61 6e67   @Tse.debug_lang
-00023750: 7561 6765 5f6d 6170 0d0a 2020 2020 6465  uage_map..    de
-00023760: 6620 6765 745f 6c61 6e67 7561 6765 5f6d  f get_language_m
-00023770: 6170 2873 656c 662c 206c 616e 675f 6874  ap(self, lang_ht
-00023780: 6d6c 3a20 7374 722c 202a 2a6b 7761 7267  ml: str, **kwarg
-00023790: 733a 204c 616e 674d 6170 4b77 6172 6773  s: LangMapKwargs
-000237a0: 5479 7065 2920 2d3e 2064 6963 743a 0d0a  Type) -> dict:..
-000237b0: 2020 2020 2020 2020 6c61 6e67 5f64 6963          lang_dic
-000237c0: 745f 7374 7220 3d20 7265 2e63 6f6d 7069  t_str = re.compi
-000237d0: 6c65 2827 3d7b 656e 673a 282e 2a3f 297d  le('={eng:(.*?)}
-000237e0: 2729 2e73 6561 7263 6828 6c61 6e67 5f68  ').search(lang_h
-000237f0: 746d 6c29 2e67 726f 7570 2829 5b31 3a5d  tml).group()[1:]
-00023800: 0d0a 2020 2020 2020 2020 6c61 6e67 5f64  ..        lang_d
-00023810: 6963 7420 3d20 6578 6563 6a73 2e65 7661  ict = execjs.eva
-00023820: 6c28 6c61 6e67 5f64 6963 745f 7374 7229  l(lang_dict_str)
-00023830: 0d0a 2020 2020 2020 2020 6c61 6e67 5f6c  ..        lang_l
-00023840: 6973 7420 3d20 736f 7274 6564 286c 6973  ist = sorted(lis
-00023850: 7428 6c61 6e67 5f64 6963 742e 7661 6c75  t(lang_dict.valu
-00023860: 6573 2829 2929 0d0a 2020 2020 2020 2020  es()))..        
-00023870: 7265 7475 726e 207b 7d2e 6672 6f6d 6b65  return {}.fromke
-00023880: 7973 286c 616e 675f 6c69 7374 2c20 6c61  ys(lang_list, la
-00023890: 6e67 5f6c 6973 7429 0d0a 0d0a 2020 2020  ng_list)....    
-000238a0: 6465 6620 6465 6372 7970 745f 6c61 6e67  def decrypt_lang
-000238b0: 5f6d 6170 2873 656c 662c 206c 616e 675f  _map(self, lang_
-000238c0: 6874 6d6c 3a20 7374 7229 202d 3e20 6469  html: str) -> di
-000238d0: 6374 3a0d 0a20 2020 2020 2020 206c 616e  ct:..        lan
-000238e0: 675f 6469 6374 5f73 7472 203d 2072 652e  g_dict_str = re.
-000238f0: 636f 6d70 696c 6528 273d 7b65 6e67 3a28  compile('={eng:(
-00023900: 2e2a 3f29 7d27 292e 7365 6172 6368 286c  .*?)}').search(l
-00023910: 616e 675f 6874 6d6c 292e 6772 6f75 7028  ang_html).group(
-00023920: 295b 313a 5d0d 0a20 2020 2020 2020 206c  )[1:]..        l
-00023930: 616e 675f 6469 6374 203d 2065 7865 636a  ang_dict = execj
-00023940: 732e 6576 616c 286c 616e 675f 6469 6374  s.eval(lang_dict
-00023950: 5f73 7472 290d 0a20 2020 2020 2020 2072  _str)..        r
-00023960: 6574 7572 6e20 7b6b 3a20 7620 666f 7220  eturn {k: v for 
-00023970: 762c 206b 2069 6e20 6c61 6e67 5f64 6963  v, k in lang_dic
-00023980: 742e 6974 656d 7328 297d 0d0a 0d0a 2020  t.items()}....  
-00023990: 2020 4054 7365 2e74 696d 655f 7374 6174    @Tse.time_stat
-000239a0: 0d0a 2020 2020 4054 7365 2e63 6865 636b  ..    @Tse.check
-000239b0: 5f71 7565 7279 0d0a 2020 2020 6465 6620  _query..    def 
-000239c0: 7265 7665 7273 6f5f 6170 6928 7365 6c66  reverso_api(self
-000239d0: 2c20 7175 6572 795f 7465 7874 3a20 7374  , query_text: st
-000239e0: 722c 2066 726f 6d5f 6c61 6e67 7561 6765  r, from_language
-000239f0: 3a20 7374 7220 3d20 2761 7574 6f27 2c20  : str = 'auto', 
-00023a00: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
-00023a10: 203d 2027 656e 272c 202a 2a6b 7761 7267   = 'en', **kwarg
-00023a20: 733a 2041 7069 4b77 6172 6773 5479 7065  s: ApiKwargsType
-00023a30: 2920 2d3e 2055 6e69 6f6e 5b73 7472 2c20  ) -> Union[str, 
-00023a40: 6469 6374 5d3a 0d0a 2020 2020 2020 2020  dict]:..        
-00023a50: 2222 220d 0a20 2020 2020 2020 2068 7474  """..        htt
-00023a60: 7073 3a2f 2f77 7777 2e72 6576 6572 736f  ps://www.reverso
-00023a70: 2e6e 6574 2f74 6578 742d 7472 616e 736c  .net/text-transl
-00023a80: 6174 696f 6e0d 0a20 2020 2020 2020 203a  ation..        :
-00023a90: 7061 7261 6d20 7175 6572 795f 7465 7874  param query_text
-00023aa0: 3a20 7374 722c 206d 7573 742e 0d0a 2020  : str, must...  
-00023ab0: 2020 2020 2020 3a70 6172 616d 2066 726f        :param fro
-00023ac0: 6d5f 6c61 6e67 7561 6765 3a20 7374 722c  m_language: str,
-00023ad0: 2064 6566 6175 6c74 2027 7a68 272c 2075   default 'zh', u
-00023ae0: 6e73 7570 706f 7274 6564 2027 6175 746f  nsupported 'auto
-00023af0: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
-00023b00: 616d 2074 6f5f 6c61 6e67 7561 6765 3a20  am to_language: 
-00023b10: 7374 722c 2064 6566 6175 6c74 2027 656e  str, default 'en
-00023b20: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
-00023b30: 616d 202a 2a6b 7761 7267 733a 0d0a 2020  am **kwargs:..  
-00023b40: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00023b50: 6172 616d 2074 696d 656f 7574 3a20 666c  aram timeout: fl
-00023b60: 6f61 742c 2064 6566 6175 6c74 204e 6f6e  oat, default Non
-00023b70: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-00023b80: 2020 2020 3a70 6172 616d 2070 726f 7869      :param proxi
-00023b90: 6573 3a20 6469 6374 2c20 6465 6661 756c  es: dict, defaul
-00023ba0: 7420 4e6f 6e65 2e0d 0a20 2020 2020 2020  t None...       
-00023bb0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00023bc0: 736c 6565 705f 7365 636f 6e64 733a 2066  sleep_seconds: f
-00023bd0: 6c6f 6174 2c20 6465 6661 756c 7420 302e  loat, default 0.
-00023be0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00023bf0: 2020 3a70 6172 616d 2069 735f 6465 7461    :param is_deta
-00023c00: 696c 5f72 6573 756c 743a 2062 6f6f 6c2c  il_result: bool,
-00023c10: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
-00023c20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023c30: 203a 7061 7261 6d20 6966 5f69 676e 6f72   :param if_ignor
-00023c40: 655f 6c69 6d69 745f 6f66 5f6c 656e 6774  e_limit_of_lengt
-00023c50: 683a 2062 6f6f 6c2c 2064 6566 6175 6c74  h: bool, default
-00023c60: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
-00023c70: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00023c80: 6c69 6d69 745f 6f66 5f6c 656e 6774 683a  limit_of_length:
-00023c90: 2069 6e74 2c20 6465 6661 756c 7420 3230   int, default 20
-00023ca0: 3030 302e 0d0a 2020 2020 2020 2020 2020  000...          
-00023cb0: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
-00023cc0: 6967 6e6f 7265 5f65 6d70 7479 5f71 7565  ignore_empty_que
-00023cd0: 7279 3a20 626f 6f6c 2c20 6465 6661 756c  ry: bool, defaul
-00023ce0: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-00023cf0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00023d00: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-00023d10: 6166 7465 725f 6672 6571 3a20 696e 742c  after_freq: int,
-00023d20: 2064 6566 6175 6c74 2031 3030 302e 0d0a   default 1000...
-00023d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023d40: 3a70 6172 616d 2075 7064 6174 655f 7365  :param update_se
-00023d50: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
-00023d60: 6e64 733a 2066 6c6f 6174 2c20 6465 6661  nds: float, defa
-00023d70: 756c 7420 3135 3030 2e0d 0a20 2020 2020  ult 1500...     
-00023d80: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00023d90: 6d20 6966 5f73 686f 775f 7469 6d65 5f73  m if_show_time_s
-00023da0: 7461 743a 2062 6f6f 6c2c 2064 6566 6175  tat: bool, defau
-00023db0: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
-00023dc0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00023dd0: 6d20 7368 6f77 5f74 696d 655f 7374 6174  m show_time_stat
-00023de0: 5f70 7265 6369 7369 6f6e 3a20 696e 742c  _precision: int,
-00023df0: 2064 6566 6175 6c74 2032 2e0d 0a20 2020   default 2...   
-00023e00: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00023e10: 7261 6d20 6966 5f70 7269 6e74 5f77 6172  ram if_print_war
-00023e20: 6e69 6e67 3a20 626f 6f6c 2c20 6465 6661  ning: bool, defa
-00023e30: 756c 7420 5472 7565 2e0d 0a20 2020 2020  ult True...     
-00023e40: 2020 203a 7265 7475 726e 3a20 7374 7220     :return: str 
-00023e50: 6f72 2064 6963 740d 0a20 2020 2020 2020  or dict..       
-00023e60: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
-00023e70: 7469 6d65 6f75 7420 3d20 6b77 6172 6773  timeout = kwargs
-00023e80: 2e67 6574 2827 7469 6d65 6f75 7427 2c20  .get('timeout', 
-00023e90: 4e6f 6e65 290d 0a20 2020 2020 2020 2070  None)..        p
-00023ea0: 726f 7869 6573 203d 206b 7761 7267 732e  roxies = kwargs.
-00023eb0: 6765 7428 2770 726f 7869 6573 272c 204e  get('proxies', N
-00023ec0: 6f6e 6529 0d0a 2020 2020 2020 2020 736c  one)..        sl
-00023ed0: 6565 705f 7365 636f 6e64 7320 3d20 6b77  eep_seconds = kw
-00023ee0: 6172 6773 2e67 6574 2827 736c 6565 705f  args.get('sleep_
-00023ef0: 7365 636f 6e64 7327 2c20 3029 0d0a 2020  seconds', 0)..  
-00023f00: 2020 2020 2020 6966 5f70 7269 6e74 5f77        if_print_w
-00023f10: 6172 6e69 6e67 203d 206b 7761 7267 732e  arning = kwargs.
-00023f20: 6765 7428 2769 665f 7072 696e 745f 7761  get('if_print_wa
-00023f30: 726e 696e 6727 2c20 5472 7565 290d 0a20  rning', True).. 
-00023f40: 2020 2020 2020 2069 735f 6465 7461 696c         is_detail
-00023f50: 5f72 6573 756c 7420 3d20 6b77 6172 6773  _result = kwargs
-00023f60: 2e67 6574 2827 6973 5f64 6574 6169 6c5f  .get('is_detail_
-00023f70: 7265 7375 6c74 272c 2046 616c 7365 290d  result', False).
-00023f80: 0a20 2020 2020 2020 2075 7064 6174 655f  .        update_
-00023f90: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
-00023fa0: 6571 203d 206b 7761 7267 732e 6765 7428  eq = kwargs.get(
-00023fb0: 2775 7064 6174 655f 7365 7373 696f 6e5f  'update_session_
-00023fc0: 6166 7465 725f 6672 6571 272c 2073 656c  after_freq', sel
-00023fd0: 662e 6465 6661 756c 745f 7365 7373 696f  f.default_sessio
-00023fe0: 6e5f 6672 6571 290d 0a20 2020 2020 2020  n_freq)..       
-00023ff0: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-00024000: 6166 7465 725f 7365 636f 6e64 7320 3d20  after_seconds = 
-00024010: 6b77 6172 6773 2e67 6574 2827 7570 6461  kwargs.get('upda
-00024020: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
-00024030: 5f73 6563 6f6e 6473 272c 2073 656c 662e  _seconds', self.
-00024040: 6465 6661 756c 745f 7365 7373 696f 6e5f  default_session_
-00024050: 7365 636f 6e64 7329 0d0a 2020 2020 2020  seconds)..      
-00024060: 2020 7365 6c66 2e63 6865 636b 5f69 6e70    self.check_inp
-00024070: 7574 5f6c 696d 6974 2871 7565 7279 5f74  ut_limit(query_t
-00024080: 6578 742c 2073 656c 662e 696e 7075 745f  ext, self.input_
-00024090: 6c69 6d69 7429 0d0a 0d0a 2020 2020 2020  limit)....      
-000240a0: 2020 6e6f 745f 7570 6461 7465 5f63 6f6e    not_update_con
-000240b0: 645f 6672 6571 203d 2031 2069 6620 7365  d_freq = 1 if se
-000240c0: 6c66 2e71 7565 7279 5f63 6f75 6e74 2025  lf.query_count %
-000240d0: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-000240e0: 6166 7465 725f 6672 6571 2021 3d20 3020  after_freq != 0 
-000240f0: 656c 7365 2030 0d0a 2020 2020 2020 2020  else 0..        
-00024100: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
-00024110: 7469 6d65 203d 2031 2069 6620 7469 6d65  time = 1 if time
-00024120: 2e74 696d 6528 2920 2d20 7365 6c66 2e62  .time() - self.b
-00024130: 6567 696e 5f74 696d 6520 3c20 7570 6461  egin_time < upda
-00024140: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
-00024150: 5f73 6563 6f6e 6473 2065 6c73 6520 300d  _seconds else 0.
-00024160: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-00024170: 2873 656c 662e 7365 7373 696f 6e20 616e  (self.session an
-00024180: 6420 7365 6c66 2e6c 616e 6775 6167 655f  d self.language_
-00024190: 6d61 7020 616e 6420 6e6f 745f 7570 6461  map and not_upda
-000241a0: 7465 5f63 6f6e 645f 6672 6571 2061 6e64  te_cond_freq and
-000241b0: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
-000241c0: 5f74 696d 6520 616e 6420 7365 6c66 2e64  _time and self.d
-000241d0: 6563 7279 7074 5f6c 616e 6775 6167 655f  ecrypt_language_
-000241e0: 6d61 7029 3a0d 0a20 2020 2020 2020 2020  map):..         
-000241f0: 2020 2073 656c 662e 6265 6769 6e5f 7469     self.begin_ti
-00024200: 6d65 203d 2074 696d 652e 7469 6d65 2829  me = time.time()
-00024210: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00024220: 6c66 2e73 6573 7369 6f6e 203d 2072 6571  lf.session = req
-00024230: 7565 7374 732e 5365 7373 696f 6e28 290d  uests.Session().
-00024240: 0a20 2020 2020 2020 2020 2020 2068 6f73  .            hos
-00024250: 745f 6874 6d6c 203d 2073 656c 662e 7365  t_html = self.se
-00024260: 7373 696f 6e2e 6765 7428 7365 6c66 2e68  ssion.get(self.h
-00024270: 6f73 745f 7572 6c2c 2068 6561 6465 7273  ost_url, headers
-00024280: 3d73 656c 662e 686f 7374 5f68 6561 6465  =self.host_heade
-00024290: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
-000242a0: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
-000242b0: 7869 6573 292e 7465 7874 0d0a 2020 2020  xies).text..    
-000242c0: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
-000242d0: 6775 6167 655f 7572 6c20 3d20 7265 2e63  guage_url = re.c
-000242e0: 6f6d 7069 6c65 2873 656c 662e 6c61 6e67  ompile(self.lang
-000242f0: 7561 6765 5f70 6174 7465 726e 292e 7365  uage_pattern).se
-00024300: 6172 6368 2868 6f73 745f 6874 6d6c 292e  arch(host_html).
-00024310: 6772 6f75 7028 290d 0a20 2020 2020 2020  group()..       
-00024320: 2020 2020 206c 616e 675f 6874 6d6c 203d       lang_html =
-00024330: 2073 656c 662e 7365 7373 696f 6e2e 6765   self.session.ge
-00024340: 7428 7365 6c66 2e6c 616e 6775 6167 655f  t(self.language_
-00024350: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
-00024360: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
-00024370: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
-00024380: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
-00024390: 292e 7465 7874 0d0a 2020 2020 2020 2020  ).text..        
-000243a0: 2020 2020 7365 6c66 2e64 6563 7279 7074      self.decrypt
-000243b0: 5f6c 616e 6775 6167 655f 6d61 7020 3d20  _language_map = 
-000243c0: 7365 6c66 2e64 6563 7279 7074 5f6c 616e  self.decrypt_lan
-000243d0: 675f 6d61 7028 6c61 6e67 5f68 746d 6c29  g_map(lang_html)
-000243e0: 0d0a 2020 2020 2020 2020 2020 2020 6465  ..            de
-000243f0: 6275 675f 6c61 6e67 5f6b 7761 7267 7320  bug_lang_kwargs 
-00024400: 3d20 7365 6c66 2e64 6562 7567 5f6c 616e  = self.debug_lan
-00024410: 675f 6b77 6172 6773 2866 726f 6d5f 6c61  g_kwargs(from_la
-00024420: 6e67 7561 6765 2c20 746f 5f6c 616e 6775  nguage, to_langu
-00024430: 6167 652c 2073 656c 662e 6465 6661 756c  age, self.defaul
-00024440: 745f 6672 6f6d 5f6c 616e 6775 6167 652c  t_from_language,
-00024450: 2069 665f 7072 696e 745f 7761 726e 696e   if_print_warnin
-00024460: 6729 0d0a 2020 2020 2020 2020 2020 2020  g)..            
-00024470: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
-00024480: 7020 3d20 7365 6c66 2e67 6574 5f6c 616e  p = self.get_lan
-00024490: 6775 6167 655f 6d61 7028 6c61 6e67 5f68  guage_map(lang_h
-000244a0: 746d 6c2c 202a 2a64 6562 7567 5f6c 616e  tml, **debug_lan
-000244b0: 675f 6b77 6172 6773 290d 0a0d 0a20 2020  g_kwargs)....   
-000244c0: 2020 2020 2069 6620 6672 6f6d 5f6c 616e       if from_lan
-000244d0: 6775 6167 6520 3d3d 2027 6175 746f 273a  guage == 'auto':
-000244e0: 0d0a 2020 2020 2020 2020 2020 2020 6672  ..            fr
-000244f0: 6f6d 5f6c 616e 6775 6167 6520 3d20 7365  om_language = se
-00024500: 6c66 2e77 6172 6e69 6e67 5f61 7574 6f5f  lf.warning_auto_
-00024510: 6c61 6e67 2827 7265 7665 7273 6f27 2c20  lang('reverso', 
-00024520: 7365 6c66 2e64 6566 6175 6c74 5f66 726f  self.default_fro
-00024530: 6d5f 6c61 6e67 7561 6765 2c20 6966 5f70  m_language, if_p
-00024540: 7269 6e74 5f77 6172 6e69 6e67 290d 0a20  rint_warning).. 
-00024550: 2020 2020 2020 2066 726f 6d5f 6c61 6e67         from_lang
-00024560: 7561 6765 2c20 746f 5f6c 616e 6775 6167  uage, to_languag
-00024570: 6520 3d20 7365 6c66 2e63 6865 636b 5f6c  e = self.check_l
-00024580: 616e 6775 6167 6528 6672 6f6d 5f6c 616e  anguage(from_lan
-00024590: 6775 6167 652c 2074 6f5f 6c61 6e67 7561  guage, to_langua
-000245a0: 6765 2c20 7365 6c66 2e6c 616e 6775 6167  ge, self.languag
-000245b0: 655f 6d61 702c 206f 7574 7075 745f 7a68  e_map, output_zh
-000245c0: 3d73 656c 662e 6f75 7470 7574 5f7a 6829  =self.output_zh)
-000245d0: 0d0a 2020 2020 2020 2020 6672 6f6d 5f6c  ..        from_l
-000245e0: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
-000245f0: 7561 6765 203d 2073 656c 662e 6465 6372  uage = self.decr
-00024600: 7970 745f 6c61 6e67 7561 6765 5f6d 6170  ypt_language_map
-00024610: 5b66 726f 6d5f 6c61 6e67 7561 6765 5d2c  [from_language],
-00024620: 2073 656c 662e 6465 6372 7970 745f 6c61   self.decrypt_la
-00024630: 6e67 7561 6765 5f6d 6170 5b74 6f5f 6c61  nguage_map[to_la
-00024640: 6e67 7561 6765 5d0d 0a0d 0a20 2020 2020  nguage]....     
-00024650: 2020 2070 6179 6c6f 6164 203d 207b 0d0a     payload = {..
-00024660: 2020 2020 2020 2020 2020 2020 2766 6f72              'for
-00024670: 6d61 7427 3a20 2774 6578 7427 2c0d 0a20  mat': 'text',.. 
-00024680: 2020 2020 2020 2020 2020 2027 6672 6f6d             'from
-00024690: 273a 2066 726f 6d5f 6c61 6e67 7561 6765  ': from_language
-000246a0: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-000246b0: 746f 273a 2074 6f5f 6c61 6e67 7561 6765  to': to_language
-000246c0: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-000246d0: 696e 7075 7427 3a20 7175 6572 795f 7465  input': query_te
-000246e0: 7874 2c0d 0a20 2020 2020 2020 2020 2020  xt,..           
-000246f0: 2027 6f70 7469 6f6e 7327 3a20 7b0d 0a20   'options': {.. 
-00024700: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00024710: 636f 6e74 6578 7452 6573 756c 7473 273a  contextResults':
-00024720: 2027 7472 7565 272c 0d0a 2020 2020 2020   'true',..      
-00024730: 2020 2020 2020 2020 2020 276c 616e 6775            'langu
-00024740: 6167 6544 6574 6563 7469 6f6e 273a 2027  ageDetection': '
-00024750: 7472 7565 272c 0d0a 2020 2020 2020 2020  true',..        
-00024760: 2020 2020 2020 2020 2773 656e 7465 6e63          'sentenc
-00024770: 6553 706c 6974 7465 7227 3a20 2774 7275  eSplitter': 'tru
-00024780: 6527 2c0d 0a20 2020 2020 2020 2020 2020  e',..           
-00024790: 2020 2020 2027 6f72 6967 696e 273a 2027       'origin': '
-000247a0: 7472 616e 736c 6174 696f 6e2e 7765 6227  translation.web'
-000247b0: 2c0d 0a20 2020 2020 2020 2020 2020 207d  ,..            }
-000247c0: 0d0a 2020 2020 2020 2020 7d0d 0a20 2020  ..        }..   
-000247d0: 2020 2020 2072 203d 2073 656c 662e 7365       r = self.se
-000247e0: 7373 696f 6e2e 706f 7374 2873 656c 662e  ssion.post(self.
-000247f0: 6170 695f 7572 6c2c 206a 736f 6e3d 7061  api_url, json=pa
-00024800: 796c 6f61 642c 2068 6561 6465 7273 3d73  yload, headers=s
-00024810: 656c 662e 6170 695f 6865 6164 6572 732c  elf.api_headers,
-00024820: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
-00024830: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
-00024840: 7329 0d0a 2020 2020 2020 2020 722e 7261  s)..        r.ra
-00024850: 6973 655f 666f 725f 7374 6174 7573 2829  ise_for_status()
-00024860: 0d0a 2020 2020 2020 2020 6461 7461 203d  ..        data =
-00024870: 2072 2e6a 736f 6e28 290d 0a20 2020 2020   r.json()..     
-00024880: 2020 2074 696d 652e 736c 6565 7028 736c     time.sleep(sl
-00024890: 6565 705f 7365 636f 6e64 7329 0d0a 2020  eep_seconds)..  
-000248a0: 2020 2020 2020 7365 6c66 2e71 7565 7279        self.query
-000248b0: 5f63 6f75 6e74 202b 3d20 310d 0a20 2020  _count += 1..   
-000248c0: 2020 2020 2072 6574 7572 6e20 6461 7461       return data
-000248d0: 2069 6620 6973 5f64 6574 6169 6c5f 7265   if is_detail_re
-000248e0: 7375 6c74 2065 6c73 6520 2727 2e6a 6f69  sult else ''.joi
-000248f0: 6e28 6461 7461 5b27 7472 616e 736c 6174  n(data['translat
-00024900: 696f 6e27 5d29 0d0a 0d0a 0d0a 636c 6173  ion'])......clas
-00024910: 7320 4974 7261 6e73 6c61 7465 2854 7365  s Itranslate(Tse
-00024920: 293a 0d0a 2020 2020 6465 6620 5f5f 696e  ):..    def __in
-00024930: 6974 5f5f 2873 656c 6629 3a0d 0a20 2020  it__(self):..   
-00024940: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
-00024950: 6e69 745f 5f28 290d 0a20 2020 2020 2020  nit__()..       
-00024960: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
-00024970: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
-00024980: 2020 2020 2020 2020 7365 6c66 2e68 6f73          self.hos
-00024990: 745f 7572 6c20 3d20 2768 7474 7073 3a2f  t_url = 'https:/
-000249a0: 2f69 7472 616e 736c 6174 652e 636f 6d2f  /itranslate.com/
+0001f670: 6e2e 636e 2f5f 6e65 7874 2f73 7461 7469  n.cn/_next/stati
+0001f680: 632f 3462 7a4c 5347 4357 554e 6c36 3758  c/4bzLSGCWUNl67X
+0001f690: 616c 2d41 6649 6c2f 7061 6765 732f 7472  al-AfIl/pages/tr
+0001f6a0: 616e 736c 6174 652e 6a73 270d 0a20 2020  anslate.js'..   
+0001f6b0: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
+0001f6c0: 6765 5f75 726c 5f70 6174 7465 726e 203d  ge_url_pattern =
+0001f6d0: 2027 2f5f 6e65 7874 2f73 7461 7469 632f   '/_next/static/
+0001f6e0: 285c 772b 285b 2d5d 3f5c 772b 2929 2f70  (\w+([-]?\w+))/p
+0001f6f0: 6167 6573 2f74 7261 6e73 6c61 7465 2e6a  ages/translate.j
+0001f700: 7327 0d0a 2020 2020 2020 2020 7365 6c66  s'..        self
+0001f710: 2e6c 616e 6775 6167 655f 7572 6c20 3d20  .language_url = 
+0001f720: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
+0001f730: 6c66 2e63 6f6f 6b69 6573 5f75 726c 203d  lf.cookies_url =
+0001f740: 2027 6874 7470 733a 2f2f 7373 6f2e 7866   'https://sso.xf
+0001f750: 7975 6e2e 636e 2f2f 5353 4f53 6572 7669  yun.cn//SSOServi
+0001f760: 6365 2f6c 6f67 696e 2f67 6574 636f 6f6b  ce/login/getcook
+0001f770: 6965 7327 0d0a 2020 2020 2020 2020 7365  ies'..        se
+0001f780: 6c66 2e69 6e66 6f5f 7572 6c20 3d20 2768  lf.info_url = 'h
+0001f790: 7474 7073 3a2f 2f73 6161 732e 7866 7975  ttps://saas.xfyu
+0001f7a0: 6e2e 636e 2f61 692d 6170 706c 6963 6174  n.cn/ai-applicat
+0001f7b0: 696f 6e2f 7573 6572 2f69 6e66 6f27 0d0a  ion/user/info'..
+0001f7c0: 2020 2020 2020 2020 7365 6c66 2e68 6f73          self.hos
+0001f7d0: 745f 6865 6164 6572 7320 3d20 7365 6c66  t_headers = self
+0001f7e0: 2e67 6574 5f68 6561 6465 7273 2873 656c  .get_headers(sel
+0001f7f0: 662e 686f 7374 5f75 726c 2c20 6966 5f61  f.host_url, if_a
+0001f800: 7069 3d46 616c 7365 290d 0a20 2020 2020  pi=False)..     
+0001f810: 2020 2073 656c 662e 6170 695f 6865 6164     self.api_head
+0001f820: 6572 7320 3d20 7365 6c66 2e67 6574 5f68  ers = self.get_h
+0001f830: 6561 6465 7273 2873 656c 662e 686f 7374  eaders(self.host
+0001f840: 5f75 726c 2c20 6966 5f61 7069 3d54 7275  _url, if_api=Tru
+0001f850: 6529 0d0a 2020 2020 2020 2020 7365 6c66  e)..        self
+0001f860: 2e6c 616e 6775 6167 655f 6d61 7020 3d20  .language_map = 
+0001f870: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
+0001f880: 6c66 2e73 6573 7369 6f6e 203d 204e 6f6e  lf.session = Non
+0001f890: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
+0001f8a0: 7175 6572 795f 636f 756e 7420 3d20 300d  query_count = 0.
+0001f8b0: 0a20 2020 2020 2020 2073 656c 662e 6f75  .        self.ou
+0001f8c0: 7470 7574 5f7a 6820 3d20 2763 6e27 0d0a  tput_zh = 'cn'..
+0001f8d0: 2020 2020 2020 2020 7365 6c66 2e69 6e70          self.inp
+0001f8e0: 7574 5f6c 696d 6974 203d 2069 6e74 2832  ut_limit = int(2
+0001f8f0: 6533 290d 0a20 2020 2020 2020 2073 656c  e3)..        sel
+0001f900: 662e 6465 6661 756c 745f 6672 6f6d 5f6c  f.default_from_l
+0001f910: 616e 6775 6167 6520 3d20 7365 6c66 2e6f  anguage = self.o
+0001f920: 7574 7075 745f 7a68 0d0a 0d0a 2020 2020  utput_zh....    
+0001f930: 4054 7365 2e64 6562 7567 5f6c 616e 6775  @Tse.debug_langu
+0001f940: 6167 655f 6d61 700d 0a20 2020 2064 6566  age_map..    def
+0001f950: 2067 6574 5f6c 616e 6775 6167 655f 6d61   get_language_ma
+0001f960: 7028 7365 6c66 2c20 686f 7374 5f68 746d  p(self, host_htm
+0001f970: 6c3a 2073 7472 2c20 7373 3a20 5365 7373  l: str, ss: Sess
+0001f980: 696f 6e54 7970 652c 2068 6561 6465 7273  ionType, headers
+0001f990: 3a20 6469 6374 2c20 7469 6d65 6f75 743a  : dict, timeout:
+0001f9a0: 204f 7074 696f 6e61 6c5b 666c 6f61 745d   Optional[float]
+0001f9b0: 2c20 7072 6f78 6965 733a 204f 7074 696f  , proxies: Optio
+0001f9c0: 6e61 6c5b 6469 6374 5d2c 202a 2a6b 7761  nal[dict], **kwa
+0001f9d0: 7267 733a 204c 616e 674d 6170 4b77 6172  rgs: LangMapKwar
+0001f9e0: 6773 5479 7065 2920 2d3e 2064 6963 743a  gsType) -> dict:
+0001f9f0: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
+0001fa00: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0001fa10: 6f74 2073 656c 662e 6c61 6e67 7561 6765  ot self.language
+0001fa20: 5f75 726c 3a0d 0a20 2020 2020 2020 2020  _url:..         
+0001fa30: 2020 2020 2020 2075 726c 5f70 6174 6820         url_path 
+0001fa40: 3d20 7265 2e63 6f6d 7069 6c65 2873 656c  = re.compile(sel
+0001fa50: 662e 6c61 6e67 7561 6765 5f75 726c 5f70  f.language_url_p
+0001fa60: 6174 7465 726e 292e 7365 6172 6368 2868  attern).search(h
+0001fa70: 6f73 745f 6874 6d6c 292e 6772 6f75 7028  ost_html).group(
+0001fa80: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0001fa90: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
+0001faa0: 5f75 726c 203d 2066 277b 7365 6c66 2e68  _url = f'{self.h
+0001fab0: 6f73 745f 7572 6c5b 3a32 315d 7d7b 7572  ost_url[:21]}{ur
+0001fac0: 6c5f 7061 7468 7d27 0d0a 2020 2020 2020  l_path}'..      
+0001fad0: 2020 2020 2020 7220 3d20 7373 2e67 6574        r = ss.get
+0001fae0: 2873 656c 662e 6c61 6e67 7561 6765 5f75  (self.language_u
+0001faf0: 726c 2c20 6865 6164 6572 733d 6865 6164  rl, headers=head
+0001fb00: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
+0001fb10: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
+0001fb20: 6f78 6965 7329 0d0a 2020 2020 2020 2020  oxies)..        
+0001fb30: 6578 6365 7074 3a0d 0a20 2020 2020 2020  except:..       
+0001fb40: 2020 2020 2072 203d 2073 732e 6765 7428       r = ss.get(
+0001fb50: 7365 6c66 2e6c 616e 6775 6167 655f 6f6c  self.language_ol
+0001fb60: 645f 7572 6c2c 2068 6561 6465 7273 3d68  d_url, headers=h
+0001fb70: 6561 6465 7273 2c20 7469 6d65 6f75 743d  eaders, timeout=
+0001fb80: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
+0001fb90: 3d70 726f 7869 6573 290d 0a0d 0a20 2020  =proxies)....   
+0001fba0: 2020 2020 206a 735f 6874 6d6c 203d 2072       js_html = r
+0001fbb0: 2e74 6578 740d 0a20 2020 2020 2020 206c  .text..        l
+0001fbc0: 616e 675f 7374 7220 3d20 7265 2e63 6f6d  ang_str = re.com
+0001fbd0: 7069 6c65 2827 6c61 6e67 7561 6765 4c69  pile('languageLi
+0001fbe0: 7374 3a5c 5c28 653d 7b28 2e2a 3f29 7d27  st:\\(e={(.*?)}'
+0001fbf0: 292e 7365 6172 6368 286a 735f 6874 6d6c  ).search(js_html
+0001fc00: 292e 6772 6f75 7028 295b 3136 3a5d 0d0a  ).group()[16:]..
+0001fc10: 2020 2020 2020 2020 6c61 6e67 5f6c 6973          lang_lis
+0001fc20: 7420 3d20 736f 7274 6564 286c 6973 7428  t = sorted(list(
+0001fc30: 6578 6563 6a73 2e65 7661 6c28 6c61 6e67  execjs.eval(lang
+0001fc40: 5f73 7472 292e 6b65 7973 2829 2929 0d0a  _str).keys()))..
+0001fc50: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+0001fc60: 7d2e 6672 6f6d 6b65 7973 286c 616e 675f  }.fromkeys(lang_
+0001fc70: 6c69 7374 2c20 6c61 6e67 5f6c 6973 7429  list, lang_list)
+0001fc80: 0d0a 0d0a 2020 2020 4054 7365 2e75 6e63  ....    @Tse.unc
+0001fc90: 6572 7469 6669 6564 0d0a 2020 2020 4054  ertified..    @T
+0001fca0: 7365 2e74 696d 655f 7374 6174 0d0a 2020  se.time_stat..  
+0001fcb0: 2020 4054 7365 2e63 6865 636b 5f71 7565    @Tse.check_que
+0001fcc0: 7279 0d0a 2020 2020 6465 6620 6966 6c79  ry..    def ifly
+0001fcd0: 7465 6b5f 6170 6928 7365 6c66 2c20 7175  tek_api(self, qu
+0001fce0: 6572 795f 7465 7874 3a20 7374 722c 2066  ery_text: str, f
+0001fcf0: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
+0001fd00: 7220 3d20 2761 7574 6f27 2c20 746f 5f6c  r = 'auto', to_l
+0001fd10: 616e 6775 6167 653a 2073 7472 203d 2027  anguage: str = '
+0001fd20: 656e 272c 202a 2a6b 7761 7267 733a 2041  en', **kwargs: A
+0001fd30: 7069 4b77 6172 6773 5479 7065 2920 2d3e  piKwargsType) ->
+0001fd40: 2055 6e69 6f6e 5b73 7472 2c20 6469 6374   Union[str, dict
+0001fd50: 5d3a 0d0a 2020 2020 2020 2020 2222 220d  ]:..        """.
+0001fd60: 0a20 2020 2020 2020 2068 7474 7073 3a2f  .        https:/
+0001fd70: 2f73 6161 732e 7866 7975 6e2e 636e 2f74  /saas.xfyun.cn/t
+0001fd80: 7261 6e73 6c61 7465 3f74 6162 4b65 793d  ranslate?tabKey=
+0001fd90: 7465 7874 0d0a 2020 2020 2020 2020 3a70  text..        :p
+0001fda0: 6172 616d 2071 7565 7279 5f74 6578 743a  aram query_text:
+0001fdb0: 2073 7472 2c20 6d75 7374 2e0d 0a20 2020   str, must...   
+0001fdc0: 2020 2020 203a 7061 7261 6d20 6672 6f6d       :param from
+0001fdd0: 5f6c 616e 6775 6167 653a 2073 7472 2c20  _language: str, 
+0001fde0: 6465 6661 756c 7420 277a 6827 2c20 756e  default 'zh', un
+0001fdf0: 7375 7070 6f72 7465 6420 2761 7574 6f27  supported 'auto'
+0001fe00: 2e0d 0a20 2020 2020 2020 203a 7061 7261  ...        :para
+0001fe10: 6d20 746f 5f6c 616e 6775 6167 653a 2073  m to_language: s
+0001fe20: 7472 2c20 6465 6661 756c 7420 2765 6e27  tr, default 'en'
+0001fe30: 2e0d 0a20 2020 2020 2020 203a 7061 7261  ...        :para
+0001fe40: 6d20 2a2a 6b77 6172 6773 3a0d 0a20 2020  m **kwargs:..   
+0001fe50: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+0001fe60: 7261 6d20 7469 6d65 6f75 743a 2066 6c6f  ram timeout: flo
+0001fe70: 6174 2c20 6465 6661 756c 7420 4e6f 6e65  at, default None
+0001fe80: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001fe90: 2020 203a 7061 7261 6d20 7072 6f78 6965     :param proxie
+0001fea0: 733a 2064 6963 742c 2064 6566 6175 6c74  s: dict, default
+0001feb0: 204e 6f6e 652e 0d0a 2020 2020 2020 2020   None...        
+0001fec0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+0001fed0: 6c65 6570 5f73 6563 6f6e 6473 3a20 666c  leep_seconds: fl
+0001fee0: 6f61 742c 2064 6566 6175 6c74 2030 2e0d  oat, default 0..
+0001fef0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ff00: 203a 7061 7261 6d20 6973 5f64 6574 6169   :param is_detai
+0001ff10: 6c5f 7265 7375 6c74 3a20 626f 6f6c 2c20  l_result: bool, 
+0001ff20: 6465 6661 756c 7420 4661 6c73 652e 0d0a  default False...
+0001ff30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ff40: 3a70 6172 616d 2069 665f 6967 6e6f 7265  :param if_ignore
+0001ff50: 5f6c 696d 6974 5f6f 665f 6c65 6e67 7468  _limit_of_length
+0001ff60: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+0001ff70: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
+0001ff80: 2020 2020 2020 2020 3a70 6172 616d 206c          :param l
+0001ff90: 696d 6974 5f6f 665f 6c65 6e67 7468 3a20  imit_of_length: 
+0001ffa0: 696e 742c 2064 6566 6175 6c74 2032 3030  int, default 200
+0001ffb0: 3030 2e0d 0a20 2020 2020 2020 2020 2020  00...           
+0001ffc0: 2020 2020 203a 7061 7261 6d20 6966 5f69       :param if_i
+0001ffd0: 676e 6f72 655f 656d 7074 795f 7175 6572  gnore_empty_quer
+0001ffe0: 793a 2062 6f6f 6c2c 2064 6566 6175 6c74  y: bool, default
+0001fff0: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
+00020000: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+00020010: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+00020020: 6674 6572 5f66 7265 713a 2069 6e74 2c20  fter_freq: int, 
+00020030: 6465 6661 756c 7420 3130 3030 2e0d 0a20  default 1000... 
+00020040: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00020050: 7061 7261 6d20 7570 6461 7465 5f73 6573  param update_ses
+00020060: 7369 6f6e 5f61 6674 6572 5f73 6563 6f6e  sion_after_secon
+00020070: 6473 3a20 666c 6f61 742c 2064 6566 6175  ds: float, defau
+00020080: 6c74 2031 3530 302e 0d0a 2020 2020 2020  lt 1500...      
+00020090: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+000200a0: 2069 665f 7368 6f77 5f74 696d 655f 7374   if_show_time_st
+000200b0: 6174 3a20 626f 6f6c 2c20 6465 6661 756c  at: bool, defaul
+000200c0: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+000200d0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+000200e0: 2073 686f 775f 7469 6d65 5f73 7461 745f   show_time_stat_
+000200f0: 7072 6563 6973 696f 6e3a 2069 6e74 2c20  precision: int, 
+00020100: 6465 6661 756c 7420 322e 0d0a 2020 2020  default 2...    
+00020110: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00020120: 616d 2069 665f 7072 696e 745f 7761 726e  am if_print_warn
+00020130: 696e 673a 2062 6f6f 6c2c 2064 6566 6175  ing: bool, defau
+00020140: 6c74 2054 7275 652e 0d0a 2020 2020 2020  lt True...      
+00020150: 2020 3a72 6574 7572 6e3a 2073 7472 206f    :return: str o
+00020160: 7220 6469 6374 0d0a 2020 2020 2020 2020  r dict..        
+00020170: 2222 220d 0a0d 0a20 2020 2020 2020 2074  """....        t
+00020180: 696d 656f 7574 203d 206b 7761 7267 732e  imeout = kwargs.
+00020190: 6765 7428 2774 696d 656f 7574 272c 204e  get('timeout', N
+000201a0: 6f6e 6529 0d0a 2020 2020 2020 2020 7072  one)..        pr
+000201b0: 6f78 6965 7320 3d20 6b77 6172 6773 2e67  oxies = kwargs.g
+000201c0: 6574 2827 7072 6f78 6965 7327 2c20 4e6f  et('proxies', No
+000201d0: 6e65 290d 0a20 2020 2020 2020 2073 6c65  ne)..        sle
+000201e0: 6570 5f73 6563 6f6e 6473 203d 206b 7761  ep_seconds = kwa
+000201f0: 7267 732e 6765 7428 2773 6c65 6570 5f73  rgs.get('sleep_s
+00020200: 6563 6f6e 6473 272c 2030 290d 0a20 2020  econds', 0)..   
+00020210: 2020 2020 2069 665f 7072 696e 745f 7761       if_print_wa
+00020220: 726e 696e 6720 3d20 6b77 6172 6773 2e67  rning = kwargs.g
+00020230: 6574 2827 6966 5f70 7269 6e74 5f77 6172  et('if_print_war
+00020240: 6e69 6e67 272c 2054 7275 6529 0d0a 2020  ning', True)..  
+00020250: 2020 2020 2020 6973 5f64 6574 6169 6c5f        is_detail_
+00020260: 7265 7375 6c74 203d 206b 7761 7267 732e  result = kwargs.
+00020270: 6765 7428 2769 735f 6465 7461 696c 5f72  get('is_detail_r
+00020280: 6573 756c 7427 2c20 4661 6c73 6529 0d0a  esult', False)..
+00020290: 2020 2020 2020 2020 7570 6461 7465 5f73          update_s
+000202a0: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
+000202b0: 7120 3d20 6b77 6172 6773 2e67 6574 2827  q = kwargs.get('
+000202c0: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+000202d0: 6674 6572 5f66 7265 7127 2c20 7365 6c66  fter_freq', self
+000202e0: 2e64 6566 6175 6c74 5f73 6573 7369 6f6e  .default_session
+000202f0: 5f66 7265 7129 0d0a 2020 2020 2020 2020  _freq)..        
+00020300: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+00020310: 6674 6572 5f73 6563 6f6e 6473 203d 206b  fter_seconds = k
+00020320: 7761 7267 732e 6765 7428 2775 7064 6174  wargs.get('updat
+00020330: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
+00020340: 7365 636f 6e64 7327 2c20 7365 6c66 2e64  seconds', self.d
+00020350: 6566 6175 6c74 5f73 6573 7369 6f6e 5f73  efault_session_s
+00020360: 6563 6f6e 6473 290d 0a20 2020 2020 2020  econds)..       
+00020370: 2073 656c 662e 6368 6563 6b5f 696e 7075   self.check_inpu
+00020380: 745f 6c69 6d69 7428 7175 6572 795f 7465  t_limit(query_te
+00020390: 7874 2c20 7365 6c66 2e69 6e70 7574 5f6c  xt, self.input_l
+000203a0: 696d 6974 290d 0a0d 0a20 2020 2020 2020  imit)....       
+000203b0: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
+000203c0: 5f66 7265 7120 3d20 3120 6966 2073 656c  _freq = 1 if sel
+000203d0: 662e 7175 6572 795f 636f 756e 7420 2520  f.query_count % 
+000203e0: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+000203f0: 6674 6572 5f66 7265 7120 213d 2030 2065  fter_freq != 0 e
+00020400: 6c73 6520 300d 0a20 2020 2020 2020 206e  lse 0..        n
+00020410: 6f74 5f75 7064 6174 655f 636f 6e64 5f74  ot_update_cond_t
+00020420: 696d 6520 3d20 3120 6966 2074 696d 652e  ime = 1 if time.
+00020430: 7469 6d65 2829 202d 2073 656c 662e 6265  time() - self.be
+00020440: 6769 6e5f 7469 6d65 203c 2075 7064 6174  gin_time < updat
+00020450: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
+00020460: 7365 636f 6e64 7320 656c 7365 2030 0d0a  seconds else 0..
+00020470: 2020 2020 2020 2020 6966 206e 6f74 2028          if not (
+00020480: 7365 6c66 2e73 6573 7369 6f6e 2061 6e64  self.session and
+00020490: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+000204a0: 6170 2061 6e64 206e 6f74 5f75 7064 6174  ap and not_updat
+000204b0: 655f 636f 6e64 5f66 7265 7120 616e 6420  e_cond_freq and 
+000204c0: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
+000204d0: 7469 6d65 293a 0d0a 2020 2020 2020 2020  time):..        
+000204e0: 2020 2020 7365 6c66 2e62 6567 696e 5f74      self.begin_t
+000204f0: 696d 6520 3d20 7469 6d65 2e74 696d 6528  ime = time.time(
+00020500: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+00020510: 656c 662e 7365 7373 696f 6e20 3d20 7265  elf.session = re
+00020520: 7175 6573 7473 2e53 6573 7369 6f6e 2829  quests.Session()
+00020530: 0d0a 2020 2020 2020 2020 2020 2020 686f  ..            ho
+00020540: 7374 5f68 746d 6c20 3d20 7365 6c66 2e73  st_html = self.s
+00020550: 6573 7369 6f6e 2e67 6574 2873 656c 662e  ession.get(self.
+00020560: 686f 7374 5f75 726c 2c20 6865 6164 6572  host_url, header
+00020570: 733d 7365 6c66 2e68 6f73 745f 6865 6164  s=self.host_head
+00020580: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
+00020590: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
+000205a0: 6f78 6965 7329 2e74 6578 740d 0a20 2020  oxies).text..   
+000205b0: 2020 2020 2020 2020 205f 203d 2073 656c           _ = sel
+000205c0: 662e 7365 7373 696f 6e2e 6765 7428 7365  f.session.get(se
+000205d0: 6c66 2e63 6f6f 6b69 6573 5f75 726c 2c20  lf.cookies_url, 
+000205e0: 6865 6164 6572 733d 7365 6c66 2e68 6f73  headers=self.hos
+000205f0: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
+00020600: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
+00020610: 6965 733d 7072 6f78 6965 7329 0d0a 2020  ies=proxies)..  
+00020620: 2020 2020 2020 2020 2020 5f20 3d20 7365            _ = se
+00020630: 6c66 2e73 6573 7369 6f6e 2e67 6574 2873  lf.session.get(s
+00020640: 656c 662e 696e 666f 5f75 726c 2c20 6865  elf.info_url, he
+00020650: 6164 6572 733d 7365 6c66 2e68 6f73 745f  aders=self.host_
+00020660: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
+00020670: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
+00020680: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
+00020690: 2020 2020 2020 2020 6465 6275 675f 6c61          debug_la
+000206a0: 6e67 5f6b 7761 7267 7320 3d20 7365 6c66  ng_kwargs = self
+000206b0: 2e64 6562 7567 5f6c 616e 675f 6b77 6172  .debug_lang_kwar
+000206c0: 6773 2866 726f 6d5f 6c61 6e67 7561 6765  gs(from_language
+000206d0: 2c20 746f 5f6c 616e 6775 6167 652c 2073  , to_language, s
+000206e0: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
+000206f0: 5f6c 616e 6775 6167 652c 2069 665f 7072  _language, if_pr
+00020700: 696e 745f 7761 726e 696e 6729 0d0a 2020  int_warning)..  
+00020710: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
+00020720: 616e 6775 6167 655f 6d61 7020 3d20 7365  anguage_map = se
+00020730: 6c66 2e67 6574 5f6c 616e 6775 6167 655f  lf.get_language_
+00020740: 6d61 7028 686f 7374 5f68 746d 6c2c 2073  map(host_html, s
+00020750: 656c 662e 7365 7373 696f 6e2c 2073 656c  elf.session, sel
+00020760: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
+00020770: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
+00020780: 2c20 2a2a 6465 6275 675f 6c61 6e67 5f6b  , **debug_lang_k
+00020790: 7761 7267 7329 0d0a 0d0a 2020 2020 2020  wargs)....      
+000207a0: 2020 6966 2066 726f 6d5f 6c61 6e67 7561    if from_langua
+000207b0: 6765 203d 3d20 2761 7574 6f27 3a0d 0a20  ge == 'auto':.. 
+000207c0: 2020 2020 2020 2020 2020 2066 726f 6d5f             from_
+000207d0: 6c61 6e67 7561 6765 203d 2073 656c 662e  language = self.
+000207e0: 7761 726e 696e 675f 6175 746f 5f6c 616e  warning_auto_lan
+000207f0: 6728 2769 666c 7974 656b 272c 2073 656c  g('iflytek', sel
+00020800: 662e 6465 6661 756c 745f 6672 6f6d 5f6c  f.default_from_l
+00020810: 616e 6775 6167 652c 2069 665f 7072 696e  anguage, if_prin
+00020820: 745f 7761 726e 696e 6729 0d0a 2020 2020  t_warning)..    
+00020830: 2020 2020 6672 6f6d 5f6c 616e 6775 6167      from_languag
+00020840: 652c 2074 6f5f 6c61 6e67 7561 6765 203d  e, to_language =
+00020850: 2073 656c 662e 6368 6563 6b5f 6c61 6e67   self.check_lang
+00020860: 7561 6765 2866 726f 6d5f 6c61 6e67 7561  uage(from_langua
+00020870: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
+00020880: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+00020890: 6170 2c20 6f75 7470 7574 5f7a 683d 7365  ap, output_zh=se
+000208a0: 6c66 2e6f 7574 7075 745f 7a68 290d 0a0d  lf.output_zh)...
+000208b0: 0a20 2020 2020 2020 2023 2063 6970 6865  .        # ciphe
+000208c0: 725f 7175 6572 795f 7465 7874 203d 2062  r_query_text = b
+000208d0: 6173 6536 342e 6236 3465 6e63 6f64 6528  ase64.b64encode(
+000208e0: 7175 6572 795f 7465 7874 2e65 6e63 6f64  query_text.encod
+000208f0: 6528 2929 2e64 6563 6f64 6528 290d 0a20  e()).decode().. 
+00020900: 2020 2020 2020 2063 6970 6865 725f 7175         cipher_qu
+00020910: 6572 795f 7465 7874 203d 2071 7565 7279  ery_text = query
+00020920: 5f74 6578 740d 0a20 2020 2020 2020 2070  _text..        p
+00020930: 6179 6c6f 6164 203d 207b 2766 726f 6d27  ayload = {'from'
+00020940: 3a20 6672 6f6d 5f6c 616e 6775 6167 652c  : from_language,
+00020950: 2027 746f 273a 2074 6f5f 6c61 6e67 7561   'to': to_langua
+00020960: 6765 2c20 2774 6578 7427 3a20 6369 7068  ge, 'text': ciph
+00020970: 6572 5f71 7565 7279 5f74 6578 747d 0d0a  er_query_text}..
+00020980: 2020 2020 2020 2020 7220 3d20 7365 6c66          r = self
+00020990: 2e73 6573 7369 6f6e 2e70 6f73 7428 7365  .session.post(se
+000209a0: 6c66 2e61 7069 5f75 726c 2c20 6865 6164  lf.api_url, head
+000209b0: 6572 733d 7365 6c66 2e61 7069 5f68 6561  ers=self.api_hea
+000209c0: 6465 7273 2c20 6461 7461 3d70 6179 6c6f  ders, data=paylo
+000209d0: 6164 2c20 7469 6d65 6f75 743d 7469 6d65  ad, timeout=time
+000209e0: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
+000209f0: 7869 6573 290d 0a20 2020 2020 2020 2072  xies)..        r
+00020a00: 2e72 6169 7365 5f66 6f72 5f73 7461 7475  .raise_for_statu
+00020a10: 7328 290d 0a20 2020 2020 2020 2064 6174  s()..        dat
+00020a20: 6120 3d20 722e 6a73 6f6e 2829 0d0a 2020  a = r.json()..  
+00020a30: 2020 2020 2020 7469 6d65 2e73 6c65 6570        time.sleep
+00020a40: 2873 6c65 6570 5f73 6563 6f6e 6473 290d  (sleep_seconds).
+00020a50: 0a20 2020 2020 2020 2073 656c 662e 7175  .        self.qu
+00020a60: 6572 795f 636f 756e 7420 2b3d 2031 0d0a  ery_count += 1..
+00020a70: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+00020a80: 6174 6120 6966 2069 735f 6465 7461 696c  ata if is_detail
+00020a90: 5f72 6573 756c 7420 656c 7365 206a 736f  _result else jso
+00020aa0: 6e2e 6c6f 6164 7328 6461 7461 5b27 6461  n.loads(data['da
+00020ab0: 7461 275d 295b 2774 7261 6e73 5f72 6573  ta'])['trans_res
+00020ac0: 756c 7427 5d5b 2764 7374 275d 0d0a 0d0a  ult']['dst']....
+00020ad0: 0d0a 636c 6173 7320 4966 6c79 7465 6b56  ..class IflytekV
+00020ae0: 3228 5473 6529 3a0d 0a20 2020 2064 6566  2(Tse):..    def
+00020af0: 205f 5f69 6e69 745f 5f28 7365 6c66 293a   __init__(self):
+00020b00: 0d0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
+00020b10: 292e 5f5f 696e 6974 5f5f 2829 0d0a 2020  ).__init__()..  
+00020b20: 2020 2020 2020 7365 6c66 2e62 6567 696e        self.begin
+00020b30: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
+00020b40: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
+00020b50: 662e 686f 7374 5f75 726c 203d 2027 6874  f.host_url = 'ht
+00020b60: 7470 733a 2f2f 6661 6e79 692e 7866 7975  tps://fanyi.xfyu
+00020b70: 6e2e 636e 2f63 6f6e 736f 6c65 2f74 7261  n.cn/console/tra
+00020b80: 6e73 2f74 6578 7427 2020 2320 6874 7470  ns/text'  # http
+00020b90: 733a 2f2f 7777 772e 6966 6c79 7265 632e  s://www.iflyrec.
+00020ba0: 636f 6d2f 6874 6d6c 2f74 7261 6e73 6c61  com/html/transla
+00020bb0: 7465 2e68 746d 6c0d 0a20 2020 2020 2020  te.html..       
+00020bc0: 2073 656c 662e 6170 695f 7572 6c20 3d20   self.api_url = 
+00020bd0: 2768 7474 7073 3a2f 2f66 616e 7969 2e78  'https://fanyi.x
+00020be0: 6679 756e 2e63 6e2f 6170 692d 7472 616e  fyun.cn/api-tran
+00020bf0: 2f74 7261 6e73 2f69 7473 270d 0a20 2020  /trans/its'..   
+00020c00: 2020 2020 2073 656c 662e 6465 7465 6374       self.detect
+00020c10: 5f6c 616e 6775 6167 655f 7572 6c20 3d20  _language_url = 
+00020c20: 2768 7474 7073 3a2f 2f66 616e 7969 2e78  'https://fanyi.x
+00020c30: 6679 756e 2e63 6e2f 6170 692d 7472 616e  fyun.cn/api-tran
+00020c40: 2f74 7261 6e73 2f64 6574 6563 7469 6f6e  /trans/detection
+00020c50: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+00020c60: 6c61 6e67 7561 6765 5f75 726c 5f70 6174  language_url_pat
+00020c70: 7465 726e 203d 2027 2f6a 732f 7472 616e  tern = '/js/tran
+00020c80: 732d 7465 7874 2f69 6e64 6578 2e28 2e2a  s-text/index.(.*
+00020c90: 3f29 2e6a 7327 0d0a 2020 2020 2020 2020  ?).js'..        
+00020ca0: 7365 6c66 2e6c 616e 6775 6167 655f 7572  self.language_ur
+00020cb0: 6c20 3d20 4e6f 6e65 0d0a 2020 2020 2020  l = None..      
+00020cc0: 2020 7365 6c66 2e68 6f73 745f 6865 6164    self.host_head
+00020cd0: 6572 7320 3d20 7365 6c66 2e67 6574 5f68  ers = self.get_h
+00020ce0: 6561 6465 7273 2873 656c 662e 686f 7374  eaders(self.host
+00020cf0: 5f75 726c 2c20 6966 5f61 7069 3d46 616c  _url, if_api=Fal
+00020d00: 7365 290d 0a20 2020 2020 2020 2073 656c  se)..        sel
+00020d10: 662e 6170 695f 6865 6164 6572 7320 3d20  f.api_headers = 
+00020d20: 7365 6c66 2e67 6574 5f68 6561 6465 7273  self.get_headers
+00020d30: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
+00020d40: 6966 5f61 7069 3d54 7275 6529 0d0a 2020  if_api=True)..  
+00020d50: 2020 2020 2020 7365 6c66 2e6c 616e 6775        self.langu
+00020d60: 6167 655f 6d61 7020 3d20 4e6f 6e65 0d0a  age_map = None..
+00020d70: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
+00020d80: 7369 6f6e 203d 204e 6f6e 650d 0a20 2020  sion = None..   
+00020d90: 2020 2020 2073 656c 662e 7175 6572 795f       self.query_
+00020da0: 636f 756e 7420 3d20 300d 0a20 2020 2020  count = 0..     
+00020db0: 2020 2073 656c 662e 6f75 7470 7574 5f7a     self.output_z
+00020dc0: 6820 3d20 2763 6e27 0d0a 2020 2020 2020  h = 'cn'..      
+00020dd0: 2020 7365 6c66 2e69 6e70 7574 5f6c 696d    self.input_lim
+00020de0: 6974 203d 2069 6e74 2832 6533 290d 0a20  it = int(2e3).. 
+00020df0: 2020 2020 2020 2073 656c 662e 6465 6661         self.defa
+00020e00: 756c 745f 6672 6f6d 5f6c 616e 6775 6167  ult_from_languag
+00020e10: 6520 3d20 7365 6c66 2e6f 7574 7075 745f  e = self.output_
+00020e20: 7a68 0d0a 0d0a 2020 2020 4054 7365 2e64  zh....    @Tse.d
+00020e30: 6562 7567 5f6c 616e 6775 6167 655f 6d61  ebug_language_ma
+00020e40: 700d 0a20 2020 2064 6566 2067 6574 5f6c  p..    def get_l
+00020e50: 616e 6775 6167 655f 6d61 7028 7365 6c66  anguage_map(self
+00020e60: 2c20 686f 7374 5f68 746d 6c3a 2073 7472  , host_html: str
+00020e70: 2c20 7373 3a20 5365 7373 696f 6e54 7970  , ss: SessionTyp
+00020e80: 652c 2068 6561 6465 7273 3a20 6469 6374  e, headers: dict
+00020e90: 2c20 7469 6d65 6f75 743a 204f 7074 696f  , timeout: Optio
+00020ea0: 6e61 6c5b 666c 6f61 745d 2c20 7072 6f78  nal[float], prox
+00020eb0: 6965 733a 204f 7074 696f 6e61 6c5b 6469  ies: Optional[di
+00020ec0: 6374 5d2c 202a 2a6b 7761 7267 733a 204c  ct], **kwargs: L
+00020ed0: 616e 674d 6170 4b77 6172 6773 5479 7065  angMapKwargsType
+00020ee0: 2920 2d3e 2064 6963 743a 0d0a 2020 2020  ) -> dict:..    
+00020ef0: 2020 2020 686f 7374 5f74 7275 655f 7572      host_true_ur
+00020f00: 6c20 3d20 6627 6874 7470 733a 2f2f 7b75  l = f'https://{u
+00020f10: 726c 6c69 622e 7061 7273 652e 7572 6c70  rllib.parse.urlp
+00020f20: 6172 7365 2873 656c 662e 686f 7374 5f75  arse(self.host_u
+00020f30: 726c 292e 686f 7374 6e61 6d65 7d27 0d0a  rl).hostname}'..
+00020f40: 0d0a 2020 2020 2020 2020 6574 203d 206c  ..        et = l
+00020f50: 786d 6c2e 6574 7265 652e 4854 4d4c 2868  xml.etree.HTML(h
+00020f60: 6f73 745f 6874 6d6c 290d 0a20 2020 2020  ost_html)..     
+00020f70: 2020 2068 6f73 745f 6a73 5f75 726c 203d     host_js_url =
+00020f80: 2066 2222 227b 686f 7374 5f74 7275 655f   f"""{host_true_
+00020f90: 7572 6c7d 7b65 742e 7870 6174 6828 272f  url}{et.xpath('/
+00020fa0: 2f73 6372 6970 745b 4074 7970 653d 226d  /script[@type="m
+00020fb0: 6f64 756c 6522 5d2f 4073 7263 2729 5b30  odule"]/@src')[0
+00020fc0: 5d7d 2222 220d 0a20 2020 2020 2020 2068  ]}"""..        h
+00020fd0: 6f73 745f 6a73 5f68 746d 6c20 3d20 7373  ost_js_html = ss
+00020fe0: 2e67 6574 2868 6f73 745f 6a73 5f75 726c  .get(host_js_url
+00020ff0: 2c20 6865 6164 6572 733d 6865 6164 6572  , headers=header
+00021000: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
+00021010: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
+00021020: 6965 7329 2e74 6578 740d 0a20 2020 2020  ies).text..     
+00021030: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
+00021040: 5f75 726c 203d 2066 2222 227b 686f 7374  _url = f"""{host
+00021050: 5f74 7275 655f 7572 6c7d 7b72 652e 636f  _true_url}{re.co
+00021060: 6d70 696c 6528 7365 6c66 2e6c 616e 6775  mpile(self.langu
+00021070: 6167 655f 7572 6c5f 7061 7474 6572 6e29  age_url_pattern)
+00021080: 2e73 6561 7263 6828 686f 7374 5f6a 735f  .search(host_js_
+00021090: 6874 6d6c 292e 6772 6f75 7028 297d 2222  html).group()}""
+000210a0: 220d 0a0d 0a20 2020 2020 2020 206c 616e  "....        lan
+000210b0: 675f 6a73 5f68 746d 6c20 3d20 7373 2e67  g_js_html = ss.g
+000210c0: 6574 2873 656c 662e 6c61 6e67 7561 6765  et(self.language
+000210d0: 5f75 726c 2c20 6865 6164 6572 733d 6865  _url, headers=he
+000210e0: 6164 6572 732c 2074 696d 656f 7574 3d74  aders, timeout=t
+000210f0: 696d 656f 7574 2c20 7072 6f78 6965 733d  imeout, proxies=
+00021100: 7072 6f78 6965 7329 2e74 6578 740d 0a20  proxies).text.. 
+00021110: 2020 2020 2020 206c 616e 675f 6c69 7374         lang_list
+00021120: 203d 2072 652e 636f 6d70 696c 6528 276c   = re.compile('l
+00021130: 616e 6775 6167 6543 6f64 653a 2228 2e2a  anguageCode:"(.*
+00021140: 3f29 222c 2729 2e66 696e 6461 6c6c 286c  ?)",').findall(l
+00021150: 616e 675f 6a73 5f68 746d 6c29 0d0a 2020  ang_js_html)..  
+00021160: 2020 2020 2020 6c61 6e67 5f6c 6973 7420        lang_list 
+00021170: 3d20 736f 7274 6564 286c 6973 7428 7365  = sorted(list(se
+00021180: 7428 6c61 6e67 5f6c 6973 7429 2929 0d0a  t(lang_list)))..
+00021190: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+000211a0: 7d2e 6672 6f6d 6b65 7973 286c 616e 675f  }.fromkeys(lang_
+000211b0: 6c69 7374 2c20 6c61 6e67 5f6c 6973 7429  list, lang_list)
+000211c0: 0d0a 0d0a 2020 2020 4054 7365 2e75 6e63  ....    @Tse.unc
+000211d0: 6572 7469 6669 6564 0d0a 2020 2020 4054  ertified..    @T
+000211e0: 7365 2e74 696d 655f 7374 6174 0d0a 2020  se.time_stat..  
+000211f0: 2020 4054 7365 2e63 6865 636b 5f71 7565    @Tse.check_que
+00021200: 7279 0d0a 2020 2020 6465 6620 6966 6c79  ry..    def ifly
+00021210: 7465 6b5f 6170 6928 7365 6c66 2c20 7175  tek_api(self, qu
+00021220: 6572 795f 7465 7874 3a20 7374 722c 2066  ery_text: str, f
+00021230: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
+00021240: 7220 3d20 2761 7574 6f27 2c20 746f 5f6c  r = 'auto', to_l
+00021250: 616e 6775 6167 653a 2073 7472 203d 2027  anguage: str = '
+00021260: 656e 272c 202a 2a6b 7761 7267 733a 2041  en', **kwargs: A
+00021270: 7069 4b77 6172 6773 5479 7065 2920 2d3e  piKwargsType) ->
+00021280: 2055 6e69 6f6e 5b73 7472 2c20 6469 6374   Union[str, dict
+00021290: 5d3a 0d0a 2020 2020 2020 2020 2222 220d  ]:..        """.
+000212a0: 0a20 2020 2020 2020 2068 7474 7073 3a2f  .        https:/
+000212b0: 2f66 616e 7969 2e78 6679 756e 2e63 6e2f  /fanyi.xfyun.cn/
+000212c0: 636f 6e73 6f6c 652f 7472 616e 732f 7465  console/trans/te
+000212d0: 7874 0d0a 2020 2020 2020 2020 3a70 6172  xt..        :par
+000212e0: 616d 2071 7565 7279 5f74 6578 743a 2073  am query_text: s
+000212f0: 7472 2c20 6d75 7374 2e0d 0a20 2020 2020  tr, must...     
+00021300: 2020 203a 7061 7261 6d20 6672 6f6d 5f6c     :param from_l
+00021310: 616e 6775 6167 653a 2073 7472 2c20 6465  anguage: str, de
+00021320: 6661 756c 7420 2761 7574 6f27 2e0d 0a20  fault 'auto'... 
+00021330: 2020 2020 2020 203a 7061 7261 6d20 746f         :param to
+00021340: 5f6c 616e 6775 6167 653a 2073 7472 2c20  _language: str, 
+00021350: 6465 6661 756c 7420 2765 6e27 2e0d 0a20  default 'en'... 
+00021360: 2020 2020 2020 203a 7061 7261 6d20 2a2a         :param **
+00021370: 6b77 6172 6773 3a0d 0a20 2020 2020 2020  kwargs:..       
+00021380: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+00021390: 7469 6d65 6f75 743a 2066 6c6f 6174 2c20  timeout: float, 
+000213a0: 6465 6661 756c 7420 4e6f 6e65 2e0d 0a20  default None... 
+000213b0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+000213c0: 7061 7261 6d20 7072 6f78 6965 733a 2064  param proxies: d
+000213d0: 6963 742c 2064 6566 6175 6c74 204e 6f6e  ict, default Non
+000213e0: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+000213f0: 2020 2020 3a70 6172 616d 2073 6c65 6570      :param sleep
+00021400: 5f73 6563 6f6e 6473 3a20 666c 6f61 742c  _seconds: float,
+00021410: 2064 6566 6175 6c74 2030 2e0d 0a20 2020   default 0...   
+00021420: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00021430: 7261 6d20 6973 5f64 6574 6169 6c5f 7265  ram is_detail_re
+00021440: 7375 6c74 3a20 626f 6f6c 2c20 6465 6661  sult: bool, defa
+00021450: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+00021460: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00021470: 616d 2069 665f 6967 6e6f 7265 5f6c 696d  am if_ignore_lim
+00021480: 6974 5f6f 665f 6c65 6e67 7468 3a20 626f  it_of_length: bo
+00021490: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
+000214a0: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+000214b0: 2020 2020 3a70 6172 616d 206c 696d 6974      :param limit
+000214c0: 5f6f 665f 6c65 6e67 7468 3a20 696e 742c  _of_length: int,
+000214d0: 2064 6566 6175 6c74 2032 3030 3030 2e0d   default 20000..
+000214e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000214f0: 203a 7061 7261 6d20 6966 5f69 676e 6f72   :param if_ignor
+00021500: 655f 656d 7074 795f 7175 6572 793a 2062  e_empty_query: b
+00021510: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
+00021520: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
+00021530: 2020 2020 203a 7061 7261 6d20 7570 6461       :param upda
+00021540: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+00021550: 5f66 7265 713a 2069 6e74 2c20 6465 6661  _freq: int, defa
+00021560: 756c 7420 3130 3030 2e0d 0a20 2020 2020  ult 1000...     
+00021570: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00021580: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
+00021590: 5f61 6674 6572 5f73 6563 6f6e 6473 3a20  _after_seconds: 
+000215a0: 666c 6f61 742c 2064 6566 6175 6c74 2031  float, default 1
+000215b0: 3530 302e 0d0a 2020 2020 2020 2020 2020  500...          
+000215c0: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
+000215d0: 7368 6f77 5f74 696d 655f 7374 6174 3a20  show_time_stat: 
+000215e0: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
+000215f0: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
+00021600: 2020 2020 2020 3a70 6172 616d 2073 686f        :param sho
+00021610: 775f 7469 6d65 5f73 7461 745f 7072 6563  w_time_stat_prec
+00021620: 6973 696f 6e3a 2069 6e74 2c20 6465 6661  ision: int, defa
+00021630: 756c 7420 322e 0d0a 2020 2020 2020 2020  ult 2...        
+00021640: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00021650: 665f 7072 696e 745f 7761 726e 696e 673a  f_print_warning:
+00021660: 2062 6f6f 6c2c 2064 6566 6175 6c74 2054   bool, default T
+00021670: 7275 652e 0d0a 2020 2020 2020 2020 3a72  rue...        :r
+00021680: 6574 7572 6e3a 2073 7472 206f 7220 6469  eturn: str or di
+00021690: 6374 0d0a 2020 2020 2020 2020 2222 220d  ct..        """.
+000216a0: 0a0d 0a20 2020 2020 2020 2074 696d 656f  ...        timeo
+000216b0: 7574 203d 206b 7761 7267 732e 6765 7428  ut = kwargs.get(
+000216c0: 2774 696d 656f 7574 272c 204e 6f6e 6529  'timeout', None)
+000216d0: 0d0a 2020 2020 2020 2020 7072 6f78 6965  ..        proxie
+000216e0: 7320 3d20 6b77 6172 6773 2e67 6574 2827  s = kwargs.get('
+000216f0: 7072 6f78 6965 7327 2c20 4e6f 6e65 290d  proxies', None).
+00021700: 0a20 2020 2020 2020 2073 6c65 6570 5f73  .        sleep_s
+00021710: 6563 6f6e 6473 203d 206b 7761 7267 732e  econds = kwargs.
+00021720: 6765 7428 2773 6c65 6570 5f73 6563 6f6e  get('sleep_secon
+00021730: 6473 272c 2030 290d 0a20 2020 2020 2020  ds', 0)..       
+00021740: 2069 665f 7072 696e 745f 7761 726e 696e   if_print_warnin
+00021750: 6720 3d20 6b77 6172 6773 2e67 6574 2827  g = kwargs.get('
+00021760: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
+00021770: 272c 2054 7275 6529 0d0a 2020 2020 2020  ', True)..      
+00021780: 2020 6973 5f64 6574 6169 6c5f 7265 7375    is_detail_resu
+00021790: 6c74 203d 206b 7761 7267 732e 6765 7428  lt = kwargs.get(
+000217a0: 2769 735f 6465 7461 696c 5f72 6573 756c  'is_detail_resul
+000217b0: 7427 2c20 4661 6c73 6529 0d0a 2020 2020  t', False)..    
+000217c0: 2020 2020 7570 6461 7465 5f73 6573 7369      update_sessi
+000217d0: 6f6e 5f61 6674 6572 5f66 7265 7120 3d20  on_after_freq = 
+000217e0: 6b77 6172 6773 2e67 6574 2827 7570 6461  kwargs.get('upda
+000217f0: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+00021800: 5f66 7265 7127 2c20 7365 6c66 2e64 6566  _freq', self.def
+00021810: 6175 6c74 5f73 6573 7369 6f6e 5f66 7265  ault_session_fre
+00021820: 7129 0d0a 2020 2020 2020 2020 7570 6461  q)..        upda
+00021830: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+00021840: 5f73 6563 6f6e 6473 203d 206b 7761 7267  _seconds = kwarg
+00021850: 732e 6765 7428 2775 7064 6174 655f 7365  s.get('update_se
+00021860: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
+00021870: 6e64 7327 2c20 7365 6c66 2e64 6566 6175  nds', self.defau
+00021880: 6c74 5f73 6573 7369 6f6e 5f73 6563 6f6e  lt_session_secon
+00021890: 6473 290d 0a20 2020 2020 2020 2073 656c  ds)..        sel
+000218a0: 662e 6368 6563 6b5f 696e 7075 745f 6c69  f.check_input_li
+000218b0: 6d69 7428 7175 6572 795f 7465 7874 2c20  mit(query_text, 
+000218c0: 7365 6c66 2e69 6e70 7574 5f6c 696d 6974  self.input_limit
+000218d0: 290d 0a0d 0a20 2020 2020 2020 206e 6f74  )....        not
+000218e0: 5f75 7064 6174 655f 636f 6e64 5f66 7265  _update_cond_fre
+000218f0: 7120 3d20 3120 6966 2073 656c 662e 7175  q = 1 if self.qu
+00021900: 6572 795f 636f 756e 7420 2520 7570 6461  ery_count % upda
+00021910: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+00021920: 5f66 7265 7120 213d 2030 2065 6c73 6520  _freq != 0 else 
+00021930: 300d 0a20 2020 2020 2020 206e 6f74 5f75  0..        not_u
+00021940: 7064 6174 655f 636f 6e64 5f74 696d 6520  pdate_cond_time 
+00021950: 3d20 3120 6966 2074 696d 652e 7469 6d65  = 1 if time.time
+00021960: 2829 202d 2073 656c 662e 6265 6769 6e5f  () - self.begin_
+00021970: 7469 6d65 203c 2075 7064 6174 655f 7365  time < update_se
+00021980: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
+00021990: 6e64 7320 656c 7365 2030 0d0a 2020 2020  nds else 0..    
+000219a0: 2020 2020 6966 206e 6f74 2028 7365 6c66      if not (self
+000219b0: 2e73 6573 7369 6f6e 2061 6e64 2073 656c  .session and sel
+000219c0: 662e 6c61 6e67 7561 6765 5f6d 6170 2061  f.language_map a
+000219d0: 6e64 206e 6f74 5f75 7064 6174 655f 636f  nd not_update_co
+000219e0: 6e64 5f66 7265 7120 616e 6420 6e6f 745f  nd_freq and not_
+000219f0: 7570 6461 7465 5f63 6f6e 645f 7469 6d65  update_cond_time
+00021a00: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00021a10: 7365 6c66 2e62 6567 696e 5f74 696d 6520  self.begin_time 
+00021a20: 3d20 7469 6d65 2e74 696d 6528 290d 0a20  = time.time().. 
+00021a30: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00021a40: 7365 7373 696f 6e20 3d20 7265 7175 6573  session = reques
+00021a50: 7473 2e53 6573 7369 6f6e 2829 0d0a 2020  ts.Session()..  
+00021a60: 2020 2020 2020 2020 2020 686f 7374 5f68            host_h
+00021a70: 746d 6c20 3d20 7365 6c66 2e73 6573 7369  tml = self.sessi
+00021a80: 6f6e 2e67 6574 2873 656c 662e 686f 7374  on.get(self.host
+00021a90: 5f75 726c 2c20 6865 6164 6572 733d 7365  _url, headers=se
+00021aa0: 6c66 2e68 6f73 745f 6865 6164 6572 732c  lf.host_headers,
+00021ab0: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
+00021ac0: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
+00021ad0: 7329 2e74 6578 740d 0a20 2020 2020 2020  s).text..       
+00021ae0: 2020 2020 2064 6562 7567 5f6c 616e 675f       debug_lang_
+00021af0: 6b77 6172 6773 203d 2073 656c 662e 6465  kwargs = self.de
+00021b00: 6275 675f 6c61 6e67 5f6b 7761 7267 7328  bug_lang_kwargs(
+00021b10: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
+00021b20: 6f5f 6c61 6e67 7561 6765 2c20 7365 6c66  o_language, self
+00021b30: 2e64 6566 6175 6c74 5f66 726f 6d5f 6c61  .default_from_la
+00021b40: 6e67 7561 6765 2c20 6966 5f70 7269 6e74  nguage, if_print
+00021b50: 5f77 6172 6e69 6e67 290d 0a20 2020 2020  _warning)..     
+00021b60: 2020 2020 2020 2073 656c 662e 6c61 6e67         self.lang
+00021b70: 7561 6765 5f6d 6170 203d 2073 656c 662e  uage_map = self.
+00021b80: 6765 745f 6c61 6e67 7561 6765 5f6d 6170  get_language_map
+00021b90: 2868 6f73 745f 6874 6d6c 2c20 7365 6c66  (host_html, self
+00021ba0: 2e73 6573 7369 6f6e 2c20 7365 6c66 2e68  .session, self.h
+00021bb0: 6f73 745f 6865 6164 6572 732c 2074 696d  ost_headers, tim
+00021bc0: 656f 7574 2c20 7072 6f78 6965 732c 202a  eout, proxies, *
+00021bd0: 2a64 6562 7567 5f6c 616e 675f 6b77 6172  *debug_lang_kwar
+00021be0: 6773 290d 0a0d 0a20 2020 2020 2020 2069  gs)....        i
+00021bf0: 6620 6672 6f6d 5f6c 616e 6775 6167 6520  f from_language 
+00021c00: 3d3d 2027 6175 746f 273a 0d0a 2020 2020  == 'auto':..    
+00021c10: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
+00021c20: 207b 2774 6578 7427 3a20 7175 6572 795f   {'text': query_
+00021c30: 7465 7874 7d0d 0a20 2020 2020 2020 2020  text}..         
+00021c40: 2020 2064 6574 6563 745f 7220 3d20 7365     detect_r = se
+00021c50: 6c66 2e73 6573 7369 6f6e 2e67 6574 2873  lf.session.get(s
+00021c60: 656c 662e 6465 7465 6374 5f6c 616e 6775  elf.detect_langu
+00021c70: 6167 655f 7572 6c2c 2070 6172 616d 733d  age_url, params=
+00021c80: 7061 7261 6d73 2c20 6865 6164 6572 733d  params, headers=
+00021c90: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
+00021ca0: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
+00021cb0: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
+00021cc0: 6965 7329 0d0a 2020 2020 2020 2020 2020  ies)..          
+00021cd0: 2020 6672 6f6d 5f6c 616e 6775 6167 6520    from_language 
+00021ce0: 3d20 6465 7465 6374 5f72 2e6a 736f 6e28  = detect_r.json(
+00021cf0: 295b 2764 6174 6127 5d20 6966 2064 6574  )['data'] if det
+00021d00: 6563 745f 722e 7374 6174 7573 5f63 6f64  ect_r.status_cod
+00021d10: 6520 3d3d 2032 3030 2061 6e64 2064 6574  e == 200 and det
+00021d20: 6563 745f 722e 7465 7874 2e73 7472 6970  ect_r.text.strip
+00021d30: 2829 2021 3d20 2727 2065 6c73 6520 7365  () != '' else se
+00021d40: 6c66 2e6f 7574 7075 745f 7a68 0d0a 2020  lf.output_zh..  
+00021d50: 2020 2020 2020 6672 6f6d 5f6c 616e 6775        from_langu
+00021d60: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
+00021d70: 203d 2073 656c 662e 6368 6563 6b5f 6c61   = self.check_la
+00021d80: 6e67 7561 6765 2866 726f 6d5f 6c61 6e67  nguage(from_lang
+00021d90: 7561 6765 2c20 746f 5f6c 616e 6775 6167  uage, to_languag
+00021da0: 652c 2073 656c 662e 6c61 6e67 7561 6765  e, self.language
+00021db0: 5f6d 6170 2c20 6f75 7470 7574 5f7a 683d  _map, output_zh=
+00021dc0: 7365 6c66 2e6f 7574 7075 745f 7a68 290d  self.output_zh).
+00021dd0: 0a0d 0a20 2020 2020 2020 2070 6179 6c6f  ...        paylo
+00021de0: 6164 203d 207b 2766 726f 6d27 3a20 6672  ad = {'from': fr
+00021df0: 6f6d 5f6c 616e 6775 6167 652c 2027 746f  om_language, 'to
+00021e00: 273a 2074 6f5f 6c61 6e67 7561 6765 2c20  ': to_language, 
+00021e10: 2774 6578 7427 3a20 7175 6572 795f 7465  'text': query_te
+00021e20: 7874 7d0d 0a20 2020 2020 2020 2072 203d  xt}..        r =
+00021e30: 2073 656c 662e 7365 7373 696f 6e2e 706f   self.session.po
+00021e40: 7374 2873 656c 662e 6170 695f 7572 6c2c  st(self.api_url,
+00021e50: 2068 6561 6465 7273 3d73 656c 662e 6170   headers=self.ap
+00021e60: 695f 6865 6164 6572 732c 2064 6174 613d  i_headers, data=
+00021e70: 7061 796c 6f61 642c 2074 696d 656f 7574  payload, timeout
+00021e80: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
+00021e90: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
+00021ea0: 2020 2020 722e 7261 6973 655f 666f 725f      r.raise_for_
+00021eb0: 7374 6174 7573 2829 0d0a 2020 2020 2020  status()..      
+00021ec0: 2020 6461 7461 203d 2072 2e6a 736f 6e28    data = r.json(
+00021ed0: 290d 0a20 2020 2020 2020 2074 696d 652e  )..        time.
+00021ee0: 736c 6565 7028 736c 6565 705f 7365 636f  sleep(sleep_seco
+00021ef0: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
+00021f00: 6c66 2e71 7565 7279 5f63 6f75 6e74 202b  lf.query_count +
+00021f10: 3d20 310d 0a20 2020 2020 2020 2072 6574  = 1..        ret
+00021f20: 7572 6e20 6461 7461 2069 6620 6973 5f64  urn data if is_d
+00021f30: 6574 6169 6c5f 7265 7375 6c74 2065 6c73  etail_result els
+00021f40: 6520 6a73 6f6e 2e6c 6f61 6473 2864 6174  e json.loads(dat
+00021f50: 615b 2764 6174 6127 5d29 5b27 7472 616e  a['data'])['tran
+00021f60: 735f 7265 7375 6c74 275d 5b27 6473 7427  s_result']['dst'
+00021f70: 5d0d 0a0d 0a0d 0a63 6c61 7373 2049 666c  ]......class Ifl
+00021f80: 7972 6563 2854 7365 293a 0d0a 2020 2020  yrec(Tse):..    
+00021f90: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+00021fa0: 6629 3a0d 0a20 2020 2020 2020 2073 7570  f):..        sup
+00021fb0: 6572 2829 2e5f 5f69 6e69 745f 5f28 290d  er().__init__().
+00021fc0: 0a20 2020 2020 2020 2073 656c 662e 6265  .        self.be
+00021fd0: 6769 6e5f 7469 6d65 203d 2074 696d 652e  gin_time = time.
+00021fe0: 7469 6d65 2829 0d0a 2020 2020 2020 2020  time()..        
+00021ff0: 7365 6c66 2e68 6f73 745f 7572 6c20 3d20  self.host_url = 
+00022000: 2768 7474 7073 3a2f 2f66 616e 7969 2e69  'https://fanyi.i
+00022010: 666c 7972 6563 2e63 6f6d 270d 0a20 2020  flyrec.com'..   
+00022020: 2020 2020 2073 656c 662e 6170 695f 7572       self.api_ur
+00022030: 6c20 3d20 2768 7474 7073 3a2f 2f66 616e  l = 'https://fan
+00022040: 7969 2e69 666c 7972 6563 2e63 6f6d 2f54  yi.iflyrec.com/T
+00022050: 7261 6e73 6c61 7469 6f6e 5365 7276 6963  ranslationServic
+00022060: 652f 7631 2f74 6578 7441 7574 6f54 7261  e/v1/textAutoTra
+00022070: 6e73 6c61 7469 6f6e 270d 0a20 2020 2020  nslation'..     
+00022080: 2020 2073 656c 662e 6465 7465 6374 5f6c     self.detect_l
+00022090: 616e 675f 7572 6c20 3d20 2768 7474 7073  ang_url = 'https
+000220a0: 3a2f 2f66 616e 7969 2e69 666c 7972 6563  ://fanyi.iflyrec
+000220b0: 2e63 6f6d 2f54 7261 6e73 6c61 7469 6f6e  .com/Translation
+000220c0: 5365 7276 6963 652f 7631 2f6c 616e 6775  Service/v1/langu
+000220d0: 6167 6544 6574 6563 7469 6f6e 270d 0a20  ageDetection'.. 
+000220e0: 2020 2020 2020 2073 656c 662e 6c61 6e67         self.lang
+000220f0: 7561 6765 5f75 726c 203d 2027 6874 7470  uage_url = 'http
+00022100: 733a 2f2f 6661 6e79 692e 6966 6c79 7265  s://fanyi.iflyre
+00022110: 632e 636f 6d2f 5472 616e 736c 6174 696f  c.com/Translatio
+00022120: 6e53 6572 7669 6365 2f76 312f 7465 7874  nService/v1/text
+00022130: 5472 616e 736c 6174 696f 6e2f 6c61 6e67  Translation/lang
+00022140: 7561 6765 7327 0d0a 2020 2020 2020 2020  uages'..        
+00022150: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
+00022160: 7320 3d20 7365 6c66 2e67 6574 5f68 6561  s = self.get_hea
+00022170: 6465 7273 2873 656c 662e 686f 7374 5f75  ders(self.host_u
+00022180: 726c 2c20 6966 5f61 7069 3d46 616c 7365  rl, if_api=False
+00022190: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+000221a0: 6170 695f 6865 6164 6572 7320 3d20 7365  api_headers = se
+000221b0: 6c66 2e67 6574 5f68 6561 6465 7273 2873  lf.get_headers(s
+000221c0: 656c 662e 686f 7374 5f75 726c 2c20 6966  elf.host_url, if
+000221d0: 5f61 7069 3d54 7275 652c 2069 665f 6a73  _api=True, if_js
+000221e0: 6f6e 5f66 6f72 5f61 7069 3d54 7275 6529  on_for_api=True)
+000221f0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6c  ..        self.l
+00022200: 616e 675f 696e 6465 7820 3d20 7b27 7a68  ang_index = {'zh
+00022210: 273a 2031 2c20 2765 6e27 3a20 322c 2027  ': 1, 'en': 2, '
+00022220: 6a61 273a 2033 2c20 276b 6f27 3a20 342c  ja': 3, 'ko': 4,
+00022230: 2027 7275 273a 2035 2c20 2766 7227 3a20   'ru': 5, 'fr': 
+00022240: 362c 2027 6573 273a 2037 2c20 2776 6927  6, 'es': 7, 'vi'
+00022250: 3a20 382c 2027 7975 6527 3a20 392c 2027  : 8, 'yue': 9, '
+00022260: 6172 273a 2031 322c 2027 6465 273a 2031  ar': 12, 'de': 1
+00022270: 332c 2027 6974 273a 2031 347d 0d0a 2020  3, 'it': 14}..  
+00022280: 2020 2020 2020 7365 6c66 2e6c 616e 675f        self.lang_
+00022290: 696e 6465 785f 6d69 7272 6f72 203d 207b  index_mirror = {
+000222a0: 763a 206b 2066 6f72 206b 2c20 7620 696e  v: k for k, v in
+000222b0: 2073 656c 662e 6c61 6e67 5f69 6e64 6578   self.lang_index
+000222c0: 2e69 7465 6d73 2829 7d0d 0a20 2020 2020  .items()}..     
+000222d0: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
+000222e0: 5f6d 6170 203d 204e 6f6e 650d 0a20 2020  _map = None..   
+000222f0: 2020 2020 2073 656c 662e 7365 7373 696f       self.sessio
+00022300: 6e20 3d20 4e6f 6e65 0d0a 2020 2020 2020  n = None..      
+00022310: 2020 7365 6c66 2e71 7565 7279 5f63 6f75    self.query_cou
+00022320: 6e74 203d 2030 0d0a 2020 2020 2020 2020  nt = 0..        
+00022330: 7365 6c66 2e6f 7574 7075 745f 7a68 203d  self.output_zh =
+00022340: 2027 7a68 270d 0a20 2020 2020 2020 2073   'zh'..        s
+00022350: 656c 662e 696e 7075 745f 6c69 6d69 7420  elf.input_limit 
+00022360: 3d20 696e 7428 3265 3329 0d0a 2020 2020  = int(2e3)..    
+00022370: 2020 2020 7365 6c66 2e64 6566 6175 6c74      self.default
+00022380: 5f66 726f 6d5f 6c61 6e67 7561 6765 203d  _from_language =
+00022390: 2073 656c 662e 6f75 7470 7574 5f7a 680d   self.output_zh.
+000223a0: 0a0d 0a20 2020 2040 5473 652e 6465 6275  ...    @Tse.debu
+000223b0: 675f 6c61 6e67 7561 6765 5f6d 6170 0d0a  g_language_map..
+000223c0: 2020 2020 6465 6620 6765 745f 6c61 6e67      def get_lang
+000223d0: 7561 6765 5f6d 6170 2873 656c 662c 206c  uage_map(self, l
+000223e0: 616e 675f 696e 6465 783a 2064 6963 742c  ang_index: dict,
+000223f0: 202a 2a6b 7761 7267 733a 204c 616e 674d   **kwargs: LangM
+00022400: 6170 4b77 6172 6773 5479 7065 2920 2d3e  apKwargsType) ->
+00022410: 2064 6963 743a 0d0a 2020 2020 2020 2020   dict:..        
+00022420: 6c61 6e67 5f6c 6973 7420 3d20 736f 7274  lang_list = sort
+00022430: 6564 286c 6973 7428 6c61 6e67 5f69 6e64  ed(list(lang_ind
+00022440: 6578 2e6b 6579 7328 2929 290d 0a20 2020  ex.keys()))..   
+00022450: 2020 2020 206c 616e 675f 6d61 7020 3d20       lang_map = 
+00022460: 7b6c 616e 673a 205b 277a 6827 5d20 666f  {lang: ['zh'] fo
+00022470: 7220 6c61 6e67 2069 6e20 6c61 6e67 5f6c  r lang in lang_l
+00022480: 6973 7420 6966 206c 616e 6720 213d 2027  ist if lang != '
+00022490: 7a68 277d 0d0a 2020 2020 2020 2020 7265  zh'}..        re
+000224a0: 7475 726e 207b 2a2a 6c61 6e67 5f6d 6170  turn {**lang_map
+000224b0: 2c20 2a2a 7b27 7a68 273a 206c 616e 675f  , **{'zh': lang_
+000224c0: 6c69 7374 7d7d 0d0a 0d0a 2020 2020 4054  list}}....    @T
+000224d0: 7365 2e74 696d 655f 7374 6174 0d0a 2020  se.time_stat..  
+000224e0: 2020 4054 7365 2e63 6865 636b 5f71 7565    @Tse.check_que
+000224f0: 7279 0d0a 2020 2020 6465 6620 6966 6c79  ry..    def ifly
+00022500: 7265 635f 6170 6928 7365 6c66 2c20 7175  rec_api(self, qu
+00022510: 6572 795f 7465 7874 3a20 7374 722c 2066  ery_text: str, f
+00022520: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
+00022530: 7220 3d20 2761 7574 6f27 2c20 746f 5f6c  r = 'auto', to_l
+00022540: 616e 6775 6167 653a 2073 7472 203d 2027  anguage: str = '
+00022550: 656e 272c 202a 2a6b 7761 7267 733a 2041  en', **kwargs: A
+00022560: 7069 4b77 6172 6773 5479 7065 2920 2d3e  piKwargsType) ->
+00022570: 2055 6e69 6f6e 5b73 7472 2c20 6469 6374   Union[str, dict
+00022580: 5d3a 0d0a 2020 2020 2020 2020 2222 220d  ]:..        """.
+00022590: 0a20 2020 2020 2020 2068 7474 7073 3a2f  .        https:/
+000225a0: 2f66 616e 7969 2e69 666c 7972 6563 2e63  /fanyi.iflyrec.c
+000225b0: 6f6d 0d0a 2020 2020 2020 2020 3a70 6172  om..        :par
+000225c0: 616d 2071 7565 7279 5f74 6578 743a 2073  am query_text: s
+000225d0: 7472 2c20 6d75 7374 2e0d 0a20 2020 2020  tr, must...     
+000225e0: 2020 203a 7061 7261 6d20 6672 6f6d 5f6c     :param from_l
+000225f0: 616e 6775 6167 653a 2073 7472 2c20 6465  anguage: str, de
+00022600: 6661 756c 7420 2761 7574 6f27 2e0d 0a20  fault 'auto'... 
+00022610: 2020 2020 2020 203a 7061 7261 6d20 746f         :param to
+00022620: 5f6c 616e 6775 6167 653a 2073 7472 2c20  _language: str, 
+00022630: 6465 6661 756c 7420 2765 6e27 2e0d 0a20  default 'en'... 
+00022640: 2020 2020 2020 203a 7061 7261 6d20 2a2a         :param **
+00022650: 6b77 6172 6773 3a0d 0a20 2020 2020 2020  kwargs:..       
+00022660: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+00022670: 7469 6d65 6f75 743a 2066 6c6f 6174 2c20  timeout: float, 
+00022680: 6465 6661 756c 7420 4e6f 6e65 2e0d 0a20  default None... 
+00022690: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+000226a0: 7061 7261 6d20 7072 6f78 6965 733a 2064  param proxies: d
+000226b0: 6963 742c 2064 6566 6175 6c74 204e 6f6e  ict, default Non
+000226c0: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+000226d0: 2020 2020 3a70 6172 616d 2073 6c65 6570      :param sleep
+000226e0: 5f73 6563 6f6e 6473 3a20 666c 6f61 742c  _seconds: float,
+000226f0: 2064 6566 6175 6c74 2030 2e0d 0a20 2020   default 0...   
+00022700: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00022710: 7261 6d20 6973 5f64 6574 6169 6c5f 7265  ram is_detail_re
+00022720: 7375 6c74 3a20 626f 6f6c 2c20 6465 6661  sult: bool, defa
+00022730: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+00022740: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00022750: 616d 2069 665f 6967 6e6f 7265 5f6c 696d  am if_ignore_lim
+00022760: 6974 5f6f 665f 6c65 6e67 7468 3a20 626f  it_of_length: bo
+00022770: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
+00022780: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+00022790: 2020 2020 3a70 6172 616d 206c 696d 6974      :param limit
+000227a0: 5f6f 665f 6c65 6e67 7468 3a20 696e 742c  _of_length: int,
+000227b0: 2064 6566 6175 6c74 2032 3030 3030 2e0d   default 20000..
+000227c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000227d0: 203a 7061 7261 6d20 6966 5f69 676e 6f72   :param if_ignor
+000227e0: 655f 656d 7074 795f 7175 6572 793a 2062  e_empty_query: b
+000227f0: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
+00022800: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
+00022810: 2020 2020 203a 7061 7261 6d20 7570 6461       :param upda
+00022820: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+00022830: 5f66 7265 713a 2069 6e74 2c20 6465 6661  _freq: int, defa
+00022840: 756c 7420 3130 3030 2e0d 0a20 2020 2020  ult 1000...     
+00022850: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00022860: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
+00022870: 5f61 6674 6572 5f73 6563 6f6e 6473 3a20  _after_seconds: 
+00022880: 666c 6f61 742c 2064 6566 6175 6c74 2031  float, default 1
+00022890: 3530 302e 0d0a 2020 2020 2020 2020 2020  500...          
+000228a0: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
+000228b0: 7368 6f77 5f74 696d 655f 7374 6174 3a20  show_time_stat: 
+000228c0: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
+000228d0: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
+000228e0: 2020 2020 2020 3a70 6172 616d 2073 686f        :param sho
+000228f0: 775f 7469 6d65 5f73 7461 745f 7072 6563  w_time_stat_prec
+00022900: 6973 696f 6e3a 2069 6e74 2c20 6465 6661  ision: int, defa
+00022910: 756c 7420 322e 0d0a 2020 2020 2020 2020  ult 2...        
+00022920: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00022930: 665f 7072 696e 745f 7761 726e 696e 673a  f_print_warning:
+00022940: 2062 6f6f 6c2c 2064 6566 6175 6c74 2054   bool, default T
+00022950: 7275 652e 0d0a 2020 2020 2020 2020 3a72  rue...        :r
+00022960: 6574 7572 6e3a 2073 7472 206f 7220 6469  eturn: str or di
+00022970: 6374 0d0a 2020 2020 2020 2020 2222 220d  ct..        """.
+00022980: 0a0d 0a20 2020 2020 2020 2074 696d 656f  ...        timeo
+00022990: 7574 203d 206b 7761 7267 732e 6765 7428  ut = kwargs.get(
+000229a0: 2774 696d 656f 7574 272c 204e 6f6e 6529  'timeout', None)
+000229b0: 0d0a 2020 2020 2020 2020 7072 6f78 6965  ..        proxie
+000229c0: 7320 3d20 6b77 6172 6773 2e67 6574 2827  s = kwargs.get('
+000229d0: 7072 6f78 6965 7327 2c20 4e6f 6e65 290d  proxies', None).
+000229e0: 0a20 2020 2020 2020 2073 6c65 6570 5f73  .        sleep_s
+000229f0: 6563 6f6e 6473 203d 206b 7761 7267 732e  econds = kwargs.
+00022a00: 6765 7428 2773 6c65 6570 5f73 6563 6f6e  get('sleep_secon
+00022a10: 6473 272c 2030 290d 0a20 2020 2020 2020  ds', 0)..       
+00022a20: 2069 665f 7072 696e 745f 7761 726e 696e   if_print_warnin
+00022a30: 6720 3d20 6b77 6172 6773 2e67 6574 2827  g = kwargs.get('
+00022a40: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
+00022a50: 272c 2054 7275 6529 0d0a 2020 2020 2020  ', True)..      
+00022a60: 2020 6973 5f64 6574 6169 6c5f 7265 7375    is_detail_resu
+00022a70: 6c74 203d 206b 7761 7267 732e 6765 7428  lt = kwargs.get(
+00022a80: 2769 735f 6465 7461 696c 5f72 6573 756c  'is_detail_resul
+00022a90: 7427 2c20 4661 6c73 6529 0d0a 2020 2020  t', False)..    
+00022aa0: 2020 2020 7570 6461 7465 5f73 6573 7369      update_sessi
+00022ab0: 6f6e 5f61 6674 6572 5f66 7265 7120 3d20  on_after_freq = 
+00022ac0: 6b77 6172 6773 2e67 6574 2827 7570 6461  kwargs.get('upda
+00022ad0: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+00022ae0: 5f66 7265 7127 2c20 7365 6c66 2e64 6566  _freq', self.def
+00022af0: 6175 6c74 5f73 6573 7369 6f6e 5f66 7265  ault_session_fre
+00022b00: 7129 0d0a 2020 2020 2020 2020 7570 6461  q)..        upda
+00022b10: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+00022b20: 5f73 6563 6f6e 6473 203d 206b 7761 7267  _seconds = kwarg
+00022b30: 732e 6765 7428 2775 7064 6174 655f 7365  s.get('update_se
+00022b40: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
+00022b50: 6e64 7327 2c20 7365 6c66 2e64 6566 6175  nds', self.defau
+00022b60: 6c74 5f73 6573 7369 6f6e 5f73 6563 6f6e  lt_session_secon
+00022b70: 6473 290d 0a20 2020 2020 2020 2073 656c  ds)..        sel
+00022b80: 662e 6368 6563 6b5f 696e 7075 745f 6c69  f.check_input_li
+00022b90: 6d69 7428 7175 6572 795f 7465 7874 2c20  mit(query_text, 
+00022ba0: 7365 6c66 2e69 6e70 7574 5f6c 696d 6974  self.input_limit
+00022bb0: 290d 0a0d 0a20 2020 2020 2020 206e 6f74  )....        not
+00022bc0: 5f75 7064 6174 655f 636f 6e64 5f66 7265  _update_cond_fre
+00022bd0: 7120 3d20 3120 6966 2073 656c 662e 7175  q = 1 if self.qu
+00022be0: 6572 795f 636f 756e 7420 2520 7570 6461  ery_count % upda
+00022bf0: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+00022c00: 5f66 7265 7120 213d 2030 2065 6c73 6520  _freq != 0 else 
+00022c10: 300d 0a20 2020 2020 2020 206e 6f74 5f75  0..        not_u
+00022c20: 7064 6174 655f 636f 6e64 5f74 696d 6520  pdate_cond_time 
+00022c30: 3d20 3120 6966 2074 696d 652e 7469 6d65  = 1 if time.time
+00022c40: 2829 202d 2073 656c 662e 6265 6769 6e5f  () - self.begin_
+00022c50: 7469 6d65 203c 2075 7064 6174 655f 7365  time < update_se
+00022c60: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
+00022c70: 6e64 7320 656c 7365 2030 0d0a 2020 2020  nds else 0..    
+00022c80: 2020 2020 6966 206e 6f74 2028 7365 6c66      if not (self
+00022c90: 2e73 6573 7369 6f6e 2061 6e64 2073 656c  .session and sel
+00022ca0: 662e 6c61 6e67 7561 6765 5f6d 6170 2061  f.language_map a
+00022cb0: 6e64 206e 6f74 5f75 7064 6174 655f 636f  nd not_update_co
+00022cc0: 6e64 5f66 7265 7120 616e 6420 6e6f 745f  nd_freq and not_
+00022cd0: 7570 6461 7465 5f63 6f6e 645f 7469 6d65  update_cond_time
+00022ce0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00022cf0: 7365 6c66 2e62 6567 696e 5f74 696d 6520  self.begin_time 
+00022d00: 3d20 7469 6d65 2e74 696d 6528 290d 0a20  = time.time().. 
+00022d10: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00022d20: 7365 7373 696f 6e20 3d20 7265 7175 6573  session = reques
+00022d30: 7473 2e53 6573 7369 6f6e 2829 0d0a 2020  ts.Session()..  
+00022d40: 2020 2020 2020 2020 2020 5f20 3d20 7365            _ = se
+00022d50: 6c66 2e73 6573 7369 6f6e 2e67 6574 2873  lf.session.get(s
+00022d60: 656c 662e 686f 7374 5f75 726c 2c20 6865  elf.host_url, he
+00022d70: 6164 6572 733d 7365 6c66 2e68 6f73 745f  aders=self.host_
+00022d80: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
+00022d90: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
+00022da0: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
+00022db0: 2020 2020 2020 2020 6465 6275 675f 6c61          debug_la
+00022dc0: 6e67 5f6b 7761 7267 7320 3d20 7365 6c66  ng_kwargs = self
+00022dd0: 2e64 6562 7567 5f6c 616e 675f 6b77 6172  .debug_lang_kwar
+00022de0: 6773 2866 726f 6d5f 6c61 6e67 7561 6765  gs(from_language
+00022df0: 2c20 746f 5f6c 616e 6775 6167 652c 2073  , to_language, s
+00022e00: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
+00022e10: 5f6c 616e 6775 6167 652c 2069 665f 7072  _language, if_pr
+00022e20: 696e 745f 7761 726e 696e 6729 0d0a 2020  int_warning)..  
+00022e30: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
+00022e40: 616e 6775 6167 655f 6d61 7020 3d20 7365  anguage_map = se
+00022e50: 6c66 2e67 6574 5f6c 616e 6775 6167 655f  lf.get_language_
+00022e60: 6d61 7028 7365 6c66 2e6c 616e 675f 696e  map(self.lang_in
+00022e70: 6465 782c 202a 2a64 6562 7567 5f6c 616e  dex, **debug_lan
+00022e80: 675f 6b77 6172 6773 290d 0a0d 0a20 2020  g_kwargs)....   
+00022e90: 2020 2020 2069 6620 6672 6f6d 5f6c 616e       if from_lan
+00022ea0: 6775 6167 6520 3d3d 2027 6175 746f 273a  guage == 'auto':
+00022eb0: 0d0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
+00022ec0: 7261 6d73 203d 207b 2774 273a 2073 656c  rams = {'t': sel
+00022ed0: 662e 6765 745f 7469 6d65 7374 616d 7028  f.get_timestamp(
+00022ee0: 297d 0d0a 2020 2020 2020 2020 2020 2020  )}..            
+00022ef0: 666f 726d 203d 207b 276f 7269 6769 6e61  form = {'origina
+00022f00: 6c54 6578 7427 3a20 7175 6572 795f 7465  lText': query_te
+00022f10: 7874 7d0d 0a20 2020 2020 2020 2020 2020  xt}..           
+00022f20: 2064 6574 6563 745f 7220 3d20 7365 6c66   detect_r = self
+00022f30: 2e73 6573 7369 6f6e 2e70 6f73 7428 7365  .session.post(se
+00022f40: 6c66 2e64 6574 6563 745f 6c61 6e67 5f75  lf.detect_lang_u
+00022f50: 726c 2c20 7061 7261 6d73 3d70 6172 616d  rl, params=param
+00022f60: 732c 206a 736f 6e3d 666f 726d 2c20 6865  s, json=form, he
+00022f70: 6164 6572 733d 7365 6c66 2e61 7069 5f68  aders=self.api_h
+00022f80: 6561 6465 7273 2c20 7469 6d65 6f75 743d  eaders, timeout=
+00022f90: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
+00022fa0: 3d70 726f 7869 6573 290d 0a20 2020 2020  =proxies)..     
+00022fb0: 2020 2020 2020 2066 726f 6d5f 6c61 6e67         from_lang
+00022fc0: 7561 6765 5f69 6420 3d20 6465 7465 6374  uage_id = detect
+00022fd0: 5f72 2e6a 736f 6e28 295b 2762 697a 275d  _r.json()['biz']
+00022fe0: 5b30 5d5b 2764 6574 6563 7469 6f6e 4c61  [0]['detectionLa
+00022ff0: 6e67 7561 6765 275d 0d0a 2020 2020 2020  nguage']..      
+00023000: 2020 2020 2020 6672 6f6d 5f6c 616e 6775        from_langu
+00023010: 6167 6520 3d20 7365 6c66 2e6c 616e 675f  age = self.lang_
+00023020: 696e 6465 785f 6d69 7272 6f72 5b66 726f  index_mirror[fro
+00023030: 6d5f 6c61 6e67 7561 6765 5f69 645d 0d0a  m_language_id]..
+00023040: 2020 2020 2020 2020 6672 6f6d 5f6c 616e          from_lan
+00023050: 6775 6167 652c 2074 6f5f 6c61 6e67 7561  guage, to_langua
+00023060: 6765 203d 2073 656c 662e 6368 6563 6b5f  ge = self.check_
+00023070: 6c61 6e67 7561 6765 2866 726f 6d5f 6c61  language(from_la
+00023080: 6e67 7561 6765 2c20 746f 5f6c 616e 6775  nguage, to_langu
+00023090: 6167 652c 2073 656c 662e 6c61 6e67 7561  age, self.langua
+000230a0: 6765 5f6d 6170 2c20 6f75 7470 7574 5f7a  ge_map, output_z
+000230b0: 683d 7365 6c66 2e6f 7574 7075 745f 7a68  h=self.output_zh
+000230c0: 290d 0a0d 0a20 2020 2020 2020 2061 7069  )....        api
+000230d0: 5f70 6172 616d 7320 3d20 7b27 7427 3a20  _params = {'t': 
+000230e0: 7365 6c66 2e67 6574 5f74 696d 6573 7461  self.get_timesta
+000230f0: 6d70 2829 7d0d 0a20 2020 2020 2020 2061  mp()}..        a
+00023100: 7069 5f66 6f72 6d20 3d20 7b0d 0a20 2020  pi_form = {..   
+00023110: 2020 2020 2020 2020 2027 6672 6f6d 273a           'from':
+00023120: 2073 656c 662e 6c61 6e67 5f69 6e64 6578   self.lang_index
+00023130: 5b66 726f 6d5f 6c61 6e67 7561 6765 5d2c  [from_language],
+00023140: 0d0a 2020 2020 2020 2020 2020 2020 2774  ..            't
+00023150: 6f27 3a20 7365 6c66 2e6c 616e 675f 696e  o': self.lang_in
+00023160: 6465 785b 746f 5f6c 616e 6775 6167 655d  dex[to_language]
+00023170: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+00023180: 6f70 656e 5465 726d 696e 6f6c 6f67 7927  openTerminology'
+00023190: 3a20 2766 616c 7365 272c 0d0a 2020 2020  : 'false',..    
+000231a0: 2020 2020 2020 2020 2763 6f6e 7465 6e74          'content
+000231b0: 7327 3a20 5b7b 2774 6578 7427 3a20 742e  s': [{'text': t.
+000231c0: 7374 7269 7028 292c 2027 6672 6f6e 7442  strip(), 'frontB
+000231d0: 6c61 6e6b 4c69 6e65 273a 2030 7d20 666f  lankLine': 0} fo
+000231e0: 7220 7420 696e 2071 7565 7279 5f74 6578  r t in query_tex
+000231f0: 742e 7370 6c69 7428 275c 6e27 2920 6966  t.split('\n') if
+00023200: 2074 2e73 7472 6970 2829 2021 3d20 2727   t.strip() != ''
+00023210: 5d2c 0d0a 2020 2020 2020 2020 7d0d 0a20  ],..        }.. 
+00023220: 2020 2020 2020 2072 203d 2073 656c 662e         r = self.
+00023230: 7365 7373 696f 6e2e 706f 7374 2873 656c  session.post(sel
+00023240: 662e 6170 695f 7572 6c2c 2070 6172 616d  f.api_url, param
+00023250: 733d 6170 695f 7061 7261 6d73 2c20 6a73  s=api_params, js
+00023260: 6f6e 3d61 7069 5f66 6f72 6d2c 2068 6561  on=api_form, hea
+00023270: 6465 7273 3d73 656c 662e 6170 695f 6865  ders=self.api_he
+00023280: 6164 6572 732c 2074 696d 656f 7574 3d74  aders, timeout=t
+00023290: 696d 656f 7574 2c20 7072 6f78 6965 733d  imeout, proxies=
+000232a0: 7072 6f78 6965 7329 0d0a 2020 2020 2020  proxies)..      
+000232b0: 2020 722e 7261 6973 655f 666f 725f 7374    r.raise_for_st
+000232c0: 6174 7573 2829 0d0a 2020 2020 2020 2020  atus()..        
+000232d0: 6461 7461 203d 2072 2e6a 736f 6e28 290d  data = r.json().
+000232e0: 0a20 2020 2020 2020 2074 696d 652e 736c  .        time.sl
+000232f0: 6565 7028 736c 6565 705f 7365 636f 6e64  eep(sleep_second
+00023300: 7329 0d0a 2020 2020 2020 2020 7365 6c66  s)..        self
+00023310: 2e71 7565 7279 5f63 6f75 6e74 202b 3d20  .query_count += 
+00023320: 310d 0a20 2020 2020 2020 2072 6574 7572  1..        retur
+00023330: 6e20 6461 7461 2069 6620 6973 5f64 6574  n data if is_det
+00023340: 6169 6c5f 7265 7375 6c74 2065 6c73 6520  ail_result else 
+00023350: 275c 6e27 2e6a 6f69 6e28 5b69 7465 6d5b  '\n'.join([item[
+00023360: 2774 7261 6e73 6c61 7465 5265 7375 6c74  'translateResult
+00023370: 275d 2066 6f72 2069 7465 6d20 696e 2064  '] for item in d
+00023380: 6174 615b 2762 697a 275d 5d29 0d0a 0d0a  ata['biz']])....
+00023390: 0d0a 636c 6173 7320 5265 7665 7273 6f28  ..class Reverso(
+000233a0: 5473 6529 3a0d 0a20 2020 2064 6566 205f  Tse):..    def _
+000233b0: 5f69 6e69 745f 5f28 7365 6c66 293a 0d0a  _init__(self):..
+000233c0: 2020 2020 2020 2020 7375 7065 7228 292e          super().
+000233d0: 5f5f 696e 6974 5f5f 2829 0d0a 2020 2020  __init__()..    
+000233e0: 2020 2020 7365 6c66 2e62 6567 696e 5f74      self.begin_t
+000233f0: 696d 6520 3d20 7469 6d65 2e74 696d 6528  ime = time.time(
+00023400: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00023410: 686f 7374 5f75 726c 203d 2027 6874 7470  host_url = 'http
+00023420: 733a 2f2f 7777 772e 7265 7665 7273 6f2e  s://www.reverso.
+00023430: 6e65 742f 7465 7874 2d74 7261 6e73 6c61  net/text-transla
+00023440: 7469 6f6e 270d 0a20 2020 2020 2020 2073  tion'..        s
+00023450: 656c 662e 6170 695f 7572 6c20 3d20 2768  elf.api_url = 'h
+00023460: 7474 7073 3a2f 2f61 7069 2e72 6576 6572  ttps://api.rever
+00023470: 736f 2e6e 6574 2f74 7261 6e73 6c61 7465  so.net/translate
+00023480: 2f76 312f 7472 616e 736c 6174 696f 6e27  /v1/translation'
+00023490: 0d0a 2020 2020 2020 2020 7365 6c66 2e6c  ..        self.l
+000234a0: 616e 6775 6167 655f 7572 6c20 3d20 4e6f  anguage_url = No
+000234b0: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
+000234c0: 2e6c 616e 6775 6167 655f 7061 7474 6572  .language_patter
+000234d0: 6e20 3d20 2768 7474 7073 3a2f 2f63 646e  n = 'https://cdn
+000234e0: 2e72 6576 6572 736f 2e6e 6574 2f74 7261  .reverso.net/tra
+000234f0: 6e73 2f76 285c 5c64 2b29 2e28 5c5c 642b  ns/v(\\d+).(\\d+
+00023500: 292e 285c 5c64 2b29 2f6d 6169 6e2e 6a73  ).(\\d+)/main.js
+00023510: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+00023520: 686f 7374 5f68 6561 6465 7273 203d 2073  host_headers = s
+00023530: 656c 662e 6765 745f 6865 6164 6572 7328  elf.get_headers(
+00023540: 7365 6c66 2e68 6f73 745f 7572 6c2c 2069  self.host_url, i
+00023550: 665f 6170 693d 4661 6c73 6529 0d0a 2020  f_api=False)..  
+00023560: 2020 2020 2020 7365 6c66 2e61 7069 5f68        self.api_h
+00023570: 6561 6465 7273 203d 2073 656c 662e 6765  eaders = self.ge
+00023580: 745f 6865 6164 6572 7328 7365 6c66 2e68  t_headers(self.h
+00023590: 6f73 745f 7572 6c2c 2069 665f 6170 693d  ost_url, if_api=
+000235a0: 5472 7565 2c20 6966 5f6a 736f 6e5f 666f  True, if_json_fo
+000235b0: 725f 6170 693d 5472 7565 290d 0a20 2020  r_api=True)..   
+000235c0: 2020 2020 2073 656c 662e 7365 7373 696f       self.sessio
+000235d0: 6e20 3d20 4e6f 6e65 0d0a 2020 2020 2020  n = None..      
+000235e0: 2020 7365 6c66 2e6c 616e 6775 6167 655f    self.language_
+000235f0: 6d61 7020 3d20 4e6f 6e65 0d0a 2020 2020  map = None..    
+00023600: 2020 2020 7365 6c66 2e64 6563 7279 7074      self.decrypt
+00023610: 5f6c 616e 6775 6167 655f 6d61 7020 3d20  _language_map = 
+00023620: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
+00023630: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
+00023640: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
+00023650: 2e6f 7574 7075 745f 7a68 203d 2027 7a68  .output_zh = 'zh
+00023660: 2720 2023 2027 6368 6927 2c20 6265 6361  '  # 'chi', beca
+00023670: 7573 6520 7468 6572 6520 6172 6520 7365  use there are se
+00023680: 6c66 2e6c 616e 6775 6167 655f 7472 616e  lf.language_tran
+00023690: 0d0a 2020 2020 2020 2020 7365 6c66 2e69  ..        self.i
+000236a0: 6e70 7574 5f6c 696d 6974 203d 2069 6e74  nput_limit = int
+000236b0: 2832 6533 290d 0a20 2020 2020 2020 2073  (2e3)..        s
+000236c0: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
+000236d0: 5f6c 616e 6775 6167 6520 3d20 7365 6c66  _language = self
+000236e0: 2e6f 7574 7075 745f 7a68 0d0a 0d0a 2020  .output_zh....  
+000236f0: 2020 4054 7365 2e64 6562 7567 5f6c 616e    @Tse.debug_lan
+00023700: 6775 6167 655f 6d61 700d 0a20 2020 2064  guage_map..    d
+00023710: 6566 2067 6574 5f6c 616e 6775 6167 655f  ef get_language_
+00023720: 6d61 7028 7365 6c66 2c20 6c61 6e67 5f68  map(self, lang_h
+00023730: 746d 6c3a 2073 7472 2c20 2a2a 6b77 6172  tml: str, **kwar
+00023740: 6773 3a20 4c61 6e67 4d61 704b 7761 7267  gs: LangMapKwarg
+00023750: 7354 7970 6529 202d 3e20 6469 6374 3a0d  sType) -> dict:.
+00023760: 0a20 2020 2020 2020 206c 616e 675f 6469  .        lang_di
+00023770: 6374 5f73 7472 203d 2072 652e 636f 6d70  ct_str = re.comp
+00023780: 696c 6528 273d 7b65 6e67 3a28 2e2a 3f29  ile('={eng:(.*?)
+00023790: 7d27 292e 7365 6172 6368 286c 616e 675f  }').search(lang_
+000237a0: 6874 6d6c 292e 6772 6f75 7028 295b 313a  html).group()[1:
+000237b0: 5d0d 0a20 2020 2020 2020 206c 616e 675f  ]..        lang_
+000237c0: 6469 6374 203d 2065 7865 636a 732e 6576  dict = execjs.ev
+000237d0: 616c 286c 616e 675f 6469 6374 5f73 7472  al(lang_dict_str
+000237e0: 290d 0a20 2020 2020 2020 206c 616e 675f  )..        lang_
+000237f0: 6c69 7374 203d 2073 6f72 7465 6428 6c69  list = sorted(li
+00023800: 7374 286c 616e 675f 6469 6374 2e76 616c  st(lang_dict.val
+00023810: 7565 7328 2929 290d 0a20 2020 2020 2020  ues()))..       
+00023820: 2072 6574 7572 6e20 7b7d 2e66 726f 6d6b   return {}.fromk
+00023830: 6579 7328 6c61 6e67 5f6c 6973 742c 206c  eys(lang_list, l
+00023840: 616e 675f 6c69 7374 290d 0a0d 0a20 2020  ang_list)....   
+00023850: 2064 6566 2064 6563 7279 7074 5f6c 616e   def decrypt_lan
+00023860: 675f 6d61 7028 7365 6c66 2c20 6c61 6e67  g_map(self, lang
+00023870: 5f68 746d 6c3a 2073 7472 2920 2d3e 2064  _html: str) -> d
+00023880: 6963 743a 0d0a 2020 2020 2020 2020 6c61  ict:..        la
+00023890: 6e67 5f64 6963 745f 7374 7220 3d20 7265  ng_dict_str = re
+000238a0: 2e63 6f6d 7069 6c65 2827 3d7b 656e 673a  .compile('={eng:
+000238b0: 282e 2a3f 297d 2729 2e73 6561 7263 6828  (.*?)}').search(
+000238c0: 6c61 6e67 5f68 746d 6c29 2e67 726f 7570  lang_html).group
+000238d0: 2829 5b31 3a5d 0d0a 2020 2020 2020 2020  ()[1:]..        
+000238e0: 6c61 6e67 5f64 6963 7420 3d20 6578 6563  lang_dict = exec
+000238f0: 6a73 2e65 7661 6c28 6c61 6e67 5f64 6963  js.eval(lang_dic
+00023900: 745f 7374 7229 0d0a 2020 2020 2020 2020  t_str)..        
+00023910: 7265 7475 726e 207b 6b3a 2076 2066 6f72  return {k: v for
+00023920: 2076 2c20 6b20 696e 206c 616e 675f 6469   v, k in lang_di
+00023930: 6374 2e69 7465 6d73 2829 7d0d 0a0d 0a20  ct.items()}.... 
+00023940: 2020 2040 5473 652e 7469 6d65 5f73 7461     @Tse.time_sta
+00023950: 740d 0a20 2020 2040 5473 652e 6368 6563  t..    @Tse.chec
+00023960: 6b5f 7175 6572 790d 0a20 2020 2064 6566  k_query..    def
+00023970: 2072 6576 6572 736f 5f61 7069 2873 656c   reverso_api(sel
+00023980: 662c 2071 7565 7279 5f74 6578 743a 2073  f, query_text: s
+00023990: 7472 2c20 6672 6f6d 5f6c 616e 6775 6167  tr, from_languag
+000239a0: 653a 2073 7472 203d 2027 6175 746f 272c  e: str = 'auto',
+000239b0: 2074 6f5f 6c61 6e67 7561 6765 3a20 7374   to_language: st
+000239c0: 7220 3d20 2765 6e27 2c20 2a2a 6b77 6172  r = 'en', **kwar
+000239d0: 6773 3a20 4170 694b 7761 7267 7354 7970  gs: ApiKwargsTyp
+000239e0: 6529 202d 3e20 556e 696f 6e5b 7374 722c  e) -> Union[str,
+000239f0: 2064 6963 745d 3a0d 0a20 2020 2020 2020   dict]:..       
+00023a00: 2022 2222 0d0a 2020 2020 2020 2020 6874   """..        ht
+00023a10: 7470 733a 2f2f 7777 772e 7265 7665 7273  tps://www.revers
+00023a20: 6f2e 6e65 742f 7465 7874 2d74 7261 6e73  o.net/text-trans
+00023a30: 6c61 7469 6f6e 0d0a 2020 2020 2020 2020  lation..        
+00023a40: 3a70 6172 616d 2071 7565 7279 5f74 6578  :param query_tex
+00023a50: 743a 2073 7472 2c20 6d75 7374 2e0d 0a20  t: str, must... 
+00023a60: 2020 2020 2020 203a 7061 7261 6d20 6672         :param fr
+00023a70: 6f6d 5f6c 616e 6775 6167 653a 2073 7472  om_language: str
+00023a80: 2c20 6465 6661 756c 7420 277a 6827 2c20  , default 'zh', 
+00023a90: 756e 7375 7070 6f72 7465 6420 2761 7574  unsupported 'aut
+00023aa0: 6f27 2e0d 0a20 2020 2020 2020 203a 7061  o'...        :pa
+00023ab0: 7261 6d20 746f 5f6c 616e 6775 6167 653a  ram to_language:
+00023ac0: 2073 7472 2c20 6465 6661 756c 7420 2765   str, default 'e
+00023ad0: 6e27 2e0d 0a20 2020 2020 2020 203a 7061  n'...        :pa
+00023ae0: 7261 6d20 2a2a 6b77 6172 6773 3a0d 0a20  ram **kwargs:.. 
+00023af0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00023b00: 7061 7261 6d20 7469 6d65 6f75 743a 2066  param timeout: f
+00023b10: 6c6f 6174 2c20 6465 6661 756c 7420 4e6f  loat, default No
+00023b20: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
+00023b30: 2020 2020 203a 7061 7261 6d20 7072 6f78       :param prox
+00023b40: 6965 733a 2064 6963 742c 2064 6566 6175  ies: dict, defau
+00023b50: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
+00023b60: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00023b70: 2073 6c65 6570 5f73 6563 6f6e 6473 3a20   sleep_seconds: 
+00023b80: 666c 6f61 742c 2064 6566 6175 6c74 2030  float, default 0
+00023b90: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00023ba0: 2020 203a 7061 7261 6d20 6973 5f64 6574     :param is_det
+00023bb0: 6169 6c5f 7265 7375 6c74 3a20 626f 6f6c  ail_result: bool
+00023bc0: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+00023bd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00023be0: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
+00023bf0: 7265 5f6c 696d 6974 5f6f 665f 6c65 6e67  re_limit_of_leng
+00023c00: 7468 3a20 626f 6f6c 2c20 6465 6661 756c  th: bool, defaul
+00023c10: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+00023c20: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00023c30: 206c 696d 6974 5f6f 665f 6c65 6e67 7468   limit_of_length
+00023c40: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
+00023c50: 3030 3030 2e0d 0a20 2020 2020 2020 2020  0000...         
+00023c60: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+00023c70: 5f69 676e 6f72 655f 656d 7074 795f 7175  _ignore_empty_qu
+00023c80: 6572 793a 2062 6f6f 6c2c 2064 6566 6175  ery: bool, defau
+00023c90: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+00023ca0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00023cb0: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
+00023cc0: 5f61 6674 6572 5f66 7265 713a 2069 6e74  _after_freq: int
+00023cd0: 2c20 6465 6661 756c 7420 3130 3030 2e0d  , default 1000..
+00023ce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023cf0: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
+00023d00: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+00023d10: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
+00023d20: 6175 6c74 2031 3530 302e 0d0a 2020 2020  ault 1500...    
+00023d30: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00023d40: 616d 2069 665f 7368 6f77 5f74 696d 655f  am if_show_time_
+00023d50: 7374 6174 3a20 626f 6f6c 2c20 6465 6661  stat: bool, defa
+00023d60: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+00023d70: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00023d80: 616d 2073 686f 775f 7469 6d65 5f73 7461  am show_time_sta
+00023d90: 745f 7072 6563 6973 696f 6e3a 2069 6e74  t_precision: int
+00023da0: 2c20 6465 6661 756c 7420 322e 0d0a 2020  , default 2...  
+00023db0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+00023dc0: 6172 616d 2069 665f 7072 696e 745f 7761  aram if_print_wa
+00023dd0: 726e 696e 673a 2062 6f6f 6c2c 2064 6566  rning: bool, def
+00023de0: 6175 6c74 2054 7275 652e 0d0a 2020 2020  ault True...    
+00023df0: 2020 2020 3a72 6574 7572 6e3a 2073 7472      :return: str
+00023e00: 206f 7220 6469 6374 0d0a 2020 2020 2020   or dict..      
+00023e10: 2020 2222 220d 0a0d 0a20 2020 2020 2020    """....       
+00023e20: 2074 696d 656f 7574 203d 206b 7761 7267   timeout = kwarg
+00023e30: 732e 6765 7428 2774 696d 656f 7574 272c  s.get('timeout',
+00023e40: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
+00023e50: 7072 6f78 6965 7320 3d20 6b77 6172 6773  proxies = kwargs
+00023e60: 2e67 6574 2827 7072 6f78 6965 7327 2c20  .get('proxies', 
+00023e70: 4e6f 6e65 290d 0a20 2020 2020 2020 2073  None)..        s
+00023e80: 6c65 6570 5f73 6563 6f6e 6473 203d 206b  leep_seconds = k
+00023e90: 7761 7267 732e 6765 7428 2773 6c65 6570  wargs.get('sleep
+00023ea0: 5f73 6563 6f6e 6473 272c 2030 290d 0a20  _seconds', 0).. 
+00023eb0: 2020 2020 2020 2069 665f 7072 696e 745f         if_print_
+00023ec0: 7761 726e 696e 6720 3d20 6b77 6172 6773  warning = kwargs
+00023ed0: 2e67 6574 2827 6966 5f70 7269 6e74 5f77  .get('if_print_w
+00023ee0: 6172 6e69 6e67 272c 2054 7275 6529 0d0a  arning', True)..
+00023ef0: 2020 2020 2020 2020 6973 5f64 6574 6169          is_detai
+00023f00: 6c5f 7265 7375 6c74 203d 206b 7761 7267  l_result = kwarg
+00023f10: 732e 6765 7428 2769 735f 6465 7461 696c  s.get('is_detail
+00023f20: 5f72 6573 756c 7427 2c20 4661 6c73 6529  _result', False)
+00023f30: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
+00023f40: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
+00023f50: 7265 7120 3d20 6b77 6172 6773 2e67 6574  req = kwargs.get
+00023f60: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
+00023f70: 5f61 6674 6572 5f66 7265 7127 2c20 7365  _after_freq', se
+00023f80: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
+00023f90: 6f6e 5f66 7265 7129 0d0a 2020 2020 2020  on_freq)..      
+00023fa0: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
+00023fb0: 5f61 6674 6572 5f73 6563 6f6e 6473 203d  _after_seconds =
+00023fc0: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
+00023fd0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+00023fe0: 725f 7365 636f 6e64 7327 2c20 7365 6c66  r_seconds', self
+00023ff0: 2e64 6566 6175 6c74 5f73 6573 7369 6f6e  .default_session
+00024000: 5f73 6563 6f6e 6473 290d 0a20 2020 2020  _seconds)..     
+00024010: 2020 2073 656c 662e 6368 6563 6b5f 696e     self.check_in
+00024020: 7075 745f 6c69 6d69 7428 7175 6572 795f  put_limit(query_
+00024030: 7465 7874 2c20 7365 6c66 2e69 6e70 7574  text, self.input
+00024040: 5f6c 696d 6974 290d 0a0d 0a20 2020 2020  _limit)....     
+00024050: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
+00024060: 6e64 5f66 7265 7120 3d20 3120 6966 2073  nd_freq = 1 if s
+00024070: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
+00024080: 2520 7570 6461 7465 5f73 6573 7369 6f6e  % update_session
+00024090: 5f61 6674 6572 5f66 7265 7120 213d 2030  _after_freq != 0
+000240a0: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
+000240b0: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
+000240c0: 5f74 696d 6520 3d20 3120 6966 2074 696d  _time = 1 if tim
+000240d0: 652e 7469 6d65 2829 202d 2073 656c 662e  e.time() - self.
+000240e0: 6265 6769 6e5f 7469 6d65 203c 2075 7064  begin_time < upd
+000240f0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+00024100: 725f 7365 636f 6e64 7320 656c 7365 2030  r_seconds else 0
+00024110: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
+00024120: 2028 7365 6c66 2e73 6573 7369 6f6e 2061   (self.session a
+00024130: 6e64 2073 656c 662e 6c61 6e67 7561 6765  nd self.language
+00024140: 5f6d 6170 2061 6e64 206e 6f74 5f75 7064  _map and not_upd
+00024150: 6174 655f 636f 6e64 5f66 7265 7120 616e  ate_cond_freq an
+00024160: 6420 6e6f 745f 7570 6461 7465 5f63 6f6e  d not_update_con
+00024170: 645f 7469 6d65 2061 6e64 2073 656c 662e  d_time and self.
+00024180: 6465 6372 7970 745f 6c61 6e67 7561 6765  decrypt_language
+00024190: 5f6d 6170 293a 0d0a 2020 2020 2020 2020  _map):..        
+000241a0: 2020 2020 7365 6c66 2e62 6567 696e 5f74      self.begin_t
+000241b0: 696d 6520 3d20 7469 6d65 2e74 696d 6528  ime = time.time(
+000241c0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+000241d0: 656c 662e 7365 7373 696f 6e20 3d20 7265  elf.session = re
+000241e0: 7175 6573 7473 2e53 6573 7369 6f6e 2829  quests.Session()
+000241f0: 0d0a 2020 2020 2020 2020 2020 2020 686f  ..            ho
+00024200: 7374 5f68 746d 6c20 3d20 7365 6c66 2e73  st_html = self.s
+00024210: 6573 7369 6f6e 2e67 6574 2873 656c 662e  ession.get(self.
+00024220: 686f 7374 5f75 726c 2c20 6865 6164 6572  host_url, header
+00024230: 733d 7365 6c66 2e68 6f73 745f 6865 6164  s=self.host_head
+00024240: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
+00024250: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
+00024260: 6f78 6965 7329 2e74 6578 740d 0a20 2020  oxies).text..   
+00024270: 2020 2020 2020 2020 2073 656c 662e 6c61           self.la
+00024280: 6e67 7561 6765 5f75 726c 203d 2072 652e  nguage_url = re.
+00024290: 636f 6d70 696c 6528 7365 6c66 2e6c 616e  compile(self.lan
+000242a0: 6775 6167 655f 7061 7474 6572 6e29 2e73  guage_pattern).s
+000242b0: 6561 7263 6828 686f 7374 5f68 746d 6c29  earch(host_html)
+000242c0: 2e67 726f 7570 2829 0d0a 2020 2020 2020  .group()..      
+000242d0: 2020 2020 2020 6c61 6e67 5f68 746d 6c20        lang_html 
+000242e0: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e67  = self.session.g
+000242f0: 6574 2873 656c 662e 6c61 6e67 7561 6765  et(self.language
+00024300: 5f75 726c 2c20 6865 6164 6572 733d 7365  _url, headers=se
+00024310: 6c66 2e68 6f73 745f 6865 6164 6572 732c  lf.host_headers,
+00024320: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
+00024330: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
+00024340: 7329 2e74 6578 740d 0a20 2020 2020 2020  s).text..       
+00024350: 2020 2020 2073 656c 662e 6465 6372 7970       self.decryp
+00024360: 745f 6c61 6e67 7561 6765 5f6d 6170 203d  t_language_map =
+00024370: 2073 656c 662e 6465 6372 7970 745f 6c61   self.decrypt_la
+00024380: 6e67 5f6d 6170 286c 616e 675f 6874 6d6c  ng_map(lang_html
+00024390: 290d 0a20 2020 2020 2020 2020 2020 2064  )..            d
+000243a0: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
+000243b0: 203d 2073 656c 662e 6465 6275 675f 6c61   = self.debug_la
+000243c0: 6e67 5f6b 7761 7267 7328 6672 6f6d 5f6c  ng_kwargs(from_l
+000243d0: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
+000243e0: 7561 6765 2c20 7365 6c66 2e64 6566 6175  uage, self.defau
+000243f0: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
+00024400: 2c20 6966 5f70 7269 6e74 5f77 6172 6e69  , if_print_warni
+00024410: 6e67 290d 0a20 2020 2020 2020 2020 2020  ng)..           
+00024420: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+00024430: 6170 203d 2073 656c 662e 6765 745f 6c61  ap = self.get_la
+00024440: 6e67 7561 6765 5f6d 6170 286c 616e 675f  nguage_map(lang_
+00024450: 6874 6d6c 2c20 2a2a 6465 6275 675f 6c61  html, **debug_la
+00024460: 6e67 5f6b 7761 7267 7329 0d0a 0d0a 2020  ng_kwargs)....  
+00024470: 2020 2020 2020 6966 2066 726f 6d5f 6c61        if from_la
+00024480: 6e67 7561 6765 203d 3d20 2761 7574 6f27  nguage == 'auto'
+00024490: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
+000244a0: 726f 6d5f 6c61 6e67 7561 6765 203d 2073  rom_language = s
+000244b0: 656c 662e 7761 726e 696e 675f 6175 746f  elf.warning_auto
+000244c0: 5f6c 616e 6728 2772 6576 6572 736f 272c  _lang('reverso',
+000244d0: 2073 656c 662e 6465 6661 756c 745f 6672   self.default_fr
+000244e0: 6f6d 5f6c 616e 6775 6167 652c 2069 665f  om_language, if_
+000244f0: 7072 696e 745f 7761 726e 696e 6729 0d0a  print_warning)..
+00024500: 2020 2020 2020 2020 6672 6f6d 5f6c 616e          from_lan
+00024510: 6775 6167 652c 2074 6f5f 6c61 6e67 7561  guage, to_langua
+00024520: 6765 203d 2073 656c 662e 6368 6563 6b5f  ge = self.check_
+00024530: 6c61 6e67 7561 6765 2866 726f 6d5f 6c61  language(from_la
+00024540: 6e67 7561 6765 2c20 746f 5f6c 616e 6775  nguage, to_langu
+00024550: 6167 652c 2073 656c 662e 6c61 6e67 7561  age, self.langua
+00024560: 6765 5f6d 6170 2c20 6f75 7470 7574 5f7a  ge_map, output_z
+00024570: 683d 7365 6c66 2e6f 7574 7075 745f 7a68  h=self.output_zh
+00024580: 290d 0a20 2020 2020 2020 2066 726f 6d5f  )..        from_
+00024590: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
+000245a0: 6775 6167 6520 3d20 7365 6c66 2e64 6563  guage = self.dec
+000245b0: 7279 7074 5f6c 616e 6775 6167 655f 6d61  rypt_language_ma
+000245c0: 705b 6672 6f6d 5f6c 616e 6775 6167 655d  p[from_language]
+000245d0: 2c20 7365 6c66 2e64 6563 7279 7074 5f6c  , self.decrypt_l
+000245e0: 616e 6775 6167 655f 6d61 705b 746f 5f6c  anguage_map[to_l
+000245f0: 616e 6775 6167 655d 0d0a 0d0a 2020 2020  anguage]....    
+00024600: 2020 2020 7061 796c 6f61 6420 3d20 7b0d      payload = {.
+00024610: 0a20 2020 2020 2020 2020 2020 2027 666f  .            'fo
+00024620: 726d 6174 273a 2027 7465 7874 272c 0d0a  rmat': 'text',..
+00024630: 2020 2020 2020 2020 2020 2020 2766 726f              'fro
+00024640: 6d27 3a20 6672 6f6d 5f6c 616e 6775 6167  m': from_languag
+00024650: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00024660: 2774 6f27 3a20 746f 5f6c 616e 6775 6167  'to': to_languag
+00024670: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00024680: 2769 6e70 7574 273a 2071 7565 7279 5f74  'input': query_t
+00024690: 6578 742c 0d0a 2020 2020 2020 2020 2020  ext,..          
+000246a0: 2020 276f 7074 696f 6e73 273a 207b 0d0a    'options': {..
+000246b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000246c0: 2763 6f6e 7465 7874 5265 7375 6c74 7327  'contextResults'
+000246d0: 3a20 2774 7275 6527 2c0d 0a20 2020 2020  : 'true',..     
+000246e0: 2020 2020 2020 2020 2020 2027 6c61 6e67             'lang
+000246f0: 7561 6765 4465 7465 6374 696f 6e27 3a20  uageDetection': 
+00024700: 2774 7275 6527 2c0d 0a20 2020 2020 2020  'true',..       
+00024710: 2020 2020 2020 2020 2027 7365 6e74 656e           'senten
+00024720: 6365 5370 6c69 7474 6572 273a 2027 7472  ceSplitter': 'tr
+00024730: 7565 272c 0d0a 2020 2020 2020 2020 2020  ue',..          
+00024740: 2020 2020 2020 276f 7269 6769 6e27 3a20        'origin': 
+00024750: 2774 7261 6e73 6c61 7469 6f6e 2e77 6562  'translation.web
+00024760: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+00024770: 7d0d 0a20 2020 2020 2020 207d 0d0a 2020  }..        }..  
+00024780: 2020 2020 2020 7220 3d20 7365 6c66 2e73        r = self.s
+00024790: 6573 7369 6f6e 2e70 6f73 7428 7365 6c66  ession.post(self
+000247a0: 2e61 7069 5f75 726c 2c20 6a73 6f6e 3d70  .api_url, json=p
+000247b0: 6179 6c6f 6164 2c20 6865 6164 6572 733d  ayload, headers=
+000247c0: 7365 6c66 2e61 7069 5f68 6561 6465 7273  self.api_headers
+000247d0: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
+000247e0: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
+000247f0: 6573 290d 0a20 2020 2020 2020 2072 2e72  es)..        r.r
+00024800: 6169 7365 5f66 6f72 5f73 7461 7475 7328  aise_for_status(
+00024810: 290d 0a20 2020 2020 2020 2064 6174 6120  )..        data 
+00024820: 3d20 722e 6a73 6f6e 2829 0d0a 2020 2020  = r.json()..    
+00024830: 2020 2020 7469 6d65 2e73 6c65 6570 2873      time.sleep(s
+00024840: 6c65 6570 5f73 6563 6f6e 6473 290d 0a20  leep_seconds).. 
+00024850: 2020 2020 2020 2073 656c 662e 7175 6572         self.quer
+00024860: 795f 636f 756e 7420 2b3d 2031 0d0a 2020  y_count += 1..  
+00024870: 2020 2020 2020 7265 7475 726e 2064 6174        return dat
+00024880: 6120 6966 2069 735f 6465 7461 696c 5f72  a if is_detail_r
+00024890: 6573 756c 7420 656c 7365 2027 272e 6a6f  esult else ''.jo
+000248a0: 696e 2864 6174 615b 2774 7261 6e73 6c61  in(data['transla
+000248b0: 7469 6f6e 275d 290d 0a0d 0a0d 0a63 6c61  tion'])......cla
+000248c0: 7373 2049 7472 616e 736c 6174 6528 5473  ss Itranslate(Ts
+000248d0: 6529 3a0d 0a20 2020 2064 6566 205f 5f69  e):..    def __i
+000248e0: 6e69 745f 5f28 7365 6c66 293a 0d0a 2020  nit__(self):..  
+000248f0: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
+00024900: 696e 6974 5f5f 2829 0d0a 2020 2020 2020  init__()..      
+00024910: 2020 7365 6c66 2e62 6567 696e 5f74 696d    self.begin_tim
+00024920: 6520 3d20 7469 6d65 2e74 696d 6528 290d  e = time.time().
+00024930: 0a20 2020 2020 2020 2073 656c 662e 686f  .        self.ho
+00024940: 7374 5f75 726c 203d 2027 6874 7470 733a  st_url = 'https:
+00024950: 2f2f 6974 7261 6e73 6c61 7465 2e63 6f6d  //itranslate.com
+00024960: 2f74 7261 6e73 6c61 7465 270d 0a20 2020  /translate'..   
+00024970: 2020 2020 2073 656c 662e 6170 695f 7572       self.api_ur
+00024980: 6c20 3d20 2768 7474 7073 3a2f 2f77 6562  l = 'https://web
+00024990: 2d61 7069 2e69 7472 616e 736c 6174 6561  -api.itranslatea
+000249a0: 7070 2e63 6f6d 2f76 332f 7465 7874 732f  pp.com/v3/texts/
 000249b0: 7472 616e 736c 6174 6527 0d0a 2020 2020  translate'..    
-000249c0: 2020 2020 7365 6c66 2e61 7069 5f75 726c      self.api_url
-000249d0: 203d 2027 6874 7470 733a 2f2f 7765 622d   = 'https://web-
-000249e0: 6170 692e 6974 7261 6e73 6c61 7465 6170  api.itranslateap
-000249f0: 702e 636f 6d2f 7633 2f74 6578 7473 2f74  p.com/v3/texts/t
-00024a00: 7261 6e73 6c61 7465 270d 0a20 2020 2020  ranslate'..     
-00024a10: 2020 2073 656c 662e 6d61 6e69 6665 7374     self.manifest
-00024a20: 5f75 726c 203d 2027 6874 7470 733a 2f2f  _url = 'https://
-00024a30: 6974 7261 6e73 6c61 7465 2d77 6562 6170  itranslate-webap
-00024a40: 702d 7072 6f64 7563 7469 6f6e 2e77 6562  p-production.web
-00024a50: 2e61 7070 2f6d 616e 6966 6573 742e 6a73  .app/manifest.js
-00024a60: 6f6e 270d 0a20 2020 2020 2020 2073 656c  on'..        sel
-00024a70: 662e 6c61 6e67 7561 6765 5f75 726c 203d  f.language_url =
-00024a80: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
-00024a90: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
-00024aa0: 203d 2073 656c 662e 6765 745f 6865 6164   = self.get_head
-00024ab0: 6572 7328 7365 6c66 2e68 6f73 745f 7572  ers(self.host_ur
-00024ac0: 6c2c 2069 665f 6170 693d 4661 6c73 6529  l, if_api=False)
-00024ad0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00024ae0: 7069 5f68 6561 6465 7273 203d 2073 656c  pi_headers = sel
-00024af0: 662e 6765 745f 6865 6164 6572 7328 7365  f.get_headers(se
-00024b00: 6c66 2e68 6f73 745f 7572 6c2c 2069 665f  lf.host_url, if_
-00024b10: 6170 693d 5472 7565 2c20 6966 5f6a 736f  api=True, if_jso
-00024b20: 6e5f 666f 725f 6170 693d 5472 7565 290d  n_for_api=True).
-00024b30: 0a20 2020 2020 2020 2073 656c 662e 7365  .        self.se
-00024b40: 7373 696f 6e20 3d20 4e6f 6e65 0d0a 2020  ssion = None..  
-00024b50: 2020 2020 2020 7365 6c66 2e6c 616e 6775        self.langu
-00024b60: 6167 655f 6d61 7020 3d20 4e6f 6e65 0d0a  age_map = None..
-00024b70: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
-00024b80: 5f6b 6579 203d 204e 6f6e 650d 0a20 2020  _key = None..   
-00024b90: 2020 2020 2073 656c 662e 7175 6572 795f       self.query_
-00024ba0: 636f 756e 7420 3d20 300d 0a20 2020 2020  count = 0..     
-00024bb0: 2020 2073 656c 662e 6f75 7470 7574 5f7a     self.output_z
-00024bc0: 6820 3d20 277a 682d 434e 270d 0a20 2020  h = 'zh-CN'..   
-00024bd0: 2020 2020 2073 656c 662e 696e 7075 745f       self.input_
-00024be0: 6c69 6d69 7420 3d20 696e 7428 3165 3329  limit = int(1e3)
-00024bf0: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
-00024c00: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
-00024c10: 7561 6765 203d 2073 656c 662e 6f75 7470  uage = self.outp
-00024c20: 7574 5f7a 680d 0a0d 0a20 2020 2040 5473  ut_zh....    @Ts
-00024c30: 652e 6465 6275 675f 6c61 6e67 7561 6765  e.debug_language
-00024c40: 5f6d 6170 0d0a 2020 2020 6465 6620 6765  _map..    def ge
-00024c50: 745f 6c61 6e67 7561 6765 5f6d 6170 2873  t_language_map(s
-00024c60: 656c 662c 206c 616e 675f 6874 6d6c 3a20  elf, lang_html: 
-00024c70: 7374 722c 202a 2a6b 7761 7267 733a 204c  str, **kwargs: L
-00024c80: 616e 674d 6170 4b77 6172 6773 5479 7065  angMapKwargsType
-00024c90: 2920 2d3e 2064 6963 743a 0d0a 2020 2020  ) -> dict:..    
-00024ca0: 2020 2020 6c61 6e67 5f73 7472 203d 2072      lang_str = r
-00024cb0: 652e 636f 6d70 696c 6528 275c 5c5b 7b64  e.compile('\\[{d
-00024cc0: 6961 6c65 6374 3a22 6175 746f 222c 282e  ialect:"auto",(.
-00024cd0: 2a3f 297d 5d27 292e 7365 6172 6368 286c  *?)}]').search(l
-00024ce0: 616e 675f 6874 6d6c 292e 6772 6f75 7028  ang_html).group(
-00024cf0: 290d 0a20 2020 2020 2020 206c 616e 675f  )..        lang_
-00024d00: 6f72 6967 696e 5f6c 6973 7420 3d20 6578  origin_list = ex
-00024d10: 6563 6a73 2e65 7661 6c28 6c61 6e67 5f73  ecjs.eval(lang_s
-00024d20: 7472 290d 0a20 2020 2020 2020 206c 616e  tr)..        lan
-00024d30: 675f 6c69 7374 203d 2073 6f72 7465 6428  g_list = sorted(
-00024d40: 6c69 7374 2873 6574 285b 6464 5b27 6469  list(set([dd['di
-00024d50: 616c 6563 7427 5d20 666f 7220 6464 2069  alect'] for dd i
-00024d60: 6e20 6c61 6e67 5f6f 7269 6769 6e5f 6c69  n lang_origin_li
-00024d70: 7374 5d29 2929 0d0a 2020 2020 2020 2020  st])))..        
-00024d80: 7265 7475 726e 207b 7d2e 6672 6f6d 6b65  return {}.fromke
-00024d90: 7973 286c 616e 675f 6c69 7374 2c20 6c61  ys(lang_list, la
-00024da0: 6e67 5f6c 6973 7429 0d0a 0d0a 2020 2020  ng_list)....    
-00024db0: 6465 6620 6765 745f 6170 696b 6579 2873  def get_apikey(s
-00024dc0: 656c 662c 206c 616e 675f 6874 6d6c 3a20  elf, lang_html: 
-00024dd0: 7374 7229 202d 3e20 7374 723a 0d0a 2020  str) -> str:..  
-00024de0: 2020 2020 2020 7265 7475 726e 2072 652e        return re.
-00024df0: 636f 6d70 696c 6528 2722 4150 492d 4b45  compile('"API-KE
-00024e00: 5922 3a22 282e 2a3f 2922 2729 2e66 696e  Y":"(.*?)"').fin
-00024e10: 6461 6c6c 286c 616e 675f 6874 6d6c 295b  dall(lang_html)[
-00024e20: 305d 0d0a 0d0a 2020 2020 4054 7365 2e74  0]....    @Tse.t
-00024e30: 696d 655f 7374 6174 0d0a 2020 2020 4054  ime_stat..    @T
-00024e40: 7365 2e63 6865 636b 5f71 7565 7279 0d0a  se.check_query..
-00024e50: 2020 2020 6465 6620 6974 7261 6e73 6c61      def itransla
-00024e60: 7465 5f61 7069 2873 656c 662c 2071 7565  te_api(self, que
-00024e70: 7279 5f74 6578 743a 2073 7472 2c20 6672  ry_text: str, fr
-00024e80: 6f6d 5f6c 616e 6775 6167 653a 2073 7472  om_language: str
-00024e90: 203d 2027 6175 746f 272c 2074 6f5f 6c61   = 'auto', to_la
-00024ea0: 6e67 7561 6765 3a20 7374 7220 3d20 2765  nguage: str = 'e
-00024eb0: 6e27 2c20 2a2a 6b77 6172 6773 3a20 4170  n', **kwargs: Ap
-00024ec0: 694b 7761 7267 7354 7970 6529 202d 3e20  iKwargsType) -> 
-00024ed0: 556e 696f 6e5b 7374 722c 2064 6963 745d  Union[str, dict]
-00024ee0: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00024ef0: 2020 2020 2020 2020 6874 7470 733a 2f2f          https://
-00024f00: 6974 7261 6e73 6c61 7465 2e63 6f6d 2f74  itranslate.com/t
-00024f10: 7261 6e73 6c61 7465 0d0a 2020 2020 2020  ranslate..      
-00024f20: 2020 3a70 6172 616d 2071 7565 7279 5f74    :param query_t
-00024f30: 6578 743a 2073 7472 2c20 6d75 7374 2e0d  ext: str, must..
-00024f40: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00024f50: 6672 6f6d 5f6c 616e 6775 6167 653a 2073  from_language: s
-00024f60: 7472 2c20 6465 6661 756c 7420 2761 7574  tr, default 'aut
-00024f70: 6f27 2e0d 0a20 2020 2020 2020 203a 7061  o'...        :pa
-00024f80: 7261 6d20 746f 5f6c 616e 6775 6167 653a  ram to_language:
-00024f90: 2073 7472 2c20 6465 6661 756c 7420 2765   str, default 'e
-00024fa0: 6e27 2e0d 0a20 2020 2020 2020 203a 7061  n'...        :pa
-00024fb0: 7261 6d20 2a2a 6b77 6172 6773 3a0d 0a20  ram **kwargs:.. 
-00024fc0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-00024fd0: 7061 7261 6d20 7469 6d65 6f75 743a 2066  param timeout: f
-00024fe0: 6c6f 6174 2c20 6465 6661 756c 7420 4e6f  loat, default No
-00024ff0: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
-00025000: 2020 2020 203a 7061 7261 6d20 7072 6f78       :param prox
-00025010: 6965 733a 2064 6963 742c 2064 6566 6175  ies: dict, defau
-00025020: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
-00025030: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00025040: 2073 6c65 6570 5f73 6563 6f6e 6473 3a20   sleep_seconds: 
-00025050: 666c 6f61 742c 2064 6566 6175 6c74 2030  float, default 0
-00025060: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00025070: 2020 203a 7061 7261 6d20 6973 5f64 6574     :param is_det
-00025080: 6169 6c5f 7265 7375 6c74 3a20 626f 6f6c  ail_result: bool
-00025090: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-000250a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000250b0: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
-000250c0: 7265 5f6c 696d 6974 5f6f 665f 6c65 6e67  re_limit_of_leng
-000250d0: 7468 3a20 626f 6f6c 2c20 6465 6661 756c  th: bool, defaul
-000250e0: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-000250f0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00025100: 206c 696d 6974 5f6f 665f 6c65 6e67 7468   limit_of_length
-00025110: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
-00025120: 3030 3030 2e0d 0a20 2020 2020 2020 2020  0000...         
-00025130: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-00025140: 5f69 676e 6f72 655f 656d 7074 795f 7175  _ignore_empty_qu
-00025150: 6572 793a 2062 6f6f 6c2c 2064 6566 6175  ery: bool, defau
-00025160: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
-00025170: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00025180: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
-00025190: 5f61 6674 6572 5f66 7265 713a 2069 6e74  _after_freq: int
-000251a0: 2c20 6465 6661 756c 7420 3130 3030 2e0d  , default 1000..
-000251b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000251c0: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
-000251d0: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-000251e0: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
-000251f0: 6175 6c74 2031 3530 302e 0d0a 2020 2020  ault 1500...    
-00025200: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00025210: 616d 2069 665f 7368 6f77 5f74 696d 655f  am if_show_time_
-00025220: 7374 6174 3a20 626f 6f6c 2c20 6465 6661  stat: bool, defa
-00025230: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-00025240: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00025250: 616d 2073 686f 775f 7469 6d65 5f73 7461  am show_time_sta
-00025260: 745f 7072 6563 6973 696f 6e3a 2069 6e74  t_precision: int
-00025270: 2c20 6465 6661 756c 7420 322e 0d0a 2020  , default 2...  
-00025280: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00025290: 6172 616d 2069 665f 7072 696e 745f 7761  aram if_print_wa
-000252a0: 726e 696e 673a 2062 6f6f 6c2c 2064 6566  rning: bool, def
-000252b0: 6175 6c74 2054 7275 652e 0d0a 2020 2020  ault True...    
-000252c0: 2020 2020 3a72 6574 7572 6e3a 2073 7472      :return: str
-000252d0: 206f 7220 6469 6374 0d0a 2020 2020 2020   or dict..      
-000252e0: 2020 2222 220d 0a0d 0a20 2020 2020 2020    """....       
-000252f0: 2074 696d 656f 7574 203d 206b 7761 7267   timeout = kwarg
-00025300: 732e 6765 7428 2774 696d 656f 7574 272c  s.get('timeout',
-00025310: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
-00025320: 7072 6f78 6965 7320 3d20 6b77 6172 6773  proxies = kwargs
-00025330: 2e67 6574 2827 7072 6f78 6965 7327 2c20  .get('proxies', 
-00025340: 4e6f 6e65 290d 0a20 2020 2020 2020 2073  None)..        s
-00025350: 6c65 6570 5f73 6563 6f6e 6473 203d 206b  leep_seconds = k
-00025360: 7761 7267 732e 6765 7428 2773 6c65 6570  wargs.get('sleep
-00025370: 5f73 6563 6f6e 6473 272c 2030 290d 0a20  _seconds', 0).. 
-00025380: 2020 2020 2020 2069 665f 7072 696e 745f         if_print_
-00025390: 7761 726e 696e 6720 3d20 6b77 6172 6773  warning = kwargs
-000253a0: 2e67 6574 2827 6966 5f70 7269 6e74 5f77  .get('if_print_w
-000253b0: 6172 6e69 6e67 272c 2054 7275 6529 0d0a  arning', True)..
-000253c0: 2020 2020 2020 2020 6973 5f64 6574 6169          is_detai
-000253d0: 6c5f 7265 7375 6c74 203d 206b 7761 7267  l_result = kwarg
-000253e0: 732e 6765 7428 2769 735f 6465 7461 696c  s.get('is_detail
-000253f0: 5f72 6573 756c 7427 2c20 4661 6c73 6529  _result', False)
-00025400: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
-00025410: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-00025420: 7265 7120 3d20 6b77 6172 6773 2e67 6574  req = kwargs.get
-00025430: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
-00025440: 5f61 6674 6572 5f66 7265 7127 2c20 7365  _after_freq', se
-00025450: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
-00025460: 6f6e 5f66 7265 7129 0d0a 2020 2020 2020  on_freq)..      
-00025470: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
-00025480: 5f61 6674 6572 5f73 6563 6f6e 6473 203d  _after_seconds =
-00025490: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
-000254a0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-000254b0: 725f 7365 636f 6e64 7327 2c20 7365 6c66  r_seconds', self
-000254c0: 2e64 6566 6175 6c74 5f73 6573 7369 6f6e  .default_session
-000254d0: 5f73 6563 6f6e 6473 290d 0a20 2020 2020  _seconds)..     
-000254e0: 2020 2073 656c 662e 6368 6563 6b5f 696e     self.check_in
-000254f0: 7075 745f 6c69 6d69 7428 7175 6572 795f  put_limit(query_
-00025500: 7465 7874 2c20 7365 6c66 2e69 6e70 7574  text, self.input
-00025510: 5f6c 696d 6974 290d 0a0d 0a20 2020 2020  _limit)....     
-00025520: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
-00025530: 6e64 5f66 7265 7120 3d20 3120 6966 2073  nd_freq = 1 if s
-00025540: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
-00025550: 2520 7570 6461 7465 5f73 6573 7369 6f6e  % update_session
-00025560: 5f61 6674 6572 5f66 7265 7120 213d 2030  _after_freq != 0
-00025570: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
-00025580: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
-00025590: 5f74 696d 6520 3d20 3120 6966 2074 696d  _time = 1 if tim
-000255a0: 652e 7469 6d65 2829 202d 2073 656c 662e  e.time() - self.
-000255b0: 6265 6769 6e5f 7469 6d65 203c 2075 7064  begin_time < upd
-000255c0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-000255d0: 725f 7365 636f 6e64 7320 656c 7365 2030  r_seconds else 0
-000255e0: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
-000255f0: 2028 7365 6c66 2e73 6573 7369 6f6e 2061   (self.session a
-00025600: 6e64 2073 656c 662e 6c61 6e67 7561 6765  nd self.language
-00025610: 5f6d 6170 2061 6e64 206e 6f74 5f75 7064  _map and not_upd
-00025620: 6174 655f 636f 6e64 5f66 7265 7120 616e  ate_cond_freq an
-00025630: 6420 6e6f 745f 7570 6461 7465 5f63 6f6e  d not_update_con
-00025640: 645f 7469 6d65 293a 0d0a 2020 2020 2020  d_time):..      
-00025650: 2020 2020 2020 7365 6c66 2e62 6567 696e        self.begin
-00025660: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
-00025670: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
-00025680: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
-00025690: 7265 7175 6573 7473 2e53 6573 7369 6f6e  requests.Session
-000256a0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-000256b0: 5f20 3d20 7365 6c66 2e73 6573 7369 6f6e  _ = self.session
-000256c0: 2e67 6574 2873 656c 662e 686f 7374 5f75  .get(self.host_u
-000256d0: 726c 2c20 6865 6164 6572 733d 7365 6c66  rl, headers=self
-000256e0: 2e68 6f73 745f 6865 6164 6572 732c 2074  .host_headers, t
-000256f0: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
-00025700: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
-00025710: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00025720: 6966 206e 6f74 2073 656c 662e 6c61 6e67  if not self.lang
-00025730: 7561 6765 5f75 726c 3a0d 0a20 2020 2020  uage_url:..     
-00025740: 2020 2020 2020 2020 2020 206d 616e 6966             manif
-00025750: 6573 745f 6461 7461 203d 2073 656c 662e  est_data = self.
-00025760: 7365 7373 696f 6e2e 6765 7428 7365 6c66  session.get(self
-00025770: 2e6d 616e 6966 6573 745f 7572 6c2c 2068  .manifest_url, h
-00025780: 6561 6465 7273 3d73 656c 662e 686f 7374  eaders=self.host
-00025790: 5f68 6561 6465 7273 2c20 7469 6d65 6f75  _headers, timeou
-000257a0: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
-000257b0: 6573 3d70 726f 7869 6573 292e 6a73 6f6e  es=proxies).json
-000257c0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-000257d0: 2020 2020 7365 6c66 2e6c 616e 6775 6167      self.languag
-000257e0: 655f 7572 6c20 3d20 6d61 6e69 6665 7374  e_url = manifest
-000257f0: 5f64 6174 612e 6765 7428 276d 6169 6e2e  _data.get('main.
-00025800: 6a73 2729 0d0a 0d0a 2020 2020 2020 2020  js')....        
-00025810: 2020 2020 6c61 6e67 5f68 746d 6c20 3d20      lang_html = 
-00025820: 7365 6c66 2e73 6573 7369 6f6e 2e67 6574  self.session.get
-00025830: 2873 656c 662e 6c61 6e67 7561 6765 5f75  (self.language_u
-00025840: 726c 2c20 6865 6164 6572 733d 7365 6c66  rl, headers=self
-00025850: 2e68 6f73 745f 6865 6164 6572 732c 2074  .host_headers, t
-00025860: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
-00025870: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
-00025880: 2e74 6578 740d 0a20 2020 2020 2020 2020  .text..         
-00025890: 2020 2064 6562 7567 5f6c 616e 675f 6b77     debug_lang_kw
-000258a0: 6172 6773 203d 2073 656c 662e 6465 6275  args = self.debu
-000258b0: 675f 6c61 6e67 5f6b 7761 7267 7328 6672  g_lang_kwargs(fr
-000258c0: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-000258d0: 6c61 6e67 7561 6765 2c20 7365 6c66 2e64  language, self.d
-000258e0: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
-000258f0: 7561 6765 2c20 6966 5f70 7269 6e74 5f77  uage, if_print_w
-00025900: 6172 6e69 6e67 290d 0a20 2020 2020 2020  arning)..       
-00025910: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-00025920: 6765 5f6d 6170 203d 2073 656c 662e 6765  ge_map = self.ge
-00025930: 745f 6c61 6e67 7561 6765 5f6d 6170 286c  t_language_map(l
-00025940: 616e 675f 6874 6d6c 2c20 2a2a 6465 6275  ang_html, **debu
-00025950: 675f 6c61 6e67 5f6b 7761 7267 7329 0d0a  g_lang_kwargs)..
-00025960: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00025970: 6c66 2e61 7069 5f6b 6579 203d 2073 656c  lf.api_key = sel
-00025980: 662e 6765 745f 6170 696b 6579 286c 616e  f.get_apikey(lan
-00025990: 675f 6874 6d6c 290d 0a20 2020 2020 2020  g_html)..       
-000259a0: 2020 2020 2073 656c 662e 6170 695f 6865       self.api_he
-000259b0: 6164 6572 732e 7570 6461 7465 287b 2741  aders.update({'A
-000259c0: 5049 2d4b 4559 273a 2073 656c 662e 6170  PI-KEY': self.ap
-000259d0: 695f 6b65 797d 290d 0a0d 0a20 2020 2020  i_key})....     
-000259e0: 2020 2066 726f 6d5f 6c61 6e67 7561 6765     from_language
-000259f0: 2c20 746f 5f6c 616e 6775 6167 6520 3d20  , to_language = 
-00025a00: 7365 6c66 2e63 6865 636b 5f6c 616e 6775  self.check_langu
-00025a10: 6167 6528 6672 6f6d 5f6c 616e 6775 6167  age(from_languag
-00025a20: 652c 2074 6f5f 6c61 6e67 7561 6765 2c20  e, to_language, 
-00025a30: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
-00025a40: 702c 206f 7574 7075 745f 7a68 3d73 656c  p, output_zh=sel
-00025a50: 662e 6f75 7470 7574 5f7a 682c 0d0a 2020  f.output_zh,..  
-00025a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025a90: 2020 2020 2020 206f 7574 7075 745f 656e         output_en
-00025aa0: 5f74 7261 6e73 6c61 746f 723d 2769 7472  _translator='itr
-00025ab0: 616e 736c 6174 6527 2c20 6f75 7470 7574  anslate', output
-00025ac0: 5f65 6e3d 2765 6e2d 5553 2729 0d0a 0d0a  _en='en-US')....
-00025ad0: 2020 2020 2020 2020 7061 796c 6f61 6420          payload 
-00025ae0: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
-00025af0: 2027 736f 7572 6365 273a 207b 2764 6961   'source': {'dia
-00025b00: 6c65 6374 273a 2066 726f 6d5f 6c61 6e67  lect': from_lang
-00025b10: 7561 6765 2c20 2774 6578 7427 3a20 7175  uage, 'text': qu
-00025b20: 6572 795f 7465 7874 2c20 2777 6974 6827  ery_text, 'with'
-00025b30: 3a20 5b27 7379 6e6f 6e79 6d73 275d 7d2c  : ['synonyms']},
-00025b40: 0d0a 2020 2020 2020 2020 2020 2020 2774  ..            't
-00025b50: 6172 6765 7427 3a20 7b27 6469 616c 6563  arget': {'dialec
-00025b60: 7427 3a20 746f 5f6c 616e 6775 6167 657d  t': to_language}
-00025b70: 2c0d 0a20 2020 2020 2020 207d 0d0a 2020  ,..        }..  
-00025b80: 2020 2020 2020 7220 3d20 7365 6c66 2e73        r = self.s
-00025b90: 6573 7369 6f6e 2e70 6f73 7428 7365 6c66  ession.post(self
-00025ba0: 2e61 7069 5f75 726c 2c20 6865 6164 6572  .api_url, header
-00025bb0: 733d 7365 6c66 2e61 7069 5f68 6561 6465  s=self.api_heade
-00025bc0: 7273 2c20 6a73 6f6e 3d70 6179 6c6f 6164  rs, json=payload
-00025bd0: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
-00025be0: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
-00025bf0: 6573 290d 0a20 2020 2020 2020 2072 2e72  es)..        r.r
-00025c00: 6169 7365 5f66 6f72 5f73 7461 7475 7328  aise_for_status(
-00025c10: 290d 0a20 2020 2020 2020 2064 6174 6120  )..        data 
-00025c20: 3d20 722e 6a73 6f6e 2829 0d0a 2020 2020  = r.json()..    
-00025c30: 2020 2020 7469 6d65 2e73 6c65 6570 2873      time.sleep(s
-00025c40: 6c65 6570 5f73 6563 6f6e 6473 290d 0a20  leep_seconds).. 
-00025c50: 2020 2020 2020 2073 656c 662e 7175 6572         self.quer
-00025c60: 795f 636f 756e 7420 2b3d 2031 0d0a 2020  y_count += 1..  
-00025c70: 2020 2020 2020 7265 7475 726e 2064 6174        return dat
-00025c80: 6120 6966 2069 735f 6465 7461 696c 5f72  a if is_detail_r
-00025c90: 6573 756c 7420 656c 7365 2064 6174 615b  esult else data[
-00025ca0: 2774 6172 6765 7427 5d5b 2774 6578 7427  'target']['text'
-00025cb0: 5d0d 0a0d 0a0d 0a63 6c61 7373 2054 7261  ]......class Tra
-00025cc0: 6e73 6c61 7465 436f 6d28 5473 6529 3a0d  nslateCom(Tse):.
-00025cd0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-00025ce0: 5f28 7365 6c66 293a 0d0a 2020 2020 2020  _(self):..      
-00025cf0: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
-00025d00: 5f5f 2829 0d0a 2020 2020 2020 2020 7365  __()..        se
-00025d10: 6c66 2e62 6567 696e 5f74 696d 6520 3d20  lf.begin_time = 
-00025d20: 7469 6d65 2e74 696d 6528 290d 0a20 2020  time.time()..   
-00025d30: 2020 2020 2073 656c 662e 686f 7374 5f75       self.host_u
-00025d40: 726c 203d 2027 6874 7470 733a 2f2f 7777  rl = 'https://ww
-00025d50: 772e 7472 616e 736c 6174 652e 636f 6d2f  w.translate.com/
-00025d60: 6d61 6368 696e 652d 7472 616e 736c 6174  machine-translat
-00025d70: 696f 6e27 0d0a 2020 2020 2020 2020 7365  ion'..        se
-00025d80: 6c66 2e61 7069 5f75 726c 203d 2027 6874  lf.api_url = 'ht
-00025d90: 7470 733a 2f2f 7777 772e 7472 616e 736c  tps://www.transl
-00025da0: 6174 652e 636f 6d2f 7472 616e 736c 6174  ate.com/translat
-00025db0: 6f72 2f74 7261 6e73 6c61 7465 5f6d 7427  or/translate_mt'
-00025dc0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6c  ..        self.l
-00025dd0: 616e 675f 6465 7465 6374 5f75 726c 203d  ang_detect_url =
-00025de0: 2027 6874 7470 733a 2f2f 7777 772e 7472   'https://www.tr
-00025df0: 616e 736c 6174 652e 636f 6d2f 7472 616e  anslate.com/tran
-00025e00: 736c 6174 6f72 2f61 6a61 785f 6c61 6e67  slator/ajax_lang
-00025e10: 5f61 7574 6f5f 6465 7465 6374 270d 0a20  _auto_detect'.. 
-00025e20: 2020 2020 2020 2073 656c 662e 6c61 6e67         self.lang
-00025e30: 7561 6765 5f75 726c 203d 2027 6874 7470  uage_url = 'http
-00025e40: 733a 2f2f 7777 772e 7472 616e 736c 6174  s://www.translat
-00025e50: 652e 636f 6d2f 616a 6178 2f6c 616e 6775  e.com/ajax/langu
-00025e60: 6167 652f 6874 2f61 6c6c 270d 0a20 2020  age/ht/all'..   
-00025e70: 2020 2020 2073 656c 662e 686f 7374 5f68       self.host_h
-00025e80: 6561 6465 7273 203d 2073 656c 662e 6765  eaders = self.ge
-00025e90: 745f 6865 6164 6572 7328 7365 6c66 2e68  t_headers(self.h
-00025ea0: 6f73 745f 7572 6c2c 2069 665f 6170 693d  ost_url, if_api=
-00025eb0: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
-00025ec0: 7365 6c66 2e61 7069 5f68 6561 6465 7273  self.api_headers
-00025ed0: 203d 2073 656c 662e 6765 745f 6865 6164   = self.get_head
-00025ee0: 6572 7328 7365 6c66 2e68 6f73 745f 7572  ers(self.host_ur
-00025ef0: 6c2c 2069 665f 6170 693d 5472 7565 2c20  l, if_api=True, 
-00025f00: 6966 5f6a 736f 6e5f 666f 725f 6170 693d  if_json_for_api=
-00025f10: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
-00025f20: 7365 6c66 2e73 6573 7369 6f6e 203d 204e  self.session = N
-00025f30: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
-00025f40: 662e 6c61 6e67 7561 6765 5f6d 6170 203d  f.language_map =
-00025f50: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
-00025f60: 656c 662e 6c61 6e67 7561 6765 5f64 6573  elf.language_des
-00025f70: 6372 6970 7469 6f6e 203d 204e 6f6e 650d  cription = None.
-00025f80: 0a20 2020 2020 2020 2073 656c 662e 7175  .        self.qu
-00025f90: 6572 795f 636f 756e 7420 3d20 300d 0a20  ery_count = 0.. 
-00025fa0: 2020 2020 2020 2073 656c 662e 6f75 7470         self.outp
-00025fb0: 7574 5f7a 6820 3d20 277a 6827 0d0a 2020  ut_zh = 'zh'..  
-00025fc0: 2020 2020 2020 7365 6c66 2e69 6e70 7574        self.input
-00025fd0: 5f6c 696d 6974 203d 2069 6e74 2831 2e35  _limit = int(1.5
-00025fe0: 6534 2920 2023 2066 6966 7465 656e 2074  e4)  # fifteen t
-00025ff0: 686f 7573 616e 6420 6c65 7474 6572 7320  housand letters 
-00026000: 6c65 6674 2074 6f64 6179 2e0d 0a20 2020  left today...   
-00026010: 2020 2020 2073 656c 662e 6465 6661 756c       self.defaul
-00026020: 745f 6672 6f6d 5f6c 616e 6775 6167 6520  t_from_language 
-00026030: 3d20 7365 6c66 2e6f 7574 7075 745f 7a68  = self.output_zh
-00026040: 0d0a 0d0a 2020 2020 4054 7365 2e64 6562  ....    @Tse.deb
-00026050: 7567 5f6c 616e 6775 6167 655f 6d61 700d  ug_language_map.
-00026060: 0a20 2020 2064 6566 2067 6574 5f6c 616e  .    def get_lan
-00026070: 6775 6167 655f 6d61 7028 7365 6c66 2c20  guage_map(self, 
-00026080: 6c61 6e67 5f64 6573 633a 2064 6963 742c  lang_desc: dict,
-00026090: 202a 2a6b 7761 7267 733a 204c 616e 674d   **kwargs: LangM
-000260a0: 6170 4b77 6172 6773 5479 7065 2920 2d3e  apKwargsType) ->
-000260b0: 2064 6963 743a 0d0a 2020 2020 2020 2020   dict:..        
-000260c0: 7265 7475 726e 207b 6974 656d 5b27 636f  return {item['co
-000260d0: 6465 275d 3a20 5b69 745b 2763 6f64 6527  de']: [it['code'
-000260e0: 5d20 666f 7220 6974 2069 6e20 6974 656d  ] for it in item
-000260f0: 5b27 6176 6169 6c61 626c 6554 7261 6e73  ['availableTrans
-00026100: 6c61 7469 6f6e 4c61 6e67 7561 6765 7327  lationLanguages'
-00026110: 5d5d 2066 6f72 2069 7465 6d20 696e 206c  ]] for item in l
-00026120: 616e 675f 6465 7363 7d0d 0a0d 0a20 2020  ang_desc}....   
-00026130: 2040 5473 652e 7469 6d65 5f73 7461 740d   @Tse.time_stat.
-00026140: 0a20 2020 2040 5473 652e 6368 6563 6b5f  .    @Tse.check_
-00026150: 7175 6572 790d 0a20 2020 2064 6566 2074  query..    def t
-00026160: 7261 6e73 6c61 7465 436f 6d5f 6170 6928  ranslateCom_api(
-00026170: 7365 6c66 2c20 7175 6572 795f 7465 7874  self, query_text
-00026180: 3a20 7374 722c 2066 726f 6d5f 6c61 6e67  : str, from_lang
-00026190: 7561 6765 3a20 7374 7220 3d20 2761 7574  uage: str = 'aut
-000261a0: 6f27 2c20 746f 5f6c 616e 6775 6167 653a  o', to_language:
-000261b0: 2073 7472 203d 2027 656e 272c 202a 2a6b   str = 'en', **k
-000261c0: 7761 7267 733a 2041 7069 4b77 6172 6773  wargs: ApiKwargs
-000261d0: 5479 7065 2920 2d3e 2055 6e69 6f6e 5b73  Type) -> Union[s
-000261e0: 7472 2c20 6469 6374 5d3a 0d0a 2020 2020  tr, dict]:..    
-000261f0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00026200: 2068 7474 7073 3a2f 2f77 7777 2e74 7261   https://www.tra
-00026210: 6e73 6c61 7465 2e63 6f6d 2f6d 6163 6869  nslate.com/machi
-00026220: 6e65 2d74 7261 6e73 6c61 7469 6f6e 0d0a  ne-translation..
-00026230: 2020 2020 2020 2020 3a70 6172 616d 2071          :param q
-00026240: 7565 7279 5f74 6578 743a 2073 7472 2c20  uery_text: str, 
-00026250: 6d75 7374 2e0d 0a20 2020 2020 2020 203a  must...        :
-00026260: 7061 7261 6d20 6672 6f6d 5f6c 616e 6775  param from_langu
-00026270: 6167 653a 2073 7472 2c20 6465 6661 756c  age: str, defaul
-00026280: 7420 2761 7574 6f27 2e0d 0a20 2020 2020  t 'auto'...     
-00026290: 2020 203a 7061 7261 6d20 746f 5f6c 616e     :param to_lan
-000262a0: 6775 6167 653a 2073 7472 2c20 6465 6661  guage: str, defa
-000262b0: 756c 7420 2765 6e27 2e0d 0a20 2020 2020  ult 'en'...     
-000262c0: 2020 203a 7061 7261 6d20 2a2a 6b77 6172     :param **kwar
-000262d0: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
-000262e0: 2020 2020 203a 7061 7261 6d20 7469 6d65       :param time
-000262f0: 6f75 743a 2066 6c6f 6174 2c20 6465 6661  out: float, defa
-00026300: 756c 7420 4e6f 6e65 2e0d 0a20 2020 2020  ult None...     
-00026310: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00026320: 6d20 7072 6f78 6965 733a 2064 6963 742c  m proxies: dict,
-00026330: 2064 6566 6175 6c74 204e 6f6e 652e 0d0a   default None...
-00026340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026350: 3a70 6172 616d 2073 6c65 6570 5f73 6563  :param sleep_sec
-00026360: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
-00026370: 6175 6c74 2030 2e0d 0a20 2020 2020 2020  ault 0...       
-00026380: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00026390: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
-000263a0: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-000263b0: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
-000263c0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-000263d0: 665f 6967 6e6f 7265 5f6c 696d 6974 5f6f  f_ignore_limit_o
-000263e0: 665f 6c65 6e67 7468 3a20 626f 6f6c 2c20  f_length: bool, 
-000263f0: 6465 6661 756c 7420 4661 6c73 652e 0d0a  default False...
-00026400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026410: 3a70 6172 616d 206c 696d 6974 5f6f 665f  :param limit_of_
-00026420: 6c65 6e67 7468 3a20 696e 742c 2064 6566  length: int, def
-00026430: 6175 6c74 2032 3030 3030 2e0d 0a20 2020  ault 20000...   
-00026440: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00026450: 7261 6d20 6966 5f69 676e 6f72 655f 656d  ram if_ignore_em
-00026460: 7074 795f 7175 6572 793a 2062 6f6f 6c2c  pty_query: bool,
-00026470: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
-00026480: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00026490: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
-000264a0: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
-000264b0: 713a 2069 6e74 2c20 6465 6661 756c 7420  q: int, default 
-000264c0: 3130 3030 2e0d 0a20 2020 2020 2020 2020  1000...         
-000264d0: 2020 2020 2020 203a 7061 7261 6d20 7570         :param up
-000264e0: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-000264f0: 6572 5f73 6563 6f6e 6473 3a20 666c 6f61  er_seconds: floa
-00026500: 742c 2064 6566 6175 6c74 2031 3530 302e  t, default 1500.
-00026510: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00026520: 2020 3a70 6172 616d 2069 665f 7368 6f77    :param if_show
-00026530: 5f74 696d 655f 7374 6174 3a20 626f 6f6c  _time_stat: bool
-00026540: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-00026550: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00026560: 2020 3a70 6172 616d 2073 686f 775f 7469    :param show_ti
-00026570: 6d65 5f73 7461 745f 7072 6563 6973 696f  me_stat_precisio
-00026580: 6e3a 2069 6e74 2c20 6465 6661 756c 7420  n: int, default 
-00026590: 322e 0d0a 2020 2020 2020 2020 2020 2020  2...            
-000265a0: 2020 2020 3a70 6172 616d 2069 665f 7072      :param if_pr
-000265b0: 696e 745f 7761 726e 696e 673a 2062 6f6f  int_warning: boo
-000265c0: 6c2c 2064 6566 6175 6c74 2054 7275 652e  l, default True.
-000265d0: 0d0a 2020 2020 2020 2020 3a72 6574 7572  ..        :retur
-000265e0: 6e3a 2073 7472 206f 7220 6469 6374 0d0a  n: str or dict..
-000265f0: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
-00026600: 2020 2020 2020 2074 696d 656f 7574 203d         timeout =
-00026610: 206b 7761 7267 732e 6765 7428 2774 696d   kwargs.get('tim
-00026620: 656f 7574 272c 204e 6f6e 6529 0d0a 2020  eout', None)..  
-00026630: 2020 2020 2020 7072 6f78 6965 7320 3d20        proxies = 
-00026640: 6b77 6172 6773 2e67 6574 2827 7072 6f78  kwargs.get('prox
-00026650: 6965 7327 2c20 4e6f 6e65 290d 0a20 2020  ies', None)..   
-00026660: 2020 2020 2073 6c65 6570 5f73 6563 6f6e       sleep_secon
-00026670: 6473 203d 206b 7761 7267 732e 6765 7428  ds = kwargs.get(
-00026680: 2773 6c65 6570 5f73 6563 6f6e 6473 272c  'sleep_seconds',
-00026690: 2030 290d 0a20 2020 2020 2020 2069 665f   0)..        if_
-000266a0: 7072 696e 745f 7761 726e 696e 6720 3d20  print_warning = 
-000266b0: 6b77 6172 6773 2e67 6574 2827 6966 5f70  kwargs.get('if_p
-000266c0: 7269 6e74 5f77 6172 6e69 6e67 272c 2054  rint_warning', T
-000266d0: 7275 6529 0d0a 2020 2020 2020 2020 6973  rue)..        is
-000266e0: 5f64 6574 6169 6c5f 7265 7375 6c74 203d  _detail_result =
-000266f0: 206b 7761 7267 732e 6765 7428 2769 735f   kwargs.get('is_
-00026700: 6465 7461 696c 5f72 6573 756c 7427 2c20  detail_result', 
-00026710: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
-00026720: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
-00026730: 6674 6572 5f66 7265 7120 3d20 6b77 6172  fter_freq = kwar
-00026740: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
-00026750: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
-00026760: 7127 2c20 7365 6c66 2e64 6566 6175 6c74  q', self.default
-00026770: 5f73 6573 7369 6f6e 5f66 7265 7129 0d0a  _session_freq)..
-00026780: 2020 2020 2020 2020 7570 6461 7465 5f73          update_s
-00026790: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-000267a0: 6f6e 6473 203d 206b 7761 7267 732e 6765  onds = kwargs.ge
-000267b0: 7428 2775 7064 6174 655f 7365 7373 696f  t('update_sessio
-000267c0: 6e5f 6166 7465 725f 7365 636f 6e64 7327  n_after_seconds'
-000267d0: 2c20 7365 6c66 2e64 6566 6175 6c74 5f73  , self.default_s
-000267e0: 6573 7369 6f6e 5f73 6563 6f6e 6473 290d  ession_seconds).
-000267f0: 0a20 2020 2020 2020 2073 656c 662e 6368  .        self.ch
-00026800: 6563 6b5f 696e 7075 745f 6c69 6d69 7428  eck_input_limit(
-00026810: 7175 6572 795f 7465 7874 2c20 7365 6c66  query_text, self
-00026820: 2e69 6e70 7574 5f6c 696d 6974 290d 0a0d  .input_limit)...
-00026830: 0a20 2020 2020 2020 206e 6f74 5f75 7064  .        not_upd
-00026840: 6174 655f 636f 6e64 5f66 7265 7120 3d20  ate_cond_freq = 
-00026850: 3120 6966 2073 656c 662e 7175 6572 795f  1 if self.query_
-00026860: 636f 756e 7420 2520 7570 6461 7465 5f73  count % update_s
-00026870: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
-00026880: 7120 213d 2030 2065 6c73 6520 300d 0a20  q != 0 else 0.. 
-00026890: 2020 2020 2020 206e 6f74 5f75 7064 6174         not_updat
-000268a0: 655f 636f 6e64 5f74 696d 6520 3d20 3120  e_cond_time = 1 
-000268b0: 6966 2074 696d 652e 7469 6d65 2829 202d  if time.time() -
-000268c0: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
-000268d0: 203c 2075 7064 6174 655f 7365 7373 696f   < update_sessio
-000268e0: 6e5f 6166 7465 725f 7365 636f 6e64 7320  n_after_seconds 
-000268f0: 656c 7365 2030 0d0a 2020 2020 2020 2020  else 0..        
-00026900: 6966 206e 6f74 2028 7365 6c66 2e73 6573  if not (self.ses
-00026910: 7369 6f6e 2061 6e64 2073 656c 662e 6c61  sion and self.la
-00026920: 6e67 7561 6765 5f6d 6170 2061 6e64 206e  nguage_map and n
-00026930: 6f74 5f75 7064 6174 655f 636f 6e64 5f66  ot_update_cond_f
-00026940: 7265 7120 616e 6420 6e6f 745f 7570 6461  req and not_upda
-00026950: 7465 5f63 6f6e 645f 7469 6d65 293a 0d0a  te_cond_time):..
-00026960: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00026970: 2e62 6567 696e 5f74 696d 6520 3d20 7469  .begin_time = ti
-00026980: 6d65 2e74 696d 6528 290d 0a20 2020 2020  me.time()..     
-00026990: 2020 2020 2020 2073 656c 662e 7365 7373         self.sess
-000269a0: 696f 6e20 3d20 7265 7175 6573 7473 2e53  ion = requests.S
-000269b0: 6573 7369 6f6e 2829 0d0a 2020 2020 2020  ession()..      
-000269c0: 2020 2020 2020 5f20 3d20 7365 6c66 2e73        _ = self.s
-000269d0: 6573 7369 6f6e 2e67 6574 2873 656c 662e  ession.get(self.
-000269e0: 686f 7374 5f75 726c 2c20 6865 6164 6572  host_url, header
-000269f0: 733d 7365 6c66 2e68 6f73 745f 6865 6164  s=self.host_head
-00026a00: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
-00026a10: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
-00026a20: 6f78 6965 7329 0d0a 2020 2020 2020 2020  oxies)..        
-00026a30: 2020 2020 6c61 6e67 5f72 203d 2073 656c      lang_r = sel
-00026a40: 662e 7365 7373 696f 6e2e 6765 7428 7365  f.session.get(se
-00026a50: 6c66 2e6c 616e 6775 6167 655f 7572 6c2c  lf.language_url,
-00026a60: 2068 6561 6465 7273 3d73 656c 662e 686f   headers=self.ho
-00026a70: 7374 5f68 6561 6465 7273 2c20 7469 6d65  st_headers, time
-00026a80: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
-00026a90: 7869 6573 3d70 726f 7869 6573 290d 0a20  xies=proxies).. 
-00026aa0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00026ab0: 6c61 6e67 7561 6765 5f64 6573 6372 6970  language_descrip
-00026ac0: 7469 6f6e 203d 206c 616e 675f 722e 6a73  tion = lang_r.js
-00026ad0: 6f6e 2829 0d0a 2020 2020 2020 2020 2020  on()..          
-00026ae0: 2020 6465 6275 675f 6c61 6e67 5f6b 7761    debug_lang_kwa
-00026af0: 7267 7320 3d20 7365 6c66 2e64 6562 7567  rgs = self.debug
-00026b00: 5f6c 616e 675f 6b77 6172 6773 2866 726f  _lang_kwargs(fro
-00026b10: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
-00026b20: 616e 6775 6167 652c 2073 656c 662e 6465  anguage, self.de
-00026b30: 6661 756c 745f 6672 6f6d 5f6c 616e 6775  fault_from_langu
-00026b40: 6167 652c 2069 665f 7072 696e 745f 7761  age, if_print_wa
-00026b50: 726e 696e 6729 0d0a 2020 2020 2020 2020  rning)..        
-00026b60: 2020 2020 7365 6c66 2e6c 616e 6775 6167      self.languag
-00026b70: 655f 6d61 7020 3d20 7365 6c66 2e67 6574  e_map = self.get
-00026b80: 5f6c 616e 6775 6167 655f 6d61 7028 7365  _language_map(se
-00026b90: 6c66 2e6c 616e 6775 6167 655f 6465 7363  lf.language_desc
-00026ba0: 7269 7074 696f 6e2c 202a 2a64 6562 7567  ription, **debug
-00026bb0: 5f6c 616e 675f 6b77 6172 6773 290d 0a0d  _lang_kwargs)...
-00026bc0: 0a20 2020 2020 2020 2069 6620 6672 6f6d  .        if from
-00026bd0: 5f6c 616e 6775 6167 6520 3d3d 2027 6175  _language == 'au
-00026be0: 746f 273a 0d0a 2020 2020 2020 2020 2020  to':..          
-00026bf0: 2020 6465 7465 6374 5f66 6f72 6d20 3d20    detect_form = 
-00026c00: 7b27 7465 7874 5f74 6f5f 7472 616e 736c  {'text_to_transl
-00026c10: 6174 6527 3a20 7175 6572 795f 7465 7874  ate': query_text
-00026c20: 7d0d 0a20 2020 2020 2020 2020 2020 2072  }..            r
-00026c30: 5f64 6574 6563 7420 3d20 7365 6c66 2e73  _detect = self.s
-00026c40: 6573 7369 6f6e 2e70 6f73 7428 7365 6c66  ession.post(self
-00026c50: 2e6c 616e 675f 6465 7465 6374 5f75 726c  .lang_detect_url
-00026c60: 2c20 6461 7461 3d64 6574 6563 745f 666f  , data=detect_fo
-00026c70: 726d 2c20 6865 6164 6572 733d 7365 6c66  rm, headers=self
-00026c80: 2e61 7069 5f68 6561 6465 7273 2c20 7469  .api_headers, ti
-00026c90: 6d65 6f75 743d 7469 6d65 6f75 742c 2070  meout=timeout, p
-00026ca0: 726f 7869 6573 3d70 726f 7869 6573 290d  roxies=proxies).
-00026cb0: 0a20 2020 2020 2020 2020 2020 2066 726f  .            fro
-00026cc0: 6d5f 6c61 6e67 7561 6765 203d 2072 5f64  m_language = r_d
-00026cd0: 6574 6563 742e 6a73 6f6e 2829 5b27 6c61  etect.json()['la
-00026ce0: 6e67 7561 6765 275d 0d0a 0d0a 2020 2020  nguage']....    
-00026cf0: 2020 2020 6672 6f6d 5f6c 616e 6775 6167      from_languag
-00026d00: 652c 2074 6f5f 6c61 6e67 7561 6765 203d  e, to_language =
-00026d10: 2073 656c 662e 6368 6563 6b5f 6c61 6e67   self.check_lang
-00026d20: 7561 6765 2866 726f 6d5f 6c61 6e67 7561  uage(from_langua
-00026d30: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
-00026d40: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
-00026d50: 6170 2c20 6f75 7470 7574 5f7a 683d 7365  ap, output_zh=se
-00026d60: 6c66 2e6f 7574 7075 745f 7a68 290d 0a0d  lf.output_zh)...
-00026d70: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00026d80: 203d 207b 0d0a 2020 2020 2020 2020 2020   = {..          
-00026d90: 2020 2774 6578 745f 746f 5f74 7261 6e73    'text_to_trans
-00026da0: 6c61 7465 273a 2071 7565 7279 5f74 6578  late': query_tex
-00026db0: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
-00026dc0: 2773 6f75 7263 655f 6c61 6e67 273a 2066  'source_lang': f
-00026dd0: 726f 6d5f 6c61 6e67 7561 6765 2c0d 0a20  rom_language,.. 
-00026de0: 2020 2020 2020 2020 2020 2027 7472 616e             'tran
-00026df0: 736c 6174 6564 5f6c 616e 6727 3a20 746f  slated_lang': to
-00026e00: 5f6c 616e 6775 6167 652c 0d0a 2020 2020  _language,..    
-00026e10: 2020 2020 2020 2020 2775 7365 5f63 6163          'use_cac
-00026e20: 6865 5f6f 6e6c 7927 3a20 2766 616c 7365  he_only': 'false
-00026e30: 272c 0d0a 2020 2020 2020 2020 7d0d 0a20  ',..        }.. 
-00026e40: 2020 2020 2020 2072 203d 2073 656c 662e         r = self.
-00026e50: 7365 7373 696f 6e2e 706f 7374 2873 656c  session.post(sel
-00026e60: 662e 6170 695f 7572 6c2c 2064 6174 613d  f.api_url, data=
-00026e70: 7061 796c 6f61 642c 2068 6561 6465 7273  payload, headers
-00026e80: 3d73 656c 662e 6170 695f 6865 6164 6572  =self.api_header
-00026e90: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
-00026ea0: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
-00026eb0: 6965 7329 0d0a 2020 2020 2020 2020 722e  ies)..        r.
-00026ec0: 7261 6973 655f 666f 725f 7374 6174 7573  raise_for_status
-00026ed0: 2829 0d0a 2020 2020 2020 2020 6461 7461  ()..        data
-00026ee0: 203d 2072 2e6a 736f 6e28 290d 0a20 2020   = r.json()..   
-00026ef0: 2020 2020 2074 696d 652e 736c 6565 7028       time.sleep(
-00026f00: 736c 6565 705f 7365 636f 6e64 7329 0d0a  sleep_seconds)..
-00026f10: 2020 2020 2020 2020 7365 6c66 2e71 7565          self.que
-00026f20: 7279 5f63 6f75 6e74 202b 3d20 310d 0a20  ry_count += 1.. 
-00026f30: 2020 2020 2020 2072 6574 7572 6e20 6461         return da
-00026f40: 7461 2069 6620 6973 5f64 6574 6169 6c5f  ta if is_detail_
-00026f50: 7265 7375 6c74 2065 6c73 6520 6461 7461  result else data
-00026f60: 5b27 7472 616e 736c 6174 6564 5f74 6578  ['translated_tex
-00026f70: 7427 5d20 2023 2074 7261 6e73 6c61 7469  t']  # translati
-00026f80: 6f6e 5f73 6f75 7263 6520 6973 206d 6963  on_source is mic
-00026f90: 726f 736f 6674 2c20 7774 6621 0d0a 0d0a  rosoft, wtf!....
-00026fa0: 0d0a 636c 6173 7320 5574 6962 6574 2854  ..class Utibet(T
-00026fb0: 7365 293a 0d0a 2020 2020 6465 6620 5f5f  se):..    def __
-00026fc0: 696e 6974 5f5f 2873 656c 6629 3a0d 0a20  init__(self):.. 
-00026fd0: 2020 2020 2020 2073 7570 6572 2829 2e5f         super()._
-00026fe0: 5f69 6e69 745f 5f28 290d 0a20 2020 2020  _init__()..     
-00026ff0: 2020 2073 656c 662e 6265 6769 6e5f 7469     self.begin_ti
-00027000: 6d65 203d 2074 696d 652e 7469 6d65 2829  me = time.time()
-00027010: 0d0a 2020 2020 2020 2020 7365 6c66 2e68  ..        self.h
-00027020: 6f73 745f 7572 6c20 3d20 2768 7474 703a  ost_url = 'http:
-00027030: 2f2f 6d74 2e75 7469 6265 742e 6564 752e  //mt.utibet.edu.
-00027040: 636e 2f6d 7427 2020 2320 6d75 7374 2068  cn/mt'  # must h
-00027050: 7474 700d 0a20 2020 2020 2020 2073 656c  ttp..        sel
-00027060: 662e 6170 695f 7572 6c20 3d20 7365 6c66  f.api_url = self
-00027070: 2e68 6f73 745f 7572 6c0d 0a20 2020 2020  .host_url..     
-00027080: 2020 2073 656c 662e 686f 7374 5f68 6561     self.host_hea
-00027090: 6465 7273 203d 2073 656c 662e 6765 745f  ders = self.get_
-000270a0: 6865 6164 6572 7328 7365 6c66 2e68 6f73  headers(self.hos
-000270b0: 745f 7572 6c2c 2069 665f 6170 693d 4661  t_url, if_api=Fa
-000270c0: 6c73 6529 0d0a 2020 2020 2020 2020 7365  lse)..        se
-000270d0: 6c66 2e61 7069 5f68 6561 6465 7273 203d  lf.api_headers =
-000270e0: 2073 656c 662e 6765 745f 6865 6164 6572   self.get_header
-000270f0: 7328 7365 6c66 2e68 6f73 745f 7572 6c2c  s(self.host_url,
-00027100: 2069 665f 6170 693d 5472 7565 2c20 6966   if_api=True, if
-00027110: 5f6a 736f 6e5f 666f 725f 6170 693d 4661  _json_for_api=Fa
-00027120: 6c73 6529 0d0a 2020 2020 2020 2020 7365  lse)..        se
-00027130: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
-00027140: 3d20 7b27 7469 273a 205b 277a 6827 5d2c  = {'ti': ['zh'],
-00027150: 2027 7a68 273a 205b 2774 6927 5d7d 0d0a   'zh': ['ti']}..
-00027160: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
-00027170: 7369 6f6e 203d 204e 6f6e 650d 0a20 2020  sion = None..   
-00027180: 2020 2020 2073 656c 662e 7175 6572 795f       self.query_
-00027190: 636f 756e 7420 3d20 300d 0a20 2020 2020  count = 0..     
-000271a0: 2020 2073 656c 662e 6f75 7470 7574 5f7a     self.output_z
-000271b0: 6820 3d20 277a 6827 0d0a 2020 2020 2020  h = 'zh'..      
-000271c0: 2020 7365 6c66 2e69 6e70 7574 5f6c 696d    self.input_lim
-000271d0: 6974 203d 2069 6e74 2835 6533 2920 2023  it = int(5e3)  #
-000271e0: 2075 6e6b 6e6f 776e 0d0a 2020 2020 2020   unknown..      
-000271f0: 2020 7365 6c66 2e64 6566 6175 6c74 5f66    self.default_f
-00027200: 726f 6d5f 6c61 6e67 7561 6765 203d 2073  rom_language = s
-00027210: 656c 662e 6f75 7470 7574 5f7a 680d 0a0d  elf.output_zh...
-00027220: 0a20 2020 2064 6566 2070 6172 7365 5f72  .    def parse_r
-00027230: 6573 756c 7428 7365 6c66 2c20 686f 7374  esult(self, host
-00027240: 5f68 746d 6c3a 2073 7472 2920 2d3e 2073  _html: str) -> s
-00027250: 7472 3a0d 0a20 2020 2020 2020 2065 7420  tr:..        et 
-00027260: 3d20 6c78 6d6c 2e65 7472 6565 2e48 544d  = lxml.etree.HTM
-00027270: 4c28 686f 7374 5f68 746d 6c29 0d0a 2020  L(host_html)..  
-00027280: 2020 2020 2020 7265 7475 726e 2065 742e        return et.
-00027290: 7870 6174 6828 272f 2f2a 5b40 6e61 6d65  xpath('//*[@name
-000272a0: 3d22 7467 7422 5d2f 7465 7874 2829 2729  ="tgt"]/text()')
-000272b0: 5b30 5d0d 0a0d 0a20 2020 2040 5473 652e  [0]....    @Tse.
-000272c0: 7469 6d65 5f73 7461 740d 0a20 2020 2040  time_stat..    @
-000272d0: 5473 652e 6368 6563 6b5f 7175 6572 790d  Tse.check_query.
-000272e0: 0a20 2020 2064 6566 2075 7469 6265 745f  .    def utibet_
-000272f0: 6170 6928 7365 6c66 2c20 7175 6572 795f  api(self, query_
-00027300: 7465 7874 3a20 7374 722c 2066 726f 6d5f  text: str, from_
-00027310: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
-00027320: 2761 7574 6f27 2c20 746f 5f6c 616e 6775  'auto', to_langu
-00027330: 6167 653a 2073 7472 203d 2027 7469 272c  age: str = 'ti',
-00027340: 202a 2a6b 7761 7267 733a 2041 7069 4b77   **kwargs: ApiKw
-00027350: 6172 6773 5479 7065 2920 2d3e 2055 6e69  argsType) -> Uni
-00027360: 6f6e 5b73 7472 2c20 6469 6374 5d3a 0d0a  on[str, dict]:..
-00027370: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00027380: 2020 2020 2068 7474 703a 2f2f 6d74 2e75       http://mt.u
-00027390: 7469 6265 742e 6564 752e 636e 2f6d 740d  tibet.edu.cn/mt.
-000273a0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-000273b0: 7175 6572 795f 7465 7874 3a20 7374 722c  query_text: str,
-000273c0: 206d 7573 742e 0d0a 2020 2020 2020 2020   must...        
-000273d0: 3a70 6172 616d 2066 726f 6d5f 6c61 6e67  :param from_lang
-000273e0: 7561 6765 3a20 7374 722c 2064 6566 6175  uage: str, defau
-000273f0: 6c74 2027 6175 746f 272c 2065 7175 616c  lt 'auto', equal
-00027400: 7320 746f 2027 7a68 272e 0d0a 2020 2020  s to 'zh'...    
-00027410: 2020 2020 3a70 6172 616d 2074 6f5f 6c61      :param to_la
-00027420: 6e67 7561 6765 3a20 7374 722c 2064 6566  nguage: str, def
-00027430: 6175 6c74 2027 7469 272e 0d0a 2020 2020  ault 'ti'...    
-00027440: 2020 2020 3a70 6172 616d 202a 2a6b 7761      :param **kwa
-00027450: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
-00027460: 2020 2020 2020 3a70 6172 616d 2074 696d        :param tim
-00027470: 656f 7574 3a20 666c 6f61 742c 2064 6566  eout: float, def
-00027480: 6175 6c74 204e 6f6e 652e 0d0a 2020 2020  ault None...    
-00027490: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-000274a0: 616d 2070 726f 7869 6573 3a20 6469 6374  am proxies: dict
-000274b0: 2c20 6465 6661 756c 7420 4e6f 6e65 2e0d  , default None..
-000274c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000274d0: 203a 7061 7261 6d20 736c 6565 705f 7365   :param sleep_se
-000274e0: 636f 6e64 733a 2066 6c6f 6174 2c20 6465  conds: float, de
-000274f0: 6661 756c 7420 302e 0d0a 2020 2020 2020  fault 0...      
-00027500: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00027510: 2069 735f 6465 7461 696c 5f72 6573 756c   is_detail_resul
-00027520: 743a 2062 6f6f 6c2c 2064 6566 6175 6c74  t: bool, default
-00027530: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
-00027540: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00027550: 6966 5f69 676e 6f72 655f 6c69 6d69 745f  if_ignore_limit_
-00027560: 6f66 5f6c 656e 6774 683a 2062 6f6f 6c2c  of_length: bool,
-00027570: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
-00027580: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027590: 203a 7061 7261 6d20 6c69 6d69 745f 6f66   :param limit_of
-000275a0: 5f6c 656e 6774 683a 2069 6e74 2c20 6465  _length: int, de
-000275b0: 6661 756c 7420 3230 3030 302e 0d0a 2020  fault 20000...  
-000275c0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-000275d0: 6172 616d 2069 665f 6967 6e6f 7265 5f65  aram if_ignore_e
-000275e0: 6d70 7479 5f71 7565 7279 3a20 626f 6f6c  mpty_query: bool
-000275f0: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-00027600: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00027610: 2020 3a70 6172 616d 2075 7064 6174 655f    :param update_
-00027620: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
-00027630: 6571 3a20 696e 742c 2064 6566 6175 6c74  eq: int, default
-00027640: 2031 3030 302e 0d0a 2020 2020 2020 2020   1000...        
-00027650: 2020 2020 2020 2020 3a70 6172 616d 2075          :param u
-00027660: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-00027670: 7465 725f 7365 636f 6e64 733a 2066 6c6f  ter_seconds: flo
-00027680: 6174 2c20 6465 6661 756c 7420 3135 3030  at, default 1500
-00027690: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-000276a0: 2020 203a 7061 7261 6d20 6966 5f73 686f     :param if_sho
-000276b0: 775f 7469 6d65 5f73 7461 743a 2062 6f6f  w_time_stat: boo
-000276c0: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
-000276d0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-000276e0: 2020 203a 7061 7261 6d20 7368 6f77 5f74     :param show_t
-000276f0: 696d 655f 7374 6174 5f70 7265 6369 7369  ime_stat_precisi
-00027700: 6f6e 3a20 696e 742c 2064 6566 6175 6c74  on: int, default
-00027710: 2032 2e0d 0a20 2020 2020 2020 2020 2020   2...           
-00027720: 2020 2020 203a 7061 7261 6d20 6966 5f70       :param if_p
-00027730: 7269 6e74 5f77 6172 6e69 6e67 3a20 626f  rint_warning: bo
-00027740: 6f6c 2c20 6465 6661 756c 7420 5472 7565  ol, default True
-00027750: 2e0d 0a20 2020 2020 2020 203a 7265 7475  ...        :retu
-00027760: 726e 3a20 7374 7220 6f72 2064 6963 740d  rn: str or dict.
-00027770: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
-00027780: 2020 2020 2020 2020 7469 6d65 6f75 7420          timeout 
-00027790: 3d20 6b77 6172 6773 2e67 6574 2827 7469  = kwargs.get('ti
-000277a0: 6d65 6f75 7427 2c20 4e6f 6e65 290d 0a20  meout', None).. 
-000277b0: 2020 2020 2020 2070 726f 7869 6573 203d         proxies =
-000277c0: 206b 7761 7267 732e 6765 7428 2770 726f   kwargs.get('pro
-000277d0: 7869 6573 272c 204e 6f6e 6529 0d0a 2020  xies', None)..  
-000277e0: 2020 2020 2020 736c 6565 705f 7365 636f        sleep_seco
-000277f0: 6e64 7320 3d20 6b77 6172 6773 2e67 6574  nds = kwargs.get
-00027800: 2827 736c 6565 705f 7365 636f 6e64 7327  ('sleep_seconds'
-00027810: 2c20 3029 0d0a 2020 2020 2020 2020 6966  , 0)..        if
-00027820: 5f70 7269 6e74 5f77 6172 6e69 6e67 203d  _print_warning =
-00027830: 206b 7761 7267 732e 6765 7428 2769 665f   kwargs.get('if_
-00027840: 7072 696e 745f 7761 726e 696e 6727 2c20  print_warning', 
-00027850: 5472 7565 290d 0a20 2020 2020 2020 2069  True)..        i
-00027860: 735f 6465 7461 696c 5f72 6573 756c 7420  s_detail_result 
-00027870: 3d20 6b77 6172 6773 2e67 6574 2827 6973  = kwargs.get('is
-00027880: 5f64 6574 6169 6c5f 7265 7375 6c74 272c  _detail_result',
-00027890: 2046 616c 7365 290d 0a20 2020 2020 2020   False)..       
-000278a0: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-000278b0: 6166 7465 725f 6672 6571 203d 206b 7761  after_freq = kwa
-000278c0: 7267 732e 6765 7428 2775 7064 6174 655f  rgs.get('update_
-000278d0: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
-000278e0: 6571 272c 2073 656c 662e 6465 6661 756c  eq', self.defaul
-000278f0: 745f 7365 7373 696f 6e5f 6672 6571 290d  t_session_freq).
-00027900: 0a20 2020 2020 2020 2075 7064 6174 655f  .        update_
-00027910: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
-00027920: 636f 6e64 7320 3d20 6b77 6172 6773 2e67  conds = kwargs.g
-00027930: 6574 2827 7570 6461 7465 5f73 6573 7369  et('update_sessi
-00027940: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-00027950: 272c 2073 656c 662e 6465 6661 756c 745f  ', self.default_
-00027960: 7365 7373 696f 6e5f 7365 636f 6e64 7329  session_seconds)
-00027970: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
-00027980: 6865 636b 5f69 6e70 7574 5f6c 696d 6974  heck_input_limit
-00027990: 2871 7565 7279 5f74 6578 742c 2073 656c  (query_text, sel
-000279a0: 662e 696e 7075 745f 6c69 6d69 7429 0d0a  f.input_limit)..
-000279b0: 0d0a 2020 2020 2020 2020 6e6f 745f 7570  ..        not_up
-000279c0: 6461 7465 5f63 6f6e 645f 6672 6571 203d  date_cond_freq =
-000279d0: 2031 2069 6620 7365 6c66 2e71 7565 7279   1 if self.query
-000279e0: 5f63 6f75 6e74 2025 2075 7064 6174 655f  _count % update_
-000279f0: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
-00027a00: 6571 2021 3d20 3020 656c 7365 2030 0d0a  eq != 0 else 0..
-00027a10: 2020 2020 2020 2020 6e6f 745f 7570 6461          not_upda
-00027a20: 7465 5f63 6f6e 645f 7469 6d65 203d 2031  te_cond_time = 1
-00027a30: 2069 6620 7469 6d65 2e74 696d 6528 2920   if time.time() 
-00027a40: 2d20 7365 6c66 2e62 6567 696e 5f74 696d  - self.begin_tim
-00027a50: 6520 3c20 7570 6461 7465 5f73 6573 7369  e < update_sessi
-00027a60: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-00027a70: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
-00027a80: 2069 6620 6e6f 7420 2873 656c 662e 7365   if not (self.se
-00027a90: 7373 696f 6e20 616e 6420 7365 6c66 2e6c  ssion and self.l
-00027aa0: 616e 6775 6167 655f 6d61 7020 616e 6420  anguage_map and 
-00027ab0: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
-00027ac0: 6672 6571 2061 6e64 206e 6f74 5f75 7064  freq and not_upd
-00027ad0: 6174 655f 636f 6e64 5f74 696d 6529 3a0d  ate_cond_time):.
-00027ae0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00027af0: 662e 6265 6769 6e5f 7469 6d65 203d 2074  f.begin_time = t
-00027b00: 696d 652e 7469 6d65 2829 0d0a 2020 2020  ime.time()..    
-00027b10: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
-00027b20: 7369 6f6e 203d 2072 6571 7565 7374 732e  sion = requests.
-00027b30: 5365 7373 696f 6e28 290d 0a20 2020 2020  Session()..     
-00027b40: 2020 2020 2020 205f 203d 2073 656c 662e         _ = self.
-00027b50: 7365 7373 696f 6e2e 6765 7428 7365 6c66  session.get(self
-00027b60: 2e68 6f73 745f 7572 6c2c 2068 6561 6465  .host_url, heade
-00027b70: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
-00027b80: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
-00027b90: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
-00027ba0: 726f 7869 6573 290d 0a0d 0a20 2020 2020  roxies)....     
-00027bb0: 2020 2069 6620 6672 6f6d 5f6c 616e 6775     if from_langu
-00027bc0: 6167 6520 3d3d 2027 6175 746f 273a 0d0a  age == 'auto':..
-00027bd0: 2020 2020 2020 2020 2020 2020 6672 6f6d              from
-00027be0: 5f6c 616e 6775 6167 6520 3d20 7365 6c66  _language = self
-00027bf0: 2e77 6172 6e69 6e67 5f61 7574 6f5f 6c61  .warning_auto_la
-00027c00: 6e67 2827 7574 6962 6574 272c 2073 656c  ng('utibet', sel
-00027c10: 662e 6465 6661 756c 745f 6672 6f6d 5f6c  f.default_from_l
-00027c20: 616e 6775 6167 652c 2069 665f 7072 696e  anguage, if_prin
-00027c30: 745f 7761 726e 696e 6729 0d0a 2020 2020  t_warning)..    
-00027c40: 2020 2020 6672 6f6d 5f6c 616e 6775 6167      from_languag
-00027c50: 652c 2074 6f5f 6c61 6e67 7561 6765 203d  e, to_language =
-00027c60: 2073 656c 662e 6368 6563 6b5f 6c61 6e67   self.check_lang
-00027c70: 7561 6765 2866 726f 6d5f 6c61 6e67 7561  uage(from_langua
-00027c80: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
-00027c90: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
-00027ca0: 6170 2c20 6f75 7470 7574 5f7a 683d 7365  ap, output_zh=se
-00027cb0: 6c66 2e6f 7574 7075 745f 7a68 290d 0a20  lf.output_zh).. 
-00027cc0: 2020 2020 2020 2070 6179 6c6f 6164 203d         payload =
-00027cd0: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
-00027ce0: 2773 7263 273a 2071 7565 7279 5f74 6578  'src': query_tex
-00027cf0: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
-00027d00: 2774 6774 273a 2071 7565 7279 5f74 6578  'tgt': query_tex
-00027d10: 7420 6966 2066 726f 6d5f 6c61 6e67 7561  t if from_langua
-00027d20: 6765 203d 3d20 2774 6927 2065 6c73 6520  ge == 'ti' else 
-00027d30: 2727 2c0d 0a20 2020 2020 2020 2020 2020  '',..           
-00027d40: 2027 6c61 6e67 273a 2027 7463 2720 6966   'lang': 'tc' if
-00027d50: 2066 726f 6d5f 6c61 6e67 7561 6765 203d   from_language =
-00027d60: 3d20 2774 6927 2065 6c73 6520 2763 7427  = 'ti' else 'ct'
-00027d70: 2c0d 0a20 2020 2020 2020 207d 0d0a 2020  ,..        }..  
-00027d80: 2020 2020 2020 7061 796c 6f61 6420 3d20        payload = 
-00027d90: 7572 6c6c 6962 2e70 6172 7365 2e75 726c  urllib.parse.url
-00027da0: 656e 636f 6465 2870 6179 6c6f 6164 290d  encode(payload).
-00027db0: 0a20 2020 2020 2020 2072 203d 2073 656c  .        r = sel
-00027dc0: 662e 7365 7373 696f 6e2e 706f 7374 2873  f.session.post(s
-00027dd0: 656c 662e 6170 695f 7572 6c2c 2068 6561  elf.api_url, hea
-00027de0: 6465 7273 3d73 656c 662e 6170 695f 6865  ders=self.api_he
-00027df0: 6164 6572 732c 2064 6174 613d 7061 796c  aders, data=payl
-00027e00: 6f61 642c 2074 696d 656f 7574 3d74 696d  oad, timeout=tim
-00027e10: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
-00027e20: 6f78 6965 7329 0d0a 2020 2020 2020 2020  oxies)..        
-00027e30: 722e 7261 6973 655f 666f 725f 7374 6174  r.raise_for_stat
-00027e40: 7573 2829 0d0a 2020 2020 2020 2020 6461  us()..        da
-00027e50: 7461 5f68 746d 6c20 3d20 722e 7465 7874  ta_html = r.text
-00027e60: 0d0a 2020 2020 2020 2020 7469 6d65 2e73  ..        time.s
-00027e70: 6c65 6570 2873 6c65 6570 5f73 6563 6f6e  leep(sleep_secon
-00027e80: 6473 290d 0a20 2020 2020 2020 2073 656c  ds)..        sel
-00027e90: 662e 7175 6572 795f 636f 756e 7420 2b3d  f.query_count +=
-00027ea0: 2031 0d0a 2020 2020 2020 2020 7265 7475   1..        retu
-00027eb0: 726e 207b 2764 6174 615f 6874 6d6c 273a  rn {'data_html':
-00027ec0: 2064 6174 615f 6874 6d6c 7d20 6966 2069   data_html} if i
-00027ed0: 735f 6465 7461 696c 5f72 6573 756c 7420  s_detail_result 
-00027ee0: 656c 7365 2073 656c 662e 7061 7273 655f  else self.parse_
-00027ef0: 7265 7375 6c74 2864 6174 615f 6874 6d6c  result(data_html
-00027f00: 290d 0a0d 0a0d 0a63 6c61 7373 2050 6170  )......class Pap
-00027f10: 6167 6f28 5473 6529 3a0d 0a20 2020 2064  ago(Tse):..    d
-00027f20: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-00027f30: 293a 0d0a 2020 2020 2020 2020 7375 7065  ):..        supe
-00027f40: 7228 292e 5f5f 696e 6974 5f5f 2829 0d0a  r().__init__()..
-00027f50: 2020 2020 2020 2020 7365 6c66 2e62 6567          self.beg
-00027f60: 696e 5f74 696d 6520 3d20 7469 6d65 2e74  in_time = time.t
-00027f70: 696d 6528 290d 0a20 2020 2020 2020 2073  ime()..        s
-00027f80: 656c 662e 686f 7374 5f75 726c 203d 2027  elf.host_url = '
-00027f90: 6874 7470 733a 2f2f 7061 7061 676f 2e6e  https://papago.n
-00027fa0: 6176 6572 2e63 6f6d 270d 0a20 2020 2020  aver.com'..     
-00027fb0: 2020 2073 656c 662e 6170 695f 7572 6c20     self.api_url 
-00027fc0: 3d20 2768 7474 7073 3a2f 2f70 6170 6167  = 'https://papag
-00027fd0: 6f2e 6e61 7665 722e 636f 6d2f 6170 6973  o.naver.com/apis
-00027fe0: 2f6e 326d 742f 7472 616e 736c 6174 6527  /n2mt/translate'
-00027ff0: 2020 2320 6e73 6d74 0d0a 2020 2020 2020    # nsmt..      
-00028000: 2020 7365 6c66 2e77 6562 5f61 7069 5f75    self.web_api_u
-00028010: 726c 203d 2027 6874 7470 733a 2f2f 7061  rl = 'https://pa
-00028020: 7061 676f 2e6e 6176 6572 2e6e 6574 2f77  pago.naver.net/w
-00028030: 6562 7369 7465 270d 0a20 2020 2020 2020  ebsite'..       
-00028040: 2073 656c 662e 6c61 6e67 5f64 6574 6563   self.lang_detec
-00028050: 745f 7572 6c20 3d20 2768 7474 7073 3a2f  t_url = 'https:/
-00028060: 2f70 6170 6167 6f2e 6e61 7665 722e 636f  /papago.naver.co
-00028070: 6d2f 6170 6973 2f6c 616e 6773 2f64 6563  m/apis/langs/dec
-00028080: 7427 0d0a 2020 2020 2020 2020 7365 6c66  t'..        self
-00028090: 2e6c 616e 6775 6167 655f 7572 6c20 3d20  .language_url = 
-000280a0: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-000280b0: 6c66 2e6c 616e 6775 6167 655f 7572 6c5f  lf.language_url_
-000280c0: 7061 7474 6572 6e20 3d20 272f 686f 6d65  pattern = '/home
-000280d0: 2e28 2e2a 3f29 2e63 6875 6e6b 2e6a 7327  .(.*?).chunk.js'
-000280e0: 0d0a 2020 2020 2020 2020 7365 6c66 2e68  ..        self.h
-000280f0: 6f73 745f 6865 6164 6572 7320 3d20 7365  ost_headers = se
-00028100: 6c66 2e67 6574 5f68 6561 6465 7273 2873  lf.get_headers(s
-00028110: 656c 662e 686f 7374 5f75 726c 2c20 6966  elf.host_url, if
-00028120: 5f61 7069 3d46 616c 7365 290d 0a20 2020  _api=False)..   
-00028130: 2020 2020 2073 656c 662e 6170 695f 6865       self.api_he
-00028140: 6164 6572 7320 3d20 7365 6c66 2e67 6574  aders = self.get
-00028150: 5f68 6561 6465 7273 2873 656c 662e 686f  _headers(self.ho
-00028160: 7374 5f75 726c 2c20 6966 5f61 7069 3d54  st_url, if_api=T
-00028170: 7275 652c 2069 665f 6a73 6f6e 5f66 6f72  rue, if_json_for
-00028180: 5f61 7069 3d46 616c 7365 290d 0a20 2020  _api=False)..   
-00028190: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-000281a0: 6765 5f6d 6170 203d 204e 6f6e 650d 0a20  ge_map = None.. 
-000281b0: 2020 2020 2020 2073 656c 662e 7365 7373         self.sess
-000281c0: 696f 6e20 3d20 4e6f 6e65 0d0a 2020 2020  ion = None..    
-000281d0: 2020 2020 7365 6c66 2e64 6576 6963 655f      self.device_
-000281e0: 6964 203d 204e 6f6e 650d 0a20 2020 2020  id = None..     
-000281f0: 2020 2073 656c 662e 6175 7468 5f6b 6579     self.auth_key
-00028200: 203d 204e 6f6e 6520 2023 2027 7631 2e37   = None  # 'v1.7
-00028210: 2e31 5f31 3266 3931 3963 3962 3527 2020  .1_12f919c9b5'  
-00028220: 2327 7631 2e36 2e37 5f63 6336 3062 3637  #'v1.6.7_cc60b67
-00028230: 3535 3727 0d0a 2020 2020 2020 2020 7365  557'..        se
-00028240: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
-00028250: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
-00028260: 2e6f 7574 7075 745f 7a68 203d 2027 7a68  .output_zh = 'zh
-00028270: 2d43 4e27 0d0a 2020 2020 2020 2020 7365  -CN'..        se
-00028280: 6c66 2e69 6e70 7574 5f6c 696d 6974 203d  lf.input_limit =
-00028290: 2069 6e74 2835 6533 290d 0a20 2020 2020   int(5e3)..     
-000282a0: 2020 2073 656c 662e 6465 6661 756c 745f     self.default_
-000282b0: 6672 6f6d 5f6c 616e 6775 6167 6520 3d20  from_language = 
-000282c0: 7365 6c66 2e6f 7574 7075 745f 7a68 0d0a  self.output_zh..
-000282d0: 0d0a 2020 2020 4054 7365 2e64 6562 7567  ..    @Tse.debug
-000282e0: 5f6c 616e 6775 6167 655f 6d61 700d 0a20  _language_map.. 
-000282f0: 2020 2064 6566 2067 6574 5f6c 616e 6775     def get_langu
-00028300: 6167 655f 6d61 7028 7365 6c66 2c20 6c61  age_map(self, la
-00028310: 6e67 5f68 746d 6c3a 2073 7472 2c20 2a2a  ng_html: str, **
-00028320: 6b77 6172 6773 3a20 4c61 6e67 4d61 704b  kwargs: LangMapK
-00028330: 7761 7267 7354 7970 6529 202d 3e20 6469  wargsType) -> di
-00028340: 6374 3a0d 0a20 2020 2020 2020 206c 616e  ct:..        lan
-00028350: 675f 7374 7220 3d20 7265 2e63 6f6d 7069  g_str = re.compi
-00028360: 6c65 2827 3d7b 414c 4c3a 282e 2a3f 297d  le('={ALL:(.*?)}
-00028370: 2729 2e73 6561 7263 6828 6c61 6e67 5f68  ').search(lang_h
-00028380: 746d 6c29 2e67 726f 7570 2829 5b31 3a5d  tml).group()[1:]
-00028390: 0d0a 2020 2020 2020 2020 6c61 6e67 5f73  ..        lang_s
-000283a0: 7472 203d 206c 616e 675f 7374 722e 6c6f  tr = lang_str.lo
-000283b0: 7765 7228 292e 7265 706c 6163 6528 277a  wer().replace('z
-000283c0: 682d 636e 272c 2027 7a68 2d43 4e27 292e  h-cn', 'zh-CN').
-000283d0: 7265 706c 6163 6528 277a 682d 7477 272c  replace('zh-tw',
-000283e0: 2027 7a68 2d54 5727 290d 0a20 2020 2020   'zh-TW')..     
-000283f0: 2020 206c 616e 675f 6c69 7374 203d 2072     lang_list = r
-00028400: 652e 636f 6d70 696c 6528 272c 2228 2e2a  e.compile(',"(.*
-00028410: 3f29 223a 7c2c 282e 2a3f 293a 2729 2e66  ?)":|,(.*?):').f
-00028420: 696e 6461 6c6c 286c 616e 675f 7374 7229  indall(lang_str)
-00028430: 0d0a 2020 2020 2020 2020 6c61 6e67 5f6c  ..        lang_l
-00028440: 6973 7420 3d20 5b6a 2069 6620 6a20 656c  ist = [j if j el
-00028450: 7365 206b 2066 6f72 206a 2c20 6b20 696e  se k for j, k in
-00028460: 206c 616e 675f 6c69 7374 5d0d 0a20 2020   lang_list]..   
-00028470: 2020 2020 206c 616e 675f 6c69 7374 203d       lang_list =
-00028480: 2073 6f72 7465 6428 6c69 7374 2866 696c   sorted(list(fil
-00028490: 7465 7228 6c61 6d62 6461 2078 3a20 7820  ter(lambda x: x 
-000284a0: 6e6f 7420 696e 2028 2761 6c6c 272c 2027  not in ('all', '
-000284b0: 6175 746f 2729 2c20 6c61 6e67 5f6c 6973  auto'), lang_lis
-000284c0: 7429 2929 0d0a 2020 2020 2020 2020 7265  t)))..        re
-000284d0: 7475 726e 207b 7d2e 6672 6f6d 6b65 7973  turn {}.fromkeys
-000284e0: 286c 616e 675f 6c69 7374 2c20 6c61 6e67  (lang_list, lang
-000284f0: 5f6c 6973 7429 0d0a 0d0a 2020 2020 6465  _list)....    de
-00028500: 6620 6765 745f 6175 7468 5f6b 6579 2873  f get_auth_key(s
-00028510: 656c 662c 206c 616e 675f 6874 6d6c 3a20  elf, lang_html: 
-00028520: 7374 7229 202d 3e20 7374 723a 0d0a 2020  str) -> str:..  
-00028530: 2020 2020 2020 7265 7475 726e 2072 652e        return re.
-00028540: 636f 6d70 696c 6528 2741 5554 485f 4b45  compile('AUTH_KE
-00028550: 593a 2228 2e2a 3f29 2227 292e 6669 6e64  Y:"(.*?)"').find
-00028560: 616c 6c28 6c61 6e67 5f68 746d 6c29 5b30  all(lang_html)[0
-00028570: 5d0d 0a0d 0a20 2020 2064 6566 2067 6574  ]....    def get
-00028580: 5f61 7574 686f 7269 7a61 7469 6f6e 2873  _authorization(s
-00028590: 656c 662c 2075 726c 3a20 7374 722c 2061  elf, url: str, a
-000285a0: 7574 685f 6b65 793a 2073 7472 2c20 6465  uth_key: str, de
-000285b0: 7669 6365 5f69 643a 2073 7472 2c20 7469  vice_id: str, ti
-000285c0: 6d65 7374 616d 703a 2069 6e74 2920 2d3e  mestamp: int) ->
-000285d0: 2073 7472 3a0d 0a20 2020 2020 2020 2061   str:..        a
-000285e0: 7574 6820 3d20 686d 6163 2e6e 6577 286b  uth = hmac.new(k
-000285f0: 6579 3d61 7574 685f 6b65 792e 656e 636f  ey=auth_key.enco
-00028600: 6465 2829 2c20 6d73 673d 6627 7b64 6576  de(), msg=f'{dev
-00028610: 6963 655f 6964 7d5c 6e7b 7572 6c7d 5c6e  ice_id}\n{url}\n
-00028620: 7b74 696d 6573 7461 6d70 7d27 2e65 6e63  {timestamp}'.enc
-00028630: 6f64 6528 292c 2064 6967 6573 746d 6f64  ode(), digestmod
-00028640: 3d27 6d64 3527 292e 6469 6765 7374 2829  ='md5').digest()
-00028650: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00028660: 2066 2750 5047 207b 6465 7669 6365 5f69   f'PPG {device_i
-00028670: 647d 3a7b 6261 7365 3634 2e62 3634 656e  d}:{base64.b64en
-00028680: 636f 6465 2861 7574 6829 2e64 6563 6f64  code(auth).decod
-00028690: 6528 297d 270d 0a0d 0a20 2020 2040 5473  e()}'....    @Ts
-000286a0: 652e 7469 6d65 5f73 7461 740d 0a20 2020  e.time_stat..   
-000286b0: 2040 5473 652e 6368 6563 6b5f 7175 6572   @Tse.check_quer
-000286c0: 790d 0a20 2020 2064 6566 2070 6170 6167  y..    def papag
-000286d0: 6f5f 6170 6928 7365 6c66 2c20 7175 6572  o_api(self, quer
-000286e0: 795f 7465 7874 3a20 7374 722c 2066 726f  y_text: str, fro
-000286f0: 6d5f 6c61 6e67 7561 6765 3a20 7374 7220  m_language: str 
-00028700: 3d20 2761 7574 6f27 2c20 746f 5f6c 616e  = 'auto', to_lan
-00028710: 6775 6167 653a 2073 7472 203d 2027 656e  guage: str = 'en
-00028720: 272c 202a 2a6b 7761 7267 733a 2041 7069  ', **kwargs: Api
-00028730: 4b77 6172 6773 5479 7065 2920 2d3e 2055  KwargsType) -> U
-00028740: 6e69 6f6e 5b73 7472 2c20 6469 6374 5d3a  nion[str, dict]:
-00028750: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00028760: 2020 2020 2020 2068 7474 7073 3a2f 2f70         https://p
-00028770: 6170 6167 6f2e 6e61 7665 722e 636f 6d0d  apago.naver.com.
-00028780: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00028790: 7175 6572 795f 7465 7874 3a20 7374 722c  query_text: str,
-000287a0: 206d 7573 742e 0d0a 2020 2020 2020 2020   must...        
-000287b0: 3a70 6172 616d 2066 726f 6d5f 6c61 6e67  :param from_lang
-000287c0: 7561 6765 3a20 7374 722c 2064 6566 6175  uage: str, defau
-000287d0: 6c74 2027 6175 746f 272e 0d0a 2020 2020  lt 'auto'...    
-000287e0: 2020 2020 3a70 6172 616d 2074 6f5f 6c61      :param to_la
-000287f0: 6e67 7561 6765 3a20 7374 722c 2064 6566  nguage: str, def
-00028800: 6175 6c74 2027 656e 272e 0d0a 2020 2020  ault 'en'...    
-00028810: 2020 2020 3a70 6172 616d 202a 2a6b 7761      :param **kwa
-00028820: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
-00028830: 2020 2020 2020 3a70 6172 616d 2074 696d        :param tim
-00028840: 656f 7574 3a20 666c 6f61 742c 2064 6566  eout: float, def
-00028850: 6175 6c74 204e 6f6e 652e 0d0a 2020 2020  ault None...    
-00028860: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00028870: 616d 2070 726f 7869 6573 3a20 6469 6374  am proxies: dict
-00028880: 2c20 6465 6661 756c 7420 4e6f 6e65 2e0d  , default None..
-00028890: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000288a0: 203a 7061 7261 6d20 736c 6565 705f 7365   :param sleep_se
-000288b0: 636f 6e64 733a 2066 6c6f 6174 2c20 6465  conds: float, de
-000288c0: 6661 756c 7420 302e 0d0a 2020 2020 2020  fault 0...      
-000288d0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-000288e0: 2069 735f 6465 7461 696c 5f72 6573 756c   is_detail_resul
-000288f0: 743a 2062 6f6f 6c2c 2064 6566 6175 6c74  t: bool, default
-00028900: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
-00028910: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00028920: 6966 5f69 676e 6f72 655f 6c69 6d69 745f  if_ignore_limit_
-00028930: 6f66 5f6c 656e 6774 683a 2062 6f6f 6c2c  of_length: bool,
-00028940: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
-00028950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00028960: 203a 7061 7261 6d20 6c69 6d69 745f 6f66   :param limit_of
-00028970: 5f6c 656e 6774 683a 2069 6e74 2c20 6465  _length: int, de
-00028980: 6661 756c 7420 3230 3030 302e 0d0a 2020  fault 20000...  
-00028990: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-000289a0: 6172 616d 2069 665f 6967 6e6f 7265 5f65  aram if_ignore_e
-000289b0: 6d70 7479 5f71 7565 7279 3a20 626f 6f6c  mpty_query: bool
-000289c0: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-000289d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000289e0: 2020 3a70 6172 616d 2075 7064 6174 655f    :param update_
-000289f0: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
-00028a00: 6571 3a20 696e 742c 2064 6566 6175 6c74  eq: int, default
-00028a10: 2031 3030 302e 0d0a 2020 2020 2020 2020   1000...        
-00028a20: 2020 2020 2020 2020 3a70 6172 616d 2075          :param u
-00028a30: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-00028a40: 7465 725f 7365 636f 6e64 733a 2066 6c6f  ter_seconds: flo
-00028a50: 6174 2c20 6465 6661 756c 7420 3135 3030  at, default 1500
-00028a60: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00028a70: 2020 203a 7061 7261 6d20 6966 5f73 686f     :param if_sho
-00028a80: 775f 7469 6d65 5f73 7461 743a 2062 6f6f  w_time_stat: boo
-00028a90: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
-00028aa0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00028ab0: 2020 203a 7061 7261 6d20 7368 6f77 5f74     :param show_t
-00028ac0: 696d 655f 7374 6174 5f70 7265 6369 7369  ime_stat_precisi
-00028ad0: 6f6e 3a20 696e 742c 2064 6566 6175 6c74  on: int, default
-00028ae0: 2032 2e0d 0a20 2020 2020 2020 2020 2020   2...           
-00028af0: 2020 2020 203a 7061 7261 6d20 6966 5f70       :param if_p
-00028b00: 7269 6e74 5f77 6172 6e69 6e67 3a20 626f  rint_warning: bo
-00028b10: 6f6c 2c20 6465 6661 756c 7420 5472 7565  ol, default True
-00028b20: 2e0d 0a20 2020 2020 2020 203a 7265 7475  ...        :retu
-00028b30: 726e 3a20 7374 7220 6f72 2064 6963 740d  rn: str or dict.
-00028b40: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
-00028b50: 2020 2020 2020 2020 7469 6d65 6f75 7420          timeout 
-00028b60: 3d20 6b77 6172 6773 2e67 6574 2827 7469  = kwargs.get('ti
-00028b70: 6d65 6f75 7427 2c20 4e6f 6e65 290d 0a20  meout', None).. 
-00028b80: 2020 2020 2020 2070 726f 7869 6573 203d         proxies =
-00028b90: 206b 7761 7267 732e 6765 7428 2770 726f   kwargs.get('pro
-00028ba0: 7869 6573 272c 204e 6f6e 6529 0d0a 2020  xies', None)..  
-00028bb0: 2020 2020 2020 736c 6565 705f 7365 636f        sleep_seco
-00028bc0: 6e64 7320 3d20 6b77 6172 6773 2e67 6574  nds = kwargs.get
-00028bd0: 2827 736c 6565 705f 7365 636f 6e64 7327  ('sleep_seconds'
-00028be0: 2c20 3029 0d0a 2020 2020 2020 2020 6966  , 0)..        if
-00028bf0: 5f70 7269 6e74 5f77 6172 6e69 6e67 203d  _print_warning =
-00028c00: 206b 7761 7267 732e 6765 7428 2769 665f   kwargs.get('if_
-00028c10: 7072 696e 745f 7761 726e 696e 6727 2c20  print_warning', 
-00028c20: 5472 7565 290d 0a20 2020 2020 2020 2069  True)..        i
-00028c30: 735f 6465 7461 696c 5f72 6573 756c 7420  s_detail_result 
-00028c40: 3d20 6b77 6172 6773 2e67 6574 2827 6973  = kwargs.get('is
-00028c50: 5f64 6574 6169 6c5f 7265 7375 6c74 272c  _detail_result',
-00028c60: 2046 616c 7365 290d 0a20 2020 2020 2020   False)..       
-00028c70: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-00028c80: 6166 7465 725f 6672 6571 203d 206b 7761  after_freq = kwa
-00028c90: 7267 732e 6765 7428 2775 7064 6174 655f  rgs.get('update_
-00028ca0: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
-00028cb0: 6571 272c 2073 656c 662e 6465 6661 756c  eq', self.defaul
-00028cc0: 745f 7365 7373 696f 6e5f 6672 6571 290d  t_session_freq).
-00028cd0: 0a20 2020 2020 2020 2075 7064 6174 655f  .        update_
-00028ce0: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
-00028cf0: 636f 6e64 7320 3d20 6b77 6172 6773 2e67  conds = kwargs.g
-00028d00: 6574 2827 7570 6461 7465 5f73 6573 7369  et('update_sessi
-00028d10: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-00028d20: 272c 2073 656c 662e 6465 6661 756c 745f  ', self.default_
-00028d30: 7365 7373 696f 6e5f 7365 636f 6e64 7329  session_seconds)
-00028d40: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
-00028d50: 6865 636b 5f69 6e70 7574 5f6c 696d 6974  heck_input_limit
-00028d60: 2871 7565 7279 5f74 6578 742c 2073 656c  (query_text, sel
-00028d70: 662e 696e 7075 745f 6c69 6d69 7429 0d0a  f.input_limit)..
-00028d80: 0d0a 2020 2020 2020 2020 6e6f 745f 7570  ..        not_up
-00028d90: 6461 7465 5f63 6f6e 645f 6672 6571 203d  date_cond_freq =
-00028da0: 2031 2069 6620 7365 6c66 2e71 7565 7279   1 if self.query
-00028db0: 5f63 6f75 6e74 2025 2075 7064 6174 655f  _count % update_
-00028dc0: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
-00028dd0: 6571 2021 3d20 3020 656c 7365 2030 0d0a  eq != 0 else 0..
-00028de0: 2020 2020 2020 2020 6e6f 745f 7570 6461          not_upda
-00028df0: 7465 5f63 6f6e 645f 7469 6d65 203d 2031  te_cond_time = 1
-00028e00: 2069 6620 7469 6d65 2e74 696d 6528 2920   if time.time() 
-00028e10: 2d20 7365 6c66 2e62 6567 696e 5f74 696d  - self.begin_tim
-00028e20: 6520 3c20 7570 6461 7465 5f73 6573 7369  e < update_sessi
-00028e30: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-00028e40: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
-00028e50: 2069 6620 6e6f 7420 2873 656c 662e 7365   if not (self.se
-00028e60: 7373 696f 6e20 616e 6420 7365 6c66 2e6c  ssion and self.l
-00028e70: 616e 6775 6167 655f 6d61 7020 616e 6420  anguage_map and 
-00028e80: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
-00028e90: 6672 6571 2061 6e64 206e 6f74 5f75 7064  freq and not_upd
-00028ea0: 6174 655f 636f 6e64 5f74 696d 6520 616e  ate_cond_time an
-00028eb0: 6420 7365 6c66 2e61 7574 685f 6b65 7929  d self.auth_key)
-00028ec0: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-00028ed0: 656c 662e 6465 7669 6365 5f69 6420 3d20  elf.device_id = 
-00028ee0: 7374 7228 7575 6964 2e75 7569 6434 2829  str(uuid.uuid4()
-00028ef0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-00028f00: 656c 662e 6265 6769 6e5f 7469 6d65 203d  elf.begin_time =
-00028f10: 2074 696d 652e 7469 6d65 2829 0d0a 2020   time.time()..  
-00028f20: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
-00028f30: 6573 7369 6f6e 203d 2072 6571 7565 7374  ession = request
-00028f40: 732e 5365 7373 696f 6e28 290d 0a20 2020  s.Session()..   
-00028f50: 2020 2020 2020 2020 2068 6f73 745f 6874           host_ht
-00028f60: 6d6c 203d 2073 656c 662e 7365 7373 696f  ml = self.sessio
-00028f70: 6e2e 6765 7428 7365 6c66 2e68 6f73 745f  n.get(self.host_
-00028f80: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
-00028f90: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
-00028fa0: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
-00028fb0: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
-00028fc0: 292e 7465 7874 0d0a 2020 2020 2020 2020  ).text..        
-00028fd0: 2020 2020 7572 6c5f 7061 7468 203d 2072      url_path = r
-00028fe0: 652e 636f 6d70 696c 6528 7365 6c66 2e6c  e.compile(self.l
-00028ff0: 616e 6775 6167 655f 7572 6c5f 7061 7474  anguage_url_patt
-00029000: 6572 6e29 2e73 6561 7263 6828 686f 7374  ern).search(host
-00029010: 5f68 746d 6c29 2e67 726f 7570 2829 0d0a  _html).group()..
-00029020: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00029030: 2e6c 616e 6775 6167 655f 7572 6c20 3d20  .language_url = 
-00029040: 2727 2e6a 6f69 6e28 5b73 656c 662e 686f  ''.join([self.ho
-00029050: 7374 5f75 726c 2c20 7572 6c5f 7061 7468  st_url, url_path
-00029060: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
-00029070: 6c61 6e67 5f68 746d 6c20 3d20 7365 6c66  lang_html = self
-00029080: 2e73 6573 7369 6f6e 2e67 6574 2873 656c  .session.get(sel
-00029090: 662e 6c61 6e67 7561 6765 5f75 726c 2c20  f.language_url, 
-000290a0: 6865 6164 6572 733d 7365 6c66 2e68 6f73  headers=self.hos
-000290b0: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
-000290c0: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
-000290d0: 6965 733d 7072 6f78 6965 7329 2e74 6578  ies=proxies).tex
-000290e0: 740d 0a20 2020 2020 2020 2020 2020 2064  t..            d
-000290f0: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
-00029100: 203d 2073 656c 662e 6465 6275 675f 6c61   = self.debug_la
-00029110: 6e67 5f6b 7761 7267 7328 6672 6f6d 5f6c  ng_kwargs(from_l
-00029120: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
-00029130: 7561 6765 2c20 7365 6c66 2e64 6566 6175  uage, self.defau
-00029140: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
-00029150: 2c20 6966 5f70 7269 6e74 5f77 6172 6e69  , if_print_warni
-00029160: 6e67 290d 0a20 2020 2020 2020 2020 2020  ng)..           
-00029170: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
-00029180: 6170 203d 2073 656c 662e 6765 745f 6c61  ap = self.get_la
-00029190: 6e67 7561 6765 5f6d 6170 286c 616e 675f  nguage_map(lang_
-000291a0: 6874 6d6c 2c20 2a2a 6465 6275 675f 6c61  html, **debug_la
-000291b0: 6e67 5f6b 7761 7267 7329 0d0a 2020 2020  ng_kwargs)..    
-000291c0: 2020 2020 2020 2020 7365 6c66 2e61 7574          self.aut
-000291d0: 685f 6b65 7920 3d20 7365 6c66 2e67 6574  h_key = self.get
-000291e0: 5f61 7574 685f 6b65 7928 6c61 6e67 5f68  _auth_key(lang_h
-000291f0: 746d 6c29 0d0a 0d0a 2020 2020 2020 2020  tml)....        
-00029200: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
-00029210: 6f5f 6c61 6e67 7561 6765 203d 2073 656c  o_language = sel
-00029220: 662e 6368 6563 6b5f 6c61 6e67 7561 6765  f.check_language
-00029230: 2866 726f 6d5f 6c61 6e67 7561 6765 2c20  (from_language, 
-00029240: 746f 5f6c 616e 6775 6167 652c 2073 656c  to_language, sel
-00029250: 662e 6c61 6e67 7561 6765 5f6d 6170 2c20  f.language_map, 
-00029260: 6f75 7470 7574 5f7a 683d 7365 6c66 2e6f  output_zh=self.o
-00029270: 7574 7075 745f 7a68 290d 0a0d 0a20 2020  utput_zh)....   
-00029280: 2020 2020 2064 6574 6563 745f 7469 6d65       detect_time
-00029290: 203d 2073 656c 662e 6765 745f 7469 6d65   = self.get_time
-000292a0: 7374 616d 7028 290d 0a20 2020 2020 2020  stamp()..       
-000292b0: 2064 6574 6563 745f 6175 7468 203d 2073   detect_auth = s
-000292c0: 656c 662e 6765 745f 6175 7468 6f72 697a  elf.get_authoriz
-000292d0: 6174 696f 6e28 7365 6c66 2e6c 616e 675f  ation(self.lang_
-000292e0: 6465 7465 6374 5f75 726c 2c20 7365 6c66  detect_url, self
-000292f0: 2e61 7574 685f 6b65 792c 2073 656c 662e  .auth_key, self.
-00029300: 6465 7669 6365 5f69 642c 2064 6574 6563  device_id, detec
-00029310: 745f 7469 6d65 290d 0a20 2020 2020 2020  t_time)..       
-00029320: 2064 6574 6563 745f 6164 645f 6865 6164   detect_add_head
-00029330: 6572 7320 3d20 7b27 6465 7669 6365 2d74  ers = {'device-t
-00029340: 7970 6527 3a20 2770 6327 2c20 2774 696d  ype': 'pc', 'tim
-00029350: 6573 7461 6d70 273a 2073 7472 2864 6574  estamp': str(det
-00029360: 6563 745f 7469 6d65 292c 2027 6175 7468  ect_time), 'auth
-00029370: 6f72 697a 6174 696f 6e27 3a20 6465 7465  orization': dete
-00029380: 6374 5f61 7574 687d 0d0a 2020 2020 2020  ct_auth}..      
-00029390: 2020 6465 7465 6374 5f68 6561 6465 7273    detect_headers
-000293a0: 203d 207b 2a2a 7365 6c66 2e61 7069 5f68   = {**self.api_h
-000293b0: 6561 6465 7273 2c20 2a2a 6465 7465 6374  eaders, **detect
-000293c0: 5f61 6464 5f68 6561 6465 7273 7d0d 0a0d  _add_headers}...
-000293d0: 0a20 2020 2020 2020 2069 6620 6672 6f6d  .        if from
-000293e0: 5f6c 616e 6775 6167 6520 3d3d 2027 6175  _language == 'au
-000293f0: 746f 273a 0d0a 2020 2020 2020 2020 2020  to':..          
-00029400: 2020 6465 7465 6374 5f66 6f72 6d20 3d20    detect_form = 
-00029410: 7572 6c6c 6962 2e70 6172 7365 2e75 726c  urllib.parse.url
-00029420: 656e 636f 6465 287b 2771 7565 7279 273a  encode({'query':
-00029430: 2071 7565 7279 5f74 6578 747d 290d 0a20   query_text}).. 
-00029440: 2020 2020 2020 2020 2020 2072 5f64 6574             r_det
-00029450: 6563 7420 3d20 7365 6c66 2e73 6573 7369  ect = self.sessi
-00029460: 6f6e 2e70 6f73 7428 7365 6c66 2e6c 616e  on.post(self.lan
-00029470: 675f 6465 7465 6374 5f75 726c 2c20 6865  g_detect_url, he
-00029480: 6164 6572 733d 6465 7465 6374 5f68 6561  aders=detect_hea
-00029490: 6465 7273 2c20 6461 7461 3d64 6574 6563  ders, data=detec
-000294a0: 745f 666f 726d 2c20 7469 6d65 6f75 743d  t_form, timeout=
-000294b0: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
-000294c0: 3d70 726f 7869 6573 290d 0a20 2020 2020  =proxies)..     
-000294d0: 2020 2020 2020 2066 726f 6d5f 6c61 6e67         from_lang
-000294e0: 7561 6765 203d 2072 5f64 6574 6563 742e  uage = r_detect.
-000294f0: 6a73 6f6e 2829 5b27 6c61 6e67 436f 6465  json()['langCode
-00029500: 275d 0d0a 0d0a 2020 2020 2020 2020 7472  ']....        tr
-00029510: 616e 735f 7469 6d65 203d 2073 656c 662e  ans_time = self.
-00029520: 6765 745f 7469 6d65 7374 616d 7028 290d  get_timestamp().
-00029530: 0a20 2020 2020 2020 2074 7261 6e73 5f61  .        trans_a
-00029540: 7574 6820 3d20 7365 6c66 2e67 6574 5f61  uth = self.get_a
-00029550: 7574 686f 7269 7a61 7469 6f6e 2873 656c  uthorization(sel
-00029560: 662e 6170 695f 7572 6c2c 2073 656c 662e  f.api_url, self.
-00029570: 6175 7468 5f6b 6579 2c20 7365 6c66 2e64  auth_key, self.d
-00029580: 6576 6963 655f 6964 2c20 7472 616e 735f  evice_id, trans_
-00029590: 7469 6d65 290d 0a20 2020 2020 2020 2074  time)..        t
-000295a0: 7261 6e73 5f75 7064 6174 655f 6865 6164  rans_update_head
-000295b0: 6572 7320 3d20 7b27 782d 6170 6967 772d  ers = {'x-apigw-
-000295c0: 7061 7274 6e65 7269 6427 3a20 2770 6170  partnerid': 'pap
-000295d0: 6167 6f27 2c20 2774 696d 6573 7461 6d70  ago', 'timestamp
-000295e0: 273a 2073 7472 2874 7261 6e73 5f74 696d  ': str(trans_tim
-000295f0: 6529 2c20 2761 7574 686f 7269 7a61 7469  e), 'authorizati
-00029600: 6f6e 273a 2074 7261 6e73 5f61 7574 687d  on': trans_auth}
-00029610: 0d0a 2020 2020 2020 2020 6465 7465 6374  ..        detect
-00029620: 5f68 6561 6465 7273 2e75 7064 6174 6528  _headers.update(
-00029630: 7472 616e 735f 7570 6461 7465 5f68 6561  trans_update_hea
-00029640: 6465 7273 290d 0a20 2020 2020 2020 2074  ders)..        t
-00029650: 7261 6e73 5f68 6561 6465 7273 203d 2064  rans_headers = d
-00029660: 6574 6563 745f 6865 6164 6572 730d 0a0d  etect_headers...
-00029670: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00029680: 203d 207b 0d0a 2020 2020 2020 2020 2020   = {..          
-00029690: 2020 2764 6576 6963 6549 6427 3a20 7365    'deviceId': se
-000296a0: 6c66 2e64 6576 6963 655f 6964 2c0d 0a20  lf.device_id,.. 
-000296b0: 2020 2020 2020 2020 2020 2027 7465 7874             'text
-000296c0: 273a 2071 7565 7279 5f74 6578 742c 2027  ': query_text, '
-000296d0: 736f 7572 6365 273a 2066 726f 6d5f 6c61  source': from_la
-000296e0: 6e67 7561 6765 2c20 2774 6172 6765 7427  nguage, 'target'
-000296f0: 3a20 746f 5f6c 616e 6775 6167 652c 2027  : to_language, '
-00029700: 6c6f 6361 6c65 273a 2027 656e 272c 0d0a  locale': 'en',..
-00029710: 2020 2020 2020 2020 2020 2020 2764 6963              'dic
-00029720: 7427 3a20 2774 7275 6527 2c20 2764 6963  t': 'true', 'dic
-00029730: 7444 6973 706c 6179 273a 2033 302c 2027  tDisplay': 30, '
-00029740: 686f 6e6f 7269 6669 6327 3a20 2766 616c  honorific': 'fal
-00029750: 7365 272c 2027 696e 7374 616e 7427 3a20  se', 'instant': 
-00029760: 2766 616c 7365 272c 2027 7061 6769 6e67  'false', 'paging
-00029770: 273a 2027 6661 6c73 6527 2c0d 0a20 2020  ': 'false',..   
-00029780: 2020 2020 207d 0d0a 2020 2020 2020 2020       }..        
-00029790: 7061 796c 6f61 6420 3d20 7572 6c6c 6962  payload = urllib
-000297a0: 2e70 6172 7365 2e75 726c 656e 636f 6465  .parse.urlencode
-000297b0: 2870 6179 6c6f 6164 290d 0a20 2020 2020  (payload)..     
-000297c0: 2020 2072 203d 2073 656c 662e 7365 7373     r = self.sess
-000297d0: 696f 6e2e 706f 7374 2873 656c 662e 6170  ion.post(self.ap
-000297e0: 695f 7572 6c2c 2068 6561 6465 7273 3d74  i_url, headers=t
-000297f0: 7261 6e73 5f68 6561 6465 7273 2c20 6461  rans_headers, da
-00029800: 7461 3d70 6179 6c6f 6164 2c20 7469 6d65  ta=payload, time
-00029810: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
-00029820: 7869 6573 3d70 726f 7869 6573 290d 0a20  xies=proxies).. 
-00029830: 2020 2020 2020 2072 2e72 6169 7365 5f66         r.raise_f
-00029840: 6f72 5f73 7461 7475 7328 290d 0a20 2020  or_status()..   
-00029850: 2020 2020 2064 6174 6120 3d20 722e 6a73       data = r.js
-00029860: 6f6e 2829 0d0a 2020 2020 2020 2020 7469  on()..        ti
-00029870: 6d65 2e73 6c65 6570 2873 6c65 6570 5f73  me.sleep(sleep_s
-00029880: 6563 6f6e 6473 290d 0a20 2020 2020 2020  econds)..       
-00029890: 2073 656c 662e 7175 6572 795f 636f 756e   self.query_coun
-000298a0: 7420 2b3d 2031 0d0a 2020 2020 2020 2020  t += 1..        
-000298b0: 7265 7475 726e 2064 6174 6120 6966 2069  return data if i
-000298c0: 735f 6465 7461 696c 5f72 6573 756c 7420  s_detail_result 
-000298d0: 656c 7365 2064 6174 615b 2774 7261 6e73  else data['trans
-000298e0: 6c61 7465 6454 6578 7427 5d0d 0a0d 0a0d  latedText'].....
-000298f0: 0a63 6c61 7373 204c 696e 6776 616e 6578  .class Lingvanex
-00029900: 2854 7365 293a 0d0a 2020 2020 6465 6620  (Tse):..    def 
-00029910: 5f5f 696e 6974 5f5f 2873 656c 6629 3a0d  __init__(self):.
-00029920: 0a20 2020 2020 2020 2073 7570 6572 2829  .        super()
-00029930: 2e5f 5f69 6e69 745f 5f28 290d 0a20 2020  .__init__()..   
-00029940: 2020 2020 2073 656c 662e 6265 6769 6e5f       self.begin_
-00029950: 7469 6d65 203d 2074 696d 652e 7469 6d65  time = time.time
-00029960: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
-00029970: 2e68 6f73 745f 7572 6c20 3d20 2768 7474  .host_url = 'htt
-00029980: 7073 3a2f 2f6c 696e 6776 616e 6578 2e63  ps://lingvanex.c
-00029990: 6f6d 2f64 656d 6f2f 270d 0a20 2020 2020  om/demo/'..     
-000299a0: 2020 2073 656c 662e 6170 695f 7572 6c20     self.api_url 
-000299b0: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-000299c0: 7365 6c66 2e6c 616e 6775 6167 655f 7572  self.language_ur
-000299d0: 6c20 3d20 4e6f 6e65 0d0a 2020 2020 2020  l = None..      
-000299e0: 2020 7365 6c66 2e61 7574 685f 7572 6c20    self.auth_url 
-000299f0: 3d20 2768 7474 7073 3a2f 2f6c 696e 6776  = 'https://lingv
-00029a00: 616e 6578 2e63 6f6d 2f6c 696e 6776 616e  anex.com/lingvan
-00029a10: 6578 5f64 656d 6f5f 7061 6765 2f6a 732f  ex_demo_page/js/
-00029a20: 6170 692d 6261 7365 2e6a 7327 0d0a 2020  api-base.js'..  
-00029a30: 2020 2020 2020 7365 6c66 2e68 6f73 745f        self.host_
-00029a40: 6865 6164 6572 7320 3d20 7365 6c66 2e67  headers = self.g
-00029a50: 6574 5f68 6561 6465 7273 2873 656c 662e  et_headers(self.
-00029a60: 686f 7374 5f75 726c 2c20 6966 5f61 7069  host_url, if_api
-00029a70: 3d46 616c 7365 290d 0a20 2020 2020 2020  =False)..       
-00029a80: 2073 656c 662e 6170 695f 6865 6164 6572   self.api_header
-00029a90: 7320 3d20 7365 6c66 2e67 6574 5f68 6561  s = self.get_hea
-00029aa0: 6465 7273 2873 656c 662e 686f 7374 5f75  ders(self.host_u
-00029ab0: 726c 2c20 6966 5f61 7069 3d54 7275 652c  rl, if_api=True,
-00029ac0: 2069 665f 6a73 6f6e 5f66 6f72 5f61 7069   if_json_for_api
-00029ad0: 3d46 616c 7365 290d 0a20 2020 2020 2020  =False)..       
-00029ae0: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
-00029af0: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-00029b00: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
-00029b10: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00029b20: 7365 6c66 2e64 6574 6169 6c5f 6c61 6e67  self.detail_lang
-00029b30: 7561 6765 5f6d 6170 203d 204e 6f6e 650d  uage_map = None.
-00029b40: 0a20 2020 2020 2020 2073 656c 662e 6175  .        self.au
-00029b50: 7468 5f69 6e66 6f20 3d20 4e6f 6e65 0d0a  th_info = None..
-00029b60: 2020 2020 2020 2020 7365 6c66 2e6d 6f64          self.mod
-00029b70: 6520 3d20 4e6f 6e65 0d0a 2020 2020 2020  e = None..      
-00029b80: 2020 7365 6c66 2e6d 6f64 656c 5f70 6f6f    self.model_poo
-00029b90: 6c20 3d20 2827 4232 4227 2c20 2742 3243  l = ('B2B', 'B2C
-00029ba0: 272c 290d 0a20 2020 2020 2020 2073 656c  ',)..        sel
-00029bb0: 662e 7175 6572 795f 636f 756e 7420 3d20  f.query_count = 
-00029bc0: 300d 0a20 2020 2020 2020 2073 656c 662e  0..        self.
-00029bd0: 6f75 7470 7574 5f7a 6820 3d20 277a 682d  output_zh = 'zh-
-00029be0: 4861 6e73 5f43 4e27 0d0a 2020 2020 2020  Hans_CN'..      
-00029bf0: 2020 7365 6c66 2e69 6e70 7574 5f6c 696d    self.input_lim
-00029c00: 6974 203d 2069 6e74 2831 6534 290d 0a20  it = int(1e4).. 
-00029c10: 2020 2020 2020 2073 656c 662e 6465 6661         self.defa
-00029c20: 756c 745f 6672 6f6d 5f6c 616e 6775 6167  ult_from_languag
-00029c30: 6520 3d20 7365 6c66 2e6f 7574 7075 745f  e = self.output_
-00029c40: 7a68 0d0a 0d0a 2020 2020 4054 7365 2e64  zh....    @Tse.d
-00029c50: 6562 7567 5f6c 616e 6775 6167 655f 6d61  ebug_language_ma
-00029c60: 700d 0a20 2020 2064 6566 2067 6574 5f6c  p..    def get_l
-00029c70: 616e 6775 6167 655f 6d61 7028 7365 6c66  anguage_map(self
-00029c80: 2c20 6c61 6e67 5f75 726c 3a20 7374 722c  , lang_url: str,
-00029c90: 2073 733a 2053 6573 7369 6f6e 5479 7065   ss: SessionType
-00029ca0: 2c20 6865 6164 6572 733a 2064 6963 742c  , headers: dict,
-00029cb0: 2074 696d 656f 7574 3a20 4f70 7469 6f6e   timeout: Option
-00029cc0: 616c 5b66 6c6f 6174 5d2c 2070 726f 7869  al[float], proxi
-00029cd0: 6573 3a20 4f70 7469 6f6e 616c 5b64 6963  es: Optional[dic
-00029ce0: 745d 2c20 2a2a 6b77 6172 6773 3a20 4c61  t], **kwargs: La
-00029cf0: 6e67 4d61 704b 7761 7267 7354 7970 6529  ngMapKwargsType)
-00029d00: 202d 3e20 6469 6374 3a0d 0a20 2020 2020   -> dict:..     
-00029d10: 2020 2070 6172 616d 7320 3d20 7b27 616c     params = {'al
-00029d20: 6c27 3a20 2774 7275 6527 2c20 2763 6f64  l': 'true', 'cod
-00029d30: 6527 3a20 2765 6e5f 4742 272c 2027 706c  e': 'en_GB', 'pl
-00029d40: 6174 666f 726d 273a 2027 6470 272c 2027  atform': 'dp', '
-00029d50: 5f27 3a20 7365 6c66 2e67 6574 5f74 696d  _': self.get_tim
-00029d60: 6573 7461 6d70 2829 7d0d 0a20 2020 2020  estamp()}..     
-00029d70: 2020 2064 6574 6169 6c5f 6c61 6e67 5f6d     detail_lang_m
-00029d80: 6170 203d 2073 732e 6765 7428 6c61 6e67  ap = ss.get(lang
-00029d90: 5f75 726c 2c20 7061 7261 6d73 3d70 6172  _url, params=par
-00029da0: 616d 732c 2068 6561 6465 7273 3d68 6561  ams, headers=hea
-00029db0: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
-00029dc0: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
-00029dd0: 726f 7869 6573 292e 6a73 6f6e 2829 0d0a  roxies).json()..
-00029de0: 2020 2020 2020 2020 666f 7220 5f20 696e          for _ in
-00029df0: 2072 616e 6765 2833 293a 0d0a 2020 2020   range(3):..    
-00029e00: 2020 2020 2020 2020 5f20 3d20 7373 2e67          _ = ss.g
-00029e10: 6574 286c 616e 675f 7572 6c2c 2070 6172  et(lang_url, par
-00029e20: 616d 733d 7b27 706c 6174 666f 726d 273a  ams={'platform':
-00029e30: 2027 6470 277d 2c20 6865 6164 6572 733d   'dp'}, headers=
-00029e40: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
-00029e50: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
-00029e60: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
-00029e70: 2020 2020 6c61 6e67 5f6c 6973 7420 3d20      lang_list = 
-00029e80: 736f 7274 6564 2873 6574 285b 6974 656d  sorted(set([item
-00029e90: 5b27 6675 6c6c 5f63 6f64 6527 5d20 666f  ['full_code'] fo
-00029ea0: 7220 6974 656d 2069 6e20 6465 7461 696c  r item in detail
-00029eb0: 5f6c 616e 675f 6d61 705b 2772 6573 756c  _lang_map['resul
-00029ec0: 7427 5d5d 2929 0d0a 2020 2020 2020 2020  t']]))..        
-00029ed0: 7265 7475 726e 207b 7d2e 6672 6f6d 6b65  return {}.fromke
-00029ee0: 7973 286c 616e 675f 6c69 7374 2c20 6c61  ys(lang_list, la
-00029ef0: 6e67 5f6c 6973 7429 0d0a 0d0a 2020 2020  ng_list)....    
-00029f00: 6465 6620 6765 745f 645f 6c61 6e67 5f6d  def get_d_lang_m
-00029f10: 6170 2873 656c 662c 206c 616e 675f 7572  ap(self, lang_ur
-00029f20: 6c3a 2073 7472 2c20 7373 3a20 5365 7373  l: str, ss: Sess
-00029f30: 696f 6e54 7970 652c 2068 6561 6465 7273  ionType, headers
-00029f40: 3a20 6469 6374 2c20 7469 6d65 6f75 743a  : dict, timeout:
-00029f50: 2066 6c6f 6174 2c20 7072 6f78 6965 733a   float, proxies:
-00029f60: 2064 6963 7429 202d 3e20 6469 6374 3a0d   dict) -> dict:.
-00029f70: 0a20 2020 2020 2020 2070 6172 616d 7320  .        params 
-00029f80: 3d20 7b27 616c 6c27 3a20 2774 7275 6527  = {'all': 'true'
-00029f90: 2c20 2763 6f64 6527 3a20 2765 6e5f 4742  , 'code': 'en_GB
-00029fa0: 272c 2027 706c 6174 666f 726d 273a 2027  ', 'platform': '
-00029fb0: 6470 272c 2027 5f27 3a20 7365 6c66 2e67  dp', '_': self.g
-00029fc0: 6574 5f74 696d 6573 7461 6d70 2829 7d0d  et_timestamp()}.
-00029fd0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00029fe0: 7373 2e67 6574 286c 616e 675f 7572 6c2c  ss.get(lang_url,
-00029ff0: 2070 6172 616d 733d 7061 7261 6d73 2c20   params=params, 
-0002a000: 6865 6164 6572 733d 6865 6164 6572 732c  headers=headers,
-0002a010: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
-0002a020: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
-0002a030: 7329 2e6a 736f 6e28 290d 0a0d 0a20 2020  s).json()....   
-0002a040: 2064 6566 2067 6574 5f61 7574 6828 7365   def get_auth(se
-0002a050: 6c66 2c20 6175 7468 5f75 726c 3a20 7374  lf, auth_url: st
-0002a060: 722c 2073 733a 2053 6573 7369 6f6e 5479  r, ss: SessionTy
-0002a070: 7065 2c20 6865 6164 6572 733a 2064 6963  pe, headers: dic
-0002a080: 742c 2074 696d 656f 7574 3a20 666c 6f61  t, timeout: floa
-0002a090: 742c 2070 726f 7869 6573 3a20 6469 6374  t, proxies: dict
-0002a0a0: 2920 2d3e 2064 6963 743a 0d0a 2020 2020  ) -> dict:..    
-0002a0b0: 2020 2020 6a73 5f68 746d 6c20 3d20 7373      js_html = ss
-0002a0c0: 2e67 6574 2861 7574 685f 7572 6c2c 2068  .get(auth_url, h
-0002a0d0: 6561 6465 7273 3d68 6561 6465 7273 2c20  eaders=headers, 
-0002a0e0: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
-0002a0f0: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
-0002a100: 292e 7465 7874 0d0a 2020 2020 2020 2020  ).text..        
-0002a110: 7265 7475 726e 207b 6b3a 2076 2066 6f72  return {k: v for
-0002a120: 206b 2c20 7620 696e 2072 652e 636f 6d70   k, v in re.comp
-0002a130: 696c 6528 272c 282e 2a3f 293d 2228 2e2a  ile(',(.*?)="(.*
-0002a140: 3f29 2227 292e 6669 6e64 616c 6c28 6a73  ?)"').findall(js
-0002a150: 5f68 746d 6c29 7d0d 0a0d 0a20 2020 2040  _html)}....    @
-0002a160: 5473 652e 7469 6d65 5f73 7461 740d 0a20  Tse.time_stat.. 
-0002a170: 2020 2040 5473 652e 6368 6563 6b5f 7175     @Tse.check_qu
-0002a180: 6572 790d 0a20 2020 2064 6566 206c 696e  ery..    def lin
-0002a190: 6776 616e 6578 5f61 7069 2873 656c 662c  gvanex_api(self,
-0002a1a0: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
-0002a1b0: 2c20 6672 6f6d 5f6c 616e 6775 6167 653a  , from_language:
-0002a1c0: 2073 7472 203d 2027 6175 746f 272c 2074   str = 'auto', t
-0002a1d0: 6f5f 6c61 6e67 7561 6765 3a20 7374 7220  o_language: str 
-0002a1e0: 3d20 2765 6e27 2c20 2a2a 6b77 6172 6773  = 'en', **kwargs
-0002a1f0: 3a20 4170 694b 7761 7267 7354 7970 6529  : ApiKwargsType)
-0002a200: 202d 3e20 556e 696f 6e5b 7374 722c 2064   -> Union[str, d
-0002a210: 6963 745d 3a0d 0a20 2020 2020 2020 2022  ict]:..        "
-0002a220: 2222 0d0a 2020 2020 2020 2020 6874 7470  ""..        http
-0002a230: 733a 2f2f 6c69 6e67 7661 6e65 782e 636f  s://lingvanex.co
-0002a240: 6d2f 6465 6d6f 2f0d 0a20 2020 2020 2020  m/demo/..       
-0002a250: 203a 7061 7261 6d20 7175 6572 795f 7465   :param query_te
-0002a260: 7874 3a20 7374 722c 206d 7573 742e 0d0a  xt: str, must...
-0002a270: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
-0002a280: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
-0002a290: 722c 2064 6566 6175 6c74 2027 6175 746f  r, default 'auto
-0002a2a0: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
-0002a2b0: 616d 2074 6f5f 6c61 6e67 7561 6765 3a20  am to_language: 
-0002a2c0: 7374 722c 2064 6566 6175 6c74 2027 656e  str, default 'en
-0002a2d0: 272e 0d0a 2020 2020 2020 2020 3a70 6172  '...        :par
-0002a2e0: 616d 202a 2a6b 7761 7267 733a 0d0a 2020  am **kwargs:..  
-0002a2f0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-0002a300: 6172 616d 2074 696d 656f 7574 3a20 666c  aram timeout: fl
-0002a310: 6f61 742c 2064 6566 6175 6c74 204e 6f6e  oat, default Non
-0002a320: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-0002a330: 2020 2020 3a70 6172 616d 2070 726f 7869      :param proxi
-0002a340: 6573 3a20 6469 6374 2c20 6465 6661 756c  es: dict, defaul
-0002a350: 7420 4e6f 6e65 2e0d 0a20 2020 2020 2020  t None...       
-0002a360: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-0002a370: 736c 6565 705f 7365 636f 6e64 733a 2066  sleep_seconds: f
-0002a380: 6c6f 6174 2c20 6465 6661 756c 7420 302e  loat, default 0.
-0002a390: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002a3a0: 2020 3a70 6172 616d 2069 735f 6465 7461    :param is_deta
-0002a3b0: 696c 5f72 6573 756c 743a 2062 6f6f 6c2c  il_result: bool,
-0002a3c0: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
-0002a3d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a3e0: 203a 7061 7261 6d20 6966 5f69 676e 6f72   :param if_ignor
-0002a3f0: 655f 6c69 6d69 745f 6f66 5f6c 656e 6774  e_limit_of_lengt
-0002a400: 683a 2062 6f6f 6c2c 2064 6566 6175 6c74  h: bool, default
-0002a410: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
-0002a420: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-0002a430: 6c69 6d69 745f 6f66 5f6c 656e 6774 683a  limit_of_length:
-0002a440: 2069 6e74 2c20 6465 6661 756c 7420 3230   int, default 20
-0002a450: 3030 302e 0d0a 2020 2020 2020 2020 2020  000...          
-0002a460: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
-0002a470: 6967 6e6f 7265 5f65 6d70 7479 5f71 7565  ignore_empty_que
-0002a480: 7279 3a20 626f 6f6c 2c20 6465 6661 756c  ry: bool, defaul
-0002a490: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-0002a4a0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0002a4b0: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-0002a4c0: 6166 7465 725f 6672 6571 3a20 696e 742c  after_freq: int,
-0002a4d0: 2064 6566 6175 6c74 2031 3030 302e 0d0a   default 1000...
-0002a4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a4f0: 3a70 6172 616d 2075 7064 6174 655f 7365  :param update_se
-0002a500: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
-0002a510: 6e64 733a 2066 6c6f 6174 2c20 6465 6661  nds: float, defa
-0002a520: 756c 7420 3135 3030 2e0d 0a20 2020 2020  ult 1500...     
-0002a530: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-0002a540: 6d20 6966 5f73 686f 775f 7469 6d65 5f73  m if_show_time_s
-0002a550: 7461 743a 2062 6f6f 6c2c 2064 6566 6175  tat: bool, defau
-0002a560: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
-0002a570: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-0002a580: 6d20 7368 6f77 5f74 696d 655f 7374 6174  m show_time_stat
-0002a590: 5f70 7265 6369 7369 6f6e 3a20 696e 742c  _precision: int,
-0002a5a0: 2064 6566 6175 6c74 2032 2e0d 0a20 2020   default 2...   
-0002a5b0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-0002a5c0: 7261 6d20 6966 5f70 7269 6e74 5f77 6172  ram if_print_war
-0002a5d0: 6e69 6e67 3a20 626f 6f6c 2c20 6465 6661  ning: bool, defa
-0002a5e0: 756c 7420 5472 7565 2e0d 0a20 2020 2020  ult True...     
-0002a5f0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-0002a600: 6d20 6c69 6e67 7661 6e65 785f 6d6f 6465  m lingvanex_mode
-0002a610: 3a20 7374 722c 2064 6566 6175 6c74 2022  : str, default "
-0002a620: 4232 4322 2c20 6368 6f6f 7365 2066 726f  B2C", choose fro
-0002a630: 6d20 2822 4232 4222 2c20 2242 3243 2229  m ("B2B", "B2C")
-0002a640: 2e0d 0a20 2020 2020 2020 203a 7265 7475  ...        :retu
-0002a650: 726e 3a20 7374 7220 6f72 2064 6963 740d  rn: str or dict.
-0002a660: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
-0002a670: 2020 2020 2020 2020 6d6f 6465 203d 206b          mode = k
-0002a680: 7761 7267 732e 6765 7428 276c 696e 6776  wargs.get('lingv
-0002a690: 616e 6578 5f6d 6f64 6527 2c20 2742 3243  anex_mode', 'B2C
-0002a6a0: 2729 0d0a 2020 2020 2020 2020 7469 6d65  ')..        time
-0002a6b0: 6f75 7420 3d20 6b77 6172 6773 2e67 6574  out = kwargs.get
-0002a6c0: 2827 7469 6d65 6f75 7427 2c20 4e6f 6e65  ('timeout', None
-0002a6d0: 290d 0a20 2020 2020 2020 2070 726f 7869  )..        proxi
-0002a6e0: 6573 203d 206b 7761 7267 732e 6765 7428  es = kwargs.get(
-0002a6f0: 2770 726f 7869 6573 272c 204e 6f6e 6529  'proxies', None)
-0002a700: 0d0a 2020 2020 2020 2020 736c 6565 705f  ..        sleep_
-0002a710: 7365 636f 6e64 7320 3d20 6b77 6172 6773  seconds = kwargs
-0002a720: 2e67 6574 2827 736c 6565 705f 7365 636f  .get('sleep_seco
-0002a730: 6e64 7327 2c20 3029 0d0a 2020 2020 2020  nds', 0)..      
-0002a740: 2020 6966 5f70 7269 6e74 5f77 6172 6e69    if_print_warni
-0002a750: 6e67 203d 206b 7761 7267 732e 6765 7428  ng = kwargs.get(
-0002a760: 2769 665f 7072 696e 745f 7761 726e 696e  'if_print_warnin
-0002a770: 6727 2c20 5472 7565 290d 0a20 2020 2020  g', True)..     
-0002a780: 2020 2069 735f 6465 7461 696c 5f72 6573     is_detail_res
-0002a790: 756c 7420 3d20 6b77 6172 6773 2e67 6574  ult = kwargs.get
-0002a7a0: 2827 6973 5f64 6574 6169 6c5f 7265 7375  ('is_detail_resu
-0002a7b0: 6c74 272c 2046 616c 7365 290d 0a20 2020  lt', False)..   
-0002a7c0: 2020 2020 2075 7064 6174 655f 7365 7373       update_sess
-0002a7d0: 696f 6e5f 6166 7465 725f 6672 6571 203d  ion_after_freq =
-0002a7e0: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
-0002a7f0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0002a800: 725f 6672 6571 272c 2073 656c 662e 6465  r_freq', self.de
-0002a810: 6661 756c 745f 7365 7373 696f 6e5f 6672  fault_session_fr
-0002a820: 6571 290d 0a20 2020 2020 2020 2075 7064  eq)..        upd
-0002a830: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0002a840: 725f 7365 636f 6e64 7320 3d20 6b77 6172  r_seconds = kwar
-0002a850: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
-0002a860: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-0002a870: 6f6e 6473 272c 2073 656c 662e 6465 6661  onds', self.defa
-0002a880: 756c 745f 7365 7373 696f 6e5f 7365 636f  ult_session_seco
-0002a890: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
-0002a8a0: 6c66 2e63 6865 636b 5f69 6e70 7574 5f6c  lf.check_input_l
-0002a8b0: 696d 6974 2871 7565 7279 5f74 6578 742c  imit(query_text,
-0002a8c0: 2073 656c 662e 696e 7075 745f 6c69 6d69   self.input_limi
-0002a8d0: 7429 0d0a 0d0a 2020 2020 2020 2020 6e6f  t)....        no
-0002a8e0: 745f 7570 6461 7465 5f63 6f6e 645f 6672  t_update_cond_fr
-0002a8f0: 6571 203d 2031 2069 6620 7365 6c66 2e71  eq = 1 if self.q
-0002a900: 7565 7279 5f63 6f75 6e74 2025 2075 7064  uery_count % upd
-0002a910: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0002a920: 725f 6672 6571 2021 3d20 3020 656c 7365  r_freq != 0 else
-0002a930: 2030 0d0a 2020 2020 2020 2020 6e6f 745f   0..        not_
-0002a940: 7570 6461 7465 5f63 6f6e 645f 7469 6d65  update_cond_time
-0002a950: 203d 2031 2069 6620 7469 6d65 2e74 696d   = 1 if time.tim
-0002a960: 6528 2920 2d20 7365 6c66 2e62 6567 696e  e() - self.begin
-0002a970: 5f74 696d 6520 3c20 7570 6461 7465 5f73  _time < update_s
-0002a980: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-0002a990: 6f6e 6473 2065 6c73 6520 300d 0a20 2020  onds else 0..   
-0002a9a0: 2020 2020 2069 6620 6e6f 7420 2873 656c       if not (sel
-0002a9b0: 662e 7365 7373 696f 6e20 616e 6420 7365  f.session and se
-0002a9c0: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
-0002a9d0: 616e 6420 6e6f 745f 7570 6461 7465 5f63  and not_update_c
-0002a9e0: 6f6e 645f 6672 6571 2061 6e64 206e 6f74  ond_freq and not
-0002a9f0: 5f75 7064 6174 655f 636f 6e64 5f74 696d  _update_cond_tim
-0002aa00: 6520 616e 6420 7365 6c66 2e61 7574 685f  e and self.auth_
-0002aa10: 696e 666f 2061 6e64 2073 656c 662e 6d6f  info and self.mo
-0002aa20: 6465 203d 3d20 6d6f 6465 293a 0d0a 2020  de == mode):..  
-0002aa30: 2020 2020 2020 2020 2020 7365 6c66 2e62            self.b
-0002aa40: 6567 696e 5f74 696d 6520 3d20 7469 6d65  egin_time = time
-0002aa50: 2e74 696d 6528 290d 0a20 2020 2020 2020  .time()..       
-0002aa60: 2020 2020 2073 656c 662e 7365 7373 696f       self.sessio
-0002aa70: 6e20 3d20 7265 7175 6573 7473 2e53 6573  n = requests.Ses
-0002aa80: 7369 6f6e 2829 0d0a 2020 2020 2020 2020  sion()..        
-0002aa90: 2020 2020 5f20 3d20 7365 6c66 2e73 6573      _ = self.ses
-0002aaa0: 7369 6f6e 2e67 6574 2873 656c 662e 686f  sion.get(self.ho
-0002aab0: 7374 5f75 726c 2c20 6865 6164 6572 733d  st_url, headers=
-0002aac0: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
-0002aad0: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
-0002aae0: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
-0002aaf0: 6965 7329 0d0a 2020 2020 2020 2020 2020  ies)..          
-0002ab00: 2020 7365 6c66 2e61 7574 685f 696e 666f    self.auth_info
-0002ab10: 203d 2073 656c 662e 6765 745f 6175 7468   = self.get_auth
-0002ab20: 2873 656c 662e 6175 7468 5f75 726c 2c20  (self.auth_url, 
-0002ab30: 7365 6c66 2e73 6573 7369 6f6e 2c20 7365  self.session, se
-0002ab40: 6c66 2e68 6f73 745f 6865 6164 6572 732c  lf.host_headers,
-0002ab50: 2074 696d 656f 7574 2c20 7072 6f78 6965   timeout, proxie
-0002ab60: 7329 0d0a 0d0a 2020 2020 2020 2020 2020  s)....          
-0002ab70: 2020 6966 206d 6f64 6520 6e6f 7420 696e    if mode not in
-0002ab80: 2073 656c 662e 6d6f 6465 6c5f 706f 6f6c   self.model_pool
-0002ab90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002aba0: 2020 2072 6169 7365 2054 7261 6e73 6c61     raise Transla
-0002abb0: 746f 7245 7272 6f72 0d0a 0d0a 2020 2020  torError....    
-0002abc0: 2020 2020 2020 2020 6966 206d 6f64 6520          if mode 
-0002abd0: 213d 2073 656c 662e 6d6f 6465 3a0d 0a20  != self.mode:.. 
-0002abe0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0002abf0: 656c 662e 6d6f 6465 203d 206d 6f64 650d  elf.mode = mode.
-0002ac00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002ac10: 2073 656c 662e 6170 695f 7572 6c20 3d20   self.api_url = 
-0002ac20: 2727 2e6a 6f69 6e28 5b73 656c 662e 6175  ''.join([self.au
-0002ac30: 7468 5f69 6e66 6f5b 6627 7b6d 6f64 657d  th_info[f'{mode}
-0002ac40: 5f42 4153 455f 5552 4c27 5d2c 2073 656c  _BASE_URL'], sel
-0002ac50: 662e 6175 7468 5f69 6e66 6f5b 2754 5241  f.auth_info['TRA
-0002ac60: 4e53 4c41 5445 5f55 524c 275d 5d29 0d0a  NSLATE_URL']])..
-0002ac70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ac80: 7365 6c66 2e6c 616e 6775 6167 655f 7572  self.language_ur
-0002ac90: 6c20 3d20 2727 2e6a 6f69 6e28 5b73 656c  l = ''.join([sel
-0002aca0: 662e 6175 7468 5f69 6e66 6f5b 6627 7b6d  f.auth_info[f'{m
-0002acb0: 6f64 657d 5f42 4153 455f 5552 4c27 5d2c  ode}_BASE_URL'],
-0002acc0: 2073 656c 662e 6175 7468 5f69 6e66 6f5b   self.auth_info[
-0002acd0: 2747 4554 5f4c 414e 4755 4147 4553 5f55  'GET_LANGUAGES_U
-0002ace0: 524c 275d 5d29 0d0a 2020 2020 2020 2020  RL']])..        
-0002acf0: 2020 2020 2020 2020 7365 6c66 2e68 6f73          self.hos
-0002ad00: 745f 6865 6164 6572 732e 7570 6461 7465  t_headers.update
-0002ad10: 287b 2761 7574 686f 7269 7a61 7469 6f6e  ({'authorization
-0002ad20: 273a 2073 656c 662e 6175 7468 5f69 6e66  ': self.auth_inf
-0002ad30: 6f5b 6627 7b6d 6f64 657d 5f41 5554 485f  o[f'{mode}_AUTH_
-0002ad40: 544f 4b45 4e27 5d7d 290d 0a20 2020 2020  TOKEN']})..     
-0002ad50: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0002ad60: 6170 695f 6865 6164 6572 732e 7570 6461  api_headers.upda
-0002ad70: 7465 287b 2761 7574 686f 7269 7a61 7469  te({'authorizati
-0002ad80: 6f6e 273a 2073 656c 662e 6175 7468 5f69  on': self.auth_i
-0002ad90: 6e66 6f5b 6627 7b6d 6f64 657d 5f41 5554  nfo[f'{mode}_AUT
-0002ada0: 485f 544f 4b45 4e27 5d7d 290d 0a20 2020  H_TOKEN']})..   
-0002adb0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0002adc0: 662e 6170 695f 6865 6164 6572 732e 7570  f.api_headers.up
-0002add0: 6461 7465 287b 2772 6566 6572 6572 273a  date({'referer':
-0002ade0: 2075 726c 6c69 622e 7061 7273 652e 7572   urllib.parse.ur
-0002adf0: 6c70 6172 7365 2873 656c 662e 6175 7468  lparse(self.auth
-0002ae00: 5f69 6e66 6f5b 6627 7b6d 6f64 657d 5f42  _info[f'{mode}_B
-0002ae10: 4153 455f 5552 4c27 5d29 2e6e 6574 6c6f  ASE_URL']).netlo
-0002ae20: 637d 290d 0a0d 0a20 2020 2020 2020 2020  c})....         
-0002ae30: 2020 2064 6562 7567 5f6c 616e 675f 6b77     debug_lang_kw
-0002ae40: 6172 6773 203d 2073 656c 662e 6465 6275  args = self.debu
-0002ae50: 675f 6c61 6e67 5f6b 7761 7267 7328 6672  g_lang_kwargs(fr
-0002ae60: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-0002ae70: 6c61 6e67 7561 6765 2c20 7365 6c66 2e64  language, self.d
-0002ae80: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
-0002ae90: 7561 6765 2c20 6966 5f70 7269 6e74 5f77  uage, if_print_w
-0002aea0: 6172 6e69 6e67 290d 0a20 2020 2020 2020  arning)..       
-0002aeb0: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-0002aec0: 6765 5f6d 6170 203d 2073 656c 662e 6765  ge_map = self.ge
-0002aed0: 745f 6c61 6e67 7561 6765 5f6d 6170 2873  t_language_map(s
-0002aee0: 656c 662e 6c61 6e67 7561 6765 5f75 726c  elf.language_url
-0002aef0: 2c20 7365 6c66 2e73 6573 7369 6f6e 2c20  , self.session, 
-0002af00: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
-0002af10: 732c 2074 696d 656f 7574 2c20 7072 6f78  s, timeout, prox
-0002af20: 6965 732c 202a 2a64 6562 7567 5f6c 616e  ies, **debug_lan
-0002af30: 675f 6b77 6172 6773 290d 0a20 2020 2020  g_kwargs)..     
-0002af40: 2020 2020 2020 2073 656c 662e 6465 7461         self.deta
-0002af50: 696c 5f6c 616e 6775 6167 655f 6d61 7020  il_language_map 
-0002af60: 3d20 7365 6c66 2e67 6574 5f64 5f6c 616e  = self.get_d_lan
-0002af70: 675f 6d61 7028 7365 6c66 2e6c 616e 6775  g_map(self.langu
-0002af80: 6167 655f 7572 6c2c 2073 656c 662e 7365  age_url, self.se
-0002af90: 7373 696f 6e2c 2073 656c 662e 686f 7374  ssion, self.host
-0002afa0: 5f68 6561 6465 7273 2c20 7469 6d65 6f75  _headers, timeou
-0002afb0: 742c 2070 726f 7869 6573 290d 0a0d 0a20  t, proxies).... 
-0002afc0: 2020 2020 2020 2069 6620 6672 6f6d 5f6c         if from_l
-0002afd0: 616e 6775 6167 6520 3d3d 2027 6175 746f  anguage == 'auto
-0002afe0: 273a 0d0a 2020 2020 2020 2020 2020 2020  ':..            
-0002aff0: 6672 6f6d 5f6c 616e 6775 6167 6520 3d20  from_language = 
-0002b000: 7365 6c66 2e77 6172 6e69 6e67 5f61 7574  self.warning_aut
-0002b010: 6f5f 6c61 6e67 2827 6c69 6e67 7661 6e65  o_lang('lingvane
-0002b020: 7827 2c20 7365 6c66 2e64 6566 6175 6c74  x', self.default
-0002b030: 5f66 726f 6d5f 6c61 6e67 7561 6765 2c20  _from_language, 
-0002b040: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
-0002b050: 290d 0a20 2020 2020 2020 2066 726f 6d5f  )..        from_
-0002b060: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
-0002b070: 6775 6167 6520 3d20 7365 6c66 2e63 6865  guage = self.che
-0002b080: 636b 5f6c 616e 6775 6167 6528 6672 6f6d  ck_language(from
-0002b090: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
-0002b0a0: 6e67 7561 6765 2c20 7365 6c66 2e6c 616e  nguage, self.lan
-0002b0b0: 6775 6167 655f 6d61 702c 206f 7574 7075  guage_map, outpu
-0002b0c0: 745f 7a68 3d73 656c 662e 6f75 7470 7574  t_zh=self.output
-0002b0d0: 5f7a 682c 0d0a 2020 2020 2020 2020 2020  _zh,..          
-0002b0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b100: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-0002b110: 7574 7075 745f 656e 5f74 7261 6e73 6c61  utput_en_transla
-0002b120: 746f 723d 276c 696e 6776 616e 6578 272c  tor='lingvanex',
-0002b130: 206f 7574 7075 745f 656e 3d27 656e 5f47   output_en='en_G
-0002b140: 4227 290d 0a0d 0a20 2020 2020 2020 2070  B')....        p
-0002b150: 6179 6c6f 6164 203d 207b 0d0a 2020 2020  ayload = {..    
-0002b160: 2020 2020 2020 2020 2766 726f 6d27 3a20          'from': 
-0002b170: 6672 6f6d 5f6c 616e 6775 6167 652c 0d0a  from_language,..
-0002b180: 2020 2020 2020 2020 2020 2020 2774 6f27              'to'
-0002b190: 3a20 746f 5f6c 616e 6775 6167 652c 0d0a  : to_language,..
-0002b1a0: 2020 2020 2020 2020 2020 2020 2774 6578              'tex
-0002b1b0: 7427 3a20 7175 6572 795f 7465 7874 2c0d  t': query_text,.
-0002b1c0: 0a20 2020 2020 2020 2020 2020 2027 706c  .            'pl
-0002b1d0: 6174 666f 726d 273a 2027 6470 272c 0d0a  atform': 'dp',..
-0002b1e0: 2020 2020 2020 2020 2020 2020 2769 735f              'is_
-0002b1f0: 7265 7475 726e 5f74 6578 745f 7370 6c69  return_text_spli
-0002b200: 745f 7261 6e67 6573 273a 2027 7472 7565  t_ranges': 'true
-0002b210: 270d 0a20 2020 2020 2020 207d 0d0a 2020  '..        }..  
-0002b220: 2020 2020 2020 7061 796c 6f61 6420 3d20        payload = 
-0002b230: 7572 6c6c 6962 2e70 6172 7365 2e75 726c  urllib.parse.url
-0002b240: 656e 636f 6465 2870 6179 6c6f 6164 290d  encode(payload).
-0002b250: 0a20 2020 2020 2020 2072 203d 2073 656c  .        r = sel
-0002b260: 662e 7365 7373 696f 6e2e 706f 7374 2873  f.session.post(s
-0002b270: 656c 662e 6170 695f 7572 6c2c 2064 6174  elf.api_url, dat
-0002b280: 613d 7061 796c 6f61 642c 2068 6561 6465  a=payload, heade
-0002b290: 7273 3d73 656c 662e 6170 695f 6865 6164  rs=self.api_head
-0002b2a0: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
-0002b2b0: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
-0002b2c0: 6f78 6965 7329 0d0a 2020 2020 2020 2020  oxies)..        
-0002b2d0: 722e 7261 6973 655f 666f 725f 7374 6174  r.raise_for_stat
-0002b2e0: 7573 2829 0d0a 2020 2020 2020 2020 6461  us()..        da
-0002b2f0: 7461 203d 2072 2e6a 736f 6e28 290d 0a20  ta = r.json().. 
-0002b300: 2020 2020 2020 2074 696d 652e 736c 6565         time.slee
-0002b310: 7028 736c 6565 705f 7365 636f 6e64 7329  p(sleep_seconds)
-0002b320: 0d0a 2020 2020 2020 2020 7365 6c66 2e71  ..        self.q
-0002b330: 7565 7279 5f63 6f75 6e74 202b 3d20 310d  uery_count += 1.
-0002b340: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0002b350: 6461 7461 2069 6620 6973 5f64 6574 6169  data if is_detai
-0002b360: 6c5f 7265 7375 6c74 2065 6c73 6520 6461  l_result else da
-0002b370: 7461 5b27 7265 7375 6c74 275d 5b27 7465  ta['result']['te
-0002b380: 7874 275d 0d0a 0d0a 0d0a 636c 6173 7320  xt']......class 
-0002b390: 4e69 7574 7261 6e73 2854 7365 293a 0d0a  Niutrans(Tse):..
-0002b3a0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-0002b3b0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-0002b3c0: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
-0002b3d0: 5f28 290d 0a20 2020 2020 2020 2073 656c  _()..        sel
-0002b3e0: 662e 6265 6769 6e5f 7469 6d65 203d 2074  f.begin_time = t
-0002b3f0: 696d 652e 7469 6d65 2829 0d0a 2020 2020  ime.time()..    
-0002b400: 2020 2020 7365 6c66 2e68 6f73 745f 7572      self.host_ur
-0002b410: 6c20 3d20 2768 7474 703a 2f2f 6469 7370  l = 'http://disp
-0002b420: 6c61 792e 6e69 7574 7261 6e73 2e63 6f6d  lay.niutrans.com
-0002b430: 2720 2023 206d 7573 7420 6874 7470 0d0a  '  # must http..
-0002b440: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
-0002b450: 5f75 726c 203d 2027 6874 7470 3a2f 2f64  _url = 'http://d
-0002b460: 6973 706c 6179 2e6e 6975 7472 616e 732e  isplay.niutrans.
-0002b470: 636f 6d2f 6e69 7574 7261 6e73 2f74 6578  com/niutrans/tex
-0002b480: 7454 7261 6e73 6c61 7469 6f6e 270d 0a20  tTranslation'.. 
-0002b490: 2020 2020 2020 2073 656c 662e 636f 6f6b         self.cook
-0002b4a0: 6965 5f75 726c 203d 2027 6874 7470 3a2f  ie_url = 'http:/
-0002b4b0: 2f64 6973 706c 6179 2e6e 6975 7472 616e  /display.niutran
-0002b4c0: 732e 636f 6d2f 6e69 7574 7261 6e73 2f75  s.com/niutrans/u
-0002b4d0: 7365 722f 6765 7441 6363 6f75 6e74 4164  ser/getAccountAd
-0002b4e0: 6d69 6e3f 6c6f 6361 6c65 3d7a 682d 434e  min?locale=zh-CN
-0002b4f0: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
-0002b500: 7573 6572 5f75 726c 203d 2027 6874 7470  user_url = 'http
-0002b510: 3a2f 2f64 6973 706c 6179 2e6e 6975 7472  ://display.niutr
-0002b520: 616e 732e 636f 6d2f 6e69 7574 7261 6e73  ans.com/niutrans
-0002b530: 2f75 7365 722f 6765 7447 7565 7374 5573  /user/getGuestUs
-0002b540: 6572 270d 0a20 2020 2020 2020 2073 656c  er'..        sel
-0002b550: 662e 6b65 795f 7572 6c20 3d20 2768 7474  f.key_url = 'htt
-0002b560: 703a 2f2f 6469 7370 6c61 792e 6e69 7574  p://display.niut
-0002b570: 7261 6e73 2e63 6f6d 2f6e 6975 7472 616e  rans.com/niutran
-0002b580: 732f 7573 6572 2f67 6574 4f6e 6550 7562  s/user/getOnePub
-0002b590: 6c69 634b 6579 270d 0a20 2020 2020 2020  licKey'..       
-0002b5a0: 2073 656c 662e 746f 6b65 6e5f 7572 6c20   self.token_url 
-0002b5b0: 3d20 2768 7474 703a 2f2f 6469 7370 6c61  = 'http://displa
-0002b5c0: 792e 6e69 7574 7261 6e73 2e63 6f6d 2f6e  y.niutrans.com/n
-0002b5d0: 6975 7472 616e 732f 6c6f 6769 6e27 0d0a  iutrans/login'..
-0002b5e0: 2020 2020 2020 2020 7365 6c66 2e69 6e66          self.inf
-0002b5f0: 6f5f 7572 6c20 3d20 2768 7474 703a 2f2f  o_url = 'http://
-0002b600: 6469 7370 6c61 792e 6e69 7574 7261 6e73  display.niutrans
-0002b610: 2e63 6f6d 2f6e 6975 7472 616e 732f 7573  .com/niutrans/us
-0002b620: 6572 2f67 6574 5573 6572 496e 666f 4279  er/getUserInfoBy
-0002b630: 546f 6b65 6e27 0d0a 2020 2020 2020 2020  Token'..        
-0002b640: 7365 6c66 2e67 6574 5f6c 616e 6775 6167  self.get_languag
-0002b650: 655f 7572 6c20 3d20 2768 7474 703a 2f2f  e_url = 'http://
-0002b660: 6469 7370 6c61 792e 6e69 7574 7261 6e73  display.niutrans
-0002b670: 2e63 6f6d 2f6e 6975 7472 616e 732f 7472  .com/niutrans/tr
-0002b680: 616e 736c 5365 7276 6963 6549 6e66 6f2f  anslServiceInfo/
-0002b690: 6765 7441 6c6c 4c61 6e67 7561 6765 270d  getAllLanguage'.
-0002b6a0: 0a20 2020 2020 2020 2073 656c 662e 6465  .        self.de
-0002b6b0: 7465 6374 5f6c 616e 6775 6167 655f 7572  tect_language_ur
-0002b6c0: 6c20 3d20 2768 7474 703a 2f2f 6469 7370  l = 'http://disp
-0002b6d0: 6c61 792e 6e69 7574 7261 6e73 2e63 6f6d  lay.niutrans.com
-0002b6e0: 2f6e 6975 7472 616e 732f 7465 7874 4c61  /niutrans/textLa
-0002b6f0: 6e67 7561 6765 4465 7465 6374 270d 0a20  nguageDetect'.. 
-0002b700: 2020 2020 2020 2073 656c 662e 686f 7374         self.host
-0002b710: 5f68 6561 6465 7273 203d 2073 656c 662e  _headers = self.
-0002b720: 6765 745f 6865 6164 6572 7328 7365 6c66  get_headers(self
-0002b730: 2e68 6f73 745f 7572 6c2c 2069 665f 6170  .host_url, if_ap
-0002b740: 693d 4661 6c73 6529 0d0a 2020 2020 2020  i=False)..      
-0002b750: 2020 7365 6c66 2e61 7069 5f68 6561 6465    self.api_heade
-0002b760: 7273 203d 204e 6f6e 650d 0a20 2020 2020  rs = None..     
-0002b770: 2020 2073 656c 662e 7365 7373 696f 6e20     self.session 
-0002b780: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-0002b790: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
-0002b7a0: 7020 3d20 4e6f 6e65 0d0a 2020 2020 2020  p = None..      
-0002b7b0: 2020 2320 7365 6c66 2e64 6574 6169 6c5f    # self.detail_
-0002b7c0: 6c61 6e67 7561 6765 5f6d 6170 203d 204e  language_map = N
-0002b7d0: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
-0002b7e0: 662e 6163 636f 756e 745f 696e 666f 203d  f.account_info =
-0002b7f0: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
-0002b800: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
-0002b810: 3d20 300d 0a20 2020 2020 2020 2073 656c  = 0..        sel
-0002b820: 662e 6f75 7470 7574 5f7a 6820 3d20 277a  f.output_zh = 'z
-0002b830: 6827 0d0a 2020 2020 2020 2020 7365 6c66  h'..        self
-0002b840: 2e69 6e70 7574 5f6c 696d 6974 203d 2069  .input_limit = i
-0002b850: 6e74 2835 6533 290d 0a20 2020 2020 2020  nt(5e3)..       
-0002b860: 2073 656c 662e 6465 6661 756c 745f 6672   self.default_fr
-0002b870: 6f6d 5f6c 616e 6775 6167 6520 3d20 7365  om_language = se
-0002b880: 6c66 2e6f 7574 7075 745f 7a68 0d0a 0d0a  lf.output_zh....
-0002b890: 2020 2020 4054 7365 2e64 6562 7567 5f6c      @Tse.debug_l
-0002b8a0: 616e 6775 6167 655f 6d61 700d 0a20 2020  anguage_map..   
-0002b8b0: 2064 6566 2067 6574 5f6c 616e 6775 6167   def get_languag
-0002b8c0: 655f 6d61 7028 7365 6c66 2c20 6c61 6e67  e_map(self, lang
-0002b8d0: 5f75 726c 3a20 7374 722c 2073 733a 2053  _url: str, ss: S
-0002b8e0: 6573 7369 6f6e 5479 7065 2c20 6865 6164  essionType, head
-0002b8f0: 6572 733a 2064 6963 742c 2074 696d 656f  ers: dict, timeo
-0002b900: 7574 3a20 4f70 7469 6f6e 616c 5b66 6c6f  ut: Optional[flo
-0002b910: 6174 5d2c 2070 726f 7869 6573 3a20 4f70  at], proxies: Op
-0002b920: 7469 6f6e 616c 5b64 6963 745d 2c20 2a2a  tional[dict], **
-0002b930: 6b77 6172 6773 3a20 4c61 6e67 4d61 704b  kwargs: LangMapK
-0002b940: 7761 7267 7354 7970 6529 202d 3e20 6469  wargsType) -> di
-0002b950: 6374 3a0d 0a20 2020 2020 2020 2064 6574  ct:..        det
-0002b960: 6169 6c5f 6c61 6e67 5f6d 6170 203d 2073  ail_lang_map = s
-0002b970: 732e 6765 7428 6c61 6e67 5f75 726c 2c20  s.get(lang_url, 
-0002b980: 6865 6164 6572 733d 6865 6164 6572 732c  headers=headers,
-0002b990: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
-0002b9a0: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
-0002b9b0: 7329 2e6a 736f 6e28 290d 0a20 2020 2020  s).json()..     
-0002b9c0: 2020 206c 616e 675f 6c69 7374 203d 2073     lang_list = s
-0002b9d0: 6f72 7465 6428 7365 7428 5b69 7465 6d5b  orted(set([item[
-0002b9e0: 276c 616e 6775 6167 6541 6262 7265 7669  'languageAbbrevi
-0002b9f0: 6174 696f 6e27 5d20 666f 7220 6974 656d  ation'] for item
-0002ba00: 2069 6e20 6465 7461 696c 5f6c 616e 675f   in detail_lang_
-0002ba10: 6d61 705b 2764 6174 6127 5d5d 2929 0d0a  map['data']]))..
-0002ba20: 2020 2020 2020 2020 7265 7475 726e 207b          return {
-0002ba30: 7d2e 6672 6f6d 6b65 7973 286c 616e 675f  }.fromkeys(lang_
-0002ba40: 6c69 7374 2c20 6c61 6e67 5f6c 6973 7429  list, lang_list)
-0002ba50: 0d0a 0d0a 2020 2020 6465 6620 656e 6372  ....    def encr
-0002ba60: 7970 745f 7273 6128 7365 6c66 2c20 6d65  ypt_rsa(self, me
-0002ba70: 7373 6167 655f 7465 7874 3a20 7374 722c  ssage_text: str,
-0002ba80: 2070 7562 6c69 635f 6b65 795f 7465 7874   public_key_text
-0002ba90: 3a20 7374 7229 202d 3e20 7374 723a 0d0a  : str) -> str:..
-0002baa0: 2020 2020 2020 2020 7075 626c 6963 5f6b          public_k
-0002bab0: 6579 5f70 656d 203d 2027 272e 6a6f 696e  ey_pem = ''.join
-0002bac0: 285b 272d 2d2d 2d2d 4245 4749 4e20 5055  (['-----BEGIN PU
-0002bad0: 424c 4943 204b 4559 2d2d 2d2d 2d5c 6e27  BLIC KEY-----\n'
-0002bae0: 2c20 7075 626c 6963 5f6b 6579 5f74 6578  , public_key_tex
-0002baf0: 742c 2027 5c6e 2d2d 2d2d 2d45 4e44 2050  t, '\n-----END P
-0002bb00: 5542 4c49 4320 4b45 592d 2d2d 2d2d 275d  UBLIC KEY-----']
-0002bb10: 290d 0a20 2020 2020 2020 2070 7562 6c69  )..        publi
-0002bb20: 635f 6b65 795f 6f62 6a65 6374 203d 2063  c_key_object = c
-0002bb30: 7279 5f73 6572 6961 6c69 7a61 7469 6f6e  ry_serialization
-0002bb40: 2e6c 6f61 645f 7065 6d5f 7075 626c 6963  .load_pem_public
-0002bb50: 5f6b 6579 2870 7562 6c69 635f 6b65 795f  _key(public_key_
-0002bb60: 7065 6d2e 656e 636f 6465 2829 290d 0a20  pem.encode()).. 
-0002bb70: 2020 2020 2020 2063 6970 6865 725f 7465         cipher_te
-0002bb80: 7874 203d 2062 6173 6536 342e 6236 3465  xt = base64.b64e
-0002bb90: 6e63 6f64 6528 7075 626c 6963 5f6b 6579  ncode(public_key
-0002bba0: 5f6f 626a 6563 742e 656e 6372 7970 7428  _object.encrypt(
-0002bbb0: 0d0a 2020 2020 2020 2020 2020 2020 706c  ..            pl
-0002bbc0: 6169 6e74 6578 743d 6d65 7373 6167 655f  aintext=message_
-0002bbd0: 7465 7874 2e65 6e63 6f64 6528 292c 0d0a  text.encode(),..
-0002bbe0: 2020 2020 2020 2020 2020 2020 2320 7061              # pa
-0002bbf0: 6464 696e 673d 6372 795f 7061 6464 696e  dding=cry_paddin
-0002bc00: 672e 504b 4353 3176 3135 2829 0d0a 2020  g.PKCS1v15()..  
-0002bc10: 2020 2020 2020 2020 2020 7061 6464 696e            paddin
-0002bc20: 673d 6372 795f 7061 6464 696e 672e 4f41  g=cry_padding.OA
-0002bc30: 4550 280d 0a20 2020 2020 2020 2020 2020  EP(..           
-0002bc40: 2020 2020 206d 6766 3d63 7279 5f70 6164       mgf=cry_pad
-0002bc50: 6469 6e67 2e4d 4746 3128 616c 676f 7269  ding.MGF1(algori
-0002bc60: 7468 6d3d 6372 795f 6861 7368 6573 2e53  thm=cry_hashes.S
-0002bc70: 4841 3235 3628 2929 2c0d 0a20 2020 2020  HA256()),..     
-0002bc80: 2020 2020 2020 2020 2020 2061 6c67 6f72             algor
-0002bc90: 6974 686d 3d63 7279 5f68 6173 6865 732e  ithm=cry_hashes.
-0002bca0: 5348 4132 3536 2829 2c0d 0a20 2020 2020  SHA256(),..     
-0002bcb0: 2020 2020 2020 2020 2020 206c 6162 656c             label
-0002bcc0: 3d4e 6f6e 650d 0a20 2020 2020 2020 2020  =None..         
-0002bcd0: 2020 2029 0d0a 2020 2020 2020 2020 2929     )..        ))
-0002bce0: 2e64 6563 6f64 6528 290d 0a20 2020 2020  .decode()..     
-0002bcf0: 2020 2072 6574 7572 6e20 6369 7068 6572     return cipher
-0002bd00: 5f74 6578 7420 2023 2054 4f44 4f0d 0a0d  _text  # TODO...
-0002bd10: 0a20 2020 2040 5473 652e 756e 6365 7274  .    @Tse.uncert
-0002bd20: 6966 6965 640d 0a20 2020 2040 5473 652e  ified..    @Tse.
-0002bd30: 7469 6d65 5f73 7461 740d 0a20 2020 2040  time_stat..    @
-0002bd40: 5473 652e 6368 6563 6b5f 7175 6572 790d  Tse.check_query.
-0002bd50: 0a20 2020 2064 6566 206e 6975 7472 616e  .    def niutran
-0002bd60: 735f 6170 6928 7365 6c66 2c20 7175 6572  s_api(self, quer
-0002bd70: 795f 7465 7874 3a20 7374 722c 2066 726f  y_text: str, fro
-0002bd80: 6d5f 6c61 6e67 7561 6765 3a20 7374 7220  m_language: str 
-0002bd90: 3d20 2761 7574 6f27 2c20 746f 5f6c 616e  = 'auto', to_lan
-0002bda0: 6775 6167 653a 2073 7472 203d 2027 656e  guage: str = 'en
-0002bdb0: 272c 202a 2a6b 7761 7267 733a 2041 7069  ', **kwargs: Api
-0002bdc0: 4b77 6172 6773 5479 7065 2920 2d3e 2055  KwargsType) -> U
-0002bdd0: 6e69 6f6e 5b73 7472 2c20 6469 6374 5d3a  nion[str, dict]:
-0002bde0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-0002bdf0: 2020 2020 2020 2068 7474 703a 2f2f 6469         http://di
-0002be00: 7370 6c61 792e 6e69 7574 7261 6e73 2e63  splay.niutrans.c
-0002be10: 6f6d 0d0a 2020 2020 2020 2020 3a70 6172  om..        :par
-0002be20: 616d 2071 7565 7279 5f74 6578 743a 2073  am query_text: s
-0002be30: 7472 2c20 6d75 7374 2e0d 0a20 2020 2020  tr, must...     
-0002be40: 2020 203a 7061 7261 6d20 6672 6f6d 5f6c     :param from_l
-0002be50: 616e 6775 6167 653a 2073 7472 2c20 6465  anguage: str, de
-0002be60: 6661 756c 7420 2761 7574 6f27 2e0d 0a20  fault 'auto'... 
-0002be70: 2020 2020 2020 203a 7061 7261 6d20 746f         :param to
-0002be80: 5f6c 616e 6775 6167 653a 2073 7472 2c20  _language: str, 
-0002be90: 6465 6661 756c 7420 2765 6e27 2e0d 0a20  default 'en'... 
-0002bea0: 2020 2020 2020 203a 7061 7261 6d20 2a2a         :param **
-0002beb0: 6b77 6172 6773 3a0d 0a20 2020 2020 2020  kwargs:..       
-0002bec0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-0002bed0: 7469 6d65 6f75 743a 2066 6c6f 6174 2c20  timeout: float, 
-0002bee0: 6465 6661 756c 7420 4e6f 6e65 2e0d 0a20  default None... 
-0002bef0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0002bf00: 7061 7261 6d20 7072 6f78 6965 733a 2064  param proxies: d
-0002bf10: 6963 742c 2064 6566 6175 6c74 204e 6f6e  ict, default Non
-0002bf20: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-0002bf30: 2020 2020 3a70 6172 616d 2073 6c65 6570      :param sleep
-0002bf40: 5f73 6563 6f6e 6473 3a20 666c 6f61 742c  _seconds: float,
-0002bf50: 2064 6566 6175 6c74 2030 2e0d 0a20 2020   default 0...   
-0002bf60: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-0002bf70: 7261 6d20 6973 5f64 6574 6169 6c5f 7265  ram is_detail_re
-0002bf80: 7375 6c74 3a20 626f 6f6c 2c20 6465 6661  sult: bool, defa
-0002bf90: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-0002bfa0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0002bfb0: 616d 2069 665f 6967 6e6f 7265 5f6c 696d  am if_ignore_lim
-0002bfc0: 6974 5f6f 665f 6c65 6e67 7468 3a20 626f  it_of_length: bo
-0002bfd0: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
-0002bfe0: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-0002bff0: 2020 2020 3a70 6172 616d 206c 696d 6974      :param limit
-0002c000: 5f6f 665f 6c65 6e67 7468 3a20 696e 742c  _of_length: int,
-0002c010: 2064 6566 6175 6c74 2032 3030 3030 2e0d   default 20000..
-0002c020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c030: 203a 7061 7261 6d20 6966 5f69 676e 6f72   :param if_ignor
-0002c040: 655f 656d 7074 795f 7175 6572 793a 2062  e_empty_query: b
-0002c050: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
-0002c060: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
-0002c070: 2020 2020 203a 7061 7261 6d20 7570 6461       :param upda
-0002c080: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
-0002c090: 5f66 7265 713a 2069 6e74 2c20 6465 6661  _freq: int, defa
-0002c0a0: 756c 7420 3130 3030 2e0d 0a20 2020 2020  ult 1000...     
-0002c0b0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-0002c0c0: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
-0002c0d0: 5f61 6674 6572 5f73 6563 6f6e 6473 3a20  _after_seconds: 
-0002c0e0: 666c 6f61 742c 2064 6566 6175 6c74 2031  float, default 1
-0002c0f0: 3530 302e 0d0a 2020 2020 2020 2020 2020  500...          
-0002c100: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
-0002c110: 7368 6f77 5f74 696d 655f 7374 6174 3a20  show_time_stat: 
-0002c120: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
-0002c130: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
-0002c140: 2020 2020 2020 3a70 6172 616d 2073 686f        :param sho
-0002c150: 775f 7469 6d65 5f73 7461 745f 7072 6563  w_time_stat_prec
-0002c160: 6973 696f 6e3a 2069 6e74 2c20 6465 6661  ision: int, defa
-0002c170: 756c 7420 322e 0d0a 2020 2020 2020 2020  ult 2...        
-0002c180: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-0002c190: 665f 7072 696e 745f 7761 726e 696e 673a  f_print_warning:
-0002c1a0: 2062 6f6f 6c2c 2064 6566 6175 6c74 2054   bool, default T
-0002c1b0: 7275 652e 0d0a 2020 2020 2020 2020 3a72  rue...        :r
-0002c1c0: 6574 7572 6e3a 2073 7472 206f 7220 6469  eturn: str or di
-0002c1d0: 6374 0d0a 2020 2020 2020 2020 2222 220d  ct..        """.
-0002c1e0: 0a0d 0a20 2020 2020 2020 2074 696d 656f  ...        timeo
-0002c1f0: 7574 203d 206b 7761 7267 732e 6765 7428  ut = kwargs.get(
-0002c200: 2774 696d 656f 7574 272c 204e 6f6e 6529  'timeout', None)
-0002c210: 0d0a 2020 2020 2020 2020 7072 6f78 6965  ..        proxie
-0002c220: 7320 3d20 6b77 6172 6773 2e67 6574 2827  s = kwargs.get('
-0002c230: 7072 6f78 6965 7327 2c20 4e6f 6e65 290d  proxies', None).
-0002c240: 0a20 2020 2020 2020 2073 6c65 6570 5f73  .        sleep_s
-0002c250: 6563 6f6e 6473 203d 206b 7761 7267 732e  econds = kwargs.
-0002c260: 6765 7428 2773 6c65 6570 5f73 6563 6f6e  get('sleep_secon
-0002c270: 6473 272c 2030 290d 0a20 2020 2020 2020  ds', 0)..       
-0002c280: 2069 665f 7072 696e 745f 7761 726e 696e   if_print_warnin
-0002c290: 6720 3d20 6b77 6172 6773 2e67 6574 2827  g = kwargs.get('
-0002c2a0: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
-0002c2b0: 272c 2054 7275 6529 0d0a 2020 2020 2020  ', True)..      
-0002c2c0: 2020 6973 5f64 6574 6169 6c5f 7265 7375    is_detail_resu
-0002c2d0: 6c74 203d 206b 7761 7267 732e 6765 7428  lt = kwargs.get(
-0002c2e0: 2769 735f 6465 7461 696c 5f72 6573 756c  'is_detail_resul
-0002c2f0: 7427 2c20 4661 6c73 6529 0d0a 2020 2020  t', False)..    
-0002c300: 2020 2020 7570 6461 7465 5f73 6573 7369      update_sessi
-0002c310: 6f6e 5f61 6674 6572 5f66 7265 7120 3d20  on_after_freq = 
-0002c320: 6b77 6172 6773 2e67 6574 2827 7570 6461  kwargs.get('upda
-0002c330: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
-0002c340: 5f66 7265 7127 2c20 7365 6c66 2e64 6566  _freq', self.def
-0002c350: 6175 6c74 5f73 6573 7369 6f6e 5f66 7265  ault_session_fre
-0002c360: 7129 0d0a 2020 2020 2020 2020 7570 6461  q)..        upda
-0002c370: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
-0002c380: 5f73 6563 6f6e 6473 203d 206b 7761 7267  _seconds = kwarg
-0002c390: 732e 6765 7428 2775 7064 6174 655f 7365  s.get('update_se
-0002c3a0: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
-0002c3b0: 6e64 7327 2c20 7365 6c66 2e64 6566 6175  nds', self.defau
-0002c3c0: 6c74 5f73 6573 7369 6f6e 5f73 6563 6f6e  lt_session_secon
-0002c3d0: 6473 290d 0a20 2020 2020 2020 2073 656c  ds)..        sel
-0002c3e0: 662e 6368 6563 6b5f 696e 7075 745f 6c69  f.check_input_li
-0002c3f0: 6d69 7428 7175 6572 795f 7465 7874 2c20  mit(query_text, 
-0002c400: 7365 6c66 2e69 6e70 7574 5f6c 696d 6974  self.input_limit
-0002c410: 290d 0a0d 0a20 2020 2020 2020 206e 6f74  )....        not
-0002c420: 5f75 7064 6174 655f 636f 6e64 5f66 7265  _update_cond_fre
-0002c430: 7120 3d20 3120 6966 2073 656c 662e 7175  q = 1 if self.qu
-0002c440: 6572 795f 636f 756e 7420 2520 7570 6461  ery_count % upda
-0002c450: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
-0002c460: 5f66 7265 7120 213d 2030 2065 6c73 6520  _freq != 0 else 
-0002c470: 300d 0a20 2020 2020 2020 206e 6f74 5f75  0..        not_u
-0002c480: 7064 6174 655f 636f 6e64 5f74 696d 6520  pdate_cond_time 
-0002c490: 3d20 3120 6966 2074 696d 652e 7469 6d65  = 1 if time.time
-0002c4a0: 2829 202d 2073 656c 662e 6265 6769 6e5f  () - self.begin_
-0002c4b0: 7469 6d65 203c 2075 7064 6174 655f 7365  time < update_se
-0002c4c0: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
-0002c4d0: 6e64 7320 656c 7365 2030 0d0a 2020 2020  nds else 0..    
-0002c4e0: 2020 2020 6966 206e 6f74 2028 7365 6c66      if not (self
-0002c4f0: 2e73 6573 7369 6f6e 2061 6e64 2073 656c  .session and sel
-0002c500: 662e 6c61 6e67 7561 6765 5f6d 6170 2061  f.language_map a
-0002c510: 6e64 206e 6f74 5f75 7064 6174 655f 636f  nd not_update_co
-0002c520: 6e64 5f66 7265 7120 616e 6420 6e6f 745f  nd_freq and not_
-0002c530: 7570 6461 7465 5f63 6f6e 645f 7469 6d65  update_cond_time
-0002c540: 2061 6e64 2073 656c 662e 6163 636f 756e   and self.accoun
-0002c550: 745f 696e 666f 2061 6e64 2073 656c 662e  t_info and self.
-0002c560: 6170 695f 6865 6164 6572 7329 3a0d 0a20  api_headers):.. 
-0002c570: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0002c580: 6265 6769 6e5f 7469 6d65 203d 2074 696d  begin_time = tim
-0002c590: 652e 7469 6d65 2829 0d0a 2020 2020 2020  e.time()..      
-0002c5a0: 2020 2020 2020 7365 6c66 2e73 6573 7369        self.sessi
-0002c5b0: 6f6e 203d 2072 6571 7565 7374 732e 5365  on = requests.Se
-0002c5c0: 7373 696f 6e28 290d 0a20 2020 2020 2020  ssion()..       
-0002c5d0: 2020 2020 205f 203d 2073 656c 662e 7365       _ = self.se
-0002c5e0: 7373 696f 6e2e 6765 7428 7365 6c66 2e68  ssion.get(self.h
-0002c5f0: 6f73 745f 7572 6c2c 2068 6561 6465 7273  ost_url, headers
-0002c600: 3d73 656c 662e 686f 7374 5f68 6561 6465  =self.host_heade
-0002c610: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
-0002c620: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
-0002c630: 7869 6573 290d 0a20 2020 2020 2020 2020  xies)..         
-0002c640: 2020 205f 203d 2073 656c 662e 7365 7373     _ = self.sess
-0002c650: 696f 6e2e 6f70 7469 6f6e 7328 7365 6c66  ion.options(self
-0002c660: 2e63 6f6f 6b69 655f 7572 6c2c 2068 6561  .cookie_url, hea
-0002c670: 6465 7273 3d73 656c 662e 686f 7374 5f68  ders=self.host_h
-0002c680: 6561 6465 7273 2c20 7469 6d65 6f75 743d  eaders, timeout=
-0002c690: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
-0002c6a0: 3d70 726f 7869 6573 290d 0a0d 0a20 2020  =proxies)....   
-0002c6b0: 2020 2020 2020 2020 2075 7365 725f 6461           user_da
-0002c6c0: 7461 203d 2073 656c 662e 7365 7373 696f  ta = self.sessio
-0002c6d0: 6e2e 6765 7428 7365 6c66 2e75 7365 725f  n.get(self.user_
-0002c6e0: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
-0002c6f0: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
-0002c700: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
-0002c710: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
-0002c720: 292e 6a73 6f6e 2829 0d0a 2020 2020 2020  ).json()..      
-0002c730: 2020 2020 2020 6b65 795f 6461 7461 203d        key_data =
-0002c740: 2073 656c 662e 7365 7373 696f 6e2e 6765   self.session.ge
-0002c750: 7428 7365 6c66 2e6b 6579 5f75 726c 2c20  t(self.key_url, 
-0002c760: 6865 6164 6572 733d 7365 6c66 2e68 6f73  headers=self.hos
-0002c770: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
-0002c780: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
-0002c790: 6965 733d 7072 6f78 6965 7329 2e6a 736f  ies=proxies).jso
-0002c7a0: 6e28 290d 0a20 2020 2020 2020 2020 2020  n()..           
-0002c7b0: 2067 7565 7374 5f69 6e66 6f20 3d20 7b0d   guest_info = {.
-0002c7c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c7d0: 2027 7573 6572 6e61 6d65 273a 2075 7365   'username': use
-0002c7e0: 725f 6461 7461 5b27 6461 7461 275d 5b27  r_data['data']['
-0002c7f0: 7573 6572 6e61 6d65 275d 2e73 7472 6970  username'].strip
-0002c800: 2829 2c0d 0a20 2020 2020 2020 2020 2020  (),..           
-0002c810: 2020 2020 2027 7061 7373 776f 7264 273a       'password':
-0002c820: 2073 656c 662e 656e 6372 7970 745f 7273   self.encrypt_rs
-0002c830: 6128 6d65 7373 6167 655f 7465 7874 3d75  a(message_text=u
-0002c840: 7365 725f 6461 7461 5b27 6461 7461 275d  ser_data['data']
-0002c850: 5b27 7061 7373 776f 7264 275d 2c20 7075  ['password'], pu
-0002c860: 626c 6963 5f6b 6579 5f74 6578 743d 6b65  blic_key_text=ke
-0002c870: 795f 6461 7461 5b27 6461 7461 275d 292c  y_data['data']),
-0002c880: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002c890: 2020 2770 7562 6c69 634b 6579 273a 206b    'publicKey': k
-0002c8a0: 6579 5f64 6174 615b 2764 6174 6127 5d2c  ey_data['data'],
-0002c8b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002c8c0: 2020 2773 796d 626f 6c27 3a20 2727 2c0d    'symbol': '',.
-0002c8d0: 0a20 2020 2020 2020 2020 2020 207d 0d0a  .            }..
-0002c8e0: 2020 2020 2020 2020 2020 2020 725f 746b              r_tk
-0002c8f0: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
-0002c900: 706f 7374 2873 656c 662e 746f 6b65 6e5f  post(self.token_
-0002c910: 7572 6c2c 206a 736f 6e3d 6775 6573 745f  url, json=guest_
-0002c920: 696e 666f 2c20 6865 6164 6572 733d 7365  info, headers=se
-0002c930: 6c66 2e68 6f73 745f 6865 6164 6572 732c  lf.host_headers,
-0002c940: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
-0002c950: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
-0002c960: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-0002c970: 746f 6b65 6e5f 6461 7461 203d 2072 5f74  token_data = r_t
-0002c980: 6b2e 6a73 6f6e 2829 0d0a 0d0a 2020 2020  k.json()....    
-0002c990: 2020 2020 2020 2020 7365 6c66 2e61 6363          self.acc
-0002c9a0: 6f75 6e74 5f69 6e66 6f20 3d20 7b2a 2a67  ount_info = {**g
-0002c9b0: 7565 7374 5f69 6e66 6f2c 202a 2a74 6f6b  uest_info, **tok
-0002c9c0: 656e 5f64 6174 615b 2764 6174 6127 5d7d  en_data['data']}
-0002c9d0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0002c9e0: 6c66 2e61 7069 5f68 6561 6465 7273 203d  lf.api_headers =
-0002c9f0: 207b 2a2a 7365 6c66 2e68 6f73 745f 6865   {**self.host_he
-0002ca00: 6164 6572 732c 202a 2a7b 274a 7774 273a  aders, **{'Jwt':
-0002ca10: 2073 656c 662e 6163 636f 756e 745f 696e   self.account_in
-0002ca20: 666f 5b27 746f 6b65 6e27 5d7d 7d0d 0a20  fo['token']}}.. 
-0002ca30: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0002ca40: 7365 7373 696f 6e2e 636f 6f6b 6965 732e  session.cookies.
-0002ca50: 7570 6461 7465 287b 2741 646d 696e 2d54  update({'Admin-T
-0002ca60: 6f6b 656e 273a 2073 656c 662e 6163 636f  oken': self.acco
-0002ca70: 756e 745f 696e 666f 5b27 746f 6b65 6e27  unt_info['token'
-0002ca80: 5d7d 290d 0a20 2020 2020 2020 2020 2020  ]})..           
-0002ca90: 2023 2069 6e66 6f5f 6461 7461 203d 2073   # info_data = s
-0002caa0: 732e 6765 7428 7365 6c66 2e69 6e66 6f5f  s.get(self.info_
-0002cab0: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
-0002cac0: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
-0002cad0: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
-0002cae0: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
-0002caf0: 292e 6a73 6f6e 2829 0d0a 0d0a 2020 2020  ).json()....    
-0002cb00: 2020 2020 2020 2020 6465 6275 675f 6c61          debug_la
-0002cb10: 6e67 5f6b 7761 7267 7320 3d20 7365 6c66  ng_kwargs = self
-0002cb20: 2e64 6562 7567 5f6c 616e 675f 6b77 6172  .debug_lang_kwar
-0002cb30: 6773 2866 726f 6d5f 6c61 6e67 7561 6765  gs(from_language
-0002cb40: 2c20 746f 5f6c 616e 6775 6167 652c 2073  , to_language, s
-0002cb50: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
-0002cb60: 5f6c 616e 6775 6167 652c 2069 665f 7072  _language, if_pr
-0002cb70: 696e 745f 7761 726e 696e 6729 0d0a 2020  int_warning)..  
-0002cb80: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-0002cb90: 616e 6775 6167 655f 6d61 7020 3d20 7365  anguage_map = se
-0002cba0: 6c66 2e67 6574 5f6c 616e 6775 6167 655f  lf.get_language_
-0002cbb0: 6d61 7028 7365 6c66 2e67 6574 5f6c 616e  map(self.get_lan
-0002cbc0: 6775 6167 655f 7572 6c2c 2073 656c 662e  guage_url, self.
-0002cbd0: 7365 7373 696f 6e2c 2073 656c 662e 6170  session, self.ap
-0002cbe0: 695f 6865 6164 6572 732c 2074 696d 656f  i_headers, timeo
-0002cbf0: 7574 2c20 7072 6f78 6965 732c 202a 2a64  ut, proxies, **d
-0002cc00: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
-0002cc10: 290d 0a0d 0a20 2020 2020 2020 2066 726f  )....        fro
-0002cc20: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
-0002cc30: 616e 6775 6167 6520 3d20 7365 6c66 2e63  anguage = self.c
-0002cc40: 6865 636b 5f6c 616e 6775 6167 6528 6672  heck_language(fr
-0002cc50: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-0002cc60: 6c61 6e67 7561 6765 2c20 7365 6c66 2e6c  language, self.l
-0002cc70: 616e 6775 6167 655f 6d61 702c 206f 7574  anguage_map, out
-0002cc80: 7075 745f 7a68 3d73 656c 662e 6f75 7470  put_zh=self.outp
-0002cc90: 7574 5f7a 6829 0d0a 2020 2020 2020 2020  ut_zh)..        
-0002cca0: 6966 2066 726f 6d5f 6c61 6e67 7561 6765  if from_language
-0002ccb0: 203d 3d20 2761 7574 6f27 3a0d 0a20 2020   == 'auto':..   
-0002ccc0: 2020 2020 2020 2020 2072 6573 203d 2073           res = s
-0002ccd0: 656c 662e 7365 7373 696f 6e2e 706f 7374  elf.session.post
-0002cce0: 2873 656c 662e 6465 7465 6374 5f6c 616e  (self.detect_lan
-0002ccf0: 6775 6167 655f 7572 6c2c 206a 736f 6e3d  guage_url, json=
-0002cd00: 7b27 7372 635f 7465 7874 273a 2071 7565  {'src_text': que
-0002cd10: 7279 5f74 6578 747d 2c20 6865 6164 6572  ry_text}, header
-0002cd20: 733d 7365 6c66 2e61 7069 5f68 6561 6465  s=self.api_heade
-0002cd30: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
-0002cd40: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
-0002cd50: 7869 6573 290d 0a20 2020 2020 2020 2020  xies)..         
-0002cd60: 2020 2066 726f 6d5f 6c61 6e67 7561 6765     from_language
-0002cd70: 203d 2072 6573 2e6a 736f 6e28 295b 2764   = res.json()['d
-0002cd80: 6174 6127 5d5b 276c 616e 6775 6167 6527  ata']['language'
-0002cd90: 5d0d 0a0d 0a20 2020 2020 2020 2070 6179  ]....        pay
-0002cda0: 6c6f 6164 203d 207b 0d0a 2020 2020 2020  load = {..      
-0002cdb0: 2020 2020 2020 2773 7263 5f74 6578 7427        'src_text'
-0002cdc0: 3a20 7175 6572 795f 7465 7874 2c20 2766  : query_text, 'f
-0002cdd0: 726f 6d27 3a20 6672 6f6d 5f6c 616e 6775  rom': from_langu
-0002cde0: 6167 652c 2027 746f 273a 2074 6f5f 6c61  age, 'to': to_la
-0002cdf0: 6e67 7561 6765 2c0d 0a20 2020 2020 2020  nguage,..       
-0002ce00: 2020 2020 2027 636f 6e74 7261 7374 466c       'contrastFl
-0002ce10: 6167 273a 2027 7472 7565 272c 2027 7465  ag': 'true', 'te
-0002ce20: 726d 4469 6374 696f 6e61 7279 4c69 6272  rmDictionaryLibr
-0002ce30: 6172 7949 6427 3a20 2727 2c20 2774 7261  aryId': '', 'tra
-0002ce40: 6e73 6c61 7469 6f6e 4d65 6d6f 7279 4c69  nslationMemoryLi
-0002ce50: 6272 6172 7949 6427 3a20 2727 2c0d 0a20  braryId': '',.. 
-0002ce60: 2020 2020 2020 207d 0d0a 2020 2020 2020         }..      
-0002ce70: 2020 7220 3d20 7365 6c66 2e73 6573 7369    r = self.sessi
-0002ce80: 6f6e 2e70 6f73 7428 7365 6c66 2e61 7069  on.post(self.api
-0002ce90: 5f75 726c 2c20 6a73 6f6e 3d70 6179 6c6f  _url, json=paylo
-0002cea0: 6164 2c20 6865 6164 6572 733d 7365 6c66  ad, headers=self
-0002ceb0: 2e61 7069 5f68 6561 6465 7273 2c20 7469  .api_headers, ti
-0002cec0: 6d65 6f75 743d 7469 6d65 6f75 742c 2070  meout=timeout, p
-0002ced0: 726f 7869 6573 3d70 726f 7869 6573 290d  roxies=proxies).
-0002cee0: 0a20 2020 2020 2020 2072 2e72 6169 7365  .        r.raise
-0002cef0: 5f66 6f72 5f73 7461 7475 7328 290d 0a20  _for_status().. 
-0002cf00: 2020 2020 2020 2064 6174 6120 3d20 722e         data = r.
-0002cf10: 6a73 6f6e 2829 0d0a 2020 2020 2020 2020  json()..        
-0002cf20: 7469 6d65 2e73 6c65 6570 2873 6c65 6570  time.sleep(sleep
-0002cf30: 5f73 6563 6f6e 6473 290d 0a20 2020 2020  _seconds)..     
-0002cf40: 2020 2073 656c 662e 7175 6572 795f 636f     self.query_co
-0002cf50: 756e 7420 2b3d 2031 0d0a 2020 2020 2020  unt += 1..      
-0002cf60: 2020 7265 7475 726e 2064 6174 6120 6966    return data if
-0002cf70: 2069 735f 6465 7461 696c 5f72 6573 756c   is_detail_resul
-0002cf80: 7420 656c 7365 2027 5c6e 272e 6a6f 696e  t else '\n'.join
-0002cf90: 285b 2720 272e 6a6f 696e 285b 6974 5b27  ([' '.join([it['
-0002cfa0: 6461 7461 275d 2066 6f72 2069 7420 696e  data'] for it in
-0002cfb0: 2069 7465 6d5b 2773 656e 7465 6e63 6573   item['sentences
-0002cfc0: 275d 5d29 2066 6f72 2069 7465 6d20 696e  ']]) for item in
-0002cfd0: 2064 6174 615b 2764 6174 6127 5d5d 290d   data['data']]).
-0002cfe0: 0a0d 0a0d 0a63 6c61 7373 204d 676c 6970  .....class Mglip
-0002cff0: 2854 7365 293a 0d0a 2020 2020 6465 6620  (Tse):..    def 
-0002d000: 5f5f 696e 6974 5f5f 2873 656c 6629 3a0d  __init__(self):.
-0002d010: 0a20 2020 2020 2020 2073 7570 6572 2829  .        super()
-0002d020: 2e5f 5f69 6e69 745f 5f28 290d 0a20 2020  .__init__()..   
-0002d030: 2020 2020 2073 656c 662e 6265 6769 6e5f       self.begin_
-0002d040: 7469 6d65 203d 2074 696d 652e 7469 6d65  time = time.time
-0002d050: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
-0002d060: 2e68 6f73 745f 7572 6c20 3d20 2768 7474  .host_url = 'htt
-0002d070: 703a 2f2f 6679 2e6d 676c 6970 2e63 6f6d  p://fy.mglip.com
-0002d080: 2f70 6327 2020 2320 6d75 7374 2068 7474  /pc'  # must htt
-0002d090: 700d 0a20 2020 2020 2020 2073 656c 662e  p..        self.
-0002d0a0: 6170 695f 7572 6c20 3d20 2768 7474 703a  api_url = 'http:
-0002d0b0: 2f2f 6679 2e6d 676c 6970 2e63 6f6d 2f74  //fy.mglip.com/t
-0002d0c0: 3274 270d 0a20 2020 2020 2020 2073 656c  2t'..        sel
-0002d0d0: 662e 686f 7374 5f68 6561 6465 7273 203d  f.host_headers =
-0002d0e0: 2073 656c 662e 6765 745f 6865 6164 6572   self.get_header
-0002d0f0: 7328 7365 6c66 2e68 6f73 745f 7572 6c2c  s(self.host_url,
-0002d100: 2069 665f 6170 693d 4661 6c73 6529 0d0a   if_api=False)..
-0002d110: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
-0002d120: 5f68 6561 6465 7273 203d 2073 656c 662e  _headers = self.
-0002d130: 6765 745f 6865 6164 6572 7328 7365 6c66  get_headers(self
-0002d140: 2e68 6f73 745f 7572 6c2c 2069 665f 6170  .host_url, if_ap
-0002d150: 693d 5472 7565 2c20 6966 5f6a 736f 6e5f  i=True, if_json_
-0002d160: 666f 725f 6170 693d 4661 6c73 6529 0d0a  for_api=False)..
-0002d170: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
-0002d180: 6775 6167 655f 6d61 7020 3d20 7b7d 2e66  guage_map = {}.f
-0002d190: 726f 6d6b 6579 7328 5b27 7a68 272c 2027  romkeys(['zh', '
-0002d1a0: 6d6f 6e27 2c20 2778 6c65 275d 2c20 5b27  mon', 'xle'], ['
-0002d1b0: 7a68 272c 2027 6d6f 6e27 2c20 2778 6c65  zh', 'mon', 'xle
-0002d1c0: 275d 290d 0a20 2020 2020 2020 2073 656c  '])..        sel
-0002d1d0: 662e 7365 7373 696f 6e20 3d20 4e6f 6e65  f.session = None
-0002d1e0: 0d0a 2020 2020 2020 2020 7365 6c66 2e71  ..        self.q
-0002d1f0: 7565 7279 5f63 6f75 6e74 203d 2030 0d0a  uery_count = 0..
-0002d200: 2020 2020 2020 2020 7365 6c66 2e6f 7574          self.out
-0002d210: 7075 745f 7a68 203d 2027 7a68 270d 0a20  put_zh = 'zh'.. 
-0002d220: 2020 2020 2020 2073 656c 662e 696e 7075         self.inpu
-0002d230: 745f 6c69 6d69 7420 3d20 696e 7428 3565  t_limit = int(5e
-0002d240: 3229 0d0a 2020 2020 2020 2020 7365 6c66  2)..        self
-0002d250: 2e64 6566 6175 6c74 5f66 726f 6d5f 6c61  .default_from_la
-0002d260: 6e67 7561 6765 203d 2073 656c 662e 6f75  nguage = self.ou
-0002d270: 7470 7574 5f7a 680d 0a0d 0a20 2020 2040  tput_zh....    @
-0002d280: 5473 652e 7469 6d65 5f73 7461 740d 0a20  Tse.time_stat.. 
-0002d290: 2020 2040 5473 652e 6368 6563 6b5f 7175     @Tse.check_qu
-0002d2a0: 6572 790d 0a20 2020 2064 6566 206d 676c  ery..    def mgl
-0002d2b0: 6970 5f61 7069 2873 656c 662c 2071 7565  ip_api(self, que
-0002d2c0: 7279 5f74 6578 743a 2073 7472 2c20 6672  ry_text: str, fr
-0002d2d0: 6f6d 5f6c 616e 6775 6167 653a 2073 7472  om_language: str
-0002d2e0: 203d 2027 6175 746f 272c 2074 6f5f 6c61   = 'auto', to_la
-0002d2f0: 6e67 7561 6765 3a20 7374 7220 3d20 276d  nguage: str = 'm
-0002d300: 6f6e 272c 202a 2a6b 7761 7267 733a 2041  on', **kwargs: A
-0002d310: 7069 4b77 6172 6773 5479 7065 2920 2d3e  piKwargsType) ->
-0002d320: 2055 6e69 6f6e 5b73 7472 2c20 6469 6374   Union[str, dict
-0002d330: 5d3a 0d0a 2020 2020 2020 2020 2222 220d  ]:..        """.
-0002d340: 0a20 2020 2020 2020 2068 7474 703a 2f2f  .        http://
-0002d350: 6679 2e6d 676c 6970 2e63 6f6d 2f70 630d  fy.mglip.com/pc.
-0002d360: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0002d370: 7175 6572 795f 7465 7874 3a20 7374 722c  query_text: str,
-0002d380: 206d 7573 742e 0d0a 2020 2020 2020 2020   must...        
-0002d390: 3a70 6172 616d 2066 726f 6d5f 6c61 6e67  :param from_lang
-0002d3a0: 7561 6765 3a20 7374 722c 2064 6566 6175  uage: str, defau
-0002d3b0: 6c74 2027 6175 746f 272c 2065 7175 616c  lt 'auto', equal
-0002d3c0: 7320 277a 6827 2e0d 0a20 2020 2020 2020  s 'zh'...       
-0002d3d0: 203a 7061 7261 6d20 746f 5f6c 616e 6775   :param to_langu
-0002d3e0: 6167 653a 2073 7472 2c20 6465 6661 756c  age: str, defaul
-0002d3f0: 7420 276d 6f6e 272e 0d0a 2020 2020 2020  t 'mon'...      
-0002d400: 2020 3a70 6172 616d 202a 2a6b 7761 7267    :param **kwarg
-0002d410: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-0002d420: 2020 2020 3a70 6172 616d 2074 696d 656f      :param timeo
-0002d430: 7574 3a20 666c 6f61 742c 2064 6566 6175  ut: float, defau
-0002d440: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
-0002d450: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0002d460: 2070 726f 7869 6573 3a20 6469 6374 2c20   proxies: dict, 
-0002d470: 6465 6661 756c 7420 4e6f 6e65 2e0d 0a20  default None... 
-0002d480: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0002d490: 7061 7261 6d20 736c 6565 705f 7365 636f  param sleep_seco
-0002d4a0: 6e64 733a 2066 6c6f 6174 2c20 6465 6661  nds: float, defa
-0002d4b0: 756c 7420 302e 0d0a 2020 2020 2020 2020  ult 0...        
-0002d4c0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-0002d4d0: 735f 6465 7461 696c 5f72 6573 756c 743a  s_detail_result:
-0002d4e0: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
-0002d4f0: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
-0002d500: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-0002d510: 5f69 676e 6f72 655f 6c69 6d69 745f 6f66  _ignore_limit_of
-0002d520: 5f6c 656e 6774 683a 2062 6f6f 6c2c 2064  _length: bool, d
-0002d530: 6566 6175 6c74 2046 616c 7365 2e0d 0a20  efault False... 
-0002d540: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0002d550: 7061 7261 6d20 6c69 6d69 745f 6f66 5f6c  param limit_of_l
-0002d560: 656e 6774 683a 2069 6e74 2c20 6465 6661  ength: int, defa
-0002d570: 756c 7420 3230 3030 302e 0d0a 2020 2020  ult 20000...    
-0002d580: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0002d590: 616d 2069 665f 6967 6e6f 7265 5f65 6d70  am if_ignore_emp
-0002d5a0: 7479 5f71 7565 7279 3a20 626f 6f6c 2c20  ty_query: bool, 
-0002d5b0: 6465 6661 756c 7420 4661 6c73 652e 0d0a  default False...
-0002d5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d5d0: 3a70 6172 616d 2075 7064 6174 655f 7365  :param update_se
-0002d5e0: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
-0002d5f0: 3a20 696e 742c 2064 6566 6175 6c74 2031  : int, default 1
-0002d600: 3030 302e 0d0a 2020 2020 2020 2020 2020  000...          
-0002d610: 2020 2020 2020 3a70 6172 616d 2075 7064        :param upd
-0002d620: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0002d630: 725f 7365 636f 6e64 733a 2066 6c6f 6174  r_seconds: float
-0002d640: 2c20 6465 6661 756c 7420 3135 3030 2e0d  , default 1500..
-0002d650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d660: 203a 7061 7261 6d20 6966 5f73 686f 775f   :param if_show_
-0002d670: 7469 6d65 5f73 7461 743a 2062 6f6f 6c2c  time_stat: bool,
-0002d680: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
-0002d690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d6a0: 203a 7061 7261 6d20 7368 6f77 5f74 696d   :param show_tim
-0002d6b0: 655f 7374 6174 5f70 7265 6369 7369 6f6e  e_stat_precision
-0002d6c0: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
-0002d6d0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0002d6e0: 2020 203a 7061 7261 6d20 6966 5f70 7269     :param if_pri
-0002d6f0: 6e74 5f77 6172 6e69 6e67 3a20 626f 6f6c  nt_warning: bool
-0002d700: 2c20 6465 6661 756c 7420 5472 7565 2e0d  , default True..
-0002d710: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-0002d720: 3a20 7374 7220 6f72 2064 6963 740d 0a20  : str or dict.. 
-0002d730: 2020 2020 2020 2022 2222 0d0a 0d0a 2020         """....  
-0002d740: 2020 2020 2020 7469 6d65 6f75 7420 3d20        timeout = 
-0002d750: 6b77 6172 6773 2e67 6574 2827 7469 6d65  kwargs.get('time
-0002d760: 6f75 7427 2c20 4e6f 6e65 290d 0a20 2020  out', None)..   
-0002d770: 2020 2020 2070 726f 7869 6573 203d 206b       proxies = k
-0002d780: 7761 7267 732e 6765 7428 2770 726f 7869  wargs.get('proxi
-0002d790: 6573 272c 204e 6f6e 6529 0d0a 2020 2020  es', None)..    
-0002d7a0: 2020 2020 736c 6565 705f 7365 636f 6e64      sleep_second
-0002d7b0: 7320 3d20 6b77 6172 6773 2e67 6574 2827  s = kwargs.get('
-0002d7c0: 736c 6565 705f 7365 636f 6e64 7327 2c20  sleep_seconds', 
-0002d7d0: 3029 0d0a 2020 2020 2020 2020 6966 5f70  0)..        if_p
-0002d7e0: 7269 6e74 5f77 6172 6e69 6e67 203d 206b  rint_warning = k
-0002d7f0: 7761 7267 732e 6765 7428 2769 665f 7072  wargs.get('if_pr
-0002d800: 696e 745f 7761 726e 696e 6727 2c20 5472  int_warning', Tr
-0002d810: 7565 290d 0a20 2020 2020 2020 2069 735f  ue)..        is_
-0002d820: 6465 7461 696c 5f72 6573 756c 7420 3d20  detail_result = 
-0002d830: 6b77 6172 6773 2e67 6574 2827 6973 5f64  kwargs.get('is_d
-0002d840: 6574 6169 6c5f 7265 7375 6c74 272c 2046  etail_result', F
-0002d850: 616c 7365 290d 0a20 2020 2020 2020 2075  alse)..        u
-0002d860: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-0002d870: 7465 725f 6672 6571 203d 206b 7761 7267  ter_freq = kwarg
-0002d880: 732e 6765 7428 2775 7064 6174 655f 7365  s.get('update_se
-0002d890: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
-0002d8a0: 272c 2073 656c 662e 6465 6661 756c 745f  ', self.default_
-0002d8b0: 7365 7373 696f 6e5f 6672 6571 290d 0a20  session_freq).. 
-0002d8c0: 2020 2020 2020 2075 7064 6174 655f 7365         update_se
-0002d8d0: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
-0002d8e0: 6e64 7320 3d20 6b77 6172 6773 2e67 6574  nds = kwargs.get
-0002d8f0: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
-0002d900: 5f61 6674 6572 5f73 6563 6f6e 6473 272c  _after_seconds',
-0002d910: 2073 656c 662e 6465 6661 756c 745f 7365   self.default_se
-0002d920: 7373 696f 6e5f 7365 636f 6e64 7329 0d0a  ssion_seconds)..
-0002d930: 2020 2020 2020 2020 7365 6c66 2e63 6865          self.che
-0002d940: 636b 5f69 6e70 7574 5f6c 696d 6974 2871  ck_input_limit(q
-0002d950: 7565 7279 5f74 6578 742c 2073 656c 662e  uery_text, self.
-0002d960: 696e 7075 745f 6c69 6d69 7429 0d0a 0d0a  input_limit)....
-0002d970: 2020 2020 2020 2020 6e6f 745f 7570 6461          not_upda
-0002d980: 7465 5f63 6f6e 645f 6672 6571 203d 2031  te_cond_freq = 1
-0002d990: 2069 6620 7365 6c66 2e71 7565 7279 5f63   if self.query_c
-0002d9a0: 6f75 6e74 2025 2075 7064 6174 655f 7365  ount % update_se
-0002d9b0: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
-0002d9c0: 2021 3d20 3020 656c 7365 2030 0d0a 2020   != 0 else 0..  
-0002d9d0: 2020 2020 2020 6e6f 745f 7570 6461 7465        not_update
-0002d9e0: 5f63 6f6e 645f 7469 6d65 203d 2031 2069  _cond_time = 1 i
-0002d9f0: 6620 7469 6d65 2e74 696d 6528 2920 2d20  f time.time() - 
-0002da00: 7365 6c66 2e62 6567 696e 5f74 696d 6520  self.begin_time 
-0002da10: 3c20 7570 6461 7465 5f73 6573 7369 6f6e  < update_session
-0002da20: 5f61 6674 6572 5f73 6563 6f6e 6473 2065  _after_seconds e
-0002da30: 6c73 6520 300d 0a20 2020 2020 2020 2069  lse 0..        i
-0002da40: 6620 6e6f 7420 2873 656c 662e 7365 7373  f not (self.sess
-0002da50: 696f 6e20 616e 6420 7365 6c66 2e6c 616e  ion and self.lan
-0002da60: 6775 6167 655f 6d61 7020 616e 6420 6e6f  guage_map and no
-0002da70: 745f 7570 6461 7465 5f63 6f6e 645f 6672  t_update_cond_fr
-0002da80: 6571 2061 6e64 206e 6f74 5f75 7064 6174  eq and not_updat
-0002da90: 655f 636f 6e64 5f74 696d 6529 3a0d 0a20  e_cond_time):.. 
-0002daa0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0002dab0: 6265 6769 6e5f 7469 6d65 203d 2074 696d  begin_time = tim
-0002dac0: 652e 7469 6d65 2829 0d0a 2020 2020 2020  e.time()..      
-0002dad0: 2020 2020 2020 7365 6c66 2e73 6573 7369        self.sessi
-0002dae0: 6f6e 203d 2072 6571 7565 7374 732e 5365  on = requests.Se
-0002daf0: 7373 696f 6e28 290d 0a20 2020 2020 2020  ssion()..       
-0002db00: 2020 2020 205f 203d 2073 656c 662e 7365       _ = self.se
-0002db10: 7373 696f 6e2e 6765 7428 7365 6c66 2e68  ssion.get(self.h
-0002db20: 6f73 745f 7572 6c2c 2068 6561 6465 7273  ost_url, headers
-0002db30: 3d73 656c 662e 686f 7374 5f68 6561 6465  =self.host_heade
-0002db40: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
-0002db50: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
-0002db60: 7869 6573 290d 0a0d 0a20 2020 2020 2020  xies)....       
-0002db70: 2069 6620 6672 6f6d 5f6c 616e 6775 6167   if from_languag
-0002db80: 6520 3d3d 2027 6175 746f 273a 0d0a 2020  e == 'auto':..  
-0002db90: 2020 2020 2020 2020 2020 6672 6f6d 5f6c            from_l
-0002dba0: 616e 6775 6167 6520 3d20 7365 6c66 2e77  anguage = self.w
-0002dbb0: 6172 6e69 6e67 5f61 7574 6f5f 6c61 6e67  arning_auto_lang
-0002dbc0: 2827 6d67 6c69 7027 2c20 7365 6c66 2e64  ('mglip', self.d
-0002dbd0: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
-0002dbe0: 7561 6765 2c20 6966 5f70 7269 6e74 5f77  uage, if_print_w
-0002dbf0: 6172 6e69 6e67 290d 0a20 2020 2020 2020  arning)..       
-0002dc00: 2066 726f 6d5f 6c61 6e67 7561 6765 2c20   from_language, 
-0002dc10: 746f 5f6c 616e 6775 6167 6520 3d20 7365  to_language = se
-0002dc20: 6c66 2e63 6865 636b 5f6c 616e 6775 6167  lf.check_languag
-0002dc30: 6528 6672 6f6d 5f6c 616e 6775 6167 652c  e(from_language,
-0002dc40: 2074 6f5f 6c61 6e67 7561 6765 2c20 7365   to_language, se
-0002dc50: 6c66 2e6c 616e 6775 6167 655f 6d61 702c  lf.language_map,
-0002dc60: 206f 7574 7075 745f 7a68 3d73 656c 662e   output_zh=self.
-0002dc70: 6f75 7470 7574 5f7a 6829 0d0a 0d0a 2020  output_zh)....  
-0002dc80: 2020 2020 2020 7061 796c 6f61 6420 3d20        payload = 
-0002dc90: 7b27 7573 6572 496e 7075 7427 3a20 7175  {'userInput': qu
-0002dca0: 6572 795f 7465 7874 2c20 2766 726f 6d27  ery_text, 'from'
-0002dcb0: 3a20 6672 6f6d 5f6c 616e 6775 6167 652c  : from_language,
-0002dcc0: 2027 746f 273a 2074 6f5f 6c61 6e67 7561   'to': to_langua
-0002dcd0: 6765 7d0d 0a20 2020 2020 2020 2070 6179  ge}..        pay
-0002dce0: 6c6f 6164 203d 2075 726c 6c69 622e 7061  load = urllib.pa
-0002dcf0: 7273 652e 7572 6c65 6e63 6f64 6528 7061  rse.urlencode(pa
-0002dd00: 796c 6f61 6429 0d0a 2020 2020 2020 2020  yload)..        
-0002dd10: 7220 3d20 7365 6c66 2e73 6573 7369 6f6e  r = self.session
-0002dd20: 2e70 6f73 7428 7365 6c66 2e61 7069 5f75  .post(self.api_u
-0002dd30: 726c 2c20 6865 6164 6572 733d 7365 6c66  rl, headers=self
-0002dd40: 2e61 7069 5f68 6561 6465 7273 2c20 6461  .api_headers, da
-0002dd50: 7461 3d70 6179 6c6f 6164 2c20 7469 6d65  ta=payload, time
-0002dd60: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
-0002dd70: 7869 6573 3d70 726f 7869 6573 290d 0a20  xies=proxies).. 
-0002dd80: 2020 2020 2020 2072 2e72 6169 7365 5f66         r.raise_f
-0002dd90: 6f72 5f73 7461 7475 7328 290d 0a20 2020  or_status()..   
-0002dda0: 2020 2020 2064 6174 6120 3d20 722e 6a73       data = r.js
-0002ddb0: 6f6e 2829 0d0a 2020 2020 2020 2020 7469  on()..        ti
-0002ddc0: 6d65 2e73 6c65 6570 2873 6c65 6570 5f73  me.sleep(sleep_s
-0002ddd0: 6563 6f6e 6473 290d 0a20 2020 2020 2020  econds)..       
-0002dde0: 2073 656c 662e 7175 6572 795f 636f 756e   self.query_coun
-0002ddf0: 7420 2b3d 2031 0d0a 2020 2020 2020 2020  t += 1..        
-0002de00: 7265 7475 726e 2064 6174 6120 6966 2069  return data if i
-0002de10: 735f 6465 7461 696c 5f72 6573 756c 7420  s_detail_result 
-0002de20: 656c 7365 2064 6174 615b 2764 6174 6173  else data['datas
-0002de30: 275d 5b30 5d5b 2770 6172 6167 7261 7068  '][0]['paragraph
-0002de40: 275d 2069 6620 6461 7461 5b27 6461 7461  '] if data['data
-0002de50: 7327 5d5b 305d 5b27 7479 7065 275d 203d  s'][0]['type'] =
-0002de60: 3d20 2774 7261 6e73 2720 656c 7365 2064  = 'trans' else d
-0002de70: 6174 615b 2764 6174 6173 275d 5b30 5d5b  ata['datas'][0][
-0002de80: 2764 6174 6127 5d0d 0a0d 0a0d 0a63 6c61  'data']......cla
-0002de90: 7373 2056 6f6c 6345 6e67 696e 6528 5473  ss VolcEngine(Ts
-0002dea0: 6529 3a0d 0a20 2020 2064 6566 205f 5f69  e):..    def __i
-0002deb0: 6e69 745f 5f28 7365 6c66 293a 0d0a 2020  nit__(self):..  
-0002dec0: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
-0002ded0: 696e 6974 5f5f 2829 0d0a 2020 2020 2020  init__()..      
-0002dee0: 2020 7365 6c66 2e62 6567 696e 5f74 696d    self.begin_tim
-0002def0: 6520 3d20 7469 6d65 2e74 696d 6528 290d  e = time.time().
-0002df00: 0a20 2020 2020 2020 2073 656c 662e 686f  .        self.ho
-0002df10: 7374 5f75 726c 203d 2027 6874 7470 733a  st_url = 'https:
-0002df20: 2f2f 7472 616e 736c 6174 652e 766f 6c63  //translate.volc
-0002df30: 656e 6769 6e65 2e63 6f6d 270d 0a20 2020  engine.com'..   
-0002df40: 2020 2020 2073 656c 662e 6170 695f 7572       self.api_ur
-0002df50: 6c20 3d20 2768 7474 7073 3a2f 2f74 7261  l = 'https://tra
-0002df60: 6e73 6c61 7465 2e76 6f6c 6365 6e67 696e  nslate.volcengin
-0002df70: 652e 636f 6d2f 7765 622f 7472 616e 736c  e.com/web/transl
-0002df80: 6174 652f 7631 270d 0a20 2020 2020 2020  ate/v1'..       
-0002df90: 2073 656c 662e 686f 7374 5f68 6561 6465   self.host_heade
-0002dfa0: 7273 203d 2073 656c 662e 6765 745f 6865  rs = self.get_he
-0002dfb0: 6164 6572 7328 7365 6c66 2e68 6f73 745f  aders(self.host_
-0002dfc0: 7572 6c2c 2069 665f 6170 693d 4661 6c73  url, if_api=Fals
-0002dfd0: 6529 0d0a 2020 2020 2020 2020 7365 6c66  e)..        self
-0002dfe0: 2e61 7069 5f68 6561 6465 7273 203d 2073  .api_headers = s
-0002dff0: 656c 662e 6765 745f 6865 6164 6572 7328  elf.get_headers(
-0002e000: 7365 6c66 2e68 6f73 745f 7572 6c2c 2069  self.host_url, i
-0002e010: 665f 6170 693d 5472 7565 2c20 6966 5f6a  f_api=True, if_j
-0002e020: 736f 6e5f 666f 725f 6170 693d 5472 7565  son_for_api=True
-0002e030: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0002e040: 7365 7373 696f 6e20 3d20 4e6f 6e65 0d0a  session = None..
-0002e050: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
-0002e060: 6775 6167 655f 6d61 7020 3d20 4e6f 6e65  guage_map = None
-0002e070: 0d0a 2020 2020 2020 2020 7365 6c66 2e6d  ..        self.m
-0002e080: 735f 746f 6b65 6e20 3d20 2727 0d0a 2020  s_token = ''..  
-0002e090: 2020 2020 2020 7365 6c66 2e78 5f62 6f67        self.x_bog
-0002e0a0: 7573 203d 2027 4446 5323 746f 646f 270d  us = 'DFS#todo'.
-0002e0b0: 0a20 2020 2020 2020 2073 656c 662e 7369  .        self.si
-0002e0c0: 676e 6174 7572 6520 3d20 275f 3032 4223  gnature = '_02B#
-0002e0d0: 746f 646f 270d 0a20 2020 2020 2020 2073  todo'..        s
-0002e0e0: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
-0002e0f0: 3d20 300d 0a20 2020 2020 2020 2073 656c  = 0..        sel
-0002e100: 662e 6f75 7470 7574 5f61 7574 6f20 3d20  f.output_auto = 
-0002e110: 2764 6574 6563 7427 0d0a 2020 2020 2020  'detect'..      
-0002e120: 2020 7365 6c66 2e6f 7574 7075 745f 7a68    self.output_zh
-0002e130: 203d 2027 7a68 270d 0a20 2020 2020 2020   = 'zh'..       
-0002e140: 2073 656c 662e 696e 7075 745f 6c69 6d69   self.input_limi
-0002e150: 7420 3d20 696e 7428 3565 3329 0d0a 2020  t = int(5e3)..  
-0002e160: 2020 2020 2020 7365 6c66 2e64 6566 6175        self.defau
-0002e170: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
-0002e180: 203d 2073 656c 662e 6f75 7470 7574 5f7a   = self.output_z
-0002e190: 680d 0a0d 0a20 2020 2040 5473 652e 6465  h....    @Tse.de
-0002e1a0: 6275 675f 6c61 6e67 7561 6765 5f6d 6170  bug_language_map
-0002e1b0: 0d0a 2020 2020 6465 6620 6765 745f 6c61  ..    def get_la
-0002e1c0: 6e67 7561 6765 5f6d 6170 2873 656c 662c  nguage_map(self,
-0002e1d0: 2068 6f73 745f 6874 6d6c 3a20 7374 722c   host_html: str,
-0002e1e0: 202a 2a6b 7761 7267 733a 204c 616e 674d   **kwargs: LangM
-0002e1f0: 6170 4b77 6172 6773 5479 7065 2920 2d3e  apKwargsType) ->
-0002e200: 2064 6963 743a 0d0a 2020 2020 2020 2020   dict:..        
-0002e210: 6c61 6e67 5f6c 6973 7420 3d20 7265 2e63  lang_list = re.c
-0002e220: 6f6d 7069 6c65 2827 226c 616e 6775 6167  ompile('"languag
-0002e230: 655f 282e 2a3f 2922 3a27 292e 6669 6e64  e_(.*?)":').find
-0002e240: 616c 6c28 686f 7374 5f68 746d 6c29 0d0a  all(host_html)..
-0002e250: 2020 2020 2020 2020 6c61 6e67 5f6c 6973          lang_lis
-0002e260: 7420 3d20 736f 7274 6564 286c 6973 7428  t = sorted(list(
-0002e270: 7365 7428 6c61 6e67 5f6c 6973 7429 2929  set(lang_list)))
-0002e280: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-0002e290: 207b 7d2e 6672 6f6d 6b65 7973 286c 616e   {}.fromkeys(lan
-0002e2a0: 675f 6c69 7374 2c20 6c61 6e67 5f6c 6973  g_list, lang_lis
-0002e2b0: 7429 0d0a 0d0a 2020 2020 4070 726f 7065  t)....    @prope
-0002e2c0: 7274 790d 0a20 2020 2064 6566 2070 726f  rty..    def pro
-0002e2d0: 6665 7373 696f 6e61 6c5f 6669 656c 645f  fessional_field_
-0002e2e0: 6d61 7028 7365 6c66 2920 2d3e 2064 6963  map(self) -> dic
-0002e2f0: 743a 0d0a 2020 2020 2020 2020 6461 7461  t:..        data
-0002e300: 203d 207b 0d0a 2020 2020 2020 2020 2020   = {..          
-0002e310: 2020 2727 3a20 7b27 6361 7465 676f 7279    '': {'category
-0002e320: 273a 2027 272c 2027 676c 6f73 7361 7279  ': '', 'glossary
-0002e330: 5f6c 6973 7427 3a20 5b5d 7d2c 0d0a 2020  _list': []},..  
-0002e340: 2020 2020 2020 2020 2020 2763 6c65 616e            'clean
-0002e350: 273a 207b 2763 6174 6567 6f72 7927 3a20  ': {'category': 
-0002e360: 2763 6c65 616e 272c 2027 676c 6f73 7361  'clean', 'glossa
-0002e370: 7279 5f6c 6973 7427 3a20 5b5d 7d2c 0d0a  ry_list': []},..
-0002e380: 2020 2020 2020 2020 2020 2020 276e 6f76              'nov
-0002e390: 656c 273a 207b 2763 6174 6567 6f72 7927  el': {'category'
-0002e3a0: 3a20 276e 6f76 656c 272c 2027 676c 6f73  : 'novel', 'glos
-0002e3b0: 7361 7279 5f6c 6973 7427 3a20 5b5d 7d2c  sary_list': []},
-0002e3c0: 0d0a 2020 2020 2020 2020 2020 2020 2766  ..            'f
-0002e3d0: 696e 616e 6365 273a 207b 2763 6174 6567  inance': {'categ
-0002e3e0: 6f72 7927 3a20 2766 696e 616e 6365 272c  ory': 'finance',
-0002e3f0: 2027 676c 6f73 7361 7279 5f6c 6973 7427   'glossary_list'
-0002e400: 3a20 5b5d 7d2c 0d0a 2020 2020 2020 2020  : []},..        
-0002e410: 2020 2020 2762 696f 6d65 6469 6361 6c27      'biomedical'
-0002e420: 3a20 7b27 6361 7465 676f 7279 273a 2027  : {'category': '
-0002e430: 6269 6f6d 6564 6963 616c 272c 2027 676c  biomedical', 'gl
-0002e440: 6f73 7361 7279 5f6c 6973 7427 3a20 5b5d  ossary_list': []
-0002e450: 7d2c 0d0a 0d0a 2020 2020 2020 2020 2020  },....          
-0002e460: 2020 2761 6927 3a20 7b27 6361 7465 676f    'ai': {'catego
-0002e470: 7279 273a 2027 272c 2027 676c 6f73 7361  ry': '', 'glossa
-0002e480: 7279 5f6c 6973 7427 3a20 5b27 6169 6c61  ry_list': ['aila
-0002e490: 622f 6169 275d 7d2c 0d0a 2020 2020 2020  b/ai']},..      
-0002e4a0: 2020 2020 2020 276d 656e 7527 3a20 7b27        'menu': {'
-0002e4b0: 6361 7465 676f 7279 273a 2027 272c 2027  category': '', '
-0002e4c0: 676c 6f73 7361 7279 5f6c 6973 7427 3a20  glossary_list': 
-0002e4d0: 5b27 6169 6c61 622f 6d65 6e75 275d 7d2c  ['ailab/menu']},
-0002e4e0: 0d0a 2020 2020 2020 2020 2020 2020 2774  ..            't
-0002e4f0: 6563 6866 6972 6d27 3a20 7b27 6361 7465  echfirm': {'cate
-0002e500: 676f 7279 273a 2027 272c 2027 676c 6f73  gory': '', 'glos
-0002e510: 7361 7279 5f6c 6973 7427 3a20 5b27 6169  sary_list': ['ai
-0002e520: 6c61 622f 7465 6368 6669 726d 275d 7d2c  lab/techfirm']},
-0002e530: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002e540: 2765 636f 6d6d 6572 6365 273a 207b 2763  'ecommerce': {'c
-0002e550: 6174 6567 6f72 7927 3a20 2765 636f 6d6d  ategory': 'ecomm
-0002e560: 6572 6365 272c 2027 676c 6f73 7361 7279  erce', 'glossary
-0002e570: 5f6c 6973 7427 3a20 5b27 6169 6c61 622f  _list': ['ailab/
-0002e580: 6563 6f6d 6d65 7263 6527 5d7d 2c0d 0a20  ecommerce']},.. 
-0002e590: 2020 2020 2020 2020 2020 2027 7465 6368             'tech
-0002e5a0: 6e69 7175 6527 3a20 7b27 6361 7465 676f  nique': {'catego
-0002e5b0: 7279 273a 2027 7465 6368 6e69 7175 6527  ry': 'technique'
-0002e5c0: 2c20 2767 6c6f 7373 6172 795f 6c69 7374  , 'glossary_list
-0002e5d0: 273a 205b 2761 696c 6162 2f74 6563 686e  ': ['ailab/techn
-0002e5e0: 6971 7565 275d 7d2c 0d0a 2020 2020 2020  ique']},..      
-0002e5f0: 2020 7d0d 0a20 2020 2020 2020 2072 6574    }..        ret
-0002e600: 7572 6e20 6461 7461 0d0a 0d0a 2020 2020  urn data....    
-0002e610: 4054 7365 2e75 6e63 6572 7469 6669 6564  @Tse.uncertified
-0002e620: 0d0a 2020 2020 4054 7365 2e74 696d 655f  ..    @Tse.time_
-0002e630: 7374 6174 0d0a 2020 2020 4054 7365 2e63  stat..    @Tse.c
-0002e640: 6865 636b 5f71 7565 7279 0d0a 2020 2020  heck_query..    
-0002e650: 6465 6620 766f 6c63 456e 6769 6e65 5f61  def volcEngine_a
-0002e660: 7069 2873 656c 662c 2071 7565 7279 5f74  pi(self, query_t
-0002e670: 6578 743a 2073 7472 2c20 6672 6f6d 5f6c  ext: str, from_l
-0002e680: 616e 6775 6167 653a 2073 7472 203d 2027  anguage: str = '
-0002e690: 6175 746f 272c 2074 6f5f 6c61 6e67 7561  auto', to_langua
-0002e6a0: 6765 3a20 7374 7220 3d20 2765 6e27 2c20  ge: str = 'en', 
-0002e6b0: 2a2a 6b77 6172 6773 3a20 4170 694b 7761  **kwargs: ApiKwa
-0002e6c0: 7267 7354 7970 6529 202d 3e20 556e 696f  rgsType) -> Unio
-0002e6d0: 6e5b 7374 722c 2064 6963 745d 3a0d 0a20  n[str, dict]:.. 
-0002e6e0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-0002e6f0: 2020 2020 6874 7470 733a 2f2f 7472 616e      https://tran
-0002e700: 736c 6174 652e 766f 6c63 656e 6769 6e65  slate.volcengine
-0002e710: 2e63 6f6d 0d0a 2020 2020 2020 2020 3a70  .com..        :p
-0002e720: 6172 616d 2071 7565 7279 5f74 6578 743a  aram query_text:
-0002e730: 2073 7472 2c20 6d75 7374 2e0d 0a20 2020   str, must...   
-0002e740: 2020 2020 203a 7061 7261 6d20 6672 6f6d       :param from
-0002e750: 5f6c 616e 6775 6167 653a 2073 7472 2c20  _language: str, 
-0002e760: 6465 6661 756c 7420 2761 7574 6f27 2e0d  default 'auto'..
-0002e770: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0002e780: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
-0002e790: 2c20 6465 6661 756c 7420 2765 6e27 2e0d  , default 'en'..
-0002e7a0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0002e7b0: 2a2a 6b77 6172 6773 3a0d 0a20 2020 2020  **kwargs:..     
-0002e7c0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-0002e7d0: 6d20 7469 6d65 6f75 743a 2066 6c6f 6174  m timeout: float
-0002e7e0: 2c20 6465 6661 756c 7420 4e6f 6e65 2e0d  , default None..
-0002e7f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002e800: 203a 7061 7261 6d20 7072 6f78 6965 733a   :param proxies:
-0002e810: 2064 6963 742c 2064 6566 6175 6c74 204e   dict, default N
-0002e820: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
-0002e830: 2020 2020 2020 3a70 6172 616d 2073 6c65        :param sle
-0002e840: 6570 5f73 6563 6f6e 6473 3a20 666c 6f61  ep_seconds: floa
-0002e850: 742c 2064 6566 6175 6c74 2030 2e0d 0a20  t, default 0... 
-0002e860: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0002e870: 7061 7261 6d20 6973 5f64 6574 6169 6c5f  param is_detail_
-0002e880: 7265 7375 6c74 3a20 626f 6f6c 2c20 6465  result: bool, de
-0002e890: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
-0002e8a0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-0002e8b0: 6172 616d 2069 665f 6967 6e6f 7265 5f6c  aram if_ignore_l
-0002e8c0: 696d 6974 5f6f 665f 6c65 6e67 7468 3a20  imit_of_length: 
-0002e8d0: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
-0002e8e0: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
-0002e8f0: 2020 2020 2020 3a70 6172 616d 206c 696d        :param lim
-0002e900: 6974 5f6f 665f 6c65 6e67 7468 3a20 696e  it_of_length: in
-0002e910: 742c 2064 6566 6175 6c74 2032 3030 3030  t, default 20000
-0002e920: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0002e930: 2020 203a 7061 7261 6d20 6966 5f69 676e     :param if_ign
-0002e940: 6f72 655f 656d 7074 795f 7175 6572 793a  ore_empty_query:
-0002e950: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
-0002e960: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
-0002e970: 2020 2020 2020 203a 7061 7261 6d20 7570         :param up
-0002e980: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-0002e990: 6572 5f66 7265 713a 2069 6e74 2c20 6465  er_freq: int, de
-0002e9a0: 6661 756c 7420 3130 3030 2e0d 0a20 2020  fault 1000...   
-0002e9b0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-0002e9c0: 7261 6d20 7570 6461 7465 5f73 6573 7369  ram update_sessi
-0002e9d0: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-0002e9e0: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
-0002e9f0: 2031 3530 302e 0d0a 2020 2020 2020 2020   1500...        
-0002ea00: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-0002ea10: 665f 7368 6f77 5f74 696d 655f 7374 6174  f_show_time_stat
-0002ea20: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-0002ea30: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
-0002ea40: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-0002ea50: 686f 775f 7469 6d65 5f73 7461 745f 7072  how_time_stat_pr
-0002ea60: 6563 6973 696f 6e3a 2069 6e74 2c20 6465  ecision: int, de
-0002ea70: 6661 756c 7420 322e 0d0a 2020 2020 2020  fault 2...      
-0002ea80: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0002ea90: 2069 665f 7072 696e 745f 7761 726e 696e   if_print_warnin
-0002eaa0: 673a 2062 6f6f 6c2c 2064 6566 6175 6c74  g: bool, default
-0002eab0: 2054 7275 652e 0d0a 2020 2020 2020 2020   True...        
-0002eac0: 2020 2020 2020 2020 3a70 6172 616d 2070          :param p
-0002ead0: 726f 6665 7373 696f 6e61 6c5f 6669 656c  rofessional_fiel
-0002eae0: 643a 2073 7472 2c20 6465 6661 756c 7420  d: str, default 
-0002eaf0: 2727 2c20 6368 6f6f 7365 2066 726f 6d20  '', choose from 
-0002eb00: 2827 272c 2027 636c 6561 6e27 290d 0a20  ('', 'clean').. 
-0002eb10: 2020 2020 2020 203a 7265 7475 726e 3a20         :return: 
-0002eb20: 7374 7220 6f72 2064 6963 740d 0a20 2020  str or dict..   
-0002eb30: 2020 2020 2022 2222 0d0a 0d0a 2020 2020       """....    
-0002eb40: 2020 2020 7573 655f 646f 6d61 696e 203d      use_domain =
-0002eb50: 206b 7761 7267 732e 6765 7428 2770 726f   kwargs.get('pro
-0002eb60: 6665 7373 696f 6e61 6c5f 6669 656c 6427  fessional_field'
-0002eb70: 2c20 2727 290d 0a20 2020 2020 2020 2069  , '')..        i
-0002eb80: 6620 7573 655f 646f 6d61 696e 206e 6f74  f use_domain not
-0002eb90: 2069 6e20 7365 6c66 2e70 726f 6665 7373   in self.profess
-0002eba0: 696f 6e61 6c5f 6669 656c 645f 6d61 703a  ional_field_map:
-0002ebb0: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
-0002ebc0: 6973 6520 5472 616e 736c 6174 6f72 4572  ise TranslatorEr
-0002ebd0: 726f 720d 0a0d 0a20 2020 2020 2020 2074  ror....        t
-0002ebe0: 696d 656f 7574 203d 206b 7761 7267 732e  imeout = kwargs.
-0002ebf0: 6765 7428 2774 696d 656f 7574 272c 204e  get('timeout', N
-0002ec00: 6f6e 6529 0d0a 2020 2020 2020 2020 7072  one)..        pr
-0002ec10: 6f78 6965 7320 3d20 6b77 6172 6773 2e67  oxies = kwargs.g
-0002ec20: 6574 2827 7072 6f78 6965 7327 2c20 4e6f  et('proxies', No
-0002ec30: 6e65 290d 0a20 2020 2020 2020 2073 6c65  ne)..        sle
-0002ec40: 6570 5f73 6563 6f6e 6473 203d 206b 7761  ep_seconds = kwa
-0002ec50: 7267 732e 6765 7428 2773 6c65 6570 5f73  rgs.get('sleep_s
-0002ec60: 6563 6f6e 6473 272c 2030 290d 0a20 2020  econds', 0)..   
-0002ec70: 2020 2020 2069 665f 7072 696e 745f 7761       if_print_wa
-0002ec80: 726e 696e 6720 3d20 6b77 6172 6773 2e67  rning = kwargs.g
-0002ec90: 6574 2827 6966 5f70 7269 6e74 5f77 6172  et('if_print_war
-0002eca0: 6e69 6e67 272c 2054 7275 6529 0d0a 2020  ning', True)..  
-0002ecb0: 2020 2020 2020 6973 5f64 6574 6169 6c5f        is_detail_
-0002ecc0: 7265 7375 6c74 203d 206b 7761 7267 732e  result = kwargs.
-0002ecd0: 6765 7428 2769 735f 6465 7461 696c 5f72  get('is_detail_r
-0002ece0: 6573 756c 7427 2c20 4661 6c73 6529 0d0a  esult', False)..
-0002ecf0: 2020 2020 2020 2020 7570 6461 7465 5f73          update_s
-0002ed00: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
-0002ed10: 7120 3d20 6b77 6172 6773 2e67 6574 2827  q = kwargs.get('
-0002ed20: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
-0002ed30: 6674 6572 5f66 7265 7127 2c20 7365 6c66  fter_freq', self
-0002ed40: 2e64 6566 6175 6c74 5f73 6573 7369 6f6e  .default_session
-0002ed50: 5f66 7265 7129 0d0a 2020 2020 2020 2020  _freq)..        
-0002ed60: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
-0002ed70: 6674 6572 5f73 6563 6f6e 6473 203d 206b  fter_seconds = k
-0002ed80: 7761 7267 732e 6765 7428 2775 7064 6174  wargs.get('updat
-0002ed90: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
-0002eda0: 7365 636f 6e64 7327 2c20 7365 6c66 2e64  seconds', self.d
-0002edb0: 6566 6175 6c74 5f73 6573 7369 6f6e 5f73  efault_session_s
-0002edc0: 6563 6f6e 6473 290d 0a20 2020 2020 2020  econds)..       
-0002edd0: 2073 656c 662e 6368 6563 6b5f 696e 7075   self.check_inpu
-0002ede0: 745f 6c69 6d69 7428 7175 6572 795f 7465  t_limit(query_te
-0002edf0: 7874 2c20 7365 6c66 2e69 6e70 7574 5f6c  xt, self.input_l
-0002ee00: 696d 6974 290d 0a0d 0a20 2020 2020 2020  imit)....       
-0002ee10: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
-0002ee20: 5f66 7265 7120 3d20 3120 6966 2073 656c  _freq = 1 if sel
-0002ee30: 662e 7175 6572 795f 636f 756e 7420 2520  f.query_count % 
-0002ee40: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
-0002ee50: 6674 6572 5f66 7265 7120 213d 2030 2065  fter_freq != 0 e
-0002ee60: 6c73 6520 300d 0a20 2020 2020 2020 206e  lse 0..        n
-0002ee70: 6f74 5f75 7064 6174 655f 636f 6e64 5f74  ot_update_cond_t
-0002ee80: 696d 6520 3d20 3120 6966 2074 696d 652e  ime = 1 if time.
-0002ee90: 7469 6d65 2829 202d 2073 656c 662e 6265  time() - self.be
-0002eea0: 6769 6e5f 7469 6d65 203c 2075 7064 6174  gin_time < updat
-0002eeb0: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
-0002eec0: 7365 636f 6e64 7320 656c 7365 2030 0d0a  seconds else 0..
-0002eed0: 2020 2020 2020 2020 6966 206e 6f74 2028          if not (
-0002eee0: 7365 6c66 2e73 6573 7369 6f6e 2061 6e64  self.session and
-0002eef0: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
-0002ef00: 6170 2061 6e64 206e 6f74 5f75 7064 6174  ap and not_updat
-0002ef10: 655f 636f 6e64 5f66 7265 7120 616e 6420  e_cond_freq and 
-0002ef20: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
-0002ef30: 7469 6d65 293a 0d0a 2020 2020 2020 2020  time):..        
-0002ef40: 2020 2020 7365 6c66 2e62 6567 696e 5f74      self.begin_t
-0002ef50: 696d 6520 3d20 7469 6d65 2e74 696d 6528  ime = time.time(
-0002ef60: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-0002ef70: 656c 662e 7365 7373 696f 6e20 3d20 7265  elf.session = re
-0002ef80: 7175 6573 7473 2e53 6573 7369 6f6e 2829  quests.Session()
-0002ef90: 0d0a 2020 2020 2020 2020 2020 2020 686f  ..            ho
-0002efa0: 7374 5f68 746d 6c20 3d20 7365 6c66 2e73  st_html = self.s
-0002efb0: 6573 7369 6f6e 2e67 6574 2873 656c 662e  ession.get(self.
-0002efc0: 686f 7374 5f75 726c 2c20 6865 6164 6572  host_url, header
-0002efd0: 733d 7365 6c66 2e68 6f73 745f 6865 6164  s=self.host_head
-0002efe0: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
-0002eff0: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
-0002f000: 6f78 6965 7329 2e74 6578 740d 0a20 2020  oxies).text..   
-0002f010: 2020 2020 2020 2020 2064 6562 7567 5f6c           debug_l
-0002f020: 616e 675f 6b77 6172 6773 203d 2073 656c  ang_kwargs = sel
-0002f030: 662e 6465 6275 675f 6c61 6e67 5f6b 7761  f.debug_lang_kwa
-0002f040: 7267 7328 6672 6f6d 5f6c 616e 6775 6167  rgs(from_languag
-0002f050: 652c 2074 6f5f 6c61 6e67 7561 6765 2c20  e, to_language, 
-0002f060: 7365 6c66 2e64 6566 6175 6c74 5f66 726f  self.default_fro
-0002f070: 6d5f 6c61 6e67 7561 6765 2c20 6966 5f70  m_language, if_p
-0002f080: 7269 6e74 5f77 6172 6e69 6e67 290d 0a20  rint_warning).. 
-0002f090: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0002f0a0: 6c61 6e67 7561 6765 5f6d 6170 203d 2073  language_map = s
-0002f0b0: 656c 662e 6765 745f 6c61 6e67 7561 6765  elf.get_language
-0002f0c0: 5f6d 6170 2868 6f73 745f 6874 6d6c 2c20  _map(host_html, 
-0002f0d0: 2a2a 6465 6275 675f 6c61 6e67 5f6b 7761  **debug_lang_kwa
-0002f0e0: 7267 7329 0d0a 0d0a 2020 2020 2020 2020  rgs)....        
-0002f0f0: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
-0002f100: 6f5f 6c61 6e67 7561 6765 203d 2073 656c  o_language = sel
-0002f110: 662e 6368 6563 6b5f 6c61 6e67 7561 6765  f.check_language
-0002f120: 2866 726f 6d5f 6c61 6e67 7561 6765 2c20  (from_language, 
-0002f130: 746f 5f6c 616e 6775 6167 652c 2073 656c  to_language, sel
-0002f140: 662e 6c61 6e67 7561 6765 5f6d 6170 2c0d  f.language_map,.
-0002f150: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f180: 2020 2020 2020 2020 2020 6f75 7470 7574            output
-0002f190: 5f61 7574 6f3d 7365 6c66 2e6f 7574 7075  _auto=self.outpu
-0002f1a0: 745f 6175 746f 2c20 6f75 7470 7574 5f7a  t_auto, output_z
-0002f1b0: 683d 7365 6c66 2e6f 7574 7075 745f 7a68  h=self.output_zh
-0002f1c0: 290d 0a20 2020 2020 2020 2070 6172 616d  )..        param
-0002f1d0: 7320 3d20 7b0d 0a20 2020 2020 2020 2020  s = {..         
-0002f1e0: 2020 2027 6d73 546f 6b65 6e27 3a20 7365     'msToken': se
-0002f1f0: 6c66 2e6d 735f 746f 6b65 6e2c 0d0a 2020  lf.ms_token,..  
-0002f200: 2020 2020 2020 2020 2020 2758 2d42 6f67            'X-Bog
-0002f210: 7573 273a 2073 656c 662e 785f 626f 6775  us': self.x_bogu
-0002f220: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-0002f230: 275f 7369 676e 6174 7572 6527 3a20 7365  '_signature': se
-0002f240: 6c66 2e73 6967 6e61 7475 7265 2c0d 0a20  lf.signature,.. 
-0002f250: 2020 2020 2020 207d 0d0a 2020 2020 2020         }..      
-0002f260: 2020 7061 796c 6f61 6420 3d20 7b0d 0a20    payload = {.. 
-0002f270: 2020 2020 2020 2020 2020 2027 7465 7874             'text
-0002f280: 273a 2071 7565 7279 5f74 6578 742c 0d0a  ': query_text,..
-0002f290: 2020 2020 2020 2020 2020 2020 2773 6f75              'sou
-0002f2a0: 7263 655f 6c61 6e67 7561 6765 273a 2066  rce_language': f
-0002f2b0: 726f 6d5f 6c61 6e67 7561 6765 2c0d 0a20  rom_language,.. 
-0002f2c0: 2020 2020 2020 2020 2020 2027 7461 7267             'targ
-0002f2d0: 6574 5f6c 616e 6775 6167 6527 3a20 746f  et_language': to
-0002f2e0: 5f6c 616e 6775 6167 652c 0d0a 2020 2020  _language,..    
-0002f2f0: 2020 2020 2020 2020 2768 6f6d 655f 6c61          'home_la
-0002f300: 6e67 7561 6765 273a 2027 7a68 272c 0d0a  nguage': 'zh',..
-0002f310: 2020 2020 2020 2020 2020 2020 2765 6e61              'ena
-0002f320: 626c 655f 7573 6572 5f67 6c6f 7373 6172  ble_user_glossar
-0002f330: 7927 3a20 2766 616c 7365 272c 0d0a 2020  y': 'false',..  
-0002f340: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
-0002f350: 2070 6179 6c6f 6164 2e75 7064 6174 6528   payload.update(
-0002f360: 7365 6c66 2e70 726f 6665 7373 696f 6e61  self.professiona
-0002f370: 6c5f 6669 656c 645f 6d61 705b 7573 655f  l_field_map[use_
-0002f380: 646f 6d61 696e 5d29 0d0a 2020 2020 2020  domain])..      
-0002f390: 2020 7220 3d20 7365 6c66 2e73 6573 7369    r = self.sessi
-0002f3a0: 6f6e 2e70 6f73 7428 7365 6c66 2e61 7069  on.post(self.api
-0002f3b0: 5f75 726c 2c20 7061 7261 6d73 3d70 6172  _url, params=par
-0002f3c0: 616d 732c 206a 736f 6e3d 7061 796c 6f61  ams, json=payloa
-0002f3d0: 642c 2068 6561 6465 7273 3d73 656c 662e  d, headers=self.
-0002f3e0: 6170 695f 6865 6164 6572 732c 2074 696d  api_headers, tim
-0002f3f0: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
-0002f400: 6f78 6965 733d 7072 6f78 6965 7329 0d0a  oxies=proxies)..
-0002f410: 2020 2020 2020 2020 722e 7261 6973 655f          r.raise_
-0002f420: 666f 725f 7374 6174 7573 2829 0d0a 2020  for_status()..  
-0002f430: 2020 2020 2020 6461 7461 203d 2072 2e6a        data = r.j
-0002f440: 736f 6e28 290d 0a20 2020 2020 2020 2074  son()..        t
-0002f450: 696d 652e 736c 6565 7028 736c 6565 705f  ime.sleep(sleep_
-0002f460: 7365 636f 6e64 7329 0d0a 2020 2020 2020  seconds)..      
-0002f470: 2020 7365 6c66 2e71 7565 7279 5f63 6f75    self.query_cou
-0002f480: 6e74 202b 3d20 310d 0a20 2020 2020 2020  nt += 1..       
-0002f490: 2072 6574 7572 6e20 6461 7461 2069 6620   return data if 
-0002f4a0: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
-0002f4b0: 2065 6c73 6520 6461 7461 5b27 7472 616e   else data['tran
-0002f4c0: 736c 6174 696f 6e27 5d0d 0a0d 0a0d 0a63  slation']......c
-0002f4d0: 6c61 7373 204d 6f64 6572 6e4d 7428 5473  lass ModernMt(Ts
-0002f4e0: 6529 3a0d 0a20 2020 2064 6566 205f 5f69  e):..    def __i
-0002f4f0: 6e69 745f 5f28 7365 6c66 293a 0d0a 2020  nit__(self):..  
-0002f500: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
-0002f510: 696e 6974 5f5f 2829 0d0a 2020 2020 2020  init__()..      
-0002f520: 2020 7365 6c66 2e62 6567 696e 5f74 696d    self.begin_tim
-0002f530: 6520 3d20 7469 6d65 2e74 696d 6528 290d  e = time.time().
-0002f540: 0a20 2020 2020 2020 2073 656c 662e 686f  .        self.ho
-0002f550: 7374 5f75 726c 203d 2027 6874 7470 733a  st_url = 'https:
-0002f560: 2f2f 7777 772e 6d6f 6465 726e 6d74 2e63  //www.modernmt.c
-0002f570: 6f6d 2f74 7261 6e73 6c61 7465 270d 0a20  om/translate'.. 
-0002f580: 2020 2020 2020 2073 656c 662e 6170 695f         self.api_
-0002f590: 7572 6c20 3d20 2768 7474 7073 3a2f 2f77  url = 'https://w
-0002f5a0: 6562 6170 692e 6d6f 6465 726e 6d74 2e63  ebapi.modernmt.c
-0002f5b0: 6f6d 2f74 7261 6e73 6c61 7465 270d 0a20  om/translate'.. 
-0002f5c0: 2020 2020 2020 2073 656c 662e 6c61 6e67         self.lang
-0002f5d0: 7561 6765 5f75 726c 203d 2027 6874 7470  uage_url = 'http
-0002f5e0: 733a 2f2f 7777 772e 6d6f 6465 726e 6d74  s://www.modernmt
-0002f5f0: 2e63 6f6d 2f73 6372 6970 7473 2f61 7070  .com/scripts/app
-0002f600: 2e62 756e 646c 652e 6a73 270d 0a20 2020  .bundle.js'..   
-0002f610: 2020 2020 2073 656c 662e 686f 7374 5f68       self.host_h
-0002f620: 6561 6465 7273 203d 2073 656c 662e 6765  eaders = self.ge
-0002f630: 745f 6865 6164 6572 7328 7365 6c66 2e68  t_headers(self.h
-0002f640: 6f73 745f 7572 6c2c 2069 665f 6170 693d  ost_url, if_api=
-0002f650: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
-0002f660: 7365 6c66 2e61 7069 5f68 6561 6465 7273  self.api_headers
-0002f670: 203d 2073 656c 662e 6765 745f 6865 6164   = self.get_head
-0002f680: 6572 7328 7365 6c66 2e68 6f73 745f 7572  ers(self.host_ur
-0002f690: 6c2c 2069 665f 6170 693d 5472 7565 2c20  l, if_api=True, 
-0002f6a0: 6966 5f6a 736f 6e5f 666f 725f 6170 693d  if_json_for_api=
-0002f6b0: 5472 7565 2c20 6966 5f68 7474 705f 6f76  True, if_http_ov
-0002f6c0: 6572 7269 6465 5f66 6f72 5f61 7069 3d54  erride_for_api=T
-0002f6d0: 7275 6529 0d0a 2020 2020 2020 2020 7365  rue)..        se
-0002f6e0: 6c66 2e73 6573 7369 6f6e 203d 204e 6f6e  lf.session = Non
-0002f6f0: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
-0002f700: 6c61 6e67 7561 6765 5f6d 6170 203d 204e  language_map = N
-0002f710: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
-0002f720: 662e 7175 6572 795f 636f 756e 7420 3d20  f.query_count = 
-0002f730: 300d 0a20 2020 2020 2020 2073 656c 662e  0..        self.
-0002f740: 6f75 7470 7574 5f7a 6820 3d20 277a 682d  output_zh = 'zh-
-0002f750: 434e 270d 0a20 2020 2020 2020 2073 656c  CN'..        sel
-0002f760: 662e 696e 7075 745f 6c69 6d69 7420 3d20  f.input_limit = 
-0002f770: 696e 7428 3565 3329 0d0a 2020 2020 2020  int(5e3)..      
-0002f780: 2020 7365 6c66 2e64 6566 6175 6c74 5f66    self.default_f
-0002f790: 726f 6d5f 6c61 6e67 7561 6765 203d 2073  rom_language = s
-0002f7a0: 656c 662e 6f75 7470 7574 5f7a 680d 0a0d  elf.output_zh...
-0002f7b0: 0a20 2020 2040 5473 652e 6465 6275 675f  .    @Tse.debug_
-0002f7c0: 6c61 6e67 7561 6765 5f6d 6170 0d0a 2020  language_map..  
-0002f7d0: 2020 6465 6620 6765 745f 6c61 6e67 7561    def get_langua
-0002f7e0: 6765 5f6d 6170 2873 656c 662c 206c 616e  ge_map(self, lan
-0002f7f0: 675f 7572 6c3a 2073 7472 2c20 7373 3a20  g_url: str, ss: 
-0002f800: 5365 7373 696f 6e54 7970 652c 2068 6561  SessionType, hea
-0002f810: 6465 7273 3a20 6469 6374 2c20 7469 6d65  ders: dict, time
-0002f820: 6f75 743a 204f 7074 696f 6e61 6c5b 666c  out: Optional[fl
-0002f830: 6f61 745d 2c20 7072 6f78 6965 733a 204f  oat], proxies: O
-0002f840: 7074 696f 6e61 6c5b 6469 6374 5d2c 202a  ptional[dict], *
-0002f850: 2a6b 7761 7267 733a 204c 616e 674d 6170  *kwargs: LangMap
-0002f860: 4b77 6172 6773 5479 7065 2920 2d3e 2064  KwargsType) -> d
-0002f870: 6963 743a 0d0a 2020 2020 2020 2020 6c61  ict:..        la
-0002f880: 6e67 5f68 746d 6c20 3d20 7373 2e67 6574  ng_html = ss.get
-0002f890: 286c 616e 675f 7572 6c2c 2068 6561 6465  (lang_url, heade
-0002f8a0: 7273 3d68 6561 6465 7273 2c20 7469 6d65  rs=headers, time
-0002f8b0: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
-0002f8c0: 7869 6573 3d70 726f 7869 6573 292e 7465  xies=proxies).te
-0002f8d0: 7874 0d0a 2020 2020 2020 2020 645f 6c61  xt..        d_la
-0002f8e0: 6e67 5f6d 6170 203d 206a 736f 6e2e 6c6f  ng_map = json.lo
-0002f8f0: 6164 7328 7265 2e63 6f6d 7069 6c65 2827  ads(re.compile('
-0002f900: 2727 2827 7b28 2e2a 3f29 7d27 2927 2727  ''('{(.*?)}')'''
-0002f910: 292e 7365 6172 6368 286c 616e 675f 6874  ).search(lang_ht
-0002f920: 6d6c 292e 6772 6f75 7028 3029 5b31 3a2d  ml).group(0)[1:-
-0002f930: 315d 290d 0a20 2020 2020 2020 206c 616e  1])..        lan
-0002f940: 675f 6c69 7374 203d 2073 6f72 7465 6428  g_list = sorted(
-0002f950: 645f 6c61 6e67 5f6d 6170 2e6b 6579 7328  d_lang_map.keys(
-0002f960: 2929 0d0a 2020 2020 2020 2020 7265 7475  ))..        retu
-0002f970: 726e 207b 7d2e 6672 6f6d 6b65 7973 286c  rn {}.fromkeys(l
-0002f980: 616e 675f 6c69 7374 2c20 6c61 6e67 5f6c  ang_list, lang_l
-0002f990: 6973 7429 0d0a 0d0a 2020 2020 4054 7365  ist)....    @Tse
-0002f9a0: 2e74 696d 655f 7374 6174 0d0a 2020 2020  .time_stat..    
-0002f9b0: 4054 7365 2e63 6865 636b 5f71 7565 7279  @Tse.check_query
-0002f9c0: 0d0a 2020 2020 6465 6620 6d6f 6465 726e  ..    def modern
-0002f9d0: 4d74 5f61 7069 2873 656c 662c 2071 7565  Mt_api(self, que
-0002f9e0: 7279 5f74 6578 743a 2073 7472 2c20 6672  ry_text: str, fr
-0002f9f0: 6f6d 5f6c 616e 6775 6167 653a 2073 7472  om_language: str
-0002fa00: 203d 2027 6175 746f 272c 2074 6f5f 6c61   = 'auto', to_la
-0002fa10: 6e67 7561 6765 3a20 7374 7220 3d20 2765  nguage: str = 'e
-0002fa20: 6e27 2c20 2a2a 6b77 6172 6773 3a20 4170  n', **kwargs: Ap
-0002fa30: 694b 7761 7267 7354 7970 6529 202d 3e20  iKwargsType) -> 
-0002fa40: 556e 696f 6e5b 7374 722c 2064 6963 745d  Union[str, dict]
-0002fa50: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-0002fa60: 2020 2020 2020 2020 6874 7470 733a 2f2f          https://
-0002fa70: 7777 772e 6d6f 6465 726e 6d74 2e63 6f6d  www.modernmt.com
-0002fa80: 2f74 7261 6e73 6c61 7465 0d0a 2020 2020  /translate..    
-0002fa90: 2020 2020 3a70 6172 616d 2071 7565 7279      :param query
-0002faa0: 5f74 6578 743a 2073 7472 2c20 6d75 7374  _text: str, must
-0002fab0: 2e0d 0a20 2020 2020 2020 203a 7061 7261  ...        :para
-0002fac0: 6d20 6672 6f6d 5f6c 616e 6775 6167 653a  m from_language:
-0002fad0: 2073 7472 2c20 6465 6661 756c 7420 2761   str, default 'a
-0002fae0: 7574 6f27 2e0d 0a20 2020 2020 2020 203a  uto'...        :
-0002faf0: 7061 7261 6d20 746f 5f6c 616e 6775 6167  param to_languag
-0002fb00: 653a 2073 7472 2c20 6465 6661 756c 7420  e: str, default 
-0002fb10: 2765 6e27 2e0d 0a20 2020 2020 2020 203a  'en'...        :
-0002fb20: 7061 7261 6d20 2a2a 6b77 6172 6773 3a0d  param **kwargs:.
-0002fb30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002fb40: 203a 7061 7261 6d20 7469 6d65 6f75 743a   :param timeout:
-0002fb50: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
-0002fb60: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
-0002fb70: 2020 2020 2020 203a 7061 7261 6d20 7072         :param pr
-0002fb80: 6f78 6965 733a 2064 6963 742c 2064 6566  oxies: dict, def
-0002fb90: 6175 6c74 204e 6f6e 652e 0d0a 2020 2020  ault None...    
-0002fba0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0002fbb0: 616d 2073 6c65 6570 5f73 6563 6f6e 6473  am sleep_seconds
-0002fbc0: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
-0002fbd0: 2030 2e0d 0a20 2020 2020 2020 2020 2020   0...           
-0002fbe0: 2020 2020 203a 7061 7261 6d20 6973 5f64       :param is_d
-0002fbf0: 6574 6169 6c5f 7265 7375 6c74 3a20 626f  etail_result: bo
-0002fc00: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
-0002fc10: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-0002fc20: 2020 2020 3a70 6172 616d 2069 665f 6967      :param if_ig
-0002fc30: 6e6f 7265 5f6c 696d 6974 5f6f 665f 6c65  nore_limit_of_le
-0002fc40: 6e67 7468 3a20 626f 6f6c 2c20 6465 6661  ngth: bool, defa
-0002fc50: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-0002fc60: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0002fc70: 616d 206c 696d 6974 5f6f 665f 6c65 6e67  am limit_of_leng
-0002fc80: 7468 3a20 696e 742c 2064 6566 6175 6c74  th: int, default
-0002fc90: 2032 3030 3030 2e0d 0a20 2020 2020 2020   20000...       
-0002fca0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-0002fcb0: 6966 5f69 676e 6f72 655f 656d 7074 795f  if_ignore_empty_
-0002fcc0: 7175 6572 793a 2062 6f6f 6c2c 2064 6566  query: bool, def
-0002fcd0: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
-0002fce0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-0002fcf0: 7261 6d20 7570 6461 7465 5f73 6573 7369  ram update_sessi
-0002fd00: 6f6e 5f61 6674 6572 5f66 7265 713a 2069  on_after_freq: i
-0002fd10: 6e74 2c20 6465 6661 756c 7420 3130 3030  nt, default 1000
-0002fd20: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0002fd30: 2020 203a 7061 7261 6d20 7570 6461 7465     :param update
-0002fd40: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
-0002fd50: 6563 6f6e 6473 3a20 666c 6f61 742c 2064  econds: float, d
-0002fd60: 6566 6175 6c74 2031 3530 302e 0d0a 2020  efault 1500...  
-0002fd70: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-0002fd80: 6172 616d 2069 665f 7368 6f77 5f74 696d  aram if_show_tim
-0002fd90: 655f 7374 6174 3a20 626f 6f6c 2c20 6465  e_stat: bool, de
-0002fda0: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
-0002fdb0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-0002fdc0: 6172 616d 2073 686f 775f 7469 6d65 5f73  aram show_time_s
-0002fdd0: 7461 745f 7072 6563 6973 696f 6e3a 2069  tat_precision: i
-0002fde0: 6e74 2c20 6465 6661 756c 7420 322e 0d0a  nt, default 2...
-0002fdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002fe00: 3a70 6172 616d 2069 665f 7072 696e 745f  :param if_print_
-0002fe10: 7761 726e 696e 673a 2062 6f6f 6c2c 2064  warning: bool, d
-0002fe20: 6566 6175 6c74 2054 7275 652e 0d0a 2020  efault True...  
-0002fe30: 2020 2020 2020 3a72 6574 7572 6e3a 2073        :return: s
-0002fe40: 7472 206f 7220 6469 6374 0d0a 2020 2020  tr or dict..    
-0002fe50: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
-0002fe60: 2020 2074 696d 656f 7574 203d 206b 7761     timeout = kwa
-0002fe70: 7267 732e 6765 7428 2774 696d 656f 7574  rgs.get('timeout
-0002fe80: 272c 204e 6f6e 6529 0d0a 2020 2020 2020  ', None)..      
-0002fe90: 2020 7072 6f78 6965 7320 3d20 6b77 6172    proxies = kwar
-0002fea0: 6773 2e67 6574 2827 7072 6f78 6965 7327  gs.get('proxies'
-0002feb0: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
-0002fec0: 2073 6c65 6570 5f73 6563 6f6e 6473 203d   sleep_seconds =
-0002fed0: 206b 7761 7267 732e 6765 7428 2773 6c65   kwargs.get('sle
-0002fee0: 6570 5f73 6563 6f6e 6473 272c 2030 290d  ep_seconds', 0).
-0002fef0: 0a20 2020 2020 2020 2069 665f 7072 696e  .        if_prin
-0002ff00: 745f 7761 726e 696e 6720 3d20 6b77 6172  t_warning = kwar
-0002ff10: 6773 2e67 6574 2827 6966 5f70 7269 6e74  gs.get('if_print
-0002ff20: 5f77 6172 6e69 6e67 272c 2054 7275 6529  _warning', True)
-0002ff30: 0d0a 2020 2020 2020 2020 6973 5f64 6574  ..        is_det
-0002ff40: 6169 6c5f 7265 7375 6c74 203d 206b 7761  ail_result = kwa
-0002ff50: 7267 732e 6765 7428 2769 735f 6465 7461  rgs.get('is_deta
-0002ff60: 696c 5f72 6573 756c 7427 2c20 4661 6c73  il_result', Fals
-0002ff70: 6529 0d0a 2020 2020 2020 2020 7570 6461  e)..        upda
-0002ff80: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
-0002ff90: 5f66 7265 7120 3d20 6b77 6172 6773 2e67  _freq = kwargs.g
-0002ffa0: 6574 2827 7570 6461 7465 5f73 6573 7369  et('update_sessi
-0002ffb0: 6f6e 5f61 6674 6572 5f66 7265 7127 2c20  on_after_freq', 
-0002ffc0: 7365 6c66 2e64 6566 6175 6c74 5f73 6573  self.default_ses
-0002ffd0: 7369 6f6e 5f66 7265 7129 0d0a 2020 2020  sion_freq)..    
-0002ffe0: 2020 2020 7570 6461 7465 5f73 6573 7369      update_sessi
-0002fff0: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-00030000: 203d 206b 7761 7267 732e 6765 7428 2775   = kwargs.get('u
-00030010: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-00030020: 7465 725f 7365 636f 6e64 7327 2c20 7365  ter_seconds', se
-00030030: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
-00030040: 6f6e 5f73 6563 6f6e 6473 290d 0a20 2020  on_seconds)..   
-00030050: 2020 2020 2073 656c 662e 6368 6563 6b5f       self.check_
-00030060: 696e 7075 745f 6c69 6d69 7428 7175 6572  input_limit(quer
-00030070: 795f 7465 7874 2c20 7365 6c66 2e69 6e70  y_text, self.inp
-00030080: 7574 5f6c 696d 6974 290d 0a0d 0a20 2020  ut_limit)....   
-00030090: 2020 2020 206e 6f74 5f75 7064 6174 655f       not_update_
-000300a0: 636f 6e64 5f66 7265 7120 3d20 3120 6966  cond_freq = 1 if
-000300b0: 2073 656c 662e 7175 6572 795f 636f 756e   self.query_coun
-000300c0: 7420 2520 7570 6461 7465 5f73 6573 7369  t % update_sessi
-000300d0: 6f6e 5f61 6674 6572 5f66 7265 7120 213d  on_after_freq !=
-000300e0: 2030 2065 6c73 6520 300d 0a20 2020 2020   0 else 0..     
-000300f0: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
-00030100: 6e64 5f74 696d 6520 3d20 3120 6966 2074  nd_time = 1 if t
-00030110: 696d 652e 7469 6d65 2829 202d 2073 656c  ime.time() - sel
-00030120: 662e 6265 6769 6e5f 7469 6d65 203c 2075  f.begin_time < u
-00030130: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-00030140: 7465 725f 7365 636f 6e64 7320 656c 7365  ter_seconds else
-00030150: 2030 0d0a 2020 2020 2020 2020 6966 206e   0..        if n
-00030160: 6f74 2028 7365 6c66 2e73 6573 7369 6f6e  ot (self.session
-00030170: 2061 6e64 2073 656c 662e 6c61 6e67 7561   and self.langua
-00030180: 6765 5f6d 6170 2061 6e64 206e 6f74 5f75  ge_map and not_u
-00030190: 7064 6174 655f 636f 6e64 5f66 7265 7120  pdate_cond_freq 
-000301a0: 616e 6420 6e6f 745f 7570 6461 7465 5f63  and not_update_c
-000301b0: 6f6e 645f 7469 6d65 293a 0d0a 2020 2020  ond_time):..    
-000301c0: 2020 2020 2020 2020 7365 6c66 2e62 6567          self.beg
-000301d0: 696e 5f74 696d 6520 3d20 7469 6d65 2e74  in_time = time.t
-000301e0: 696d 6528 290d 0a20 2020 2020 2020 2020  ime()..         
-000301f0: 2020 2073 656c 662e 7365 7373 696f 6e20     self.session 
-00030200: 3d20 7265 7175 6573 7473 2e53 6573 7369  = requests.Sessi
-00030210: 6f6e 2829 0d0a 2020 2020 2020 2020 2020  on()..          
-00030220: 2020 5f20 3d20 7365 6c66 2e73 6573 7369    _ = self.sessi
-00030230: 6f6e 2e67 6574 2873 656c 662e 686f 7374  on.get(self.host
-00030240: 5f75 726c 2c20 6865 6164 6572 733d 7365  _url, headers=se
-00030250: 6c66 2e68 6f73 745f 6865 6164 6572 732c  lf.host_headers,
-00030260: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
-00030270: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
-00030280: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-00030290: 6465 6275 675f 6c61 6e67 5f6b 7761 7267  debug_lang_kwarg
-000302a0: 7320 3d20 7365 6c66 2e64 6562 7567 5f6c  s = self.debug_l
-000302b0: 616e 675f 6b77 6172 6773 2866 726f 6d5f  ang_kwargs(from_
-000302c0: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
-000302d0: 6775 6167 652c 2073 656c 662e 6465 6661  guage, self.defa
-000302e0: 756c 745f 6672 6f6d 5f6c 616e 6775 6167  ult_from_languag
-000302f0: 652c 2069 665f 7072 696e 745f 7761 726e  e, if_print_warn
-00030300: 696e 6729 0d0a 2020 2020 2020 2020 2020  ing)..          
-00030310: 2020 7365 6c66 2e6c 616e 6775 6167 655f    self.language_
-00030320: 6d61 7020 3d20 7365 6c66 2e67 6574 5f6c  map = self.get_l
-00030330: 616e 6775 6167 655f 6d61 7028 7365 6c66  anguage_map(self
-00030340: 2e6c 616e 6775 6167 655f 7572 6c2c 2073  .language_url, s
-00030350: 656c 662e 7365 7373 696f 6e2c 2073 656c  elf.session, sel
-00030360: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
-00030370: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
-00030380: 2c20 2a2a 6465 6275 675f 6c61 6e67 5f6b  , **debug_lang_k
-00030390: 7761 7267 7329 0d0a 0d0a 2020 2020 2020  wargs)....      
-000303a0: 2020 6672 6f6d 5f6c 616e 6775 6167 652c    from_language,
-000303b0: 2074 6f5f 6c61 6e67 7561 6765 203d 2073   to_language = s
-000303c0: 656c 662e 6368 6563 6b5f 6c61 6e67 7561  elf.check_langua
-000303d0: 6765 2866 726f 6d5f 6c61 6e67 7561 6765  ge(from_language
-000303e0: 2c20 746f 5f6c 616e 6775 6167 652c 2073  , to_language, s
-000303f0: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
-00030400: 2c20 6f75 7470 7574 5f7a 683d 7365 6c66  , output_zh=self
-00030410: 2e6f 7574 7075 745f 7a68 290d 0a0d 0a20  .output_zh).... 
-00030420: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
-00030430: 203d 2073 656c 662e 6765 745f 7469 6d65   = self.get_time
-00030440: 7374 616d 7028 290d 0a20 2020 2020 2020  stamp()..       
-00030450: 2070 6179 6c6f 6164 203d 207b 0d0a 2020   payload = {..  
-00030460: 2020 2020 2020 2020 2020 2771 273a 2071            'q': q
-00030470: 7565 7279 5f74 6578 742c 0d0a 2020 2020  uery_text,..    
-00030480: 2020 2020 2020 2020 2773 6f75 7263 6527          'source'
-00030490: 3a20 2727 2069 6620 6672 6f6d 5f6c 616e  : '' if from_lan
-000304a0: 6775 6167 6520 3d3d 2027 6175 746f 2720  guage == 'auto' 
-000304b0: 656c 7365 2066 726f 6d5f 6c61 6e67 7561  else from_langua
-000304c0: 6765 2c0d 0a20 2020 2020 2020 2020 2020  ge,..           
-000304d0: 2027 7461 7267 6574 273a 2074 6f5f 6c61   'target': to_la
-000304e0: 6e67 7561 6765 2c0d 0a20 2020 2020 2020  nguage,..       
-000304f0: 2020 2020 2027 7473 273a 2074 696d 6573       'ts': times
-00030500: 7461 6d70 2c0d 0a20 2020 2020 2020 2020  tamp,..         
-00030510: 2020 2027 7665 7269 6679 273a 2068 6173     'verify': has
-00030520: 686c 6962 2e6d 6435 2866 2777 6562 6b65  hlib.md5(f'webke
-00030530: 795f 4533 7354 754d 6a70 5038 4a65 7a34  y_E3sTuMjpP8Jez4
-00030540: 3947 6359 7044 5648 3772 237b 7469 6d65  9GcYpDVH7r#{time
-00030550: 7374 616d 707d 237b 7175 6572 795f 7465  stamp}#{query_te
-00030560: 7874 7d27 2e65 6e63 6f64 6528 2929 2e68  xt}'.encode()).h
-00030570: 6578 6469 6765 7374 2829 2c0d 0a20 2020  exdigest(),..   
-00030580: 2020 2020 2020 2020 2027 6869 6e74 7327           'hints'
-00030590: 3a20 2727 2c0d 0a20 2020 2020 2020 2020  : '',..         
-000305a0: 2020 2027 6d75 6c74 696c 696e 6527 3a20     'multiline': 
-000305b0: 2774 7275 6527 2c0d 0a20 2020 2020 2020  'true',..       
-000305c0: 207d 0d0a 2020 2020 2020 2020 7220 3d20   }..        r = 
-000305d0: 7365 6c66 2e73 6573 7369 6f6e 2e70 6f73  self.session.pos
-000305e0: 7428 7365 6c66 2e61 7069 5f75 726c 2c20  t(self.api_url, 
-000305f0: 6a73 6f6e 3d70 6179 6c6f 6164 2c20 6865  json=payload, he
-00030600: 6164 6572 733d 7365 6c66 2e61 7069 5f68  aders=self.api_h
-00030610: 6561 6465 7273 2c20 7469 6d65 6f75 743d  eaders, timeout=
-00030620: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
-00030630: 3d70 726f 7869 6573 290d 0a20 2020 2020  =proxies)..     
-00030640: 2020 2072 2e72 6169 7365 5f66 6f72 5f73     r.raise_for_s
-00030650: 7461 7475 7328 290d 0a20 2020 2020 2020  tatus()..       
-00030660: 2064 6174 6120 3d20 722e 6a73 6f6e 2829   data = r.json()
-00030670: 0d0a 2020 2020 2020 2020 7469 6d65 2e73  ..        time.s
-00030680: 6c65 6570 2873 6c65 6570 5f73 6563 6f6e  leep(sleep_secon
-00030690: 6473 290d 0a20 2020 2020 2020 2073 656c  ds)..        sel
-000306a0: 662e 7175 6572 795f 636f 756e 7420 2b3d  f.query_count +=
-000306b0: 2031 0d0a 2020 2020 2020 2020 7265 7475   1..        retu
-000306c0: 726e 2064 6174 6120 6966 2069 735f 6465  rn data if is_de
-000306d0: 7461 696c 5f72 6573 756c 7420 656c 7365  tail_result else
-000306e0: 2064 6174 615b 2764 6174 6127 5d5b 2774   data['data']['t
-000306f0: 7261 6e73 6c61 7469 6f6e 275d 0d0a 0d0a  ranslation']....
-00030700: 0d0a 636c 6173 7320 4d79 4d65 6d6f 7279  ..class MyMemory
-00030710: 2854 7365 293a 0d0a 2020 2020 6465 6620  (Tse):..    def 
-00030720: 5f5f 696e 6974 5f5f 2873 656c 6629 3a0d  __init__(self):.
-00030730: 0a20 2020 2020 2020 2073 7570 6572 2829  .        super()
-00030740: 2e5f 5f69 6e69 745f 5f28 290d 0a20 2020  .__init__()..   
-00030750: 2020 2020 2073 656c 662e 6265 6769 6e5f       self.begin_
-00030760: 7469 6d65 203d 2074 696d 652e 7469 6d65  time = time.time
-00030770: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
-00030780: 2e68 6f73 745f 7572 6c20 3d20 2768 7474  .host_url = 'htt
-00030790: 7073 3a2f 2f6d 796d 656d 6f72 792e 7472  ps://mymemory.tr
-000307a0: 616e 736c 6174 6564 2e6e 6574 270d 0a20  anslated.net'.. 
-000307b0: 2020 2020 2020 2073 656c 662e 6170 695f         self.api_
-000307c0: 7765 625f 7572 6c20 3d20 2768 7474 7073  web_url = 'https
-000307d0: 3a2f 2f6d 796d 656d 6f72 792e 7472 616e  ://mymemory.tran
-000307e0: 736c 6174 6564 2e6e 6574 2f61 7069 2f61  slated.net/api/a
-000307f0: 6a61 7866 6574 6368 270d 0a20 2020 2020  jaxfetch'..     
-00030800: 2020 2073 656c 662e 6170 695f 6170 695f     self.api_api_
-00030810: 7572 6c20 3d20 2768 7474 7073 3a2f 2f61  url = 'https://a
-00030820: 7069 2e6d 796d 656d 6f72 792e 7472 616e  pi.mymemory.tran
-00030830: 736c 6174 6564 2e6e 6574 2f67 6574 270d  slated.net/get'.
-00030840: 0a20 2020 2020 2020 2073 656c 662e 6765  .        self.ge
-00030850: 745f 6d61 7465 6361 745f 6c61 6e67 7561  t_matecat_langua
-00030860: 6765 5f75 726c 203d 2027 6874 7470 733a  ge_url = 'https:
-00030870: 2f2f 7777 772e 6d61 7465 6361 742e 636f  //www.matecat.co
-00030880: 6d2f 6170 692f 7632 2f6c 616e 6775 6167  m/api/v2/languag
-00030890: 6573 270d 0a20 2020 2020 2020 2073 656c  es'..        sel
-000308a0: 662e 686f 7374 5f68 6561 6465 7273 203d  f.host_headers =
-000308b0: 2073 656c 662e 6765 745f 6865 6164 6572   self.get_header
-000308c0: 7328 7365 6c66 2e68 6f73 745f 7572 6c2c  s(self.host_url,
-000308d0: 2069 665f 6170 693d 4661 6c73 6529 0d0a   if_api=False)..
-000308e0: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
-000308f0: 7369 6f6e 203d 204e 6f6e 650d 0a20 2020  sion = None..   
-00030900: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-00030910: 6765 5f6d 6170 203d 204e 6f6e 650d 0a20  ge_map = None.. 
-00030920: 2020 2020 2020 2073 656c 662e 6d79 4d65         self.myMe
-00030930: 6d6f 7279 5f6c 616e 6775 6167 655f 6c69  mory_language_li
-00030940: 7374 203d 204e 6f6e 650d 0a20 2020 2020  st = None..     
-00030950: 2020 2073 656c 662e 6d61 7465 4361 745f     self.mateCat_
-00030960: 6c61 6e67 7561 6765 5f6c 6973 7420 3d20  language_list = 
-00030970: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-00030980: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
-00030990: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
-000309a0: 2e6f 7574 7075 745f 7a68 203d 2027 7a68  .output_zh = 'zh
-000309b0: 2d43 4e27 0d0a 2020 2020 2020 2020 7365  -CN'..        se
-000309c0: 6c66 2e69 6e70 7574 5f6c 696d 6974 203d  lf.input_limit =
-000309d0: 2069 6e74 2835 6532 290d 0a20 2020 2020   int(5e2)..     
-000309e0: 2020 2073 656c 662e 6465 6661 756c 745f     self.default_
-000309f0: 6672 6f6d 5f6c 616e 6775 6167 6520 3d20  from_language = 
-00030a00: 7365 6c66 2e6f 7574 7075 745f 7a68 0d0a  self.output_zh..
-00030a10: 0d0a 2020 2020 4054 7365 2e64 6562 7567  ..    @Tse.debug
-00030a20: 5f6c 616e 6775 6167 655f 6d61 700d 0a20  _language_map.. 
-00030a30: 2020 2064 6566 2067 6574 5f6c 616e 6775     def get_langu
-00030a40: 6167 655f 6d61 7028 7365 6c66 2c20 6d79  age_map(self, my
-00030a50: 4d65 6d6f 7279 5f68 6f73 745f 6874 6d6c  Memory_host_html
-00030a60: 3a20 7374 722c 206d 6174 6563 6174 5f6c  : str, matecat_l
-00030a70: 616e 675f 7572 6c3a 2073 7472 2c20 7373  ang_url: str, ss
-00030a80: 3a20 5365 7373 696f 6e54 7970 652c 2068  : SessionType, h
-00030a90: 6561 6465 7273 3a20 6469 6374 2c0d 0a20  eaders: dict,.. 
-00030aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030ab0: 2020 2020 2020 2020 7469 6d65 6f75 743a          timeout:
-00030ac0: 204f 7074 696f 6e61 6c5b 666c 6f61 745d   Optional[float]
-00030ad0: 2c20 7072 6f78 6965 733a 204f 7074 696f  , proxies: Optio
-00030ae0: 6e61 6c5b 6469 6374 5d2c 202a 2a6b 7761  nal[dict], **kwa
-00030af0: 7267 733a 204c 616e 674d 6170 4b77 6172  rgs: LangMapKwar
-00030b00: 6773 5479 7065 2920 2d3e 2064 6963 743a  gsType) -> dict:
-00030b10: 0d0a 2020 2020 2020 2020 6574 203d 206c  ..        et = l
-00030b20: 786d 6c2e 6574 7265 652e 4854 4d4c 286d  xml.etree.HTML(m
-00030b30: 794d 656d 6f72 795f 686f 7374 5f68 746d  yMemory_host_htm
-00030b40: 6c29 0d0a 2020 2020 2020 2020 6c61 6e67  l)..        lang
-00030b50: 5f6c 6973 7420 3d20 6574 2e78 7061 7468  _list = et.xpath
-00030b60: 2827 2f2f 2a5b 4069 643d 2273 656c 6563  ('//*[@id="selec
-00030b70: 745f 736f 7572 6365 5f6d 6d22 5d2f 6f70  t_source_mm"]/op
-00030b80: 7469 6f6e 2f40 7661 6c75 6527 295b 323a  tion/@value')[2:
-00030b90: 5d0d 0a20 2020 2020 2020 2073 656c 662e  ]..        self.
-00030ba0: 6d79 4d65 6d6f 7279 5f6c 616e 6775 6167  myMemory_languag
-00030bb0: 655f 6c69 7374 203d 2073 6f72 7465 6428  e_list = sorted(
-00030bc0: 6c69 7374 2873 6574 286c 616e 675f 6c69  list(set(lang_li
-00030bd0: 7374 2929 290d 0a0d 0a20 2020 2020 2020  st)))....       
-00030be0: 206c 616e 675f 645f 6c69 7374 203d 2073   lang_d_list = s
-00030bf0: 732e 6765 7428 6d61 7465 6361 745f 6c61  s.get(matecat_la
-00030c00: 6e67 5f75 726c 2c20 6865 6164 6572 733d  ng_url, headers=
-00030c10: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
-00030c20: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
-00030c30: 733d 7072 6f78 6965 7329 2e6a 736f 6e28  s=proxies).json(
-00030c40: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00030c50: 6d61 7465 4361 745f 6c61 6e67 7561 6765  mateCat_language
-00030c60: 5f6c 6973 7420 3d20 736f 7274 6564 286c  _list = sorted(l
-00030c70: 6973 7428 7365 7428 5b69 7465 6d5b 2763  ist(set([item['c
-00030c80: 6f64 6527 5d20 666f 7220 6974 656d 2069  ode'] for item i
-00030c90: 6e20 6c61 6e67 5f64 5f6c 6973 745d 2929  n lang_d_list]))
-00030ca0: 290d 0a0d 0a20 2020 2020 2020 206c 616e  )....        lan
-00030cb0: 675f 6c69 7374 203d 2073 6f72 7465 6428  g_list = sorted(
-00030cc0: 6c69 7374 2873 6574 2873 656c 662e 6d79  list(set(self.my
-00030cd0: 4d65 6d6f 7279 5f6c 616e 6775 6167 655f  Memory_language_
-00030ce0: 6c69 7374 202b 2073 656c 662e 6d61 7465  list + self.mate
-00030cf0: 4361 745f 6c61 6e67 7561 6765 5f6c 6973  Cat_language_lis
-00030d00: 7429 2929 0d0a 2020 2020 2020 2020 7265  t)))..        re
-00030d10: 7475 726e 207b 7d2e 6672 6f6d 6b65 7973  turn {}.fromkeys
-00030d20: 286c 616e 675f 6c69 7374 2c20 6c61 6e67  (lang_list, lang
-00030d30: 5f6c 6973 7429 0d0a 0d0a 2020 2020 4054  _list)....    @T
-00030d40: 7365 2e74 696d 655f 7374 6174 0d0a 2020  se.time_stat..  
-00030d50: 2020 4054 7365 2e63 6865 636b 5f71 7565    @Tse.check_que
-00030d60: 7279 0d0a 2020 2020 6465 6620 6d79 4d65  ry..    def myMe
-00030d70: 6d6f 7279 5f61 7069 2873 656c 662c 2071  mory_api(self, q
-00030d80: 7565 7279 5f74 6578 743a 2073 7472 2c20  uery_text: str, 
-00030d90: 6672 6f6d 5f6c 616e 6775 6167 653a 2073  from_language: s
-00030da0: 7472 203d 2027 6175 746f 272c 2074 6f5f  tr = 'auto', to_
-00030db0: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
-00030dc0: 2765 6e27 2c20 2a2a 6b77 6172 6773 3a20  'en', **kwargs: 
-00030dd0: 4170 694b 7761 7267 7354 7970 6529 202d  ApiKwargsType) -
-00030de0: 3e20 556e 696f 6e5b 7374 722c 2064 6963  > Union[str, dic
-00030df0: 745d 3a0d 0a20 2020 2020 2020 2022 2222  t]:..        """
-00030e00: 0d0a 2020 2020 2020 2020 6874 7470 733a  ..        https:
-00030e10: 2f2f 6d79 6d65 6d6f 7279 2e74 7261 6e73  //mymemory.trans
-00030e20: 6c61 7465 642e 6e65 740d 0a20 2020 2020  lated.net..     
-00030e30: 2020 203a 7061 7261 6d20 7175 6572 795f     :param query_
-00030e40: 7465 7874 3a20 7374 722c 206d 7573 742e  text: str, must.
-00030e50: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
-00030e60: 2066 726f 6d5f 6c61 6e67 7561 6765 3a20   from_language: 
-00030e70: 7374 722c 2064 6566 6175 6c74 2027 6175  str, default 'au
-00030e80: 746f 272e 0d0a 2020 2020 2020 2020 3a70  to'...        :p
-00030e90: 6172 616d 2074 6f5f 6c61 6e67 7561 6765  aram to_language
-00030ea0: 3a20 7374 722c 2064 6566 6175 6c74 2027  : str, default '
-00030eb0: 656e 272e 0d0a 2020 2020 2020 2020 3a70  en'...        :p
-00030ec0: 6172 616d 202a 2a6b 7761 7267 733a 0d0a  aram **kwargs:..
-00030ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030ee0: 3a70 6172 616d 2074 696d 656f 7574 3a20  :param timeout: 
-00030ef0: 666c 6f61 742c 2064 6566 6175 6c74 204e  float, default N
-00030f00: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
-00030f10: 2020 2020 2020 3a70 6172 616d 2070 726f        :param pro
-00030f20: 7869 6573 3a20 6469 6374 2c20 6465 6661  xies: dict, defa
-00030f30: 756c 7420 4e6f 6e65 2e0d 0a20 2020 2020  ult None...     
-00030f40: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00030f50: 6d20 736c 6565 705f 7365 636f 6e64 733a  m sleep_seconds:
-00030f60: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
-00030f70: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
-00030f80: 2020 2020 3a70 6172 616d 2069 735f 6465      :param is_de
-00030f90: 7461 696c 5f72 6573 756c 743a 2062 6f6f  tail_result: boo
-00030fa0: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
-00030fb0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00030fc0: 2020 203a 7061 7261 6d20 6966 5f69 676e     :param if_ign
-00030fd0: 6f72 655f 6c69 6d69 745f 6f66 5f6c 656e  ore_limit_of_len
-00030fe0: 6774 683a 2062 6f6f 6c2c 2064 6566 6175  gth: bool, defau
-00030ff0: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
-00031000: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00031010: 6d20 6c69 6d69 745f 6f66 5f6c 656e 6774  m limit_of_lengt
-00031020: 683a 2069 6e74 2c20 6465 6661 756c 7420  h: int, default 
-00031030: 3230 3030 302e 0d0a 2020 2020 2020 2020  20000...        
-00031040: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-00031050: 665f 6967 6e6f 7265 5f65 6d70 7479 5f71  f_ignore_empty_q
-00031060: 7565 7279 3a20 626f 6f6c 2c20 6465 6661  uery: bool, defa
-00031070: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-00031080: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00031090: 616d 2075 7064 6174 655f 7365 7373 696f  am update_sessio
-000310a0: 6e5f 6166 7465 725f 6672 6571 3a20 696e  n_after_freq: in
-000310b0: 742c 2064 6566 6175 6c74 2031 3030 302e  t, default 1000.
-000310c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000310d0: 2020 3a70 6172 616d 2075 7064 6174 655f    :param update_
-000310e0: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
-000310f0: 636f 6e64 733a 2066 6c6f 6174 2c20 6465  conds: float, de
-00031100: 6661 756c 7420 3135 3030 2e0d 0a20 2020  fault 1500...   
-00031110: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00031120: 7261 6d20 6966 5f73 686f 775f 7469 6d65  ram if_show_time
-00031130: 5f73 7461 743a 2062 6f6f 6c2c 2064 6566  _stat: bool, def
-00031140: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
-00031150: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00031160: 7261 6d20 7368 6f77 5f74 696d 655f 7374  ram show_time_st
-00031170: 6174 5f70 7265 6369 7369 6f6e 3a20 696e  at_precision: in
-00031180: 742c 2064 6566 6175 6c74 2032 2e0d 0a20  t, default 2... 
-00031190: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-000311a0: 7061 7261 6d20 6966 5f70 7269 6e74 5f77  param if_print_w
-000311b0: 6172 6e69 6e67 3a20 626f 6f6c 2c20 6465  arning: bool, de
-000311c0: 6661 756c 7420 5472 7565 2e0d 0a20 2020  fault True...   
-000311d0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-000311e0: 7261 6d20 6d79 4d65 6d6f 7279 5f6d 6f64  ram myMemory_mod
-000311f0: 653a 2073 7472 2c20 6465 6661 756c 7420  e: str, default 
-00031200: 2277 6562 222c 2063 686f 6f73 6520 6672  "web", choose fr
-00031210: 6f6d 2028 2277 6562 222c 2022 6170 6922  om ("web", "api"
-00031220: 292e 0d0a 2020 2020 2020 2020 3a72 6574  )...        :ret
-00031230: 7572 6e3a 2073 7472 206f 7220 6469 6374  urn: str or dict
-00031240: 0d0a 2020 2020 2020 2020 2222 220d 0a0d  ..        """...
-00031250: 0a20 2020 2020 2020 206d 6f64 6520 3d20  .        mode = 
-00031260: 6b77 6172 6773 2e67 6574 2827 6d79 4d65  kwargs.get('myMe
-00031270: 6d6f 7279 5f6d 6f64 6527 2c20 2777 6562  mory_mode', 'web
-00031280: 2729 0d0a 2020 2020 2020 2020 7469 6d65  ')..        time
-00031290: 6f75 7420 3d20 6b77 6172 6773 2e67 6574  out = kwargs.get
-000312a0: 2827 7469 6d65 6f75 7427 2c20 4e6f 6e65  ('timeout', None
-000312b0: 290d 0a20 2020 2020 2020 2070 726f 7869  )..        proxi
-000312c0: 6573 203d 206b 7761 7267 732e 6765 7428  es = kwargs.get(
-000312d0: 2770 726f 7869 6573 272c 204e 6f6e 6529  'proxies', None)
-000312e0: 0d0a 2020 2020 2020 2020 736c 6565 705f  ..        sleep_
-000312f0: 7365 636f 6e64 7320 3d20 6b77 6172 6773  seconds = kwargs
-00031300: 2e67 6574 2827 736c 6565 705f 7365 636f  .get('sleep_seco
-00031310: 6e64 7327 2c20 3029 0d0a 2020 2020 2020  nds', 0)..      
-00031320: 2020 6966 5f70 7269 6e74 5f77 6172 6e69    if_print_warni
-00031330: 6e67 203d 206b 7761 7267 732e 6765 7428  ng = kwargs.get(
-00031340: 2769 665f 7072 696e 745f 7761 726e 696e  'if_print_warnin
-00031350: 6727 2c20 5472 7565 290d 0a20 2020 2020  g', True)..     
-00031360: 2020 2069 735f 6465 7461 696c 5f72 6573     is_detail_res
-00031370: 756c 7420 3d20 6b77 6172 6773 2e67 6574  ult = kwargs.get
-00031380: 2827 6973 5f64 6574 6169 6c5f 7265 7375  ('is_detail_resu
-00031390: 6c74 272c 2046 616c 7365 290d 0a20 2020  lt', False)..   
-000313a0: 2020 2020 2075 7064 6174 655f 7365 7373       update_sess
-000313b0: 696f 6e5f 6166 7465 725f 6672 6571 203d  ion_after_freq =
-000313c0: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
-000313d0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-000313e0: 725f 6672 6571 272c 2073 656c 662e 6465  r_freq', self.de
-000313f0: 6661 756c 745f 7365 7373 696f 6e5f 6672  fault_session_fr
-00031400: 6571 290d 0a20 2020 2020 2020 2075 7064  eq)..        upd
-00031410: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-00031420: 725f 7365 636f 6e64 7320 3d20 6b77 6172  r_seconds = kwar
-00031430: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
-00031440: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-00031450: 6f6e 6473 272c 2073 656c 662e 6465 6661  onds', self.defa
-00031460: 756c 745f 7365 7373 696f 6e5f 7365 636f  ult_session_seco
-00031470: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
-00031480: 6c66 2e63 6865 636b 5f69 6e70 7574 5f6c  lf.check_input_l
-00031490: 696d 6974 2871 7565 7279 5f74 6578 742c  imit(query_text,
-000314a0: 2073 656c 662e 696e 7075 745f 6c69 6d69   self.input_limi
-000314b0: 7429 0d0a 0d0a 2020 2020 2020 2020 6e6f  t)....        no
-000314c0: 745f 7570 6461 7465 5f63 6f6e 645f 6672  t_update_cond_fr
-000314d0: 6571 203d 2031 2069 6620 7365 6c66 2e71  eq = 1 if self.q
-000314e0: 7565 7279 5f63 6f75 6e74 2025 2075 7064  uery_count % upd
-000314f0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-00031500: 725f 6672 6571 2021 3d20 3020 656c 7365  r_freq != 0 else
-00031510: 2030 0d0a 2020 2020 2020 2020 6e6f 745f   0..        not_
-00031520: 7570 6461 7465 5f63 6f6e 645f 7469 6d65  update_cond_time
-00031530: 203d 2031 2069 6620 7469 6d65 2e74 696d   = 1 if time.tim
-00031540: 6528 2920 2d20 7365 6c66 2e62 6567 696e  e() - self.begin
-00031550: 5f74 696d 6520 3c20 7570 6461 7465 5f73  _time < update_s
-00031560: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-00031570: 6f6e 6473 2065 6c73 6520 300d 0a20 2020  onds else 0..   
-00031580: 2020 2020 2069 6620 6e6f 7420 2873 656c       if not (sel
-00031590: 662e 7365 7373 696f 6e20 616e 6420 7365  f.session and se
-000315a0: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
-000315b0: 616e 6420 6e6f 745f 7570 6461 7465 5f63  and not_update_c
-000315c0: 6f6e 645f 6672 6571 2061 6e64 206e 6f74  ond_freq and not
-000315d0: 5f75 7064 6174 655f 636f 6e64 5f74 696d  _update_cond_tim
-000315e0: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
-000315f0: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
-00031600: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
-00031610: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00031620: 2e73 6573 7369 6f6e 203d 2072 6571 7565  .session = reque
-00031630: 7374 732e 5365 7373 696f 6e28 290d 0a20  sts.Session().. 
-00031640: 2020 2020 2020 2020 2020 2068 6f73 745f             host_
-00031650: 6874 6d6c 203d 2073 656c 662e 7365 7373  html = self.sess
-00031660: 696f 6e2e 6765 7428 7365 6c66 2e68 6f73  ion.get(self.hos
-00031670: 745f 7572 6c2c 2068 6561 6465 7273 3d73  t_url, headers=s
-00031680: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
-00031690: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
-000316a0: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
-000316b0: 6573 292e 7465 7874 0d0a 2020 2020 2020  es).text..      
-000316c0: 2020 2020 2020 6465 6275 675f 6c61 6e67        debug_lang
-000316d0: 5f6b 7761 7267 7320 3d20 7365 6c66 2e64  _kwargs = self.d
-000316e0: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
-000316f0: 2866 726f 6d5f 6c61 6e67 7561 6765 2c20  (from_language, 
-00031700: 746f 5f6c 616e 6775 6167 652c 2073 656c  to_language, sel
-00031710: 662e 6465 6661 756c 745f 6672 6f6d 5f6c  f.default_from_l
-00031720: 616e 6775 6167 652c 2069 665f 7072 696e  anguage, if_prin
-00031730: 745f 7761 726e 696e 6729 0d0a 2020 2020  t_warning)..    
-00031740: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
-00031750: 6775 6167 655f 6d61 7020 3d20 7365 6c66  guage_map = self
-00031760: 2e67 6574 5f6c 616e 6775 6167 655f 6d61  .get_language_ma
-00031770: 7028 686f 7374 5f68 746d 6c2c 2073 656c  p(host_html, sel
-00031780: 662e 6765 745f 6d61 7465 6361 745f 6c61  f.get_matecat_la
-00031790: 6e67 7561 6765 5f75 726c 2c20 7365 6c66  nguage_url, self
-000317a0: 2e73 6573 7369 6f6e 2c0d 0a20 2020 2020  .session,..     
-000317b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000317c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000317d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000317e0: 2073 656c 662e 686f 7374 5f68 6561 6465   self.host_heade
-000317f0: 7273 2c20 7469 6d65 6f75 742c 2070 726f  rs, timeout, pro
-00031800: 7869 6573 2c20 2a2a 6465 6275 675f 6c61  xies, **debug_la
-00031810: 6e67 5f6b 7761 7267 7329 0d0a 0d0a 2020  ng_kwargs)....  
-00031820: 2020 2020 2020 6966 2066 726f 6d5f 6c61        if from_la
-00031830: 6e67 7561 6765 203d 3d20 2761 7574 6f27  nguage == 'auto'
-00031840: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
-00031850: 726f 6d5f 6c61 6e67 7561 6765 203d 2073  rom_language = s
-00031860: 656c 662e 7761 726e 696e 675f 6175 746f  elf.warning_auto
-00031870: 5f6c 616e 6728 276d 794d 656d 6f72 7927  _lang('myMemory'
-00031880: 2c20 7365 6c66 2e64 6566 6175 6c74 5f66  , self.default_f
-00031890: 726f 6d5f 6c61 6e67 7561 6765 2c20 6966  rom_language, if
-000318a0: 5f70 7269 6e74 5f77 6172 6e69 6e67 290d  _print_warning).
-000318b0: 0a20 2020 2020 2020 2066 726f 6d5f 6c61  .        from_la
-000318c0: 6e67 7561 6765 2c20 746f 5f6c 616e 6775  nguage, to_langu
-000318d0: 6167 6520 3d20 7365 6c66 2e63 6865 636b  age = self.check
-000318e0: 5f6c 616e 6775 6167 6528 6672 6f6d 5f6c  _language(from_l
-000318f0: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
-00031900: 7561 6765 2c20 7365 6c66 2e6c 616e 6775  uage, self.langu
-00031910: 6167 655f 6d61 702c 206f 7574 7075 745f  age_map, output_
-00031920: 7a68 3d73 656c 662e 6f75 7470 7574 5f7a  zh=self.output_z
-00031930: 682c 0d0a 2020 2020 2020 2020 2020 2020  h,..            
-00031940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031960: 2020 2020 2020 2020 2020 2020 206f 7574               out
-00031970: 7075 745f 656e 5f74 7261 6e73 6c61 746f  put_en_translato
-00031980: 723d 276d 794d 656d 6f72 7927 2c20 6f75  r='myMemory', ou
-00031990: 7470 7574 5f65 6e3d 2765 6e2d 4742 2729  tput_en='en-GB')
-000319a0: 0d0a 0d0a 2020 2020 2020 2020 7061 7261  ....        para
-000319b0: 6d73 203d 207b 0d0a 2020 2020 2020 2020  ms = {..        
-000319c0: 2020 2020 2771 273a 2071 7565 7279 5f74      'q': query_t
-000319d0: 6578 742c 0d0a 2020 2020 2020 2020 2020  ext,..          
-000319e0: 2020 276c 616e 6770 6169 7227 3a20 6627    'langpair': f'
-000319f0: 7b66 726f 6d5f 6c61 6e67 7561 6765 7d7c  {from_language}|
-00031a00: 7b74 6f5f 6c61 6e67 7561 6765 7d27 0d0a  {to_language}'..
-00031a10: 2020 2020 2020 2020 7d0d 0a20 2020 2020          }..     
-00031a20: 2020 2070 6172 616d 7320 3d20 7061 7261     params = para
-00031a30: 6d73 2069 6620 6d6f 6465 203d 3d20 2761  ms if mode == 'a
-00031a40: 7069 2720 656c 7365 207b 2a2a 7061 7261  pi' else {**para
-00031a50: 6d73 2c20 2a2a 7b27 6d74 6f6e 6c79 273a  ms, **{'mtonly':
-00031a60: 2031 7d7d 0d0a 2020 2020 2020 2020 6170   1}}..        ap
-00031a70: 695f 7572 6c20 3d20 7365 6c66 2e61 7069  i_url = self.api
-00031a80: 5f61 7069 5f75 726c 2069 6620 6d6f 6465  _api_url if mode
-00031a90: 203d 3d20 2761 7069 2720 656c 7365 2073   == 'api' else s
-00031aa0: 656c 662e 6170 695f 7765 625f 7572 6c0d  elf.api_web_url.
-00031ab0: 0a0d 0a20 2020 2020 2020 2072 203d 2073  ...        r = s
-00031ac0: 656c 662e 7365 7373 696f 6e2e 6765 7428  elf.session.get(
-00031ad0: 6170 695f 7572 6c2c 2070 6172 616d 733d  api_url, params=
-00031ae0: 7061 7261 6d73 2c20 6865 6164 6572 733d  params, headers=
-00031af0: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
-00031b00: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
-00031b10: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
-00031b20: 6965 7329 0d0a 2020 2020 2020 2020 722e  ies)..        r.
-00031b30: 7261 6973 655f 666f 725f 7374 6174 7573  raise_for_status
-00031b40: 2829 0d0a 2020 2020 2020 2020 6461 7461  ()..        data
-00031b50: 203d 2072 2e6a 736f 6e28 290d 0a20 2020   = r.json()..   
-00031b60: 2020 2020 2074 696d 652e 736c 6565 7028       time.sleep(
-00031b70: 736c 6565 705f 7365 636f 6e64 7329 0d0a  sleep_seconds)..
-00031b80: 2020 2020 2020 2020 7365 6c66 2e71 7565          self.que
-00031b90: 7279 5f63 6f75 6e74 202b 3d20 310d 0a20  ry_count += 1.. 
-00031ba0: 2020 2020 2020 2072 6574 7572 6e20 6461         return da
-00031bb0: 7461 2069 6620 6973 5f64 6574 6169 6c5f  ta if is_detail_
-00031bc0: 7265 7375 6c74 2065 6c73 6520 6461 7461  result else data
-00031bd0: 5b27 7265 7370 6f6e 7365 4461 7461 275d  ['responseData']
-00031be0: 5b27 7472 616e 736c 6174 6564 5465 7874  ['translatedText
-00031bf0: 275d 0d0a 0d0a 0d0a 636c 6173 7320 4d69  ']......class Mi
-00031c00: 7261 6928 5473 6529 3a0d 0a20 2020 2064  rai(Tse):..    d
-00031c10: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-00031c20: 293a 0d0a 2020 2020 2020 2020 7375 7065  ):..        supe
-00031c30: 7228 292e 5f5f 696e 6974 5f5f 2829 0d0a  r().__init__()..
-00031c40: 2020 2020 2020 2020 7365 6c66 2e62 6567          self.beg
-00031c50: 696e 5f74 696d 6520 3d20 7469 6d65 2e74  in_time = time.t
-00031c60: 696d 6528 290d 0a20 2020 2020 2020 2073  ime()..        s
-00031c70: 656c 662e 686f 6d65 5f75 726c 203d 2027  elf.home_url = '
-00031c80: 6874 7470 733a 2f2f 6d69 7261 6974 7261  https://miraitra
-00031c90: 6e73 6c61 7465 2e63 6f6d 270d 0a20 2020  nslate.com'..   
-00031ca0: 2020 2020 2073 656c 662e 686f 7374 5f75       self.host_u
-00031cb0: 726c 203d 2027 6874 7470 733a 2f2f 6d69  rl = 'https://mi
-00031cc0: 7261 6974 7261 6e73 6c61 7465 2e63 6f6d  raitranslate.com
-00031cd0: 2f74 7269 616c 2f27 0d0a 2020 2020 2020  /trial/'..      
-00031ce0: 2020 7365 6c66 2e61 7069 5f75 726c 203d    self.api_url =
-00031cf0: 2027 6874 7470 733a 2f2f 7472 6961 6c2e   'https://trial.
-00031d00: 6d69 7261 6974 7261 6e73 6c61 7465 2e63  miraitranslate.c
-00031d10: 6f6d 2f74 7269 616c 2f61 7069 2f74 7261  om/trial/api/tra
-00031d20: 6e73 6c61 7465 2e70 6870 270d 0a20 2020  nslate.php'..   
-00031d30: 2020 2020 2073 656c 662e 6c61 6e67 5f75       self.lang_u
-00031d40: 726c 203d 204e 6f6e 650d 0a20 2020 2020  rl = None..     
-00031d50: 2020 2073 656c 662e 6c61 6e67 5f75 726c     self.lang_url
-00031d60: 5f70 6174 7465 726e 203d 2027 6d61 696e  _pattern = 'main
-00031d70: 2d65 7332 3031 352e 282e 2a3f 292e 6a73  -es2015.(.*?).js
-00031d80: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
-00031d90: 6465 7465 6374 5f6c 616e 675f 7572 6c20  detect_lang_url 
-00031da0: 3d20 2768 7474 7073 3a2f 2f74 7269 616c  = 'https://trial
-00031db0: 2e6d 6972 6169 7472 616e 736c 6174 652e  .miraitranslate.
-00031dc0: 636f 6d2f 7472 6961 6c2f 6170 692f 6465  com/trial/api/de
-00031dd0: 7465 6374 5f6c 616e 672e 7068 7027 0d0a  tect_lang.php'..
-00031de0: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
-00031df0: 6365 5f75 726c 203d 2027 6874 7470 733a  ce_url = 'https:
-00031e00: 2f2f 7472 6961 6c2e 6d69 7261 6974 7261  //trial.miraitra
-00031e10: 6e73 6c61 7465 2e63 6f6d 2f74 7269 616c  nslate.com/trial
-00031e20: 2f61 7069 2f74 7261 6365 2e70 6870 270d  /api/trace.php'.
-00031e30: 0a20 2020 2020 2020 2073 656c 662e 686f  .        self.ho
-00031e40: 7374 5f68 6561 6465 7273 203d 2073 656c  st_headers = sel
+000249c0: 2020 2020 7365 6c66 2e6d 616e 6966 6573      self.manifes
+000249d0: 745f 7572 6c20 3d20 2768 7474 7073 3a2f  t_url = 'https:/
+000249e0: 2f69 7472 616e 736c 6174 652d 7765 6261  /itranslate-weba
+000249f0: 7070 2d70 726f 6475 6374 696f 6e2e 7765  pp-production.we
+00024a00: 622e 6170 702f 6d61 6e69 6665 7374 2e6a  b.app/manifest.j
+00024a10: 736f 6e27 0d0a 2020 2020 2020 2020 7365  son'..        se
+00024a20: 6c66 2e6c 616e 6775 6167 655f 7572 6c20  lf.language_url 
+00024a30: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+00024a40: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
+00024a50: 7320 3d20 7365 6c66 2e67 6574 5f68 6561  s = self.get_hea
+00024a60: 6465 7273 2873 656c 662e 686f 7374 5f75  ders(self.host_u
+00024a70: 726c 2c20 6966 5f61 7069 3d46 616c 7365  rl, if_api=False
+00024a80: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00024a90: 6170 695f 6865 6164 6572 7320 3d20 7365  api_headers = se
+00024aa0: 6c66 2e67 6574 5f68 6561 6465 7273 2873  lf.get_headers(s
+00024ab0: 656c 662e 686f 7374 5f75 726c 2c20 6966  elf.host_url, if
+00024ac0: 5f61 7069 3d54 7275 652c 2069 665f 6a73  _api=True, if_js
+00024ad0: 6f6e 5f66 6f72 5f61 7069 3d54 7275 6529  on_for_api=True)
+00024ae0: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
+00024af0: 6573 7369 6f6e 203d 204e 6f6e 650d 0a20  ession = None.. 
+00024b00: 2020 2020 2020 2073 656c 662e 6c61 6e67         self.lang
+00024b10: 7561 6765 5f6d 6170 203d 204e 6f6e 650d  uage_map = None.
+00024b20: 0a20 2020 2020 2020 2073 656c 662e 6170  .        self.ap
+00024b30: 695f 6b65 7920 3d20 4e6f 6e65 0d0a 2020  i_key = None..  
+00024b40: 2020 2020 2020 7365 6c66 2e71 7565 7279        self.query
+00024b50: 5f63 6f75 6e74 203d 2030 0d0a 2020 2020  _count = 0..    
+00024b60: 2020 2020 7365 6c66 2e6f 7574 7075 745f      self.output_
+00024b70: 7a68 203d 2027 7a68 2d43 4e27 0d0a 2020  zh = 'zh-CN'..  
+00024b80: 2020 2020 2020 7365 6c66 2e69 6e70 7574        self.input
+00024b90: 5f6c 696d 6974 203d 2069 6e74 2831 6533  _limit = int(1e3
+00024ba0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00024bb0: 6465 6661 756c 745f 6672 6f6d 5f6c 616e  default_from_lan
+00024bc0: 6775 6167 6520 3d20 7365 6c66 2e6f 7574  guage = self.out
+00024bd0: 7075 745f 7a68 0d0a 0d0a 2020 2020 4054  put_zh....    @T
+00024be0: 7365 2e64 6562 7567 5f6c 616e 6775 6167  se.debug_languag
+00024bf0: 655f 6d61 700d 0a20 2020 2064 6566 2067  e_map..    def g
+00024c00: 6574 5f6c 616e 6775 6167 655f 6d61 7028  et_language_map(
+00024c10: 7365 6c66 2c20 6c61 6e67 5f68 746d 6c3a  self, lang_html:
+00024c20: 2073 7472 2c20 2a2a 6b77 6172 6773 3a20   str, **kwargs: 
+00024c30: 4c61 6e67 4d61 704b 7761 7267 7354 7970  LangMapKwargsTyp
+00024c40: 6529 202d 3e20 6469 6374 3a0d 0a20 2020  e) -> dict:..   
+00024c50: 2020 2020 206c 616e 675f 7374 7220 3d20       lang_str = 
+00024c60: 7265 2e63 6f6d 7069 6c65 2827 5c5c 5b7b  re.compile('\\[{
+00024c70: 6469 616c 6563 743a 2261 7574 6f22 2c28  dialect:"auto",(
+00024c80: 2e2a 3f29 7d5d 2729 2e73 6561 7263 6828  .*?)}]').search(
+00024c90: 6c61 6e67 5f68 746d 6c29 2e67 726f 7570  lang_html).group
+00024ca0: 2829 0d0a 2020 2020 2020 2020 6c61 6e67  ()..        lang
+00024cb0: 5f6f 7269 6769 6e5f 6c69 7374 203d 2065  _origin_list = e
+00024cc0: 7865 636a 732e 6576 616c 286c 616e 675f  xecjs.eval(lang_
+00024cd0: 7374 7229 0d0a 2020 2020 2020 2020 6c61  str)..        la
+00024ce0: 6e67 5f6c 6973 7420 3d20 736f 7274 6564  ng_list = sorted
+00024cf0: 286c 6973 7428 7365 7428 5b64 645b 2764  (list(set([dd['d
+00024d00: 6961 6c65 6374 275d 2066 6f72 2064 6420  ialect'] for dd 
+00024d10: 696e 206c 616e 675f 6f72 6967 696e 5f6c  in lang_origin_l
+00024d20: 6973 745d 2929 290d 0a20 2020 2020 2020  ist])))..       
+00024d30: 2072 6574 7572 6e20 7b7d 2e66 726f 6d6b   return {}.fromk
+00024d40: 6579 7328 6c61 6e67 5f6c 6973 742c 206c  eys(lang_list, l
+00024d50: 616e 675f 6c69 7374 290d 0a0d 0a20 2020  ang_list)....   
+00024d60: 2064 6566 2067 6574 5f61 7069 6b65 7928   def get_apikey(
+00024d70: 7365 6c66 2c20 6c61 6e67 5f68 746d 6c3a  self, lang_html:
+00024d80: 2073 7472 2920 2d3e 2073 7472 3a0d 0a20   str) -> str:.. 
+00024d90: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+00024da0: 2e63 6f6d 7069 6c65 2827 2241 5049 2d4b  .compile('"API-K
+00024db0: 4559 223a 2228 2e2a 3f29 2227 292e 6669  EY":"(.*?)"').fi
+00024dc0: 6e64 616c 6c28 6c61 6e67 5f68 746d 6c29  ndall(lang_html)
+00024dd0: 5b30 5d0d 0a0d 0a20 2020 2040 5473 652e  [0]....    @Tse.
+00024de0: 7469 6d65 5f73 7461 740d 0a20 2020 2040  time_stat..    @
+00024df0: 5473 652e 6368 6563 6b5f 7175 6572 790d  Tse.check_query.
+00024e00: 0a20 2020 2064 6566 2069 7472 616e 736c  .    def itransl
+00024e10: 6174 655f 6170 6928 7365 6c66 2c20 7175  ate_api(self, qu
+00024e20: 6572 795f 7465 7874 3a20 7374 722c 2066  ery_text: str, f
+00024e30: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
+00024e40: 7220 3d20 2761 7574 6f27 2c20 746f 5f6c  r = 'auto', to_l
+00024e50: 616e 6775 6167 653a 2073 7472 203d 2027  anguage: str = '
+00024e60: 656e 272c 202a 2a6b 7761 7267 733a 2041  en', **kwargs: A
+00024e70: 7069 4b77 6172 6773 5479 7065 2920 2d3e  piKwargsType) ->
+00024e80: 2055 6e69 6f6e 5b73 7472 2c20 6469 6374   Union[str, dict
+00024e90: 5d3a 0d0a 2020 2020 2020 2020 2222 220d  ]:..        """.
+00024ea0: 0a20 2020 2020 2020 2068 7474 7073 3a2f  .        https:/
+00024eb0: 2f69 7472 616e 736c 6174 652e 636f 6d2f  /itranslate.com/
+00024ec0: 7472 616e 736c 6174 650d 0a20 2020 2020  translate..     
+00024ed0: 2020 203a 7061 7261 6d20 7175 6572 795f     :param query_
+00024ee0: 7465 7874 3a20 7374 722c 206d 7573 742e  text: str, must.
+00024ef0: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+00024f00: 2066 726f 6d5f 6c61 6e67 7561 6765 3a20   from_language: 
+00024f10: 7374 722c 2064 6566 6175 6c74 2027 6175  str, default 'au
+00024f20: 746f 272e 0d0a 2020 2020 2020 2020 3a70  to'...        :p
+00024f30: 6172 616d 2074 6f5f 6c61 6e67 7561 6765  aram to_language
+00024f40: 3a20 7374 722c 2064 6566 6175 6c74 2027  : str, default '
+00024f50: 656e 272e 0d0a 2020 2020 2020 2020 3a70  en'...        :p
+00024f60: 6172 616d 202a 2a6b 7761 7267 733a 0d0a  aram **kwargs:..
+00024f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024f80: 3a70 6172 616d 2074 696d 656f 7574 3a20  :param timeout: 
+00024f90: 666c 6f61 742c 2064 6566 6175 6c74 204e  float, default N
+00024fa0: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
+00024fb0: 2020 2020 2020 3a70 6172 616d 2070 726f        :param pro
+00024fc0: 7869 6573 3a20 6469 6374 2c20 6465 6661  xies: dict, defa
+00024fd0: 756c 7420 4e6f 6e65 2e0d 0a20 2020 2020  ult None...     
+00024fe0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00024ff0: 6d20 736c 6565 705f 7365 636f 6e64 733a  m sleep_seconds:
+00025000: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
+00025010: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+00025020: 2020 2020 3a70 6172 616d 2069 735f 6465      :param is_de
+00025030: 7461 696c 5f72 6573 756c 743a 2062 6f6f  tail_result: boo
+00025040: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+00025050: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00025060: 2020 203a 7061 7261 6d20 6966 5f69 676e     :param if_ign
+00025070: 6f72 655f 6c69 6d69 745f 6f66 5f6c 656e  ore_limit_of_len
+00025080: 6774 683a 2062 6f6f 6c2c 2064 6566 6175  gth: bool, defau
+00025090: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+000250a0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+000250b0: 6d20 6c69 6d69 745f 6f66 5f6c 656e 6774  m limit_of_lengt
+000250c0: 683a 2069 6e74 2c20 6465 6661 756c 7420  h: int, default 
+000250d0: 3230 3030 302e 0d0a 2020 2020 2020 2020  20000...        
+000250e0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+000250f0: 665f 6967 6e6f 7265 5f65 6d70 7479 5f71  f_ignore_empty_q
+00025100: 7565 7279 3a20 626f 6f6c 2c20 6465 6661  uery: bool, defa
+00025110: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+00025120: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00025130: 616d 2075 7064 6174 655f 7365 7373 696f  am update_sessio
+00025140: 6e5f 6166 7465 725f 6672 6571 3a20 696e  n_after_freq: in
+00025150: 742c 2064 6566 6175 6c74 2031 3030 302e  t, default 1000.
+00025160: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00025170: 2020 3a70 6172 616d 2075 7064 6174 655f    :param update_
+00025180: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
+00025190: 636f 6e64 733a 2066 6c6f 6174 2c20 6465  conds: float, de
+000251a0: 6661 756c 7420 3135 3030 2e0d 0a20 2020  fault 1500...   
+000251b0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+000251c0: 7261 6d20 6966 5f73 686f 775f 7469 6d65  ram if_show_time
+000251d0: 5f73 7461 743a 2062 6f6f 6c2c 2064 6566  _stat: bool, def
+000251e0: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
+000251f0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00025200: 7261 6d20 7368 6f77 5f74 696d 655f 7374  ram show_time_st
+00025210: 6174 5f70 7265 6369 7369 6f6e 3a20 696e  at_precision: in
+00025220: 742c 2064 6566 6175 6c74 2032 2e0d 0a20  t, default 2... 
+00025230: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00025240: 7061 7261 6d20 6966 5f70 7269 6e74 5f77  param if_print_w
+00025250: 6172 6e69 6e67 3a20 626f 6f6c 2c20 6465  arning: bool, de
+00025260: 6661 756c 7420 5472 7565 2e0d 0a20 2020  fault True...   
+00025270: 2020 2020 203a 7265 7475 726e 3a20 7374       :return: st
+00025280: 7220 6f72 2064 6963 740d 0a20 2020 2020  r or dict..     
+00025290: 2020 2022 2222 0d0a 0d0a 2020 2020 2020     """....      
+000252a0: 2020 7469 6d65 6f75 7420 3d20 6b77 6172    timeout = kwar
+000252b0: 6773 2e67 6574 2827 7469 6d65 6f75 7427  gs.get('timeout'
+000252c0: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
+000252d0: 2070 726f 7869 6573 203d 206b 7761 7267   proxies = kwarg
+000252e0: 732e 6765 7428 2770 726f 7869 6573 272c  s.get('proxies',
+000252f0: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
+00025300: 736c 6565 705f 7365 636f 6e64 7320 3d20  sleep_seconds = 
+00025310: 6b77 6172 6773 2e67 6574 2827 736c 6565  kwargs.get('slee
+00025320: 705f 7365 636f 6e64 7327 2c20 3029 0d0a  p_seconds', 0)..
+00025330: 2020 2020 2020 2020 6966 5f70 7269 6e74          if_print
+00025340: 5f77 6172 6e69 6e67 203d 206b 7761 7267  _warning = kwarg
+00025350: 732e 6765 7428 2769 665f 7072 696e 745f  s.get('if_print_
+00025360: 7761 726e 696e 6727 2c20 5472 7565 290d  warning', True).
+00025370: 0a20 2020 2020 2020 2069 735f 6465 7461  .        is_deta
+00025380: 696c 5f72 6573 756c 7420 3d20 6b77 6172  il_result = kwar
+00025390: 6773 2e67 6574 2827 6973 5f64 6574 6169  gs.get('is_detai
+000253a0: 6c5f 7265 7375 6c74 272c 2046 616c 7365  l_result', False
+000253b0: 290d 0a20 2020 2020 2020 2075 7064 6174  )..        updat
+000253c0: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
+000253d0: 6672 6571 203d 206b 7761 7267 732e 6765  freq = kwargs.ge
+000253e0: 7428 2775 7064 6174 655f 7365 7373 696f  t('update_sessio
+000253f0: 6e5f 6166 7465 725f 6672 6571 272c 2073  n_after_freq', s
+00025400: 656c 662e 6465 6661 756c 745f 7365 7373  elf.default_sess
+00025410: 696f 6e5f 6672 6571 290d 0a20 2020 2020  ion_freq)..     
+00025420: 2020 2075 7064 6174 655f 7365 7373 696f     update_sessio
+00025430: 6e5f 6166 7465 725f 7365 636f 6e64 7320  n_after_seconds 
+00025440: 3d20 6b77 6172 6773 2e67 6574 2827 7570  = kwargs.get('up
+00025450: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+00025460: 6572 5f73 6563 6f6e 6473 272c 2073 656c  er_seconds', sel
+00025470: 662e 6465 6661 756c 745f 7365 7373 696f  f.default_sessio
+00025480: 6e5f 7365 636f 6e64 7329 0d0a 2020 2020  n_seconds)..    
+00025490: 2020 2020 7365 6c66 2e63 6865 636b 5f69      self.check_i
+000254a0: 6e70 7574 5f6c 696d 6974 2871 7565 7279  nput_limit(query
+000254b0: 5f74 6578 742c 2073 656c 662e 696e 7075  _text, self.inpu
+000254c0: 745f 6c69 6d69 7429 0d0a 0d0a 2020 2020  t_limit)....    
+000254d0: 2020 2020 6e6f 745f 7570 6461 7465 5f63      not_update_c
+000254e0: 6f6e 645f 6672 6571 203d 2031 2069 6620  ond_freq = 1 if 
+000254f0: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
+00025500: 2025 2075 7064 6174 655f 7365 7373 696f   % update_sessio
+00025510: 6e5f 6166 7465 725f 6672 6571 2021 3d20  n_after_freq != 
+00025520: 3020 656c 7365 2030 0d0a 2020 2020 2020  0 else 0..      
+00025530: 2020 6e6f 745f 7570 6461 7465 5f63 6f6e    not_update_con
+00025540: 645f 7469 6d65 203d 2031 2069 6620 7469  d_time = 1 if ti
+00025550: 6d65 2e74 696d 6528 2920 2d20 7365 6c66  me.time() - self
+00025560: 2e62 6567 696e 5f74 696d 6520 3c20 7570  .begin_time < up
+00025570: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+00025580: 6572 5f73 6563 6f6e 6473 2065 6c73 6520  er_seconds else 
+00025590: 300d 0a20 2020 2020 2020 2069 6620 6e6f  0..        if no
+000255a0: 7420 2873 656c 662e 7365 7373 696f 6e20  t (self.session 
+000255b0: 616e 6420 7365 6c66 2e6c 616e 6775 6167  and self.languag
+000255c0: 655f 6d61 7020 616e 6420 6e6f 745f 7570  e_map and not_up
+000255d0: 6461 7465 5f63 6f6e 645f 6672 6571 2061  date_cond_freq a
+000255e0: 6e64 206e 6f74 5f75 7064 6174 655f 636f  nd not_update_co
+000255f0: 6e64 5f74 696d 6529 3a0d 0a20 2020 2020  nd_time):..     
+00025600: 2020 2020 2020 2073 656c 662e 6265 6769         self.begi
+00025610: 6e5f 7469 6d65 203d 2074 696d 652e 7469  n_time = time.ti
+00025620: 6d65 2829 0d0a 2020 2020 2020 2020 2020  me()..          
+00025630: 2020 7365 6c66 2e73 6573 7369 6f6e 203d    self.session =
+00025640: 2072 6571 7565 7374 732e 5365 7373 696f   requests.Sessio
+00025650: 6e28 290d 0a20 2020 2020 2020 2020 2020  n()..           
+00025660: 205f 203d 2073 656c 662e 7365 7373 696f   _ = self.sessio
+00025670: 6e2e 6765 7428 7365 6c66 2e68 6f73 745f  n.get(self.host_
+00025680: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
+00025690: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
+000256a0: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+000256b0: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+000256c0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+000256d0: 2069 6620 6e6f 7420 7365 6c66 2e6c 616e   if not self.lan
+000256e0: 6775 6167 655f 7572 6c3a 0d0a 2020 2020  guage_url:..    
+000256f0: 2020 2020 2020 2020 2020 2020 6d61 6e69              mani
+00025700: 6665 7374 5f64 6174 6120 3d20 7365 6c66  fest_data = self
+00025710: 2e73 6573 7369 6f6e 2e67 6574 2873 656c  .session.get(sel
+00025720: 662e 6d61 6e69 6665 7374 5f75 726c 2c20  f.manifest_url, 
+00025730: 6865 6164 6572 733d 7365 6c66 2e68 6f73  headers=self.hos
+00025740: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
+00025750: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
+00025760: 6965 733d 7072 6f78 6965 7329 2e6a 736f  ies=proxies).jso
+00025770: 6e28 290d 0a20 2020 2020 2020 2020 2020  n()..           
+00025780: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
+00025790: 6765 5f75 726c 203d 206d 616e 6966 6573  ge_url = manifes
+000257a0: 745f 6461 7461 2e67 6574 2827 6d61 696e  t_data.get('main
+000257b0: 2e6a 7327 290d 0a0d 0a20 2020 2020 2020  .js')....       
+000257c0: 2020 2020 206c 616e 675f 6874 6d6c 203d       lang_html =
+000257d0: 2073 656c 662e 7365 7373 696f 6e2e 6765   self.session.ge
+000257e0: 7428 7365 6c66 2e6c 616e 6775 6167 655f  t(self.language_
+000257f0: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
+00025800: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
+00025810: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+00025820: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+00025830: 292e 7465 7874 0d0a 2020 2020 2020 2020  ).text..        
+00025840: 2020 2020 6465 6275 675f 6c61 6e67 5f6b      debug_lang_k
+00025850: 7761 7267 7320 3d20 7365 6c66 2e64 6562  wargs = self.deb
+00025860: 7567 5f6c 616e 675f 6b77 6172 6773 2866  ug_lang_kwargs(f
+00025870: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
+00025880: 5f6c 616e 6775 6167 652c 2073 656c 662e  _language, self.
+00025890: 6465 6661 756c 745f 6672 6f6d 5f6c 616e  default_from_lan
+000258a0: 6775 6167 652c 2069 665f 7072 696e 745f  guage, if_print_
+000258b0: 7761 726e 696e 6729 0d0a 2020 2020 2020  warning)..      
+000258c0: 2020 2020 2020 7365 6c66 2e6c 616e 6775        self.langu
+000258d0: 6167 655f 6d61 7020 3d20 7365 6c66 2e67  age_map = self.g
+000258e0: 6574 5f6c 616e 6775 6167 655f 6d61 7028  et_language_map(
+000258f0: 6c61 6e67 5f68 746d 6c2c 202a 2a64 6562  lang_html, **deb
+00025900: 7567 5f6c 616e 675f 6b77 6172 6773 290d  ug_lang_kwargs).
+00025910: 0a0d 0a20 2020 2020 2020 2020 2020 2073  ...            s
+00025920: 656c 662e 6170 695f 6b65 7920 3d20 7365  elf.api_key = se
+00025930: 6c66 2e67 6574 5f61 7069 6b65 7928 6c61  lf.get_apikey(la
+00025940: 6e67 5f68 746d 6c29 0d0a 2020 2020 2020  ng_html)..      
+00025950: 2020 2020 2020 7365 6c66 2e61 7069 5f68        self.api_h
+00025960: 6561 6465 7273 2e75 7064 6174 6528 7b27  eaders.update({'
+00025970: 4150 492d 4b45 5927 3a20 7365 6c66 2e61  API-KEY': self.a
+00025980: 7069 5f6b 6579 7d29 0d0a 0d0a 2020 2020  pi_key})....    
+00025990: 2020 2020 6672 6f6d 5f6c 616e 6775 6167      from_languag
+000259a0: 652c 2074 6f5f 6c61 6e67 7561 6765 203d  e, to_language =
+000259b0: 2073 656c 662e 6368 6563 6b5f 6c61 6e67   self.check_lang
+000259c0: 7561 6765 2866 726f 6d5f 6c61 6e67 7561  uage(from_langua
+000259d0: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
+000259e0: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+000259f0: 6170 2c20 6f75 7470 7574 5f7a 683d 7365  ap, output_zh=se
+00025a00: 6c66 2e6f 7574 7075 745f 7a68 2c0d 0a20  lf.output_zh,.. 
+00025a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025a40: 2020 2020 2020 2020 6f75 7470 7574 5f65          output_e
+00025a50: 6e5f 7472 616e 736c 6174 6f72 3d27 6974  n_translator='it
+00025a60: 7261 6e73 6c61 7465 272c 206f 7574 7075  ranslate', outpu
+00025a70: 745f 656e 3d27 656e 2d55 5327 290d 0a0d  t_en='en-US')...
+00025a80: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00025a90: 203d 207b 0d0a 2020 2020 2020 2020 2020   = {..          
+00025aa0: 2020 2773 6f75 7263 6527 3a20 7b27 6469    'source': {'di
+00025ab0: 616c 6563 7427 3a20 6672 6f6d 5f6c 616e  alect': from_lan
+00025ac0: 6775 6167 652c 2027 7465 7874 273a 2071  guage, 'text': q
+00025ad0: 7565 7279 5f74 6578 742c 2027 7769 7468  uery_text, 'with
+00025ae0: 273a 205b 2773 796e 6f6e 796d 7327 5d7d  ': ['synonyms']}
+00025af0: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+00025b00: 7461 7267 6574 273a 207b 2764 6961 6c65  target': {'diale
+00025b10: 6374 273a 2074 6f5f 6c61 6e67 7561 6765  ct': to_language
+00025b20: 7d2c 0d0a 2020 2020 2020 2020 7d0d 0a20  },..        }.. 
+00025b30: 2020 2020 2020 2072 203d 2073 656c 662e         r = self.
+00025b40: 7365 7373 696f 6e2e 706f 7374 2873 656c  session.post(sel
+00025b50: 662e 6170 695f 7572 6c2c 2068 6561 6465  f.api_url, heade
+00025b60: 7273 3d73 656c 662e 6170 695f 6865 6164  rs=self.api_head
+00025b70: 6572 732c 206a 736f 6e3d 7061 796c 6f61  ers, json=payloa
+00025b80: 642c 2074 696d 656f 7574 3d74 696d 656f  d, timeout=timeo
+00025b90: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
+00025ba0: 6965 7329 0d0a 2020 2020 2020 2020 722e  ies)..        r.
+00025bb0: 7261 6973 655f 666f 725f 7374 6174 7573  raise_for_status
+00025bc0: 2829 0d0a 2020 2020 2020 2020 6461 7461  ()..        data
+00025bd0: 203d 2072 2e6a 736f 6e28 290d 0a20 2020   = r.json()..   
+00025be0: 2020 2020 2074 696d 652e 736c 6565 7028       time.sleep(
+00025bf0: 736c 6565 705f 7365 636f 6e64 7329 0d0a  sleep_seconds)..
+00025c00: 2020 2020 2020 2020 7365 6c66 2e71 7565          self.que
+00025c10: 7279 5f63 6f75 6e74 202b 3d20 310d 0a20  ry_count += 1.. 
+00025c20: 2020 2020 2020 2072 6574 7572 6e20 6461         return da
+00025c30: 7461 2069 6620 6973 5f64 6574 6169 6c5f  ta if is_detail_
+00025c40: 7265 7375 6c74 2065 6c73 6520 6461 7461  result else data
+00025c50: 5b27 7461 7267 6574 275d 5b27 7465 7874  ['target']['text
+00025c60: 275d 0d0a 0d0a 0d0a 636c 6173 7320 5472  ']......class Tr
+00025c70: 616e 736c 6174 6543 6f6d 2854 7365 293a  anslateCom(Tse):
+00025c80: 0d0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+00025c90: 5f5f 2873 656c 6629 3a0d 0a20 2020 2020  __(self):..     
+00025ca0: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
+00025cb0: 745f 5f28 290d 0a20 2020 2020 2020 2073  t__()..        s
+00025cc0: 656c 662e 6265 6769 6e5f 7469 6d65 203d  elf.begin_time =
+00025cd0: 2074 696d 652e 7469 6d65 2829 0d0a 2020   time.time()..  
+00025ce0: 2020 2020 2020 7365 6c66 2e68 6f73 745f        self.host_
+00025cf0: 7572 6c20 3d20 2768 7474 7073 3a2f 2f77  url = 'https://w
+00025d00: 7777 2e74 7261 6e73 6c61 7465 2e63 6f6d  ww.translate.com
+00025d10: 2f6d 6163 6869 6e65 2d74 7261 6e73 6c61  /machine-transla
+00025d20: 7469 6f6e 270d 0a20 2020 2020 2020 2073  tion'..        s
+00025d30: 656c 662e 6170 695f 7572 6c20 3d20 2768  elf.api_url = 'h
+00025d40: 7474 7073 3a2f 2f77 7777 2e74 7261 6e73  ttps://www.trans
+00025d50: 6c61 7465 2e63 6f6d 2f74 7261 6e73 6c61  late.com/transla
+00025d60: 746f 722f 7472 616e 736c 6174 655f 6d74  tor/translate_mt
+00025d70: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+00025d80: 6c61 6e67 5f64 6574 6563 745f 7572 6c20  lang_detect_url 
+00025d90: 3d20 2768 7474 7073 3a2f 2f77 7777 2e74  = 'https://www.t
+00025da0: 7261 6e73 6c61 7465 2e63 6f6d 2f74 7261  ranslate.com/tra
+00025db0: 6e73 6c61 746f 722f 616a 6178 5f6c 616e  nslator/ajax_lan
+00025dc0: 675f 6175 746f 5f64 6574 6563 7427 0d0a  g_auto_detect'..
+00025dd0: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
+00025de0: 6775 6167 655f 7572 6c20 3d20 2768 7474  guage_url = 'htt
+00025df0: 7073 3a2f 2f77 7777 2e74 7261 6e73 6c61  ps://www.transla
+00025e00: 7465 2e63 6f6d 2f61 6a61 782f 6c61 6e67  te.com/ajax/lang
+00025e10: 7561 6765 2f68 742f 616c 6c27 0d0a 2020  uage/ht/all'..  
+00025e20: 2020 2020 2020 7365 6c66 2e68 6f73 745f        self.host_
+00025e30: 6865 6164 6572 7320 3d20 7365 6c66 2e67  headers = self.g
+00025e40: 6574 5f68 6561 6465 7273 2873 656c 662e  et_headers(self.
+00025e50: 686f 7374 5f75 726c 2c20 6966 5f61 7069  host_url, if_api
+00025e60: 3d46 616c 7365 290d 0a20 2020 2020 2020  =False)..       
+00025e70: 2073 656c 662e 6170 695f 6865 6164 6572   self.api_header
+00025e80: 7320 3d20 7365 6c66 2e67 6574 5f68 6561  s = self.get_hea
+00025e90: 6465 7273 2873 656c 662e 686f 7374 5f75  ders(self.host_u
+00025ea0: 726c 2c20 6966 5f61 7069 3d54 7275 652c  rl, if_api=True,
+00025eb0: 2069 665f 6a73 6f6e 5f66 6f72 5f61 7069   if_json_for_api
+00025ec0: 3d46 616c 7365 290d 0a20 2020 2020 2020  =False)..       
+00025ed0: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
+00025ee0: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
+00025ef0: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
+00025f00: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+00025f10: 7365 6c66 2e6c 616e 6775 6167 655f 6465  self.language_de
+00025f20: 7363 7269 7074 696f 6e20 3d20 4e6f 6e65  scription = None
+00025f30: 0d0a 2020 2020 2020 2020 7365 6c66 2e71  ..        self.q
+00025f40: 7565 7279 5f63 6f75 6e74 203d 2030 0d0a  uery_count = 0..
+00025f50: 2020 2020 2020 2020 7365 6c66 2e6f 7574          self.out
+00025f60: 7075 745f 7a68 203d 2027 7a68 270d 0a20  put_zh = 'zh'.. 
+00025f70: 2020 2020 2020 2073 656c 662e 696e 7075         self.inpu
+00025f80: 745f 6c69 6d69 7420 3d20 696e 7428 312e  t_limit = int(1.
+00025f90: 3565 3429 2020 2320 6669 6674 6565 6e20  5e4)  # fifteen 
+00025fa0: 7468 6f75 7361 6e64 206c 6574 7465 7273  thousand letters
+00025fb0: 206c 6566 7420 746f 6461 792e 0d0a 2020   left today...  
+00025fc0: 2020 2020 2020 7365 6c66 2e64 6566 6175        self.defau
+00025fd0: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
+00025fe0: 203d 2073 656c 662e 6f75 7470 7574 5f7a   = self.output_z
+00025ff0: 680d 0a0d 0a20 2020 2040 5473 652e 6465  h....    @Tse.de
+00026000: 6275 675f 6c61 6e67 7561 6765 5f6d 6170  bug_language_map
+00026010: 0d0a 2020 2020 6465 6620 6765 745f 6c61  ..    def get_la
+00026020: 6e67 7561 6765 5f6d 6170 2873 656c 662c  nguage_map(self,
+00026030: 206c 616e 675f 6465 7363 3a20 6469 6374   lang_desc: dict
+00026040: 2c20 2a2a 6b77 6172 6773 3a20 4c61 6e67  , **kwargs: Lang
+00026050: 4d61 704b 7761 7267 7354 7970 6529 202d  MapKwargsType) -
+00026060: 3e20 6469 6374 3a0d 0a20 2020 2020 2020  > dict:..       
+00026070: 2072 6574 7572 6e20 7b69 7465 6d5b 2763   return {item['c
+00026080: 6f64 6527 5d3a 205b 6974 5b27 636f 6465  ode']: [it['code
+00026090: 275d 2066 6f72 2069 7420 696e 2069 7465  '] for it in ite
+000260a0: 6d5b 2761 7661 696c 6162 6c65 5472 616e  m['availableTran
+000260b0: 736c 6174 696f 6e4c 616e 6775 6167 6573  slationLanguages
+000260c0: 275d 5d20 666f 7220 6974 656d 2069 6e20  ']] for item in 
+000260d0: 6c61 6e67 5f64 6573 637d 0d0a 0d0a 2020  lang_desc}....  
+000260e0: 2020 4054 7365 2e74 696d 655f 7374 6174    @Tse.time_stat
+000260f0: 0d0a 2020 2020 4054 7365 2e63 6865 636b  ..    @Tse.check
+00026100: 5f71 7565 7279 0d0a 2020 2020 6465 6620  _query..    def 
+00026110: 7472 616e 736c 6174 6543 6f6d 5f61 7069  translateCom_api
+00026120: 2873 656c 662c 2071 7565 7279 5f74 6578  (self, query_tex
+00026130: 743a 2073 7472 2c20 6672 6f6d 5f6c 616e  t: str, from_lan
+00026140: 6775 6167 653a 2073 7472 203d 2027 6175  guage: str = 'au
+00026150: 746f 272c 2074 6f5f 6c61 6e67 7561 6765  to', to_language
+00026160: 3a20 7374 7220 3d20 2765 6e27 2c20 2a2a  : str = 'en', **
+00026170: 6b77 6172 6773 3a20 4170 694b 7761 7267  kwargs: ApiKwarg
+00026180: 7354 7970 6529 202d 3e20 556e 696f 6e5b  sType) -> Union[
+00026190: 7374 722c 2064 6963 745d 3a0d 0a20 2020  str, dict]:..   
+000261a0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+000261b0: 2020 6874 7470 733a 2f2f 7777 772e 7472    https://www.tr
+000261c0: 616e 736c 6174 652e 636f 6d2f 6d61 6368  anslate.com/mach
+000261d0: 696e 652d 7472 616e 736c 6174 696f 6e0d  ine-translation.
+000261e0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+000261f0: 7175 6572 795f 7465 7874 3a20 7374 722c  query_text: str,
+00026200: 206d 7573 742e 0d0a 2020 2020 2020 2020   must...        
+00026210: 3a70 6172 616d 2066 726f 6d5f 6c61 6e67  :param from_lang
+00026220: 7561 6765 3a20 7374 722c 2064 6566 6175  uage: str, defau
+00026230: 6c74 2027 6175 746f 272e 0d0a 2020 2020  lt 'auto'...    
+00026240: 2020 2020 3a70 6172 616d 2074 6f5f 6c61      :param to_la
+00026250: 6e67 7561 6765 3a20 7374 722c 2064 6566  nguage: str, def
+00026260: 6175 6c74 2027 656e 272e 0d0a 2020 2020  ault 'en'...    
+00026270: 2020 2020 3a70 6172 616d 202a 2a6b 7761      :param **kwa
+00026280: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
+00026290: 2020 2020 2020 3a70 6172 616d 2074 696d        :param tim
+000262a0: 656f 7574 3a20 666c 6f61 742c 2064 6566  eout: float, def
+000262b0: 6175 6c74 204e 6f6e 652e 0d0a 2020 2020  ault None...    
+000262c0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+000262d0: 616d 2070 726f 7869 6573 3a20 6469 6374  am proxies: dict
+000262e0: 2c20 6465 6661 756c 7420 4e6f 6e65 2e0d  , default None..
+000262f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00026300: 203a 7061 7261 6d20 736c 6565 705f 7365   :param sleep_se
+00026310: 636f 6e64 733a 2066 6c6f 6174 2c20 6465  conds: float, de
+00026320: 6661 756c 7420 302e 0d0a 2020 2020 2020  fault 0...      
+00026330: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00026340: 2069 735f 6465 7461 696c 5f72 6573 756c   is_detail_resul
+00026350: 743a 2062 6f6f 6c2c 2064 6566 6175 6c74  t: bool, default
+00026360: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
+00026370: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+00026380: 6966 5f69 676e 6f72 655f 6c69 6d69 745f  if_ignore_limit_
+00026390: 6f66 5f6c 656e 6774 683a 2062 6f6f 6c2c  of_length: bool,
+000263a0: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
+000263b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000263c0: 203a 7061 7261 6d20 6c69 6d69 745f 6f66   :param limit_of
+000263d0: 5f6c 656e 6774 683a 2069 6e74 2c20 6465  _length: int, de
+000263e0: 6661 756c 7420 3230 3030 302e 0d0a 2020  fault 20000...  
+000263f0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+00026400: 6172 616d 2069 665f 6967 6e6f 7265 5f65  aram if_ignore_e
+00026410: 6d70 7479 5f71 7565 7279 3a20 626f 6f6c  mpty_query: bool
+00026420: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+00026430: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00026440: 2020 3a70 6172 616d 2075 7064 6174 655f    :param update_
+00026450: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
+00026460: 6571 3a20 696e 742c 2064 6566 6175 6c74  eq: int, default
+00026470: 2031 3030 302e 0d0a 2020 2020 2020 2020   1000...        
+00026480: 2020 2020 2020 2020 3a70 6172 616d 2075          :param u
+00026490: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+000264a0: 7465 725f 7365 636f 6e64 733a 2066 6c6f  ter_seconds: flo
+000264b0: 6174 2c20 6465 6661 756c 7420 3135 3030  at, default 1500
+000264c0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+000264d0: 2020 203a 7061 7261 6d20 6966 5f73 686f     :param if_sho
+000264e0: 775f 7469 6d65 5f73 7461 743a 2062 6f6f  w_time_stat: boo
+000264f0: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+00026500: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00026510: 2020 203a 7061 7261 6d20 7368 6f77 5f74     :param show_t
+00026520: 696d 655f 7374 6174 5f70 7265 6369 7369  ime_stat_precisi
+00026530: 6f6e 3a20 696e 742c 2064 6566 6175 6c74  on: int, default
+00026540: 2032 2e0d 0a20 2020 2020 2020 2020 2020   2...           
+00026550: 2020 2020 203a 7061 7261 6d20 6966 5f70       :param if_p
+00026560: 7269 6e74 5f77 6172 6e69 6e67 3a20 626f  rint_warning: bo
+00026570: 6f6c 2c20 6465 6661 756c 7420 5472 7565  ol, default True
+00026580: 2e0d 0a20 2020 2020 2020 203a 7265 7475  ...        :retu
+00026590: 726e 3a20 7374 7220 6f72 2064 6963 740d  rn: str or dict.
+000265a0: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
+000265b0: 2020 2020 2020 2020 7469 6d65 6f75 7420          timeout 
+000265c0: 3d20 6b77 6172 6773 2e67 6574 2827 7469  = kwargs.get('ti
+000265d0: 6d65 6f75 7427 2c20 4e6f 6e65 290d 0a20  meout', None).. 
+000265e0: 2020 2020 2020 2070 726f 7869 6573 203d         proxies =
+000265f0: 206b 7761 7267 732e 6765 7428 2770 726f   kwargs.get('pro
+00026600: 7869 6573 272c 204e 6f6e 6529 0d0a 2020  xies', None)..  
+00026610: 2020 2020 2020 736c 6565 705f 7365 636f        sleep_seco
+00026620: 6e64 7320 3d20 6b77 6172 6773 2e67 6574  nds = kwargs.get
+00026630: 2827 736c 6565 705f 7365 636f 6e64 7327  ('sleep_seconds'
+00026640: 2c20 3029 0d0a 2020 2020 2020 2020 6966  , 0)..        if
+00026650: 5f70 7269 6e74 5f77 6172 6e69 6e67 203d  _print_warning =
+00026660: 206b 7761 7267 732e 6765 7428 2769 665f   kwargs.get('if_
+00026670: 7072 696e 745f 7761 726e 696e 6727 2c20  print_warning', 
+00026680: 5472 7565 290d 0a20 2020 2020 2020 2069  True)..        i
+00026690: 735f 6465 7461 696c 5f72 6573 756c 7420  s_detail_result 
+000266a0: 3d20 6b77 6172 6773 2e67 6574 2827 6973  = kwargs.get('is
+000266b0: 5f64 6574 6169 6c5f 7265 7375 6c74 272c  _detail_result',
+000266c0: 2046 616c 7365 290d 0a20 2020 2020 2020   False)..       
+000266d0: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
+000266e0: 6166 7465 725f 6672 6571 203d 206b 7761  after_freq = kwa
+000266f0: 7267 732e 6765 7428 2775 7064 6174 655f  rgs.get('update_
+00026700: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
+00026710: 6571 272c 2073 656c 662e 6465 6661 756c  eq', self.defaul
+00026720: 745f 7365 7373 696f 6e5f 6672 6571 290d  t_session_freq).
+00026730: 0a20 2020 2020 2020 2075 7064 6174 655f  .        update_
+00026740: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
+00026750: 636f 6e64 7320 3d20 6b77 6172 6773 2e67  conds = kwargs.g
+00026760: 6574 2827 7570 6461 7465 5f73 6573 7369  et('update_sessi
+00026770: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
+00026780: 272c 2073 656c 662e 6465 6661 756c 745f  ', self.default_
+00026790: 7365 7373 696f 6e5f 7365 636f 6e64 7329  session_seconds)
+000267a0: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
+000267b0: 6865 636b 5f69 6e70 7574 5f6c 696d 6974  heck_input_limit
+000267c0: 2871 7565 7279 5f74 6578 742c 2073 656c  (query_text, sel
+000267d0: 662e 696e 7075 745f 6c69 6d69 7429 0d0a  f.input_limit)..
+000267e0: 0d0a 2020 2020 2020 2020 6e6f 745f 7570  ..        not_up
+000267f0: 6461 7465 5f63 6f6e 645f 6672 6571 203d  date_cond_freq =
+00026800: 2031 2069 6620 7365 6c66 2e71 7565 7279   1 if self.query
+00026810: 5f63 6f75 6e74 2025 2075 7064 6174 655f  _count % update_
+00026820: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
+00026830: 6571 2021 3d20 3020 656c 7365 2030 0d0a  eq != 0 else 0..
+00026840: 2020 2020 2020 2020 6e6f 745f 7570 6461          not_upda
+00026850: 7465 5f63 6f6e 645f 7469 6d65 203d 2031  te_cond_time = 1
+00026860: 2069 6620 7469 6d65 2e74 696d 6528 2920   if time.time() 
+00026870: 2d20 7365 6c66 2e62 6567 696e 5f74 696d  - self.begin_tim
+00026880: 6520 3c20 7570 6461 7465 5f73 6573 7369  e < update_sessi
+00026890: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
+000268a0: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
+000268b0: 2069 6620 6e6f 7420 2873 656c 662e 7365   if not (self.se
+000268c0: 7373 696f 6e20 616e 6420 7365 6c66 2e6c  ssion and self.l
+000268d0: 616e 6775 6167 655f 6d61 7020 616e 6420  anguage_map and 
+000268e0: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
+000268f0: 6672 6571 2061 6e64 206e 6f74 5f75 7064  freq and not_upd
+00026900: 6174 655f 636f 6e64 5f74 696d 6529 3a0d  ate_cond_time):.
+00026910: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00026920: 662e 6265 6769 6e5f 7469 6d65 203d 2074  f.begin_time = t
+00026930: 696d 652e 7469 6d65 2829 0d0a 2020 2020  ime.time()..    
+00026940: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
+00026950: 7369 6f6e 203d 2072 6571 7565 7374 732e  sion = requests.
+00026960: 5365 7373 696f 6e28 290d 0a20 2020 2020  Session()..     
+00026970: 2020 2020 2020 205f 203d 2073 656c 662e         _ = self.
+00026980: 7365 7373 696f 6e2e 6765 7428 7365 6c66  session.get(self
+00026990: 2e68 6f73 745f 7572 6c2c 2068 6561 6465  .host_url, heade
+000269a0: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
+000269b0: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+000269c0: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+000269d0: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
+000269e0: 2020 2020 206c 616e 675f 7220 3d20 7365       lang_r = se
+000269f0: 6c66 2e73 6573 7369 6f6e 2e67 6574 2873  lf.session.get(s
+00026a00: 656c 662e 6c61 6e67 7561 6765 5f75 726c  elf.language_url
+00026a10: 2c20 6865 6164 6572 733d 7365 6c66 2e68  , headers=self.h
+00026a20: 6f73 745f 6865 6164 6572 732c 2074 696d  ost_headers, tim
+00026a30: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
+00026a40: 6f78 6965 733d 7072 6f78 6965 7329 0d0a  oxies=proxies)..
+00026a50: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00026a60: 2e6c 616e 6775 6167 655f 6465 7363 7269  .language_descri
+00026a70: 7074 696f 6e20 3d20 6c61 6e67 5f72 2e6a  ption = lang_r.j
+00026a80: 736f 6e28 290d 0a20 2020 2020 2020 2020  son()..         
+00026a90: 2020 2064 6562 7567 5f6c 616e 675f 6b77     debug_lang_kw
+00026aa0: 6172 6773 203d 2073 656c 662e 6465 6275  args = self.debu
+00026ab0: 675f 6c61 6e67 5f6b 7761 7267 7328 6672  g_lang_kwargs(fr
+00026ac0: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
+00026ad0: 6c61 6e67 7561 6765 2c20 7365 6c66 2e64  language, self.d
+00026ae0: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
+00026af0: 7561 6765 2c20 6966 5f70 7269 6e74 5f77  uage, if_print_w
+00026b00: 6172 6e69 6e67 290d 0a20 2020 2020 2020  arning)..       
+00026b10: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
+00026b20: 6765 5f6d 6170 203d 2073 656c 662e 6765  ge_map = self.ge
+00026b30: 745f 6c61 6e67 7561 6765 5f6d 6170 2873  t_language_map(s
+00026b40: 656c 662e 6c61 6e67 7561 6765 5f64 6573  elf.language_des
+00026b50: 6372 6970 7469 6f6e 2c20 2a2a 6465 6275  cription, **debu
+00026b60: 675f 6c61 6e67 5f6b 7761 7267 7329 0d0a  g_lang_kwargs)..
+00026b70: 0d0a 2020 2020 2020 2020 6966 2066 726f  ..        if fro
+00026b80: 6d5f 6c61 6e67 7561 6765 203d 3d20 2761  m_language == 'a
+00026b90: 7574 6f27 3a0d 0a20 2020 2020 2020 2020  uto':..         
+00026ba0: 2020 2064 6574 6563 745f 666f 726d 203d     detect_form =
+00026bb0: 207b 2774 6578 745f 746f 5f74 7261 6e73   {'text_to_trans
+00026bc0: 6c61 7465 273a 2071 7565 7279 5f74 6578  late': query_tex
+00026bd0: 747d 0d0a 2020 2020 2020 2020 2020 2020  t}..            
+00026be0: 725f 6465 7465 6374 203d 2073 656c 662e  r_detect = self.
+00026bf0: 7365 7373 696f 6e2e 706f 7374 2873 656c  session.post(sel
+00026c00: 662e 6c61 6e67 5f64 6574 6563 745f 7572  f.lang_detect_ur
+00026c10: 6c2c 2064 6174 613d 6465 7465 6374 5f66  l, data=detect_f
+00026c20: 6f72 6d2c 2068 6561 6465 7273 3d73 656c  orm, headers=sel
+00026c30: 662e 6170 695f 6865 6164 6572 732c 2074  f.api_headers, t
+00026c40: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
+00026c50: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
+00026c60: 0d0a 2020 2020 2020 2020 2020 2020 6672  ..            fr
+00026c70: 6f6d 5f6c 616e 6775 6167 6520 3d20 725f  om_language = r_
+00026c80: 6465 7465 6374 2e6a 736f 6e28 295b 276c  detect.json()['l
+00026c90: 616e 6775 6167 6527 5d0d 0a0d 0a20 2020  anguage']....   
+00026ca0: 2020 2020 2066 726f 6d5f 6c61 6e67 7561       from_langua
+00026cb0: 6765 2c20 746f 5f6c 616e 6775 6167 6520  ge, to_language 
+00026cc0: 3d20 7365 6c66 2e63 6865 636b 5f6c 616e  = self.check_lan
+00026cd0: 6775 6167 6528 6672 6f6d 5f6c 616e 6775  guage(from_langu
+00026ce0: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
+00026cf0: 2c20 7365 6c66 2e6c 616e 6775 6167 655f  , self.language_
+00026d00: 6d61 702c 206f 7574 7075 745f 7a68 3d73  map, output_zh=s
+00026d10: 656c 662e 6f75 7470 7574 5f7a 6829 0d0a  elf.output_zh)..
+00026d20: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00026d30: 6420 3d20 7b0d 0a20 2020 2020 2020 2020  d = {..         
+00026d40: 2020 2027 7465 7874 5f74 6f5f 7472 616e     'text_to_tran
+00026d50: 736c 6174 6527 3a20 7175 6572 795f 7465  slate': query_te
+00026d60: 7874 2c0d 0a20 2020 2020 2020 2020 2020  xt,..           
+00026d70: 2027 736f 7572 6365 5f6c 616e 6727 3a20   'source_lang': 
+00026d80: 6672 6f6d 5f6c 616e 6775 6167 652c 0d0a  from_language,..
+00026d90: 2020 2020 2020 2020 2020 2020 2774 7261              'tra
+00026da0: 6e73 6c61 7465 645f 6c61 6e67 273a 2074  nslated_lang': t
+00026db0: 6f5f 6c61 6e67 7561 6765 2c0d 0a20 2020  o_language,..   
+00026dc0: 2020 2020 2020 2020 2027 7573 655f 6361           'use_ca
+00026dd0: 6368 655f 6f6e 6c79 273a 2027 6661 6c73  che_only': 'fals
+00026de0: 6527 2c0d 0a20 2020 2020 2020 207d 0d0a  e',..        }..
+00026df0: 2020 2020 2020 2020 7220 3d20 7365 6c66          r = self
+00026e00: 2e73 6573 7369 6f6e 2e70 6f73 7428 7365  .session.post(se
+00026e10: 6c66 2e61 7069 5f75 726c 2c20 6461 7461  lf.api_url, data
+00026e20: 3d70 6179 6c6f 6164 2c20 6865 6164 6572  =payload, header
+00026e30: 733d 7365 6c66 2e61 7069 5f68 6561 6465  s=self.api_heade
+00026e40: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
+00026e50: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
+00026e60: 7869 6573 290d 0a20 2020 2020 2020 2072  xies)..        r
+00026e70: 2e72 6169 7365 5f66 6f72 5f73 7461 7475  .raise_for_statu
+00026e80: 7328 290d 0a20 2020 2020 2020 2064 6174  s()..        dat
+00026e90: 6120 3d20 722e 6a73 6f6e 2829 0d0a 2020  a = r.json()..  
+00026ea0: 2020 2020 2020 7469 6d65 2e73 6c65 6570        time.sleep
+00026eb0: 2873 6c65 6570 5f73 6563 6f6e 6473 290d  (sleep_seconds).
+00026ec0: 0a20 2020 2020 2020 2073 656c 662e 7175  .        self.qu
+00026ed0: 6572 795f 636f 756e 7420 2b3d 2031 0d0a  ery_count += 1..
+00026ee0: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+00026ef0: 6174 6120 6966 2069 735f 6465 7461 696c  ata if is_detail
+00026f00: 5f72 6573 756c 7420 656c 7365 2064 6174  _result else dat
+00026f10: 615b 2774 7261 6e73 6c61 7465 645f 7465  a['translated_te
+00026f20: 7874 275d 2020 2320 7472 616e 736c 6174  xt']  # translat
+00026f30: 696f 6e5f 736f 7572 6365 2069 7320 6d69  ion_source is mi
+00026f40: 6372 6f73 6f66 742c 2077 7466 210d 0a0d  crosoft, wtf!...
+00026f50: 0a0d 0a63 6c61 7373 2055 7469 6265 7428  ...class Utibet(
+00026f60: 5473 6529 3a0d 0a20 2020 2064 6566 205f  Tse):..    def _
+00026f70: 5f69 6e69 745f 5f28 7365 6c66 293a 0d0a  _init__(self):..
+00026f80: 2020 2020 2020 2020 7375 7065 7228 292e          super().
+00026f90: 5f5f 696e 6974 5f5f 2829 0d0a 2020 2020  __init__()..    
+00026fa0: 2020 2020 7365 6c66 2e62 6567 696e 5f74      self.begin_t
+00026fb0: 696d 6520 3d20 7469 6d65 2e74 696d 6528  ime = time.time(
+00026fc0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00026fd0: 686f 7374 5f75 726c 203d 2027 6874 7470  host_url = 'http
+00026fe0: 3a2f 2f6d 742e 7574 6962 6574 2e65 6475  ://mt.utibet.edu
+00026ff0: 2e63 6e2f 6d74 2720 2023 206d 7573 7420  .cn/mt'  # must 
+00027000: 6874 7470 0d0a 2020 2020 2020 2020 7365  http..        se
+00027010: 6c66 2e61 7069 5f75 726c 203d 2073 656c  lf.api_url = sel
+00027020: 662e 686f 7374 5f75 726c 0d0a 2020 2020  f.host_url..    
+00027030: 2020 2020 7365 6c66 2e68 6f73 745f 6865      self.host_he
+00027040: 6164 6572 7320 3d20 7365 6c66 2e67 6574  aders = self.get
+00027050: 5f68 6561 6465 7273 2873 656c 662e 686f  _headers(self.ho
+00027060: 7374 5f75 726c 2c20 6966 5f61 7069 3d46  st_url, if_api=F
+00027070: 616c 7365 290d 0a20 2020 2020 2020 2073  alse)..        s
+00027080: 656c 662e 6170 695f 6865 6164 6572 7320  elf.api_headers 
+00027090: 3d20 7365 6c66 2e67 6574 5f68 6561 6465  = self.get_heade
+000270a0: 7273 2873 656c 662e 686f 7374 5f75 726c  rs(self.host_url
+000270b0: 2c20 6966 5f61 7069 3d54 7275 652c 2069  , if_api=True, i
+000270c0: 665f 6a73 6f6e 5f66 6f72 5f61 7069 3d46  f_json_for_api=F
+000270d0: 616c 7365 290d 0a20 2020 2020 2020 2073  alse)..        s
+000270e0: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
+000270f0: 203d 207b 2774 6927 3a20 5b27 7a68 275d   = {'ti': ['zh']
+00027100: 2c20 277a 6827 3a20 5b27 7469 275d 7d0d  , 'zh': ['ti']}.
+00027110: 0a20 2020 2020 2020 2073 656c 662e 7365  .        self.se
+00027120: 7373 696f 6e20 3d20 4e6f 6e65 0d0a 2020  ssion = None..  
+00027130: 2020 2020 2020 7365 6c66 2e71 7565 7279        self.query
+00027140: 5f63 6f75 6e74 203d 2030 0d0a 2020 2020  _count = 0..    
+00027150: 2020 2020 7365 6c66 2e6f 7574 7075 745f      self.output_
+00027160: 7a68 203d 2027 7a68 270d 0a20 2020 2020  zh = 'zh'..     
+00027170: 2020 2073 656c 662e 696e 7075 745f 6c69     self.input_li
+00027180: 6d69 7420 3d20 696e 7428 3565 3329 2020  mit = int(5e3)  
+00027190: 2320 756e 6b6e 6f77 6e0d 0a20 2020 2020  # unknown..     
+000271a0: 2020 2073 656c 662e 6465 6661 756c 745f     self.default_
+000271b0: 6672 6f6d 5f6c 616e 6775 6167 6520 3d20  from_language = 
+000271c0: 7365 6c66 2e6f 7574 7075 745f 7a68 0d0a  self.output_zh..
+000271d0: 0d0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
+000271e0: 7265 7375 6c74 2873 656c 662c 2068 6f73  result(self, hos
+000271f0: 745f 6874 6d6c 3a20 7374 7229 202d 3e20  t_html: str) -> 
+00027200: 7374 723a 0d0a 2020 2020 2020 2020 6574  str:..        et
+00027210: 203d 206c 786d 6c2e 6574 7265 652e 4854   = lxml.etree.HT
+00027220: 4d4c 2868 6f73 745f 6874 6d6c 290d 0a20  ML(host_html).. 
+00027230: 2020 2020 2020 2072 6574 7572 6e20 6574         return et
+00027240: 2e78 7061 7468 2827 2f2f 2a5b 406e 616d  .xpath('//*[@nam
+00027250: 653d 2274 6774 225d 2f74 6578 7428 2927  e="tgt"]/text()'
+00027260: 295b 305d 0d0a 0d0a 2020 2020 4054 7365  )[0]....    @Tse
+00027270: 2e74 696d 655f 7374 6174 0d0a 2020 2020  .time_stat..    
+00027280: 4054 7365 2e63 6865 636b 5f71 7565 7279  @Tse.check_query
+00027290: 0d0a 2020 2020 6465 6620 7574 6962 6574  ..    def utibet
+000272a0: 5f61 7069 2873 656c 662c 2071 7565 7279  _api(self, query
+000272b0: 5f74 6578 743a 2073 7472 2c20 6672 6f6d  _text: str, from
+000272c0: 5f6c 616e 6775 6167 653a 2073 7472 203d  _language: str =
+000272d0: 2027 6175 746f 272c 2074 6f5f 6c61 6e67   'auto', to_lang
+000272e0: 7561 6765 3a20 7374 7220 3d20 2774 6927  uage: str = 'ti'
+000272f0: 2c20 2a2a 6b77 6172 6773 3a20 4170 694b  , **kwargs: ApiK
+00027300: 7761 7267 7354 7970 6529 202d 3e20 556e  wargsType) -> Un
+00027310: 696f 6e5b 7374 722c 2064 6963 745d 3a0d  ion[str, dict]:.
+00027320: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00027330: 2020 2020 2020 6874 7470 3a2f 2f6d 742e        http://mt.
+00027340: 7574 6962 6574 2e65 6475 2e63 6e2f 6d74  utibet.edu.cn/mt
+00027350: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+00027360: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
+00027370: 2c20 6d75 7374 2e0d 0a20 2020 2020 2020  , must...       
+00027380: 203a 7061 7261 6d20 6672 6f6d 5f6c 616e   :param from_lan
+00027390: 6775 6167 653a 2073 7472 2c20 6465 6661  guage: str, defa
+000273a0: 756c 7420 2761 7574 6f27 2c20 6571 7561  ult 'auto', equa
+000273b0: 6c73 2074 6f20 277a 6827 2e0d 0a20 2020  ls to 'zh'...   
+000273c0: 2020 2020 203a 7061 7261 6d20 746f 5f6c       :param to_l
+000273d0: 616e 6775 6167 653a 2073 7472 2c20 6465  anguage: str, de
+000273e0: 6661 756c 7420 2774 6927 2e0d 0a20 2020  fault 'ti'...   
+000273f0: 2020 2020 203a 7061 7261 6d20 2a2a 6b77       :param **kw
+00027400: 6172 6773 3a0d 0a20 2020 2020 2020 2020  args:..         
+00027410: 2020 2020 2020 203a 7061 7261 6d20 7469         :param ti
+00027420: 6d65 6f75 743a 2066 6c6f 6174 2c20 6465  meout: float, de
+00027430: 6661 756c 7420 4e6f 6e65 2e0d 0a20 2020  fault None...   
+00027440: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00027450: 7261 6d20 7072 6f78 6965 733a 2064 6963  ram proxies: dic
+00027460: 742c 2064 6566 6175 6c74 204e 6f6e 652e  t, default None.
+00027470: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00027480: 2020 3a70 6172 616d 2073 6c65 6570 5f73    :param sleep_s
+00027490: 6563 6f6e 6473 3a20 666c 6f61 742c 2064  econds: float, d
+000274a0: 6566 6175 6c74 2030 2e0d 0a20 2020 2020  efault 0...     
+000274b0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+000274c0: 6d20 6973 5f64 6574 6169 6c5f 7265 7375  m is_detail_resu
+000274d0: 6c74 3a20 626f 6f6c 2c20 6465 6661 756c  lt: bool, defaul
+000274e0: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+000274f0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00027500: 2069 665f 6967 6e6f 7265 5f6c 696d 6974   if_ignore_limit
+00027510: 5f6f 665f 6c65 6e67 7468 3a20 626f 6f6c  _of_length: bool
+00027520: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+00027530: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00027540: 2020 3a70 6172 616d 206c 696d 6974 5f6f    :param limit_o
+00027550: 665f 6c65 6e67 7468 3a20 696e 742c 2064  f_length: int, d
+00027560: 6566 6175 6c74 2032 3030 3030 2e0d 0a20  efault 20000... 
+00027570: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00027580: 7061 7261 6d20 6966 5f69 676e 6f72 655f  param if_ignore_
+00027590: 656d 7074 795f 7175 6572 793a 2062 6f6f  empty_query: boo
+000275a0: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+000275b0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+000275c0: 2020 203a 7061 7261 6d20 7570 6461 7465     :param update
+000275d0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
+000275e0: 7265 713a 2069 6e74 2c20 6465 6661 756c  req: int, defaul
+000275f0: 7420 3130 3030 2e0d 0a20 2020 2020 2020  t 1000...       
+00027600: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+00027610: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+00027620: 6674 6572 5f73 6563 6f6e 6473 3a20 666c  fter_seconds: fl
+00027630: 6f61 742c 2064 6566 6175 6c74 2031 3530  oat, default 150
+00027640: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+00027650: 2020 2020 3a70 6172 616d 2069 665f 7368      :param if_sh
+00027660: 6f77 5f74 696d 655f 7374 6174 3a20 626f  ow_time_stat: bo
+00027670: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
+00027680: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+00027690: 2020 2020 3a70 6172 616d 2073 686f 775f      :param show_
+000276a0: 7469 6d65 5f73 7461 745f 7072 6563 6973  time_stat_precis
+000276b0: 696f 6e3a 2069 6e74 2c20 6465 6661 756c  ion: int, defaul
+000276c0: 7420 322e 0d0a 2020 2020 2020 2020 2020  t 2...          
+000276d0: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
+000276e0: 7072 696e 745f 7761 726e 696e 673a 2062  print_warning: b
+000276f0: 6f6f 6c2c 2064 6566 6175 6c74 2054 7275  ool, default Tru
+00027700: 652e 0d0a 2020 2020 2020 2020 3a72 6574  e...        :ret
+00027710: 7572 6e3a 2073 7472 206f 7220 6469 6374  urn: str or dict
+00027720: 0d0a 2020 2020 2020 2020 2222 220d 0a0d  ..        """...
+00027730: 0a20 2020 2020 2020 2074 696d 656f 7574  .        timeout
+00027740: 203d 206b 7761 7267 732e 6765 7428 2774   = kwargs.get('t
+00027750: 696d 656f 7574 272c 204e 6f6e 6529 0d0a  imeout', None)..
+00027760: 2020 2020 2020 2020 7072 6f78 6965 7320          proxies 
+00027770: 3d20 6b77 6172 6773 2e67 6574 2827 7072  = kwargs.get('pr
+00027780: 6f78 6965 7327 2c20 4e6f 6e65 290d 0a20  oxies', None).. 
+00027790: 2020 2020 2020 2073 6c65 6570 5f73 6563         sleep_sec
+000277a0: 6f6e 6473 203d 206b 7761 7267 732e 6765  onds = kwargs.ge
+000277b0: 7428 2773 6c65 6570 5f73 6563 6f6e 6473  t('sleep_seconds
+000277c0: 272c 2030 290d 0a20 2020 2020 2020 2069  ', 0)..        i
+000277d0: 665f 7072 696e 745f 7761 726e 696e 6720  f_print_warning 
+000277e0: 3d20 6b77 6172 6773 2e67 6574 2827 6966  = kwargs.get('if
+000277f0: 5f70 7269 6e74 5f77 6172 6e69 6e67 272c  _print_warning',
+00027800: 2054 7275 6529 0d0a 2020 2020 2020 2020   True)..        
+00027810: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
+00027820: 203d 206b 7761 7267 732e 6765 7428 2769   = kwargs.get('i
+00027830: 735f 6465 7461 696c 5f72 6573 756c 7427  s_detail_result'
+00027840: 2c20 4661 6c73 6529 0d0a 2020 2020 2020  , False)..      
+00027850: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
+00027860: 5f61 6674 6572 5f66 7265 7120 3d20 6b77  _after_freq = kw
+00027870: 6172 6773 2e67 6574 2827 7570 6461 7465  args.get('update
+00027880: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
+00027890: 7265 7127 2c20 7365 6c66 2e64 6566 6175  req', self.defau
+000278a0: 6c74 5f73 6573 7369 6f6e 5f66 7265 7129  lt_session_freq)
+000278b0: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
+000278c0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
+000278d0: 6563 6f6e 6473 203d 206b 7761 7267 732e  econds = kwargs.
+000278e0: 6765 7428 2775 7064 6174 655f 7365 7373  get('update_sess
+000278f0: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
+00027900: 7327 2c20 7365 6c66 2e64 6566 6175 6c74  s', self.default
+00027910: 5f73 6573 7369 6f6e 5f73 6563 6f6e 6473  _session_seconds
+00027920: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00027930: 6368 6563 6b5f 696e 7075 745f 6c69 6d69  check_input_limi
+00027940: 7428 7175 6572 795f 7465 7874 2c20 7365  t(query_text, se
+00027950: 6c66 2e69 6e70 7574 5f6c 696d 6974 290d  lf.input_limit).
+00027960: 0a0d 0a20 2020 2020 2020 206e 6f74 5f75  ...        not_u
+00027970: 7064 6174 655f 636f 6e64 5f66 7265 7120  pdate_cond_freq 
+00027980: 3d20 3120 6966 2073 656c 662e 7175 6572  = 1 if self.quer
+00027990: 795f 636f 756e 7420 2520 7570 6461 7465  y_count % update
+000279a0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
+000279b0: 7265 7120 213d 2030 2065 6c73 6520 300d  req != 0 else 0.
+000279c0: 0a20 2020 2020 2020 206e 6f74 5f75 7064  .        not_upd
+000279d0: 6174 655f 636f 6e64 5f74 696d 6520 3d20  ate_cond_time = 
+000279e0: 3120 6966 2074 696d 652e 7469 6d65 2829  1 if time.time()
+000279f0: 202d 2073 656c 662e 6265 6769 6e5f 7469   - self.begin_ti
+00027a00: 6d65 203c 2075 7064 6174 655f 7365 7373  me < update_sess
+00027a10: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
+00027a20: 7320 656c 7365 2030 0d0a 2020 2020 2020  s else 0..      
+00027a30: 2020 6966 206e 6f74 2028 7365 6c66 2e73    if not (self.s
+00027a40: 6573 7369 6f6e 2061 6e64 2073 656c 662e  ession and self.
+00027a50: 6c61 6e67 7561 6765 5f6d 6170 2061 6e64  language_map and
+00027a60: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
+00027a70: 5f66 7265 7120 616e 6420 6e6f 745f 7570  _freq and not_up
+00027a80: 6461 7465 5f63 6f6e 645f 7469 6d65 293a  date_cond_time):
+00027a90: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00027aa0: 6c66 2e62 6567 696e 5f74 696d 6520 3d20  lf.begin_time = 
+00027ab0: 7469 6d65 2e74 696d 6528 290d 0a20 2020  time.time()..   
+00027ac0: 2020 2020 2020 2020 2073 656c 662e 7365           self.se
+00027ad0: 7373 696f 6e20 3d20 7265 7175 6573 7473  ssion = requests
+00027ae0: 2e53 6573 7369 6f6e 2829 0d0a 2020 2020  .Session()..    
+00027af0: 2020 2020 2020 2020 5f20 3d20 7365 6c66          _ = self
+00027b00: 2e73 6573 7369 6f6e 2e67 6574 2873 656c  .session.get(sel
+00027b10: 662e 686f 7374 5f75 726c 2c20 6865 6164  f.host_url, head
+00027b20: 6572 733d 7365 6c66 2e68 6f73 745f 6865  ers=self.host_he
+00027b30: 6164 6572 732c 2074 696d 656f 7574 3d74  aders, timeout=t
+00027b40: 696d 656f 7574 2c20 7072 6f78 6965 733d  imeout, proxies=
+00027b50: 7072 6f78 6965 7329 0d0a 0d0a 2020 2020  proxies)....    
+00027b60: 2020 2020 6966 2066 726f 6d5f 6c61 6e67      if from_lang
+00027b70: 7561 6765 203d 3d20 2761 7574 6f27 3a0d  uage == 'auto':.
+00027b80: 0a20 2020 2020 2020 2020 2020 2066 726f  .            fro
+00027b90: 6d5f 6c61 6e67 7561 6765 203d 2073 656c  m_language = sel
+00027ba0: 662e 7761 726e 696e 675f 6175 746f 5f6c  f.warning_auto_l
+00027bb0: 616e 6728 2775 7469 6265 7427 2c20 7365  ang('utibet', se
+00027bc0: 6c66 2e64 6566 6175 6c74 5f66 726f 6d5f  lf.default_from_
+00027bd0: 6c61 6e67 7561 6765 2c20 6966 5f70 7269  language, if_pri
+00027be0: 6e74 5f77 6172 6e69 6e67 290d 0a20 2020  nt_warning)..   
+00027bf0: 2020 2020 2066 726f 6d5f 6c61 6e67 7561       from_langua
+00027c00: 6765 2c20 746f 5f6c 616e 6775 6167 6520  ge, to_language 
+00027c10: 3d20 7365 6c66 2e63 6865 636b 5f6c 616e  = self.check_lan
+00027c20: 6775 6167 6528 6672 6f6d 5f6c 616e 6775  guage(from_langu
+00027c30: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
+00027c40: 2c20 7365 6c66 2e6c 616e 6775 6167 655f  , self.language_
+00027c50: 6d61 702c 206f 7574 7075 745f 7a68 3d73  map, output_zh=s
+00027c60: 656c 662e 6f75 7470 7574 5f7a 6829 0d0a  elf.output_zh)..
+00027c70: 2020 2020 2020 2020 7061 796c 6f61 6420          payload 
+00027c80: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
+00027c90: 2027 7372 6327 3a20 7175 6572 795f 7465   'src': query_te
+00027ca0: 7874 2c0d 0a20 2020 2020 2020 2020 2020  xt,..           
+00027cb0: 2027 7467 7427 3a20 7175 6572 795f 7465   'tgt': query_te
+00027cc0: 7874 2069 6620 6672 6f6d 5f6c 616e 6775  xt if from_langu
+00027cd0: 6167 6520 3d3d 2027 7469 2720 656c 7365  age == 'ti' else
+00027ce0: 2027 272c 0d0a 2020 2020 2020 2020 2020   '',..          
+00027cf0: 2020 276c 616e 6727 3a20 2774 6327 2069    'lang': 'tc' i
+00027d00: 6620 6672 6f6d 5f6c 616e 6775 6167 6520  f from_language 
+00027d10: 3d3d 2027 7469 2720 656c 7365 2027 6374  == 'ti' else 'ct
+00027d20: 272c 0d0a 2020 2020 2020 2020 7d0d 0a20  ',..        }.. 
+00027d30: 2020 2020 2020 2070 6179 6c6f 6164 203d         payload =
+00027d40: 2075 726c 6c69 622e 7061 7273 652e 7572   urllib.parse.ur
+00027d50: 6c65 6e63 6f64 6528 7061 796c 6f61 6429  lencode(payload)
+00027d60: 0d0a 2020 2020 2020 2020 7220 3d20 7365  ..        r = se
+00027d70: 6c66 2e73 6573 7369 6f6e 2e70 6f73 7428  lf.session.post(
+00027d80: 7365 6c66 2e61 7069 5f75 726c 2c20 6865  self.api_url, he
+00027d90: 6164 6572 733d 7365 6c66 2e61 7069 5f68  aders=self.api_h
+00027da0: 6561 6465 7273 2c20 6461 7461 3d70 6179  eaders, data=pay
+00027db0: 6c6f 6164 2c20 7469 6d65 6f75 743d 7469  load, timeout=ti
+00027dc0: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+00027dd0: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
+00027de0: 2072 2e72 6169 7365 5f66 6f72 5f73 7461   r.raise_for_sta
+00027df0: 7475 7328 290d 0a20 2020 2020 2020 2064  tus()..        d
+00027e00: 6174 615f 6874 6d6c 203d 2072 2e74 6578  ata_html = r.tex
+00027e10: 740d 0a20 2020 2020 2020 2074 696d 652e  t..        time.
+00027e20: 736c 6565 7028 736c 6565 705f 7365 636f  sleep(sleep_seco
+00027e30: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
+00027e40: 6c66 2e71 7565 7279 5f63 6f75 6e74 202b  lf.query_count +
+00027e50: 3d20 310d 0a20 2020 2020 2020 2072 6574  = 1..        ret
+00027e60: 7572 6e20 7b27 6461 7461 5f68 746d 6c27  urn {'data_html'
+00027e70: 3a20 6461 7461 5f68 746d 6c7d 2069 6620  : data_html} if 
+00027e80: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
+00027e90: 2065 6c73 6520 7365 6c66 2e70 6172 7365   else self.parse
+00027ea0: 5f72 6573 756c 7428 6461 7461 5f68 746d  _result(data_htm
+00027eb0: 6c29 0d0a 0d0a 0d0a 636c 6173 7320 5061  l)......class Pa
+00027ec0: 7061 676f 2854 7365 293a 0d0a 2020 2020  pago(Tse):..    
+00027ed0: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+00027ee0: 6629 3a0d 0a20 2020 2020 2020 2073 7570  f):..        sup
+00027ef0: 6572 2829 2e5f 5f69 6e69 745f 5f28 290d  er().__init__().
+00027f00: 0a20 2020 2020 2020 2073 656c 662e 6265  .        self.be
+00027f10: 6769 6e5f 7469 6d65 203d 2074 696d 652e  gin_time = time.
+00027f20: 7469 6d65 2829 0d0a 2020 2020 2020 2020  time()..        
+00027f30: 7365 6c66 2e68 6f73 745f 7572 6c20 3d20  self.host_url = 
+00027f40: 2768 7474 7073 3a2f 2f70 6170 6167 6f2e  'https://papago.
+00027f50: 6e61 7665 722e 636f 6d27 0d0a 2020 2020  naver.com'..    
+00027f60: 2020 2020 7365 6c66 2e61 7069 5f75 726c      self.api_url
+00027f70: 203d 2027 6874 7470 733a 2f2f 7061 7061   = 'https://papa
+00027f80: 676f 2e6e 6176 6572 2e63 6f6d 2f61 7069  go.naver.com/api
+00027f90: 732f 6e32 6d74 2f74 7261 6e73 6c61 7465  s/n2mt/translate
+00027fa0: 2720 2023 206e 736d 740d 0a20 2020 2020  '  # nsmt..     
+00027fb0: 2020 2073 656c 662e 7765 625f 6170 695f     self.web_api_
+00027fc0: 7572 6c20 3d20 2768 7474 7073 3a2f 2f70  url = 'https://p
+00027fd0: 6170 6167 6f2e 6e61 7665 722e 6e65 742f  apago.naver.net/
+00027fe0: 7765 6273 6974 6527 0d0a 2020 2020 2020  website'..      
+00027ff0: 2020 7365 6c66 2e6c 616e 675f 6465 7465    self.lang_dete
+00028000: 6374 5f75 726c 203d 2027 6874 7470 733a  ct_url = 'https:
+00028010: 2f2f 7061 7061 676f 2e6e 6176 6572 2e63  //papago.naver.c
+00028020: 6f6d 2f61 7069 732f 6c61 6e67 732f 6465  om/apis/langs/de
+00028030: 6374 270d 0a20 2020 2020 2020 2073 656c  ct'..        sel
+00028040: 662e 6c61 6e67 7561 6765 5f75 726c 203d  f.language_url =
+00028050: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
+00028060: 656c 662e 6c61 6e67 7561 6765 5f75 726c  elf.language_url
+00028070: 5f70 6174 7465 726e 203d 2027 2f68 6f6d  _pattern = '/hom
+00028080: 652e 282e 2a3f 292e 6368 756e 6b2e 6a73  e.(.*?).chunk.js
+00028090: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+000280a0: 686f 7374 5f68 6561 6465 7273 203d 2073  host_headers = s
+000280b0: 656c 662e 6765 745f 6865 6164 6572 7328  elf.get_headers(
+000280c0: 7365 6c66 2e68 6f73 745f 7572 6c2c 2069  self.host_url, i
+000280d0: 665f 6170 693d 4661 6c73 6529 0d0a 2020  f_api=False)..  
+000280e0: 2020 2020 2020 7365 6c66 2e61 7069 5f68        self.api_h
+000280f0: 6561 6465 7273 203d 2073 656c 662e 6765  eaders = self.ge
+00028100: 745f 6865 6164 6572 7328 7365 6c66 2e68  t_headers(self.h
+00028110: 6f73 745f 7572 6c2c 2069 665f 6170 693d  ost_url, if_api=
+00028120: 5472 7565 2c20 6966 5f6a 736f 6e5f 666f  True, if_json_fo
+00028130: 725f 6170 693d 4661 6c73 6529 0d0a 2020  r_api=False)..  
+00028140: 2020 2020 2020 7365 6c66 2e6c 616e 6775        self.langu
+00028150: 6167 655f 6d61 7020 3d20 4e6f 6e65 0d0a  age_map = None..
+00028160: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
+00028170: 7369 6f6e 203d 204e 6f6e 650d 0a20 2020  sion = None..   
+00028180: 2020 2020 2073 656c 662e 6465 7669 6365       self.device
+00028190: 5f69 6420 3d20 4e6f 6e65 0d0a 2020 2020  _id = None..    
+000281a0: 2020 2020 7365 6c66 2e61 7574 685f 6b65      self.auth_ke
+000281b0: 7920 3d20 4e6f 6e65 2020 2320 2776 312e  y = None  # 'v1.
+000281c0: 372e 315f 3132 6639 3139 6339 6235 2720  7.1_12f919c9b5' 
+000281d0: 2023 2776 312e 362e 375f 6363 3630 6236   #'v1.6.7_cc60b6
+000281e0: 3735 3537 270d 0a20 2020 2020 2020 2073  7557'..        s
+000281f0: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
+00028200: 3d20 300d 0a20 2020 2020 2020 2073 656c  = 0..        sel
+00028210: 662e 6f75 7470 7574 5f7a 6820 3d20 277a  f.output_zh = 'z
+00028220: 682d 434e 270d 0a20 2020 2020 2020 2073  h-CN'..        s
+00028230: 656c 662e 696e 7075 745f 6c69 6d69 7420  elf.input_limit 
+00028240: 3d20 696e 7428 3565 3329 0d0a 2020 2020  = int(5e3)..    
+00028250: 2020 2020 7365 6c66 2e64 6566 6175 6c74      self.default
+00028260: 5f66 726f 6d5f 6c61 6e67 7561 6765 203d  _from_language =
+00028270: 2073 656c 662e 6f75 7470 7574 5f7a 680d   self.output_zh.
+00028280: 0a0d 0a20 2020 2040 5473 652e 6465 6275  ...    @Tse.debu
+00028290: 675f 6c61 6e67 7561 6765 5f6d 6170 0d0a  g_language_map..
+000282a0: 2020 2020 6465 6620 6765 745f 6c61 6e67      def get_lang
+000282b0: 7561 6765 5f6d 6170 2873 656c 662c 206c  uage_map(self, l
+000282c0: 616e 675f 6874 6d6c 3a20 7374 722c 202a  ang_html: str, *
+000282d0: 2a6b 7761 7267 733a 204c 616e 674d 6170  *kwargs: LangMap
+000282e0: 4b77 6172 6773 5479 7065 2920 2d3e 2064  KwargsType) -> d
+000282f0: 6963 743a 0d0a 2020 2020 2020 2020 6c61  ict:..        la
+00028300: 6e67 5f73 7472 203d 2072 652e 636f 6d70  ng_str = re.comp
+00028310: 696c 6528 273d 7b41 4c4c 3a28 2e2a 3f29  ile('={ALL:(.*?)
+00028320: 7d27 292e 7365 6172 6368 286c 616e 675f  }').search(lang_
+00028330: 6874 6d6c 292e 6772 6f75 7028 295b 313a  html).group()[1:
+00028340: 5d0d 0a20 2020 2020 2020 206c 616e 675f  ]..        lang_
+00028350: 7374 7220 3d20 6c61 6e67 5f73 7472 2e6c  str = lang_str.l
+00028360: 6f77 6572 2829 2e72 6570 6c61 6365 2827  ower().replace('
+00028370: 7a68 2d63 6e27 2c20 277a 682d 434e 2729  zh-cn', 'zh-CN')
+00028380: 2e72 6570 6c61 6365 2827 7a68 2d74 7727  .replace('zh-tw'
+00028390: 2c20 277a 682d 5457 2729 0d0a 2020 2020  , 'zh-TW')..    
+000283a0: 2020 2020 6c61 6e67 5f6c 6973 7420 3d20      lang_list = 
+000283b0: 7265 2e63 6f6d 7069 6c65 2827 2c22 282e  re.compile(',"(.
+000283c0: 2a3f 2922 3a7c 2c28 2e2a 3f29 3a27 292e  *?)":|,(.*?):').
+000283d0: 6669 6e64 616c 6c28 6c61 6e67 5f73 7472  findall(lang_str
+000283e0: 290d 0a20 2020 2020 2020 206c 616e 675f  )..        lang_
+000283f0: 6c69 7374 203d 205b 6a20 6966 206a 2065  list = [j if j e
+00028400: 6c73 6520 6b20 666f 7220 6a2c 206b 2069  lse k for j, k i
+00028410: 6e20 6c61 6e67 5f6c 6973 745d 0d0a 2020  n lang_list]..  
+00028420: 2020 2020 2020 6c61 6e67 5f6c 6973 7420        lang_list 
+00028430: 3d20 736f 7274 6564 286c 6973 7428 6669  = sorted(list(fi
+00028440: 6c74 6572 286c 616d 6264 6120 783a 2078  lter(lambda x: x
+00028450: 206e 6f74 2069 6e20 2827 616c 6c27 2c20   not in ('all', 
+00028460: 2761 7574 6f27 292c 206c 616e 675f 6c69  'auto'), lang_li
+00028470: 7374 2929 290d 0a20 2020 2020 2020 2072  st)))..        r
+00028480: 6574 7572 6e20 7b7d 2e66 726f 6d6b 6579  eturn {}.fromkey
+00028490: 7328 6c61 6e67 5f6c 6973 742c 206c 616e  s(lang_list, lan
+000284a0: 675f 6c69 7374 290d 0a0d 0a20 2020 2064  g_list)....    d
+000284b0: 6566 2067 6574 5f61 7574 685f 6b65 7928  ef get_auth_key(
+000284c0: 7365 6c66 2c20 6c61 6e67 5f68 746d 6c3a  self, lang_html:
+000284d0: 2073 7472 2920 2d3e 2073 7472 3a0d 0a20   str) -> str:.. 
+000284e0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+000284f0: 2e63 6f6d 7069 6c65 2827 4155 5448 5f4b  .compile('AUTH_K
+00028500: 4559 3a22 282e 2a3f 2922 2729 2e66 696e  EY:"(.*?)"').fin
+00028510: 6461 6c6c 286c 616e 675f 6874 6d6c 295b  dall(lang_html)[
+00028520: 305d 0d0a 0d0a 2020 2020 6465 6620 6765  0]....    def ge
+00028530: 745f 6175 7468 6f72 697a 6174 696f 6e28  t_authorization(
+00028540: 7365 6c66 2c20 7572 6c3a 2073 7472 2c20  self, url: str, 
+00028550: 6175 7468 5f6b 6579 3a20 7374 722c 2064  auth_key: str, d
+00028560: 6576 6963 655f 6964 3a20 7374 722c 2074  evice_id: str, t
+00028570: 696d 6573 7461 6d70 3a20 696e 7429 202d  imestamp: int) -
+00028580: 3e20 7374 723a 0d0a 2020 2020 2020 2020  > str:..        
+00028590: 6175 7468 203d 2068 6d61 632e 6e65 7728  auth = hmac.new(
+000285a0: 6b65 793d 6175 7468 5f6b 6579 2e65 6e63  key=auth_key.enc
+000285b0: 6f64 6528 292c 206d 7367 3d66 277b 6465  ode(), msg=f'{de
+000285c0: 7669 6365 5f69 647d 5c6e 7b75 726c 7d5c  vice_id}\n{url}\
+000285d0: 6e7b 7469 6d65 7374 616d 707d 272e 656e  n{timestamp}'.en
+000285e0: 636f 6465 2829 2c20 6469 6765 7374 6d6f  code(), digestmo
+000285f0: 643d 276d 6435 2729 2e64 6967 6573 7428  d='md5').digest(
+00028600: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00028610: 6e20 6627 5050 4720 7b64 6576 6963 655f  n f'PPG {device_
+00028620: 6964 7d3a 7b62 6173 6536 342e 6236 3465  id}:{base64.b64e
+00028630: 6e63 6f64 6528 6175 7468 292e 6465 636f  ncode(auth).deco
+00028640: 6465 2829 7d27 0d0a 0d0a 2020 2020 4054  de()}'....    @T
+00028650: 7365 2e74 696d 655f 7374 6174 0d0a 2020  se.time_stat..  
+00028660: 2020 4054 7365 2e63 6865 636b 5f71 7565    @Tse.check_que
+00028670: 7279 0d0a 2020 2020 6465 6620 7061 7061  ry..    def papa
+00028680: 676f 5f61 7069 2873 656c 662c 2071 7565  go_api(self, que
+00028690: 7279 5f74 6578 743a 2073 7472 2c20 6672  ry_text: str, fr
+000286a0: 6f6d 5f6c 616e 6775 6167 653a 2073 7472  om_language: str
+000286b0: 203d 2027 6175 746f 272c 2074 6f5f 6c61   = 'auto', to_la
+000286c0: 6e67 7561 6765 3a20 7374 7220 3d20 2765  nguage: str = 'e
+000286d0: 6e27 2c20 2a2a 6b77 6172 6773 3a20 4170  n', **kwargs: Ap
+000286e0: 694b 7761 7267 7354 7970 6529 202d 3e20  iKwargsType) -> 
+000286f0: 556e 696f 6e5b 7374 722c 2064 6963 745d  Union[str, dict]
+00028700: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+00028710: 2020 2020 2020 2020 6874 7470 733a 2f2f          https://
+00028720: 7061 7061 676f 2e6e 6176 6572 2e63 6f6d  papago.naver.com
+00028730: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+00028740: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
+00028750: 2c20 6d75 7374 2e0d 0a20 2020 2020 2020  , must...       
+00028760: 203a 7061 7261 6d20 6672 6f6d 5f6c 616e   :param from_lan
+00028770: 6775 6167 653a 2073 7472 2c20 6465 6661  guage: str, defa
+00028780: 756c 7420 2761 7574 6f27 2e0d 0a20 2020  ult 'auto'...   
+00028790: 2020 2020 203a 7061 7261 6d20 746f 5f6c       :param to_l
+000287a0: 616e 6775 6167 653a 2073 7472 2c20 6465  anguage: str, de
+000287b0: 6661 756c 7420 2765 6e27 2e0d 0a20 2020  fault 'en'...   
+000287c0: 2020 2020 203a 7061 7261 6d20 2a2a 6b77       :param **kw
+000287d0: 6172 6773 3a0d 0a20 2020 2020 2020 2020  args:..         
+000287e0: 2020 2020 2020 203a 7061 7261 6d20 7469         :param ti
+000287f0: 6d65 6f75 743a 2066 6c6f 6174 2c20 6465  meout: float, de
+00028800: 6661 756c 7420 4e6f 6e65 2e0d 0a20 2020  fault None...   
+00028810: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00028820: 7261 6d20 7072 6f78 6965 733a 2064 6963  ram proxies: dic
+00028830: 742c 2064 6566 6175 6c74 204e 6f6e 652e  t, default None.
+00028840: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00028850: 2020 3a70 6172 616d 2073 6c65 6570 5f73    :param sleep_s
+00028860: 6563 6f6e 6473 3a20 666c 6f61 742c 2064  econds: float, d
+00028870: 6566 6175 6c74 2030 2e0d 0a20 2020 2020  efault 0...     
+00028880: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00028890: 6d20 6973 5f64 6574 6169 6c5f 7265 7375  m is_detail_resu
+000288a0: 6c74 3a20 626f 6f6c 2c20 6465 6661 756c  lt: bool, defaul
+000288b0: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+000288c0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+000288d0: 2069 665f 6967 6e6f 7265 5f6c 696d 6974   if_ignore_limit
+000288e0: 5f6f 665f 6c65 6e67 7468 3a20 626f 6f6c  _of_length: bool
+000288f0: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+00028900: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00028910: 2020 3a70 6172 616d 206c 696d 6974 5f6f    :param limit_o
+00028920: 665f 6c65 6e67 7468 3a20 696e 742c 2064  f_length: int, d
+00028930: 6566 6175 6c74 2032 3030 3030 2e0d 0a20  efault 20000... 
+00028940: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00028950: 7061 7261 6d20 6966 5f69 676e 6f72 655f  param if_ignore_
+00028960: 656d 7074 795f 7175 6572 793a 2062 6f6f  empty_query: boo
+00028970: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+00028980: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00028990: 2020 203a 7061 7261 6d20 7570 6461 7465     :param update
+000289a0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
+000289b0: 7265 713a 2069 6e74 2c20 6465 6661 756c  req: int, defaul
+000289c0: 7420 3130 3030 2e0d 0a20 2020 2020 2020  t 1000...       
+000289d0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+000289e0: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+000289f0: 6674 6572 5f73 6563 6f6e 6473 3a20 666c  fter_seconds: fl
+00028a00: 6f61 742c 2064 6566 6175 6c74 2031 3530  oat, default 150
+00028a10: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+00028a20: 2020 2020 3a70 6172 616d 2069 665f 7368      :param if_sh
+00028a30: 6f77 5f74 696d 655f 7374 6174 3a20 626f  ow_time_stat: bo
+00028a40: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
+00028a50: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+00028a60: 2020 2020 3a70 6172 616d 2073 686f 775f      :param show_
+00028a70: 7469 6d65 5f73 7461 745f 7072 6563 6973  time_stat_precis
+00028a80: 696f 6e3a 2069 6e74 2c20 6465 6661 756c  ion: int, defaul
+00028a90: 7420 322e 0d0a 2020 2020 2020 2020 2020  t 2...          
+00028aa0: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
+00028ab0: 7072 696e 745f 7761 726e 696e 673a 2062  print_warning: b
+00028ac0: 6f6f 6c2c 2064 6566 6175 6c74 2054 7275  ool, default Tru
+00028ad0: 652e 0d0a 2020 2020 2020 2020 3a72 6574  e...        :ret
+00028ae0: 7572 6e3a 2073 7472 206f 7220 6469 6374  urn: str or dict
+00028af0: 0d0a 2020 2020 2020 2020 2222 220d 0a0d  ..        """...
+00028b00: 0a20 2020 2020 2020 2074 696d 656f 7574  .        timeout
+00028b10: 203d 206b 7761 7267 732e 6765 7428 2774   = kwargs.get('t
+00028b20: 696d 656f 7574 272c 204e 6f6e 6529 0d0a  imeout', None)..
+00028b30: 2020 2020 2020 2020 7072 6f78 6965 7320          proxies 
+00028b40: 3d20 6b77 6172 6773 2e67 6574 2827 7072  = kwargs.get('pr
+00028b50: 6f78 6965 7327 2c20 4e6f 6e65 290d 0a20  oxies', None).. 
+00028b60: 2020 2020 2020 2073 6c65 6570 5f73 6563         sleep_sec
+00028b70: 6f6e 6473 203d 206b 7761 7267 732e 6765  onds = kwargs.ge
+00028b80: 7428 2773 6c65 6570 5f73 6563 6f6e 6473  t('sleep_seconds
+00028b90: 272c 2030 290d 0a20 2020 2020 2020 2069  ', 0)..        i
+00028ba0: 665f 7072 696e 745f 7761 726e 696e 6720  f_print_warning 
+00028bb0: 3d20 6b77 6172 6773 2e67 6574 2827 6966  = kwargs.get('if
+00028bc0: 5f70 7269 6e74 5f77 6172 6e69 6e67 272c  _print_warning',
+00028bd0: 2054 7275 6529 0d0a 2020 2020 2020 2020   True)..        
+00028be0: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
+00028bf0: 203d 206b 7761 7267 732e 6765 7428 2769   = kwargs.get('i
+00028c00: 735f 6465 7461 696c 5f72 6573 756c 7427  s_detail_result'
+00028c10: 2c20 4661 6c73 6529 0d0a 2020 2020 2020  , False)..      
+00028c20: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
+00028c30: 5f61 6674 6572 5f66 7265 7120 3d20 6b77  _after_freq = kw
+00028c40: 6172 6773 2e67 6574 2827 7570 6461 7465  args.get('update
+00028c50: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
+00028c60: 7265 7127 2c20 7365 6c66 2e64 6566 6175  req', self.defau
+00028c70: 6c74 5f73 6573 7369 6f6e 5f66 7265 7129  lt_session_freq)
+00028c80: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
+00028c90: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
+00028ca0: 6563 6f6e 6473 203d 206b 7761 7267 732e  econds = kwargs.
+00028cb0: 6765 7428 2775 7064 6174 655f 7365 7373  get('update_sess
+00028cc0: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
+00028cd0: 7327 2c20 7365 6c66 2e64 6566 6175 6c74  s', self.default
+00028ce0: 5f73 6573 7369 6f6e 5f73 6563 6f6e 6473  _session_seconds
+00028cf0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00028d00: 6368 6563 6b5f 696e 7075 745f 6c69 6d69  check_input_limi
+00028d10: 7428 7175 6572 795f 7465 7874 2c20 7365  t(query_text, se
+00028d20: 6c66 2e69 6e70 7574 5f6c 696d 6974 290d  lf.input_limit).
+00028d30: 0a0d 0a20 2020 2020 2020 206e 6f74 5f75  ...        not_u
+00028d40: 7064 6174 655f 636f 6e64 5f66 7265 7120  pdate_cond_freq 
+00028d50: 3d20 3120 6966 2073 656c 662e 7175 6572  = 1 if self.quer
+00028d60: 795f 636f 756e 7420 2520 7570 6461 7465  y_count % update
+00028d70: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
+00028d80: 7265 7120 213d 2030 2065 6c73 6520 300d  req != 0 else 0.
+00028d90: 0a20 2020 2020 2020 206e 6f74 5f75 7064  .        not_upd
+00028da0: 6174 655f 636f 6e64 5f74 696d 6520 3d20  ate_cond_time = 
+00028db0: 3120 6966 2074 696d 652e 7469 6d65 2829  1 if time.time()
+00028dc0: 202d 2073 656c 662e 6265 6769 6e5f 7469   - self.begin_ti
+00028dd0: 6d65 203c 2075 7064 6174 655f 7365 7373  me < update_sess
+00028de0: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
+00028df0: 7320 656c 7365 2030 0d0a 2020 2020 2020  s else 0..      
+00028e00: 2020 6966 206e 6f74 2028 7365 6c66 2e73    if not (self.s
+00028e10: 6573 7369 6f6e 2061 6e64 2073 656c 662e  ession and self.
+00028e20: 6c61 6e67 7561 6765 5f6d 6170 2061 6e64  language_map and
+00028e30: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
+00028e40: 5f66 7265 7120 616e 6420 6e6f 745f 7570  _freq and not_up
+00028e50: 6461 7465 5f63 6f6e 645f 7469 6d65 2061  date_cond_time a
+00028e60: 6e64 2073 656c 662e 6175 7468 5f6b 6579  nd self.auth_key
+00028e70: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00028e80: 7365 6c66 2e64 6576 6963 655f 6964 203d  self.device_id =
+00028e90: 2073 7472 2875 7569 642e 7575 6964 3428   str(uuid.uuid4(
+00028ea0: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+00028eb0: 7365 6c66 2e62 6567 696e 5f74 696d 6520  self.begin_time 
+00028ec0: 3d20 7469 6d65 2e74 696d 6528 290d 0a20  = time.time().. 
+00028ed0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00028ee0: 7365 7373 696f 6e20 3d20 7265 7175 6573  session = reques
+00028ef0: 7473 2e53 6573 7369 6f6e 2829 0d0a 2020  ts.Session()..  
+00028f00: 2020 2020 2020 2020 2020 686f 7374 5f68            host_h
+00028f10: 746d 6c20 3d20 7365 6c66 2e73 6573 7369  tml = self.sessi
+00028f20: 6f6e 2e67 6574 2873 656c 662e 686f 7374  on.get(self.host
+00028f30: 5f75 726c 2c20 6865 6164 6572 733d 7365  _url, headers=se
+00028f40: 6c66 2e68 6f73 745f 6865 6164 6572 732c  lf.host_headers,
+00028f50: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
+00028f60: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
+00028f70: 7329 2e74 6578 740d 0a20 2020 2020 2020  s).text..       
+00028f80: 2020 2020 2075 726c 5f70 6174 6820 3d20       url_path = 
+00028f90: 7265 2e63 6f6d 7069 6c65 2873 656c 662e  re.compile(self.
+00028fa0: 6c61 6e67 7561 6765 5f75 726c 5f70 6174  language_url_pat
+00028fb0: 7465 726e 292e 7365 6172 6368 2868 6f73  tern).search(hos
+00028fc0: 745f 6874 6d6c 292e 6772 6f75 7028 290d  t_html).group().
+00028fd0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00028fe0: 662e 6c61 6e67 7561 6765 5f75 726c 203d  f.language_url =
+00028ff0: 2027 272e 6a6f 696e 285b 7365 6c66 2e68   ''.join([self.h
+00029000: 6f73 745f 7572 6c2c 2075 726c 5f70 6174  ost_url, url_pat
+00029010: 685d 290d 0a20 2020 2020 2020 2020 2020  h])..           
+00029020: 206c 616e 675f 6874 6d6c 203d 2073 656c   lang_html = sel
+00029030: 662e 7365 7373 696f 6e2e 6765 7428 7365  f.session.get(se
+00029040: 6c66 2e6c 616e 6775 6167 655f 7572 6c2c  lf.language_url,
+00029050: 2068 6561 6465 7273 3d73 656c 662e 686f   headers=self.ho
+00029060: 7374 5f68 6561 6465 7273 2c20 7469 6d65  st_headers, time
+00029070: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
+00029080: 7869 6573 3d70 726f 7869 6573 292e 7465  xies=proxies).te
+00029090: 7874 0d0a 2020 2020 2020 2020 2020 2020  xt..            
+000290a0: 6465 6275 675f 6c61 6e67 5f6b 7761 7267  debug_lang_kwarg
+000290b0: 7320 3d20 7365 6c66 2e64 6562 7567 5f6c  s = self.debug_l
+000290c0: 616e 675f 6b77 6172 6773 2866 726f 6d5f  ang_kwargs(from_
+000290d0: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
+000290e0: 6775 6167 652c 2073 656c 662e 6465 6661  guage, self.defa
+000290f0: 756c 745f 6672 6f6d 5f6c 616e 6775 6167  ult_from_languag
+00029100: 652c 2069 665f 7072 696e 745f 7761 726e  e, if_print_warn
+00029110: 696e 6729 0d0a 2020 2020 2020 2020 2020  ing)..          
+00029120: 2020 7365 6c66 2e6c 616e 6775 6167 655f    self.language_
+00029130: 6d61 7020 3d20 7365 6c66 2e67 6574 5f6c  map = self.get_l
+00029140: 616e 6775 6167 655f 6d61 7028 6c61 6e67  anguage_map(lang
+00029150: 5f68 746d 6c2c 202a 2a64 6562 7567 5f6c  _html, **debug_l
+00029160: 616e 675f 6b77 6172 6773 290d 0a20 2020  ang_kwargs)..   
+00029170: 2020 2020 2020 2020 2073 656c 662e 6175           self.au
+00029180: 7468 5f6b 6579 203d 2073 656c 662e 6765  th_key = self.ge
+00029190: 745f 6175 7468 5f6b 6579 286c 616e 675f  t_auth_key(lang_
+000291a0: 6874 6d6c 290d 0a0d 0a20 2020 2020 2020  html)....       
+000291b0: 2066 726f 6d5f 6c61 6e67 7561 6765 2c20   from_language, 
+000291c0: 746f 5f6c 616e 6775 6167 6520 3d20 7365  to_language = se
+000291d0: 6c66 2e63 6865 636b 5f6c 616e 6775 6167  lf.check_languag
+000291e0: 6528 6672 6f6d 5f6c 616e 6775 6167 652c  e(from_language,
+000291f0: 2074 6f5f 6c61 6e67 7561 6765 2c20 7365   to_language, se
+00029200: 6c66 2e6c 616e 6775 6167 655f 6d61 702c  lf.language_map,
+00029210: 206f 7574 7075 745f 7a68 3d73 656c 662e   output_zh=self.
+00029220: 6f75 7470 7574 5f7a 6829 0d0a 0d0a 2020  output_zh)....  
+00029230: 2020 2020 2020 6465 7465 6374 5f74 696d        detect_tim
+00029240: 6520 3d20 7365 6c66 2e67 6574 5f74 696d  e = self.get_tim
+00029250: 6573 7461 6d70 2829 0d0a 2020 2020 2020  estamp()..      
+00029260: 2020 6465 7465 6374 5f61 7574 6820 3d20    detect_auth = 
+00029270: 7365 6c66 2e67 6574 5f61 7574 686f 7269  self.get_authori
+00029280: 7a61 7469 6f6e 2873 656c 662e 6c61 6e67  zation(self.lang
+00029290: 5f64 6574 6563 745f 7572 6c2c 2073 656c  _detect_url, sel
+000292a0: 662e 6175 7468 5f6b 6579 2c20 7365 6c66  f.auth_key, self
+000292b0: 2e64 6576 6963 655f 6964 2c20 6465 7465  .device_id, dete
+000292c0: 6374 5f74 696d 6529 0d0a 2020 2020 2020  ct_time)..      
+000292d0: 2020 6465 7465 6374 5f61 6464 5f68 6561    detect_add_hea
+000292e0: 6465 7273 203d 207b 2764 6576 6963 652d  ders = {'device-
+000292f0: 7479 7065 273a 2027 7063 272c 2027 7469  type': 'pc', 'ti
+00029300: 6d65 7374 616d 7027 3a20 7374 7228 6465  mestamp': str(de
+00029310: 7465 6374 5f74 696d 6529 2c20 2761 7574  tect_time), 'aut
+00029320: 686f 7269 7a61 7469 6f6e 273a 2064 6574  horization': det
+00029330: 6563 745f 6175 7468 7d0d 0a20 2020 2020  ect_auth}..     
+00029340: 2020 2064 6574 6563 745f 6865 6164 6572     detect_header
+00029350: 7320 3d20 7b2a 2a73 656c 662e 6170 695f  s = {**self.api_
+00029360: 6865 6164 6572 732c 202a 2a64 6574 6563  headers, **detec
+00029370: 745f 6164 645f 6865 6164 6572 737d 0d0a  t_add_headers}..
+00029380: 0d0a 2020 2020 2020 2020 6966 2066 726f  ..        if fro
+00029390: 6d5f 6c61 6e67 7561 6765 203d 3d20 2761  m_language == 'a
+000293a0: 7574 6f27 3a0d 0a20 2020 2020 2020 2020  uto':..         
+000293b0: 2020 2064 6574 6563 745f 666f 726d 203d     detect_form =
+000293c0: 2075 726c 6c69 622e 7061 7273 652e 7572   urllib.parse.ur
+000293d0: 6c65 6e63 6f64 6528 7b27 7175 6572 7927  lencode({'query'
+000293e0: 3a20 7175 6572 795f 7465 7874 7d29 0d0a  : query_text})..
+000293f0: 2020 2020 2020 2020 2020 2020 725f 6465              r_de
+00029400: 7465 6374 203d 2073 656c 662e 7365 7373  tect = self.sess
+00029410: 696f 6e2e 706f 7374 2873 656c 662e 6c61  ion.post(self.la
+00029420: 6e67 5f64 6574 6563 745f 7572 6c2c 2068  ng_detect_url, h
+00029430: 6561 6465 7273 3d64 6574 6563 745f 6865  eaders=detect_he
+00029440: 6164 6572 732c 2064 6174 613d 6465 7465  aders, data=dete
+00029450: 6374 5f66 6f72 6d2c 2074 696d 656f 7574  ct_form, timeout
+00029460: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
+00029470: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
+00029480: 2020 2020 2020 2020 6672 6f6d 5f6c 616e          from_lan
+00029490: 6775 6167 6520 3d20 725f 6465 7465 6374  guage = r_detect
+000294a0: 2e6a 736f 6e28 295b 276c 616e 6743 6f64  .json()['langCod
+000294b0: 6527 5d0d 0a0d 0a20 2020 2020 2020 2074  e']....        t
+000294c0: 7261 6e73 5f74 696d 6520 3d20 7365 6c66  rans_time = self
+000294d0: 2e67 6574 5f74 696d 6573 7461 6d70 2829  .get_timestamp()
+000294e0: 0d0a 2020 2020 2020 2020 7472 616e 735f  ..        trans_
+000294f0: 6175 7468 203d 2073 656c 662e 6765 745f  auth = self.get_
+00029500: 6175 7468 6f72 697a 6174 696f 6e28 7365  authorization(se
+00029510: 6c66 2e61 7069 5f75 726c 2c20 7365 6c66  lf.api_url, self
+00029520: 2e61 7574 685f 6b65 792c 2073 656c 662e  .auth_key, self.
+00029530: 6465 7669 6365 5f69 642c 2074 7261 6e73  device_id, trans
+00029540: 5f74 696d 6529 0d0a 2020 2020 2020 2020  _time)..        
+00029550: 7472 616e 735f 7570 6461 7465 5f68 6561  trans_update_hea
+00029560: 6465 7273 203d 207b 2778 2d61 7069 6777  ders = {'x-apigw
+00029570: 2d70 6172 746e 6572 6964 273a 2027 7061  -partnerid': 'pa
+00029580: 7061 676f 272c 2027 7469 6d65 7374 616d  pago', 'timestam
+00029590: 7027 3a20 7374 7228 7472 616e 735f 7469  p': str(trans_ti
+000295a0: 6d65 292c 2027 6175 7468 6f72 697a 6174  me), 'authorizat
+000295b0: 696f 6e27 3a20 7472 616e 735f 6175 7468  ion': trans_auth
+000295c0: 7d0d 0a20 2020 2020 2020 2064 6574 6563  }..        detec
+000295d0: 745f 6865 6164 6572 732e 7570 6461 7465  t_headers.update
+000295e0: 2874 7261 6e73 5f75 7064 6174 655f 6865  (trans_update_he
+000295f0: 6164 6572 7329 0d0a 2020 2020 2020 2020  aders)..        
+00029600: 7472 616e 735f 6865 6164 6572 7320 3d20  trans_headers = 
+00029610: 6465 7465 6374 5f68 6561 6465 7273 0d0a  detect_headers..
+00029620: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00029630: 6420 3d20 7b0d 0a20 2020 2020 2020 2020  d = {..         
+00029640: 2020 2027 6465 7669 6365 4964 273a 2073     'deviceId': s
+00029650: 656c 662e 6465 7669 6365 5f69 642c 0d0a  elf.device_id,..
+00029660: 2020 2020 2020 2020 2020 2020 2774 6578              'tex
+00029670: 7427 3a20 7175 6572 795f 7465 7874 2c20  t': query_text, 
+00029680: 2773 6f75 7263 6527 3a20 6672 6f6d 5f6c  'source': from_l
+00029690: 616e 6775 6167 652c 2027 7461 7267 6574  anguage, 'target
+000296a0: 273a 2074 6f5f 6c61 6e67 7561 6765 2c20  ': to_language, 
+000296b0: 276c 6f63 616c 6527 3a20 2765 6e27 2c0d  'locale': 'en',.
+000296c0: 0a20 2020 2020 2020 2020 2020 2027 6469  .            'di
+000296d0: 6374 273a 2027 7472 7565 272c 2027 6469  ct': 'true', 'di
+000296e0: 6374 4469 7370 6c61 7927 3a20 3330 2c20  ctDisplay': 30, 
+000296f0: 2768 6f6e 6f72 6966 6963 273a 2027 6661  'honorific': 'fa
+00029700: 6c73 6527 2c20 2769 6e73 7461 6e74 273a  lse', 'instant':
+00029710: 2027 6661 6c73 6527 2c20 2770 6167 696e   'false', 'pagin
+00029720: 6727 3a20 2766 616c 7365 272c 0d0a 2020  g': 'false',..  
+00029730: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
+00029740: 2070 6179 6c6f 6164 203d 2075 726c 6c69   payload = urlli
+00029750: 622e 7061 7273 652e 7572 6c65 6e63 6f64  b.parse.urlencod
+00029760: 6528 7061 796c 6f61 6429 0d0a 2020 2020  e(payload)..    
+00029770: 2020 2020 7220 3d20 7365 6c66 2e73 6573      r = self.ses
+00029780: 7369 6f6e 2e70 6f73 7428 7365 6c66 2e61  sion.post(self.a
+00029790: 7069 5f75 726c 2c20 6865 6164 6572 733d  pi_url, headers=
+000297a0: 7472 616e 735f 6865 6164 6572 732c 2064  trans_headers, d
+000297b0: 6174 613d 7061 796c 6f61 642c 2074 696d  ata=payload, tim
+000297c0: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
+000297d0: 6f78 6965 733d 7072 6f78 6965 7329 0d0a  oxies=proxies)..
+000297e0: 2020 2020 2020 2020 722e 7261 6973 655f          r.raise_
+000297f0: 666f 725f 7374 6174 7573 2829 0d0a 2020  for_status()..  
+00029800: 2020 2020 2020 6461 7461 203d 2072 2e6a        data = r.j
+00029810: 736f 6e28 290d 0a20 2020 2020 2020 2074  son()..        t
+00029820: 696d 652e 736c 6565 7028 736c 6565 705f  ime.sleep(sleep_
+00029830: 7365 636f 6e64 7329 0d0a 2020 2020 2020  seconds)..      
+00029840: 2020 7365 6c66 2e71 7565 7279 5f63 6f75    self.query_cou
+00029850: 6e74 202b 3d20 310d 0a20 2020 2020 2020  nt += 1..       
+00029860: 2072 6574 7572 6e20 6461 7461 2069 6620   return data if 
+00029870: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
+00029880: 2065 6c73 6520 6461 7461 5b27 7472 616e   else data['tran
+00029890: 736c 6174 6564 5465 7874 275d 0d0a 0d0a  slatedText']....
+000298a0: 0d0a 636c 6173 7320 4c69 6e67 7661 6e65  ..class Lingvane
+000298b0: 7828 5473 6529 3a0d 0a20 2020 2064 6566  x(Tse):..    def
+000298c0: 205f 5f69 6e69 745f 5f28 7365 6c66 293a   __init__(self):
+000298d0: 0d0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
+000298e0: 292e 5f5f 696e 6974 5f5f 2829 0d0a 2020  ).__init__()..  
+000298f0: 2020 2020 2020 7365 6c66 2e62 6567 696e        self.begin
+00029900: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
+00029910: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
+00029920: 662e 686f 7374 5f75 726c 203d 2027 6874  f.host_url = 'ht
+00029930: 7470 733a 2f2f 6c69 6e67 7661 6e65 782e  tps://lingvanex.
+00029940: 636f 6d2f 6465 6d6f 2f27 0d0a 2020 2020  com/demo/'..    
+00029950: 2020 2020 7365 6c66 2e61 7069 5f75 726c      self.api_url
+00029960: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+00029970: 2073 656c 662e 6c61 6e67 7561 6765 5f75   self.language_u
+00029980: 726c 203d 204e 6f6e 650d 0a20 2020 2020  rl = None..     
+00029990: 2020 2073 656c 662e 6175 7468 5f75 726c     self.auth_url
+000299a0: 203d 2027 6874 7470 733a 2f2f 6c69 6e67   = 'https://ling
+000299b0: 7661 6e65 782e 636f 6d2f 6c69 6e67 7661  vanex.com/lingva
+000299c0: 6e65 785f 6465 6d6f 5f70 6167 652f 6a73  nex_demo_page/js
+000299d0: 2f61 7069 2d62 6173 652e 6a73 270d 0a20  /api-base.js'.. 
+000299e0: 2020 2020 2020 2073 656c 662e 686f 7374         self.host
+000299f0: 5f68 6561 6465 7273 203d 2073 656c 662e  _headers = self.
+00029a00: 6765 745f 6865 6164 6572 7328 7365 6c66  get_headers(self
+00029a10: 2e68 6f73 745f 7572 6c2c 2069 665f 6170  .host_url, if_ap
+00029a20: 693d 4661 6c73 6529 0d0a 2020 2020 2020  i=False)..      
+00029a30: 2020 7365 6c66 2e61 7069 5f68 6561 6465    self.api_heade
+00029a40: 7273 203d 2073 656c 662e 6765 745f 6865  rs = self.get_he
+00029a50: 6164 6572 7328 7365 6c66 2e68 6f73 745f  aders(self.host_
+00029a60: 7572 6c2c 2069 665f 6170 693d 5472 7565  url, if_api=True
+00029a70: 2c20 6966 5f6a 736f 6e5f 666f 725f 6170  , if_json_for_ap
+00029a80: 693d 4661 6c73 6529 0d0a 2020 2020 2020  i=False)..      
+00029a90: 2020 7365 6c66 2e73 6573 7369 6f6e 203d    self.session =
+00029aa0: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
+00029ab0: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
+00029ac0: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+00029ad0: 2073 656c 662e 6465 7461 696c 5f6c 616e   self.detail_lan
+00029ae0: 6775 6167 655f 6d61 7020 3d20 4e6f 6e65  guage_map = None
+00029af0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00029b00: 7574 685f 696e 666f 203d 204e 6f6e 650d  uth_info = None.
+00029b10: 0a20 2020 2020 2020 2073 656c 662e 6d6f  .        self.mo
+00029b20: 6465 203d 204e 6f6e 650d 0a20 2020 2020  de = None..     
+00029b30: 2020 2073 656c 662e 6d6f 6465 6c5f 706f     self.model_po
+00029b40: 6f6c 203d 2028 2742 3242 272c 2027 4232  ol = ('B2B', 'B2
+00029b50: 4327 2c29 0d0a 2020 2020 2020 2020 7365  C',)..        se
+00029b60: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
+00029b70: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
+00029b80: 2e6f 7574 7075 745f 7a68 203d 2027 7a68  .output_zh = 'zh
+00029b90: 2d48 616e 735f 434e 270d 0a20 2020 2020  -Hans_CN'..     
+00029ba0: 2020 2073 656c 662e 696e 7075 745f 6c69     self.input_li
+00029bb0: 6d69 7420 3d20 696e 7428 3165 3429 0d0a  mit = int(1e4)..
+00029bc0: 2020 2020 2020 2020 7365 6c66 2e64 6566          self.def
+00029bd0: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
+00029be0: 6765 203d 2073 656c 662e 6f75 7470 7574  ge = self.output
+00029bf0: 5f7a 680d 0a0d 0a20 2020 2040 5473 652e  _zh....    @Tse.
+00029c00: 6465 6275 675f 6c61 6e67 7561 6765 5f6d  debug_language_m
+00029c10: 6170 0d0a 2020 2020 6465 6620 6765 745f  ap..    def get_
+00029c20: 6c61 6e67 7561 6765 5f6d 6170 2873 656c  language_map(sel
+00029c30: 662c 206c 616e 675f 7572 6c3a 2073 7472  f, lang_url: str
+00029c40: 2c20 7373 3a20 5365 7373 696f 6e54 7970  , ss: SessionTyp
+00029c50: 652c 2068 6561 6465 7273 3a20 6469 6374  e, headers: dict
+00029c60: 2c20 7469 6d65 6f75 743a 204f 7074 696f  , timeout: Optio
+00029c70: 6e61 6c5b 666c 6f61 745d 2c20 7072 6f78  nal[float], prox
+00029c80: 6965 733a 204f 7074 696f 6e61 6c5b 6469  ies: Optional[di
+00029c90: 6374 5d2c 202a 2a6b 7761 7267 733a 204c  ct], **kwargs: L
+00029ca0: 616e 674d 6170 4b77 6172 6773 5479 7065  angMapKwargsType
+00029cb0: 2920 2d3e 2064 6963 743a 0d0a 2020 2020  ) -> dict:..    
+00029cc0: 2020 2020 7061 7261 6d73 203d 207b 2761      params = {'a
+00029cd0: 6c6c 273a 2027 7472 7565 272c 2027 636f  ll': 'true', 'co
+00029ce0: 6465 273a 2027 656e 5f47 4227 2c20 2770  de': 'en_GB', 'p
+00029cf0: 6c61 7466 6f72 6d27 3a20 2764 7027 2c20  latform': 'dp', 
+00029d00: 275f 273a 2073 656c 662e 6765 745f 7469  '_': self.get_ti
+00029d10: 6d65 7374 616d 7028 297d 0d0a 2020 2020  mestamp()}..    
+00029d20: 2020 2020 6465 7461 696c 5f6c 616e 675f      detail_lang_
+00029d30: 6d61 7020 3d20 7373 2e67 6574 286c 616e  map = ss.get(lan
+00029d40: 675f 7572 6c2c 2070 6172 616d 733d 7061  g_url, params=pa
+00029d50: 7261 6d73 2c20 6865 6164 6572 733d 6865  rams, headers=he
+00029d60: 6164 6572 732c 2074 696d 656f 7574 3d74  aders, timeout=t
+00029d70: 696d 656f 7574 2c20 7072 6f78 6965 733d  imeout, proxies=
+00029d80: 7072 6f78 6965 7329 2e6a 736f 6e28 290d  proxies).json().
+00029d90: 0a20 2020 2020 2020 2066 6f72 205f 2069  .        for _ i
+00029da0: 6e20 7261 6e67 6528 3329 3a0d 0a20 2020  n range(3):..   
+00029db0: 2020 2020 2020 2020 205f 203d 2073 732e           _ = ss.
+00029dc0: 6765 7428 6c61 6e67 5f75 726c 2c20 7061  get(lang_url, pa
+00029dd0: 7261 6d73 3d7b 2770 6c61 7466 6f72 6d27  rams={'platform'
+00029de0: 3a20 2764 7027 7d2c 2068 6561 6465 7273  : 'dp'}, headers
+00029df0: 3d68 6561 6465 7273 2c20 7469 6d65 6f75  =headers, timeou
+00029e00: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
+00029e10: 6573 3d70 726f 7869 6573 290d 0a20 2020  es=proxies)..   
+00029e20: 2020 2020 206c 616e 675f 6c69 7374 203d       lang_list =
+00029e30: 2073 6f72 7465 6428 7365 7428 5b69 7465   sorted(set([ite
+00029e40: 6d5b 2766 756c 6c5f 636f 6465 275d 2066  m['full_code'] f
+00029e50: 6f72 2069 7465 6d20 696e 2064 6574 6169  or item in detai
+00029e60: 6c5f 6c61 6e67 5f6d 6170 5b27 7265 7375  l_lang_map['resu
+00029e70: 6c74 275d 5d29 290d 0a20 2020 2020 2020  lt']]))..       
+00029e80: 2072 6574 7572 6e20 7b7d 2e66 726f 6d6b   return {}.fromk
+00029e90: 6579 7328 6c61 6e67 5f6c 6973 742c 206c  eys(lang_list, l
+00029ea0: 616e 675f 6c69 7374 290d 0a0d 0a20 2020  ang_list)....   
+00029eb0: 2064 6566 2067 6574 5f64 5f6c 616e 675f   def get_d_lang_
+00029ec0: 6d61 7028 7365 6c66 2c20 6c61 6e67 5f75  map(self, lang_u
+00029ed0: 726c 3a20 7374 722c 2073 733a 2053 6573  rl: str, ss: Ses
+00029ee0: 7369 6f6e 5479 7065 2c20 6865 6164 6572  sionType, header
+00029ef0: 733a 2064 6963 742c 2074 696d 656f 7574  s: dict, timeout
+00029f00: 3a20 666c 6f61 742c 2070 726f 7869 6573  : float, proxies
+00029f10: 3a20 6469 6374 2920 2d3e 2064 6963 743a  : dict) -> dict:
+00029f20: 0d0a 2020 2020 2020 2020 7061 7261 6d73  ..        params
+00029f30: 203d 207b 2761 6c6c 273a 2027 7472 7565   = {'all': 'true
+00029f40: 272c 2027 636f 6465 273a 2027 656e 5f47  ', 'code': 'en_G
+00029f50: 4227 2c20 2770 6c61 7466 6f72 6d27 3a20  B', 'platform': 
+00029f60: 2764 7027 2c20 275f 273a 2073 656c 662e  'dp', '_': self.
+00029f70: 6765 745f 7469 6d65 7374 616d 7028 297d  get_timestamp()}
+00029f80: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00029f90: 2073 732e 6765 7428 6c61 6e67 5f75 726c   ss.get(lang_url
+00029fa0: 2c20 7061 7261 6d73 3d70 6172 616d 732c  , params=params,
+00029fb0: 2068 6561 6465 7273 3d68 6561 6465 7273   headers=headers
+00029fc0: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
+00029fd0: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
+00029fe0: 6573 292e 6a73 6f6e 2829 0d0a 0d0a 2020  es).json()....  
+00029ff0: 2020 6465 6620 6765 745f 6175 7468 2873    def get_auth(s
+0002a000: 656c 662c 2061 7574 685f 7572 6c3a 2073  elf, auth_url: s
+0002a010: 7472 2c20 7373 3a20 5365 7373 696f 6e54  tr, ss: SessionT
+0002a020: 7970 652c 2068 6561 6465 7273 3a20 6469  ype, headers: di
+0002a030: 6374 2c20 7469 6d65 6f75 743a 2066 6c6f  ct, timeout: flo
+0002a040: 6174 2c20 7072 6f78 6965 733a 2064 6963  at, proxies: dic
+0002a050: 7429 202d 3e20 6469 6374 3a0d 0a20 2020  t) -> dict:..   
+0002a060: 2020 2020 206a 735f 6874 6d6c 203d 2073       js_html = s
+0002a070: 732e 6765 7428 6175 7468 5f75 726c 2c20  s.get(auth_url, 
+0002a080: 6865 6164 6572 733d 6865 6164 6572 732c  headers=headers,
+0002a090: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
+0002a0a0: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
+0002a0b0: 7329 2e74 6578 740d 0a20 2020 2020 2020  s).text..       
+0002a0c0: 2072 6574 7572 6e20 7b6b 3a20 7620 666f   return {k: v fo
+0002a0d0: 7220 6b2c 2076 2069 6e20 7265 2e63 6f6d  r k, v in re.com
+0002a0e0: 7069 6c65 2827 2c28 2e2a 3f29 3d22 282e  pile(',(.*?)="(.
+0002a0f0: 2a3f 2922 2729 2e66 696e 6461 6c6c 286a  *?)"').findall(j
+0002a100: 735f 6874 6d6c 297d 0d0a 0d0a 2020 2020  s_html)}....    
+0002a110: 4054 7365 2e74 696d 655f 7374 6174 0d0a  @Tse.time_stat..
+0002a120: 2020 2020 4054 7365 2e63 6865 636b 5f71      @Tse.check_q
+0002a130: 7565 7279 0d0a 2020 2020 6465 6620 6c69  uery..    def li
+0002a140: 6e67 7661 6e65 785f 6170 6928 7365 6c66  ngvanex_api(self
+0002a150: 2c20 7175 6572 795f 7465 7874 3a20 7374  , query_text: st
+0002a160: 722c 2066 726f 6d5f 6c61 6e67 7561 6765  r, from_language
+0002a170: 3a20 7374 7220 3d20 2761 7574 6f27 2c20  : str = 'auto', 
+0002a180: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
+0002a190: 203d 2027 656e 272c 202a 2a6b 7761 7267   = 'en', **kwarg
+0002a1a0: 733a 2041 7069 4b77 6172 6773 5479 7065  s: ApiKwargsType
+0002a1b0: 2920 2d3e 2055 6e69 6f6e 5b73 7472 2c20  ) -> Union[str, 
+0002a1c0: 6469 6374 5d3a 0d0a 2020 2020 2020 2020  dict]:..        
+0002a1d0: 2222 220d 0a20 2020 2020 2020 2068 7474  """..        htt
+0002a1e0: 7073 3a2f 2f6c 696e 6776 616e 6578 2e63  ps://lingvanex.c
+0002a1f0: 6f6d 2f64 656d 6f2f 0d0a 2020 2020 2020  om/demo/..      
+0002a200: 2020 3a70 6172 616d 2071 7565 7279 5f74    :param query_t
+0002a210: 6578 743a 2073 7472 2c20 6d75 7374 2e0d  ext: str, must..
+0002a220: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0002a230: 6672 6f6d 5f6c 616e 6775 6167 653a 2073  from_language: s
+0002a240: 7472 2c20 6465 6661 756c 7420 2761 7574  tr, default 'aut
+0002a250: 6f27 2e0d 0a20 2020 2020 2020 203a 7061  o'...        :pa
+0002a260: 7261 6d20 746f 5f6c 616e 6775 6167 653a  ram to_language:
+0002a270: 2073 7472 2c20 6465 6661 756c 7420 2765   str, default 'e
+0002a280: 6e27 2e0d 0a20 2020 2020 2020 203a 7061  n'...        :pa
+0002a290: 7261 6d20 2a2a 6b77 6172 6773 3a0d 0a20  ram **kwargs:.. 
+0002a2a0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0002a2b0: 7061 7261 6d20 7469 6d65 6f75 743a 2066  param timeout: f
+0002a2c0: 6c6f 6174 2c20 6465 6661 756c 7420 4e6f  loat, default No
+0002a2d0: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
+0002a2e0: 2020 2020 203a 7061 7261 6d20 7072 6f78       :param prox
+0002a2f0: 6965 733a 2064 6963 742c 2064 6566 6175  ies: dict, defau
+0002a300: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
+0002a310: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+0002a320: 2073 6c65 6570 5f73 6563 6f6e 6473 3a20   sleep_seconds: 
+0002a330: 666c 6f61 742c 2064 6566 6175 6c74 2030  float, default 0
+0002a340: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0002a350: 2020 203a 7061 7261 6d20 6973 5f64 6574     :param is_det
+0002a360: 6169 6c5f 7265 7375 6c74 3a20 626f 6f6c  ail_result: bool
+0002a370: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+0002a380: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002a390: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
+0002a3a0: 7265 5f6c 696d 6974 5f6f 665f 6c65 6e67  re_limit_of_leng
+0002a3b0: 7468 3a20 626f 6f6c 2c20 6465 6661 756c  th: bool, defaul
+0002a3c0: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+0002a3d0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+0002a3e0: 206c 696d 6974 5f6f 665f 6c65 6e67 7468   limit_of_length
+0002a3f0: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
+0002a400: 3030 3030 2e0d 0a20 2020 2020 2020 2020  0000...         
+0002a410: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+0002a420: 5f69 676e 6f72 655f 656d 7074 795f 7175  _ignore_empty_qu
+0002a430: 6572 793a 2062 6f6f 6c2c 2064 6566 6175  ery: bool, defau
+0002a440: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+0002a450: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+0002a460: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
+0002a470: 5f61 6674 6572 5f66 7265 713a 2069 6e74  _after_freq: int
+0002a480: 2c20 6465 6661 756c 7420 3130 3030 2e0d  , default 1000..
+0002a490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002a4a0: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
+0002a4b0: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+0002a4c0: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
+0002a4d0: 6175 6c74 2031 3530 302e 0d0a 2020 2020  ault 1500...    
+0002a4e0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+0002a4f0: 616d 2069 665f 7368 6f77 5f74 696d 655f  am if_show_time_
+0002a500: 7374 6174 3a20 626f 6f6c 2c20 6465 6661  stat: bool, defa
+0002a510: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+0002a520: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+0002a530: 616d 2073 686f 775f 7469 6d65 5f73 7461  am show_time_sta
+0002a540: 745f 7072 6563 6973 696f 6e3a 2069 6e74  t_precision: int
+0002a550: 2c20 6465 6661 756c 7420 322e 0d0a 2020  , default 2...  
+0002a560: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+0002a570: 6172 616d 2069 665f 7072 696e 745f 7761  aram if_print_wa
+0002a580: 726e 696e 673a 2062 6f6f 6c2c 2064 6566  rning: bool, def
+0002a590: 6175 6c74 2054 7275 652e 0d0a 2020 2020  ault True...    
+0002a5a0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+0002a5b0: 616d 206c 696e 6776 616e 6578 5f6d 6f64  am lingvanex_mod
+0002a5c0: 653a 2073 7472 2c20 6465 6661 756c 7420  e: str, default 
+0002a5d0: 2242 3243 222c 2063 686f 6f73 6520 6672  "B2C", choose fr
+0002a5e0: 6f6d 2028 2242 3242 222c 2022 4232 4322  om ("B2B", "B2C"
+0002a5f0: 292e 0d0a 2020 2020 2020 2020 3a72 6574  )...        :ret
+0002a600: 7572 6e3a 2073 7472 206f 7220 6469 6374  urn: str or dict
+0002a610: 0d0a 2020 2020 2020 2020 2222 220d 0a0d  ..        """...
+0002a620: 0a20 2020 2020 2020 206d 6f64 6520 3d20  .        mode = 
+0002a630: 6b77 6172 6773 2e67 6574 2827 6c69 6e67  kwargs.get('ling
+0002a640: 7661 6e65 785f 6d6f 6465 272c 2027 4232  vanex_mode', 'B2
+0002a650: 4327 290d 0a20 2020 2020 2020 2074 696d  C')..        tim
+0002a660: 656f 7574 203d 206b 7761 7267 732e 6765  eout = kwargs.ge
+0002a670: 7428 2774 696d 656f 7574 272c 204e 6f6e  t('timeout', Non
+0002a680: 6529 0d0a 2020 2020 2020 2020 7072 6f78  e)..        prox
+0002a690: 6965 7320 3d20 6b77 6172 6773 2e67 6574  ies = kwargs.get
+0002a6a0: 2827 7072 6f78 6965 7327 2c20 4e6f 6e65  ('proxies', None
+0002a6b0: 290d 0a20 2020 2020 2020 2073 6c65 6570  )..        sleep
+0002a6c0: 5f73 6563 6f6e 6473 203d 206b 7761 7267  _seconds = kwarg
+0002a6d0: 732e 6765 7428 2773 6c65 6570 5f73 6563  s.get('sleep_sec
+0002a6e0: 6f6e 6473 272c 2030 290d 0a20 2020 2020  onds', 0)..     
+0002a6f0: 2020 2069 665f 7072 696e 745f 7761 726e     if_print_warn
+0002a700: 696e 6720 3d20 6b77 6172 6773 2e67 6574  ing = kwargs.get
+0002a710: 2827 6966 5f70 7269 6e74 5f77 6172 6e69  ('if_print_warni
+0002a720: 6e67 272c 2054 7275 6529 0d0a 2020 2020  ng', True)..    
+0002a730: 2020 2020 6973 5f64 6574 6169 6c5f 7265      is_detail_re
+0002a740: 7375 6c74 203d 206b 7761 7267 732e 6765  sult = kwargs.ge
+0002a750: 7428 2769 735f 6465 7461 696c 5f72 6573  t('is_detail_res
+0002a760: 756c 7427 2c20 4661 6c73 6529 0d0a 2020  ult', False)..  
+0002a770: 2020 2020 2020 7570 6461 7465 5f73 6573        update_ses
+0002a780: 7369 6f6e 5f61 6674 6572 5f66 7265 7120  sion_after_freq 
+0002a790: 3d20 6b77 6172 6773 2e67 6574 2827 7570  = kwargs.get('up
+0002a7a0: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+0002a7b0: 6572 5f66 7265 7127 2c20 7365 6c66 2e64  er_freq', self.d
+0002a7c0: 6566 6175 6c74 5f73 6573 7369 6f6e 5f66  efault_session_f
+0002a7d0: 7265 7129 0d0a 2020 2020 2020 2020 7570  req)..        up
+0002a7e0: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+0002a7f0: 6572 5f73 6563 6f6e 6473 203d 206b 7761  er_seconds = kwa
+0002a800: 7267 732e 6765 7428 2775 7064 6174 655f  rgs.get('update_
+0002a810: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
+0002a820: 636f 6e64 7327 2c20 7365 6c66 2e64 6566  conds', self.def
+0002a830: 6175 6c74 5f73 6573 7369 6f6e 5f73 6563  ault_session_sec
+0002a840: 6f6e 6473 290d 0a20 2020 2020 2020 2073  onds)..        s
+0002a850: 656c 662e 6368 6563 6b5f 696e 7075 745f  elf.check_input_
+0002a860: 6c69 6d69 7428 7175 6572 795f 7465 7874  limit(query_text
+0002a870: 2c20 7365 6c66 2e69 6e70 7574 5f6c 696d  , self.input_lim
+0002a880: 6974 290d 0a0d 0a20 2020 2020 2020 206e  it)....        n
+0002a890: 6f74 5f75 7064 6174 655f 636f 6e64 5f66  ot_update_cond_f
+0002a8a0: 7265 7120 3d20 3120 6966 2073 656c 662e  req = 1 if self.
+0002a8b0: 7175 6572 795f 636f 756e 7420 2520 7570  query_count % up
+0002a8c0: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+0002a8d0: 6572 5f66 7265 7120 213d 2030 2065 6c73  er_freq != 0 els
+0002a8e0: 6520 300d 0a20 2020 2020 2020 206e 6f74  e 0..        not
+0002a8f0: 5f75 7064 6174 655f 636f 6e64 5f74 696d  _update_cond_tim
+0002a900: 6520 3d20 3120 6966 2074 696d 652e 7469  e = 1 if time.ti
+0002a910: 6d65 2829 202d 2073 656c 662e 6265 6769  me() - self.begi
+0002a920: 6e5f 7469 6d65 203c 2075 7064 6174 655f  n_time < update_
+0002a930: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
+0002a940: 636f 6e64 7320 656c 7365 2030 0d0a 2020  conds else 0..  
+0002a950: 2020 2020 2020 6966 206e 6f74 2028 7365        if not (se
+0002a960: 6c66 2e73 6573 7369 6f6e 2061 6e64 2073  lf.session and s
+0002a970: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
+0002a980: 2061 6e64 206e 6f74 5f75 7064 6174 655f   and not_update_
+0002a990: 636f 6e64 5f66 7265 7120 616e 6420 6e6f  cond_freq and no
+0002a9a0: 745f 7570 6461 7465 5f63 6f6e 645f 7469  t_update_cond_ti
+0002a9b0: 6d65 2061 6e64 2073 656c 662e 6175 7468  me and self.auth
+0002a9c0: 5f69 6e66 6f20 616e 6420 7365 6c66 2e6d  _info and self.m
+0002a9d0: 6f64 6520 3d3d 206d 6f64 6529 3a0d 0a20  ode == mode):.. 
+0002a9e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0002a9f0: 6265 6769 6e5f 7469 6d65 203d 2074 696d  begin_time = tim
+0002aa00: 652e 7469 6d65 2829 0d0a 2020 2020 2020  e.time()..      
+0002aa10: 2020 2020 2020 7365 6c66 2e73 6573 7369        self.sessi
+0002aa20: 6f6e 203d 2072 6571 7565 7374 732e 5365  on = requests.Se
+0002aa30: 7373 696f 6e28 290d 0a20 2020 2020 2020  ssion()..       
+0002aa40: 2020 2020 205f 203d 2073 656c 662e 7365       _ = self.se
+0002aa50: 7373 696f 6e2e 6765 7428 7365 6c66 2e68  ssion.get(self.h
+0002aa60: 6f73 745f 7572 6c2c 2068 6561 6465 7273  ost_url, headers
+0002aa70: 3d73 656c 662e 686f 7374 5f68 6561 6465  =self.host_heade
+0002aa80: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
+0002aa90: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
+0002aaa0: 7869 6573 290d 0a20 2020 2020 2020 2020  xies)..         
+0002aab0: 2020 2073 656c 662e 6175 7468 5f69 6e66     self.auth_inf
+0002aac0: 6f20 3d20 7365 6c66 2e67 6574 5f61 7574  o = self.get_aut
+0002aad0: 6828 7365 6c66 2e61 7574 685f 7572 6c2c  h(self.auth_url,
+0002aae0: 2073 656c 662e 7365 7373 696f 6e2c 2073   self.session, s
+0002aaf0: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
+0002ab00: 2c20 7469 6d65 6f75 742c 2070 726f 7869  , timeout, proxi
+0002ab10: 6573 290d 0a0d 0a20 2020 2020 2020 2020  es)....         
+0002ab20: 2020 2069 6620 6d6f 6465 206e 6f74 2069     if mode not i
+0002ab30: 6e20 7365 6c66 2e6d 6f64 656c 5f70 6f6f  n self.model_poo
+0002ab40: 6c3a 0d0a 2020 2020 2020 2020 2020 2020  l:..            
+0002ab50: 2020 2020 7261 6973 6520 5472 616e 736c      raise Transl
+0002ab60: 6174 6f72 4572 726f 720d 0a0d 0a20 2020  atorError....   
+0002ab70: 2020 2020 2020 2020 2069 6620 6d6f 6465           if mode
+0002ab80: 2021 3d20 7365 6c66 2e6d 6f64 653a 0d0a   != self.mode:..
+0002ab90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002aba0: 7365 6c66 2e6d 6f64 6520 3d20 6d6f 6465  self.mode = mode
+0002abb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002abc0: 2020 7365 6c66 2e61 7069 5f75 726c 203d    self.api_url =
+0002abd0: 2027 272e 6a6f 696e 285b 7365 6c66 2e61   ''.join([self.a
+0002abe0: 7574 685f 696e 666f 5b66 277b 6d6f 6465  uth_info[f'{mode
+0002abf0: 7d5f 4241 5345 5f55 524c 275d 2c20 7365  }_BASE_URL'], se
+0002ac00: 6c66 2e61 7574 685f 696e 666f 5b27 5452  lf.auth_info['TR
+0002ac10: 414e 534c 4154 455f 5552 4c27 5d5d 290d  ANSLATE_URL']]).
+0002ac20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ac30: 2073 656c 662e 6c61 6e67 7561 6765 5f75   self.language_u
+0002ac40: 726c 203d 2027 272e 6a6f 696e 285b 7365  rl = ''.join([se
+0002ac50: 6c66 2e61 7574 685f 696e 666f 5b66 277b  lf.auth_info[f'{
+0002ac60: 6d6f 6465 7d5f 4241 5345 5f55 524c 275d  mode}_BASE_URL']
+0002ac70: 2c20 7365 6c66 2e61 7574 685f 696e 666f  , self.auth_info
+0002ac80: 5b27 4745 545f 4c41 4e47 5541 4745 535f  ['GET_LANGUAGES_
+0002ac90: 5552 4c27 5d5d 290d 0a20 2020 2020 2020  URL']])..       
+0002aca0: 2020 2020 2020 2020 2073 656c 662e 686f           self.ho
+0002acb0: 7374 5f68 6561 6465 7273 2e75 7064 6174  st_headers.updat
+0002acc0: 6528 7b27 6175 7468 6f72 697a 6174 696f  e({'authorizatio
+0002acd0: 6e27 3a20 7365 6c66 2e61 7574 685f 696e  n': self.auth_in
+0002ace0: 666f 5b66 277b 6d6f 6465 7d5f 4155 5448  fo[f'{mode}_AUTH
+0002acf0: 5f54 4f4b 454e 275d 7d29 0d0a 2020 2020  _TOKEN']})..    
+0002ad00: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0002ad10: 2e61 7069 5f68 6561 6465 7273 2e75 7064  .api_headers.upd
+0002ad20: 6174 6528 7b27 6175 7468 6f72 697a 6174  ate({'authorizat
+0002ad30: 696f 6e27 3a20 7365 6c66 2e61 7574 685f  ion': self.auth_
+0002ad40: 696e 666f 5b66 277b 6d6f 6465 7d5f 4155  info[f'{mode}_AU
+0002ad50: 5448 5f54 4f4b 454e 275d 7d29 0d0a 2020  TH_TOKEN']})..  
+0002ad60: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0002ad70: 6c66 2e61 7069 5f68 6561 6465 7273 2e75  lf.api_headers.u
+0002ad80: 7064 6174 6528 7b27 7265 6665 7265 7227  pdate({'referer'
+0002ad90: 3a20 7572 6c6c 6962 2e70 6172 7365 2e75  : urllib.parse.u
+0002ada0: 726c 7061 7273 6528 7365 6c66 2e61 7574  rlparse(self.aut
+0002adb0: 685f 696e 666f 5b66 277b 6d6f 6465 7d5f  h_info[f'{mode}_
+0002adc0: 4241 5345 5f55 524c 275d 292e 6e65 746c  BASE_URL']).netl
+0002add0: 6f63 7d29 0d0a 0d0a 2020 2020 2020 2020  oc})....        
+0002ade0: 2020 2020 6465 6275 675f 6c61 6e67 5f6b      debug_lang_k
+0002adf0: 7761 7267 7320 3d20 7365 6c66 2e64 6562  wargs = self.deb
+0002ae00: 7567 5f6c 616e 675f 6b77 6172 6773 2866  ug_lang_kwargs(f
+0002ae10: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
+0002ae20: 5f6c 616e 6775 6167 652c 2073 656c 662e  _language, self.
+0002ae30: 6465 6661 756c 745f 6672 6f6d 5f6c 616e  default_from_lan
+0002ae40: 6775 6167 652c 2069 665f 7072 696e 745f  guage, if_print_
+0002ae50: 7761 726e 696e 6729 0d0a 2020 2020 2020  warning)..      
+0002ae60: 2020 2020 2020 7365 6c66 2e6c 616e 6775        self.langu
+0002ae70: 6167 655f 6d61 7020 3d20 7365 6c66 2e67  age_map = self.g
+0002ae80: 6574 5f6c 616e 6775 6167 655f 6d61 7028  et_language_map(
+0002ae90: 7365 6c66 2e6c 616e 6775 6167 655f 7572  self.language_ur
+0002aea0: 6c2c 2073 656c 662e 7365 7373 696f 6e2c  l, self.session,
+0002aeb0: 2073 656c 662e 686f 7374 5f68 6561 6465   self.host_heade
+0002aec0: 7273 2c20 7469 6d65 6f75 742c 2070 726f  rs, timeout, pro
+0002aed0: 7869 6573 2c20 2a2a 6465 6275 675f 6c61  xies, **debug_la
+0002aee0: 6e67 5f6b 7761 7267 7329 0d0a 2020 2020  ng_kwargs)..    
+0002aef0: 2020 2020 2020 2020 7365 6c66 2e64 6574          self.det
+0002af00: 6169 6c5f 6c61 6e67 7561 6765 5f6d 6170  ail_language_map
+0002af10: 203d 2073 656c 662e 6765 745f 645f 6c61   = self.get_d_la
+0002af20: 6e67 5f6d 6170 2873 656c 662e 6c61 6e67  ng_map(self.lang
+0002af30: 7561 6765 5f75 726c 2c20 7365 6c66 2e73  uage_url, self.s
+0002af40: 6573 7369 6f6e 2c20 7365 6c66 2e68 6f73  ession, self.hos
+0002af50: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
+0002af60: 7574 2c20 7072 6f78 6965 7329 0d0a 0d0a  ut, proxies)....
+0002af70: 2020 2020 2020 2020 6966 2066 726f 6d5f          if from_
+0002af80: 6c61 6e67 7561 6765 203d 3d20 2761 7574  language == 'aut
+0002af90: 6f27 3a0d 0a20 2020 2020 2020 2020 2020  o':..           
+0002afa0: 2066 726f 6d5f 6c61 6e67 7561 6765 203d   from_language =
+0002afb0: 2073 656c 662e 7761 726e 696e 675f 6175   self.warning_au
+0002afc0: 746f 5f6c 616e 6728 276c 696e 6776 616e  to_lang('lingvan
+0002afd0: 6578 272c 2073 656c 662e 6465 6661 756c  ex', self.defaul
+0002afe0: 745f 6672 6f6d 5f6c 616e 6775 6167 652c  t_from_language,
+0002aff0: 2069 665f 7072 696e 745f 7761 726e 696e   if_print_warnin
+0002b000: 6729 0d0a 2020 2020 2020 2020 6672 6f6d  g)..        from
+0002b010: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
+0002b020: 6e67 7561 6765 203d 2073 656c 662e 6368  nguage = self.ch
+0002b030: 6563 6b5f 6c61 6e67 7561 6765 2866 726f  eck_language(fro
+0002b040: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
+0002b050: 616e 6775 6167 652c 2073 656c 662e 6c61  anguage, self.la
+0002b060: 6e67 7561 6765 5f6d 6170 2c20 6f75 7470  nguage_map, outp
+0002b070: 7574 5f7a 683d 7365 6c66 2e6f 7574 7075  ut_zh=self.outpu
+0002b080: 745f 7a68 2c0d 0a20 2020 2020 2020 2020  t_zh,..         
+0002b090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b0c0: 6f75 7470 7574 5f65 6e5f 7472 616e 736c  output_en_transl
+0002b0d0: 6174 6f72 3d27 6c69 6e67 7661 6e65 7827  ator='lingvanex'
+0002b0e0: 2c20 6f75 7470 7574 5f65 6e3d 2765 6e5f  , output_en='en_
+0002b0f0: 4742 2729 0d0a 0d0a 2020 2020 2020 2020  GB')....        
+0002b100: 7061 796c 6f61 6420 3d20 7b0d 0a20 2020  payload = {..   
+0002b110: 2020 2020 2020 2020 2027 6672 6f6d 273a           'from':
+0002b120: 2066 726f 6d5f 6c61 6e67 7561 6765 2c0d   from_language,.
+0002b130: 0a20 2020 2020 2020 2020 2020 2027 746f  .            'to
+0002b140: 273a 2074 6f5f 6c61 6e67 7561 6765 2c0d  ': to_language,.
+0002b150: 0a20 2020 2020 2020 2020 2020 2027 7465  .            'te
+0002b160: 7874 273a 2071 7565 7279 5f74 6578 742c  xt': query_text,
+0002b170: 0d0a 2020 2020 2020 2020 2020 2020 2770  ..            'p
+0002b180: 6c61 7466 6f72 6d27 3a20 2764 7027 2c0d  latform': 'dp',.
+0002b190: 0a20 2020 2020 2020 2020 2020 2027 6973  .            'is
+0002b1a0: 5f72 6574 7572 6e5f 7465 7874 5f73 706c  _return_text_spl
+0002b1b0: 6974 5f72 616e 6765 7327 3a20 2774 7275  it_ranges': 'tru
+0002b1c0: 6527 0d0a 2020 2020 2020 2020 7d0d 0a20  e'..        }.. 
+0002b1d0: 2020 2020 2020 2070 6179 6c6f 6164 203d         payload =
+0002b1e0: 2075 726c 6c69 622e 7061 7273 652e 7572   urllib.parse.ur
+0002b1f0: 6c65 6e63 6f64 6528 7061 796c 6f61 6429  lencode(payload)
+0002b200: 0d0a 2020 2020 2020 2020 7220 3d20 7365  ..        r = se
+0002b210: 6c66 2e73 6573 7369 6f6e 2e70 6f73 7428  lf.session.post(
+0002b220: 7365 6c66 2e61 7069 5f75 726c 2c20 6461  self.api_url, da
+0002b230: 7461 3d70 6179 6c6f 6164 2c20 6865 6164  ta=payload, head
+0002b240: 6572 733d 7365 6c66 2e61 7069 5f68 6561  ers=self.api_hea
+0002b250: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+0002b260: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+0002b270: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
+0002b280: 2072 2e72 6169 7365 5f66 6f72 5f73 7461   r.raise_for_sta
+0002b290: 7475 7328 290d 0a20 2020 2020 2020 2064  tus()..        d
+0002b2a0: 6174 6120 3d20 722e 6a73 6f6e 2829 0d0a  ata = r.json()..
+0002b2b0: 2020 2020 2020 2020 7469 6d65 2e73 6c65          time.sle
+0002b2c0: 6570 2873 6c65 6570 5f73 6563 6f6e 6473  ep(sleep_seconds
+0002b2d0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+0002b2e0: 7175 6572 795f 636f 756e 7420 2b3d 2031  query_count += 1
+0002b2f0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+0002b300: 2064 6174 6120 6966 2069 735f 6465 7461   data if is_deta
+0002b310: 696c 5f72 6573 756c 7420 656c 7365 2064  il_result else d
+0002b320: 6174 615b 2772 6573 756c 7427 5d5b 2774  ata['result']['t
+0002b330: 6578 7427 5d0d 0a0d 0a0d 0a63 6c61 7373  ext']......class
+0002b340: 204e 6975 7472 616e 7328 5473 6529 3a0d   Niutrans(Tse):.
+0002b350: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+0002b360: 5f28 7365 6c66 293a 0d0a 2020 2020 2020  _(self):..      
+0002b370: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
+0002b380: 5f5f 2829 0d0a 2020 2020 2020 2020 7365  __()..        se
+0002b390: 6c66 2e62 6567 696e 5f74 696d 6520 3d20  lf.begin_time = 
+0002b3a0: 7469 6d65 2e74 696d 6528 290d 0a20 2020  time.time()..   
+0002b3b0: 2020 2020 2073 656c 662e 686f 7374 5f75       self.host_u
+0002b3c0: 726c 203d 2027 6874 7470 3a2f 2f64 6973  rl = 'http://dis
+0002b3d0: 706c 6179 2e6e 6975 7472 616e 732e 636f  play.niutrans.co
+0002b3e0: 6d27 2020 2320 6d75 7374 2068 7474 700d  m'  # must http.
+0002b3f0: 0a20 2020 2020 2020 2073 656c 662e 6170  .        self.ap
+0002b400: 695f 7572 6c20 3d20 2768 7474 703a 2f2f  i_url = 'http://
+0002b410: 6469 7370 6c61 792e 6e69 7574 7261 6e73  display.niutrans
+0002b420: 2e63 6f6d 2f6e 6975 7472 616e 732f 7465  .com/niutrans/te
+0002b430: 7874 5472 616e 736c 6174 696f 6e27 0d0a  xtTranslation'..
+0002b440: 2020 2020 2020 2020 7365 6c66 2e63 6f6f          self.coo
+0002b450: 6b69 655f 7572 6c20 3d20 2768 7474 703a  kie_url = 'http:
+0002b460: 2f2f 6469 7370 6c61 792e 6e69 7574 7261  //display.niutra
+0002b470: 6e73 2e63 6f6d 2f6e 6975 7472 616e 732f  ns.com/niutrans/
+0002b480: 7573 6572 2f67 6574 4163 636f 756e 7441  user/getAccountA
+0002b490: 646d 696e 3f6c 6f63 616c 653d 7a68 2d43  dmin?locale=zh-C
+0002b4a0: 4e27 0d0a 2020 2020 2020 2020 7365 6c66  N'..        self
+0002b4b0: 2e75 7365 725f 7572 6c20 3d20 2768 7474  .user_url = 'htt
+0002b4c0: 703a 2f2f 6469 7370 6c61 792e 6e69 7574  p://display.niut
+0002b4d0: 7261 6e73 2e63 6f6d 2f6e 6975 7472 616e  rans.com/niutran
+0002b4e0: 732f 7573 6572 2f67 6574 4775 6573 7455  s/user/getGuestU
+0002b4f0: 7365 7227 0d0a 2020 2020 2020 2020 7365  ser'..        se
+0002b500: 6c66 2e6b 6579 5f75 726c 203d 2027 6874  lf.key_url = 'ht
+0002b510: 7470 3a2f 2f64 6973 706c 6179 2e6e 6975  tp://display.niu
+0002b520: 7472 616e 732e 636f 6d2f 6e69 7574 7261  trans.com/niutra
+0002b530: 6e73 2f75 7365 722f 6765 744f 6e65 5075  ns/user/getOnePu
+0002b540: 626c 6963 4b65 7927 0d0a 2020 2020 2020  blicKey'..      
+0002b550: 2020 7365 6c66 2e74 6f6b 656e 5f75 726c    self.token_url
+0002b560: 203d 2027 6874 7470 3a2f 2f64 6973 706c   = 'http://displ
+0002b570: 6179 2e6e 6975 7472 616e 732e 636f 6d2f  ay.niutrans.com/
+0002b580: 6e69 7574 7261 6e73 2f6c 6f67 696e 270d  niutrans/login'.
+0002b590: 0a20 2020 2020 2020 2073 656c 662e 696e  .        self.in
+0002b5a0: 666f 5f75 726c 203d 2027 6874 7470 3a2f  fo_url = 'http:/
+0002b5b0: 2f64 6973 706c 6179 2e6e 6975 7472 616e  /display.niutran
+0002b5c0: 732e 636f 6d2f 6e69 7574 7261 6e73 2f75  s.com/niutrans/u
+0002b5d0: 7365 722f 6765 7455 7365 7249 6e66 6f42  ser/getUserInfoB
+0002b5e0: 7954 6f6b 656e 270d 0a20 2020 2020 2020  yToken'..       
+0002b5f0: 2073 656c 662e 6765 745f 6c61 6e67 7561   self.get_langua
+0002b600: 6765 5f75 726c 203d 2027 6874 7470 3a2f  ge_url = 'http:/
+0002b610: 2f64 6973 706c 6179 2e6e 6975 7472 616e  /display.niutran
+0002b620: 732e 636f 6d2f 6e69 7574 7261 6e73 2f74  s.com/niutrans/t
+0002b630: 7261 6e73 6c53 6572 7669 6365 496e 666f  ranslServiceInfo
+0002b640: 2f67 6574 416c 6c4c 616e 6775 6167 6527  /getAllLanguage'
+0002b650: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
+0002b660: 6574 6563 745f 6c61 6e67 7561 6765 5f75  etect_language_u
+0002b670: 726c 203d 2027 6874 7470 3a2f 2f64 6973  rl = 'http://dis
+0002b680: 706c 6179 2e6e 6975 7472 616e 732e 636f  play.niutrans.co
+0002b690: 6d2f 6e69 7574 7261 6e73 2f74 6578 744c  m/niutrans/textL
+0002b6a0: 616e 6775 6167 6544 6574 6563 7427 0d0a  anguageDetect'..
+0002b6b0: 2020 2020 2020 2020 7365 6c66 2e68 6f73          self.hos
+0002b6c0: 745f 6865 6164 6572 7320 3d20 7365 6c66  t_headers = self
+0002b6d0: 2e67 6574 5f68 6561 6465 7273 2873 656c  .get_headers(sel
+0002b6e0: 662e 686f 7374 5f75 726c 2c20 6966 5f61  f.host_url, if_a
+0002b6f0: 7069 3d46 616c 7365 290d 0a20 2020 2020  pi=False)..     
+0002b700: 2020 2073 656c 662e 6170 695f 6865 6164     self.api_head
+0002b710: 6572 7320 3d20 4e6f 6e65 0d0a 2020 2020  ers = None..    
+0002b720: 2020 2020 7365 6c66 2e73 6573 7369 6f6e      self.session
+0002b730: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+0002b740: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+0002b750: 6170 203d 204e 6f6e 650d 0a20 2020 2020  ap = None..     
+0002b760: 2020 2023 2073 656c 662e 6465 7461 696c     # self.detail
+0002b770: 5f6c 616e 6775 6167 655f 6d61 7020 3d20  _language_map = 
+0002b780: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
+0002b790: 6c66 2e61 6363 6f75 6e74 5f69 6e66 6f20  lf.account_info 
+0002b7a0: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+0002b7b0: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
+0002b7c0: 203d 2030 0d0a 2020 2020 2020 2020 7365   = 0..        se
+0002b7d0: 6c66 2e6f 7574 7075 745f 7a68 203d 2027  lf.output_zh = '
+0002b7e0: 7a68 270d 0a20 2020 2020 2020 2073 656c  zh'..        sel
+0002b7f0: 662e 696e 7075 745f 6c69 6d69 7420 3d20  f.input_limit = 
+0002b800: 696e 7428 3565 3329 0d0a 2020 2020 2020  int(5e3)..      
+0002b810: 2020 7365 6c66 2e64 6566 6175 6c74 5f66    self.default_f
+0002b820: 726f 6d5f 6c61 6e67 7561 6765 203d 2073  rom_language = s
+0002b830: 656c 662e 6f75 7470 7574 5f7a 680d 0a0d  elf.output_zh...
+0002b840: 0a20 2020 2040 5473 652e 6465 6275 675f  .    @Tse.debug_
+0002b850: 6c61 6e67 7561 6765 5f6d 6170 0d0a 2020  language_map..  
+0002b860: 2020 6465 6620 6765 745f 6c61 6e67 7561    def get_langua
+0002b870: 6765 5f6d 6170 2873 656c 662c 206c 616e  ge_map(self, lan
+0002b880: 675f 7572 6c3a 2073 7472 2c20 7373 3a20  g_url: str, ss: 
+0002b890: 5365 7373 696f 6e54 7970 652c 2068 6561  SessionType, hea
+0002b8a0: 6465 7273 3a20 6469 6374 2c20 7469 6d65  ders: dict, time
+0002b8b0: 6f75 743a 204f 7074 696f 6e61 6c5b 666c  out: Optional[fl
+0002b8c0: 6f61 745d 2c20 7072 6f78 6965 733a 204f  oat], proxies: O
+0002b8d0: 7074 696f 6e61 6c5b 6469 6374 5d2c 202a  ptional[dict], *
+0002b8e0: 2a6b 7761 7267 733a 204c 616e 674d 6170  *kwargs: LangMap
+0002b8f0: 4b77 6172 6773 5479 7065 2920 2d3e 2064  KwargsType) -> d
+0002b900: 6963 743a 0d0a 2020 2020 2020 2020 6465  ict:..        de
+0002b910: 7461 696c 5f6c 616e 675f 6d61 7020 3d20  tail_lang_map = 
+0002b920: 7373 2e67 6574 286c 616e 675f 7572 6c2c  ss.get(lang_url,
+0002b930: 2068 6561 6465 7273 3d68 6561 6465 7273   headers=headers
+0002b940: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
+0002b950: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
+0002b960: 6573 292e 6a73 6f6e 2829 0d0a 2020 2020  es).json()..    
+0002b970: 2020 2020 6c61 6e67 5f6c 6973 7420 3d20      lang_list = 
+0002b980: 736f 7274 6564 2873 6574 285b 6974 656d  sorted(set([item
+0002b990: 5b27 6c61 6e67 7561 6765 4162 6272 6576  ['languageAbbrev
+0002b9a0: 6961 7469 6f6e 275d 2066 6f72 2069 7465  iation'] for ite
+0002b9b0: 6d20 696e 2064 6574 6169 6c5f 6c61 6e67  m in detail_lang
+0002b9c0: 5f6d 6170 5b27 6461 7461 275d 5d29 290d  _map['data']])).
+0002b9d0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0002b9e0: 7b7d 2e66 726f 6d6b 6579 7328 6c61 6e67  {}.fromkeys(lang
+0002b9f0: 5f6c 6973 742c 206c 616e 675f 6c69 7374  _list, lang_list
+0002ba00: 290d 0a0d 0a20 2020 2064 6566 2065 6e63  )....    def enc
+0002ba10: 7279 7074 5f72 7361 2873 656c 662c 206d  rypt_rsa(self, m
+0002ba20: 6573 7361 6765 5f74 6578 743a 2073 7472  essage_text: str
+0002ba30: 2c20 7075 626c 6963 5f6b 6579 5f74 6578  , public_key_tex
+0002ba40: 743a 2073 7472 2920 2d3e 2073 7472 3a0d  t: str) -> str:.
+0002ba50: 0a20 2020 2020 2020 2070 7562 6c69 635f  .        public_
+0002ba60: 6b65 795f 7065 6d20 3d20 2727 2e6a 6f69  key_pem = ''.joi
+0002ba70: 6e28 5b27 2d2d 2d2d 2d42 4547 494e 2050  n(['-----BEGIN P
+0002ba80: 5542 4c49 4320 4b45 592d 2d2d 2d2d 5c6e  UBLIC KEY-----\n
+0002ba90: 272c 2070 7562 6c69 635f 6b65 795f 7465  ', public_key_te
+0002baa0: 7874 2c20 275c 6e2d 2d2d 2d2d 454e 4420  xt, '\n-----END 
+0002bab0: 5055 424c 4943 204b 4559 2d2d 2d2d 2d27  PUBLIC KEY-----'
+0002bac0: 5d29 0d0a 2020 2020 2020 2020 7075 626c  ])..        publ
+0002bad0: 6963 5f6b 6579 5f6f 626a 6563 7420 3d20  ic_key_object = 
+0002bae0: 6372 795f 7365 7269 616c 697a 6174 696f  cry_serializatio
+0002baf0: 6e2e 6c6f 6164 5f70 656d 5f70 7562 6c69  n.load_pem_publi
+0002bb00: 635f 6b65 7928 7075 626c 6963 5f6b 6579  c_key(public_key
+0002bb10: 5f70 656d 2e65 6e63 6f64 6528 2929 0d0a  _pem.encode())..
+0002bb20: 2020 2020 2020 2020 6369 7068 6572 5f74          cipher_t
+0002bb30: 6578 7420 3d20 6261 7365 3634 2e62 3634  ext = base64.b64
+0002bb40: 656e 636f 6465 2870 7562 6c69 635f 6b65  encode(public_ke
+0002bb50: 795f 6f62 6a65 6374 2e65 6e63 7279 7074  y_object.encrypt
+0002bb60: 280d 0a20 2020 2020 2020 2020 2020 2070  (..            p
+0002bb70: 6c61 696e 7465 7874 3d6d 6573 7361 6765  laintext=message
+0002bb80: 5f74 6578 742e 656e 636f 6465 2829 2c0d  _text.encode(),.
+0002bb90: 0a20 2020 2020 2020 2020 2020 2023 2070  .            # p
+0002bba0: 6164 6469 6e67 3d63 7279 5f70 6164 6469  adding=cry_paddi
+0002bbb0: 6e67 2e50 4b43 5331 7631 3528 290d 0a20  ng.PKCS1v15().. 
+0002bbc0: 2020 2020 2020 2020 2020 2070 6164 6469             paddi
+0002bbd0: 6e67 3d63 7279 5f70 6164 6469 6e67 2e4f  ng=cry_padding.O
+0002bbe0: 4145 5028 0d0a 2020 2020 2020 2020 2020  AEP(..          
+0002bbf0: 2020 2020 2020 6d67 663d 6372 795f 7061        mgf=cry_pa
+0002bc00: 6464 696e 672e 4d47 4631 2861 6c67 6f72  dding.MGF1(algor
+0002bc10: 6974 686d 3d63 7279 5f68 6173 6865 732e  ithm=cry_hashes.
+0002bc20: 5348 4132 3536 2829 292c 0d0a 2020 2020  SHA256()),..    
+0002bc30: 2020 2020 2020 2020 2020 2020 616c 676f              algo
+0002bc40: 7269 7468 6d3d 6372 795f 6861 7368 6573  rithm=cry_hashes
+0002bc50: 2e53 4841 3235 3628 292c 0d0a 2020 2020  .SHA256(),..    
+0002bc60: 2020 2020 2020 2020 2020 2020 6c61 6265              labe
+0002bc70: 6c3d 4e6f 6e65 0d0a 2020 2020 2020 2020  l=None..        
+0002bc80: 2020 2020 290d 0a20 2020 2020 2020 2029      )..        )
+0002bc90: 292e 6465 636f 6465 2829 0d0a 2020 2020  ).decode()..    
+0002bca0: 2020 2020 7265 7475 726e 2063 6970 6865      return ciphe
+0002bcb0: 725f 7465 7874 2020 2320 544f 444f 0d0a  r_text  # TODO..
+0002bcc0: 0d0a 2020 2020 4054 7365 2e75 6e63 6572  ..    @Tse.uncer
+0002bcd0: 7469 6669 6564 0d0a 2020 2020 4054 7365  tified..    @Tse
+0002bce0: 2e74 696d 655f 7374 6174 0d0a 2020 2020  .time_stat..    
+0002bcf0: 4054 7365 2e63 6865 636b 5f71 7565 7279  @Tse.check_query
+0002bd00: 0d0a 2020 2020 6465 6620 6e69 7574 7261  ..    def niutra
+0002bd10: 6e73 5f61 7069 2873 656c 662c 2071 7565  ns_api(self, que
+0002bd20: 7279 5f74 6578 743a 2073 7472 2c20 6672  ry_text: str, fr
+0002bd30: 6f6d 5f6c 616e 6775 6167 653a 2073 7472  om_language: str
+0002bd40: 203d 2027 6175 746f 272c 2074 6f5f 6c61   = 'auto', to_la
+0002bd50: 6e67 7561 6765 3a20 7374 7220 3d20 2765  nguage: str = 'e
+0002bd60: 6e27 2c20 2a2a 6b77 6172 6773 3a20 4170  n', **kwargs: Ap
+0002bd70: 694b 7761 7267 7354 7970 6529 202d 3e20  iKwargsType) -> 
+0002bd80: 556e 696f 6e5b 7374 722c 2064 6963 745d  Union[str, dict]
+0002bd90: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+0002bda0: 2020 2020 2020 2020 6874 7470 3a2f 2f64          http://d
+0002bdb0: 6973 706c 6179 2e6e 6975 7472 616e 732e  isplay.niutrans.
+0002bdc0: 636f 6d0d 0a20 2020 2020 2020 203a 7061  com..        :pa
+0002bdd0: 7261 6d20 7175 6572 795f 7465 7874 3a20  ram query_text: 
+0002bde0: 7374 722c 206d 7573 742e 0d0a 2020 2020  str, must...    
+0002bdf0: 2020 2020 3a70 6172 616d 2066 726f 6d5f      :param from_
+0002be00: 6c61 6e67 7561 6765 3a20 7374 722c 2064  language: str, d
+0002be10: 6566 6175 6c74 2027 6175 746f 272e 0d0a  efault 'auto'...
+0002be20: 2020 2020 2020 2020 3a70 6172 616d 2074          :param t
+0002be30: 6f5f 6c61 6e67 7561 6765 3a20 7374 722c  o_language: str,
+0002be40: 2064 6566 6175 6c74 2027 656e 272e 0d0a   default 'en'...
+0002be50: 2020 2020 2020 2020 3a70 6172 616d 202a          :param *
+0002be60: 2a6b 7761 7267 733a 0d0a 2020 2020 2020  *kwargs:..      
+0002be70: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+0002be80: 2074 696d 656f 7574 3a20 666c 6f61 742c   timeout: float,
+0002be90: 2064 6566 6175 6c74 204e 6f6e 652e 0d0a   default None...
+0002bea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002beb0: 3a70 6172 616d 2070 726f 7869 6573 3a20  :param proxies: 
+0002bec0: 6469 6374 2c20 6465 6661 756c 7420 4e6f  dict, default No
+0002bed0: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
+0002bee0: 2020 2020 203a 7061 7261 6d20 736c 6565       :param slee
+0002bef0: 705f 7365 636f 6e64 733a 2066 6c6f 6174  p_seconds: float
+0002bf00: 2c20 6465 6661 756c 7420 302e 0d0a 2020  , default 0...  
+0002bf10: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+0002bf20: 6172 616d 2069 735f 6465 7461 696c 5f72  aram is_detail_r
+0002bf30: 6573 756c 743a 2062 6f6f 6c2c 2064 6566  esult: bool, def
+0002bf40: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
+0002bf50: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+0002bf60: 7261 6d20 6966 5f69 676e 6f72 655f 6c69  ram if_ignore_li
+0002bf70: 6d69 745f 6f66 5f6c 656e 6774 683a 2062  mit_of_length: b
+0002bf80: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
+0002bf90: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
+0002bfa0: 2020 2020 203a 7061 7261 6d20 6c69 6d69       :param limi
+0002bfb0: 745f 6f66 5f6c 656e 6774 683a 2069 6e74  t_of_length: int
+0002bfc0: 2c20 6465 6661 756c 7420 3230 3030 302e  , default 20000.
+0002bfd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002bfe0: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
+0002bff0: 7265 5f65 6d70 7479 5f71 7565 7279 3a20  re_empty_query: 
+0002c000: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
+0002c010: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
+0002c020: 2020 2020 2020 3a70 6172 616d 2075 7064        :param upd
+0002c030: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0002c040: 725f 6672 6571 3a20 696e 742c 2064 6566  r_freq: int, def
+0002c050: 6175 6c74 2031 3030 302e 0d0a 2020 2020  ault 1000...    
+0002c060: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+0002c070: 616d 2075 7064 6174 655f 7365 7373 696f  am update_sessio
+0002c080: 6e5f 6166 7465 725f 7365 636f 6e64 733a  n_after_seconds:
+0002c090: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
+0002c0a0: 3135 3030 2e0d 0a20 2020 2020 2020 2020  1500...         
+0002c0b0: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+0002c0c0: 5f73 686f 775f 7469 6d65 5f73 7461 743a  _show_time_stat:
+0002c0d0: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
+0002c0e0: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
+0002c0f0: 2020 2020 2020 203a 7061 7261 6d20 7368         :param sh
+0002c100: 6f77 5f74 696d 655f 7374 6174 5f70 7265  ow_time_stat_pre
+0002c110: 6369 7369 6f6e 3a20 696e 742c 2064 6566  cision: int, def
+0002c120: 6175 6c74 2032 2e0d 0a20 2020 2020 2020  ault 2...       
+0002c130: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+0002c140: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
+0002c150: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+0002c160: 5472 7565 2e0d 0a20 2020 2020 2020 203a  True...        :
+0002c170: 7265 7475 726e 3a20 7374 7220 6f72 2064  return: str or d
+0002c180: 6963 740d 0a20 2020 2020 2020 2022 2222  ict..        """
+0002c190: 0d0a 0d0a 2020 2020 2020 2020 7469 6d65  ....        time
+0002c1a0: 6f75 7420 3d20 6b77 6172 6773 2e67 6574  out = kwargs.get
+0002c1b0: 2827 7469 6d65 6f75 7427 2c20 4e6f 6e65  ('timeout', None
+0002c1c0: 290d 0a20 2020 2020 2020 2070 726f 7869  )..        proxi
+0002c1d0: 6573 203d 206b 7761 7267 732e 6765 7428  es = kwargs.get(
+0002c1e0: 2770 726f 7869 6573 272c 204e 6f6e 6529  'proxies', None)
+0002c1f0: 0d0a 2020 2020 2020 2020 736c 6565 705f  ..        sleep_
+0002c200: 7365 636f 6e64 7320 3d20 6b77 6172 6773  seconds = kwargs
+0002c210: 2e67 6574 2827 736c 6565 705f 7365 636f  .get('sleep_seco
+0002c220: 6e64 7327 2c20 3029 0d0a 2020 2020 2020  nds', 0)..      
+0002c230: 2020 6966 5f70 7269 6e74 5f77 6172 6e69    if_print_warni
+0002c240: 6e67 203d 206b 7761 7267 732e 6765 7428  ng = kwargs.get(
+0002c250: 2769 665f 7072 696e 745f 7761 726e 696e  'if_print_warnin
+0002c260: 6727 2c20 5472 7565 290d 0a20 2020 2020  g', True)..     
+0002c270: 2020 2069 735f 6465 7461 696c 5f72 6573     is_detail_res
+0002c280: 756c 7420 3d20 6b77 6172 6773 2e67 6574  ult = kwargs.get
+0002c290: 2827 6973 5f64 6574 6169 6c5f 7265 7375  ('is_detail_resu
+0002c2a0: 6c74 272c 2046 616c 7365 290d 0a20 2020  lt', False)..   
+0002c2b0: 2020 2020 2075 7064 6174 655f 7365 7373       update_sess
+0002c2c0: 696f 6e5f 6166 7465 725f 6672 6571 203d  ion_after_freq =
+0002c2d0: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
+0002c2e0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0002c2f0: 725f 6672 6571 272c 2073 656c 662e 6465  r_freq', self.de
+0002c300: 6661 756c 745f 7365 7373 696f 6e5f 6672  fault_session_fr
+0002c310: 6571 290d 0a20 2020 2020 2020 2075 7064  eq)..        upd
+0002c320: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0002c330: 725f 7365 636f 6e64 7320 3d20 6b77 6172  r_seconds = kwar
+0002c340: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
+0002c350: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+0002c360: 6f6e 6473 272c 2073 656c 662e 6465 6661  onds', self.defa
+0002c370: 756c 745f 7365 7373 696f 6e5f 7365 636f  ult_session_seco
+0002c380: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
+0002c390: 6c66 2e63 6865 636b 5f69 6e70 7574 5f6c  lf.check_input_l
+0002c3a0: 696d 6974 2871 7565 7279 5f74 6578 742c  imit(query_text,
+0002c3b0: 2073 656c 662e 696e 7075 745f 6c69 6d69   self.input_limi
+0002c3c0: 7429 0d0a 0d0a 2020 2020 2020 2020 6e6f  t)....        no
+0002c3d0: 745f 7570 6461 7465 5f63 6f6e 645f 6672  t_update_cond_fr
+0002c3e0: 6571 203d 2031 2069 6620 7365 6c66 2e71  eq = 1 if self.q
+0002c3f0: 7565 7279 5f63 6f75 6e74 2025 2075 7064  uery_count % upd
+0002c400: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0002c410: 725f 6672 6571 2021 3d20 3020 656c 7365  r_freq != 0 else
+0002c420: 2030 0d0a 2020 2020 2020 2020 6e6f 745f   0..        not_
+0002c430: 7570 6461 7465 5f63 6f6e 645f 7469 6d65  update_cond_time
+0002c440: 203d 2031 2069 6620 7469 6d65 2e74 696d   = 1 if time.tim
+0002c450: 6528 2920 2d20 7365 6c66 2e62 6567 696e  e() - self.begin
+0002c460: 5f74 696d 6520 3c20 7570 6461 7465 5f73  _time < update_s
+0002c470: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+0002c480: 6f6e 6473 2065 6c73 6520 300d 0a20 2020  onds else 0..   
+0002c490: 2020 2020 2069 6620 6e6f 7420 2873 656c       if not (sel
+0002c4a0: 662e 7365 7373 696f 6e20 616e 6420 7365  f.session and se
+0002c4b0: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
+0002c4c0: 616e 6420 6e6f 745f 7570 6461 7465 5f63  and not_update_c
+0002c4d0: 6f6e 645f 6672 6571 2061 6e64 206e 6f74  ond_freq and not
+0002c4e0: 5f75 7064 6174 655f 636f 6e64 5f74 696d  _update_cond_tim
+0002c4f0: 6520 616e 6420 7365 6c66 2e61 6363 6f75  e and self.accou
+0002c500: 6e74 5f69 6e66 6f20 616e 6420 7365 6c66  nt_info and self
+0002c510: 2e61 7069 5f68 6561 6465 7273 293a 0d0a  .api_headers):..
+0002c520: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0002c530: 2e62 6567 696e 5f74 696d 6520 3d20 7469  .begin_time = ti
+0002c540: 6d65 2e74 696d 6528 290d 0a20 2020 2020  me.time()..     
+0002c550: 2020 2020 2020 2073 656c 662e 7365 7373         self.sess
+0002c560: 696f 6e20 3d20 7265 7175 6573 7473 2e53  ion = requests.S
+0002c570: 6573 7369 6f6e 2829 0d0a 2020 2020 2020  ession()..      
+0002c580: 2020 2020 2020 5f20 3d20 7365 6c66 2e73        _ = self.s
+0002c590: 6573 7369 6f6e 2e67 6574 2873 656c 662e  ession.get(self.
+0002c5a0: 686f 7374 5f75 726c 2c20 6865 6164 6572  host_url, header
+0002c5b0: 733d 7365 6c66 2e68 6f73 745f 6865 6164  s=self.host_head
+0002c5c0: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
+0002c5d0: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
+0002c5e0: 6f78 6965 7329 0d0a 2020 2020 2020 2020  oxies)..        
+0002c5f0: 2020 2020 5f20 3d20 7365 6c66 2e73 6573      _ = self.ses
+0002c600: 7369 6f6e 2e6f 7074 696f 6e73 2873 656c  sion.options(sel
+0002c610: 662e 636f 6f6b 6965 5f75 726c 2c20 6865  f.cookie_url, he
+0002c620: 6164 6572 733d 7365 6c66 2e68 6f73 745f  aders=self.host_
+0002c630: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
+0002c640: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
+0002c650: 733d 7072 6f78 6965 7329 0d0a 0d0a 2020  s=proxies)....  
+0002c660: 2020 2020 2020 2020 2020 7573 6572 5f64            user_d
+0002c670: 6174 6120 3d20 7365 6c66 2e73 6573 7369  ata = self.sessi
+0002c680: 6f6e 2e67 6574 2873 656c 662e 7573 6572  on.get(self.user
+0002c690: 5f75 726c 2c20 6865 6164 6572 733d 7365  _url, headers=se
+0002c6a0: 6c66 2e68 6f73 745f 6865 6164 6572 732c  lf.host_headers,
+0002c6b0: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
+0002c6c0: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
+0002c6d0: 7329 2e6a 736f 6e28 290d 0a20 2020 2020  s).json()..     
+0002c6e0: 2020 2020 2020 206b 6579 5f64 6174 6120         key_data 
+0002c6f0: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e67  = self.session.g
+0002c700: 6574 2873 656c 662e 6b65 795f 7572 6c2c  et(self.key_url,
+0002c710: 2068 6561 6465 7273 3d73 656c 662e 686f   headers=self.ho
+0002c720: 7374 5f68 6561 6465 7273 2c20 7469 6d65  st_headers, time
+0002c730: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
+0002c740: 7869 6573 3d70 726f 7869 6573 292e 6a73  xies=proxies).js
+0002c750: 6f6e 2829 0d0a 2020 2020 2020 2020 2020  on()..          
+0002c760: 2020 6775 6573 745f 696e 666f 203d 207b    guest_info = {
+0002c770: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002c780: 2020 2775 7365 726e 616d 6527 3a20 7573    'username': us
+0002c790: 6572 5f64 6174 615b 2764 6174 6127 5d5b  er_data['data'][
+0002c7a0: 2775 7365 726e 616d 6527 5d2e 7374 7269  'username'].stri
+0002c7b0: 7028 292c 0d0a 2020 2020 2020 2020 2020  p(),..          
+0002c7c0: 2020 2020 2020 2770 6173 7377 6f72 6427        'password'
+0002c7d0: 3a20 7365 6c66 2e65 6e63 7279 7074 5f72  : self.encrypt_r
+0002c7e0: 7361 286d 6573 7361 6765 5f74 6578 743d  sa(message_text=
+0002c7f0: 7573 6572 5f64 6174 615b 2764 6174 6127  user_data['data'
+0002c800: 5d5b 2770 6173 7377 6f72 6427 5d2c 2070  ]['password'], p
+0002c810: 7562 6c69 635f 6b65 795f 7465 7874 3d6b  ublic_key_text=k
+0002c820: 6579 5f64 6174 615b 2764 6174 6127 5d29  ey_data['data'])
+0002c830: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002c840: 2020 2027 7075 626c 6963 4b65 7927 3a20     'publicKey': 
+0002c850: 6b65 795f 6461 7461 5b27 6461 7461 275d  key_data['data']
+0002c860: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002c870: 2020 2027 7379 6d62 6f6c 273a 2027 272c     'symbol': '',
+0002c880: 0d0a 2020 2020 2020 2020 2020 2020 7d0d  ..            }.
+0002c890: 0a20 2020 2020 2020 2020 2020 2072 5f74  .            r_t
+0002c8a0: 6b20 3d20 7365 6c66 2e73 6573 7369 6f6e  k = self.session
+0002c8b0: 2e70 6f73 7428 7365 6c66 2e74 6f6b 656e  .post(self.token
+0002c8c0: 5f75 726c 2c20 6a73 6f6e 3d67 7565 7374  _url, json=guest
+0002c8d0: 5f69 6e66 6f2c 2068 6561 6465 7273 3d73  _info, headers=s
+0002c8e0: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
+0002c8f0: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
+0002c900: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
+0002c910: 6573 290d 0a20 2020 2020 2020 2020 2020  es)..           
+0002c920: 2074 6f6b 656e 5f64 6174 6120 3d20 725f   token_data = r_
+0002c930: 746b 2e6a 736f 6e28 290d 0a0d 0a20 2020  tk.json()....   
+0002c940: 2020 2020 2020 2020 2073 656c 662e 6163           self.ac
+0002c950: 636f 756e 745f 696e 666f 203d 207b 2a2a  count_info = {**
+0002c960: 6775 6573 745f 696e 666f 2c20 2a2a 746f  guest_info, **to
+0002c970: 6b65 6e5f 6461 7461 5b27 6461 7461 275d  ken_data['data']
+0002c980: 7d0d 0a20 2020 2020 2020 2020 2020 2073  }..            s
+0002c990: 656c 662e 6170 695f 6865 6164 6572 7320  elf.api_headers 
+0002c9a0: 3d20 7b2a 2a73 656c 662e 686f 7374 5f68  = {**self.host_h
+0002c9b0: 6561 6465 7273 2c20 2a2a 7b27 4a77 7427  eaders, **{'Jwt'
+0002c9c0: 3a20 7365 6c66 2e61 6363 6f75 6e74 5f69  : self.account_i
+0002c9d0: 6e66 6f5b 2774 6f6b 656e 275d 7d7d 0d0a  nfo['token']}}..
+0002c9e0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0002c9f0: 2e73 6573 7369 6f6e 2e63 6f6f 6b69 6573  .session.cookies
+0002ca00: 2e75 7064 6174 6528 7b27 4164 6d69 6e2d  .update({'Admin-
+0002ca10: 546f 6b65 6e27 3a20 7365 6c66 2e61 6363  Token': self.acc
+0002ca20: 6f75 6e74 5f69 6e66 6f5b 2774 6f6b 656e  ount_info['token
+0002ca30: 275d 7d29 0d0a 2020 2020 2020 2020 2020  ']})..          
+0002ca40: 2020 2320 696e 666f 5f64 6174 6120 3d20    # info_data = 
+0002ca50: 7373 2e67 6574 2873 656c 662e 696e 666f  ss.get(self.info
+0002ca60: 5f75 726c 2c20 6865 6164 6572 733d 7365  _url, headers=se
+0002ca70: 6c66 2e68 6f73 745f 6865 6164 6572 732c  lf.host_headers,
+0002ca80: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
+0002ca90: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
+0002caa0: 7329 2e6a 736f 6e28 290d 0a0d 0a20 2020  s).json()....   
+0002cab0: 2020 2020 2020 2020 2064 6562 7567 5f6c           debug_l
+0002cac0: 616e 675f 6b77 6172 6773 203d 2073 656c  ang_kwargs = sel
+0002cad0: 662e 6465 6275 675f 6c61 6e67 5f6b 7761  f.debug_lang_kwa
+0002cae0: 7267 7328 6672 6f6d 5f6c 616e 6775 6167  rgs(from_languag
+0002caf0: 652c 2074 6f5f 6c61 6e67 7561 6765 2c20  e, to_language, 
+0002cb00: 7365 6c66 2e64 6566 6175 6c74 5f66 726f  self.default_fro
+0002cb10: 6d5f 6c61 6e67 7561 6765 2c20 6966 5f70  m_language, if_p
+0002cb20: 7269 6e74 5f77 6172 6e69 6e67 290d 0a20  rint_warning).. 
+0002cb30: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0002cb40: 6c61 6e67 7561 6765 5f6d 6170 203d 2073  language_map = s
+0002cb50: 656c 662e 6765 745f 6c61 6e67 7561 6765  elf.get_language
+0002cb60: 5f6d 6170 2873 656c 662e 6765 745f 6c61  _map(self.get_la
+0002cb70: 6e67 7561 6765 5f75 726c 2c20 7365 6c66  nguage_url, self
+0002cb80: 2e73 6573 7369 6f6e 2c20 7365 6c66 2e61  .session, self.a
+0002cb90: 7069 5f68 6561 6465 7273 2c20 7469 6d65  pi_headers, time
+0002cba0: 6f75 742c 2070 726f 7869 6573 2c20 2a2a  out, proxies, **
+0002cbb0: 6465 6275 675f 6c61 6e67 5f6b 7761 7267  debug_lang_kwarg
+0002cbc0: 7329 0d0a 0d0a 2020 2020 2020 2020 6672  s)....        fr
+0002cbd0: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
+0002cbe0: 6c61 6e67 7561 6765 203d 2073 656c 662e  language = self.
+0002cbf0: 6368 6563 6b5f 6c61 6e67 7561 6765 2866  check_language(f
+0002cc00: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
+0002cc10: 5f6c 616e 6775 6167 652c 2073 656c 662e  _language, self.
+0002cc20: 6c61 6e67 7561 6765 5f6d 6170 2c20 6f75  language_map, ou
+0002cc30: 7470 7574 5f7a 683d 7365 6c66 2e6f 7574  tput_zh=self.out
+0002cc40: 7075 745f 7a68 290d 0a20 2020 2020 2020  put_zh)..       
+0002cc50: 2069 6620 6672 6f6d 5f6c 616e 6775 6167   if from_languag
+0002cc60: 6520 3d3d 2027 6175 746f 273a 0d0a 2020  e == 'auto':..  
+0002cc70: 2020 2020 2020 2020 2020 7265 7320 3d20            res = 
+0002cc80: 7365 6c66 2e73 6573 7369 6f6e 2e70 6f73  self.session.pos
+0002cc90: 7428 7365 6c66 2e64 6574 6563 745f 6c61  t(self.detect_la
+0002cca0: 6e67 7561 6765 5f75 726c 2c20 6a73 6f6e  nguage_url, json
+0002ccb0: 3d7b 2773 7263 5f74 6578 7427 3a20 7175  ={'src_text': qu
+0002ccc0: 6572 795f 7465 7874 7d2c 2068 6561 6465  ery_text}, heade
+0002ccd0: 7273 3d73 656c 662e 6170 695f 6865 6164  rs=self.api_head
+0002cce0: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
+0002ccf0: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
+0002cd00: 6f78 6965 7329 0d0a 2020 2020 2020 2020  oxies)..        
+0002cd10: 2020 2020 6672 6f6d 5f6c 616e 6775 6167      from_languag
+0002cd20: 6520 3d20 7265 732e 6a73 6f6e 2829 5b27  e = res.json()['
+0002cd30: 6461 7461 275d 5b27 6c61 6e67 7561 6765  data']['language
+0002cd40: 275d 0d0a 0d0a 2020 2020 2020 2020 7061  ']....        pa
+0002cd50: 796c 6f61 6420 3d20 7b0d 0a20 2020 2020  yload = {..     
+0002cd60: 2020 2020 2020 2027 7372 635f 7465 7874         'src_text
+0002cd70: 273a 2071 7565 7279 5f74 6578 742c 2027  ': query_text, '
+0002cd80: 6672 6f6d 273a 2066 726f 6d5f 6c61 6e67  from': from_lang
+0002cd90: 7561 6765 2c20 2774 6f27 3a20 746f 5f6c  uage, 'to': to_l
+0002cda0: 616e 6775 6167 652c 0d0a 2020 2020 2020  anguage,..      
+0002cdb0: 2020 2020 2020 2763 6f6e 7472 6173 7446        'contrastF
+0002cdc0: 6c61 6727 3a20 2774 7275 6527 2c20 2774  lag': 'true', 't
+0002cdd0: 6572 6d44 6963 7469 6f6e 6172 794c 6962  ermDictionaryLib
+0002cde0: 7261 7279 4964 273a 2027 272c 2027 7472  raryId': '', 'tr
+0002cdf0: 616e 736c 6174 696f 6e4d 656d 6f72 794c  anslationMemoryL
+0002ce00: 6962 7261 7279 4964 273a 2027 272c 0d0a  ibraryId': '',..
+0002ce10: 2020 2020 2020 2020 7d0d 0a20 2020 2020          }..     
+0002ce20: 2020 2072 203d 2073 656c 662e 7365 7373     r = self.sess
+0002ce30: 696f 6e2e 706f 7374 2873 656c 662e 6170  ion.post(self.ap
+0002ce40: 695f 7572 6c2c 206a 736f 6e3d 7061 796c  i_url, json=payl
+0002ce50: 6f61 642c 2068 6561 6465 7273 3d73 656c  oad, headers=sel
+0002ce60: 662e 6170 695f 6865 6164 6572 732c 2074  f.api_headers, t
+0002ce70: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
+0002ce80: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
+0002ce90: 0d0a 2020 2020 2020 2020 722e 7261 6973  ..        r.rais
+0002cea0: 655f 666f 725f 7374 6174 7573 2829 0d0a  e_for_status()..
+0002ceb0: 2020 2020 2020 2020 6461 7461 203d 2072          data = r
+0002cec0: 2e6a 736f 6e28 290d 0a20 2020 2020 2020  .json()..       
+0002ced0: 2074 696d 652e 736c 6565 7028 736c 6565   time.sleep(slee
+0002cee0: 705f 7365 636f 6e64 7329 0d0a 2020 2020  p_seconds)..    
+0002cef0: 2020 2020 7365 6c66 2e71 7565 7279 5f63      self.query_c
+0002cf00: 6f75 6e74 202b 3d20 310d 0a20 2020 2020  ount += 1..     
+0002cf10: 2020 2072 6574 7572 6e20 6461 7461 2069     return data i
+0002cf20: 6620 6973 5f64 6574 6169 6c5f 7265 7375  f is_detail_resu
+0002cf30: 6c74 2065 6c73 6520 275c 6e27 2e6a 6f69  lt else '\n'.joi
+0002cf40: 6e28 5b27 2027 2e6a 6f69 6e28 5b69 745b  n([' '.join([it[
+0002cf50: 2764 6174 6127 5d20 666f 7220 6974 2069  'data'] for it i
+0002cf60: 6e20 6974 656d 5b27 7365 6e74 656e 6365  n item['sentence
+0002cf70: 7327 5d5d 2920 666f 7220 6974 656d 2069  s']]) for item i
+0002cf80: 6e20 6461 7461 5b27 6461 7461 275d 5d29  n data['data']])
+0002cf90: 0d0a 0d0a 0d0a 636c 6173 7320 4d67 6c69  ......class Mgli
+0002cfa0: 7028 5473 6529 3a0d 0a20 2020 2064 6566  p(Tse):..    def
+0002cfb0: 205f 5f69 6e69 745f 5f28 7365 6c66 293a   __init__(self):
+0002cfc0: 0d0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
+0002cfd0: 292e 5f5f 696e 6974 5f5f 2829 0d0a 2020  ).__init__()..  
+0002cfe0: 2020 2020 2020 7365 6c66 2e62 6567 696e        self.begin
+0002cff0: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
+0002d000: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
+0002d010: 662e 686f 7374 5f75 726c 203d 2027 6874  f.host_url = 'ht
+0002d020: 7470 3a2f 2f66 792e 6d67 6c69 702e 636f  tp://fy.mglip.co
+0002d030: 6d2f 7063 2720 2023 206d 7573 7420 6874  m/pc'  # must ht
+0002d040: 7470 0d0a 2020 2020 2020 2020 7365 6c66  tp..        self
+0002d050: 2e61 7069 5f75 726c 203d 2027 6874 7470  .api_url = 'http
+0002d060: 3a2f 2f66 792e 6d67 6c69 702e 636f 6d2f  ://fy.mglip.com/
+0002d070: 7432 7427 0d0a 2020 2020 2020 2020 7365  t2t'..        se
+0002d080: 6c66 2e68 6f73 745f 6865 6164 6572 7320  lf.host_headers 
+0002d090: 3d20 7365 6c66 2e67 6574 5f68 6561 6465  = self.get_heade
+0002d0a0: 7273 2873 656c 662e 686f 7374 5f75 726c  rs(self.host_url
+0002d0b0: 2c20 6966 5f61 7069 3d46 616c 7365 290d  , if_api=False).
+0002d0c0: 0a20 2020 2020 2020 2073 656c 662e 6170  .        self.ap
+0002d0d0: 695f 6865 6164 6572 7320 3d20 7365 6c66  i_headers = self
+0002d0e0: 2e67 6574 5f68 6561 6465 7273 2873 656c  .get_headers(sel
+0002d0f0: 662e 686f 7374 5f75 726c 2c20 6966 5f61  f.host_url, if_a
+0002d100: 7069 3d54 7275 652c 2069 665f 6a73 6f6e  pi=True, if_json
+0002d110: 5f66 6f72 5f61 7069 3d46 616c 7365 290d  _for_api=False).
+0002d120: 0a20 2020 2020 2020 2073 656c 662e 6c61  .        self.la
+0002d130: 6e67 7561 6765 5f6d 6170 203d 207b 7d2e  nguage_map = {}.
+0002d140: 6672 6f6d 6b65 7973 285b 277a 6827 2c20  fromkeys(['zh', 
+0002d150: 276d 6f6e 272c 2027 786c 6527 5d2c 205b  'mon', 'xle'], [
+0002d160: 277a 6827 2c20 276d 6f6e 272c 2027 786c  'zh', 'mon', 'xl
+0002d170: 6527 5d29 0d0a 2020 2020 2020 2020 7365  e'])..        se
+0002d180: 6c66 2e73 6573 7369 6f6e 203d 204e 6f6e  lf.session = Non
+0002d190: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
+0002d1a0: 7175 6572 795f 636f 756e 7420 3d20 300d  query_count = 0.
+0002d1b0: 0a20 2020 2020 2020 2073 656c 662e 6f75  .        self.ou
+0002d1c0: 7470 7574 5f7a 6820 3d20 277a 6827 0d0a  tput_zh = 'zh'..
+0002d1d0: 2020 2020 2020 2020 7365 6c66 2e69 6e70          self.inp
+0002d1e0: 7574 5f6c 696d 6974 203d 2069 6e74 2835  ut_limit = int(5
+0002d1f0: 6532 290d 0a20 2020 2020 2020 2073 656c  e2)..        sel
+0002d200: 662e 6465 6661 756c 745f 6672 6f6d 5f6c  f.default_from_l
+0002d210: 616e 6775 6167 6520 3d20 7365 6c66 2e6f  anguage = self.o
+0002d220: 7574 7075 745f 7a68 0d0a 0d0a 2020 2020  utput_zh....    
+0002d230: 4054 7365 2e74 696d 655f 7374 6174 0d0a  @Tse.time_stat..
+0002d240: 2020 2020 4054 7365 2e63 6865 636b 5f71      @Tse.check_q
+0002d250: 7565 7279 0d0a 2020 2020 6465 6620 6d67  uery..    def mg
+0002d260: 6c69 705f 6170 6928 7365 6c66 2c20 7175  lip_api(self, qu
+0002d270: 6572 795f 7465 7874 3a20 7374 722c 2066  ery_text: str, f
+0002d280: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
+0002d290: 7220 3d20 2761 7574 6f27 2c20 746f 5f6c  r = 'auto', to_l
+0002d2a0: 616e 6775 6167 653a 2073 7472 203d 2027  anguage: str = '
+0002d2b0: 6d6f 6e27 2c20 2a2a 6b77 6172 6773 3a20  mon', **kwargs: 
+0002d2c0: 4170 694b 7761 7267 7354 7970 6529 202d  ApiKwargsType) -
+0002d2d0: 3e20 556e 696f 6e5b 7374 722c 2064 6963  > Union[str, dic
+0002d2e0: 745d 3a0d 0a20 2020 2020 2020 2022 2222  t]:..        """
+0002d2f0: 0d0a 2020 2020 2020 2020 6874 7470 3a2f  ..        http:/
+0002d300: 2f66 792e 6d67 6c69 702e 636f 6d2f 7063  /fy.mglip.com/pc
+0002d310: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+0002d320: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
+0002d330: 2c20 6d75 7374 2e0d 0a20 2020 2020 2020  , must...       
+0002d340: 203a 7061 7261 6d20 6672 6f6d 5f6c 616e   :param from_lan
+0002d350: 6775 6167 653a 2073 7472 2c20 6465 6661  guage: str, defa
+0002d360: 756c 7420 2761 7574 6f27 2c20 6571 7561  ult 'auto', equa
+0002d370: 6c73 2027 7a68 272e 0d0a 2020 2020 2020  ls 'zh'...      
+0002d380: 2020 3a70 6172 616d 2074 6f5f 6c61 6e67    :param to_lang
+0002d390: 7561 6765 3a20 7374 722c 2064 6566 6175  uage: str, defau
+0002d3a0: 6c74 2027 6d6f 6e27 2e0d 0a20 2020 2020  lt 'mon'...     
+0002d3b0: 2020 203a 7061 7261 6d20 2a2a 6b77 6172     :param **kwar
+0002d3c0: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
+0002d3d0: 2020 2020 203a 7061 7261 6d20 7469 6d65       :param time
+0002d3e0: 6f75 743a 2066 6c6f 6174 2c20 6465 6661  out: float, defa
+0002d3f0: 756c 7420 4e6f 6e65 2e0d 0a20 2020 2020  ult None...     
+0002d400: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+0002d410: 6d20 7072 6f78 6965 733a 2064 6963 742c  m proxies: dict,
+0002d420: 2064 6566 6175 6c74 204e 6f6e 652e 0d0a   default None...
+0002d430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d440: 3a70 6172 616d 2073 6c65 6570 5f73 6563  :param sleep_sec
+0002d450: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
+0002d460: 6175 6c74 2030 2e0d 0a20 2020 2020 2020  ault 0...       
+0002d470: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+0002d480: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
+0002d490: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+0002d4a0: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
+0002d4b0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+0002d4c0: 665f 6967 6e6f 7265 5f6c 696d 6974 5f6f  f_ignore_limit_o
+0002d4d0: 665f 6c65 6e67 7468 3a20 626f 6f6c 2c20  f_length: bool, 
+0002d4e0: 6465 6661 756c 7420 4661 6c73 652e 0d0a  default False...
+0002d4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d500: 3a70 6172 616d 206c 696d 6974 5f6f 665f  :param limit_of_
+0002d510: 6c65 6e67 7468 3a20 696e 742c 2064 6566  length: int, def
+0002d520: 6175 6c74 2032 3030 3030 2e0d 0a20 2020  ault 20000...   
+0002d530: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+0002d540: 7261 6d20 6966 5f69 676e 6f72 655f 656d  ram if_ignore_em
+0002d550: 7074 795f 7175 6572 793a 2062 6f6f 6c2c  pty_query: bool,
+0002d560: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
+0002d570: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d580: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
+0002d590: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
+0002d5a0: 713a 2069 6e74 2c20 6465 6661 756c 7420  q: int, default 
+0002d5b0: 3130 3030 2e0d 0a20 2020 2020 2020 2020  1000...         
+0002d5c0: 2020 2020 2020 203a 7061 7261 6d20 7570         :param up
+0002d5d0: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+0002d5e0: 6572 5f73 6563 6f6e 6473 3a20 666c 6f61  er_seconds: floa
+0002d5f0: 742c 2064 6566 6175 6c74 2031 3530 302e  t, default 1500.
+0002d600: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002d610: 2020 3a70 6172 616d 2069 665f 7368 6f77    :param if_show
+0002d620: 5f74 696d 655f 7374 6174 3a20 626f 6f6c  _time_stat: bool
+0002d630: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+0002d640: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002d650: 2020 3a70 6172 616d 2073 686f 775f 7469    :param show_ti
+0002d660: 6d65 5f73 7461 745f 7072 6563 6973 696f  me_stat_precisio
+0002d670: 6e3a 2069 6e74 2c20 6465 6661 756c 7420  n: int, default 
+0002d680: 322e 0d0a 2020 2020 2020 2020 2020 2020  2...            
+0002d690: 2020 2020 3a70 6172 616d 2069 665f 7072      :param if_pr
+0002d6a0: 696e 745f 7761 726e 696e 673a 2062 6f6f  int_warning: boo
+0002d6b0: 6c2c 2064 6566 6175 6c74 2054 7275 652e  l, default True.
+0002d6c0: 0d0a 2020 2020 2020 2020 3a72 6574 7572  ..        :retur
+0002d6d0: 6e3a 2073 7472 206f 7220 6469 6374 0d0a  n: str or dict..
+0002d6e0: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
+0002d6f0: 2020 2020 2020 2074 696d 656f 7574 203d         timeout =
+0002d700: 206b 7761 7267 732e 6765 7428 2774 696d   kwargs.get('tim
+0002d710: 656f 7574 272c 204e 6f6e 6529 0d0a 2020  eout', None)..  
+0002d720: 2020 2020 2020 7072 6f78 6965 7320 3d20        proxies = 
+0002d730: 6b77 6172 6773 2e67 6574 2827 7072 6f78  kwargs.get('prox
+0002d740: 6965 7327 2c20 4e6f 6e65 290d 0a20 2020  ies', None)..   
+0002d750: 2020 2020 2073 6c65 6570 5f73 6563 6f6e       sleep_secon
+0002d760: 6473 203d 206b 7761 7267 732e 6765 7428  ds = kwargs.get(
+0002d770: 2773 6c65 6570 5f73 6563 6f6e 6473 272c  'sleep_seconds',
+0002d780: 2030 290d 0a20 2020 2020 2020 2069 665f   0)..        if_
+0002d790: 7072 696e 745f 7761 726e 696e 6720 3d20  print_warning = 
+0002d7a0: 6b77 6172 6773 2e67 6574 2827 6966 5f70  kwargs.get('if_p
+0002d7b0: 7269 6e74 5f77 6172 6e69 6e67 272c 2054  rint_warning', T
+0002d7c0: 7275 6529 0d0a 2020 2020 2020 2020 6973  rue)..        is
+0002d7d0: 5f64 6574 6169 6c5f 7265 7375 6c74 203d  _detail_result =
+0002d7e0: 206b 7761 7267 732e 6765 7428 2769 735f   kwargs.get('is_
+0002d7f0: 6465 7461 696c 5f72 6573 756c 7427 2c20  detail_result', 
+0002d800: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
+0002d810: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+0002d820: 6674 6572 5f66 7265 7120 3d20 6b77 6172  fter_freq = kwar
+0002d830: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
+0002d840: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
+0002d850: 7127 2c20 7365 6c66 2e64 6566 6175 6c74  q', self.default
+0002d860: 5f73 6573 7369 6f6e 5f66 7265 7129 0d0a  _session_freq)..
+0002d870: 2020 2020 2020 2020 7570 6461 7465 5f73          update_s
+0002d880: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+0002d890: 6f6e 6473 203d 206b 7761 7267 732e 6765  onds = kwargs.ge
+0002d8a0: 7428 2775 7064 6174 655f 7365 7373 696f  t('update_sessio
+0002d8b0: 6e5f 6166 7465 725f 7365 636f 6e64 7327  n_after_seconds'
+0002d8c0: 2c20 7365 6c66 2e64 6566 6175 6c74 5f73  , self.default_s
+0002d8d0: 6573 7369 6f6e 5f73 6563 6f6e 6473 290d  ession_seconds).
+0002d8e0: 0a20 2020 2020 2020 2073 656c 662e 6368  .        self.ch
+0002d8f0: 6563 6b5f 696e 7075 745f 6c69 6d69 7428  eck_input_limit(
+0002d900: 7175 6572 795f 7465 7874 2c20 7365 6c66  query_text, self
+0002d910: 2e69 6e70 7574 5f6c 696d 6974 290d 0a0d  .input_limit)...
+0002d920: 0a20 2020 2020 2020 206e 6f74 5f75 7064  .        not_upd
+0002d930: 6174 655f 636f 6e64 5f66 7265 7120 3d20  ate_cond_freq = 
+0002d940: 3120 6966 2073 656c 662e 7175 6572 795f  1 if self.query_
+0002d950: 636f 756e 7420 2520 7570 6461 7465 5f73  count % update_s
+0002d960: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
+0002d970: 7120 213d 2030 2065 6c73 6520 300d 0a20  q != 0 else 0.. 
+0002d980: 2020 2020 2020 206e 6f74 5f75 7064 6174         not_updat
+0002d990: 655f 636f 6e64 5f74 696d 6520 3d20 3120  e_cond_time = 1 
+0002d9a0: 6966 2074 696d 652e 7469 6d65 2829 202d  if time.time() -
+0002d9b0: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
+0002d9c0: 203c 2075 7064 6174 655f 7365 7373 696f   < update_sessio
+0002d9d0: 6e5f 6166 7465 725f 7365 636f 6e64 7320  n_after_seconds 
+0002d9e0: 656c 7365 2030 0d0a 2020 2020 2020 2020  else 0..        
+0002d9f0: 6966 206e 6f74 2028 7365 6c66 2e73 6573  if not (self.ses
+0002da00: 7369 6f6e 2061 6e64 2073 656c 662e 6c61  sion and self.la
+0002da10: 6e67 7561 6765 5f6d 6170 2061 6e64 206e  nguage_map and n
+0002da20: 6f74 5f75 7064 6174 655f 636f 6e64 5f66  ot_update_cond_f
+0002da30: 7265 7120 616e 6420 6e6f 745f 7570 6461  req and not_upda
+0002da40: 7465 5f63 6f6e 645f 7469 6d65 293a 0d0a  te_cond_time):..
+0002da50: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0002da60: 2e62 6567 696e 5f74 696d 6520 3d20 7469  .begin_time = ti
+0002da70: 6d65 2e74 696d 6528 290d 0a20 2020 2020  me.time()..     
+0002da80: 2020 2020 2020 2073 656c 662e 7365 7373         self.sess
+0002da90: 696f 6e20 3d20 7265 7175 6573 7473 2e53  ion = requests.S
+0002daa0: 6573 7369 6f6e 2829 0d0a 2020 2020 2020  ession()..      
+0002dab0: 2020 2020 2020 5f20 3d20 7365 6c66 2e73        _ = self.s
+0002dac0: 6573 7369 6f6e 2e67 6574 2873 656c 662e  ession.get(self.
+0002dad0: 686f 7374 5f75 726c 2c20 6865 6164 6572  host_url, header
+0002dae0: 733d 7365 6c66 2e68 6f73 745f 6865 6164  s=self.host_head
+0002daf0: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
+0002db00: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
+0002db10: 6f78 6965 7329 0d0a 0d0a 2020 2020 2020  oxies)....      
+0002db20: 2020 6966 2066 726f 6d5f 6c61 6e67 7561    if from_langua
+0002db30: 6765 203d 3d20 2761 7574 6f27 3a0d 0a20  ge == 'auto':.. 
+0002db40: 2020 2020 2020 2020 2020 2066 726f 6d5f             from_
+0002db50: 6c61 6e67 7561 6765 203d 2073 656c 662e  language = self.
+0002db60: 7761 726e 696e 675f 6175 746f 5f6c 616e  warning_auto_lan
+0002db70: 6728 276d 676c 6970 272c 2073 656c 662e  g('mglip', self.
+0002db80: 6465 6661 756c 745f 6672 6f6d 5f6c 616e  default_from_lan
+0002db90: 6775 6167 652c 2069 665f 7072 696e 745f  guage, if_print_
+0002dba0: 7761 726e 696e 6729 0d0a 2020 2020 2020  warning)..      
+0002dbb0: 2020 6672 6f6d 5f6c 616e 6775 6167 652c    from_language,
+0002dbc0: 2074 6f5f 6c61 6e67 7561 6765 203d 2073   to_language = s
+0002dbd0: 656c 662e 6368 6563 6b5f 6c61 6e67 7561  elf.check_langua
+0002dbe0: 6765 2866 726f 6d5f 6c61 6e67 7561 6765  ge(from_language
+0002dbf0: 2c20 746f 5f6c 616e 6775 6167 652c 2073  , to_language, s
+0002dc00: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
+0002dc10: 2c20 6f75 7470 7574 5f7a 683d 7365 6c66  , output_zh=self
+0002dc20: 2e6f 7574 7075 745f 7a68 290d 0a0d 0a20  .output_zh).... 
+0002dc30: 2020 2020 2020 2070 6179 6c6f 6164 203d         payload =
+0002dc40: 207b 2775 7365 7249 6e70 7574 273a 2071   {'userInput': q
+0002dc50: 7565 7279 5f74 6578 742c 2027 6672 6f6d  uery_text, 'from
+0002dc60: 273a 2066 726f 6d5f 6c61 6e67 7561 6765  ': from_language
+0002dc70: 2c20 2774 6f27 3a20 746f 5f6c 616e 6775  , 'to': to_langu
+0002dc80: 6167 657d 0d0a 2020 2020 2020 2020 7061  age}..        pa
+0002dc90: 796c 6f61 6420 3d20 7572 6c6c 6962 2e70  yload = urllib.p
+0002dca0: 6172 7365 2e75 726c 656e 636f 6465 2870  arse.urlencode(p
+0002dcb0: 6179 6c6f 6164 290d 0a20 2020 2020 2020  ayload)..       
+0002dcc0: 2072 203d 2073 656c 662e 7365 7373 696f   r = self.sessio
+0002dcd0: 6e2e 706f 7374 2873 656c 662e 6170 695f  n.post(self.api_
+0002dce0: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
+0002dcf0: 662e 6170 695f 6865 6164 6572 732c 2064  f.api_headers, d
+0002dd00: 6174 613d 7061 796c 6f61 642c 2074 696d  ata=payload, tim
+0002dd10: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
+0002dd20: 6f78 6965 733d 7072 6f78 6965 7329 0d0a  oxies=proxies)..
+0002dd30: 2020 2020 2020 2020 722e 7261 6973 655f          r.raise_
+0002dd40: 666f 725f 7374 6174 7573 2829 0d0a 2020  for_status()..  
+0002dd50: 2020 2020 2020 6461 7461 203d 2072 2e6a        data = r.j
+0002dd60: 736f 6e28 290d 0a20 2020 2020 2020 2074  son()..        t
+0002dd70: 696d 652e 736c 6565 7028 736c 6565 705f  ime.sleep(sleep_
+0002dd80: 7365 636f 6e64 7329 0d0a 2020 2020 2020  seconds)..      
+0002dd90: 2020 7365 6c66 2e71 7565 7279 5f63 6f75    self.query_cou
+0002dda0: 6e74 202b 3d20 310d 0a20 2020 2020 2020  nt += 1..       
+0002ddb0: 2072 6574 7572 6e20 6461 7461 2069 6620   return data if 
+0002ddc0: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
+0002ddd0: 2065 6c73 6520 6461 7461 5b27 6461 7461   else data['data
+0002dde0: 7327 5d5b 305d 5b27 7061 7261 6772 6170  s'][0]['paragrap
+0002ddf0: 6827 5d20 6966 2064 6174 615b 2764 6174  h'] if data['dat
+0002de00: 6173 275d 5b30 5d5b 2774 7970 6527 5d20  as'][0]['type'] 
+0002de10: 3d3d 2027 7472 616e 7327 2065 6c73 6520  == 'trans' else 
+0002de20: 6461 7461 5b27 6461 7461 7327 5d5b 305d  data['datas'][0]
+0002de30: 5b27 6461 7461 275d 0d0a 0d0a 0d0a 636c  ['data']......cl
+0002de40: 6173 7320 566f 6c63 456e 6769 6e65 2854  ass VolcEngine(T
+0002de50: 7365 293a 0d0a 2020 2020 6465 6620 5f5f  se):..    def __
+0002de60: 696e 6974 5f5f 2873 656c 6629 3a0d 0a20  init__(self):.. 
+0002de70: 2020 2020 2020 2073 7570 6572 2829 2e5f         super()._
+0002de80: 5f69 6e69 745f 5f28 290d 0a20 2020 2020  _init__()..     
+0002de90: 2020 2073 656c 662e 6265 6769 6e5f 7469     self.begin_ti
+0002dea0: 6d65 203d 2074 696d 652e 7469 6d65 2829  me = time.time()
+0002deb0: 0d0a 2020 2020 2020 2020 7365 6c66 2e68  ..        self.h
+0002dec0: 6f73 745f 7572 6c20 3d20 2768 7474 7073  ost_url = 'https
+0002ded0: 3a2f 2f74 7261 6e73 6c61 7465 2e76 6f6c  ://translate.vol
+0002dee0: 6365 6e67 696e 652e 636f 6d27 0d0a 2020  cengine.com'..  
+0002def0: 2020 2020 2020 7365 6c66 2e61 7069 5f75        self.api_u
+0002df00: 726c 203d 2027 6874 7470 733a 2f2f 7472  rl = 'https://tr
+0002df10: 616e 736c 6174 652e 766f 6c63 656e 6769  anslate.volcengi
+0002df20: 6e65 2e63 6f6d 2f77 6562 2f74 7261 6e73  ne.com/web/trans
+0002df30: 6c61 7465 2f76 3127 0d0a 2020 2020 2020  late/v1'..      
+0002df40: 2020 7365 6c66 2e68 6f73 745f 6865 6164    self.host_head
+0002df50: 6572 7320 3d20 7365 6c66 2e67 6574 5f68  ers = self.get_h
+0002df60: 6561 6465 7273 2873 656c 662e 686f 7374  eaders(self.host
+0002df70: 5f75 726c 2c20 6966 5f61 7069 3d46 616c  _url, if_api=Fal
+0002df80: 7365 290d 0a20 2020 2020 2020 2073 656c  se)..        sel
+0002df90: 662e 6170 695f 6865 6164 6572 7320 3d20  f.api_headers = 
+0002dfa0: 7365 6c66 2e67 6574 5f68 6561 6465 7273  self.get_headers
+0002dfb0: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
+0002dfc0: 6966 5f61 7069 3d54 7275 652c 2069 665f  if_api=True, if_
+0002dfd0: 6a73 6f6e 5f66 6f72 5f61 7069 3d54 7275  json_for_api=Tru
+0002dfe0: 6529 0d0a 2020 2020 2020 2020 7365 6c66  e)..        self
+0002dff0: 2e73 6573 7369 6f6e 203d 204e 6f6e 650d  .session = None.
+0002e000: 0a20 2020 2020 2020 2073 656c 662e 6c61  .        self.la
+0002e010: 6e67 7561 6765 5f6d 6170 203d 204e 6f6e  nguage_map = Non
+0002e020: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
+0002e030: 6d73 5f74 6f6b 656e 203d 2027 270d 0a20  ms_token = ''.. 
+0002e040: 2020 2020 2020 2073 656c 662e 785f 626f         self.x_bo
+0002e050: 6775 7320 3d20 2744 4653 2374 6f64 6f27  gus = 'DFS#todo'
+0002e060: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
+0002e070: 6967 6e61 7475 7265 203d 2027 5f30 3242  ignature = '_02B
+0002e080: 2374 6f64 6f27 0d0a 2020 2020 2020 2020  #todo'..        
+0002e090: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
+0002e0a0: 203d 2030 0d0a 2020 2020 2020 2020 7365   = 0..        se
+0002e0b0: 6c66 2e6f 7574 7075 745f 6175 746f 203d  lf.output_auto =
+0002e0c0: 2027 6465 7465 6374 270d 0a20 2020 2020   'detect'..     
+0002e0d0: 2020 2073 656c 662e 6f75 7470 7574 5f7a     self.output_z
+0002e0e0: 6820 3d20 277a 6827 0d0a 2020 2020 2020  h = 'zh'..      
+0002e0f0: 2020 7365 6c66 2e69 6e70 7574 5f6c 696d    self.input_lim
+0002e100: 6974 203d 2069 6e74 2835 6533 290d 0a20  it = int(5e3).. 
+0002e110: 2020 2020 2020 2073 656c 662e 6465 6661         self.defa
+0002e120: 756c 745f 6672 6f6d 5f6c 616e 6775 6167  ult_from_languag
+0002e130: 6520 3d20 7365 6c66 2e6f 7574 7075 745f  e = self.output_
+0002e140: 7a68 0d0a 0d0a 2020 2020 4054 7365 2e64  zh....    @Tse.d
+0002e150: 6562 7567 5f6c 616e 6775 6167 655f 6d61  ebug_language_ma
+0002e160: 700d 0a20 2020 2064 6566 2067 6574 5f6c  p..    def get_l
+0002e170: 616e 6775 6167 655f 6d61 7028 7365 6c66  anguage_map(self
+0002e180: 2c20 686f 7374 5f68 746d 6c3a 2073 7472  , host_html: str
+0002e190: 2c20 2a2a 6b77 6172 6773 3a20 4c61 6e67  , **kwargs: Lang
+0002e1a0: 4d61 704b 7761 7267 7354 7970 6529 202d  MapKwargsType) -
+0002e1b0: 3e20 6469 6374 3a0d 0a20 2020 2020 2020  > dict:..       
+0002e1c0: 206c 616e 675f 6c69 7374 203d 2072 652e   lang_list = re.
+0002e1d0: 636f 6d70 696c 6528 2722 6c61 6e67 7561  compile('"langua
+0002e1e0: 6765 5f28 2e2a 3f29 223a 2729 2e66 696e  ge_(.*?)":').fin
+0002e1f0: 6461 6c6c 2868 6f73 745f 6874 6d6c 290d  dall(host_html).
+0002e200: 0a20 2020 2020 2020 206c 616e 675f 6c69  .        lang_li
+0002e210: 7374 203d 2073 6f72 7465 6428 6c69 7374  st = sorted(list
+0002e220: 2873 6574 286c 616e 675f 6c69 7374 2929  (set(lang_list))
+0002e230: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+0002e240: 6e20 7b7d 2e66 726f 6d6b 6579 7328 6c61  n {}.fromkeys(la
+0002e250: 6e67 5f6c 6973 742c 206c 616e 675f 6c69  ng_list, lang_li
+0002e260: 7374 290d 0a0d 0a20 2020 2040 7072 6f70  st)....    @prop
+0002e270: 6572 7479 0d0a 2020 2020 6465 6620 7072  erty..    def pr
+0002e280: 6f66 6573 7369 6f6e 616c 5f66 6965 6c64  ofessional_field
+0002e290: 5f6d 6170 2873 656c 6629 202d 3e20 6469  _map(self) -> di
+0002e2a0: 6374 3a0d 0a20 2020 2020 2020 2064 6174  ct:..        dat
+0002e2b0: 6120 3d20 7b0d 0a20 2020 2020 2020 2020  a = {..         
+0002e2c0: 2020 2027 273a 207b 2763 6174 6567 6f72     '': {'categor
+0002e2d0: 7927 3a20 2727 2c20 2767 6c6f 7373 6172  y': '', 'glossar
+0002e2e0: 795f 6c69 7374 273a 205b 5d7d 2c0d 0a20  y_list': []},.. 
+0002e2f0: 2020 2020 2020 2020 2020 2027 636c 6561             'clea
+0002e300: 6e27 3a20 7b27 6361 7465 676f 7279 273a  n': {'category':
+0002e310: 2027 636c 6561 6e27 2c20 2767 6c6f 7373   'clean', 'gloss
+0002e320: 6172 795f 6c69 7374 273a 205b 5d7d 2c0d  ary_list': []},.
+0002e330: 0a20 2020 2020 2020 2020 2020 2027 6e6f  .            'no
+0002e340: 7665 6c27 3a20 7b27 6361 7465 676f 7279  vel': {'category
+0002e350: 273a 2027 6e6f 7665 6c27 2c20 2767 6c6f  ': 'novel', 'glo
+0002e360: 7373 6172 795f 6c69 7374 273a 205b 5d7d  ssary_list': []}
+0002e370: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+0002e380: 6669 6e61 6e63 6527 3a20 7b27 6361 7465  finance': {'cate
+0002e390: 676f 7279 273a 2027 6669 6e61 6e63 6527  gory': 'finance'
+0002e3a0: 2c20 2767 6c6f 7373 6172 795f 6c69 7374  , 'glossary_list
+0002e3b0: 273a 205b 5d7d 2c0d 0a20 2020 2020 2020  ': []},..       
+0002e3c0: 2020 2020 2027 6269 6f6d 6564 6963 616c       'biomedical
+0002e3d0: 273a 207b 2763 6174 6567 6f72 7927 3a20  ': {'category': 
+0002e3e0: 2762 696f 6d65 6469 6361 6c27 2c20 2767  'biomedical', 'g
+0002e3f0: 6c6f 7373 6172 795f 6c69 7374 273a 205b  lossary_list': [
+0002e400: 5d7d 2c0d 0a0d 0a20 2020 2020 2020 2020  ]},....         
+0002e410: 2020 2027 6169 273a 207b 2763 6174 6567     'ai': {'categ
+0002e420: 6f72 7927 3a20 2727 2c20 2767 6c6f 7373  ory': '', 'gloss
+0002e430: 6172 795f 6c69 7374 273a 205b 2761 696c  ary_list': ['ail
+0002e440: 6162 2f61 6927 5d7d 2c0d 0a20 2020 2020  ab/ai']},..     
+0002e450: 2020 2020 2020 2027 6d65 6e75 273a 207b         'menu': {
+0002e460: 2763 6174 6567 6f72 7927 3a20 2727 2c20  'category': '', 
+0002e470: 2767 6c6f 7373 6172 795f 6c69 7374 273a  'glossary_list':
+0002e480: 205b 2761 696c 6162 2f6d 656e 7527 5d7d   ['ailab/menu']}
+0002e490: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+0002e4a0: 7465 6368 6669 726d 273a 207b 2763 6174  techfirm': {'cat
+0002e4b0: 6567 6f72 7927 3a20 2727 2c20 2767 6c6f  egory': '', 'glo
+0002e4c0: 7373 6172 795f 6c69 7374 273a 205b 2761  ssary_list': ['a
+0002e4d0: 696c 6162 2f74 6563 6866 6972 6d27 5d7d  ilab/techfirm']}
+0002e4e0: 2c0d 0a0d 0a20 2020 2020 2020 2020 2020  ,....           
+0002e4f0: 2027 6563 6f6d 6d65 7263 6527 3a20 7b27   'ecommerce': {'
+0002e500: 6361 7465 676f 7279 273a 2027 6563 6f6d  category': 'ecom
+0002e510: 6d65 7263 6527 2c20 2767 6c6f 7373 6172  merce', 'glossar
+0002e520: 795f 6c69 7374 273a 205b 2761 696c 6162  y_list': ['ailab
+0002e530: 2f65 636f 6d6d 6572 6365 275d 7d2c 0d0a  /ecommerce']},..
+0002e540: 2020 2020 2020 2020 2020 2020 2774 6563              'tec
+0002e550: 686e 6971 7565 273a 207b 2763 6174 6567  hnique': {'categ
+0002e560: 6f72 7927 3a20 2774 6563 686e 6971 7565  ory': 'technique
+0002e570: 272c 2027 676c 6f73 7361 7279 5f6c 6973  ', 'glossary_lis
+0002e580: 7427 3a20 5b27 6169 6c61 622f 7465 6368  t': ['ailab/tech
+0002e590: 6e69 7175 6527 5d7d 2c0d 0a20 2020 2020  nique']},..     
+0002e5a0: 2020 207d 0d0a 2020 2020 2020 2020 7265     }..        re
+0002e5b0: 7475 726e 2064 6174 610d 0a0d 0a20 2020  turn data....   
+0002e5c0: 2040 5473 652e 756e 6365 7274 6966 6965   @Tse.uncertifie
+0002e5d0: 640d 0a20 2020 2040 5473 652e 7469 6d65  d..    @Tse.time
+0002e5e0: 5f73 7461 740d 0a20 2020 2040 5473 652e  _stat..    @Tse.
+0002e5f0: 6368 6563 6b5f 7175 6572 790d 0a20 2020  check_query..   
+0002e600: 2064 6566 2076 6f6c 6345 6e67 696e 655f   def volcEngine_
+0002e610: 6170 6928 7365 6c66 2c20 7175 6572 795f  api(self, query_
+0002e620: 7465 7874 3a20 7374 722c 2066 726f 6d5f  text: str, from_
+0002e630: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
+0002e640: 2761 7574 6f27 2c20 746f 5f6c 616e 6775  'auto', to_langu
+0002e650: 6167 653a 2073 7472 203d 2027 656e 272c  age: str = 'en',
+0002e660: 202a 2a6b 7761 7267 733a 2041 7069 4b77   **kwargs: ApiKw
+0002e670: 6172 6773 5479 7065 2920 2d3e 2055 6e69  argsType) -> Uni
+0002e680: 6f6e 5b73 7472 2c20 6469 6374 5d3a 0d0a  on[str, dict]:..
+0002e690: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+0002e6a0: 2020 2020 2068 7474 7073 3a2f 2f74 7261       https://tra
+0002e6b0: 6e73 6c61 7465 2e76 6f6c 6365 6e67 696e  nslate.volcengin
+0002e6c0: 652e 636f 6d0d 0a20 2020 2020 2020 203a  e.com..        :
+0002e6d0: 7061 7261 6d20 7175 6572 795f 7465 7874  param query_text
+0002e6e0: 3a20 7374 722c 206d 7573 742e 0d0a 2020  : str, must...  
+0002e6f0: 2020 2020 2020 3a70 6172 616d 2066 726f        :param fro
+0002e700: 6d5f 6c61 6e67 7561 6765 3a20 7374 722c  m_language: str,
+0002e710: 2064 6566 6175 6c74 2027 6175 746f 272e   default 'auto'.
+0002e720: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+0002e730: 2074 6f5f 6c61 6e67 7561 6765 3a20 7374   to_language: st
+0002e740: 722c 2064 6566 6175 6c74 2027 656e 272e  r, default 'en'.
+0002e750: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+0002e760: 202a 2a6b 7761 7267 733a 0d0a 2020 2020   **kwargs:..    
+0002e770: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+0002e780: 616d 2074 696d 656f 7574 3a20 666c 6f61  am timeout: floa
+0002e790: 742c 2064 6566 6175 6c74 204e 6f6e 652e  t, default None.
+0002e7a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002e7b0: 2020 3a70 6172 616d 2070 726f 7869 6573    :param proxies
+0002e7c0: 3a20 6469 6374 2c20 6465 6661 756c 7420  : dict, default 
+0002e7d0: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
+0002e7e0: 2020 2020 2020 203a 7061 7261 6d20 736c         :param sl
+0002e7f0: 6565 705f 7365 636f 6e64 733a 2066 6c6f  eep_seconds: flo
+0002e800: 6174 2c20 6465 6661 756c 7420 302e 0d0a  at, default 0...
+0002e810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e820: 3a70 6172 616d 2069 735f 6465 7461 696c  :param is_detail
+0002e830: 5f72 6573 756c 743a 2062 6f6f 6c2c 2064  _result: bool, d
+0002e840: 6566 6175 6c74 2046 616c 7365 2e0d 0a20  efault False... 
+0002e850: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0002e860: 7061 7261 6d20 6966 5f69 676e 6f72 655f  param if_ignore_
+0002e870: 6c69 6d69 745f 6f66 5f6c 656e 6774 683a  limit_of_length:
+0002e880: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
+0002e890: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
+0002e8a0: 2020 2020 2020 203a 7061 7261 6d20 6c69         :param li
+0002e8b0: 6d69 745f 6f66 5f6c 656e 6774 683a 2069  mit_of_length: i
+0002e8c0: 6e74 2c20 6465 6661 756c 7420 3230 3030  nt, default 2000
+0002e8d0: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+0002e8e0: 2020 2020 3a70 6172 616d 2069 665f 6967      :param if_ig
+0002e8f0: 6e6f 7265 5f65 6d70 7479 5f71 7565 7279  nore_empty_query
+0002e900: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+0002e910: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
+0002e920: 2020 2020 2020 2020 3a70 6172 616d 2075          :param u
+0002e930: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+0002e940: 7465 725f 6672 6571 3a20 696e 742c 2064  ter_freq: int, d
+0002e950: 6566 6175 6c74 2031 3030 302e 0d0a 2020  efault 1000...  
+0002e960: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+0002e970: 6172 616d 2075 7064 6174 655f 7365 7373  aram update_sess
+0002e980: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
+0002e990: 733a 2066 6c6f 6174 2c20 6465 6661 756c  s: float, defaul
+0002e9a0: 7420 3135 3030 2e0d 0a20 2020 2020 2020  t 1500...       
+0002e9b0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+0002e9c0: 6966 5f73 686f 775f 7469 6d65 5f73 7461  if_show_time_sta
+0002e9d0: 743a 2062 6f6f 6c2c 2064 6566 6175 6c74  t: bool, default
+0002e9e0: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
+0002e9f0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+0002ea00: 7368 6f77 5f74 696d 655f 7374 6174 5f70  show_time_stat_p
+0002ea10: 7265 6369 7369 6f6e 3a20 696e 742c 2064  recision: int, d
+0002ea20: 6566 6175 6c74 2032 2e0d 0a20 2020 2020  efault 2...     
+0002ea30: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+0002ea40: 6d20 6966 5f70 7269 6e74 5f77 6172 6e69  m if_print_warni
+0002ea50: 6e67 3a20 626f 6f6c 2c20 6465 6661 756c  ng: bool, defaul
+0002ea60: 7420 5472 7565 2e0d 0a20 2020 2020 2020  t True...       
+0002ea70: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+0002ea80: 7072 6f66 6573 7369 6f6e 616c 5f66 6965  professional_fie
+0002ea90: 6c64 3a20 7374 722c 2064 6566 6175 6c74  ld: str, default
+0002eaa0: 2027 272c 2063 686f 6f73 6520 6672 6f6d   '', choose from
+0002eab0: 2028 2727 2c20 2763 6c65 616e 2729 0d0a   ('', 'clean')..
+0002eac0: 2020 2020 2020 2020 3a72 6574 7572 6e3a          :return:
+0002ead0: 2073 7472 206f 7220 6469 6374 0d0a 2020   str or dict..  
+0002eae0: 2020 2020 2020 2222 220d 0a0d 0a20 2020        """....   
+0002eaf0: 2020 2020 2075 7365 5f64 6f6d 6169 6e20       use_domain 
+0002eb00: 3d20 6b77 6172 6773 2e67 6574 2827 7072  = kwargs.get('pr
+0002eb10: 6f66 6573 7369 6f6e 616c 5f66 6965 6c64  ofessional_field
+0002eb20: 272c 2027 2729 0d0a 2020 2020 2020 2020  ', '')..        
+0002eb30: 6966 2075 7365 5f64 6f6d 6169 6e20 6e6f  if use_domain no
+0002eb40: 7420 696e 2073 656c 662e 7072 6f66 6573  t in self.profes
+0002eb50: 7369 6f6e 616c 5f66 6965 6c64 5f6d 6170  sional_field_map
+0002eb60: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+0002eb70: 6169 7365 2054 7261 6e73 6c61 746f 7245  aise TranslatorE
+0002eb80: 7272 6f72 0d0a 0d0a 2020 2020 2020 2020  rror....        
+0002eb90: 7469 6d65 6f75 7420 3d20 6b77 6172 6773  timeout = kwargs
+0002eba0: 2e67 6574 2827 7469 6d65 6f75 7427 2c20  .get('timeout', 
+0002ebb0: 4e6f 6e65 290d 0a20 2020 2020 2020 2070  None)..        p
+0002ebc0: 726f 7869 6573 203d 206b 7761 7267 732e  roxies = kwargs.
+0002ebd0: 6765 7428 2770 726f 7869 6573 272c 204e  get('proxies', N
+0002ebe0: 6f6e 6529 0d0a 2020 2020 2020 2020 736c  one)..        sl
+0002ebf0: 6565 705f 7365 636f 6e64 7320 3d20 6b77  eep_seconds = kw
+0002ec00: 6172 6773 2e67 6574 2827 736c 6565 705f  args.get('sleep_
+0002ec10: 7365 636f 6e64 7327 2c20 3029 0d0a 2020  seconds', 0)..  
+0002ec20: 2020 2020 2020 6966 5f70 7269 6e74 5f77        if_print_w
+0002ec30: 6172 6e69 6e67 203d 206b 7761 7267 732e  arning = kwargs.
+0002ec40: 6765 7428 2769 665f 7072 696e 745f 7761  get('if_print_wa
+0002ec50: 726e 696e 6727 2c20 5472 7565 290d 0a20  rning', True).. 
+0002ec60: 2020 2020 2020 2069 735f 6465 7461 696c         is_detail
+0002ec70: 5f72 6573 756c 7420 3d20 6b77 6172 6773  _result = kwargs
+0002ec80: 2e67 6574 2827 6973 5f64 6574 6169 6c5f  .get('is_detail_
+0002ec90: 7265 7375 6c74 272c 2046 616c 7365 290d  result', False).
+0002eca0: 0a20 2020 2020 2020 2075 7064 6174 655f  .        update_
+0002ecb0: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
+0002ecc0: 6571 203d 206b 7761 7267 732e 6765 7428  eq = kwargs.get(
+0002ecd0: 2775 7064 6174 655f 7365 7373 696f 6e5f  'update_session_
+0002ece0: 6166 7465 725f 6672 6571 272c 2073 656c  after_freq', sel
+0002ecf0: 662e 6465 6661 756c 745f 7365 7373 696f  f.default_sessio
+0002ed00: 6e5f 6672 6571 290d 0a20 2020 2020 2020  n_freq)..       
+0002ed10: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
+0002ed20: 6166 7465 725f 7365 636f 6e64 7320 3d20  after_seconds = 
+0002ed30: 6b77 6172 6773 2e67 6574 2827 7570 6461  kwargs.get('upda
+0002ed40: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+0002ed50: 5f73 6563 6f6e 6473 272c 2073 656c 662e  _seconds', self.
+0002ed60: 6465 6661 756c 745f 7365 7373 696f 6e5f  default_session_
+0002ed70: 7365 636f 6e64 7329 0d0a 2020 2020 2020  seconds)..      
+0002ed80: 2020 7365 6c66 2e63 6865 636b 5f69 6e70    self.check_inp
+0002ed90: 7574 5f6c 696d 6974 2871 7565 7279 5f74  ut_limit(query_t
+0002eda0: 6578 742c 2073 656c 662e 696e 7075 745f  ext, self.input_
+0002edb0: 6c69 6d69 7429 0d0a 0d0a 2020 2020 2020  limit)....      
+0002edc0: 2020 6e6f 745f 7570 6461 7465 5f63 6f6e    not_update_con
+0002edd0: 645f 6672 6571 203d 2031 2069 6620 7365  d_freq = 1 if se
+0002ede0: 6c66 2e71 7565 7279 5f63 6f75 6e74 2025  lf.query_count %
+0002edf0: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
+0002ee00: 6166 7465 725f 6672 6571 2021 3d20 3020  after_freq != 0 
+0002ee10: 656c 7365 2030 0d0a 2020 2020 2020 2020  else 0..        
+0002ee20: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
+0002ee30: 7469 6d65 203d 2031 2069 6620 7469 6d65  time = 1 if time
+0002ee40: 2e74 696d 6528 2920 2d20 7365 6c66 2e62  .time() - self.b
+0002ee50: 6567 696e 5f74 696d 6520 3c20 7570 6461  egin_time < upda
+0002ee60: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+0002ee70: 5f73 6563 6f6e 6473 2065 6c73 6520 300d  _seconds else 0.
+0002ee80: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+0002ee90: 2873 656c 662e 7365 7373 696f 6e20 616e  (self.session an
+0002eea0: 6420 7365 6c66 2e6c 616e 6775 6167 655f  d self.language_
+0002eeb0: 6d61 7020 616e 6420 6e6f 745f 7570 6461  map and not_upda
+0002eec0: 7465 5f63 6f6e 645f 6672 6571 2061 6e64  te_cond_freq and
+0002eed0: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
+0002eee0: 5f74 696d 6529 3a0d 0a20 2020 2020 2020  _time):..       
+0002eef0: 2020 2020 2073 656c 662e 6265 6769 6e5f       self.begin_
+0002ef00: 7469 6d65 203d 2074 696d 652e 7469 6d65  time = time.time
+0002ef10: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+0002ef20: 7365 6c66 2e73 6573 7369 6f6e 203d 2072  self.session = r
+0002ef30: 6571 7565 7374 732e 5365 7373 696f 6e28  equests.Session(
+0002ef40: 290d 0a20 2020 2020 2020 2020 2020 2068  )..            h
+0002ef50: 6f73 745f 6874 6d6c 203d 2073 656c 662e  ost_html = self.
+0002ef60: 7365 7373 696f 6e2e 6765 7428 7365 6c66  session.get(self
+0002ef70: 2e68 6f73 745f 7572 6c2c 2068 6561 6465  .host_url, heade
+0002ef80: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
+0002ef90: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+0002efa0: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+0002efb0: 726f 7869 6573 292e 7465 7874 0d0a 2020  roxies).text..  
+0002efc0: 2020 2020 2020 2020 2020 6465 6275 675f            debug_
+0002efd0: 6c61 6e67 5f6b 7761 7267 7320 3d20 7365  lang_kwargs = se
+0002efe0: 6c66 2e64 6562 7567 5f6c 616e 675f 6b77  lf.debug_lang_kw
+0002eff0: 6172 6773 2866 726f 6d5f 6c61 6e67 7561  args(from_langua
+0002f000: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
+0002f010: 2073 656c 662e 6465 6661 756c 745f 6672   self.default_fr
+0002f020: 6f6d 5f6c 616e 6775 6167 652c 2069 665f  om_language, if_
+0002f030: 7072 696e 745f 7761 726e 696e 6729 0d0a  print_warning)..
+0002f040: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0002f050: 2e6c 616e 6775 6167 655f 6d61 7020 3d20  .language_map = 
+0002f060: 7365 6c66 2e67 6574 5f6c 616e 6775 6167  self.get_languag
+0002f070: 655f 6d61 7028 686f 7374 5f68 746d 6c2c  e_map(host_html,
+0002f080: 202a 2a64 6562 7567 5f6c 616e 675f 6b77   **debug_lang_kw
+0002f090: 6172 6773 290d 0a0d 0a20 2020 2020 2020  args)....       
+0002f0a0: 2066 726f 6d5f 6c61 6e67 7561 6765 2c20   from_language, 
+0002f0b0: 746f 5f6c 616e 6775 6167 6520 3d20 7365  to_language = se
+0002f0c0: 6c66 2e63 6865 636b 5f6c 616e 6775 6167  lf.check_languag
+0002f0d0: 6528 6672 6f6d 5f6c 616e 6775 6167 652c  e(from_language,
+0002f0e0: 2074 6f5f 6c61 6e67 7561 6765 2c20 7365   to_language, se
+0002f0f0: 6c66 2e6c 616e 6775 6167 655f 6d61 702c  lf.language_map,
+0002f100: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002f110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f130: 2020 2020 2020 2020 2020 206f 7574 7075             outpu
+0002f140: 745f 6175 746f 3d73 656c 662e 6f75 7470  t_auto=self.outp
+0002f150: 7574 5f61 7574 6f2c 206f 7574 7075 745f  ut_auto, output_
+0002f160: 7a68 3d73 656c 662e 6f75 7470 7574 5f7a  zh=self.output_z
+0002f170: 6829 0d0a 2020 2020 2020 2020 7061 7261  h)..        para
+0002f180: 6d73 203d 207b 0d0a 2020 2020 2020 2020  ms = {..        
+0002f190: 2020 2020 276d 7354 6f6b 656e 273a 2073      'msToken': s
+0002f1a0: 656c 662e 6d73 5f74 6f6b 656e 2c0d 0a20  elf.ms_token,.. 
+0002f1b0: 2020 2020 2020 2020 2020 2027 582d 426f             'X-Bo
+0002f1c0: 6775 7327 3a20 7365 6c66 2e78 5f62 6f67  gus': self.x_bog
+0002f1d0: 7573 2c0d 0a20 2020 2020 2020 2020 2020  us,..           
+0002f1e0: 2027 5f73 6967 6e61 7475 7265 273a 2073   '_signature': s
+0002f1f0: 656c 662e 7369 676e 6174 7572 652c 0d0a  elf.signature,..
+0002f200: 2020 2020 2020 2020 7d0d 0a20 2020 2020          }..     
+0002f210: 2020 2070 6179 6c6f 6164 203d 207b 0d0a     payload = {..
+0002f220: 2020 2020 2020 2020 2020 2020 2774 6578              'tex
+0002f230: 7427 3a20 7175 6572 795f 7465 7874 2c0d  t': query_text,.
+0002f240: 0a20 2020 2020 2020 2020 2020 2027 736f  .            'so
+0002f250: 7572 6365 5f6c 616e 6775 6167 6527 3a20  urce_language': 
+0002f260: 6672 6f6d 5f6c 616e 6775 6167 652c 0d0a  from_language,..
+0002f270: 2020 2020 2020 2020 2020 2020 2774 6172              'tar
+0002f280: 6765 745f 6c61 6e67 7561 6765 273a 2074  get_language': t
+0002f290: 6f5f 6c61 6e67 7561 6765 2c0d 0a20 2020  o_language,..   
+0002f2a0: 2020 2020 2020 2020 2027 686f 6d65 5f6c           'home_l
+0002f2b0: 616e 6775 6167 6527 3a20 277a 6827 2c0d  anguage': 'zh',.
+0002f2c0: 0a20 2020 2020 2020 2020 2020 2027 656e  .            'en
+0002f2d0: 6162 6c65 5f75 7365 725f 676c 6f73 7361  able_user_glossa
+0002f2e0: 7279 273a 2027 6661 6c73 6527 2c0d 0a20  ry': 'false',.. 
+0002f2f0: 2020 2020 2020 207d 0d0a 2020 2020 2020         }..      
+0002f300: 2020 7061 796c 6f61 642e 7570 6461 7465    payload.update
+0002f310: 2873 656c 662e 7072 6f66 6573 7369 6f6e  (self.profession
+0002f320: 616c 5f66 6965 6c64 5f6d 6170 5b75 7365  al_field_map[use
+0002f330: 5f64 6f6d 6169 6e5d 290d 0a20 2020 2020  _domain])..     
+0002f340: 2020 2072 203d 2073 656c 662e 7365 7373     r = self.sess
+0002f350: 696f 6e2e 706f 7374 2873 656c 662e 6170  ion.post(self.ap
+0002f360: 695f 7572 6c2c 2070 6172 616d 733d 7061  i_url, params=pa
+0002f370: 7261 6d73 2c20 6a73 6f6e 3d70 6179 6c6f  rams, json=paylo
+0002f380: 6164 2c20 6865 6164 6572 733d 7365 6c66  ad, headers=self
+0002f390: 2e61 7069 5f68 6561 6465 7273 2c20 7469  .api_headers, ti
+0002f3a0: 6d65 6f75 743d 7469 6d65 6f75 742c 2070  meout=timeout, p
+0002f3b0: 726f 7869 6573 3d70 726f 7869 6573 290d  roxies=proxies).
+0002f3c0: 0a20 2020 2020 2020 2072 2e72 6169 7365  .        r.raise
+0002f3d0: 5f66 6f72 5f73 7461 7475 7328 290d 0a20  _for_status().. 
+0002f3e0: 2020 2020 2020 2064 6174 6120 3d20 722e         data = r.
+0002f3f0: 6a73 6f6e 2829 0d0a 2020 2020 2020 2020  json()..        
+0002f400: 7469 6d65 2e73 6c65 6570 2873 6c65 6570  time.sleep(sleep
+0002f410: 5f73 6563 6f6e 6473 290d 0a20 2020 2020  _seconds)..     
+0002f420: 2020 2073 656c 662e 7175 6572 795f 636f     self.query_co
+0002f430: 756e 7420 2b3d 2031 0d0a 2020 2020 2020  unt += 1..      
+0002f440: 2020 7265 7475 726e 2064 6174 6120 6966    return data if
+0002f450: 2069 735f 6465 7461 696c 5f72 6573 756c   is_detail_resul
+0002f460: 7420 656c 7365 2064 6174 615b 2774 7261  t else data['tra
+0002f470: 6e73 6c61 7469 6f6e 275d 0d0a 0d0a 0d0a  nslation']......
+0002f480: 636c 6173 7320 4d6f 6465 726e 4d74 2854  class ModernMt(T
+0002f490: 7365 293a 0d0a 2020 2020 6465 6620 5f5f  se):..    def __
+0002f4a0: 696e 6974 5f5f 2873 656c 6629 3a0d 0a20  init__(self):.. 
+0002f4b0: 2020 2020 2020 2073 7570 6572 2829 2e5f         super()._
+0002f4c0: 5f69 6e69 745f 5f28 290d 0a20 2020 2020  _init__()..     
+0002f4d0: 2020 2073 656c 662e 6265 6769 6e5f 7469     self.begin_ti
+0002f4e0: 6d65 203d 2074 696d 652e 7469 6d65 2829  me = time.time()
+0002f4f0: 0d0a 2020 2020 2020 2020 7365 6c66 2e68  ..        self.h
+0002f500: 6f73 745f 7572 6c20 3d20 2768 7474 7073  ost_url = 'https
+0002f510: 3a2f 2f77 7777 2e6d 6f64 6572 6e6d 742e  ://www.modernmt.
+0002f520: 636f 6d2f 7472 616e 736c 6174 6527 0d0a  com/translate'..
+0002f530: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
+0002f540: 5f75 726c 203d 2027 6874 7470 733a 2f2f  _url = 'https://
+0002f550: 7765 6261 7069 2e6d 6f64 6572 6e6d 742e  webapi.modernmt.
+0002f560: 636f 6d2f 7472 616e 736c 6174 6527 0d0a  com/translate'..
+0002f570: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
+0002f580: 6775 6167 655f 7572 6c20 3d20 2768 7474  guage_url = 'htt
+0002f590: 7073 3a2f 2f77 7777 2e6d 6f64 6572 6e6d  ps://www.modernm
+0002f5a0: 742e 636f 6d2f 7363 7269 7074 732f 6170  t.com/scripts/ap
+0002f5b0: 702e 6275 6e64 6c65 2e6a 7327 0d0a 2020  p.bundle.js'..  
+0002f5c0: 2020 2020 2020 7365 6c66 2e68 6f73 745f        self.host_
+0002f5d0: 6865 6164 6572 7320 3d20 7365 6c66 2e67  headers = self.g
+0002f5e0: 6574 5f68 6561 6465 7273 2873 656c 662e  et_headers(self.
+0002f5f0: 686f 7374 5f75 726c 2c20 6966 5f61 7069  host_url, if_api
+0002f600: 3d46 616c 7365 290d 0a20 2020 2020 2020  =False)..       
+0002f610: 2073 656c 662e 6170 695f 6865 6164 6572   self.api_header
+0002f620: 7320 3d20 7365 6c66 2e67 6574 5f68 6561  s = self.get_hea
+0002f630: 6465 7273 2873 656c 662e 686f 7374 5f75  ders(self.host_u
+0002f640: 726c 2c20 6966 5f61 7069 3d54 7275 652c  rl, if_api=True,
+0002f650: 2069 665f 6a73 6f6e 5f66 6f72 5f61 7069   if_json_for_api
+0002f660: 3d54 7275 652c 2069 665f 6874 7470 5f6f  =True, if_http_o
+0002f670: 7665 7272 6964 655f 666f 725f 6170 693d  verride_for_api=
+0002f680: 5472 7565 290d 0a20 2020 2020 2020 2073  True)..        s
+0002f690: 656c 662e 7365 7373 696f 6e20 3d20 4e6f  elf.session = No
+0002f6a0: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
+0002f6b0: 2e6c 616e 6775 6167 655f 6d61 7020 3d20  .language_map = 
+0002f6c0: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
+0002f6d0: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
+0002f6e0: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
+0002f6f0: 2e6f 7574 7075 745f 7a68 203d 2027 7a68  .output_zh = 'zh
+0002f700: 2d43 4e27 0d0a 2020 2020 2020 2020 7365  -CN'..        se
+0002f710: 6c66 2e69 6e70 7574 5f6c 696d 6974 203d  lf.input_limit =
+0002f720: 2069 6e74 2835 6533 290d 0a20 2020 2020   int(5e3)..     
+0002f730: 2020 2073 656c 662e 6465 6661 756c 745f     self.default_
+0002f740: 6672 6f6d 5f6c 616e 6775 6167 6520 3d20  from_language = 
+0002f750: 7365 6c66 2e6f 7574 7075 745f 7a68 0d0a  self.output_zh..
+0002f760: 0d0a 2020 2020 4054 7365 2e64 6562 7567  ..    @Tse.debug
+0002f770: 5f6c 616e 6775 6167 655f 6d61 700d 0a20  _language_map.. 
+0002f780: 2020 2064 6566 2067 6574 5f6c 616e 6775     def get_langu
+0002f790: 6167 655f 6d61 7028 7365 6c66 2c20 6c61  age_map(self, la
+0002f7a0: 6e67 5f75 726c 3a20 7374 722c 2073 733a  ng_url: str, ss:
+0002f7b0: 2053 6573 7369 6f6e 5479 7065 2c20 6865   SessionType, he
+0002f7c0: 6164 6572 733a 2064 6963 742c 2074 696d  aders: dict, tim
+0002f7d0: 656f 7574 3a20 4f70 7469 6f6e 616c 5b66  eout: Optional[f
+0002f7e0: 6c6f 6174 5d2c 2070 726f 7869 6573 3a20  loat], proxies: 
+0002f7f0: 4f70 7469 6f6e 616c 5b64 6963 745d 2c20  Optional[dict], 
+0002f800: 2a2a 6b77 6172 6773 3a20 4c61 6e67 4d61  **kwargs: LangMa
+0002f810: 704b 7761 7267 7354 7970 6529 202d 3e20  pKwargsType) -> 
+0002f820: 6469 6374 3a0d 0a20 2020 2020 2020 206c  dict:..        l
+0002f830: 616e 675f 6874 6d6c 203d 2073 732e 6765  ang_html = ss.ge
+0002f840: 7428 6c61 6e67 5f75 726c 2c20 6865 6164  t(lang_url, head
+0002f850: 6572 733d 6865 6164 6572 732c 2074 696d  ers=headers, tim
+0002f860: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
+0002f870: 6f78 6965 733d 7072 6f78 6965 7329 2e74  oxies=proxies).t
+0002f880: 6578 740d 0a20 2020 2020 2020 2064 5f6c  ext..        d_l
+0002f890: 616e 675f 6d61 7020 3d20 6a73 6f6e 2e6c  ang_map = json.l
+0002f8a0: 6f61 6473 2872 652e 636f 6d70 696c 6528  oads(re.compile(
+0002f8b0: 2727 2728 277b 282e 2a3f 297d 2729 2727  '''('{(.*?)}')''
+0002f8c0: 2729 2e73 6561 7263 6828 6c61 6e67 5f68  ').search(lang_h
+0002f8d0: 746d 6c29 2e67 726f 7570 2830 295b 313a  tml).group(0)[1:
+0002f8e0: 2d31 5d29 0d0a 2020 2020 2020 2020 6c61  -1])..        la
+0002f8f0: 6e67 5f6c 6973 7420 3d20 736f 7274 6564  ng_list = sorted
+0002f900: 2864 5f6c 616e 675f 6d61 702e 6b65 7973  (d_lang_map.keys
+0002f910: 2829 290d 0a20 2020 2020 2020 2072 6574  ())..        ret
+0002f920: 7572 6e20 7b7d 2e66 726f 6d6b 6579 7328  urn {}.fromkeys(
+0002f930: 6c61 6e67 5f6c 6973 742c 206c 616e 675f  lang_list, lang_
+0002f940: 6c69 7374 290d 0a0d 0a20 2020 2040 5473  list)....    @Ts
+0002f950: 652e 7469 6d65 5f73 7461 740d 0a20 2020  e.time_stat..   
+0002f960: 2040 5473 652e 6368 6563 6b5f 7175 6572   @Tse.check_quer
+0002f970: 790d 0a20 2020 2064 6566 206d 6f64 6572  y..    def moder
+0002f980: 6e4d 745f 6170 6928 7365 6c66 2c20 7175  nMt_api(self, qu
+0002f990: 6572 795f 7465 7874 3a20 7374 722c 2066  ery_text: str, f
+0002f9a0: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
+0002f9b0: 7220 3d20 2761 7574 6f27 2c20 746f 5f6c  r = 'auto', to_l
+0002f9c0: 616e 6775 6167 653a 2073 7472 203d 2027  anguage: str = '
+0002f9d0: 656e 272c 202a 2a6b 7761 7267 733a 2041  en', **kwargs: A
+0002f9e0: 7069 4b77 6172 6773 5479 7065 2920 2d3e  piKwargsType) ->
+0002f9f0: 2055 6e69 6f6e 5b73 7472 2c20 6469 6374   Union[str, dict
+0002fa00: 5d3a 0d0a 2020 2020 2020 2020 2222 220d  ]:..        """.
+0002fa10: 0a20 2020 2020 2020 2068 7474 7073 3a2f  .        https:/
+0002fa20: 2f77 7777 2e6d 6f64 6572 6e6d 742e 636f  /www.modernmt.co
+0002fa30: 6d2f 7472 616e 736c 6174 650d 0a20 2020  m/translate..   
+0002fa40: 2020 2020 203a 7061 7261 6d20 7175 6572       :param quer
+0002fa50: 795f 7465 7874 3a20 7374 722c 206d 7573  y_text: str, mus
+0002fa60: 742e 0d0a 2020 2020 2020 2020 3a70 6172  t...        :par
+0002fa70: 616d 2066 726f 6d5f 6c61 6e67 7561 6765  am from_language
+0002fa80: 3a20 7374 722c 2064 6566 6175 6c74 2027  : str, default '
+0002fa90: 6175 746f 272e 0d0a 2020 2020 2020 2020  auto'...        
+0002faa0: 3a70 6172 616d 2074 6f5f 6c61 6e67 7561  :param to_langua
+0002fab0: 6765 3a20 7374 722c 2064 6566 6175 6c74  ge: str, default
+0002fac0: 2027 656e 272e 0d0a 2020 2020 2020 2020   'en'...        
+0002fad0: 3a70 6172 616d 202a 2a6b 7761 7267 733a  :param **kwargs:
+0002fae0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002faf0: 2020 3a70 6172 616d 2074 696d 656f 7574    :param timeout
+0002fb00: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
+0002fb10: 204e 6f6e 652e 0d0a 2020 2020 2020 2020   None...        
+0002fb20: 2020 2020 2020 2020 3a70 6172 616d 2070          :param p
+0002fb30: 726f 7869 6573 3a20 6469 6374 2c20 6465  roxies: dict, de
+0002fb40: 6661 756c 7420 4e6f 6e65 2e0d 0a20 2020  fault None...   
+0002fb50: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+0002fb60: 7261 6d20 736c 6565 705f 7365 636f 6e64  ram sleep_second
+0002fb70: 733a 2066 6c6f 6174 2c20 6465 6661 756c  s: float, defaul
+0002fb80: 7420 302e 0d0a 2020 2020 2020 2020 2020  t 0...          
+0002fb90: 2020 2020 2020 3a70 6172 616d 2069 735f        :param is_
+0002fba0: 6465 7461 696c 5f72 6573 756c 743a 2062  detail_result: b
+0002fbb0: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
+0002fbc0: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
+0002fbd0: 2020 2020 203a 7061 7261 6d20 6966 5f69       :param if_i
+0002fbe0: 676e 6f72 655f 6c69 6d69 745f 6f66 5f6c  gnore_limit_of_l
+0002fbf0: 656e 6774 683a 2062 6f6f 6c2c 2064 6566  ength: bool, def
+0002fc00: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
+0002fc10: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+0002fc20: 7261 6d20 6c69 6d69 745f 6f66 5f6c 656e  ram limit_of_len
+0002fc30: 6774 683a 2069 6e74 2c20 6465 6661 756c  gth: int, defaul
+0002fc40: 7420 3230 3030 302e 0d0a 2020 2020 2020  t 20000...      
+0002fc50: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+0002fc60: 2069 665f 6967 6e6f 7265 5f65 6d70 7479   if_ignore_empty
+0002fc70: 5f71 7565 7279 3a20 626f 6f6c 2c20 6465  _query: bool, de
+0002fc80: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
+0002fc90: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+0002fca0: 6172 616d 2075 7064 6174 655f 7365 7373  aram update_sess
+0002fcb0: 696f 6e5f 6166 7465 725f 6672 6571 3a20  ion_after_freq: 
+0002fcc0: 696e 742c 2064 6566 6175 6c74 2031 3030  int, default 100
+0002fcd0: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+0002fce0: 2020 2020 3a70 6172 616d 2075 7064 6174      :param updat
+0002fcf0: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
+0002fd00: 7365 636f 6e64 733a 2066 6c6f 6174 2c20  seconds: float, 
+0002fd10: 6465 6661 756c 7420 3135 3030 2e0d 0a20  default 1500... 
+0002fd20: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0002fd30: 7061 7261 6d20 6966 5f73 686f 775f 7469  param if_show_ti
+0002fd40: 6d65 5f73 7461 743a 2062 6f6f 6c2c 2064  me_stat: bool, d
+0002fd50: 6566 6175 6c74 2046 616c 7365 2e0d 0a20  efault False... 
+0002fd60: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0002fd70: 7061 7261 6d20 7368 6f77 5f74 696d 655f  param show_time_
+0002fd80: 7374 6174 5f70 7265 6369 7369 6f6e 3a20  stat_precision: 
+0002fd90: 696e 742c 2064 6566 6175 6c74 2032 2e0d  int, default 2..
+0002fda0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002fdb0: 203a 7061 7261 6d20 6966 5f70 7269 6e74   :param if_print
+0002fdc0: 5f77 6172 6e69 6e67 3a20 626f 6f6c 2c20  _warning: bool, 
+0002fdd0: 6465 6661 756c 7420 5472 7565 2e0d 0a20  default True... 
+0002fde0: 2020 2020 2020 203a 7265 7475 726e 3a20         :return: 
+0002fdf0: 7374 7220 6f72 2064 6963 740d 0a20 2020  str or dict..   
+0002fe00: 2020 2020 2022 2222 0d0a 0d0a 2020 2020       """....    
+0002fe10: 2020 2020 7469 6d65 6f75 7420 3d20 6b77      timeout = kw
+0002fe20: 6172 6773 2e67 6574 2827 7469 6d65 6f75  args.get('timeou
+0002fe30: 7427 2c20 4e6f 6e65 290d 0a20 2020 2020  t', None)..     
+0002fe40: 2020 2070 726f 7869 6573 203d 206b 7761     proxies = kwa
+0002fe50: 7267 732e 6765 7428 2770 726f 7869 6573  rgs.get('proxies
+0002fe60: 272c 204e 6f6e 6529 0d0a 2020 2020 2020  ', None)..      
+0002fe70: 2020 736c 6565 705f 7365 636f 6e64 7320    sleep_seconds 
+0002fe80: 3d20 6b77 6172 6773 2e67 6574 2827 736c  = kwargs.get('sl
+0002fe90: 6565 705f 7365 636f 6e64 7327 2c20 3029  eep_seconds', 0)
+0002fea0: 0d0a 2020 2020 2020 2020 6966 5f70 7269  ..        if_pri
+0002feb0: 6e74 5f77 6172 6e69 6e67 203d 206b 7761  nt_warning = kwa
+0002fec0: 7267 732e 6765 7428 2769 665f 7072 696e  rgs.get('if_prin
+0002fed0: 745f 7761 726e 696e 6727 2c20 5472 7565  t_warning', True
+0002fee0: 290d 0a20 2020 2020 2020 2069 735f 6465  )..        is_de
+0002fef0: 7461 696c 5f72 6573 756c 7420 3d20 6b77  tail_result = kw
+0002ff00: 6172 6773 2e67 6574 2827 6973 5f64 6574  args.get('is_det
+0002ff10: 6169 6c5f 7265 7375 6c74 272c 2046 616c  ail_result', Fal
+0002ff20: 7365 290d 0a20 2020 2020 2020 2075 7064  se)..        upd
+0002ff30: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0002ff40: 725f 6672 6571 203d 206b 7761 7267 732e  r_freq = kwargs.
+0002ff50: 6765 7428 2775 7064 6174 655f 7365 7373  get('update_sess
+0002ff60: 696f 6e5f 6166 7465 725f 6672 6571 272c  ion_after_freq',
+0002ff70: 2073 656c 662e 6465 6661 756c 745f 7365   self.default_se
+0002ff80: 7373 696f 6e5f 6672 6571 290d 0a20 2020  ssion_freq)..   
+0002ff90: 2020 2020 2075 7064 6174 655f 7365 7373       update_sess
+0002ffa0: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
+0002ffb0: 7320 3d20 6b77 6172 6773 2e67 6574 2827  s = kwargs.get('
+0002ffc0: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+0002ffd0: 6674 6572 5f73 6563 6f6e 6473 272c 2073  fter_seconds', s
+0002ffe0: 656c 662e 6465 6661 756c 745f 7365 7373  elf.default_sess
+0002fff0: 696f 6e5f 7365 636f 6e64 7329 0d0a 2020  ion_seconds)..  
+00030000: 2020 2020 2020 7365 6c66 2e63 6865 636b        self.check
+00030010: 5f69 6e70 7574 5f6c 696d 6974 2871 7565  _input_limit(que
+00030020: 7279 5f74 6578 742c 2073 656c 662e 696e  ry_text, self.in
+00030030: 7075 745f 6c69 6d69 7429 0d0a 0d0a 2020  put_limit)....  
+00030040: 2020 2020 2020 6e6f 745f 7570 6461 7465        not_update
+00030050: 5f63 6f6e 645f 6672 6571 203d 2031 2069  _cond_freq = 1 i
+00030060: 6620 7365 6c66 2e71 7565 7279 5f63 6f75  f self.query_cou
+00030070: 6e74 2025 2075 7064 6174 655f 7365 7373  nt % update_sess
+00030080: 696f 6e5f 6166 7465 725f 6672 6571 2021  ion_after_freq !
+00030090: 3d20 3020 656c 7365 2030 0d0a 2020 2020  = 0 else 0..    
+000300a0: 2020 2020 6e6f 745f 7570 6461 7465 5f63      not_update_c
+000300b0: 6f6e 645f 7469 6d65 203d 2031 2069 6620  ond_time = 1 if 
+000300c0: 7469 6d65 2e74 696d 6528 2920 2d20 7365  time.time() - se
+000300d0: 6c66 2e62 6567 696e 5f74 696d 6520 3c20  lf.begin_time < 
+000300e0: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+000300f0: 6674 6572 5f73 6563 6f6e 6473 2065 6c73  fter_seconds els
+00030100: 6520 300d 0a20 2020 2020 2020 2069 6620  e 0..        if 
+00030110: 6e6f 7420 2873 656c 662e 7365 7373 696f  not (self.sessio
+00030120: 6e20 616e 6420 7365 6c66 2e6c 616e 6775  n and self.langu
+00030130: 6167 655f 6d61 7020 616e 6420 6e6f 745f  age_map and not_
+00030140: 7570 6461 7465 5f63 6f6e 645f 6672 6571  update_cond_freq
+00030150: 2061 6e64 206e 6f74 5f75 7064 6174 655f   and not_update_
+00030160: 636f 6e64 5f74 696d 6529 3a0d 0a20 2020  cond_time):..   
+00030170: 2020 2020 2020 2020 2073 656c 662e 6265           self.be
+00030180: 6769 6e5f 7469 6d65 203d 2074 696d 652e  gin_time = time.
+00030190: 7469 6d65 2829 0d0a 2020 2020 2020 2020  time()..        
+000301a0: 2020 2020 7365 6c66 2e73 6573 7369 6f6e      self.session
+000301b0: 203d 2072 6571 7565 7374 732e 5365 7373   = requests.Sess
+000301c0: 696f 6e28 290d 0a20 2020 2020 2020 2020  ion()..         
+000301d0: 2020 205f 203d 2073 656c 662e 7365 7373     _ = self.sess
+000301e0: 696f 6e2e 6765 7428 7365 6c66 2e68 6f73  ion.get(self.hos
+000301f0: 745f 7572 6c2c 2068 6561 6465 7273 3d73  t_url, headers=s
+00030200: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
+00030210: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
+00030220: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
+00030230: 6573 290d 0a20 2020 2020 2020 2020 2020  es)..           
+00030240: 2064 6562 7567 5f6c 616e 675f 6b77 6172   debug_lang_kwar
+00030250: 6773 203d 2073 656c 662e 6465 6275 675f  gs = self.debug_
+00030260: 6c61 6e67 5f6b 7761 7267 7328 6672 6f6d  lang_kwargs(from
+00030270: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
+00030280: 6e67 7561 6765 2c20 7365 6c66 2e64 6566  nguage, self.def
+00030290: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
+000302a0: 6765 2c20 6966 5f70 7269 6e74 5f77 6172  ge, if_print_war
+000302b0: 6e69 6e67 290d 0a20 2020 2020 2020 2020  ning)..         
+000302c0: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
+000302d0: 5f6d 6170 203d 2073 656c 662e 6765 745f  _map = self.get_
+000302e0: 6c61 6e67 7561 6765 5f6d 6170 2873 656c  language_map(sel
+000302f0: 662e 6c61 6e67 7561 6765 5f75 726c 2c20  f.language_url, 
+00030300: 7365 6c66 2e73 6573 7369 6f6e 2c20 7365  self.session, se
+00030310: 6c66 2e68 6f73 745f 6865 6164 6572 732c  lf.host_headers,
+00030320: 2074 696d 656f 7574 2c20 7072 6f78 6965   timeout, proxie
+00030330: 732c 202a 2a64 6562 7567 5f6c 616e 675f  s, **debug_lang_
+00030340: 6b77 6172 6773 290d 0a0d 0a20 2020 2020  kwargs)....     
+00030350: 2020 2066 726f 6d5f 6c61 6e67 7561 6765     from_language
+00030360: 2c20 746f 5f6c 616e 6775 6167 6520 3d20  , to_language = 
+00030370: 7365 6c66 2e63 6865 636b 5f6c 616e 6775  self.check_langu
+00030380: 6167 6528 6672 6f6d 5f6c 616e 6775 6167  age(from_languag
+00030390: 652c 2074 6f5f 6c61 6e67 7561 6765 2c20  e, to_language, 
+000303a0: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
+000303b0: 702c 206f 7574 7075 745f 7a68 3d73 656c  p, output_zh=sel
+000303c0: 662e 6f75 7470 7574 5f7a 6829 0d0a 0d0a  f.output_zh)....
+000303d0: 2020 2020 2020 2020 7469 6d65 7374 616d          timestam
+000303e0: 7020 3d20 7365 6c66 2e67 6574 5f74 696d  p = self.get_tim
+000303f0: 6573 7461 6d70 2829 0d0a 2020 2020 2020  estamp()..      
+00030400: 2020 7061 796c 6f61 6420 3d20 7b0d 0a20    payload = {.. 
+00030410: 2020 2020 2020 2020 2020 2027 7127 3a20             'q': 
+00030420: 7175 6572 795f 7465 7874 2c0d 0a20 2020  query_text,..   
+00030430: 2020 2020 2020 2020 2027 736f 7572 6365           'source
+00030440: 273a 2027 2720 6966 2066 726f 6d5f 6c61  ': '' if from_la
+00030450: 6e67 7561 6765 203d 3d20 2761 7574 6f27  nguage == 'auto'
+00030460: 2065 6c73 6520 6672 6f6d 5f6c 616e 6775   else from_langu
+00030470: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
+00030480: 2020 2774 6172 6765 7427 3a20 746f 5f6c    'target': to_l
+00030490: 616e 6775 6167 652c 0d0a 2020 2020 2020  anguage,..      
+000304a0: 2020 2020 2020 2774 7327 3a20 7469 6d65        'ts': time
+000304b0: 7374 616d 702c 0d0a 2020 2020 2020 2020  stamp,..        
+000304c0: 2020 2020 2776 6572 6966 7927 3a20 6861      'verify': ha
+000304d0: 7368 6c69 622e 6d64 3528 6627 7765 626b  shlib.md5(f'webk
+000304e0: 6579 5f45 3373 5475 4d6a 7050 384a 657a  ey_E3sTuMjpP8Jez
+000304f0: 3439 4763 5970 4456 4837 7223 7b74 696d  49GcYpDVH7r#{tim
+00030500: 6573 7461 6d70 7d23 7b71 7565 7279 5f74  estamp}#{query_t
+00030510: 6578 747d 272e 656e 636f 6465 2829 292e  ext}'.encode()).
+00030520: 6865 7864 6967 6573 7428 292c 0d0a 2020  hexdigest(),..  
+00030530: 2020 2020 2020 2020 2020 2768 696e 7473            'hints
+00030540: 273a 2027 272c 0d0a 2020 2020 2020 2020  ': '',..        
+00030550: 2020 2020 276d 756c 7469 6c69 6e65 273a      'multiline':
+00030560: 2027 7472 7565 272c 0d0a 2020 2020 2020   'true',..      
+00030570: 2020 7d0d 0a20 2020 2020 2020 2072 203d    }..        r =
+00030580: 2073 656c 662e 7365 7373 696f 6e2e 706f   self.session.po
+00030590: 7374 2873 656c 662e 6170 695f 7572 6c2c  st(self.api_url,
+000305a0: 206a 736f 6e3d 7061 796c 6f61 642c 2068   json=payload, h
+000305b0: 6561 6465 7273 3d73 656c 662e 6170 695f  eaders=self.api_
+000305c0: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
+000305d0: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
+000305e0: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
+000305f0: 2020 2020 722e 7261 6973 655f 666f 725f      r.raise_for_
+00030600: 7374 6174 7573 2829 0d0a 2020 2020 2020  status()..      
+00030610: 2020 6461 7461 203d 2072 2e6a 736f 6e28    data = r.json(
+00030620: 290d 0a20 2020 2020 2020 2074 696d 652e  )..        time.
+00030630: 736c 6565 7028 736c 6565 705f 7365 636f  sleep(sleep_seco
+00030640: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
+00030650: 6c66 2e71 7565 7279 5f63 6f75 6e74 202b  lf.query_count +
+00030660: 3d20 310d 0a20 2020 2020 2020 2072 6574  = 1..        ret
+00030670: 7572 6e20 6461 7461 2069 6620 6973 5f64  urn data if is_d
+00030680: 6574 6169 6c5f 7265 7375 6c74 2065 6c73  etail_result els
+00030690: 6520 6461 7461 5b27 6461 7461 275d 5b27  e data['data']['
+000306a0: 7472 616e 736c 6174 696f 6e27 5d0d 0a0d  translation']...
+000306b0: 0a0d 0a63 6c61 7373 204d 794d 656d 6f72  ...class MyMemor
+000306c0: 7928 5473 6529 3a0d 0a20 2020 2064 6566  y(Tse):..    def
+000306d0: 205f 5f69 6e69 745f 5f28 7365 6c66 293a   __init__(self):
+000306e0: 0d0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
+000306f0: 292e 5f5f 696e 6974 5f5f 2829 0d0a 2020  ).__init__()..  
+00030700: 2020 2020 2020 7365 6c66 2e62 6567 696e        self.begin
+00030710: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
+00030720: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
+00030730: 662e 686f 7374 5f75 726c 203d 2027 6874  f.host_url = 'ht
+00030740: 7470 733a 2f2f 6d79 6d65 6d6f 7279 2e74  tps://mymemory.t
+00030750: 7261 6e73 6c61 7465 642e 6e65 7427 0d0a  ranslated.net'..
+00030760: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
+00030770: 5f77 6562 5f75 726c 203d 2027 6874 7470  _web_url = 'http
+00030780: 733a 2f2f 6d79 6d65 6d6f 7279 2e74 7261  s://mymemory.tra
+00030790: 6e73 6c61 7465 642e 6e65 742f 6170 692f  nslated.net/api/
+000307a0: 616a 6178 6665 7463 6827 0d0a 2020 2020  ajaxfetch'..    
+000307b0: 2020 2020 7365 6c66 2e61 7069 5f61 7069      self.api_api
+000307c0: 5f75 726c 203d 2027 6874 7470 733a 2f2f  _url = 'https://
+000307d0: 6170 692e 6d79 6d65 6d6f 7279 2e74 7261  api.mymemory.tra
+000307e0: 6e73 6c61 7465 642e 6e65 742f 6765 7427  nslated.net/get'
+000307f0: 0d0a 2020 2020 2020 2020 7365 6c66 2e67  ..        self.g
+00030800: 6574 5f6d 6174 6563 6174 5f6c 616e 6775  et_matecat_langu
+00030810: 6167 655f 7572 6c20 3d20 2768 7474 7073  age_url = 'https
+00030820: 3a2f 2f77 7777 2e6d 6174 6563 6174 2e63  ://www.matecat.c
+00030830: 6f6d 2f61 7069 2f76 322f 6c61 6e67 7561  om/api/v2/langua
+00030840: 6765 7327 0d0a 2020 2020 2020 2020 7365  ges'..        se
+00030850: 6c66 2e68 6f73 745f 6865 6164 6572 7320  lf.host_headers 
+00030860: 3d20 7365 6c66 2e67 6574 5f68 6561 6465  = self.get_heade
+00030870: 7273 2873 656c 662e 686f 7374 5f75 726c  rs(self.host_url
+00030880: 2c20 6966 5f61 7069 3d46 616c 7365 290d  , if_api=False).
+00030890: 0a20 2020 2020 2020 2073 656c 662e 7365  .        self.se
+000308a0: 7373 696f 6e20 3d20 4e6f 6e65 0d0a 2020  ssion = None..  
+000308b0: 2020 2020 2020 7365 6c66 2e6c 616e 6775        self.langu
+000308c0: 6167 655f 6d61 7020 3d20 4e6f 6e65 0d0a  age_map = None..
+000308d0: 2020 2020 2020 2020 7365 6c66 2e6d 794d          self.myM
+000308e0: 656d 6f72 795f 6c61 6e67 7561 6765 5f6c  emory_language_l
+000308f0: 6973 7420 3d20 4e6f 6e65 0d0a 2020 2020  ist = None..    
+00030900: 2020 2020 7365 6c66 2e6d 6174 6543 6174      self.mateCat
+00030910: 5f6c 616e 6775 6167 655f 6c69 7374 203d  _language_list =
+00030920: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
+00030930: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
+00030940: 3d20 300d 0a20 2020 2020 2020 2073 656c  = 0..        sel
+00030950: 662e 6f75 7470 7574 5f7a 6820 3d20 277a  f.output_zh = 'z
+00030960: 682d 434e 270d 0a20 2020 2020 2020 2073  h-CN'..        s
+00030970: 656c 662e 696e 7075 745f 6c69 6d69 7420  elf.input_limit 
+00030980: 3d20 696e 7428 3565 3229 0d0a 2020 2020  = int(5e2)..    
+00030990: 2020 2020 7365 6c66 2e64 6566 6175 6c74      self.default
+000309a0: 5f66 726f 6d5f 6c61 6e67 7561 6765 203d  _from_language =
+000309b0: 2073 656c 662e 6f75 7470 7574 5f7a 680d   self.output_zh.
+000309c0: 0a0d 0a20 2020 2040 5473 652e 6465 6275  ...    @Tse.debu
+000309d0: 675f 6c61 6e67 7561 6765 5f6d 6170 0d0a  g_language_map..
+000309e0: 2020 2020 6465 6620 6765 745f 6c61 6e67      def get_lang
+000309f0: 7561 6765 5f6d 6170 2873 656c 662c 206d  uage_map(self, m
+00030a00: 794d 656d 6f72 795f 686f 7374 5f68 746d  yMemory_host_htm
+00030a10: 6c3a 2073 7472 2c20 6d61 7465 6361 745f  l: str, matecat_
+00030a20: 6c61 6e67 5f75 726c 3a20 7374 722c 2073  lang_url: str, s
+00030a30: 733a 2053 6573 7369 6f6e 5479 7065 2c20  s: SessionType, 
+00030a40: 6865 6164 6572 733a 2064 6963 742c 0d0a  headers: dict,..
+00030a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030a60: 2020 2020 2020 2020 2074 696d 656f 7574           timeout
+00030a70: 3a20 4f70 7469 6f6e 616c 5b66 6c6f 6174  : Optional[float
+00030a80: 5d2c 2070 726f 7869 6573 3a20 4f70 7469  ], proxies: Opti
+00030a90: 6f6e 616c 5b64 6963 745d 2c20 2a2a 6b77  onal[dict], **kw
+00030aa0: 6172 6773 3a20 4c61 6e67 4d61 704b 7761  args: LangMapKwa
+00030ab0: 7267 7354 7970 6529 202d 3e20 6469 6374  rgsType) -> dict
+00030ac0: 3a0d 0a20 2020 2020 2020 2065 7420 3d20  :..        et = 
+00030ad0: 6c78 6d6c 2e65 7472 6565 2e48 544d 4c28  lxml.etree.HTML(
+00030ae0: 6d79 4d65 6d6f 7279 5f68 6f73 745f 6874  myMemory_host_ht
+00030af0: 6d6c 290d 0a20 2020 2020 2020 206c 616e  ml)..        lan
+00030b00: 675f 6c69 7374 203d 2065 742e 7870 6174  g_list = et.xpat
+00030b10: 6828 272f 2f2a 5b40 6964 3d22 7365 6c65  h('//*[@id="sele
+00030b20: 6374 5f73 6f75 7263 655f 6d6d 225d 2f6f  ct_source_mm"]/o
+00030b30: 7074 696f 6e2f 4076 616c 7565 2729 5b32  ption/@value')[2
+00030b40: 3a5d 0d0a 2020 2020 2020 2020 7365 6c66  :]..        self
+00030b50: 2e6d 794d 656d 6f72 795f 6c61 6e67 7561  .myMemory_langua
+00030b60: 6765 5f6c 6973 7420 3d20 736f 7274 6564  ge_list = sorted
+00030b70: 286c 6973 7428 7365 7428 6c61 6e67 5f6c  (list(set(lang_l
+00030b80: 6973 7429 2929 0d0a 0d0a 2020 2020 2020  ist)))....      
+00030b90: 2020 6c61 6e67 5f64 5f6c 6973 7420 3d20    lang_d_list = 
+00030ba0: 7373 2e67 6574 286d 6174 6563 6174 5f6c  ss.get(matecat_l
+00030bb0: 616e 675f 7572 6c2c 2068 6561 6465 7273  ang_url, headers
+00030bc0: 3d68 6561 6465 7273 2c20 7469 6d65 6f75  =headers, timeou
+00030bd0: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
+00030be0: 6573 3d70 726f 7869 6573 292e 6a73 6f6e  es=proxies).json
+00030bf0: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
+00030c00: 2e6d 6174 6543 6174 5f6c 616e 6775 6167  .mateCat_languag
+00030c10: 655f 6c69 7374 203d 2073 6f72 7465 6428  e_list = sorted(
+00030c20: 6c69 7374 2873 6574 285b 6974 656d 5b27  list(set([item['
+00030c30: 636f 6465 275d 2066 6f72 2069 7465 6d20  code'] for item 
+00030c40: 696e 206c 616e 675f 645f 6c69 7374 5d29  in lang_d_list])
+00030c50: 2929 0d0a 0d0a 2020 2020 2020 2020 6c61  ))....        la
+00030c60: 6e67 5f6c 6973 7420 3d20 736f 7274 6564  ng_list = sorted
+00030c70: 286c 6973 7428 7365 7428 7365 6c66 2e6d  (list(set(self.m
+00030c80: 794d 656d 6f72 795f 6c61 6e67 7561 6765  yMemory_language
+00030c90: 5f6c 6973 7420 2b20 7365 6c66 2e6d 6174  _list + self.mat
+00030ca0: 6543 6174 5f6c 616e 6775 6167 655f 6c69  eCat_language_li
+00030cb0: 7374 2929 290d 0a20 2020 2020 2020 2072  st)))..        r
+00030cc0: 6574 7572 6e20 7b7d 2e66 726f 6d6b 6579  eturn {}.fromkey
+00030cd0: 7328 6c61 6e67 5f6c 6973 742c 206c 616e  s(lang_list, lan
+00030ce0: 675f 6c69 7374 290d 0a0d 0a20 2020 2040  g_list)....    @
+00030cf0: 5473 652e 7469 6d65 5f73 7461 740d 0a20  Tse.time_stat.. 
+00030d00: 2020 2040 5473 652e 6368 6563 6b5f 7175     @Tse.check_qu
+00030d10: 6572 790d 0a20 2020 2064 6566 206d 794d  ery..    def myM
+00030d20: 656d 6f72 795f 6170 6928 7365 6c66 2c20  emory_api(self, 
+00030d30: 7175 6572 795f 7465 7874 3a20 7374 722c  query_text: str,
+00030d40: 2066 726f 6d5f 6c61 6e67 7561 6765 3a20   from_language: 
+00030d50: 7374 7220 3d20 2761 7574 6f27 2c20 746f  str = 'auto', to
+00030d60: 5f6c 616e 6775 6167 653a 2073 7472 203d  _language: str =
+00030d70: 2027 656e 272c 202a 2a6b 7761 7267 733a   'en', **kwargs:
+00030d80: 2041 7069 4b77 6172 6773 5479 7065 2920   ApiKwargsType) 
+00030d90: 2d3e 2055 6e69 6f6e 5b73 7472 2c20 6469  -> Union[str, di
+00030da0: 6374 5d3a 0d0a 2020 2020 2020 2020 2222  ct]:..        ""
+00030db0: 220d 0a20 2020 2020 2020 2068 7474 7073  "..        https
+00030dc0: 3a2f 2f6d 796d 656d 6f72 792e 7472 616e  ://mymemory.tran
+00030dd0: 736c 6174 6564 2e6e 6574 0d0a 2020 2020  slated.net..    
+00030de0: 2020 2020 3a70 6172 616d 2071 7565 7279      :param query
+00030df0: 5f74 6578 743a 2073 7472 2c20 6d75 7374  _text: str, must
+00030e00: 2e0d 0a20 2020 2020 2020 203a 7061 7261  ...        :para
+00030e10: 6d20 6672 6f6d 5f6c 616e 6775 6167 653a  m from_language:
+00030e20: 2073 7472 2c20 6465 6661 756c 7420 2761   str, default 'a
+00030e30: 7574 6f27 2e0d 0a20 2020 2020 2020 203a  uto'...        :
+00030e40: 7061 7261 6d20 746f 5f6c 616e 6775 6167  param to_languag
+00030e50: 653a 2073 7472 2c20 6465 6661 756c 7420  e: str, default 
+00030e60: 2765 6e27 2e0d 0a20 2020 2020 2020 203a  'en'...        :
+00030e70: 7061 7261 6d20 2a2a 6b77 6172 6773 3a0d  param **kwargs:.
+00030e80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00030e90: 203a 7061 7261 6d20 7469 6d65 6f75 743a   :param timeout:
+00030ea0: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
+00030eb0: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
+00030ec0: 2020 2020 2020 203a 7061 7261 6d20 7072         :param pr
+00030ed0: 6f78 6965 733a 2064 6963 742c 2064 6566  oxies: dict, def
+00030ee0: 6175 6c74 204e 6f6e 652e 0d0a 2020 2020  ault None...    
+00030ef0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00030f00: 616d 2073 6c65 6570 5f73 6563 6f6e 6473  am sleep_seconds
+00030f10: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
+00030f20: 2030 2e0d 0a20 2020 2020 2020 2020 2020   0...           
+00030f30: 2020 2020 203a 7061 7261 6d20 6973 5f64       :param is_d
+00030f40: 6574 6169 6c5f 7265 7375 6c74 3a20 626f  etail_result: bo
+00030f50: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
+00030f60: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+00030f70: 2020 2020 3a70 6172 616d 2069 665f 6967      :param if_ig
+00030f80: 6e6f 7265 5f6c 696d 6974 5f6f 665f 6c65  nore_limit_of_le
+00030f90: 6e67 7468 3a20 626f 6f6c 2c20 6465 6661  ngth: bool, defa
+00030fa0: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+00030fb0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00030fc0: 616d 206c 696d 6974 5f6f 665f 6c65 6e67  am limit_of_leng
+00030fd0: 7468 3a20 696e 742c 2064 6566 6175 6c74  th: int, default
+00030fe0: 2032 3030 3030 2e0d 0a20 2020 2020 2020   20000...       
+00030ff0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+00031000: 6966 5f69 676e 6f72 655f 656d 7074 795f  if_ignore_empty_
+00031010: 7175 6572 793a 2062 6f6f 6c2c 2064 6566  query: bool, def
+00031020: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
+00031030: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00031040: 7261 6d20 7570 6461 7465 5f73 6573 7369  ram update_sessi
+00031050: 6f6e 5f61 6674 6572 5f66 7265 713a 2069  on_after_freq: i
+00031060: 6e74 2c20 6465 6661 756c 7420 3130 3030  nt, default 1000
+00031070: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00031080: 2020 203a 7061 7261 6d20 7570 6461 7465     :param update
+00031090: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
+000310a0: 6563 6f6e 6473 3a20 666c 6f61 742c 2064  econds: float, d
+000310b0: 6566 6175 6c74 2031 3530 302e 0d0a 2020  efault 1500...  
+000310c0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+000310d0: 6172 616d 2069 665f 7368 6f77 5f74 696d  aram if_show_tim
+000310e0: 655f 7374 6174 3a20 626f 6f6c 2c20 6465  e_stat: bool, de
+000310f0: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
+00031100: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+00031110: 6172 616d 2073 686f 775f 7469 6d65 5f73  aram show_time_s
+00031120: 7461 745f 7072 6563 6973 696f 6e3a 2069  tat_precision: i
+00031130: 6e74 2c20 6465 6661 756c 7420 322e 0d0a  nt, default 2...
+00031140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031150: 3a70 6172 616d 2069 665f 7072 696e 745f  :param if_print_
+00031160: 7761 726e 696e 673a 2062 6f6f 6c2c 2064  warning: bool, d
+00031170: 6566 6175 6c74 2054 7275 652e 0d0a 2020  efault True...  
+00031180: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+00031190: 6172 616d 206d 794d 656d 6f72 795f 6d6f  aram myMemory_mo
+000311a0: 6465 3a20 7374 722c 2064 6566 6175 6c74  de: str, default
+000311b0: 2022 7765 6222 2c20 6368 6f6f 7365 2066   "web", choose f
+000311c0: 726f 6d20 2822 7765 6222 2c20 2261 7069  rom ("web", "api
+000311d0: 2229 2e0d 0a20 2020 2020 2020 203a 7265  ")...        :re
+000311e0: 7475 726e 3a20 7374 7220 6f72 2064 6963  turn: str or dic
+000311f0: 740d 0a20 2020 2020 2020 2022 2222 0d0a  t..        """..
+00031200: 0d0a 2020 2020 2020 2020 6d6f 6465 203d  ..        mode =
+00031210: 206b 7761 7267 732e 6765 7428 276d 794d   kwargs.get('myM
+00031220: 656d 6f72 795f 6d6f 6465 272c 2027 7765  emory_mode', 'we
+00031230: 6227 290d 0a20 2020 2020 2020 2074 696d  b')..        tim
+00031240: 656f 7574 203d 206b 7761 7267 732e 6765  eout = kwargs.ge
+00031250: 7428 2774 696d 656f 7574 272c 204e 6f6e  t('timeout', Non
+00031260: 6529 0d0a 2020 2020 2020 2020 7072 6f78  e)..        prox
+00031270: 6965 7320 3d20 6b77 6172 6773 2e67 6574  ies = kwargs.get
+00031280: 2827 7072 6f78 6965 7327 2c20 4e6f 6e65  ('proxies', None
+00031290: 290d 0a20 2020 2020 2020 2073 6c65 6570  )..        sleep
+000312a0: 5f73 6563 6f6e 6473 203d 206b 7761 7267  _seconds = kwarg
+000312b0: 732e 6765 7428 2773 6c65 6570 5f73 6563  s.get('sleep_sec
+000312c0: 6f6e 6473 272c 2030 290d 0a20 2020 2020  onds', 0)..     
+000312d0: 2020 2069 665f 7072 696e 745f 7761 726e     if_print_warn
+000312e0: 696e 6720 3d20 6b77 6172 6773 2e67 6574  ing = kwargs.get
+000312f0: 2827 6966 5f70 7269 6e74 5f77 6172 6e69  ('if_print_warni
+00031300: 6e67 272c 2054 7275 6529 0d0a 2020 2020  ng', True)..    
+00031310: 2020 2020 6973 5f64 6574 6169 6c5f 7265      is_detail_re
+00031320: 7375 6c74 203d 206b 7761 7267 732e 6765  sult = kwargs.ge
+00031330: 7428 2769 735f 6465 7461 696c 5f72 6573  t('is_detail_res
+00031340: 756c 7427 2c20 4661 6c73 6529 0d0a 2020  ult', False)..  
+00031350: 2020 2020 2020 7570 6461 7465 5f73 6573        update_ses
+00031360: 7369 6f6e 5f61 6674 6572 5f66 7265 7120  sion_after_freq 
+00031370: 3d20 6b77 6172 6773 2e67 6574 2827 7570  = kwargs.get('up
+00031380: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+00031390: 6572 5f66 7265 7127 2c20 7365 6c66 2e64  er_freq', self.d
+000313a0: 6566 6175 6c74 5f73 6573 7369 6f6e 5f66  efault_session_f
+000313b0: 7265 7129 0d0a 2020 2020 2020 2020 7570  req)..        up
+000313c0: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+000313d0: 6572 5f73 6563 6f6e 6473 203d 206b 7761  er_seconds = kwa
+000313e0: 7267 732e 6765 7428 2775 7064 6174 655f  rgs.get('update_
+000313f0: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
+00031400: 636f 6e64 7327 2c20 7365 6c66 2e64 6566  conds', self.def
+00031410: 6175 6c74 5f73 6573 7369 6f6e 5f73 6563  ault_session_sec
+00031420: 6f6e 6473 290d 0a20 2020 2020 2020 2073  onds)..        s
+00031430: 656c 662e 6368 6563 6b5f 696e 7075 745f  elf.check_input_
+00031440: 6c69 6d69 7428 7175 6572 795f 7465 7874  limit(query_text
+00031450: 2c20 7365 6c66 2e69 6e70 7574 5f6c 696d  , self.input_lim
+00031460: 6974 290d 0a0d 0a20 2020 2020 2020 206e  it)....        n
+00031470: 6f74 5f75 7064 6174 655f 636f 6e64 5f66  ot_update_cond_f
+00031480: 7265 7120 3d20 3120 6966 2073 656c 662e  req = 1 if self.
+00031490: 7175 6572 795f 636f 756e 7420 2520 7570  query_count % up
+000314a0: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+000314b0: 6572 5f66 7265 7120 213d 2030 2065 6c73  er_freq != 0 els
+000314c0: 6520 300d 0a20 2020 2020 2020 206e 6f74  e 0..        not
+000314d0: 5f75 7064 6174 655f 636f 6e64 5f74 696d  _update_cond_tim
+000314e0: 6520 3d20 3120 6966 2074 696d 652e 7469  e = 1 if time.ti
+000314f0: 6d65 2829 202d 2073 656c 662e 6265 6769  me() - self.begi
+00031500: 6e5f 7469 6d65 203c 2075 7064 6174 655f  n_time < update_
+00031510: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
+00031520: 636f 6e64 7320 656c 7365 2030 0d0a 2020  conds else 0..  
+00031530: 2020 2020 2020 6966 206e 6f74 2028 7365        if not (se
+00031540: 6c66 2e73 6573 7369 6f6e 2061 6e64 2073  lf.session and s
+00031550: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
+00031560: 2061 6e64 206e 6f74 5f75 7064 6174 655f   and not_update_
+00031570: 636f 6e64 5f66 7265 7120 616e 6420 6e6f  cond_freq and no
+00031580: 745f 7570 6461 7465 5f63 6f6e 645f 7469  t_update_cond_ti
+00031590: 6d65 293a 0d0a 2020 2020 2020 2020 2020  me):..          
+000315a0: 2020 7365 6c66 2e62 6567 696e 5f74 696d    self.begin_tim
+000315b0: 6520 3d20 7469 6d65 2e74 696d 6528 290d  e = time.time().
+000315c0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+000315d0: 662e 7365 7373 696f 6e20 3d20 7265 7175  f.session = requ
+000315e0: 6573 7473 2e53 6573 7369 6f6e 2829 0d0a  ests.Session()..
+000315f0: 2020 2020 2020 2020 2020 2020 686f 7374              host
+00031600: 5f68 746d 6c20 3d20 7365 6c66 2e73 6573  _html = self.ses
+00031610: 7369 6f6e 2e67 6574 2873 656c 662e 686f  sion.get(self.ho
+00031620: 7374 5f75 726c 2c20 6865 6164 6572 733d  st_url, headers=
+00031630: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
+00031640: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
+00031650: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
+00031660: 6965 7329 2e74 6578 740d 0a20 2020 2020  ies).text..     
+00031670: 2020 2020 2020 2064 6562 7567 5f6c 616e         debug_lan
+00031680: 675f 6b77 6172 6773 203d 2073 656c 662e  g_kwargs = self.
+00031690: 6465 6275 675f 6c61 6e67 5f6b 7761 7267  debug_lang_kwarg
+000316a0: 7328 6672 6f6d 5f6c 616e 6775 6167 652c  s(from_language,
+000316b0: 2074 6f5f 6c61 6e67 7561 6765 2c20 7365   to_language, se
+000316c0: 6c66 2e64 6566 6175 6c74 5f66 726f 6d5f  lf.default_from_
+000316d0: 6c61 6e67 7561 6765 2c20 6966 5f70 7269  language, if_pri
+000316e0: 6e74 5f77 6172 6e69 6e67 290d 0a20 2020  nt_warning)..   
+000316f0: 2020 2020 2020 2020 2073 656c 662e 6c61           self.la
+00031700: 6e67 7561 6765 5f6d 6170 203d 2073 656c  nguage_map = sel
+00031710: 662e 6765 745f 6c61 6e67 7561 6765 5f6d  f.get_language_m
+00031720: 6170 2868 6f73 745f 6874 6d6c 2c20 7365  ap(host_html, se
+00031730: 6c66 2e67 6574 5f6d 6174 6563 6174 5f6c  lf.get_matecat_l
+00031740: 616e 6775 6167 655f 7572 6c2c 2073 656c  anguage_url, sel
+00031750: 662e 7365 7373 696f 6e2c 0d0a 2020 2020  f.session,..    
+00031760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031790: 2020 7365 6c66 2e68 6f73 745f 6865 6164    self.host_head
+000317a0: 6572 732c 2074 696d 656f 7574 2c20 7072  ers, timeout, pr
+000317b0: 6f78 6965 732c 202a 2a64 6562 7567 5f6c  oxies, **debug_l
+000317c0: 616e 675f 6b77 6172 6773 290d 0a0d 0a20  ang_kwargs).... 
+000317d0: 2020 2020 2020 2069 6620 6672 6f6d 5f6c         if from_l
+000317e0: 616e 6775 6167 6520 3d3d 2027 6175 746f  anguage == 'auto
+000317f0: 273a 0d0a 2020 2020 2020 2020 2020 2020  ':..            
+00031800: 6672 6f6d 5f6c 616e 6775 6167 6520 3d20  from_language = 
+00031810: 7365 6c66 2e77 6172 6e69 6e67 5f61 7574  self.warning_aut
+00031820: 6f5f 6c61 6e67 2827 6d79 4d65 6d6f 7279  o_lang('myMemory
+00031830: 272c 2073 656c 662e 6465 6661 756c 745f  ', self.default_
+00031840: 6672 6f6d 5f6c 616e 6775 6167 652c 2069  from_language, i
+00031850: 665f 7072 696e 745f 7761 726e 696e 6729  f_print_warning)
+00031860: 0d0a 2020 2020 2020 2020 6672 6f6d 5f6c  ..        from_l
+00031870: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
+00031880: 7561 6765 203d 2073 656c 662e 6368 6563  uage = self.chec
+00031890: 6b5f 6c61 6e67 7561 6765 2866 726f 6d5f  k_language(from_
+000318a0: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
+000318b0: 6775 6167 652c 2073 656c 662e 6c61 6e67  guage, self.lang
+000318c0: 7561 6765 5f6d 6170 2c20 6f75 7470 7574  uage_map, output
+000318d0: 5f7a 683d 7365 6c66 2e6f 7574 7075 745f  _zh=self.output_
+000318e0: 7a68 2c0d 0a20 2020 2020 2020 2020 2020  zh,..           
+000318f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031910: 2020 2020 2020 2020 2020 2020 2020 6f75                ou
+00031920: 7470 7574 5f65 6e5f 7472 616e 736c 6174  tput_en_translat
+00031930: 6f72 3d27 6d79 4d65 6d6f 7279 272c 206f  or='myMemory', o
+00031940: 7574 7075 745f 656e 3d27 656e 2d47 4227  utput_en='en-GB'
+00031950: 290d 0a0d 0a20 2020 2020 2020 2070 6172  )....        par
+00031960: 616d 7320 3d20 7b0d 0a20 2020 2020 2020  ams = {..       
+00031970: 2020 2020 2027 7127 3a20 7175 6572 795f       'q': query_
+00031980: 7465 7874 2c0d 0a20 2020 2020 2020 2020  text,..         
+00031990: 2020 2027 6c61 6e67 7061 6972 273a 2066     'langpair': f
+000319a0: 277b 6672 6f6d 5f6c 616e 6775 6167 657d  '{from_language}
+000319b0: 7c7b 746f 5f6c 616e 6775 6167 657d 270d  |{to_language}'.
+000319c0: 0a20 2020 2020 2020 207d 0d0a 2020 2020  .        }..    
+000319d0: 2020 2020 7061 7261 6d73 203d 2070 6172      params = par
+000319e0: 616d 7320 6966 206d 6f64 6520 3d3d 2027  ams if mode == '
+000319f0: 6170 6927 2065 6c73 6520 7b2a 2a70 6172  api' else {**par
+00031a00: 616d 732c 202a 2a7b 276d 746f 6e6c 7927  ams, **{'mtonly'
+00031a10: 3a20 317d 7d0d 0a20 2020 2020 2020 2061  : 1}}..        a
+00031a20: 7069 5f75 726c 203d 2073 656c 662e 6170  pi_url = self.ap
+00031a30: 695f 6170 695f 7572 6c20 6966 206d 6f64  i_api_url if mod
+00031a40: 6520 3d3d 2027 6170 6927 2065 6c73 6520  e == 'api' else 
+00031a50: 7365 6c66 2e61 7069 5f77 6562 5f75 726c  self.api_web_url
+00031a60: 0d0a 0d0a 2020 2020 2020 2020 7220 3d20  ....        r = 
+00031a70: 7365 6c66 2e73 6573 7369 6f6e 2e67 6574  self.session.get
+00031a80: 2861 7069 5f75 726c 2c20 7061 7261 6d73  (api_url, params
+00031a90: 3d70 6172 616d 732c 2068 6561 6465 7273  =params, headers
+00031aa0: 3d73 656c 662e 686f 7374 5f68 6561 6465  =self.host_heade
+00031ab0: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
+00031ac0: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
+00031ad0: 7869 6573 290d 0a20 2020 2020 2020 2072  xies)..        r
+00031ae0: 2e72 6169 7365 5f66 6f72 5f73 7461 7475  .raise_for_statu
+00031af0: 7328 290d 0a20 2020 2020 2020 2064 6174  s()..        dat
+00031b00: 6120 3d20 722e 6a73 6f6e 2829 0d0a 2020  a = r.json()..  
+00031b10: 2020 2020 2020 7469 6d65 2e73 6c65 6570        time.sleep
+00031b20: 2873 6c65 6570 5f73 6563 6f6e 6473 290d  (sleep_seconds).
+00031b30: 0a20 2020 2020 2020 2073 656c 662e 7175  .        self.qu
+00031b40: 6572 795f 636f 756e 7420 2b3d 2031 0d0a  ery_count += 1..
+00031b50: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+00031b60: 6174 6120 6966 2069 735f 6465 7461 696c  ata if is_detail
+00031b70: 5f72 6573 756c 7420 656c 7365 2064 6174  _result else dat
+00031b80: 615b 2772 6573 706f 6e73 6544 6174 6127  a['responseData'
+00031b90: 5d5b 2774 7261 6e73 6c61 7465 6454 6578  ]['translatedTex
+00031ba0: 7427 5d0d 0a0d 0a0d 0a63 6c61 7373 204d  t']......class M
+00031bb0: 6972 6169 2854 7365 293a 0d0a 2020 2020  irai(Tse):..    
+00031bc0: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+00031bd0: 6629 3a0d 0a20 2020 2020 2020 2073 7570  f):..        sup
+00031be0: 6572 2829 2e5f 5f69 6e69 745f 5f28 290d  er().__init__().
+00031bf0: 0a20 2020 2020 2020 2073 656c 662e 6265  .        self.be
+00031c00: 6769 6e5f 7469 6d65 203d 2074 696d 652e  gin_time = time.
+00031c10: 7469 6d65 2829 0d0a 2020 2020 2020 2020  time()..        
+00031c20: 7365 6c66 2e68 6f6d 655f 7572 6c20 3d20  self.home_url = 
+00031c30: 2768 7474 7073 3a2f 2f6d 6972 6169 7472  'https://miraitr
+00031c40: 616e 736c 6174 652e 636f 6d27 0d0a 2020  anslate.com'..  
+00031c50: 2020 2020 2020 7365 6c66 2e68 6f73 745f        self.host_
+00031c60: 7572 6c20 3d20 2768 7474 7073 3a2f 2f6d  url = 'https://m
+00031c70: 6972 6169 7472 616e 736c 6174 652e 636f  iraitranslate.co
+00031c80: 6d2f 7472 6961 6c2f 270d 0a20 2020 2020  m/trial/'..     
+00031c90: 2020 2073 656c 662e 6170 695f 7572 6c20     self.api_url 
+00031ca0: 3d20 2768 7474 7073 3a2f 2f74 7269 616c  = 'https://trial
+00031cb0: 2e6d 6972 6169 7472 616e 736c 6174 652e  .miraitranslate.
+00031cc0: 636f 6d2f 7472 6961 6c2f 6170 692f 7472  com/trial/api/tr
+00031cd0: 616e 736c 6174 652e 7068 7027 0d0a 2020  anslate.php'..  
+00031ce0: 2020 2020 2020 7365 6c66 2e6c 616e 675f        self.lang_
+00031cf0: 7572 6c20 3d20 4e6f 6e65 0d0a 2020 2020  url = None..    
+00031d00: 2020 2020 7365 6c66 2e6c 616e 675f 7572      self.lang_ur
+00031d10: 6c5f 7061 7474 6572 6e20 3d20 276d 6169  l_pattern = 'mai
+00031d20: 6e2d 6573 3230 3135 2e28 2e2a 3f29 2e6a  n-es2015.(.*?).j
+00031d30: 7327 0d0a 2020 2020 2020 2020 7365 6c66  s'..        self
+00031d40: 2e64 6574 6563 745f 6c61 6e67 5f75 726c  .detect_lang_url
+00031d50: 203d 2027 6874 7470 733a 2f2f 7472 6961   = 'https://tria
+00031d60: 6c2e 6d69 7261 6974 7261 6e73 6c61 7465  l.miraitranslate
+00031d70: 2e63 6f6d 2f74 7269 616c 2f61 7069 2f64  .com/trial/api/d
+00031d80: 6574 6563 745f 6c61 6e67 2e70 6870 270d  etect_lang.php'.
+00031d90: 0a20 2020 2020 2020 2073 656c 662e 7472  .        self.tr
+00031da0: 6163 655f 7572 6c20 3d20 2768 7474 7073  ace_url = 'https
+00031db0: 3a2f 2f74 7269 616c 2e6d 6972 6169 7472  ://trial.miraitr
+00031dc0: 616e 736c 6174 652e 636f 6d2f 7472 6961  anslate.com/tria
+00031dd0: 6c2f 6170 692f 7472 6163 652e 7068 7027  l/api/trace.php'
+00031de0: 0d0a 2020 2020 2020 2020 7365 6c66 2e68  ..        self.h
+00031df0: 6f73 745f 6865 6164 6572 7320 3d20 7365  ost_headers = se
+00031e00: 6c66 2e67 6574 5f68 6561 6465 7273 2873  lf.get_headers(s
+00031e10: 656c 662e 686f 6d65 5f75 726c 2c20 6966  elf.home_url, if
+00031e20: 5f61 7069 3d46 616c 7365 290d 0a20 2020  _api=False)..   
+00031e30: 2020 2020 2073 656c 662e 6170 695f 6a73       self.api_js
+00031e40: 6f6e 5f68 6561 6465 7273 203d 2073 656c  on_headers = sel
 00031e50: 662e 6765 745f 6865 6164 6572 7328 7365  f.get_headers(se
 00031e60: 6c66 2e68 6f6d 655f 7572 6c2c 2069 665f  lf.home_url, if_
-00031e70: 6170 693d 4661 6c73 6529 0d0a 2020 2020  api=False)..    
-00031e80: 2020 2020 7365 6c66 2e61 7069 5f6a 736f      self.api_jso
-00031e90: 6e5f 6865 6164 6572 7320 3d20 7365 6c66  n_headers = self
-00031ea0: 2e67 6574 5f68 6561 6465 7273 2873 656c  .get_headers(sel
-00031eb0: 662e 686f 6d65 5f75 726c 2c20 6966 5f61  f.home_url, if_a
-00031ec0: 7069 3d54 7275 652c 2069 665f 6a73 6f6e  pi=True, if_json
-00031ed0: 5f66 6f72 5f61 7069 3d54 7275 6529 0d0a  _for_api=True)..
-00031ee0: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
-00031ef0: 5f74 6578 745f 6865 6164 6572 7320 3d20  _text_headers = 
-00031f00: 7365 6c66 2e67 6574 5f68 6561 6465 7273  self.get_headers
-00031f10: 2873 656c 662e 686f 6d65 5f75 726c 2c20  (self.home_url, 
-00031f20: 6966 5f61 7069 3d54 7275 652c 2069 665f  if_api=True, if_
-00031f30: 616a 6178 5f66 6f72 5f61 7069 3d46 616c  ajax_for_api=Fal
-00031f40: 7365 290d 0a20 2020 2020 2020 2073 656c  se)..        sel
-00031f50: 662e 7365 7373 696f 6e20 3d20 4e6f 6e65  f.session = None
-00031f60: 0d0a 2020 2020 2020 2020 7365 6c66 2e6c  ..        self.l
-00031f70: 616e 6775 6167 655f 6d61 7020 3d20 4e6f  anguage_map = No
-00031f80: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
-00031f90: 2e74 7261 6e5f 6b65 7920 3d20 4e6f 6e65  .tran_key = None
-00031fa0: 0d0a 2020 2020 2020 2020 7365 6c66 2e74  ..        self.t
-00031fb0: 7261 6e73 5f69 6420 3d20 7374 7228 7575  rans_id = str(uu
-00031fc0: 6964 2e75 7569 6434 2829 290d 0a20 2020  id.uuid4())..   
-00031fd0: 2020 2020 2073 656c 662e 7573 6572 5f69       self.user_i
-00031fe0: 6420 3d20 7374 7228 7575 6964 2e75 7569  d = str(uuid.uui
-00031ff0: 6434 2829 290d 0a20 2020 2020 2020 2073  d4())..        s
-00032000: 656c 662e 6c61 6e67 5f7a 685f 6d61 7020  elf.lang_zh_map 
-00032010: 3d20 7b27 7a68 2d43 4e27 3a20 277a 6827  = {'zh-CN': 'zh'
-00032020: 2c20 277a 682d 5457 273a 2027 7a74 277d  , 'zh-TW': 'zt'}
-00032030: 0d0a 2020 2020 2020 2020 7365 6c66 2e71  ..        self.q
-00032040: 7565 7279 5f63 6f75 6e74 203d 2030 0d0a  uery_count = 0..
-00032050: 2020 2020 2020 2020 7365 6c66 2e6f 7574          self.out
-00032060: 7075 745f 7a68 203d 2027 7a68 270d 0a20  put_zh = 'zh'.. 
-00032070: 2020 2020 2020 2073 656c 662e 696e 7075         self.inpu
-00032080: 745f 6c69 6d69 7420 3d20 696e 7428 3265  t_limit = int(2e
-00032090: 3329 0d0a 2020 2020 2020 2020 7365 6c66  3)..        self
-000320a0: 2e64 6566 6175 6c74 5f66 726f 6d5f 6c61  .default_from_la
-000320b0: 6e67 7561 6765 203d 2073 656c 662e 6f75  nguage = self.ou
-000320c0: 7470 7574 5f7a 680d 0a0d 0a20 2020 2040  tput_zh....    @
-000320d0: 5473 652e 6465 6275 675f 6c61 6e67 7561  Tse.debug_langua
-000320e0: 6765 5f6d 6170 0d0a 2020 2020 6465 6620  ge_map..    def 
-000320f0: 6765 745f 6c61 6e67 7561 6765 5f6d 6170  get_language_map
-00032100: 2873 656c 662c 206c 616e 675f 7572 6c3a  (self, lang_url:
-00032110: 2073 7472 2c20 7373 3a20 5365 7373 696f   str, ss: Sessio
-00032120: 6e54 7970 652c 2068 6561 6465 7273 3a20  nType, headers: 
-00032130: 6469 6374 2c20 7469 6d65 6f75 743a 204f  dict, timeout: O
-00032140: 7074 696f 6e61 6c5b 666c 6f61 745d 2c20  ptional[float], 
-00032150: 7072 6f78 6965 733a 204f 7074 696f 6e61  proxies: Optiona
-00032160: 6c5b 6469 6374 5d2c 202a 2a6b 7761 7267  l[dict], **kwarg
-00032170: 733a 204c 616e 674d 6170 4b77 6172 6773  s: LangMapKwargs
-00032180: 5479 7065 2920 2d3e 2064 6963 743a 0d0a  Type) -> dict:..
-00032190: 2020 2020 2020 2020 6a73 5f68 746d 6c20          js_html 
-000321a0: 3d20 7373 2e67 6574 286c 616e 675f 7572  = ss.get(lang_ur
-000321b0: 6c2c 2068 6561 6465 7273 3d68 6561 6465  l, headers=heade
-000321c0: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
-000321d0: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
-000321e0: 7869 6573 292e 7465 7874 0d0a 2020 2020  xies).text..    
-000321f0: 2020 2020 6c61 6e67 5f70 6169 7273 203d      lang_pairs =
-00032200: 2072 652e 636f 6d70 696c 6528 2722 2f74   re.compile('"/t
-00032210: 7269 616c 2f28 5c5c 777b 327d 292f 285c  rial/(\\w{2})/(\
-00032220: 5c77 7b32 7d29 2227 292e 6669 6e64 616c  \w{2})"').findal
-00032230: 6c28 6a73 5f68 746d 6c29 0d0a 2020 2020  l(js_html)..    
-00032240: 2020 2020 7265 7475 726e 207b 665f 6c61      return {f_la
-00032250: 6e67 3a20 5b76 2066 6f72 206b 2c20 7620  ng: [v for k, v 
-00032260: 696e 206c 616e 675f 7061 6972 7320 6966  in lang_pairs if
-00032270: 206b 203d 3d20 665f 6c61 6e67 5d20 666f   k == f_lang] fo
-00032280: 7220 665f 6c61 6e67 2c20 745f 6c61 6e67  r f_lang, t_lang
-00032290: 2069 6e20 6c61 6e67 5f70 6169 7273 7d0d   in lang_pairs}.
-000322a0: 0a0d 0a20 2020 2040 5473 652e 756e 6365  ...    @Tse.unce
-000322b0: 7274 6966 6965 640d 0a20 2020 2040 5473  rtified..    @Ts
-000322c0: 652e 7469 6d65 5f73 7461 740d 0a20 2020  e.time_stat..   
-000322d0: 2040 5473 652e 6368 6563 6b5f 7175 6572   @Tse.check_quer
-000322e0: 790d 0a20 2020 2064 6566 206d 6972 6169  y..    def mirai
-000322f0: 5f61 7069 2873 656c 662c 2071 7565 7279  _api(self, query
-00032300: 5f74 6578 743a 2073 7472 2c20 6672 6f6d  _text: str, from
-00032310: 5f6c 616e 6775 6167 653a 2073 7472 203d  _language: str =
-00032320: 2027 6175 746f 272c 2074 6f5f 6c61 6e67   'auto', to_lang
-00032330: 7561 6765 3a20 7374 7220 3d20 276a 6127  uage: str = 'ja'
-00032340: 2c20 2a2a 6b77 6172 6773 3a20 4170 694b  , **kwargs: ApiK
-00032350: 7761 7267 7354 7970 6529 202d 3e20 556e  wargsType) -> Un
-00032360: 696f 6e5b 7374 722c 2064 6963 745d 3a0d  ion[str, dict]:.
-00032370: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00032380: 2020 2020 2020 6874 7470 733a 2f2f 6d69        https://mi
-00032390: 7261 6974 7261 6e73 6c61 7465 2e63 6f6d  raitranslate.com
-000323a0: 2f65 6e2f 7472 6961 6c2f 0d0a 2020 2020  /en/trial/..    
-000323b0: 2020 2020 3a70 6172 616d 2071 7565 7279      :param query
-000323c0: 5f74 6578 743a 2073 7472 2c20 6d75 7374  _text: str, must
-000323d0: 2e0d 0a20 2020 2020 2020 203a 7061 7261  ...        :para
-000323e0: 6d20 6672 6f6d 5f6c 616e 6775 6167 653a  m from_language:
-000323f0: 2073 7472 2c20 6465 6661 756c 7420 2761   str, default 'a
-00032400: 7574 6f27 2e0d 0a20 2020 2020 2020 203a  uto'...        :
-00032410: 7061 7261 6d20 746f 5f6c 616e 6775 6167  param to_languag
-00032420: 653a 2073 7472 2c20 6465 6661 756c 7420  e: str, default 
-00032430: 276a 6127 2e0d 0a20 2020 2020 2020 203a  'ja'...        :
-00032440: 7061 7261 6d20 2a2a 6b77 6172 6773 3a0d  param **kwargs:.
-00032450: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032460: 203a 7061 7261 6d20 7469 6d65 6f75 743a   :param timeout:
-00032470: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
-00032480: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
-00032490: 2020 2020 2020 203a 7061 7261 6d20 7072         :param pr
-000324a0: 6f78 6965 733a 2064 6963 742c 2064 6566  oxies: dict, def
-000324b0: 6175 6c74 204e 6f6e 652e 0d0a 2020 2020  ault None...    
-000324c0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-000324d0: 616d 2073 6c65 6570 5f73 6563 6f6e 6473  am sleep_seconds
-000324e0: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
-000324f0: 2030 2e0d 0a20 2020 2020 2020 2020 2020   0...           
-00032500: 2020 2020 203a 7061 7261 6d20 6973 5f64       :param is_d
-00032510: 6574 6169 6c5f 7265 7375 6c74 3a20 626f  etail_result: bo
-00032520: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
-00032530: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-00032540: 2020 2020 3a70 6172 616d 2069 665f 6967      :param if_ig
-00032550: 6e6f 7265 5f6c 696d 6974 5f6f 665f 6c65  nore_limit_of_le
-00032560: 6e67 7468 3a20 626f 6f6c 2c20 6465 6661  ngth: bool, defa
-00032570: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-00032580: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00032590: 616d 206c 696d 6974 5f6f 665f 6c65 6e67  am limit_of_leng
-000325a0: 7468 3a20 696e 742c 2064 6566 6175 6c74  th: int, default
-000325b0: 2032 3030 3030 2e0d 0a20 2020 2020 2020   20000...       
-000325c0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-000325d0: 6966 5f69 676e 6f72 655f 656d 7074 795f  if_ignore_empty_
-000325e0: 7175 6572 793a 2062 6f6f 6c2c 2064 6566  query: bool, def
-000325f0: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
-00032600: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00032610: 7261 6d20 7570 6461 7465 5f73 6573 7369  ram update_sessi
-00032620: 6f6e 5f61 6674 6572 5f66 7265 713a 2069  on_after_freq: i
-00032630: 6e74 2c20 6465 6661 756c 7420 3130 3030  nt, default 1000
-00032640: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00032650: 2020 203a 7061 7261 6d20 7570 6461 7465     :param update
-00032660: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
-00032670: 6563 6f6e 6473 3a20 666c 6f61 742c 2064  econds: float, d
-00032680: 6566 6175 6c74 2031 3530 302e 0d0a 2020  efault 1500...  
-00032690: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-000326a0: 6172 616d 2069 665f 7368 6f77 5f74 696d  aram if_show_tim
-000326b0: 655f 7374 6174 3a20 626f 6f6c 2c20 6465  e_stat: bool, de
-000326c0: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
-000326d0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-000326e0: 6172 616d 2073 686f 775f 7469 6d65 5f73  aram show_time_s
-000326f0: 7461 745f 7072 6563 6973 696f 6e3a 2069  tat_precision: i
-00032700: 6e74 2c20 6465 6661 756c 7420 322e 0d0a  nt, default 2...
-00032710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032720: 3a70 6172 616d 2069 665f 7072 696e 745f  :param if_print_
-00032730: 7761 726e 696e 673a 2062 6f6f 6c2c 2064  warning: bool, d
-00032740: 6566 6175 6c74 2054 7275 652e 0d0a 2020  efault True...  
-00032750: 2020 2020 2020 3a72 6574 7572 6e3a 2073        :return: s
-00032760: 7472 206f 7220 6469 6374 0d0a 2020 2020  tr or dict..    
-00032770: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
-00032780: 2020 2074 696d 656f 7574 203d 206b 7761     timeout = kwa
-00032790: 7267 732e 6765 7428 2774 696d 656f 7574  rgs.get('timeout
-000327a0: 272c 204e 6f6e 6529 0d0a 2020 2020 2020  ', None)..      
-000327b0: 2020 7072 6f78 6965 7320 3d20 6b77 6172    proxies = kwar
-000327c0: 6773 2e67 6574 2827 7072 6f78 6965 7327  gs.get('proxies'
-000327d0: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
-000327e0: 2073 6c65 6570 5f73 6563 6f6e 6473 203d   sleep_seconds =
-000327f0: 206b 7761 7267 732e 6765 7428 2773 6c65   kwargs.get('sle
-00032800: 6570 5f73 6563 6f6e 6473 272c 2030 290d  ep_seconds', 0).
-00032810: 0a20 2020 2020 2020 2069 665f 7072 696e  .        if_prin
-00032820: 745f 7761 726e 696e 6720 3d20 6b77 6172  t_warning = kwar
-00032830: 6773 2e67 6574 2827 6966 5f70 7269 6e74  gs.get('if_print
-00032840: 5f77 6172 6e69 6e67 272c 2054 7275 6529  _warning', True)
-00032850: 0d0a 2020 2020 2020 2020 6973 5f64 6574  ..        is_det
-00032860: 6169 6c5f 7265 7375 6c74 203d 206b 7761  ail_result = kwa
-00032870: 7267 732e 6765 7428 2769 735f 6465 7461  rgs.get('is_deta
-00032880: 696c 5f72 6573 756c 7427 2c20 4661 6c73  il_result', Fals
-00032890: 6529 0d0a 2020 2020 2020 2020 7570 6461  e)..        upda
-000328a0: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
-000328b0: 5f66 7265 7120 3d20 6b77 6172 6773 2e67  _freq = kwargs.g
-000328c0: 6574 2827 7570 6461 7465 5f73 6573 7369  et('update_sessi
-000328d0: 6f6e 5f61 6674 6572 5f66 7265 7127 2c20  on_after_freq', 
-000328e0: 7365 6c66 2e64 6566 6175 6c74 5f73 6573  self.default_ses
-000328f0: 7369 6f6e 5f66 7265 7129 0d0a 2020 2020  sion_freq)..    
-00032900: 2020 2020 7570 6461 7465 5f73 6573 7369      update_sessi
-00032910: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-00032920: 203d 206b 7761 7267 732e 6765 7428 2775   = kwargs.get('u
-00032930: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-00032940: 7465 725f 7365 636f 6e64 7327 2c20 7365  ter_seconds', se
-00032950: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
-00032960: 6f6e 5f73 6563 6f6e 6473 290d 0a20 2020  on_seconds)..   
-00032970: 2020 2020 2073 656c 662e 6368 6563 6b5f       self.check_
-00032980: 696e 7075 745f 6c69 6d69 7428 7175 6572  input_limit(quer
-00032990: 795f 7465 7874 2c20 7365 6c66 2e69 6e70  y_text, self.inp
-000329a0: 7574 5f6c 696d 6974 290d 0a0d 0a20 2020  ut_limit)....   
-000329b0: 2020 2020 206e 6f74 5f75 7064 6174 655f       not_update_
-000329c0: 636f 6e64 5f66 7265 7120 3d20 3120 6966  cond_freq = 1 if
-000329d0: 2073 656c 662e 7175 6572 795f 636f 756e   self.query_coun
-000329e0: 7420 2520 7570 6461 7465 5f73 6573 7369  t % update_sessi
-000329f0: 6f6e 5f61 6674 6572 5f66 7265 7120 213d  on_after_freq !=
-00032a00: 2030 2065 6c73 6520 300d 0a20 2020 2020   0 else 0..     
-00032a10: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
-00032a20: 6e64 5f74 696d 6520 3d20 3120 6966 2074  nd_time = 1 if t
-00032a30: 696d 652e 7469 6d65 2829 202d 2073 656c  ime.time() - sel
-00032a40: 662e 6265 6769 6e5f 7469 6d65 203c 2075  f.begin_time < u
-00032a50: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-00032a60: 7465 725f 7365 636f 6e64 7320 656c 7365  ter_seconds else
-00032a70: 2030 0d0a 2020 2020 2020 2020 6966 206e   0..        if n
-00032a80: 6f74 2028 7365 6c66 2e73 6573 7369 6f6e  ot (self.session
-00032a90: 2061 6e64 2073 656c 662e 6c61 6e67 7561   and self.langua
-00032aa0: 6765 5f6d 6170 2061 6e64 206e 6f74 5f75  ge_map and not_u
-00032ab0: 7064 6174 655f 636f 6e64 5f66 7265 7120  pdate_cond_freq 
-00032ac0: 616e 6420 6e6f 745f 7570 6461 7465 5f63  and not_update_c
-00032ad0: 6f6e 645f 7469 6d65 2061 6e64 2073 656c  ond_time and sel
-00032ae0: 662e 7472 616e 5f6b 6579 293a 0d0a 2020  f.tran_key):..  
-00032af0: 2020 2020 2020 2020 2020 7365 6c66 2e62            self.b
-00032b00: 6567 696e 5f74 696d 6520 3d20 7469 6d65  egin_time = time
-00032b10: 2e74 696d 6528 290d 0a20 2020 2020 2020  .time()..       
-00032b20: 2020 2020 2073 656c 662e 7365 7373 696f       self.sessio
-00032b30: 6e20 3d20 7265 7175 6573 7473 2e53 6573  n = requests.Ses
-00032b40: 7369 6f6e 2829 0d0a 2020 2020 2020 2020  sion()..        
-00032b50: 2020 2020 2320 5f20 3d20 7365 6c66 2e73      # _ = self.s
-00032b60: 6573 7369 6f6e 2e67 6574 2873 656c 662e  ession.get(self.
-00032b70: 686f 6d65 5f75 726c 2c20 6865 6164 6572  home_url, header
-00032b80: 733d 7365 6c66 2e68 6f73 745f 6865 6164  s=self.host_head
-00032b90: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
-00032ba0: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
-00032bb0: 6f78 6965 7329 0d0a 2020 2020 2020 2020  oxies)..        
-00032bc0: 2020 2020 686f 7374 5f68 746d 6c20 3d20      host_html = 
-00032bd0: 7365 6c66 2e73 6573 7369 6f6e 2e67 6574  self.session.get
-00032be0: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
-00032bf0: 6865 6164 6572 733d 7365 6c66 2e68 6f73  headers=self.hos
-00032c00: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
-00032c10: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
-00032c20: 6965 733d 7072 6f78 6965 7329 2e74 6578  ies=proxies).tex
-00032c30: 740d 0a20 2020 2020 2020 2020 2020 2073  t..            s
-00032c40: 656c 662e 7472 616e 5f6b 6579 203d 2072  elf.tran_key = r
-00032c50: 652e 636f 6d70 696c 6528 2776 6172 2074  e.compile('var t
-00032c60: 7261 6e20 3d20 2228 2e2a 3f29 223b 2729  ran = "(.*?)";')
-00032c70: 2e73 6561 7263 6828 686f 7374 5f68 746d  .search(host_htm
-00032c80: 6c29 2e67 726f 7570 2831 290d 0a20 2020  l).group(1)..   
-00032c90: 2020 2020 2020 2020 206c 616e 675f 7572           lang_ur
-00032ca0: 6c5f 7061 7274 203d 2072 652e 636f 6d70  l_part = re.comp
-00032cb0: 696c 6528 7365 6c66 2e6c 616e 675f 7572  ile(self.lang_ur
-00032cc0: 6c5f 7061 7474 6572 6e29 2e73 6561 7263  l_pattern).searc
-00032cd0: 6828 686f 7374 5f68 746d 6c29 2e67 726f  h(host_html).gro
-00032ce0: 7570 2829 0d0a 2020 2020 2020 2020 2020  up()..          
-00032cf0: 2020 7365 6c66 2e6c 616e 675f 7572 6c20    self.lang_url 
-00032d00: 3d20 6627 6874 7470 733a 2f2f 6d69 7261  = f'https://mira
-00032d10: 6974 7261 6e73 6c61 7465 2e63 6f6d 2f74  itranslate.com/t
-00032d20: 7269 616c 2f69 6e6d 742f 7b6c 616e 675f  rial/inmt/{lang_
-00032d30: 7572 6c5f 7061 7274 7d27 0d0a 2020 2020  url_part}'..    
-00032d40: 2020 2020 2020 2020 6465 6275 675f 6c61          debug_la
-00032d50: 6e67 5f6b 7761 7267 7320 3d20 7365 6c66  ng_kwargs = self
-00032d60: 2e64 6562 7567 5f6c 616e 675f 6b77 6172  .debug_lang_kwar
-00032d70: 6773 2866 726f 6d5f 6c61 6e67 7561 6765  gs(from_language
-00032d80: 2c20 746f 5f6c 616e 6775 6167 652c 2073  , to_language, s
-00032d90: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
-00032da0: 5f6c 616e 6775 6167 652c 2069 665f 7072  _language, if_pr
-00032db0: 696e 745f 7761 726e 696e 6729 0d0a 2020  int_warning)..  
-00032dc0: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-00032dd0: 616e 6775 6167 655f 6d61 7020 3d20 7365  anguage_map = se
-00032de0: 6c66 2e67 6574 5f6c 616e 6775 6167 655f  lf.get_language_
-00032df0: 6d61 7028 7365 6c66 2e6c 616e 675f 7572  map(self.lang_ur
-00032e00: 6c2c 2073 656c 662e 7365 7373 696f 6e2c  l, self.session,
-00032e10: 2073 656c 662e 6170 695f 6a73 6f6e 5f68   self.api_json_h
-00032e20: 6561 6465 7273 2c20 7469 6d65 6f75 742c  eaders, timeout,
-00032e30: 2070 726f 7869 6573 2c20 2a2a 6465 6275   proxies, **debu
-00032e40: 675f 6c61 6e67 5f6b 7761 7267 7329 0d0a  g_lang_kwargs)..
-00032e50: 0d0a 2020 2020 2020 2020 6966 2066 726f  ..        if fro
-00032e60: 6d5f 6c61 6e67 7561 6765 203d 3d20 2761  m_language == 'a
-00032e70: 7574 6f27 3a0d 0a20 2020 2020 2020 2020  uto':..         
-00032e80: 2020 2072 203d 2073 656c 662e 7365 7373     r = self.sess
-00032e90: 696f 6e2e 706f 7374 2873 656c 662e 6465  ion.post(self.de
-00032ea0: 7465 6374 5f6c 616e 675f 7572 6c2c 2068  tect_lang_url, h
-00032eb0: 6561 6465 7273 3d73 656c 662e 6170 695f  eaders=self.api_
-00032ec0: 6a73 6f6e 5f68 6561 6465 7273 2c20 6a73  json_headers, js
-00032ed0: 6f6e 3d7b 2774 6578 7427 3a20 7175 6572  on={'text': quer
-00032ee0: 795f 7465 7874 7d2c 2074 696d 656f 7574  y_text}, timeout
-00032ef0: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
-00032f00: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
-00032f10: 2020 2020 2020 2020 6672 6f6d 5f6c 616e          from_lan
-00032f20: 6775 6167 6520 3d20 722e 6a73 6f6e 2829  guage = r.json()
-00032f30: 5b27 6c61 6e67 7561 6765 275d 0d0a 2020  ['language']..  
-00032f40: 2020 2020 2020 2020 2020 6672 6f6d 5f6c            from_l
-00032f50: 616e 6775 6167 6520 3d20 7365 6c66 2e6c  anguage = self.l
-00032f60: 616e 675f 7a68 5f6d 6170 5b66 726f 6d5f  ang_zh_map[from_
-00032f70: 6c61 6e67 7561 6765 5d20 6966 2027 7a68  language] if 'zh
-00032f80: 2720 696e 2066 726f 6d5f 6c61 6e67 7561  ' in from_langua
-00032f90: 6765 2065 6c73 6520 6672 6f6d 5f6c 616e  ge else from_lan
-00032fa0: 6775 6167 650d 0a20 2020 2020 2020 2066  guage..        f
-00032fb0: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
-00032fc0: 5f6c 616e 6775 6167 6520 3d20 7365 6c66  _language = self
-00032fd0: 2e63 6865 636b 5f6c 616e 6775 6167 6528  .check_language(
-00032fe0: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
-00032ff0: 6f5f 6c61 6e67 7561 6765 2c20 7365 6c66  o_language, self
-00033000: 2e6c 616e 6775 6167 655f 6d61 702c 206f  .language_map, o
-00033010: 7574 7075 745f 7a68 3d73 656c 662e 6f75  utput_zh=self.ou
-00033020: 7470 7574 5f7a 6829 0d0a 0d0a 2020 2020  tput_zh)....    
-00033030: 2020 2020 7472 6163 655f 6461 7461 203d      trace_data =
-00033040: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
-00033050: 276f 7065 7261 7469 6f6e 5479 7065 273a  'operationType':
-00033060: 2027 534c 4127 2c0d 0a20 2020 2020 2020   'SLA',..       
-00033070: 2020 2020 2027 6c61 6e67 273a 2066 726f       'lang': fro
-00033080: 6d5f 6c61 6e67 7561 6765 2c0d 0a20 2020  m_language,..   
-00033090: 2020 2020 2020 2020 2027 736f 7572 6365           'source
-000330a0: 273a 2071 7565 7279 5f74 6578 742c 0d0a  ': query_text,..
-000330b0: 2020 2020 2020 2020 2020 2020 2775 7365              'use
-000330c0: 7249 6427 3a20 7365 6c66 2e75 7365 725f  rId': self.user_
-000330d0: 6964 2c0d 0a20 2020 2020 2020 2020 2020  id,..           
-000330e0: 2027 7472 616e 7349 6427 3a20 7365 6c66   'transId': self
-000330f0: 2e74 7261 6e73 5f69 642c 0d0a 2020 2020  .trans_id,..    
-00033100: 2020 2020 2020 2020 2775 6e69 7175 6549          'uniqueI
-00033110: 6427 3a20 7365 6c66 2e74 7261 6e5f 6b65  d': self.tran_ke
-00033120: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
-00033130: 2764 6174 6527 3a20 6627 7b64 6174 6574  'date': f'{datet
-00033140: 696d 652e 6461 7465 7469 6d65 2e75 7463  ime.datetime.utc
-00033150: 6e6f 7728 292e 6973 6f66 6f72 6d61 7428  now().isoformat(
-00033160: 295b 3a2d 335d 7d5a 272c 0d0a 2020 2020  )[:-3]}Z',..    
-00033170: 2020 2020 7d0d 0a20 2020 2020 2020 205f      }..        _
-00033180: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
-00033190: 706f 7374 2873 656c 662e 7472 6163 655f  post(self.trace_
-000331a0: 7572 6c2c 206a 736f 6e3d 7472 6163 655f  url, json=trace_
-000331b0: 6461 7461 2c20 6865 6164 6572 733d 7365  data, headers=se
-000331c0: 6c66 2e61 7069 5f74 6578 745f 6865 6164  lf.api_text_head
-000331d0: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
-000331e0: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
-000331f0: 6f78 6965 7329 0d0a 0d0a 2020 2020 2020  oxies)....      
-00033200: 2020 7061 796c 6f61 6420 3d20 7b0d 0a20    payload = {.. 
-00033210: 2020 2020 2020 2020 2020 2027 696e 7075             'inpu
-00033220: 7427 3a20 7175 6572 795f 7465 7874 2c0d  t': query_text,.
-00033230: 0a20 2020 2020 2020 2020 2020 2027 736f  .            'so
-00033240: 7572 6365 273a 2066 726f 6d5f 6c61 6e67  urce': from_lang
-00033250: 7561 6765 2c0d 0a20 2020 2020 2020 2020  uage,..         
-00033260: 2020 2027 7461 7267 6574 273a 2074 6f5f     'target': to_
-00033270: 6c61 6e67 7561 6765 2c0d 0a20 2020 2020  language,..     
-00033280: 2020 2020 2020 2027 7472 616e 273a 2073         'tran': s
-00033290: 656c 662e 7472 616e 5f6b 6579 2c0d 0a20  elf.tran_key,.. 
-000332a0: 2020 2020 2020 2020 2020 2027 6164 6170             'adap
-000332b0: 7450 6872 6173 6573 273a 205b 5d2c 0d0a  tPhrases': [],..
-000332c0: 2020 2020 2020 2020 2020 2020 2766 696c              'fil
-000332d0: 7465 725f 7072 6f66 696c 6527 3a20 276e  ter_profile': 'n
-000332e0: 6d74 272c 0d0a 2020 2020 2020 2020 2020  mt',..          
-000332f0: 2020 2770 726f 6669 6c65 273a 2027 696e    'profile': 'in
-00033300: 6d74 272c 0d0a 2020 2020 2020 2020 2020  mt',..          
-00033310: 2020 2775 7365 5072 6566 6978 273a 2027    'usePrefix': '
-00033320: 6661 6c73 6527 2c0d 0a20 2020 2020 2020  false',..       
-00033330: 2020 2020 2027 7a74 273a 2027 7472 7565       'zt': 'true
-00033340: 2720 6966 2027 7a74 2720 696e 2028 6672  ' if 'zt' in (fr
-00033350: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-00033360: 6c61 6e67 7561 6765 2920 656c 7365 2027  language) else '
-00033370: 6661 6c73 6527 2c0d 0a20 2020 2020 2020  false',..       
-00033380: 2020 2020 2027 496e 6d74 5461 7267 6574       'InmtTarget
-00033390: 273a 2027 272c 0d0a 2020 2020 2020 2020  ': '',..        
-000333a0: 2020 2020 2749 6e6d 7454 7261 6e73 6c61      'InmtTransla
-000333b0: 7465 5479 7065 273a 2027 6769 7374 696e  teType': 'gistin
-000333c0: 6727 2c0d 0a20 2020 2020 2020 207d 0d0a  g',..        }..
-000333d0: 2020 2020 2020 2020 7220 3d20 7365 6c66          r = self
-000333e0: 2e73 6573 7369 6f6e 2e70 6f73 7428 7365  .session.post(se
-000333f0: 6c66 2e61 7069 5f75 726c 2c20 6461 7461  lf.api_url, data
-00033400: 3d70 6179 6c6f 6164 2c20 6865 6164 6572  =payload, header
-00033410: 733d 7365 6c66 2e61 7069 5f74 6578 745f  s=self.api_text_
-00033420: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
-00033430: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
-00033440: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
-00033450: 2020 2020 722e 7261 6973 655f 666f 725f      r.raise_for_
-00033460: 7374 6174 7573 2829 0d0a 2020 2020 2020  status()..      
-00033470: 2020 6461 7461 203d 2072 2e6a 736f 6e28    data = r.json(
-00033480: 290d 0a20 2020 2020 2020 2074 696d 652e  )..        time.
-00033490: 736c 6565 7028 736c 6565 705f 7365 636f  sleep(sleep_seco
-000334a0: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
-000334b0: 6c66 2e71 7565 7279 5f63 6f75 6e74 202b  lf.query_count +
-000334c0: 3d20 310d 0a20 2020 2020 2020 2072 6574  = 1..        ret
-000334d0: 7572 6e20 6461 7461 2069 6620 6973 5f64  urn data if is_d
-000334e0: 6574 6169 6c5f 7265 7375 6c74 2065 6c73  etail_result els
-000334f0: 6520 6461 7461 5b27 6f75 7075 7473 275d  e data['ouputs']
-00033500: 5b30 5d5b 276f 7574 7075 7427 5d5b 305d  [0]['output'][0]
-00033510: 5b27 7472 616e 736c 6174 696f 6e27 5d0d  ['translation'].
-00033520: 0a0d 0a0d 0a63 6c61 7373 2041 7065 7274  .....class Apert
-00033530: 6975 6d28 5473 6529 3a0d 0a20 2020 2064  ium(Tse):..    d
-00033540: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-00033550: 293a 0d0a 2020 2020 2020 2020 7375 7065  ):..        supe
-00033560: 7228 292e 5f5f 696e 6974 5f5f 2829 0d0a  r().__init__()..
-00033570: 2020 2020 2020 2020 7365 6c66 2e62 6567          self.beg
-00033580: 696e 5f74 696d 6520 3d20 7469 6d65 2e74  in_time = time.t
-00033590: 696d 6528 290d 0a20 2020 2020 2020 2073  ime()..        s
-000335a0: 656c 662e 686f 7374 5f75 726c 203d 2027  elf.host_url = '
-000335b0: 6874 7470 733a 2f2f 7777 772e 6170 6572  https://www.aper
-000335c0: 7469 756d 2e6f 7267 2f27 0d0a 2020 2020  tium.org/'..    
-000335d0: 2020 2020 7365 6c66 2e61 7069 5f75 726c      self.api_url
-000335e0: 203d 2027 6874 7470 733a 2f2f 6170 6572   = 'https://aper
-000335f0: 7469 756d 2e6f 7267 2f61 7079 2f74 7261  tium.org/apy/tra
-00033600: 6e73 6c61 7465 270d 0a20 2020 2020 2020  nslate'..       
-00033610: 2073 656c 662e 6765 745f 6c61 6e67 5f75   self.get_lang_u
-00033620: 726c 203d 2027 6874 7470 733a 2f2f 7777  rl = 'https://ww
-00033630: 772e 6170 6572 7469 756d 2e6f 7267 2f69  w.apertium.org/i
-00033640: 6e64 6578 2e6a 7327 0d0a 2020 2020 2020  ndex.js'..      
-00033650: 2020 7365 6c66 2e64 6574 6563 745f 6c61    self.detect_la
-00033660: 6e67 5f75 726c 203d 2027 6874 7470 733a  ng_url = 'https:
-00033670: 2f2f 6170 6572 7469 756d 2e6f 7267 2f61  //apertium.org/a
-00033680: 7079 2f69 6465 6e74 6966 794c 616e 6727  py/identifyLang'
-00033690: 0d0a 2020 2020 2020 2020 7365 6c66 2e68  ..        self.h
-000336a0: 6f73 745f 6865 6164 6572 7320 3d20 7365  ost_headers = se
-000336b0: 6c66 2e67 6574 5f68 6561 6465 7273 2873  lf.get_headers(s
-000336c0: 656c 662e 686f 7374 5f75 726c 2c20 6966  elf.host_url, if
-000336d0: 5f61 7069 3d46 616c 7365 2c20 6966 5f72  _api=False, if_r
-000336e0: 6566 6572 6572 5f66 6f72 5f68 6f73 743d  eferer_for_host=
-000336f0: 5472 7565 290d 0a20 2020 2020 2020 2073  True)..        s
-00033700: 656c 662e 6170 695f 6865 6164 6572 7320  elf.api_headers 
-00033710: 3d20 7365 6c66 2e67 6574 5f68 6561 6465  = self.get_heade
-00033720: 7273 2873 656c 662e 686f 7374 5f75 726c  rs(self.host_url
-00033730: 2c20 6966 5f61 7069 3d54 7275 6529 0d0a  , if_api=True)..
-00033740: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
-00033750: 7369 6f6e 203d 204e 6f6e 650d 0a20 2020  sion = None..   
-00033760: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-00033770: 6765 5f6d 6170 203d 204e 6f6e 650d 0a20  ge_map = None.. 
-00033780: 2020 2020 2020 2073 656c 662e 7175 6572         self.quer
-00033790: 795f 636f 756e 7420 3d20 300d 0a20 2020  y_count = 0..   
-000337a0: 2020 2020 2073 656c 662e 6f75 7470 7574       self.output
-000337b0: 5f7a 6820 3d20 4e6f 6e65 2020 2320 756e  _zh = None  # un
-000337c0: 7375 7070 6f72 7465 640d 0a20 2020 2020  supported..     
-000337d0: 2020 2073 656c 662e 6f75 7470 7574 5f65     self.output_e
-000337e0: 6e20 3d20 2765 6e67 270d 0a20 2020 2020  n = 'eng'..     
-000337f0: 2020 2073 656c 662e 696e 7075 745f 6c69     self.input_li
-00033800: 6d69 7420 3d20 696e 7428 3165 3429 2020  mit = int(1e4)  
-00033810: 2320 616c 6d6f 7374 206e 6f20 6c69 6d69  # almost no limi
-00033820: 742e 0d0a 2020 2020 2020 2020 7365 6c66  t...        self
-00033830: 2e64 6566 6175 6c74 5f66 726f 6d5f 6c61  .default_from_la
-00033840: 6e67 7561 6765 203d 2027 7370 6127 0d0a  nguage = 'spa'..
-00033850: 0d0a 2020 2020 4054 7365 2e64 6562 7567  ..    @Tse.debug
-00033860: 5f6c 616e 6775 6167 655f 6d61 700d 0a20  _language_map.. 
-00033870: 2020 2064 6566 2067 6574 5f6c 616e 6775     def get_langu
-00033880: 6167 655f 6d61 7028 7365 6c66 2c20 6c61  age_map(self, la
-00033890: 6e67 5f75 726c 3a20 7374 722c 2073 733a  ng_url: str, ss:
-000338a0: 2053 6573 7369 6f6e 5479 7065 2c20 6865   SessionType, he
-000338b0: 6164 6572 733a 2064 6963 742c 2074 696d  aders: dict, tim
-000338c0: 656f 7574 3a20 4f70 7469 6f6e 616c 5b66  eout: Optional[f
-000338d0: 6c6f 6174 5d2c 2070 726f 7869 6573 3a20  loat], proxies: 
-000338e0: 4f70 7469 6f6e 616c 5b64 6963 745d 2c20  Optional[dict], 
-000338f0: 2a2a 6b77 6172 6773 3a20 4c61 6e67 4d61  **kwargs: LangMa
-00033900: 704b 7761 7267 7354 7970 6529 202d 3e20  pKwargsType) -> 
-00033910: 6469 6374 3a0d 0a20 2020 2020 2020 206a  dict:..        j
-00033920: 735f 6874 6d6c 203d 2073 732e 6765 7428  s_html = ss.get(
-00033930: 6c61 6e67 5f75 726c 2c20 6865 6164 6572  lang_url, header
-00033940: 733d 6865 6164 6572 732c 2074 696d 656f  s=headers, timeo
-00033950: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
-00033960: 6965 733d 7072 6f78 6965 7329 2e74 6578  ies=proxies).tex
-00033970: 740d 0a20 2020 2020 2020 206c 616e 675f  t..        lang_
-00033980: 7061 6972 7320 3d20 7265 2e63 6f6d 7069  pairs = re.compi
-00033990: 6c65 2827 7b73 6f75 7263 654c 616e 6775  le('{sourceLangu
-000339a0: 6167 653a 2228 2e2a 3f29 222c 7461 7267  age:"(.*?)",targ
-000339b0: 6574 4c61 6e67 7561 6765 3a22 282e 2a3f  etLanguage:"(.*?
-000339c0: 2922 7d27 292e 6669 6e64 616c 6c28 6a73  )"}').findall(js
-000339d0: 5f68 746d 6c29 0d0a 2020 2020 2020 2020  _html)..        
-000339e0: 7265 7475 726e 207b 665f 6c61 6e67 3a20  return {f_lang: 
-000339f0: 5b76 2066 6f72 206b 2c20 7620 696e 206c  [v for k, v in l
-00033a00: 616e 675f 7061 6972 7320 6966 206b 203d  ang_pairs if k =
-00033a10: 3d20 665f 6c61 6e67 5d20 666f 7220 665f  = f_lang] for f_
-00033a20: 6c61 6e67 2c20 745f 6c61 6e67 2069 6e20  lang, t_lang in 
-00033a30: 6c61 6e67 5f70 6169 7273 7d0d 0a0d 0a20  lang_pairs}.... 
-00033a40: 2020 2040 5473 652e 7469 6d65 5f73 7461     @Tse.time_sta
-00033a50: 740d 0a20 2020 2040 5473 652e 6368 6563  t..    @Tse.chec
-00033a60: 6b5f 7175 6572 790d 0a20 2020 2064 6566  k_query..    def
-00033a70: 2061 7065 7274 6975 6d5f 6170 6928 7365   apertium_api(se
-00033a80: 6c66 2c20 7175 6572 795f 7465 7874 3a20  lf, query_text: 
-00033a90: 7374 722c 2066 726f 6d5f 6c61 6e67 7561  str, from_langua
-00033aa0: 6765 3a20 7374 7220 3d20 2761 7574 6f27  ge: str = 'auto'
-00033ab0: 2c20 746f 5f6c 616e 6775 6167 653a 2073  , to_language: s
-00033ac0: 7472 203d 2027 656e 272c 202a 2a6b 7761  tr = 'en', **kwa
-00033ad0: 7267 733a 2041 7069 4b77 6172 6773 5479  rgs: ApiKwargsTy
-00033ae0: 7065 2920 2d3e 2055 6e69 6f6e 5b73 7472  pe) -> Union[str
-00033af0: 2c20 6469 6374 5d3a 0d0a 2020 2020 2020  , dict]:..      
-00033b00: 2020 2222 220d 0a20 2020 2020 2020 2068    """..        h
-00033b10: 7474 7073 3a2f 2f77 7777 2e61 7065 7274  ttps://www.apert
-00033b20: 6975 6d2e 6f72 672f 0d0a 2020 2020 2020  ium.org/..      
-00033b30: 2020 3a70 6172 616d 2071 7565 7279 5f74    :param query_t
-00033b40: 6578 743a 2073 7472 2c20 6d75 7374 2e0d  ext: str, must..
-00033b50: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00033b60: 6672 6f6d 5f6c 616e 6775 6167 653a 2073  from_language: s
-00033b70: 7472 2c20 6465 6661 756c 7420 2761 7574  tr, default 'aut
-00033b80: 6f27 2e0d 0a20 2020 2020 2020 203a 7061  o'...        :pa
-00033b90: 7261 6d20 746f 5f6c 616e 6775 6167 653a  ram to_language:
-00033ba0: 2073 7472 2c20 6465 6661 756c 7420 2765   str, default 'e
-00033bb0: 6e27 2e0d 0a20 2020 2020 2020 203a 7061  n'...        :pa
-00033bc0: 7261 6d20 2a2a 6b77 6172 6773 3a0d 0a20  ram **kwargs:.. 
-00033bd0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-00033be0: 7061 7261 6d20 7469 6d65 6f75 743a 2066  param timeout: f
-00033bf0: 6c6f 6174 2c20 6465 6661 756c 7420 4e6f  loat, default No
-00033c00: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
-00033c10: 2020 2020 203a 7061 7261 6d20 7072 6f78       :param prox
-00033c20: 6965 733a 2064 6963 742c 2064 6566 6175  ies: dict, defau
-00033c30: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
-00033c40: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00033c50: 2073 6c65 6570 5f73 6563 6f6e 6473 3a20   sleep_seconds: 
-00033c60: 666c 6f61 742c 2064 6566 6175 6c74 2030  float, default 0
-00033c70: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00033c80: 2020 203a 7061 7261 6d20 6973 5f64 6574     :param is_det
-00033c90: 6169 6c5f 7265 7375 6c74 3a20 626f 6f6c  ail_result: bool
-00033ca0: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-00033cb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00033cc0: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
-00033cd0: 7265 5f6c 696d 6974 5f6f 665f 6c65 6e67  re_limit_of_leng
-00033ce0: 7468 3a20 626f 6f6c 2c20 6465 6661 756c  th: bool, defaul
-00033cf0: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-00033d00: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00033d10: 206c 696d 6974 5f6f 665f 6c65 6e67 7468   limit_of_length
-00033d20: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
-00033d30: 3030 3030 2e0d 0a20 2020 2020 2020 2020  0000...         
-00033d40: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-00033d50: 5f69 676e 6f72 655f 656d 7074 795f 7175  _ignore_empty_qu
-00033d60: 6572 793a 2062 6f6f 6c2c 2064 6566 6175  ery: bool, defau
-00033d70: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
-00033d80: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00033d90: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
-00033da0: 5f61 6674 6572 5f66 7265 713a 2069 6e74  _after_freq: int
-00033db0: 2c20 6465 6661 756c 7420 3130 3030 2e0d  , default 1000..
-00033dc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00033dd0: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
-00033de0: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-00033df0: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
-00033e00: 6175 6c74 2031 3530 302e 0d0a 2020 2020  ault 1500...    
-00033e10: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00033e20: 616d 2069 665f 7368 6f77 5f74 696d 655f  am if_show_time_
-00033e30: 7374 6174 3a20 626f 6f6c 2c20 6465 6661  stat: bool, defa
-00033e40: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-00033e50: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00033e60: 616d 2073 686f 775f 7469 6d65 5f73 7461  am show_time_sta
-00033e70: 745f 7072 6563 6973 696f 6e3a 2069 6e74  t_precision: int
-00033e80: 2c20 6465 6661 756c 7420 322e 0d0a 2020  , default 2...  
-00033e90: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00033ea0: 6172 616d 2069 665f 7072 696e 745f 7761  aram if_print_wa
-00033eb0: 726e 696e 673a 2062 6f6f 6c2c 2064 6566  rning: bool, def
-00033ec0: 6175 6c74 2054 7275 652e 0d0a 2020 2020  ault True...    
-00033ed0: 2020 2020 3a72 6574 7572 6e3a 2073 7472      :return: str
-00033ee0: 206f 7220 6469 6374 0d0a 2020 2020 2020   or dict..      
-00033ef0: 2020 2222 220d 0a0d 0a20 2020 2020 2020    """....       
-00033f00: 2074 696d 656f 7574 203d 206b 7761 7267   timeout = kwarg
-00033f10: 732e 6765 7428 2774 696d 656f 7574 272c  s.get('timeout',
-00033f20: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
-00033f30: 7072 6f78 6965 7320 3d20 6b77 6172 6773  proxies = kwargs
-00033f40: 2e67 6574 2827 7072 6f78 6965 7327 2c20  .get('proxies', 
-00033f50: 4e6f 6e65 290d 0a20 2020 2020 2020 2073  None)..        s
-00033f60: 6c65 6570 5f73 6563 6f6e 6473 203d 206b  leep_seconds = k
-00033f70: 7761 7267 732e 6765 7428 2773 6c65 6570  wargs.get('sleep
-00033f80: 5f73 6563 6f6e 6473 272c 2030 290d 0a20  _seconds', 0).. 
-00033f90: 2020 2020 2020 2069 665f 7072 696e 745f         if_print_
-00033fa0: 7761 726e 696e 6720 3d20 6b77 6172 6773  warning = kwargs
-00033fb0: 2e67 6574 2827 6966 5f70 7269 6e74 5f77  .get('if_print_w
-00033fc0: 6172 6e69 6e67 272c 2054 7275 6529 0d0a  arning', True)..
-00033fd0: 2020 2020 2020 2020 6973 5f64 6574 6169          is_detai
-00033fe0: 6c5f 7265 7375 6c74 203d 206b 7761 7267  l_result = kwarg
-00033ff0: 732e 6765 7428 2769 735f 6465 7461 696c  s.get('is_detail
-00034000: 5f72 6573 756c 7427 2c20 4661 6c73 6529  _result', False)
-00034010: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
-00034020: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-00034030: 7265 7120 3d20 6b77 6172 6773 2e67 6574  req = kwargs.get
-00034040: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
-00034050: 5f61 6674 6572 5f66 7265 7127 2c20 7365  _after_freq', se
-00034060: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
-00034070: 6f6e 5f66 7265 7129 0d0a 2020 2020 2020  on_freq)..      
-00034080: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
-00034090: 5f61 6674 6572 5f73 6563 6f6e 6473 203d  _after_seconds =
-000340a0: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
-000340b0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-000340c0: 725f 7365 636f 6e64 7327 2c20 7365 6c66  r_seconds', self
-000340d0: 2e64 6566 6175 6c74 5f73 6573 7369 6f6e  .default_session
-000340e0: 5f73 6563 6f6e 6473 290d 0a20 2020 2020  _seconds)..     
-000340f0: 2020 2073 656c 662e 6368 6563 6b5f 696e     self.check_in
-00034100: 7075 745f 6c69 6d69 7428 7175 6572 795f  put_limit(query_
-00034110: 7465 7874 2c20 7365 6c66 2e69 6e70 7574  text, self.input
-00034120: 5f6c 696d 6974 290d 0a0d 0a20 2020 2020  _limit)....     
-00034130: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
-00034140: 6e64 5f66 7265 7120 3d20 3120 6966 2073  nd_freq = 1 if s
-00034150: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
-00034160: 2520 7570 6461 7465 5f73 6573 7369 6f6e  % update_session
-00034170: 5f61 6674 6572 5f66 7265 7120 213d 2030  _after_freq != 0
-00034180: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
-00034190: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
-000341a0: 5f74 696d 6520 3d20 3120 6966 2074 696d  _time = 1 if tim
-000341b0: 652e 7469 6d65 2829 202d 2073 656c 662e  e.time() - self.
-000341c0: 6265 6769 6e5f 7469 6d65 203c 2075 7064  begin_time < upd
-000341d0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-000341e0: 725f 7365 636f 6e64 7320 656c 7365 2030  r_seconds else 0
-000341f0: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
-00034200: 2028 7365 6c66 2e73 6573 7369 6f6e 2061   (self.session a
-00034210: 6e64 2073 656c 662e 6c61 6e67 7561 6765  nd self.language
-00034220: 5f6d 6170 2061 6e64 206e 6f74 5f75 7064  _map and not_upd
-00034230: 6174 655f 636f 6e64 5f66 7265 7120 616e  ate_cond_freq an
-00034240: 6420 6e6f 745f 7570 6461 7465 5f63 6f6e  d not_update_con
-00034250: 645f 7469 6d65 293a 0d0a 2020 2020 2020  d_time):..      
-00034260: 2020 2020 2020 7365 6c66 2e62 6567 696e        self.begin
-00034270: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
-00034280: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
-00034290: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
-000342a0: 7265 7175 6573 7473 2e53 6573 7369 6f6e  requests.Session
-000342b0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-000342c0: 5f20 3d20 7365 6c66 2e73 6573 7369 6f6e  _ = self.session
-000342d0: 2e67 6574 2873 656c 662e 686f 7374 5f75  .get(self.host_u
-000342e0: 726c 2c20 6865 6164 6572 733d 7365 6c66  rl, headers=self
-000342f0: 2e68 6f73 745f 6865 6164 6572 732c 2074  .host_headers, t
-00034300: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
-00034310: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
-00034320: 0d0a 2020 2020 2020 2020 2020 2020 6465  ..            de
-00034330: 6275 675f 6c61 6e67 5f6b 7761 7267 7320  bug_lang_kwargs 
-00034340: 3d20 7365 6c66 2e64 6562 7567 5f6c 616e  = self.debug_lan
-00034350: 675f 6b77 6172 6773 2866 726f 6d5f 6c61  g_kwargs(from_la
-00034360: 6e67 7561 6765 2c20 746f 5f6c 616e 6775  nguage, to_langu
-00034370: 6167 652c 2073 656c 662e 6465 6661 756c  age, self.defaul
-00034380: 745f 6672 6f6d 5f6c 616e 6775 6167 652c  t_from_language,
-00034390: 2069 665f 7072 696e 745f 7761 726e 696e   if_print_warnin
-000343a0: 6729 0d0a 2020 2020 2020 2020 2020 2020  g)..            
-000343b0: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
-000343c0: 7020 3d20 7365 6c66 2e67 6574 5f6c 616e  p = self.get_lan
-000343d0: 6775 6167 655f 6d61 7028 7365 6c66 2e67  guage_map(self.g
-000343e0: 6574 5f6c 616e 675f 7572 6c2c 2073 656c  et_lang_url, sel
-000343f0: 662e 7365 7373 696f 6e2c 2073 656c 662e  f.session, self.
-00034400: 686f 7374 5f68 6561 6465 7273 2c20 7469  host_headers, ti
-00034410: 6d65 6f75 742c 2070 726f 7869 6573 2c20  meout, proxies, 
-00034420: 2a2a 6465 6275 675f 6c61 6e67 5f6b 7761  **debug_lang_kwa
-00034430: 7267 7329 0d0a 0d0a 2020 2020 2020 2020  rgs)....        
-00034440: 6966 2066 726f 6d5f 6c61 6e67 7561 6765  if from_language
-00034450: 203d 3d20 2761 7574 6f27 3a0d 0a20 2020   == 'auto':..   
-00034460: 2020 2020 2020 2020 2070 6179 6c6f 6164           payload
-00034470: 203d 2075 726c 6c69 622e 7061 7273 652e   = urllib.parse.
-00034480: 7572 6c65 6e63 6f64 6528 7b27 7127 3a20  urlencode({'q': 
-00034490: 7175 6572 795f 7465 7874 7d29 0d0a 2020  query_text})..  
-000344a0: 2020 2020 2020 2020 2020 6c61 6e67 7320            langs 
-000344b0: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e70  = self.session.p
-000344c0: 6f73 7428 7365 6c66 2e64 6574 6563 745f  ost(self.detect_
-000344d0: 6c61 6e67 5f75 726c 2c20 6461 7461 3d70  lang_url, data=p
-000344e0: 6179 6c6f 6164 2c20 6865 6164 6572 733d  ayload, headers=
-000344f0: 7365 6c66 2e61 7069 5f68 6561 6465 7273  self.api_headers
-00034500: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
-00034510: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
-00034520: 6573 292e 6a73 6f6e 2829 0d0a 2020 2020  es).json()..    
-00034530: 2020 2020 2020 2020 6672 6f6d 5f6c 616e          from_lan
-00034540: 6775 6167 6520 3d20 736f 7274 6564 286c  guage = sorted(l
-00034550: 616e 6773 2c20 6b65 793d 6c61 6d62 6461  angs, key=lambda
-00034560: 206b 3a20 6c61 6e67 735b 6b5d 2c20 7265   k: langs[k], re
-00034570: 7665 7273 653d 5472 7565 295b 305d 0d0a  verse=True)[0]..
-00034580: 2020 2020 2020 2020 6672 6f6d 5f6c 616e          from_lan
-00034590: 6775 6167 652c 2074 6f5f 6c61 6e67 7561  guage, to_langua
-000345a0: 6765 203d 2073 656c 662e 6368 6563 6b5f  ge = self.check_
-000345b0: 6c61 6e67 7561 6765 2866 726f 6d5f 6c61  language(from_la
-000345c0: 6e67 7561 6765 2c20 746f 5f6c 616e 6775  nguage, to_langu
-000345d0: 6167 652c 2073 656c 662e 6c61 6e67 7561  age, self.langua
-000345e0: 6765 5f6d 6170 2c0d 0a20 2020 2020 2020  ge_map,..       
-000345f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034620: 2020 6f75 7470 7574 5f65 6e5f 7472 616e    output_en_tran
-00034630: 736c 6174 6f72 3d27 6170 6572 7469 756d  slator='apertium
-00034640: 272c 206f 7574 7075 745f 656e 3d73 656c  ', output_en=sel
-00034650: 662e 6f75 7470 7574 5f65 6e29 0d0a 0d0a  f.output_en)....
-00034660: 2020 2020 2020 2020 7061 796c 6f61 6420          payload 
-00034670: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
-00034680: 2027 7127 3a20 7175 6572 795f 7465 7874   'q': query_text
-00034690: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-000346a0: 6c61 6e67 7061 6972 273a 2066 277b 6672  langpair': f'{fr
-000346b0: 6f6d 5f6c 616e 6775 6167 657d 7c7b 746f  om_language}|{to
-000346c0: 5f6c 616e 6775 6167 657d 272c 0d0a 2020  _language}',..  
-000346d0: 2020 2020 2020 2020 2020 2770 7265 6673            'prefs
-000346e0: 273a 2027 272c 0d0a 2020 2020 2020 2020  ': '',..        
-000346f0: 2020 2020 276d 6172 6b55 6e6b 6e6f 776e      'markUnknown
-00034700: 273a 2027 6e6f 272c 0d0a 2020 2020 2020  ': 'no',..      
-00034710: 2020 7d0d 0a20 2020 2020 2020 2070 6179    }..        pay
-00034720: 6c6f 6164 203d 2075 726c 6c69 622e 7061  load = urllib.pa
-00034730: 7273 652e 7572 6c65 6e63 6f64 6528 7061  rse.urlencode(pa
-00034740: 796c 6f61 6429 0d0a 2020 2020 2020 2020  yload)..        
-00034750: 7220 3d20 7365 6c66 2e73 6573 7369 6f6e  r = self.session
-00034760: 2e70 6f73 7428 7365 6c66 2e61 7069 5f75  .post(self.api_u
-00034770: 726c 2c20 6461 7461 3d70 6179 6c6f 6164  rl, data=payload
-00034780: 2c20 6865 6164 6572 733d 7365 6c66 2e61  , headers=self.a
-00034790: 7069 5f68 6561 6465 7273 2c20 7469 6d65  pi_headers, time
-000347a0: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
-000347b0: 7869 6573 3d70 726f 7869 6573 290d 0a20  xies=proxies).. 
-000347c0: 2020 2020 2020 2072 2e72 6169 7365 5f66         r.raise_f
-000347d0: 6f72 5f73 7461 7475 7328 290d 0a20 2020  or_status()..   
-000347e0: 2020 2020 2064 6174 6120 3d20 722e 6a73       data = r.js
-000347f0: 6f6e 2829 0d0a 2020 2020 2020 2020 7469  on()..        ti
-00034800: 6d65 2e73 6c65 6570 2873 6c65 6570 5f73  me.sleep(sleep_s
-00034810: 6563 6f6e 6473 290d 0a20 2020 2020 2020  econds)..       
-00034820: 2073 656c 662e 7175 6572 795f 636f 756e   self.query_coun
-00034830: 7420 2b3d 2031 0d0a 2020 2020 2020 2020  t += 1..        
-00034840: 7265 7475 726e 2064 6174 6120 6966 2069  return data if i
-00034850: 735f 6465 7461 696c 5f72 6573 756c 7420  s_detail_result 
-00034860: 656c 7365 2064 6174 615b 2772 6573 706f  else data['respo
-00034870: 6e73 6544 6174 6127 5d5b 2774 7261 6e73  nseData']['trans
-00034880: 6c61 7465 6454 6578 7427 5d0d 0a0d 0a0d  latedText'].....
-00034890: 0a63 6c61 7373 2054 696c 6465 2854 7365  .class Tilde(Tse
-000348a0: 293a 0d0a 2020 2020 6465 6620 5f5f 696e  ):..    def __in
-000348b0: 6974 5f5f 2873 656c 6629 3a0d 0a20 2020  it__(self):..   
-000348c0: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
-000348d0: 6e69 745f 5f28 290d 0a20 2020 2020 2020  nit__()..       
-000348e0: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
-000348f0: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
-00034900: 2020 2020 2020 2020 7365 6c66 2e68 6f73          self.hos
-00034910: 745f 7572 6c20 3d20 2768 7474 7073 3a2f  t_url = 'https:/
-00034920: 2f74 7261 6e73 6c61 7465 2e74 696c 6465  /translate.tilde
-00034930: 2e63 6f6d 2f27 0d0a 2020 2020 2020 2020  .com/'..        
-00034940: 7365 6c66 2e61 7069 5f75 726c 203d 2027  self.api_url = '
-00034950: 6874 7470 733a 2f2f 6c65 7473 6d74 2e65  https://letsmt.e
-00034960: 752f 7773 2f73 6572 7669 6365 2e73 7663  u/ws/service.svc
-00034970: 2f6a 736f 6e2f 5472 616e 736c 6174 6545  /json/TranslateE
-00034980: 7827 0d0a 2020 2020 2020 2020 7365 6c66  x'..        self
-00034990: 2e67 6574 5f63 6f6e 6669 675f 7572 6c20  .get_config_url 
-000349a0: 3d20 2768 7474 7073 3a2f 2f74 7261 6e73  = 'https://trans
-000349b0: 6c61 7465 2e74 696c 6465 2e63 6f6d 2f61  late.tilde.com/a
-000349c0: 7373 6574 732f 636f 6e66 6967 2e6c 6f63  ssets/config.loc
-000349d0: 616c 2e6a 736f 6e27 2020 2320 3f76 6572  al.json'  # ?ver
-000349e0: 7369 6f6e 3d34 3638 3532 0d0a 2020 2020  sion=46852..    
-000349f0: 2020 2020 7365 6c66 2e73 7562 7363 7269      self.subscri
-00034a00: 6265 5f75 726c 203d 2027 6874 7470 733a  be_url = 'https:
-00034a10: 2f2f 7472 616e 736c 6174 652e 7469 6c64  //translate.tild
-00034a20: 652e 636f 6d2f 6173 7365 7473 2f73 7562  e.com/assets/sub
-00034a30: 7363 7269 7074 696f 6e73 2d63 6f6e 6669  scriptions-confi
-00034a40: 672e 6c6f 6361 6c2e 6a73 6f6e 270d 0a20  g.local.json'.. 
-00034a50: 2020 2020 2020 2073 656c 662e 706c 6175         self.plau
-00034a60: 7369 626c 655f 7572 6c20 3d20 2768 7474  sible_url = 'htt
-00034a70: 7073 3a2f 2f70 6c61 7573 6962 6c65 2e69  ps://plausible.i
-00034a80: 6f2f 6170 692f 6576 656e 7427 0d0a 2020  o/api/event'..  
-00034a90: 2020 2020 2020 7365 6c66 2e61 7574 685f        self.auth_
-00034aa0: 7572 6c20 3d20 2768 7474 7073 3a2f 2f61  url = 'https://a
-00034ab0: 7574 682e 7469 6c64 652e 636f 6d2f 6175  uth.tilde.com/au
-00034ac0: 7468 2f72 6561 6c6d 732f 5469 6c64 652f  th/realms/Tilde/
-00034ad0: 7072 6f74 6f63 6f6c 2f6f 7065 6e69 642d  protocol/openid-
-00034ae0: 636f 6e6e 6563 742f 6c6f 6769 6e2d 7374  connect/login-st
-00034af0: 6174 7573 2d69 6672 616d 652e 6874 6d6c  atus-iframe.html
-00034b00: 2f69 6e69 7427 0d0a 2020 2020 2020 2020  /init'..        
-00034b10: 7365 6c66 2e73 7065 6563 685f 7572 6c20  self.speech_url 
-00034b20: 3d20 2768 7474 7073 3a2f 2f76 612e 7469  = 'https://va.ti
-00034b30: 6c64 652e 636f 6d2f 646c 2f64 6972 6563  lde.com/dl/direc
-00034b40: 746c 696e 652f 6148 5230 6344 6f76 4c33  tline/aHR0cDovL3
-00034b50: 4279 6232 5272 4f48 4e69 6233 5230 6157  Byb2RrOHNib3R0aW
-00034b60: 786b 5a54 513d 2f74 6f6b 656e 732f 7370  xkZTQ=/tokens/sp
-00034b70: 6565 6368 270d 0a20 2020 2020 2020 2073  eech'..        s
-00034b80: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
-00034b90: 203d 2073 656c 662e 6765 745f 6865 6164   = self.get_head
-00034ba0: 6572 7328 7365 6c66 2e68 6f73 745f 7572  ers(self.host_ur
-00034bb0: 6c2c 2069 665f 6170 693d 4661 6c73 652c  l, if_api=False,
-00034bc0: 2069 665f 7265 6665 7265 725f 666f 725f   if_referer_for_
-00034bd0: 686f 7374 3d54 7275 6529 0d0a 2020 2020  host=True)..    
-00034be0: 2020 2020 7365 6c66 2e61 7069 5f68 6561      self.api_hea
-00034bf0: 6465 7273 203d 2073 656c 662e 6765 745f  ders = self.get_
-00034c00: 6865 6164 6572 7328 7365 6c66 2e68 6f73  headers(self.hos
-00034c10: 745f 7572 6c2c 2069 665f 6170 693d 5472  t_url, if_api=Tr
-00034c20: 7565 2c20 6966 5f6a 736f 6e5f 666f 725f  ue, if_json_for_
-00034c30: 6170 693d 5472 7565 290d 0a20 2020 2020  api=True)..     
-00034c40: 2020 2073 656c 662e 7365 7373 696f 6e20     self.session 
-00034c50: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00034c60: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
-00034c70: 7020 3d20 4e6f 6e65 0d0a 2020 2020 2020  p = None..      
-00034c80: 2020 7365 6c66 2e6c 616e 6770 6169 725f    self.langpair_
-00034c90: 6964 7320 3d20 4e6f 6e65 0d0a 2020 2020  ids = None..    
-00034ca0: 2020 2020 7365 6c66 2e63 6f6e 6669 675f      self.config_
-00034cb0: 6461 7461 203d 204e 6f6e 650d 0a20 2020  data = None..   
-00034cc0: 2020 2020 2073 656c 662e 7379 735f 6461       self.sys_da
-00034cd0: 7461 203d 204e 6f6e 650d 0a20 2020 2020  ta = None..     
-00034ce0: 2020 2073 656c 662e 7175 6572 795f 636f     self.query_co
-00034cf0: 756e 7420 3d20 300d 0a20 2020 2020 2020  unt = 0..       
-00034d00: 2073 656c 662e 6f75 7470 7574 5f7a 6820   self.output_zh 
-00034d10: 3d20 4e6f 6e65 2020 2320 756e 7375 7070  = None  # unsupp
-00034d20: 6f72 7465 640d 0a20 2020 2020 2020 2073  orted..        s
-00034d30: 656c 662e 6f75 7470 7574 5f65 6e20 3d20  elf.output_en = 
-00034d40: 2765 6e67 270d 0a20 2020 2020 2020 2073  'eng'..        s
-00034d50: 656c 662e 696e 7075 745f 6c69 6d69 7420  elf.input_limit 
-00034d60: 3d20 696e 7428 3565 3329 2020 2320 756e  = int(5e3)  # un
-00034d70: 6b6e 6f77 6e0d 0a20 2020 2020 2020 2073  known..        s
-00034d80: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
-00034d90: 5f6c 616e 6775 6167 6520 3d20 276c 7627  _language = 'lv'
-00034da0: 2020 2320 2766 7227 0d0a 0d0a 2020 2020    # 'fr'....    
-00034db0: 4054 7365 2e64 6562 7567 5f6c 616e 6775  @Tse.debug_langu
-00034dc0: 6167 655f 6d61 700d 0a20 2020 2064 6566  age_map..    def
-00034dd0: 2067 6574 5f6c 616e 6775 6167 655f 6d61   get_language_ma
-00034de0: 7028 7365 6c66 2c20 7379 735f 6461 7461  p(self, sys_data
-00034df0: 3a20 6469 6374 2c20 2a2a 6b77 6172 6773  : dict, **kwargs
-00034e00: 3a20 4c61 6e67 4d61 704b 7761 7267 7354  : LangMapKwargsT
-00034e10: 7970 6529 202d 3e20 6469 6374 3a0d 0a20  ype) -> dict:.. 
-00034e20: 2020 2020 2020 206c 616e 675f 7061 6972         lang_pair
-00034e30: 7320 3d20 5b5b 6974 656d 5b27 536f 7572  s = [[item['Sour
-00034e40: 6365 4c61 6e67 7561 6765 275d 5b27 436f  ceLanguage']['Co
-00034e50: 6465 275d 2c20 6974 656d 5b27 5461 7267  de'], item['Targ
-00034e60: 6574 4c61 6e67 7561 6765 275d 5b27 436f  etLanguage']['Co
-00034e70: 6465 275d 5d20 666f 7220 6974 656d 2069  de']] for item i
-00034e80: 6e20 7379 735f 6461 7461 5b27 5379 7374  n sys_data['Syst
-00034e90: 656d 275d 2069 6620 2747 656e 6572 616c  em'] if 'General
-00034ea0: 2720 696e 2069 7465 6d5b 2744 6f6d 6169  ' in item['Domai
-00034eb0: 6e27 5d5d 0d0a 2020 2020 2020 2020 7265  n']]..        re
-00034ec0: 7475 726e 207b 665f 6c61 6e67 3a20 5b76  turn {f_lang: [v
-00034ed0: 2066 6f72 206b 2c20 7620 696e 206c 616e   for k, v in lan
-00034ee0: 675f 7061 6972 7320 6966 206b 203d 3d20  g_pairs if k == 
-00034ef0: 665f 6c61 6e67 5d20 666f 7220 665f 6c61  f_lang] for f_la
-00034f00: 6e67 2c20 745f 6c61 6e67 2069 6e20 6c61  ng, t_lang in la
-00034f10: 6e67 5f70 6169 7273 7d0d 0a0d 0a20 2020  ng_pairs}....   
-00034f20: 2064 6566 2067 6574 5f6c 616e 6770 6169   def get_langpai
-00034f30: 725f 6964 7328 7365 6c66 2c20 7379 735f  r_ids(self, sys_
-00034f40: 6461 7461 3a20 6469 6374 2920 2d3e 2064  data: dict) -> d
-00034f50: 6963 743a 0d0a 2020 2020 2020 2020 7265  ict:..        re
-00034f60: 7475 726e 207b 6622 7b69 7465 6d5b 2753  turn {f"{item['S
-00034f70: 6f75 7263 654c 616e 6775 6167 6527 5d5b  ourceLanguage'][
-00034f80: 2743 6f64 6527 5d7d 2d7b 6974 656d 5b27  'Code']}-{item['
-00034f90: 5461 7267 6574 4c61 6e67 7561 6765 275d  TargetLanguage']
-00034fa0: 5b27 436f 6465 275d 7d22 3a20 6974 656d  ['Code']}": item
-00034fb0: 5b27 4944 275d 2066 6f72 2069 7465 6d20  ['ID'] for item 
-00034fc0: 696e 2073 7973 5f64 6174 615b 2753 7973  in sys_data['Sys
-00034fd0: 7465 6d27 5d20 6966 2027 4765 6e65 7261  tem'] if 'Genera
-00034fe0: 6c27 2069 6e20 6974 656d 5b27 446f 6d61  l' in item['Doma
-00034ff0: 696e 275d 7d0d 0a0d 0a20 2020 2040 5473  in']}....    @Ts
-00035000: 652e 756e 6365 7274 6966 6965 640d 0a20  e.uncertified.. 
-00035010: 2020 2040 5473 652e 7469 6d65 5f73 7461     @Tse.time_sta
-00035020: 740d 0a20 2020 2040 5473 652e 6368 6563  t..    @Tse.chec
-00035030: 6b5f 7175 6572 790d 0a20 2020 2064 6566  k_query..    def
-00035040: 2074 696c 6465 5f61 7069 2873 656c 662c   tilde_api(self,
-00035050: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
-00035060: 2c20 6672 6f6d 5f6c 616e 6775 6167 653a  , from_language:
-00035070: 2073 7472 203d 2027 6175 746f 272c 2074   str = 'auto', t
-00035080: 6f5f 6c61 6e67 7561 6765 3a20 7374 7220  o_language: str 
-00035090: 3d20 2765 6e27 2c20 2a2a 6b77 6172 6773  = 'en', **kwargs
-000350a0: 3a20 4170 694b 7761 7267 7354 7970 6529  : ApiKwargsType)
-000350b0: 202d 3e20 556e 696f 6e5b 7374 722c 2064   -> Union[str, d
-000350c0: 6963 745d 3a0d 0a20 2020 2020 2020 2022  ict]:..        "
-000350d0: 2222 0d0a 2020 2020 2020 2020 6874 7470  ""..        http
-000350e0: 733a 2f2f 7472 616e 736c 6174 652e 7469  s://translate.ti
-000350f0: 6c64 652e 636f 6d2f 0d0a 2020 2020 2020  lde.com/..      
-00035100: 2020 3a70 6172 616d 2071 7565 7279 5f74    :param query_t
-00035110: 6578 743a 2073 7472 2c20 6d75 7374 2e0d  ext: str, must..
-00035120: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00035130: 6672 6f6d 5f6c 616e 6775 6167 653a 2073  from_language: s
-00035140: 7472 2c20 6465 6661 756c 7420 2761 7574  tr, default 'aut
-00035150: 6f27 2e0d 0a20 2020 2020 2020 203a 7061  o'...        :pa
-00035160: 7261 6d20 746f 5f6c 616e 6775 6167 653a  ram to_language:
-00035170: 2073 7472 2c20 6465 6661 756c 7420 2765   str, default 'e
-00035180: 6e27 2e0d 0a20 2020 2020 2020 203a 7061  n'...        :pa
-00035190: 7261 6d20 2a2a 6b77 6172 6773 3a0d 0a20  ram **kwargs:.. 
-000351a0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-000351b0: 7061 7261 6d20 7469 6d65 6f75 743a 2066  param timeout: f
-000351c0: 6c6f 6174 2c20 6465 6661 756c 7420 4e6f  loat, default No
-000351d0: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
-000351e0: 2020 2020 203a 7061 7261 6d20 7072 6f78       :param prox
-000351f0: 6965 733a 2064 6963 742c 2064 6566 6175  ies: dict, defau
-00035200: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
-00035210: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00035220: 2073 6c65 6570 5f73 6563 6f6e 6473 3a20   sleep_seconds: 
-00035230: 666c 6f61 742c 2064 6566 6175 6c74 2030  float, default 0
-00035240: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00035250: 2020 203a 7061 7261 6d20 6973 5f64 6574     :param is_det
-00035260: 6169 6c5f 7265 7375 6c74 3a20 626f 6f6c  ail_result: bool
-00035270: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-00035280: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00035290: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
-000352a0: 7265 5f6c 696d 6974 5f6f 665f 6c65 6e67  re_limit_of_leng
-000352b0: 7468 3a20 626f 6f6c 2c20 6465 6661 756c  th: bool, defaul
-000352c0: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-000352d0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-000352e0: 206c 696d 6974 5f6f 665f 6c65 6e67 7468   limit_of_length
-000352f0: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
-00035300: 3030 3030 2e0d 0a20 2020 2020 2020 2020  0000...         
-00035310: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-00035320: 5f69 676e 6f72 655f 656d 7074 795f 7175  _ignore_empty_qu
-00035330: 6572 793a 2062 6f6f 6c2c 2064 6566 6175  ery: bool, defau
-00035340: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
-00035350: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00035360: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
-00035370: 5f61 6674 6572 5f66 7265 713a 2069 6e74  _after_freq: int
-00035380: 2c20 6465 6661 756c 7420 3130 3030 2e0d  , default 1000..
-00035390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000353a0: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
-000353b0: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-000353c0: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
-000353d0: 6175 6c74 2031 3530 302e 0d0a 2020 2020  ault 1500...    
-000353e0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-000353f0: 616d 2069 665f 7368 6f77 5f74 696d 655f  am if_show_time_
-00035400: 7374 6174 3a20 626f 6f6c 2c20 6465 6661  stat: bool, defa
-00035410: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-00035420: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00035430: 616d 2073 686f 775f 7469 6d65 5f73 7461  am show_time_sta
-00035440: 745f 7072 6563 6973 696f 6e3a 2069 6e74  t_precision: int
-00035450: 2c20 6465 6661 756c 7420 322e 0d0a 2020  , default 2...  
-00035460: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00035470: 6172 616d 2069 665f 7072 696e 745f 7761  aram if_print_wa
-00035480: 726e 696e 673a 2062 6f6f 6c2c 2064 6566  rning: bool, def
-00035490: 6175 6c74 2054 7275 652e 0d0a 2020 2020  ault True...    
-000354a0: 2020 2020 3a72 6574 7572 6e3a 2073 7472      :return: str
-000354b0: 206f 7220 6469 6374 0d0a 2020 2020 2020   or dict..      
-000354c0: 2020 2222 220d 0a0d 0a20 2020 2020 2020    """....       
-000354d0: 2074 696d 656f 7574 203d 206b 7761 7267   timeout = kwarg
-000354e0: 732e 6765 7428 2774 696d 656f 7574 272c  s.get('timeout',
-000354f0: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
-00035500: 7072 6f78 6965 7320 3d20 6b77 6172 6773  proxies = kwargs
-00035510: 2e67 6574 2827 7072 6f78 6965 7327 2c20  .get('proxies', 
-00035520: 4e6f 6e65 290d 0a20 2020 2020 2020 2073  None)..        s
-00035530: 6c65 6570 5f73 6563 6f6e 6473 203d 206b  leep_seconds = k
-00035540: 7761 7267 732e 6765 7428 2773 6c65 6570  wargs.get('sleep
-00035550: 5f73 6563 6f6e 6473 272c 2030 290d 0a20  _seconds', 0).. 
-00035560: 2020 2020 2020 2069 665f 7072 696e 745f         if_print_
-00035570: 7761 726e 696e 6720 3d20 6b77 6172 6773  warning = kwargs
-00035580: 2e67 6574 2827 6966 5f70 7269 6e74 5f77  .get('if_print_w
-00035590: 6172 6e69 6e67 272c 2054 7275 6529 0d0a  arning', True)..
-000355a0: 2020 2020 2020 2020 6973 5f64 6574 6169          is_detai
-000355b0: 6c5f 7265 7375 6c74 203d 206b 7761 7267  l_result = kwarg
-000355c0: 732e 6765 7428 2769 735f 6465 7461 696c  s.get('is_detail
-000355d0: 5f72 6573 756c 7427 2c20 4661 6c73 6529  _result', False)
-000355e0: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
-000355f0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-00035600: 7265 7120 3d20 6b77 6172 6773 2e67 6574  req = kwargs.get
-00035610: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
-00035620: 5f61 6674 6572 5f66 7265 7127 2c20 7365  _after_freq', se
-00035630: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
-00035640: 6f6e 5f66 7265 7129 0d0a 2020 2020 2020  on_freq)..      
-00035650: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
-00035660: 5f61 6674 6572 5f73 6563 6f6e 6473 203d  _after_seconds =
-00035670: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
-00035680: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-00035690: 725f 7365 636f 6e64 7327 2c20 7365 6c66  r_seconds', self
-000356a0: 2e64 6566 6175 6c74 5f73 6573 7369 6f6e  .default_session
-000356b0: 5f73 6563 6f6e 6473 290d 0a20 2020 2020  _seconds)..     
-000356c0: 2020 2073 656c 662e 6368 6563 6b5f 696e     self.check_in
-000356d0: 7075 745f 6c69 6d69 7428 7175 6572 795f  put_limit(query_
-000356e0: 7465 7874 2c20 7365 6c66 2e69 6e70 7574  text, self.input
-000356f0: 5f6c 696d 6974 290d 0a0d 0a20 2020 2020  _limit)....     
-00035700: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
-00035710: 6e64 5f66 7265 7120 3d20 3120 6966 2073  nd_freq = 1 if s
-00035720: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
-00035730: 2520 7570 6461 7465 5f73 6573 7369 6f6e  % update_session
-00035740: 5f61 6674 6572 5f66 7265 7120 213d 2030  _after_freq != 0
-00035750: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
-00035760: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
-00035770: 5f74 696d 6520 3d20 3120 6966 2074 696d  _time = 1 if tim
-00035780: 652e 7469 6d65 2829 202d 2073 656c 662e  e.time() - self.
-00035790: 6265 6769 6e5f 7469 6d65 203c 2075 7064  begin_time < upd
-000357a0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-000357b0: 725f 7365 636f 6e64 7320 656c 7365 2030  r_seconds else 0
-000357c0: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
-000357d0: 2028 7365 6c66 2e73 6573 7369 6f6e 2061   (self.session a
-000357e0: 6e64 2073 656c 662e 6c61 6e67 7561 6765  nd self.language
-000357f0: 5f6d 6170 2061 6e64 206e 6f74 5f75 7064  _map and not_upd
-00035800: 6174 655f 636f 6e64 5f66 7265 7120 616e  ate_cond_freq an
-00035810: 6420 6e6f 745f 7570 6461 7465 5f63 6f6e  d not_update_con
-00035820: 645f 7469 6d65 293a 0d0a 2020 2020 2020  d_time):..      
-00035830: 2020 2020 2020 7365 6c66 2e62 6567 696e        self.begin
-00035840: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
-00035850: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
-00035860: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
-00035870: 7265 7175 6573 7473 2e53 6573 7369 6f6e  requests.Session
-00035880: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-00035890: 5f20 3d20 7365 6c66 2e73 6573 7369 6f6e  _ = self.session
-000358a0: 2e67 6574 2873 656c 662e 686f 7374 5f75  .get(self.host_u
-000358b0: 726c 2c20 6865 6164 6572 733d 7365 6c66  rl, headers=self
-000358c0: 2e68 6f73 745f 6865 6164 6572 732c 2074  .host_headers, t
-000358d0: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
-000358e0: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
-000358f0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00035900: 6c66 2e63 6f6e 6669 675f 6461 7461 203d  lf.config_data =
-00035910: 2073 656c 662e 7365 7373 696f 6e2e 6765   self.session.ge
-00035920: 7428 7365 6c66 2e67 6574 5f63 6f6e 6669  t(self.get_confi
-00035930: 675f 7572 6c2c 2068 6561 6465 7273 3d73  g_url, headers=s
-00035940: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
-00035950: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
-00035960: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
-00035970: 6573 292e 6a73 6f6e 2829 0d0a 2020 2020  es).json()..    
-00035980: 2020 2020 2020 2020 7365 6c66 2e61 7069          self.api
-00035990: 5f68 6561 6465 7273 2e75 7064 6174 6528  _headers.update(
-000359a0: 7b27 636c 6965 6e74 2d69 6427 3a20 7365  {'client-id': se
-000359b0: 6c66 2e63 6f6e 6669 675f 6461 7461 5b27  lf.config_data['
-000359c0: 6d74 275d 5b27 6170 6927 5d5b 2763 6c69  mt']['api']['cli
-000359d0: 656e 7449 6427 5d7d 2920 2023 206d 7573  entId']})  # mus
-000359e0: 7420 6c6f 7765 7220 6b65 7977 6f72 640d  t lower keyword.
-000359f0: 0a0d 0a20 2020 2020 2020 2020 2020 2073  ...            s
-00035a00: 7973 5f75 726c 203d 2073 656c 662e 636f  ys_url = self.co
+00031e70: 6170 693d 5472 7565 2c20 6966 5f6a 736f  api=True, if_jso
+00031e80: 6e5f 666f 725f 6170 693d 5472 7565 290d  n_for_api=True).
+00031e90: 0a20 2020 2020 2020 2073 656c 662e 6170  .        self.ap
+00031ea0: 695f 7465 7874 5f68 6561 6465 7273 203d  i_text_headers =
+00031eb0: 2073 656c 662e 6765 745f 6865 6164 6572   self.get_header
+00031ec0: 7328 7365 6c66 2e68 6f6d 655f 7572 6c2c  s(self.home_url,
+00031ed0: 2069 665f 6170 693d 5472 7565 2c20 6966   if_api=True, if
+00031ee0: 5f61 6a61 785f 666f 725f 6170 693d 4661  _ajax_for_api=Fa
+00031ef0: 6c73 6529 0d0a 2020 2020 2020 2020 7365  lse)..        se
+00031f00: 6c66 2e73 6573 7369 6f6e 203d 204e 6f6e  lf.session = Non
+00031f10: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
+00031f20: 6c61 6e67 7561 6765 5f6d 6170 203d 204e  language_map = N
+00031f30: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
+00031f40: 662e 7472 616e 5f6b 6579 203d 204e 6f6e  f.tran_key = Non
+00031f50: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
+00031f60: 7472 616e 735f 6964 203d 2073 7472 2875  trans_id = str(u
+00031f70: 7569 642e 7575 6964 3428 2929 0d0a 2020  uid.uuid4())..  
+00031f80: 2020 2020 2020 7365 6c66 2e75 7365 725f        self.user_
+00031f90: 6964 203d 2073 7472 2875 7569 642e 7575  id = str(uuid.uu
+00031fa0: 6964 3428 2929 0d0a 2020 2020 2020 2020  id4())..        
+00031fb0: 7365 6c66 2e6c 616e 675f 7a68 5f6d 6170  self.lang_zh_map
+00031fc0: 203d 207b 277a 682d 434e 273a 2027 7a68   = {'zh-CN': 'zh
+00031fd0: 272c 2027 7a68 2d54 5727 3a20 277a 7427  ', 'zh-TW': 'zt'
+00031fe0: 7d0d 0a20 2020 2020 2020 2073 656c 662e  }..        self.
+00031ff0: 7175 6572 795f 636f 756e 7420 3d20 300d  query_count = 0.
+00032000: 0a20 2020 2020 2020 2073 656c 662e 6f75  .        self.ou
+00032010: 7470 7574 5f7a 6820 3d20 277a 6827 0d0a  tput_zh = 'zh'..
+00032020: 2020 2020 2020 2020 7365 6c66 2e69 6e70          self.inp
+00032030: 7574 5f6c 696d 6974 203d 2069 6e74 2832  ut_limit = int(2
+00032040: 6533 290d 0a20 2020 2020 2020 2073 656c  e3)..        sel
+00032050: 662e 6465 6661 756c 745f 6672 6f6d 5f6c  f.default_from_l
+00032060: 616e 6775 6167 6520 3d20 7365 6c66 2e6f  anguage = self.o
+00032070: 7574 7075 745f 7a68 0d0a 0d0a 2020 2020  utput_zh....    
+00032080: 4054 7365 2e64 6562 7567 5f6c 616e 6775  @Tse.debug_langu
+00032090: 6167 655f 6d61 700d 0a20 2020 2064 6566  age_map..    def
+000320a0: 2067 6574 5f6c 616e 6775 6167 655f 6d61   get_language_ma
+000320b0: 7028 7365 6c66 2c20 6c61 6e67 5f75 726c  p(self, lang_url
+000320c0: 3a20 7374 722c 2073 733a 2053 6573 7369  : str, ss: Sessi
+000320d0: 6f6e 5479 7065 2c20 6865 6164 6572 733a  onType, headers:
+000320e0: 2064 6963 742c 2074 696d 656f 7574 3a20   dict, timeout: 
+000320f0: 4f70 7469 6f6e 616c 5b66 6c6f 6174 5d2c  Optional[float],
+00032100: 2070 726f 7869 6573 3a20 4f70 7469 6f6e   proxies: Option
+00032110: 616c 5b64 6963 745d 2c20 2a2a 6b77 6172  al[dict], **kwar
+00032120: 6773 3a20 4c61 6e67 4d61 704b 7761 7267  gs: LangMapKwarg
+00032130: 7354 7970 6529 202d 3e20 6469 6374 3a0d  sType) -> dict:.
+00032140: 0a20 2020 2020 2020 206a 735f 6874 6d6c  .        js_html
+00032150: 203d 2073 732e 6765 7428 6c61 6e67 5f75   = ss.get(lang_u
+00032160: 726c 2c20 6865 6164 6572 733d 6865 6164  rl, headers=head
+00032170: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
+00032180: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
+00032190: 6f78 6965 7329 2e74 6578 740d 0a20 2020  oxies).text..   
+000321a0: 2020 2020 206c 616e 675f 7061 6972 7320       lang_pairs 
+000321b0: 3d20 7265 2e63 6f6d 7069 6c65 2827 222f  = re.compile('"/
+000321c0: 7472 6961 6c2f 285c 5c77 7b32 7d29 2f28  trial/(\\w{2})/(
+000321d0: 5c5c 777b 327d 2922 2729 2e66 696e 6461  \\w{2})"').finda
+000321e0: 6c6c 286a 735f 6874 6d6c 290d 0a20 2020  ll(js_html)..   
+000321f0: 2020 2020 2072 6574 7572 6e20 7b66 5f6c       return {f_l
+00032200: 616e 673a 205b 7620 666f 7220 6b2c 2076  ang: [v for k, v
+00032210: 2069 6e20 6c61 6e67 5f70 6169 7273 2069   in lang_pairs i
+00032220: 6620 6b20 3d3d 2066 5f6c 616e 675d 2066  f k == f_lang] f
+00032230: 6f72 2066 5f6c 616e 672c 2074 5f6c 616e  or f_lang, t_lan
+00032240: 6720 696e 206c 616e 675f 7061 6972 737d  g in lang_pairs}
+00032250: 0d0a 0d0a 2020 2020 4054 7365 2e75 6e63  ....    @Tse.unc
+00032260: 6572 7469 6669 6564 0d0a 2020 2020 4054  ertified..    @T
+00032270: 7365 2e74 696d 655f 7374 6174 0d0a 2020  se.time_stat..  
+00032280: 2020 4054 7365 2e63 6865 636b 5f71 7565    @Tse.check_que
+00032290: 7279 0d0a 2020 2020 6465 6620 6d69 7261  ry..    def mira
+000322a0: 695f 6170 6928 7365 6c66 2c20 7175 6572  i_api(self, quer
+000322b0: 795f 7465 7874 3a20 7374 722c 2066 726f  y_text: str, fro
+000322c0: 6d5f 6c61 6e67 7561 6765 3a20 7374 7220  m_language: str 
+000322d0: 3d20 2761 7574 6f27 2c20 746f 5f6c 616e  = 'auto', to_lan
+000322e0: 6775 6167 653a 2073 7472 203d 2027 6a61  guage: str = 'ja
+000322f0: 272c 202a 2a6b 7761 7267 733a 2041 7069  ', **kwargs: Api
+00032300: 4b77 6172 6773 5479 7065 2920 2d3e 2055  KwargsType) -> U
+00032310: 6e69 6f6e 5b73 7472 2c20 6469 6374 5d3a  nion[str, dict]:
+00032320: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00032330: 2020 2020 2020 2068 7474 7073 3a2f 2f6d         https://m
+00032340: 6972 6169 7472 616e 736c 6174 652e 636f  iraitranslate.co
+00032350: 6d2f 656e 2f74 7269 616c 2f0d 0a20 2020  m/en/trial/..   
+00032360: 2020 2020 203a 7061 7261 6d20 7175 6572       :param quer
+00032370: 795f 7465 7874 3a20 7374 722c 206d 7573  y_text: str, mus
+00032380: 742e 0d0a 2020 2020 2020 2020 3a70 6172  t...        :par
+00032390: 616d 2066 726f 6d5f 6c61 6e67 7561 6765  am from_language
+000323a0: 3a20 7374 722c 2064 6566 6175 6c74 2027  : str, default '
+000323b0: 6175 746f 272e 0d0a 2020 2020 2020 2020  auto'...        
+000323c0: 3a70 6172 616d 2074 6f5f 6c61 6e67 7561  :param to_langua
+000323d0: 6765 3a20 7374 722c 2064 6566 6175 6c74  ge: str, default
+000323e0: 2027 6a61 272e 0d0a 2020 2020 2020 2020   'ja'...        
+000323f0: 3a70 6172 616d 202a 2a6b 7761 7267 733a  :param **kwargs:
+00032400: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00032410: 2020 3a70 6172 616d 2074 696d 656f 7574    :param timeout
+00032420: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
+00032430: 204e 6f6e 652e 0d0a 2020 2020 2020 2020   None...        
+00032440: 2020 2020 2020 2020 3a70 6172 616d 2070          :param p
+00032450: 726f 7869 6573 3a20 6469 6374 2c20 6465  roxies: dict, de
+00032460: 6661 756c 7420 4e6f 6e65 2e0d 0a20 2020  fault None...   
+00032470: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00032480: 7261 6d20 736c 6565 705f 7365 636f 6e64  ram sleep_second
+00032490: 733a 2066 6c6f 6174 2c20 6465 6661 756c  s: float, defaul
+000324a0: 7420 302e 0d0a 2020 2020 2020 2020 2020  t 0...          
+000324b0: 2020 2020 2020 3a70 6172 616d 2069 735f        :param is_
+000324c0: 6465 7461 696c 5f72 6573 756c 743a 2062  detail_result: b
+000324d0: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
+000324e0: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
+000324f0: 2020 2020 203a 7061 7261 6d20 6966 5f69       :param if_i
+00032500: 676e 6f72 655f 6c69 6d69 745f 6f66 5f6c  gnore_limit_of_l
+00032510: 656e 6774 683a 2062 6f6f 6c2c 2064 6566  ength: bool, def
+00032520: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
+00032530: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00032540: 7261 6d20 6c69 6d69 745f 6f66 5f6c 656e  ram limit_of_len
+00032550: 6774 683a 2069 6e74 2c20 6465 6661 756c  gth: int, defaul
+00032560: 7420 3230 3030 302e 0d0a 2020 2020 2020  t 20000...      
+00032570: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00032580: 2069 665f 6967 6e6f 7265 5f65 6d70 7479   if_ignore_empty
+00032590: 5f71 7565 7279 3a20 626f 6f6c 2c20 6465  _query: bool, de
+000325a0: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
+000325b0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+000325c0: 6172 616d 2075 7064 6174 655f 7365 7373  aram update_sess
+000325d0: 696f 6e5f 6166 7465 725f 6672 6571 3a20  ion_after_freq: 
+000325e0: 696e 742c 2064 6566 6175 6c74 2031 3030  int, default 100
+000325f0: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+00032600: 2020 2020 3a70 6172 616d 2075 7064 6174      :param updat
+00032610: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
+00032620: 7365 636f 6e64 733a 2066 6c6f 6174 2c20  seconds: float, 
+00032630: 6465 6661 756c 7420 3135 3030 2e0d 0a20  default 1500... 
+00032640: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00032650: 7061 7261 6d20 6966 5f73 686f 775f 7469  param if_show_ti
+00032660: 6d65 5f73 7461 743a 2062 6f6f 6c2c 2064  me_stat: bool, d
+00032670: 6566 6175 6c74 2046 616c 7365 2e0d 0a20  efault False... 
+00032680: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00032690: 7061 7261 6d20 7368 6f77 5f74 696d 655f  param show_time_
+000326a0: 7374 6174 5f70 7265 6369 7369 6f6e 3a20  stat_precision: 
+000326b0: 696e 742c 2064 6566 6175 6c74 2032 2e0d  int, default 2..
+000326c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000326d0: 203a 7061 7261 6d20 6966 5f70 7269 6e74   :param if_print
+000326e0: 5f77 6172 6e69 6e67 3a20 626f 6f6c 2c20  _warning: bool, 
+000326f0: 6465 6661 756c 7420 5472 7565 2e0d 0a20  default True... 
+00032700: 2020 2020 2020 203a 7265 7475 726e 3a20         :return: 
+00032710: 7374 7220 6f72 2064 6963 740d 0a20 2020  str or dict..   
+00032720: 2020 2020 2022 2222 0d0a 0d0a 2020 2020       """....    
+00032730: 2020 2020 7469 6d65 6f75 7420 3d20 6b77      timeout = kw
+00032740: 6172 6773 2e67 6574 2827 7469 6d65 6f75  args.get('timeou
+00032750: 7427 2c20 4e6f 6e65 290d 0a20 2020 2020  t', None)..     
+00032760: 2020 2070 726f 7869 6573 203d 206b 7761     proxies = kwa
+00032770: 7267 732e 6765 7428 2770 726f 7869 6573  rgs.get('proxies
+00032780: 272c 204e 6f6e 6529 0d0a 2020 2020 2020  ', None)..      
+00032790: 2020 736c 6565 705f 7365 636f 6e64 7320    sleep_seconds 
+000327a0: 3d20 6b77 6172 6773 2e67 6574 2827 736c  = kwargs.get('sl
+000327b0: 6565 705f 7365 636f 6e64 7327 2c20 3029  eep_seconds', 0)
+000327c0: 0d0a 2020 2020 2020 2020 6966 5f70 7269  ..        if_pri
+000327d0: 6e74 5f77 6172 6e69 6e67 203d 206b 7761  nt_warning = kwa
+000327e0: 7267 732e 6765 7428 2769 665f 7072 696e  rgs.get('if_prin
+000327f0: 745f 7761 726e 696e 6727 2c20 5472 7565  t_warning', True
+00032800: 290d 0a20 2020 2020 2020 2069 735f 6465  )..        is_de
+00032810: 7461 696c 5f72 6573 756c 7420 3d20 6b77  tail_result = kw
+00032820: 6172 6773 2e67 6574 2827 6973 5f64 6574  args.get('is_det
+00032830: 6169 6c5f 7265 7375 6c74 272c 2046 616c  ail_result', Fal
+00032840: 7365 290d 0a20 2020 2020 2020 2075 7064  se)..        upd
+00032850: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+00032860: 725f 6672 6571 203d 206b 7761 7267 732e  r_freq = kwargs.
+00032870: 6765 7428 2775 7064 6174 655f 7365 7373  get('update_sess
+00032880: 696f 6e5f 6166 7465 725f 6672 6571 272c  ion_after_freq',
+00032890: 2073 656c 662e 6465 6661 756c 745f 7365   self.default_se
+000328a0: 7373 696f 6e5f 6672 6571 290d 0a20 2020  ssion_freq)..   
+000328b0: 2020 2020 2075 7064 6174 655f 7365 7373       update_sess
+000328c0: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
+000328d0: 7320 3d20 6b77 6172 6773 2e67 6574 2827  s = kwargs.get('
+000328e0: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+000328f0: 6674 6572 5f73 6563 6f6e 6473 272c 2073  fter_seconds', s
+00032900: 656c 662e 6465 6661 756c 745f 7365 7373  elf.default_sess
+00032910: 696f 6e5f 7365 636f 6e64 7329 0d0a 2020  ion_seconds)..  
+00032920: 2020 2020 2020 7365 6c66 2e63 6865 636b        self.check
+00032930: 5f69 6e70 7574 5f6c 696d 6974 2871 7565  _input_limit(que
+00032940: 7279 5f74 6578 742c 2073 656c 662e 696e  ry_text, self.in
+00032950: 7075 745f 6c69 6d69 7429 0d0a 0d0a 2020  put_limit)....  
+00032960: 2020 2020 2020 6e6f 745f 7570 6461 7465        not_update
+00032970: 5f63 6f6e 645f 6672 6571 203d 2031 2069  _cond_freq = 1 i
+00032980: 6620 7365 6c66 2e71 7565 7279 5f63 6f75  f self.query_cou
+00032990: 6e74 2025 2075 7064 6174 655f 7365 7373  nt % update_sess
+000329a0: 696f 6e5f 6166 7465 725f 6672 6571 2021  ion_after_freq !
+000329b0: 3d20 3020 656c 7365 2030 0d0a 2020 2020  = 0 else 0..    
+000329c0: 2020 2020 6e6f 745f 7570 6461 7465 5f63      not_update_c
+000329d0: 6f6e 645f 7469 6d65 203d 2031 2069 6620  ond_time = 1 if 
+000329e0: 7469 6d65 2e74 696d 6528 2920 2d20 7365  time.time() - se
+000329f0: 6c66 2e62 6567 696e 5f74 696d 6520 3c20  lf.begin_time < 
+00032a00: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+00032a10: 6674 6572 5f73 6563 6f6e 6473 2065 6c73  fter_seconds els
+00032a20: 6520 300d 0a20 2020 2020 2020 2069 6620  e 0..        if 
+00032a30: 6e6f 7420 2873 656c 662e 7365 7373 696f  not (self.sessio
+00032a40: 6e20 616e 6420 7365 6c66 2e6c 616e 6775  n and self.langu
+00032a50: 6167 655f 6d61 7020 616e 6420 6e6f 745f  age_map and not_
+00032a60: 7570 6461 7465 5f63 6f6e 645f 6672 6571  update_cond_freq
+00032a70: 2061 6e64 206e 6f74 5f75 7064 6174 655f   and not_update_
+00032a80: 636f 6e64 5f74 696d 6520 616e 6420 7365  cond_time and se
+00032a90: 6c66 2e74 7261 6e5f 6b65 7929 3a0d 0a20  lf.tran_key):.. 
+00032aa0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00032ab0: 6265 6769 6e5f 7469 6d65 203d 2074 696d  begin_time = tim
+00032ac0: 652e 7469 6d65 2829 0d0a 2020 2020 2020  e.time()..      
+00032ad0: 2020 2020 2020 7365 6c66 2e73 6573 7369        self.sessi
+00032ae0: 6f6e 203d 2072 6571 7565 7374 732e 5365  on = requests.Se
+00032af0: 7373 696f 6e28 290d 0a20 2020 2020 2020  ssion()..       
+00032b00: 2020 2020 2023 205f 203d 2073 656c 662e       # _ = self.
+00032b10: 7365 7373 696f 6e2e 6765 7428 7365 6c66  session.get(self
+00032b20: 2e68 6f6d 655f 7572 6c2c 2068 6561 6465  .home_url, heade
+00032b30: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
+00032b40: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+00032b50: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+00032b60: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
+00032b70: 2020 2020 2068 6f73 745f 6874 6d6c 203d       host_html =
+00032b80: 2073 656c 662e 7365 7373 696f 6e2e 6765   self.session.ge
+00032b90: 7428 7365 6c66 2e68 6f73 745f 7572 6c2c  t(self.host_url,
+00032ba0: 2068 6561 6465 7273 3d73 656c 662e 686f   headers=self.ho
+00032bb0: 7374 5f68 6561 6465 7273 2c20 7469 6d65  st_headers, time
+00032bc0: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
+00032bd0: 7869 6573 3d70 726f 7869 6573 292e 7465  xies=proxies).te
+00032be0: 7874 0d0a 2020 2020 2020 2020 2020 2020  xt..            
+00032bf0: 7365 6c66 2e74 7261 6e5f 6b65 7920 3d20  self.tran_key = 
+00032c00: 7265 2e63 6f6d 7069 6c65 2827 7661 7220  re.compile('var 
+00032c10: 7472 616e 203d 2022 282e 2a3f 2922 3b27  tran = "(.*?)";'
+00032c20: 292e 7365 6172 6368 2868 6f73 745f 6874  ).search(host_ht
+00032c30: 6d6c 292e 6772 6f75 7028 3129 0d0a 2020  ml).group(1)..  
+00032c40: 2020 2020 2020 2020 2020 6c61 6e67 5f75            lang_u
+00032c50: 726c 5f70 6172 7420 3d20 7265 2e63 6f6d  rl_part = re.com
+00032c60: 7069 6c65 2873 656c 662e 6c61 6e67 5f75  pile(self.lang_u
+00032c70: 726c 5f70 6174 7465 726e 292e 7365 6172  rl_pattern).sear
+00032c80: 6368 2868 6f73 745f 6874 6d6c 292e 6772  ch(host_html).gr
+00032c90: 6f75 7028 290d 0a20 2020 2020 2020 2020  oup()..         
+00032ca0: 2020 2073 656c 662e 6c61 6e67 5f75 726c     self.lang_url
+00032cb0: 203d 2066 2768 7474 7073 3a2f 2f6d 6972   = f'https://mir
+00032cc0: 6169 7472 616e 736c 6174 652e 636f 6d2f  aitranslate.com/
+00032cd0: 7472 6961 6c2f 696e 6d74 2f7b 6c61 6e67  trial/inmt/{lang
+00032ce0: 5f75 726c 5f70 6172 747d 270d 0a20 2020  _url_part}'..   
+00032cf0: 2020 2020 2020 2020 2064 6562 7567 5f6c           debug_l
+00032d00: 616e 675f 6b77 6172 6773 203d 2073 656c  ang_kwargs = sel
+00032d10: 662e 6465 6275 675f 6c61 6e67 5f6b 7761  f.debug_lang_kwa
+00032d20: 7267 7328 6672 6f6d 5f6c 616e 6775 6167  rgs(from_languag
+00032d30: 652c 2074 6f5f 6c61 6e67 7561 6765 2c20  e, to_language, 
+00032d40: 7365 6c66 2e64 6566 6175 6c74 5f66 726f  self.default_fro
+00032d50: 6d5f 6c61 6e67 7561 6765 2c20 6966 5f70  m_language, if_p
+00032d60: 7269 6e74 5f77 6172 6e69 6e67 290d 0a20  rint_warning).. 
+00032d70: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00032d80: 6c61 6e67 7561 6765 5f6d 6170 203d 2073  language_map = s
+00032d90: 656c 662e 6765 745f 6c61 6e67 7561 6765  elf.get_language
+00032da0: 5f6d 6170 2873 656c 662e 6c61 6e67 5f75  _map(self.lang_u
+00032db0: 726c 2c20 7365 6c66 2e73 6573 7369 6f6e  rl, self.session
+00032dc0: 2c20 7365 6c66 2e61 7069 5f6a 736f 6e5f  , self.api_json_
+00032dd0: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
+00032de0: 2c20 7072 6f78 6965 732c 202a 2a64 6562  , proxies, **deb
+00032df0: 7567 5f6c 616e 675f 6b77 6172 6773 290d  ug_lang_kwargs).
+00032e00: 0a0d 0a20 2020 2020 2020 2069 6620 6672  ...        if fr
+00032e10: 6f6d 5f6c 616e 6775 6167 6520 3d3d 2027  om_language == '
+00032e20: 6175 746f 273a 0d0a 2020 2020 2020 2020  auto':..        
+00032e30: 2020 2020 7220 3d20 7365 6c66 2e73 6573      r = self.ses
+00032e40: 7369 6f6e 2e70 6f73 7428 7365 6c66 2e64  sion.post(self.d
+00032e50: 6574 6563 745f 6c61 6e67 5f75 726c 2c20  etect_lang_url, 
+00032e60: 6865 6164 6572 733d 7365 6c66 2e61 7069  headers=self.api
+00032e70: 5f6a 736f 6e5f 6865 6164 6572 732c 206a  _json_headers, j
+00032e80: 736f 6e3d 7b27 7465 7874 273a 2071 7565  son={'text': que
+00032e90: 7279 5f74 6578 747d 2c20 7469 6d65 6f75  ry_text}, timeou
+00032ea0: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
+00032eb0: 6573 3d70 726f 7869 6573 290d 0a20 2020  es=proxies)..   
+00032ec0: 2020 2020 2020 2020 2066 726f 6d5f 6c61           from_la
+00032ed0: 6e67 7561 6765 203d 2072 2e6a 736f 6e28  nguage = r.json(
+00032ee0: 295b 276c 616e 6775 6167 6527 5d0d 0a20  )['language'].. 
+00032ef0: 2020 2020 2020 2020 2020 2066 726f 6d5f             from_
+00032f00: 6c61 6e67 7561 6765 203d 2073 656c 662e  language = self.
+00032f10: 6c61 6e67 5f7a 685f 6d61 705b 6672 6f6d  lang_zh_map[from
+00032f20: 5f6c 616e 6775 6167 655d 2069 6620 277a  _language] if 'z
+00032f30: 6827 2069 6e20 6672 6f6d 5f6c 616e 6775  h' in from_langu
+00032f40: 6167 6520 656c 7365 2066 726f 6d5f 6c61  age else from_la
+00032f50: 6e67 7561 6765 0d0a 2020 2020 2020 2020  nguage..        
+00032f60: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
+00032f70: 6f5f 6c61 6e67 7561 6765 203d 2073 656c  o_language = sel
+00032f80: 662e 6368 6563 6b5f 6c61 6e67 7561 6765  f.check_language
+00032f90: 2866 726f 6d5f 6c61 6e67 7561 6765 2c20  (from_language, 
+00032fa0: 746f 5f6c 616e 6775 6167 652c 2073 656c  to_language, sel
+00032fb0: 662e 6c61 6e67 7561 6765 5f6d 6170 2c20  f.language_map, 
+00032fc0: 6f75 7470 7574 5f7a 683d 7365 6c66 2e6f  output_zh=self.o
+00032fd0: 7574 7075 745f 7a68 290d 0a0d 0a20 2020  utput_zh)....   
+00032fe0: 2020 2020 2074 7261 6365 5f64 6174 6120       trace_data 
+00032ff0: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
+00033000: 2027 6f70 6572 6174 696f 6e54 7970 6527   'operationType'
+00033010: 3a20 2753 4c41 272c 0d0a 2020 2020 2020  : 'SLA',..      
+00033020: 2020 2020 2020 276c 616e 6727 3a20 6672        'lang': fr
+00033030: 6f6d 5f6c 616e 6775 6167 652c 0d0a 2020  om_language,..  
+00033040: 2020 2020 2020 2020 2020 2773 6f75 7263            'sourc
+00033050: 6527 3a20 7175 6572 795f 7465 7874 2c0d  e': query_text,.
+00033060: 0a20 2020 2020 2020 2020 2020 2027 7573  .            'us
+00033070: 6572 4964 273a 2073 656c 662e 7573 6572  erId': self.user
+00033080: 5f69 642c 0d0a 2020 2020 2020 2020 2020  _id,..          
+00033090: 2020 2774 7261 6e73 4964 273a 2073 656c    'transId': sel
+000330a0: 662e 7472 616e 735f 6964 2c0d 0a20 2020  f.trans_id,..   
+000330b0: 2020 2020 2020 2020 2027 756e 6971 7565           'unique
+000330c0: 4964 273a 2073 656c 662e 7472 616e 5f6b  Id': self.tran_k
+000330d0: 6579 2c0d 0a20 2020 2020 2020 2020 2020  ey,..           
+000330e0: 2027 6461 7465 273a 2066 277b 6461 7465   'date': f'{date
+000330f0: 7469 6d65 2e64 6174 6574 696d 652e 7574  time.datetime.ut
+00033100: 636e 6f77 2829 2e69 736f 666f 726d 6174  cnow().isoformat
+00033110: 2829 5b3a 2d33 5d7d 5a27 2c0d 0a20 2020  ()[:-3]}Z',..   
+00033120: 2020 2020 207d 0d0a 2020 2020 2020 2020       }..        
+00033130: 5f20 3d20 7365 6c66 2e73 6573 7369 6f6e  _ = self.session
+00033140: 2e70 6f73 7428 7365 6c66 2e74 7261 6365  .post(self.trace
+00033150: 5f75 726c 2c20 6a73 6f6e 3d74 7261 6365  _url, json=trace
+00033160: 5f64 6174 612c 2068 6561 6465 7273 3d73  _data, headers=s
+00033170: 656c 662e 6170 695f 7465 7874 5f68 6561  elf.api_text_hea
+00033180: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+00033190: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+000331a0: 726f 7869 6573 290d 0a0d 0a20 2020 2020  roxies)....     
+000331b0: 2020 2070 6179 6c6f 6164 203d 207b 0d0a     payload = {..
+000331c0: 2020 2020 2020 2020 2020 2020 2769 6e70              'inp
+000331d0: 7574 273a 2071 7565 7279 5f74 6578 742c  ut': query_text,
+000331e0: 0d0a 2020 2020 2020 2020 2020 2020 2773  ..            's
+000331f0: 6f75 7263 6527 3a20 6672 6f6d 5f6c 616e  ource': from_lan
+00033200: 6775 6167 652c 0d0a 2020 2020 2020 2020  guage,..        
+00033210: 2020 2020 2774 6172 6765 7427 3a20 746f      'target': to
+00033220: 5f6c 616e 6775 6167 652c 0d0a 2020 2020  _language,..    
+00033230: 2020 2020 2020 2020 2774 7261 6e27 3a20          'tran': 
+00033240: 7365 6c66 2e74 7261 6e5f 6b65 792c 0d0a  self.tran_key,..
+00033250: 2020 2020 2020 2020 2020 2020 2761 6461              'ada
+00033260: 7074 5068 7261 7365 7327 3a20 5b5d 2c0d  ptPhrases': [],.
+00033270: 0a20 2020 2020 2020 2020 2020 2027 6669  .            'fi
+00033280: 6c74 6572 5f70 726f 6669 6c65 273a 2027  lter_profile': '
+00033290: 6e6d 7427 2c0d 0a20 2020 2020 2020 2020  nmt',..         
+000332a0: 2020 2027 7072 6f66 696c 6527 3a20 2769     'profile': 'i
+000332b0: 6e6d 7427 2c0d 0a20 2020 2020 2020 2020  nmt',..         
+000332c0: 2020 2027 7573 6550 7265 6669 7827 3a20     'usePrefix': 
+000332d0: 2766 616c 7365 272c 0d0a 2020 2020 2020  'false',..      
+000332e0: 2020 2020 2020 277a 7427 3a20 2774 7275        'zt': 'tru
+000332f0: 6527 2069 6620 277a 7427 2069 6e20 2866  e' if 'zt' in (f
+00033300: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
+00033310: 5f6c 616e 6775 6167 6529 2065 6c73 6520  _language) else 
+00033320: 2766 616c 7365 272c 0d0a 2020 2020 2020  'false',..      
+00033330: 2020 2020 2020 2749 6e6d 7454 6172 6765        'InmtTarge
+00033340: 7427 3a20 2727 2c0d 0a20 2020 2020 2020  t': '',..       
+00033350: 2020 2020 2027 496e 6d74 5472 616e 736c       'InmtTransl
+00033360: 6174 6554 7970 6527 3a20 2767 6973 7469  ateType': 'gisti
+00033370: 6e67 272c 0d0a 2020 2020 2020 2020 7d0d  ng',..        }.
+00033380: 0a20 2020 2020 2020 2072 203d 2073 656c  .        r = sel
+00033390: 662e 7365 7373 696f 6e2e 706f 7374 2873  f.session.post(s
+000333a0: 656c 662e 6170 695f 7572 6c2c 2064 6174  elf.api_url, dat
+000333b0: 613d 7061 796c 6f61 642c 2068 6561 6465  a=payload, heade
+000333c0: 7273 3d73 656c 662e 6170 695f 7465 7874  rs=self.api_text
+000333d0: 5f68 6561 6465 7273 2c20 7469 6d65 6f75  _headers, timeou
+000333e0: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
+000333f0: 6573 3d70 726f 7869 6573 290d 0a20 2020  es=proxies)..   
+00033400: 2020 2020 2072 2e72 6169 7365 5f66 6f72       r.raise_for
+00033410: 5f73 7461 7475 7328 290d 0a20 2020 2020  _status()..     
+00033420: 2020 2064 6174 6120 3d20 722e 6a73 6f6e     data = r.json
+00033430: 2829 0d0a 2020 2020 2020 2020 7469 6d65  ()..        time
+00033440: 2e73 6c65 6570 2873 6c65 6570 5f73 6563  .sleep(sleep_sec
+00033450: 6f6e 6473 290d 0a20 2020 2020 2020 2073  onds)..        s
+00033460: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
+00033470: 2b3d 2031 0d0a 2020 2020 2020 2020 7265  += 1..        re
+00033480: 7475 726e 2064 6174 6120 6966 2069 735f  turn data if is_
+00033490: 6465 7461 696c 5f72 6573 756c 7420 656c  detail_result el
+000334a0: 7365 2064 6174 615b 276f 7570 7574 7327  se data['ouputs'
+000334b0: 5d5b 305d 5b27 6f75 7470 7574 275d 5b30  ][0]['output'][0
+000334c0: 5d5b 2774 7261 6e73 6c61 7469 6f6e 275d  ]['translation']
+000334d0: 0d0a 0d0a 0d0a 636c 6173 7320 4170 6572  ......class Aper
+000334e0: 7469 756d 2854 7365 293a 0d0a 2020 2020  tium(Tse):..    
+000334f0: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+00033500: 6629 3a0d 0a20 2020 2020 2020 2073 7570  f):..        sup
+00033510: 6572 2829 2e5f 5f69 6e69 745f 5f28 290d  er().__init__().
+00033520: 0a20 2020 2020 2020 2073 656c 662e 6265  .        self.be
+00033530: 6769 6e5f 7469 6d65 203d 2074 696d 652e  gin_time = time.
+00033540: 7469 6d65 2829 0d0a 2020 2020 2020 2020  time()..        
+00033550: 7365 6c66 2e68 6f73 745f 7572 6c20 3d20  self.host_url = 
+00033560: 2768 7474 7073 3a2f 2f77 7777 2e61 7065  'https://www.ape
+00033570: 7274 6975 6d2e 6f72 672f 270d 0a20 2020  rtium.org/'..   
+00033580: 2020 2020 2073 656c 662e 6170 695f 7572       self.api_ur
+00033590: 6c20 3d20 2768 7474 7073 3a2f 2f61 7065  l = 'https://ape
+000335a0: 7274 6975 6d2e 6f72 672f 6170 792f 7472  rtium.org/apy/tr
+000335b0: 616e 736c 6174 6527 0d0a 2020 2020 2020  anslate'..      
+000335c0: 2020 7365 6c66 2e67 6574 5f6c 616e 675f    self.get_lang_
+000335d0: 7572 6c20 3d20 2768 7474 7073 3a2f 2f77  url = 'https://w
+000335e0: 7777 2e61 7065 7274 6975 6d2e 6f72 672f  ww.apertium.org/
+000335f0: 696e 6465 782e 6a73 270d 0a20 2020 2020  index.js'..     
+00033600: 2020 2073 656c 662e 6465 7465 6374 5f6c     self.detect_l
+00033610: 616e 675f 7572 6c20 3d20 2768 7474 7073  ang_url = 'https
+00033620: 3a2f 2f61 7065 7274 6975 6d2e 6f72 672f  ://apertium.org/
+00033630: 6170 792f 6964 656e 7469 6679 4c61 6e67  apy/identifyLang
+00033640: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+00033650: 686f 7374 5f68 6561 6465 7273 203d 2073  host_headers = s
+00033660: 656c 662e 6765 745f 6865 6164 6572 7328  elf.get_headers(
+00033670: 7365 6c66 2e68 6f73 745f 7572 6c2c 2069  self.host_url, i
+00033680: 665f 6170 693d 4661 6c73 652c 2069 665f  f_api=False, if_
+00033690: 7265 6665 7265 725f 666f 725f 686f 7374  referer_for_host
+000336a0: 3d54 7275 6529 0d0a 2020 2020 2020 2020  =True)..        
+000336b0: 7365 6c66 2e61 7069 5f68 6561 6465 7273  self.api_headers
+000336c0: 203d 2073 656c 662e 6765 745f 6865 6164   = self.get_head
+000336d0: 6572 7328 7365 6c66 2e68 6f73 745f 7572  ers(self.host_ur
+000336e0: 6c2c 2069 665f 6170 693d 5472 7565 290d  l, if_api=True).
+000336f0: 0a20 2020 2020 2020 2073 656c 662e 7365  .        self.se
+00033700: 7373 696f 6e20 3d20 4e6f 6e65 0d0a 2020  ssion = None..  
+00033710: 2020 2020 2020 7365 6c66 2e6c 616e 6775        self.langu
+00033720: 6167 655f 6d61 7020 3d20 4e6f 6e65 0d0a  age_map = None..
+00033730: 2020 2020 2020 2020 7365 6c66 2e71 7565          self.que
+00033740: 7279 5f63 6f75 6e74 203d 2030 0d0a 2020  ry_count = 0..  
+00033750: 2020 2020 2020 7365 6c66 2e6f 7574 7075        self.outpu
+00033760: 745f 7a68 203d 204e 6f6e 6520 2023 2075  t_zh = None  # u
+00033770: 6e73 7570 706f 7274 6564 0d0a 2020 2020  nsupported..    
+00033780: 2020 2020 7365 6c66 2e6f 7574 7075 745f      self.output_
+00033790: 656e 203d 2027 656e 6727 0d0a 2020 2020  en = 'eng'..    
+000337a0: 2020 2020 7365 6c66 2e69 6e70 7574 5f6c      self.input_l
+000337b0: 696d 6974 203d 2069 6e74 2831 6534 2920  imit = int(1e4) 
+000337c0: 2023 2061 6c6d 6f73 7420 6e6f 206c 696d   # almost no lim
+000337d0: 6974 2e0d 0a20 2020 2020 2020 2073 656c  it...        sel
+000337e0: 662e 6465 6661 756c 745f 6672 6f6d 5f6c  f.default_from_l
+000337f0: 616e 6775 6167 6520 3d20 2773 7061 270d  anguage = 'spa'.
+00033800: 0a0d 0a20 2020 2040 5473 652e 6465 6275  ...    @Tse.debu
+00033810: 675f 6c61 6e67 7561 6765 5f6d 6170 0d0a  g_language_map..
+00033820: 2020 2020 6465 6620 6765 745f 6c61 6e67      def get_lang
+00033830: 7561 6765 5f6d 6170 2873 656c 662c 206c  uage_map(self, l
+00033840: 616e 675f 7572 6c3a 2073 7472 2c20 7373  ang_url: str, ss
+00033850: 3a20 5365 7373 696f 6e54 7970 652c 2068  : SessionType, h
+00033860: 6561 6465 7273 3a20 6469 6374 2c20 7469  eaders: dict, ti
+00033870: 6d65 6f75 743a 204f 7074 696f 6e61 6c5b  meout: Optional[
+00033880: 666c 6f61 745d 2c20 7072 6f78 6965 733a  float], proxies:
+00033890: 204f 7074 696f 6e61 6c5b 6469 6374 5d2c   Optional[dict],
+000338a0: 202a 2a6b 7761 7267 733a 204c 616e 674d   **kwargs: LangM
+000338b0: 6170 4b77 6172 6773 5479 7065 2920 2d3e  apKwargsType) ->
+000338c0: 2064 6963 743a 0d0a 2020 2020 2020 2020   dict:..        
+000338d0: 6a73 5f68 746d 6c20 3d20 7373 2e67 6574  js_html = ss.get
+000338e0: 286c 616e 675f 7572 6c2c 2068 6561 6465  (lang_url, heade
+000338f0: 7273 3d68 6561 6465 7273 2c20 7469 6d65  rs=headers, time
+00033900: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
+00033910: 7869 6573 3d70 726f 7869 6573 292e 7465  xies=proxies).te
+00033920: 7874 0d0a 2020 2020 2020 2020 6c61 6e67  xt..        lang
+00033930: 5f70 6169 7273 203d 2072 652e 636f 6d70  _pairs = re.comp
+00033940: 696c 6528 277b 736f 7572 6365 4c61 6e67  ile('{sourceLang
+00033950: 7561 6765 3a22 282e 2a3f 2922 2c74 6172  uage:"(.*?)",tar
+00033960: 6765 744c 616e 6775 6167 653a 2228 2e2a  getLanguage:"(.*
+00033970: 3f29 227d 2729 2e66 696e 6461 6c6c 286a  ?)"}').findall(j
+00033980: 735f 6874 6d6c 290d 0a20 2020 2020 2020  s_html)..       
+00033990: 2072 6574 7572 6e20 7b66 5f6c 616e 673a   return {f_lang:
+000339a0: 205b 7620 666f 7220 6b2c 2076 2069 6e20   [v for k, v in 
+000339b0: 6c61 6e67 5f70 6169 7273 2069 6620 6b20  lang_pairs if k 
+000339c0: 3d3d 2066 5f6c 616e 675d 2066 6f72 2066  == f_lang] for f
+000339d0: 5f6c 616e 672c 2074 5f6c 616e 6720 696e  _lang, t_lang in
+000339e0: 206c 616e 675f 7061 6972 737d 0d0a 0d0a   lang_pairs}....
+000339f0: 2020 2020 4054 7365 2e74 696d 655f 7374      @Tse.time_st
+00033a00: 6174 0d0a 2020 2020 4054 7365 2e63 6865  at..    @Tse.che
+00033a10: 636b 5f71 7565 7279 0d0a 2020 2020 6465  ck_query..    de
+00033a20: 6620 6170 6572 7469 756d 5f61 7069 2873  f apertium_api(s
+00033a30: 656c 662c 2071 7565 7279 5f74 6578 743a  elf, query_text:
+00033a40: 2073 7472 2c20 6672 6f6d 5f6c 616e 6775   str, from_langu
+00033a50: 6167 653a 2073 7472 203d 2027 6175 746f  age: str = 'auto
+00033a60: 272c 2074 6f5f 6c61 6e67 7561 6765 3a20  ', to_language: 
+00033a70: 7374 7220 3d20 2765 6e27 2c20 2a2a 6b77  str = 'en', **kw
+00033a80: 6172 6773 3a20 4170 694b 7761 7267 7354  args: ApiKwargsT
+00033a90: 7970 6529 202d 3e20 556e 696f 6e5b 7374  ype) -> Union[st
+00033aa0: 722c 2064 6963 745d 3a0d 0a20 2020 2020  r, dict]:..     
+00033ab0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00033ac0: 6874 7470 733a 2f2f 7777 772e 6170 6572  https://www.aper
+00033ad0: 7469 756d 2e6f 7267 2f0d 0a20 2020 2020  tium.org/..     
+00033ae0: 2020 203a 7061 7261 6d20 7175 6572 795f     :param query_
+00033af0: 7465 7874 3a20 7374 722c 206d 7573 742e  text: str, must.
+00033b00: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+00033b10: 2066 726f 6d5f 6c61 6e67 7561 6765 3a20   from_language: 
+00033b20: 7374 722c 2064 6566 6175 6c74 2027 6175  str, default 'au
+00033b30: 746f 272e 0d0a 2020 2020 2020 2020 3a70  to'...        :p
+00033b40: 6172 616d 2074 6f5f 6c61 6e67 7561 6765  aram to_language
+00033b50: 3a20 7374 722c 2064 6566 6175 6c74 2027  : str, default '
+00033b60: 656e 272e 0d0a 2020 2020 2020 2020 3a70  en'...        :p
+00033b70: 6172 616d 202a 2a6b 7761 7267 733a 0d0a  aram **kwargs:..
+00033b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033b90: 3a70 6172 616d 2074 696d 656f 7574 3a20  :param timeout: 
+00033ba0: 666c 6f61 742c 2064 6566 6175 6c74 204e  float, default N
+00033bb0: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
+00033bc0: 2020 2020 2020 3a70 6172 616d 2070 726f        :param pro
+00033bd0: 7869 6573 3a20 6469 6374 2c20 6465 6661  xies: dict, defa
+00033be0: 756c 7420 4e6f 6e65 2e0d 0a20 2020 2020  ult None...     
+00033bf0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00033c00: 6d20 736c 6565 705f 7365 636f 6e64 733a  m sleep_seconds:
+00033c10: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
+00033c20: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+00033c30: 2020 2020 3a70 6172 616d 2069 735f 6465      :param is_de
+00033c40: 7461 696c 5f72 6573 756c 743a 2062 6f6f  tail_result: boo
+00033c50: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+00033c60: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00033c70: 2020 203a 7061 7261 6d20 6966 5f69 676e     :param if_ign
+00033c80: 6f72 655f 6c69 6d69 745f 6f66 5f6c 656e  ore_limit_of_len
+00033c90: 6774 683a 2062 6f6f 6c2c 2064 6566 6175  gth: bool, defau
+00033ca0: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+00033cb0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00033cc0: 6d20 6c69 6d69 745f 6f66 5f6c 656e 6774  m limit_of_lengt
+00033cd0: 683a 2069 6e74 2c20 6465 6661 756c 7420  h: int, default 
+00033ce0: 3230 3030 302e 0d0a 2020 2020 2020 2020  20000...        
+00033cf0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00033d00: 665f 6967 6e6f 7265 5f65 6d70 7479 5f71  f_ignore_empty_q
+00033d10: 7565 7279 3a20 626f 6f6c 2c20 6465 6661  uery: bool, defa
+00033d20: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+00033d30: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00033d40: 616d 2075 7064 6174 655f 7365 7373 696f  am update_sessio
+00033d50: 6e5f 6166 7465 725f 6672 6571 3a20 696e  n_after_freq: in
+00033d60: 742c 2064 6566 6175 6c74 2031 3030 302e  t, default 1000.
+00033d70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00033d80: 2020 3a70 6172 616d 2075 7064 6174 655f    :param update_
+00033d90: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
+00033da0: 636f 6e64 733a 2066 6c6f 6174 2c20 6465  conds: float, de
+00033db0: 6661 756c 7420 3135 3030 2e0d 0a20 2020  fault 1500...   
+00033dc0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00033dd0: 7261 6d20 6966 5f73 686f 775f 7469 6d65  ram if_show_time
+00033de0: 5f73 7461 743a 2062 6f6f 6c2c 2064 6566  _stat: bool, def
+00033df0: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
+00033e00: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00033e10: 7261 6d20 7368 6f77 5f74 696d 655f 7374  ram show_time_st
+00033e20: 6174 5f70 7265 6369 7369 6f6e 3a20 696e  at_precision: in
+00033e30: 742c 2064 6566 6175 6c74 2032 2e0d 0a20  t, default 2... 
+00033e40: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00033e50: 7061 7261 6d20 6966 5f70 7269 6e74 5f77  param if_print_w
+00033e60: 6172 6e69 6e67 3a20 626f 6f6c 2c20 6465  arning: bool, de
+00033e70: 6661 756c 7420 5472 7565 2e0d 0a20 2020  fault True...   
+00033e80: 2020 2020 203a 7265 7475 726e 3a20 7374       :return: st
+00033e90: 7220 6f72 2064 6963 740d 0a20 2020 2020  r or dict..     
+00033ea0: 2020 2022 2222 0d0a 0d0a 2020 2020 2020     """....      
+00033eb0: 2020 7469 6d65 6f75 7420 3d20 6b77 6172    timeout = kwar
+00033ec0: 6773 2e67 6574 2827 7469 6d65 6f75 7427  gs.get('timeout'
+00033ed0: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
+00033ee0: 2070 726f 7869 6573 203d 206b 7761 7267   proxies = kwarg
+00033ef0: 732e 6765 7428 2770 726f 7869 6573 272c  s.get('proxies',
+00033f00: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
+00033f10: 736c 6565 705f 7365 636f 6e64 7320 3d20  sleep_seconds = 
+00033f20: 6b77 6172 6773 2e67 6574 2827 736c 6565  kwargs.get('slee
+00033f30: 705f 7365 636f 6e64 7327 2c20 3029 0d0a  p_seconds', 0)..
+00033f40: 2020 2020 2020 2020 6966 5f70 7269 6e74          if_print
+00033f50: 5f77 6172 6e69 6e67 203d 206b 7761 7267  _warning = kwarg
+00033f60: 732e 6765 7428 2769 665f 7072 696e 745f  s.get('if_print_
+00033f70: 7761 726e 696e 6727 2c20 5472 7565 290d  warning', True).
+00033f80: 0a20 2020 2020 2020 2069 735f 6465 7461  .        is_deta
+00033f90: 696c 5f72 6573 756c 7420 3d20 6b77 6172  il_result = kwar
+00033fa0: 6773 2e67 6574 2827 6973 5f64 6574 6169  gs.get('is_detai
+00033fb0: 6c5f 7265 7375 6c74 272c 2046 616c 7365  l_result', False
+00033fc0: 290d 0a20 2020 2020 2020 2075 7064 6174  )..        updat
+00033fd0: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
+00033fe0: 6672 6571 203d 206b 7761 7267 732e 6765  freq = kwargs.ge
+00033ff0: 7428 2775 7064 6174 655f 7365 7373 696f  t('update_sessio
+00034000: 6e5f 6166 7465 725f 6672 6571 272c 2073  n_after_freq', s
+00034010: 656c 662e 6465 6661 756c 745f 7365 7373  elf.default_sess
+00034020: 696f 6e5f 6672 6571 290d 0a20 2020 2020  ion_freq)..     
+00034030: 2020 2075 7064 6174 655f 7365 7373 696f     update_sessio
+00034040: 6e5f 6166 7465 725f 7365 636f 6e64 7320  n_after_seconds 
+00034050: 3d20 6b77 6172 6773 2e67 6574 2827 7570  = kwargs.get('up
+00034060: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+00034070: 6572 5f73 6563 6f6e 6473 272c 2073 656c  er_seconds', sel
+00034080: 662e 6465 6661 756c 745f 7365 7373 696f  f.default_sessio
+00034090: 6e5f 7365 636f 6e64 7329 0d0a 2020 2020  n_seconds)..    
+000340a0: 2020 2020 7365 6c66 2e63 6865 636b 5f69      self.check_i
+000340b0: 6e70 7574 5f6c 696d 6974 2871 7565 7279  nput_limit(query
+000340c0: 5f74 6578 742c 2073 656c 662e 696e 7075  _text, self.inpu
+000340d0: 745f 6c69 6d69 7429 0d0a 0d0a 2020 2020  t_limit)....    
+000340e0: 2020 2020 6e6f 745f 7570 6461 7465 5f63      not_update_c
+000340f0: 6f6e 645f 6672 6571 203d 2031 2069 6620  ond_freq = 1 if 
+00034100: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
+00034110: 2025 2075 7064 6174 655f 7365 7373 696f   % update_sessio
+00034120: 6e5f 6166 7465 725f 6672 6571 2021 3d20  n_after_freq != 
+00034130: 3020 656c 7365 2030 0d0a 2020 2020 2020  0 else 0..      
+00034140: 2020 6e6f 745f 7570 6461 7465 5f63 6f6e    not_update_con
+00034150: 645f 7469 6d65 203d 2031 2069 6620 7469  d_time = 1 if ti
+00034160: 6d65 2e74 696d 6528 2920 2d20 7365 6c66  me.time() - self
+00034170: 2e62 6567 696e 5f74 696d 6520 3c20 7570  .begin_time < up
+00034180: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+00034190: 6572 5f73 6563 6f6e 6473 2065 6c73 6520  er_seconds else 
+000341a0: 300d 0a20 2020 2020 2020 2069 6620 6e6f  0..        if no
+000341b0: 7420 2873 656c 662e 7365 7373 696f 6e20  t (self.session 
+000341c0: 616e 6420 7365 6c66 2e6c 616e 6775 6167  and self.languag
+000341d0: 655f 6d61 7020 616e 6420 6e6f 745f 7570  e_map and not_up
+000341e0: 6461 7465 5f63 6f6e 645f 6672 6571 2061  date_cond_freq a
+000341f0: 6e64 206e 6f74 5f75 7064 6174 655f 636f  nd not_update_co
+00034200: 6e64 5f74 696d 6529 3a0d 0a20 2020 2020  nd_time):..     
+00034210: 2020 2020 2020 2073 656c 662e 6265 6769         self.begi
+00034220: 6e5f 7469 6d65 203d 2074 696d 652e 7469  n_time = time.ti
+00034230: 6d65 2829 0d0a 2020 2020 2020 2020 2020  me()..          
+00034240: 2020 7365 6c66 2e73 6573 7369 6f6e 203d    self.session =
+00034250: 2072 6571 7565 7374 732e 5365 7373 696f   requests.Sessio
+00034260: 6e28 290d 0a20 2020 2020 2020 2020 2020  n()..           
+00034270: 205f 203d 2073 656c 662e 7365 7373 696f   _ = self.sessio
+00034280: 6e2e 6765 7428 7365 6c66 2e68 6f73 745f  n.get(self.host_
+00034290: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
+000342a0: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
+000342b0: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+000342c0: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+000342d0: 290d 0a20 2020 2020 2020 2020 2020 2064  )..            d
+000342e0: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
+000342f0: 203d 2073 656c 662e 6465 6275 675f 6c61   = self.debug_la
+00034300: 6e67 5f6b 7761 7267 7328 6672 6f6d 5f6c  ng_kwargs(from_l
+00034310: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
+00034320: 7561 6765 2c20 7365 6c66 2e64 6566 6175  uage, self.defau
+00034330: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
+00034340: 2c20 6966 5f70 7269 6e74 5f77 6172 6e69  , if_print_warni
+00034350: 6e67 290d 0a20 2020 2020 2020 2020 2020  ng)..           
+00034360: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+00034370: 6170 203d 2073 656c 662e 6765 745f 6c61  ap = self.get_la
+00034380: 6e67 7561 6765 5f6d 6170 2873 656c 662e  nguage_map(self.
+00034390: 6765 745f 6c61 6e67 5f75 726c 2c20 7365  get_lang_url, se
+000343a0: 6c66 2e73 6573 7369 6f6e 2c20 7365 6c66  lf.session, self
+000343b0: 2e68 6f73 745f 6865 6164 6572 732c 2074  .host_headers, t
+000343c0: 696d 656f 7574 2c20 7072 6f78 6965 732c  imeout, proxies,
+000343d0: 202a 2a64 6562 7567 5f6c 616e 675f 6b77   **debug_lang_kw
+000343e0: 6172 6773 290d 0a0d 0a20 2020 2020 2020  args)....       
+000343f0: 2069 6620 6672 6f6d 5f6c 616e 6775 6167   if from_languag
+00034400: 6520 3d3d 2027 6175 746f 273a 0d0a 2020  e == 'auto':..  
+00034410: 2020 2020 2020 2020 2020 7061 796c 6f61            payloa
+00034420: 6420 3d20 7572 6c6c 6962 2e70 6172 7365  d = urllib.parse
+00034430: 2e75 726c 656e 636f 6465 287b 2771 273a  .urlencode({'q':
+00034440: 2071 7565 7279 5f74 6578 747d 290d 0a20   query_text}).. 
+00034450: 2020 2020 2020 2020 2020 206c 616e 6773             langs
+00034460: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
+00034470: 706f 7374 2873 656c 662e 6465 7465 6374  post(self.detect
+00034480: 5f6c 616e 675f 7572 6c2c 2064 6174 613d  _lang_url, data=
+00034490: 7061 796c 6f61 642c 2068 6561 6465 7273  payload, headers
+000344a0: 3d73 656c 662e 6170 695f 6865 6164 6572  =self.api_header
+000344b0: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
+000344c0: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
+000344d0: 6965 7329 2e6a 736f 6e28 290d 0a20 2020  ies).json()..   
+000344e0: 2020 2020 2020 2020 2066 726f 6d5f 6c61           from_la
+000344f0: 6e67 7561 6765 203d 2073 6f72 7465 6428  nguage = sorted(
+00034500: 6c61 6e67 732c 206b 6579 3d6c 616d 6264  langs, key=lambd
+00034510: 6120 6b3a 206c 616e 6773 5b6b 5d2c 2072  a k: langs[k], r
+00034520: 6576 6572 7365 3d54 7275 6529 5b30 5d0d  everse=True)[0].
+00034530: 0a20 2020 2020 2020 2066 726f 6d5f 6c61  .        from_la
+00034540: 6e67 7561 6765 2c20 746f 5f6c 616e 6775  nguage, to_langu
+00034550: 6167 6520 3d20 7365 6c66 2e63 6865 636b  age = self.check
+00034560: 5f6c 616e 6775 6167 6528 6672 6f6d 5f6c  _language(from_l
+00034570: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
+00034580: 7561 6765 2c20 7365 6c66 2e6c 616e 6775  uage, self.langu
+00034590: 6167 655f 6d61 702c 0d0a 2020 2020 2020  age_map,..      
+000345a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000345b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000345c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000345d0: 2020 206f 7574 7075 745f 656e 5f74 7261     output_en_tra
+000345e0: 6e73 6c61 746f 723d 2761 7065 7274 6975  nslator='apertiu
+000345f0: 6d27 2c20 6f75 7470 7574 5f65 6e3d 7365  m', output_en=se
+00034600: 6c66 2e6f 7574 7075 745f 656e 290d 0a0d  lf.output_en)...
+00034610: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00034620: 203d 207b 0d0a 2020 2020 2020 2020 2020   = {..          
+00034630: 2020 2771 273a 2071 7565 7279 5f74 6578    'q': query_tex
+00034640: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
+00034650: 276c 616e 6770 6169 7227 3a20 6627 7b66  'langpair': f'{f
+00034660: 726f 6d5f 6c61 6e67 7561 6765 7d7c 7b74  rom_language}|{t
+00034670: 6f5f 6c61 6e67 7561 6765 7d27 2c0d 0a20  o_language}',.. 
+00034680: 2020 2020 2020 2020 2020 2027 7072 6566             'pref
+00034690: 7327 3a20 2727 2c0d 0a20 2020 2020 2020  s': '',..       
+000346a0: 2020 2020 2027 6d61 726b 556e 6b6e 6f77       'markUnknow
+000346b0: 6e27 3a20 276e 6f27 2c0d 0a20 2020 2020  n': 'no',..     
+000346c0: 2020 207d 0d0a 2020 2020 2020 2020 7061     }..        pa
+000346d0: 796c 6f61 6420 3d20 7572 6c6c 6962 2e70  yload = urllib.p
+000346e0: 6172 7365 2e75 726c 656e 636f 6465 2870  arse.urlencode(p
+000346f0: 6179 6c6f 6164 290d 0a20 2020 2020 2020  ayload)..       
+00034700: 2072 203d 2073 656c 662e 7365 7373 696f   r = self.sessio
+00034710: 6e2e 706f 7374 2873 656c 662e 6170 695f  n.post(self.api_
+00034720: 7572 6c2c 2064 6174 613d 7061 796c 6f61  url, data=payloa
+00034730: 642c 2068 6561 6465 7273 3d73 656c 662e  d, headers=self.
+00034740: 6170 695f 6865 6164 6572 732c 2074 696d  api_headers, tim
+00034750: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
+00034760: 6f78 6965 733d 7072 6f78 6965 7329 0d0a  oxies=proxies)..
+00034770: 2020 2020 2020 2020 722e 7261 6973 655f          r.raise_
+00034780: 666f 725f 7374 6174 7573 2829 0d0a 2020  for_status()..  
+00034790: 2020 2020 2020 6461 7461 203d 2072 2e6a        data = r.j
+000347a0: 736f 6e28 290d 0a20 2020 2020 2020 2074  son()..        t
+000347b0: 696d 652e 736c 6565 7028 736c 6565 705f  ime.sleep(sleep_
+000347c0: 7365 636f 6e64 7329 0d0a 2020 2020 2020  seconds)..      
+000347d0: 2020 7365 6c66 2e71 7565 7279 5f63 6f75    self.query_cou
+000347e0: 6e74 202b 3d20 310d 0a20 2020 2020 2020  nt += 1..       
+000347f0: 2072 6574 7572 6e20 6461 7461 2069 6620   return data if 
+00034800: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
+00034810: 2065 6c73 6520 6461 7461 5b27 7265 7370   else data['resp
+00034820: 6f6e 7365 4461 7461 275d 5b27 7472 616e  onseData']['tran
+00034830: 736c 6174 6564 5465 7874 275d 0d0a 0d0a  slatedText']....
+00034840: 0d0a 636c 6173 7320 5469 6c64 6528 5473  ..class Tilde(Ts
+00034850: 6529 3a0d 0a20 2020 2064 6566 205f 5f69  e):..    def __i
+00034860: 6e69 745f 5f28 7365 6c66 293a 0d0a 2020  nit__(self):..  
+00034870: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
+00034880: 696e 6974 5f5f 2829 0d0a 2020 2020 2020  init__()..      
+00034890: 2020 7365 6c66 2e62 6567 696e 5f74 696d    self.begin_tim
+000348a0: 6520 3d20 7469 6d65 2e74 696d 6528 290d  e = time.time().
+000348b0: 0a20 2020 2020 2020 2073 656c 662e 686f  .        self.ho
+000348c0: 7374 5f75 726c 203d 2027 6874 7470 733a  st_url = 'https:
+000348d0: 2f2f 7472 616e 736c 6174 652e 7469 6c64  //translate.tild
+000348e0: 652e 636f 6d2f 270d 0a20 2020 2020 2020  e.com/'..       
+000348f0: 2073 656c 662e 6170 695f 7572 6c20 3d20   self.api_url = 
+00034900: 2768 7474 7073 3a2f 2f6c 6574 736d 742e  'https://letsmt.
+00034910: 6575 2f77 732f 7365 7276 6963 652e 7376  eu/ws/service.sv
+00034920: 632f 6a73 6f6e 2f54 7261 6e73 6c61 7465  c/json/Translate
+00034930: 4578 270d 0a20 2020 2020 2020 2073 656c  Ex'..        sel
+00034940: 662e 6765 745f 636f 6e66 6967 5f75 726c  f.get_config_url
+00034950: 203d 2027 6874 7470 733a 2f2f 7472 616e   = 'https://tran
+00034960: 736c 6174 652e 7469 6c64 652e 636f 6d2f  slate.tilde.com/
+00034970: 6173 7365 7473 2f63 6f6e 6669 672e 6c6f  assets/config.lo
+00034980: 6361 6c2e 6a73 6f6e 2720 2023 203f 7665  cal.json'  # ?ve
+00034990: 7273 696f 6e3d 3436 3835 320d 0a20 2020  rsion=46852..   
+000349a0: 2020 2020 2073 656c 662e 7375 6273 6372       self.subscr
+000349b0: 6962 655f 7572 6c20 3d20 2768 7474 7073  ibe_url = 'https
+000349c0: 3a2f 2f74 7261 6e73 6c61 7465 2e74 696c  ://translate.til
+000349d0: 6465 2e63 6f6d 2f61 7373 6574 732f 7375  de.com/assets/su
+000349e0: 6273 6372 6970 7469 6f6e 732d 636f 6e66  bscriptions-conf
+000349f0: 6967 2e6c 6f63 616c 2e6a 736f 6e27 0d0a  ig.local.json'..
+00034a00: 2020 2020 2020 2020 7365 6c66 2e70 6c61          self.pla
+00034a10: 7573 6962 6c65 5f75 726c 203d 2027 6874  usible_url = 'ht
+00034a20: 7470 733a 2f2f 706c 6175 7369 626c 652e  tps://plausible.
+00034a30: 696f 2f61 7069 2f65 7665 6e74 270d 0a20  io/api/event'.. 
+00034a40: 2020 2020 2020 2073 656c 662e 6175 7468         self.auth
+00034a50: 5f75 726c 203d 2027 6874 7470 733a 2f2f  _url = 'https://
+00034a60: 6175 7468 2e74 696c 6465 2e63 6f6d 2f61  auth.tilde.com/a
+00034a70: 7574 682f 7265 616c 6d73 2f54 696c 6465  uth/realms/Tilde
+00034a80: 2f70 726f 746f 636f 6c2f 6f70 656e 6964  /protocol/openid
+00034a90: 2d63 6f6e 6e65 6374 2f6c 6f67 696e 2d73  -connect/login-s
+00034aa0: 7461 7475 732d 6966 7261 6d65 2e68 746d  tatus-iframe.htm
+00034ab0: 6c2f 696e 6974 270d 0a20 2020 2020 2020  l/init'..       
+00034ac0: 2073 656c 662e 7370 6565 6368 5f75 726c   self.speech_url
+00034ad0: 203d 2027 6874 7470 733a 2f2f 7661 2e74   = 'https://va.t
+00034ae0: 696c 6465 2e63 6f6d 2f64 6c2f 6469 7265  ilde.com/dl/dire
+00034af0: 6374 6c69 6e65 2f61 4852 3063 446f 764c  ctline/aHR0cDovL
+00034b00: 3342 7962 3252 724f 484e 6962 3352 3061  3Byb2RrOHNib3R0a
+00034b10: 5778 6b5a 5451 3d2f 746f 6b65 6e73 2f73  WxkZTQ=/tokens/s
+00034b20: 7065 6563 6827 0d0a 2020 2020 2020 2020  peech'..        
+00034b30: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
+00034b40: 7320 3d20 7365 6c66 2e67 6574 5f68 6561  s = self.get_hea
+00034b50: 6465 7273 2873 656c 662e 686f 7374 5f75  ders(self.host_u
+00034b60: 726c 2c20 6966 5f61 7069 3d46 616c 7365  rl, if_api=False
+00034b70: 2c20 6966 5f72 6566 6572 6572 5f66 6f72  , if_referer_for
+00034b80: 5f68 6f73 743d 5472 7565 290d 0a20 2020  _host=True)..   
+00034b90: 2020 2020 2073 656c 662e 6170 695f 6865       self.api_he
+00034ba0: 6164 6572 7320 3d20 7365 6c66 2e67 6574  aders = self.get
+00034bb0: 5f68 6561 6465 7273 2873 656c 662e 686f  _headers(self.ho
+00034bc0: 7374 5f75 726c 2c20 6966 5f61 7069 3d54  st_url, if_api=T
+00034bd0: 7275 652c 2069 665f 6a73 6f6e 5f66 6f72  rue, if_json_for
+00034be0: 5f61 7069 3d54 7275 6529 0d0a 2020 2020  _api=True)..    
+00034bf0: 2020 2020 7365 6c66 2e73 6573 7369 6f6e      self.session
+00034c00: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+00034c10: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+00034c20: 6170 203d 204e 6f6e 650d 0a20 2020 2020  ap = None..     
+00034c30: 2020 2073 656c 662e 6c61 6e67 7061 6972     self.langpair
+00034c40: 5f69 6473 203d 204e 6f6e 650d 0a20 2020  _ids = None..   
+00034c50: 2020 2020 2073 656c 662e 636f 6e66 6967       self.config
+00034c60: 5f64 6174 6120 3d20 4e6f 6e65 0d0a 2020  _data = None..  
+00034c70: 2020 2020 2020 7365 6c66 2e73 7973 5f64        self.sys_d
+00034c80: 6174 6120 3d20 4e6f 6e65 0d0a 2020 2020  ata = None..    
+00034c90: 2020 2020 7365 6c66 2e71 7565 7279 5f63      self.query_c
+00034ca0: 6f75 6e74 203d 2030 0d0a 2020 2020 2020  ount = 0..      
+00034cb0: 2020 7365 6c66 2e6f 7574 7075 745f 7a68    self.output_zh
+00034cc0: 203d 204e 6f6e 6520 2023 2075 6e73 7570   = None  # unsup
+00034cd0: 706f 7274 6564 0d0a 2020 2020 2020 2020  ported..        
+00034ce0: 7365 6c66 2e6f 7574 7075 745f 656e 203d  self.output_en =
+00034cf0: 2027 656e 6727 0d0a 2020 2020 2020 2020   'eng'..        
+00034d00: 7365 6c66 2e69 6e70 7574 5f6c 696d 6974  self.input_limit
+00034d10: 203d 2069 6e74 2835 6533 2920 2023 2075   = int(5e3)  # u
+00034d20: 6e6b 6e6f 776e 0d0a 2020 2020 2020 2020  nknown..        
+00034d30: 7365 6c66 2e64 6566 6175 6c74 5f66 726f  self.default_fro
+00034d40: 6d5f 6c61 6e67 7561 6765 203d 2027 6c76  m_language = 'lv
+00034d50: 2720 2023 2027 6672 270d 0a0d 0a20 2020  '  # 'fr'....   
+00034d60: 2040 5473 652e 6465 6275 675f 6c61 6e67   @Tse.debug_lang
+00034d70: 7561 6765 5f6d 6170 0d0a 2020 2020 6465  uage_map..    de
+00034d80: 6620 6765 745f 6c61 6e67 7561 6765 5f6d  f get_language_m
+00034d90: 6170 2873 656c 662c 2073 7973 5f64 6174  ap(self, sys_dat
+00034da0: 613a 2064 6963 742c 202a 2a6b 7761 7267  a: dict, **kwarg
+00034db0: 733a 204c 616e 674d 6170 4b77 6172 6773  s: LangMapKwargs
+00034dc0: 5479 7065 2920 2d3e 2064 6963 743a 0d0a  Type) -> dict:..
+00034dd0: 2020 2020 2020 2020 6c61 6e67 5f70 6169          lang_pai
+00034de0: 7273 203d 205b 5b69 7465 6d5b 2753 6f75  rs = [[item['Sou
+00034df0: 7263 654c 616e 6775 6167 6527 5d5b 2743  rceLanguage']['C
+00034e00: 6f64 6527 5d2c 2069 7465 6d5b 2754 6172  ode'], item['Tar
+00034e10: 6765 744c 616e 6775 6167 6527 5d5b 2743  getLanguage']['C
+00034e20: 6f64 6527 5d5d 2066 6f72 2069 7465 6d20  ode']] for item 
+00034e30: 696e 2073 7973 5f64 6174 615b 2753 7973  in sys_data['Sys
+00034e40: 7465 6d27 5d20 6966 2027 4765 6e65 7261  tem'] if 'Genera
+00034e50: 6c27 2069 6e20 6974 656d 5b27 446f 6d61  l' in item['Doma
+00034e60: 696e 275d 5d0d 0a20 2020 2020 2020 2072  in']]..        r
+00034e70: 6574 7572 6e20 7b66 5f6c 616e 673a 205b  eturn {f_lang: [
+00034e80: 7620 666f 7220 6b2c 2076 2069 6e20 6c61  v for k, v in la
+00034e90: 6e67 5f70 6169 7273 2069 6620 6b20 3d3d  ng_pairs if k ==
+00034ea0: 2066 5f6c 616e 675d 2066 6f72 2066 5f6c   f_lang] for f_l
+00034eb0: 616e 672c 2074 5f6c 616e 6720 696e 206c  ang, t_lang in l
+00034ec0: 616e 675f 7061 6972 737d 0d0a 0d0a 2020  ang_pairs}....  
+00034ed0: 2020 6465 6620 6765 745f 6c61 6e67 7061    def get_langpa
+00034ee0: 6972 5f69 6473 2873 656c 662c 2073 7973  ir_ids(self, sys
+00034ef0: 5f64 6174 613a 2064 6963 7429 202d 3e20  _data: dict) -> 
+00034f00: 6469 6374 3a0d 0a20 2020 2020 2020 2072  dict:..        r
+00034f10: 6574 7572 6e20 7b66 227b 6974 656d 5b27  eturn {f"{item['
+00034f20: 536f 7572 6365 4c61 6e67 7561 6765 275d  SourceLanguage']
+00034f30: 5b27 436f 6465 275d 7d2d 7b69 7465 6d5b  ['Code']}-{item[
+00034f40: 2754 6172 6765 744c 616e 6775 6167 6527  'TargetLanguage'
+00034f50: 5d5b 2743 6f64 6527 5d7d 223a 2069 7465  ]['Code']}": ite
+00034f60: 6d5b 2749 4427 5d20 666f 7220 6974 656d  m['ID'] for item
+00034f70: 2069 6e20 7379 735f 6461 7461 5b27 5379   in sys_data['Sy
+00034f80: 7374 656d 275d 2069 6620 2747 656e 6572  stem'] if 'Gener
+00034f90: 616c 2720 696e 2069 7465 6d5b 2744 6f6d  al' in item['Dom
+00034fa0: 6169 6e27 5d7d 0d0a 0d0a 2020 2020 4054  ain']}....    @T
+00034fb0: 7365 2e75 6e63 6572 7469 6669 6564 0d0a  se.uncertified..
+00034fc0: 2020 2020 4054 7365 2e74 696d 655f 7374      @Tse.time_st
+00034fd0: 6174 0d0a 2020 2020 4054 7365 2e63 6865  at..    @Tse.che
+00034fe0: 636b 5f71 7565 7279 0d0a 2020 2020 6465  ck_query..    de
+00034ff0: 6620 7469 6c64 655f 6170 6928 7365 6c66  f tilde_api(self
+00035000: 2c20 7175 6572 795f 7465 7874 3a20 7374  , query_text: st
+00035010: 722c 2066 726f 6d5f 6c61 6e67 7561 6765  r, from_language
+00035020: 3a20 7374 7220 3d20 2761 7574 6f27 2c20  : str = 'auto', 
+00035030: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
+00035040: 203d 2027 656e 272c 202a 2a6b 7761 7267   = 'en', **kwarg
+00035050: 733a 2041 7069 4b77 6172 6773 5479 7065  s: ApiKwargsType
+00035060: 2920 2d3e 2055 6e69 6f6e 5b73 7472 2c20  ) -> Union[str, 
+00035070: 6469 6374 5d3a 0d0a 2020 2020 2020 2020  dict]:..        
+00035080: 2222 220d 0a20 2020 2020 2020 2068 7474  """..        htt
+00035090: 7073 3a2f 2f74 7261 6e73 6c61 7465 2e74  ps://translate.t
+000350a0: 696c 6465 2e63 6f6d 2f0d 0a20 2020 2020  ilde.com/..     
+000350b0: 2020 203a 7061 7261 6d20 7175 6572 795f     :param query_
+000350c0: 7465 7874 3a20 7374 722c 206d 7573 742e  text: str, must.
+000350d0: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+000350e0: 2066 726f 6d5f 6c61 6e67 7561 6765 3a20   from_language: 
+000350f0: 7374 722c 2064 6566 6175 6c74 2027 6175  str, default 'au
+00035100: 746f 272e 0d0a 2020 2020 2020 2020 3a70  to'...        :p
+00035110: 6172 616d 2074 6f5f 6c61 6e67 7561 6765  aram to_language
+00035120: 3a20 7374 722c 2064 6566 6175 6c74 2027  : str, default '
+00035130: 656e 272e 0d0a 2020 2020 2020 2020 3a70  en'...        :p
+00035140: 6172 616d 202a 2a6b 7761 7267 733a 0d0a  aram **kwargs:..
+00035150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035160: 3a70 6172 616d 2074 696d 656f 7574 3a20  :param timeout: 
+00035170: 666c 6f61 742c 2064 6566 6175 6c74 204e  float, default N
+00035180: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
+00035190: 2020 2020 2020 3a70 6172 616d 2070 726f        :param pro
+000351a0: 7869 6573 3a20 6469 6374 2c20 6465 6661  xies: dict, defa
+000351b0: 756c 7420 4e6f 6e65 2e0d 0a20 2020 2020  ult None...     
+000351c0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+000351d0: 6d20 736c 6565 705f 7365 636f 6e64 733a  m sleep_seconds:
+000351e0: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
+000351f0: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+00035200: 2020 2020 3a70 6172 616d 2069 735f 6465      :param is_de
+00035210: 7461 696c 5f72 6573 756c 743a 2062 6f6f  tail_result: boo
+00035220: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+00035230: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00035240: 2020 203a 7061 7261 6d20 6966 5f69 676e     :param if_ign
+00035250: 6f72 655f 6c69 6d69 745f 6f66 5f6c 656e  ore_limit_of_len
+00035260: 6774 683a 2062 6f6f 6c2c 2064 6566 6175  gth: bool, defau
+00035270: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+00035280: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00035290: 6d20 6c69 6d69 745f 6f66 5f6c 656e 6774  m limit_of_lengt
+000352a0: 683a 2069 6e74 2c20 6465 6661 756c 7420  h: int, default 
+000352b0: 3230 3030 302e 0d0a 2020 2020 2020 2020  20000...        
+000352c0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+000352d0: 665f 6967 6e6f 7265 5f65 6d70 7479 5f71  f_ignore_empty_q
+000352e0: 7565 7279 3a20 626f 6f6c 2c20 6465 6661  uery: bool, defa
+000352f0: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+00035300: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00035310: 616d 2075 7064 6174 655f 7365 7373 696f  am update_sessio
+00035320: 6e5f 6166 7465 725f 6672 6571 3a20 696e  n_after_freq: in
+00035330: 742c 2064 6566 6175 6c74 2031 3030 302e  t, default 1000.
+00035340: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00035350: 2020 3a70 6172 616d 2075 7064 6174 655f    :param update_
+00035360: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
+00035370: 636f 6e64 733a 2066 6c6f 6174 2c20 6465  conds: float, de
+00035380: 6661 756c 7420 3135 3030 2e0d 0a20 2020  fault 1500...   
+00035390: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+000353a0: 7261 6d20 6966 5f73 686f 775f 7469 6d65  ram if_show_time
+000353b0: 5f73 7461 743a 2062 6f6f 6c2c 2064 6566  _stat: bool, def
+000353c0: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
+000353d0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+000353e0: 7261 6d20 7368 6f77 5f74 696d 655f 7374  ram show_time_st
+000353f0: 6174 5f70 7265 6369 7369 6f6e 3a20 696e  at_precision: in
+00035400: 742c 2064 6566 6175 6c74 2032 2e0d 0a20  t, default 2... 
+00035410: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00035420: 7061 7261 6d20 6966 5f70 7269 6e74 5f77  param if_print_w
+00035430: 6172 6e69 6e67 3a20 626f 6f6c 2c20 6465  arning: bool, de
+00035440: 6661 756c 7420 5472 7565 2e0d 0a20 2020  fault True...   
+00035450: 2020 2020 203a 7265 7475 726e 3a20 7374       :return: st
+00035460: 7220 6f72 2064 6963 740d 0a20 2020 2020  r or dict..     
+00035470: 2020 2022 2222 0d0a 0d0a 2020 2020 2020     """....      
+00035480: 2020 7469 6d65 6f75 7420 3d20 6b77 6172    timeout = kwar
+00035490: 6773 2e67 6574 2827 7469 6d65 6f75 7427  gs.get('timeout'
+000354a0: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
+000354b0: 2070 726f 7869 6573 203d 206b 7761 7267   proxies = kwarg
+000354c0: 732e 6765 7428 2770 726f 7869 6573 272c  s.get('proxies',
+000354d0: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
+000354e0: 736c 6565 705f 7365 636f 6e64 7320 3d20  sleep_seconds = 
+000354f0: 6b77 6172 6773 2e67 6574 2827 736c 6565  kwargs.get('slee
+00035500: 705f 7365 636f 6e64 7327 2c20 3029 0d0a  p_seconds', 0)..
+00035510: 2020 2020 2020 2020 6966 5f70 7269 6e74          if_print
+00035520: 5f77 6172 6e69 6e67 203d 206b 7761 7267  _warning = kwarg
+00035530: 732e 6765 7428 2769 665f 7072 696e 745f  s.get('if_print_
+00035540: 7761 726e 696e 6727 2c20 5472 7565 290d  warning', True).
+00035550: 0a20 2020 2020 2020 2069 735f 6465 7461  .        is_deta
+00035560: 696c 5f72 6573 756c 7420 3d20 6b77 6172  il_result = kwar
+00035570: 6773 2e67 6574 2827 6973 5f64 6574 6169  gs.get('is_detai
+00035580: 6c5f 7265 7375 6c74 272c 2046 616c 7365  l_result', False
+00035590: 290d 0a20 2020 2020 2020 2075 7064 6174  )..        updat
+000355a0: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
+000355b0: 6672 6571 203d 206b 7761 7267 732e 6765  freq = kwargs.ge
+000355c0: 7428 2775 7064 6174 655f 7365 7373 696f  t('update_sessio
+000355d0: 6e5f 6166 7465 725f 6672 6571 272c 2073  n_after_freq', s
+000355e0: 656c 662e 6465 6661 756c 745f 7365 7373  elf.default_sess
+000355f0: 696f 6e5f 6672 6571 290d 0a20 2020 2020  ion_freq)..     
+00035600: 2020 2075 7064 6174 655f 7365 7373 696f     update_sessio
+00035610: 6e5f 6166 7465 725f 7365 636f 6e64 7320  n_after_seconds 
+00035620: 3d20 6b77 6172 6773 2e67 6574 2827 7570  = kwargs.get('up
+00035630: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+00035640: 6572 5f73 6563 6f6e 6473 272c 2073 656c  er_seconds', sel
+00035650: 662e 6465 6661 756c 745f 7365 7373 696f  f.default_sessio
+00035660: 6e5f 7365 636f 6e64 7329 0d0a 2020 2020  n_seconds)..    
+00035670: 2020 2020 7365 6c66 2e63 6865 636b 5f69      self.check_i
+00035680: 6e70 7574 5f6c 696d 6974 2871 7565 7279  nput_limit(query
+00035690: 5f74 6578 742c 2073 656c 662e 696e 7075  _text, self.inpu
+000356a0: 745f 6c69 6d69 7429 0d0a 0d0a 2020 2020  t_limit)....    
+000356b0: 2020 2020 6e6f 745f 7570 6461 7465 5f63      not_update_c
+000356c0: 6f6e 645f 6672 6571 203d 2031 2069 6620  ond_freq = 1 if 
+000356d0: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
+000356e0: 2025 2075 7064 6174 655f 7365 7373 696f   % update_sessio
+000356f0: 6e5f 6166 7465 725f 6672 6571 2021 3d20  n_after_freq != 
+00035700: 3020 656c 7365 2030 0d0a 2020 2020 2020  0 else 0..      
+00035710: 2020 6e6f 745f 7570 6461 7465 5f63 6f6e    not_update_con
+00035720: 645f 7469 6d65 203d 2031 2069 6620 7469  d_time = 1 if ti
+00035730: 6d65 2e74 696d 6528 2920 2d20 7365 6c66  me.time() - self
+00035740: 2e62 6567 696e 5f74 696d 6520 3c20 7570  .begin_time < up
+00035750: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+00035760: 6572 5f73 6563 6f6e 6473 2065 6c73 6520  er_seconds else 
+00035770: 300d 0a20 2020 2020 2020 2069 6620 6e6f  0..        if no
+00035780: 7420 2873 656c 662e 7365 7373 696f 6e20  t (self.session 
+00035790: 616e 6420 7365 6c66 2e6c 616e 6775 6167  and self.languag
+000357a0: 655f 6d61 7020 616e 6420 6e6f 745f 7570  e_map and not_up
+000357b0: 6461 7465 5f63 6f6e 645f 6672 6571 2061  date_cond_freq a
+000357c0: 6e64 206e 6f74 5f75 7064 6174 655f 636f  nd not_update_co
+000357d0: 6e64 5f74 696d 6529 3a0d 0a20 2020 2020  nd_time):..     
+000357e0: 2020 2020 2020 2073 656c 662e 6265 6769         self.begi
+000357f0: 6e5f 7469 6d65 203d 2074 696d 652e 7469  n_time = time.ti
+00035800: 6d65 2829 0d0a 2020 2020 2020 2020 2020  me()..          
+00035810: 2020 7365 6c66 2e73 6573 7369 6f6e 203d    self.session =
+00035820: 2072 6571 7565 7374 732e 5365 7373 696f   requests.Sessio
+00035830: 6e28 290d 0a20 2020 2020 2020 2020 2020  n()..           
+00035840: 205f 203d 2073 656c 662e 7365 7373 696f   _ = self.sessio
+00035850: 6e2e 6765 7428 7365 6c66 2e68 6f73 745f  n.get(self.host_
+00035860: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
+00035870: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
+00035880: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+00035890: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+000358a0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+000358b0: 656c 662e 636f 6e66 6967 5f64 6174 6120  elf.config_data 
+000358c0: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e67  = self.session.g
+000358d0: 6574 2873 656c 662e 6765 745f 636f 6e66  et(self.get_conf
+000358e0: 6967 5f75 726c 2c20 6865 6164 6572 733d  ig_url, headers=
+000358f0: 7365 6c66 2e68 6f73 745f 6865 6164 6572  self.host_header
+00035900: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
+00035910: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
+00035920: 6965 7329 2e6a 736f 6e28 290d 0a20 2020  ies).json()..   
+00035930: 2020 2020 2020 2020 2073 656c 662e 6170           self.ap
+00035940: 695f 6865 6164 6572 732e 7570 6461 7465  i_headers.update
+00035950: 287b 2763 6c69 656e 742d 6964 273a 2073  ({'client-id': s
+00035960: 656c 662e 636f 6e66 6967 5f64 6174 615b  elf.config_data[
+00035970: 276d 7427 5d5b 2761 7069 275d 5b27 636c  'mt']['api']['cl
+00035980: 6965 6e74 4964 275d 7d29 2020 2320 6d75  ientId']})  # mu
+00035990: 7374 206c 6f77 6572 206b 6579 776f 7264  st lower keyword
+000359a0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000359b0: 7379 735f 7572 6c20 3d20 7365 6c66 2e63  sys_url = self.c
+000359c0: 6f6e 6669 675f 6461 7461 5b27 6d74 275d  onfig_data['mt']
+000359d0: 5b27 6170 6927 5d5b 2773 7973 7465 6d4c  ['api']['systemL
+000359e0: 6973 7455 726c 275d 0d0a 2020 2020 2020  istUrl']..      
+000359f0: 2020 2020 2020 7061 7261 6d73 203d 207b        params = {
+00035a00: 2761 7070 4944 273a 2073 656c 662e 636f  'appID': self.co
 00035a10: 6e66 6967 5f64 6174 615b 276d 7427 5d5b  nfig_data['mt'][
-00035a20: 2761 7069 275d 5b27 7379 7374 656d 4c69  'api']['systemLi
-00035a30: 7374 5572 6c27 5d0d 0a20 2020 2020 2020  stUrl']..       
-00035a40: 2020 2020 2070 6172 616d 7320 3d20 7b27       params = {'
-00035a50: 6170 7049 4427 3a20 7365 6c66 2e63 6f6e  appID': self.con
-00035a60: 6669 675f 6461 7461 5b27 6d74 275d 5b27  fig_data['mt']['
-00035a70: 6170 6927 5d5b 2761 7070 4944 275d 2c20  api']['appID'], 
-00035a80: 2775 694c 616e 6775 6167 6549 4427 3a20  'uiLanguageID': 
-00035a90: 7365 6c66 2e63 6f6e 6669 675f 6461 7461  self.config_data
-00035aa0: 5b27 6d74 275d 5b27 6170 6927 5d5b 2775  ['mt']['api']['u
-00035ab0: 694c 616e 6775 6167 6549 4427 5d7d 0d0a  iLanguageID']}..
-00035ac0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00035ad0: 2e73 7973 5f64 6174 6120 3d20 7365 6c66  .sys_data = self
-00035ae0: 2e73 6573 7369 6f6e 2e67 6574 2873 7973  .session.get(sys
-00035af0: 5f75 726c 2c20 7061 7261 6d73 3d70 6172  _url, params=par
-00035b00: 616d 732c 2068 6561 6465 7273 3d73 656c  ams, headers=sel
-00035b10: 662e 6170 695f 6865 6164 6572 732c 2074  f.api_headers, t
-00035b20: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
-00035b30: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
-00035b40: 2e6a 736f 6e28 2920 2023 2074 6573 740d  .json()  # test.
-00035b50: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00035b60: 662e 6c61 6e67 7061 6972 5f69 6473 203d  f.langpair_ids =
-00035b70: 2073 656c 662e 6765 745f 6c61 6e67 7061   self.get_langpa
-00035b80: 6972 5f69 6473 2873 656c 662e 7379 735f  ir_ids(self.sys_
-00035b90: 6461 7461 290d 0a20 2020 2020 2020 2020  data)..         
-00035ba0: 2020 2064 6562 7567 5f6c 616e 675f 6b77     debug_lang_kw
-00035bb0: 6172 6773 203d 2073 656c 662e 6465 6275  args = self.debu
-00035bc0: 675f 6c61 6e67 5f6b 7761 7267 7328 6672  g_lang_kwargs(fr
-00035bd0: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-00035be0: 6c61 6e67 7561 6765 2c20 7365 6c66 2e64  language, self.d
-00035bf0: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
-00035c00: 7561 6765 2c20 6966 5f70 7269 6e74 5f77  uage, if_print_w
-00035c10: 6172 6e69 6e67 290d 0a20 2020 2020 2020  arning)..       
-00035c20: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-00035c30: 6765 5f6d 6170 203d 2073 656c 662e 6765  ge_map = self.ge
-00035c40: 745f 6c61 6e67 7561 6765 5f6d 6170 2873  t_language_map(s
-00035c50: 656c 662e 7379 735f 6461 7461 2c20 2a2a  elf.sys_data, **
-00035c60: 6465 6275 675f 6c61 6e67 5f6b 7761 7267  debug_lang_kwarg
-00035c70: 7329 0d0a 0d0a 2020 2020 2020 2020 6966  s)....        if
-00035c80: 2066 726f 6d5f 6c61 6e67 7561 6765 203d   from_language =
-00035c90: 3d20 2761 7574 6f27 3a0d 0a20 2020 2020  = 'auto':..     
-00035ca0: 2020 2020 2020 2066 726f 6d5f 6c61 6e67         from_lang
-00035cb0: 7561 6765 203d 2073 656c 662e 7761 726e  uage = self.warn
-00035cc0: 696e 675f 6175 746f 5f6c 616e 6728 2774  ing_auto_lang('t
-00035cd0: 696c 6465 272c 2073 656c 662e 6465 6661  ilde', self.defa
-00035ce0: 756c 745f 6672 6f6d 5f6c 616e 6775 6167  ult_from_languag
-00035cf0: 652c 2069 665f 7072 696e 745f 7761 726e  e, if_print_warn
-00035d00: 696e 6729 0d0a 2020 2020 2020 2020 6672  ing)..        fr
-00035d10: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-00035d20: 6c61 6e67 7561 6765 203d 2073 656c 662e  language = self.
-00035d30: 6368 6563 6b5f 6c61 6e67 7561 6765 2866  check_language(f
-00035d40: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
-00035d50: 5f6c 616e 6775 6167 652c 2073 656c 662e  _language, self.
-00035d60: 6c61 6e67 7561 6765 5f6d 6170 290d 0a0d  language_map)...
-00035d70: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00035d80: 203d 207b 0d0a 2020 2020 2020 2020 2020   = {..          
-00035d90: 2020 2774 6578 7427 3a20 7175 6572 795f    'text': query_
-00035da0: 7465 7874 2c0d 0a20 2020 2020 2020 2020  text,..         
-00035db0: 2020 2027 6170 7049 4427 3a20 7365 6c66     'appID': self
-00035dc0: 2e63 6f6e 6669 675f 6461 7461 5b27 6d74  .config_data['mt
-00035dd0: 275d 5b27 6170 6927 5d5b 2761 7070 4944  ']['api']['appID
-00035de0: 275d 2c0d 0a20 2020 2020 2020 2020 2020  '],..           
-00035df0: 2027 7379 7374 656d 4944 273a 2073 656c   'systemID': sel
-00035e00: 662e 6c61 6e67 7061 6972 5f69 6473 5b66  f.langpair_ids[f
-00035e10: 277b 6672 6f6d 5f6c 616e 6775 6167 657d  '{from_language}
-00035e20: 2d7b 746f 5f6c 616e 6775 6167 657d 275d  -{to_language}']
-00035e30: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-00035e40: 6f70 7469 6f6e 7327 3a20 2777 6964 6765  options': 'widge
-00035e50: 743d 7465 7874 2c61 6c69 676e 6d65 6e74  t=text,alignment
-00035e60: 2c6d 6172 6b53 656e 7465 6e63 6573 272c  ,markSentences',
-00035e70: 0d0a 2020 2020 2020 2020 7d0d 0a20 2020  ..        }..   
-00035e80: 2020 2020 2072 203d 2073 656c 662e 7365       r = self.se
-00035e90: 7373 696f 6e2e 706f 7374 2873 656c 662e  ssion.post(self.
-00035ea0: 6170 695f 7572 6c2c 206a 736f 6e3d 7061  api_url, json=pa
-00035eb0: 796c 6f61 642c 2068 6561 6465 7273 3d73  yload, headers=s
-00035ec0: 656c 662e 6170 695f 6865 6164 6572 732c  elf.api_headers,
-00035ed0: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
-00035ee0: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
-00035ef0: 7329 0d0a 2020 2020 2020 2020 722e 7261  s)..        r.ra
-00035f00: 6973 655f 666f 725f 7374 6174 7573 2829  ise_for_status()
-00035f10: 0d0a 2020 2020 2020 2020 6461 7461 203d  ..        data =
-00035f20: 2072 2e6a 736f 6e28 290d 0a20 2020 2020   r.json()..     
-00035f30: 2020 2074 696d 652e 736c 6565 7028 736c     time.sleep(sl
-00035f40: 6565 705f 7365 636f 6e64 7329 0d0a 2020  eep_seconds)..  
-00035f50: 2020 2020 2020 7365 6c66 2e71 7565 7279        self.query
-00035f60: 5f63 6f75 6e74 202b 3d20 310d 0a20 2020  _count += 1..   
-00035f70: 2020 2020 2072 6574 7572 6e20 6461 7461       return data
-00035f80: 2069 6620 6973 5f64 6574 6169 6c5f 7265   if is_detail_re
-00035f90: 7375 6c74 2065 6c73 6520 6461 7461 5b27  sult else data['
-00035fa0: 7472 616e 736c 6174 696f 6e27 5d0d 0a0d  translation']...
-00035fb0: 0a0d 0a63 6c61 7373 2043 6c6f 7564 5969  ...class CloudYi
-00035fc0: 2854 7365 293a 0d0a 2020 2020 6465 6620  (Tse):..    def 
-00035fd0: 5f5f 696e 6974 5f5f 2873 656c 6629 3a0d  __init__(self):.
-00035fe0: 0a20 2020 2020 2020 2073 7570 6572 2829  .        super()
-00035ff0: 2e5f 5f69 6e69 745f 5f28 290d 0a20 2020  .__init__()..   
-00036000: 2020 2020 2073 656c 662e 6265 6769 6e5f       self.begin_
-00036010: 7469 6d65 203d 2074 696d 652e 7469 6d65  time = time.time
-00036020: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
-00036030: 2e68 6f6d 655f 7572 6c20 3d20 2768 7474  .home_url = 'htt
-00036040: 7073 3a2f 2f77 7777 2e63 6c6f 7564 7472  ps://www.cloudtr
-00036050: 616e 736c 6174 696f 6e2e 636f 6d27 0d0a  anslation.com'..
-00036060: 2020 2020 2020 2020 7365 6c66 2e68 6f73          self.hos
-00036070: 745f 7572 6c20 3d20 2768 7474 7073 3a2f  t_url = 'https:/
-00036080: 2f77 7777 2e63 6c6f 7564 7472 616e 736c  /www.cloudtransl
-00036090: 6174 696f 6e2e 636f 6d2f 232f 7472 616e  ation.com/#/tran
-000360a0: 736c 6174 6527 0d0a 2020 2020 2020 2020  slate'..        
-000360b0: 7365 6c66 2e61 7069 5f75 726c 203d 2027  self.api_url = '
-000360c0: 6874 7470 733a 2f2f 7777 772e 636c 6f75  https://www.clou
-000360d0: 6474 7261 6e73 6c61 7469 6f6e 2e63 6f6d  dtranslation.com
-000360e0: 2f6f 6666 6963 6961 6c2d 7765 6273 6974  /official-websit
-000360f0: 652f 7631 2f74 7261 6e73 4f6e 6553 7263  e/v1/transOneSrc
-00036100: 5465 7874 270d 0a20 2020 2020 2020 2073  Text'..        s
-00036110: 656c 662e 6765 745f 6c61 6e67 5f75 726c  elf.get_lang_url
-00036120: 203d 2027 6874 7470 733a 2f2f 6f6e 6c69   = 'https://onli
-00036130: 6e65 2e63 6c6f 7564 7472 616e 736c 6174  ne.cloudtranslat
-00036140: 696f 6e2e 636f 6d2f 6170 692f 7631 2e30  ion.com/api/v1.0
-00036150: 2f73 6974 652f 6765 745f 616c 6c5f 6c61  /site/get_all_la
-00036160: 6e67 7561 6765 5f61 6e64 5f64 6f6d 6169  nguage_and_domai
-00036170: 6e27 0d0a 2020 2020 2020 2020 7365 6c66  n'..        self
-00036180: 2e64 6574 6563 745f 6c61 6e67 5f75 726c  .detect_lang_url
-00036190: 203d 2027 6874 7470 733a 2f2f 6f6e 6c69   = 'https://onli
-000361a0: 6e65 2e63 6c6f 7564 7472 616e 736c 6174  ne.cloudtranslat
-000361b0: 696f 6e2e 636f 6d2f 6170 692f 7631 2e30  ion.com/api/v1.0
-000361c0: 2f72 6571 7565 7374 5f74 7261 6e73 6c61  /request_transla
-000361d0: 7465 2f6c 616e 6769 6427 0d0a 2020 2020  te/langid'..    
-000361e0: 2020 2020 7365 6c66 2e67 6574 5f63 6f6f      self.get_coo
-000361f0: 6b69 655f 7572 6c20 3d20 2768 7474 7073  kie_url = 'https
-00036200: 3a2f 2f6f 6e6c 696e 652e 636c 6f75 6474  ://online.cloudt
-00036210: 7261 6e73 6c61 7469 6f6e 2e63 6f6d 2f61  ranslation.com/a
-00036220: 7069 2f76 312e 302f 7369 7465 2f73 6974  pi/v1.0/site/sit
-00036230: 6573 5f6c 616e 6775 6167 655f 6c69 7374  es_language_list
-00036240: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
-00036250: 686f 7374 5f68 6561 6465 7273 203d 2073  host_headers = s
-00036260: 656c 662e 6765 745f 6865 6164 6572 7328  elf.get_headers(
-00036270: 7365 6c66 2e68 6f6d 655f 7572 6c2c 2069  self.home_url, i
-00036280: 665f 6170 693d 4661 6c73 652c 2069 665f  f_api=False, if_
-00036290: 7265 6665 7265 725f 666f 725f 686f 7374  referer_for_host
-000362a0: 3d54 7275 6529 0d0a 2020 2020 2020 2020  =True)..        
-000362b0: 7365 6c66 2e61 7069 5f68 6561 6465 7273  self.api_headers
-000362c0: 203d 2073 656c 662e 6765 745f 6865 6164   = self.get_head
-000362d0: 6572 7328 7365 6c66 2e68 6f6d 655f 7572  ers(self.home_ur
-000362e0: 6c2c 2069 665f 6170 693d 5472 7565 2c20  l, if_api=True, 
-000362f0: 6966 5f6a 736f 6e5f 666f 725f 6170 693d  if_json_for_api=
-00036300: 5472 7565 290d 0a20 2020 2020 2020 2073  True)..        s
-00036310: 656c 662e 7365 7373 696f 6e20 3d20 4e6f  elf.session = No
-00036320: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
-00036330: 2e6c 616e 6775 6167 655f 6d61 7020 3d20  .language_map = 
-00036340: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-00036350: 6c66 2e6c 616e 6770 6169 725f 646f 6d61  lf.langpair_doma
-00036360: 696e 203d 204e 6f6e 650d 0a20 2020 2020  in = None..     
-00036370: 2020 2073 656c 662e 7072 6f66 6573 7369     self.professi
-00036380: 6f6e 616c 5f66 6965 6c64 203d 204e 6f6e  onal_field = Non
-00036390: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
-000363a0: 7175 6572 795f 636f 756e 7420 3d20 300d  query_count = 0.
+00035a20: 2761 7069 275d 5b27 6170 7049 4427 5d2c  'api']['appID'],
+00035a30: 2027 7569 4c61 6e67 7561 6765 4944 273a   'uiLanguageID':
+00035a40: 2073 656c 662e 636f 6e66 6967 5f64 6174   self.config_dat
+00035a50: 615b 276d 7427 5d5b 2761 7069 275d 5b27  a['mt']['api']['
+00035a60: 7569 4c61 6e67 7561 6765 4944 275d 7d0d  uiLanguageID']}.
+00035a70: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00035a80: 662e 7379 735f 6461 7461 203d 2073 656c  f.sys_data = sel
+00035a90: 662e 7365 7373 696f 6e2e 6765 7428 7379  f.session.get(sy
+00035aa0: 735f 7572 6c2c 2070 6172 616d 733d 7061  s_url, params=pa
+00035ab0: 7261 6d73 2c20 6865 6164 6572 733d 7365  rams, headers=se
+00035ac0: 6c66 2e61 7069 5f68 6561 6465 7273 2c20  lf.api_headers, 
+00035ad0: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+00035ae0: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+00035af0: 292e 6a73 6f6e 2829 2020 2320 7465 7374  ).json()  # test
+00035b00: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00035b10: 6c66 2e6c 616e 6770 6169 725f 6964 7320  lf.langpair_ids 
+00035b20: 3d20 7365 6c66 2e67 6574 5f6c 616e 6770  = self.get_langp
+00035b30: 6169 725f 6964 7328 7365 6c66 2e73 7973  air_ids(self.sys
+00035b40: 5f64 6174 6129 0d0a 2020 2020 2020 2020  _data)..        
+00035b50: 2020 2020 6465 6275 675f 6c61 6e67 5f6b      debug_lang_k
+00035b60: 7761 7267 7320 3d20 7365 6c66 2e64 6562  wargs = self.deb
+00035b70: 7567 5f6c 616e 675f 6b77 6172 6773 2866  ug_lang_kwargs(f
+00035b80: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
+00035b90: 5f6c 616e 6775 6167 652c 2073 656c 662e  _language, self.
+00035ba0: 6465 6661 756c 745f 6672 6f6d 5f6c 616e  default_from_lan
+00035bb0: 6775 6167 652c 2069 665f 7072 696e 745f  guage, if_print_
+00035bc0: 7761 726e 696e 6729 0d0a 2020 2020 2020  warning)..      
+00035bd0: 2020 2020 2020 7365 6c66 2e6c 616e 6775        self.langu
+00035be0: 6167 655f 6d61 7020 3d20 7365 6c66 2e67  age_map = self.g
+00035bf0: 6574 5f6c 616e 6775 6167 655f 6d61 7028  et_language_map(
+00035c00: 7365 6c66 2e73 7973 5f64 6174 612c 202a  self.sys_data, *
+00035c10: 2a64 6562 7567 5f6c 616e 675f 6b77 6172  *debug_lang_kwar
+00035c20: 6773 290d 0a0d 0a20 2020 2020 2020 2069  gs)....        i
+00035c30: 6620 6672 6f6d 5f6c 616e 6775 6167 6520  f from_language 
+00035c40: 3d3d 2027 6175 746f 273a 0d0a 2020 2020  == 'auto':..    
+00035c50: 2020 2020 2020 2020 6672 6f6d 5f6c 616e          from_lan
+00035c60: 6775 6167 6520 3d20 7365 6c66 2e77 6172  guage = self.war
+00035c70: 6e69 6e67 5f61 7574 6f5f 6c61 6e67 2827  ning_auto_lang('
+00035c80: 7469 6c64 6527 2c20 7365 6c66 2e64 6566  tilde', self.def
+00035c90: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
+00035ca0: 6765 2c20 6966 5f70 7269 6e74 5f77 6172  ge, if_print_war
+00035cb0: 6e69 6e67 290d 0a20 2020 2020 2020 2066  ning)..        f
+00035cc0: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
+00035cd0: 5f6c 616e 6775 6167 6520 3d20 7365 6c66  _language = self
+00035ce0: 2e63 6865 636b 5f6c 616e 6775 6167 6528  .check_language(
+00035cf0: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
+00035d00: 6f5f 6c61 6e67 7561 6765 2c20 7365 6c66  o_language, self
+00035d10: 2e6c 616e 6775 6167 655f 6d61 7029 0d0a  .language_map)..
+00035d20: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00035d30: 6420 3d20 7b0d 0a20 2020 2020 2020 2020  d = {..         
+00035d40: 2020 2027 7465 7874 273a 2071 7565 7279     'text': query
+00035d50: 5f74 6578 742c 0d0a 2020 2020 2020 2020  _text,..        
+00035d60: 2020 2020 2761 7070 4944 273a 2073 656c      'appID': sel
+00035d70: 662e 636f 6e66 6967 5f64 6174 615b 276d  f.config_data['m
+00035d80: 7427 5d5b 2761 7069 275d 5b27 6170 7049  t']['api']['appI
+00035d90: 4427 5d2c 0d0a 2020 2020 2020 2020 2020  D'],..          
+00035da0: 2020 2773 7973 7465 6d49 4427 3a20 7365    'systemID': se
+00035db0: 6c66 2e6c 616e 6770 6169 725f 6964 735b  lf.langpair_ids[
+00035dc0: 6627 7b66 726f 6d5f 6c61 6e67 7561 6765  f'{from_language
+00035dd0: 7d2d 7b74 6f5f 6c61 6e67 7561 6765 7d27  }-{to_language}'
+00035de0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+00035df0: 276f 7074 696f 6e73 273a 2027 7769 6467  'options': 'widg
+00035e00: 6574 3d74 6578 742c 616c 6967 6e6d 656e  et=text,alignmen
+00035e10: 742c 6d61 726b 5365 6e74 656e 6365 7327  t,markSentences'
+00035e20: 2c0d 0a20 2020 2020 2020 207d 0d0a 2020  ,..        }..  
+00035e30: 2020 2020 2020 7220 3d20 7365 6c66 2e73        r = self.s
+00035e40: 6573 7369 6f6e 2e70 6f73 7428 7365 6c66  ession.post(self
+00035e50: 2e61 7069 5f75 726c 2c20 6a73 6f6e 3d70  .api_url, json=p
+00035e60: 6179 6c6f 6164 2c20 6865 6164 6572 733d  ayload, headers=
+00035e70: 7365 6c66 2e61 7069 5f68 6561 6465 7273  self.api_headers
+00035e80: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
+00035e90: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
+00035ea0: 6573 290d 0a20 2020 2020 2020 2072 2e72  es)..        r.r
+00035eb0: 6169 7365 5f66 6f72 5f73 7461 7475 7328  aise_for_status(
+00035ec0: 290d 0a20 2020 2020 2020 2064 6174 6120  )..        data 
+00035ed0: 3d20 722e 6a73 6f6e 2829 0d0a 2020 2020  = r.json()..    
+00035ee0: 2020 2020 7469 6d65 2e73 6c65 6570 2873      time.sleep(s
+00035ef0: 6c65 6570 5f73 6563 6f6e 6473 290d 0a20  leep_seconds).. 
+00035f00: 2020 2020 2020 2073 656c 662e 7175 6572         self.quer
+00035f10: 795f 636f 756e 7420 2b3d 2031 0d0a 2020  y_count += 1..  
+00035f20: 2020 2020 2020 7265 7475 726e 2064 6174        return dat
+00035f30: 6120 6966 2069 735f 6465 7461 696c 5f72  a if is_detail_r
+00035f40: 6573 756c 7420 656c 7365 2064 6174 615b  esult else data[
+00035f50: 2774 7261 6e73 6c61 7469 6f6e 275d 0d0a  'translation']..
+00035f60: 0d0a 0d0a 636c 6173 7320 636c 6f75 6454  ....class cloudT
+00035f70: 7261 6e73 6c61 7469 6f6e 5631 2854 7365  ranslationV1(Tse
+00035f80: 293a 0d0a 2020 2020 6465 6620 5f5f 696e  ):..    def __in
+00035f90: 6974 5f5f 2873 656c 6629 3a0d 0a20 2020  it__(self):..   
+00035fa0: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
+00035fb0: 6e69 745f 5f28 290d 0a20 2020 2020 2020  nit__()..       
+00035fc0: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
+00035fd0: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
+00035fe0: 2020 2020 2020 2020 7365 6c66 2e68 6f6d          self.hom
+00035ff0: 655f 7572 6c20 3d20 2768 7474 7073 3a2f  e_url = 'https:/
+00036000: 2f77 7777 2e63 6c6f 7564 7472 616e 736c  /www.cloudtransl
+00036010: 6174 696f 6e2e 636f 6d27 0d0a 2020 2020  ation.com'..    
+00036020: 2020 2020 7365 6c66 2e68 6f73 745f 7572      self.host_ur
+00036030: 6c20 3d20 2768 7474 7073 3a2f 2f77 7777  l = 'https://www
+00036040: 2e63 6c6f 7564 7472 616e 736c 6174 696f  .cloudtranslatio
+00036050: 6e2e 636f 6d2f 232f 7472 616e 736c 6174  n.com/#/translat
+00036060: 6527 0d0a 2020 2020 2020 2020 7365 6c66  e'..        self
+00036070: 2e61 7069 5f75 726c 203d 2027 6874 7470  .api_url = 'http
+00036080: 733a 2f2f 7777 772e 636c 6f75 6474 7261  s://www.cloudtra
+00036090: 6e73 6c61 7469 6f6e 2e63 6f6d 2f6f 6666  nslation.com/off
+000360a0: 6963 6961 6c2d 7765 6273 6974 652f 7631  icial-website/v1
+000360b0: 2f74 7261 6e73 4f6e 6553 7263 5465 7874  /transOneSrcText
+000360c0: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+000360d0: 6765 745f 6c61 6e67 5f75 726c 203d 2027  get_lang_url = '
+000360e0: 6874 7470 733a 2f2f 6f6e 6c69 6e65 2e63  https://online.c
+000360f0: 6c6f 7564 7472 616e 736c 6174 696f 6e2e  loudtranslation.
+00036100: 636f 6d2f 6170 692f 7631 2e30 2f73 6974  com/api/v1.0/sit
+00036110: 652f 6765 745f 616c 6c5f 6c61 6e67 7561  e/get_all_langua
+00036120: 6765 5f61 6e64 5f64 6f6d 6169 6e27 0d0a  ge_and_domain'..
+00036130: 2020 2020 2020 2020 7365 6c66 2e64 6574          self.det
+00036140: 6563 745f 6c61 6e67 5f75 726c 203d 2027  ect_lang_url = '
+00036150: 6874 7470 733a 2f2f 6f6e 6c69 6e65 2e63  https://online.c
+00036160: 6c6f 7564 7472 616e 736c 6174 696f 6e2e  loudtranslation.
+00036170: 636f 6d2f 6170 692f 7631 2e30 2f72 6571  com/api/v1.0/req
+00036180: 7565 7374 5f74 7261 6e73 6c61 7465 2f6c  uest_translate/l
+00036190: 616e 6769 6427 0d0a 2020 2020 2020 2020  angid'..        
+000361a0: 7365 6c66 2e67 6574 5f63 6f6f 6b69 655f  self.get_cookie_
+000361b0: 7572 6c20 3d20 2768 7474 7073 3a2f 2f6f  url = 'https://o
+000361c0: 6e6c 696e 652e 636c 6f75 6474 7261 6e73  nline.cloudtrans
+000361d0: 6c61 7469 6f6e 2e63 6f6d 2f61 7069 2f76  lation.com/api/v
+000361e0: 312e 302f 7369 7465 2f73 6974 6573 5f6c  1.0/site/sites_l
+000361f0: 616e 6775 6167 655f 6c69 7374 270d 0a20  anguage_list'.. 
+00036200: 2020 2020 2020 2073 656c 662e 686f 7374         self.host
+00036210: 5f68 6561 6465 7273 203d 2073 656c 662e  _headers = self.
+00036220: 6765 745f 6865 6164 6572 7328 7365 6c66  get_headers(self
+00036230: 2e68 6f6d 655f 7572 6c2c 2069 665f 6170  .home_url, if_ap
+00036240: 693d 4661 6c73 652c 2069 665f 7265 6665  i=False, if_refe
+00036250: 7265 725f 666f 725f 686f 7374 3d54 7275  rer_for_host=Tru
+00036260: 6529 0d0a 2020 2020 2020 2020 7365 6c66  e)..        self
+00036270: 2e61 7069 5f68 6561 6465 7273 203d 2073  .api_headers = s
+00036280: 656c 662e 6765 745f 6865 6164 6572 7328  elf.get_headers(
+00036290: 7365 6c66 2e68 6f6d 655f 7572 6c2c 2069  self.home_url, i
+000362a0: 665f 6170 693d 5472 7565 2c20 6966 5f6a  f_api=True, if_j
+000362b0: 736f 6e5f 666f 725f 6170 693d 5472 7565  son_for_api=True
+000362c0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+000362d0: 7365 7373 696f 6e20 3d20 4e6f 6e65 0d0a  session = None..
+000362e0: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
+000362f0: 6775 6167 655f 6d61 7020 3d20 4e6f 6e65  guage_map = None
+00036300: 0d0a 2020 2020 2020 2020 7365 6c66 2e6c  ..        self.l
+00036310: 616e 6770 6169 725f 646f 6d61 696e 203d  angpair_domain =
+00036320: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
+00036330: 656c 662e 7072 6f66 6573 7369 6f6e 616c  elf.professional
+00036340: 5f66 6965 6c64 203d 204e 6f6e 650d 0a20  _field = None.. 
+00036350: 2020 2020 2020 2073 656c 662e 7175 6572         self.quer
+00036360: 795f 636f 756e 7420 3d20 300d 0a20 2020  y_count = 0..   
+00036370: 2020 2020 2073 656c 662e 6f75 7470 7574       self.output
+00036380: 5f7a 6820 3d20 277a 682d 636e 270d 0a20  _zh = 'zh-cn'.. 
+00036390: 2020 2020 2020 2073 656c 662e 6f75 7470         self.outp
+000363a0: 7574 5f65 6e20 3d20 2765 6e2d 7573 270d  ut_en = 'en-us'.
 000363b0: 0a20 2020 2020 2020 2073 656c 662e 6f75  .        self.ou
-000363c0: 7470 7574 5f7a 6820 3d20 277a 682d 636e  tput_zh = 'zh-cn
+000363c0: 7470 7574 5f61 7574 6f20 3d20 2761 6c6c  tput_auto = 'all
 000363d0: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
-000363e0: 6f75 7470 7574 5f65 6e20 3d20 2765 6e2d  output_en = 'en-
-000363f0: 7573 270d 0a20 2020 2020 2020 2073 656c  us'..        sel
-00036400: 662e 6f75 7470 7574 5f61 7574 6f20 3d20  f.output_auto = 
-00036410: 2761 6c6c 270d 0a20 2020 2020 2020 2073  'all'..        s
-00036420: 656c 662e 696e 7075 745f 6c69 6d69 7420  elf.input_limit 
-00036430: 3d20 696e 7428 3565 3329 0d0a 2020 2020  = int(5e3)..    
-00036440: 2020 2020 7365 6c66 2e64 6566 6175 6c74      self.default
-00036450: 5f66 726f 6d5f 6c61 6e67 7561 6765 203d  _from_language =
-00036460: 2073 656c 662e 6f75 7470 7574 5f7a 680d   self.output_zh.
-00036470: 0a0d 0a20 2020 2040 5473 652e 6465 6275  ...    @Tse.debu
-00036480: 675f 6c61 6e67 7561 6765 5f6d 6170 0d0a  g_language_map..
-00036490: 2020 2020 6465 6620 6765 745f 6c61 6e67      def get_lang
-000364a0: 7561 6765 5f6d 6170 2873 656c 662c 2064  uage_map(self, d
-000364b0: 5f6c 616e 675f 6d61 703a 2064 6963 742c  _lang_map: dict,
-000364c0: 202a 2a6b 7761 7267 733a 204c 616e 674d   **kwargs: LangM
-000364d0: 6170 4b77 6172 6773 5479 7065 2920 2d3e  apKwargsType) ->
-000364e0: 2064 6963 743a 0d0a 2020 2020 2020 2020   dict:..        
-000364f0: 7265 7475 726e 207b 6b3a 205b 6974 5b27  return {k: [it['
-00036500: 6c61 6e67 7561 6765 5f63 6f64 6527 5d20  language_code'] 
-00036510: 666f 7220 6974 2069 6e20 6974 656d 5d20  for it in item] 
-00036520: 666f 7220 6b2c 2069 7465 6d20 696e 2064  for k, item in d
-00036530: 5f6c 616e 675f 6d61 705b 2764 6174 6127  _lang_map['data'
-00036540: 5d5b 2773 7263 5f74 6f5f 7467 7427 5d2e  ]['src_to_tgt'].
-00036550: 6974 656d 7328 297d 0d0a 0d0a 2020 2020  items()}....    
-00036560: 6465 6620 6765 745f 6c61 6e67 7061 6972  def get_langpair
-00036570: 5f64 6f6d 6169 6e28 7365 6c66 2c20 645f  _domain(self, d_
-00036580: 6c61 6e67 5f6d 6170 3a20 6469 6374 2920  lang_map: dict) 
-00036590: 2d3e 2064 6963 743a 0d0a 2020 2020 2020  -> dict:..      
-000365a0: 2020 7265 7475 726e 207b 6b3a 205b 6974    return {k: [it
-000365b0: 5b27 646f 6d61 696e 5f63 6f64 6527 5d20  ['domain_code'] 
-000365c0: 666f 7220 6974 2069 6e20 6974 656d 5d20  for it in item] 
-000365d0: 666f 7220 6b2c 2069 7465 6d20 696e 2064  for k, item in d
-000365e0: 5f6c 616e 675f 6d61 705b 2764 6174 6127  _lang_map['data'
-000365f0: 5d5b 276c 616e 6775 6167 655f 7061 6972  ]['language_pair
-00036600: 5f74 6f5f 646f 6d61 696e 275d 2e69 7465  _to_domain'].ite
-00036610: 6d73 2829 7d0d 0a0d 0a20 2020 2064 6566  ms()}....    def
-00036620: 2067 6574 5f70 726f 6665 7373 696f 6e61   get_professiona
-00036630: 6c5f 6669 656c 645f 6c69 7374 2873 656c  l_field_list(sel
-00036640: 662c 2064 5f6c 616e 675f 6d61 703a 2064  f, d_lang_map: d
-00036650: 6963 7429 202d 3e20 7365 743a 0d0a 2020  ict) -> set:..  
-00036660: 2020 2020 2020 7265 7475 726e 207b 6974        return {it
-00036670: 5b27 646f 6d61 696e 5f63 6f64 6527 5d20  ['domain_code'] 
-00036680: 666f 7220 5f2c 2069 7465 6d20 696e 2064  for _, item in d
-00036690: 5f6c 616e 675f 6d61 705b 2764 6174 6127  _lang_map['data'
-000366a0: 5d5b 276c 616e 6775 6167 655f 7061 6972  ]['language_pair
-000366b0: 5f74 6f5f 646f 6d61 696e 275d 2e69 7465  _to_domain'].ite
-000366c0: 6d73 2829 2066 6f72 2069 7420 696e 2069  ms() for it in i
-000366d0: 7465 6d7d 0d0a 0d0a 2020 2020 4054 7365  tem}....    @Tse
-000366e0: 2e74 696d 655f 7374 6174 0d0a 2020 2020  .time_stat..    
-000366f0: 4054 7365 2e63 6865 636b 5f71 7565 7279  @Tse.check_query
-00036700: 0d0a 2020 2020 6465 6620 636c 6f75 6459  ..    def cloudY
-00036710: 695f 6170 6928 7365 6c66 2c20 7175 6572  i_api(self, quer
-00036720: 795f 7465 7874 3a20 7374 722c 2066 726f  y_text: str, fro
-00036730: 6d5f 6c61 6e67 7561 6765 3a20 7374 7220  m_language: str 
-00036740: 3d20 2761 7574 6f27 2c20 746f 5f6c 616e  = 'auto', to_lan
-00036750: 6775 6167 653a 2073 7472 203d 2027 656e  guage: str = 'en
-00036760: 272c 202a 2a6b 7761 7267 733a 2041 7069  ', **kwargs: Api
-00036770: 4b77 6172 6773 5479 7065 2920 2d3e 2055  KwargsType) -> U
-00036780: 6e69 6f6e 5b73 7472 2c20 6469 6374 5d3a  nion[str, dict]:
-00036790: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-000367a0: 2020 2020 2020 2068 7474 7073 3a2f 2f77         https://w
-000367b0: 7777 2e63 6c6f 7564 7472 616e 736c 6174  ww.cloudtranslat
-000367c0: 696f 6e2e 636f 6d2f 232f 7472 616e 736c  ion.com/#/transl
-000367d0: 6174 650d 0a20 2020 2020 2020 203a 7061  ate..        :pa
-000367e0: 7261 6d20 7175 6572 795f 7465 7874 3a20  ram query_text: 
-000367f0: 7374 722c 206d 7573 742e 0d0a 2020 2020  str, must...    
-00036800: 2020 2020 3a70 6172 616d 2066 726f 6d5f      :param from_
-00036810: 6c61 6e67 7561 6765 3a20 7374 722c 2064  language: str, d
-00036820: 6566 6175 6c74 2027 6175 746f 272e 0d0a  efault 'auto'...
-00036830: 2020 2020 2020 2020 3a70 6172 616d 2074          :param t
-00036840: 6f5f 6c61 6e67 7561 6765 3a20 7374 722c  o_language: str,
-00036850: 2064 6566 6175 6c74 2027 656e 272e 0d0a   default 'en'...
-00036860: 2020 2020 2020 2020 3a70 6172 616d 202a          :param *
-00036870: 2a6b 7761 7267 733a 0d0a 2020 2020 2020  *kwargs:..      
-00036880: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00036890: 2074 696d 656f 7574 3a20 666c 6f61 742c   timeout: float,
-000368a0: 2064 6566 6175 6c74 204e 6f6e 652e 0d0a   default None...
-000368b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000368c0: 3a70 6172 616d 2070 726f 7869 6573 3a20  :param proxies: 
-000368d0: 6469 6374 2c20 6465 6661 756c 7420 4e6f  dict, default No
-000368e0: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
-000368f0: 2020 2020 203a 7061 7261 6d20 736c 6565       :param slee
-00036900: 705f 7365 636f 6e64 733a 2066 6c6f 6174  p_seconds: float
-00036910: 2c20 6465 6661 756c 7420 302e 0d0a 2020  , default 0...  
-00036920: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00036930: 6172 616d 2069 735f 6465 7461 696c 5f72  aram is_detail_r
-00036940: 6573 756c 743a 2062 6f6f 6c2c 2064 6566  esult: bool, def
-00036950: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
-00036960: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00036970: 7261 6d20 6966 5f69 676e 6f72 655f 6c69  ram if_ignore_li
-00036980: 6d69 745f 6f66 5f6c 656e 6774 683a 2062  mit_of_length: b
-00036990: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
-000369a0: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
-000369b0: 2020 2020 203a 7061 7261 6d20 6c69 6d69       :param limi
-000369c0: 745f 6f66 5f6c 656e 6774 683a 2069 6e74  t_of_length: int
-000369d0: 2c20 6465 6661 756c 7420 3230 3030 302e  , default 20000.
-000369e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000369f0: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
-00036a00: 7265 5f65 6d70 7479 5f71 7565 7279 3a20  re_empty_query: 
-00036a10: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
-00036a20: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
-00036a30: 2020 2020 2020 3a70 6172 616d 2075 7064        :param upd
-00036a40: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-00036a50: 725f 6672 6571 3a20 696e 742c 2064 6566  r_freq: int, def
-00036a60: 6175 6c74 2031 3030 302e 0d0a 2020 2020  ault 1000...    
-00036a70: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00036a80: 616d 2075 7064 6174 655f 7365 7373 696f  am update_sessio
-00036a90: 6e5f 6166 7465 725f 7365 636f 6e64 733a  n_after_seconds:
-00036aa0: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
-00036ab0: 3135 3030 2e0d 0a20 2020 2020 2020 2020  1500...         
-00036ac0: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-00036ad0: 5f73 686f 775f 7469 6d65 5f73 7461 743a  _show_time_stat:
-00036ae0: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
-00036af0: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
-00036b00: 2020 2020 2020 203a 7061 7261 6d20 7368         :param sh
-00036b10: 6f77 5f74 696d 655f 7374 6174 5f70 7265  ow_time_stat_pre
-00036b20: 6369 7369 6f6e 3a20 696e 742c 2064 6566  cision: int, def
-00036b30: 6175 6c74 2032 2e0d 0a20 2020 2020 2020  ault 2...       
-00036b40: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00036b50: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
-00036b60: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-00036b70: 5472 7565 2e0d 0a20 2020 2020 2020 2020  True...         
-00036b80: 2020 2020 2020 203a 7061 7261 6d20 7072         :param pr
-00036b90: 6f66 6573 7369 6f6e 616c 5f66 6965 6c64  ofessional_field
-00036ba0: 3a20 7374 722c 2064 6566 6175 6c74 2027  : str, default '
-00036bb0: 6765 6e65 7261 6c27 2e0d 0a20 2020 2020  general'...     
-00036bc0: 2020 203a 7265 7475 726e 3a20 7374 7220     :return: str 
-00036bd0: 6f72 2064 6963 740d 0a20 2020 2020 2020  or dict..       
-00036be0: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
-00036bf0: 7573 655f 646f 6d61 696e 203d 206b 7761  use_domain = kwa
-00036c00: 7267 732e 6765 7428 2770 726f 6665 7373  rgs.get('profess
-00036c10: 696f 6e61 6c5f 6669 656c 6427 2c20 2767  ional_field', 'g
-00036c20: 656e 6572 616c 2729 0d0a 2020 2020 2020  eneral')..      
-00036c30: 2020 7469 6d65 6f75 7420 3d20 6b77 6172    timeout = kwar
-00036c40: 6773 2e67 6574 2827 7469 6d65 6f75 7427  gs.get('timeout'
-00036c50: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
-00036c60: 2070 726f 7869 6573 203d 206b 7761 7267   proxies = kwarg
-00036c70: 732e 6765 7428 2770 726f 7869 6573 272c  s.get('proxies',
-00036c80: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
-00036c90: 736c 6565 705f 7365 636f 6e64 7320 3d20  sleep_seconds = 
-00036ca0: 6b77 6172 6773 2e67 6574 2827 736c 6565  kwargs.get('slee
-00036cb0: 705f 7365 636f 6e64 7327 2c20 3029 0d0a  p_seconds', 0)..
-00036cc0: 2020 2020 2020 2020 6966 5f70 7269 6e74          if_print
-00036cd0: 5f77 6172 6e69 6e67 203d 206b 7761 7267  _warning = kwarg
-00036ce0: 732e 6765 7428 2769 665f 7072 696e 745f  s.get('if_print_
-00036cf0: 7761 726e 696e 6727 2c20 5472 7565 290d  warning', True).
-00036d00: 0a20 2020 2020 2020 2069 735f 6465 7461  .        is_deta
-00036d10: 696c 5f72 6573 756c 7420 3d20 6b77 6172  il_result = kwar
-00036d20: 6773 2e67 6574 2827 6973 5f64 6574 6169  gs.get('is_detai
-00036d30: 6c5f 7265 7375 6c74 272c 2046 616c 7365  l_result', False
-00036d40: 290d 0a20 2020 2020 2020 2075 7064 6174  )..        updat
-00036d50: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
-00036d60: 6672 6571 203d 206b 7761 7267 732e 6765  freq = kwargs.ge
-00036d70: 7428 2775 7064 6174 655f 7365 7373 696f  t('update_sessio
-00036d80: 6e5f 6166 7465 725f 6672 6571 272c 2073  n_after_freq', s
-00036d90: 656c 662e 6465 6661 756c 745f 7365 7373  elf.default_sess
-00036da0: 696f 6e5f 6672 6571 290d 0a20 2020 2020  ion_freq)..     
-00036db0: 2020 2075 7064 6174 655f 7365 7373 696f     update_sessio
-00036dc0: 6e5f 6166 7465 725f 7365 636f 6e64 7320  n_after_seconds 
-00036dd0: 3d20 6b77 6172 6773 2e67 6574 2827 7570  = kwargs.get('up
-00036de0: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-00036df0: 6572 5f73 6563 6f6e 6473 272c 2073 656c  er_seconds', sel
-00036e00: 662e 6465 6661 756c 745f 7365 7373 696f  f.default_sessio
-00036e10: 6e5f 7365 636f 6e64 7329 0d0a 2020 2020  n_seconds)..    
-00036e20: 2020 2020 7365 6c66 2e63 6865 636b 5f69      self.check_i
-00036e30: 6e70 7574 5f6c 696d 6974 2871 7565 7279  nput_limit(query
-00036e40: 5f74 6578 742c 2073 656c 662e 696e 7075  _text, self.inpu
-00036e50: 745f 6c69 6d69 7429 0d0a 0d0a 2020 2020  t_limit)....    
-00036e60: 2020 2020 6e6f 745f 7570 6461 7465 5f63      not_update_c
-00036e70: 6f6e 645f 6672 6571 203d 2031 2069 6620  ond_freq = 1 if 
-00036e80: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
-00036e90: 2025 2075 7064 6174 655f 7365 7373 696f   % update_sessio
-00036ea0: 6e5f 6166 7465 725f 6672 6571 2021 3d20  n_after_freq != 
-00036eb0: 3020 656c 7365 2030 0d0a 2020 2020 2020  0 else 0..      
-00036ec0: 2020 6e6f 745f 7570 6461 7465 5f63 6f6e    not_update_con
-00036ed0: 645f 7469 6d65 203d 2031 2069 6620 7469  d_time = 1 if ti
-00036ee0: 6d65 2e74 696d 6528 2920 2d20 7365 6c66  me.time() - self
-00036ef0: 2e62 6567 696e 5f74 696d 6520 3c20 7570  .begin_time < up
-00036f00: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-00036f10: 6572 5f73 6563 6f6e 6473 2065 6c73 6520  er_seconds else 
-00036f20: 300d 0a20 2020 2020 2020 2069 6620 6e6f  0..        if no
-00036f30: 7420 2873 656c 662e 7365 7373 696f 6e20  t (self.session 
-00036f40: 616e 6420 7365 6c66 2e6c 616e 6775 6167  and self.languag
-00036f50: 655f 6d61 7020 616e 6420 6e6f 745f 7570  e_map and not_up
-00036f60: 6461 7465 5f63 6f6e 645f 6672 6571 2061  date_cond_freq a
-00036f70: 6e64 206e 6f74 5f75 7064 6174 655f 636f  nd not_update_co
-00036f80: 6e64 5f74 696d 6529 3a0d 0a20 2020 2020  nd_time):..     
-00036f90: 2020 2020 2020 2073 656c 662e 6265 6769         self.begi
-00036fa0: 6e5f 7469 6d65 203d 2074 696d 652e 7469  n_time = time.ti
-00036fb0: 6d65 2829 0d0a 2020 2020 2020 2020 2020  me()..          
-00036fc0: 2020 7365 6c66 2e73 6573 7369 6f6e 203d    self.session =
-00036fd0: 2072 6571 7565 7374 732e 5365 7373 696f   requests.Sessio
-00036fe0: 6e28 290d 0a20 2020 2020 2020 2020 2020  n()..           
-00036ff0: 205f 203d 2073 656c 662e 7365 7373 696f   _ = self.sessio
-00037000: 6e2e 6765 7428 7365 6c66 2e68 6f73 745f  n.get(self.host_
-00037010: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
-00037020: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
-00037030: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
-00037040: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
-00037050: 290d 0a20 2020 2020 2020 2020 2020 205f  )..            _
-00037060: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
-00037070: 6765 7428 7365 6c66 2e67 6574 5f63 6f6f  get(self.get_coo
-00037080: 6b69 655f 7572 6c2c 2068 6561 6465 7273  kie_url, headers
-00037090: 3d73 656c 662e 6170 695f 6865 6164 6572  =self.api_header
-000370a0: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
-000370b0: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
-000370c0: 6965 7329 0d0a 2020 2020 2020 2020 2020  ies)..          
-000370d0: 2020 645f 6c61 6e67 5f6d 6170 203d 2073    d_lang_map = s
-000370e0: 656c 662e 7365 7373 696f 6e2e 6765 7428  elf.session.get(
-000370f0: 7365 6c66 2e67 6574 5f6c 616e 675f 7572  self.get_lang_ur
-00037100: 6c2c 2068 6561 6465 7273 3d73 656c 662e  l, headers=self.
-00037110: 6170 695f 6865 6164 6572 732c 2074 696d  api_headers, tim
-00037120: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
-00037130: 6f78 6965 733d 7072 6f78 6965 7329 2e6a  oxies=proxies).j
-00037140: 736f 6e28 290d 0a20 2020 2020 2020 2020  son()..         
-00037150: 2020 2064 6562 7567 5f6c 616e 675f 6b77     debug_lang_kw
-00037160: 6172 6773 203d 2073 656c 662e 6465 6275  args = self.debu
-00037170: 675f 6c61 6e67 5f6b 7761 7267 7328 6672  g_lang_kwargs(fr
-00037180: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-00037190: 6c61 6e67 7561 6765 2c20 7365 6c66 2e64  language, self.d
-000371a0: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
-000371b0: 7561 6765 2c20 6966 5f70 7269 6e74 5f77  uage, if_print_w
-000371c0: 6172 6e69 6e67 290d 0a20 2020 2020 2020  arning)..       
-000371d0: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-000371e0: 6765 5f6d 6170 203d 2073 656c 662e 6765  ge_map = self.ge
-000371f0: 745f 6c61 6e67 7561 6765 5f6d 6170 2864  t_language_map(d
-00037200: 5f6c 616e 675f 6d61 702c 202a 2a64 6562  _lang_map, **deb
-00037210: 7567 5f6c 616e 675f 6b77 6172 6773 290d  ug_lang_kwargs).
-00037220: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00037230: 662e 6c61 6e67 7061 6972 5f64 6f6d 6169  f.langpair_domai
-00037240: 6e20 3d20 7365 6c66 2e67 6574 5f6c 616e  n = self.get_lan
-00037250: 6770 6169 725f 646f 6d61 696e 2864 5f6c  gpair_domain(d_l
-00037260: 616e 675f 6d61 7029 0d0a 2020 2020 2020  ang_map)..      
-00037270: 2020 2020 2020 7365 6c66 2e70 726f 6665        self.profe
-00037280: 7373 696f 6e61 6c5f 6669 656c 6420 3d20  ssional_field = 
-00037290: 7365 6c66 2e67 6574 5f70 726f 6665 7373  self.get_profess
-000372a0: 696f 6e61 6c5f 6669 656c 645f 6c69 7374  ional_field_list
-000372b0: 2864 5f6c 616e 675f 6d61 7029 0d0a 0d0a  (d_lang_map)....
-000372c0: 2020 2020 2020 2020 6966 2066 726f 6d5f          if from_
-000372d0: 6c61 6e67 7561 6765 203d 3d20 2761 7574  language == 'aut
-000372e0: 6f27 3a0d 0a20 2020 2020 2020 2020 2020  o':..           
-000372f0: 2070 6179 6c6f 6164 203d 207b 2774 6578   payload = {'tex
-00037300: 7427 3a20 7175 6572 795f 7465 7874 7d0d  t': query_text}.
-00037310: 0a20 2020 2020 2020 2020 2020 2072 203d  .            r =
-00037320: 2073 656c 662e 7365 7373 696f 6e2e 706f   self.session.po
-00037330: 7374 2873 656c 662e 6465 7465 6374 5f6c  st(self.detect_l
-00037340: 616e 675f 7572 6c2c 206a 736f 6e3d 7061  ang_url, json=pa
-00037350: 796c 6f61 642c 2068 6561 6465 7273 3d73  yload, headers=s
-00037360: 656c 662e 6170 695f 6865 6164 6572 732c  elf.api_headers,
-00037370: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
-00037380: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
-00037390: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-000373a0: 6672 6f6d 5f6c 616e 6775 6167 6520 3d20  from_language = 
-000373b0: 722e 6a73 6f6e 2829 5b27 6461 7461 275d  r.json()['data']
-000373c0: 5b27 6c61 6e67 7561 6765 275d 0d0a 2020  ['language']..  
-000373d0: 2020 2020 2020 6672 6f6d 5f6c 616e 6775        from_langu
-000373e0: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
-000373f0: 203d 2066 726f 6d5f 6c61 6e67 7561 6765   = from_language
-00037400: 2e6c 6f77 6572 2829 2c20 746f 5f6c 616e  .lower(), to_lan
-00037410: 6775 6167 652e 6c6f 7765 7228 2920 2023  guage.lower()  #
-00037420: 206d 7573 7420 6c6f 7765 720d 0a20 2020   must lower..   
-00037430: 2020 2020 2066 726f 6d5f 6c61 6e67 7561       from_langua
-00037440: 6765 2c20 746f 5f6c 616e 6775 6167 6520  ge, to_language 
-00037450: 3d20 7365 6c66 2e63 6865 636b 5f6c 616e  = self.check_lan
-00037460: 6775 6167 6528 6672 6f6d 5f6c 616e 6775  guage(from_langu
-00037470: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
-00037480: 2c20 7365 6c66 2e6c 616e 6775 6167 655f  , self.language_
-00037490: 6d61 702c 206f 7574 7075 745f 7a68 3d73  map, output_zh=s
-000374a0: 656c 662e 6f75 7470 7574 5f7a 682c 0d0a  elf.output_zh,..
-000374b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000374c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000374d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000374e0: 2020 2020 2020 2020 206f 7574 7075 745f           output_
-000374f0: 656e 5f74 7261 6e73 6c61 746f 723d 2763  en_translator='c
-00037500: 6c6f 7564 5969 272c 206f 7574 7075 745f  loudYi', output_
-00037510: 656e 3d73 656c 662e 6f75 7470 7574 5f65  en=self.output_e
-00037520: 6e29 0d0a 0d0a 2020 2020 2020 2020 646f  n)....        do
-00037530: 6d61 696e 7320 3d20 7365 6c66 2e6c 616e  mains = self.lan
-00037540: 6770 6169 725f 646f 6d61 696e 2e67 6574  gpair_domain.get
-00037550: 2866 277b 6672 6f6d 5f6c 616e 6775 6167  (f'{from_languag
-00037560: 657d 5f7b 746f 5f6c 616e 6775 6167 657d  e}_{to_language}
-00037570: 2729 0d0a 2020 2020 2020 2020 6966 206e  ')..        if n
-00037580: 6f74 2064 6f6d 6169 6e73 3a0d 0a20 2020  ot domains:..   
-00037590: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
-000375a0: 7261 6e73 6c61 746f 7245 7272 6f72 0d0a  ranslatorError..
-000375b0: 2020 2020 2020 2020 6966 2075 7365 5f64          if use_d
-000375c0: 6f6d 6169 6e20 6e6f 7420 696e 2064 6f6d  omain not in dom
-000375d0: 6169 6e73 3a0d 0a20 2020 2020 2020 2020  ains:..         
-000375e0: 2020 2075 7365 5f64 6f6d 6169 6e20 3d20     use_domain = 
-000375f0: 646f 6d61 696e 735b 305d 0d0a 0d0a 2020  domains[0]....  
-00037600: 2020 2020 2020 7061 796c 6f61 6420 3d20        payload = 
-00037610: 7b0d 0a20 2020 2020 2020 2020 2020 2027  {..            '
-00037620: 7465 7874 273a 2071 7565 7279 5f74 6578  text': query_tex
-00037630: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
-00037640: 2764 6f6d 6169 6e27 3a20 7573 655f 646f  'domain': use_do
-00037650: 6d61 696e 2c0d 0a20 2020 2020 2020 2020  main,..         
-00037660: 2020 2027 7372 634c 616e 6743 6f64 6527     'srcLangCode'
-00037670: 3a20 6672 6f6d 5f6c 616e 6775 6167 652c  : from_language,
-00037680: 0d0a 2020 2020 2020 2020 2020 2020 2774  ..            't
-00037690: 6774 4c61 6e67 436f 6465 273a 2074 6f5f  gtLangCode': to_
-000376a0: 6c61 6e67 7561 6765 2c0d 0a20 2020 2020  language,..     
-000376b0: 2020 207d 0d0a 2020 2020 2020 2020 7220     }..        r 
-000376c0: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e70  = self.session.p
-000376d0: 6f73 7428 7365 6c66 2e61 7069 5f75 726c  ost(self.api_url
-000376e0: 2c20 6a73 6f6e 3d70 6179 6c6f 6164 2c20  , json=payload, 
-000376f0: 6865 6164 6572 733d 7365 6c66 2e61 7069  headers=self.api
-00037700: 5f68 6561 6465 7273 2c20 7469 6d65 6f75  _headers, timeou
-00037710: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
-00037720: 6573 3d70 726f 7869 6573 290d 0a20 2020  es=proxies)..   
-00037730: 2020 2020 2072 2e72 6169 7365 5f66 6f72       r.raise_for
-00037740: 5f73 7461 7475 7328 290d 0a20 2020 2020  _status()..     
-00037750: 2020 2064 6174 6120 3d20 722e 6a73 6f6e     data = r.json
-00037760: 2829 0d0a 2020 2020 2020 2020 7469 6d65  ()..        time
-00037770: 2e73 6c65 6570 2873 6c65 6570 5f73 6563  .sleep(sleep_sec
-00037780: 6f6e 6473 290d 0a20 2020 2020 2020 2073  onds)..        s
-00037790: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
-000377a0: 2b3d 2031 0d0a 2020 2020 2020 2020 7265  += 1..        re
-000377b0: 7475 726e 2064 6174 6120 6966 2069 735f  turn data if is_
-000377c0: 6465 7461 696c 5f72 6573 756c 7420 656c  detail_result el
-000377d0: 7365 2064 6174 615b 2764 6174 6127 5d5b  se data['data'][
-000377e0: 2774 7261 6e73 6c61 7469 6f6e 275d 0d0a  'translation']..
-000377f0: 0d0a 0d0a 636c 6173 7320 5379 7354 7261  ....class SysTra
-00037800: 6e28 5473 6529 3a0d 0a20 2020 2064 6566  n(Tse):..    def
-00037810: 205f 5f69 6e69 745f 5f28 7365 6c66 293a   __init__(self):
-00037820: 0d0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
-00037830: 292e 5f5f 696e 6974 5f5f 2829 0d0a 2020  ).__init__()..  
-00037840: 2020 2020 2020 7365 6c66 2e62 6567 696e        self.begin
-00037850: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
-00037860: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
-00037870: 662e 686f 6d65 5f75 726c 203d 2027 6874  f.home_url = 'ht
-00037880: 7470 733a 2f2f 7777 772e 7379 7374 7261  tps://www.systra
-00037890: 6e2e 6e65 7427 0d0a 2020 2020 2020 2020  n.net'..        
-000378a0: 7365 6c66 2e68 6f73 745f 7572 6c20 3d20  self.host_url = 
-000378b0: 2768 7474 7073 3a2f 2f77 7777 2e73 7973  'https://www.sys
-000378c0: 7472 616e 2e6e 6574 2f74 7261 6e73 6c61  tran.net/transla
-000378d0: 7465 2f27 0d0a 2020 2020 2020 2020 7365  te/'..        se
-000378e0: 6c66 2e61 7069 5f75 726c 203d 2027 6874  lf.api_url = 'ht
-000378f0: 7470 733a 2f2f 6170 692d 7472 616e 736c  tps://api-transl
-00037900: 6174 652e 7379 7374 7261 6e2e 6e65 742f  ate.systran.net/
-00037910: 7472 616e 736c 6174 696f 6e2f 7465 7874  translation/text
-00037920: 2f74 7261 6e73 6c61 7465 270d 0a20 2020  /translate'..   
-00037930: 2020 2020 2073 656c 662e 6765 745f 6c61       self.get_la
-00037940: 6e67 5f75 726c 203d 2027 6874 7470 733a  ng_url = 'https:
-00037950: 2f2f 6170 692d 7472 616e 736c 6174 652e  //api-translate.
-00037960: 7379 7374 7261 6e2e 6e65 742f 7472 616e  systran.net/tran
-00037970: 736c 6174 696f 6e2f 7375 7070 6f72 7465  slation/supporte
-00037980: 644c 616e 6775 6167 6573 270d 0a20 2020  dLanguages'..   
-00037990: 2020 2020 2073 656c 662e 6765 745f 746f       self.get_to
-000379a0: 6b65 6e5f 7572 6c20 3d20 2768 7474 7073  ken_url = 'https
-000379b0: 3a2f 2f74 7261 6e73 6c61 7465 2e73 7973  ://translate.sys
-000379c0: 7472 616e 2e6e 6574 2f6f 6964 632f 746f  tran.net/oidc/to
-000379d0: 6b65 6e27 0d0a 2020 2020 2020 2020 7365  ken'..        se
-000379e0: 6c66 2e67 6574 5f63 6c69 656e 745f 7572  lf.get_client_ur
-000379f0: 6c20 3d20 2768 7474 7073 3a2f 2f77 7777  l = 'https://www
-00037a00: 2e73 7973 7472 616e 2e6e 6574 2f77 702d  .systran.net/wp-
-00037a10: 636f 6e74 656e 742f 7468 656d 6573 2f73  content/themes/s
-00037a20: 7973 7472 616e 2f74 7261 6e73 6c61 746f  ystran/translato
-00037a30: 722f 6a73 2f74 7261 6e73 6c61 7465 426f  r/js/translateBo
-00037a40: 782e 6275 6e64 6c65 2e6a 7327 0d0a 2020  x.bundle.js'..  
-00037a50: 2020 2020 2020 7365 6c66 2e68 6f73 745f        self.host_
-00037a60: 6865 6164 6572 7320 3d20 7365 6c66 2e67  headers = self.g
-00037a70: 6574 5f68 6561 6465 7273 2873 656c 662e  et_headers(self.
-00037a80: 686f 6d65 5f75 726c 2c20 6966 5f61 7069  home_url, if_api
-00037a90: 3d46 616c 7365 2c20 6966 5f72 6566 6572  =False, if_refer
-00037aa0: 6572 5f66 6f72 5f68 6f73 743d 5472 7565  er_for_host=True
-00037ab0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00037ac0: 6170 695f 616a 6178 5f68 6561 6465 7273  api_ajax_headers
-00037ad0: 203d 2073 656c 662e 6765 745f 6865 6164   = self.get_head
-00037ae0: 6572 7328 7365 6c66 2e68 6f6d 655f 7572  ers(self.home_ur
-00037af0: 6c2c 2069 665f 6170 693d 5472 7565 2c20  l, if_api=True, 
-00037b00: 6966 5f61 6a61 785f 666f 725f 6170 693d  if_ajax_for_api=
-00037b10: 5472 7565 290d 0a20 2020 2020 2020 2073  True)..        s
-00037b20: 656c 662e 6170 695f 6a73 6f6e 5f68 6561  elf.api_json_hea
-00037b30: 6465 7273 203d 2073 656c 662e 6765 745f  ders = self.get_
-00037b40: 6865 6164 6572 7328 7365 6c66 2e68 6f6d  headers(self.hom
-00037b50: 655f 7572 6c2c 2069 665f 6170 693d 5472  e_url, if_api=Tr
-00037b60: 7565 2c20 6966 5f6a 736f 6e5f 666f 725f  ue, if_json_for_
-00037b70: 6170 693d 5472 7565 290d 0a20 2020 2020  api=True)..     
-00037b80: 2020 2073 656c 662e 7365 7373 696f 6e20     self.session 
-00037b90: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00037ba0: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
-00037bb0: 7020 3d20 4e6f 6e65 0d0a 2020 2020 2020  p = None..      
-00037bc0: 2020 7365 6c66 2e70 726f 6665 7373 696f    self.professio
-00037bd0: 6e61 6c5f 6669 656c 6420 3d20 4e6f 6e65  nal_field = None
-00037be0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6c  ..        self.l
-00037bf0: 616e 6770 6169 725f 646f 6d61 696e 203d  angpair_domain =
-00037c00: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
-00037c10: 656c 662e 636c 6965 6e74 5f64 6174 6120  elf.client_data 
-00037c20: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00037c30: 7365 6c66 2e74 6f6b 656e 5f64 6174 6120  self.token_data 
-00037c40: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00037c50: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
-00037c60: 203d 2030 0d0a 2020 2020 2020 2020 7365   = 0..        se
-00037c70: 6c66 2e6f 7574 7075 745f 7a68 203d 2027  lf.output_zh = '
-00037c80: 7a68 270d 0a20 2020 2020 2020 2073 656c  zh'..        sel
-00037c90: 662e 696e 7075 745f 6c69 6d69 7420 3d20  f.input_limit = 
-00037ca0: 696e 7428 3565 3329 0d0a 2020 2020 2020  int(5e3)..      
-00037cb0: 2020 7365 6c66 2e64 6566 6175 6c74 5f66    self.default_f
-00037cc0: 726f 6d5f 6c61 6e67 7561 6765 203d 2073  rom_language = s
-00037cd0: 656c 662e 6f75 7470 7574 5f7a 680d 0a0d  elf.output_zh...
-00037ce0: 0a20 2020 2040 5473 652e 6465 6275 675f  .    @Tse.debug_
-00037cf0: 6c61 6e67 7561 6765 5f6d 6170 0d0a 2020  language_map..  
-00037d00: 2020 6465 6620 6765 745f 6c61 6e67 7561    def get_langua
-00037d10: 6765 5f6d 6170 2873 656c 662c 2064 5f6c  ge_map(self, d_l
-00037d20: 616e 675f 6d61 703a 2064 6963 742c 202a  ang_map: dict, *
-00037d30: 2a6b 7761 7267 733a 204c 616e 674d 6170  *kwargs: LangMap
-00037d40: 4b77 6172 6773 5479 7065 2920 2d3e 2064  KwargsType) -> d
-00037d50: 6963 743a 0d0a 2020 2020 2020 2020 7265  ict:..        re
-00037d60: 7475 726e 207b 6969 5b27 736f 7572 6365  turn {ii['source
-00037d70: 275d 3a20 5b6a 6a5b 2774 6172 6765 7427  ']: [jj['target'
-00037d80: 5d20 666f 7220 6a6a 2069 6e20 645f 6c61  ] for jj in d_la
-00037d90: 6e67 5f6d 6170 5b27 6c61 6e67 7561 6765  ng_map['language
-00037da0: 5061 6972 7327 5d20 6966 206a 6a5b 2773  Pairs'] if jj['s
-00037db0: 6f75 7263 6527 5d20 3d3d 2069 695b 2773  ource'] == ii['s
-00037dc0: 6f75 7263 6527 5d5d 2066 6f72 2069 6920  ource']] for ii 
-00037dd0: 696e 2064 5f6c 616e 675f 6d61 705b 276c  in d_lang_map['l
-00037de0: 616e 6775 6167 6550 6169 7273 275d 7d0d  anguagePairs']}.
-00037df0: 0a0d 0a20 2020 2064 6566 2067 6574 5f70  ...    def get_p
-00037e00: 726f 6665 7373 696f 6e61 6c5f 6669 656c  rofessional_fiel
-00037e10: 645f 6c69 7374 2873 656c 662c 2064 5f6c  d_list(self, d_l
-00037e20: 616e 675f 6d61 703a 2064 6963 7429 202d  ang_map: dict) -
-00037e30: 3e20 7365 743a 0d0a 2020 2020 2020 2020  > set:..        
-00037e40: 7265 7475 726e 207b 6974 5b27 7365 6c65  return {it['sele
-00037e50: 6374 6f72 7327 5d5b 2764 6f6d 6169 6e27  ctors']['domain'
-00037e60: 5d20 666f 7220 6974 656d 2069 6e20 645f  ] for item in d_
-00037e70: 6c61 6e67 5f6d 6170 5b27 6c61 6e67 7561  lang_map['langua
-00037e80: 6765 5061 6972 7327 5d20 666f 7220 6974  gePairs'] for it
-00037e90: 2069 6e20 6974 656d 5b27 7072 6f66 696c   in item['profil
-00037ea0: 6573 275d 7d0d 0a0d 0a20 2020 2064 6566  es']}....    def
-00037eb0: 2067 6574 5f6c 616e 6770 6169 725f 646f   get_langpair_do
-00037ec0: 6d61 696e 2873 656c 662c 2064 5f6c 616e  main(self, d_lan
-00037ed0: 675f 6d61 703a 2064 6963 7429 202d 3e20  g_map: dict) -> 
-00037ee0: 6469 6374 3a0d 0a20 2020 2020 2020 2064  dict:..        d
-00037ef0: 6174 6120 3d20 7b0d 0a20 2020 2020 2020  ata = {..       
-00037f00: 2020 2020 2066 277b 6974 656d 5b22 736f       f'{item["so
-00037f10: 7572 6365 225d 7d5f 5f7b 6974 656d 5b22  urce"]}__{item["
-00037f20: 7461 7267 6574 225d 7d5f 5f7b 6974 5b22  target"]}__{it["
-00037f30: 7365 6c65 6374 6f72 7322 5d5b 2264 6f6d  selectors"]["dom
-00037f40: 6169 6e22 5d7d 273a 207b 0d0a 2020 2020  ain"]}': {..    
-00037f50: 2020 2020 2020 2020 2020 2020 2764 6f6d              'dom
-00037f60: 6169 6e27 3a20 6974 5b22 7365 6c65 6374  ain': it["select
-00037f70: 6f72 7322 5d5b 2264 6f6d 6169 6e22 5d2c  ors"]["domain"],
-00037f80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00037f90: 2020 276f 776e 6572 273a 2069 745b 2773    'owner': it['s
-00037fa0: 656c 6563 746f 7273 275d 5b27 6f77 6e65  electors']['owne
-00037fb0: 7227 5d2c 0d0a 2020 2020 2020 2020 2020  r'],..          
-00037fc0: 2020 2020 2020 2773 697a 6527 3a20 6974        'size': it
-00037fd0: 5b27 7365 6c65 6374 6f72 7327 5d5b 2773  ['selectors']['s
-00037fe0: 697a 6527 5d2c 0d0a 2020 2020 2020 2020  ize'],..        
-00037ff0: 2020 2020 7d20 666f 7220 6974 656d 2069      } for item i
-00038000: 6e20 645f 6c61 6e67 5f6d 6170 5b27 6c61  n d_lang_map['la
-00038010: 6e67 7561 6765 5061 6972 7327 5d20 666f  nguagePairs'] fo
-00038020: 7220 6974 2069 6e20 6974 656d 5b27 7072  r it in item['pr
-00038030: 6f66 696c 6573 275d 0d0a 2020 2020 2020  ofiles']..      
-00038040: 2020 7d0d 0a20 2020 2020 2020 2072 6574    }..        ret
-00038050: 7572 6e20 6461 7461 0d0a 0d0a 2020 2020  urn data....    
-00038060: 6465 6620 6765 745f 636c 6965 6e74 5f64  def get_client_d
-00038070: 6174 6128 7365 6c66 2c20 636c 6965 6e74  ata(self, client
-00038080: 5f75 726c 3a20 7374 722c 2073 733a 2053  _url: str, ss: S
-00038090: 6573 7369 6f6e 5479 7065 2c20 6865 6164  essionType, head
-000380a0: 6572 733a 2064 6963 742c 2074 696d 656f  ers: dict, timeo
-000380b0: 7574 3a20 666c 6f61 742c 2070 726f 7869  ut: float, proxi
-000380c0: 6573 3a20 6469 6374 2920 2d3e 2064 6963  es: dict) -> dic
-000380d0: 743a 0d0a 2020 2020 2020 2020 6a73 5f68  t:..        js_h
-000380e0: 746d 6c20 3d20 7373 2e67 6574 2863 6c69  tml = ss.get(cli
-000380f0: 656e 745f 7572 6c2c 2068 6561 6465 7273  ent_url, headers
-00038100: 3d68 6561 6465 7273 2c20 7469 6d65 6f75  =headers, timeou
-00038110: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
-00038120: 6573 3d70 726f 7869 6573 292e 7465 7874  es=proxies).text
-00038130: 0d0a 2020 2020 2020 2020 7365 6172 6368  ..        search
-00038140: 5f67 726f 7570 7320 3d20 7265 2e63 6f6d  _groups = re.com
-00038150: 7069 6c65 2827 2268 7474 7073 3a2f 2f74  pile('"https://t
-00038160: 7261 6e73 6c61 7465 2e73 7973 7472 616e  ranslate.systran
-00038170: 2e6e 6574 2f6f 6964 6322 2c5c 5c77 3d22  .net/oidc",\\w="
-00038180: 282e 2a3f 2922 2c5c 5c77 3d22 282e 2a3f  (.*?)",\\w="(.*?
-00038190: 2922 3b27 292e 7365 6172 6368 286a 735f  )";').search(js_
-000381a0: 6874 6d6c 2920 2023 205c 5c77 7b31 7d20  html)  # \\w{1} 
-000381b0: 3d3d 205c 5c77 0d0a 2020 2020 2020 2020  == \\w..        
-000381c0: 636c 6965 6e74 5f64 6174 6120 3d20 7b0d  client_data = {.
-000381d0: 0a20 2020 2020 2020 2020 2020 2027 6772  .            'gr
-000381e0: 616e 745f 7479 7065 273a 2027 636c 6965  ant_type': 'clie
-000381f0: 6e74 5f63 7265 6465 6e74 6961 6c73 272c  nt_credentials',
-00038200: 0d0a 2020 2020 2020 2020 2020 2020 2763  ..            'c
-00038210: 6c69 656e 745f 6964 273a 2073 6561 7263  lient_id': searc
-00038220: 685f 6772 6f75 7073 2e67 726f 7570 2831  h_groups.group(1
-00038230: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
-00038240: 2763 6c69 656e 745f 7365 6372 6574 273a  'client_secret':
-00038250: 2073 6561 7263 685f 6772 6f75 7073 2e67   search_groups.g
-00038260: 726f 7570 2832 292c 0d0a 2020 2020 2020  roup(2),..      
-00038270: 2020 7d0d 0a20 2020 2020 2020 2072 6574    }..        ret
-00038280: 7572 6e20 636c 6965 6e74 5f64 6174 610d  urn client_data.
-00038290: 0a0d 0a20 2020 2040 5473 652e 7469 6d65  ...    @Tse.time
-000382a0: 5f73 7461 740d 0a20 2020 2040 5473 652e  _stat..    @Tse.
-000382b0: 6368 6563 6b5f 7175 6572 790d 0a20 2020  check_query..   
-000382c0: 2064 6566 2073 7973 5472 616e 5f61 7069   def sysTran_api
-000382d0: 2873 656c 662c 2071 7565 7279 5f74 6578  (self, query_tex
-000382e0: 743a 2073 7472 2c20 6672 6f6d 5f6c 616e  t: str, from_lan
-000382f0: 6775 6167 653a 2073 7472 203d 2027 6175  guage: str = 'au
-00038300: 746f 272c 2074 6f5f 6c61 6e67 7561 6765  to', to_language
-00038310: 3a20 7374 7220 3d20 2765 6e27 2c20 2a2a  : str = 'en', **
-00038320: 6b77 6172 6773 3a20 4170 694b 7761 7267  kwargs: ApiKwarg
-00038330: 7354 7970 6529 202d 3e20 556e 696f 6e5b  sType) -> Union[
-00038340: 7374 722c 2064 6963 745d 3a0d 0a20 2020  str, dict]:..   
-00038350: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00038360: 2020 6874 7470 733a 2f2f 7777 772e 7379    https://www.sy
-00038370: 7374 7261 6e2e 6e65 742f 7472 616e 736c  stran.net/transl
-00038380: 6174 652f 0d0a 2020 2020 2020 2020 3a70  ate/..        :p
-00038390: 6172 616d 2071 7565 7279 5f74 6578 743a  aram query_text:
-000383a0: 2073 7472 2c20 6d75 7374 2e0d 0a20 2020   str, must...   
-000383b0: 2020 2020 203a 7061 7261 6d20 6672 6f6d       :param from
-000383c0: 5f6c 616e 6775 6167 653a 2073 7472 2c20  _language: str, 
-000383d0: 6465 6661 756c 7420 2761 7574 6f27 2e0d  default 'auto'..
-000383e0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-000383f0: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
-00038400: 2c20 6465 6661 756c 7420 2765 6e27 2e0d  , default 'en'..
-00038410: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00038420: 2a2a 6b77 6172 6773 3a0d 0a20 2020 2020  **kwargs:..     
-00038430: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00038440: 6d20 7469 6d65 6f75 743a 2066 6c6f 6174  m timeout: float
-00038450: 2c20 6465 6661 756c 7420 4e6f 6e65 2e0d  , default None..
-00038460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00038470: 203a 7061 7261 6d20 7072 6f78 6965 733a   :param proxies:
-00038480: 2064 6963 742c 2064 6566 6175 6c74 204e   dict, default N
-00038490: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
-000384a0: 2020 2020 2020 3a70 6172 616d 2073 6c65        :param sle
-000384b0: 6570 5f73 6563 6f6e 6473 3a20 666c 6f61  ep_seconds: floa
-000384c0: 742c 2064 6566 6175 6c74 2030 2e0d 0a20  t, default 0... 
-000384d0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-000384e0: 7061 7261 6d20 6973 5f64 6574 6169 6c5f  param is_detail_
-000384f0: 7265 7375 6c74 3a20 626f 6f6c 2c20 6465  result: bool, de
-00038500: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
-00038510: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00038520: 6172 616d 2069 665f 6967 6e6f 7265 5f6c  aram if_ignore_l
-00038530: 696d 6974 5f6f 665f 6c65 6e67 7468 3a20  imit_of_length: 
-00038540: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
-00038550: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
-00038560: 2020 2020 2020 3a70 6172 616d 206c 696d        :param lim
-00038570: 6974 5f6f 665f 6c65 6e67 7468 3a20 696e  it_of_length: in
-00038580: 742c 2064 6566 6175 6c74 2032 3030 3030  t, default 20000
-00038590: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-000385a0: 2020 203a 7061 7261 6d20 6966 5f69 676e     :param if_ign
-000385b0: 6f72 655f 656d 7074 795f 7175 6572 793a  ore_empty_query:
-000385c0: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
-000385d0: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
-000385e0: 2020 2020 2020 203a 7061 7261 6d20 7570         :param up
-000385f0: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-00038600: 6572 5f66 7265 713a 2069 6e74 2c20 6465  er_freq: int, de
-00038610: 6661 756c 7420 3130 3030 2e0d 0a20 2020  fault 1000...   
-00038620: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00038630: 7261 6d20 7570 6461 7465 5f73 6573 7369  ram update_sessi
-00038640: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-00038650: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
-00038660: 2031 3530 302e 0d0a 2020 2020 2020 2020   1500...        
-00038670: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-00038680: 665f 7368 6f77 5f74 696d 655f 7374 6174  f_show_time_stat
-00038690: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-000386a0: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
-000386b0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-000386c0: 686f 775f 7469 6d65 5f73 7461 745f 7072  how_time_stat_pr
-000386d0: 6563 6973 696f 6e3a 2069 6e74 2c20 6465  ecision: int, de
-000386e0: 6661 756c 7420 322e 0d0a 2020 2020 2020  fault 2...      
-000386f0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00038700: 2069 665f 7072 696e 745f 7761 726e 696e   if_print_warnin
-00038710: 673a 2062 6f6f 6c2c 2064 6566 6175 6c74  g: bool, default
-00038720: 2054 7275 652e 0d0a 2020 2020 2020 2020   True...        
-00038730: 2020 2020 2020 2020 3a70 6172 616d 2070          :param p
-00038740: 726f 6665 7373 696f 6e61 6c5f 6669 656c  rofessional_fiel
-00038750: 643a 2073 7472 2c20 6465 6661 756c 7420  d: str, default 
-00038760: 4e6f 6e65 2e0d 0a20 2020 2020 2020 203a  None...        :
-00038770: 7265 7475 726e 3a20 7374 7220 6f72 2064  return: str or d
-00038780: 6963 740d 0a20 2020 2020 2020 2022 2222  ict..        """
-00038790: 0d0a 0d0a 2020 2020 2020 2020 7573 655f  ....        use_
-000387a0: 646f 6d61 696e 203d 206b 7761 7267 732e  domain = kwargs.
-000387b0: 6765 7428 2770 726f 6665 7373 696f 6e61  get('professiona
-000387c0: 6c5f 6669 656c 6427 2c20 2747 656e 6572  l_field', 'Gener
-000387d0: 6963 2729 0d0a 2020 2020 2020 2020 7469  ic')..        ti
-000387e0: 6d65 6f75 7420 3d20 6b77 6172 6773 2e67  meout = kwargs.g
-000387f0: 6574 2827 7469 6d65 6f75 7427 2c20 4e6f  et('timeout', No
-00038800: 6e65 290d 0a20 2020 2020 2020 2070 726f  ne)..        pro
-00038810: 7869 6573 203d 206b 7761 7267 732e 6765  xies = kwargs.ge
-00038820: 7428 2770 726f 7869 6573 272c 204e 6f6e  t('proxies', Non
-00038830: 6529 0d0a 2020 2020 2020 2020 736c 6565  e)..        slee
-00038840: 705f 7365 636f 6e64 7320 3d20 6b77 6172  p_seconds = kwar
-00038850: 6773 2e67 6574 2827 736c 6565 705f 7365  gs.get('sleep_se
-00038860: 636f 6e64 7327 2c20 3029 0d0a 2020 2020  conds', 0)..    
-00038870: 2020 2020 6966 5f70 7269 6e74 5f77 6172      if_print_war
-00038880: 6e69 6e67 203d 206b 7761 7267 732e 6765  ning = kwargs.ge
-00038890: 7428 2769 665f 7072 696e 745f 7761 726e  t('if_print_warn
-000388a0: 696e 6727 2c20 5472 7565 290d 0a20 2020  ing', True)..   
-000388b0: 2020 2020 2069 735f 6465 7461 696c 5f72       is_detail_r
-000388c0: 6573 756c 7420 3d20 6b77 6172 6773 2e67  esult = kwargs.g
-000388d0: 6574 2827 6973 5f64 6574 6169 6c5f 7265  et('is_detail_re
-000388e0: 7375 6c74 272c 2046 616c 7365 290d 0a20  sult', False).. 
-000388f0: 2020 2020 2020 2075 7064 6174 655f 7365         update_se
-00038900: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
-00038910: 203d 206b 7761 7267 732e 6765 7428 2775   = kwargs.get('u
-00038920: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-00038930: 7465 725f 6672 6571 272c 2073 656c 662e  ter_freq', self.
-00038940: 6465 6661 756c 745f 7365 7373 696f 6e5f  default_session_
-00038950: 6672 6571 290d 0a20 2020 2020 2020 2075  freq)..        u
-00038960: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-00038970: 7465 725f 7365 636f 6e64 7320 3d20 6b77  ter_seconds = kw
-00038980: 6172 6773 2e67 6574 2827 7570 6461 7465  args.get('update
-00038990: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
-000389a0: 6563 6f6e 6473 272c 2073 656c 662e 6465  econds', self.de
-000389b0: 6661 756c 745f 7365 7373 696f 6e5f 7365  fault_session_se
-000389c0: 636f 6e64 7329 0d0a 2020 2020 2020 2020  conds)..        
-000389d0: 7365 6c66 2e63 6865 636b 5f69 6e70 7574  self.check_input
-000389e0: 5f6c 696d 6974 2871 7565 7279 5f74 6578  _limit(query_tex
-000389f0: 742c 2073 656c 662e 696e 7075 745f 6c69  t, self.input_li
-00038a00: 6d69 7429 0d0a 0d0a 2020 2020 2020 2020  mit)....        
-00038a10: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
-00038a20: 6672 6571 203d 2031 2069 6620 7365 6c66  freq = 1 if self
-00038a30: 2e71 7565 7279 5f63 6f75 6e74 2025 2075  .query_count % u
-00038a40: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-00038a50: 7465 725f 6672 6571 2021 3d20 3020 656c  ter_freq != 0 el
-00038a60: 7365 2030 0d0a 2020 2020 2020 2020 6e6f  se 0..        no
-00038a70: 745f 7570 6461 7465 5f63 6f6e 645f 7469  t_update_cond_ti
-00038a80: 6d65 203d 2031 2069 6620 7469 6d65 2e74  me = 1 if time.t
-00038a90: 696d 6528 2920 2d20 7365 6c66 2e62 6567  ime() - self.beg
-00038aa0: 696e 5f74 696d 6520 3c20 7570 6461 7465  in_time < update
-00038ab0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
-00038ac0: 6563 6f6e 6473 2065 6c73 6520 300d 0a20  econds else 0.. 
-00038ad0: 2020 2020 2020 2069 6620 6e6f 7420 2873         if not (s
-00038ae0: 656c 662e 7365 7373 696f 6e20 616e 6420  elf.session and 
-00038af0: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
-00038b00: 7020 616e 6420 6e6f 745f 7570 6461 7465  p and not_update
-00038b10: 5f63 6f6e 645f 6672 6571 2061 6e64 206e  _cond_freq and n
-00038b20: 6f74 5f75 7064 6174 655f 636f 6e64 5f74  ot_update_cond_t
-00038b30: 696d 6529 3a0d 0a20 2020 2020 2020 2020  ime):..         
-00038b40: 2020 2073 656c 662e 6265 6769 6e5f 7469     self.begin_ti
-00038b50: 6d65 203d 2074 696d 652e 7469 6d65 2829  me = time.time()
-00038b60: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00038b70: 6c66 2e73 6573 7369 6f6e 203d 2072 6571  lf.session = req
-00038b80: 7565 7374 732e 5365 7373 696f 6e28 290d  uests.Session().
-00038b90: 0a20 2020 2020 2020 2020 2020 205f 203d  .            _ =
-00038ba0: 2073 656c 662e 7365 7373 696f 6e2e 6765   self.session.ge
-00038bb0: 7428 7365 6c66 2e68 6f73 745f 7572 6c2c  t(self.host_url,
-00038bc0: 2068 6561 6465 7273 3d73 656c 662e 686f   headers=self.ho
-00038bd0: 7374 5f68 6561 6465 7273 2c20 7469 6d65  st_headers, time
-00038be0: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
-00038bf0: 7869 6573 3d70 726f 7869 6573 290d 0a20  xies=proxies).. 
-00038c00: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00038c10: 636c 6965 6e74 5f64 6174 6120 3d20 7365  client_data = se
-00038c20: 6c66 2e67 6574 5f63 6c69 656e 745f 6461  lf.get_client_da
-00038c30: 7461 2873 656c 662e 6765 745f 636c 6965  ta(self.get_clie
-00038c40: 6e74 5f75 726c 2c20 7365 6c66 2e73 6573  nt_url, self.ses
-00038c50: 7369 6f6e 2c20 7365 6c66 2e68 6f73 745f  sion, self.host_
-00038c60: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
-00038c70: 2c20 7072 6f78 6965 7329 0d0a 2020 2020  , proxies)..    
-00038c80: 2020 2020 2020 2020 7061 796c 6f61 6420          payload 
-00038c90: 3d20 7572 6c6c 6962 2e70 6172 7365 2e75  = urllib.parse.u
-00038ca0: 726c 656e 636f 6465 2873 656c 662e 636c  rlencode(self.cl
-00038cb0: 6965 6e74 5f64 6174 6129 0d0a 2020 2020  ient_data)..    
-00038cc0: 2020 2020 2020 2020 7365 6c66 2e74 6f6b          self.tok
-00038cd0: 656e 5f64 6174 6120 3d20 7365 6c66 2e73  en_data = self.s
-00038ce0: 6573 7369 6f6e 2e70 6f73 7428 7365 6c66  ession.post(self
-00038cf0: 2e67 6574 5f74 6f6b 656e 5f75 726c 2c20  .get_token_url, 
-00038d00: 6461 7461 3d70 6179 6c6f 6164 2c20 6865  data=payload, he
-00038d10: 6164 6572 733d 7365 6c66 2e61 7069 5f61  aders=self.api_a
-00038d20: 6a61 785f 6865 6164 6572 732c 2074 696d  jax_headers, tim
-00038d30: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
-00038d40: 6f78 6965 733d 7072 6f78 6965 7329 2e6a  oxies=proxies).j
-00038d50: 736f 6e28 290d 0a0d 0a20 2020 2020 2020  son()....       
-00038d60: 2020 2020 2068 6561 6465 725f 7061 7261       header_para
-00038d70: 6d73 203d 207b 0d0a 2020 2020 2020 2020  ms = {..        
-00038d80: 2020 2020 2020 2020 2761 7574 686f 7269          'authori
-00038d90: 7a61 7469 6f6e 273a 2066 277b 7365 6c66  zation': f'{self
-00038da0: 2e74 6f6b 656e 5f64 6174 615b 2274 6f6b  .token_data["tok
-00038db0: 656e 5f74 7970 6522 5d7d 207b 7365 6c66  en_type"]} {self
-00038dc0: 2e74 6f6b 656e 5f64 6174 615b 2261 6363  .token_data["acc
-00038dd0: 6573 735f 746f 6b65 6e22 5d7d 272c 0d0a  ess_token"]}',..
-00038de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038df0: 2778 2d75 7365 722d 6167 656e 7427 3a20  'x-user-agent': 
-00038e00: 2746 696c 6520 5472 616e 736c 6174 6520  'File Translate 
-00038e10: 426f 7820 506f 7274 6162 6c65 272c 0d0a  Box Portable',..
-00038e20: 2020 2020 2020 2020 2020 2020 7d0d 0a20              }.. 
-00038e30: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00038e40: 6170 695f 6a73 6f6e 5f68 6561 6465 7273  api_json_headers
-00038e50: 2e75 7064 6174 6528 6865 6164 6572 5f70  .update(header_p
-00038e60: 6172 616d 7329 0d0a 0d0a 2020 2020 2020  arams)....      
-00038e70: 2020 2020 2020 645f 6c61 6e67 5f6d 6170        d_lang_map
-00038e80: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
-00038e90: 6765 7428 7365 6c66 2e67 6574 5f6c 616e  get(self.get_lan
-00038ea0: 675f 7572 6c2c 2068 6561 6465 7273 3d73  g_url, headers=s
-00038eb0: 656c 662e 6170 695f 6a73 6f6e 5f68 6561  elf.api_json_hea
-00038ec0: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
-00038ed0: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
-00038ee0: 726f 7869 6573 292e 6a73 6f6e 2829 0d0a  roxies).json()..
-00038ef0: 2020 2020 2020 2020 2020 2020 6465 6275              debu
-00038f00: 675f 6c61 6e67 5f6b 7761 7267 7320 3d20  g_lang_kwargs = 
-00038f10: 7365 6c66 2e64 6562 7567 5f6c 616e 675f  self.debug_lang_
-00038f20: 6b77 6172 6773 2866 726f 6d5f 6c61 6e67  kwargs(from_lang
-00038f30: 7561 6765 2c20 746f 5f6c 616e 6775 6167  uage, to_languag
-00038f40: 652c 2073 656c 662e 6465 6661 756c 745f  e, self.default_
-00038f50: 6672 6f6d 5f6c 616e 6775 6167 652c 2069  from_language, i
-00038f60: 665f 7072 696e 745f 7761 726e 696e 6729  f_print_warning)
-00038f70: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00038f80: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
-00038f90: 3d20 7365 6c66 2e67 6574 5f6c 616e 6775  = self.get_langu
-00038fa0: 6167 655f 6d61 7028 645f 6c61 6e67 5f6d  age_map(d_lang_m
-00038fb0: 6170 2c20 2a2a 6465 6275 675f 6c61 6e67  ap, **debug_lang
-00038fc0: 5f6b 7761 7267 7329 0d0a 2020 2020 2020  _kwargs)..      
-00038fd0: 2020 2020 2020 7365 6c66 2e70 726f 6665        self.profe
-00038fe0: 7373 696f 6e61 6c5f 6669 656c 6420 3d20  ssional_field = 
-00038ff0: 7365 6c66 2e67 6574 5f70 726f 6665 7373  self.get_profess
-00039000: 696f 6e61 6c5f 6669 656c 645f 6c69 7374  ional_field_list
-00039010: 2864 5f6c 616e 675f 6d61 7029 0d0a 2020  (d_lang_map)..  
-00039020: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-00039030: 616e 6770 6169 725f 646f 6d61 696e 203d  angpair_domain =
-00039040: 2073 656c 662e 6765 745f 6c61 6e67 7061   self.get_langpa
-00039050: 6972 5f64 6f6d 6169 6e28 645f 6c61 6e67  ir_domain(d_lang
-00039060: 5f6d 6170 290d 0a0d 0a20 2020 2020 2020  _map)....       
-00039070: 2066 726f 6d5f 6c61 6e67 7561 6765 2c20   from_language, 
-00039080: 746f 5f6c 616e 6775 6167 6520 3d20 7365  to_language = se
-00039090: 6c66 2e63 6865 636b 5f6c 616e 6775 6167  lf.check_languag
-000390a0: 6528 6672 6f6d 5f6c 616e 6775 6167 652c  e(from_language,
-000390b0: 2074 6f5f 6c61 6e67 7561 6765 2c20 7365   to_language, se
-000390c0: 6c66 2e6c 616e 6775 6167 655f 6d61 702c  lf.language_map,
-000390d0: 206f 7574 7075 745f 7a68 3d73 656c 662e   output_zh=self.
-000390e0: 6f75 7470 7574 5f7a 6829 0d0a 2020 2020  output_zh)..    
-000390f0: 2020 2020 6966 2066 726f 6d5f 6c61 6e67      if from_lang
-00039100: 7561 6765 203d 3d20 2761 7574 6f27 3a0d  uage == 'auto':.
-00039110: 0a20 2020 2020 2020 2020 2020 2066 726f  .            fro
-00039120: 6d5f 6c61 6e67 7561 6765 203d 2073 656c  m_language = sel
-00039130: 662e 7761 726e 696e 675f 6175 746f 5f6c  f.warning_auto_l
-00039140: 616e 6728 2773 7973 5472 616e 272c 2073  ang('sysTran', s
-00039150: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
-00039160: 5f6c 616e 6775 6167 652c 2069 665f 7072  _language, if_pr
-00039170: 696e 745f 7761 726e 696e 6729 0d0a 0d0a  int_warning)....
-00039180: 2020 2020 2020 2020 7061 796c 6f61 6420          payload 
-00039190: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
-000391a0: 2027 7461 7267 6574 273a 2074 6f5f 6c61   'target': to_la
-000391b0: 6e67 7561 6765 2c0d 0a20 2020 2020 2020  nguage,..       
-000391c0: 2020 2020 2027 736f 7572 6365 273a 2066       'source': f
-000391d0: 726f 6d5f 6c61 6e67 7561 6765 2069 6620  rom_language if 
-000391e0: 6672 6f6d 5f6c 616e 6775 6167 6520 213d  from_language !=
-000391f0: 2027 6175 746f 2720 656c 7365 204e 6f6e   'auto' else Non
-00039200: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-00039210: 2769 6e70 7574 7327 3a20 5b70 6172 6167  'inputs': [parag
-00039220: 7261 7068 2066 6f72 2070 6172 6167 7261  raph for paragra
-00039230: 7068 2069 6e20 7175 6572 795f 7465 7874  ph in query_text
-00039240: 2e73 706c 6974 2827 5c6e 2729 2069 6620  .split('\n') if 
-00039250: 7061 7261 6772 6170 682e 7374 7269 7028  paragraph.strip(
-00039260: 295d 2c0d 0a20 2020 2020 2020 2020 2020  )],..           
-00039270: 2027 666f 726d 6174 273a 2027 7465 7874   'format': 'text
-00039280: 2f70 6c61 696e 272c 0d0a 2020 2020 2020  /plain',..      
-00039290: 2020 2020 2020 2761 7574 6f64 6574 6563        'autodetec
-000392a0: 7469 6f6e 4d6f 6465 273a 2027 7369 6e67  tionMode': 'sing
-000392b0: 6c65 272c 0d0a 2020 2020 2020 2020 2020  le',..          
-000392c0: 2020 2777 6974 6849 6e66 6f27 3a20 2774    'withInfo': 't
-000392d0: 7275 6527 2c0d 0a20 2020 2020 2020 2020  rue',..         
-000392e0: 2020 2027 7769 7468 416e 6e6f 7461 7469     'withAnnotati
-000392f0: 6f6e 7327 3a20 2774 7275 6527 2c0d 0a20  ons': 'true',.. 
-00039300: 2020 2020 2020 2020 2020 2027 7072 6f66             'prof
-00039310: 696c 6549 6427 3a20 4e6f 6e65 2c0d 0a20  ileId': None,.. 
-00039320: 2020 2020 2020 2020 2020 2027 646f 6d61             'doma
-00039330: 696e 273a 204e 6f6e 652c 0d0a 2020 2020  in': None,..    
-00039340: 2020 2020 2020 2020 276f 776e 6572 273a          'owner':
-00039350: 204e 6f6e 652c 0d0a 2020 2020 2020 2020   None,..        
-00039360: 2020 2020 2773 697a 6527 3a20 4e6f 6e65      'size': None
-00039370: 2c0d 0a20 2020 2020 2020 207d 0d0a 2020  ,..        }..  
-00039380: 2020 2020 2020 6966 2075 7365 5f64 6f6d        if use_dom
-00039390: 6169 6e20 616e 6420 6672 6f6d 5f6c 616e  ain and from_lan
-000393a0: 6775 6167 6520 213d 2027 6175 746f 273a  guage != 'auto':
-000393b0: 0d0a 2020 2020 2020 2020 2020 2020 646f  ..            do
-000393c0: 6d61 696e 5f70 6179 6c6f 6164 203d 2073  main_payload = s
-000393d0: 656c 662e 6c61 6e67 7061 6972 5f64 6f6d  elf.langpair_dom
-000393e0: 6169 6e2e 6765 7428 6627 7b66 726f 6d5f  ain.get(f'{from_
-000393f0: 6c61 6e67 7561 6765 7d5f 5f7b 746f 5f6c  language}__{to_l
-00039400: 616e 6775 6167 657d 5f5f 7b75 7365 5f64  anguage}__{use_d
-00039410: 6f6d 6169 6e7d 2729 0d0a 2020 2020 2020  omain}')..      
-00039420: 2020 2020 2020 6966 206e 6f74 2064 6f6d        if not dom
-00039430: 6169 6e5f 7061 796c 6f61 643a 0d0a 2020  ain_payload:..  
-00039440: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00039450: 6973 6520 5472 616e 736c 6174 6f72 4572  ise TranslatorEr
-00039460: 726f 720d 0a20 2020 2020 2020 2020 2020  ror..           
-00039470: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00039480: 2020 2020 2020 2020 7061 796c 6f61 642e          payload.
-00039490: 7570 6461 7465 2864 6f6d 6169 6e5f 7061  update(domain_pa
-000394a0: 796c 6f61 6429 0d0a 0d0a 2020 2020 2020  yload)....      
-000394b0: 2020 7220 3d20 7365 6c66 2e73 6573 7369    r = self.sessi
-000394c0: 6f6e 2e70 6f73 7428 7365 6c66 2e61 7069  on.post(self.api
-000394d0: 5f75 726c 2c20 6a73 6f6e 3d70 6179 6c6f  _url, json=paylo
-000394e0: 6164 2c20 6865 6164 6572 733d 7365 6c66  ad, headers=self
-000394f0: 2e61 7069 5f6a 736f 6e5f 6865 6164 6572  .api_json_header
-00039500: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
-00039510: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
-00039520: 6965 7329 0d0a 2020 2020 2020 2020 722e  ies)..        r.
-00039530: 7261 6973 655f 666f 725f 7374 6174 7573  raise_for_status
-00039540: 2829 0d0a 2020 2020 2020 2020 6461 7461  ()..        data
-00039550: 203d 2072 2e6a 736f 6e28 290d 0a20 2020   = r.json()..   
-00039560: 2020 2020 2074 696d 652e 736c 6565 7028       time.sleep(
-00039570: 736c 6565 705f 7365 636f 6e64 7329 0d0a  sleep_seconds)..
-00039580: 2020 2020 2020 2020 7365 6c66 2e71 7565          self.que
-00039590: 7279 5f63 6f75 6e74 202b 3d20 310d 0a20  ry_count += 1.. 
-000395a0: 2020 2020 2020 2072 6574 7572 6e20 6461         return da
-000395b0: 7461 2069 6620 6973 5f64 6574 6169 6c5f  ta if is_detail_
-000395c0: 7265 7375 6c74 2065 6c73 6520 275c 6e27  result else '\n'
-000395d0: 2e6a 6f69 6e28 2720 272e 6a6f 696e 2869  .join(' '.join(i
-000395e0: 745b 2761 6c74 5f74 7261 6e73 6573 275d  t['alt_transes']
-000395f0: 5b30 5d5b 2774 6172 6765 7427 5d5b 2774  [0]['target']['t
-00039600: 6578 7427 5d20 666f 7220 6974 2069 6e20  ext'] for it in 
-00039610: 6974 656d 5b27 6f75 7470 7574 275d 5b27  item['output']['
-00039620: 646f 6375 6d65 6e74 7327 5d5b 305d 5b27  documents'][0]['
-00039630: 7472 616e 735f 756e 6974 7327 5d5b 305d  trans_units'][0]
-00039640: 5b27 7365 6e74 656e 6365 7327 5d29 2066  ['sentences']) f
-00039650: 6f72 2069 7465 6d20 696e 2064 6174 615b  or item in data[
-00039660: 276f 7574 7075 7473 275d 290d 0a0d 0a0d  'outputs']).....
-00039670: 0a63 6c61 7373 2054 7261 6e73 6c61 7465  .class Translate
-00039680: 4d65 2854 7365 293a 0d0a 2020 2020 6465  Me(Tse):..    de
-00039690: 6620 5f5f 696e 6974 5f5f 2873 656c 6629  f __init__(self)
-000396a0: 3a0d 0a20 2020 2020 2020 2073 7570 6572  :..        super
-000396b0: 2829 2e5f 5f69 6e69 745f 5f28 290d 0a20  ().__init__().. 
-000396c0: 2020 2020 2020 2073 656c 662e 6265 6769         self.begi
-000396d0: 6e5f 7469 6d65 203d 2074 696d 652e 7469  n_time = time.ti
-000396e0: 6d65 2829 0d0a 2020 2020 2020 2020 7365  me()..        se
-000396f0: 6c66 2e68 6f73 745f 7572 6c20 3d20 2768  lf.host_url = 'h
-00039700: 7474 7073 3a2f 2f74 7261 6e73 6c61 7465  ttps://translate
-00039710: 6d65 2e6e 6574 776f 726b 2f27 0d0a 2020  me.network/'..  
-00039720: 2020 2020 2020 7365 6c66 2e61 7069 5f75        self.api_u
-00039730: 726c 203d 2027 6874 7470 733a 2f2f 7472  rl = 'https://tr
-00039740: 616e 736c 6174 656d 652e 6e65 7477 6f72  anslateme.networ
-00039750: 6b2f 7770 2d61 646d 696e 2f61 646d 696e  k/wp-admin/admin
-00039760: 2d61 6a61 782e 7068 7027 0d0a 2020 2020  -ajax.php'..    
-00039770: 2020 2020 7365 6c66 2e68 6f73 745f 6865      self.host_he
-00039780: 6164 6572 7320 3d20 7365 6c66 2e67 6574  aders = self.get
-00039790: 5f68 6561 6465 7273 2873 656c 662e 686f  _headers(self.ho
-000397a0: 7374 5f75 726c 2c20 6966 5f61 7069 3d46  st_url, if_api=F
-000397b0: 616c 7365 2c20 6966 5f72 6566 6572 6572  alse, if_referer
-000397c0: 5f66 6f72 5f68 6f73 743d 5472 7565 290d  _for_host=True).
-000397d0: 0a20 2020 2020 2020 2073 656c 662e 6170  .        self.ap
-000397e0: 695f 6865 6164 6572 7320 3d20 7365 6c66  i_headers = self
-000397f0: 2e67 6574 5f68 6561 6465 7273 2873 656c  .get_headers(sel
-00039800: 662e 686f 7374 5f75 726c 2c20 6966 5f61  f.host_url, if_a
-00039810: 7069 3d54 7275 652c 2069 665f 616a 6178  pi=True, if_ajax
-00039820: 5f66 6f72 5f61 7069 3d54 7275 6529 0d0a  _for_api=True)..
-00039830: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
-00039840: 7369 6f6e 203d 204e 6f6e 650d 0a20 2020  sion = None..   
-00039850: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-00039860: 6765 5f6d 6170 203d 204e 6f6e 650d 0a20  ge_map = None.. 
-00039870: 2020 2020 2020 2073 656c 662e 7175 6572         self.quer
-00039880: 795f 636f 756e 7420 3d20 300d 0a20 2020  y_count = 0..   
-00039890: 2020 2020 2073 656c 662e 6f75 7470 7574       self.output
-000398a0: 5f7a 6820 3d20 2743 6869 6e65 7365 270d  _zh = 'Chinese'.
-000398b0: 0a20 2020 2020 2020 2073 656c 662e 6f75  .        self.ou
-000398c0: 7470 7574 5f65 6e20 3d20 2745 6e67 6c69  tput_en = 'Engli
-000398d0: 7368 270d 0a20 2020 2020 2020 2073 656c  sh'..        sel
-000398e0: 662e 696e 7075 745f 6c69 6d69 7420 3d20  f.input_limit = 
-000398f0: 696e 7428 3165 3229 0d0a 2020 2020 2020  int(1e2)..      
-00039900: 2020 7365 6c66 2e64 6566 6175 6c74 5f66    self.default_f
-00039910: 726f 6d5f 6c61 6e67 7561 6765 203d 2073  rom_language = s
-00039920: 656c 662e 6f75 7470 7574 5f7a 680d 0a0d  elf.output_zh...
-00039930: 0a20 2020 2040 5473 652e 6465 6275 675f  .    @Tse.debug_
-00039940: 6c61 6e67 7561 6765 5f6d 6170 0d0a 2020  language_map..  
-00039950: 2020 6465 6620 6765 745f 6c61 6e67 7561    def get_langua
-00039960: 6765 5f6d 6170 2873 656c 662c 2068 6f73  ge_map(self, hos
-00039970: 745f 6874 6d6c 3a20 7374 722c 202a 2a6b  t_html: str, **k
-00039980: 7761 7267 733a 204c 616e 674d 6170 4b77  wargs: LangMapKw
-00039990: 6172 6773 5479 7065 2920 2d3e 2064 6963  argsType) -> dic
-000399a0: 743a 0d0a 2020 2020 2020 2020 6c61 6e67  t:..        lang
-000399b0: 5f6c 6973 7420 3d20 7265 2e63 6f6d 7069  _list = re.compi
-000399c0: 6c65 2827 6461 7461 2d6c 616e 673d 2228  le('data-lang="(
-000399d0: 2e2a 3f29 2227 292e 6669 6e64 616c 6c28  .*?)"').findall(
-000399e0: 686f 7374 5f68 746d 6c29 0d0a 2020 2020  host_html)..    
-000399f0: 2020 2020 6966 206e 6f74 206c 616e 675f      if not lang_
-00039a00: 6c69 7374 3a0d 0a20 2020 2020 2020 2020  list:..         
-00039a10: 2020 2072 6169 7365 2054 7261 6e73 6c61     raise Transla
-00039a20: 746f 7245 7272 6f72 0d0a 0d0a 2020 2020  torError....    
-00039a30: 2020 2020 6c61 6e67 5f6c 6973 7420 3d20      lang_list = 
-00039a40: 736f 7274 6564 286c 6973 7428 7365 7428  sorted(list(set(
-00039a50: 6c61 6e67 5f6c 6973 7429 2929 0d0a 2020  lang_list)))..  
-00039a60: 2020 2020 2020 7265 7475 726e 207b 7d2e        return {}.
-00039a70: 6672 6f6d 6b65 7973 286c 616e 675f 6c69  fromkeys(lang_li
-00039a80: 7374 2c20 6c61 6e67 5f6c 6973 7429 0d0a  st, lang_list)..
-00039a90: 0d0a 2020 2020 2320 4054 7365 2e75 6e63  ..    # @Tse.unc
-00039aa0: 6572 7469 6669 6564 0d0a 2020 2020 2320  ertified..    # 
-00039ab0: 4054 7365 2e74 696d 655f 7374 6174 0d0a  @Tse.time_stat..
-00039ac0: 2020 2020 2320 4054 7365 2e63 6865 636b      # @Tse.check
-00039ad0: 5f71 7565 7279 0d0a 2020 2020 6465 6620  _query..    def 
-00039ae0: 5f74 7261 6e73 6c61 7465 4d65 5f61 7069  _translateMe_api
-00039af0: 2873 656c 662c 2071 7565 7279 5f74 6578  (self, query_tex
-00039b00: 743a 2073 7472 2c20 6672 6f6d 5f6c 616e  t: str, from_lan
-00039b10: 6775 6167 653a 2073 7472 203d 2027 6175  guage: str = 'au
-00039b20: 746f 272c 2074 6f5f 6c61 6e67 7561 6765  to', to_language
-00039b30: 3a20 7374 7220 3d20 2765 6e27 2c20 2a2a  : str = 'en', **
-00039b40: 6b77 6172 6773 3a20 4170 694b 7761 7267  kwargs: ApiKwarg
-00039b50: 7354 7970 6529 202d 3e20 556e 696f 6e5b  sType) -> Union[
-00039b60: 7374 722c 2064 6963 745d 3a0d 0a20 2020  str, dict]:..   
-00039b70: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00039b80: 2020 6874 7470 733a 2f2f 7472 616e 736c    https://transl
-00039b90: 6174 656d 652e 6e65 7477 6f72 6b2f 0d0a  ateme.network/..
-00039ba0: 2020 2020 2020 2020 3a70 6172 616d 2071          :param q
-00039bb0: 7565 7279 5f74 6578 743a 2073 7472 2c20  uery_text: str, 
-00039bc0: 6d75 7374 2e0d 0a20 2020 2020 2020 203a  must...        :
-00039bd0: 7061 7261 6d20 6672 6f6d 5f6c 616e 6775  param from_langu
-00039be0: 6167 653a 2073 7472 2c20 6465 6661 756c  age: str, defaul
-00039bf0: 7420 2761 7574 6f27 2e0d 0a20 2020 2020  t 'auto'...     
-00039c00: 2020 203a 7061 7261 6d20 746f 5f6c 616e     :param to_lan
-00039c10: 6775 6167 653a 2073 7472 2c20 6465 6661  guage: str, defa
-00039c20: 756c 7420 2765 6e27 2e0d 0a20 2020 2020  ult 'en'...     
-00039c30: 2020 203a 7061 7261 6d20 2a2a 6b77 6172     :param **kwar
-00039c40: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
-00039c50: 2020 2020 203a 7061 7261 6d20 7469 6d65       :param time
-00039c60: 6f75 743a 2066 6c6f 6174 2c20 6465 6661  out: float, defa
-00039c70: 756c 7420 4e6f 6e65 2e0d 0a20 2020 2020  ult None...     
-00039c80: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00039c90: 6d20 7072 6f78 6965 733a 2064 6963 742c  m proxies: dict,
-00039ca0: 2064 6566 6175 6c74 204e 6f6e 652e 0d0a   default None...
-00039cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00039cc0: 3a70 6172 616d 2073 6c65 6570 5f73 6563  :param sleep_sec
-00039cd0: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
-00039ce0: 6175 6c74 2030 2e0d 0a20 2020 2020 2020  ault 0...       
-00039cf0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00039d00: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
-00039d10: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-00039d20: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
-00039d30: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-00039d40: 665f 6967 6e6f 7265 5f6c 696d 6974 5f6f  f_ignore_limit_o
-00039d50: 665f 6c65 6e67 7468 3a20 626f 6f6c 2c20  f_length: bool, 
-00039d60: 6465 6661 756c 7420 4661 6c73 652e 0d0a  default False...
-00039d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00039d80: 3a70 6172 616d 206c 696d 6974 5f6f 665f  :param limit_of_
-00039d90: 6c65 6e67 7468 3a20 696e 742c 2064 6566  length: int, def
-00039da0: 6175 6c74 2032 3030 3030 2e0d 0a20 2020  ault 20000...   
-00039db0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00039dc0: 7261 6d20 6966 5f69 676e 6f72 655f 656d  ram if_ignore_em
-00039dd0: 7074 795f 7175 6572 793a 2062 6f6f 6c2c  pty_query: bool,
-00039de0: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
-00039df0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00039e00: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
-00039e10: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
-00039e20: 713a 2069 6e74 2c20 6465 6661 756c 7420  q: int, default 
-00039e30: 3130 3030 2e0d 0a20 2020 2020 2020 2020  1000...         
-00039e40: 2020 2020 2020 203a 7061 7261 6d20 7570         :param up
-00039e50: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-00039e60: 6572 5f73 6563 6f6e 6473 3a20 666c 6f61  er_seconds: floa
-00039e70: 742c 2064 6566 6175 6c74 2031 3530 302e  t, default 1500.
-00039e80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00039e90: 2020 3a70 6172 616d 2069 665f 7368 6f77    :param if_show
-00039ea0: 5f74 696d 655f 7374 6174 3a20 626f 6f6c  _time_stat: bool
-00039eb0: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-00039ec0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00039ed0: 2020 3a70 6172 616d 2073 686f 775f 7469    :param show_ti
-00039ee0: 6d65 5f73 7461 745f 7072 6563 6973 696f  me_stat_precisio
-00039ef0: 6e3a 2069 6e74 2c20 6465 6661 756c 7420  n: int, default 
-00039f00: 322e 0d0a 2020 2020 2020 2020 2020 2020  2...            
-00039f10: 2020 2020 3a70 6172 616d 2069 665f 7072      :param if_pr
-00039f20: 696e 745f 7761 726e 696e 673a 2062 6f6f  int_warning: boo
-00039f30: 6c2c 2064 6566 6175 6c74 2054 7275 652e  l, default True.
-00039f40: 0d0a 2020 2020 2020 2020 3a72 6574 7572  ..        :retur
-00039f50: 6e3a 2073 7472 206f 7220 6469 6374 0d0a  n: str or dict..
-00039f60: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
-00039f70: 2020 2020 2020 2074 696d 656f 7574 203d         timeout =
-00039f80: 206b 7761 7267 732e 6765 7428 2774 696d   kwargs.get('tim
-00039f90: 656f 7574 272c 204e 6f6e 6529 0d0a 2020  eout', None)..  
-00039fa0: 2020 2020 2020 7072 6f78 6965 7320 3d20        proxies = 
-00039fb0: 6b77 6172 6773 2e67 6574 2827 7072 6f78  kwargs.get('prox
-00039fc0: 6965 7327 2c20 4e6f 6e65 290d 0a20 2020  ies', None)..   
-00039fd0: 2020 2020 2073 6c65 6570 5f73 6563 6f6e       sleep_secon
-00039fe0: 6473 203d 206b 7761 7267 732e 6765 7428  ds = kwargs.get(
-00039ff0: 2773 6c65 6570 5f73 6563 6f6e 6473 272c  'sleep_seconds',
-0003a000: 2030 290d 0a20 2020 2020 2020 2069 665f   0)..        if_
-0003a010: 7072 696e 745f 7761 726e 696e 6720 3d20  print_warning = 
-0003a020: 6b77 6172 6773 2e67 6574 2827 6966 5f70  kwargs.get('if_p
-0003a030: 7269 6e74 5f77 6172 6e69 6e67 272c 2054  rint_warning', T
-0003a040: 7275 6529 0d0a 2020 2020 2020 2020 6973  rue)..        is
-0003a050: 5f64 6574 6169 6c5f 7265 7375 6c74 203d  _detail_result =
-0003a060: 206b 7761 7267 732e 6765 7428 2769 735f   kwargs.get('is_
-0003a070: 6465 7461 696c 5f72 6573 756c 7427 2c20  detail_result', 
-0003a080: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
-0003a090: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
-0003a0a0: 6674 6572 5f66 7265 7120 3d20 6b77 6172  fter_freq = kwar
-0003a0b0: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
-0003a0c0: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
-0003a0d0: 7127 2c20 7365 6c66 2e64 6566 6175 6c74  q', self.default
-0003a0e0: 5f73 6573 7369 6f6e 5f66 7265 7129 0d0a  _session_freq)..
-0003a0f0: 2020 2020 2020 2020 7570 6461 7465 5f73          update_s
-0003a100: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-0003a110: 6f6e 6473 203d 206b 7761 7267 732e 6765  onds = kwargs.ge
-0003a120: 7428 2775 7064 6174 655f 7365 7373 696f  t('update_sessio
-0003a130: 6e5f 6166 7465 725f 7365 636f 6e64 7327  n_after_seconds'
-0003a140: 2c20 7365 6c66 2e64 6566 6175 6c74 5f73  , self.default_s
-0003a150: 6573 7369 6f6e 5f73 6563 6f6e 6473 290d  ession_seconds).
-0003a160: 0a20 2020 2020 2020 2073 656c 662e 6368  .        self.ch
-0003a170: 6563 6b5f 696e 7075 745f 6c69 6d69 7428  eck_input_limit(
-0003a180: 7175 6572 795f 7465 7874 2c20 7365 6c66  query_text, self
-0003a190: 2e69 6e70 7574 5f6c 696d 6974 290d 0a0d  .input_limit)...
-0003a1a0: 0a20 2020 2020 2020 206e 6f74 5f75 7064  .        not_upd
-0003a1b0: 6174 655f 636f 6e64 5f66 7265 7120 3d20  ate_cond_freq = 
-0003a1c0: 3120 6966 2073 656c 662e 7175 6572 795f  1 if self.query_
-0003a1d0: 636f 756e 7420 2520 7570 6461 7465 5f73  count % update_s
-0003a1e0: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
-0003a1f0: 7120 213d 2030 2065 6c73 6520 300d 0a20  q != 0 else 0.. 
-0003a200: 2020 2020 2020 206e 6f74 5f75 7064 6174         not_updat
-0003a210: 655f 636f 6e64 5f74 696d 6520 3d20 3120  e_cond_time = 1 
-0003a220: 6966 2074 696d 652e 7469 6d65 2829 202d  if time.time() -
-0003a230: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
-0003a240: 203c 2075 7064 6174 655f 7365 7373 696f   < update_sessio
-0003a250: 6e5f 6166 7465 725f 7365 636f 6e64 7320  n_after_seconds 
-0003a260: 656c 7365 2030 0d0a 2020 2020 2020 2020  else 0..        
-0003a270: 6966 206e 6f74 2028 7365 6c66 2e73 6573  if not (self.ses
-0003a280: 7369 6f6e 2061 6e64 2073 656c 662e 6c61  sion and self.la
-0003a290: 6e67 7561 6765 5f6d 6170 2061 6e64 206e  nguage_map and n
-0003a2a0: 6f74 5f75 7064 6174 655f 636f 6e64 5f66  ot_update_cond_f
-0003a2b0: 7265 7120 616e 6420 6e6f 745f 7570 6461  req and not_upda
-0003a2c0: 7465 5f63 6f6e 645f 7469 6d65 293a 0d0a  te_cond_time):..
-0003a2d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0003a2e0: 2e62 6567 696e 5f74 696d 6520 3d20 7469  .begin_time = ti
-0003a2f0: 6d65 2e74 696d 6528 290d 0a20 2020 2020  me.time()..     
-0003a300: 2020 2020 2020 2073 656c 662e 7365 7373         self.sess
-0003a310: 696f 6e20 3d20 7265 7175 6573 7473 2e53  ion = requests.S
-0003a320: 6573 7369 6f6e 2829 0d0a 2020 2020 2020  ession()..      
-0003a330: 2020 2020 2020 686f 7374 5f68 746d 6c20        host_html 
-0003a340: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e67  = self.session.g
-0003a350: 6574 2873 656c 662e 686f 7374 5f75 726c  et(self.host_url
-0003a360: 2c20 6865 6164 6572 733d 7365 6c66 2e68  , headers=self.h
-0003a370: 6f73 745f 6865 6164 6572 732c 2074 696d  ost_headers, tim
-0003a380: 656f 7574 3d74 696d 656f 7574 2c20 7072  eout=timeout, pr
-0003a390: 6f78 6965 733d 7072 6f78 6965 7329 2e74  oxies=proxies).t
-0003a3a0: 6578 740d 0a20 2020 2020 2020 2020 2020  ext..           
-0003a3b0: 2064 6562 7567 5f6c 616e 675f 6b77 6172   debug_lang_kwar
-0003a3c0: 6773 203d 2073 656c 662e 6465 6275 675f  gs = self.debug_
-0003a3d0: 6c61 6e67 5f6b 7761 7267 7328 6672 6f6d  lang_kwargs(from
-0003a3e0: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
-0003a3f0: 6e67 7561 6765 2c20 7365 6c66 2e64 6566  nguage, self.def
-0003a400: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
-0003a410: 6765 2c20 6966 5f70 7269 6e74 5f77 6172  ge, if_print_war
-0003a420: 6e69 6e67 290d 0a20 2020 2020 2020 2020  ning)..         
-0003a430: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
-0003a440: 5f6d 6170 203d 2073 656c 662e 6765 745f  _map = self.get_
-0003a450: 6c61 6e67 7561 6765 5f6d 6170 2868 6f73  language_map(hos
-0003a460: 745f 6874 6d6c 2c20 2a2a 6465 6275 675f  t_html, **debug_
-0003a470: 6c61 6e67 5f6b 7761 7267 7329 0d0a 0d0a  lang_kwargs)....
-0003a480: 2020 2020 2020 2020 6966 2066 726f 6d5f          if from_
-0003a490: 6c61 6e67 7561 6765 203d 3d20 2761 7574  language == 'aut
-0003a4a0: 6f27 3a0d 0a20 2020 2020 2020 2020 2020  o':..           
-0003a4b0: 2066 726f 6d5f 6c61 6e67 7561 6765 203d   from_language =
-0003a4c0: 2073 656c 662e 7761 726e 696e 675f 6175   self.warning_au
-0003a4d0: 746f 5f6c 616e 6728 2774 7261 6e73 6c61  to_lang('transla
-0003a4e0: 7465 4d65 272c 2073 656c 662e 6465 6661  teMe', self.defa
-0003a4f0: 756c 745f 6672 6f6d 5f6c 616e 6775 6167  ult_from_languag
-0003a500: 652c 2069 665f 7072 696e 745f 7761 726e  e, if_print_warn
-0003a510: 696e 6729 0d0a 2020 2020 2020 2020 6672  ing)..        fr
-0003a520: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-0003a530: 6c61 6e67 7561 6765 203d 2073 656c 662e  language = self.
-0003a540: 6368 6563 6b5f 6c61 6e67 7561 6765 2866  check_language(f
-0003a550: 726f 6d5f 6c61 6e67 7561 6765 2c20 746f  rom_language, to
-0003a560: 5f6c 616e 6775 6167 652c 2073 656c 662e  _language, self.
-0003a570: 6c61 6e67 7561 6765 5f6d 6170 2c20 6f75  language_map, ou
-0003a580: 7470 7574 5f7a 683d 7365 6c66 2e6f 7574  tput_zh=self.out
-0003a590: 7075 745f 7a68 2c0d 0a20 2020 2020 2020  put_zh,..       
-0003a5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a5d0: 2020 6f75 7470 7574 5f65 6e5f 7472 616e    output_en_tran
-0003a5e0: 736c 6174 6f72 3d27 7472 616e 736c 6174  slator='translat
-0003a5f0: 654d 6527 2c20 6f75 7470 7574 5f65 6e3d  eMe', output_en=
-0003a600: 7365 6c66 2e6f 7574 7075 745f 656e 290d  self.output_en).
-0003a610: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-0003a620: 2e6f 7574 7075 745f 656e 206e 6f74 2069  .output_en not i
-0003a630: 6e20 2866 726f 6d5f 6c61 6e67 7561 6765  n (from_language
-0003a640: 2c20 746f 5f6c 616e 6775 6167 6529 3a0d  , to_language):.
-0003a650: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0003a660: 7365 2054 7261 6e73 6c61 746f 7245 7272  se TranslatorErr
-0003a670: 6f72 2827 4d75 7374 2075 7365 2045 6e67  or('Must use Eng
-0003a680: 6c69 7368 2061 7320 616e 2069 6e74 6572  lish as an inter
-0003a690: 6d65 6469 6174 6520 7472 616e 736c 6174  mediate translat
-0003a6a0: 696f 6e2e 2729 0d0a 0d0a 2020 2020 2020  ion.')....      
-0003a6b0: 2020 6461 7461 5f6c 6973 7420 3d20 5b5d    data_list = []
-0003a6c0: 0d0a 2020 2020 2020 2020 7061 7261 6772  ..        paragr
-0003a6d0: 6170 6873 203d 205b 7061 7261 6772 6170  aphs = [paragrap
-0003a6e0: 6820 666f 7220 7061 7261 6772 6170 6820  h for paragraph 
-0003a6f0: 696e 2071 7565 7279 5f74 6578 742e 7370  in query_text.sp
-0003a700: 6c69 7428 275c 6e27 2920 6966 2070 6172  lit('\n') if par
-0003a710: 6167 7261 7068 2e73 7472 6970 2829 5d0d  agraph.strip()].
-0003a720: 0a20 2020 2020 2020 2066 6f72 2070 6172  .        for par
-0003a730: 6167 7261 7068 2069 6e20 7061 7261 6772  agraph in paragr
-0003a740: 6170 6873 3a0d 0a20 2020 2020 2020 2020  aphs:..         
-0003a750: 2020 2070 6179 6c6f 6164 203d 207b 0d0a     payload = {..
-0003a760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a770: 2774 6578 7427 3a20 7061 7261 6772 6170  'text': paragrap
-0003a780: 682c 0d0a 2020 2020 2020 2020 2020 2020  h,..            
-0003a790: 2020 2020 276c 616e 675f 6672 6f6d 273a      'lang_from':
-0003a7a0: 2066 726f 6d5f 6c61 6e67 7561 6765 2c0d   from_language,.
-0003a7b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003a7c0: 2027 6c61 6e67 5f74 6f27 3a20 746f 5f6c   'lang_to': to_l
-0003a7d0: 616e 6775 6167 652c 0d0a 2020 2020 2020  anguage,..      
-0003a7e0: 2020 2020 2020 2020 2020 2761 6374 696f            'actio
-0003a7f0: 6e27 3a20 2774 6d5f 6d79 5f61 6374 696f  n': 'tm_my_actio
-0003a800: 6e27 2c0d 0a20 2020 2020 2020 2020 2020  n',..           
-0003a810: 2020 2020 2027 7479 7065 273a 2027 636f       'type': 'co
-0003a820: 6e76 6572 7427 0d0a 2020 2020 2020 2020  nvert'..        
-0003a830: 2020 2020 7d0d 0a20 2020 2020 2020 2020      }..         
-0003a840: 2020 2070 6179 6c6f 6164 203d 2075 726c     payload = url
-0003a850: 6c69 622e 7061 7273 652e 7572 6c65 6e63  lib.parse.urlenc
-0003a860: 6f64 6528 7061 796c 6f61 6429 0d0a 2020  ode(payload)..  
-0003a870: 2020 2020 2020 2020 2020 7220 3d20 7365            r = se
-0003a880: 6c66 2e73 6573 7369 6f6e 2e70 6f73 7428  lf.session.post(
-0003a890: 7365 6c66 2e61 7069 5f75 726c 2c20 6461  self.api_url, da
-0003a8a0: 7461 3d70 6179 6c6f 6164 2c20 6865 6164  ta=payload, head
-0003a8b0: 6572 733d 7365 6c66 2e61 7069 5f68 6561  ers=self.api_hea
-0003a8c0: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
-0003a8d0: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
-0003a8e0: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
-0003a8f0: 2020 2020 2072 2e72 6169 7365 5f66 6f72       r.raise_for
-0003a900: 5f73 7461 7475 7328 290d 0a20 2020 2020  _status()..     
-0003a910: 2020 2020 2020 2064 6174 6120 3d20 722e         data = r.
-0003a920: 6a73 6f6e 2829 0d0a 2020 2020 2020 2020  json()..        
-0003a930: 2020 2020 6461 7461 5f6c 6973 742e 6170      data_list.ap
-0003a940: 7065 6e64 2864 6174 6129 0d0a 2020 2020  pend(data)..    
-0003a950: 2020 2020 7469 6d65 2e73 6c65 6570 2873      time.sleep(s
-0003a960: 6c65 6570 5f73 6563 6f6e 6473 290d 0a20  leep_seconds).. 
-0003a970: 2020 2020 2020 2073 656c 662e 7175 6572         self.quer
-0003a980: 795f 636f 756e 7420 2b3d 2031 0d0a 2020  y_count += 1..  
-0003a990: 2020 2020 2020 7265 7475 726e 207b 2764        return {'d
-0003a9a0: 6174 6127 3a20 6461 7461 5f6c 6973 747d  ata': data_list}
-0003a9b0: 2069 6620 6973 5f64 6574 6169 6c5f 7265   if is_detail_re
-0003a9c0: 7375 6c74 2065 6c73 6520 275c 6e27 2e6a  sult else '\n'.j
-0003a9d0: 6f69 6e28 5b69 7465 6d5b 2774 6f27 5d20  oin([item['to'] 
-0003a9e0: 666f 7220 6974 656d 2069 6e20 6461 7461  for item in data
-0003a9f0: 5f6c 6973 745d 290d 0a0d 0a20 2020 2040  _list])....    @
-0003aa00: 5473 652e 756e 6365 7274 6966 6965 640d  Tse.uncertified.
-0003aa10: 0a20 2020 2040 5473 652e 7469 6d65 5f73  .    @Tse.time_s
-0003aa20: 7461 740d 0a20 2020 2040 5473 652e 6368  tat..    @Tse.ch
-0003aa30: 6563 6b5f 7175 6572 790d 0a20 2020 2064  eck_query..    d
-0003aa40: 6566 2074 7261 6e73 6c61 7465 4d65 5f61  ef translateMe_a
-0003aa50: 7069 2873 656c 662c 2071 7565 7279 5f74  pi(self, query_t
-0003aa60: 6578 743a 2073 7472 2c20 6672 6f6d 5f6c  ext: str, from_l
-0003aa70: 616e 6775 6167 653a 2073 7472 203d 2027  anguage: str = '
-0003aa80: 6175 746f 272c 2074 6f5f 6c61 6e67 7561  auto', to_langua
-0003aa90: 6765 3a20 7374 7220 3d20 2765 6e27 2c20  ge: str = 'en', 
-0003aaa0: 2a2a 6b77 6172 6773 3a20 4170 694b 7761  **kwargs: ApiKwa
-0003aab0: 7267 7354 7970 6529 202d 3e20 556e 696f  rgsType) -> Unio
-0003aac0: 6e5b 7374 722c 2064 6963 745d 3a0d 0a20  n[str, dict]:.. 
-0003aad0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-0003aae0: 2020 2020 6874 7470 733a 2f2f 7472 616e      https://tran
-0003aaf0: 736c 6174 656d 652e 6e65 7477 6f72 6b2f  slateme.network/
-0003ab00: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
-0003ab10: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
-0003ab20: 2c20 6d75 7374 2e0d 0a20 2020 2020 2020  , must...       
-0003ab30: 203a 7061 7261 6d20 6672 6f6d 5f6c 616e   :param from_lan
-0003ab40: 6775 6167 653a 2073 7472 2c20 6465 6661  guage: str, defa
-0003ab50: 756c 7420 2761 7574 6f27 2e0d 0a20 2020  ult 'auto'...   
-0003ab60: 2020 2020 203a 7061 7261 6d20 746f 5f6c       :param to_l
-0003ab70: 616e 6775 6167 653a 2073 7472 2c20 6465  anguage: str, de
-0003ab80: 6661 756c 7420 2765 6e27 2e0d 0a20 2020  fault 'en'...   
-0003ab90: 2020 2020 203a 7061 7261 6d20 2a2a 6b77       :param **kw
-0003aba0: 6172 6773 3a0d 0a20 2020 2020 2020 2020  args:..         
-0003abb0: 2020 2020 2020 203a 7061 7261 6d20 7469         :param ti
-0003abc0: 6d65 6f75 743a 2066 6c6f 6174 2c20 6465  meout: float, de
-0003abd0: 6661 756c 7420 4e6f 6e65 2e0d 0a20 2020  fault None...   
-0003abe0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-0003abf0: 7261 6d20 7072 6f78 6965 733a 2064 6963  ram proxies: dic
-0003ac00: 742c 2064 6566 6175 6c74 204e 6f6e 652e  t, default None.
-0003ac10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0003ac20: 2020 3a70 6172 616d 2073 6c65 6570 5f73    :param sleep_s
-0003ac30: 6563 6f6e 6473 3a20 666c 6f61 742c 2064  econds: float, d
-0003ac40: 6566 6175 6c74 2030 2e0d 0a20 2020 2020  efault 0...     
-0003ac50: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-0003ac60: 6d20 6973 5f64 6574 6169 6c5f 7265 7375  m is_detail_resu
-0003ac70: 6c74 3a20 626f 6f6c 2c20 6465 6661 756c  lt: bool, defaul
-0003ac80: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-0003ac90: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0003aca0: 2069 665f 6967 6e6f 7265 5f6c 696d 6974   if_ignore_limit
-0003acb0: 5f6f 665f 6c65 6e67 7468 3a20 626f 6f6c  _of_length: bool
-0003acc0: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-0003acd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0003ace0: 2020 3a70 6172 616d 206c 696d 6974 5f6f    :param limit_o
-0003acf0: 665f 6c65 6e67 7468 3a20 696e 742c 2064  f_length: int, d
-0003ad00: 6566 6175 6c74 2032 3030 3030 2e0d 0a20  efault 20000... 
-0003ad10: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0003ad20: 7061 7261 6d20 6966 5f69 676e 6f72 655f  param if_ignore_
-0003ad30: 656d 7074 795f 7175 6572 793a 2062 6f6f  empty_query: boo
-0003ad40: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
-0003ad50: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0003ad60: 2020 203a 7061 7261 6d20 7570 6461 7465     :param update
-0003ad70: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-0003ad80: 7265 713a 2069 6e74 2c20 6465 6661 756c  req: int, defaul
-0003ad90: 7420 3130 3030 2e0d 0a20 2020 2020 2020  t 1000...       
-0003ada0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-0003adb0: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
-0003adc0: 6674 6572 5f73 6563 6f6e 6473 3a20 666c  fter_seconds: fl
-0003add0: 6f61 742c 2064 6566 6175 6c74 2031 3530  oat, default 150
-0003ade0: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
-0003adf0: 2020 2020 3a70 6172 616d 2069 665f 7368      :param if_sh
-0003ae00: 6f77 5f74 696d 655f 7374 6174 3a20 626f  ow_time_stat: bo
-0003ae10: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
-0003ae20: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-0003ae30: 2020 2020 3a70 6172 616d 2073 686f 775f      :param show_
-0003ae40: 7469 6d65 5f73 7461 745f 7072 6563 6973  time_stat_precis
-0003ae50: 696f 6e3a 2069 6e74 2c20 6465 6661 756c  ion: int, defaul
-0003ae60: 7420 322e 0d0a 2020 2020 2020 2020 2020  t 2...          
-0003ae70: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
-0003ae80: 7072 696e 745f 7761 726e 696e 673a 2062  print_warning: b
-0003ae90: 6f6f 6c2c 2064 6566 6175 6c74 2054 7275  ool, default Tru
-0003aea0: 652e 0d0a 2020 2020 2020 2020 3a72 6574  e...        :ret
-0003aeb0: 7572 6e3a 2073 7472 206f 7220 6469 6374  urn: str or dict
-0003aec0: 0d0a 2020 2020 2020 2020 2222 220d 0a0d  ..        """...
-0003aed0: 0a20 2020 2020 2020 2074 696d 656f 7574  .        timeout
-0003aee0: 203d 206b 7761 7267 732e 6765 7428 2774   = kwargs.get('t
-0003aef0: 696d 656f 7574 272c 204e 6f6e 6529 0d0a  imeout', None)..
-0003af00: 2020 2020 2020 2020 7072 6f78 6965 7320          proxies 
-0003af10: 3d20 6b77 6172 6773 2e67 6574 2827 7072  = kwargs.get('pr
-0003af20: 6f78 6965 7327 2c20 4e6f 6e65 290d 0a20  oxies', None).. 
-0003af30: 2020 2020 2020 2073 6c65 6570 5f73 6563         sleep_sec
-0003af40: 6f6e 6473 203d 206b 7761 7267 732e 6765  onds = kwargs.ge
-0003af50: 7428 2773 6c65 6570 5f73 6563 6f6e 6473  t('sleep_seconds
-0003af60: 272c 2030 290d 0a20 2020 2020 2020 2069  ', 0)..        i
-0003af70: 665f 7072 696e 745f 7761 726e 696e 6720  f_print_warning 
-0003af80: 3d20 6b77 6172 6773 2e67 6574 2827 6966  = kwargs.get('if
-0003af90: 5f70 7269 6e74 5f77 6172 6e69 6e67 272c  _print_warning',
-0003afa0: 2054 7275 6529 0d0a 2020 2020 2020 2020   True)..        
-0003afb0: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
-0003afc0: 203d 206b 7761 7267 732e 6765 7428 2769   = kwargs.get('i
-0003afd0: 735f 6465 7461 696c 5f72 6573 756c 7427  s_detail_result'
-0003afe0: 2c20 4661 6c73 6529 0d0a 2020 2020 2020  , False)..      
-0003aff0: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
-0003b000: 5f61 6674 6572 5f66 7265 7120 3d20 6b77  _after_freq = kw
-0003b010: 6172 6773 2e67 6574 2827 7570 6461 7465  args.get('update
-0003b020: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-0003b030: 7265 7127 2c20 7365 6c66 2e64 6566 6175  req', self.defau
-0003b040: 6c74 5f73 6573 7369 6f6e 5f66 7265 7129  lt_session_freq)
-0003b050: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
-0003b060: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
-0003b070: 6563 6f6e 6473 203d 206b 7761 7267 732e  econds = kwargs.
-0003b080: 6765 7428 2775 7064 6174 655f 7365 7373  get('update_sess
-0003b090: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
-0003b0a0: 7327 2c20 7365 6c66 2e64 6566 6175 6c74  s', self.default
-0003b0b0: 5f73 6573 7369 6f6e 5f73 6563 6f6e 6473  _session_seconds
-0003b0c0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0003b0d0: 6368 6563 6b5f 696e 7075 745f 6c69 6d69  check_input_limi
-0003b0e0: 7428 7175 6572 795f 7465 7874 2c20 7365  t(query_text, se
-0003b0f0: 6c66 2e69 6e70 7574 5f6c 696d 6974 290d  lf.input_limit).
-0003b100: 0a0d 0a20 2020 2020 2020 206e 6f74 5f75  ...        not_u
-0003b110: 7064 6174 655f 636f 6e64 5f66 7265 7120  pdate_cond_freq 
-0003b120: 3d20 3120 6966 2073 656c 662e 7175 6572  = 1 if self.quer
-0003b130: 795f 636f 756e 7420 2520 7570 6461 7465  y_count % update
-0003b140: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-0003b150: 7265 7120 213d 2030 2065 6c73 6520 300d  req != 0 else 0.
-0003b160: 0a20 2020 2020 2020 206e 6f74 5f75 7064  .        not_upd
-0003b170: 6174 655f 636f 6e64 5f74 696d 6520 3d20  ate_cond_time = 
-0003b180: 3120 6966 2074 696d 652e 7469 6d65 2829  1 if time.time()
-0003b190: 202d 2073 656c 662e 6265 6769 6e5f 7469   - self.begin_ti
-0003b1a0: 6d65 203c 2075 7064 6174 655f 7365 7373  me < update_sess
-0003b1b0: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
-0003b1c0: 7320 656c 7365 2030 0d0a 2020 2020 2020  s else 0..      
-0003b1d0: 2020 6966 206e 6f74 2028 7365 6c66 2e73    if not (self.s
-0003b1e0: 6573 7369 6f6e 2061 6e64 2073 656c 662e  ession and self.
-0003b1f0: 6c61 6e67 7561 6765 5f6d 6170 2061 6e64  language_map and
-0003b200: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
-0003b210: 5f66 7265 7120 616e 6420 6e6f 745f 7570  _freq and not_up
-0003b220: 6461 7465 5f63 6f6e 645f 7469 6d65 293a  date_cond_time):
-0003b230: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0003b240: 6c66 2e62 6567 696e 5f74 696d 6520 3d20  lf.begin_time = 
-0003b250: 7469 6d65 2e74 696d 6528 290d 0a20 2020  time.time()..   
-0003b260: 2020 2020 2020 2020 2073 656c 662e 7365           self.se
-0003b270: 7373 696f 6e20 3d20 7265 7175 6573 7473  ssion = requests
-0003b280: 2e53 6573 7369 6f6e 2829 0d0a 2020 2020  .Session()..    
-0003b290: 2020 2020 2020 2020 686f 7374 5f68 746d          host_htm
-0003b2a0: 6c20 3d20 7365 6c66 2e73 6573 7369 6f6e  l = self.session
-0003b2b0: 2e67 6574 2873 656c 662e 686f 7374 5f75  .get(self.host_u
-0003b2c0: 726c 2c20 6865 6164 6572 733d 7365 6c66  rl, headers=self
-0003b2d0: 2e68 6f73 745f 6865 6164 6572 732c 2074  .host_headers, t
-0003b2e0: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
-0003b2f0: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
-0003b300: 2e74 6578 740d 0a20 2020 2020 2020 2020  .text..         
-0003b310: 2020 2064 6562 7567 5f6c 616e 675f 6b77     debug_lang_kw
-0003b320: 6172 6773 203d 2073 656c 662e 6465 6275  args = self.debu
-0003b330: 675f 6c61 6e67 5f6b 7761 7267 7328 6672  g_lang_kwargs(fr
-0003b340: 6f6d 5f6c 616e 6775 6167 652c 2074 6f5f  om_language, to_
-0003b350: 6c61 6e67 7561 6765 2c20 7365 6c66 2e64  language, self.d
-0003b360: 6566 6175 6c74 5f66 726f 6d5f 6c61 6e67  efault_from_lang
-0003b370: 7561 6765 2c20 6966 5f70 7269 6e74 5f77  uage, if_print_w
-0003b380: 6172 6e69 6e67 290d 0a20 2020 2020 2020  arning)..       
-0003b390: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-0003b3a0: 6765 5f6d 6170 203d 2073 656c 662e 6765  ge_map = self.ge
-0003b3b0: 745f 6c61 6e67 7561 6765 5f6d 6170 2868  t_language_map(h
-0003b3c0: 6f73 745f 6874 6d6c 2c20 2a2a 6465 6275  ost_html, **debu
-0003b3d0: 675f 6c61 6e67 5f6b 7761 7267 7329 0d0a  g_lang_kwargs)..
-0003b3e0: 0d0a 2020 2020 2020 2020 6966 2066 726f  ..        if fro
-0003b3f0: 6d5f 6c61 6e67 7561 6765 203d 3d20 2761  m_language == 'a
-0003b400: 7574 6f27 3a0d 0a20 2020 2020 2020 2020  uto':..         
-0003b410: 2020 2066 726f 6d5f 6c61 6e67 7561 6765     from_language
-0003b420: 203d 2073 656c 662e 7761 726e 696e 675f   = self.warning_
-0003b430: 6175 746f 5f6c 616e 6728 2774 7261 6e73  auto_lang('trans
-0003b440: 6c61 7465 4d65 272c 2073 656c 662e 6465  lateMe', self.de
-0003b450: 6661 756c 745f 6672 6f6d 5f6c 616e 6775  fault_from_langu
-0003b460: 6167 652c 2069 665f 7072 696e 745f 7761  age, if_print_wa
-0003b470: 726e 696e 6729 0d0a 2020 2020 2020 2020  rning)..        
-0003b480: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
-0003b490: 6f5f 6c61 6e67 7561 6765 203d 2073 656c  o_language = sel
-0003b4a0: 662e 6368 6563 6b5f 6c61 6e67 7561 6765  f.check_language
-0003b4b0: 2866 726f 6d5f 6c61 6e67 7561 6765 2c20  (from_language, 
-0003b4c0: 746f 5f6c 616e 6775 6167 652c 2073 656c  to_language, sel
-0003b4d0: 662e 6c61 6e67 7561 6765 5f6d 6170 2c20  f.language_map, 
-0003b4e0: 6f75 7470 7574 5f7a 683d 7365 6c66 2e6f  output_zh=self.o
-0003b4f0: 7574 7075 745f 7a68 2c0d 0a20 2020 2020  utput_zh,..     
-0003b500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b530: 2020 2020 6f75 7470 7574 5f65 6e5f 7472      output_en_tr
-0003b540: 616e 736c 6174 6f72 3d27 7472 616e 736c  anslator='transl
-0003b550: 6174 654d 6527 2c20 6f75 7470 7574 5f65  ateMe', output_e
-0003b560: 6e3d 7365 6c66 2e6f 7574 7075 745f 656e  n=self.output_en
-0003b570: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
-0003b580: 7365 6c66 2e6f 7574 7075 745f 656e 2069  self.output_en i
-0003b590: 6e20 2866 726f 6d5f 6c61 6e67 7561 6765  n (from_language
-0003b5a0: 2c20 746f 5f6c 616e 6775 6167 6529 3a0d  , to_language):.
-0003b5b0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0003b5c0: 7572 6e20 7365 6c66 2e5f 7472 616e 736c  urn self._transl
-0003b5d0: 6174 654d 655f 6170 6928 7175 6572 795f  ateMe_api(query_
-0003b5e0: 7465 7874 2c20 6672 6f6d 5f6c 616e 6775  text, from_langu
-0003b5f0: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
-0003b600: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-0003b610: 2020 2020 2020 2074 6d70 5f6b 7761 7267         tmp_kwarg
-0003b620: 7320 3d20 6b77 6172 6773 2e63 6f70 7928  s = kwargs.copy(
-0003b630: 290d 0a20 2020 2020 2020 2074 6d70 5f6b  )..        tmp_k
-0003b640: 7761 7267 732e 7570 6461 7465 287b 2769  wargs.update({'i
-0003b650: 735f 6465 7461 696c 5f72 6573 756c 7427  s_detail_result'
-0003b660: 3a20 4661 6c73 652c 2027 6966 5f73 686f  : False, 'if_sho
-0003b670: 775f 7469 6d65 5f73 7461 7427 3a20 4661  w_time_stat': Fa
-0003b680: 6c73 657d 290d 0a20 2020 2020 2020 206e  lse})..        n
-0003b690: 6578 745f 7175 6572 795f 7465 7874 203d  ext_query_text =
-0003b6a0: 2073 656c 662e 5f74 7261 6e73 6c61 7465   self._translate
-0003b6b0: 4d65 5f61 7069 2871 7565 7279 5f74 6578  Me_api(query_tex
-0003b6c0: 742c 2066 726f 6d5f 6c61 6e67 7561 6765  t, from_language
-0003b6d0: 2c20 7365 6c66 2e6f 7574 7075 745f 656e  , self.output_en
-0003b6e0: 2c20 2a2a 746d 705f 6b77 6172 6773 290d  , **tmp_kwargs).
-0003b6f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0003b700: 7365 6c66 2e5f 7472 616e 736c 6174 654d  self._translateM
-0003b710: 655f 6170 6928 6e65 7874 5f71 7565 7279  e_api(next_query
-0003b720: 5f74 6578 742c 2073 656c 662e 6f75 7470  _text, self.outp
-0003b730: 7574 5f65 6e2c 2074 6f5f 6c61 6e67 7561  ut_en, to_langua
-0003b740: 6765 2c20 2a2a 6b77 6172 6773 290d 0a0d  ge, **kwargs)...
-0003b750: 0a0d 0a63 6c61 7373 2045 6c69 6128 5473  ...class Elia(Ts
-0003b760: 6529 3a0d 0a20 2020 2064 6566 205f 5f69  e):..    def __i
-0003b770: 6e69 745f 5f28 7365 6c66 293a 0d0a 2020  nit__(self):..  
-0003b780: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
-0003b790: 696e 6974 5f5f 2829 0d0a 2020 2020 2020  init__()..      
-0003b7a0: 2020 7365 6c66 2e62 6567 696e 5f74 696d    self.begin_tim
-0003b7b0: 6520 3d20 7469 6d65 2e74 696d 6528 290d  e = time.time().
-0003b7c0: 0a20 2020 2020 2020 2073 656c 662e 686f  .        self.ho
-0003b7d0: 7374 5f75 726c 203d 2027 6874 7470 733a  st_url = 'https:
-0003b7e0: 2f2f 656c 6961 2e65 7573 2f74 7261 6e73  //elia.eus/trans
-0003b7f0: 6c61 746f 7227 0d0a 2020 2020 2020 2020  lator'..        
-0003b800: 7365 6c66 2e61 7069 5f75 726c 203d 2027  self.api_url = '
-0003b810: 6874 7470 733a 2f2f 656c 6961 2e65 7573  https://elia.eus
-0003b820: 2f61 6a61 782f 7472 616e 736c 6174 655f  /ajax/translate_
-0003b830: 7374 7269 6e67 270d 0a20 2020 2020 2020  string'..       
-0003b840: 2073 656c 662e 6465 7465 6374 5f6c 616e   self.detect_lan
-0003b850: 675f 7572 6c20 3d20 2768 7474 7073 3a2f  g_url = 'https:/
-0003b860: 2f65 6c69 612e 6575 732f 616a 6178 2f6c  /elia.eus/ajax/l
-0003b870: 616e 6775 6167 655f 6465 7465 6374 696f  anguage_detectio
-0003b880: 6e27 0d0a 2020 2020 2020 2020 7365 6c66  n'..        self
-0003b890: 2e68 6f73 745f 6865 6164 6572 7320 3d20  .host_headers = 
-0003b8a0: 7365 6c66 2e67 6574 5f68 6561 6465 7273  self.get_headers
-0003b8b0: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
-0003b8c0: 6966 5f61 7069 3d46 616c 7365 2c20 6966  if_api=False, if
-0003b8d0: 5f72 6566 6572 6572 5f66 6f72 5f68 6f73  _referer_for_hos
-0003b8e0: 743d 5472 7565 290d 0a20 2020 2020 2020  t=True)..       
-0003b8f0: 2073 656c 662e 6170 695f 6865 6164 6572   self.api_header
-0003b900: 7320 3d20 7365 6c66 2e67 6574 5f68 6561  s = self.get_hea
-0003b910: 6465 7273 2873 656c 662e 686f 7374 5f75  ders(self.host_u
-0003b920: 726c 2c20 6966 5f61 7069 3d54 7275 652c  rl, if_api=True,
-0003b930: 2069 665f 616a 6178 5f66 6f72 5f61 7069   if_ajax_for_api
-0003b940: 3d54 7275 6529 0d0a 2020 2020 2020 2020  =True)..        
-0003b950: 7365 6c66 2e73 6573 7369 6f6e 203d 204e  self.session = N
-0003b960: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
-0003b970: 662e 6c61 6e67 7561 6765 5f6d 6170 203d  f.language_map =
-0003b980: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
-0003b990: 656c 662e 7072 6f66 6573 7369 6f6e 616c  elf.professional
-0003b9a0: 5f66 6965 6c64 203d 204e 6f6e 650d 0a20  _field = None.. 
-0003b9b0: 2020 2020 2020 2073 656c 662e 6c61 6e67         self.lang
-0003b9c0: 7061 6972 5f64 6f6d 6169 6e20 3d20 4e6f  pair_domain = No
-0003b9d0: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
-0003b9e0: 2e74 6f6b 656e 203d 204e 6f6e 650d 0a20  .token = None.. 
-0003b9f0: 2020 2020 2020 2073 656c 662e 7175 6572         self.quer
-0003ba00: 795f 636f 756e 7420 3d20 300d 0a20 2020  y_count = 0..   
-0003ba10: 2020 2020 2073 656c 662e 6f75 7470 7574       self.output
-0003ba20: 5f7a 6820 3d20 4e6f 6e65 2020 2320 756e  _zh = None  # un
-0003ba30: 7375 7070 6f72 7465 640d 0a20 2020 2020  supported..     
-0003ba40: 2020 2073 656c 662e 696e 7075 745f 6c69     self.input_li
-0003ba50: 6d69 7420 3d20 696e 7428 3165 3229 0d0a  mit = int(1e2)..
-0003ba60: 2020 2020 2020 2020 7365 6c66 2e64 6566          self.def
-0003ba70: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
-0003ba80: 6765 203d 2027 6672 270d 0a0d 0a20 2020  ge = 'fr'....   
-0003ba90: 2040 5473 652e 6465 6275 675f 6c61 6e67   @Tse.debug_lang
-0003baa0: 7561 6765 5f6d 6170 0d0a 2020 2020 6465  uage_map..    de
-0003bab0: 6620 6765 745f 6c61 6e67 7561 6765 5f6d  f get_language_m
-0003bac0: 6170 2873 656c 662c 2064 643a 2064 6963  ap(self, dd: dic
-0003bad0: 742c 202a 2a6b 7761 7267 733a 204c 616e  t, **kwargs: Lan
-0003bae0: 674d 6170 4b77 6172 6773 5479 7065 2920  gMapKwargsType) 
-0003baf0: 2d3e 2064 6963 743a 0d0a 2020 2020 2020  -> dict:..      
-0003bb00: 2020 7265 7475 726e 207b 6969 5b27 736f    return {ii['so
-0003bb10: 7572 6365 5f6c 616e 6775 6167 6527 5d5b  urce_language'][
-0003bb20: 2763 6f64 6527 5d3a 205b 6a6a 5b27 7461  'code']: [jj['ta
-0003bb30: 7267 6574 5f6c 616e 6775 6167 6527 5d5b  rget_language'][
-0003bb40: 2763 6f64 6527 5d20 666f 7220 6a6a 2069  'code'] for jj i
-0003bb50: 6e20 6464 5b27 6c61 6e67 7561 6765 5f70  n dd['language_p
-0003bb60: 6169 7273 275d 2069 6620 6a6a 5b27 736f  airs'] if jj['so
-0003bb70: 7572 6365 5f6c 616e 6775 6167 6527 5d5b  urce_language'][
-0003bb80: 2763 6f64 6527 5d20 3d3d 2069 695b 2773  'code'] == ii['s
-0003bb90: 6f75 7263 655f 6c61 6e67 7561 6765 275d  ource_language']
-0003bba0: 5b27 636f 6465 275d 5d20 666f 7220 6969  ['code']] for ii
-0003bbb0: 2069 6e20 6464 5b27 6c61 6e67 7561 6765   in dd['language
-0003bbc0: 5f70 6169 7273 275d 7d0d 0a0d 0a20 2020  _pairs']}....   
-0003bbd0: 2064 6566 2067 6574 5f70 726f 6665 7373   def get_profess
-0003bbe0: 696f 6e61 6c5f 6669 656c 645f 6c69 7374  ional_field_list
-0003bbf0: 2873 656c 662c 2064 643a 2064 6963 7429  (self, dd: dict)
-0003bc00: 202d 3e20 7365 743a 0d0a 2020 2020 2020   -> set:..      
-0003bc10: 2020 7265 7475 726e 207b 6974 5b27 7472    return {it['tr
-0003bc20: 616e 736c 6174 696f 6e5f 6d6f 6465 6c27  anslation_model'
-0003bc30: 5d5b 2763 6f64 6527 5d20 666f 7220 6974  ]['code'] for it
-0003bc40: 2069 6e20 6464 5b27 6c61 6e67 7561 6765   in dd['language
-0003bc50: 5f70 6169 7273 275d 7d0d 0a0d 0a20 2020  _pairs']}....   
-0003bc60: 2064 6566 2067 6574 5f6c 616e 6770 6169   def get_langpai
-0003bc70: 725f 646f 6d61 696e 2873 656c 662c 2064  r_domain(self, d
-0003bc80: 643a 2064 6963 7429 202d 3e20 6469 6374  d: dict) -> dict
-0003bc90: 3a0d 0a20 2020 2020 2020 2064 6174 6120  :..        data 
-0003bca0: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
-0003bcb0: 2066 277b 6974 656d 5b22 736f 7572 6365   f'{item["source
-0003bcc0: 5f6c 616e 6775 6167 6522 5d5b 2263 6f64  _language"]["cod
-0003bcd0: 6522 5d7d 5f5f 7b69 7465 6d5b 2274 6172  e"]}__{item["tar
-0003bce0: 6765 745f 6c61 6e67 7561 6765 225d 5b22  get_language"]["
-0003bcf0: 636f 6465 225d 7d5f 5f7b 6974 656d 5b22  code"]}__{item["
-0003bd00: 7472 616e 736c 6174 696f 6e5f 6d6f 6465  translation_mode
-0003bd10: 6c22 5d5b 2263 6f64 6522 5d7d 273a 207b  l"]["code"]}': {
-0003bd20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0003bd30: 2020 2774 7261 6e73 6c61 7469 6f6e 5f65    'translation_e
-0003bd40: 6e67 696e 6527 3a20 6974 656d 5b22 656e  ngine': item["en
-0003bd50: 6769 6e65 225d 5b22 706b 225d 2c0d 0a20  gine"]["pk"],.. 
-0003bd60: 2020 2020 2020 2020 2020 207d 2066 6f72             } for
-0003bd70: 2069 7465 6d20 696e 2064 645b 276c 616e   item in dd['lan
-0003bd80: 6775 6167 655f 7061 6972 7327 5d0d 0a20  guage_pairs'].. 
-0003bd90: 2020 2020 2020 207d 0d0a 2020 2020 2020         }..      
-0003bda0: 2020 7265 7475 726e 2064 6174 610d 0a0d    return data...
-0003bdb0: 0a20 2020 2040 5473 652e 7469 6d65 5f73  .    @Tse.time_s
-0003bdc0: 7461 740d 0a20 2020 2040 5473 652e 6368  tat..    @Tse.ch
-0003bdd0: 6563 6b5f 7175 6572 790d 0a20 2020 2064  eck_query..    d
-0003bde0: 6566 2065 6c69 615f 6170 6928 7365 6c66  ef elia_api(self
-0003bdf0: 2c20 7175 6572 795f 7465 7874 3a20 7374  , query_text: st
-0003be00: 722c 2066 726f 6d5f 6c61 6e67 7561 6765  r, from_language
-0003be10: 3a20 7374 7220 3d20 2761 7574 6f27 2c20  : str = 'auto', 
-0003be20: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
-0003be30: 203d 2027 656e 272c 202a 2a6b 7761 7267   = 'en', **kwarg
-0003be40: 733a 2041 7069 4b77 6172 6773 5479 7065  s: ApiKwargsType
-0003be50: 2920 2d3e 2055 6e69 6f6e 5b73 7472 2c20  ) -> Union[str, 
-0003be60: 6469 6374 5d3a 0d0a 2020 2020 2020 2020  dict]:..        
-0003be70: 2222 220d 0a20 2020 2020 2020 2068 7474  """..        htt
-0003be80: 7073 3a2f 2f65 6c69 612e 6575 732f 7472  ps://elia.eus/tr
-0003be90: 616e 736c 6174 6f72 0d0a 2020 2020 2020  anslator..      
-0003bea0: 2020 3a70 6172 616d 2071 7565 7279 5f74    :param query_t
-0003beb0: 6578 743a 2073 7472 2c20 6d75 7374 2e0d  ext: str, must..
-0003bec0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0003bed0: 6672 6f6d 5f6c 616e 6775 6167 653a 2073  from_language: s
-0003bee0: 7472 2c20 6465 6661 756c 7420 2761 7574  tr, default 'aut
-0003bef0: 6f27 2e0d 0a20 2020 2020 2020 203a 7061  o'...        :pa
-0003bf00: 7261 6d20 746f 5f6c 616e 6775 6167 653a  ram to_language:
-0003bf10: 2073 7472 2c20 6465 6661 756c 7420 2765   str, default 'e
-0003bf20: 6e27 2e0d 0a20 2020 2020 2020 203a 7061  n'...        :pa
-0003bf30: 7261 6d20 2a2a 6b77 6172 6773 3a0d 0a20  ram **kwargs:.. 
-0003bf40: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0003bf50: 7061 7261 6d20 7469 6d65 6f75 743a 2066  param timeout: f
-0003bf60: 6c6f 6174 2c20 6465 6661 756c 7420 4e6f  loat, default No
-0003bf70: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
-0003bf80: 2020 2020 203a 7061 7261 6d20 7072 6f78       :param prox
-0003bf90: 6965 733a 2064 6963 742c 2064 6566 6175  ies: dict, defau
-0003bfa0: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
-0003bfb0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0003bfc0: 2073 6c65 6570 5f73 6563 6f6e 6473 3a20   sleep_seconds: 
-0003bfd0: 666c 6f61 742c 2064 6566 6175 6c74 2030  float, default 0
-0003bfe0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0003bff0: 2020 203a 7061 7261 6d20 6973 5f64 6574     :param is_det
-0003c000: 6169 6c5f 7265 7375 6c74 3a20 626f 6f6c  ail_result: bool
-0003c010: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-0003c020: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0003c030: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
-0003c040: 7265 5f6c 696d 6974 5f6f 665f 6c65 6e67  re_limit_of_leng
-0003c050: 7468 3a20 626f 6f6c 2c20 6465 6661 756c  th: bool, defaul
-0003c060: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-0003c070: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0003c080: 206c 696d 6974 5f6f 665f 6c65 6e67 7468   limit_of_length
-0003c090: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
-0003c0a0: 3030 3030 2e0d 0a20 2020 2020 2020 2020  0000...         
-0003c0b0: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-0003c0c0: 5f69 676e 6f72 655f 656d 7074 795f 7175  _ignore_empty_qu
-0003c0d0: 6572 793a 2062 6f6f 6c2c 2064 6566 6175  ery: bool, defau
-0003c0e0: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
-0003c0f0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-0003c100: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
-0003c110: 5f61 6674 6572 5f66 7265 713a 2069 6e74  _after_freq: int
-0003c120: 2c20 6465 6661 756c 7420 3130 3030 2e0d  , default 1000..
-0003c130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003c140: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
-0003c150: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-0003c160: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
-0003c170: 6175 6c74 2031 3530 302e 0d0a 2020 2020  ault 1500...    
-0003c180: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0003c190: 616d 2069 665f 7368 6f77 5f74 696d 655f  am if_show_time_
-0003c1a0: 7374 6174 3a20 626f 6f6c 2c20 6465 6661  stat: bool, defa
-0003c1b0: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-0003c1c0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0003c1d0: 616d 2073 686f 775f 7469 6d65 5f73 7461  am show_time_sta
-0003c1e0: 745f 7072 6563 6973 696f 6e3a 2069 6e74  t_precision: int
-0003c1f0: 2c20 6465 6661 756c 7420 322e 0d0a 2020  , default 2...  
-0003c200: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-0003c210: 6172 616d 2069 665f 7072 696e 745f 7761  aram if_print_wa
-0003c220: 726e 696e 673a 2062 6f6f 6c2c 2064 6566  rning: bool, def
-0003c230: 6175 6c74 2054 7275 652e 0d0a 2020 2020  ault True...    
-0003c240: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0003c250: 616d 2070 726f 6665 7373 696f 6e61 6c5f  am professional_
-0003c260: 6669 656c 643a 2073 7472 2c20 6465 6661  field: str, defa
-0003c270: 756c 7420 2767 656e 6572 616c 272e 2043  ult 'general'. C
-0003c280: 686f 6f73 6520 6672 6f6d 2028 2767 656e  hoose from ('gen
-0003c290: 6572 616c 272c 2027 6164 6d69 6e27 292e  eral', 'admin').
-0003c2a0: 0d0a 2020 2020 2020 2020 3a72 6574 7572  ..        :retur
-0003c2b0: 6e3a 2073 7472 206f 7220 6469 6374 0d0a  n: str or dict..
-0003c2c0: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
-0003c2d0: 2020 2020 2020 2075 7365 5f64 6f6d 6169         use_domai
-0003c2e0: 6e20 3d20 6b77 6172 6773 2e67 6574 2827  n = kwargs.get('
-0003c2f0: 7072 6f66 6573 7369 6f6e 616c 5f66 6965  professional_fie
-0003c300: 6c64 272c 2027 6765 6e65 7261 6c27 290d  ld', 'general').
-0003c310: 0a20 2020 2020 2020 2074 696d 656f 7574  .        timeout
-0003c320: 203d 206b 7761 7267 732e 6765 7428 2774   = kwargs.get('t
-0003c330: 696d 656f 7574 272c 204e 6f6e 6529 0d0a  imeout', None)..
-0003c340: 2020 2020 2020 2020 7072 6f78 6965 7320          proxies 
-0003c350: 3d20 6b77 6172 6773 2e67 6574 2827 7072  = kwargs.get('pr
-0003c360: 6f78 6965 7327 2c20 4e6f 6e65 290d 0a20  oxies', None).. 
-0003c370: 2020 2020 2020 2073 6c65 6570 5f73 6563         sleep_sec
-0003c380: 6f6e 6473 203d 206b 7761 7267 732e 6765  onds = kwargs.ge
-0003c390: 7428 2773 6c65 6570 5f73 6563 6f6e 6473  t('sleep_seconds
-0003c3a0: 272c 2030 290d 0a20 2020 2020 2020 2069  ', 0)..        i
-0003c3b0: 665f 7072 696e 745f 7761 726e 696e 6720  f_print_warning 
-0003c3c0: 3d20 6b77 6172 6773 2e67 6574 2827 6966  = kwargs.get('if
-0003c3d0: 5f70 7269 6e74 5f77 6172 6e69 6e67 272c  _print_warning',
-0003c3e0: 2054 7275 6529 0d0a 2020 2020 2020 2020   True)..        
-0003c3f0: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
-0003c400: 203d 206b 7761 7267 732e 6765 7428 2769   = kwargs.get('i
-0003c410: 735f 6465 7461 696c 5f72 6573 756c 7427  s_detail_result'
-0003c420: 2c20 4661 6c73 6529 0d0a 2020 2020 2020  , False)..      
-0003c430: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
-0003c440: 5f61 6674 6572 5f66 7265 7120 3d20 6b77  _after_freq = kw
-0003c450: 6172 6773 2e67 6574 2827 7570 6461 7465  args.get('update
-0003c460: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-0003c470: 7265 7127 2c20 7365 6c66 2e64 6566 6175  req', self.defau
-0003c480: 6c74 5f73 6573 7369 6f6e 5f66 7265 7129  lt_session_freq)
-0003c490: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
-0003c4a0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
-0003c4b0: 6563 6f6e 6473 203d 206b 7761 7267 732e  econds = kwargs.
-0003c4c0: 6765 7428 2775 7064 6174 655f 7365 7373  get('update_sess
-0003c4d0: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
-0003c4e0: 7327 2c20 7365 6c66 2e64 6566 6175 6c74  s', self.default
-0003c4f0: 5f73 6573 7369 6f6e 5f73 6563 6f6e 6473  _session_seconds
-0003c500: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0003c510: 6368 6563 6b5f 696e 7075 745f 6c69 6d69  check_input_limi
-0003c520: 7428 7175 6572 795f 7465 7874 2c20 7365  t(query_text, se
-0003c530: 6c66 2e69 6e70 7574 5f6c 696d 6974 290d  lf.input_limit).
-0003c540: 0a0d 0a20 2020 2020 2020 206e 6f74 5f75  ...        not_u
-0003c550: 7064 6174 655f 636f 6e64 5f66 7265 7120  pdate_cond_freq 
-0003c560: 3d20 3120 6966 2073 656c 662e 7175 6572  = 1 if self.quer
-0003c570: 795f 636f 756e 7420 2520 7570 6461 7465  y_count % update
-0003c580: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-0003c590: 7265 7120 213d 2030 2065 6c73 6520 300d  req != 0 else 0.
-0003c5a0: 0a20 2020 2020 2020 206e 6f74 5f75 7064  .        not_upd
-0003c5b0: 6174 655f 636f 6e64 5f74 696d 6520 3d20  ate_cond_time = 
-0003c5c0: 3120 6966 2074 696d 652e 7469 6d65 2829  1 if time.time()
-0003c5d0: 202d 2073 656c 662e 6265 6769 6e5f 7469   - self.begin_ti
-0003c5e0: 6d65 203c 2075 7064 6174 655f 7365 7373  me < update_sess
-0003c5f0: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
-0003c600: 7320 656c 7365 2030 0d0a 2020 2020 2020  s else 0..      
-0003c610: 2020 6966 206e 6f74 2028 7365 6c66 2e73    if not (self.s
-0003c620: 6573 7369 6f6e 2061 6e64 2073 656c 662e  ession and self.
-0003c630: 6c61 6e67 7561 6765 5f6d 6170 2061 6e64  language_map and
-0003c640: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
-0003c650: 5f66 7265 7120 616e 6420 6e6f 745f 7570  _freq and not_up
-0003c660: 6461 7465 5f63 6f6e 645f 7469 6d65 293a  date_cond_time):
-0003c670: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0003c680: 6c66 2e62 6567 696e 5f74 696d 6520 3d20  lf.begin_time = 
-0003c690: 7469 6d65 2e74 696d 6528 290d 0a20 2020  time.time()..   
-0003c6a0: 2020 2020 2020 2020 2073 656c 662e 7365           self.se
-0003c6b0: 7373 696f 6e20 3d20 7265 7175 6573 7473  ssion = requests
-0003c6c0: 2e53 6573 7369 6f6e 2829 0d0a 2020 2020  .Session()..    
-0003c6d0: 2020 2020 2020 2020 686f 7374 5f68 746d          host_htm
-0003c6e0: 6c20 3d20 7365 6c66 2e73 6573 7369 6f6e  l = self.session
-0003c6f0: 2e67 6574 2873 656c 662e 686f 7374 5f75  .get(self.host_u
-0003c700: 726c 2c20 6865 6164 6572 733d 7365 6c66  rl, headers=self
-0003c710: 2e68 6f73 745f 6865 6164 6572 732c 2074  .host_headers, t
-0003c720: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
-0003c730: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
-0003c740: 2e74 6578 740d 0a20 2020 2020 2020 2020  .text..         
-0003c750: 2020 2073 656c 662e 746f 6b65 6e20 3d20     self.token = 
-0003c760: 7265 2e63 6f6d 7069 6c65 2827 2263 7372  re.compile('"csr
-0003c770: 666d 6964 646c 6577 6172 6574 6f6b 656e  fmiddlewaretoken
-0003c780: 223a 2022 282e 2a3f 2922 2729 2e73 6561  ": "(.*?)"').sea
-0003c790: 7263 6828 686f 7374 5f68 746d 6c29 2e67  rch(host_html).g
-0003c7a0: 726f 7570 2831 290d 0a20 2020 2020 2020  roup(1)..       
-0003c7b0: 2020 2020 2064 5f6c 616e 675f 7374 7220       d_lang_str 
-0003c7c0: 3d20 7265 2e63 6f6d 7069 6c65 2827 7661  = re.compile('va
-0003c7d0: 7220 6c61 6e67 7561 6765 5061 6972 7320  r languagePairs 
-0003c7e0: 3d20 4a53 4f4e 2e70 6172 7365 5c5c 2828  = JSON.parse\\((
-0003c7f0: 2e2a 3f29 5c5c 293b 2729 2e73 6561 7263  .*?)\\);').searc
-0003c800: 6828 686f 7374 5f68 746d 6c29 2e67 726f  h(host_html).gro
-0003c810: 7570 2829 0d0a 2020 2020 2020 2020 2020  up()..          
-0003c820: 2020 645f 6c61 6e67 5f6d 6170 203d 206a    d_lang_map = j
-0003c830: 736f 6e2e 6c6f 6164 7328 645f 6c61 6e67  son.loads(d_lang
-0003c840: 5f73 7472 5b34 333a 2d34 5d2e 7265 706c  _str[43:-4].repl
-0003c850: 6163 6528 2726 7175 6f74 3b27 2c20 2722  ace('&quot;', '"
-0003c860: 2729 290d 0a20 2020 2020 2020 2020 2020  '))..           
-0003c870: 2064 6562 7567 5f6c 616e 675f 6b77 6172   debug_lang_kwar
-0003c880: 6773 203d 2073 656c 662e 6465 6275 675f  gs = self.debug_
-0003c890: 6c61 6e67 5f6b 7761 7267 7328 6672 6f6d  lang_kwargs(from
-0003c8a0: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
-0003c8b0: 6e67 7561 6765 2c20 7365 6c66 2e64 6566  nguage, self.def
-0003c8c0: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
-0003c8d0: 6765 2c20 6966 5f70 7269 6e74 5f77 6172  ge, if_print_war
-0003c8e0: 6e69 6e67 290d 0a20 2020 2020 2020 2020  ning)..         
-0003c8f0: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
-0003c900: 5f6d 6170 203d 2073 656c 662e 6765 745f  _map = self.get_
-0003c910: 6c61 6e67 7561 6765 5f6d 6170 2864 5f6c  language_map(d_l
-0003c920: 616e 675f 6d61 702c 202a 2a64 6562 7567  ang_map, **debug
-0003c930: 5f6c 616e 675f 6b77 6172 6773 290d 0a20  _lang_kwargs).. 
-0003c940: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0003c950: 7072 6f66 6573 7369 6f6e 616c 5f66 6965  professional_fie
-0003c960: 6c64 203d 2073 656c 662e 6765 745f 7072  ld = self.get_pr
-0003c970: 6f66 6573 7369 6f6e 616c 5f66 6965 6c64  ofessional_field
-0003c980: 5f6c 6973 7428 645f 6c61 6e67 5f6d 6170  _list(d_lang_map
-0003c990: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-0003c9a0: 656c 662e 6c61 6e67 7061 6972 5f64 6f6d  elf.langpair_dom
-0003c9b0: 6169 6e20 3d20 7365 6c66 2e67 6574 5f6c  ain = self.get_l
-0003c9c0: 616e 6770 6169 725f 646f 6d61 696e 2864  angpair_domain(d
-0003c9d0: 5f6c 616e 675f 6d61 7029 0d0a 0d0a 2020  _lang_map)....  
-0003c9e0: 2020 2020 2020 6966 2066 726f 6d5f 6c61        if from_la
-0003c9f0: 6e67 7561 6765 203d 3d20 2761 7574 6f27  nguage == 'auto'
-0003ca00: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
-0003ca10: 6179 6c6f 6164 203d 207b 0d0a 2020 2020  ayload = {..    
-0003ca20: 2020 2020 2020 2020 2020 2020 2774 6578              'tex
-0003ca30: 7427 3a20 7175 6572 795f 7465 7874 2c0d  t': query_text,.
-0003ca40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003ca50: 2027 6373 7266 6d69 6464 6c65 7761 7265   'csrfmiddleware
-0003ca60: 746f 6b65 6e27 3a20 7365 6c66 2e74 6f6b  token': self.tok
-0003ca70: 656e 2c0d 0a20 2020 2020 2020 2020 2020  en,..           
-0003ca80: 207d 0d0a 2020 2020 2020 2020 2020 2020   }..            
-0003ca90: 7061 796c 6f61 6420 3d20 7572 6c6c 6962  payload = urllib
-0003caa0: 2e70 6172 7365 2e75 726c 656e 636f 6465  .parse.urlencode
-0003cab0: 2870 6179 6c6f 6164 290d 0a20 2020 2020  (payload)..     
-0003cac0: 2020 2020 2020 2072 203d 2073 656c 662e         r = self.
-0003cad0: 7365 7373 696f 6e2e 706f 7374 2873 656c  session.post(sel
-0003cae0: 662e 6465 7465 6374 5f6c 616e 675f 7572  f.detect_lang_ur
-0003caf0: 6c2c 2064 6174 613d 7061 796c 6f61 642c  l, data=payload,
-0003cb00: 2068 6561 6465 7273 3d73 656c 662e 6170   headers=self.ap
-0003cb10: 695f 6865 6164 6572 732c 2074 696d 656f  i_headers, timeo
-0003cb20: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
-0003cb30: 6965 733d 7072 6f78 6965 7329 0d0a 2020  ies=proxies)..  
-0003cb40: 2020 2020 2020 2020 2020 6672 6f6d 5f6c            from_l
-0003cb50: 616e 6775 6167 6520 3d20 722e 6a73 6f6e  anguage = r.json
-0003cb60: 2829 5b27 6c61 6e67 5f69 6427 5d0d 0a20  ()['lang_id'].. 
-0003cb70: 2020 2020 2020 2066 726f 6d5f 6c61 6e67         from_lang
-0003cb80: 7561 6765 2c20 746f 5f6c 616e 6775 6167  uage, to_languag
-0003cb90: 6520 3d20 7365 6c66 2e63 6865 636b 5f6c  e = self.check_l
-0003cba0: 616e 6775 6167 6528 6672 6f6d 5f6c 616e  anguage(from_lan
-0003cbb0: 6775 6167 652c 2074 6f5f 6c61 6e67 7561  guage, to_langua
-0003cbc0: 6765 2c20 7365 6c66 2e6c 616e 6775 6167  ge, self.languag
-0003cbd0: 655f 6d61 7029 0d0a 0d0a 2020 2020 2020  e_map)....      
-0003cbe0: 2020 7061 796c 6f61 6420 3d20 7b0d 0a20    payload = {.. 
-0003cbf0: 2020 2020 2020 2020 2020 2027 696e 7075             'inpu
-0003cc00: 745f 7465 7874 273a 2071 7565 7279 5f74  t_text': query_t
-0003cc10: 6578 742c 0d0a 2020 2020 2020 2020 2020  ext,..          
-0003cc20: 2020 2773 6f75 7263 655f 6c61 6e67 7561    'source_langua
-0003cc30: 6765 273a 2066 726f 6d5f 6c61 6e67 7561  ge': from_langua
-0003cc40: 6765 2c0d 0a20 2020 2020 2020 2020 2020  ge,..           
-0003cc50: 2027 7461 7267 6574 5f6c 616e 6775 6167   'target_languag
-0003cc60: 6527 3a20 746f 5f6c 616e 6775 6167 652c  e': to_language,
-0003cc70: 0d0a 2020 2020 2020 2020 2020 2020 2774  ..            't
-0003cc80: 7261 6e73 6c61 7469 6f6e 5f6d 6f64 656c  ranslation_model
-0003cc90: 273a 2075 7365 5f64 6f6d 6169 6e2c 0d0a  ': use_domain,..
-0003cca0: 2020 2020 2020 2020 2020 2020 2774 7261              'tra
-0003ccb0: 6e73 6c61 7469 6f6e 5f65 6e67 696e 6527  nslation_engine'
-0003ccc0: 3a20 312c 0d0a 2020 2020 2020 2020 2020  : 1,..          
-0003ccd0: 2020 2763 7372 666d 6964 646c 6577 6172    'csrfmiddlewar
-0003cce0: 6574 6f6b 656e 273a 2073 656c 662e 746f  etoken': self.to
-0003ccf0: 6b65 6e2c 0d0a 2020 2020 2020 2020 7d0d  ken,..        }.
-0003cd00: 0a0d 0a20 2020 2020 2020 2064 6f6d 6169  ...        domai
-0003cd10: 6e5f 7061 796c 6f61 6420 3d20 7365 6c66  n_payload = self
-0003cd20: 2e6c 616e 6770 6169 725f 646f 6d61 696e  .langpair_domain
-0003cd30: 2e67 6574 2866 277b 6672 6f6d 5f6c 616e  .get(f'{from_lan
-0003cd40: 6775 6167 657d 5f5f 7b74 6f5f 6c61 6e67  guage}__{to_lang
-0003cd50: 7561 6765 7d5f 5f7b 7573 655f 646f 6d61  uage}__{use_doma
-0003cd60: 696e 7d27 290d 0a20 2020 2020 2020 2069  in}')..        i
-0003cd70: 6620 6e6f 7420 646f 6d61 696e 5f70 6179  f not domain_pay
-0003cd80: 6c6f 6164 3a0d 0a20 2020 2020 2020 2020  load:..         
-0003cd90: 2020 2072 6169 7365 2054 7261 6e73 6c61     raise Transla
-0003cda0: 746f 7245 7272 6f72 0d0a 2020 2020 2020  torError..      
-0003cdb0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-0003cdc0: 2020 2020 2070 6179 6c6f 6164 2e75 7064       payload.upd
-0003cdd0: 6174 6528 646f 6d61 696e 5f70 6179 6c6f  ate(domain_paylo
-0003cde0: 6164 290d 0a0d 0a20 2020 2020 2020 2070  ad)....        p
-0003cdf0: 6179 6c6f 6164 203d 2075 726c 6c69 622e  ayload = urllib.
-0003ce00: 7061 7273 652e 7572 6c65 6e63 6f64 6528  parse.urlencode(
-0003ce10: 7061 796c 6f61 6429 0d0a 2020 2020 2020  payload)..      
-0003ce20: 2020 7220 3d20 7365 6c66 2e73 6573 7369    r = self.sessi
-0003ce30: 6f6e 2e70 6f73 7428 7365 6c66 2e61 7069  on.post(self.api
-0003ce40: 5f75 726c 2c20 6461 7461 3d70 6179 6c6f  _url, data=paylo
-0003ce50: 6164 2c20 6865 6164 6572 733d 7365 6c66  ad, headers=self
-0003ce60: 2e61 7069 5f68 6561 6465 7273 2c20 7469  .api_headers, ti
-0003ce70: 6d65 6f75 743d 7469 6d65 6f75 742c 2070  meout=timeout, p
-0003ce80: 726f 7869 6573 3d70 726f 7869 6573 290d  roxies=proxies).
-0003ce90: 0a20 2020 2020 2020 2072 2e72 6169 7365  .        r.raise
-0003cea0: 5f66 6f72 5f73 7461 7475 7328 290d 0a20  _for_status().. 
-0003ceb0: 2020 2020 2020 2064 6174 6120 3d20 722e         data = r.
-0003cec0: 6a73 6f6e 2829 0d0a 2020 2020 2020 2020  json()..        
-0003ced0: 7469 6d65 2e73 6c65 6570 2873 6c65 6570  time.sleep(sleep
-0003cee0: 5f73 6563 6f6e 6473 290d 0a20 2020 2020  _seconds)..     
-0003cef0: 2020 2073 656c 662e 7175 6572 795f 636f     self.query_co
-0003cf00: 756e 7420 2b3d 2031 0d0a 2020 2020 2020  unt += 1..      
-0003cf10: 2020 7265 7475 726e 2064 6174 6120 6966    return data if
-0003cf20: 2069 735f 6465 7461 696c 5f72 6573 756c   is_detail_resul
-0003cf30: 7420 656c 7365 2064 6174 615b 2774 7261  t else data['tra
-0003cf40: 6e73 6c61 7465 645f 7465 7874 275d 2e72  nslated_text'].r
-0003cf50: 6570 6c61 6365 2827 3c2f 6469 763e 272c  eplace('</div>',
-0003cf60: 2027 5c6e 2729 2e72 6570 6c61 6365 2827   '\n').replace('
-0003cf70: 3c64 6976 3e27 2c20 2727 292e 7265 706c  <div>', '').repl
-0003cf80: 6163 6528 273c 7370 616e 3e27 2c20 2727  ace('<span>', ''
-0003cf90: 292e 7265 706c 6163 6528 273c 2f73 7061  ).replace('</spa
-0003cfa0: 6e3e 272c 2027 2729 0d0a 0d0a 0d0a 636c  n>', '')......cl
-0003cfb0: 6173 7320 4c61 6e67 7561 6765 5769 7265  ass LanguageWire
-0003cfc0: 2854 7365 293a 0d0a 2020 2020 6465 6620  (Tse):..    def 
-0003cfd0: 5f5f 696e 6974 5f5f 2873 656c 6629 3a0d  __init__(self):.
-0003cfe0: 0a20 2020 2020 2020 2073 7570 6572 2829  .        super()
-0003cff0: 2e5f 5f69 6e69 745f 5f28 290d 0a20 2020  .__init__()..   
-0003d000: 2020 2020 2073 656c 662e 6265 6769 6e5f       self.begin_
-0003d010: 7469 6d65 203d 2074 696d 652e 7469 6d65  time = time.time
-0003d020: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
-0003d030: 2e68 6f6d 655f 7572 6c20 3d20 2768 7474  .home_url = 'htt
-0003d040: 7073 3a2f 2f6a 7774 2e6c 616e 6775 6167  ps://jwt.languag
-0003d050: 6577 6972 652e 636f 6d27 0d0a 2020 2020  ewire.com'..    
-0003d060: 2020 2020 7365 6c66 2e68 6f73 745f 7572      self.host_ur
-0003d070: 6c20 3d20 2768 7474 7073 3a2f 2f77 7777  l = 'https://www
-0003d080: 2e6c 616e 6775 6167 6577 6972 652e 636f  .languagewire.co
-0003d090: 6d2f 656e 2f74 6563 686e 6f6c 6f67 792f  m/en/technology/
-0003d0a0: 6c61 6e67 7561 6765 7769 7265 2d74 7261  languagewire-tra
-0003d0b0: 6e73 6c61 7465 270d 0a20 2020 2020 2020  nslate'..       
-0003d0c0: 2073 656c 662e 6170 695f 7572 6c20 3d20   self.api_url = 
-0003d0d0: 2768 7474 7073 3a2f 2f6c 7774 2e6c 616e  'https://lwt.lan
-0003d0e0: 6775 6167 6577 6972 652e 636f 6d2f 662f  guagewire.com/f/
-0003d0f0: 6170 692f 7631 2f74 7261 6e73 6c61 7469  api/v1/translati
-0003d100: 6f6e 732f 7465 7874 270d 0a20 2020 2020  ons/text'..     
-0003d110: 2020 2073 656c 662e 6c61 6e67 5f75 726c     self.lang_url
-0003d120: 203d 2027 6874 7470 733a 2f2f 6c77 742e   = 'https://lwt.
-0003d130: 6c61 6e67 7561 6765 7769 7265 2e63 6f6d  languagewire.com
-0003d140: 2f66 2f61 7069 2f76 312f 6c61 6e67 7561  /f/api/v1/langua
-0003d150: 6765 2d70 6169 7273 3f69 6e63 6c75 6465  ge-pairs?include
-0003d160: 5661 7269 616e 7473 3d74 7275 6527 0d0a  Variants=true'..
-0003d170: 2020 2020 2020 2020 7365 6c66 2e63 6f6f          self.coo
-0003d180: 6b69 655f 7572 6c20 3d20 2768 7474 7073  kie_url = 'https
-0003d190: 3a2f 2f6c 7774 2e6c 616e 6775 6167 6577  ://lwt.languagew
-0003d1a0: 6972 652e 636f 6d2f 662f 6170 692f 7631  ire.com/f/api/v1
-0003d1b0: 2f61 7574 682f 636f 6f6b 6965 270d 0a20  /auth/cookie'.. 
-0003d1c0: 2020 2020 2020 2073 656c 662e 6c77 745f         self.lwt_
-0003d1d0: 6a73 5f75 726c 203d 2027 6874 7470 733a  js_url = 'https:
-0003d1e0: 2f2f 6c77 742e 6c61 6e67 7561 6765 7769  //lwt.languagewi
-0003d1f0: 7265 2e63 6f6d 2f65 6e2f 6d61 696e 2e36  re.com/en/main.6
-0003d200: 6632 3032 3935 6231 3034 6263 3532 612e  f20295b104bc52a.
-0003d210: 6a73 270d 0a20 2020 2020 2020 2073 656c  js'..        sel
-0003d220: 662e 686f 7374 5f68 6561 6465 7273 203d  f.host_headers =
-0003d230: 2073 656c 662e 6765 745f 6865 6164 6572   self.get_header
-0003d240: 7328 7365 6c66 2e68 6f6d 655f 7572 6c2c  s(self.home_url,
-0003d250: 2069 665f 6170 693d 4661 6c73 652c 2069   if_api=False, i
-0003d260: 665f 7265 6665 7265 725f 666f 725f 686f  f_referer_for_ho
-0003d270: 7374 3d54 7275 6529 0d0a 2020 2020 2020  st=True)..      
-0003d280: 2020 7365 6c66 2e61 7069 5f68 6561 6465    self.api_heade
-0003d290: 7273 203d 2073 656c 662e 6765 745f 6865  rs = self.get_he
-0003d2a0: 6164 6572 7328 7365 6c66 2e68 6f6d 655f  aders(self.home_
-0003d2b0: 7572 6c2c 2069 665f 6170 693d 5472 7565  url, if_api=True
-0003d2c0: 2c20 6966 5f6a 736f 6e5f 666f 725f 6170  , if_json_for_ap
-0003d2d0: 693d 5472 7565 290d 0a20 2020 2020 2020  i=True)..       
-0003d2e0: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
-0003d2f0: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-0003d300: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
-0003d310: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-0003d320: 7365 6c66 2e6c 7774 5f64 6174 6120 3d20  self.lwt_data = 
-0003d330: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-0003d340: 6c66 2e71 7565 7279 5f63 6f75 6e74 203d  lf.query_count =
-0003d350: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
-0003d360: 2e6f 7574 7075 745f 7a68 203d 204e 6f6e  .output_zh = Non
-0003d370: 6520 2023 2075 6e73 7570 706f 7274 6564  e  # unsupported
-0003d380: 0d0a 2020 2020 2020 2020 7365 6c66 2e69  ..        self.i
-0003d390: 6e70 7574 5f6c 696d 6974 203d 2069 6e74  nput_limit = int
-0003d3a0: 2835 6533 290d 0a20 2020 2020 2020 2073  (5e3)..        s
-0003d3b0: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
-0003d3c0: 5f6c 616e 6775 6167 6520 3d20 2766 7227  _language = 'fr'
-0003d3d0: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
-0003d3e0: 6566 6175 6c74 5f65 6e5f 746f 5f6c 616e  efault_en_to_lan
-0003d3f0: 6775 6167 6520 3d20 2765 6e2d 5553 270d  guage = 'en-US'.
-0003d400: 0a0d 0a20 2020 2040 5473 652e 6465 6275  ...    @Tse.debu
-0003d410: 675f 6c61 6e67 7561 6765 5f6d 6170 0d0a  g_language_map..
-0003d420: 2020 2020 6465 6620 6765 745f 6c61 6e67      def get_lang
-0003d430: 7561 6765 5f6d 6170 2873 656c 662c 206c  uage_map(self, l
-0003d440: 616e 675f 7572 6c3a 2073 7472 2c20 7373  ang_url: str, ss
-0003d450: 3a20 5365 7373 696f 6e54 7970 652c 2068  : SessionType, h
-0003d460: 6561 6465 7273 3a20 6469 6374 2c20 7469  eaders: dict, ti
-0003d470: 6d65 6f75 743a 204f 7074 696f 6e61 6c5b  meout: Optional[
-0003d480: 666c 6f61 745d 2c20 7072 6f78 6965 733a  float], proxies:
-0003d490: 204f 7074 696f 6e61 6c5b 6469 6374 5d2c   Optional[dict],
-0003d4a0: 202a 2a6b 7761 7267 733a 204c 616e 674d   **kwargs: LangM
-0003d4b0: 6170 4b77 6172 6773 5479 7065 2920 2d3e  apKwargsType) ->
-0003d4c0: 2064 6963 743a 0d0a 2020 2020 2020 2020   dict:..        
-0003d4d0: 645f 6c61 6e67 5f6d 6170 203d 2073 732e  d_lang_map = ss.
-0003d4e0: 6765 7428 6c61 6e67 5f75 726c 2c20 6865  get(lang_url, he
-0003d4f0: 6164 6572 733d 6865 6164 6572 732c 2074  aders=headers, t
-0003d500: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
-0003d510: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
-0003d520: 2e6a 736f 6e28 290d 0a20 2020 2020 2020  .json()..       
-0003d530: 2072 6574 7572 6e20 7b69 695b 2773 6f75   return {ii['sou
-0003d540: 7263 654c 616e 6775 6167 6527 5d5b 276d  rceLanguage']['m
-0003d550: 6d74 436f 6465 275d 3a20 5b6a 6a5b 2774  mtCode']: [jj['t
-0003d560: 6172 6765 744c 616e 6775 6167 6527 5d5b  argetLanguage'][
-0003d570: 276d 6d74 436f 6465 275d 2066 6f72 206a  'mmtCode'] for j
-0003d580: 6a20 696e 2064 5f6c 616e 675f 6d61 7020  j in d_lang_map 
-0003d590: 6966 206a 6a5b 2773 6f75 7263 654c 616e  if jj['sourceLan
-0003d5a0: 6775 6167 6527 5d5b 276d 6d74 436f 6465  guage']['mmtCode
-0003d5b0: 275d 203d 3d20 6969 5b27 736f 7572 6365  '] == ii['source
-0003d5c0: 4c61 6e67 7561 6765 275d 5b27 6d6d 7443  Language']['mmtC
-0003d5d0: 6f64 6527 5d5d 2066 6f72 2069 6920 696e  ode']] for ii in
-0003d5e0: 2064 5f6c 616e 675f 6d61 707d 0d0a 0d0a   d_lang_map}....
-0003d5f0: 2020 2020 2320 6465 6620 6765 745f 6c77      # def get_lw
-0003d600: 745f 6461 7461 2873 656c 662c 206c 7774  t_data(self, lwt
-0003d610: 5f6a 735f 7572 6c3a 2073 7472 2c20 7373  _js_url: str, ss
-0003d620: 3a20 5365 7373 696f 6e54 7970 652c 2068  : SessionType, h
-0003d630: 6561 6465 7273 3a20 6469 6374 2c20 7469  eaders: dict, ti
-0003d640: 6d65 6f75 743a 2066 6c6f 6174 2c20 7072  meout: float, pr
-0003d650: 6f78 6965 733a 2064 6963 7429 202d 3e20  oxies: dict) -> 
-0003d660: 6469 6374 3a0d 0a20 2020 2023 2020 2020  dict:..    #    
-0003d670: 206a 735f 6874 6d6c 203d 2073 732e 6765   js_html = ss.ge
-0003d680: 7428 6c77 745f 6a73 5f75 726c 2c20 6865  t(lwt_js_url, he
-0003d690: 6164 6572 733d 6865 6164 6572 732c 2074  aders=headers, t
-0003d6a0: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
-0003d6b0: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
-0003d6c0: 2e74 6578 740d 0a20 2020 2023 2020 2020  .text..    #    
-0003d6d0: 206c 7774 5f64 6174 6120 3d20 7b0d 0a20   lwt_data = {.. 
-0003d6e0: 2020 2023 2020 2020 2020 2020 2027 782d     #         'x-
-0003d6f0: 6c77 742d 6170 706c 6963 6174 696f 6e2d  lwt-application-
-0003d700: 6964 273a 2072 652e 636f 6d70 696c 6528  id': re.compile(
-0003d710: 2722 582d 4c57 542d 4170 706c 6963 6174  '"X-LWT-Applicat
-0003d720: 696f 6e2d 4944 223a 2228 2e2a 3f29 2227  ion-ID":"(.*?)"'
-0003d730: 292e 7365 6172 6368 286a 735f 6874 6d6c  ).search(js_html
-0003d740: 292e 6772 6f75 7028 3129 2c0d 0a20 2020  ).group(1),..   
-0003d750: 2023 2020 2020 2020 2020 2027 782d 6c77   #         'x-lw
-0003d760: 742d 6275 696c 642d 6964 273a 2072 652e  t-build-id': re.
-0003d770: 636f 6d70 696c 6528 2722 582d 4c57 542d  compile('"X-LWT-
-0003d780: 4275 696c 642d 4944 223a 2228 2e2a 3f29  Build-ID":"(.*?)
-0003d790: 2227 292e 7365 6172 6368 286a 735f 6874  "').search(js_ht
-0003d7a0: 6d6c 292e 6772 6f75 7028 3129 2c0d 0a20  ml).group(1),.. 
-0003d7b0: 2020 2023 2020 2020 207d 0d0a 2020 2020     #     }..    
-0003d7c0: 2320 2020 2020 7265 7475 726e 206c 7774  #     return lwt
-0003d7d0: 5f64 6174 610d 0a0d 0a20 2020 2064 6566  _data....    def
-0003d7e0: 2067 6574 5f6c 7774 5f64 6174 6128 7365   get_lwt_data(se
-0003d7f0: 6c66 2920 2d3e 2064 6963 743a 0d0a 2020  lf) -> dict:..  
-0003d800: 2020 2020 2020 6c77 745f 6461 7461 203d        lwt_data =
-0003d810: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
-0003d820: 2778 2d6c 7774 2d61 7070 6c69 6361 7469  'x-lwt-applicati
-0003d830: 6f6e 2d69 6427 3a20 274c 5754 5f57 4542  on-id': 'LWT_WEB
-0003d840: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-0003d850: 2778 2d6c 7774 2d62 7569 6c64 2d69 6427  'x-lwt-build-id'
-0003d860: 3a20 2733 3436 3737 3527 2c0d 0a20 2020  : '346775',..   
-0003d870: 2020 2020 207d 0d0a 2020 2020 2020 2020       }..        
-0003d880: 7265 7475 726e 206c 7774 5f64 6174 610d  return lwt_data.
-0003d890: 0a0d 0a20 2020 2040 5473 652e 7469 6d65  ...    @Tse.time
-0003d8a0: 5f73 7461 740d 0a20 2020 2040 5473 652e  _stat..    @Tse.
-0003d8b0: 6368 6563 6b5f 7175 6572 790d 0a20 2020  check_query..   
-0003d8c0: 2064 6566 206c 616e 6775 6167 6557 6972   def languageWir
-0003d8d0: 655f 6170 6928 7365 6c66 2c20 7175 6572  e_api(self, quer
-0003d8e0: 795f 7465 7874 3a20 7374 722c 2066 726f  y_text: str, fro
-0003d8f0: 6d5f 6c61 6e67 7561 6765 3a20 7374 7220  m_language: str 
-0003d900: 3d20 2761 7574 6f27 2c20 746f 5f6c 616e  = 'auto', to_lan
-0003d910: 6775 6167 653a 2073 7472 203d 2027 656e  guage: str = 'en
-0003d920: 272c 202a 2a6b 7761 7267 733a 2041 7069  ', **kwargs: Api
-0003d930: 4b77 6172 6773 5479 7065 2920 2d3e 2055  KwargsType) -> U
-0003d940: 6e69 6f6e 5b73 7472 2c20 6469 6374 5d3a  nion[str, dict]:
-0003d950: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-0003d960: 2020 2020 2020 2068 7474 7073 3a2f 2f77         https://w
-0003d970: 7777 2e6c 616e 6775 6167 6577 6972 652e  ww.languagewire.
-0003d980: 636f 6d2f 656e 2f74 6563 686e 6f6c 6f67  com/en/technolog
-0003d990: 792f 6c61 6e67 7561 6765 7769 7265 2d74  y/languagewire-t
-0003d9a0: 7261 6e73 6c61 7465 0d0a 2020 2020 2020  ranslate..      
-0003d9b0: 2020 3a70 6172 616d 2071 7565 7279 5f74    :param query_t
-0003d9c0: 6578 743a 2073 7472 2c20 6d75 7374 2e0d  ext: str, must..
-0003d9d0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0003d9e0: 6672 6f6d 5f6c 616e 6775 6167 653a 2073  from_language: s
-0003d9f0: 7472 2c20 6465 6661 756c 7420 2761 7574  tr, default 'aut
-0003da00: 6f27 2e0d 0a20 2020 2020 2020 203a 7061  o'...        :pa
-0003da10: 7261 6d20 746f 5f6c 616e 6775 6167 653a  ram to_language:
-0003da20: 2073 7472 2c20 6465 6661 756c 7420 2765   str, default 'e
-0003da30: 6e27 2e0d 0a20 2020 2020 2020 203a 7061  n'...        :pa
-0003da40: 7261 6d20 2a2a 6b77 6172 6773 3a0d 0a20  ram **kwargs:.. 
-0003da50: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0003da60: 7061 7261 6d20 7469 6d65 6f75 743a 2066  param timeout: f
-0003da70: 6c6f 6174 2c20 6465 6661 756c 7420 4e6f  loat, default No
-0003da80: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
-0003da90: 2020 2020 203a 7061 7261 6d20 7072 6f78       :param prox
-0003daa0: 6965 733a 2064 6963 742c 2064 6566 6175  ies: dict, defau
-0003dab0: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
-0003dac0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0003dad0: 2073 6c65 6570 5f73 6563 6f6e 6473 3a20   sleep_seconds: 
-0003dae0: 666c 6f61 742c 2064 6566 6175 6c74 2030  float, default 0
-0003daf0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0003db00: 2020 203a 7061 7261 6d20 6973 5f64 6574     :param is_det
-0003db10: 6169 6c5f 7265 7375 6c74 3a20 626f 6f6c  ail_result: bool
-0003db20: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-0003db30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0003db40: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
-0003db50: 7265 5f6c 696d 6974 5f6f 665f 6c65 6e67  re_limit_of_leng
-0003db60: 7468 3a20 626f 6f6c 2c20 6465 6661 756c  th: bool, defaul
-0003db70: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
-0003db80: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0003db90: 206c 696d 6974 5f6f 665f 6c65 6e67 7468   limit_of_length
-0003dba0: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
-0003dbb0: 3030 3030 2e0d 0a20 2020 2020 2020 2020  0000...         
-0003dbc0: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-0003dbd0: 5f69 676e 6f72 655f 656d 7074 795f 7175  _ignore_empty_qu
-0003dbe0: 6572 793a 2062 6f6f 6c2c 2064 6566 6175  ery: bool, defau
-0003dbf0: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
-0003dc00: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-0003dc10: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
-0003dc20: 5f61 6674 6572 5f66 7265 713a 2069 6e74  _after_freq: int
-0003dc30: 2c20 6465 6661 756c 7420 3130 3030 2e0d  , default 1000..
-0003dc40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003dc50: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
-0003dc60: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
-0003dc70: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
-0003dc80: 6175 6c74 2031 3530 302e 0d0a 2020 2020  ault 1500...    
-0003dc90: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0003dca0: 616d 2069 665f 7368 6f77 5f74 696d 655f  am if_show_time_
-0003dcb0: 7374 6174 3a20 626f 6f6c 2c20 6465 6661  stat: bool, defa
-0003dcc0: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-0003dcd0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0003dce0: 616d 2073 686f 775f 7469 6d65 5f73 7461  am show_time_sta
-0003dcf0: 745f 7072 6563 6973 696f 6e3a 2069 6e74  t_precision: int
-0003dd00: 2c20 6465 6661 756c 7420 322e 0d0a 2020  , default 2...  
-0003dd10: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-0003dd20: 6172 616d 2069 665f 7072 696e 745f 7761  aram if_print_wa
-0003dd30: 726e 696e 673a 2062 6f6f 6c2c 2064 6566  rning: bool, def
-0003dd40: 6175 6c74 2054 7275 652e 0d0a 2020 2020  ault True...    
-0003dd50: 2020 2020 3a72 6574 7572 6e3a 2073 7472      :return: str
-0003dd60: 206f 7220 6469 6374 0d0a 2020 2020 2020   or dict..      
-0003dd70: 2020 2222 220d 0a0d 0a20 2020 2020 2020    """....       
-0003dd80: 2074 696d 656f 7574 203d 206b 7761 7267   timeout = kwarg
-0003dd90: 732e 6765 7428 2774 696d 656f 7574 272c  s.get('timeout',
-0003dda0: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
-0003ddb0: 7072 6f78 6965 7320 3d20 6b77 6172 6773  proxies = kwargs
-0003ddc0: 2e67 6574 2827 7072 6f78 6965 7327 2c20  .get('proxies', 
-0003ddd0: 4e6f 6e65 290d 0a20 2020 2020 2020 2073  None)..        s
-0003dde0: 6c65 6570 5f73 6563 6f6e 6473 203d 206b  leep_seconds = k
-0003ddf0: 7761 7267 732e 6765 7428 2773 6c65 6570  wargs.get('sleep
-0003de00: 5f73 6563 6f6e 6473 272c 2030 290d 0a20  _seconds', 0).. 
-0003de10: 2020 2020 2020 2069 665f 7072 696e 745f         if_print_
-0003de20: 7761 726e 696e 6720 3d20 6b77 6172 6773  warning = kwargs
-0003de30: 2e67 6574 2827 6966 5f70 7269 6e74 5f77  .get('if_print_w
-0003de40: 6172 6e69 6e67 272c 2054 7275 6529 0d0a  arning', True)..
-0003de50: 2020 2020 2020 2020 6973 5f64 6574 6169          is_detai
-0003de60: 6c5f 7265 7375 6c74 203d 206b 7761 7267  l_result = kwarg
-0003de70: 732e 6765 7428 2769 735f 6465 7461 696c  s.get('is_detail
-0003de80: 5f72 6573 756c 7427 2c20 4661 6c73 6529  _result', False)
-0003de90: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
-0003dea0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
-0003deb0: 7265 7120 3d20 6b77 6172 6773 2e67 6574  req = kwargs.get
-0003dec0: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
-0003ded0: 5f61 6674 6572 5f66 7265 7127 2c20 7365  _after_freq', se
-0003dee0: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
-0003def0: 6f6e 5f66 7265 7129 0d0a 2020 2020 2020  on_freq)..      
-0003df00: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
-0003df10: 5f61 6674 6572 5f73 6563 6f6e 6473 203d  _after_seconds =
-0003df20: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
-0003df30: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0003df40: 725f 7365 636f 6e64 7327 2c20 7365 6c66  r_seconds', self
-0003df50: 2e64 6566 6175 6c74 5f73 6573 7369 6f6e  .default_session
-0003df60: 5f73 6563 6f6e 6473 290d 0a20 2020 2020  _seconds)..     
-0003df70: 2020 2073 656c 662e 6368 6563 6b5f 696e     self.check_in
-0003df80: 7075 745f 6c69 6d69 7428 7175 6572 795f  put_limit(query_
-0003df90: 7465 7874 2c20 7365 6c66 2e69 6e70 7574  text, self.input
-0003dfa0: 5f6c 696d 6974 290d 0a0d 0a20 2020 2020  _limit)....     
-0003dfb0: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
-0003dfc0: 6e64 5f66 7265 7120 3d20 3120 6966 2073  nd_freq = 1 if s
-0003dfd0: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
-0003dfe0: 2520 7570 6461 7465 5f73 6573 7369 6f6e  % update_session
-0003dff0: 5f61 6674 6572 5f66 7265 7120 213d 2030  _after_freq != 0
-0003e000: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
-0003e010: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
-0003e020: 5f74 696d 6520 3d20 3120 6966 2074 696d  _time = 1 if tim
-0003e030: 652e 7469 6d65 2829 202d 2073 656c 662e  e.time() - self.
-0003e040: 6265 6769 6e5f 7469 6d65 203c 2075 7064  begin_time < upd
-0003e050: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
-0003e060: 725f 7365 636f 6e64 7320 656c 7365 2030  r_seconds else 0
-0003e070: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
-0003e080: 2028 7365 6c66 2e73 6573 7369 6f6e 2061   (self.session a
-0003e090: 6e64 2073 656c 662e 6c61 6e67 7561 6765  nd self.language
-0003e0a0: 5f6d 6170 2061 6e64 206e 6f74 5f75 7064  _map and not_upd
-0003e0b0: 6174 655f 636f 6e64 5f66 7265 7120 616e  ate_cond_freq an
-0003e0c0: 6420 6e6f 745f 7570 6461 7465 5f63 6f6e  d not_update_con
-0003e0d0: 645f 7469 6d65 293a 0d0a 2020 2020 2020  d_time):..      
-0003e0e0: 2020 2020 2020 7365 6c66 2e62 6567 696e        self.begin
-0003e0f0: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
-0003e100: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
-0003e110: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
-0003e120: 7265 7175 6573 7473 2e53 6573 7369 6f6e  requests.Session
-0003e130: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-0003e140: 5f20 3d20 7365 6c66 2e73 6573 7369 6f6e  _ = self.session
-0003e150: 2e67 6574 2873 656c 662e 686f 7374 5f75  .get(self.host_u
-0003e160: 726c 2c20 6865 6164 6572 733d 7365 6c66  rl, headers=self
-0003e170: 2e68 6f73 745f 6865 6164 6572 732c 2074  .host_headers, t
-0003e180: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
-0003e190: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
-0003e1a0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0003e1b0: 6c66 2e6c 7774 5f64 6174 6120 3d20 7365  lf.lwt_data = se
-0003e1c0: 6c66 2e67 6574 5f6c 7774 5f64 6174 6128  lf.get_lwt_data(
-0003e1d0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-0003e1e0: 656c 662e 6170 695f 6865 6164 6572 732e  elf.api_headers.
-0003e1f0: 7570 6461 7465 2873 656c 662e 6c77 745f  update(self.lwt_
-0003e200: 6461 7461 290d 0a0d 0a20 2020 2020 2020  data)....       
-0003e210: 2020 2020 205f 203d 2073 656c 662e 7365       _ = self.se
-0003e220: 7373 696f 6e2e 706f 7374 2873 656c 662e  ssion.post(self.
-0003e230: 636f 6f6b 6965 5f75 726c 2c20 6865 6164  cookie_url, head
-0003e240: 6572 733d 7365 6c66 2e61 7069 5f68 6561  ers=self.api_hea
-0003e250: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
-0003e260: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
-0003e270: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
-0003e280: 2020 2020 2064 6562 7567 5f6c 616e 675f       debug_lang_
-0003e290: 6b77 6172 6773 203d 2073 656c 662e 6465  kwargs = self.de
-0003e2a0: 6275 675f 6c61 6e67 5f6b 7761 7267 7328  bug_lang_kwargs(
-0003e2b0: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
-0003e2c0: 6f5f 6c61 6e67 7561 6765 2c20 7365 6c66  o_language, self
-0003e2d0: 2e64 6566 6175 6c74 5f66 726f 6d5f 6c61  .default_from_la
-0003e2e0: 6e67 7561 6765 2c20 6966 5f70 7269 6e74  nguage, if_print
-0003e2f0: 5f77 6172 6e69 6e67 290d 0a20 2020 2020  _warning)..     
-0003e300: 2020 2020 2020 2073 656c 662e 6c61 6e67         self.lang
-0003e310: 7561 6765 5f6d 6170 203d 2073 656c 662e  uage_map = self.
-0003e320: 6765 745f 6c61 6e67 7561 6765 5f6d 6170  get_language_map
-0003e330: 2873 656c 662e 6c61 6e67 5f75 726c 2c20  (self.lang_url, 
-0003e340: 7365 6c66 2e73 6573 7369 6f6e 2c20 7365  self.session, se
-0003e350: 6c66 2e61 7069 5f68 6561 6465 7273 2c20  lf.api_headers, 
-0003e360: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
-0003e370: 2c20 2a2a 6465 6275 675f 6c61 6e67 5f6b  , **debug_lang_k
-0003e380: 7761 7267 7329 0d0a 0d0a 2020 2020 2020  wargs)....      
-0003e390: 2020 6966 2066 726f 6d5f 6c61 6e67 7561    if from_langua
-0003e3a0: 6765 203d 3d20 2761 7574 6f27 3a0d 0a20  ge == 'auto':.. 
-0003e3b0: 2020 2020 2020 2020 2020 2066 726f 6d5f             from_
-0003e3c0: 6c61 6e67 7561 6765 203d 2073 656c 662e  language = self.
-0003e3d0: 7761 726e 696e 675f 6175 746f 5f6c 616e  warning_auto_lan
-0003e3e0: 6728 276c 616e 6775 6167 6557 6972 6527  g('languageWire'
-0003e3f0: 2c20 7365 6c66 2e64 6566 6175 6c74 5f66  , self.default_f
-0003e400: 726f 6d5f 6c61 6e67 7561 6765 2c20 6966  rom_language, if
-0003e410: 5f70 7269 6e74 5f77 6172 6e69 6e67 290d  _print_warning).
-0003e420: 0a20 2020 2020 2020 2074 6f5f 6c61 6e67  .        to_lang
-0003e430: 7561 6765 203d 2073 656c 662e 6465 6661  uage = self.defa
-0003e440: 756c 745f 656e 5f74 6f5f 6c61 6e67 7561  ult_en_to_langua
-0003e450: 6765 2069 6620 746f 5f6c 616e 6775 6167  ge if to_languag
-0003e460: 6520 3d3d 2027 656e 2720 656c 7365 2074  e == 'en' else t
-0003e470: 6f5f 6c61 6e67 7561 6765 0d0a 2020 2020  o_language..    
-0003e480: 2020 2020 6672 6f6d 5f6c 616e 6775 6167      from_languag
-0003e490: 652c 2074 6f5f 6c61 6e67 7561 6765 203d  e, to_language =
-0003e4a0: 2073 656c 662e 6368 6563 6b5f 6c61 6e67   self.check_lang
-0003e4b0: 7561 6765 2866 726f 6d5f 6c61 6e67 7561  uage(from_langua
-0003e4c0: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
-0003e4d0: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
-0003e4e0: 6170 2c20 6966 5f63 6865 636b 5f6c 616e  ap, if_check_lan
-0003e4f0: 675f 7265 7665 7273 653d 4661 6c73 6529  g_reverse=False)
-0003e500: 0d0a 0d0a 2020 2020 2020 2020 7061 796c  ....        payl
-0003e510: 6f61 6420 3d20 7b0d 0a20 2020 2020 2020  oad = {..       
-0003e520: 2020 2020 2027 736f 7572 6365 5465 7874       'sourceText
-0003e530: 273a 2071 7565 7279 5f74 6578 742c 0d0a  ': query_text,..
-0003e540: 2020 2020 2020 2020 2020 2020 2773 6f75              'sou
-0003e550: 7263 654c 616e 6775 6167 6527 3a20 6672  rceLanguage': fr
-0003e560: 6f6d 5f6c 616e 6775 6167 652c 0d0a 2020  om_language,..  
-0003e570: 2020 2020 2020 2020 2020 2774 6172 6765            'targe
-0003e580: 744c 616e 6775 6167 6527 3a20 746f 5f6c  tLanguage': to_l
-0003e590: 616e 6775 6167 652c 0d0a 2020 2020 2020  anguage,..      
-0003e5a0: 2020 7d0d 0a20 2020 2020 2020 2072 203d    }..        r =
-0003e5b0: 2073 656c 662e 7365 7373 696f 6e2e 706f   self.session.po
-0003e5c0: 7374 2873 656c 662e 6170 695f 7572 6c2c  st(self.api_url,
-0003e5d0: 206a 736f 6e3d 7061 796c 6f61 642c 2068   json=payload, h
-0003e5e0: 6561 6465 7273 3d73 656c 662e 6170 695f  eaders=self.api_
-0003e5f0: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
-0003e600: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
-0003e610: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
-0003e620: 2020 2020 722e 7261 6973 655f 666f 725f      r.raise_for_
-0003e630: 7374 6174 7573 2829 0d0a 2020 2020 2020  status()..      
-0003e640: 2020 6461 7461 203d 2072 2e6a 736f 6e28    data = r.json(
-0003e650: 290d 0a20 2020 2020 2020 2074 696d 652e  )..        time.
-0003e660: 736c 6565 7028 736c 6565 705f 7365 636f  sleep(sleep_seco
-0003e670: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
-0003e680: 6c66 2e71 7565 7279 5f63 6f75 6e74 202b  lf.query_count +
-0003e690: 3d20 310d 0a20 2020 2020 2020 2072 6574  = 1..        ret
-0003e6a0: 7572 6e20 6461 7461 2069 6620 6973 5f64  urn data if is_d
-0003e6b0: 6574 6169 6c5f 7265 7375 6c74 2065 6c73  etail_result els
-0003e6c0: 6520 6461 7461 5b27 7472 616e 736c 6174  e data['translat
-0003e6d0: 696f 6e27 5d0d 0a0d 0a0d 0a63 6c61 7373  ion']......class
-0003e6e0: 204a 7564 6963 2854 7365 293a 0d0a 2020   Judic(Tse):..  
-0003e6f0: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
-0003e700: 656c 6629 3a0d 0a20 2020 2020 2020 2073  elf):..        s
-0003e710: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
-0003e720: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0003e730: 6265 6769 6e5f 7469 6d65 203d 2074 696d  begin_time = tim
-0003e740: 652e 7469 6d65 2829 0d0a 2020 2020 2020  e.time()..      
-0003e750: 2020 7365 6c66 2e68 6f6d 655f 7572 6c20    self.home_url 
-0003e760: 3d20 2768 7474 7073 3a2f 2f6a 7564 6963  = 'https://judic
-0003e770: 2e69 6f27 0d0a 2020 2020 2020 2020 7365  .io'..        se
-0003e780: 6c66 2e68 6f73 745f 7572 6c20 3d20 2768  lf.host_url = 'h
-0003e790: 7474 7073 3a2f 2f6a 7564 6963 2e69 6f2f  ttps://judic.io/
-0003e7a0: 656e 2f74 7261 6e73 6c61 7465 270d 0a20  en/translate'.. 
-0003e7b0: 2020 2020 2020 2073 656c 662e 6170 695f         self.api_
-0003e7c0: 7572 6c20 3d20 2768 7474 7073 3a2f 2f6a  url = 'https://j
-0003e7d0: 7564 6963 2e69 6f2f 7472 616e 736c 6174  udic.io/translat
-0003e7e0: 652f 7465 7874 270d 0a20 2020 2020 2020  e/text'..       
-0003e7f0: 2073 656c 662e 686f 7374 5f68 6561 6465   self.host_heade
-0003e800: 7273 203d 2073 656c 662e 6765 745f 6865  rs = self.get_he
-0003e810: 6164 6572 7328 7365 6c66 2e68 6f6d 655f  aders(self.home_
-0003e820: 7572 6c2c 2069 665f 6170 693d 4661 6c73  url, if_api=Fals
-0003e830: 652c 2069 665f 7265 6665 7265 725f 666f  e, if_referer_fo
-0003e840: 725f 686f 7374 3d54 7275 6529 0d0a 2020  r_host=True)..  
-0003e850: 2020 2020 2020 7365 6c66 2e61 7069 5f68        self.api_h
-0003e860: 6561 6465 7273 203d 2073 656c 662e 6765  eaders = self.ge
-0003e870: 745f 6865 6164 6572 7328 7365 6c66 2e68  t_headers(self.h
-0003e880: 6f6d 655f 7572 6c2c 2069 665f 6170 693d  ome_url, if_api=
-0003e890: 5472 7565 2c20 6966 5f6a 736f 6e5f 666f  True, if_json_fo
-0003e8a0: 725f 6170 693d 5472 7565 290d 0a20 2020  r_api=True)..   
-0003e8b0: 2020 2020 2073 656c 662e 7365 7373 696f       self.sessio
-0003e8c0: 6e20 3d20 4e6f 6e65 0d0a 2020 2020 2020  n = None..      
-0003e8d0: 2020 7365 6c66 2e6c 616e 675f 6c69 7374    self.lang_list
-0003e8e0: 203d 205b 2765 6e27 2c20 2764 6527 2c20   = ['en', 'de', 
-0003e8f0: 2766 7227 2c20 276e 6c27 5d0d 0a20 2020  'fr', 'nl']..   
-0003e900: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
-0003e910: 6765 5f6d 6170 203d 204e 6f6e 650d 0a20  ge_map = None.. 
-0003e920: 2020 2020 2020 2073 656c 662e 7175 6572         self.quer
-0003e930: 795f 636f 756e 7420 3d20 300d 0a20 2020  y_count = 0..   
-0003e940: 2020 2020 2073 656c 662e 6f75 7470 7574       self.output
-0003e950: 5f7a 6820 3d20 4e6f 6e65 2020 2320 756e  _zh = None  # un
-0003e960: 7375 7070 6f72 7465 640d 0a20 2020 2020  supported..     
-0003e970: 2020 2073 656c 662e 696e 7075 745f 6c69     self.input_li
-0003e980: 6d69 7420 3d20 696e 7428 3165 3329 0d0a  mit = int(1e3)..
-0003e990: 2020 2020 2020 2020 7365 6c66 2e64 6566          self.def
-0003e9a0: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
-0003e9b0: 6765 203d 2027 6e6c 270d 0a0d 0a20 2020  ge = 'nl'....   
-0003e9c0: 2040 5473 652e 6465 6275 675f 6c61 6e67   @Tse.debug_lang
-0003e9d0: 7561 6765 5f6d 6170 0d0a 2020 2020 6465  uage_map..    de
-0003e9e0: 6620 6765 745f 6c61 6e67 7561 6765 5f6d  f get_language_m
-0003e9f0: 6170 2873 656c 662c 206c 616e 675f 6c69  ap(self, lang_li
-0003ea00: 7374 3a20 4c69 7374 5b73 7472 5d2c 202a  st: List[str], *
-0003ea10: 2a6b 7761 7267 733a 204c 616e 674d 6170  *kwargs: LangMap
-0003ea20: 4b77 6172 6773 5479 7065 2920 2d3e 2064  KwargsType) -> d
-0003ea30: 6963 743a 0d0a 2020 2020 2020 2020 7265  ict:..        re
-0003ea40: 7475 726e 207b 7d2e 6672 6f6d 6b65 7973  turn {}.fromkeys
-0003ea50: 286c 616e 675f 6c69 7374 2c20 6c61 6e67  (lang_list, lang
-0003ea60: 5f6c 6973 7429 0d0a 0d0a 2020 2020 4054  _list)....    @T
-0003ea70: 7365 2e74 696d 655f 7374 6174 0d0a 2020  se.time_stat..  
-0003ea80: 2020 4054 7365 2e63 6865 636b 5f71 7565    @Tse.check_que
-0003ea90: 7279 0d0a 2020 2020 6465 6620 6a75 6469  ry..    def judi
-0003eaa0: 635f 6170 6928 7365 6c66 2c20 7175 6572  c_api(self, quer
-0003eab0: 795f 7465 7874 3a20 7374 722c 2066 726f  y_text: str, fro
-0003eac0: 6d5f 6c61 6e67 7561 6765 3a20 7374 7220  m_language: str 
-0003ead0: 3d20 2761 7574 6f27 2c20 746f 5f6c 616e  = 'auto', to_lan
-0003eae0: 6775 6167 653a 2073 7472 203d 2027 656e  guage: str = 'en
-0003eaf0: 272c 202a 2a6b 7761 7267 733a 2041 7069  ', **kwargs: Api
-0003eb00: 4b77 6172 6773 5479 7065 2920 2d3e 2055  KwargsType) -> U
-0003eb10: 6e69 6f6e 5b73 7472 2c20 6469 6374 5d3a  nion[str, dict]:
-0003eb20: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-0003eb30: 2020 2020 2020 2068 7474 7073 3a2f 2f6a         https://j
-0003eb40: 7564 6963 2e69 6f2f 656e 2f74 7261 6e73  udic.io/en/trans
-0003eb50: 6c61 7465 0d0a 2020 2020 2020 2020 3a70  late..        :p
-0003eb60: 6172 616d 2071 7565 7279 5f74 6578 743a  aram query_text:
-0003eb70: 2073 7472 2c20 6d75 7374 2e0d 0a20 2020   str, must...   
-0003eb80: 2020 2020 203a 7061 7261 6d20 6672 6f6d       :param from
-0003eb90: 5f6c 616e 6775 6167 653a 2073 7472 2c20  _language: str, 
-0003eba0: 6465 6661 756c 7420 2761 7574 6f27 2e0d  default 'auto'..
-0003ebb0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0003ebc0: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
-0003ebd0: 2c20 6465 6661 756c 7420 2765 6e27 2e0d  , default 'en'..
-0003ebe0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0003ebf0: 2a2a 6b77 6172 6773 3a0d 0a20 2020 2020  **kwargs:..     
-0003ec00: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-0003ec10: 6d20 7469 6d65 6f75 743a 2066 6c6f 6174  m timeout: float
-0003ec20: 2c20 6465 6661 756c 7420 4e6f 6e65 2e0d  , default None..
-0003ec30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003ec40: 203a 7061 7261 6d20 7072 6f78 6965 733a   :param proxies:
-0003ec50: 2064 6963 742c 2064 6566 6175 6c74 204e   dict, default N
-0003ec60: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
-0003ec70: 2020 2020 2020 3a70 6172 616d 2073 6c65        :param sle
-0003ec80: 6570 5f73 6563 6f6e 6473 3a20 666c 6f61  ep_seconds: floa
-0003ec90: 742c 2064 6566 6175 6c74 2030 2e0d 0a20  t, default 0... 
-0003eca0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0003ecb0: 7061 7261 6d20 6973 5f64 6574 6169 6c5f  param is_detail_
-0003ecc0: 7265 7375 6c74 3a20 626f 6f6c 2c20 6465  result: bool, de
-0003ecd0: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
-0003ece0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-0003ecf0: 6172 616d 2069 665f 6967 6e6f 7265 5f6c  aram if_ignore_l
-0003ed00: 696d 6974 5f6f 665f 6c65 6e67 7468 3a20  imit_of_length: 
-0003ed10: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
-0003ed20: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
-0003ed30: 2020 2020 2020 3a70 6172 616d 206c 696d        :param lim
-0003ed40: 6974 5f6f 665f 6c65 6e67 7468 3a20 696e  it_of_length: in
-0003ed50: 742c 2064 6566 6175 6c74 2032 3030 3030  t, default 20000
-0003ed60: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0003ed70: 2020 203a 7061 7261 6d20 6966 5f69 676e     :param if_ign
-0003ed80: 6f72 655f 656d 7074 795f 7175 6572 793a  ore_empty_query:
-0003ed90: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
-0003eda0: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
-0003edb0: 2020 2020 2020 203a 7061 7261 6d20 7570         :param up
-0003edc0: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-0003edd0: 6572 5f66 7265 713a 2069 6e74 2c20 6465  er_freq: int, de
-0003ede0: 6661 756c 7420 3130 3030 2e0d 0a20 2020  fault 1000...   
-0003edf0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-0003ee00: 7261 6d20 7570 6461 7465 5f73 6573 7369  ram update_sessi
-0003ee10: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-0003ee20: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
-0003ee30: 2031 3530 302e 0d0a 2020 2020 2020 2020   1500...        
-0003ee40: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-0003ee50: 665f 7368 6f77 5f74 696d 655f 7374 6174  f_show_time_stat
-0003ee60: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-0003ee70: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
-0003ee80: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-0003ee90: 686f 775f 7469 6d65 5f73 7461 745f 7072  how_time_stat_pr
-0003eea0: 6563 6973 696f 6e3a 2069 6e74 2c20 6465  ecision: int, de
-0003eeb0: 6661 756c 7420 322e 0d0a 2020 2020 2020  fault 2...      
-0003eec0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0003eed0: 2069 665f 7072 696e 745f 7761 726e 696e   if_print_warnin
-0003eee0: 673a 2062 6f6f 6c2c 2064 6566 6175 6c74  g: bool, default
-0003eef0: 2054 7275 652e 0d0a 2020 2020 2020 2020   True...        
-0003ef00: 3a72 6574 7572 6e3a 2073 7472 206f 7220  :return: str or 
-0003ef10: 6469 6374 0d0a 2020 2020 2020 2020 2222  dict..        ""
-0003ef20: 220d 0a0d 0a20 2020 2020 2020 2074 696d  "....        tim
-0003ef30: 656f 7574 203d 206b 7761 7267 732e 6765  eout = kwargs.ge
-0003ef40: 7428 2774 696d 656f 7574 272c 204e 6f6e  t('timeout', Non
-0003ef50: 6529 0d0a 2020 2020 2020 2020 7072 6f78  e)..        prox
-0003ef60: 6965 7320 3d20 6b77 6172 6773 2e67 6574  ies = kwargs.get
-0003ef70: 2827 7072 6f78 6965 7327 2c20 4e6f 6e65  ('proxies', None
-0003ef80: 290d 0a20 2020 2020 2020 2073 6c65 6570  )..        sleep
-0003ef90: 5f73 6563 6f6e 6473 203d 206b 7761 7267  _seconds = kwarg
-0003efa0: 732e 6765 7428 2773 6c65 6570 5f73 6563  s.get('sleep_sec
-0003efb0: 6f6e 6473 272c 2030 290d 0a20 2020 2020  onds', 0)..     
-0003efc0: 2020 2069 665f 7072 696e 745f 7761 726e     if_print_warn
-0003efd0: 696e 6720 3d20 6b77 6172 6773 2e67 6574  ing = kwargs.get
-0003efe0: 2827 6966 5f70 7269 6e74 5f77 6172 6e69  ('if_print_warni
-0003eff0: 6e67 272c 2054 7275 6529 0d0a 2020 2020  ng', True)..    
-0003f000: 2020 2020 6973 5f64 6574 6169 6c5f 7265      is_detail_re
-0003f010: 7375 6c74 203d 206b 7761 7267 732e 6765  sult = kwargs.ge
-0003f020: 7428 2769 735f 6465 7461 696c 5f72 6573  t('is_detail_res
-0003f030: 756c 7427 2c20 4661 6c73 6529 0d0a 2020  ult', False)..  
-0003f040: 2020 2020 2020 7570 6461 7465 5f73 6573        update_ses
-0003f050: 7369 6f6e 5f61 6674 6572 5f66 7265 7120  sion_after_freq 
-0003f060: 3d20 6b77 6172 6773 2e67 6574 2827 7570  = kwargs.get('up
-0003f070: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-0003f080: 6572 5f66 7265 7127 2c20 7365 6c66 2e64  er_freq', self.d
-0003f090: 6566 6175 6c74 5f73 6573 7369 6f6e 5f66  efault_session_f
-0003f0a0: 7265 7129 0d0a 2020 2020 2020 2020 7570  req)..        up
-0003f0b0: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-0003f0c0: 6572 5f73 6563 6f6e 6473 203d 206b 7761  er_seconds = kwa
-0003f0d0: 7267 732e 6765 7428 2775 7064 6174 655f  rgs.get('update_
-0003f0e0: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
-0003f0f0: 636f 6e64 7327 2c20 7365 6c66 2e64 6566  conds', self.def
-0003f100: 6175 6c74 5f73 6573 7369 6f6e 5f73 6563  ault_session_sec
-0003f110: 6f6e 6473 290d 0a20 2020 2020 2020 2073  onds)..        s
-0003f120: 656c 662e 6368 6563 6b5f 696e 7075 745f  elf.check_input_
-0003f130: 6c69 6d69 7428 7175 6572 795f 7465 7874  limit(query_text
-0003f140: 2c20 7365 6c66 2e69 6e70 7574 5f6c 696d  , self.input_lim
-0003f150: 6974 290d 0a0d 0a20 2020 2020 2020 206e  it)....        n
-0003f160: 6f74 5f75 7064 6174 655f 636f 6e64 5f66  ot_update_cond_f
-0003f170: 7265 7120 3d20 3120 6966 2073 656c 662e  req = 1 if self.
-0003f180: 7175 6572 795f 636f 756e 7420 2520 7570  query_count % up
-0003f190: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
-0003f1a0: 6572 5f66 7265 7120 213d 2030 2065 6c73  er_freq != 0 els
-0003f1b0: 6520 300d 0a20 2020 2020 2020 206e 6f74  e 0..        not
-0003f1c0: 5f75 7064 6174 655f 636f 6e64 5f74 696d  _update_cond_tim
-0003f1d0: 6520 3d20 3120 6966 2074 696d 652e 7469  e = 1 if time.ti
-0003f1e0: 6d65 2829 202d 2073 656c 662e 6265 6769  me() - self.begi
-0003f1f0: 6e5f 7469 6d65 203c 2075 7064 6174 655f  n_time < update_
-0003f200: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
-0003f210: 636f 6e64 7320 656c 7365 2030 0d0a 2020  conds else 0..  
-0003f220: 2020 2020 2020 6966 206e 6f74 2028 7365        if not (se
-0003f230: 6c66 2e73 6573 7369 6f6e 2061 6e64 2073  lf.session and s
-0003f240: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
-0003f250: 2061 6e64 206e 6f74 5f75 7064 6174 655f   and not_update_
-0003f260: 636f 6e64 5f66 7265 7120 616e 6420 6e6f  cond_freq and no
-0003f270: 745f 7570 6461 7465 5f63 6f6e 645f 7469  t_update_cond_ti
-0003f280: 6d65 293a 0d0a 2020 2020 2020 2020 2020  me):..          
-0003f290: 2020 7365 6c66 2e62 6567 696e 5f74 696d    self.begin_tim
-0003f2a0: 6520 3d20 7469 6d65 2e74 696d 6528 290d  e = time.time().
-0003f2b0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0003f2c0: 662e 7365 7373 696f 6e20 3d20 7265 7175  f.session = requ
-0003f2d0: 6573 7473 2e53 6573 7369 6f6e 2829 0d0a  ests.Session()..
-0003f2e0: 2020 2020 2020 2020 2020 2020 5f20 3d20              _ = 
-0003f2f0: 7365 6c66 2e73 6573 7369 6f6e 2e67 6574  self.session.get
-0003f300: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
-0003f310: 6865 6164 6572 733d 7365 6c66 2e68 6f73  headers=self.hos
-0003f320: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
-0003f330: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
-0003f340: 6965 733d 7072 6f78 6965 7329 0d0a 2020  ies=proxies)..  
-0003f350: 2020 2020 2020 2020 2020 6465 6275 675f            debug_
-0003f360: 6c61 6e67 5f6b 7761 7267 7320 3d20 7365  lang_kwargs = se
-0003f370: 6c66 2e64 6562 7567 5f6c 616e 675f 6b77  lf.debug_lang_kw
-0003f380: 6172 6773 2866 726f 6d5f 6c61 6e67 7561  args(from_langua
-0003f390: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
-0003f3a0: 2073 656c 662e 6465 6661 756c 745f 6672   self.default_fr
-0003f3b0: 6f6d 5f6c 616e 6775 6167 652c 2069 665f  om_language, if_
-0003f3c0: 7072 696e 745f 7761 726e 696e 6729 0d0a  print_warning)..
-0003f3d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0003f3e0: 2e6c 616e 6775 6167 655f 6d61 7020 3d20  .language_map = 
-0003f3f0: 7365 6c66 2e67 6574 5f6c 616e 6775 6167  self.get_languag
-0003f400: 655f 6d61 7028 7365 6c66 2e6c 616e 675f  e_map(self.lang_
-0003f410: 6c69 7374 2c20 2a2a 6465 6275 675f 6c61  list, **debug_la
-0003f420: 6e67 5f6b 7761 7267 7329 0d0a 0d0a 2020  ng_kwargs)....  
-0003f430: 2020 2020 2020 6966 2066 726f 6d5f 6c61        if from_la
-0003f440: 6e67 7561 6765 203d 3d20 2761 7574 6f27  nguage == 'auto'
-0003f450: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
-0003f460: 726f 6d5f 6c61 6e67 7561 6765 203d 2073  rom_language = s
-0003f470: 656c 662e 7761 726e 696e 675f 6175 746f  elf.warning_auto
-0003f480: 5f6c 616e 6728 276a 7564 6963 272c 2073  _lang('judic', s
-0003f490: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
-0003f4a0: 5f6c 616e 6775 6167 652c 2069 665f 7072  _language, if_pr
-0003f4b0: 696e 745f 7761 726e 696e 6729 0d0a 2020  int_warning)..  
-0003f4c0: 2020 2020 2020 6672 6f6d 5f6c 616e 6775        from_langu
-0003f4d0: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
-0003f4e0: 203d 2073 656c 662e 6368 6563 6b5f 6c61   = self.check_la
-0003f4f0: 6e67 7561 6765 2866 726f 6d5f 6c61 6e67  nguage(from_lang
-0003f500: 7561 6765 2c20 746f 5f6c 616e 6775 6167  uage, to_languag
-0003f510: 652c 2073 656c 662e 6c61 6e67 7561 6765  e, self.language
-0003f520: 5f6d 6170 290d 0a0d 0a20 2020 2020 2020  _map)....       
-0003f530: 2070 6179 6c6f 6164 203d 207b 0d0a 2020   payload = {..  
-0003f540: 2020 2020 2020 2020 2020 2773 6f75 7263            'sourc
-0003f550: 6554 6578 7427 3a20 7175 6572 795f 7465  eText': query_te
-0003f560: 7874 2c0d 0a20 2020 2020 2020 2020 2020  xt,..           
-0003f570: 2027 696e 7075 744c 616e 6727 3a20 6672   'inputLang': fr
-0003f580: 6f6d 5f6c 616e 6775 6167 652c 0d0a 2020  om_language,..  
-0003f590: 2020 2020 2020 2020 2020 276f 7574 7075            'outpu
-0003f5a0: 744c 616e 6727 3a20 746f 5f6c 616e 6775  tLang': to_langu
-0003f5b0: 6167 650d 0a20 2020 2020 2020 207d 0d0a  age..        }..
-0003f5c0: 2020 2020 2020 2020 7220 3d20 7365 6c66          r = self
-0003f5d0: 2e73 6573 7369 6f6e 2e70 6f73 7428 7365  .session.post(se
-0003f5e0: 6c66 2e61 7069 5f75 726c 2c20 6a73 6f6e  lf.api_url, json
-0003f5f0: 3d70 6179 6c6f 6164 2c20 6865 6164 6572  =payload, header
-0003f600: 733d 7365 6c66 2e61 7069 5f68 6561 6465  s=self.api_heade
-0003f610: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
-0003f620: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
-0003f630: 7869 6573 290d 0a20 2020 2020 2020 2072  xies)..        r
-0003f640: 2e72 6169 7365 5f66 6f72 5f73 7461 7475  .raise_for_statu
-0003f650: 7328 290d 0a20 2020 2020 2020 2064 6174  s()..        dat
-0003f660: 6120 3d20 722e 6a73 6f6e 2829 0d0a 2020  a = r.json()..  
-0003f670: 2020 2020 2020 7469 6d65 2e73 6c65 6570        time.sleep
-0003f680: 2873 6c65 6570 5f73 6563 6f6e 6473 290d  (sleep_seconds).
-0003f690: 0a20 2020 2020 2020 2073 656c 662e 7175  .        self.qu
-0003f6a0: 6572 795f 636f 756e 7420 2b3d 2031 0d0a  ery_count += 1..
-0003f6b0: 2020 2020 2020 2020 7265 7475 726e 2064          return d
-0003f6c0: 6174 6120 6966 2069 735f 6465 7461 696c  ata if is_detail
-0003f6d0: 5f72 6573 756c 7420 656c 7365 2064 6174  _result else dat
-0003f6e0: 615b 2774 7261 6e73 6c61 7469 6f6e 275d  a['translation']
-0003f6f0: 0d0a 0d0a 0d0a 636c 6173 7320 5965 656b  ......class Yeek
-0003f700: 6974 2854 7365 293a 0d0a 2020 2020 6465  it(Tse):..    de
-0003f710: 6620 5f5f 696e 6974 5f5f 2873 656c 6629  f __init__(self)
-0003f720: 3a0d 0a20 2020 2020 2020 2073 7570 6572  :..        super
-0003f730: 2829 2e5f 5f69 6e69 745f 5f28 290d 0a20  ().__init__().. 
-0003f740: 2020 2020 2020 2073 656c 662e 6265 6769         self.begi
-0003f750: 6e5f 7469 6d65 203d 2074 696d 652e 7469  n_time = time.ti
-0003f760: 6d65 2829 0d0a 2020 2020 2020 2020 7365  me()..        se
-0003f770: 6c66 2e68 6f6d 655f 7572 6c20 3d20 2768  lf.home_url = 'h
-0003f780: 7474 7073 3a2f 2f77 7777 2e79 6565 6b69  ttps://www.yeeki
-0003f790: 742e 636f 6d27 0d0a 2020 2020 2020 2020  t.com'..        
-0003f7a0: 7365 6c66 2e68 6f73 745f 7572 6c20 3d20  self.host_url = 
-0003f7b0: 2768 7474 7073 3a2f 2f77 7777 2e79 6565  'https://www.yee
-0003f7c0: 6b69 742e 636f 6d2f 7369 7465 2f74 7261  kit.com/site/tra
-0003f7d0: 6e73 6c61 7465 270d 0a20 2020 2020 2020  nslate'..       
-0003f7e0: 2073 656c 662e 6170 695f 7572 6c20 3d20   self.api_url = 
-0003f7f0: 2768 7474 7073 3a2f 2f77 7777 2e79 6565  'https://www.yee
-0003f800: 6b69 742e 636f 6d2f 7369 7465 2f64 6f74  kit.com/site/dot
-0003f810: 7261 6e73 6c61 7465 270d 0a20 2020 2020  ranslate'..     
-0003f820: 2020 2073 656c 662e 6c61 6e67 5f75 726c     self.lang_url
-0003f830: 203d 2027 6874 7470 733a 2f2f 7777 772e   = 'https://www.
-0003f840: 7965 656b 6974 2e63 6f6d 2f6a 732f 7472  yeekit.com/js/tr
-0003f850: 616e 736c 6174 652e 6a73 270d 0a20 2020  anslate.js'..   
-0003f860: 2020 2020 2073 656c 662e 686f 7374 5f68       self.host_h
-0003f870: 6561 6465 7273 203d 2073 656c 662e 6765  eaders = self.ge
-0003f880: 745f 6865 6164 6572 7328 7365 6c66 2e68  t_headers(self.h
-0003f890: 6f6d 655f 7572 6c2c 2069 665f 6170 693d  ome_url, if_api=
-0003f8a0: 4661 6c73 652c 2069 665f 7265 6665 7265  False, if_refere
-0003f8b0: 725f 666f 725f 686f 7374 3d54 7275 6529  r_for_host=True)
-0003f8c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0003f8d0: 7069 5f68 6561 6465 7273 203d 2073 656c  pi_headers = sel
-0003f8e0: 662e 6765 745f 6865 6164 6572 7328 7365  f.get_headers(se
-0003f8f0: 6c66 2e68 6f6d 655f 7572 6c2c 2069 665f  lf.home_url, if_
-0003f900: 6170 693d 5472 7565 2c20 6966 5f61 6a61  api=True, if_aja
-0003f910: 785f 666f 725f 6170 693d 5472 7565 290d  x_for_api=True).
-0003f920: 0a20 2020 2020 2020 2073 656c 662e 7365  .        self.se
-0003f930: 7373 696f 6e20 3d20 4e6f 6e65 0d0a 2020  ssion = None..  
-0003f940: 2020 2020 2020 7365 6c66 2e6c 616e 675f        self.lang_
-0003f950: 6c69 7374 203d 205b 277a 6827 2c20 2765  list = ['zh', 'e
-0003f960: 6e27 2c20 2761 7227 2c20 2764 6527 2c20  n', 'ar', 'de', 
-0003f970: 2772 7527 2c20 2766 7227 2c20 2763 7a27  'ru', 'fr', 'cz'
-0003f980: 2c20 2770 7427 2c20 276a 7027 2c20 2765  , 'pt', 'jp', 'e
-0003f990: 7327 5d0d 0a20 2020 2020 2020 2073 656c  s']..        sel
-0003f9a0: 662e 6c61 6e67 7561 6765 5f6d 6170 203d  f.language_map =
-0003f9b0: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
-0003f9c0: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
-0003f9d0: 3d20 300d 0a20 2020 2020 2020 2073 656c  = 0..        sel
-0003f9e0: 662e 6f75 7470 7574 5f7a 6820 3d20 277a  f.output_zh = 'z
-0003f9f0: 6827 0d0a 2020 2020 2020 2020 7365 6c66  h'..        self
-0003fa00: 2e69 6e70 7574 5f6c 696d 6974 203d 2069  .input_limit = i
-0003fa10: 6e74 2831 6533 290d 0a20 2020 2020 2020  nt(1e3)..       
-0003fa20: 2073 656c 662e 6465 6661 756c 745f 6672   self.default_fr
-0003fa30: 6f6d 5f6c 616e 6775 6167 6520 3d20 7365  om_language = se
-0003fa40: 6c66 2e6f 7574 7075 745f 7a68 0d0a 0d0a  lf.output_zh....
-0003fa50: 2020 2020 4054 7365 2e64 6562 7567 5f6c      @Tse.debug_l
-0003fa60: 616e 6775 6167 655f 6d61 700d 0a20 2020  anguage_map..   
-0003fa70: 2064 6566 2067 6574 5f6c 616e 6775 6167   def get_languag
-0003fa80: 655f 6d61 7028 7365 6c66 2c20 6c61 6e67  e_map(self, lang
-0003fa90: 5f6c 6973 743a 204c 6973 745b 7374 725d  _list: List[str]
-0003faa0: 2c20 2a2a 6b77 6172 6773 3a20 4c61 6e67  , **kwargs: Lang
-0003fab0: 4d61 704b 7761 7267 7354 7970 6529 202d  MapKwargsType) -
-0003fac0: 3e20 6469 6374 3a0d 0a20 2020 2020 2020  > dict:..       
-0003fad0: 2072 6574 7572 6e20 7b7d 2e66 726f 6d6b   return {}.fromk
-0003fae0: 6579 7328 6c61 6e67 5f6c 6973 742c 206c  eys(lang_list, l
-0003faf0: 616e 675f 6c69 7374 290d 0a0d 0a20 2020  ang_list)....   
-0003fb00: 2040 5473 652e 756e 6365 7274 6966 6965   @Tse.uncertifie
-0003fb10: 6420 2023 206e 6f74 2063 6f64 652c 2062  d  # not code, b
-0003fb20: 7574 2073 6572 7665 722e 0d0a 2020 2020  ut server...    
-0003fb30: 4054 7365 2e74 696d 655f 7374 6174 0d0a  @Tse.time_stat..
-0003fb40: 2020 2020 4054 7365 2e63 6865 636b 5f71      @Tse.check_q
-0003fb50: 7565 7279 0d0a 2020 2020 6465 6620 7965  uery..    def ye
-0003fb60: 656b 6974 5f61 7069 2873 656c 662c 2071  ekit_api(self, q
-0003fb70: 7565 7279 5f74 6578 743a 2073 7472 2c20  uery_text: str, 
-0003fb80: 6672 6f6d 5f6c 616e 6775 6167 653a 2073  from_language: s
-0003fb90: 7472 203d 2027 6175 746f 272c 2074 6f5f  tr = 'auto', to_
-0003fba0: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
-0003fbb0: 2765 6e27 2c20 2a2a 6b77 6172 6773 3a20  'en', **kwargs: 
-0003fbc0: 4170 694b 7761 7267 7354 7970 6529 202d  ApiKwargsType) -
-0003fbd0: 3e20 556e 696f 6e5b 7374 722c 2064 6963  > Union[str, dic
-0003fbe0: 745d 3a0d 0a20 2020 2020 2020 2022 2222  t]:..        """
-0003fbf0: 0d0a 2020 2020 2020 2020 6874 7470 733a  ..        https:
-0003fc00: 2f2f 7777 772e 7965 656b 6974 2e63 6f6d  //www.yeekit.com
-0003fc10: 2f73 6974 652f 7472 616e 736c 6174 650d  /site/translate.
-0003fc20: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0003fc30: 7175 6572 795f 7465 7874 3a20 7374 722c  query_text: str,
-0003fc40: 206d 7573 742e 0d0a 2020 2020 2020 2020   must...        
-0003fc50: 3a70 6172 616d 2066 726f 6d5f 6c61 6e67  :param from_lang
-0003fc60: 7561 6765 3a20 7374 722c 2064 6566 6175  uage: str, defau
-0003fc70: 6c74 2027 6175 746f 272e 0d0a 2020 2020  lt 'auto'...    
-0003fc80: 2020 2020 3a70 6172 616d 2074 6f5f 6c61      :param to_la
-0003fc90: 6e67 7561 6765 3a20 7374 722c 2064 6566  nguage: str, def
-0003fca0: 6175 6c74 2027 656e 272e 0d0a 2020 2020  ault 'en'...    
-0003fcb0: 2020 2020 3a70 6172 616d 202a 2a6b 7761      :param **kwa
-0003fcc0: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
-0003fcd0: 2020 2020 2020 3a70 6172 616d 2074 696d        :param tim
-0003fce0: 656f 7574 3a20 666c 6f61 742c 2064 6566  eout: float, def
-0003fcf0: 6175 6c74 204e 6f6e 652e 0d0a 2020 2020  ault None...    
-0003fd00: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-0003fd10: 616d 2070 726f 7869 6573 3a20 6469 6374  am proxies: dict
-0003fd20: 2c20 6465 6661 756c 7420 4e6f 6e65 2e0d  , default None..
-0003fd30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003fd40: 203a 7061 7261 6d20 736c 6565 705f 7365   :param sleep_se
-0003fd50: 636f 6e64 733a 2066 6c6f 6174 2c20 6465  conds: float, de
-0003fd60: 6661 756c 7420 302e 0d0a 2020 2020 2020  fault 0...      
-0003fd70: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-0003fd80: 2069 735f 6465 7461 696c 5f72 6573 756c   is_detail_resul
-0003fd90: 743a 2062 6f6f 6c2c 2064 6566 6175 6c74  t: bool, default
-0003fda0: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
-0003fdb0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-0003fdc0: 6966 5f69 676e 6f72 655f 6c69 6d69 745f  if_ignore_limit_
-0003fdd0: 6f66 5f6c 656e 6774 683a 2062 6f6f 6c2c  of_length: bool,
-0003fde0: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
-0003fdf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003fe00: 203a 7061 7261 6d20 6c69 6d69 745f 6f66   :param limit_of
-0003fe10: 5f6c 656e 6774 683a 2069 6e74 2c20 6465  _length: int, de
-0003fe20: 6661 756c 7420 3230 3030 302e 0d0a 2020  fault 20000...  
-0003fe30: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-0003fe40: 6172 616d 2069 665f 6967 6e6f 7265 5f65  aram if_ignore_e
-0003fe50: 6d70 7479 5f71 7565 7279 3a20 626f 6f6c  mpty_query: bool
-0003fe60: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-0003fe70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0003fe80: 2020 3a70 6172 616d 2075 7064 6174 655f    :param update_
-0003fe90: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
-0003fea0: 6571 3a20 696e 742c 2064 6566 6175 6c74  eq: int, default
-0003feb0: 2031 3030 302e 0d0a 2020 2020 2020 2020   1000...        
-0003fec0: 2020 2020 2020 2020 3a70 6172 616d 2075          :param u
-0003fed0: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-0003fee0: 7465 725f 7365 636f 6e64 733a 2066 6c6f  ter_seconds: flo
-0003fef0: 6174 2c20 6465 6661 756c 7420 3135 3030  at, default 1500
-0003ff00: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0003ff10: 2020 203a 7061 7261 6d20 6966 5f73 686f     :param if_sho
-0003ff20: 775f 7469 6d65 5f73 7461 743a 2062 6f6f  w_time_stat: boo
-0003ff30: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
-0003ff40: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0003ff50: 2020 203a 7061 7261 6d20 7368 6f77 5f74     :param show_t
-0003ff60: 696d 655f 7374 6174 5f70 7265 6369 7369  ime_stat_precisi
-0003ff70: 6f6e 3a20 696e 742c 2064 6566 6175 6c74  on: int, default
-0003ff80: 2032 2e0d 0a20 2020 2020 2020 2020 2020   2...           
-0003ff90: 2020 2020 203a 7061 7261 6d20 6966 5f70       :param if_p
-0003ffa0: 7269 6e74 5f77 6172 6e69 6e67 3a20 626f  rint_warning: bo
-0003ffb0: 6f6c 2c20 6465 6661 756c 7420 5472 7565  ol, default True
-0003ffc0: 2e0d 0a20 2020 2020 2020 203a 7265 7475  ...        :retu
-0003ffd0: 726e 3a20 7374 7220 6f72 2064 6963 740d  rn: str or dict.
-0003ffe0: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
-0003fff0: 2020 2020 2020 2020 7469 6d65 6f75 7420          timeout 
-00040000: 3d20 6b77 6172 6773 2e67 6574 2827 7469  = kwargs.get('ti
-00040010: 6d65 6f75 7427 2c20 4e6f 6e65 290d 0a20  meout', None).. 
-00040020: 2020 2020 2020 2070 726f 7869 6573 203d         proxies =
-00040030: 206b 7761 7267 732e 6765 7428 2770 726f   kwargs.get('pro
-00040040: 7869 6573 272c 204e 6f6e 6529 0d0a 2020  xies', None)..  
-00040050: 2020 2020 2020 736c 6565 705f 7365 636f        sleep_seco
-00040060: 6e64 7320 3d20 6b77 6172 6773 2e67 6574  nds = kwargs.get
-00040070: 2827 736c 6565 705f 7365 636f 6e64 7327  ('sleep_seconds'
-00040080: 2c20 3029 0d0a 2020 2020 2020 2020 6966  , 0)..        if
-00040090: 5f70 7269 6e74 5f77 6172 6e69 6e67 203d  _print_warning =
-000400a0: 206b 7761 7267 732e 6765 7428 2769 665f   kwargs.get('if_
-000400b0: 7072 696e 745f 7761 726e 696e 6727 2c20  print_warning', 
-000400c0: 5472 7565 290d 0a20 2020 2020 2020 2069  True)..        i
-000400d0: 735f 6465 7461 696c 5f72 6573 756c 7420  s_detail_result 
-000400e0: 3d20 6b77 6172 6773 2e67 6574 2827 6973  = kwargs.get('is
-000400f0: 5f64 6574 6169 6c5f 7265 7375 6c74 272c  _detail_result',
-00040100: 2046 616c 7365 290d 0a20 2020 2020 2020   False)..       
-00040110: 2075 7064 6174 655f 7365 7373 696f 6e5f   update_session_
-00040120: 6166 7465 725f 6672 6571 203d 206b 7761  after_freq = kwa
-00040130: 7267 732e 6765 7428 2775 7064 6174 655f  rgs.get('update_
-00040140: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
-00040150: 6571 272c 2073 656c 662e 6465 6661 756c  eq', self.defaul
-00040160: 745f 7365 7373 696f 6e5f 6672 6571 290d  t_session_freq).
-00040170: 0a20 2020 2020 2020 2075 7064 6174 655f  .        update_
-00040180: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
-00040190: 636f 6e64 7320 3d20 6b77 6172 6773 2e67  conds = kwargs.g
-000401a0: 6574 2827 7570 6461 7465 5f73 6573 7369  et('update_sessi
-000401b0: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-000401c0: 272c 2073 656c 662e 6465 6661 756c 745f  ', self.default_
-000401d0: 7365 7373 696f 6e5f 7365 636f 6e64 7329  session_seconds)
-000401e0: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
-000401f0: 6865 636b 5f69 6e70 7574 5f6c 696d 6974  heck_input_limit
-00040200: 2871 7565 7279 5f74 6578 742c 2073 656c  (query_text, sel
-00040210: 662e 696e 7075 745f 6c69 6d69 7429 0d0a  f.input_limit)..
-00040220: 0d0a 2020 2020 2020 2020 6e6f 745f 7570  ..        not_up
-00040230: 6461 7465 5f63 6f6e 645f 6672 6571 203d  date_cond_freq =
-00040240: 2031 2069 6620 7365 6c66 2e71 7565 7279   1 if self.query
-00040250: 5f63 6f75 6e74 2025 2075 7064 6174 655f  _count % update_
-00040260: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
-00040270: 6571 2021 3d20 3020 656c 7365 2030 0d0a  eq != 0 else 0..
-00040280: 2020 2020 2020 2020 6e6f 745f 7570 6461          not_upda
-00040290: 7465 5f63 6f6e 645f 7469 6d65 203d 2031  te_cond_time = 1
-000402a0: 2069 6620 7469 6d65 2e74 696d 6528 2920   if time.time() 
-000402b0: 2d20 7365 6c66 2e62 6567 696e 5f74 696d  - self.begin_tim
-000402c0: 6520 3c20 7570 6461 7465 5f73 6573 7369  e < update_sessi
-000402d0: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
-000402e0: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
-000402f0: 2069 6620 6e6f 7420 2873 656c 662e 7365   if not (self.se
-00040300: 7373 696f 6e20 616e 6420 7365 6c66 2e6c  ssion and self.l
-00040310: 616e 6775 6167 655f 6d61 7020 616e 6420  anguage_map and 
-00040320: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
-00040330: 6672 6571 2061 6e64 206e 6f74 5f75 7064  freq and not_upd
-00040340: 6174 655f 636f 6e64 5f74 696d 6529 3a0d  ate_cond_time):.
-00040350: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00040360: 662e 6265 6769 6e5f 7469 6d65 203d 2074  f.begin_time = t
-00040370: 696d 652e 7469 6d65 2829 0d0a 2020 2020  ime.time()..    
-00040380: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
-00040390: 7369 6f6e 203d 2072 6571 7565 7374 732e  sion = requests.
-000403a0: 5365 7373 696f 6e28 290d 0a20 2020 2020  Session()..     
-000403b0: 2020 2020 2020 205f 203d 2073 656c 662e         _ = self.
-000403c0: 7365 7373 696f 6e2e 6765 7428 7365 6c66  session.get(self
-000403d0: 2e68 6f73 745f 7572 6c2c 2068 6561 6465  .host_url, heade
-000403e0: 7273 3d73 656c 662e 686f 7374 5f68 6561  rs=self.host_hea
-000403f0: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
-00040400: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
-00040410: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
-00040420: 2020 2020 2064 6562 7567 5f6c 616e 675f       debug_lang_
-00040430: 6b77 6172 6773 203d 2073 656c 662e 6465  kwargs = self.de
-00040440: 6275 675f 6c61 6e67 5f6b 7761 7267 7328  bug_lang_kwargs(
-00040450: 6672 6f6d 5f6c 616e 6775 6167 652c 2074  from_language, t
-00040460: 6f5f 6c61 6e67 7561 6765 2c20 7365 6c66  o_language, self
-00040470: 2e64 6566 6175 6c74 5f66 726f 6d5f 6c61  .default_from_la
-00040480: 6e67 7561 6765 2c20 6966 5f70 7269 6e74  nguage, if_print
-00040490: 5f77 6172 6e69 6e67 290d 0a20 2020 2020  _warning)..     
-000404a0: 2020 2020 2020 2073 656c 662e 6c61 6e67         self.lang
-000404b0: 7561 6765 5f6d 6170 203d 2073 656c 662e  uage_map = self.
-000404c0: 6765 745f 6c61 6e67 7561 6765 5f6d 6170  get_language_map
-000404d0: 2873 656c 662e 6c61 6e67 5f6c 6973 742c  (self.lang_list,
-000404e0: 202a 2a64 6562 7567 5f6c 616e 675f 6b77   **debug_lang_kw
-000404f0: 6172 6773 290d 0a0d 0a20 2020 2020 2020  args)....       
-00040500: 2069 6620 6672 6f6d 5f6c 616e 6775 6167   if from_languag
-00040510: 6520 3d3d 2027 6175 746f 273a 0d0a 2020  e == 'auto':..  
-00040520: 2020 2020 2020 2020 2020 6672 6f6d 5f6c            from_l
-00040530: 616e 6775 6167 6520 3d20 7365 6c66 2e77  anguage = self.w
-00040540: 6172 6e69 6e67 5f61 7574 6f5f 6c61 6e67  arning_auto_lang
-00040550: 2827 7965 656b 6974 272c 2073 656c 662e  ('yeekit', self.
-00040560: 6465 6661 756c 745f 6672 6f6d 5f6c 616e  default_from_lan
-00040570: 6775 6167 652c 2069 665f 7072 696e 745f  guage, if_print_
-00040580: 7761 726e 696e 6729 0d0a 2020 2020 2020  warning)..      
-00040590: 2020 6672 6f6d 5f6c 616e 6775 6167 652c    from_language,
-000405a0: 2074 6f5f 6c61 6e67 7561 6765 203d 2073   to_language = s
-000405b0: 656c 662e 6368 6563 6b5f 6c61 6e67 7561  elf.check_langua
-000405c0: 6765 2866 726f 6d5f 6c61 6e67 7561 6765  ge(from_language
-000405d0: 2c20 746f 5f6c 616e 6775 6167 652c 2073  , to_language, s
-000405e0: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
-000405f0: 290d 0a0d 0a20 2020 2020 2020 2070 6179  )....        pay
-00040600: 6c6f 6164 203d 207b 0d0a 2020 2020 2020  load = {..      
-00040610: 2020 2020 2020 2763 6f6e 7465 6e74 5b5d        'content[]
-00040620: 273a 2071 7565 7279 5f74 6578 742c 0d0a  ': query_text,..
-00040630: 2020 2020 2020 2020 2020 2020 2773 6f75              'sou
-00040640: 7263 654c 616e 6727 3a20 6627 6e7b 6672  rceLang': f'n{fr
-00040650: 6f6d 5f6c 616e 6775 6167 657d 272c 0d0a  om_language}',..
-00040660: 2020 2020 2020 2020 2020 2020 2774 6172              'tar
-00040670: 6765 744c 616e 6727 3a20 6627 6e7b 746f  getLang': f'n{to
-00040680: 5f6c 616e 6775 6167 657d 272c 0d0a 2020  _language}',..  
-00040690: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
-000406a0: 2070 6179 6c6f 6164 203d 2075 726c 6c69   payload = urlli
-000406b0: 622e 7061 7273 652e 7572 6c65 6e63 6f64  b.parse.urlencod
-000406c0: 6528 7061 796c 6f61 6429 0d0a 2020 2020  e(payload)..    
-000406d0: 2020 2020 7220 3d20 7365 6c66 2e73 6573      r = self.ses
-000406e0: 7369 6f6e 2e70 6f73 7428 7365 6c66 2e61  sion.post(self.a
-000406f0: 7069 5f75 726c 2c20 6461 7461 3d70 6179  pi_url, data=pay
-00040700: 6c6f 6164 2c20 6865 6164 6572 733d 7365  load, headers=se
-00040710: 6c66 2e61 7069 5f68 6561 6465 7273 2c20  lf.api_headers, 
-00040720: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
-00040730: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
-00040740: 290d 0a20 2020 2020 2020 2072 2e72 6169  )..        r.rai
-00040750: 7365 5f66 6f72 5f73 7461 7475 7328 290d  se_for_status().
-00040760: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
-00040770: 722e 6a73 6f6e 2829 0d0a 2020 2020 2020  r.json()..      
-00040780: 2020 7469 6d65 2e73 6c65 6570 2873 6c65    time.sleep(sle
-00040790: 6570 5f73 6563 6f6e 6473 290d 0a20 2020  ep_seconds)..   
-000407a0: 2020 2020 2073 656c 662e 7175 6572 795f       self.query_
-000407b0: 636f 756e 7420 2b3d 2031 0d0a 2020 2020  count += 1..    
-000407c0: 2020 2020 7265 7475 726e 2064 6174 6120      return data 
-000407d0: 6966 2069 735f 6465 7461 696c 5f72 6573  if is_detail_res
-000407e0: 756c 7420 656c 7365 2027 5c6e 272e 6a6f  ult else '\n'.jo
-000407f0: 696e 2827 2027 2e6a 6f69 6e28 7029 2066  in(' '.join(p) f
-00040800: 6f72 2070 2069 6e20 6a73 6f6e 2e6c 6f61  or p in json.loa
-00040810: 6473 2864 6174 615b 305d 295b 2774 7261  ds(data[0])['tra
-00040820: 6e73 6c61 7469 6f6e 275d 5b30 5d5b 2774  nslation'][0]['t
-00040830: 7261 6e73 6c61 7465 6427 5d5b 305d 5b27  ranslated'][0]['
-00040840: 7472 616e 736c 6174 696f 6e20 6c69 7374  translation list
-00040850: 275d 290d 0a0d 0a0d 0a63 6c61 7373 2054  '])......class T
-00040860: 7261 6e73 6c61 746f 7273 5365 7276 6572  ranslatorsServer
-00040870: 3a0d 0a20 2020 2064 6566 205f 5f69 6e69  :..    def __ini
-00040880: 745f 5f28 7365 6c66 293a 0d0a 2020 2020  t__(self):..    
-00040890: 2020 2020 7365 6c66 2e63 7075 5f63 6e74      self.cpu_cnt
-000408a0: 203d 206f 732e 6370 755f 636f 756e 7428   = os.cpu_count(
-000408b0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-000408c0: 7365 7276 6572 5f72 6567 696f 6e20 3d20  server_region = 
-000408d0: 4775 6573 7453 6576 6572 5265 6769 6f6e  GuestSeverRegion
-000408e0: 2829 2e67 6574 5f73 6572 7665 725f 7265  ().get_server_re
-000408f0: 6769 6f6e 0d0a 2020 2020 2020 2020 7365  gion..        se
-00040900: 6c66 2e5f 616c 6962 6162 6120 3d20 416c  lf._alibaba = Al
-00040910: 6962 6162 6156 3228 290d 0a20 2020 2020  ibabaV2()..     
-00040920: 2020 2073 656c 662e 616c 6962 6162 6120     self.alibaba 
-00040930: 3d20 7365 6c66 2e5f 616c 6962 6162 612e  = self._alibaba.
-00040940: 616c 6962 6162 615f 6170 690d 0a20 2020  alibaba_api..   
-00040950: 2020 2020 2073 656c 662e 5f61 7065 7274       self._apert
-00040960: 6975 6d20 3d20 4170 6572 7469 756d 2829  ium = Apertium()
-00040970: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00040980: 7065 7274 6975 6d20 3d20 7365 6c66 2e5f  pertium = self._
-00040990: 6170 6572 7469 756d 2e61 7065 7274 6975  apertium.apertiu
-000409a0: 6d5f 6170 690d 0a20 2020 2020 2020 2073  m_api..        s
-000409b0: 656c 662e 5f61 7267 6f73 203d 2041 7267  elf._argos = Arg
-000409c0: 6f73 2829 0d0a 2020 2020 2020 2020 7365  os()..        se
-000409d0: 6c66 2e61 7267 6f73 203d 2073 656c 662e  lf.argos = self.
-000409e0: 5f61 7267 6f73 2e61 7267 6f73 5f61 7069  _argos.argos_api
-000409f0: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
-00040a00: 6261 6964 7520 3d20 4261 6964 7556 3128  baidu = BaiduV1(
-00040a10: 2920 2023 2056 320d 0a20 2020 2020 2020  )  # V2..       
-00040a20: 2073 656c 662e 6261 6964 7520 3d20 7365   self.baidu = se
-00040a30: 6c66 2e5f 6261 6964 752e 6261 6964 755f  lf._baidu.baidu_
-00040a40: 6170 690d 0a20 2020 2020 2020 2073 656c  api..        sel
-00040a50: 662e 5f62 696e 6720 3d20 4269 6e67 2873  f._bing = Bing(s
-00040a60: 6572 7665 725f 7265 6769 6f6e 3d73 656c  erver_region=sel
-00040a70: 662e 7365 7276 6572 5f72 6567 696f 6e29  f.server_region)
-00040a80: 0d0a 2020 2020 2020 2020 7365 6c66 2e62  ..        self.b
-00040a90: 696e 6720 3d20 7365 6c66 2e5f 6269 6e67  ing = self._bing
-00040aa0: 2e62 696e 675f 6170 690d 0a20 2020 2020  .bing_api..     
-00040ab0: 2020 2073 656c 662e 5f63 6169 7975 6e20     self._caiyun 
-00040ac0: 3d20 4361 6979 756e 2829 0d0a 2020 2020  = Caiyun()..    
-00040ad0: 2020 2020 7365 6c66 2e63 6169 7975 6e20      self.caiyun 
-00040ae0: 3d20 7365 6c66 2e5f 6361 6979 756e 2e63  = self._caiyun.c
-00040af0: 6169 7975 6e5f 6170 690d 0a20 2020 2020  aiyun_api..     
-00040b00: 2020 2073 656c 662e 5f63 6c6f 7564 5969     self._cloudYi
-00040b10: 203d 2043 6c6f 7564 5969 2829 0d0a 2020   = CloudYi()..  
-00040b20: 2020 2020 2020 7365 6c66 2e63 6c6f 7564        self.cloud
-00040b30: 5969 203d 2073 656c 662e 5f63 6c6f 7564  Yi = self._cloud
-00040b40: 5969 2e63 6c6f 7564 5969 5f61 7069 0d0a  Yi.cloudYi_api..
-00040b50: 2020 2020 2020 2020 7365 6c66 2e5f 6465          self._de
-00040b60: 6570 6c20 3d20 4465 6570 6c28 290d 0a20  epl = Deepl().. 
-00040b70: 2020 2020 2020 2073 656c 662e 6465 6570         self.deep
-00040b80: 6c20 3d20 7365 6c66 2e5f 6465 6570 6c2e  l = self._deepl.
-00040b90: 6465 6570 6c5f 6170 690d 0a20 2020 2020  deepl_api..     
-00040ba0: 2020 2073 656c 662e 5f65 6c69 6120 3d20     self._elia = 
-00040bb0: 456c 6961 2829 0d0a 2020 2020 2020 2020  Elia()..        
-00040bc0: 7365 6c66 2e65 6c69 6120 3d20 7365 6c66  self.elia = self
-00040bd0: 2e5f 656c 6961 2e65 6c69 615f 6170 690d  ._elia.elia_api.
-00040be0: 0a20 2020 2020 2020 2073 656c 662e 5f67  .        self._g
-00040bf0: 6f6f 676c 6520 3d20 476f 6f67 6c65 5632  oogle = GoogleV2
-00040c00: 2873 6572 7665 725f 7265 6769 6f6e 3d73  (server_region=s
-00040c10: 656c 662e 7365 7276 6572 5f72 6567 696f  elf.server_regio
-00040c20: 6e29 0d0a 2020 2020 2020 2020 7365 6c66  n)..        self
-00040c30: 2e67 6f6f 676c 6520 3d20 7365 6c66 2e5f  .google = self._
-00040c40: 676f 6f67 6c65 2e67 6f6f 676c 655f 6170  google.google_ap
-00040c50: 690d 0a20 2020 2020 2020 2073 656c 662e  i..        self.
-00040c60: 5f69 6369 6261 203d 2049 6369 6261 2829  _iciba = Iciba()
-00040c70: 0d0a 2020 2020 2020 2020 7365 6c66 2e69  ..        self.i
-00040c80: 6369 6261 203d 2073 656c 662e 5f69 6369  ciba = self._ici
-00040c90: 6261 2e69 6369 6261 5f61 7069 0d0a 2020  ba.iciba_api..  
-00040ca0: 2020 2020 2020 7365 6c66 2e5f 6966 6c79        self._ifly
-00040cb0: 7465 6b20 3d20 4966 6c79 7465 6b56 3228  tek = IflytekV2(
-00040cc0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00040cd0: 6966 6c79 7465 6b20 3d20 7365 6c66 2e5f  iflytek = self._
-00040ce0: 6966 6c79 7465 6b2e 6966 6c79 7465 6b5f  iflytek.iflytek_
-00040cf0: 6170 690d 0a20 2020 2020 2020 2073 656c  api..        sel
-00040d00: 662e 5f69 666c 7972 6563 203d 2049 666c  f._iflyrec = Ifl
-00040d10: 7972 6563 2829 0d0a 2020 2020 2020 2020  yrec()..        
-00040d20: 7365 6c66 2e69 666c 7972 6563 203d 2073  self.iflyrec = s
-00040d30: 656c 662e 5f69 666c 7972 6563 2e69 666c  elf._iflyrec.ifl
-00040d40: 7972 6563 5f61 7069 0d0a 2020 2020 2020  yrec_api..      
-00040d50: 2020 7365 6c66 2e5f 6974 7261 6e73 6c61    self._itransla
-00040d60: 7465 203d 2049 7472 616e 736c 6174 6528  te = Itranslate(
-00040d70: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00040d80: 6974 7261 6e73 6c61 7465 203d 2073 656c  itranslate = sel
-00040d90: 662e 5f69 7472 616e 736c 6174 652e 6974  f._itranslate.it
-00040da0: 7261 6e73 6c61 7465 5f61 7069 0d0a 2020  ranslate_api..  
-00040db0: 2020 2020 2020 7365 6c66 2e5f 6a75 6469        self._judi
-00040dc0: 6320 3d20 4a75 6469 6328 290d 0a20 2020  c = Judic()..   
-00040dd0: 2020 2020 2073 656c 662e 6a75 6469 6320       self.judic 
-00040de0: 3d20 7365 6c66 2e5f 6a75 6469 632e 6a75  = self._judic.ju
-00040df0: 6469 635f 6170 690d 0a20 2020 2020 2020  dic_api..       
-00040e00: 2073 656c 662e 5f6c 616e 6775 6167 6557   self._languageW
-00040e10: 6972 6520 3d20 4c61 6e67 7561 6765 5769  ire = LanguageWi
-00040e20: 7265 2829 0d0a 2020 2020 2020 2020 7365  re()..        se
-00040e30: 6c66 2e6c 616e 6775 6167 6557 6972 6520  lf.languageWire 
-00040e40: 3d20 7365 6c66 2e5f 6c61 6e67 7561 6765  = self._language
-00040e50: 5769 7265 2e6c 616e 6775 6167 6557 6972  Wire.languageWir
-00040e60: 655f 6170 690d 0a20 2020 2020 2020 2073  e_api..        s
-00040e70: 656c 662e 5f6c 696e 6776 616e 6578 203d  elf._lingvanex =
-00040e80: 204c 696e 6776 616e 6578 2829 0d0a 2020   Lingvanex()..  
-00040e90: 2020 2020 2020 7365 6c66 2e6c 696e 6776        self.lingv
-00040ea0: 616e 6578 203d 2073 656c 662e 5f6c 696e  anex = self._lin
-00040eb0: 6776 616e 6578 2e6c 696e 6776 616e 6578  gvanex.lingvanex
-00040ec0: 5f61 7069 0d0a 2020 2020 2020 2020 7365  _api..        se
-00040ed0: 6c66 2e5f 6e69 7574 7261 6e73 203d 204e  lf._niutrans = N
-00040ee0: 6975 7472 616e 7328 290d 0a20 2020 2020  iutrans()..     
-00040ef0: 2020 2073 656c 662e 6e69 7574 7261 6e73     self.niutrans
-00040f00: 203d 2073 656c 662e 5f6e 6975 7472 616e   = self._niutran
-00040f10: 732e 6e69 7574 7261 6e73 5f61 7069 0d0a  s.niutrans_api..
-00040f20: 2020 2020 2020 2020 7365 6c66 2e5f 6d67          self._mg
-00040f30: 6c69 7020 3d20 4d67 6c69 7028 290d 0a20  lip = Mglip().. 
-00040f40: 2020 2020 2020 2073 656c 662e 6d67 6c69         self.mgli
-00040f50: 7020 3d20 7365 6c66 2e5f 6d67 6c69 702e  p = self._mglip.
-00040f60: 6d67 6c69 705f 6170 690d 0a20 2020 2020  mglip_api..     
-00040f70: 2020 2073 656c 662e 5f6d 6972 6169 203d     self._mirai =
-00040f80: 204d 6972 6169 2829 0d0a 2020 2020 2020   Mirai()..      
-00040f90: 2020 7365 6c66 2e6d 6972 6169 203d 2073    self.mirai = s
-00040fa0: 656c 662e 5f6d 6972 6169 2e6d 6972 6169  elf._mirai.mirai
-00040fb0: 5f61 7069 0d0a 2020 2020 2020 2020 7365  _api..        se
-00040fc0: 6c66 2e5f 6d6f 6465 726e 4d74 203d 204d  lf._modernMt = M
-00040fd0: 6f64 6572 6e4d 7428 290d 0a20 2020 2020  odernMt()..     
-00040fe0: 2020 2073 656c 662e 6d6f 6465 726e 4d74     self.modernMt
-00040ff0: 203d 2073 656c 662e 5f6d 6f64 6572 6e4d   = self._modernM
-00041000: 742e 6d6f 6465 726e 4d74 5f61 7069 0d0a  t.modernMt_api..
-00041010: 2020 2020 2020 2020 7365 6c66 2e5f 6d79          self._my
-00041020: 4d65 6d6f 7279 203d 204d 794d 656d 6f72  Memory = MyMemor
-00041030: 7928 290d 0a20 2020 2020 2020 2073 656c  y()..        sel
-00041040: 662e 6d79 4d65 6d6f 7279 203d 2073 656c  f.myMemory = sel
-00041050: 662e 5f6d 794d 656d 6f72 792e 6d79 4d65  f._myMemory.myMe
-00041060: 6d6f 7279 5f61 7069 0d0a 2020 2020 2020  mory_api..      
-00041070: 2020 7365 6c66 2e5f 7061 7061 676f 203d    self._papago =
-00041080: 2050 6170 6167 6f28 290d 0a20 2020 2020   Papago()..     
-00041090: 2020 2073 656c 662e 7061 7061 676f 203d     self.papago =
-000410a0: 2073 656c 662e 5f70 6170 6167 6f2e 7061   self._papago.pa
-000410b0: 7061 676f 5f61 7069 0d0a 2020 2020 2020  pago_api..      
-000410c0: 2020 7365 6c66 2e5f 7171 4661 6e79 6920    self._qqFanyi 
-000410d0: 3d20 5151 4661 6e79 6928 290d 0a20 2020  = QQFanyi()..   
-000410e0: 2020 2020 2073 656c 662e 7171 4661 6e79       self.qqFany
-000410f0: 6920 3d20 7365 6c66 2e5f 7171 4661 6e79  i = self._qqFany
-00041100: 692e 7171 4661 6e79 695f 6170 690d 0a20  i.qqFanyi_api.. 
-00041110: 2020 2020 2020 2073 656c 662e 5f71 7154         self._qqT
-00041120: 7261 6e53 6d61 7274 203d 2051 5154 7261  ranSmart = QQTra
-00041130: 6e53 6d61 7274 2829 0d0a 2020 2020 2020  nSmart()..      
-00041140: 2020 7365 6c66 2e71 7154 7261 6e53 6d61    self.qqTranSma
-00041150: 7274 203d 2073 656c 662e 5f71 7154 7261  rt = self._qqTra
-00041160: 6e53 6d61 7274 2e71 7154 7261 6e53 6d61  nSmart.qqTranSma
-00041170: 7274 5f61 7069 0d0a 2020 2020 2020 2020  rt_api..        
-00041180: 7365 6c66 2e5f 7265 7665 7273 6f20 3d20  self._reverso = 
-00041190: 5265 7665 7273 6f28 290d 0a20 2020 2020  Reverso()..     
-000411a0: 2020 2073 656c 662e 7265 7665 7273 6f20     self.reverso 
-000411b0: 3d20 7365 6c66 2e5f 7265 7665 7273 6f2e  = self._reverso.
-000411c0: 7265 7665 7273 6f5f 6170 690d 0a20 2020  reverso_api..   
-000411d0: 2020 2020 2073 656c 662e 5f73 6f67 6f75       self._sogou
-000411e0: 203d 2053 6f67 6f75 2829 0d0a 2020 2020   = Sogou()..    
-000411f0: 2020 2020 7365 6c66 2e73 6f67 6f75 203d      self.sogou =
-00041200: 2073 656c 662e 5f73 6f67 6f75 2e73 6f67   self._sogou.sog
-00041210: 6f75 5f61 7069 0d0a 2020 2020 2020 2020  ou_api..        
-00041220: 7365 6c66 2e5f 7379 7354 7261 6e20 3d20  self._sysTran = 
-00041230: 5379 7354 7261 6e28 290d 0a20 2020 2020  SysTran()..     
-00041240: 2020 2073 656c 662e 7379 7354 7261 6e20     self.sysTran 
-00041250: 3d20 7365 6c66 2e5f 7379 7354 7261 6e2e  = self._sysTran.
-00041260: 7379 7354 7261 6e5f 6170 690d 0a20 2020  sysTran_api..   
-00041270: 2020 2020 2073 656c 662e 5f74 696c 6465       self._tilde
-00041280: 203d 2054 696c 6465 2829 0d0a 2020 2020   = Tilde()..    
-00041290: 2020 2020 7365 6c66 2e74 696c 6465 203d      self.tilde =
-000412a0: 2073 656c 662e 5f74 696c 6465 2e74 696c   self._tilde.til
-000412b0: 6465 5f61 7069 0d0a 2020 2020 2020 2020  de_api..        
-000412c0: 7365 6c66 2e5f 7472 616e 736c 6174 6543  self._translateC
-000412d0: 6f6d 203d 2054 7261 6e73 6c61 7465 436f  om = TranslateCo
-000412e0: 6d28 290d 0a20 2020 2020 2020 2073 656c  m()..        sel
-000412f0: 662e 7472 616e 736c 6174 6543 6f6d 203d  f.translateCom =
-00041300: 2073 656c 662e 5f74 7261 6e73 6c61 7465   self._translate
-00041310: 436f 6d2e 7472 616e 736c 6174 6543 6f6d  Com.translateCom
-00041320: 5f61 7069 0d0a 2020 2020 2020 2020 7365  _api..        se
-00041330: 6c66 2e5f 7472 616e 736c 6174 654d 6520  lf._translateMe 
-00041340: 3d20 5472 616e 736c 6174 654d 6528 290d  = TranslateMe().
-00041350: 0a20 2020 2020 2020 2073 656c 662e 7472  .        self.tr
-00041360: 616e 736c 6174 654d 6520 3d20 7365 6c66  anslateMe = self
-00041370: 2e5f 7472 616e 736c 6174 654d 652e 7472  ._translateMe.tr
-00041380: 616e 736c 6174 654d 655f 6170 690d 0a20  anslateMe_api.. 
-00041390: 2020 2020 2020 2073 656c 662e 5f75 7469         self._uti
-000413a0: 6265 7420 3d20 5574 6962 6574 2829 0d0a  bet = Utibet()..
-000413b0: 2020 2020 2020 2020 7365 6c66 2e75 7469          self.uti
-000413c0: 6265 7420 3d20 7365 6c66 2e5f 7574 6962  bet = self._utib
-000413d0: 6574 2e75 7469 6265 745f 6170 690d 0a20  et.utibet_api.. 
-000413e0: 2020 2020 2020 2073 656c 662e 5f76 6f6c         self._vol
-000413f0: 6345 6e67 696e 6520 3d20 566f 6c63 456e  cEngine = VolcEn
-00041400: 6769 6e65 2829 0d0a 2020 2020 2020 2020  gine()..        
-00041410: 7365 6c66 2e76 6f6c 6345 6e67 696e 6520  self.volcEngine 
-00041420: 3d20 7365 6c66 2e5f 766f 6c63 456e 6769  = self._volcEngi
-00041430: 6e65 2e76 6f6c 6345 6e67 696e 655f 6170  ne.volcEngine_ap
-00041440: 690d 0a20 2020 2020 2020 2073 656c 662e  i..        self.
-00041450: 5f79 616e 6465 7820 3d20 5961 6e64 6578  _yandex = Yandex
-00041460: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
-00041470: 2e79 616e 6465 7820 3d20 7365 6c66 2e5f  .yandex = self._
-00041480: 7961 6e64 6578 2e79 616e 6465 785f 6170  yandex.yandex_ap
-00041490: 690d 0a20 2020 2020 2020 2073 656c 662e  i..        self.
-000414a0: 5f79 6565 6b69 7420 3d20 5965 656b 6974  _yeekit = Yeekit
-000414b0: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
-000414c0: 2e79 6565 6b69 7420 3d20 7365 6c66 2e5f  .yeekit = self._
-000414d0: 7965 656b 6974 2e79 6565 6b69 745f 6170  yeekit.yeekit_ap
-000414e0: 690d 0a20 2020 2020 2020 2073 656c 662e  i..        self.
-000414f0: 5f79 6f75 6461 6f20 3d20 596f 7564 616f  _youdao = Youdao
-00041500: 5633 2829 0d0a 2020 2020 2020 2020 7365  V3()..        se
-00041510: 6c66 2e79 6f75 6461 6f20 3d20 7365 6c66  lf.youdao = self
-00041520: 2e5f 796f 7564 616f 2e79 6f75 6461 6f5f  ._youdao.youdao_
-00041530: 6170 690d 0a20 2020 2020 2020 2073 656c  api..        sel
-00041540: 662e 5f74 7261 6e73 6c61 746f 7273 5f64  f._translators_d
-00041550: 6963 7420 3d20 7b0d 0a20 2020 2020 2020  ict = {..       
-00041560: 2020 2020 2027 616c 6962 6162 6127 3a20       'alibaba': 
-00041570: 7365 6c66 2e5f 616c 6962 6162 612c 2027  self._alibaba, '
-00041580: 6170 6572 7469 756d 273a 2073 656c 662e  apertium': self.
-00041590: 5f61 7065 7274 6975 6d2c 2027 6172 676f  _apertium, 'argo
-000415a0: 7327 3a20 7365 6c66 2e5f 6172 676f 732c  s': self._argos,
-000415b0: 2027 6261 6964 7527 3a20 7365 6c66 2e5f   'baidu': self._
-000415c0: 6261 6964 752c 2027 6269 6e67 273a 2073  baidu, 'bing': s
-000415d0: 656c 662e 5f62 696e 672c 0d0a 2020 2020  elf._bing,..    
-000415e0: 2020 2020 2020 2020 2763 6169 7975 6e27          'caiyun'
-000415f0: 3a20 7365 6c66 2e5f 6361 6979 756e 2c20  : self._caiyun, 
-00041600: 2763 6c6f 7564 5969 273a 2073 656c 662e  'cloudYi': self.
-00041610: 5f63 6c6f 7564 5969 2c20 2764 6565 706c  _cloudYi, 'deepl
-00041620: 273a 2073 656c 662e 5f64 6565 706c 2c20  ': self._deepl, 
-00041630: 2765 6c69 6127 3a20 7365 6c66 2e5f 656c  'elia': self._el
-00041640: 6961 2c20 2767 6f6f 676c 6527 3a20 7365  ia, 'google': se
-00041650: 6c66 2e5f 676f 6f67 6c65 2c0d 0a20 2020  lf._google,..   
-00041660: 2020 2020 2020 2020 2027 6963 6962 6127           'iciba'
-00041670: 3a20 7365 6c66 2e5f 6963 6962 612c 2027  : self._iciba, '
-00041680: 6966 6c79 7465 6b27 3a20 7365 6c66 2e5f  iflytek': self._
-00041690: 6966 6c79 7465 6b2c 2027 6966 6c79 7265  iflytek, 'iflyre
-000416a0: 6327 3a20 7365 6c66 2e5f 6966 6c79 7265  c': self._iflyre
-000416b0: 632c 2027 6974 7261 6e73 6c61 7465 273a  c, 'itranslate':
-000416c0: 2073 656c 662e 5f69 7472 616e 736c 6174   self._itranslat
-000416d0: 652c 2027 6a75 6469 6327 3a20 7365 6c66  e, 'judic': self
-000416e0: 2e5f 6a75 6469 632c 0d0a 2020 2020 2020  ._judic,..      
-000416f0: 2020 2020 2020 276c 616e 6775 6167 6557        'languageW
-00041700: 6972 6527 3a20 7365 6c66 2e5f 6c61 6e67  ire': self._lang
-00041710: 7561 6765 5769 7265 2c20 276c 696e 6776  uageWire, 'lingv
-00041720: 616e 6578 273a 2073 656c 662e 5f6c 696e  anex': self._lin
-00041730: 6776 616e 6578 2c20 276e 6975 7472 616e  gvanex, 'niutran
-00041740: 7327 3a20 7365 6c66 2e5f 6e69 7574 7261  s': self._niutra
-00041750: 6e73 2c20 276d 676c 6970 273a 2073 656c  ns, 'mglip': sel
-00041760: 662e 5f6d 676c 6970 2c20 276d 6972 6169  f._mglip, 'mirai
-00041770: 273a 2073 656c 662e 5f6d 6972 6169 2c0d  ': self._mirai,.
-00041780: 0a20 2020 2020 2020 2020 2020 2027 6d6f  .            'mo
-00041790: 6465 726e 4d74 273a 2073 656c 662e 5f6d  dernMt': self._m
-000417a0: 6f64 6572 6e4d 742c 2027 6d79 4d65 6d6f  odernMt, 'myMemo
-000417b0: 7279 273a 2073 656c 662e 5f6d 794d 656d  ry': self._myMem
-000417c0: 6f72 792c 2027 7061 7061 676f 273a 2073  ory, 'papago': s
-000417d0: 656c 662e 5f70 6170 6167 6f2c 2027 7171  elf._papago, 'qq
-000417e0: 4661 6e79 6927 3a20 7365 6c66 2e5f 7171  Fanyi': self._qq
-000417f0: 4661 6e79 692c 2027 7171 5472 616e 536d  Fanyi, 'qqTranSm
-00041800: 6172 7427 3a20 7365 6c66 2e5f 7171 5472  art': self._qqTr
-00041810: 616e 536d 6172 742c 200d 0a20 2020 2020  anSmart, ..     
-00041820: 2020 2020 2020 2027 7265 7665 7273 6f27         'reverso'
-00041830: 3a20 7365 6c66 2e5f 7265 7665 7273 6f2c  : self._reverso,
-00041840: 2027 736f 676f 7527 3a20 7365 6c66 2e5f   'sogou': self._
-00041850: 736f 676f 752c 2027 7379 7354 7261 6e27  sogou, 'sysTran'
-00041860: 3a20 7365 6c66 2e5f 7379 7354 7261 6e2c  : self._sysTran,
-00041870: 2027 7469 6c64 6527 3a20 7365 6c66 2e5f   'tilde': self._
-00041880: 7469 6c64 652c 2027 7472 616e 736c 6174  tilde, 'translat
-00041890: 6543 6f6d 273a 2073 656c 662e 5f74 7261  eCom': self._tra
-000418a0: 6e73 6c61 7465 436f 6d2c 200d 0a20 2020  nslateCom, ..   
-000418b0: 2020 2020 2020 2020 2027 7472 616e 736c           'transl
-000418c0: 6174 654d 6527 3a20 7365 6c66 2e5f 7472  ateMe': self._tr
-000418d0: 616e 736c 6174 654d 652c 2027 7574 6962  anslateMe, 'utib
-000418e0: 6574 273a 2073 656c 662e 5f75 7469 6265  et': self._utibe
-000418f0: 742c 2027 766f 6c63 456e 6769 6e65 273a  t, 'volcEngine':
-00041900: 2073 656c 662e 5f76 6f6c 6345 6e67 696e   self._volcEngin
-00041910: 652c 2027 7961 6e64 6578 273a 2073 656c  e, 'yandex': sel
-00041920: 662e 5f79 616e 6465 782c 2027 7965 656b  f._yandex, 'yeek
-00041930: 6974 273a 2073 656c 662e 5f79 6565 6b69  it': self._yeeki
-00041940: 742c 200d 0a20 2020 2020 2020 2020 2020  t, ..           
-00041950: 2027 796f 7564 616f 273a 2073 656c 662e   'youdao': self.
-00041960: 5f79 6f75 6461 6f2c 0d0a 2020 2020 2020  _youdao,..      
-00041970: 2020 7d0d 0a20 2020 2020 2020 2073 656c    }..        sel
-00041980: 662e 7472 616e 736c 6174 6f72 735f 6469  f.translators_di
-00041990: 6374 203d 207b 0d0a 2020 2020 2020 2020  ct = {..        
-000419a0: 2020 2020 2761 6c69 6261 6261 273a 2073      'alibaba': s
-000419b0: 656c 662e 616c 6962 6162 612c 2027 6170  elf.alibaba, 'ap
-000419c0: 6572 7469 756d 273a 2073 656c 662e 6170  ertium': self.ap
-000419d0: 6572 7469 756d 2c20 2761 7267 6f73 273a  ertium, 'argos':
-000419e0: 2073 656c 662e 6172 676f 732c 2027 6261   self.argos, 'ba
-000419f0: 6964 7527 3a20 7365 6c66 2e62 6169 6475  idu': self.baidu
-00041a00: 2c20 2762 696e 6727 3a20 7365 6c66 2e62  , 'bing': self.b
-00041a10: 696e 672c 0d0a 2020 2020 2020 2020 2020  ing,..          
-00041a20: 2020 2763 6169 7975 6e27 3a20 7365 6c66    'caiyun': self
-00041a30: 2e63 6169 7975 6e2c 2027 636c 6f75 6459  .caiyun, 'cloudY
-00041a40: 6927 3a20 7365 6c66 2e63 6c6f 7564 5969  i': self.cloudYi
-00041a50: 2c20 2764 6565 706c 273a 2073 656c 662e  , 'deepl': self.
-00041a60: 6465 6570 6c2c 2027 656c 6961 273a 2073  deepl, 'elia': s
-00041a70: 656c 662e 656c 6961 2c20 2767 6f6f 676c  elf.elia, 'googl
-00041a80: 6527 3a20 7365 6c66 2e67 6f6f 676c 652c  e': self.google,
-00041a90: 0d0a 2020 2020 2020 2020 2020 2020 2769  ..            'i
-00041aa0: 6369 6261 273a 2073 656c 662e 6963 6962  ciba': self.icib
-00041ab0: 612c 2027 6966 6c79 7465 6b27 3a20 7365  a, 'iflytek': se
-00041ac0: 6c66 2e69 666c 7974 656b 2c20 2769 666c  lf.iflytek, 'ifl
-00041ad0: 7972 6563 273a 2073 656c 662e 6966 6c79  yrec': self.ifly
-00041ae0: 7265 632c 2027 6974 7261 6e73 6c61 7465  rec, 'itranslate
-00041af0: 273a 2073 656c 662e 6974 7261 6e73 6c61  ': self.itransla
-00041b00: 7465 2c20 276a 7564 6963 273a 2073 656c  te, 'judic': sel
-00041b10: 662e 6a75 6469 632c 0d0a 2020 2020 2020  f.judic,..      
-00041b20: 2020 2020 2020 276c 616e 6775 6167 6557        'languageW
-00041b30: 6972 6527 3a20 7365 6c66 2e6c 616e 6775  ire': self.langu
-00041b40: 6167 6557 6972 652c 2027 6c69 6e67 7661  ageWire, 'lingva
-00041b50: 6e65 7827 3a20 7365 6c66 2e6c 696e 6776  nex': self.lingv
-00041b60: 616e 6578 2c20 276e 6975 7472 616e 7327  anex, 'niutrans'
-00041b70: 3a20 7365 6c66 2e6e 6975 7472 616e 732c  : self.niutrans,
-00041b80: 2027 6d67 6c69 7027 3a20 7365 6c66 2e6d   'mglip': self.m
-00041b90: 676c 6970 2c20 276d 6972 6169 273a 2073  glip, 'mirai': s
-00041ba0: 656c 662e 6d69 7261 692c 0d0a 2020 2020  elf.mirai,..    
-00041bb0: 2020 2020 2020 2020 276d 6f64 6572 6e4d          'modernM
-00041bc0: 7427 3a20 7365 6c66 2e6d 6f64 6572 6e4d  t': self.modernM
-00041bd0: 742c 2027 6d79 4d65 6d6f 7279 273a 2073  t, 'myMemory': s
-00041be0: 656c 662e 6d79 4d65 6d6f 7279 2c20 2770  elf.myMemory, 'p
-00041bf0: 6170 6167 6f27 3a20 7365 6c66 2e70 6170  apago': self.pap
-00041c00: 6167 6f2c 2027 7171 4661 6e79 6927 3a20  ago, 'qqFanyi': 
-00041c10: 7365 6c66 2e71 7146 616e 7969 2c20 2771  self.qqFanyi, 'q
-00041c20: 7154 7261 6e53 6d61 7274 273a 2073 656c  qTranSmart': sel
-00041c30: 662e 7171 5472 616e 536d 6172 742c 0d0a  f.qqTranSmart,..
-00041c40: 2020 2020 2020 2020 2020 2020 2772 6576              'rev
-00041c50: 6572 736f 273a 2073 656c 662e 7265 7665  erso': self.reve
-00041c60: 7273 6f2c 2027 736f 676f 7527 3a20 7365  rso, 'sogou': se
-00041c70: 6c66 2e73 6f67 6f75 2c20 2773 7973 5472  lf.sogou, 'sysTr
-00041c80: 616e 273a 2073 656c 662e 7379 7354 7261  an': self.sysTra
-00041c90: 6e2c 2027 7469 6c64 6527 3a20 7365 6c66  n, 'tilde': self
-00041ca0: 2e74 696c 6465 2c20 2774 7261 6e73 6c61  .tilde, 'transla
-00041cb0: 7465 436f 6d27 3a20 7365 6c66 2e74 7261  teCom': self.tra
-00041cc0: 6e73 6c61 7465 436f 6d2c 0d0a 2020 2020  nslateCom,..    
-00041cd0: 2020 2020 2020 2020 2774 7261 6e73 6c61          'transla
-00041ce0: 7465 4d65 273a 2073 656c 662e 7472 616e  teMe': self.tran
-00041cf0: 736c 6174 654d 652c 2027 7574 6962 6574  slateMe, 'utibet
-00041d00: 273a 2073 656c 662e 7574 6962 6574 2c20  ': self.utibet, 
-00041d10: 2776 6f6c 6345 6e67 696e 6527 3a20 7365  'volcEngine': se
-00041d20: 6c66 2e76 6f6c 6345 6e67 696e 652c 2027  lf.volcEngine, '
-00041d30: 7961 6e64 6578 273a 2073 656c 662e 7961  yandex': self.ya
-00041d40: 6e64 6578 2c20 2779 6565 6b69 7427 3a20  ndex, 'yeekit': 
-00041d50: 7365 6c66 2e79 6565 6b69 742c 0d0a 2020  self.yeekit,..  
-00041d60: 2020 2020 2020 2020 2020 2779 6f75 6461            'youda
-00041d70: 6f27 3a20 7365 6c66 2e79 6f75 6461 6f2c  o': self.youdao,
-00041d80: 0d0a 2020 2020 2020 2020 7d0d 0a20 2020  ..        }..   
-00041d90: 2020 2020 2073 656c 662e 7472 616e 736c       self.transl
-00041da0: 6174 6f72 735f 706f 6f6c 203d 206c 6973  ators_pool = lis
-00041db0: 7428 7365 6c66 2e74 7261 6e73 6c61 746f  t(self.translato
-00041dc0: 7273 5f64 6963 742e 6b65 7973 2829 290d  rs_dict.keys()).
-00041dd0: 0a20 2020 2020 2020 2073 656c 662e 6e6f  .        self.no
-00041de0: 745f 656e 5f6c 616e 6773 203d 207b 2775  t_en_langs = {'u
-00041df0: 7469 6265 7427 3a20 2774 6927 2c20 276d  tibet': 'ti', 'm
-00041e00: 676c 6970 273a 2027 6d6f 6e27 7d0d 0a20  glip': 'mon'}.. 
-00041e10: 2020 2020 2020 2073 656c 662e 6e6f 745f         self.not_
-00041e20: 7a68 5f6c 616e 6773 203d 207b 276c 616e  zh_langs = {'lan
-00041e30: 6775 6167 6557 6972 6527 3a20 2766 7227  guageWire': 'fr'
-00041e40: 2c20 2774 696c 6465 273a 2027 6672 272c  , 'tilde': 'fr',
-00041e50: 2027 656c 6961 273a 2027 6672 272c 2027   'elia': 'fr', '
-00041e60: 6170 6572 7469 756d 273a 2027 7370 6127  apertium': 'spa'
-00041e70: 7d0d 0a20 2020 2020 2020 2073 656c 662e  }..        self.
-00041e80: 7072 655f 6163 6365 6c65 7261 7469 6f6e  pre_acceleration
-00041e90: 5f6c 6162 656c 203d 2030 0d0a 2020 2020  _label = 0..    
-00041ea0: 2020 2020 7365 6c66 2e65 7861 6d70 6c65      self.example
-00041eb0: 5f71 7565 7279 5f74 6578 7420 3d20 27e4  _query_text = '.
-00041ec0: bda0 e5a5 bde3 8082 5c6e e6ac a2e8 bf8e  ........\n......
-00041ed0: e4bd a0ef bc81 270d 0a20 2020 2020 2020  ......'..       
-00041ee0: 2073 656c 662e 7375 6363 6573 735f 7472   self.success_tr
-00041ef0: 616e 736c 6174 6f72 735f 706f 6f6c 203d  anslators_pool =
-00041f00: 205b 5d0d 0a20 2020 2020 2020 2073 656c   []..        sel
-00041f10: 662e 6661 696c 7572 655f 7472 616e 736c  f.failure_transl
-00041f20: 6174 6f72 735f 706f 6f6c 203d 205b 5d0d  ators_pool = [].
-00041f30: 0a0d 0a20 2020 2064 6566 2074 7261 6e73  ...    def trans
-00041f40: 6c61 7465 5f74 6578 7428 7365 6c66 2c0d  late_text(self,.
-00041f50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00041f60: 2020 2020 2020 2020 7175 6572 795f 7465          query_te
-00041f70: 7874 3a20 7374 722c 0d0a 2020 2020 2020  xt: str,..      
-00041f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041f90: 2074 7261 6e73 6c61 746f 723a 2073 7472   translator: str
-00041fa0: 203d 2027 6269 6e67 272c 0d0a 2020 2020   = 'bing',..    
-00041fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041fc0: 2020 2066 726f 6d5f 6c61 6e67 7561 6765     from_language
-00041fd0: 3a20 7374 7220 3d20 2761 7574 6f27 2c0d  : str = 'auto',.
-00041fe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00041ff0: 2020 2020 2020 2020 746f 5f6c 616e 6775          to_langu
-00042000: 6167 653a 2073 7472 203d 2027 656e 272c  age: str = 'en',
-00042010: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00042020: 2020 2020 2020 2020 2069 665f 7573 655f           if_use_
-00042030: 7072 6561 6363 656c 6572 6174 696f 6e3a  preacceleration:
-00042040: 2062 6f6f 6c20 3d20 4661 6c73 652c 0d0a   bool = False,..
-00042050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042060: 2020 2020 2020 202a 2a6b 7761 7267 733a         **kwargs:
-00042070: 2041 7069 4b77 6172 6773 5479 7065 2c0d   ApiKwargsType,.
-00042080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00042090: 2020 2020 2020 2020 2920 2d3e 2055 6e69          ) -> Uni
-000420a0: 6f6e 5b73 7472 2c20 6469 6374 5d3a 0d0a  on[str, dict]:..
-000420b0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-000420c0: 2020 2020 203a 7061 7261 6d20 7175 6572       :param quer
-000420d0: 795f 7465 7874 3a20 7374 722c 206d 7573  y_text: str, mus
-000420e0: 742e 0d0a 2020 2020 2020 2020 3a70 6172  t...        :par
-000420f0: 616d 2074 7261 6e73 6c61 746f 723a 2073  am translator: s
-00042100: 7472 2c20 6465 6661 756c 7420 2762 696e  tr, default 'bin
-00042110: 6727 2e0d 0a20 2020 2020 2020 203a 7061  g'...        :pa
-00042120: 7261 6d20 6672 6f6d 5f6c 616e 6775 6167  ram from_languag
-00042130: 653a 2073 7472 2c20 6465 6661 756c 7420  e: str, default 
-00042140: 2761 7574 6f27 2e0d 0a20 2020 2020 2020  'auto'...       
-00042150: 203a 7061 7261 6d20 746f 5f6c 616e 6775   :param to_langu
-00042160: 6167 653a 2073 7472 2c20 6465 6661 756c  age: str, defaul
-00042170: 7420 2765 6e27 2e0d 0a20 2020 2020 2020  t 'en'...       
-00042180: 203a 7061 7261 6d20 6966 5f75 7365 5f70   :param if_use_p
-00042190: 7265 6163 6365 6c65 7261 7469 6f6e 3a20  reacceleration: 
-000421a0: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
-000421b0: 6c73 652e 0d0a 2020 2020 2020 2020 3a70  lse...        :p
-000421c0: 6172 616d 202a 2a6b 7761 7267 733a 0d0a  aram **kwargs:..
-000421d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000421e0: 3a70 6172 616d 2069 735f 6465 7461 696c  :param is_detail
-000421f0: 5f72 6573 756c 743a 2062 6f6f 6c2c 2064  _result: bool, d
-00042200: 6566 6175 6c74 2046 616c 7365 2e0d 0a20  efault False... 
-00042210: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-00042220: 7061 7261 6d20 7072 6f66 6573 7369 6f6e  param profession
-00042230: 616c 5f66 6965 6c64 3a20 7374 722c 2073  al_field: str, s
-00042240: 7570 706f 7274 2061 6c69 6261 6261 2829  upport alibaba()
-00042250: 2c20 6261 6964 7528 292c 2063 6169 7975  , baidu(), caiyu
-00042260: 6e28 292c 2063 6c6f 7564 5969 2829 2c20  n(), cloudYi(), 
-00042270: 656c 6961 2829 2c20 7379 7354 7261 6e28  elia(), sysTran(
-00042280: 292c 2079 6f75 6461 6f28 292c 2076 6f6c  ), youdao(), vol
-00042290: 6345 6e67 696e 6528 2920 6f6e 6c79 2e0d  cEngine() only..
-000422a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000422b0: 203a 7061 7261 6d20 7469 6d65 6f75 743a   :param timeout:
-000422c0: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
-000422d0: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
-000422e0: 2020 2020 2020 203a 7061 7261 6d20 7072         :param pr
-000422f0: 6f78 6965 733a 2064 6963 742c 2064 6566  oxies: dict, def
-00042300: 6175 6c74 204e 6f6e 652e 0d0a 2020 2020  ault None...    
-00042310: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00042320: 616d 2073 6c65 6570 5f73 6563 6f6e 6473  am sleep_seconds
-00042330: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
-00042340: 2030 2e0d 0a20 2020 2020 2020 2020 2020   0...           
-00042350: 2020 2020 203a 7061 7261 6d20 7570 6461       :param upda
-00042360: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
-00042370: 5f66 7265 713a 2069 6e74 2c20 6465 6661  _freq: int, defa
-00042380: 756c 7420 3130 3030 2e0d 0a20 2020 2020  ult 1000...     
-00042390: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-000423a0: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
-000423b0: 5f61 6674 6572 5f73 6563 6f6e 6473 3a20  _after_seconds: 
-000423c0: 666c 6f61 742c 2064 6566 6175 6c74 2031  float, default 1
-000423d0: 3530 302e 0d0a 2020 2020 2020 2020 2020  500...          
-000423e0: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
-000423f0: 7573 655f 636e 5f68 6f73 743a 2062 6f6f  use_cn_host: boo
-00042400: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
-00042410: 2e20 5375 7070 6f72 7420 676f 6f67 6c65  . Support google
-00042420: 2829 2c20 6269 6e67 2829 206f 6e6c 792e  (), bing() only.
-00042430: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00042440: 2020 3a70 6172 616d 2072 6573 6574 5f68    :param reset_h
-00042450: 6f73 745f 7572 6c3a 2073 7472 2c20 6465  ost_url: str, de
-00042460: 6661 756c 7420 4e6f 6e65 2e20 5375 7070  fault None. Supp
-00042470: 6f72 7420 676f 6f67 6c65 2829 2c20 6172  ort google(), ar
-00042480: 676f 7328 292c 2079 616e 6465 7828 2920  gos(), yandex() 
-00042490: 6f6e 6c79 2e0d 0a20 2020 2020 2020 2020  only...         
-000424a0: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
-000424b0: 5f63 6865 636b 5f72 6573 6574 5f68 6f73  _check_reset_hos
-000424c0: 745f 7572 6c3a 2062 6f6f 6c2c 2064 6566  t_url: bool, def
-000424d0: 6175 6c74 2054 7275 652e 2053 7570 706f  ault True. Suppo
-000424e0: 7274 2067 6f6f 676c 6528 292c 2079 616e  rt google(), yan
-000424f0: 6465 7828 2920 6f6e 6c79 2e0d 0a20 2020  dex() only...   
-00042500: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
-00042510: 7261 6d20 6966 5f69 676e 6f72 655f 656d  ram if_ignore_em
-00042520: 7074 795f 7175 6572 793a 2062 6f6f 6c2c  pty_query: bool,
-00042530: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
-00042540: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00042550: 203a 7061 7261 6d20 6966 5f69 676e 6f72   :param if_ignor
-00042560: 655f 6c69 6d69 745f 6f66 5f6c 656e 6774  e_limit_of_lengt
-00042570: 683a 2062 6f6f 6c2c 2064 6566 6175 6c74  h: bool, default
-00042580: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
-00042590: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-000425a0: 6c69 6d69 745f 6f66 5f6c 656e 6774 683a  limit_of_length:
-000425b0: 2069 6e74 2c20 6465 6661 756c 7420 3230   int, default 20
-000425c0: 3030 302e 0d0a 2020 2020 2020 2020 2020  000...          
-000425d0: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
-000425e0: 7368 6f77 5f74 696d 655f 7374 6174 3a20  show_time_stat: 
-000425f0: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
-00042600: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
-00042610: 2020 2020 2020 3a70 6172 616d 2073 686f        :param sho
-00042620: 775f 7469 6d65 5f73 7461 745f 7072 6563  w_time_stat_prec
-00042630: 6973 696f 6e3a 2069 6e74 2c20 6465 6661  ision: int, defa
-00042640: 756c 7420 322e 0d0a 2020 2020 2020 2020  ult 2...        
-00042650: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-00042660: 665f 7072 696e 745f 7761 726e 696e 673a  f_print_warning:
-00042670: 2062 6f6f 6c2c 2064 6566 6175 6c74 2054   bool, default T
-00042680: 7275 652e 0d0a 2020 2020 2020 2020 2020  rue...          
-00042690: 2020 2020 2020 3a70 6172 616d 206c 696e        :param lin
-000426a0: 6776 616e 6578 5f6d 6f64 656c 3a20 7374  gvanex_model: st
-000426b0: 722c 2064 6566 6175 6c74 2027 4232 4327  r, default 'B2C'
-000426c0: 2c20 6368 6f6f 7365 2066 726f 6d20 2822  , choose from ("
-000426d0: 4232 4322 2c20 2242 3242 2229 2e0d 0a20  B2C", "B2B")... 
-000426e0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-000426f0: 7061 7261 6d20 6d79 4d65 6d6f 7279 5f6d  param myMemory_m
-00042700: 6f64 653a 2073 7472 2c20 6465 6661 756c  ode: str, defaul
-00042710: 7420 2277 6562 222c 2063 686f 6f73 6520  t "web", choose 
-00042720: 6672 6f6d 2028 2277 6562 222c 2022 6170  from ("web", "ap
-00042730: 6922 292e 0d0a 2020 2020 2020 2020 3a72  i")...        :r
-00042740: 6574 7572 6e3a 2073 7472 206f 7220 6469  eturn: str or di
-00042750: 6374 0d0a 2020 2020 2020 2020 2222 220d  ct..        """.
-00042760: 0a0d 0a20 2020 2020 2020 2069 6620 7472  ...        if tr
-00042770: 616e 736c 6174 6f72 206e 6f74 2069 6e20  anslator not in 
-00042780: 7365 6c66 2e74 7261 6e73 6c61 746f 7273  self.translators
-00042790: 5f70 6f6f 6c3a 0d0a 2020 2020 2020 2020  _pool:..        
-000427a0: 2020 2020 7261 6973 6520 5472 616e 736c      raise Transl
-000427b0: 6174 6f72 4572 726f 720d 0a0d 0a20 2020  atorError....   
-000427c0: 2020 2020 2069 6620 6e6f 7420 7365 6c66       if not self
-000427d0: 2e70 7265 5f61 6363 656c 6572 6174 696f  .pre_acceleratio
-000427e0: 6e5f 6c61 6265 6c20 616e 6420 6966 5f75  n_label and if_u
-000427f0: 7365 5f70 7265 6163 6365 6c65 7261 7469  se_preaccelerati
-00042800: 6f6e 3a0d 0a20 2020 2020 2020 2020 2020  on:..           
-00042810: 205f 203d 2073 656c 662e 7072 6561 6363   _ = self.preacc
-00042820: 656c 6572 6174 6528 290d 0a0d 0a20 2020  elerate()....   
-00042830: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00042840: 2e74 7261 6e73 6c61 746f 7273 5f64 6963  .translators_dic
-00042850: 745b 7472 616e 736c 6174 6f72 5d28 7175  t[translator](qu
-00042860: 6572 795f 7465 7874 3d71 7565 7279 5f74  ery_text=query_t
-00042870: 6578 742c 2066 726f 6d5f 6c61 6e67 7561  ext, from_langua
-00042880: 6765 3d66 726f 6d5f 6c61 6e67 7561 6765  ge=from_language
-00042890: 2c20 746f 5f6c 616e 6775 6167 653d 746f  , to_language=to
-000428a0: 5f6c 616e 6775 6167 652c 202a 2a6b 7761  _language, **kwa
-000428b0: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
-000428c0: 7472 616e 736c 6174 655f 6874 6d6c 2873  translate_html(s
-000428d0: 656c 662c 0d0a 2020 2020 2020 2020 2020  elf,..          
-000428e0: 2020 2020 2020 2020 2020 2020 2068 746d               htm
-000428f0: 6c5f 7465 7874 3a20 7374 722c 0d0a 2020  l_text: str,..  
-00042900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042910: 2020 2020 2074 7261 6e73 6c61 746f 723a       translator:
-00042920: 2073 7472 203d 2027 6269 6e67 272c 0d0a   str = 'bing',..
-00042930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042940: 2020 2020 2020 2066 726f 6d5f 6c61 6e67         from_lang
-00042950: 7561 6765 3a20 7374 7220 3d20 2761 7574  uage: str = 'aut
-00042960: 6f27 2c0d 0a20 2020 2020 2020 2020 2020  o',..           
-00042970: 2020 2020 2020 2020 2020 2020 746f 5f6c              to_l
-00042980: 616e 6775 6167 653a 2073 7472 203d 2027  anguage: str = '
-00042990: 656e 272c 0d0a 2020 2020 2020 2020 2020  en',..          
-000429a0: 2020 2020 2020 2020 2020 2020 206e 5f6a               n_j
-000429b0: 6f62 733a 2069 6e74 203d 202d 312c 0d0a  obs: int = -1,..
-000429c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000429d0: 2020 2020 2020 2069 665f 7573 655f 7072         if_use_pr
-000429e0: 6561 6363 656c 6572 6174 696f 6e3a 2062  eacceleration: b
-000429f0: 6f6f 6c20 3d20 4661 6c73 652c 0d0a 2020  ool = False,..  
-00042a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042a10: 2020 2020 202a 2a6b 7761 7267 733a 2041       **kwargs: A
-00042a20: 7069 4b77 6172 6773 5479 7065 2c0d 0a20  piKwargsType,.. 
-00042a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042a40: 2020 2020 2020 2920 2d3e 2073 7472 3a0d        ) -> str:.
-00042a50: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00042a60: 2020 2020 2020 5472 616e 736c 6174 6520        Translate 
-00042a70: 7468 6520 6469 7370 6c61 7965 6420 636f  the displayed co
-00042a80: 6e74 656e 7420 6f66 2068 746d 6c20 7769  ntent of html wi
-00042a90: 7468 6f75 7420 6368 616e 6769 6e67 2074  thout changing t
-00042aa0: 6865 2068 746d 6c20 7374 7275 6374 7572  he html structur
-00042ab0: 652e 0d0a 2020 2020 2020 2020 3a70 6172  e...        :par
-00042ac0: 616d 2068 746d 6c5f 7465 7874 3a20 7374  am html_text: st
-00042ad0: 722c 206d 7573 742e 0d0a 2020 2020 2020  r, must...      
-00042ae0: 2020 3a70 6172 616d 2074 7261 6e73 6c61    :param transla
-00042af0: 746f 723a 2073 7472 2c20 6465 6661 756c  tor: str, defaul
-00042b00: 7420 2762 696e 6727 2e0d 0a20 2020 2020  t 'bing'...     
-00042b10: 2020 203a 7061 7261 6d20 6672 6f6d 5f6c     :param from_l
-00042b20: 616e 6775 6167 653a 2073 7472 2c20 6465  anguage: str, de
-00042b30: 6661 756c 7420 2761 7574 6f27 2e0d 0a20  fault 'auto'... 
-00042b40: 2020 2020 2020 203a 7061 7261 6d20 746f         :param to
-00042b50: 5f6c 616e 6775 6167 653a 2073 7472 2c20  _language: str, 
-00042b60: 6465 6661 756c 7420 2765 6e27 2e0d 0a20  default 'en'... 
-00042b70: 2020 2020 2020 203a 7061 7261 6d20 6e5f         :param n_
-00042b80: 6a6f 6273 3a20 696e 742c 2064 6566 6175  jobs: int, defau
-00042b90: 6c74 202d 312c 206d 6561 6e73 206f 732e  lt -1, means os.
-00042ba0: 6370 755f 636e 7428 292e 0d0a 2020 2020  cpu_cnt()...    
-00042bb0: 2020 2020 3a70 6172 616d 2069 665f 7573      :param if_us
-00042bc0: 655f 7072 6561 6363 656c 6572 6174 696f  e_preacceleratio
-00042bd0: 6e3a 2062 6f6f 6c2c 2064 6566 6175 6c74  n: bool, default
-00042be0: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
-00042bf0: 203a 7061 7261 6d20 2a2a 6b77 6172 6773   :param **kwargs
-00042c00: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00042c10: 2020 203a 7061 7261 6d20 6973 5f64 6574     :param is_det
-00042c20: 6169 6c5f 7265 7375 6c74 3a20 626f 6f6c  ail_result: bool
-00042c30: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
-00042c40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00042c50: 2020 3a70 6172 616d 2070 726f 6665 7373    :param profess
-00042c60: 696f 6e61 6c5f 6669 656c 643a 2073 7472  ional_field: str
-00042c70: 2c20 7375 7070 6f72 7420 616c 6962 6162  , support alibab
-00042c80: 6128 292c 2062 6169 6475 2829 2c20 6361  a(), baidu(), ca
-00042c90: 6979 756e 2829 2c20 636c 6f75 6459 6928  iyun(), cloudYi(
-00042ca0: 292c 2065 6c69 6128 292c 2073 7973 5472  ), elia(), sysTr
-00042cb0: 616e 2829 2c20 796f 7564 616f 2829 2c20  an(), youdao(), 
-00042cc0: 766f 6c63 456e 6769 6e65 2829 206f 6e6c  volcEngine() onl
-00042cd0: 792e 0d0a 2020 2020 2020 2020 2020 2020  y...            
-00042ce0: 2020 2020 3a70 6172 616d 2074 696d 656f      :param timeo
-00042cf0: 7574 3a20 666c 6f61 742c 2064 6566 6175  ut: float, defau
-00042d00: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
-00042d10: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00042d20: 2070 726f 7869 6573 3a20 6469 6374 2c20   proxies: dict, 
-00042d30: 6465 6661 756c 7420 4e6f 6e65 2e0d 0a20  default None... 
-00042d40: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-00042d50: 7061 7261 6d20 736c 6565 705f 7365 636f  param sleep_seco
-00042d60: 6e64 733a 2066 6c6f 6174 2c20 6465 6661  nds: float, defa
-00042d70: 756c 7420 302e 0d0a 2020 2020 2020 2020  ult 0...        
-00042d80: 2020 2020 2020 2020 3a70 6172 616d 2075          :param u
-00042d90: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
-00042da0: 7465 725f 6672 6571 3a20 696e 742c 2064  ter_freq: int, d
-00042db0: 6566 6175 6c74 2031 3030 302e 0d0a 2020  efault 1000...  
-00042dc0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
-00042dd0: 6172 616d 2075 7064 6174 655f 7365 7373  aram update_sess
-00042de0: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
-00042df0: 733a 2066 6c6f 6174 2c20 6465 6661 756c  s: float, defaul
-00042e00: 7420 3135 3030 2e0d 0a20 2020 2020 2020  t 1500...       
-00042e10: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00042e20: 6966 5f75 7365 5f63 6e5f 686f 7374 3a20  if_use_cn_host: 
-00042e30: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
-00042e40: 6c73 652e 2053 7570 706f 7274 2067 6f6f  lse. Support goo
-00042e50: 676c 6528 292c 2062 696e 6728 2920 6f6e  gle(), bing() on
-00042e60: 6c79 2e0d 0a20 2020 2020 2020 2020 2020  ly...           
-00042e70: 2020 2020 203a 7061 7261 6d20 7265 7365       :param rese
-00042e80: 745f 686f 7374 5f75 726c 3a20 7374 722c  t_host_url: str,
-00042e90: 2064 6566 6175 6c74 204e 6f6e 652e 2053   default None. S
-00042ea0: 7570 706f 7274 2067 6f6f 676c 6528 292c  upport google(),
-00042eb0: 2061 7267 6f73 2829 2c20 7961 6e64 6578   argos(), yandex
-00042ec0: 2829 206f 6e6c 792e 0d0a 2020 2020 2020  () only...      
-00042ed0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
-00042ee0: 2069 665f 6368 6563 6b5f 7265 7365 745f   if_check_reset_
-00042ef0: 686f 7374 5f75 726c 3a20 626f 6f6c 2c20  host_url: bool, 
-00042f00: 6465 6661 756c 7420 5472 7565 2e20 5375  default True. Su
-00042f10: 7070 6f72 7420 676f 6f67 6c65 2829 2c20  pport google(), 
-00042f20: 7961 6e64 6578 2829 206f 6e6c 792e 0d0a  yandex() only...
-00042f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042f40: 3a70 6172 616d 2069 665f 6967 6e6f 7265  :param if_ignore
-00042f50: 5f65 6d70 7479 5f71 7565 7279 3a20 626f  _empty_query: bo
-00042f60: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
-00042f70: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-00042f80: 2020 2020 3a70 6172 616d 2069 665f 6967      :param if_ig
-00042f90: 6e6f 7265 5f6c 696d 6974 5f6f 665f 6c65  nore_limit_of_le
-00042fa0: 6e67 7468 3a20 626f 6f6c 2c20 6465 6661  ngth: bool, defa
-00042fb0: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
-00042fc0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
-00042fd0: 616d 206c 696d 6974 5f6f 665f 6c65 6e67  am limit_of_leng
-00042fe0: 7468 3a20 696e 742c 2064 6566 6175 6c74  th: int, default
-00042ff0: 2032 3030 3030 2e0d 0a20 2020 2020 2020   20000...       
-00043000: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00043010: 6966 5f73 686f 775f 7469 6d65 5f73 7461  if_show_time_sta
-00043020: 743a 2062 6f6f 6c2c 2064 6566 6175 6c74  t: bool, default
-00043030: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
-00043040: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-00043050: 7368 6f77 5f74 696d 655f 7374 6174 5f70  show_time_stat_p
-00043060: 7265 6369 7369 6f6e 3a20 696e 742c 2064  recision: int, d
-00043070: 6566 6175 6c74 2032 2e0d 0a20 2020 2020  efault 2...     
-00043080: 2020 2020 2020 2020 2020 203a 7061 7261             :para
-00043090: 6d20 6966 5f70 7269 6e74 5f77 6172 6e69  m if_print_warni
-000430a0: 6e67 3a20 626f 6f6c 2c20 6465 6661 756c  ng: bool, defaul
-000430b0: 7420 5472 7565 2e0d 0a20 2020 2020 2020  t True...       
-000430c0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
-000430d0: 6c69 6e67 7661 6e65 785f 6d6f 6465 6c3a  lingvanex_model:
-000430e0: 2073 7472 2c20 6465 6661 756c 7420 2742   str, default 'B
-000430f0: 3243 272c 2063 686f 6f73 6520 6672 6f6d  2C', choose from
-00043100: 2028 2242 3243 222c 2022 4232 4222 292e   ("B2C", "B2B").
-00043110: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00043120: 2020 3a70 6172 616d 206d 794d 656d 6f72    :param myMemor
-00043130: 795f 6d6f 6465 3a20 7374 722c 2064 6566  y_mode: str, def
-00043140: 6175 6c74 2022 7765 6222 2c20 6368 6f6f  ault "web", choo
-00043150: 7365 2066 726f 6d20 2822 7765 6222 2c20  se from ("web", 
-00043160: 2261 7069 2229 2e0d 0a20 2020 2020 2020  "api")...       
-00043170: 203a 7265 7475 726e 3a20 7374 720d 0a20   :return: str.. 
-00043180: 2020 2020 2020 2022 2222 0d0a 0d0a 2020         """....  
-00043190: 2020 2020 2020 6966 2074 7261 6e73 6c61        if transla
-000431a0: 746f 7220 6e6f 7420 696e 2073 656c 662e  tor not in self.
-000431b0: 7472 616e 736c 6174 6f72 735f 706f 6f6c  translators_pool
-000431c0: 206f 7220 6b77 6172 6773 2e67 6574 2827   or kwargs.get('
-000431d0: 6973 5f64 6574 6169 6c5f 7265 7375 6c74  is_detail_result
-000431e0: 272c 2046 616c 7365 2920 6f72 206e 5f6a  ', False) or n_j
-000431f0: 6f62 7320 3e20 7365 6c66 2e63 7075 5f63  obs > self.cpu_c
-00043200: 6e74 3a0d 0a20 2020 2020 2020 2020 2020  nt:..           
-00043210: 2072 6169 7365 2054 7261 6e73 6c61 746f   raise Translato
-00043220: 7245 7272 6f72 0d0a 0d0a 2020 2020 2020  rError....      
-00043230: 2020 6966 206e 6f74 2073 656c 662e 7072    if not self.pr
-00043240: 655f 6163 6365 6c65 7261 7469 6f6e 5f6c  e_acceleration_l
-00043250: 6162 656c 2061 6e64 2069 665f 7573 655f  abel and if_use_
-00043260: 7072 6561 6363 656c 6572 6174 696f 6e3a  preacceleration:
-00043270: 0d0a 2020 2020 2020 2020 2020 2020 5f20  ..            _ 
-00043280: 3d20 7365 6c66 2e70 7265 6163 6365 6c65  = self.preaccele
-00043290: 7261 7465 2829 0d0a 0d0a 2020 2020 2020  rate()....      
-000432a0: 2020 6465 6620 5f74 7261 6e73 6c61 7465    def _translate
-000432b0: 5f74 6578 7428 7365 6e74 656e 6365 3a20  _text(sentence: 
-000432c0: 7374 7229 202d 3e20 5475 706c 655b 7374  str) -> Tuple[st
-000432d0: 722c 2073 7472 5d3a 0d0a 2020 2020 2020  r, str]:..      
-000432e0: 2020 2020 2020 7265 7475 726e 2073 656e        return sen
-000432f0: 7465 6e63 652c 2073 656c 662e 7472 616e  tence, self.tran
-00043300: 736c 6174 6f72 735f 6469 6374 5b74 7261  slators_dict[tra
-00043310: 6e73 6c61 746f 725d 2871 7565 7279 5f74  nslator](query_t
-00043320: 6578 743d 7365 6e74 656e 6365 2c20 6672  ext=sentence, fr
-00043330: 6f6d 5f6c 616e 6775 6167 653d 6672 6f6d  om_language=from
-00043340: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
-00043350: 6e67 7561 6765 3d74 6f5f 6c61 6e67 7561  nguage=to_langua
-00043360: 6765 2c20 2a2a 6b77 6172 6773 290d 0a0d  ge, **kwargs)...
-00043370: 0a20 2020 2020 2020 2070 6174 7465 726e  .        pattern
-00043380: 203d 2072 652e 636f 6d70 696c 6528 2228   = re.compile("(
-00043390: 3f3a 5e7c 283f 3c3d 3e29 2928 5b5c 5c73  ?:^|(?<=>))([\\s
-000433a0: 5c5c 535d 2a3f 2928 3f3a 283f 3d3c 297c  \\S]*?)(?:(?=<)|
-000433b0: 2429 2229 2020 2320 544f 444f 3a20 3c63  $)")  # TODO: <c
-000433c0: 6f64 653e 3c2f 636f 6465 3e20 3c64 6976  ode></code> <div
-000433d0: 2063 6c61 7373 3d22 636f 6465 7465 7874   class="codetext
-000433e0: 206e 6f74 7261 6e73 6c61 7465 223e 0d0a   notranslate">..
-000433f0: 2020 2020 2020 2020 7365 6e74 656e 6365          sentence
-00043400: 5f6c 6973 7420 3d20 6c69 7374 2873 6574  _list = list(set
-00043410: 2870 6174 7465 726e 2e66 696e 6461 6c6c  (pattern.findall
-00043420: 2868 746d 6c5f 7465 7874 2929 290d 0a0d  (html_text)))...
-00043430: 0a20 2020 2020 2020 206e 5f6a 6f62 7320  .        n_jobs 
-00043440: 3d20 7365 6c66 2e63 7075 5f63 6e74 2069  = self.cpu_cnt i
-00043450: 6620 6e5f 6a6f 6273 203c 3d20 3020 656c  f n_jobs <= 0 el
-00043460: 7365 206e 5f6a 6f62 730d 0a20 2020 2020  se n_jobs..     
-00043470: 2020 2077 6974 6820 7061 7468 6f73 2e6d     with pathos.m
-00043480: 756c 7469 7072 6f63 6573 7369 6e67 2e50  ultiprocessing.P
-00043490: 726f 6365 7373 506f 6f6c 286e 5f6a 6f62  rocessPool(n_job
-000434a0: 7329 2061 7320 706f 6f6c 3a0d 0a20 2020  s) as pool:..   
-000434b0: 2020 2020 2020 2020 2072 6573 756c 745f           result_
-000434c0: 6c69 7374 203d 2070 6f6f 6c2e 6d61 7028  list = pool.map(
-000434d0: 5f74 7261 6e73 6c61 7465 5f74 6578 742c  _translate_text,
-000434e0: 2073 656e 7465 6e63 655f 6c69 7374 290d   sentence_list).
-000434f0: 0a0d 0a20 2020 2020 2020 2072 6573 756c  ...        resul
-00043500: 745f 6469 6374 203d 207b 7465 7874 3a20  t_dict = {text: 
-00043510: 7473 5f74 6578 7420 666f 7220 7465 7874  ts_text for text
-00043520: 2c20 7473 5f74 6578 7420 696e 2072 6573  , ts_text in res
-00043530: 756c 745f 6c69 7374 7d0d 0a20 2020 2020  ult_list}..     
-00043540: 2020 205f 6765 745f 7265 7375 6c74 5f66     _get_result_f
-00043550: 756e 6320 3d20 6c61 6d62 6461 206b 3a20  unc = lambda k: 
-00043560: 7265 7375 6c74 5f64 6963 742e 6765 7428  result_dict.get(
-00043570: 6b2e 6772 6f75 7028 3129 2c20 2727 290d  k.group(1), '').
-00043580: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00043590: 7061 7474 6572 6e2e 7375 6228 7265 706c  pattern.sub(repl
-000435a0: 3d5f 6765 745f 7265 7375 6c74 5f66 756e  =_get_result_fun
-000435b0: 632c 2073 7472 696e 673d 6874 6d6c 5f74  c, string=html_t
-000435c0: 6578 7429 0d0a 0d0a 2020 2020 6465 6620  ext)....    def 
-000435d0: 5f74 6573 745f 7472 616e 736c 6174 6528  _test_translate(
-000435e0: 7365 6c66 2c20 5f74 733a 2073 7472 2c20  self, _ts: str, 
-000435f0: 7469 6d65 6f75 743a 204f 7074 696f 6e61  timeout: Optiona
-00043600: 6c5b 666c 6f61 745d 203d 204e 6f6e 652c  l[float] = None,
-00043610: 2069 665f 7368 6f77 5f74 696d 655f 7374   if_show_time_st
-00043620: 6174 3a20 626f 6f6c 203d 2046 616c 7365  at: bool = False
-00043630: 2920 2d3e 2073 7472 3a0d 0a20 2020 2020  ) -> str:..     
-00043640: 2020 2066 726f 6d5f 6c61 6e67 7561 6765     from_language
-00043650: 203d 2073 656c 662e 6e6f 745f 7a68 5f6c   = self.not_zh_l
-00043660: 616e 6773 5b5f 7473 5d20 6966 205f 7473  angs[_ts] if _ts
-00043670: 2069 6e20 7365 6c66 2e6e 6f74 5f7a 685f   in self.not_zh_
-00043680: 6c61 6e67 7320 656c 7365 2027 6175 746f  langs else 'auto
-00043690: 270d 0a20 2020 2020 2020 2074 6f5f 6c61  '..        to_la
-000436a0: 6e67 7561 6765 203d 2073 656c 662e 6e6f  nguage = self.no
-000436b0: 745f 656e 5f6c 616e 6773 5b5f 7473 5d20  t_en_langs[_ts] 
-000436c0: 6966 205f 7473 2069 6e20 7365 6c66 2e6e  if _ts in self.n
-000436d0: 6f74 5f65 6e5f 6c61 6e67 7320 656c 7365  ot_en_langs else
-000436e0: 2027 656e 270d 0a20 2020 2020 2020 2072   'en'..        r
-000436f0: 6573 756c 7420 3d20 7365 6c66 2e74 7261  esult = self.tra
-00043700: 6e73 6c61 746f 7273 5f64 6963 745b 5f74  nslators_dict[_t
-00043710: 735d 280d 0a20 2020 2020 2020 2020 2020  s](..           
-00043720: 2071 7565 7279 5f74 6578 743d 7365 6c66   query_text=self
-00043730: 2e65 7861 6d70 6c65 5f71 7565 7279 5f74  .example_query_t
-00043740: 6578 742c 0d0a 2020 2020 2020 2020 2020  ext,..          
-00043750: 2020 7472 616e 736c 6174 6f72 3d5f 7473    translator=_ts
-00043760: 2c0d 0a20 2020 2020 2020 2020 2020 2066  ,..            f
-00043770: 726f 6d5f 6c61 6e67 7561 6765 3d66 726f  rom_language=fro
-00043780: 6d5f 6c61 6e67 7561 6765 2c0d 0a20 2020  m_language,..   
-00043790: 2020 2020 2020 2020 2074 6f5f 6c61 6e67           to_lang
-000437a0: 7561 6765 3d74 6f5f 6c61 6e67 7561 6765  uage=to_language
-000437b0: 2c0d 0a20 2020 2020 2020 2020 2020 2069  ,..            i
-000437c0: 665f 7072 696e 745f 7761 726e 696e 673d  f_print_warning=
-000437d0: 4661 6c73 652c 0d0a 2020 2020 2020 2020  False,..        
-000437e0: 2020 2020 7469 6d65 6f75 743d 7469 6d65      timeout=time
-000437f0: 6f75 742c 0d0a 2020 2020 2020 2020 2020  out,..          
-00043800: 2020 6966 5f73 686f 775f 7469 6d65 5f73    if_show_time_s
-00043810: 7461 743d 6966 5f73 686f 775f 7469 6d65  tat=if_show_time
-00043820: 5f73 7461 740d 0a20 2020 2020 2020 2029  _stat..        )
-00043830: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00043840: 2072 6573 756c 740d 0a20 2020 200d 0a20   result..    .. 
-00043850: 2020 2064 6566 2067 6574 5f6c 616e 6775     def get_langu
-00043860: 6167 6573 2873 656c 662c 2074 7261 6e73  ages(self, trans
-00043870: 6c61 746f 723a 2073 7472 203d 2027 6269  lator: str = 'bi
-00043880: 6e67 2729 3a0d 0a20 2020 2020 2020 206c  ng'):..        l
-00043890: 616e 6775 6167 655f 6d61 7020 3d20 7365  anguage_map = se
-000438a0: 6c66 2e5f 7472 616e 736c 6174 6f72 735f  lf._translators_
-000438b0: 6469 6374 5b74 7261 6e73 6c61 746f 725d  dict[translator]
-000438c0: 2e6c 616e 6775 6167 655f 6d61 700d 0a20  .language_map.. 
-000438d0: 2020 2020 2020 2069 6620 6c61 6e67 7561         if langua
-000438e0: 6765 5f6d 6170 3a0d 0a20 2020 2020 2020  ge_map:..       
-000438f0: 2020 2020 2072 6574 7572 6e20 6c61 6e67       return lang
-00043900: 7561 6765 5f6d 6170 0d0a 0d0a 2020 2020  uage_map....    
-00043910: 2020 2020 5f20 3d20 7365 6c66 2e5f 7465      _ = self._te
-00043920: 7374 5f74 7261 6e73 6c61 7465 285f 7473  st_translate(_ts
-00043930: 3d74 7261 6e73 6c61 746f 7229 0d0a 2020  =translator)..  
-00043940: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00043950: 662e 5f74 7261 6e73 6c61 746f 7273 5f64  f._translators_d
-00043960: 6963 745b 7472 616e 736c 6174 6f72 5d2e  ict[translator].
-00043970: 6c61 6e67 7561 6765 5f6d 6170 0d0a 0d0a  language_map....
-00043980: 2020 2020 6465 6620 7072 6561 6363 656c      def preaccel
-00043990: 6572 6174 6528 7365 6c66 2c20 7469 6d65  erate(self, time
-000439a0: 6f75 743a 204f 7074 696f 6e61 6c5b 666c  out: Optional[fl
-000439b0: 6f61 745d 203d 204e 6f6e 652c 2069 665f  oat] = None, if_
-000439c0: 7368 6f77 5f74 696d 655f 7374 6174 3a20  show_time_stat: 
-000439d0: 626f 6f6c 203d 2054 7275 652c 202a 2a6b  bool = True, **k
-000439e0: 7761 7267 733a 2073 7472 2920 2d3e 2064  wargs: str) -> d
-000439f0: 6963 743a 0d0a 2020 2020 2020 2020 6966  ict:..        if
-00043a00: 2073 656c 662e 7072 655f 6163 6365 6c65   self.pre_accele
-00043a10: 7261 7469 6f6e 5f6c 6162 656c 203e 2030  ration_label > 0
-00043a20: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-00043a30: 6169 7365 2054 7261 6e73 6c61 746f 7245  aise TranslatorE
-00043a40: 7272 6f72 2827 5072 6561 6363 656c 6572  rror('Preacceler
-00043a50: 6174 696f 6e20 6361 6e20 6f6e 6c79 2062  ation can only b
-00043a60: 6520 7065 7266 6f72 6d65 6420 6f6e 6365  e performed once
-00043a70: 2e27 290d 0a0d 0a20 2020 2020 2020 2073  .')....        s
-00043a80: 656c 662e 6578 616d 706c 655f 7175 6572  elf.example_quer
-00043a90: 795f 7465 7874 203d 206b 7761 7267 732e  y_text = kwargs.
-00043aa0: 6765 7428 2765 7861 6d70 6c65 5f71 7565  get('example_que
-00043ab0: 7279 5f74 6578 7427 2c20 7365 6c66 2e65  ry_text', self.e
-00043ac0: 7861 6d70 6c65 5f71 7565 7279 5f74 6578  xample_query_tex
-00043ad0: 7429 0d0a 0d0a 2020 2020 2020 2020 7379  t)....        sy
-00043ae0: 732e 7374 6465 7272 2e77 7269 7465 2827  s.stderr.write('
-00043af0: 5072 6561 6363 656c 6572 6174 696f 6e2d  Preacceleration-
-00043b00: 5072 6f63 6573 7320 7769 6c6c 2074 616b  Process will tak
-00043b10: 6520 6120 6665 7720 6d69 6e75 7465 732e  e a few minutes.
-00043b20: 5c6e 2729 0d0a 2020 2020 2020 2020 7379  \n')..        sy
-00043b30: 732e 7374 6465 7272 2e77 7269 7465 2827  s.stderr.write('
-00043b40: 5469 7073 3a20 5468 6520 736d 616c 6c65  Tips: The smalle
-00043b50: 7220 6074 696d 656f 7574 6020 7661 6c75  r `timeout` valu
-00043b60: 652c 2074 6865 2066 6577 6572 2074 7261  e, the fewer tra
-00043b70: 6e73 6c61 746f 7273 2070 6173 7320 7468  nslators pass th
-00043b80: 6520 7465 7374 2027 0d0a 2020 2020 2020  e test '..      
-00043b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043ba0: 2020 2027 616e 6420 7468 6520 6c65 7373     'and the less
-00043bb0: 2074 696d 6520 6974 2074 616b 6573 2074   time it takes t
-00043bc0: 6f20 7072 6561 6363 656c 6572 6174 652e  o preaccelerate.
-00043bd0: 2048 6f77 6576 6572 2c20 7468 6520 736c   However, the sl
-00043be0: 6f77 2073 7065 6564 206f 6620 270d 0a20  ow speed of '.. 
-00043bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043c00: 2020 2020 2020 2020 2770 7265 6163 6365          'preacce
-00043c10: 6c65 7261 7469 6f6e 2064 6f65 7320 6e6f  leration does no
-00043c20: 7420 6d65 616e 2074 6865 2073 6c6f 7720  t mean the slow 
-00043c30: 7370 6565 6420 6f66 206c 6174 6572 2074  speed of later t
-00043c40: 7261 6e73 6c61 7469 6f6e 2e5c 6e5c 6e27  ranslation.\n\n'
-00043c50: 290d 0a0d 0a20 2020 2020 2020 2066 6f72  )....        for
-00043c60: 2069 2069 6e20 7471 646d 2e74 7164 6d28   i in tqdm.tqdm(
-00043c70: 7261 6e67 6528 6c65 6e28 7365 6c66 2e74  range(len(self.t
-00043c80: 7261 6e73 6c61 746f 7273 5f70 6f6f 6c29  ranslators_pool)
-00043c90: 292c 2064 6573 633d 2750 7265 6163 6365  ), desc='Preacce
-00043ca0: 6c65 7261 7469 6f6e 2050 726f 6365 7373  leration Process
-00043cb0: 272c 206e 636f 6c73 3d38 3029 3a0d 0a20  ', ncols=80):.. 
-00043cc0: 2020 2020 2020 2020 2020 205f 7473 203d             _ts =
-00043cd0: 2073 656c 662e 7472 616e 736c 6174 6f72   self.translator
-00043ce0: 735f 706f 6f6c 5b69 5d0d 0a20 2020 2020  s_pool[i]..     
-00043cf0: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-00043d00: 2020 2020 2020 2020 2020 2020 205f 203d               _ =
-00043d10: 2073 656c 662e 5f74 6573 745f 7472 616e   self._test_tran
-00043d20: 736c 6174 6528 5f74 732c 2074 696d 656f  slate(_ts, timeo
-00043d30: 7574 2c20 6966 5f73 686f 775f 7469 6d65  ut, if_show_time
-00043d40: 5f73 7461 7429 0d0a 2020 2020 2020 2020  _stat)..        
-00043d50: 2020 2020 2020 2020 7365 6c66 2e73 7563          self.suc
-00043d60: 6365 7373 5f74 7261 6e73 6c61 746f 7273  cess_translators
-00043d70: 5f70 6f6f 6c2e 6170 7065 6e64 285f 7473  _pool.append(_ts
-00043d80: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
-00043d90: 7863 6570 743a 0d0a 2020 2020 2020 2020  xcept:..        
-00043da0: 2020 2020 2020 2020 7365 6c66 2e66 6169          self.fai
-00043db0: 6c75 7265 5f74 7261 6e73 6c61 746f 7273  lure_translators
-00043dc0: 5f70 6f6f 6c2e 6170 7065 6e64 285f 7473  _pool.append(_ts
-00043dd0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00043de0: 2073 656c 662e 7072 655f 6163 6365 6c65   self.pre_accele
-00043df0: 7261 7469 6f6e 5f6c 6162 656c 202b 3d20  ration_label += 
-00043e00: 310d 0a20 2020 2020 2020 2072 6574 7572  1..        retur
-00043e10: 6e20 7b27 7375 6363 6573 7327 3a20 7365  n {'success': se
-00043e20: 6c66 2e73 7563 6365 7373 5f74 7261 6e73  lf.success_trans
-00043e30: 6c61 746f 7273 5f70 6f6f 6c2c 2027 6661  lators_pool, 'fa
-00043e40: 696c 7572 6527 3a20 7365 6c66 2e66 6169  ilure': self.fai
-00043e50: 6c75 7265 5f74 7261 6e73 6c61 746f 7273  lure_translators
-00043e60: 5f70 6f6f 6c7d 0d0a 0d0a 2020 2020 6465  _pool}....    de
-00043e70: 6620 7370 6565 6474 6573 7428 7365 6c66  f speedtest(self
-00043e80: 2c20 2a2a 6b77 6172 6773 3a20 4c69 7374  , **kwargs: List
-00043e90: 5b73 7472 5d29 202d 3e20 4e6f 6e65 3a0d  [str]) -> None:.
-00043ea0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00043eb0: 2e70 7265 5f61 6363 656c 6572 6174 696f  .pre_acceleratio
-00043ec0: 6e5f 6c61 6265 6c20 3c20 313a 0d0a 2020  n_label < 1:..  
-00043ed0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00043ee0: 5472 616e 736c 6174 6f72 4572 726f 7228  TranslatorError(
-00043ef0: 2750 7265 6163 6365 6c65 7261 7469 6f6e  'Preacceleration
-00043f00: 2066 6972 7374 2e27 290d 0a0d 0a20 2020   first.')....   
-00043f10: 2020 2020 2074 6573 745f 7472 616e 736c       test_transl
-00043f20: 6174 6f72 735f 706f 6f6c 203d 206b 7761  ators_pool = kwa
-00043f30: 7267 732e 6765 7428 2774 6573 745f 7472  rgs.get('test_tr
-00043f40: 616e 736c 6174 6f72 735f 706f 6f6c 272c  anslators_pool',
-00043f50: 2073 656c 662e 7375 6363 6573 735f 7472   self.success_tr
-00043f60: 616e 736c 6174 6f72 735f 706f 6f6c 290d  anslators_pool).
-00043f70: 0a0d 0a20 2020 2020 2020 2073 7973 2e73  ...        sys.s
-00043f80: 7464 6572 722e 7772 6974 6528 2753 7065  tderr.write('Spe
-00043f90: 6564 5465 7374 2d50 726f 6365 7373 2077  edTest-Process w
-00043fa0: 696c 6c20 7461 6b65 2061 2066 6577 2073  ill take a few s
-00043fb0: 6563 6f6e 6473 2e5c 6e5c 6e27 290d 0a20  econds.\n\n').. 
-00043fc0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00043fd0: 7471 646d 2e74 7164 6d28 7261 6e67 6528  tqdm.tqdm(range(
-00043fe0: 6c65 6e28 7465 7374 5f74 7261 6e73 6c61  len(test_transla
-00043ff0: 746f 7273 5f70 6f6f 6c29 292c 2064 6573  tors_pool)), des
-00044000: 633d 2753 7065 6564 5465 7374 2050 726f  c='SpeedTest Pro
-00044010: 6365 7373 272c 206e 636f 6c73 3d38 3029  cess', ncols=80)
-00044020: 3a0d 0a20 2020 2020 2020 2020 2020 205f  :..            _
-00044030: 7473 203d 2074 6573 745f 7472 616e 736c  ts = test_transl
-00044040: 6174 6f72 735f 706f 6f6c 5b69 5d0d 0a20  ators_pool[i].. 
-00044050: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
-00044060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00044070: 205f 203d 2073 656c 662e 5f74 6573 745f   _ = self._test_
-00044080: 7472 616e 736c 6174 6528 5f74 732c 2074  translate(_ts, t
-00044090: 696d 656f 7574 3d4e 6f6e 652c 2069 665f  imeout=None, if_
-000440a0: 7368 6f77 5f74 696d 655f 7374 6174 3d54  show_time_stat=T
-000440b0: 7275 6529 0d0a 2020 2020 2020 2020 2020  rue)..          
-000440c0: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
-000440d0: 2020 2020 2020 2020 2020 2070 6173 730d             pass.
-000440e0: 0a20 2020 2020 2020 2072 6574 7572 6e0d  .        return.
-000440f0: 0a0d 0a20 2020 2064 6566 2070 7265 6163  ...    def preac
-00044100: 6365 6c65 7261 7465 5f61 6e64 5f73 7065  celerate_and_spe
-00044110: 6564 7465 7374 2873 656c 662c 2074 696d  edtest(self, tim
-00044120: 656f 7574 3a20 4f70 7469 6f6e 616c 5b66  eout: Optional[f
-00044130: 6c6f 6174 5d20 3d20 4e6f 6e65 2c20 2a2a  loat] = None, **
-00044140: 6b77 6172 6773 3a20 7374 7229 202d 3e20  kwargs: str) -> 
-00044150: 6469 6374 3a0d 0a20 2020 2020 2020 2072  dict:..        r
-00044160: 6573 756c 7420 3d20 7365 6c66 2e70 7265  esult = self.pre
-00044170: 6163 6365 6c65 7261 7465 2874 696d 656f  accelerate(timeo
-00044180: 7574 3d74 696d 656f 7574 2c20 2a2a 6b77  ut=timeout, **kw
-00044190: 6172 6773 290d 0a20 2020 2020 2020 2073  args)..        s
-000441a0: 7973 2e73 7464 6572 722e 7772 6974 6528  ys.stderr.write(
-000441b0: 275c 6e5c 6e27 290d 0a20 2020 2020 2020  '\n\n')..       
-000441c0: 2073 656c 662e 7370 6565 6474 6573 7428   self.speedtest(
-000441d0: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-000441e0: 6e20 7265 7375 6c74 0d0a 0d0a 0d0a 7473  n result......ts
-000441f0: 7320 3d20 5472 616e 736c 6174 6f72 7353  s = TranslatorsS
-00044200: 6572 7665 7228 290d 0a0d 0a5f 616c 6962  erver()...._alib
-00044210: 6162 6120 3d20 7473 732e 5f61 6c69 6261  aba = tss._aliba
-00044220: 6261 0d0a 616c 6962 6162 6120 3d20 7473  ba..alibaba = ts
-00044230: 732e 616c 6962 6162 610d 0a5f 6170 6572  s.alibaba.._aper
-00044240: 7469 756d 203d 2074 7373 2e5f 6170 6572  tium = tss._aper
-00044250: 7469 756d 0d0a 6170 6572 7469 756d 203d  tium..apertium =
-00044260: 2074 7373 2e61 7065 7274 6975 6d0d 0a5f   tss.apertium.._
-00044270: 6172 676f 7320 3d20 7473 732e 5f61 7267  argos = tss._arg
-00044280: 6f73 0d0a 6172 676f 7320 3d20 7473 732e  os..argos = tss.
-00044290: 6172 676f 730d 0a5f 6261 6964 7520 3d20  argos.._baidu = 
-000442a0: 7473 732e 5f62 6169 6475 0d0a 6261 6964  tss._baidu..baid
-000442b0: 7520 3d20 7473 732e 6261 6964 750d 0a5f  u = tss.baidu.._
-000442c0: 6269 6e67 203d 2074 7373 2e5f 6269 6e67  bing = tss._bing
-000442d0: 0d0a 6269 6e67 203d 2074 7373 2e62 696e  ..bing = tss.bin
-000442e0: 670d 0a5f 6361 6979 756e 203d 2074 7373  g.._caiyun = tss
-000442f0: 2e5f 6361 6979 756e 0d0a 6361 6979 756e  ._caiyun..caiyun
-00044300: 203d 2074 7373 2e63 6169 7975 6e0d 0a5f   = tss.caiyun.._
-00044310: 636c 6f75 6459 6920 3d20 7473 732e 5f63  cloudYi = tss._c
-00044320: 6c6f 7564 5969 0d0a 636c 6f75 6459 6920  loudYi..cloudYi 
-00044330: 3d20 7473 732e 636c 6f75 6459 690d 0a5f  = tss.cloudYi.._
-00044340: 6465 6570 6c20 3d20 7473 732e 5f64 6565  deepl = tss._dee
-00044350: 706c 0d0a 6465 6570 6c20 3d20 7473 732e  pl..deepl = tss.
-00044360: 6465 6570 6c0d 0a5f 656c 6961 203d 2074  deepl.._elia = t
-00044370: 7373 2e5f 656c 6961 0d0a 656c 6961 203d  ss._elia..elia =
-00044380: 2074 7373 2e65 6c69 610d 0a5f 676f 6f67   tss.elia.._goog
-00044390: 6c65 203d 2074 7373 2e5f 676f 6f67 6c65  le = tss._google
-000443a0: 0d0a 676f 6f67 6c65 203d 2074 7373 2e67  ..google = tss.g
-000443b0: 6f6f 676c 650d 0a5f 6963 6962 6120 3d20  oogle.._iciba = 
-000443c0: 7473 732e 5f69 6369 6261 0d0a 6963 6962  tss._iciba..icib
-000443d0: 6120 3d20 7473 732e 6963 6962 610d 0a5f  a = tss.iciba.._
-000443e0: 6966 6c79 7465 6b20 3d20 7473 732e 5f69  iflytek = tss._i
-000443f0: 666c 7974 656b 0d0a 6966 6c79 7465 6b20  flytek..iflytek 
-00044400: 3d20 7473 732e 6966 6c79 7465 6b0d 0a5f  = tss.iflytek.._
-00044410: 6966 6c79 7265 6320 3d20 7473 732e 5f69  iflyrec = tss._i
-00044420: 666c 7972 6563 0d0a 6966 6c79 7265 6320  flyrec..iflyrec 
-00044430: 3d20 7473 732e 6966 6c79 7265 630d 0a5f  = tss.iflyrec.._
-00044440: 6974 7261 6e73 6c61 7465 203d 2074 7373  itranslate = tss
-00044450: 2e5f 6974 7261 6e73 6c61 7465 0d0a 6974  ._itranslate..it
-00044460: 7261 6e73 6c61 7465 203d 2074 7373 2e69  ranslate = tss.i
-00044470: 7472 616e 736c 6174 650d 0a5f 6a75 6469  translate.._judi
-00044480: 6320 3d20 7473 732e 5f6a 7564 6963 0d0a  c = tss._judic..
-00044490: 6a75 6469 6320 3d20 7473 732e 6a75 6469  judic = tss.judi
-000444a0: 630d 0a5f 6c61 6e67 7561 6765 5769 7265  c.._languageWire
-000444b0: 203d 2074 7373 2e5f 6c61 6e67 7561 6765   = tss._language
-000444c0: 5769 7265 0d0a 6c61 6e67 7561 6765 5769  Wire..languageWi
-000444d0: 7265 203d 2074 7373 2e6c 616e 6775 6167  re = tss.languag
-000444e0: 6557 6972 650d 0a5f 6c69 6e67 7661 6e65  eWire.._lingvane
-000444f0: 7820 3d20 7473 732e 5f6c 696e 6776 616e  x = tss._lingvan
-00044500: 6578 0d0a 6c69 6e67 7661 6e65 7820 3d20  ex..lingvanex = 
-00044510: 7473 732e 6c69 6e67 7661 6e65 780d 0a5f  tss.lingvanex.._
-00044520: 6e69 7574 7261 6e73 203d 2074 7373 2e5f  niutrans = tss._
-00044530: 6e69 7574 7261 6e73 0d0a 6e69 7574 7261  niutrans..niutra
-00044540: 6e73 203d 2074 7373 2e6e 6975 7472 616e  ns = tss.niutran
-00044550: 730d 0a5f 6d67 6c69 7020 3d20 7473 732e  s.._mglip = tss.
-00044560: 5f6d 676c 6970 0d0a 6d67 6c69 7020 3d20  _mglip..mglip = 
-00044570: 7473 732e 6d67 6c69 700d 0a5f 6d69 7261  tss.mglip.._mira
-00044580: 6920 3d20 7473 732e 5f6d 6972 6169 0d0a  i = tss._mirai..
-00044590: 6d69 7261 6920 3d20 7473 732e 6d69 7261  mirai = tss.mira
-000445a0: 690d 0a5f 6d6f 6465 726e 4d74 203d 2074  i.._modernMt = t
-000445b0: 7373 2e5f 6d6f 6465 726e 4d74 0d0a 6d6f  ss._modernMt..mo
-000445c0: 6465 726e 4d74 203d 2074 7373 2e6d 6f64  dernMt = tss.mod
-000445d0: 6572 6e4d 740d 0a5f 6d79 4d65 6d6f 7279  ernMt.._myMemory
-000445e0: 203d 2074 7373 2e5f 6d79 4d65 6d6f 7279   = tss._myMemory
-000445f0: 0d0a 6d79 4d65 6d6f 7279 203d 2074 7373  ..myMemory = tss
-00044600: 2e6d 794d 656d 6f72 790d 0a5f 7061 7061  .myMemory.._papa
-00044610: 676f 203d 2074 7373 2e5f 7061 7061 676f  go = tss._papago
-00044620: 0d0a 7061 7061 676f 203d 2074 7373 2e70  ..papago = tss.p
-00044630: 6170 6167 6f0d 0a5f 7171 4661 6e79 6920  apago.._qqFanyi 
-00044640: 3d20 7473 732e 5f71 7146 616e 7969 0d0a  = tss._qqFanyi..
-00044650: 7171 4661 6e79 6920 3d20 7473 732e 7171  qqFanyi = tss.qq
-00044660: 4661 6e79 690d 0a5f 7171 5472 616e 536d  Fanyi.._qqTranSm
-00044670: 6172 7420 3d20 7473 732e 5f71 7154 7261  art = tss._qqTra
-00044680: 6e53 6d61 7274 0d0a 7171 5472 616e 536d  nSmart..qqTranSm
-00044690: 6172 7420 3d20 7473 732e 7171 5472 616e  art = tss.qqTran
-000446a0: 536d 6172 740d 0a5f 7265 7665 7273 6f20  Smart.._reverso 
-000446b0: 3d20 7473 732e 5f72 6576 6572 736f 0d0a  = tss._reverso..
-000446c0: 7265 7665 7273 6f20 3d20 7473 732e 7265  reverso = tss.re
-000446d0: 7665 7273 6f0d 0a5f 736f 676f 7520 3d20  verso.._sogou = 
-000446e0: 7473 732e 5f73 6f67 6f75 0d0a 736f 676f  tss._sogou..sogo
-000446f0: 7520 3d20 7473 732e 736f 676f 750d 0a5f  u = tss.sogou.._
-00044700: 7379 7354 7261 6e20 3d20 7473 732e 5f73  sysTran = tss._s
-00044710: 7973 5472 616e 0d0a 7379 7354 7261 6e20  ysTran..sysTran 
-00044720: 3d20 7473 732e 7379 7354 7261 6e0d 0a5f  = tss.sysTran.._
-00044730: 7469 6c64 6520 3d20 7473 732e 5f74 696c  tilde = tss._til
-00044740: 6465 0d0a 7469 6c64 6520 3d20 7473 732e  de..tilde = tss.
-00044750: 7469 6c64 650d 0a5f 7472 616e 736c 6174  tilde.._translat
-00044760: 6543 6f6d 203d 2074 7373 2e5f 7472 616e  eCom = tss._tran
-00044770: 736c 6174 6543 6f6d 0d0a 7472 616e 736c  slateCom..transl
-00044780: 6174 6543 6f6d 203d 2074 7373 2e74 7261  ateCom = tss.tra
-00044790: 6e73 6c61 7465 436f 6d0d 0a5f 7472 616e  nslateCom.._tran
-000447a0: 736c 6174 654d 6520 3d20 7473 732e 5f74  slateMe = tss._t
-000447b0: 7261 6e73 6c61 7465 4d65 0d0a 7472 616e  ranslateMe..tran
-000447c0: 736c 6174 654d 6520 3d20 7473 732e 7472  slateMe = tss.tr
-000447d0: 616e 736c 6174 654d 650d 0a5f 7574 6962  anslateMe.._utib
-000447e0: 6574 203d 2074 7373 2e5f 7574 6962 6574  et = tss._utibet
-000447f0: 0d0a 7574 6962 6574 203d 2074 7373 2e75  ..utibet = tss.u
-00044800: 7469 6265 740d 0a5f 766f 6c63 456e 6769  tibet.._volcEngi
-00044810: 6e65 203d 2074 7373 2e5f 766f 6c63 456e  ne = tss._volcEn
-00044820: 6769 6e65 0d0a 766f 6c63 456e 6769 6e65  gine..volcEngine
-00044830: 203d 2074 7373 2e76 6f6c 6345 6e67 696e   = tss.volcEngin
-00044840: 650d 0a5f 7961 6e64 6578 203d 2074 7373  e.._yandex = tss
-00044850: 2e5f 7961 6e64 6578 0d0a 7961 6e64 6578  ._yandex..yandex
-00044860: 203d 2074 7373 2e79 616e 6465 780d 0a5f   = tss.yandex.._
-00044870: 7965 656b 6974 203d 2074 7373 2e5f 7965  yeekit = tss._ye
-00044880: 656b 6974 0d0a 7965 656b 6974 203d 2074  ekit..yeekit = t
-00044890: 7373 2e79 6565 6b69 740d 0a5f 796f 7564  ss.yeekit.._youd
-000448a0: 616f 203d 2074 7373 2e5f 796f 7564 616f  ao = tss._youdao
-000448b0: 0d0a 796f 7564 616f 203d 2074 7373 2e79  ..youdao = tss.y
-000448c0: 6f75 6461 6f0d 0a0d 0a74 7261 6e73 6c61  oudao....transla
-000448d0: 7465 5f74 6578 7420 3d20 7473 732e 7472  te_text = tss.tr
-000448e0: 616e 736c 6174 655f 7465 7874 0d0a 7472  anslate_text..tr
-000448f0: 616e 736c 6174 655f 6874 6d6c 203d 2074  anslate_html = t
-00044900: 7373 2e74 7261 6e73 6c61 7465 5f68 746d  ss.translate_htm
-00044910: 6c0d 0a74 7261 6e73 6c61 746f 7273 5f70  l..translators_p
-00044920: 6f6f 6c20 3d20 7473 732e 7472 616e 736c  ool = tss.transl
-00044930: 6174 6f72 735f 706f 6f6c 0d0a 6765 745f  ators_pool..get_
-00044940: 6c61 6e67 7561 6765 7320 3d20 7473 732e  languages = tss.
-00044950: 6765 745f 6c61 6e67 7561 6765 730d 0a0d  get_languages...
-00044960: 0a70 7265 6163 6365 6c65 7261 7465 203d  .preaccelerate =
-00044970: 2074 7373 2e70 7265 6163 6365 6c65 7261   tss.preaccelera
-00044980: 7465 0d0a 7370 6565 6474 6573 7420 3d20  te..speedtest = 
-00044990: 7473 732e 7370 6565 6474 6573 740d 0a70  tss.speedtest..p
-000449a0: 7265 6163 6365 6c65 7261 7465 5f61 6e64  reaccelerate_and
-000449b0: 5f73 7065 6564 7465 7374 203d 2074 7373  _speedtest = tss
-000449c0: 2e70 7265 6163 6365 6c65 7261 7465 5f61  .preaccelerate_a
-000449d0: 6e64 5f73 7065 6564 7465 7374 0d0a 2320  nd_speedtest..# 
-000449e0: 7379 732e 7374 6465 7272 2e77 7269 7465  sys.stderr.write
-000449f0: 2866 2753 7570 706f 7274 2074 7261 6e73  (f'Support trans
-00044a00: 6c61 746f 7273 207b 7472 616e 736c 6174  lators {translat
-00044a10: 6f72 735f 706f 6f6c 7d20 6f6e 6c79 2e5c  ors_pool} only.\
-00044a20: 6e27 290d 0a                             n')..
+000363e0: 696e 7075 745f 6c69 6d69 7420 3d20 696e  input_limit = in
+000363f0: 7428 3565 3329 0d0a 2020 2020 2020 2020  t(5e3)..        
+00036400: 7365 6c66 2e64 6566 6175 6c74 5f66 726f  self.default_fro
+00036410: 6d5f 6c61 6e67 7561 6765 203d 2073 656c  m_language = sel
+00036420: 662e 6f75 7470 7574 5f7a 680d 0a0d 0a20  f.output_zh.... 
+00036430: 2020 2040 5473 652e 6465 6275 675f 6c61     @Tse.debug_la
+00036440: 6e67 7561 6765 5f6d 6170 0d0a 2020 2020  nguage_map..    
+00036450: 6465 6620 6765 745f 6c61 6e67 7561 6765  def get_language
+00036460: 5f6d 6170 2873 656c 662c 2064 5f6c 616e  _map(self, d_lan
+00036470: 675f 6d61 703a 2064 6963 742c 202a 2a6b  g_map: dict, **k
+00036480: 7761 7267 733a 204c 616e 674d 6170 4b77  wargs: LangMapKw
+00036490: 6172 6773 5479 7065 2920 2d3e 2064 6963  argsType) -> dic
+000364a0: 743a 0d0a 2020 2020 2020 2020 7265 7475  t:..        retu
+000364b0: 726e 207b 6b3a 205b 6974 5b27 6c61 6e67  rn {k: [it['lang
+000364c0: 7561 6765 5f63 6f64 6527 5d20 666f 7220  uage_code'] for 
+000364d0: 6974 2069 6e20 6974 656d 5d20 666f 7220  it in item] for 
+000364e0: 6b2c 2069 7465 6d20 696e 2064 5f6c 616e  k, item in d_lan
+000364f0: 675f 6d61 705b 2764 6174 6127 5d5b 2773  g_map['data']['s
+00036500: 7263 5f74 6f5f 7467 7427 5d2e 6974 656d  rc_to_tgt'].item
+00036510: 7328 297d 0d0a 0d0a 2020 2020 6465 6620  s()}....    def 
+00036520: 6765 745f 6c61 6e67 7061 6972 5f64 6f6d  get_langpair_dom
+00036530: 6169 6e28 7365 6c66 2c20 645f 6c61 6e67  ain(self, d_lang
+00036540: 5f6d 6170 3a20 6469 6374 2920 2d3e 2064  _map: dict) -> d
+00036550: 6963 743a 0d0a 2020 2020 2020 2020 7265  ict:..        re
+00036560: 7475 726e 207b 6b3a 205b 6974 5b27 646f  turn {k: [it['do
+00036570: 6d61 696e 5f63 6f64 6527 5d20 666f 7220  main_code'] for 
+00036580: 6974 2069 6e20 6974 656d 5d20 666f 7220  it in item] for 
+00036590: 6b2c 2069 7465 6d20 696e 2064 5f6c 616e  k, item in d_lan
+000365a0: 675f 6d61 705b 2764 6174 6127 5d5b 276c  g_map['data']['l
+000365b0: 616e 6775 6167 655f 7061 6972 5f74 6f5f  anguage_pair_to_
+000365c0: 646f 6d61 696e 275d 2e69 7465 6d73 2829  domain'].items()
+000365d0: 7d0d 0a0d 0a20 2020 2064 6566 2067 6574  }....    def get
+000365e0: 5f70 726f 6665 7373 696f 6e61 6c5f 6669  _professional_fi
+000365f0: 656c 645f 6c69 7374 2873 656c 662c 2064  eld_list(self, d
+00036600: 5f6c 616e 675f 6d61 703a 2064 6963 7429  _lang_map: dict)
+00036610: 202d 3e20 7365 743a 0d0a 2020 2020 2020   -> set:..      
+00036620: 2020 7265 7475 726e 207b 6974 5b27 646f    return {it['do
+00036630: 6d61 696e 5f63 6f64 6527 5d20 666f 7220  main_code'] for 
+00036640: 5f2c 2069 7465 6d20 696e 2064 5f6c 616e  _, item in d_lan
+00036650: 675f 6d61 705b 2764 6174 6127 5d5b 276c  g_map['data']['l
+00036660: 616e 6775 6167 655f 7061 6972 5f74 6f5f  anguage_pair_to_
+00036670: 646f 6d61 696e 275d 2e69 7465 6d73 2829  domain'].items()
+00036680: 2066 6f72 2069 7420 696e 2069 7465 6d7d   for it in item}
+00036690: 0d0a 0d0a 2020 2020 4054 7365 2e74 696d  ....    @Tse.tim
+000366a0: 655f 7374 6174 0d0a 2020 2020 4054 7365  e_stat..    @Tse
+000366b0: 2e63 6865 636b 5f71 7565 7279 0d0a 2020  .check_query..  
+000366c0: 2020 6465 6620 636c 6f75 6454 7261 6e73    def cloudTrans
+000366d0: 6c61 7469 6f6e 5f61 7069 2873 656c 662c  lation_api(self,
+000366e0: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
+000366f0: 2c20 6672 6f6d 5f6c 616e 6775 6167 653a  , from_language:
+00036700: 2073 7472 203d 2027 6175 746f 272c 2074   str = 'auto', t
+00036710: 6f5f 6c61 6e67 7561 6765 3a20 7374 7220  o_language: str 
+00036720: 3d20 2765 6e27 2c20 2a2a 6b77 6172 6773  = 'en', **kwargs
+00036730: 3a20 4170 694b 7761 7267 7354 7970 6529  : ApiKwargsType)
+00036740: 202d 3e20 556e 696f 6e5b 7374 722c 2064   -> Union[str, d
+00036750: 6963 745d 3a0d 0a20 2020 2020 2020 2022  ict]:..        "
+00036760: 2222 0d0a 2020 2020 2020 2020 6874 7470  ""..        http
+00036770: 733a 2f2f 7777 772e 636c 6f75 6474 7261  s://www.cloudtra
+00036780: 6e73 6c61 7469 6f6e 2e63 6f6d 2f23 2f74  nslation.com/#/t
+00036790: 7261 6e73 6c61 7465 0d0a 2020 2020 2020  ranslate..      
+000367a0: 2020 3a70 6172 616d 2071 7565 7279 5f74    :param query_t
+000367b0: 6578 743a 2073 7472 2c20 6d75 7374 2e0d  ext: str, must..
+000367c0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+000367d0: 6672 6f6d 5f6c 616e 6775 6167 653a 2073  from_language: s
+000367e0: 7472 2c20 6465 6661 756c 7420 2761 7574  tr, default 'aut
+000367f0: 6f27 2e0d 0a20 2020 2020 2020 203a 7061  o'...        :pa
+00036800: 7261 6d20 746f 5f6c 616e 6775 6167 653a  ram to_language:
+00036810: 2073 7472 2c20 6465 6661 756c 7420 2765   str, default 'e
+00036820: 6e27 2e0d 0a20 2020 2020 2020 203a 7061  n'...        :pa
+00036830: 7261 6d20 2a2a 6b77 6172 6773 3a0d 0a20  ram **kwargs:.. 
+00036840: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00036850: 7061 7261 6d20 7469 6d65 6f75 743a 2066  param timeout: f
+00036860: 6c6f 6174 2c20 6465 6661 756c 7420 4e6f  loat, default No
+00036870: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
+00036880: 2020 2020 203a 7061 7261 6d20 7072 6f78       :param prox
+00036890: 6965 733a 2064 6963 742c 2064 6566 6175  ies: dict, defau
+000368a0: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
+000368b0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+000368c0: 2073 6c65 6570 5f73 6563 6f6e 6473 3a20   sleep_seconds: 
+000368d0: 666c 6f61 742c 2064 6566 6175 6c74 2030  float, default 0
+000368e0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+000368f0: 2020 203a 7061 7261 6d20 6973 5f64 6574     :param is_det
+00036900: 6169 6c5f 7265 7375 6c74 3a20 626f 6f6c  ail_result: bool
+00036910: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+00036920: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00036930: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
+00036940: 7265 5f6c 696d 6974 5f6f 665f 6c65 6e67  re_limit_of_leng
+00036950: 7468 3a20 626f 6f6c 2c20 6465 6661 756c  th: bool, defaul
+00036960: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+00036970: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00036980: 206c 696d 6974 5f6f 665f 6c65 6e67 7468   limit_of_length
+00036990: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
+000369a0: 3030 3030 2e0d 0a20 2020 2020 2020 2020  0000...         
+000369b0: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+000369c0: 5f69 676e 6f72 655f 656d 7074 795f 7175  _ignore_empty_qu
+000369d0: 6572 793a 2062 6f6f 6c2c 2064 6566 6175  ery: bool, defau
+000369e0: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+000369f0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00036a00: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
+00036a10: 5f61 6674 6572 5f66 7265 713a 2069 6e74  _after_freq: int
+00036a20: 2c20 6465 6661 756c 7420 3130 3030 2e0d  , default 1000..
+00036a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00036a40: 203a 7061 7261 6d20 7570 6461 7465 5f73   :param update_s
+00036a50: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+00036a60: 6f6e 6473 3a20 666c 6f61 742c 2064 6566  onds: float, def
+00036a70: 6175 6c74 2031 3530 302e 0d0a 2020 2020  ault 1500...    
+00036a80: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00036a90: 616d 2069 665f 7368 6f77 5f74 696d 655f  am if_show_time_
+00036aa0: 7374 6174 3a20 626f 6f6c 2c20 6465 6661  stat: bool, defa
+00036ab0: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+00036ac0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00036ad0: 616d 2073 686f 775f 7469 6d65 5f73 7461  am show_time_sta
+00036ae0: 745f 7072 6563 6973 696f 6e3a 2069 6e74  t_precision: int
+00036af0: 2c20 6465 6661 756c 7420 322e 0d0a 2020  , default 2...  
+00036b00: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+00036b10: 6172 616d 2069 665f 7072 696e 745f 7761  aram if_print_wa
+00036b20: 726e 696e 673a 2062 6f6f 6c2c 2064 6566  rning: bool, def
+00036b30: 6175 6c74 2054 7275 652e 0d0a 2020 2020  ault True...    
+00036b40: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00036b50: 616d 2070 726f 6665 7373 696f 6e61 6c5f  am professional_
+00036b60: 6669 656c 643a 2073 7472 2c20 6465 6661  field: str, defa
+00036b70: 756c 7420 2767 656e 6572 616c 272e 0d0a  ult 'general'...
+00036b80: 2020 2020 2020 2020 3a72 6574 7572 6e3a          :return:
+00036b90: 2073 7472 206f 7220 6469 6374 0d0a 2020   str or dict..  
+00036ba0: 2020 2020 2020 2222 220d 0a0d 0a20 2020        """....   
+00036bb0: 2020 2020 2075 7365 5f64 6f6d 6169 6e20       use_domain 
+00036bc0: 3d20 6b77 6172 6773 2e67 6574 2827 7072  = kwargs.get('pr
+00036bd0: 6f66 6573 7369 6f6e 616c 5f66 6965 6c64  ofessional_field
+00036be0: 272c 2027 6765 6e65 7261 6c27 290d 0a20  ', 'general').. 
+00036bf0: 2020 2020 2020 2074 696d 656f 7574 203d         timeout =
+00036c00: 206b 7761 7267 732e 6765 7428 2774 696d   kwargs.get('tim
+00036c10: 656f 7574 272c 204e 6f6e 6529 0d0a 2020  eout', None)..  
+00036c20: 2020 2020 2020 7072 6f78 6965 7320 3d20        proxies = 
+00036c30: 6b77 6172 6773 2e67 6574 2827 7072 6f78  kwargs.get('prox
+00036c40: 6965 7327 2c20 4e6f 6e65 290d 0a20 2020  ies', None)..   
+00036c50: 2020 2020 2073 6c65 6570 5f73 6563 6f6e       sleep_secon
+00036c60: 6473 203d 206b 7761 7267 732e 6765 7428  ds = kwargs.get(
+00036c70: 2773 6c65 6570 5f73 6563 6f6e 6473 272c  'sleep_seconds',
+00036c80: 2030 290d 0a20 2020 2020 2020 2069 665f   0)..        if_
+00036c90: 7072 696e 745f 7761 726e 696e 6720 3d20  print_warning = 
+00036ca0: 6b77 6172 6773 2e67 6574 2827 6966 5f70  kwargs.get('if_p
+00036cb0: 7269 6e74 5f77 6172 6e69 6e67 272c 2054  rint_warning', T
+00036cc0: 7275 6529 0d0a 2020 2020 2020 2020 6973  rue)..        is
+00036cd0: 5f64 6574 6169 6c5f 7265 7375 6c74 203d  _detail_result =
+00036ce0: 206b 7761 7267 732e 6765 7428 2769 735f   kwargs.get('is_
+00036cf0: 6465 7461 696c 5f72 6573 756c 7427 2c20  detail_result', 
+00036d00: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
+00036d10: 7570 6461 7465 5f73 6573 7369 6f6e 5f61  update_session_a
+00036d20: 6674 6572 5f66 7265 7120 3d20 6b77 6172  fter_freq = kwar
+00036d30: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
+00036d40: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
+00036d50: 7127 2c20 7365 6c66 2e64 6566 6175 6c74  q', self.default
+00036d60: 5f73 6573 7369 6f6e 5f66 7265 7129 0d0a  _session_freq)..
+00036d70: 2020 2020 2020 2020 7570 6461 7465 5f73          update_s
+00036d80: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+00036d90: 6f6e 6473 203d 206b 7761 7267 732e 6765  onds = kwargs.ge
+00036da0: 7428 2775 7064 6174 655f 7365 7373 696f  t('update_sessio
+00036db0: 6e5f 6166 7465 725f 7365 636f 6e64 7327  n_after_seconds'
+00036dc0: 2c20 7365 6c66 2e64 6566 6175 6c74 5f73  , self.default_s
+00036dd0: 6573 7369 6f6e 5f73 6563 6f6e 6473 290d  ession_seconds).
+00036de0: 0a20 2020 2020 2020 2073 656c 662e 6368  .        self.ch
+00036df0: 6563 6b5f 696e 7075 745f 6c69 6d69 7428  eck_input_limit(
+00036e00: 7175 6572 795f 7465 7874 2c20 7365 6c66  query_text, self
+00036e10: 2e69 6e70 7574 5f6c 696d 6974 290d 0a0d  .input_limit)...
+00036e20: 0a20 2020 2020 2020 206e 6f74 5f75 7064  .        not_upd
+00036e30: 6174 655f 636f 6e64 5f66 7265 7120 3d20  ate_cond_freq = 
+00036e40: 3120 6966 2073 656c 662e 7175 6572 795f  1 if self.query_
+00036e50: 636f 756e 7420 2520 7570 6461 7465 5f73  count % update_s
+00036e60: 6573 7369 6f6e 5f61 6674 6572 5f66 7265  ession_after_fre
+00036e70: 7120 213d 2030 2065 6c73 6520 300d 0a20  q != 0 else 0.. 
+00036e80: 2020 2020 2020 206e 6f74 5f75 7064 6174         not_updat
+00036e90: 655f 636f 6e64 5f74 696d 6520 3d20 3120  e_cond_time = 1 
+00036ea0: 6966 2074 696d 652e 7469 6d65 2829 202d  if time.time() -
+00036eb0: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
+00036ec0: 203c 2075 7064 6174 655f 7365 7373 696f   < update_sessio
+00036ed0: 6e5f 6166 7465 725f 7365 636f 6e64 7320  n_after_seconds 
+00036ee0: 656c 7365 2030 0d0a 2020 2020 2020 2020  else 0..        
+00036ef0: 6966 206e 6f74 2028 7365 6c66 2e73 6573  if not (self.ses
+00036f00: 7369 6f6e 2061 6e64 2073 656c 662e 6c61  sion and self.la
+00036f10: 6e67 7561 6765 5f6d 6170 2061 6e64 206e  nguage_map and n
+00036f20: 6f74 5f75 7064 6174 655f 636f 6e64 5f66  ot_update_cond_f
+00036f30: 7265 7120 616e 6420 6e6f 745f 7570 6461  req and not_upda
+00036f40: 7465 5f63 6f6e 645f 7469 6d65 293a 0d0a  te_cond_time):..
+00036f50: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00036f60: 2e62 6567 696e 5f74 696d 6520 3d20 7469  .begin_time = ti
+00036f70: 6d65 2e74 696d 6528 290d 0a20 2020 2020  me.time()..     
+00036f80: 2020 2020 2020 2073 656c 662e 7365 7373         self.sess
+00036f90: 696f 6e20 3d20 7265 7175 6573 7473 2e53  ion = requests.S
+00036fa0: 6573 7369 6f6e 2829 0d0a 2020 2020 2020  ession()..      
+00036fb0: 2020 2020 2020 5f20 3d20 7365 6c66 2e73        _ = self.s
+00036fc0: 6573 7369 6f6e 2e67 6574 2873 656c 662e  ession.get(self.
+00036fd0: 686f 7374 5f75 726c 2c20 6865 6164 6572  host_url, header
+00036fe0: 733d 7365 6c66 2e68 6f73 745f 6865 6164  s=self.host_head
+00036ff0: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
+00037000: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
+00037010: 6f78 6965 7329 0d0a 2020 2020 2020 2020  oxies)..        
+00037020: 2020 2020 5f20 3d20 7365 6c66 2e73 6573      _ = self.ses
+00037030: 7369 6f6e 2e67 6574 2873 656c 662e 6765  sion.get(self.ge
+00037040: 745f 636f 6f6b 6965 5f75 726c 2c20 6865  t_cookie_url, he
+00037050: 6164 6572 733d 7365 6c66 2e61 7069 5f68  aders=self.api_h
+00037060: 6561 6465 7273 2c20 7469 6d65 6f75 743d  eaders, timeout=
+00037070: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
+00037080: 3d70 726f 7869 6573 290d 0a20 2020 2020  =proxies)..     
+00037090: 2020 2020 2020 2064 5f6c 616e 675f 6d61         d_lang_ma
+000370a0: 7020 3d20 7365 6c66 2e73 6573 7369 6f6e  p = self.session
+000370b0: 2e67 6574 2873 656c 662e 6765 745f 6c61  .get(self.get_la
+000370c0: 6e67 5f75 726c 2c20 6865 6164 6572 733d  ng_url, headers=
+000370d0: 7365 6c66 2e61 7069 5f68 6561 6465 7273  self.api_headers
+000370e0: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
+000370f0: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
+00037100: 6573 292e 6a73 6f6e 2829 0d0a 2020 2020  es).json()..    
+00037110: 2020 2020 2020 2020 6465 6275 675f 6c61          debug_la
+00037120: 6e67 5f6b 7761 7267 7320 3d20 7365 6c66  ng_kwargs = self
+00037130: 2e64 6562 7567 5f6c 616e 675f 6b77 6172  .debug_lang_kwar
+00037140: 6773 2866 726f 6d5f 6c61 6e67 7561 6765  gs(from_language
+00037150: 2c20 746f 5f6c 616e 6775 6167 652c 2073  , to_language, s
+00037160: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
+00037170: 5f6c 616e 6775 6167 652c 2069 665f 7072  _language, if_pr
+00037180: 696e 745f 7761 726e 696e 6729 0d0a 2020  int_warning)..  
+00037190: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
+000371a0: 616e 6775 6167 655f 6d61 7020 3d20 7365  anguage_map = se
+000371b0: 6c66 2e67 6574 5f6c 616e 6775 6167 655f  lf.get_language_
+000371c0: 6d61 7028 645f 6c61 6e67 5f6d 6170 2c20  map(d_lang_map, 
+000371d0: 2a2a 6465 6275 675f 6c61 6e67 5f6b 7761  **debug_lang_kwa
+000371e0: 7267 7329 0d0a 2020 2020 2020 2020 2020  rgs)..          
+000371f0: 2020 7365 6c66 2e6c 616e 6770 6169 725f    self.langpair_
+00037200: 646f 6d61 696e 203d 2073 656c 662e 6765  domain = self.ge
+00037210: 745f 6c61 6e67 7061 6972 5f64 6f6d 6169  t_langpair_domai
+00037220: 6e28 645f 6c61 6e67 5f6d 6170 290d 0a20  n(d_lang_map).. 
+00037230: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00037240: 7072 6f66 6573 7369 6f6e 616c 5f66 6965  professional_fie
+00037250: 6c64 203d 2073 656c 662e 6765 745f 7072  ld = self.get_pr
+00037260: 6f66 6573 7369 6f6e 616c 5f66 6965 6c64  ofessional_field
+00037270: 5f6c 6973 7428 645f 6c61 6e67 5f6d 6170  _list(d_lang_map
+00037280: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
+00037290: 6672 6f6d 5f6c 616e 6775 6167 6520 3d3d  from_language ==
+000372a0: 2027 6175 746f 273a 0d0a 2020 2020 2020   'auto':..      
+000372b0: 2020 2020 2020 7061 796c 6f61 6420 3d20        payload = 
+000372c0: 7b27 7465 7874 273a 2071 7565 7279 5f74  {'text': query_t
+000372d0: 6578 747d 0d0a 2020 2020 2020 2020 2020  ext}..          
+000372e0: 2020 7220 3d20 7365 6c66 2e73 6573 7369    r = self.sessi
+000372f0: 6f6e 2e70 6f73 7428 7365 6c66 2e64 6574  on.post(self.det
+00037300: 6563 745f 6c61 6e67 5f75 726c 2c20 6a73  ect_lang_url, js
+00037310: 6f6e 3d70 6179 6c6f 6164 2c20 6865 6164  on=payload, head
+00037320: 6572 733d 7365 6c66 2e61 7069 5f68 6561  ers=self.api_hea
+00037330: 6465 7273 2c20 7469 6d65 6f75 743d 7469  ders, timeout=ti
+00037340: 6d65 6f75 742c 2070 726f 7869 6573 3d70  meout, proxies=p
+00037350: 726f 7869 6573 290d 0a20 2020 2020 2020  roxies)..       
+00037360: 2020 2020 2066 726f 6d5f 6c61 6e67 7561       from_langua
+00037370: 6765 203d 2072 2e6a 736f 6e28 295b 2764  ge = r.json()['d
+00037380: 6174 6127 5d5b 276c 616e 6775 6167 6527  ata']['language'
+00037390: 5d0d 0a20 2020 2020 2020 2066 726f 6d5f  ]..        from_
+000373a0: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
+000373b0: 6775 6167 6520 3d20 6672 6f6d 5f6c 616e  guage = from_lan
+000373c0: 6775 6167 652e 6c6f 7765 7228 292c 2074  guage.lower(), t
+000373d0: 6f5f 6c61 6e67 7561 6765 2e6c 6f77 6572  o_language.lower
+000373e0: 2829 2020 2320 6d75 7374 206c 6f77 6572  ()  # must lower
+000373f0: 0d0a 2020 2020 2020 2020 6672 6f6d 5f6c  ..        from_l
+00037400: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
+00037410: 7561 6765 203d 2073 656c 662e 6368 6563  uage = self.chec
+00037420: 6b5f 6c61 6e67 7561 6765 2866 726f 6d5f  k_language(from_
+00037430: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
+00037440: 6775 6167 652c 2073 656c 662e 6c61 6e67  guage, self.lang
+00037450: 7561 6765 5f6d 6170 2c20 6f75 7470 7574  uage_map, output
+00037460: 5f7a 683d 7365 6c66 2e6f 7574 7075 745f  _zh=self.output_
+00037470: 7a68 2c0d 0a20 2020 2020 2020 2020 2020  zh,..           
+00037480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000374a0: 2020 2020 2020 2020 2020 2020 2020 6f75                ou
+000374b0: 7470 7574 5f65 6e5f 7472 616e 736c 6174  tput_en_translat
+000374c0: 6f72 3d27 636c 6f75 6454 7261 6e73 6c61  or='cloudTransla
+000374d0: 7469 6f6e 272c 206f 7574 7075 745f 656e  tion', output_en
+000374e0: 3d73 656c 662e 6f75 7470 7574 5f65 6e29  =self.output_en)
+000374f0: 0d0a 0d0a 2020 2020 2020 2020 646f 6d61  ....        doma
+00037500: 696e 7320 3d20 7365 6c66 2e6c 616e 6770  ins = self.langp
+00037510: 6169 725f 646f 6d61 696e 2e67 6574 2866  air_domain.get(f
+00037520: 277b 6672 6f6d 5f6c 616e 6775 6167 657d  '{from_language}
+00037530: 5f7b 746f 5f6c 616e 6775 6167 657d 2729  _{to_language}')
+00037540: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
+00037550: 2064 6f6d 6169 6e73 3a0d 0a20 2020 2020   domains:..     
+00037560: 2020 2020 2020 2072 6169 7365 2054 7261         raise Tra
+00037570: 6e73 6c61 746f 7245 7272 6f72 0d0a 0d0a  nslatorError....
+00037580: 2020 2020 2020 2020 6966 2075 7365 5f64          if use_d
+00037590: 6f6d 6169 6e20 6e6f 7420 696e 2064 6f6d  omain not in dom
+000375a0: 6169 6e73 3a0d 0a20 2020 2020 2020 2020  ains:..         
+000375b0: 2020 2075 7365 5f64 6f6d 6169 6e20 3d20     use_domain = 
+000375c0: 646f 6d61 696e 735b 305d 0d0a 0d0a 2020  domains[0]....  
+000375d0: 2020 2020 2020 7061 796c 6f61 6420 3d20        payload = 
+000375e0: 7b0d 0a20 2020 2020 2020 2020 2020 2027  {..            '
+000375f0: 7465 7874 273a 2071 7565 7279 5f74 6578  text': query_tex
+00037600: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
+00037610: 2764 6f6d 6169 6e27 3a20 7573 655f 646f  'domain': use_do
+00037620: 6d61 696e 2c0d 0a20 2020 2020 2020 2020  main,..         
+00037630: 2020 2027 7372 634c 616e 6743 6f64 6527     'srcLangCode'
+00037640: 3a20 6672 6f6d 5f6c 616e 6775 6167 652c  : from_language,
+00037650: 0d0a 2020 2020 2020 2020 2020 2020 2774  ..            't
+00037660: 6774 4c61 6e67 436f 6465 273a 2074 6f5f  gtLangCode': to_
+00037670: 6c61 6e67 7561 6765 2c0d 0a20 2020 2020  language,..     
+00037680: 2020 207d 0d0a 2020 2020 2020 2020 7220     }..        r 
+00037690: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e70  = self.session.p
+000376a0: 6f73 7428 7365 6c66 2e61 7069 5f75 726c  ost(self.api_url
+000376b0: 2c20 6a73 6f6e 3d70 6179 6c6f 6164 2c20  , json=payload, 
+000376c0: 6865 6164 6572 733d 7365 6c66 2e61 7069  headers=self.api
+000376d0: 5f68 6561 6465 7273 2c20 7469 6d65 6f75  _headers, timeou
+000376e0: 743d 7469 6d65 6f75 742c 2070 726f 7869  t=timeout, proxi
+000376f0: 6573 3d70 726f 7869 6573 290d 0a20 2020  es=proxies)..   
+00037700: 2020 2020 2072 2e72 6169 7365 5f66 6f72       r.raise_for
+00037710: 5f73 7461 7475 7328 290d 0a20 2020 2020  _status()..     
+00037720: 2020 2064 6174 6120 3d20 722e 6a73 6f6e     data = r.json
+00037730: 2829 0d0a 2020 2020 2020 2020 7469 6d65  ()..        time
+00037740: 2e73 6c65 6570 2873 6c65 6570 5f73 6563  .sleep(sleep_sec
+00037750: 6f6e 6473 290d 0a20 2020 2020 2020 2073  onds)..        s
+00037760: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
+00037770: 2b3d 2031 0d0a 2020 2020 2020 2020 7265  += 1..        re
+00037780: 7475 726e 2064 6174 6120 6966 2069 735f  turn data if is_
+00037790: 6465 7461 696c 5f72 6573 756c 7420 656c  detail_result el
+000377a0: 7365 2064 6174 615b 2764 6174 6127 5d5b  se data['data'][
+000377b0: 2774 7261 6e73 6c61 7469 6f6e 275d 0d0a  'translation']..
+000377c0: 0d0a 0d0a 636c 6173 7320 636c 6f75 6454  ....class cloudT
+000377d0: 7261 6e73 6c61 7469 6f6e 5632 2854 7365  ranslationV2(Tse
+000377e0: 293a 0d0a 2020 2020 6465 6620 5f5f 696e  ):..    def __in
+000377f0: 6974 5f5f 2873 656c 6629 3a0d 0a20 2020  it__(self):..   
+00037800: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
+00037810: 6e69 745f 5f28 290d 0a20 2020 2020 2020  nit__()..       
+00037820: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
+00037830: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
+00037840: 2020 2020 2020 2020 7365 6c66 2e68 6f73          self.hos
+00037850: 745f 7572 6c20 3d20 2768 7474 7073 3a2f  t_url = 'https:/
+00037860: 2f6f 6e6c 696e 652e 636c 6f75 6474 7261  /online.cloudtra
+00037870: 6e73 6c61 7469 6f6e 2e63 6f6d 270d 0a20  nslation.com'.. 
+00037880: 2020 2020 2020 2073 656c 662e 6170 695f         self.api_
+00037890: 7572 6c20 3d20 2768 7474 7073 3a2f 2f6f  url = 'https://o
+000378a0: 6e6c 696e 652e 636c 6f75 6474 7261 6e73  nline.cloudtrans
+000378b0: 6c61 7469 6f6e 2e63 6f6d 2f61 7069 2f76  lation.com/api/v
+000378c0: 312e 302f 7265 7175 6573 745f 7472 616e  1.0/request_tran
+000378d0: 736c 6174 652f 7472 795f 7472 616e 736c  slate/try_transl
+000378e0: 6174 6527 0d0a 2020 2020 2020 2020 7365  ate'..        se
+000378f0: 6c66 2e67 6574 5f6c 616e 675f 7572 6c20  lf.get_lang_url 
+00037900: 3d20 2768 7474 7073 3a2f 2f6f 6e6c 696e  = 'https://onlin
+00037910: 652e 636c 6f75 6474 7261 6e73 6c61 7469  e.cloudtranslati
+00037920: 6f6e 2e63 6f6d 2f61 7069 2f76 312e 302f  on.com/api/v1.0/
+00037930: 7369 7465 2f67 6574 5f61 6c6c 5f6c 616e  site/get_all_lan
+00037940: 6775 6167 655f 616e 645f 646f 6d61 696e  guage_and_domain
+00037950: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+00037960: 6465 7465 6374 5f6c 616e 675f 7572 6c20  detect_lang_url 
+00037970: 3d20 2768 7474 7073 3a2f 2f6f 6e6c 696e  = 'https://onlin
+00037980: 652e 636c 6f75 6474 7261 6e73 6c61 7469  e.cloudtranslati
+00037990: 6f6e 2e63 6f6d 2f61 7069 2f76 312e 302f  on.com/api/v1.0/
+000379a0: 7265 7175 6573 745f 7472 616e 736c 6174  request_translat
+000379b0: 652f 6c61 6e67 6964 270d 0a20 2020 2020  e/langid'..     
+000379c0: 2020 2073 656c 662e 6765 745f 636f 6f6b     self.get_cook
+000379d0: 6965 5f75 726c 203d 2027 6874 7470 733a  ie_url = 'https:
+000379e0: 2f2f 6f6e 6c69 6e65 2e63 6c6f 7564 7472  //online.cloudtr
+000379f0: 616e 736c 6174 696f 6e2e 636f 6d2f 6170  anslation.com/ap
+00037a00: 692f 7631 2e30 2f73 6974 652f 7369 7465  i/v1.0/site/site
+00037a10: 735f 6c61 6e67 7561 6765 5f6c 6973 7427  s_language_list'
+00037a20: 0d0a 2020 2020 2020 2020 7365 6c66 2e68  ..        self.h
+00037a30: 6f73 745f 6865 6164 6572 7320 3d20 7365  ost_headers = se
+00037a40: 6c66 2e67 6574 5f68 6561 6465 7273 2873  lf.get_headers(s
+00037a50: 656c 662e 686f 7374 5f75 726c 2c20 6966  elf.host_url, if
+00037a60: 5f61 7069 3d46 616c 7365 2c20 6966 5f72  _api=False, if_r
+00037a70: 6566 6572 6572 5f66 6f72 5f68 6f73 743d  eferer_for_host=
+00037a80: 5472 7565 290d 0a20 2020 2020 2020 2073  True)..        s
+00037a90: 656c 662e 6170 695f 6865 6164 6572 7320  elf.api_headers 
+00037aa0: 3d20 7365 6c66 2e67 6574 5f68 6561 6465  = self.get_heade
+00037ab0: 7273 2873 656c 662e 686f 7374 5f75 726c  rs(self.host_url
+00037ac0: 2c20 6966 5f61 7069 3d54 7275 652c 2069  , if_api=True, i
+00037ad0: 665f 6a73 6f6e 5f66 6f72 5f61 7069 3d54  f_json_for_api=T
+00037ae0: 7275 6529 0d0a 2020 2020 2020 2020 7365  rue)..        se
+00037af0: 6c66 2e73 6573 7369 6f6e 203d 204e 6f6e  lf.session = Non
+00037b00: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
+00037b10: 6c61 6e67 7561 6765 5f6d 6170 203d 204e  language_map = N
+00037b20: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
+00037b30: 662e 6c61 6e67 7061 6972 5f64 6f6d 6169  f.langpair_domai
+00037b40: 6e20 3d20 4e6f 6e65 0d0a 2020 2020 2020  n = None..      
+00037b50: 2020 7365 6c66 2e70 726f 6665 7373 696f    self.professio
+00037b60: 6e61 6c5f 6669 656c 6420 3d20 4e6f 6e65  nal_field = None
+00037b70: 0d0a 2020 2020 2020 2020 7365 6c66 2e71  ..        self.q
+00037b80: 7565 7279 5f63 6f75 6e74 203d 2030 0d0a  uery_count = 0..
+00037b90: 2020 2020 2020 2020 7365 6c66 2e6f 7574          self.out
+00037ba0: 7075 745f 7a68 203d 2027 7a68 2d63 6e27  put_zh = 'zh-cn'
+00037bb0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6f  ..        self.o
+00037bc0: 7574 7075 745f 656e 203d 2027 656e 2d75  utput_en = 'en-u
+00037bd0: 7327 0d0a 2020 2020 2020 2020 7365 6c66  s'..        self
+00037be0: 2e6f 7574 7075 745f 6175 746f 203d 2027  .output_auto = '
+00037bf0: 616c 6c27 0d0a 2020 2020 2020 2020 7365  all'..        se
+00037c00: 6c66 2e69 6e70 7574 5f6c 696d 6974 203d  lf.input_limit =
+00037c10: 2069 6e74 2835 6533 290d 0a20 2020 2020   int(5e3)..     
+00037c20: 2020 2073 656c 662e 6465 6661 756c 745f     self.default_
+00037c30: 6672 6f6d 5f6c 616e 6775 6167 6520 3d20  from_language = 
+00037c40: 7365 6c66 2e6f 7574 7075 745f 7a68 0d0a  self.output_zh..
+00037c50: 0d0a 2020 2020 4054 7365 2e64 6562 7567  ..    @Tse.debug
+00037c60: 5f6c 616e 6775 6167 655f 6d61 700d 0a20  _language_map.. 
+00037c70: 2020 2064 6566 2067 6574 5f6c 616e 6775     def get_langu
+00037c80: 6167 655f 6d61 7028 7365 6c66 2c20 645f  age_map(self, d_
+00037c90: 6c61 6e67 5f6d 6170 3a20 6469 6374 2c20  lang_map: dict, 
+00037ca0: 2a2a 6b77 6172 6773 3a20 4c61 6e67 4d61  **kwargs: LangMa
+00037cb0: 704b 7761 7267 7354 7970 6529 202d 3e20  pKwargsType) -> 
+00037cc0: 6469 6374 3a0d 0a20 2020 2020 2020 2072  dict:..        r
+00037cd0: 6574 7572 6e20 7b6b 3a20 5b69 745b 276c  eturn {k: [it['l
+00037ce0: 616e 6775 6167 655f 636f 6465 275d 2066  anguage_code'] f
+00037cf0: 6f72 2069 7420 696e 2069 7465 6d5d 2066  or it in item] f
+00037d00: 6f72 206b 2c20 6974 656d 2069 6e20 645f  or k, item in d_
+00037d10: 6c61 6e67 5f6d 6170 5b27 6461 7461 275d  lang_map['data']
+00037d20: 5b27 7372 635f 746f 5f74 6774 275d 2e69  ['src_to_tgt'].i
+00037d30: 7465 6d73 2829 7d0d 0a0d 0a20 2020 2064  tems()}....    d
+00037d40: 6566 2067 6574 5f6c 616e 6770 6169 725f  ef get_langpair_
+00037d50: 646f 6d61 696e 2873 656c 662c 2064 5f6c  domain(self, d_l
+00037d60: 616e 675f 6d61 703a 2064 6963 7429 202d  ang_map: dict) -
+00037d70: 3e20 6469 6374 3a0d 0a20 2020 2020 2020  > dict:..       
+00037d80: 2072 6574 7572 6e20 7b6b 3a20 5b69 745b   return {k: [it[
+00037d90: 2764 6f6d 6169 6e5f 636f 6465 275d 2066  'domain_code'] f
+00037da0: 6f72 2069 7420 696e 2069 7465 6d5d 2066  or it in item] f
+00037db0: 6f72 206b 2c20 6974 656d 2069 6e20 645f  or k, item in d_
+00037dc0: 6c61 6e67 5f6d 6170 5b27 6461 7461 275d  lang_map['data']
+00037dd0: 5b27 6c61 6e67 7561 6765 5f70 6169 725f  ['language_pair_
+00037de0: 746f 5f64 6f6d 6169 6e27 5d2e 6974 656d  to_domain'].item
+00037df0: 7328 297d 0d0a 0d0a 2020 2020 6465 6620  s()}....    def 
+00037e00: 6765 745f 7072 6f66 6573 7369 6f6e 616c  get_professional
+00037e10: 5f66 6965 6c64 5f6c 6973 7428 7365 6c66  _field_list(self
+00037e20: 2c20 645f 6c61 6e67 5f6d 6170 3a20 6469  , d_lang_map: di
+00037e30: 6374 2920 2d3e 2073 6574 3a0d 0a20 2020  ct) -> set:..   
+00037e40: 2020 2020 2072 6574 7572 6e20 7b69 745b       return {it[
+00037e50: 2764 6f6d 6169 6e5f 636f 6465 275d 2066  'domain_code'] f
+00037e60: 6f72 205f 2c20 6974 656d 2069 6e20 645f  or _, item in d_
+00037e70: 6c61 6e67 5f6d 6170 5b27 6461 7461 275d  lang_map['data']
+00037e80: 5b27 6c61 6e67 7561 6765 5f70 6169 725f  ['language_pair_
+00037e90: 746f 5f64 6f6d 6169 6e27 5d2e 6974 656d  to_domain'].item
+00037ea0: 7328 2920 666f 7220 6974 2069 6e20 6974  s() for it in it
+00037eb0: 656d 7d0d 0a0d 0a20 2020 2040 5473 652e  em}....    @Tse.
+00037ec0: 7469 6d65 5f73 7461 740d 0a20 2020 2040  time_stat..    @
+00037ed0: 5473 652e 6368 6563 6b5f 7175 6572 790d  Tse.check_query.
+00037ee0: 0a20 2020 2064 6566 2063 6c6f 7564 5472  .    def cloudTr
+00037ef0: 616e 736c 6174 696f 6e5f 6170 6928 7365  anslation_api(se
+00037f00: 6c66 2c20 7175 6572 795f 7465 7874 3a20  lf, query_text: 
+00037f10: 7374 722c 2066 726f 6d5f 6c61 6e67 7561  str, from_langua
+00037f20: 6765 3a20 7374 7220 3d20 2761 7574 6f27  ge: str = 'auto'
+00037f30: 2c20 746f 5f6c 616e 6775 6167 653a 2073  , to_language: s
+00037f40: 7472 203d 2027 656e 272c 202a 2a6b 7761  tr = 'en', **kwa
+00037f50: 7267 733a 2041 7069 4b77 6172 6773 5479  rgs: ApiKwargsTy
+00037f60: 7065 2920 2d3e 2055 6e69 6f6e 5b73 7472  pe) -> Union[str
+00037f70: 2c20 6469 6374 5d3a 0d0a 2020 2020 2020  , dict]:..      
+00037f80: 2020 2222 220d 0a20 2020 2020 2020 2068    """..        h
+00037f90: 7474 7073 3a2f 2f6f 6e6c 696e 652e 636c  ttps://online.cl
+00037fa0: 6f75 6474 7261 6e73 6c61 7469 6f6e 2e63  oudtranslation.c
+00037fb0: 6f6d 0d0a 2020 2020 2020 2020 3a70 6172  om..        :par
+00037fc0: 616d 2071 7565 7279 5f74 6578 743a 2073  am query_text: s
+00037fd0: 7472 2c20 6d75 7374 2e0d 0a20 2020 2020  tr, must...     
+00037fe0: 2020 203a 7061 7261 6d20 6672 6f6d 5f6c     :param from_l
+00037ff0: 616e 6775 6167 653a 2073 7472 2c20 6465  anguage: str, de
+00038000: 6661 756c 7420 2761 7574 6f27 2e0d 0a20  fault 'auto'... 
+00038010: 2020 2020 2020 203a 7061 7261 6d20 746f         :param to
+00038020: 5f6c 616e 6775 6167 653a 2073 7472 2c20  _language: str, 
+00038030: 6465 6661 756c 7420 2765 6e27 2e0d 0a20  default 'en'... 
+00038040: 2020 2020 2020 203a 7061 7261 6d20 2a2a         :param **
+00038050: 6b77 6172 6773 3a0d 0a20 2020 2020 2020  kwargs:..       
+00038060: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+00038070: 7469 6d65 6f75 743a 2066 6c6f 6174 2c20  timeout: float, 
+00038080: 6465 6661 756c 7420 4e6f 6e65 2e0d 0a20  default None... 
+00038090: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+000380a0: 7061 7261 6d20 7072 6f78 6965 733a 2064  param proxies: d
+000380b0: 6963 742c 2064 6566 6175 6c74 204e 6f6e  ict, default Non
+000380c0: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+000380d0: 2020 2020 3a70 6172 616d 2073 6c65 6570      :param sleep
+000380e0: 5f73 6563 6f6e 6473 3a20 666c 6f61 742c  _seconds: float,
+000380f0: 2064 6566 6175 6c74 2030 2e0d 0a20 2020   default 0...   
+00038100: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00038110: 7261 6d20 6973 5f64 6574 6169 6c5f 7265  ram is_detail_re
+00038120: 7375 6c74 3a20 626f 6f6c 2c20 6465 6661  sult: bool, defa
+00038130: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+00038140: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00038150: 616d 2069 665f 6967 6e6f 7265 5f6c 696d  am if_ignore_lim
+00038160: 6974 5f6f 665f 6c65 6e67 7468 3a20 626f  it_of_length: bo
+00038170: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
+00038180: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+00038190: 2020 2020 3a70 6172 616d 206c 696d 6974      :param limit
+000381a0: 5f6f 665f 6c65 6e67 7468 3a20 696e 742c  _of_length: int,
+000381b0: 2064 6566 6175 6c74 2032 3030 3030 2e0d   default 20000..
+000381c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000381d0: 203a 7061 7261 6d20 6966 5f69 676e 6f72   :param if_ignor
+000381e0: 655f 656d 7074 795f 7175 6572 793a 2062  e_empty_query: b
+000381f0: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
+00038200: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
+00038210: 2020 2020 203a 7061 7261 6d20 7570 6461       :param upda
+00038220: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+00038230: 5f66 7265 713a 2069 6e74 2c20 6465 6661  _freq: int, defa
+00038240: 756c 7420 3130 3030 2e0d 0a20 2020 2020  ult 1000...     
+00038250: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00038260: 6d20 7570 6461 7465 5f73 6573 7369 6f6e  m update_session
+00038270: 5f61 6674 6572 5f73 6563 6f6e 6473 3a20  _after_seconds: 
+00038280: 666c 6f61 742c 2064 6566 6175 6c74 2031  float, default 1
+00038290: 3530 302e 0d0a 2020 2020 2020 2020 2020  500...          
+000382a0: 2020 2020 2020 3a70 6172 616d 2069 665f        :param if_
+000382b0: 7368 6f77 5f74 696d 655f 7374 6174 3a20  show_time_stat: 
+000382c0: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
+000382d0: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
+000382e0: 2020 2020 2020 3a70 6172 616d 2073 686f        :param sho
+000382f0: 775f 7469 6d65 5f73 7461 745f 7072 6563  w_time_stat_prec
+00038300: 6973 696f 6e3a 2069 6e74 2c20 6465 6661  ision: int, defa
+00038310: 756c 7420 322e 0d0a 2020 2020 2020 2020  ult 2...        
+00038320: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00038330: 665f 7072 696e 745f 7761 726e 696e 673a  f_print_warning:
+00038340: 2062 6f6f 6c2c 2064 6566 6175 6c74 2054   bool, default T
+00038350: 7275 652e 0d0a 2020 2020 2020 2020 2020  rue...          
+00038360: 2020 2020 2020 3a70 6172 616d 2070 726f        :param pro
+00038370: 6665 7373 696f 6e61 6c5f 6669 656c 643a  fessional_field:
+00038380: 2073 7472 2c20 6465 6661 756c 7420 2767   str, default 'g
+00038390: 656e 6572 616c 272e 0d0a 2020 2020 2020  eneral'...      
+000383a0: 2020 3a72 6574 7572 6e3a 2073 7472 206f    :return: str o
+000383b0: 7220 6469 6374 0d0a 2020 2020 2020 2020  r dict..        
+000383c0: 2222 220d 0a0d 0a20 2020 2020 2020 2075  """....        u
+000383d0: 7365 5f64 6f6d 6169 6e20 3d20 6b77 6172  se_domain = kwar
+000383e0: 6773 2e67 6574 2827 7072 6f66 6573 7369  gs.get('professi
+000383f0: 6f6e 616c 5f66 6965 6c64 272c 2027 6765  onal_field', 'ge
+00038400: 6e65 7261 6c27 290d 0a20 2020 2020 2020  neral')..       
+00038410: 2074 696d 656f 7574 203d 206b 7761 7267   timeout = kwarg
+00038420: 732e 6765 7428 2774 696d 656f 7574 272c  s.get('timeout',
+00038430: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
+00038440: 7072 6f78 6965 7320 3d20 6b77 6172 6773  proxies = kwargs
+00038450: 2e67 6574 2827 7072 6f78 6965 7327 2c20  .get('proxies', 
+00038460: 4e6f 6e65 290d 0a20 2020 2020 2020 2073  None)..        s
+00038470: 6c65 6570 5f73 6563 6f6e 6473 203d 206b  leep_seconds = k
+00038480: 7761 7267 732e 6765 7428 2773 6c65 6570  wargs.get('sleep
+00038490: 5f73 6563 6f6e 6473 272c 2030 290d 0a20  _seconds', 0).. 
+000384a0: 2020 2020 2020 2069 665f 7072 696e 745f         if_print_
+000384b0: 7761 726e 696e 6720 3d20 6b77 6172 6773  warning = kwargs
+000384c0: 2e67 6574 2827 6966 5f70 7269 6e74 5f77  .get('if_print_w
+000384d0: 6172 6e69 6e67 272c 2054 7275 6529 0d0a  arning', True)..
+000384e0: 2020 2020 2020 2020 6973 5f64 6574 6169          is_detai
+000384f0: 6c5f 7265 7375 6c74 203d 206b 7761 7267  l_result = kwarg
+00038500: 732e 6765 7428 2769 735f 6465 7461 696c  s.get('is_detail
+00038510: 5f72 6573 756c 7427 2c20 4661 6c73 6529  _result', False)
+00038520: 0d0a 2020 2020 2020 2020 7570 6461 7465  ..        update
+00038530: 5f73 6573 7369 6f6e 5f61 6674 6572 5f66  _session_after_f
+00038540: 7265 7120 3d20 6b77 6172 6773 2e67 6574  req = kwargs.get
+00038550: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
+00038560: 5f61 6674 6572 5f66 7265 7127 2c20 7365  _after_freq', se
+00038570: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
+00038580: 6f6e 5f66 7265 7129 0d0a 2020 2020 2020  on_freq)..      
+00038590: 2020 7570 6461 7465 5f73 6573 7369 6f6e    update_session
+000385a0: 5f61 6674 6572 5f73 6563 6f6e 6473 203d  _after_seconds =
+000385b0: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
+000385c0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+000385d0: 725f 7365 636f 6e64 7327 2c20 7365 6c66  r_seconds', self
+000385e0: 2e64 6566 6175 6c74 5f73 6573 7369 6f6e  .default_session
+000385f0: 5f73 6563 6f6e 6473 290d 0a20 2020 2020  _seconds)..     
+00038600: 2020 2073 656c 662e 6368 6563 6b5f 696e     self.check_in
+00038610: 7075 745f 6c69 6d69 7428 7175 6572 795f  put_limit(query_
+00038620: 7465 7874 2c20 7365 6c66 2e69 6e70 7574  text, self.input
+00038630: 5f6c 696d 6974 290d 0a0d 0a20 2020 2020  _limit)....     
+00038640: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
+00038650: 6e64 5f66 7265 7120 3d20 3120 6966 2073  nd_freq = 1 if s
+00038660: 656c 662e 7175 6572 795f 636f 756e 7420  elf.query_count 
+00038670: 2520 7570 6461 7465 5f73 6573 7369 6f6e  % update_session
+00038680: 5f61 6674 6572 5f66 7265 7120 213d 2030  _after_freq != 0
+00038690: 2065 6c73 6520 300d 0a20 2020 2020 2020   else 0..       
+000386a0: 206e 6f74 5f75 7064 6174 655f 636f 6e64   not_update_cond
+000386b0: 5f74 696d 6520 3d20 3120 6966 2074 696d  _time = 1 if tim
+000386c0: 652e 7469 6d65 2829 202d 2073 656c 662e  e.time() - self.
+000386d0: 6265 6769 6e5f 7469 6d65 203c 2075 7064  begin_time < upd
+000386e0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+000386f0: 725f 7365 636f 6e64 7320 656c 7365 2030  r_seconds else 0
+00038700: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
+00038710: 2028 7365 6c66 2e73 6573 7369 6f6e 2061   (self.session a
+00038720: 6e64 2073 656c 662e 6c61 6e67 7561 6765  nd self.language
+00038730: 5f6d 6170 2061 6e64 206e 6f74 5f75 7064  _map and not_upd
+00038740: 6174 655f 636f 6e64 5f66 7265 7120 616e  ate_cond_freq an
+00038750: 6420 6e6f 745f 7570 6461 7465 5f63 6f6e  d not_update_con
+00038760: 645f 7469 6d65 293a 0d0a 2020 2020 2020  d_time):..      
+00038770: 2020 2020 2020 7365 6c66 2e62 6567 696e        self.begin
+00038780: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
+00038790: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
+000387a0: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
+000387b0: 7265 7175 6573 7473 2e53 6573 7369 6f6e  requests.Session
+000387c0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+000387d0: 5f20 3d20 7365 6c66 2e73 6573 7369 6f6e  _ = self.session
+000387e0: 2e67 6574 2873 656c 662e 686f 7374 5f75  .get(self.host_u
+000387f0: 726c 2c20 6865 6164 6572 733d 7365 6c66  rl, headers=self
+00038800: 2e68 6f73 745f 6865 6164 6572 732c 2074  .host_headers, t
+00038810: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
+00038820: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
+00038830: 0d0a 2020 2020 2020 2020 2020 2020 5f20  ..            _ 
+00038840: 3d20 7365 6c66 2e73 6573 7369 6f6e 2e67  = self.session.g
+00038850: 6574 2873 656c 662e 6765 745f 636f 6f6b  et(self.get_cook
+00038860: 6965 5f75 726c 2c20 6865 6164 6572 733d  ie_url, headers=
+00038870: 7365 6c66 2e61 7069 5f68 6561 6465 7273  self.api_headers
+00038880: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
+00038890: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
+000388a0: 6573 290d 0a20 2020 2020 2020 2020 2020  es)..           
+000388b0: 2064 5f6c 616e 675f 6d61 7020 3d20 7365   d_lang_map = se
+000388c0: 6c66 2e73 6573 7369 6f6e 2e67 6574 2873  lf.session.get(s
+000388d0: 656c 662e 6765 745f 6c61 6e67 5f75 726c  elf.get_lang_url
+000388e0: 2c20 6865 6164 6572 733d 7365 6c66 2e61  , headers=self.a
+000388f0: 7069 5f68 6561 6465 7273 2c20 7469 6d65  pi_headers, time
+00038900: 6f75 743d 7469 6d65 6f75 742c 2070 726f  out=timeout, pro
+00038910: 7869 6573 3d70 726f 7869 6573 292e 6a73  xies=proxies).js
+00038920: 6f6e 2829 0d0a 2020 2020 2020 2020 2020  on()..          
+00038930: 2020 6465 6275 675f 6c61 6e67 5f6b 7761    debug_lang_kwa
+00038940: 7267 7320 3d20 7365 6c66 2e64 6562 7567  rgs = self.debug
+00038950: 5f6c 616e 675f 6b77 6172 6773 2866 726f  _lang_kwargs(fro
+00038960: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
+00038970: 616e 6775 6167 652c 2073 656c 662e 6465  anguage, self.de
+00038980: 6661 756c 745f 6672 6f6d 5f6c 616e 6775  fault_from_langu
+00038990: 6167 652c 2069 665f 7072 696e 745f 7761  age, if_print_wa
+000389a0: 726e 696e 6729 0d0a 2020 2020 2020 2020  rning)..        
+000389b0: 2020 2020 7365 6c66 2e6c 616e 6775 6167      self.languag
+000389c0: 655f 6d61 7020 3d20 7365 6c66 2e67 6574  e_map = self.get
+000389d0: 5f6c 616e 6775 6167 655f 6d61 7028 645f  _language_map(d_
+000389e0: 6c61 6e67 5f6d 6170 2c20 2a2a 6465 6275  lang_map, **debu
+000389f0: 675f 6c61 6e67 5f6b 7761 7267 7329 0d0a  g_lang_kwargs)..
+00038a00: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00038a10: 2e6c 616e 6770 6169 725f 646f 6d61 696e  .langpair_domain
+00038a20: 203d 2073 656c 662e 6765 745f 6c61 6e67   = self.get_lang
+00038a30: 7061 6972 5f64 6f6d 6169 6e28 645f 6c61  pair_domain(d_la
+00038a40: 6e67 5f6d 6170 290d 0a20 2020 2020 2020  ng_map)..       
+00038a50: 2020 2020 2073 656c 662e 7072 6f66 6573       self.profes
+00038a60: 7369 6f6e 616c 5f66 6965 6c64 203d 2073  sional_field = s
+00038a70: 656c 662e 6765 745f 7072 6f66 6573 7369  elf.get_professi
+00038a80: 6f6e 616c 5f66 6965 6c64 5f6c 6973 7428  onal_field_list(
+00038a90: 645f 6c61 6e67 5f6d 6170 290d 0a0d 0a20  d_lang_map).... 
+00038aa0: 2020 2020 2020 2069 6620 6672 6f6d 5f6c         if from_l
+00038ab0: 616e 6775 6167 6520 3d3d 2027 6175 746f  anguage == 'auto
+00038ac0: 273a 0d0a 2020 2020 2020 2020 2020 2020  ':..            
+00038ad0: 7061 796c 6f61 6420 3d20 7b27 7465 7874  payload = {'text
+00038ae0: 273a 2071 7565 7279 5f74 6578 747d 0d0a  ': query_text}..
+00038af0: 2020 2020 2020 2020 2020 2020 7220 3d20              r = 
+00038b00: 7365 6c66 2e73 6573 7369 6f6e 2e70 6f73  self.session.pos
+00038b10: 7428 7365 6c66 2e64 6574 6563 745f 6c61  t(self.detect_la
+00038b20: 6e67 5f75 726c 2c20 6a73 6f6e 3d70 6179  ng_url, json=pay
+00038b30: 6c6f 6164 2c20 6865 6164 6572 733d 7365  load, headers=se
+00038b40: 6c66 2e61 7069 5f68 6561 6465 7273 2c20  lf.api_headers, 
+00038b50: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+00038b60: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+00038b70: 290d 0a20 2020 2020 2020 2020 2020 2066  )..            f
+00038b80: 726f 6d5f 6c61 6e67 7561 6765 203d 2072  rom_language = r
+00038b90: 2e6a 736f 6e28 295b 2764 6174 6127 5d5b  .json()['data'][
+00038ba0: 276c 616e 6775 6167 6527 5d0d 0a20 2020  'language']..   
+00038bb0: 2020 2020 2066 726f 6d5f 6c61 6e67 7561       from_langua
+00038bc0: 6765 2c20 746f 5f6c 616e 6775 6167 6520  ge, to_language 
+00038bd0: 3d20 6672 6f6d 5f6c 616e 6775 6167 652e  = from_language.
+00038be0: 6c6f 7765 7228 292c 2074 6f5f 6c61 6e67  lower(), to_lang
+00038bf0: 7561 6765 2e6c 6f77 6572 2829 2020 2320  uage.lower()  # 
+00038c00: 6d75 7374 206c 6f77 6572 0d0a 2020 2020  must lower..    
+00038c10: 2020 2020 6672 6f6d 5f6c 616e 6775 6167      from_languag
+00038c20: 652c 2074 6f5f 6c61 6e67 7561 6765 203d  e, to_language =
+00038c30: 2073 656c 662e 6368 6563 6b5f 6c61 6e67   self.check_lang
+00038c40: 7561 6765 2866 726f 6d5f 6c61 6e67 7561  uage(from_langua
+00038c50: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
+00038c60: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+00038c70: 6170 2c20 6f75 7470 7574 5f7a 683d 7365  ap, output_zh=se
+00038c80: 6c66 2e6f 7574 7075 745f 7a68 2c0d 0a20  lf.output_zh,.. 
+00038c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038cc0: 2020 2020 2020 2020 6f75 7470 7574 5f65          output_e
+00038cd0: 6e5f 7472 616e 736c 6174 6f72 3d27 636c  n_translator='cl
+00038ce0: 6f75 6454 7261 6e73 6c61 7469 6f6e 272c  oudTranslation',
+00038cf0: 206f 7574 7075 745f 656e 3d73 656c 662e   output_en=self.
+00038d00: 6f75 7470 7574 5f65 6e29 0d0a 0d0a 2020  output_en)....  
+00038d10: 2020 2020 2020 646f 6d61 696e 7320 3d20        domains = 
+00038d20: 7365 6c66 2e6c 616e 6770 6169 725f 646f  self.langpair_do
+00038d30: 6d61 696e 2e67 6574 2866 277b 6672 6f6d  main.get(f'{from
+00038d40: 5f6c 616e 6775 6167 657d 5f7b 746f 5f6c  _language}_{to_l
+00038d50: 616e 6775 6167 657d 2729 0d0a 2020 2020  anguage}')..    
+00038d60: 2020 2020 6966 206e 6f74 2064 6f6d 6169      if not domai
+00038d70: 6e73 3a0d 0a20 2020 2020 2020 2020 2020  ns:..           
+00038d80: 2072 6169 7365 2054 7261 6e73 6c61 746f   raise Translato
+00038d90: 7245 7272 6f72 0d0a 0d0a 2020 2020 2020  rError....      
+00038da0: 2020 6966 2075 7365 5f64 6f6d 6169 6e20    if use_domain 
+00038db0: 6e6f 7420 696e 2064 6f6d 6169 6e73 3a0d  not in domains:.
+00038dc0: 0a20 2020 2020 2020 2020 2020 2075 7365  .            use
+00038dd0: 5f64 6f6d 6169 6e20 3d20 646f 6d61 696e  _domain = domain
+00038de0: 735b 305d 0d0a 0d0a 2020 2020 2020 2020  s[0]....        
+00038df0: 7061 796c 6f61 6420 3d20 7b0d 0a20 2020  payload = {..   
+00038e00: 2020 2020 2020 2020 2027 7479 7065 273a           'type':
+00038e10: 2027 7465 7874 272c 0d0a 2020 2020 2020   'text',..      
+00038e20: 2020 2020 2020 2774 6578 7427 3a20 7175        'text': qu
+00038e30: 6572 795f 7465 7874 2c0d 0a20 2020 2020  ery_text,..     
+00038e40: 2020 2020 2020 2027 646f 6d61 696e 273a         'domain':
+00038e50: 2075 7365 5f64 6f6d 6169 6e2c 0d0a 2020   use_domain,..  
+00038e60: 2020 2020 2020 2020 2020 2773 7263 5f6c            'src_l
+00038e70: 616e 6727 3a20 6672 6f6d 5f6c 616e 6775  ang': from_langu
+00038e80: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
+00038e90: 2020 2774 6774 5f6c 616e 6727 3a20 746f    'tgt_lang': to
+00038ea0: 5f6c 616e 6775 6167 652c 0d0a 2020 2020  _language,..    
+00038eb0: 2020 2020 7d0d 0a20 2020 2020 2020 2072      }..        r
+00038ec0: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
+00038ed0: 706f 7374 2873 656c 662e 6170 695f 7572  post(self.api_ur
+00038ee0: 6c2c 206a 736f 6e3d 7061 796c 6f61 642c  l, json=payload,
+00038ef0: 2068 6561 6465 7273 3d73 656c 662e 6170   headers=self.ap
+00038f00: 695f 6865 6164 6572 732c 2074 696d 656f  i_headers, timeo
+00038f10: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
+00038f20: 6965 733d 7072 6f78 6965 7329 0d0a 2020  ies=proxies)..  
+00038f30: 2020 2020 2020 722e 7261 6973 655f 666f        r.raise_fo
+00038f40: 725f 7374 6174 7573 2829 0d0a 2020 2020  r_status()..    
+00038f50: 2020 2020 6461 7461 203d 2072 2e6a 736f      data = r.jso
+00038f60: 6e28 290d 0a20 2020 2020 2020 2074 696d  n()..        tim
+00038f70: 652e 736c 6565 7028 736c 6565 705f 7365  e.sleep(sleep_se
+00038f80: 636f 6e64 7329 0d0a 2020 2020 2020 2020  conds)..        
+00038f90: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
+00038fa0: 202b 3d20 310d 0a20 2020 2020 2020 2072   += 1..        r
+00038fb0: 6574 7572 6e20 6461 7461 2069 6620 6973  eturn data if is
+00038fc0: 5f64 6574 6169 6c5f 7265 7375 6c74 2065  _detail_result e
+00038fd0: 6c73 6520 6a73 6f6e 2e6c 6f61 6473 2864  lse json.loads(d
+00038fe0: 6174 615b 2764 6174 6127 5d5b 2764 6174  ata['data']['dat
+00038ff0: 6127 5d29 5b27 7472 616e 736c 6174 696f  a'])['translatio
+00039000: 6e27 5d0d 0a0d 0a0d 0a63 6c61 7373 2053  n']......class S
+00039010: 7973 5472 616e 2854 7365 293a 0d0a 2020  ysTran(Tse):..  
+00039020: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
+00039030: 656c 6629 3a0d 0a20 2020 2020 2020 2073  elf):..        s
+00039040: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
+00039050: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00039060: 6265 6769 6e5f 7469 6d65 203d 2074 696d  begin_time = tim
+00039070: 652e 7469 6d65 2829 0d0a 2020 2020 2020  e.time()..      
+00039080: 2020 7365 6c66 2e68 6f6d 655f 7572 6c20    self.home_url 
+00039090: 3d20 2768 7474 7073 3a2f 2f77 7777 2e73  = 'https://www.s
+000390a0: 7973 7472 616e 2e6e 6574 270d 0a20 2020  ystran.net'..   
+000390b0: 2020 2020 2073 656c 662e 686f 7374 5f75       self.host_u
+000390c0: 726c 203d 2027 6874 7470 733a 2f2f 7777  rl = 'https://ww
+000390d0: 772e 7379 7374 7261 6e2e 6e65 742f 7472  w.systran.net/tr
+000390e0: 616e 736c 6174 652f 270d 0a20 2020 2020  anslate/'..     
+000390f0: 2020 2073 656c 662e 6170 695f 7572 6c20     self.api_url 
+00039100: 3d20 2768 7474 7073 3a2f 2f61 7069 2d74  = 'https://api-t
+00039110: 7261 6e73 6c61 7465 2e73 7973 7472 616e  ranslate.systran
+00039120: 2e6e 6574 2f74 7261 6e73 6c61 7469 6f6e  .net/translation
+00039130: 2f74 6578 742f 7472 616e 736c 6174 6527  /text/translate'
+00039140: 0d0a 2020 2020 2020 2020 7365 6c66 2e67  ..        self.g
+00039150: 6574 5f6c 616e 675f 7572 6c20 3d20 2768  et_lang_url = 'h
+00039160: 7474 7073 3a2f 2f61 7069 2d74 7261 6e73  ttps://api-trans
+00039170: 6c61 7465 2e73 7973 7472 616e 2e6e 6574  late.systran.net
+00039180: 2f74 7261 6e73 6c61 7469 6f6e 2f73 7570  /translation/sup
+00039190: 706f 7274 6564 4c61 6e67 7561 6765 7327  portedLanguages'
+000391a0: 0d0a 2020 2020 2020 2020 7365 6c66 2e67  ..        self.g
+000391b0: 6574 5f74 6f6b 656e 5f75 726c 203d 2027  et_token_url = '
+000391c0: 6874 7470 733a 2f2f 7472 616e 736c 6174  https://translat
+000391d0: 652e 7379 7374 7261 6e2e 6e65 742f 6f69  e.systran.net/oi
+000391e0: 6463 2f74 6f6b 656e 270d 0a20 2020 2020  dc/token'..     
+000391f0: 2020 2073 656c 662e 6765 745f 636c 6965     self.get_clie
+00039200: 6e74 5f75 726c 203d 2027 6874 7470 733a  nt_url = 'https:
+00039210: 2f2f 7777 772e 7379 7374 7261 6e2e 6e65  //www.systran.ne
+00039220: 742f 7770 2d63 6f6e 7465 6e74 2f74 6865  t/wp-content/the
+00039230: 6d65 732f 7379 7374 7261 6e2f 7472 616e  mes/systran/tran
+00039240: 736c 6174 6f72 2f6a 732f 7472 616e 736c  slator/js/transl
+00039250: 6174 6542 6f78 2e62 756e 646c 652e 6a73  ateBox.bundle.js
+00039260: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+00039270: 686f 7374 5f68 6561 6465 7273 203d 2073  host_headers = s
+00039280: 656c 662e 6765 745f 6865 6164 6572 7328  elf.get_headers(
+00039290: 7365 6c66 2e68 6f6d 655f 7572 6c2c 2069  self.home_url, i
+000392a0: 665f 6170 693d 4661 6c73 652c 2069 665f  f_api=False, if_
+000392b0: 7265 6665 7265 725f 666f 725f 686f 7374  referer_for_host
+000392c0: 3d54 7275 6529 0d0a 2020 2020 2020 2020  =True)..        
+000392d0: 7365 6c66 2e61 7069 5f61 6a61 785f 6865  self.api_ajax_he
+000392e0: 6164 6572 7320 3d20 7365 6c66 2e67 6574  aders = self.get
+000392f0: 5f68 6561 6465 7273 2873 656c 662e 686f  _headers(self.ho
+00039300: 6d65 5f75 726c 2c20 6966 5f61 7069 3d54  me_url, if_api=T
+00039310: 7275 652c 2069 665f 616a 6178 5f66 6f72  rue, if_ajax_for
+00039320: 5f61 7069 3d54 7275 6529 0d0a 2020 2020  _api=True)..    
+00039330: 2020 2020 7365 6c66 2e61 7069 5f6a 736f      self.api_jso
+00039340: 6e5f 6865 6164 6572 7320 3d20 7365 6c66  n_headers = self
+00039350: 2e67 6574 5f68 6561 6465 7273 2873 656c  .get_headers(sel
+00039360: 662e 686f 6d65 5f75 726c 2c20 6966 5f61  f.home_url, if_a
+00039370: 7069 3d54 7275 652c 2069 665f 6a73 6f6e  pi=True, if_json
+00039380: 5f66 6f72 5f61 7069 3d54 7275 6529 0d0a  _for_api=True)..
+00039390: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
+000393a0: 7369 6f6e 203d 204e 6f6e 650d 0a20 2020  sion = None..   
+000393b0: 2020 2020 2073 656c 662e 6c61 6e67 7561       self.langua
+000393c0: 6765 5f6d 6170 203d 204e 6f6e 650d 0a20  ge_map = None.. 
+000393d0: 2020 2020 2020 2073 656c 662e 7072 6f66         self.prof
+000393e0: 6573 7369 6f6e 616c 5f66 6965 6c64 203d  essional_field =
+000393f0: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
+00039400: 656c 662e 6c61 6e67 7061 6972 5f64 6f6d  elf.langpair_dom
+00039410: 6169 6e20 3d20 4e6f 6e65 0d0a 2020 2020  ain = None..    
+00039420: 2020 2020 7365 6c66 2e63 6c69 656e 745f      self.client_
+00039430: 6461 7461 203d 204e 6f6e 650d 0a20 2020  data = None..   
+00039440: 2020 2020 2073 656c 662e 746f 6b65 6e5f       self.token_
+00039450: 6461 7461 203d 204e 6f6e 650d 0a20 2020  data = None..   
+00039460: 2020 2020 2073 656c 662e 7175 6572 795f       self.query_
+00039470: 636f 756e 7420 3d20 300d 0a20 2020 2020  count = 0..     
+00039480: 2020 2073 656c 662e 6f75 7470 7574 5f7a     self.output_z
+00039490: 6820 3d20 277a 6827 0d0a 2020 2020 2020  h = 'zh'..      
+000394a0: 2020 7365 6c66 2e69 6e70 7574 5f6c 696d    self.input_lim
+000394b0: 6974 203d 2069 6e74 2835 6533 290d 0a20  it = int(5e3).. 
+000394c0: 2020 2020 2020 2073 656c 662e 6465 6661         self.defa
+000394d0: 756c 745f 6672 6f6d 5f6c 616e 6775 6167  ult_from_languag
+000394e0: 6520 3d20 7365 6c66 2e6f 7574 7075 745f  e = self.output_
+000394f0: 7a68 0d0a 0d0a 2020 2020 4054 7365 2e64  zh....    @Tse.d
+00039500: 6562 7567 5f6c 616e 6775 6167 655f 6d61  ebug_language_ma
+00039510: 700d 0a20 2020 2064 6566 2067 6574 5f6c  p..    def get_l
+00039520: 616e 6775 6167 655f 6d61 7028 7365 6c66  anguage_map(self
+00039530: 2c20 645f 6c61 6e67 5f6d 6170 3a20 6469  , d_lang_map: di
+00039540: 6374 2c20 2a2a 6b77 6172 6773 3a20 4c61  ct, **kwargs: La
+00039550: 6e67 4d61 704b 7761 7267 7354 7970 6529  ngMapKwargsType)
+00039560: 202d 3e20 6469 6374 3a0d 0a20 2020 2020   -> dict:..     
+00039570: 2020 2072 6574 7572 6e20 7b69 695b 2773     return {ii['s
+00039580: 6f75 7263 6527 5d3a 205b 6a6a 5b27 7461  ource']: [jj['ta
+00039590: 7267 6574 275d 2066 6f72 206a 6a20 696e  rget'] for jj in
+000395a0: 2064 5f6c 616e 675f 6d61 705b 276c 616e   d_lang_map['lan
+000395b0: 6775 6167 6550 6169 7273 275d 2069 6620  guagePairs'] if 
+000395c0: 6a6a 5b27 736f 7572 6365 275d 203d 3d20  jj['source'] == 
+000395d0: 6969 5b27 736f 7572 6365 275d 5d20 666f  ii['source']] fo
+000395e0: 7220 6969 2069 6e20 645f 6c61 6e67 5f6d  r ii in d_lang_m
+000395f0: 6170 5b27 6c61 6e67 7561 6765 5061 6972  ap['languagePair
+00039600: 7327 5d7d 0d0a 0d0a 2020 2020 6465 6620  s']}....    def 
+00039610: 6765 745f 7072 6f66 6573 7369 6f6e 616c  get_professional
+00039620: 5f66 6965 6c64 5f6c 6973 7428 7365 6c66  _field_list(self
+00039630: 2c20 645f 6c61 6e67 5f6d 6170 3a20 6469  , d_lang_map: di
+00039640: 6374 2920 2d3e 2073 6574 3a0d 0a20 2020  ct) -> set:..   
+00039650: 2020 2020 2072 6574 7572 6e20 7b69 745b       return {it[
+00039660: 2773 656c 6563 746f 7273 275d 5b27 646f  'selectors']['do
+00039670: 6d61 696e 275d 2066 6f72 2069 7465 6d20  main'] for item 
+00039680: 696e 2064 5f6c 616e 675f 6d61 705b 276c  in d_lang_map['l
+00039690: 616e 6775 6167 6550 6169 7273 275d 2066  anguagePairs'] f
+000396a0: 6f72 2069 7420 696e 2069 7465 6d5b 2770  or it in item['p
+000396b0: 726f 6669 6c65 7327 5d7d 0d0a 0d0a 2020  rofiles']}....  
+000396c0: 2020 6465 6620 6765 745f 6c61 6e67 7061    def get_langpa
+000396d0: 6972 5f64 6f6d 6169 6e28 7365 6c66 2c20  ir_domain(self, 
+000396e0: 645f 6c61 6e67 5f6d 6170 3a20 6469 6374  d_lang_map: dict
+000396f0: 2920 2d3e 2064 6963 743a 0d0a 2020 2020  ) -> dict:..    
+00039700: 2020 2020 6461 7461 203d 207b 0d0a 2020      data = {..  
+00039710: 2020 2020 2020 2020 2020 6627 7b69 7465            f'{ite
+00039720: 6d5b 2273 6f75 7263 6522 5d7d 5f5f 7b69  m["source"]}__{i
+00039730: 7465 6d5b 2274 6172 6765 7422 5d7d 5f5f  tem["target"]}__
+00039740: 7b69 745b 2273 656c 6563 746f 7273 225d  {it["selectors"]
+00039750: 5b22 646f 6d61 696e 225d 7d27 3a20 7b0d  ["domain"]}': {.
+00039760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00039770: 2027 646f 6d61 696e 273a 2069 745b 2273   'domain': it["s
+00039780: 656c 6563 746f 7273 225d 5b22 646f 6d61  electors"]["doma
+00039790: 696e 225d 2c0d 0a20 2020 2020 2020 2020  in"],..         
+000397a0: 2020 2020 2020 2027 6f77 6e65 7227 3a20         'owner': 
+000397b0: 6974 5b27 7365 6c65 6374 6f72 7327 5d5b  it['selectors'][
+000397c0: 276f 776e 6572 275d 2c0d 0a20 2020 2020  'owner'],..     
+000397d0: 2020 2020 2020 2020 2020 2027 7369 7a65             'size
+000397e0: 273a 2069 745b 2773 656c 6563 746f 7273  ': it['selectors
+000397f0: 275d 5b27 7369 7a65 275d 2c0d 0a20 2020  ']['size'],..   
+00039800: 2020 2020 2020 2020 207d 2066 6f72 2069           } for i
+00039810: 7465 6d20 696e 2064 5f6c 616e 675f 6d61  tem in d_lang_ma
+00039820: 705b 276c 616e 6775 6167 6550 6169 7273  p['languagePairs
+00039830: 275d 2066 6f72 2069 7420 696e 2069 7465  '] for it in ite
+00039840: 6d5b 2770 726f 6669 6c65 7327 5d0d 0a20  m['profiles'].. 
+00039850: 2020 2020 2020 207d 0d0a 2020 2020 2020         }..      
+00039860: 2020 7265 7475 726e 2064 6174 610d 0a0d    return data...
+00039870: 0a20 2020 2064 6566 2067 6574 5f63 6c69  .    def get_cli
+00039880: 656e 745f 6461 7461 2873 656c 662c 2063  ent_data(self, c
+00039890: 6c69 656e 745f 7572 6c3a 2073 7472 2c20  lient_url: str, 
+000398a0: 7373 3a20 5365 7373 696f 6e54 7970 652c  ss: SessionType,
+000398b0: 2068 6561 6465 7273 3a20 6469 6374 2c20   headers: dict, 
+000398c0: 7469 6d65 6f75 743a 2066 6c6f 6174 2c20  timeout: float, 
+000398d0: 7072 6f78 6965 733a 2064 6963 7429 202d  proxies: dict) -
+000398e0: 3e20 6469 6374 3a0d 0a20 2020 2020 2020  > dict:..       
+000398f0: 206a 735f 6874 6d6c 203d 2073 732e 6765   js_html = ss.ge
+00039900: 7428 636c 6965 6e74 5f75 726c 2c20 6865  t(client_url, he
+00039910: 6164 6572 733d 6865 6164 6572 732c 2074  aders=headers, t
+00039920: 696d 656f 7574 3d74 696d 656f 7574 2c20  imeout=timeout, 
+00039930: 7072 6f78 6965 733d 7072 6f78 6965 7329  proxies=proxies)
+00039940: 2e74 6578 740d 0a20 2020 2020 2020 2073  .text..        s
+00039950: 6561 7263 685f 6772 6f75 7073 203d 2072  earch_groups = r
+00039960: 652e 636f 6d70 696c 6528 2722 6874 7470  e.compile('"http
+00039970: 733a 2f2f 7472 616e 736c 6174 652e 7379  s://translate.sy
+00039980: 7374 7261 6e2e 6e65 742f 6f69 6463 222c  stran.net/oidc",
+00039990: 5c5c 773d 2228 2e2a 3f29 222c 5c5c 773d  \\w="(.*?)",\\w=
+000399a0: 2228 2e2a 3f29 223b 2729 2e73 6561 7263  "(.*?)";').searc
+000399b0: 6828 6a73 5f68 746d 6c29 2020 2320 5c5c  h(js_html)  # \\
+000399c0: 777b 317d 203d 3d20 5c5c 770d 0a20 2020  w{1} == \\w..   
+000399d0: 2020 2020 2063 6c69 656e 745f 6461 7461       client_data
+000399e0: 203d 207b 0d0a 2020 2020 2020 2020 2020   = {..          
+000399f0: 2020 2767 7261 6e74 5f74 7970 6527 3a20    'grant_type': 
+00039a00: 2763 6c69 656e 745f 6372 6564 656e 7469  'client_credenti
+00039a10: 616c 7327 2c0d 0a20 2020 2020 2020 2020  als',..         
+00039a20: 2020 2027 636c 6965 6e74 5f69 6427 3a20     'client_id': 
+00039a30: 7365 6172 6368 5f67 726f 7570 732e 6772  search_groups.gr
+00039a40: 6f75 7028 3129 2c0d 0a20 2020 2020 2020  oup(1),..       
+00039a50: 2020 2020 2027 636c 6965 6e74 5f73 6563       'client_sec
+00039a60: 7265 7427 3a20 7365 6172 6368 5f67 726f  ret': search_gro
+00039a70: 7570 732e 6772 6f75 7028 3229 2c0d 0a20  ups.group(2),.. 
+00039a80: 2020 2020 2020 207d 0d0a 2020 2020 2020         }..      
+00039a90: 2020 7265 7475 726e 2063 6c69 656e 745f    return client_
+00039aa0: 6461 7461 0d0a 0d0a 2020 2020 4054 7365  data....    @Tse
+00039ab0: 2e74 696d 655f 7374 6174 0d0a 2020 2020  .time_stat..    
+00039ac0: 4054 7365 2e63 6865 636b 5f71 7565 7279  @Tse.check_query
+00039ad0: 0d0a 2020 2020 6465 6620 7379 7354 7261  ..    def sysTra
+00039ae0: 6e5f 6170 6928 7365 6c66 2c20 7175 6572  n_api(self, quer
+00039af0: 795f 7465 7874 3a20 7374 722c 2066 726f  y_text: str, fro
+00039b00: 6d5f 6c61 6e67 7561 6765 3a20 7374 7220  m_language: str 
+00039b10: 3d20 2761 7574 6f27 2c20 746f 5f6c 616e  = 'auto', to_lan
+00039b20: 6775 6167 653a 2073 7472 203d 2027 656e  guage: str = 'en
+00039b30: 272c 202a 2a6b 7761 7267 733a 2041 7069  ', **kwargs: Api
+00039b40: 4b77 6172 6773 5479 7065 2920 2d3e 2055  KwargsType) -> U
+00039b50: 6e69 6f6e 5b73 7472 2c20 6469 6374 5d3a  nion[str, dict]:
+00039b60: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00039b70: 2020 2020 2020 2068 7474 7073 3a2f 2f77         https://w
+00039b80: 7777 2e73 7973 7472 616e 2e6e 6574 2f74  ww.systran.net/t
+00039b90: 7261 6e73 6c61 7465 2f0d 0a20 2020 2020  ranslate/..     
+00039ba0: 2020 203a 7061 7261 6d20 7175 6572 795f     :param query_
+00039bb0: 7465 7874 3a20 7374 722c 206d 7573 742e  text: str, must.
+00039bc0: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+00039bd0: 2066 726f 6d5f 6c61 6e67 7561 6765 3a20   from_language: 
+00039be0: 7374 722c 2064 6566 6175 6c74 2027 6175  str, default 'au
+00039bf0: 746f 272e 0d0a 2020 2020 2020 2020 3a70  to'...        :p
+00039c00: 6172 616d 2074 6f5f 6c61 6e67 7561 6765  aram to_language
+00039c10: 3a20 7374 722c 2064 6566 6175 6c74 2027  : str, default '
+00039c20: 656e 272e 0d0a 2020 2020 2020 2020 3a70  en'...        :p
+00039c30: 6172 616d 202a 2a6b 7761 7267 733a 0d0a  aram **kwargs:..
+00039c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00039c50: 3a70 6172 616d 2074 696d 656f 7574 3a20  :param timeout: 
+00039c60: 666c 6f61 742c 2064 6566 6175 6c74 204e  float, default N
+00039c70: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
+00039c80: 2020 2020 2020 3a70 6172 616d 2070 726f        :param pro
+00039c90: 7869 6573 3a20 6469 6374 2c20 6465 6661  xies: dict, defa
+00039ca0: 756c 7420 4e6f 6e65 2e0d 0a20 2020 2020  ult None...     
+00039cb0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00039cc0: 6d20 736c 6565 705f 7365 636f 6e64 733a  m sleep_seconds:
+00039cd0: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
+00039ce0: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+00039cf0: 2020 2020 3a70 6172 616d 2069 735f 6465      :param is_de
+00039d00: 7461 696c 5f72 6573 756c 743a 2062 6f6f  tail_result: boo
+00039d10: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+00039d20: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00039d30: 2020 203a 7061 7261 6d20 6966 5f69 676e     :param if_ign
+00039d40: 6f72 655f 6c69 6d69 745f 6f66 5f6c 656e  ore_limit_of_len
+00039d50: 6774 683a 2062 6f6f 6c2c 2064 6566 6175  gth: bool, defau
+00039d60: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+00039d70: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00039d80: 6d20 6c69 6d69 745f 6f66 5f6c 656e 6774  m limit_of_lengt
+00039d90: 683a 2069 6e74 2c20 6465 6661 756c 7420  h: int, default 
+00039da0: 3230 3030 302e 0d0a 2020 2020 2020 2020  20000...        
+00039db0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00039dc0: 665f 6967 6e6f 7265 5f65 6d70 7479 5f71  f_ignore_empty_q
+00039dd0: 7565 7279 3a20 626f 6f6c 2c20 6465 6661  uery: bool, defa
+00039de0: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+00039df0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00039e00: 616d 2075 7064 6174 655f 7365 7373 696f  am update_sessio
+00039e10: 6e5f 6166 7465 725f 6672 6571 3a20 696e  n_after_freq: in
+00039e20: 742c 2064 6566 6175 6c74 2031 3030 302e  t, default 1000.
+00039e30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00039e40: 2020 3a70 6172 616d 2075 7064 6174 655f    :param update_
+00039e50: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
+00039e60: 636f 6e64 733a 2066 6c6f 6174 2c20 6465  conds: float, de
+00039e70: 6661 756c 7420 3135 3030 2e0d 0a20 2020  fault 1500...   
+00039e80: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00039e90: 7261 6d20 6966 5f73 686f 775f 7469 6d65  ram if_show_time
+00039ea0: 5f73 7461 743a 2062 6f6f 6c2c 2064 6566  _stat: bool, def
+00039eb0: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
+00039ec0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00039ed0: 7261 6d20 7368 6f77 5f74 696d 655f 7374  ram show_time_st
+00039ee0: 6174 5f70 7265 6369 7369 6f6e 3a20 696e  at_precision: in
+00039ef0: 742c 2064 6566 6175 6c74 2032 2e0d 0a20  t, default 2... 
+00039f00: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00039f10: 7061 7261 6d20 6966 5f70 7269 6e74 5f77  param if_print_w
+00039f20: 6172 6e69 6e67 3a20 626f 6f6c 2c20 6465  arning: bool, de
+00039f30: 6661 756c 7420 5472 7565 2e0d 0a20 2020  fault True...   
+00039f40: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00039f50: 7261 6d20 7072 6f66 6573 7369 6f6e 616c  ram professional
+00039f60: 5f66 6965 6c64 3a20 7374 722c 2064 6566  _field: str, def
+00039f70: 6175 6c74 204e 6f6e 652e 0d0a 2020 2020  ault None...    
+00039f80: 2020 2020 3a72 6574 7572 6e3a 2073 7472      :return: str
+00039f90: 206f 7220 6469 6374 0d0a 2020 2020 2020   or dict..      
+00039fa0: 2020 2222 220d 0a0d 0a20 2020 2020 2020    """....       
+00039fb0: 2075 7365 5f64 6f6d 6169 6e20 3d20 6b77   use_domain = kw
+00039fc0: 6172 6773 2e67 6574 2827 7072 6f66 6573  args.get('profes
+00039fd0: 7369 6f6e 616c 5f66 6965 6c64 272c 2027  sional_field', '
+00039fe0: 4765 6e65 7269 6327 290d 0a20 2020 2020  Generic')..     
+00039ff0: 2020 2074 696d 656f 7574 203d 206b 7761     timeout = kwa
+0003a000: 7267 732e 6765 7428 2774 696d 656f 7574  rgs.get('timeout
+0003a010: 272c 204e 6f6e 6529 0d0a 2020 2020 2020  ', None)..      
+0003a020: 2020 7072 6f78 6965 7320 3d20 6b77 6172    proxies = kwar
+0003a030: 6773 2e67 6574 2827 7072 6f78 6965 7327  gs.get('proxies'
+0003a040: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
+0003a050: 2073 6c65 6570 5f73 6563 6f6e 6473 203d   sleep_seconds =
+0003a060: 206b 7761 7267 732e 6765 7428 2773 6c65   kwargs.get('sle
+0003a070: 6570 5f73 6563 6f6e 6473 272c 2030 290d  ep_seconds', 0).
+0003a080: 0a20 2020 2020 2020 2069 665f 7072 696e  .        if_prin
+0003a090: 745f 7761 726e 696e 6720 3d20 6b77 6172  t_warning = kwar
+0003a0a0: 6773 2e67 6574 2827 6966 5f70 7269 6e74  gs.get('if_print
+0003a0b0: 5f77 6172 6e69 6e67 272c 2054 7275 6529  _warning', True)
+0003a0c0: 0d0a 2020 2020 2020 2020 6973 5f64 6574  ..        is_det
+0003a0d0: 6169 6c5f 7265 7375 6c74 203d 206b 7761  ail_result = kwa
+0003a0e0: 7267 732e 6765 7428 2769 735f 6465 7461  rgs.get('is_deta
+0003a0f0: 696c 5f72 6573 756c 7427 2c20 4661 6c73  il_result', Fals
+0003a100: 6529 0d0a 2020 2020 2020 2020 7570 6461  e)..        upda
+0003a110: 7465 5f73 6573 7369 6f6e 5f61 6674 6572  te_session_after
+0003a120: 5f66 7265 7120 3d20 6b77 6172 6773 2e67  _freq = kwargs.g
+0003a130: 6574 2827 7570 6461 7465 5f73 6573 7369  et('update_sessi
+0003a140: 6f6e 5f61 6674 6572 5f66 7265 7127 2c20  on_after_freq', 
+0003a150: 7365 6c66 2e64 6566 6175 6c74 5f73 6573  self.default_ses
+0003a160: 7369 6f6e 5f66 7265 7129 0d0a 2020 2020  sion_freq)..    
+0003a170: 2020 2020 7570 6461 7465 5f73 6573 7369      update_sessi
+0003a180: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
+0003a190: 203d 206b 7761 7267 732e 6765 7428 2775   = kwargs.get('u
+0003a1a0: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+0003a1b0: 7465 725f 7365 636f 6e64 7327 2c20 7365  ter_seconds', se
+0003a1c0: 6c66 2e64 6566 6175 6c74 5f73 6573 7369  lf.default_sessi
+0003a1d0: 6f6e 5f73 6563 6f6e 6473 290d 0a20 2020  on_seconds)..   
+0003a1e0: 2020 2020 2073 656c 662e 6368 6563 6b5f       self.check_
+0003a1f0: 696e 7075 745f 6c69 6d69 7428 7175 6572  input_limit(quer
+0003a200: 795f 7465 7874 2c20 7365 6c66 2e69 6e70  y_text, self.inp
+0003a210: 7574 5f6c 696d 6974 290d 0a0d 0a20 2020  ut_limit)....   
+0003a220: 2020 2020 206e 6f74 5f75 7064 6174 655f       not_update_
+0003a230: 636f 6e64 5f66 7265 7120 3d20 3120 6966  cond_freq = 1 if
+0003a240: 2073 656c 662e 7175 6572 795f 636f 756e   self.query_coun
+0003a250: 7420 2520 7570 6461 7465 5f73 6573 7369  t % update_sessi
+0003a260: 6f6e 5f61 6674 6572 5f66 7265 7120 213d  on_after_freq !=
+0003a270: 2030 2065 6c73 6520 300d 0a20 2020 2020   0 else 0..     
+0003a280: 2020 206e 6f74 5f75 7064 6174 655f 636f     not_update_co
+0003a290: 6e64 5f74 696d 6520 3d20 3120 6966 2074  nd_time = 1 if t
+0003a2a0: 696d 652e 7469 6d65 2829 202d 2073 656c  ime.time() - sel
+0003a2b0: 662e 6265 6769 6e5f 7469 6d65 203c 2075  f.begin_time < u
+0003a2c0: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+0003a2d0: 7465 725f 7365 636f 6e64 7320 656c 7365  ter_seconds else
+0003a2e0: 2030 0d0a 2020 2020 2020 2020 6966 206e   0..        if n
+0003a2f0: 6f74 2028 7365 6c66 2e73 6573 7369 6f6e  ot (self.session
+0003a300: 2061 6e64 2073 656c 662e 6c61 6e67 7561   and self.langua
+0003a310: 6765 5f6d 6170 2061 6e64 206e 6f74 5f75  ge_map and not_u
+0003a320: 7064 6174 655f 636f 6e64 5f66 7265 7120  pdate_cond_freq 
+0003a330: 616e 6420 6e6f 745f 7570 6461 7465 5f63  and not_update_c
+0003a340: 6f6e 645f 7469 6d65 293a 0d0a 2020 2020  ond_time):..    
+0003a350: 2020 2020 2020 2020 7365 6c66 2e62 6567          self.beg
+0003a360: 696e 5f74 696d 6520 3d20 7469 6d65 2e74  in_time = time.t
+0003a370: 696d 6528 290d 0a20 2020 2020 2020 2020  ime()..         
+0003a380: 2020 2073 656c 662e 7365 7373 696f 6e20     self.session 
+0003a390: 3d20 7265 7175 6573 7473 2e53 6573 7369  = requests.Sessi
+0003a3a0: 6f6e 2829 0d0a 2020 2020 2020 2020 2020  on()..          
+0003a3b0: 2020 5f20 3d20 7365 6c66 2e73 6573 7369    _ = self.sessi
+0003a3c0: 6f6e 2e67 6574 2873 656c 662e 686f 7374  on.get(self.host
+0003a3d0: 5f75 726c 2c20 6865 6164 6572 733d 7365  _url, headers=se
+0003a3e0: 6c66 2e68 6f73 745f 6865 6164 6572 732c  lf.host_headers,
+0003a3f0: 2074 696d 656f 7574 3d74 696d 656f 7574   timeout=timeout
+0003a400: 2c20 7072 6f78 6965 733d 7072 6f78 6965  , proxies=proxie
+0003a410: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
+0003a420: 7365 6c66 2e63 6c69 656e 745f 6461 7461  self.client_data
+0003a430: 203d 2073 656c 662e 6765 745f 636c 6965   = self.get_clie
+0003a440: 6e74 5f64 6174 6128 7365 6c66 2e67 6574  nt_data(self.get
+0003a450: 5f63 6c69 656e 745f 7572 6c2c 2073 656c  _client_url, sel
+0003a460: 662e 7365 7373 696f 6e2c 2073 656c 662e  f.session, self.
+0003a470: 686f 7374 5f68 6561 6465 7273 2c20 7469  host_headers, ti
+0003a480: 6d65 6f75 742c 2070 726f 7869 6573 290d  meout, proxies).
+0003a490: 0a20 2020 2020 2020 2020 2020 2070 6179  .            pay
+0003a4a0: 6c6f 6164 203d 2075 726c 6c69 622e 7061  load = urllib.pa
+0003a4b0: 7273 652e 7572 6c65 6e63 6f64 6528 7365  rse.urlencode(se
+0003a4c0: 6c66 2e63 6c69 656e 745f 6461 7461 290d  lf.client_data).
+0003a4d0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0003a4e0: 662e 746f 6b65 6e5f 6461 7461 203d 2073  f.token_data = s
+0003a4f0: 656c 662e 7365 7373 696f 6e2e 706f 7374  elf.session.post
+0003a500: 2873 656c 662e 6765 745f 746f 6b65 6e5f  (self.get_token_
+0003a510: 7572 6c2c 2064 6174 613d 7061 796c 6f61  url, data=payloa
+0003a520: 642c 2068 6561 6465 7273 3d73 656c 662e  d, headers=self.
+0003a530: 6170 695f 616a 6178 5f68 6561 6465 7273  api_ajax_headers
+0003a540: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
+0003a550: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
+0003a560: 6573 292e 6a73 6f6e 2829 0d0a 0d0a 2020  es).json()....  
+0003a570: 2020 2020 2020 2020 2020 6865 6164 6572            header
+0003a580: 5f70 6172 616d 7320 3d20 7b0d 0a20 2020  _params = {..   
+0003a590: 2020 2020 2020 2020 2020 2020 2027 6175               'au
+0003a5a0: 7468 6f72 697a 6174 696f 6e27 3a20 6627  thorization': f'
+0003a5b0: 7b73 656c 662e 746f 6b65 6e5f 6461 7461  {self.token_data
+0003a5c0: 5b22 746f 6b65 6e5f 7479 7065 225d 7d20  ["token_type"]} 
+0003a5d0: 7b73 656c 662e 746f 6b65 6e5f 6461 7461  {self.token_data
+0003a5e0: 5b22 6163 6365 7373 5f74 6f6b 656e 225d  ["access_token"]
+0003a5f0: 7d27 2c0d 0a20 2020 2020 2020 2020 2020  }',..           
+0003a600: 2020 2020 2027 782d 7573 6572 2d61 6765       'x-user-age
+0003a610: 6e74 273a 2027 4669 6c65 2054 7261 6e73  nt': 'File Trans
+0003a620: 6c61 7465 2042 6f78 2050 6f72 7461 626c  late Box Portabl
+0003a630: 6527 2c0d 0a20 2020 2020 2020 2020 2020  e',..           
+0003a640: 207d 0d0a 2020 2020 2020 2020 2020 2020   }..            
+0003a650: 7365 6c66 2e61 7069 5f6a 736f 6e5f 6865  self.api_json_he
+0003a660: 6164 6572 732e 7570 6461 7465 2868 6561  aders.update(hea
+0003a670: 6465 725f 7061 7261 6d73 290d 0a0d 0a20  der_params).... 
+0003a680: 2020 2020 2020 2020 2020 2064 5f6c 616e             d_lan
+0003a690: 675f 6d61 7020 3d20 7365 6c66 2e73 6573  g_map = self.ses
+0003a6a0: 7369 6f6e 2e67 6574 2873 656c 662e 6765  sion.get(self.ge
+0003a6b0: 745f 6c61 6e67 5f75 726c 2c20 6865 6164  t_lang_url, head
+0003a6c0: 6572 733d 7365 6c66 2e61 7069 5f6a 736f  ers=self.api_jso
+0003a6d0: 6e5f 6865 6164 6572 732c 2074 696d 656f  n_headers, timeo
+0003a6e0: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
+0003a6f0: 6965 733d 7072 6f78 6965 7329 2e6a 736f  ies=proxies).jso
+0003a700: 6e28 290d 0a20 2020 2020 2020 2020 2020  n()..           
+0003a710: 2064 6562 7567 5f6c 616e 675f 6b77 6172   debug_lang_kwar
+0003a720: 6773 203d 2073 656c 662e 6465 6275 675f  gs = self.debug_
+0003a730: 6c61 6e67 5f6b 7761 7267 7328 6672 6f6d  lang_kwargs(from
+0003a740: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
+0003a750: 6e67 7561 6765 2c20 7365 6c66 2e64 6566  nguage, self.def
+0003a760: 6175 6c74 5f66 726f 6d5f 6c61 6e67 7561  ault_from_langua
+0003a770: 6765 2c20 6966 5f70 7269 6e74 5f77 6172  ge, if_print_war
+0003a780: 6e69 6e67 290d 0a20 2020 2020 2020 2020  ning)..         
+0003a790: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
+0003a7a0: 5f6d 6170 203d 2073 656c 662e 6765 745f  _map = self.get_
+0003a7b0: 6c61 6e67 7561 6765 5f6d 6170 2864 5f6c  language_map(d_l
+0003a7c0: 616e 675f 6d61 702c 202a 2a64 6562 7567  ang_map, **debug
+0003a7d0: 5f6c 616e 675f 6b77 6172 6773 290d 0a20  _lang_kwargs).. 
+0003a7e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0003a7f0: 7072 6f66 6573 7369 6f6e 616c 5f66 6965  professional_fie
+0003a800: 6c64 203d 2073 656c 662e 6765 745f 7072  ld = self.get_pr
+0003a810: 6f66 6573 7369 6f6e 616c 5f66 6965 6c64  ofessional_field
+0003a820: 5f6c 6973 7428 645f 6c61 6e67 5f6d 6170  _list(d_lang_map
+0003a830: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+0003a840: 656c 662e 6c61 6e67 7061 6972 5f64 6f6d  elf.langpair_dom
+0003a850: 6169 6e20 3d20 7365 6c66 2e67 6574 5f6c  ain = self.get_l
+0003a860: 616e 6770 6169 725f 646f 6d61 696e 2864  angpair_domain(d
+0003a870: 5f6c 616e 675f 6d61 7029 0d0a 0d0a 2020  _lang_map)....  
+0003a880: 2020 2020 2020 6672 6f6d 5f6c 616e 6775        from_langu
+0003a890: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
+0003a8a0: 203d 2073 656c 662e 6368 6563 6b5f 6c61   = self.check_la
+0003a8b0: 6e67 7561 6765 2866 726f 6d5f 6c61 6e67  nguage(from_lang
+0003a8c0: 7561 6765 2c20 746f 5f6c 616e 6775 6167  uage, to_languag
+0003a8d0: 652c 2073 656c 662e 6c61 6e67 7561 6765  e, self.language
+0003a8e0: 5f6d 6170 2c20 6f75 7470 7574 5f7a 683d  _map, output_zh=
+0003a8f0: 7365 6c66 2e6f 7574 7075 745f 7a68 290d  self.output_zh).
+0003a900: 0a20 2020 2020 2020 2069 6620 6672 6f6d  .        if from
+0003a910: 5f6c 616e 6775 6167 6520 3d3d 2027 6175  _language == 'au
+0003a920: 746f 273a 0d0a 2020 2020 2020 2020 2020  to':..          
+0003a930: 2020 6672 6f6d 5f6c 616e 6775 6167 6520    from_language 
+0003a940: 3d20 7365 6c66 2e77 6172 6e69 6e67 5f61  = self.warning_a
+0003a950: 7574 6f5f 6c61 6e67 2827 7379 7354 7261  uto_lang('sysTra
+0003a960: 6e27 2c20 7365 6c66 2e64 6566 6175 6c74  n', self.default
+0003a970: 5f66 726f 6d5f 6c61 6e67 7561 6765 2c20  _from_language, 
+0003a980: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
+0003a990: 290d 0a0d 0a20 2020 2020 2020 2070 6179  )....        pay
+0003a9a0: 6c6f 6164 203d 207b 0d0a 2020 2020 2020  load = {..      
+0003a9b0: 2020 2020 2020 2774 6172 6765 7427 3a20        'target': 
+0003a9c0: 746f 5f6c 616e 6775 6167 652c 0d0a 2020  to_language,..  
+0003a9d0: 2020 2020 2020 2020 2020 2773 6f75 7263            'sourc
+0003a9e0: 6527 3a20 6672 6f6d 5f6c 616e 6775 6167  e': from_languag
+0003a9f0: 6520 6966 2066 726f 6d5f 6c61 6e67 7561  e if from_langua
+0003aa00: 6765 2021 3d20 2761 7574 6f27 2065 6c73  ge != 'auto' els
+0003aa10: 6520 4e6f 6e65 2c0d 0a20 2020 2020 2020  e None,..       
+0003aa20: 2020 2020 2027 696e 7075 7473 273a 205b       'inputs': [
+0003aa30: 7061 7261 6772 6170 6820 666f 7220 7061  paragraph for pa
+0003aa40: 7261 6772 6170 6820 696e 2071 7565 7279  ragraph in query
+0003aa50: 5f74 6578 742e 7370 6c69 7428 275c 6e27  _text.split('\n'
+0003aa60: 2920 6966 2070 6172 6167 7261 7068 2e73  ) if paragraph.s
+0003aa70: 7472 6970 2829 5d2c 0d0a 2020 2020 2020  trip()],..      
+0003aa80: 2020 2020 2020 2766 6f72 6d61 7427 3a20        'format': 
+0003aa90: 2774 6578 742f 706c 6169 6e27 2c0d 0a20  'text/plain',.. 
+0003aaa0: 2020 2020 2020 2020 2020 2027 6175 746f             'auto
+0003aab0: 6465 7465 6374 696f 6e4d 6f64 6527 3a20  detectionMode': 
+0003aac0: 2773 696e 676c 6527 2c0d 0a20 2020 2020  'single',..     
+0003aad0: 2020 2020 2020 2027 7769 7468 496e 666f         'withInfo
+0003aae0: 273a 2027 7472 7565 272c 0d0a 2020 2020  ': 'true',..    
+0003aaf0: 2020 2020 2020 2020 2777 6974 6841 6e6e          'withAnn
+0003ab00: 6f74 6174 696f 6e73 273a 2027 7472 7565  otations': 'true
+0003ab10: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+0003ab20: 2770 726f 6669 6c65 4964 273a 204e 6f6e  'profileId': Non
+0003ab30: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+0003ab40: 2764 6f6d 6169 6e27 3a20 4e6f 6e65 2c0d  'domain': None,.
+0003ab50: 0a20 2020 2020 2020 2020 2020 2027 6f77  .            'ow
+0003ab60: 6e65 7227 3a20 4e6f 6e65 2c0d 0a20 2020  ner': None,..   
+0003ab70: 2020 2020 2020 2020 2027 7369 7a65 273a           'size':
+0003ab80: 204e 6f6e 652c 0d0a 2020 2020 2020 2020   None,..        
+0003ab90: 7d0d 0a20 2020 2020 2020 2069 6620 7573  }..        if us
+0003aba0: 655f 646f 6d61 696e 2061 6e64 2066 726f  e_domain and fro
+0003abb0: 6d5f 6c61 6e67 7561 6765 2021 3d20 2761  m_language != 'a
+0003abc0: 7574 6f27 3a0d 0a20 2020 2020 2020 2020  uto':..         
+0003abd0: 2020 2064 6f6d 6169 6e5f 7061 796c 6f61     domain_payloa
+0003abe0: 6420 3d20 7365 6c66 2e6c 616e 6770 6169  d = self.langpai
+0003abf0: 725f 646f 6d61 696e 2e67 6574 2866 277b  r_domain.get(f'{
+0003ac00: 6672 6f6d 5f6c 616e 6775 6167 657d 5f5f  from_language}__
+0003ac10: 7b74 6f5f 6c61 6e67 7561 6765 7d5f 5f7b  {to_language}__{
+0003ac20: 7573 655f 646f 6d61 696e 7d27 290d 0a20  use_domain}').. 
+0003ac30: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+0003ac40: 7420 646f 6d61 696e 5f70 6179 6c6f 6164  t domain_payload
+0003ac50: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0003ac60: 2020 2072 6169 7365 2054 7261 6e73 6c61     raise Transla
+0003ac70: 746f 7245 7272 6f72 0d0a 2020 2020 2020  torError..      
+0003ac80: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0003ac90: 2020 2020 2020 2020 2020 2020 2070 6179               pay
+0003aca0: 6c6f 6164 2e75 7064 6174 6528 646f 6d61  load.update(doma
+0003acb0: 696e 5f70 6179 6c6f 6164 290d 0a0d 0a20  in_payload).... 
+0003acc0: 2020 2020 2020 2072 203d 2073 656c 662e         r = self.
+0003acd0: 7365 7373 696f 6e2e 706f 7374 2873 656c  session.post(sel
+0003ace0: 662e 6170 695f 7572 6c2c 206a 736f 6e3d  f.api_url, json=
+0003acf0: 7061 796c 6f61 642c 2068 6561 6465 7273  payload, headers
+0003ad00: 3d73 656c 662e 6170 695f 6a73 6f6e 5f68  =self.api_json_h
+0003ad10: 6561 6465 7273 2c20 7469 6d65 6f75 743d  eaders, timeout=
+0003ad20: 7469 6d65 6f75 742c 2070 726f 7869 6573  timeout, proxies
+0003ad30: 3d70 726f 7869 6573 290d 0a20 2020 2020  =proxies)..     
+0003ad40: 2020 2072 2e72 6169 7365 5f66 6f72 5f73     r.raise_for_s
+0003ad50: 7461 7475 7328 290d 0a20 2020 2020 2020  tatus()..       
+0003ad60: 2064 6174 6120 3d20 722e 6a73 6f6e 2829   data = r.json()
+0003ad70: 0d0a 2020 2020 2020 2020 7469 6d65 2e73  ..        time.s
+0003ad80: 6c65 6570 2873 6c65 6570 5f73 6563 6f6e  leep(sleep_secon
+0003ad90: 6473 290d 0a20 2020 2020 2020 2073 656c  ds)..        sel
+0003ada0: 662e 7175 6572 795f 636f 756e 7420 2b3d  f.query_count +=
+0003adb0: 2031 0d0a 2020 2020 2020 2020 7265 7475   1..        retu
+0003adc0: 726e 2064 6174 6120 6966 2069 735f 6465  rn data if is_de
+0003add0: 7461 696c 5f72 6573 756c 7420 656c 7365  tail_result else
+0003ade0: 2027 5c6e 272e 6a6f 696e 2827 2027 2e6a   '\n'.join(' '.j
+0003adf0: 6f69 6e28 6974 5b27 616c 745f 7472 616e  oin(it['alt_tran
+0003ae00: 7365 7327 5d5b 305d 5b27 7461 7267 6574  ses'][0]['target
+0003ae10: 275d 5b27 7465 7874 275d 2066 6f72 2069  ']['text'] for i
+0003ae20: 7420 696e 2069 7465 6d5b 276f 7574 7075  t in item['outpu
+0003ae30: 7427 5d5b 2764 6f63 756d 656e 7473 275d  t']['documents']
+0003ae40: 5b30 5d5b 2774 7261 6e73 5f75 6e69 7473  [0]['trans_units
+0003ae50: 275d 5b30 5d5b 2773 656e 7465 6e63 6573  '][0]['sentences
+0003ae60: 275d 2920 666f 7220 6974 656d 2069 6e20  ']) for item in 
+0003ae70: 6461 7461 5b27 6f75 7470 7574 7327 5d29  data['outputs'])
+0003ae80: 0d0a 0d0a 0d0a 636c 6173 7320 5472 616e  ......class Tran
+0003ae90: 736c 6174 654d 6528 5473 6529 3a0d 0a20  slateMe(Tse):.. 
+0003aea0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+0003aeb0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+0003aec0: 7375 7065 7228 292e 5f5f 696e 6974 5f5f  super().__init__
+0003aed0: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
+0003aee0: 2e62 6567 696e 5f74 696d 6520 3d20 7469  .begin_time = ti
+0003aef0: 6d65 2e74 696d 6528 290d 0a20 2020 2020  me.time()..     
+0003af00: 2020 2073 656c 662e 686f 7374 5f75 726c     self.host_url
+0003af10: 203d 2027 6874 7470 733a 2f2f 7472 616e   = 'https://tran
+0003af20: 736c 6174 656d 652e 6e65 7477 6f72 6b2f  slateme.network/
+0003af30: 270d 0a20 2020 2020 2020 2073 656c 662e  '..        self.
+0003af40: 6170 695f 7572 6c20 3d20 2768 7474 7073  api_url = 'https
+0003af50: 3a2f 2f74 7261 6e73 6c61 7465 6d65 2e6e  ://translateme.n
+0003af60: 6574 776f 726b 2f77 702d 6164 6d69 6e2f  etwork/wp-admin/
+0003af70: 6164 6d69 6e2d 616a 6178 2e70 6870 270d  admin-ajax.php'.
+0003af80: 0a20 2020 2020 2020 2073 656c 662e 686f  .        self.ho
+0003af90: 7374 5f68 6561 6465 7273 203d 2073 656c  st_headers = sel
+0003afa0: 662e 6765 745f 6865 6164 6572 7328 7365  f.get_headers(se
+0003afb0: 6c66 2e68 6f73 745f 7572 6c2c 2069 665f  lf.host_url, if_
+0003afc0: 6170 693d 4661 6c73 652c 2069 665f 7265  api=False, if_re
+0003afd0: 6665 7265 725f 666f 725f 686f 7374 3d54  ferer_for_host=T
+0003afe0: 7275 6529 0d0a 2020 2020 2020 2020 7365  rue)..        se
+0003aff0: 6c66 2e61 7069 5f68 6561 6465 7273 203d  lf.api_headers =
+0003b000: 2073 656c 662e 6765 745f 6865 6164 6572   self.get_header
+0003b010: 7328 7365 6c66 2e68 6f73 745f 7572 6c2c  s(self.host_url,
+0003b020: 2069 665f 6170 693d 5472 7565 2c20 6966   if_api=True, if
+0003b030: 5f61 6a61 785f 666f 725f 6170 693d 5472  _ajax_for_api=Tr
+0003b040: 7565 290d 0a20 2020 2020 2020 2073 656c  ue)..        sel
+0003b050: 662e 7365 7373 696f 6e20 3d20 4e6f 6e65  f.session = None
+0003b060: 0d0a 2020 2020 2020 2020 7365 6c66 2e6c  ..        self.l
+0003b070: 616e 6775 6167 655f 6d61 7020 3d20 4e6f  anguage_map = No
+0003b080: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
+0003b090: 2e71 7565 7279 5f63 6f75 6e74 203d 2030  .query_count = 0
+0003b0a0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6f  ..        self.o
+0003b0b0: 7574 7075 745f 7a68 203d 2027 4368 696e  utput_zh = 'Chin
+0003b0c0: 6573 6527 0d0a 2020 2020 2020 2020 7365  ese'..        se
+0003b0d0: 6c66 2e6f 7574 7075 745f 656e 203d 2027  lf.output_en = '
+0003b0e0: 456e 676c 6973 6827 0d0a 2020 2020 2020  English'..      
+0003b0f0: 2020 7365 6c66 2e69 6e70 7574 5f6c 696d    self.input_lim
+0003b100: 6974 203d 2069 6e74 2831 6532 290d 0a20  it = int(1e2).. 
+0003b110: 2020 2020 2020 2073 656c 662e 6465 6661         self.defa
+0003b120: 756c 745f 6672 6f6d 5f6c 616e 6775 6167  ult_from_languag
+0003b130: 6520 3d20 7365 6c66 2e6f 7574 7075 745f  e = self.output_
+0003b140: 7a68 0d0a 0d0a 2020 2020 4054 7365 2e64  zh....    @Tse.d
+0003b150: 6562 7567 5f6c 616e 6775 6167 655f 6d61  ebug_language_ma
+0003b160: 700d 0a20 2020 2064 6566 2067 6574 5f6c  p..    def get_l
+0003b170: 616e 6775 6167 655f 6d61 7028 7365 6c66  anguage_map(self
+0003b180: 2c20 686f 7374 5f68 746d 6c3a 2073 7472  , host_html: str
+0003b190: 2c20 2a2a 6b77 6172 6773 3a20 4c61 6e67  , **kwargs: Lang
+0003b1a0: 4d61 704b 7761 7267 7354 7970 6529 202d  MapKwargsType) -
+0003b1b0: 3e20 6469 6374 3a0d 0a20 2020 2020 2020  > dict:..       
+0003b1c0: 206c 616e 675f 6c69 7374 203d 2072 652e   lang_list = re.
+0003b1d0: 636f 6d70 696c 6528 2764 6174 612d 6c61  compile('data-la
+0003b1e0: 6e67 3d22 282e 2a3f 2922 2729 2e66 696e  ng="(.*?)"').fin
+0003b1f0: 6461 6c6c 2868 6f73 745f 6874 6d6c 290d  dall(host_html).
+0003b200: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+0003b210: 6c61 6e67 5f6c 6973 743a 0d0a 2020 2020  lang_list:..    
+0003b220: 2020 2020 2020 2020 7261 6973 6520 5472          raise Tr
+0003b230: 616e 736c 6174 6f72 4572 726f 720d 0a0d  anslatorError...
+0003b240: 0a20 2020 2020 2020 206c 616e 675f 6c69  .        lang_li
+0003b250: 7374 203d 2073 6f72 7465 6428 6c69 7374  st = sorted(list
+0003b260: 2873 6574 286c 616e 675f 6c69 7374 2929  (set(lang_list))
+0003b270: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+0003b280: 6e20 7b7d 2e66 726f 6d6b 6579 7328 6c61  n {}.fromkeys(la
+0003b290: 6e67 5f6c 6973 742c 206c 616e 675f 6c69  ng_list, lang_li
+0003b2a0: 7374 290d 0a0d 0a20 2020 2023 2040 5473  st)....    # @Ts
+0003b2b0: 652e 756e 6365 7274 6966 6965 640d 0a20  e.uncertified.. 
+0003b2c0: 2020 2023 2040 5473 652e 7469 6d65 5f73     # @Tse.time_s
+0003b2d0: 7461 740d 0a20 2020 2023 2040 5473 652e  tat..    # @Tse.
+0003b2e0: 6368 6563 6b5f 7175 6572 790d 0a20 2020  check_query..   
+0003b2f0: 2064 6566 205f 7472 616e 736c 6174 654d   def _translateM
+0003b300: 655f 6170 6928 7365 6c66 2c20 7175 6572  e_api(self, quer
+0003b310: 795f 7465 7874 3a20 7374 722c 2066 726f  y_text: str, fro
+0003b320: 6d5f 6c61 6e67 7561 6765 3a20 7374 7220  m_language: str 
+0003b330: 3d20 2761 7574 6f27 2c20 746f 5f6c 616e  = 'auto', to_lan
+0003b340: 6775 6167 653a 2073 7472 203d 2027 656e  guage: str = 'en
+0003b350: 272c 202a 2a6b 7761 7267 733a 2041 7069  ', **kwargs: Api
+0003b360: 4b77 6172 6773 5479 7065 2920 2d3e 2055  KwargsType) -> U
+0003b370: 6e69 6f6e 5b73 7472 2c20 6469 6374 5d3a  nion[str, dict]:
+0003b380: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0003b390: 2020 2020 2020 2068 7474 7073 3a2f 2f74         https://t
+0003b3a0: 7261 6e73 6c61 7465 6d65 2e6e 6574 776f  ranslateme.netwo
+0003b3b0: 726b 2f0d 0a20 2020 2020 2020 203a 7061  rk/..        :pa
+0003b3c0: 7261 6d20 7175 6572 795f 7465 7874 3a20  ram query_text: 
+0003b3d0: 7374 722c 206d 7573 742e 0d0a 2020 2020  str, must...    
+0003b3e0: 2020 2020 3a70 6172 616d 2066 726f 6d5f      :param from_
+0003b3f0: 6c61 6e67 7561 6765 3a20 7374 722c 2064  language: str, d
+0003b400: 6566 6175 6c74 2027 6175 746f 272e 0d0a  efault 'auto'...
+0003b410: 2020 2020 2020 2020 3a70 6172 616d 2074          :param t
+0003b420: 6f5f 6c61 6e67 7561 6765 3a20 7374 722c  o_language: str,
+0003b430: 2064 6566 6175 6c74 2027 656e 272e 0d0a   default 'en'...
+0003b440: 2020 2020 2020 2020 3a70 6172 616d 202a          :param *
+0003b450: 2a6b 7761 7267 733a 0d0a 2020 2020 2020  *kwargs:..      
+0003b460: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+0003b470: 2074 696d 656f 7574 3a20 666c 6f61 742c   timeout: float,
+0003b480: 2064 6566 6175 6c74 204e 6f6e 652e 0d0a   default None...
+0003b490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b4a0: 3a70 6172 616d 2070 726f 7869 6573 3a20  :param proxies: 
+0003b4b0: 6469 6374 2c20 6465 6661 756c 7420 4e6f  dict, default No
+0003b4c0: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
+0003b4d0: 2020 2020 203a 7061 7261 6d20 736c 6565       :param slee
+0003b4e0: 705f 7365 636f 6e64 733a 2066 6c6f 6174  p_seconds: float
+0003b4f0: 2c20 6465 6661 756c 7420 302e 0d0a 2020  , default 0...  
+0003b500: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+0003b510: 6172 616d 2069 735f 6465 7461 696c 5f72  aram is_detail_r
+0003b520: 6573 756c 743a 2062 6f6f 6c2c 2064 6566  esult: bool, def
+0003b530: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
+0003b540: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+0003b550: 7261 6d20 6966 5f69 676e 6f72 655f 6c69  ram if_ignore_li
+0003b560: 6d69 745f 6f66 5f6c 656e 6774 683a 2062  mit_of_length: b
+0003b570: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
+0003b580: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
+0003b590: 2020 2020 203a 7061 7261 6d20 6c69 6d69       :param limi
+0003b5a0: 745f 6f66 5f6c 656e 6774 683a 2069 6e74  t_of_length: int
+0003b5b0: 2c20 6465 6661 756c 7420 3230 3030 302e  , default 20000.
+0003b5c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0003b5d0: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
+0003b5e0: 7265 5f65 6d70 7479 5f71 7565 7279 3a20  re_empty_query: 
+0003b5f0: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
+0003b600: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
+0003b610: 2020 2020 2020 3a70 6172 616d 2075 7064        :param upd
+0003b620: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0003b630: 725f 6672 6571 3a20 696e 742c 2064 6566  r_freq: int, def
+0003b640: 6175 6c74 2031 3030 302e 0d0a 2020 2020  ault 1000...    
+0003b650: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+0003b660: 616d 2075 7064 6174 655f 7365 7373 696f  am update_sessio
+0003b670: 6e5f 6166 7465 725f 7365 636f 6e64 733a  n_after_seconds:
+0003b680: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
+0003b690: 3135 3030 2e0d 0a20 2020 2020 2020 2020  1500...         
+0003b6a0: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+0003b6b0: 5f73 686f 775f 7469 6d65 5f73 7461 743a  _show_time_stat:
+0003b6c0: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
+0003b6d0: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
+0003b6e0: 2020 2020 2020 203a 7061 7261 6d20 7368         :param sh
+0003b6f0: 6f77 5f74 696d 655f 7374 6174 5f70 7265  ow_time_stat_pre
+0003b700: 6369 7369 6f6e 3a20 696e 742c 2064 6566  cision: int, def
+0003b710: 6175 6c74 2032 2e0d 0a20 2020 2020 2020  ault 2...       
+0003b720: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+0003b730: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
+0003b740: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+0003b750: 5472 7565 2e0d 0a20 2020 2020 2020 203a  True...        :
+0003b760: 7265 7475 726e 3a20 7374 7220 6f72 2064  return: str or d
+0003b770: 6963 740d 0a20 2020 2020 2020 2022 2222  ict..        """
+0003b780: 0d0a 0d0a 2020 2020 2020 2020 7469 6d65  ....        time
+0003b790: 6f75 7420 3d20 6b77 6172 6773 2e67 6574  out = kwargs.get
+0003b7a0: 2827 7469 6d65 6f75 7427 2c20 4e6f 6e65  ('timeout', None
+0003b7b0: 290d 0a20 2020 2020 2020 2070 726f 7869  )..        proxi
+0003b7c0: 6573 203d 206b 7761 7267 732e 6765 7428  es = kwargs.get(
+0003b7d0: 2770 726f 7869 6573 272c 204e 6f6e 6529  'proxies', None)
+0003b7e0: 0d0a 2020 2020 2020 2020 736c 6565 705f  ..        sleep_
+0003b7f0: 7365 636f 6e64 7320 3d20 6b77 6172 6773  seconds = kwargs
+0003b800: 2e67 6574 2827 736c 6565 705f 7365 636f  .get('sleep_seco
+0003b810: 6e64 7327 2c20 3029 0d0a 2020 2020 2020  nds', 0)..      
+0003b820: 2020 6966 5f70 7269 6e74 5f77 6172 6e69    if_print_warni
+0003b830: 6e67 203d 206b 7761 7267 732e 6765 7428  ng = kwargs.get(
+0003b840: 2769 665f 7072 696e 745f 7761 726e 696e  'if_print_warnin
+0003b850: 6727 2c20 5472 7565 290d 0a20 2020 2020  g', True)..     
+0003b860: 2020 2069 735f 6465 7461 696c 5f72 6573     is_detail_res
+0003b870: 756c 7420 3d20 6b77 6172 6773 2e67 6574  ult = kwargs.get
+0003b880: 2827 6973 5f64 6574 6169 6c5f 7265 7375  ('is_detail_resu
+0003b890: 6c74 272c 2046 616c 7365 290d 0a20 2020  lt', False)..   
+0003b8a0: 2020 2020 2075 7064 6174 655f 7365 7373       update_sess
+0003b8b0: 696f 6e5f 6166 7465 725f 6672 6571 203d  ion_after_freq =
+0003b8c0: 206b 7761 7267 732e 6765 7428 2775 7064   kwargs.get('upd
+0003b8d0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0003b8e0: 725f 6672 6571 272c 2073 656c 662e 6465  r_freq', self.de
+0003b8f0: 6661 756c 745f 7365 7373 696f 6e5f 6672  fault_session_fr
+0003b900: 6571 290d 0a20 2020 2020 2020 2075 7064  eq)..        upd
+0003b910: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0003b920: 725f 7365 636f 6e64 7320 3d20 6b77 6172  r_seconds = kwar
+0003b930: 6773 2e67 6574 2827 7570 6461 7465 5f73  gs.get('update_s
+0003b940: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+0003b950: 6f6e 6473 272c 2073 656c 662e 6465 6661  onds', self.defa
+0003b960: 756c 745f 7365 7373 696f 6e5f 7365 636f  ult_session_seco
+0003b970: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
+0003b980: 6c66 2e63 6865 636b 5f69 6e70 7574 5f6c  lf.check_input_l
+0003b990: 696d 6974 2871 7565 7279 5f74 6578 742c  imit(query_text,
+0003b9a0: 2073 656c 662e 696e 7075 745f 6c69 6d69   self.input_limi
+0003b9b0: 7429 0d0a 0d0a 2020 2020 2020 2020 6e6f  t)....        no
+0003b9c0: 745f 7570 6461 7465 5f63 6f6e 645f 6672  t_update_cond_fr
+0003b9d0: 6571 203d 2031 2069 6620 7365 6c66 2e71  eq = 1 if self.q
+0003b9e0: 7565 7279 5f63 6f75 6e74 2025 2075 7064  uery_count % upd
+0003b9f0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0003ba00: 725f 6672 6571 2021 3d20 3020 656c 7365  r_freq != 0 else
+0003ba10: 2030 0d0a 2020 2020 2020 2020 6e6f 745f   0..        not_
+0003ba20: 7570 6461 7465 5f63 6f6e 645f 7469 6d65  update_cond_time
+0003ba30: 203d 2031 2069 6620 7469 6d65 2e74 696d   = 1 if time.tim
+0003ba40: 6528 2920 2d20 7365 6c66 2e62 6567 696e  e() - self.begin
+0003ba50: 5f74 696d 6520 3c20 7570 6461 7465 5f73  _time < update_s
+0003ba60: 6573 7369 6f6e 5f61 6674 6572 5f73 6563  ession_after_sec
+0003ba70: 6f6e 6473 2065 6c73 6520 300d 0a20 2020  onds else 0..   
+0003ba80: 2020 2020 2069 6620 6e6f 7420 2873 656c       if not (sel
+0003ba90: 662e 7365 7373 696f 6e20 616e 6420 7365  f.session and se
+0003baa0: 6c66 2e6c 616e 6775 6167 655f 6d61 7020  lf.language_map 
+0003bab0: 616e 6420 6e6f 745f 7570 6461 7465 5f63  and not_update_c
+0003bac0: 6f6e 645f 6672 6571 2061 6e64 206e 6f74  ond_freq and not
+0003bad0: 5f75 7064 6174 655f 636f 6e64 5f74 696d  _update_cond_tim
+0003bae0: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
+0003baf0: 2073 656c 662e 6265 6769 6e5f 7469 6d65   self.begin_time
+0003bb00: 203d 2074 696d 652e 7469 6d65 2829 0d0a   = time.time()..
+0003bb10: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0003bb20: 2e73 6573 7369 6f6e 203d 2072 6571 7565  .session = reque
+0003bb30: 7374 732e 5365 7373 696f 6e28 290d 0a20  sts.Session().. 
+0003bb40: 2020 2020 2020 2020 2020 2068 6f73 745f             host_
+0003bb50: 6874 6d6c 203d 2073 656c 662e 7365 7373  html = self.sess
+0003bb60: 696f 6e2e 6765 7428 7365 6c66 2e68 6f73  ion.get(self.hos
+0003bb70: 745f 7572 6c2c 2068 6561 6465 7273 3d73  t_url, headers=s
+0003bb80: 656c 662e 686f 7374 5f68 6561 6465 7273  elf.host_headers
+0003bb90: 2c20 7469 6d65 6f75 743d 7469 6d65 6f75  , timeout=timeou
+0003bba0: 742c 2070 726f 7869 6573 3d70 726f 7869  t, proxies=proxi
+0003bbb0: 6573 292e 7465 7874 0d0a 2020 2020 2020  es).text..      
+0003bbc0: 2020 2020 2020 6465 6275 675f 6c61 6e67        debug_lang
+0003bbd0: 5f6b 7761 7267 7320 3d20 7365 6c66 2e64  _kwargs = self.d
+0003bbe0: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
+0003bbf0: 2866 726f 6d5f 6c61 6e67 7561 6765 2c20  (from_language, 
+0003bc00: 746f 5f6c 616e 6775 6167 652c 2073 656c  to_language, sel
+0003bc10: 662e 6465 6661 756c 745f 6672 6f6d 5f6c  f.default_from_l
+0003bc20: 616e 6775 6167 652c 2069 665f 7072 696e  anguage, if_prin
+0003bc30: 745f 7761 726e 696e 6729 0d0a 2020 2020  t_warning)..    
+0003bc40: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
+0003bc50: 6775 6167 655f 6d61 7020 3d20 7365 6c66  guage_map = self
+0003bc60: 2e67 6574 5f6c 616e 6775 6167 655f 6d61  .get_language_ma
+0003bc70: 7028 686f 7374 5f68 746d 6c2c 202a 2a64  p(host_html, **d
+0003bc80: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
+0003bc90: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
+0003bca0: 6672 6f6d 5f6c 616e 6775 6167 6520 3d3d  from_language ==
+0003bcb0: 2027 6175 746f 273a 0d0a 2020 2020 2020   'auto':..      
+0003bcc0: 2020 2020 2020 6672 6f6d 5f6c 616e 6775        from_langu
+0003bcd0: 6167 6520 3d20 7365 6c66 2e77 6172 6e69  age = self.warni
+0003bce0: 6e67 5f61 7574 6f5f 6c61 6e67 2827 7472  ng_auto_lang('tr
+0003bcf0: 616e 736c 6174 654d 6527 2c20 7365 6c66  anslateMe', self
+0003bd00: 2e64 6566 6175 6c74 5f66 726f 6d5f 6c61  .default_from_la
+0003bd10: 6e67 7561 6765 2c20 6966 5f70 7269 6e74  nguage, if_print
+0003bd20: 5f77 6172 6e69 6e67 290d 0a20 2020 2020  _warning)..     
+0003bd30: 2020 2066 726f 6d5f 6c61 6e67 7561 6765     from_language
+0003bd40: 2c20 746f 5f6c 616e 6775 6167 6520 3d20  , to_language = 
+0003bd50: 7365 6c66 2e63 6865 636b 5f6c 616e 6775  self.check_langu
+0003bd60: 6167 6528 6672 6f6d 5f6c 616e 6775 6167  age(from_languag
+0003bd70: 652c 2074 6f5f 6c61 6e67 7561 6765 2c20  e, to_language, 
+0003bd80: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
+0003bd90: 702c 206f 7574 7075 745f 7a68 3d73 656c  p, output_zh=sel
+0003bda0: 662e 6f75 7470 7574 5f7a 682c 0d0a 2020  f.output_zh,..  
+0003bdb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bdc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bde0: 2020 2020 2020 206f 7574 7075 745f 656e         output_en
+0003bdf0: 5f74 7261 6e73 6c61 746f 723d 2774 7261  _translator='tra
+0003be00: 6e73 6c61 7465 4d65 272c 206f 7574 7075  nslateMe', outpu
+0003be10: 745f 656e 3d73 656c 662e 6f75 7470 7574  t_en=self.output
+0003be20: 5f65 6e29 0d0a 2020 2020 2020 2020 6966  _en)..        if
+0003be30: 2073 656c 662e 6f75 7470 7574 5f65 6e20   self.output_en 
+0003be40: 6e6f 7420 696e 2028 6672 6f6d 5f6c 616e  not in (from_lan
+0003be50: 6775 6167 652c 2074 6f5f 6c61 6e67 7561  guage, to_langua
+0003be60: 6765 293a 0d0a 2020 2020 2020 2020 2020  ge):..          
+0003be70: 2020 7261 6973 6520 5472 616e 736c 6174    raise Translat
+0003be80: 6f72 4572 726f 7228 274d 7573 7420 7573  orError('Must us
+0003be90: 6520 456e 676c 6973 6820 6173 2061 6e20  e English as an 
+0003bea0: 696e 7465 726d 6564 6961 7465 2074 7261  intermediate tra
+0003beb0: 6e73 6c61 7469 6f6e 2e27 290d 0a0d 0a20  nslation.').... 
+0003bec0: 2020 2020 2020 2064 6174 615f 6c69 7374         data_list
+0003bed0: 203d 205b 5d0d 0a20 2020 2020 2020 2070   = []..        p
+0003bee0: 6172 6167 7261 7068 7320 3d20 5b70 6172  aragraphs = [par
+0003bef0: 6167 7261 7068 2066 6f72 2070 6172 6167  agraph for parag
+0003bf00: 7261 7068 2069 6e20 7175 6572 795f 7465  raph in query_te
+0003bf10: 7874 2e73 706c 6974 2827 5c6e 2729 2069  xt.split('\n') i
+0003bf20: 6620 7061 7261 6772 6170 682e 7374 7269  f paragraph.stri
+0003bf30: 7028 295d 0d0a 2020 2020 2020 2020 666f  p()]..        fo
+0003bf40: 7220 7061 7261 6772 6170 6820 696e 2070  r paragraph in p
+0003bf50: 6172 6167 7261 7068 733a 0d0a 2020 2020  aragraphs:..    
+0003bf60: 2020 2020 2020 2020 7061 796c 6f61 6420          payload 
+0003bf70: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
+0003bf80: 2020 2020 2027 7465 7874 273a 2070 6172       'text': par
+0003bf90: 6167 7261 7068 2c0d 0a20 2020 2020 2020  agraph,..       
+0003bfa0: 2020 2020 2020 2020 2027 6c61 6e67 5f66           'lang_f
+0003bfb0: 726f 6d27 3a20 6672 6f6d 5f6c 616e 6775  rom': from_langu
+0003bfc0: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
+0003bfd0: 2020 2020 2020 276c 616e 675f 746f 273a        'lang_to':
+0003bfe0: 2074 6f5f 6c61 6e67 7561 6765 2c0d 0a20   to_language,.. 
+0003bff0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0003c000: 6163 7469 6f6e 273a 2027 746d 5f6d 795f  action': 'tm_my_
+0003c010: 6163 7469 6f6e 272c 0d0a 2020 2020 2020  action',..      
+0003c020: 2020 2020 2020 2020 2020 2774 7970 6527            'type'
+0003c030: 3a20 2763 6f6e 7665 7274 270d 0a20 2020  : 'convert'..   
+0003c040: 2020 2020 2020 2020 207d 0d0a 2020 2020           }..    
+0003c050: 2020 2020 2020 2020 7061 796c 6f61 6420          payload 
+0003c060: 3d20 7572 6c6c 6962 2e70 6172 7365 2e75  = urllib.parse.u
+0003c070: 726c 656e 636f 6465 2870 6179 6c6f 6164  rlencode(payload
+0003c080: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
+0003c090: 203d 2073 656c 662e 7365 7373 696f 6e2e   = self.session.
+0003c0a0: 706f 7374 2873 656c 662e 6170 695f 7572  post(self.api_ur
+0003c0b0: 6c2c 2064 6174 613d 7061 796c 6f61 642c  l, data=payload,
+0003c0c0: 2068 6561 6465 7273 3d73 656c 662e 6170   headers=self.ap
+0003c0d0: 695f 6865 6164 6572 732c 2074 696d 656f  i_headers, timeo
+0003c0e0: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
+0003c0f0: 6965 733d 7072 6f78 6965 7329 0d0a 2020  ies=proxies)..  
+0003c100: 2020 2020 2020 2020 2020 722e 7261 6973            r.rais
+0003c110: 655f 666f 725f 7374 6174 7573 2829 0d0a  e_for_status()..
+0003c120: 2020 2020 2020 2020 2020 2020 6461 7461              data
+0003c130: 203d 2072 2e6a 736f 6e28 290d 0a20 2020   = r.json()..   
+0003c140: 2020 2020 2020 2020 2064 6174 615f 6c69           data_li
+0003c150: 7374 2e61 7070 656e 6428 6461 7461 290d  st.append(data).
+0003c160: 0a20 2020 2020 2020 2074 696d 652e 736c  .        time.sl
+0003c170: 6565 7028 736c 6565 705f 7365 636f 6e64  eep(sleep_second
+0003c180: 7329 0d0a 2020 2020 2020 2020 7365 6c66  s)..        self
+0003c190: 2e71 7565 7279 5f63 6f75 6e74 202b 3d20  .query_count += 
+0003c1a0: 310d 0a20 2020 2020 2020 2072 6574 7572  1..        retur
+0003c1b0: 6e20 7b27 6461 7461 273a 2064 6174 615f  n {'data': data_
+0003c1c0: 6c69 7374 7d20 6966 2069 735f 6465 7461  list} if is_deta
+0003c1d0: 696c 5f72 6573 756c 7420 656c 7365 2027  il_result else '
+0003c1e0: 5c6e 272e 6a6f 696e 285b 6974 656d 5b27  \n'.join([item['
+0003c1f0: 746f 275d 2066 6f72 2069 7465 6d20 696e  to'] for item in
+0003c200: 2064 6174 615f 6c69 7374 5d29 0d0a 0d0a   data_list])....
+0003c210: 2020 2020 4054 7365 2e75 6e63 6572 7469      @Tse.uncerti
+0003c220: 6669 6564 0d0a 2020 2020 4054 7365 2e74  fied..    @Tse.t
+0003c230: 696d 655f 7374 6174 0d0a 2020 2020 4054  ime_stat..    @T
+0003c240: 7365 2e63 6865 636b 5f71 7565 7279 0d0a  se.check_query..
+0003c250: 2020 2020 6465 6620 7472 616e 736c 6174      def translat
+0003c260: 654d 655f 6170 6928 7365 6c66 2c20 7175  eMe_api(self, qu
+0003c270: 6572 795f 7465 7874 3a20 7374 722c 2066  ery_text: str, f
+0003c280: 726f 6d5f 6c61 6e67 7561 6765 3a20 7374  rom_language: st
+0003c290: 7220 3d20 2761 7574 6f27 2c20 746f 5f6c  r = 'auto', to_l
+0003c2a0: 616e 6775 6167 653a 2073 7472 203d 2027  anguage: str = '
+0003c2b0: 656e 272c 202a 2a6b 7761 7267 733a 2041  en', **kwargs: A
+0003c2c0: 7069 4b77 6172 6773 5479 7065 2920 2d3e  piKwargsType) ->
+0003c2d0: 2055 6e69 6f6e 5b73 7472 2c20 6469 6374   Union[str, dict
+0003c2e0: 5d3a 0d0a 2020 2020 2020 2020 2222 220d  ]:..        """.
+0003c2f0: 0a20 2020 2020 2020 2068 7474 7073 3a2f  .        https:/
+0003c300: 2f74 7261 6e73 6c61 7465 6d65 2e6e 6574  /translateme.net
+0003c310: 776f 726b 2f0d 0a20 2020 2020 2020 203a  work/..        :
+0003c320: 7061 7261 6d20 7175 6572 795f 7465 7874  param query_text
+0003c330: 3a20 7374 722c 206d 7573 742e 0d0a 2020  : str, must...  
+0003c340: 2020 2020 2020 3a70 6172 616d 2066 726f        :param fro
+0003c350: 6d5f 6c61 6e67 7561 6765 3a20 7374 722c  m_language: str,
+0003c360: 2064 6566 6175 6c74 2027 6175 746f 272e   default 'auto'.
+0003c370: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+0003c380: 2074 6f5f 6c61 6e67 7561 6765 3a20 7374   to_language: st
+0003c390: 722c 2064 6566 6175 6c74 2027 656e 272e  r, default 'en'.
+0003c3a0: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+0003c3b0: 202a 2a6b 7761 7267 733a 0d0a 2020 2020   **kwargs:..    
+0003c3c0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+0003c3d0: 616d 2074 696d 656f 7574 3a20 666c 6f61  am timeout: floa
+0003c3e0: 742c 2064 6566 6175 6c74 204e 6f6e 652e  t, default None.
+0003c3f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0003c400: 2020 3a70 6172 616d 2070 726f 7869 6573    :param proxies
+0003c410: 3a20 6469 6374 2c20 6465 6661 756c 7420  : dict, default 
+0003c420: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
+0003c430: 2020 2020 2020 203a 7061 7261 6d20 736c         :param sl
+0003c440: 6565 705f 7365 636f 6e64 733a 2066 6c6f  eep_seconds: flo
+0003c450: 6174 2c20 6465 6661 756c 7420 302e 0d0a  at, default 0...
+0003c460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c470: 3a70 6172 616d 2069 735f 6465 7461 696c  :param is_detail
+0003c480: 5f72 6573 756c 743a 2062 6f6f 6c2c 2064  _result: bool, d
+0003c490: 6566 6175 6c74 2046 616c 7365 2e0d 0a20  efault False... 
+0003c4a0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0003c4b0: 7061 7261 6d20 6966 5f69 676e 6f72 655f  param if_ignore_
+0003c4c0: 6c69 6d69 745f 6f66 5f6c 656e 6774 683a  limit_of_length:
+0003c4d0: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
+0003c4e0: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
+0003c4f0: 2020 2020 2020 203a 7061 7261 6d20 6c69         :param li
+0003c500: 6d69 745f 6f66 5f6c 656e 6774 683a 2069  mit_of_length: i
+0003c510: 6e74 2c20 6465 6661 756c 7420 3230 3030  nt, default 2000
+0003c520: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+0003c530: 2020 2020 3a70 6172 616d 2069 665f 6967      :param if_ig
+0003c540: 6e6f 7265 5f65 6d70 7479 5f71 7565 7279  nore_empty_query
+0003c550: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+0003c560: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
+0003c570: 2020 2020 2020 2020 3a70 6172 616d 2075          :param u
+0003c580: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+0003c590: 7465 725f 6672 6571 3a20 696e 742c 2064  ter_freq: int, d
+0003c5a0: 6566 6175 6c74 2031 3030 302e 0d0a 2020  efault 1000...  
+0003c5b0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+0003c5c0: 6172 616d 2075 7064 6174 655f 7365 7373  aram update_sess
+0003c5d0: 696f 6e5f 6166 7465 725f 7365 636f 6e64  ion_after_second
+0003c5e0: 733a 2066 6c6f 6174 2c20 6465 6661 756c  s: float, defaul
+0003c5f0: 7420 3135 3030 2e0d 0a20 2020 2020 2020  t 1500...       
+0003c600: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+0003c610: 6966 5f73 686f 775f 7469 6d65 5f73 7461  if_show_time_sta
+0003c620: 743a 2062 6f6f 6c2c 2064 6566 6175 6c74  t: bool, default
+0003c630: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
+0003c640: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+0003c650: 7368 6f77 5f74 696d 655f 7374 6174 5f70  show_time_stat_p
+0003c660: 7265 6369 7369 6f6e 3a20 696e 742c 2064  recision: int, d
+0003c670: 6566 6175 6c74 2032 2e0d 0a20 2020 2020  efault 2...     
+0003c680: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+0003c690: 6d20 6966 5f70 7269 6e74 5f77 6172 6e69  m if_print_warni
+0003c6a0: 6e67 3a20 626f 6f6c 2c20 6465 6661 756c  ng: bool, defaul
+0003c6b0: 7420 5472 7565 2e0d 0a20 2020 2020 2020  t True...       
+0003c6c0: 203a 7265 7475 726e 3a20 7374 7220 6f72   :return: str or
+0003c6d0: 2064 6963 740d 0a20 2020 2020 2020 2022   dict..        "
+0003c6e0: 2222 0d0a 0d0a 2020 2020 2020 2020 7469  ""....        ti
+0003c6f0: 6d65 6f75 7420 3d20 6b77 6172 6773 2e67  meout = kwargs.g
+0003c700: 6574 2827 7469 6d65 6f75 7427 2c20 4e6f  et('timeout', No
+0003c710: 6e65 290d 0a20 2020 2020 2020 2070 726f  ne)..        pro
+0003c720: 7869 6573 203d 206b 7761 7267 732e 6765  xies = kwargs.ge
+0003c730: 7428 2770 726f 7869 6573 272c 204e 6f6e  t('proxies', Non
+0003c740: 6529 0d0a 2020 2020 2020 2020 736c 6565  e)..        slee
+0003c750: 705f 7365 636f 6e64 7320 3d20 6b77 6172  p_seconds = kwar
+0003c760: 6773 2e67 6574 2827 736c 6565 705f 7365  gs.get('sleep_se
+0003c770: 636f 6e64 7327 2c20 3029 0d0a 2020 2020  conds', 0)..    
+0003c780: 2020 2020 6966 5f70 7269 6e74 5f77 6172      if_print_war
+0003c790: 6e69 6e67 203d 206b 7761 7267 732e 6765  ning = kwargs.ge
+0003c7a0: 7428 2769 665f 7072 696e 745f 7761 726e  t('if_print_warn
+0003c7b0: 696e 6727 2c20 5472 7565 290d 0a20 2020  ing', True)..   
+0003c7c0: 2020 2020 2069 735f 6465 7461 696c 5f72       is_detail_r
+0003c7d0: 6573 756c 7420 3d20 6b77 6172 6773 2e67  esult = kwargs.g
+0003c7e0: 6574 2827 6973 5f64 6574 6169 6c5f 7265  et('is_detail_re
+0003c7f0: 7375 6c74 272c 2046 616c 7365 290d 0a20  sult', False).. 
+0003c800: 2020 2020 2020 2075 7064 6174 655f 7365         update_se
+0003c810: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
+0003c820: 203d 206b 7761 7267 732e 6765 7428 2775   = kwargs.get('u
+0003c830: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+0003c840: 7465 725f 6672 6571 272c 2073 656c 662e  ter_freq', self.
+0003c850: 6465 6661 756c 745f 7365 7373 696f 6e5f  default_session_
+0003c860: 6672 6571 290d 0a20 2020 2020 2020 2075  freq)..        u
+0003c870: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+0003c880: 7465 725f 7365 636f 6e64 7320 3d20 6b77  ter_seconds = kw
+0003c890: 6172 6773 2e67 6574 2827 7570 6461 7465  args.get('update
+0003c8a0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
+0003c8b0: 6563 6f6e 6473 272c 2073 656c 662e 6465  econds', self.de
+0003c8c0: 6661 756c 745f 7365 7373 696f 6e5f 7365  fault_session_se
+0003c8d0: 636f 6e64 7329 0d0a 2020 2020 2020 2020  conds)..        
+0003c8e0: 7365 6c66 2e63 6865 636b 5f69 6e70 7574  self.check_input
+0003c8f0: 5f6c 696d 6974 2871 7565 7279 5f74 6578  _limit(query_tex
+0003c900: 742c 2073 656c 662e 696e 7075 745f 6c69  t, self.input_li
+0003c910: 6d69 7429 0d0a 0d0a 2020 2020 2020 2020  mit)....        
+0003c920: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
+0003c930: 6672 6571 203d 2031 2069 6620 7365 6c66  freq = 1 if self
+0003c940: 2e71 7565 7279 5f63 6f75 6e74 2025 2075  .query_count % u
+0003c950: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+0003c960: 7465 725f 6672 6571 2021 3d20 3020 656c  ter_freq != 0 el
+0003c970: 7365 2030 0d0a 2020 2020 2020 2020 6e6f  se 0..        no
+0003c980: 745f 7570 6461 7465 5f63 6f6e 645f 7469  t_update_cond_ti
+0003c990: 6d65 203d 2031 2069 6620 7469 6d65 2e74  me = 1 if time.t
+0003c9a0: 696d 6528 2920 2d20 7365 6c66 2e62 6567  ime() - self.beg
+0003c9b0: 696e 5f74 696d 6520 3c20 7570 6461 7465  in_time < update
+0003c9c0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
+0003c9d0: 6563 6f6e 6473 2065 6c73 6520 300d 0a20  econds else 0.. 
+0003c9e0: 2020 2020 2020 2069 6620 6e6f 7420 2873         if not (s
+0003c9f0: 656c 662e 7365 7373 696f 6e20 616e 6420  elf.session and 
+0003ca00: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
+0003ca10: 7020 616e 6420 6e6f 745f 7570 6461 7465  p and not_update
+0003ca20: 5f63 6f6e 645f 6672 6571 2061 6e64 206e  _cond_freq and n
+0003ca30: 6f74 5f75 7064 6174 655f 636f 6e64 5f74  ot_update_cond_t
+0003ca40: 696d 6529 3a0d 0a20 2020 2020 2020 2020  ime):..         
+0003ca50: 2020 2073 656c 662e 6265 6769 6e5f 7469     self.begin_ti
+0003ca60: 6d65 203d 2074 696d 652e 7469 6d65 2829  me = time.time()
+0003ca70: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0003ca80: 6c66 2e73 6573 7369 6f6e 203d 2072 6571  lf.session = req
+0003ca90: 7565 7374 732e 5365 7373 696f 6e28 290d  uests.Session().
+0003caa0: 0a20 2020 2020 2020 2020 2020 2068 6f73  .            hos
+0003cab0: 745f 6874 6d6c 203d 2073 656c 662e 7365  t_html = self.se
+0003cac0: 7373 696f 6e2e 6765 7428 7365 6c66 2e68  ssion.get(self.h
+0003cad0: 6f73 745f 7572 6c2c 2068 6561 6465 7273  ost_url, headers
+0003cae0: 3d73 656c 662e 686f 7374 5f68 6561 6465  =self.host_heade
+0003caf0: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
+0003cb00: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
+0003cb10: 7869 6573 292e 7465 7874 0d0a 2020 2020  xies).text..    
+0003cb20: 2020 2020 2020 2020 6465 6275 675f 6c61          debug_la
+0003cb30: 6e67 5f6b 7761 7267 7320 3d20 7365 6c66  ng_kwargs = self
+0003cb40: 2e64 6562 7567 5f6c 616e 675f 6b77 6172  .debug_lang_kwar
+0003cb50: 6773 2866 726f 6d5f 6c61 6e67 7561 6765  gs(from_language
+0003cb60: 2c20 746f 5f6c 616e 6775 6167 652c 2073  , to_language, s
+0003cb70: 656c 662e 6465 6661 756c 745f 6672 6f6d  elf.default_from
+0003cb80: 5f6c 616e 6775 6167 652c 2069 665f 7072  _language, if_pr
+0003cb90: 696e 745f 7761 726e 696e 6729 0d0a 2020  int_warning)..  
+0003cba0: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
+0003cbb0: 616e 6775 6167 655f 6d61 7020 3d20 7365  anguage_map = se
+0003cbc0: 6c66 2e67 6574 5f6c 616e 6775 6167 655f  lf.get_language_
+0003cbd0: 6d61 7028 686f 7374 5f68 746d 6c2c 202a  map(host_html, *
+0003cbe0: 2a64 6562 7567 5f6c 616e 675f 6b77 6172  *debug_lang_kwar
+0003cbf0: 6773 290d 0a0d 0a20 2020 2020 2020 2069  gs)....        i
+0003cc00: 6620 6672 6f6d 5f6c 616e 6775 6167 6520  f from_language 
+0003cc10: 3d3d 2027 6175 746f 273a 0d0a 2020 2020  == 'auto':..    
+0003cc20: 2020 2020 2020 2020 6672 6f6d 5f6c 616e          from_lan
+0003cc30: 6775 6167 6520 3d20 7365 6c66 2e77 6172  guage = self.war
+0003cc40: 6e69 6e67 5f61 7574 6f5f 6c61 6e67 2827  ning_auto_lang('
+0003cc50: 7472 616e 736c 6174 654d 6527 2c20 7365  translateMe', se
+0003cc60: 6c66 2e64 6566 6175 6c74 5f66 726f 6d5f  lf.default_from_
+0003cc70: 6c61 6e67 7561 6765 2c20 6966 5f70 7269  language, if_pri
+0003cc80: 6e74 5f77 6172 6e69 6e67 290d 0a20 2020  nt_warning)..   
+0003cc90: 2020 2020 2066 726f 6d5f 6c61 6e67 7561       from_langua
+0003cca0: 6765 2c20 746f 5f6c 616e 6775 6167 6520  ge, to_language 
+0003ccb0: 3d20 7365 6c66 2e63 6865 636b 5f6c 616e  = self.check_lan
+0003ccc0: 6775 6167 6528 6672 6f6d 5f6c 616e 6775  guage(from_langu
+0003ccd0: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
+0003cce0: 2c20 7365 6c66 2e6c 616e 6775 6167 655f  , self.language_
+0003ccf0: 6d61 702c 206f 7574 7075 745f 7a68 3d73  map, output_zh=s
+0003cd00: 656c 662e 6f75 7470 7574 5f7a 682c 0d0a  elf.output_zh,..
+0003cd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003cd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003cd30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003cd40: 2020 2020 2020 2020 206f 7574 7075 745f           output_
+0003cd50: 656e 5f74 7261 6e73 6c61 746f 723d 2774  en_translator='t
+0003cd60: 7261 6e73 6c61 7465 4d65 272c 206f 7574  ranslateMe', out
+0003cd70: 7075 745f 656e 3d73 656c 662e 6f75 7470  put_en=self.outp
+0003cd80: 7574 5f65 6e29 0d0a 0d0a 2020 2020 2020  ut_en)....      
+0003cd90: 2020 6966 2073 656c 662e 6f75 7470 7574    if self.output
+0003cda0: 5f65 6e20 696e 2028 6672 6f6d 5f6c 616e  _en in (from_lan
+0003cdb0: 6775 6167 652c 2074 6f5f 6c61 6e67 7561  guage, to_langua
+0003cdc0: 6765 293a 0d0a 2020 2020 2020 2020 2020  ge):..          
+0003cdd0: 2020 7265 7475 726e 2073 656c 662e 5f74    return self._t
+0003cde0: 7261 6e73 6c61 7465 4d65 5f61 7069 2871  ranslateMe_api(q
+0003cdf0: 7565 7279 5f74 6578 742c 2066 726f 6d5f  uery_text, from_
+0003ce00: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
+0003ce10: 6775 6167 652c 202a 2a6b 7761 7267 7329  guage, **kwargs)
+0003ce20: 0d0a 0d0a 2020 2020 2020 2020 746d 705f  ....        tmp_
+0003ce30: 6b77 6172 6773 203d 206b 7761 7267 732e  kwargs = kwargs.
+0003ce40: 636f 7079 2829 0d0a 2020 2020 2020 2020  copy()..        
+0003ce50: 746d 705f 6b77 6172 6773 2e75 7064 6174  tmp_kwargs.updat
+0003ce60: 6528 7b27 6973 5f64 6574 6169 6c5f 7265  e({'is_detail_re
+0003ce70: 7375 6c74 273a 2046 616c 7365 2c20 2769  sult': False, 'i
+0003ce80: 665f 7368 6f77 5f74 696d 655f 7374 6174  f_show_time_stat
+0003ce90: 273a 2046 616c 7365 7d29 0d0a 2020 2020  ': False})..    
+0003cea0: 2020 2020 6e65 7874 5f71 7565 7279 5f74      next_query_t
+0003ceb0: 6578 7420 3d20 7365 6c66 2e5f 7472 616e  ext = self._tran
+0003cec0: 736c 6174 654d 655f 6170 6928 7175 6572  slateMe_api(quer
+0003ced0: 795f 7465 7874 2c20 6672 6f6d 5f6c 616e  y_text, from_lan
+0003cee0: 6775 6167 652c 2073 656c 662e 6f75 7470  guage, self.outp
+0003cef0: 7574 5f65 6e2c 202a 2a74 6d70 5f6b 7761  ut_en, **tmp_kwa
+0003cf00: 7267 7329 0d0a 2020 2020 2020 2020 7265  rgs)..        re
+0003cf10: 7475 726e 2073 656c 662e 5f74 7261 6e73  turn self._trans
+0003cf20: 6c61 7465 4d65 5f61 7069 286e 6578 745f  lateMe_api(next_
+0003cf30: 7175 6572 795f 7465 7874 2c20 7365 6c66  query_text, self
+0003cf40: 2e6f 7574 7075 745f 656e 2c20 746f 5f6c  .output_en, to_l
+0003cf50: 616e 6775 6167 652c 202a 2a6b 7761 7267  anguage, **kwarg
+0003cf60: 7329 0d0a 0d0a 0d0a 636c 6173 7320 456c  s)......class El
+0003cf70: 6961 2854 7365 293a 0d0a 2020 2020 6465  ia(Tse):..    de
+0003cf80: 6620 5f5f 696e 6974 5f5f 2873 656c 6629  f __init__(self)
+0003cf90: 3a0d 0a20 2020 2020 2020 2073 7570 6572  :..        super
+0003cfa0: 2829 2e5f 5f69 6e69 745f 5f28 290d 0a20  ().__init__().. 
+0003cfb0: 2020 2020 2020 2073 656c 662e 6265 6769         self.begi
+0003cfc0: 6e5f 7469 6d65 203d 2074 696d 652e 7469  n_time = time.ti
+0003cfd0: 6d65 2829 0d0a 2020 2020 2020 2020 7365  me()..        se
+0003cfe0: 6c66 2e68 6f73 745f 7572 6c20 3d20 2768  lf.host_url = 'h
+0003cff0: 7474 7073 3a2f 2f65 6c69 612e 6575 732f  ttps://elia.eus/
+0003d000: 7472 616e 736c 6174 6f72 270d 0a20 2020  translator'..   
+0003d010: 2020 2020 2073 656c 662e 6170 695f 7572       self.api_ur
+0003d020: 6c20 3d20 2768 7474 7073 3a2f 2f65 6c69  l = 'https://eli
+0003d030: 612e 6575 732f 616a 6178 2f74 7261 6e73  a.eus/ajax/trans
+0003d040: 6c61 7465 5f73 7472 696e 6727 0d0a 2020  late_string'..  
+0003d050: 2020 2020 2020 7365 6c66 2e64 6574 6563        self.detec
+0003d060: 745f 6c61 6e67 5f75 726c 203d 2027 6874  t_lang_url = 'ht
+0003d070: 7470 733a 2f2f 656c 6961 2e65 7573 2f61  tps://elia.eus/a
+0003d080: 6a61 782f 6c61 6e67 7561 6765 5f64 6574  jax/language_det
+0003d090: 6563 7469 6f6e 270d 0a20 2020 2020 2020  ection'..       
+0003d0a0: 2073 656c 662e 686f 7374 5f68 6561 6465   self.host_heade
+0003d0b0: 7273 203d 2073 656c 662e 6765 745f 6865  rs = self.get_he
+0003d0c0: 6164 6572 7328 7365 6c66 2e68 6f73 745f  aders(self.host_
+0003d0d0: 7572 6c2c 2069 665f 6170 693d 4661 6c73  url, if_api=Fals
+0003d0e0: 652c 2069 665f 7265 6665 7265 725f 666f  e, if_referer_fo
+0003d0f0: 725f 686f 7374 3d54 7275 6529 0d0a 2020  r_host=True)..  
+0003d100: 2020 2020 2020 7365 6c66 2e61 7069 5f68        self.api_h
+0003d110: 6561 6465 7273 203d 2073 656c 662e 6765  eaders = self.ge
+0003d120: 745f 6865 6164 6572 7328 7365 6c66 2e68  t_headers(self.h
+0003d130: 6f73 745f 7572 6c2c 2069 665f 6170 693d  ost_url, if_api=
+0003d140: 5472 7565 2c20 6966 5f61 6a61 785f 666f  True, if_ajax_fo
+0003d150: 725f 6170 693d 5472 7565 290d 0a20 2020  r_api=True)..   
+0003d160: 2020 2020 2073 656c 662e 7365 7373 696f       self.sessio
+0003d170: 6e20 3d20 4e6f 6e65 0d0a 2020 2020 2020  n = None..      
+0003d180: 2020 7365 6c66 2e6c 616e 6775 6167 655f    self.language_
+0003d190: 6d61 7020 3d20 4e6f 6e65 0d0a 2020 2020  map = None..    
+0003d1a0: 2020 2020 7365 6c66 2e70 726f 6665 7373      self.profess
+0003d1b0: 696f 6e61 6c5f 6669 656c 6420 3d20 4e6f  ional_field = No
+0003d1c0: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
+0003d1d0: 2e6c 616e 6770 6169 725f 646f 6d61 696e  .langpair_domain
+0003d1e0: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+0003d1f0: 2073 656c 662e 746f 6b65 6e20 3d20 4e6f   self.token = No
+0003d200: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
+0003d210: 2e71 7565 7279 5f63 6f75 6e74 203d 2030  .query_count = 0
+0003d220: 0d0a 2020 2020 2020 2020 7365 6c66 2e6f  ..        self.o
+0003d230: 7574 7075 745f 7a68 203d 204e 6f6e 6520  utput_zh = None 
+0003d240: 2023 2075 6e73 7570 706f 7274 6564 0d0a   # unsupported..
+0003d250: 2020 2020 2020 2020 7365 6c66 2e69 6e70          self.inp
+0003d260: 7574 5f6c 696d 6974 203d 2069 6e74 2831  ut_limit = int(1
+0003d270: 6532 290d 0a20 2020 2020 2020 2073 656c  e2)..        sel
+0003d280: 662e 6465 6661 756c 745f 6672 6f6d 5f6c  f.default_from_l
+0003d290: 616e 6775 6167 6520 3d20 2766 7227 0d0a  anguage = 'fr'..
+0003d2a0: 0d0a 2020 2020 4054 7365 2e64 6562 7567  ..    @Tse.debug
+0003d2b0: 5f6c 616e 6775 6167 655f 6d61 700d 0a20  _language_map.. 
+0003d2c0: 2020 2064 6566 2067 6574 5f6c 616e 6775     def get_langu
+0003d2d0: 6167 655f 6d61 7028 7365 6c66 2c20 6464  age_map(self, dd
+0003d2e0: 3a20 6469 6374 2c20 2a2a 6b77 6172 6773  : dict, **kwargs
+0003d2f0: 3a20 4c61 6e67 4d61 704b 7761 7267 7354  : LangMapKwargsT
+0003d300: 7970 6529 202d 3e20 6469 6374 3a0d 0a20  ype) -> dict:.. 
+0003d310: 2020 2020 2020 2072 6574 7572 6e20 7b69         return {i
+0003d320: 695b 2773 6f75 7263 655f 6c61 6e67 7561  i['source_langua
+0003d330: 6765 275d 5b27 636f 6465 275d 3a20 5b6a  ge']['code']: [j
+0003d340: 6a5b 2774 6172 6765 745f 6c61 6e67 7561  j['target_langua
+0003d350: 6765 275d 5b27 636f 6465 275d 2066 6f72  ge']['code'] for
+0003d360: 206a 6a20 696e 2064 645b 276c 616e 6775   jj in dd['langu
+0003d370: 6167 655f 7061 6972 7327 5d20 6966 206a  age_pairs'] if j
+0003d380: 6a5b 2773 6f75 7263 655f 6c61 6e67 7561  j['source_langua
+0003d390: 6765 275d 5b27 636f 6465 275d 203d 3d20  ge']['code'] == 
+0003d3a0: 6969 5b27 736f 7572 6365 5f6c 616e 6775  ii['source_langu
+0003d3b0: 6167 6527 5d5b 2763 6f64 6527 5d5d 2066  age']['code']] f
+0003d3c0: 6f72 2069 6920 696e 2064 645b 276c 616e  or ii in dd['lan
+0003d3d0: 6775 6167 655f 7061 6972 7327 5d7d 0d0a  guage_pairs']}..
+0003d3e0: 0d0a 2020 2020 6465 6620 6765 745f 7072  ..    def get_pr
+0003d3f0: 6f66 6573 7369 6f6e 616c 5f66 6965 6c64  ofessional_field
+0003d400: 5f6c 6973 7428 7365 6c66 2c20 6464 3a20  _list(self, dd: 
+0003d410: 6469 6374 2920 2d3e 2073 6574 3a0d 0a20  dict) -> set:.. 
+0003d420: 2020 2020 2020 2072 6574 7572 6e20 7b69         return {i
+0003d430: 745b 2774 7261 6e73 6c61 7469 6f6e 5f6d  t['translation_m
+0003d440: 6f64 656c 275d 5b27 636f 6465 275d 2066  odel']['code'] f
+0003d450: 6f72 2069 7420 696e 2064 645b 276c 616e  or it in dd['lan
+0003d460: 6775 6167 655f 7061 6972 7327 5d7d 0d0a  guage_pairs']}..
+0003d470: 0d0a 2020 2020 6465 6620 6765 745f 6c61  ..    def get_la
+0003d480: 6e67 7061 6972 5f64 6f6d 6169 6e28 7365  ngpair_domain(se
+0003d490: 6c66 2c20 6464 3a20 6469 6374 2920 2d3e  lf, dd: dict) ->
+0003d4a0: 2064 6963 743a 0d0a 2020 2020 2020 2020   dict:..        
+0003d4b0: 6461 7461 203d 207b 0d0a 2020 2020 2020  data = {..      
+0003d4c0: 2020 2020 2020 6627 7b69 7465 6d5b 2273        f'{item["s
+0003d4d0: 6f75 7263 655f 6c61 6e67 7561 6765 225d  ource_language"]
+0003d4e0: 5b22 636f 6465 225d 7d5f 5f7b 6974 656d  ["code"]}__{item
+0003d4f0: 5b22 7461 7267 6574 5f6c 616e 6775 6167  ["target_languag
+0003d500: 6522 5d5b 2263 6f64 6522 5d7d 5f5f 7b69  e"]["code"]}__{i
+0003d510: 7465 6d5b 2274 7261 6e73 6c61 7469 6f6e  tem["translation
+0003d520: 5f6d 6f64 656c 225d 5b22 636f 6465 225d  _model"]["code"]
+0003d530: 7d27 3a20 7b0d 0a20 2020 2020 2020 2020  }': {..         
+0003d540: 2020 2020 2020 2027 7472 616e 736c 6174         'translat
+0003d550: 696f 6e5f 656e 6769 6e65 273a 2069 7465  ion_engine': ite
+0003d560: 6d5b 2265 6e67 696e 6522 5d5b 2270 6b22  m["engine"]["pk"
+0003d570: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+0003d580: 7d20 666f 7220 6974 656d 2069 6e20 6464  } for item in dd
+0003d590: 5b27 6c61 6e67 7561 6765 5f70 6169 7273  ['language_pairs
+0003d5a0: 275d 0d0a 2020 2020 2020 2020 7d0d 0a20  ']..        }.. 
+0003d5b0: 2020 2020 2020 2072 6574 7572 6e20 6461         return da
+0003d5c0: 7461 0d0a 0d0a 2020 2020 4054 7365 2e74  ta....    @Tse.t
+0003d5d0: 696d 655f 7374 6174 0d0a 2020 2020 4054  ime_stat..    @T
+0003d5e0: 7365 2e63 6865 636b 5f71 7565 7279 0d0a  se.check_query..
+0003d5f0: 2020 2020 6465 6620 656c 6961 5f61 7069      def elia_api
+0003d600: 2873 656c 662c 2071 7565 7279 5f74 6578  (self, query_tex
+0003d610: 743a 2073 7472 2c20 6672 6f6d 5f6c 616e  t: str, from_lan
+0003d620: 6775 6167 653a 2073 7472 203d 2027 6175  guage: str = 'au
+0003d630: 746f 272c 2074 6f5f 6c61 6e67 7561 6765  to', to_language
+0003d640: 3a20 7374 7220 3d20 2765 6e27 2c20 2a2a  : str = 'en', **
+0003d650: 6b77 6172 6773 3a20 4170 694b 7761 7267  kwargs: ApiKwarg
+0003d660: 7354 7970 6529 202d 3e20 556e 696f 6e5b  sType) -> Union[
+0003d670: 7374 722c 2064 6963 745d 3a0d 0a20 2020  str, dict]:..   
+0003d680: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+0003d690: 2020 6874 7470 733a 2f2f 656c 6961 2e65    https://elia.e
+0003d6a0: 7573 2f74 7261 6e73 6c61 746f 720d 0a20  us/translator.. 
+0003d6b0: 2020 2020 2020 203a 7061 7261 6d20 7175         :param qu
+0003d6c0: 6572 795f 7465 7874 3a20 7374 722c 206d  ery_text: str, m
+0003d6d0: 7573 742e 0d0a 2020 2020 2020 2020 3a70  ust...        :p
+0003d6e0: 6172 616d 2066 726f 6d5f 6c61 6e67 7561  aram from_langua
+0003d6f0: 6765 3a20 7374 722c 2064 6566 6175 6c74  ge: str, default
+0003d700: 2027 6175 746f 272e 0d0a 2020 2020 2020   'auto'...      
+0003d710: 2020 3a70 6172 616d 2074 6f5f 6c61 6e67    :param to_lang
+0003d720: 7561 6765 3a20 7374 722c 2064 6566 6175  uage: str, defau
+0003d730: 6c74 2027 656e 272e 0d0a 2020 2020 2020  lt 'en'...      
+0003d740: 2020 3a70 6172 616d 202a 2a6b 7761 7267    :param **kwarg
+0003d750: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+0003d760: 2020 2020 3a70 6172 616d 2074 696d 656f      :param timeo
+0003d770: 7574 3a20 666c 6f61 742c 2064 6566 6175  ut: float, defau
+0003d780: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
+0003d790: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+0003d7a0: 2070 726f 7869 6573 3a20 6469 6374 2c20   proxies: dict, 
+0003d7b0: 6465 6661 756c 7420 4e6f 6e65 2e0d 0a20  default None... 
+0003d7c0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0003d7d0: 7061 7261 6d20 736c 6565 705f 7365 636f  param sleep_seco
+0003d7e0: 6e64 733a 2066 6c6f 6174 2c20 6465 6661  nds: float, defa
+0003d7f0: 756c 7420 302e 0d0a 2020 2020 2020 2020  ult 0...        
+0003d800: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+0003d810: 735f 6465 7461 696c 5f72 6573 756c 743a  s_detail_result:
+0003d820: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
+0003d830: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
+0003d840: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+0003d850: 5f69 676e 6f72 655f 6c69 6d69 745f 6f66  _ignore_limit_of
+0003d860: 5f6c 656e 6774 683a 2062 6f6f 6c2c 2064  _length: bool, d
+0003d870: 6566 6175 6c74 2046 616c 7365 2e0d 0a20  efault False... 
+0003d880: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0003d890: 7061 7261 6d20 6c69 6d69 745f 6f66 5f6c  param limit_of_l
+0003d8a0: 656e 6774 683a 2069 6e74 2c20 6465 6661  ength: int, defa
+0003d8b0: 756c 7420 3230 3030 302e 0d0a 2020 2020  ult 20000...    
+0003d8c0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+0003d8d0: 616d 2069 665f 6967 6e6f 7265 5f65 6d70  am if_ignore_emp
+0003d8e0: 7479 5f71 7565 7279 3a20 626f 6f6c 2c20  ty_query: bool, 
+0003d8f0: 6465 6661 756c 7420 4661 6c73 652e 0d0a  default False...
+0003d900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d910: 3a70 6172 616d 2075 7064 6174 655f 7365  :param update_se
+0003d920: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
+0003d930: 3a20 696e 742c 2064 6566 6175 6c74 2031  : int, default 1
+0003d940: 3030 302e 0d0a 2020 2020 2020 2020 2020  000...          
+0003d950: 2020 2020 2020 3a70 6172 616d 2075 7064        :param upd
+0003d960: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0003d970: 725f 7365 636f 6e64 733a 2066 6c6f 6174  r_seconds: float
+0003d980: 2c20 6465 6661 756c 7420 3135 3030 2e0d  , default 1500..
+0003d990: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003d9a0: 203a 7061 7261 6d20 6966 5f73 686f 775f   :param if_show_
+0003d9b0: 7469 6d65 5f73 7461 743a 2062 6f6f 6c2c  time_stat: bool,
+0003d9c0: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
+0003d9d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003d9e0: 203a 7061 7261 6d20 7368 6f77 5f74 696d   :param show_tim
+0003d9f0: 655f 7374 6174 5f70 7265 6369 7369 6f6e  e_stat_precision
+0003da00: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
+0003da10: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0003da20: 2020 203a 7061 7261 6d20 6966 5f70 7269     :param if_pri
+0003da30: 6e74 5f77 6172 6e69 6e67 3a20 626f 6f6c  nt_warning: bool
+0003da40: 2c20 6465 6661 756c 7420 5472 7565 2e0d  , default True..
+0003da50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003da60: 203a 7061 7261 6d20 7072 6f66 6573 7369   :param professi
+0003da70: 6f6e 616c 5f66 6965 6c64 3a20 7374 722c  onal_field: str,
+0003da80: 2064 6566 6175 6c74 2027 6765 6e65 7261   default 'genera
+0003da90: 6c27 2e20 4368 6f6f 7365 2066 726f 6d20  l'. Choose from 
+0003daa0: 2827 6765 6e65 7261 6c27 2c20 2761 646d  ('general', 'adm
+0003dab0: 696e 2729 2e0d 0a20 2020 2020 2020 203a  in')...        :
+0003dac0: 7265 7475 726e 3a20 7374 7220 6f72 2064  return: str or d
+0003dad0: 6963 740d 0a20 2020 2020 2020 2022 2222  ict..        """
+0003dae0: 0d0a 0d0a 2020 2020 2020 2020 7573 655f  ....        use_
+0003daf0: 646f 6d61 696e 203d 206b 7761 7267 732e  domain = kwargs.
+0003db00: 6765 7428 2770 726f 6665 7373 696f 6e61  get('professiona
+0003db10: 6c5f 6669 656c 6427 2c20 2767 656e 6572  l_field', 'gener
+0003db20: 616c 2729 0d0a 2020 2020 2020 2020 7469  al')..        ti
+0003db30: 6d65 6f75 7420 3d20 6b77 6172 6773 2e67  meout = kwargs.g
+0003db40: 6574 2827 7469 6d65 6f75 7427 2c20 4e6f  et('timeout', No
+0003db50: 6e65 290d 0a20 2020 2020 2020 2070 726f  ne)..        pro
+0003db60: 7869 6573 203d 206b 7761 7267 732e 6765  xies = kwargs.ge
+0003db70: 7428 2770 726f 7869 6573 272c 204e 6f6e  t('proxies', Non
+0003db80: 6529 0d0a 2020 2020 2020 2020 736c 6565  e)..        slee
+0003db90: 705f 7365 636f 6e64 7320 3d20 6b77 6172  p_seconds = kwar
+0003dba0: 6773 2e67 6574 2827 736c 6565 705f 7365  gs.get('sleep_se
+0003dbb0: 636f 6e64 7327 2c20 3029 0d0a 2020 2020  conds', 0)..    
+0003dbc0: 2020 2020 6966 5f70 7269 6e74 5f77 6172      if_print_war
+0003dbd0: 6e69 6e67 203d 206b 7761 7267 732e 6765  ning = kwargs.ge
+0003dbe0: 7428 2769 665f 7072 696e 745f 7761 726e  t('if_print_warn
+0003dbf0: 696e 6727 2c20 5472 7565 290d 0a20 2020  ing', True)..   
+0003dc00: 2020 2020 2069 735f 6465 7461 696c 5f72       is_detail_r
+0003dc10: 6573 756c 7420 3d20 6b77 6172 6773 2e67  esult = kwargs.g
+0003dc20: 6574 2827 6973 5f64 6574 6169 6c5f 7265  et('is_detail_re
+0003dc30: 7375 6c74 272c 2046 616c 7365 290d 0a20  sult', False).. 
+0003dc40: 2020 2020 2020 2075 7064 6174 655f 7365         update_se
+0003dc50: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
+0003dc60: 203d 206b 7761 7267 732e 6765 7428 2775   = kwargs.get('u
+0003dc70: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+0003dc80: 7465 725f 6672 6571 272c 2073 656c 662e  ter_freq', self.
+0003dc90: 6465 6661 756c 745f 7365 7373 696f 6e5f  default_session_
+0003dca0: 6672 6571 290d 0a20 2020 2020 2020 2075  freq)..        u
+0003dcb0: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+0003dcc0: 7465 725f 7365 636f 6e64 7320 3d20 6b77  ter_seconds = kw
+0003dcd0: 6172 6773 2e67 6574 2827 7570 6461 7465  args.get('update
+0003dce0: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
+0003dcf0: 6563 6f6e 6473 272c 2073 656c 662e 6465  econds', self.de
+0003dd00: 6661 756c 745f 7365 7373 696f 6e5f 7365  fault_session_se
+0003dd10: 636f 6e64 7329 0d0a 2020 2020 2020 2020  conds)..        
+0003dd20: 7365 6c66 2e63 6865 636b 5f69 6e70 7574  self.check_input
+0003dd30: 5f6c 696d 6974 2871 7565 7279 5f74 6578  _limit(query_tex
+0003dd40: 742c 2073 656c 662e 696e 7075 745f 6c69  t, self.input_li
+0003dd50: 6d69 7429 0d0a 0d0a 2020 2020 2020 2020  mit)....        
+0003dd60: 6e6f 745f 7570 6461 7465 5f63 6f6e 645f  not_update_cond_
+0003dd70: 6672 6571 203d 2031 2069 6620 7365 6c66  freq = 1 if self
+0003dd80: 2e71 7565 7279 5f63 6f75 6e74 2025 2075  .query_count % u
+0003dd90: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+0003dda0: 7465 725f 6672 6571 2021 3d20 3020 656c  ter_freq != 0 el
+0003ddb0: 7365 2030 0d0a 2020 2020 2020 2020 6e6f  se 0..        no
+0003ddc0: 745f 7570 6461 7465 5f63 6f6e 645f 7469  t_update_cond_ti
+0003ddd0: 6d65 203d 2031 2069 6620 7469 6d65 2e74  me = 1 if time.t
+0003dde0: 696d 6528 2920 2d20 7365 6c66 2e62 6567  ime() - self.beg
+0003ddf0: 696e 5f74 696d 6520 3c20 7570 6461 7465  in_time < update
+0003de00: 5f73 6573 7369 6f6e 5f61 6674 6572 5f73  _session_after_s
+0003de10: 6563 6f6e 6473 2065 6c73 6520 300d 0a20  econds else 0.. 
+0003de20: 2020 2020 2020 2069 6620 6e6f 7420 2873         if not (s
+0003de30: 656c 662e 7365 7373 696f 6e20 616e 6420  elf.session and 
+0003de40: 7365 6c66 2e6c 616e 6775 6167 655f 6d61  self.language_ma
+0003de50: 7020 616e 6420 6e6f 745f 7570 6461 7465  p and not_update
+0003de60: 5f63 6f6e 645f 6672 6571 2061 6e64 206e  _cond_freq and n
+0003de70: 6f74 5f75 7064 6174 655f 636f 6e64 5f74  ot_update_cond_t
+0003de80: 696d 6529 3a0d 0a20 2020 2020 2020 2020  ime):..         
+0003de90: 2020 2073 656c 662e 6265 6769 6e5f 7469     self.begin_ti
+0003dea0: 6d65 203d 2074 696d 652e 7469 6d65 2829  me = time.time()
+0003deb0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0003dec0: 6c66 2e73 6573 7369 6f6e 203d 2072 6571  lf.session = req
+0003ded0: 7565 7374 732e 5365 7373 696f 6e28 290d  uests.Session().
+0003dee0: 0a20 2020 2020 2020 2020 2020 2068 6f73  .            hos
+0003def0: 745f 6874 6d6c 203d 2073 656c 662e 7365  t_html = self.se
+0003df00: 7373 696f 6e2e 6765 7428 7365 6c66 2e68  ssion.get(self.h
+0003df10: 6f73 745f 7572 6c2c 2068 6561 6465 7273  ost_url, headers
+0003df20: 3d73 656c 662e 686f 7374 5f68 6561 6465  =self.host_heade
+0003df30: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
+0003df40: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
+0003df50: 7869 6573 292e 7465 7874 0d0a 2020 2020  xies).text..    
+0003df60: 2020 2020 2020 2020 7365 6c66 2e74 6f6b          self.tok
+0003df70: 656e 203d 2072 652e 636f 6d70 696c 6528  en = re.compile(
+0003df80: 2722 6373 7266 6d69 6464 6c65 7761 7265  '"csrfmiddleware
+0003df90: 746f 6b65 6e22 3a20 2228 2e2a 3f29 2227  token": "(.*?)"'
+0003dfa0: 292e 7365 6172 6368 2868 6f73 745f 6874  ).search(host_ht
+0003dfb0: 6d6c 292e 6772 6f75 7028 3129 0d0a 2020  ml).group(1)..  
+0003dfc0: 2020 2020 2020 2020 2020 645f 6c61 6e67            d_lang
+0003dfd0: 5f73 7472 203d 2072 652e 636f 6d70 696c  _str = re.compil
+0003dfe0: 6528 2776 6172 206c 616e 6775 6167 6550  e('var languageP
+0003dff0: 6169 7273 203d 204a 534f 4e2e 7061 7273  airs = JSON.pars
+0003e000: 655c 5c28 282e 2a3f 295c 5c29 3b27 292e  e\\((.*?)\\);').
+0003e010: 7365 6172 6368 2868 6f73 745f 6874 6d6c  search(host_html
+0003e020: 292e 6772 6f75 7028 290d 0a20 2020 2020  ).group()..     
+0003e030: 2020 2020 2020 2064 5f6c 616e 675f 6d61         d_lang_ma
+0003e040: 7020 3d20 6a73 6f6e 2e6c 6f61 6473 2864  p = json.loads(d
+0003e050: 5f6c 616e 675f 7374 725b 3433 3a2d 345d  _lang_str[43:-4]
+0003e060: 2e72 6570 6c61 6365 2827 2671 756f 743b  .replace('&quot;
+0003e070: 272c 2027 2227 2929 0d0a 2020 2020 2020  ', '"'))..      
+0003e080: 2020 2020 2020 6465 6275 675f 6c61 6e67        debug_lang
+0003e090: 5f6b 7761 7267 7320 3d20 7365 6c66 2e64  _kwargs = self.d
+0003e0a0: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
+0003e0b0: 2866 726f 6d5f 6c61 6e67 7561 6765 2c20  (from_language, 
+0003e0c0: 746f 5f6c 616e 6775 6167 652c 2073 656c  to_language, sel
+0003e0d0: 662e 6465 6661 756c 745f 6672 6f6d 5f6c  f.default_from_l
+0003e0e0: 616e 6775 6167 652c 2069 665f 7072 696e  anguage, if_prin
+0003e0f0: 745f 7761 726e 696e 6729 0d0a 2020 2020  t_warning)..    
+0003e100: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
+0003e110: 6775 6167 655f 6d61 7020 3d20 7365 6c66  guage_map = self
+0003e120: 2e67 6574 5f6c 616e 6775 6167 655f 6d61  .get_language_ma
+0003e130: 7028 645f 6c61 6e67 5f6d 6170 2c20 2a2a  p(d_lang_map, **
+0003e140: 6465 6275 675f 6c61 6e67 5f6b 7761 7267  debug_lang_kwarg
+0003e150: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
+0003e160: 7365 6c66 2e70 726f 6665 7373 696f 6e61  self.professiona
+0003e170: 6c5f 6669 656c 6420 3d20 7365 6c66 2e67  l_field = self.g
+0003e180: 6574 5f70 726f 6665 7373 696f 6e61 6c5f  et_professional_
+0003e190: 6669 656c 645f 6c69 7374 2864 5f6c 616e  field_list(d_lan
+0003e1a0: 675f 6d61 7029 0d0a 2020 2020 2020 2020  g_map)..        
+0003e1b0: 2020 2020 7365 6c66 2e6c 616e 6770 6169      self.langpai
+0003e1c0: 725f 646f 6d61 696e 203d 2073 656c 662e  r_domain = self.
+0003e1d0: 6765 745f 6c61 6e67 7061 6972 5f64 6f6d  get_langpair_dom
+0003e1e0: 6169 6e28 645f 6c61 6e67 5f6d 6170 290d  ain(d_lang_map).
+0003e1f0: 0a0d 0a20 2020 2020 2020 2069 6620 6672  ...        if fr
+0003e200: 6f6d 5f6c 616e 6775 6167 6520 3d3d 2027  om_language == '
+0003e210: 6175 746f 273a 0d0a 2020 2020 2020 2020  auto':..        
+0003e220: 2020 2020 7061 796c 6f61 6420 3d20 7b0d      payload = {.
+0003e230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003e240: 2027 7465 7874 273a 2071 7565 7279 5f74   'text': query_t
+0003e250: 6578 742c 0d0a 2020 2020 2020 2020 2020  ext,..          
+0003e260: 2020 2020 2020 2763 7372 666d 6964 646c        'csrfmiddl
+0003e270: 6577 6172 6574 6f6b 656e 273a 2073 656c  ewaretoken': sel
+0003e280: 662e 746f 6b65 6e2c 0d0a 2020 2020 2020  f.token,..      
+0003e290: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
+0003e2a0: 2020 2020 2070 6179 6c6f 6164 203d 2075       payload = u
+0003e2b0: 726c 6c69 622e 7061 7273 652e 7572 6c65  rllib.parse.urle
+0003e2c0: 6e63 6f64 6528 7061 796c 6f61 6429 0d0a  ncode(payload)..
+0003e2d0: 2020 2020 2020 2020 2020 2020 7220 3d20              r = 
+0003e2e0: 7365 6c66 2e73 6573 7369 6f6e 2e70 6f73  self.session.pos
+0003e2f0: 7428 7365 6c66 2e64 6574 6563 745f 6c61  t(self.detect_la
+0003e300: 6e67 5f75 726c 2c20 6461 7461 3d70 6179  ng_url, data=pay
+0003e310: 6c6f 6164 2c20 6865 6164 6572 733d 7365  load, headers=se
+0003e320: 6c66 2e61 7069 5f68 6561 6465 7273 2c20  lf.api_headers, 
+0003e330: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+0003e340: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+0003e350: 290d 0a20 2020 2020 2020 2020 2020 2066  )..            f
+0003e360: 726f 6d5f 6c61 6e67 7561 6765 203d 2072  rom_language = r
+0003e370: 2e6a 736f 6e28 295b 276c 616e 675f 6964  .json()['lang_id
+0003e380: 275d 0d0a 2020 2020 2020 2020 6672 6f6d  ']..        from
+0003e390: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
+0003e3a0: 6e67 7561 6765 203d 2073 656c 662e 6368  nguage = self.ch
+0003e3b0: 6563 6b5f 6c61 6e67 7561 6765 2866 726f  eck_language(fro
+0003e3c0: 6d5f 6c61 6e67 7561 6765 2c20 746f 5f6c  m_language, to_l
+0003e3d0: 616e 6775 6167 652c 2073 656c 662e 6c61  anguage, self.la
+0003e3e0: 6e67 7561 6765 5f6d 6170 290d 0a0d 0a20  nguage_map).... 
+0003e3f0: 2020 2020 2020 2070 6179 6c6f 6164 203d         payload =
+0003e400: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
+0003e410: 2769 6e70 7574 5f74 6578 7427 3a20 7175  'input_text': qu
+0003e420: 6572 795f 7465 7874 2c0d 0a20 2020 2020  ery_text,..     
+0003e430: 2020 2020 2020 2027 736f 7572 6365 5f6c         'source_l
+0003e440: 616e 6775 6167 6527 3a20 6672 6f6d 5f6c  anguage': from_l
+0003e450: 616e 6775 6167 652c 0d0a 2020 2020 2020  anguage,..      
+0003e460: 2020 2020 2020 2774 6172 6765 745f 6c61        'target_la
+0003e470: 6e67 7561 6765 273a 2074 6f5f 6c61 6e67  nguage': to_lang
+0003e480: 7561 6765 2c0d 0a20 2020 2020 2020 2020  uage,..         
+0003e490: 2020 2027 7472 616e 736c 6174 696f 6e5f     'translation_
+0003e4a0: 6d6f 6465 6c27 3a20 7573 655f 646f 6d61  model': use_doma
+0003e4b0: 696e 2c0d 0a20 2020 2020 2020 2020 2020  in,..           
+0003e4c0: 2027 7472 616e 736c 6174 696f 6e5f 656e   'translation_en
+0003e4d0: 6769 6e65 273a 2031 2c0d 0a20 2020 2020  gine': 1,..     
+0003e4e0: 2020 2020 2020 2027 6373 7266 6d69 6464         'csrfmidd
+0003e4f0: 6c65 7761 7265 746f 6b65 6e27 3a20 7365  lewaretoken': se
+0003e500: 6c66 2e74 6f6b 656e 2c0d 0a20 2020 2020  lf.token,..     
+0003e510: 2020 207d 0d0a 0d0a 2020 2020 2020 2020     }....        
+0003e520: 646f 6d61 696e 5f70 6179 6c6f 6164 203d  domain_payload =
+0003e530: 2073 656c 662e 6c61 6e67 7061 6972 5f64   self.langpair_d
+0003e540: 6f6d 6169 6e2e 6765 7428 6627 7b66 726f  omain.get(f'{fro
+0003e550: 6d5f 6c61 6e67 7561 6765 7d5f 5f7b 746f  m_language}__{to
+0003e560: 5f6c 616e 6775 6167 657d 5f5f 7b75 7365  _language}__{use
+0003e570: 5f64 6f6d 6169 6e7d 2729 0d0a 2020 2020  _domain}')..    
+0003e580: 2020 2020 6966 206e 6f74 2064 6f6d 6169      if not domai
+0003e590: 6e5f 7061 796c 6f61 643a 0d0a 2020 2020  n_payload:..    
+0003e5a0: 2020 2020 2020 2020 7261 6973 6520 5472          raise Tr
+0003e5b0: 616e 736c 6174 6f72 4572 726f 720d 0a20  anslatorError.. 
+0003e5c0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0003e5d0: 2020 2020 2020 2020 2020 7061 796c 6f61            payloa
+0003e5e0: 642e 7570 6461 7465 2864 6f6d 6169 6e5f  d.update(domain_
+0003e5f0: 7061 796c 6f61 6429 0d0a 0d0a 2020 2020  payload)....    
+0003e600: 2020 2020 7061 796c 6f61 6420 3d20 7572      payload = ur
+0003e610: 6c6c 6962 2e70 6172 7365 2e75 726c 656e  llib.parse.urlen
+0003e620: 636f 6465 2870 6179 6c6f 6164 290d 0a20  code(payload).. 
+0003e630: 2020 2020 2020 2072 203d 2073 656c 662e         r = self.
+0003e640: 7365 7373 696f 6e2e 706f 7374 2873 656c  session.post(sel
+0003e650: 662e 6170 695f 7572 6c2c 2064 6174 613d  f.api_url, data=
+0003e660: 7061 796c 6f61 642c 2068 6561 6465 7273  payload, headers
+0003e670: 3d73 656c 662e 6170 695f 6865 6164 6572  =self.api_header
+0003e680: 732c 2074 696d 656f 7574 3d74 696d 656f  s, timeout=timeo
+0003e690: 7574 2c20 7072 6f78 6965 733d 7072 6f78  ut, proxies=prox
+0003e6a0: 6965 7329 0d0a 2020 2020 2020 2020 722e  ies)..        r.
+0003e6b0: 7261 6973 655f 666f 725f 7374 6174 7573  raise_for_status
+0003e6c0: 2829 0d0a 2020 2020 2020 2020 6461 7461  ()..        data
+0003e6d0: 203d 2072 2e6a 736f 6e28 290d 0a20 2020   = r.json()..   
+0003e6e0: 2020 2020 2074 696d 652e 736c 6565 7028       time.sleep(
+0003e6f0: 736c 6565 705f 7365 636f 6e64 7329 0d0a  sleep_seconds)..
+0003e700: 2020 2020 2020 2020 7365 6c66 2e71 7565          self.que
+0003e710: 7279 5f63 6f75 6e74 202b 3d20 310d 0a20  ry_count += 1.. 
+0003e720: 2020 2020 2020 2072 6574 7572 6e20 6461         return da
+0003e730: 7461 2069 6620 6973 5f64 6574 6169 6c5f  ta if is_detail_
+0003e740: 7265 7375 6c74 2065 6c73 6520 6461 7461  result else data
+0003e750: 5b27 7472 616e 736c 6174 6564 5f74 6578  ['translated_tex
+0003e760: 7427 5d2e 7265 706c 6163 6528 273c 2f64  t'].replace('</d
+0003e770: 6976 3e27 2c20 275c 6e27 292e 7265 706c  iv>', '\n').repl
+0003e780: 6163 6528 273c 6469 763e 272c 2027 2729  ace('<div>', '')
+0003e790: 2e72 6570 6c61 6365 2827 3c73 7061 6e3e  .replace('<span>
+0003e7a0: 272c 2027 2729 2e72 6570 6c61 6365 2827  ', '').replace('
+0003e7b0: 3c2f 7370 616e 3e27 2c20 2727 290d 0a0d  </span>', '')...
+0003e7c0: 0a0d 0a63 6c61 7373 204c 616e 6775 6167  ...class Languag
+0003e7d0: 6557 6972 6528 5473 6529 3a0d 0a20 2020  eWire(Tse):..   
+0003e7e0: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
+0003e7f0: 6c66 293a 0d0a 2020 2020 2020 2020 7375  lf):..        su
+0003e800: 7065 7228 292e 5f5f 696e 6974 5f5f 2829  per().__init__()
+0003e810: 0d0a 2020 2020 2020 2020 7365 6c66 2e62  ..        self.b
+0003e820: 6567 696e 5f74 696d 6520 3d20 7469 6d65  egin_time = time
+0003e830: 2e74 696d 6528 290d 0a20 2020 2020 2020  .time()..       
+0003e840: 2073 656c 662e 686f 6d65 5f75 726c 203d   self.home_url =
+0003e850: 2027 6874 7470 733a 2f2f 6a77 742e 6c61   'https://jwt.la
+0003e860: 6e67 7561 6765 7769 7265 2e63 6f6d 270d  nguagewire.com'.
+0003e870: 0a20 2020 2020 2020 2073 656c 662e 686f  .        self.ho
+0003e880: 7374 5f75 726c 203d 2027 6874 7470 733a  st_url = 'https:
+0003e890: 2f2f 7777 772e 6c61 6e67 7561 6765 7769  //www.languagewi
+0003e8a0: 7265 2e63 6f6d 2f65 6e2f 7465 6368 6e6f  re.com/en/techno
+0003e8b0: 6c6f 6779 2f6c 616e 6775 6167 6577 6972  logy/languagewir
+0003e8c0: 652d 7472 616e 736c 6174 6527 0d0a 2020  e-translate'..  
+0003e8d0: 2020 2020 2020 7365 6c66 2e61 7069 5f75        self.api_u
+0003e8e0: 726c 203d 2027 6874 7470 733a 2f2f 6c77  rl = 'https://lw
+0003e8f0: 742e 6c61 6e67 7561 6765 7769 7265 2e63  t.languagewire.c
+0003e900: 6f6d 2f66 2f61 7069 2f76 312f 7472 616e  om/f/api/v1/tran
+0003e910: 736c 6174 696f 6e73 2f74 6578 7427 0d0a  slations/text'..
+0003e920: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
+0003e930: 675f 7572 6c20 3d20 2768 7474 7073 3a2f  g_url = 'https:/
+0003e940: 2f6c 7774 2e6c 616e 6775 6167 6577 6972  /lwt.languagewir
+0003e950: 652e 636f 6d2f 662f 6170 692f 7631 2f6c  e.com/f/api/v1/l
+0003e960: 616e 6775 6167 652d 7061 6972 733f 696e  anguage-pairs?in
+0003e970: 636c 7564 6556 6172 6961 6e74 733d 7472  cludeVariants=tr
+0003e980: 7565 270d 0a20 2020 2020 2020 2073 656c  ue'..        sel
+0003e990: 662e 636f 6f6b 6965 5f75 726c 203d 2027  f.cookie_url = '
+0003e9a0: 6874 7470 733a 2f2f 6c77 742e 6c61 6e67  https://lwt.lang
+0003e9b0: 7561 6765 7769 7265 2e63 6f6d 2f66 2f61  uagewire.com/f/a
+0003e9c0: 7069 2f76 312f 6175 7468 2f63 6f6f 6b69  pi/v1/auth/cooki
+0003e9d0: 6527 0d0a 2020 2020 2020 2020 7365 6c66  e'..        self
+0003e9e0: 2e6c 7774 5f6a 735f 7572 6c20 3d20 2768  .lwt_js_url = 'h
+0003e9f0: 7474 7073 3a2f 2f6c 7774 2e6c 616e 6775  ttps://lwt.langu
+0003ea00: 6167 6577 6972 652e 636f 6d2f 656e 2f6d  agewire.com/en/m
+0003ea10: 6169 6e2e 3666 3230 3239 3562 3130 3462  ain.6f20295b104b
+0003ea20: 6335 3261 2e6a 7327 0d0a 2020 2020 2020  c52a.js'..      
+0003ea30: 2020 7365 6c66 2e68 6f73 745f 6865 6164    self.host_head
+0003ea40: 6572 7320 3d20 7365 6c66 2e67 6574 5f68  ers = self.get_h
+0003ea50: 6561 6465 7273 2873 656c 662e 686f 6d65  eaders(self.home
+0003ea60: 5f75 726c 2c20 6966 5f61 7069 3d46 616c  _url, if_api=Fal
+0003ea70: 7365 2c20 6966 5f72 6566 6572 6572 5f66  se, if_referer_f
+0003ea80: 6f72 5f68 6f73 743d 5472 7565 290d 0a20  or_host=True).. 
+0003ea90: 2020 2020 2020 2073 656c 662e 6170 695f         self.api_
+0003eaa0: 6865 6164 6572 7320 3d20 7365 6c66 2e67  headers = self.g
+0003eab0: 6574 5f68 6561 6465 7273 2873 656c 662e  et_headers(self.
+0003eac0: 686f 6d65 5f75 726c 2c20 6966 5f61 7069  home_url, if_api
+0003ead0: 3d54 7275 652c 2069 665f 6a73 6f6e 5f66  =True, if_json_f
+0003eae0: 6f72 5f61 7069 3d54 7275 6529 0d0a 2020  or_api=True)..  
+0003eaf0: 2020 2020 2020 7365 6c66 2e73 6573 7369        self.sessi
+0003eb00: 6f6e 203d 204e 6f6e 650d 0a20 2020 2020  on = None..     
+0003eb10: 2020 2073 656c 662e 6c61 6e67 7561 6765     self.language
+0003eb20: 5f6d 6170 203d 204e 6f6e 650d 0a20 2020  _map = None..   
+0003eb30: 2020 2020 2073 656c 662e 6c77 745f 6461       self.lwt_da
+0003eb40: 7461 203d 204e 6f6e 650d 0a20 2020 2020  ta = None..     
+0003eb50: 2020 2073 656c 662e 7175 6572 795f 636f     self.query_co
+0003eb60: 756e 7420 3d20 300d 0a20 2020 2020 2020  unt = 0..       
+0003eb70: 2073 656c 662e 6f75 7470 7574 5f7a 6820   self.output_zh 
+0003eb80: 3d20 4e6f 6e65 2020 2320 756e 7375 7070  = None  # unsupp
+0003eb90: 6f72 7465 640d 0a20 2020 2020 2020 2073  orted..        s
+0003eba0: 656c 662e 696e 7075 745f 6c69 6d69 7420  elf.input_limit 
+0003ebb0: 3d20 696e 7428 3565 3329 0d0a 2020 2020  = int(5e3)..    
+0003ebc0: 2020 2020 7365 6c66 2e64 6566 6175 6c74      self.default
+0003ebd0: 5f66 726f 6d5f 6c61 6e67 7561 6765 203d  _from_language =
+0003ebe0: 2027 6672 270d 0a20 2020 2020 2020 2073   'fr'..        s
+0003ebf0: 656c 662e 6465 6661 756c 745f 656e 5f74  elf.default_en_t
+0003ec00: 6f5f 6c61 6e67 7561 6765 203d 2027 656e  o_language = 'en
+0003ec10: 2d55 5327 0d0a 0d0a 2020 2020 4054 7365  -US'....    @Tse
+0003ec20: 2e64 6562 7567 5f6c 616e 6775 6167 655f  .debug_language_
+0003ec30: 6d61 700d 0a20 2020 2064 6566 2067 6574  map..    def get
+0003ec40: 5f6c 616e 6775 6167 655f 6d61 7028 7365  _language_map(se
+0003ec50: 6c66 2c20 6c61 6e67 5f75 726c 3a20 7374  lf, lang_url: st
+0003ec60: 722c 2073 733a 2053 6573 7369 6f6e 5479  r, ss: SessionTy
+0003ec70: 7065 2c20 6865 6164 6572 733a 2064 6963  pe, headers: dic
+0003ec80: 742c 2074 696d 656f 7574 3a20 4f70 7469  t, timeout: Opti
+0003ec90: 6f6e 616c 5b66 6c6f 6174 5d2c 2070 726f  onal[float], pro
+0003eca0: 7869 6573 3a20 4f70 7469 6f6e 616c 5b64  xies: Optional[d
+0003ecb0: 6963 745d 2c20 2a2a 6b77 6172 6773 3a20  ict], **kwargs: 
+0003ecc0: 4c61 6e67 4d61 704b 7761 7267 7354 7970  LangMapKwargsTyp
+0003ecd0: 6529 202d 3e20 6469 6374 3a0d 0a20 2020  e) -> dict:..   
+0003ece0: 2020 2020 2064 5f6c 616e 675f 6d61 7020       d_lang_map 
+0003ecf0: 3d20 7373 2e67 6574 286c 616e 675f 7572  = ss.get(lang_ur
+0003ed00: 6c2c 2068 6561 6465 7273 3d68 6561 6465  l, headers=heade
+0003ed10: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
+0003ed20: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
+0003ed30: 7869 6573 292e 6a73 6f6e 2829 0d0a 2020  xies).json()..  
+0003ed40: 2020 2020 2020 7265 7475 726e 207b 6969        return {ii
+0003ed50: 5b27 736f 7572 6365 4c61 6e67 7561 6765  ['sourceLanguage
+0003ed60: 275d 5b27 6d6d 7443 6f64 6527 5d3a 205b  ']['mmtCode']: [
+0003ed70: 6a6a 5b27 7461 7267 6574 4c61 6e67 7561  jj['targetLangua
+0003ed80: 6765 275d 5b27 6d6d 7443 6f64 6527 5d20  ge']['mmtCode'] 
+0003ed90: 666f 7220 6a6a 2069 6e20 645f 6c61 6e67  for jj in d_lang
+0003eda0: 5f6d 6170 2069 6620 6a6a 5b27 736f 7572  _map if jj['sour
+0003edb0: 6365 4c61 6e67 7561 6765 275d 5b27 6d6d  ceLanguage']['mm
+0003edc0: 7443 6f64 6527 5d20 3d3d 2069 695b 2773  tCode'] == ii['s
+0003edd0: 6f75 7263 654c 616e 6775 6167 6527 5d5b  ourceLanguage'][
+0003ede0: 276d 6d74 436f 6465 275d 5d20 666f 7220  'mmtCode']] for 
+0003edf0: 6969 2069 6e20 645f 6c61 6e67 5f6d 6170  ii in d_lang_map
+0003ee00: 7d0d 0a0d 0a20 2020 2023 2064 6566 2067  }....    # def g
+0003ee10: 6574 5f6c 7774 5f64 6174 6128 7365 6c66  et_lwt_data(self
+0003ee20: 2c20 6c77 745f 6a73 5f75 726c 3a20 7374  , lwt_js_url: st
+0003ee30: 722c 2073 733a 2053 6573 7369 6f6e 5479  r, ss: SessionTy
+0003ee40: 7065 2c20 6865 6164 6572 733a 2064 6963  pe, headers: dic
+0003ee50: 742c 2074 696d 656f 7574 3a20 666c 6f61  t, timeout: floa
+0003ee60: 742c 2070 726f 7869 6573 3a20 6469 6374  t, proxies: dict
+0003ee70: 2920 2d3e 2064 6963 743a 0d0a 2020 2020  ) -> dict:..    
+0003ee80: 2320 2020 2020 6a73 5f68 746d 6c20 3d20  #     js_html = 
+0003ee90: 7373 2e67 6574 286c 7774 5f6a 735f 7572  ss.get(lwt_js_ur
+0003eea0: 6c2c 2068 6561 6465 7273 3d68 6561 6465  l, headers=heade
+0003eeb0: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
+0003eec0: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
+0003eed0: 7869 6573 292e 7465 7874 0d0a 2020 2020  xies).text..    
+0003eee0: 2320 2020 2020 6c77 745f 6461 7461 203d  #     lwt_data =
+0003eef0: 207b 0d0a 2020 2020 2320 2020 2020 2020   {..    #       
+0003ef00: 2020 2778 2d6c 7774 2d61 7070 6c69 6361    'x-lwt-applica
+0003ef10: 7469 6f6e 2d69 6427 3a20 7265 2e63 6f6d  tion-id': re.com
+0003ef20: 7069 6c65 2827 2258 2d4c 5754 2d41 7070  pile('"X-LWT-App
+0003ef30: 6c69 6361 7469 6f6e 2d49 4422 3a22 282e  lication-ID":"(.
+0003ef40: 2a3f 2922 2729 2e73 6561 7263 6828 6a73  *?)"').search(js
+0003ef50: 5f68 746d 6c29 2e67 726f 7570 2831 292c  _html).group(1),
+0003ef60: 0d0a 2020 2020 2320 2020 2020 2020 2020  ..    #         
+0003ef70: 2778 2d6c 7774 2d62 7569 6c64 2d69 6427  'x-lwt-build-id'
+0003ef80: 3a20 7265 2e63 6f6d 7069 6c65 2827 2258  : re.compile('"X
+0003ef90: 2d4c 5754 2d42 7569 6c64 2d49 4422 3a22  -LWT-Build-ID":"
+0003efa0: 282e 2a3f 2922 2729 2e73 6561 7263 6828  (.*?)"').search(
+0003efb0: 6a73 5f68 746d 6c29 2e67 726f 7570 2831  js_html).group(1
+0003efc0: 292c 0d0a 2020 2020 2320 2020 2020 7d0d  ),..    #     }.
+0003efd0: 0a20 2020 2023 2020 2020 2072 6574 7572  .    #     retur
+0003efe0: 6e20 6c77 745f 6461 7461 0d0a 0d0a 2020  n lwt_data....  
+0003eff0: 2020 6465 6620 6765 745f 6c77 745f 6461    def get_lwt_da
+0003f000: 7461 2873 656c 6629 202d 3e20 6469 6374  ta(self) -> dict
+0003f010: 3a0d 0a20 2020 2020 2020 206c 7774 5f64  :..        lwt_d
+0003f020: 6174 6120 3d20 7b0d 0a20 2020 2020 2020  ata = {..       
+0003f030: 2020 2020 2027 782d 6c77 742d 6170 706c       'x-lwt-appl
+0003f040: 6963 6174 696f 6e2d 6964 273a 2027 4c57  ication-id': 'LW
+0003f050: 545f 5745 4227 2c0d 0a20 2020 2020 2020  T_WEB',..       
+0003f060: 2020 2020 2027 782d 6c77 742d 6275 696c       'x-lwt-buil
+0003f070: 642d 6964 273a 2027 3334 3637 3735 272c  d-id': '346775',
+0003f080: 0d0a 2020 2020 2020 2020 7d0d 0a20 2020  ..        }..   
+0003f090: 2020 2020 2072 6574 7572 6e20 6c77 745f       return lwt_
+0003f0a0: 6461 7461 0d0a 0d0a 2020 2020 4054 7365  data....    @Tse
+0003f0b0: 2e74 696d 655f 7374 6174 0d0a 2020 2020  .time_stat..    
+0003f0c0: 4054 7365 2e63 6865 636b 5f71 7565 7279  @Tse.check_query
+0003f0d0: 0d0a 2020 2020 6465 6620 6c61 6e67 7561  ..    def langua
+0003f0e0: 6765 5769 7265 5f61 7069 2873 656c 662c  geWire_api(self,
+0003f0f0: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
+0003f100: 2c20 6672 6f6d 5f6c 616e 6775 6167 653a  , from_language:
+0003f110: 2073 7472 203d 2027 6175 746f 272c 2074   str = 'auto', t
+0003f120: 6f5f 6c61 6e67 7561 6765 3a20 7374 7220  o_language: str 
+0003f130: 3d20 2765 6e27 2c20 2a2a 6b77 6172 6773  = 'en', **kwargs
+0003f140: 3a20 4170 694b 7761 7267 7354 7970 6529  : ApiKwargsType)
+0003f150: 202d 3e20 556e 696f 6e5b 7374 722c 2064   -> Union[str, d
+0003f160: 6963 745d 3a0d 0a20 2020 2020 2020 2022  ict]:..        "
+0003f170: 2222 0d0a 2020 2020 2020 2020 6874 7470  ""..        http
+0003f180: 733a 2f2f 7777 772e 6c61 6e67 7561 6765  s://www.language
+0003f190: 7769 7265 2e63 6f6d 2f65 6e2f 7465 6368  wire.com/en/tech
+0003f1a0: 6e6f 6c6f 6779 2f6c 616e 6775 6167 6577  nology/languagew
+0003f1b0: 6972 652d 7472 616e 736c 6174 650d 0a20  ire-translate.. 
+0003f1c0: 2020 2020 2020 203a 7061 7261 6d20 7175         :param qu
+0003f1d0: 6572 795f 7465 7874 3a20 7374 722c 206d  ery_text: str, m
+0003f1e0: 7573 742e 0d0a 2020 2020 2020 2020 3a70  ust...        :p
+0003f1f0: 6172 616d 2066 726f 6d5f 6c61 6e67 7561  aram from_langua
+0003f200: 6765 3a20 7374 722c 2064 6566 6175 6c74  ge: str, default
+0003f210: 2027 6175 746f 272e 0d0a 2020 2020 2020   'auto'...      
+0003f220: 2020 3a70 6172 616d 2074 6f5f 6c61 6e67    :param to_lang
+0003f230: 7561 6765 3a20 7374 722c 2064 6566 6175  uage: str, defau
+0003f240: 6c74 2027 656e 272e 0d0a 2020 2020 2020  lt 'en'...      
+0003f250: 2020 3a70 6172 616d 202a 2a6b 7761 7267    :param **kwarg
+0003f260: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+0003f270: 2020 2020 3a70 6172 616d 2074 696d 656f      :param timeo
+0003f280: 7574 3a20 666c 6f61 742c 2064 6566 6175  ut: float, defau
+0003f290: 6c74 204e 6f6e 652e 0d0a 2020 2020 2020  lt None...      
+0003f2a0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+0003f2b0: 2070 726f 7869 6573 3a20 6469 6374 2c20   proxies: dict, 
+0003f2c0: 6465 6661 756c 7420 4e6f 6e65 2e0d 0a20  default None... 
+0003f2d0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0003f2e0: 7061 7261 6d20 736c 6565 705f 7365 636f  param sleep_seco
+0003f2f0: 6e64 733a 2066 6c6f 6174 2c20 6465 6661  nds: float, defa
+0003f300: 756c 7420 302e 0d0a 2020 2020 2020 2020  ult 0...        
+0003f310: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+0003f320: 735f 6465 7461 696c 5f72 6573 756c 743a  s_detail_result:
+0003f330: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
+0003f340: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
+0003f350: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+0003f360: 5f69 676e 6f72 655f 6c69 6d69 745f 6f66  _ignore_limit_of
+0003f370: 5f6c 656e 6774 683a 2062 6f6f 6c2c 2064  _length: bool, d
+0003f380: 6566 6175 6c74 2046 616c 7365 2e0d 0a20  efault False... 
+0003f390: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0003f3a0: 7061 7261 6d20 6c69 6d69 745f 6f66 5f6c  param limit_of_l
+0003f3b0: 656e 6774 683a 2069 6e74 2c20 6465 6661  ength: int, defa
+0003f3c0: 756c 7420 3230 3030 302e 0d0a 2020 2020  ult 20000...    
+0003f3d0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+0003f3e0: 616d 2069 665f 6967 6e6f 7265 5f65 6d70  am if_ignore_emp
+0003f3f0: 7479 5f71 7565 7279 3a20 626f 6f6c 2c20  ty_query: bool, 
+0003f400: 6465 6661 756c 7420 4661 6c73 652e 0d0a  default False...
+0003f410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003f420: 3a70 6172 616d 2075 7064 6174 655f 7365  :param update_se
+0003f430: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
+0003f440: 3a20 696e 742c 2064 6566 6175 6c74 2031  : int, default 1
+0003f450: 3030 302e 0d0a 2020 2020 2020 2020 2020  000...          
+0003f460: 2020 2020 2020 3a70 6172 616d 2075 7064        :param upd
+0003f470: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+0003f480: 725f 7365 636f 6e64 733a 2066 6c6f 6174  r_seconds: float
+0003f490: 2c20 6465 6661 756c 7420 3135 3030 2e0d  , default 1500..
+0003f4a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003f4b0: 203a 7061 7261 6d20 6966 5f73 686f 775f   :param if_show_
+0003f4c0: 7469 6d65 5f73 7461 743a 2062 6f6f 6c2c  time_stat: bool,
+0003f4d0: 2064 6566 6175 6c74 2046 616c 7365 2e0d   default False..
+0003f4e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003f4f0: 203a 7061 7261 6d20 7368 6f77 5f74 696d   :param show_tim
+0003f500: 655f 7374 6174 5f70 7265 6369 7369 6f6e  e_stat_precision
+0003f510: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
+0003f520: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0003f530: 2020 203a 7061 7261 6d20 6966 5f70 7269     :param if_pri
+0003f540: 6e74 5f77 6172 6e69 6e67 3a20 626f 6f6c  nt_warning: bool
+0003f550: 2c20 6465 6661 756c 7420 5472 7565 2e0d  , default True..
+0003f560: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+0003f570: 3a20 7374 7220 6f72 2064 6963 740d 0a20  : str or dict.. 
+0003f580: 2020 2020 2020 2022 2222 0d0a 0d0a 2020         """....  
+0003f590: 2020 2020 2020 7469 6d65 6f75 7420 3d20        timeout = 
+0003f5a0: 6b77 6172 6773 2e67 6574 2827 7469 6d65  kwargs.get('time
+0003f5b0: 6f75 7427 2c20 4e6f 6e65 290d 0a20 2020  out', None)..   
+0003f5c0: 2020 2020 2070 726f 7869 6573 203d 206b       proxies = k
+0003f5d0: 7761 7267 732e 6765 7428 2770 726f 7869  wargs.get('proxi
+0003f5e0: 6573 272c 204e 6f6e 6529 0d0a 2020 2020  es', None)..    
+0003f5f0: 2020 2020 736c 6565 705f 7365 636f 6e64      sleep_second
+0003f600: 7320 3d20 6b77 6172 6773 2e67 6574 2827  s = kwargs.get('
+0003f610: 736c 6565 705f 7365 636f 6e64 7327 2c20  sleep_seconds', 
+0003f620: 3029 0d0a 2020 2020 2020 2020 6966 5f70  0)..        if_p
+0003f630: 7269 6e74 5f77 6172 6e69 6e67 203d 206b  rint_warning = k
+0003f640: 7761 7267 732e 6765 7428 2769 665f 7072  wargs.get('if_pr
+0003f650: 696e 745f 7761 726e 696e 6727 2c20 5472  int_warning', Tr
+0003f660: 7565 290d 0a20 2020 2020 2020 2069 735f  ue)..        is_
+0003f670: 6465 7461 696c 5f72 6573 756c 7420 3d20  detail_result = 
+0003f680: 6b77 6172 6773 2e67 6574 2827 6973 5f64  kwargs.get('is_d
+0003f690: 6574 6169 6c5f 7265 7375 6c74 272c 2046  etail_result', F
+0003f6a0: 616c 7365 290d 0a20 2020 2020 2020 2075  alse)..        u
+0003f6b0: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+0003f6c0: 7465 725f 6672 6571 203d 206b 7761 7267  ter_freq = kwarg
+0003f6d0: 732e 6765 7428 2775 7064 6174 655f 7365  s.get('update_se
+0003f6e0: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
+0003f6f0: 272c 2073 656c 662e 6465 6661 756c 745f  ', self.default_
+0003f700: 7365 7373 696f 6e5f 6672 6571 290d 0a20  session_freq).. 
+0003f710: 2020 2020 2020 2075 7064 6174 655f 7365         update_se
+0003f720: 7373 696f 6e5f 6166 7465 725f 7365 636f  ssion_after_seco
+0003f730: 6e64 7320 3d20 6b77 6172 6773 2e67 6574  nds = kwargs.get
+0003f740: 2827 7570 6461 7465 5f73 6573 7369 6f6e  ('update_session
+0003f750: 5f61 6674 6572 5f73 6563 6f6e 6473 272c  _after_seconds',
+0003f760: 2073 656c 662e 6465 6661 756c 745f 7365   self.default_se
+0003f770: 7373 696f 6e5f 7365 636f 6e64 7329 0d0a  ssion_seconds)..
+0003f780: 2020 2020 2020 2020 7365 6c66 2e63 6865          self.che
+0003f790: 636b 5f69 6e70 7574 5f6c 696d 6974 2871  ck_input_limit(q
+0003f7a0: 7565 7279 5f74 6578 742c 2073 656c 662e  uery_text, self.
+0003f7b0: 696e 7075 745f 6c69 6d69 7429 0d0a 0d0a  input_limit)....
+0003f7c0: 2020 2020 2020 2020 6e6f 745f 7570 6461          not_upda
+0003f7d0: 7465 5f63 6f6e 645f 6672 6571 203d 2031  te_cond_freq = 1
+0003f7e0: 2069 6620 7365 6c66 2e71 7565 7279 5f63   if self.query_c
+0003f7f0: 6f75 6e74 2025 2075 7064 6174 655f 7365  ount % update_se
+0003f800: 7373 696f 6e5f 6166 7465 725f 6672 6571  ssion_after_freq
+0003f810: 2021 3d20 3020 656c 7365 2030 0d0a 2020   != 0 else 0..  
+0003f820: 2020 2020 2020 6e6f 745f 7570 6461 7465        not_update
+0003f830: 5f63 6f6e 645f 7469 6d65 203d 2031 2069  _cond_time = 1 i
+0003f840: 6620 7469 6d65 2e74 696d 6528 2920 2d20  f time.time() - 
+0003f850: 7365 6c66 2e62 6567 696e 5f74 696d 6520  self.begin_time 
+0003f860: 3c20 7570 6461 7465 5f73 6573 7369 6f6e  < update_session
+0003f870: 5f61 6674 6572 5f73 6563 6f6e 6473 2065  _after_seconds e
+0003f880: 6c73 6520 300d 0a20 2020 2020 2020 2069  lse 0..        i
+0003f890: 6620 6e6f 7420 2873 656c 662e 7365 7373  f not (self.sess
+0003f8a0: 696f 6e20 616e 6420 7365 6c66 2e6c 616e  ion and self.lan
+0003f8b0: 6775 6167 655f 6d61 7020 616e 6420 6e6f  guage_map and no
+0003f8c0: 745f 7570 6461 7465 5f63 6f6e 645f 6672  t_update_cond_fr
+0003f8d0: 6571 2061 6e64 206e 6f74 5f75 7064 6174  eq and not_updat
+0003f8e0: 655f 636f 6e64 5f74 696d 6529 3a0d 0a20  e_cond_time):.. 
+0003f8f0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0003f900: 6265 6769 6e5f 7469 6d65 203d 2074 696d  begin_time = tim
+0003f910: 652e 7469 6d65 2829 0d0a 2020 2020 2020  e.time()..      
+0003f920: 2020 2020 2020 7365 6c66 2e73 6573 7369        self.sessi
+0003f930: 6f6e 203d 2072 6571 7565 7374 732e 5365  on = requests.Se
+0003f940: 7373 696f 6e28 290d 0a20 2020 2020 2020  ssion()..       
+0003f950: 2020 2020 205f 203d 2073 656c 662e 7365       _ = self.se
+0003f960: 7373 696f 6e2e 6765 7428 7365 6c66 2e68  ssion.get(self.h
+0003f970: 6f73 745f 7572 6c2c 2068 6561 6465 7273  ost_url, headers
+0003f980: 3d73 656c 662e 686f 7374 5f68 6561 6465  =self.host_heade
+0003f990: 7273 2c20 7469 6d65 6f75 743d 7469 6d65  rs, timeout=time
+0003f9a0: 6f75 742c 2070 726f 7869 6573 3d70 726f  out, proxies=pro
+0003f9b0: 7869 6573 290d 0a20 2020 2020 2020 2020  xies)..         
+0003f9c0: 2020 2073 656c 662e 6c77 745f 6461 7461     self.lwt_data
+0003f9d0: 203d 2073 656c 662e 6765 745f 6c77 745f   = self.get_lwt_
+0003f9e0: 6461 7461 2829 0d0a 2020 2020 2020 2020  data()..        
+0003f9f0: 2020 2020 7365 6c66 2e61 7069 5f68 6561      self.api_hea
+0003fa00: 6465 7273 2e75 7064 6174 6528 7365 6c66  ders.update(self
+0003fa10: 2e6c 7774 5f64 6174 6129 0d0a 0d0a 2020  .lwt_data)....  
+0003fa20: 2020 2020 2020 2020 2020 5f20 3d20 7365            _ = se
+0003fa30: 6c66 2e73 6573 7369 6f6e 2e70 6f73 7428  lf.session.post(
+0003fa40: 7365 6c66 2e63 6f6f 6b69 655f 7572 6c2c  self.cookie_url,
+0003fa50: 2068 6561 6465 7273 3d73 656c 662e 6170   headers=self.ap
+0003fa60: 695f 6865 6164 6572 732c 2074 696d 656f  i_headers, timeo
+0003fa70: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
+0003fa80: 6965 733d 7072 6f78 6965 7329 0d0a 2020  ies=proxies)..  
+0003fa90: 2020 2020 2020 2020 2020 6465 6275 675f            debug_
+0003faa0: 6c61 6e67 5f6b 7761 7267 7320 3d20 7365  lang_kwargs = se
+0003fab0: 6c66 2e64 6562 7567 5f6c 616e 675f 6b77  lf.debug_lang_kw
+0003fac0: 6172 6773 2866 726f 6d5f 6c61 6e67 7561  args(from_langua
+0003fad0: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
+0003fae0: 2073 656c 662e 6465 6661 756c 745f 6672   self.default_fr
+0003faf0: 6f6d 5f6c 616e 6775 6167 652c 2069 665f  om_language, if_
+0003fb00: 7072 696e 745f 7761 726e 696e 6729 0d0a  print_warning)..
+0003fb10: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0003fb20: 2e6c 616e 6775 6167 655f 6d61 7020 3d20  .language_map = 
+0003fb30: 7365 6c66 2e67 6574 5f6c 616e 6775 6167  self.get_languag
+0003fb40: 655f 6d61 7028 7365 6c66 2e6c 616e 675f  e_map(self.lang_
+0003fb50: 7572 6c2c 2073 656c 662e 7365 7373 696f  url, self.sessio
+0003fb60: 6e2c 2073 656c 662e 6170 695f 6865 6164  n, self.api_head
+0003fb70: 6572 732c 2074 696d 656f 7574 2c20 7072  ers, timeout, pr
+0003fb80: 6f78 6965 732c 202a 2a64 6562 7567 5f6c  oxies, **debug_l
+0003fb90: 616e 675f 6b77 6172 6773 290d 0a0d 0a20  ang_kwargs).... 
+0003fba0: 2020 2020 2020 2069 6620 6672 6f6d 5f6c         if from_l
+0003fbb0: 616e 6775 6167 6520 3d3d 2027 6175 746f  anguage == 'auto
+0003fbc0: 273a 0d0a 2020 2020 2020 2020 2020 2020  ':..            
+0003fbd0: 6672 6f6d 5f6c 616e 6775 6167 6520 3d20  from_language = 
+0003fbe0: 7365 6c66 2e77 6172 6e69 6e67 5f61 7574  self.warning_aut
+0003fbf0: 6f5f 6c61 6e67 2827 6c61 6e67 7561 6765  o_lang('language
+0003fc00: 5769 7265 272c 2073 656c 662e 6465 6661  Wire', self.defa
+0003fc10: 756c 745f 6672 6f6d 5f6c 616e 6775 6167  ult_from_languag
+0003fc20: 652c 2069 665f 7072 696e 745f 7761 726e  e, if_print_warn
+0003fc30: 696e 6729 0d0a 2020 2020 2020 2020 746f  ing)..        to
+0003fc40: 5f6c 616e 6775 6167 6520 3d20 7365 6c66  _language = self
+0003fc50: 2e64 6566 6175 6c74 5f65 6e5f 746f 5f6c  .default_en_to_l
+0003fc60: 616e 6775 6167 6520 6966 2074 6f5f 6c61  anguage if to_la
+0003fc70: 6e67 7561 6765 203d 3d20 2765 6e27 2065  nguage == 'en' e
+0003fc80: 6c73 6520 746f 5f6c 616e 6775 6167 650d  lse to_language.
+0003fc90: 0a20 2020 2020 2020 2066 726f 6d5f 6c61  .        from_la
+0003fca0: 6e67 7561 6765 2c20 746f 5f6c 616e 6775  nguage, to_langu
+0003fcb0: 6167 6520 3d20 7365 6c66 2e63 6865 636b  age = self.check
+0003fcc0: 5f6c 616e 6775 6167 6528 6672 6f6d 5f6c  _language(from_l
+0003fcd0: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
+0003fce0: 7561 6765 2c20 7365 6c66 2e6c 616e 6775  uage, self.langu
+0003fcf0: 6167 655f 6d61 702c 2069 665f 6368 6563  age_map, if_chec
+0003fd00: 6b5f 6c61 6e67 5f72 6576 6572 7365 3d46  k_lang_reverse=F
+0003fd10: 616c 7365 290d 0a0d 0a20 2020 2020 2020  alse)....       
+0003fd20: 2070 6179 6c6f 6164 203d 207b 0d0a 2020   payload = {..  
+0003fd30: 2020 2020 2020 2020 2020 2773 6f75 7263            'sourc
+0003fd40: 6554 6578 7427 3a20 7175 6572 795f 7465  eText': query_te
+0003fd50: 7874 2c0d 0a20 2020 2020 2020 2020 2020  xt,..           
+0003fd60: 2027 736f 7572 6365 4c61 6e67 7561 6765   'sourceLanguage
+0003fd70: 273a 2066 726f 6d5f 6c61 6e67 7561 6765  ': from_language
+0003fd80: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+0003fd90: 7461 7267 6574 4c61 6e67 7561 6765 273a  targetLanguage':
+0003fda0: 2074 6f5f 6c61 6e67 7561 6765 2c0d 0a20   to_language,.. 
+0003fdb0: 2020 2020 2020 207d 0d0a 2020 2020 2020         }..      
+0003fdc0: 2020 7220 3d20 7365 6c66 2e73 6573 7369    r = self.sessi
+0003fdd0: 6f6e 2e70 6f73 7428 7365 6c66 2e61 7069  on.post(self.api
+0003fde0: 5f75 726c 2c20 6a73 6f6e 3d70 6179 6c6f  _url, json=paylo
+0003fdf0: 6164 2c20 6865 6164 6572 733d 7365 6c66  ad, headers=self
+0003fe00: 2e61 7069 5f68 6561 6465 7273 2c20 7469  .api_headers, ti
+0003fe10: 6d65 6f75 743d 7469 6d65 6f75 742c 2070  meout=timeout, p
+0003fe20: 726f 7869 6573 3d70 726f 7869 6573 290d  roxies=proxies).
+0003fe30: 0a20 2020 2020 2020 2072 2e72 6169 7365  .        r.raise
+0003fe40: 5f66 6f72 5f73 7461 7475 7328 290d 0a20  _for_status().. 
+0003fe50: 2020 2020 2020 2064 6174 6120 3d20 722e         data = r.
+0003fe60: 6a73 6f6e 2829 0d0a 2020 2020 2020 2020  json()..        
+0003fe70: 7469 6d65 2e73 6c65 6570 2873 6c65 6570  time.sleep(sleep
+0003fe80: 5f73 6563 6f6e 6473 290d 0a20 2020 2020  _seconds)..     
+0003fe90: 2020 2073 656c 662e 7175 6572 795f 636f     self.query_co
+0003fea0: 756e 7420 2b3d 2031 0d0a 2020 2020 2020  unt += 1..      
+0003feb0: 2020 7265 7475 726e 2064 6174 6120 6966    return data if
+0003fec0: 2069 735f 6465 7461 696c 5f72 6573 756c   is_detail_resul
+0003fed0: 7420 656c 7365 2064 6174 615b 2774 7261  t else data['tra
+0003fee0: 6e73 6c61 7469 6f6e 275d 0d0a 0d0a 0d0a  nslation']......
+0003fef0: 636c 6173 7320 4a75 6469 6328 5473 6529  class Judic(Tse)
+0003ff00: 3a0d 0a20 2020 2064 6566 205f 5f69 6e69  :..    def __ini
+0003ff10: 745f 5f28 7365 6c66 293a 0d0a 2020 2020  t__(self):..    
+0003ff20: 2020 2020 7375 7065 7228 292e 5f5f 696e      super().__in
+0003ff30: 6974 5f5f 2829 0d0a 2020 2020 2020 2020  it__()..        
+0003ff40: 7365 6c66 2e62 6567 696e 5f74 696d 6520  self.begin_time 
+0003ff50: 3d20 7469 6d65 2e74 696d 6528 290d 0a20  = time.time().. 
+0003ff60: 2020 2020 2020 2073 656c 662e 686f 6d65         self.home
+0003ff70: 5f75 726c 203d 2027 6874 7470 733a 2f2f  _url = 'https://
+0003ff80: 6a75 6469 632e 696f 270d 0a20 2020 2020  judic.io'..     
+0003ff90: 2020 2073 656c 662e 686f 7374 5f75 726c     self.host_url
+0003ffa0: 203d 2027 6874 7470 733a 2f2f 6a75 6469   = 'https://judi
+0003ffb0: 632e 696f 2f65 6e2f 7472 616e 736c 6174  c.io/en/translat
+0003ffc0: 6527 0d0a 2020 2020 2020 2020 7365 6c66  e'..        self
+0003ffd0: 2e61 7069 5f75 726c 203d 2027 6874 7470  .api_url = 'http
+0003ffe0: 733a 2f2f 6a75 6469 632e 696f 2f74 7261  s://judic.io/tra
+0003fff0: 6e73 6c61 7465 2f74 6578 7427 0d0a 2020  nslate/text'..  
+00040000: 2020 2020 2020 7365 6c66 2e68 6f73 745f        self.host_
+00040010: 6865 6164 6572 7320 3d20 7365 6c66 2e67  headers = self.g
+00040020: 6574 5f68 6561 6465 7273 2873 656c 662e  et_headers(self.
+00040030: 686f 6d65 5f75 726c 2c20 6966 5f61 7069  home_url, if_api
+00040040: 3d46 616c 7365 2c20 6966 5f72 6566 6572  =False, if_refer
+00040050: 6572 5f66 6f72 5f68 6f73 743d 5472 7565  er_for_host=True
+00040060: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00040070: 6170 695f 6865 6164 6572 7320 3d20 7365  api_headers = se
+00040080: 6c66 2e67 6574 5f68 6561 6465 7273 2873  lf.get_headers(s
+00040090: 656c 662e 686f 6d65 5f75 726c 2c20 6966  elf.home_url, if
+000400a0: 5f61 7069 3d54 7275 652c 2069 665f 6a73  _api=True, if_js
+000400b0: 6f6e 5f66 6f72 5f61 7069 3d54 7275 6529  on_for_api=True)
+000400c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
+000400d0: 6573 7369 6f6e 203d 204e 6f6e 650d 0a20  ession = None.. 
+000400e0: 2020 2020 2020 2073 656c 662e 6c61 6e67         self.lang
+000400f0: 5f6c 6973 7420 3d20 5b27 656e 272c 2027  _list = ['en', '
+00040100: 6465 272c 2027 6672 272c 2027 6e6c 275d  de', 'fr', 'nl']
+00040110: 0d0a 2020 2020 2020 2020 7365 6c66 2e6c  ..        self.l
+00040120: 616e 6775 6167 655f 6d61 7020 3d20 4e6f  anguage_map = No
+00040130: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
+00040140: 2e71 7565 7279 5f63 6f75 6e74 203d 2030  .query_count = 0
+00040150: 0d0a 2020 2020 2020 2020 7365 6c66 2e6f  ..        self.o
+00040160: 7574 7075 745f 7a68 203d 204e 6f6e 6520  utput_zh = None 
+00040170: 2023 2075 6e73 7570 706f 7274 6564 0d0a   # unsupported..
+00040180: 2020 2020 2020 2020 7365 6c66 2e69 6e70          self.inp
+00040190: 7574 5f6c 696d 6974 203d 2069 6e74 2831  ut_limit = int(1
+000401a0: 6533 290d 0a20 2020 2020 2020 2073 656c  e3)..        sel
+000401b0: 662e 6465 6661 756c 745f 6672 6f6d 5f6c  f.default_from_l
+000401c0: 616e 6775 6167 6520 3d20 276e 6c27 0d0a  anguage = 'nl'..
+000401d0: 0d0a 2020 2020 4054 7365 2e64 6562 7567  ..    @Tse.debug
+000401e0: 5f6c 616e 6775 6167 655f 6d61 700d 0a20  _language_map.. 
+000401f0: 2020 2064 6566 2067 6574 5f6c 616e 6775     def get_langu
+00040200: 6167 655f 6d61 7028 7365 6c66 2c20 6c61  age_map(self, la
+00040210: 6e67 5f6c 6973 743a 204c 6973 745b 7374  ng_list: List[st
+00040220: 725d 2c20 2a2a 6b77 6172 6773 3a20 4c61  r], **kwargs: La
+00040230: 6e67 4d61 704b 7761 7267 7354 7970 6529  ngMapKwargsType)
+00040240: 202d 3e20 6469 6374 3a0d 0a20 2020 2020   -> dict:..     
+00040250: 2020 2072 6574 7572 6e20 7b7d 2e66 726f     return {}.fro
+00040260: 6d6b 6579 7328 6c61 6e67 5f6c 6973 742c  mkeys(lang_list,
+00040270: 206c 616e 675f 6c69 7374 290d 0a0d 0a20   lang_list).... 
+00040280: 2020 2040 5473 652e 7469 6d65 5f73 7461     @Tse.time_sta
+00040290: 740d 0a20 2020 2040 5473 652e 6368 6563  t..    @Tse.chec
+000402a0: 6b5f 7175 6572 790d 0a20 2020 2064 6566  k_query..    def
+000402b0: 206a 7564 6963 5f61 7069 2873 656c 662c   judic_api(self,
+000402c0: 2071 7565 7279 5f74 6578 743a 2073 7472   query_text: str
+000402d0: 2c20 6672 6f6d 5f6c 616e 6775 6167 653a  , from_language:
+000402e0: 2073 7472 203d 2027 6175 746f 272c 2074   str = 'auto', t
+000402f0: 6f5f 6c61 6e67 7561 6765 3a20 7374 7220  o_language: str 
+00040300: 3d20 2765 6e27 2c20 2a2a 6b77 6172 6773  = 'en', **kwargs
+00040310: 3a20 4170 694b 7761 7267 7354 7970 6529  : ApiKwargsType)
+00040320: 202d 3e20 556e 696f 6e5b 7374 722c 2064   -> Union[str, d
+00040330: 6963 745d 3a0d 0a20 2020 2020 2020 2022  ict]:..        "
+00040340: 2222 0d0a 2020 2020 2020 2020 6874 7470  ""..        http
+00040350: 733a 2f2f 6a75 6469 632e 696f 2f65 6e2f  s://judic.io/en/
+00040360: 7472 616e 736c 6174 650d 0a20 2020 2020  translate..     
+00040370: 2020 203a 7061 7261 6d20 7175 6572 795f     :param query_
+00040380: 7465 7874 3a20 7374 722c 206d 7573 742e  text: str, must.
+00040390: 0d0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+000403a0: 2066 726f 6d5f 6c61 6e67 7561 6765 3a20   from_language: 
+000403b0: 7374 722c 2064 6566 6175 6c74 2027 6175  str, default 'au
+000403c0: 746f 272e 0d0a 2020 2020 2020 2020 3a70  to'...        :p
+000403d0: 6172 616d 2074 6f5f 6c61 6e67 7561 6765  aram to_language
+000403e0: 3a20 7374 722c 2064 6566 6175 6c74 2027  : str, default '
+000403f0: 656e 272e 0d0a 2020 2020 2020 2020 3a70  en'...        :p
+00040400: 6172 616d 202a 2a6b 7761 7267 733a 0d0a  aram **kwargs:..
+00040410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040420: 3a70 6172 616d 2074 696d 656f 7574 3a20  :param timeout: 
+00040430: 666c 6f61 742c 2064 6566 6175 6c74 204e  float, default N
+00040440: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
+00040450: 2020 2020 2020 3a70 6172 616d 2070 726f        :param pro
+00040460: 7869 6573 3a20 6469 6374 2c20 6465 6661  xies: dict, defa
+00040470: 756c 7420 4e6f 6e65 2e0d 0a20 2020 2020  ult None...     
+00040480: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00040490: 6d20 736c 6565 705f 7365 636f 6e64 733a  m sleep_seconds:
+000404a0: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
+000404b0: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+000404c0: 2020 2020 3a70 6172 616d 2069 735f 6465      :param is_de
+000404d0: 7461 696c 5f72 6573 756c 743a 2062 6f6f  tail_result: boo
+000404e0: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+000404f0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00040500: 2020 203a 7061 7261 6d20 6966 5f69 676e     :param if_ign
+00040510: 6f72 655f 6c69 6d69 745f 6f66 5f6c 656e  ore_limit_of_len
+00040520: 6774 683a 2062 6f6f 6c2c 2064 6566 6175  gth: bool, defau
+00040530: 6c74 2046 616c 7365 2e0d 0a20 2020 2020  lt False...     
+00040540: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+00040550: 6d20 6c69 6d69 745f 6f66 5f6c 656e 6774  m limit_of_lengt
+00040560: 683a 2069 6e74 2c20 6465 6661 756c 7420  h: int, default 
+00040570: 3230 3030 302e 0d0a 2020 2020 2020 2020  20000...        
+00040580: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00040590: 665f 6967 6e6f 7265 5f65 6d70 7479 5f71  f_ignore_empty_q
+000405a0: 7565 7279 3a20 626f 6f6c 2c20 6465 6661  uery: bool, defa
+000405b0: 756c 7420 4661 6c73 652e 0d0a 2020 2020  ult False...    
+000405c0: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+000405d0: 616d 2075 7064 6174 655f 7365 7373 696f  am update_sessio
+000405e0: 6e5f 6166 7465 725f 6672 6571 3a20 696e  n_after_freq: in
+000405f0: 742c 2064 6566 6175 6c74 2031 3030 302e  t, default 1000.
+00040600: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00040610: 2020 3a70 6172 616d 2075 7064 6174 655f    :param update_
+00040620: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
+00040630: 636f 6e64 733a 2066 6c6f 6174 2c20 6465  conds: float, de
+00040640: 6661 756c 7420 3135 3030 2e0d 0a20 2020  fault 1500...   
+00040650: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00040660: 7261 6d20 6966 5f73 686f 775f 7469 6d65  ram if_show_time
+00040670: 5f73 7461 743a 2062 6f6f 6c2c 2064 6566  _stat: bool, def
+00040680: 6175 6c74 2046 616c 7365 2e0d 0a20 2020  ault False...   
+00040690: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+000406a0: 7261 6d20 7368 6f77 5f74 696d 655f 7374  ram show_time_st
+000406b0: 6174 5f70 7265 6369 7369 6f6e 3a20 696e  at_precision: in
+000406c0: 742c 2064 6566 6175 6c74 2032 2e0d 0a20  t, default 2... 
+000406d0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+000406e0: 7061 7261 6d20 6966 5f70 7269 6e74 5f77  param if_print_w
+000406f0: 6172 6e69 6e67 3a20 626f 6f6c 2c20 6465  arning: bool, de
+00040700: 6661 756c 7420 5472 7565 2e0d 0a20 2020  fault True...   
+00040710: 2020 2020 203a 7265 7475 726e 3a20 7374       :return: st
+00040720: 7220 6f72 2064 6963 740d 0a20 2020 2020  r or dict..     
+00040730: 2020 2022 2222 0d0a 0d0a 2020 2020 2020     """....      
+00040740: 2020 7469 6d65 6f75 7420 3d20 6b77 6172    timeout = kwar
+00040750: 6773 2e67 6574 2827 7469 6d65 6f75 7427  gs.get('timeout'
+00040760: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
+00040770: 2070 726f 7869 6573 203d 206b 7761 7267   proxies = kwarg
+00040780: 732e 6765 7428 2770 726f 7869 6573 272c  s.get('proxies',
+00040790: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
+000407a0: 736c 6565 705f 7365 636f 6e64 7320 3d20  sleep_seconds = 
+000407b0: 6b77 6172 6773 2e67 6574 2827 736c 6565  kwargs.get('slee
+000407c0: 705f 7365 636f 6e64 7327 2c20 3029 0d0a  p_seconds', 0)..
+000407d0: 2020 2020 2020 2020 6966 5f70 7269 6e74          if_print
+000407e0: 5f77 6172 6e69 6e67 203d 206b 7761 7267  _warning = kwarg
+000407f0: 732e 6765 7428 2769 665f 7072 696e 745f  s.get('if_print_
+00040800: 7761 726e 696e 6727 2c20 5472 7565 290d  warning', True).
+00040810: 0a20 2020 2020 2020 2069 735f 6465 7461  .        is_deta
+00040820: 696c 5f72 6573 756c 7420 3d20 6b77 6172  il_result = kwar
+00040830: 6773 2e67 6574 2827 6973 5f64 6574 6169  gs.get('is_detai
+00040840: 6c5f 7265 7375 6c74 272c 2046 616c 7365  l_result', False
+00040850: 290d 0a20 2020 2020 2020 2075 7064 6174  )..        updat
+00040860: 655f 7365 7373 696f 6e5f 6166 7465 725f  e_session_after_
+00040870: 6672 6571 203d 206b 7761 7267 732e 6765  freq = kwargs.ge
+00040880: 7428 2775 7064 6174 655f 7365 7373 696f  t('update_sessio
+00040890: 6e5f 6166 7465 725f 6672 6571 272c 2073  n_after_freq', s
+000408a0: 656c 662e 6465 6661 756c 745f 7365 7373  elf.default_sess
+000408b0: 696f 6e5f 6672 6571 290d 0a20 2020 2020  ion_freq)..     
+000408c0: 2020 2075 7064 6174 655f 7365 7373 696f     update_sessio
+000408d0: 6e5f 6166 7465 725f 7365 636f 6e64 7320  n_after_seconds 
+000408e0: 3d20 6b77 6172 6773 2e67 6574 2827 7570  = kwargs.get('up
+000408f0: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+00040900: 6572 5f73 6563 6f6e 6473 272c 2073 656c  er_seconds', sel
+00040910: 662e 6465 6661 756c 745f 7365 7373 696f  f.default_sessio
+00040920: 6e5f 7365 636f 6e64 7329 0d0a 2020 2020  n_seconds)..    
+00040930: 2020 2020 7365 6c66 2e63 6865 636b 5f69      self.check_i
+00040940: 6e70 7574 5f6c 696d 6974 2871 7565 7279  nput_limit(query
+00040950: 5f74 6578 742c 2073 656c 662e 696e 7075  _text, self.inpu
+00040960: 745f 6c69 6d69 7429 0d0a 0d0a 2020 2020  t_limit)....    
+00040970: 2020 2020 6e6f 745f 7570 6461 7465 5f63      not_update_c
+00040980: 6f6e 645f 6672 6571 203d 2031 2069 6620  ond_freq = 1 if 
+00040990: 7365 6c66 2e71 7565 7279 5f63 6f75 6e74  self.query_count
+000409a0: 2025 2075 7064 6174 655f 7365 7373 696f   % update_sessio
+000409b0: 6e5f 6166 7465 725f 6672 6571 2021 3d20  n_after_freq != 
+000409c0: 3020 656c 7365 2030 0d0a 2020 2020 2020  0 else 0..      
+000409d0: 2020 6e6f 745f 7570 6461 7465 5f63 6f6e    not_update_con
+000409e0: 645f 7469 6d65 203d 2031 2069 6620 7469  d_time = 1 if ti
+000409f0: 6d65 2e74 696d 6528 2920 2d20 7365 6c66  me.time() - self
+00040a00: 2e62 6567 696e 5f74 696d 6520 3c20 7570  .begin_time < up
+00040a10: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+00040a20: 6572 5f73 6563 6f6e 6473 2065 6c73 6520  er_seconds else 
+00040a30: 300d 0a20 2020 2020 2020 2069 6620 6e6f  0..        if no
+00040a40: 7420 2873 656c 662e 7365 7373 696f 6e20  t (self.session 
+00040a50: 616e 6420 7365 6c66 2e6c 616e 6775 6167  and self.languag
+00040a60: 655f 6d61 7020 616e 6420 6e6f 745f 7570  e_map and not_up
+00040a70: 6461 7465 5f63 6f6e 645f 6672 6571 2061  date_cond_freq a
+00040a80: 6e64 206e 6f74 5f75 7064 6174 655f 636f  nd not_update_co
+00040a90: 6e64 5f74 696d 6529 3a0d 0a20 2020 2020  nd_time):..     
+00040aa0: 2020 2020 2020 2073 656c 662e 6265 6769         self.begi
+00040ab0: 6e5f 7469 6d65 203d 2074 696d 652e 7469  n_time = time.ti
+00040ac0: 6d65 2829 0d0a 2020 2020 2020 2020 2020  me()..          
+00040ad0: 2020 7365 6c66 2e73 6573 7369 6f6e 203d    self.session =
+00040ae0: 2072 6571 7565 7374 732e 5365 7373 696f   requests.Sessio
+00040af0: 6e28 290d 0a20 2020 2020 2020 2020 2020  n()..           
+00040b00: 205f 203d 2073 656c 662e 7365 7373 696f   _ = self.sessio
+00040b10: 6e2e 6765 7428 7365 6c66 2e68 6f73 745f  n.get(self.host_
+00040b20: 7572 6c2c 2068 6561 6465 7273 3d73 656c  url, headers=sel
+00040b30: 662e 686f 7374 5f68 6561 6465 7273 2c20  f.host_headers, 
+00040b40: 7469 6d65 6f75 743d 7469 6d65 6f75 742c  timeout=timeout,
+00040b50: 2070 726f 7869 6573 3d70 726f 7869 6573   proxies=proxies
+00040b60: 290d 0a20 2020 2020 2020 2020 2020 2064  )..            d
+00040b70: 6562 7567 5f6c 616e 675f 6b77 6172 6773  ebug_lang_kwargs
+00040b80: 203d 2073 656c 662e 6465 6275 675f 6c61   = self.debug_la
+00040b90: 6e67 5f6b 7761 7267 7328 6672 6f6d 5f6c  ng_kwargs(from_l
+00040ba0: 616e 6775 6167 652c 2074 6f5f 6c61 6e67  anguage, to_lang
+00040bb0: 7561 6765 2c20 7365 6c66 2e64 6566 6175  uage, self.defau
+00040bc0: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
+00040bd0: 2c20 6966 5f70 7269 6e74 5f77 6172 6e69  , if_print_warni
+00040be0: 6e67 290d 0a20 2020 2020 2020 2020 2020  ng)..           
+00040bf0: 2073 656c 662e 6c61 6e67 7561 6765 5f6d   self.language_m
+00040c00: 6170 203d 2073 656c 662e 6765 745f 6c61  ap = self.get_la
+00040c10: 6e67 7561 6765 5f6d 6170 2873 656c 662e  nguage_map(self.
+00040c20: 6c61 6e67 5f6c 6973 742c 202a 2a64 6562  lang_list, **deb
+00040c30: 7567 5f6c 616e 675f 6b77 6172 6773 290d  ug_lang_kwargs).
+00040c40: 0a0d 0a20 2020 2020 2020 2069 6620 6672  ...        if fr
+00040c50: 6f6d 5f6c 616e 6775 6167 6520 3d3d 2027  om_language == '
+00040c60: 6175 746f 273a 0d0a 2020 2020 2020 2020  auto':..        
+00040c70: 2020 2020 6672 6f6d 5f6c 616e 6775 6167      from_languag
+00040c80: 6520 3d20 7365 6c66 2e77 6172 6e69 6e67  e = self.warning
+00040c90: 5f61 7574 6f5f 6c61 6e67 2827 6a75 6469  _auto_lang('judi
+00040ca0: 6327 2c20 7365 6c66 2e64 6566 6175 6c74  c', self.default
+00040cb0: 5f66 726f 6d5f 6c61 6e67 7561 6765 2c20  _from_language, 
+00040cc0: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
+00040cd0: 290d 0a20 2020 2020 2020 2066 726f 6d5f  )..        from_
+00040ce0: 6c61 6e67 7561 6765 2c20 746f 5f6c 616e  language, to_lan
+00040cf0: 6775 6167 6520 3d20 7365 6c66 2e63 6865  guage = self.che
+00040d00: 636b 5f6c 616e 6775 6167 6528 6672 6f6d  ck_language(from
+00040d10: 5f6c 616e 6775 6167 652c 2074 6f5f 6c61  _language, to_la
+00040d20: 6e67 7561 6765 2c20 7365 6c66 2e6c 616e  nguage, self.lan
+00040d30: 6775 6167 655f 6d61 7029 0d0a 0d0a 2020  guage_map)....  
+00040d40: 2020 2020 2020 7061 796c 6f61 6420 3d20        payload = 
+00040d50: 7b0d 0a20 2020 2020 2020 2020 2020 2027  {..            '
+00040d60: 736f 7572 6365 5465 7874 273a 2071 7565  sourceText': que
+00040d70: 7279 5f74 6578 742c 0d0a 2020 2020 2020  ry_text,..      
+00040d80: 2020 2020 2020 2769 6e70 7574 4c61 6e67        'inputLang
+00040d90: 273a 2066 726f 6d5f 6c61 6e67 7561 6765  ': from_language
+00040da0: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+00040db0: 6f75 7470 7574 4c61 6e67 273a 2074 6f5f  outputLang': to_
+00040dc0: 6c61 6e67 7561 6765 0d0a 2020 2020 2020  language..      
+00040dd0: 2020 7d0d 0a20 2020 2020 2020 2072 203d    }..        r =
+00040de0: 2073 656c 662e 7365 7373 696f 6e2e 706f   self.session.po
+00040df0: 7374 2873 656c 662e 6170 695f 7572 6c2c  st(self.api_url,
+00040e00: 206a 736f 6e3d 7061 796c 6f61 642c 2068   json=payload, h
+00040e10: 6561 6465 7273 3d73 656c 662e 6170 695f  eaders=self.api_
+00040e20: 6865 6164 6572 732c 2074 696d 656f 7574  headers, timeout
+00040e30: 3d74 696d 656f 7574 2c20 7072 6f78 6965  =timeout, proxie
+00040e40: 733d 7072 6f78 6965 7329 0d0a 2020 2020  s=proxies)..    
+00040e50: 2020 2020 722e 7261 6973 655f 666f 725f      r.raise_for_
+00040e60: 7374 6174 7573 2829 0d0a 2020 2020 2020  status()..      
+00040e70: 2020 6461 7461 203d 2072 2e6a 736f 6e28    data = r.json(
+00040e80: 290d 0a20 2020 2020 2020 2074 696d 652e  )..        time.
+00040e90: 736c 6565 7028 736c 6565 705f 7365 636f  sleep(sleep_seco
+00040ea0: 6e64 7329 0d0a 2020 2020 2020 2020 7365  nds)..        se
+00040eb0: 6c66 2e71 7565 7279 5f63 6f75 6e74 202b  lf.query_count +
+00040ec0: 3d20 310d 0a20 2020 2020 2020 2072 6574  = 1..        ret
+00040ed0: 7572 6e20 6461 7461 2069 6620 6973 5f64  urn data if is_d
+00040ee0: 6574 6169 6c5f 7265 7375 6c74 2065 6c73  etail_result els
+00040ef0: 6520 6461 7461 5b27 7472 616e 736c 6174  e data['translat
+00040f00: 696f 6e27 5d0d 0a0d 0a0d 0a63 6c61 7373  ion']......class
+00040f10: 2059 6565 6b69 7428 5473 6529 3a0d 0a20   Yeekit(Tse):.. 
+00040f20: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00040f30: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+00040f40: 7375 7065 7228 292e 5f5f 696e 6974 5f5f  super().__init__
+00040f50: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
+00040f60: 2e62 6567 696e 5f74 696d 6520 3d20 7469  .begin_time = ti
+00040f70: 6d65 2e74 696d 6528 290d 0a20 2020 2020  me.time()..     
+00040f80: 2020 2073 656c 662e 686f 6d65 5f75 726c     self.home_url
+00040f90: 203d 2027 6874 7470 733a 2f2f 7777 772e   = 'https://www.
+00040fa0: 7965 656b 6974 2e63 6f6d 270d 0a20 2020  yeekit.com'..   
+00040fb0: 2020 2020 2073 656c 662e 686f 7374 5f75       self.host_u
+00040fc0: 726c 203d 2027 6874 7470 733a 2f2f 7777  rl = 'https://ww
+00040fd0: 772e 7965 656b 6974 2e63 6f6d 2f73 6974  w.yeekit.com/sit
+00040fe0: 652f 7472 616e 736c 6174 6527 0d0a 2020  e/translate'..  
+00040ff0: 2020 2020 2020 7365 6c66 2e61 7069 5f75        self.api_u
+00041000: 726c 203d 2027 6874 7470 733a 2f2f 7777  rl = 'https://ww
+00041010: 772e 7965 656b 6974 2e63 6f6d 2f73 6974  w.yeekit.com/sit
+00041020: 652f 646f 7472 616e 736c 6174 6527 0d0a  e/dotranslate'..
+00041030: 2020 2020 2020 2020 7365 6c66 2e6c 616e          self.lan
+00041040: 675f 7572 6c20 3d20 2768 7474 7073 3a2f  g_url = 'https:/
+00041050: 2f77 7777 2e79 6565 6b69 742e 636f 6d2f  /www.yeekit.com/
+00041060: 6a73 2f74 7261 6e73 6c61 7465 2e6a 7327  js/translate.js'
+00041070: 0d0a 2020 2020 2020 2020 7365 6c66 2e68  ..        self.h
+00041080: 6f73 745f 6865 6164 6572 7320 3d20 7365  ost_headers = se
+00041090: 6c66 2e67 6574 5f68 6561 6465 7273 2873  lf.get_headers(s
+000410a0: 656c 662e 686f 6d65 5f75 726c 2c20 6966  elf.home_url, if
+000410b0: 5f61 7069 3d46 616c 7365 2c20 6966 5f72  _api=False, if_r
+000410c0: 6566 6572 6572 5f66 6f72 5f68 6f73 743d  eferer_for_host=
+000410d0: 5472 7565 290d 0a20 2020 2020 2020 2073  True)..        s
+000410e0: 656c 662e 6170 695f 6865 6164 6572 7320  elf.api_headers 
+000410f0: 3d20 7365 6c66 2e67 6574 5f68 6561 6465  = self.get_heade
+00041100: 7273 2873 656c 662e 686f 6d65 5f75 726c  rs(self.home_url
+00041110: 2c20 6966 5f61 7069 3d54 7275 652c 2069  , if_api=True, i
+00041120: 665f 616a 6178 5f66 6f72 5f61 7069 3d54  f_ajax_for_api=T
+00041130: 7275 6529 0d0a 2020 2020 2020 2020 7365  rue)..        se
+00041140: 6c66 2e73 6573 7369 6f6e 203d 204e 6f6e  lf.session = Non
+00041150: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
+00041160: 6c61 6e67 5f6c 6973 7420 3d20 5b27 7a68  lang_list = ['zh
+00041170: 272c 2027 656e 272c 2027 6172 272c 2027  ', 'en', 'ar', '
+00041180: 6465 272c 2027 7275 272c 2027 6672 272c  de', 'ru', 'fr',
+00041190: 2027 637a 272c 2027 7074 272c 2027 6a70   'cz', 'pt', 'jp
+000411a0: 272c 2027 6573 275d 0d0a 2020 2020 2020  ', 'es']..      
+000411b0: 2020 7365 6c66 2e6c 616e 6775 6167 655f    self.language_
+000411c0: 6d61 7020 3d20 4e6f 6e65 0d0a 2020 2020  map = None..    
+000411d0: 2020 2020 7365 6c66 2e71 7565 7279 5f63      self.query_c
+000411e0: 6f75 6e74 203d 2030 0d0a 2020 2020 2020  ount = 0..      
+000411f0: 2020 7365 6c66 2e6f 7574 7075 745f 7a68    self.output_zh
+00041200: 203d 2027 7a68 270d 0a20 2020 2020 2020   = 'zh'..       
+00041210: 2073 656c 662e 696e 7075 745f 6c69 6d69   self.input_limi
+00041220: 7420 3d20 696e 7428 3165 3329 0d0a 2020  t = int(1e3)..  
+00041230: 2020 2020 2020 7365 6c66 2e64 6566 6175        self.defau
+00041240: 6c74 5f66 726f 6d5f 6c61 6e67 7561 6765  lt_from_language
+00041250: 203d 2073 656c 662e 6f75 7470 7574 5f7a   = self.output_z
+00041260: 680d 0a0d 0a20 2020 2040 5473 652e 6465  h....    @Tse.de
+00041270: 6275 675f 6c61 6e67 7561 6765 5f6d 6170  bug_language_map
+00041280: 0d0a 2020 2020 6465 6620 6765 745f 6c61  ..    def get_la
+00041290: 6e67 7561 6765 5f6d 6170 2873 656c 662c  nguage_map(self,
+000412a0: 206c 616e 675f 6c69 7374 3a20 4c69 7374   lang_list: List
+000412b0: 5b73 7472 5d2c 202a 2a6b 7761 7267 733a  [str], **kwargs:
+000412c0: 204c 616e 674d 6170 4b77 6172 6773 5479   LangMapKwargsTy
+000412d0: 7065 2920 2d3e 2064 6963 743a 0d0a 2020  pe) -> dict:..  
+000412e0: 2020 2020 2020 7265 7475 726e 207b 7d2e        return {}.
+000412f0: 6672 6f6d 6b65 7973 286c 616e 675f 6c69  fromkeys(lang_li
+00041300: 7374 2c20 6c61 6e67 5f6c 6973 7429 0d0a  st, lang_list)..
+00041310: 0d0a 2020 2020 4054 7365 2e75 6e63 6572  ..    @Tse.uncer
+00041320: 7469 6669 6564 2020 2320 6e6f 7420 636f  tified  # not co
+00041330: 6465 2c20 6275 7420 7365 7276 6572 2e0d  de, but server..
+00041340: 0a20 2020 2040 5473 652e 7469 6d65 5f73  .    @Tse.time_s
+00041350: 7461 740d 0a20 2020 2040 5473 652e 6368  tat..    @Tse.ch
+00041360: 6563 6b5f 7175 6572 790d 0a20 2020 2064  eck_query..    d
+00041370: 6566 2079 6565 6b69 745f 6170 6928 7365  ef yeekit_api(se
+00041380: 6c66 2c20 7175 6572 795f 7465 7874 3a20  lf, query_text: 
+00041390: 7374 722c 2066 726f 6d5f 6c61 6e67 7561  str, from_langua
+000413a0: 6765 3a20 7374 7220 3d20 2761 7574 6f27  ge: str = 'auto'
+000413b0: 2c20 746f 5f6c 616e 6775 6167 653a 2073  , to_language: s
+000413c0: 7472 203d 2027 656e 272c 202a 2a6b 7761  tr = 'en', **kwa
+000413d0: 7267 733a 2041 7069 4b77 6172 6773 5479  rgs: ApiKwargsTy
+000413e0: 7065 2920 2d3e 2055 6e69 6f6e 5b73 7472  pe) -> Union[str
+000413f0: 2c20 6469 6374 5d3a 0d0a 2020 2020 2020  , dict]:..      
+00041400: 2020 2222 220d 0a20 2020 2020 2020 2068    """..        h
+00041410: 7474 7073 3a2f 2f77 7777 2e79 6565 6b69  ttps://www.yeeki
+00041420: 742e 636f 6d2f 7369 7465 2f74 7261 6e73  t.com/site/trans
+00041430: 6c61 7465 0d0a 2020 2020 2020 2020 3a70  late..        :p
+00041440: 6172 616d 2071 7565 7279 5f74 6578 743a  aram query_text:
+00041450: 2073 7472 2c20 6d75 7374 2e0d 0a20 2020   str, must...   
+00041460: 2020 2020 203a 7061 7261 6d20 6672 6f6d       :param from
+00041470: 5f6c 616e 6775 6167 653a 2073 7472 2c20  _language: str, 
+00041480: 6465 6661 756c 7420 2761 7574 6f27 2e0d  default 'auto'..
+00041490: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+000414a0: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
+000414b0: 2c20 6465 6661 756c 7420 2765 6e27 2e0d  , default 'en'..
+000414c0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+000414d0: 2a2a 6b77 6172 6773 3a0d 0a20 2020 2020  **kwargs:..     
+000414e0: 2020 2020 2020 2020 2020 203a 7061 7261             :para
+000414f0: 6d20 7469 6d65 6f75 743a 2066 6c6f 6174  m timeout: float
+00041500: 2c20 6465 6661 756c 7420 4e6f 6e65 2e0d  , default None..
+00041510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00041520: 203a 7061 7261 6d20 7072 6f78 6965 733a   :param proxies:
+00041530: 2064 6963 742c 2064 6566 6175 6c74 204e   dict, default N
+00041540: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
+00041550: 2020 2020 2020 3a70 6172 616d 2073 6c65        :param sle
+00041560: 6570 5f73 6563 6f6e 6473 3a20 666c 6f61  ep_seconds: floa
+00041570: 742c 2064 6566 6175 6c74 2030 2e0d 0a20  t, default 0... 
+00041580: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00041590: 7061 7261 6d20 6973 5f64 6574 6169 6c5f  param is_detail_
+000415a0: 7265 7375 6c74 3a20 626f 6f6c 2c20 6465  result: bool, de
+000415b0: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
+000415c0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+000415d0: 6172 616d 2069 665f 6967 6e6f 7265 5f6c  aram if_ignore_l
+000415e0: 696d 6974 5f6f 665f 6c65 6e67 7468 3a20  imit_of_length: 
+000415f0: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
+00041600: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
+00041610: 2020 2020 2020 3a70 6172 616d 206c 696d        :param lim
+00041620: 6974 5f6f 665f 6c65 6e67 7468 3a20 696e  it_of_length: in
+00041630: 742c 2064 6566 6175 6c74 2032 3030 3030  t, default 20000
+00041640: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00041650: 2020 203a 7061 7261 6d20 6966 5f69 676e     :param if_ign
+00041660: 6f72 655f 656d 7074 795f 7175 6572 793a  ore_empty_query:
+00041670: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
+00041680: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
+00041690: 2020 2020 2020 203a 7061 7261 6d20 7570         :param up
+000416a0: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+000416b0: 6572 5f66 7265 713a 2069 6e74 2c20 6465  er_freq: int, de
+000416c0: 6661 756c 7420 3130 3030 2e0d 0a20 2020  fault 1000...   
+000416d0: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+000416e0: 7261 6d20 7570 6461 7465 5f73 6573 7369  ram update_sessi
+000416f0: 6f6e 5f61 6674 6572 5f73 6563 6f6e 6473  on_after_seconds
+00041700: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
+00041710: 2031 3530 302e 0d0a 2020 2020 2020 2020   1500...        
+00041720: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00041730: 665f 7368 6f77 5f74 696d 655f 7374 6174  f_show_time_stat
+00041740: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+00041750: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
+00041760: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+00041770: 686f 775f 7469 6d65 5f73 7461 745f 7072  how_time_stat_pr
+00041780: 6563 6973 696f 6e3a 2069 6e74 2c20 6465  ecision: int, de
+00041790: 6661 756c 7420 322e 0d0a 2020 2020 2020  fault 2...      
+000417a0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+000417b0: 2069 665f 7072 696e 745f 7761 726e 696e   if_print_warnin
+000417c0: 673a 2062 6f6f 6c2c 2064 6566 6175 6c74  g: bool, default
+000417d0: 2054 7275 652e 0d0a 2020 2020 2020 2020   True...        
+000417e0: 3a72 6574 7572 6e3a 2073 7472 206f 7220  :return: str or 
+000417f0: 6469 6374 0d0a 2020 2020 2020 2020 2222  dict..        ""
+00041800: 220d 0a0d 0a20 2020 2020 2020 2074 696d  "....        tim
+00041810: 656f 7574 203d 206b 7761 7267 732e 6765  eout = kwargs.ge
+00041820: 7428 2774 696d 656f 7574 272c 204e 6f6e  t('timeout', Non
+00041830: 6529 0d0a 2020 2020 2020 2020 7072 6f78  e)..        prox
+00041840: 6965 7320 3d20 6b77 6172 6773 2e67 6574  ies = kwargs.get
+00041850: 2827 7072 6f78 6965 7327 2c20 4e6f 6e65  ('proxies', None
+00041860: 290d 0a20 2020 2020 2020 2073 6c65 6570  )..        sleep
+00041870: 5f73 6563 6f6e 6473 203d 206b 7761 7267  _seconds = kwarg
+00041880: 732e 6765 7428 2773 6c65 6570 5f73 6563  s.get('sleep_sec
+00041890: 6f6e 6473 272c 2030 290d 0a20 2020 2020  onds', 0)..     
+000418a0: 2020 2069 665f 7072 696e 745f 7761 726e     if_print_warn
+000418b0: 696e 6720 3d20 6b77 6172 6773 2e67 6574  ing = kwargs.get
+000418c0: 2827 6966 5f70 7269 6e74 5f77 6172 6e69  ('if_print_warni
+000418d0: 6e67 272c 2054 7275 6529 0d0a 2020 2020  ng', True)..    
+000418e0: 2020 2020 6973 5f64 6574 6169 6c5f 7265      is_detail_re
+000418f0: 7375 6c74 203d 206b 7761 7267 732e 6765  sult = kwargs.ge
+00041900: 7428 2769 735f 6465 7461 696c 5f72 6573  t('is_detail_res
+00041910: 756c 7427 2c20 4661 6c73 6529 0d0a 2020  ult', False)..  
+00041920: 2020 2020 2020 7570 6461 7465 5f73 6573        update_ses
+00041930: 7369 6f6e 5f61 6674 6572 5f66 7265 7120  sion_after_freq 
+00041940: 3d20 6b77 6172 6773 2e67 6574 2827 7570  = kwargs.get('up
+00041950: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+00041960: 6572 5f66 7265 7127 2c20 7365 6c66 2e64  er_freq', self.d
+00041970: 6566 6175 6c74 5f73 6573 7369 6f6e 5f66  efault_session_f
+00041980: 7265 7129 0d0a 2020 2020 2020 2020 7570  req)..        up
+00041990: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+000419a0: 6572 5f73 6563 6f6e 6473 203d 206b 7761  er_seconds = kwa
+000419b0: 7267 732e 6765 7428 2775 7064 6174 655f  rgs.get('update_
+000419c0: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
+000419d0: 636f 6e64 7327 2c20 7365 6c66 2e64 6566  conds', self.def
+000419e0: 6175 6c74 5f73 6573 7369 6f6e 5f73 6563  ault_session_sec
+000419f0: 6f6e 6473 290d 0a20 2020 2020 2020 2073  onds)..        s
+00041a00: 656c 662e 6368 6563 6b5f 696e 7075 745f  elf.check_input_
+00041a10: 6c69 6d69 7428 7175 6572 795f 7465 7874  limit(query_text
+00041a20: 2c20 7365 6c66 2e69 6e70 7574 5f6c 696d  , self.input_lim
+00041a30: 6974 290d 0a0d 0a20 2020 2020 2020 206e  it)....        n
+00041a40: 6f74 5f75 7064 6174 655f 636f 6e64 5f66  ot_update_cond_f
+00041a50: 7265 7120 3d20 3120 6966 2073 656c 662e  req = 1 if self.
+00041a60: 7175 6572 795f 636f 756e 7420 2520 7570  query_count % up
+00041a70: 6461 7465 5f73 6573 7369 6f6e 5f61 6674  date_session_aft
+00041a80: 6572 5f66 7265 7120 213d 2030 2065 6c73  er_freq != 0 els
+00041a90: 6520 300d 0a20 2020 2020 2020 206e 6f74  e 0..        not
+00041aa0: 5f75 7064 6174 655f 636f 6e64 5f74 696d  _update_cond_tim
+00041ab0: 6520 3d20 3120 6966 2074 696d 652e 7469  e = 1 if time.ti
+00041ac0: 6d65 2829 202d 2073 656c 662e 6265 6769  me() - self.begi
+00041ad0: 6e5f 7469 6d65 203c 2075 7064 6174 655f  n_time < update_
+00041ae0: 7365 7373 696f 6e5f 6166 7465 725f 7365  session_after_se
+00041af0: 636f 6e64 7320 656c 7365 2030 0d0a 2020  conds else 0..  
+00041b00: 2020 2020 2020 6966 206e 6f74 2028 7365        if not (se
+00041b10: 6c66 2e73 6573 7369 6f6e 2061 6e64 2073  lf.session and s
+00041b20: 656c 662e 6c61 6e67 7561 6765 5f6d 6170  elf.language_map
+00041b30: 2061 6e64 206e 6f74 5f75 7064 6174 655f   and not_update_
+00041b40: 636f 6e64 5f66 7265 7120 616e 6420 6e6f  cond_freq and no
+00041b50: 745f 7570 6461 7465 5f63 6f6e 645f 7469  t_update_cond_ti
+00041b60: 6d65 293a 0d0a 2020 2020 2020 2020 2020  me):..          
+00041b70: 2020 7365 6c66 2e62 6567 696e 5f74 696d    self.begin_tim
+00041b80: 6520 3d20 7469 6d65 2e74 696d 6528 290d  e = time.time().
+00041b90: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00041ba0: 662e 7365 7373 696f 6e20 3d20 7265 7175  f.session = requ
+00041bb0: 6573 7473 2e53 6573 7369 6f6e 2829 0d0a  ests.Session()..
+00041bc0: 2020 2020 2020 2020 2020 2020 5f20 3d20              _ = 
+00041bd0: 7365 6c66 2e73 6573 7369 6f6e 2e67 6574  self.session.get
+00041be0: 2873 656c 662e 686f 7374 5f75 726c 2c20  (self.host_url, 
+00041bf0: 6865 6164 6572 733d 7365 6c66 2e68 6f73  headers=self.hos
+00041c00: 745f 6865 6164 6572 732c 2074 696d 656f  t_headers, timeo
+00041c10: 7574 3d74 696d 656f 7574 2c20 7072 6f78  ut=timeout, prox
+00041c20: 6965 733d 7072 6f78 6965 7329 0d0a 2020  ies=proxies)..  
+00041c30: 2020 2020 2020 2020 2020 6465 6275 675f            debug_
+00041c40: 6c61 6e67 5f6b 7761 7267 7320 3d20 7365  lang_kwargs = se
+00041c50: 6c66 2e64 6562 7567 5f6c 616e 675f 6b77  lf.debug_lang_kw
+00041c60: 6172 6773 2866 726f 6d5f 6c61 6e67 7561  args(from_langua
+00041c70: 6765 2c20 746f 5f6c 616e 6775 6167 652c  ge, to_language,
+00041c80: 2073 656c 662e 6465 6661 756c 745f 6672   self.default_fr
+00041c90: 6f6d 5f6c 616e 6775 6167 652c 2069 665f  om_language, if_
+00041ca0: 7072 696e 745f 7761 726e 696e 6729 0d0a  print_warning)..
+00041cb0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00041cc0: 2e6c 616e 6775 6167 655f 6d61 7020 3d20  .language_map = 
+00041cd0: 7365 6c66 2e67 6574 5f6c 616e 6775 6167  self.get_languag
+00041ce0: 655f 6d61 7028 7365 6c66 2e6c 616e 675f  e_map(self.lang_
+00041cf0: 6c69 7374 2c20 2a2a 6465 6275 675f 6c61  list, **debug_la
+00041d00: 6e67 5f6b 7761 7267 7329 0d0a 0d0a 2020  ng_kwargs)....  
+00041d10: 2020 2020 2020 6966 2066 726f 6d5f 6c61        if from_la
+00041d20: 6e67 7561 6765 203d 3d20 2761 7574 6f27  nguage == 'auto'
+00041d30: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
+00041d40: 726f 6d5f 6c61 6e67 7561 6765 203d 2073  rom_language = s
+00041d50: 656c 662e 7761 726e 696e 675f 6175 746f  elf.warning_auto
+00041d60: 5f6c 616e 6728 2779 6565 6b69 7427 2c20  _lang('yeekit', 
+00041d70: 7365 6c66 2e64 6566 6175 6c74 5f66 726f  self.default_fro
+00041d80: 6d5f 6c61 6e67 7561 6765 2c20 6966 5f70  m_language, if_p
+00041d90: 7269 6e74 5f77 6172 6e69 6e67 290d 0a20  rint_warning).. 
+00041da0: 2020 2020 2020 2066 726f 6d5f 6c61 6e67         from_lang
+00041db0: 7561 6765 2c20 746f 5f6c 616e 6775 6167  uage, to_languag
+00041dc0: 6520 3d20 7365 6c66 2e63 6865 636b 5f6c  e = self.check_l
+00041dd0: 616e 6775 6167 6528 6672 6f6d 5f6c 616e  anguage(from_lan
+00041de0: 6775 6167 652c 2074 6f5f 6c61 6e67 7561  guage, to_langua
+00041df0: 6765 2c20 7365 6c66 2e6c 616e 6775 6167  ge, self.languag
+00041e00: 655f 6d61 7029 0d0a 0d0a 2020 2020 2020  e_map)....      
+00041e10: 2020 7061 796c 6f61 6420 3d20 7b0d 0a20    payload = {.. 
+00041e20: 2020 2020 2020 2020 2020 2027 636f 6e74             'cont
+00041e30: 656e 745b 5d27 3a20 7175 6572 795f 7465  ent[]': query_te
+00041e40: 7874 2c0d 0a20 2020 2020 2020 2020 2020  xt,..           
+00041e50: 2027 736f 7572 6365 4c61 6e67 273a 2066   'sourceLang': f
+00041e60: 276e 7b66 726f 6d5f 6c61 6e67 7561 6765  'n{from_language
+00041e70: 7d27 2c0d 0a20 2020 2020 2020 2020 2020  }',..           
+00041e80: 2027 7461 7267 6574 4c61 6e67 273a 2066   'targetLang': f
+00041e90: 276e 7b74 6f5f 6c61 6e67 7561 6765 7d27  'n{to_language}'
+00041ea0: 2c0d 0a20 2020 2020 2020 207d 0d0a 2020  ,..        }..  
+00041eb0: 2020 2020 2020 7061 796c 6f61 6420 3d20        payload = 
+00041ec0: 7572 6c6c 6962 2e70 6172 7365 2e75 726c  urllib.parse.url
+00041ed0: 656e 636f 6465 2870 6179 6c6f 6164 290d  encode(payload).
+00041ee0: 0a20 2020 2020 2020 2072 203d 2073 656c  .        r = sel
+00041ef0: 662e 7365 7373 696f 6e2e 706f 7374 2873  f.session.post(s
+00041f00: 656c 662e 6170 695f 7572 6c2c 2064 6174  elf.api_url, dat
+00041f10: 613d 7061 796c 6f61 642c 2068 6561 6465  a=payload, heade
+00041f20: 7273 3d73 656c 662e 6170 695f 6865 6164  rs=self.api_head
+00041f30: 6572 732c 2074 696d 656f 7574 3d74 696d  ers, timeout=tim
+00041f40: 656f 7574 2c20 7072 6f78 6965 733d 7072  eout, proxies=pr
+00041f50: 6f78 6965 7329 0d0a 2020 2020 2020 2020  oxies)..        
+00041f60: 722e 7261 6973 655f 666f 725f 7374 6174  r.raise_for_stat
+00041f70: 7573 2829 0d0a 2020 2020 2020 2020 6461  us()..        da
+00041f80: 7461 203d 2072 2e6a 736f 6e28 290d 0a20  ta = r.json().. 
+00041f90: 2020 2020 2020 2074 696d 652e 736c 6565         time.slee
+00041fa0: 7028 736c 6565 705f 7365 636f 6e64 7329  p(sleep_seconds)
+00041fb0: 0d0a 2020 2020 2020 2020 7365 6c66 2e71  ..        self.q
+00041fc0: 7565 7279 5f63 6f75 6e74 202b 3d20 310d  uery_count += 1.
+00041fd0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00041fe0: 6461 7461 2069 6620 6973 5f64 6574 6169  data if is_detai
+00041ff0: 6c5f 7265 7375 6c74 2065 6c73 6520 275c  l_result else '\
+00042000: 6e27 2e6a 6f69 6e28 2720 272e 6a6f 696e  n'.join(' '.join
+00042010: 2870 2920 666f 7220 7020 696e 206a 736f  (p) for p in jso
+00042020: 6e2e 6c6f 6164 7328 6461 7461 5b30 5d29  n.loads(data[0])
+00042030: 5b27 7472 616e 736c 6174 696f 6e27 5d5b  ['translation'][
+00042040: 305d 5b27 7472 616e 736c 6174 6564 275d  0]['translated']
+00042050: 5b30 5d5b 2774 7261 6e73 6c61 7469 6f6e  [0]['translation
+00042060: 206c 6973 7427 5d29 0d0a 0d0a 0d0a 636c   list'])......cl
+00042070: 6173 7320 5472 616e 736c 6174 6f72 7353  ass TranslatorsS
+00042080: 6572 7665 723a 0d0a 2020 2020 6465 6620  erver:..    def 
+00042090: 5f5f 696e 6974 5f5f 2873 656c 6629 3a0d  __init__(self):.
+000420a0: 0a20 2020 2020 2020 2073 656c 662e 6370  .        self.cp
+000420b0: 755f 636e 7420 3d20 6f73 2e63 7075 5f63  u_cnt = os.cpu_c
+000420c0: 6f75 6e74 2829 0d0a 2020 2020 2020 2020  ount()..        
+000420d0: 7365 6c66 2e73 6572 7665 725f 7265 6769  self.server_regi
+000420e0: 6f6e 203d 2047 7565 7374 5365 7665 7252  on = GuestSeverR
+000420f0: 6567 696f 6e28 292e 6765 745f 7365 7276  egion().get_serv
+00042100: 6572 5f72 6567 696f 6e0d 0a20 2020 2020  er_region..     
+00042110: 2020 2073 656c 662e 5f61 6c69 6261 6261     self._alibaba
+00042120: 203d 2041 6c69 6261 6261 5632 2829 0d0a   = AlibabaV2()..
+00042130: 2020 2020 2020 2020 7365 6c66 2e61 6c69          self.ali
+00042140: 6261 6261 203d 2073 656c 662e 5f61 6c69  baba = self._ali
+00042150: 6261 6261 2e61 6c69 6261 6261 5f61 7069  baba.alibaba_api
+00042160: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
+00042170: 6170 6572 7469 756d 203d 2041 7065 7274  apertium = Apert
+00042180: 6975 6d28 290d 0a20 2020 2020 2020 2073  ium()..        s
+00042190: 656c 662e 6170 6572 7469 756d 203d 2073  elf.apertium = s
+000421a0: 656c 662e 5f61 7065 7274 6975 6d2e 6170  elf._apertium.ap
+000421b0: 6572 7469 756d 5f61 7069 0d0a 2020 2020  ertium_api..    
+000421c0: 2020 2020 7365 6c66 2e5f 6172 676f 7320      self._argos 
+000421d0: 3d20 4172 676f 7328 290d 0a20 2020 2020  = Argos()..     
+000421e0: 2020 2073 656c 662e 6172 676f 7320 3d20     self.argos = 
+000421f0: 7365 6c66 2e5f 6172 676f 732e 6172 676f  self._argos.argo
+00042200: 735f 6170 690d 0a20 2020 2020 2020 2073  s_api..        s
+00042210: 656c 662e 5f62 6169 6475 203d 2042 6169  elf._baidu = Bai
+00042220: 6475 5631 2829 2020 2320 5632 0d0a 2020  duV1()  # V2..  
+00042230: 2020 2020 2020 7365 6c66 2e62 6169 6475        self.baidu
+00042240: 203d 2073 656c 662e 5f62 6169 6475 2e62   = self._baidu.b
+00042250: 6169 6475 5f61 7069 0d0a 2020 2020 2020  aidu_api..      
+00042260: 2020 7365 6c66 2e5f 6269 6e67 203d 2042    self._bing = B
+00042270: 696e 6728 7365 7276 6572 5f72 6567 696f  ing(server_regio
+00042280: 6e3d 7365 6c66 2e73 6572 7665 725f 7265  n=self.server_re
+00042290: 6769 6f6e 290d 0a20 2020 2020 2020 2073  gion)..        s
+000422a0: 656c 662e 6269 6e67 203d 2073 656c 662e  elf.bing = self.
+000422b0: 5f62 696e 672e 6269 6e67 5f61 7069 0d0a  _bing.bing_api..
+000422c0: 2020 2020 2020 2020 7365 6c66 2e5f 6361          self._ca
+000422d0: 6979 756e 203d 2043 6169 7975 6e28 290d  iyun = Caiyun().
+000422e0: 0a20 2020 2020 2020 2073 656c 662e 6361  .        self.ca
+000422f0: 6979 756e 203d 2073 656c 662e 5f63 6169  iyun = self._cai
+00042300: 7975 6e2e 6361 6979 756e 5f61 7069 0d0a  yun.caiyun_api..
+00042310: 2020 2020 2020 2020 7365 6c66 2e5f 636c          self._cl
+00042320: 6f75 6454 7261 6e73 6c61 7469 6f6e 203d  oudTranslation =
+00042330: 2063 6c6f 7564 5472 616e 736c 6174 696f   cloudTranslatio
+00042340: 6e56 3228 290d 0a20 2020 2020 2020 2073  nV2()..        s
+00042350: 656c 662e 636c 6f75 6454 7261 6e73 6c61  elf.cloudTransla
+00042360: 7469 6f6e 203d 2073 656c 662e 5f63 6c6f  tion = self._clo
+00042370: 7564 5472 616e 736c 6174 696f 6e2e 636c  udTranslation.cl
+00042380: 6f75 6454 7261 6e73 6c61 7469 6f6e 5f61  oudTranslation_a
+00042390: 7069 0d0a 2020 2020 2020 2020 7365 6c66  pi..        self
+000423a0: 2e5f 6465 6570 6c20 3d20 4465 6570 6c28  ._deepl = Deepl(
+000423b0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+000423c0: 6465 6570 6c20 3d20 7365 6c66 2e5f 6465  deepl = self._de
+000423d0: 6570 6c2e 6465 6570 6c5f 6170 690d 0a20  epl.deepl_api.. 
+000423e0: 2020 2020 2020 2073 656c 662e 5f65 6c69         self._eli
+000423f0: 6120 3d20 456c 6961 2829 0d0a 2020 2020  a = Elia()..    
+00042400: 2020 2020 7365 6c66 2e65 6c69 6120 3d20      self.elia = 
+00042410: 7365 6c66 2e5f 656c 6961 2e65 6c69 615f  self._elia.elia_
+00042420: 6170 690d 0a20 2020 2020 2020 2073 656c  api..        sel
+00042430: 662e 5f67 6f6f 676c 6520 3d20 476f 6f67  f._google = Goog
+00042440: 6c65 5632 2873 6572 7665 725f 7265 6769  leV2(server_regi
+00042450: 6f6e 3d73 656c 662e 7365 7276 6572 5f72  on=self.server_r
+00042460: 6567 696f 6e29 0d0a 2020 2020 2020 2020  egion)..        
+00042470: 7365 6c66 2e67 6f6f 676c 6520 3d20 7365  self.google = se
+00042480: 6c66 2e5f 676f 6f67 6c65 2e67 6f6f 676c  lf._google.googl
+00042490: 655f 6170 690d 0a20 2020 2020 2020 2073  e_api..        s
+000424a0: 656c 662e 5f69 6369 6261 203d 2049 6369  elf._iciba = Ici
+000424b0: 6261 2829 0d0a 2020 2020 2020 2020 7365  ba()..        se
+000424c0: 6c66 2e69 6369 6261 203d 2073 656c 662e  lf.iciba = self.
+000424d0: 5f69 6369 6261 2e69 6369 6261 5f61 7069  _iciba.iciba_api
+000424e0: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
+000424f0: 6966 6c79 7465 6b20 3d20 4966 6c79 7465  iflytek = Iflyte
+00042500: 6b56 3228 290d 0a20 2020 2020 2020 2073  kV2()..        s
+00042510: 656c 662e 6966 6c79 7465 6b20 3d20 7365  elf.iflytek = se
+00042520: 6c66 2e5f 6966 6c79 7465 6b2e 6966 6c79  lf._iflytek.ifly
+00042530: 7465 6b5f 6170 690d 0a20 2020 2020 2020  tek_api..       
+00042540: 2073 656c 662e 5f69 666c 7972 6563 203d   self._iflyrec =
+00042550: 2049 666c 7972 6563 2829 0d0a 2020 2020   Iflyrec()..    
+00042560: 2020 2020 7365 6c66 2e69 666c 7972 6563      self.iflyrec
+00042570: 203d 2073 656c 662e 5f69 666c 7972 6563   = self._iflyrec
+00042580: 2e69 666c 7972 6563 5f61 7069 0d0a 2020  .iflyrec_api..  
+00042590: 2020 2020 2020 7365 6c66 2e5f 6974 7261        self._itra
+000425a0: 6e73 6c61 7465 203d 2049 7472 616e 736c  nslate = Itransl
+000425b0: 6174 6528 290d 0a20 2020 2020 2020 2073  ate()..        s
+000425c0: 656c 662e 6974 7261 6e73 6c61 7465 203d  elf.itranslate =
+000425d0: 2073 656c 662e 5f69 7472 616e 736c 6174   self._itranslat
+000425e0: 652e 6974 7261 6e73 6c61 7465 5f61 7069  e.itranslate_api
+000425f0: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
+00042600: 6a75 6469 6320 3d20 4a75 6469 6328 290d  judic = Judic().
+00042610: 0a20 2020 2020 2020 2073 656c 662e 6a75  .        self.ju
+00042620: 6469 6320 3d20 7365 6c66 2e5f 6a75 6469  dic = self._judi
+00042630: 632e 6a75 6469 635f 6170 690d 0a20 2020  c.judic_api..   
+00042640: 2020 2020 2073 656c 662e 5f6c 616e 6775       self._langu
+00042650: 6167 6557 6972 6520 3d20 4c61 6e67 7561  ageWire = Langua
+00042660: 6765 5769 7265 2829 0d0a 2020 2020 2020  geWire()..      
+00042670: 2020 7365 6c66 2e6c 616e 6775 6167 6557    self.languageW
+00042680: 6972 6520 3d20 7365 6c66 2e5f 6c61 6e67  ire = self._lang
+00042690: 7561 6765 5769 7265 2e6c 616e 6775 6167  uageWire.languag
+000426a0: 6557 6972 655f 6170 690d 0a20 2020 2020  eWire_api..     
+000426b0: 2020 2073 656c 662e 5f6c 696e 6776 616e     self._lingvan
+000426c0: 6578 203d 204c 696e 6776 616e 6578 2829  ex = Lingvanex()
+000426d0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6c  ..        self.l
+000426e0: 696e 6776 616e 6578 203d 2073 656c 662e  ingvanex = self.
+000426f0: 5f6c 696e 6776 616e 6578 2e6c 696e 6776  _lingvanex.lingv
+00042700: 616e 6578 5f61 7069 0d0a 2020 2020 2020  anex_api..      
+00042710: 2020 7365 6c66 2e5f 6e69 7574 7261 6e73    self._niutrans
+00042720: 203d 204e 6975 7472 616e 7328 290d 0a20   = Niutrans().. 
+00042730: 2020 2020 2020 2073 656c 662e 6e69 7574         self.niut
+00042740: 7261 6e73 203d 2073 656c 662e 5f6e 6975  rans = self._niu
+00042750: 7472 616e 732e 6e69 7574 7261 6e73 5f61  trans.niutrans_a
+00042760: 7069 0d0a 2020 2020 2020 2020 7365 6c66  pi..        self
+00042770: 2e5f 6d67 6c69 7020 3d20 4d67 6c69 7028  ._mglip = Mglip(
+00042780: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00042790: 6d67 6c69 7020 3d20 7365 6c66 2e5f 6d67  mglip = self._mg
+000427a0: 6c69 702e 6d67 6c69 705f 6170 690d 0a20  lip.mglip_api.. 
+000427b0: 2020 2020 2020 2073 656c 662e 5f6d 6972         self._mir
+000427c0: 6169 203d 204d 6972 6169 2829 0d0a 2020  ai = Mirai()..  
+000427d0: 2020 2020 2020 7365 6c66 2e6d 6972 6169        self.mirai
+000427e0: 203d 2073 656c 662e 5f6d 6972 6169 2e6d   = self._mirai.m
+000427f0: 6972 6169 5f61 7069 0d0a 2020 2020 2020  irai_api..      
+00042800: 2020 7365 6c66 2e5f 6d6f 6465 726e 4d74    self._modernMt
+00042810: 203d 204d 6f64 6572 6e4d 7428 290d 0a20   = ModernMt().. 
+00042820: 2020 2020 2020 2073 656c 662e 6d6f 6465         self.mode
+00042830: 726e 4d74 203d 2073 656c 662e 5f6d 6f64  rnMt = self._mod
+00042840: 6572 6e4d 742e 6d6f 6465 726e 4d74 5f61  ernMt.modernMt_a
+00042850: 7069 0d0a 2020 2020 2020 2020 7365 6c66  pi..        self
+00042860: 2e5f 6d79 4d65 6d6f 7279 203d 204d 794d  ._myMemory = MyM
+00042870: 656d 6f72 7928 290d 0a20 2020 2020 2020  emory()..       
+00042880: 2073 656c 662e 6d79 4d65 6d6f 7279 203d   self.myMemory =
+00042890: 2073 656c 662e 5f6d 794d 656d 6f72 792e   self._myMemory.
+000428a0: 6d79 4d65 6d6f 7279 5f61 7069 0d0a 2020  myMemory_api..  
+000428b0: 2020 2020 2020 7365 6c66 2e5f 7061 7061        self._papa
+000428c0: 676f 203d 2050 6170 6167 6f28 290d 0a20  go = Papago().. 
+000428d0: 2020 2020 2020 2073 656c 662e 7061 7061         self.papa
+000428e0: 676f 203d 2073 656c 662e 5f70 6170 6167  go = self._papag
+000428f0: 6f2e 7061 7061 676f 5f61 7069 0d0a 2020  o.papago_api..  
+00042900: 2020 2020 2020 7365 6c66 2e5f 7171 4661        self._qqFa
+00042910: 6e79 6920 3d20 5151 4661 6e79 6928 290d  nyi = QQFanyi().
+00042920: 0a20 2020 2020 2020 2073 656c 662e 7171  .        self.qq
+00042930: 4661 6e79 6920 3d20 7365 6c66 2e5f 7171  Fanyi = self._qq
+00042940: 4661 6e79 692e 7171 4661 6e79 695f 6170  Fanyi.qqFanyi_ap
+00042950: 690d 0a20 2020 2020 2020 2073 656c 662e  i..        self.
+00042960: 5f71 7154 7261 6e53 6d61 7274 203d 2051  _qqTranSmart = Q
+00042970: 5154 7261 6e53 6d61 7274 2829 0d0a 2020  QTranSmart()..  
+00042980: 2020 2020 2020 7365 6c66 2e71 7154 7261        self.qqTra
+00042990: 6e53 6d61 7274 203d 2073 656c 662e 5f71  nSmart = self._q
+000429a0: 7154 7261 6e53 6d61 7274 2e71 7154 7261  qTranSmart.qqTra
+000429b0: 6e53 6d61 7274 5f61 7069 0d0a 2020 2020  nSmart_api..    
+000429c0: 2020 2020 7365 6c66 2e5f 7265 7665 7273      self._revers
+000429d0: 6f20 3d20 5265 7665 7273 6f28 290d 0a20  o = Reverso().. 
+000429e0: 2020 2020 2020 2073 656c 662e 7265 7665         self.reve
+000429f0: 7273 6f20 3d20 7365 6c66 2e5f 7265 7665  rso = self._reve
+00042a00: 7273 6f2e 7265 7665 7273 6f5f 6170 690d  rso.reverso_api.
+00042a10: 0a20 2020 2020 2020 2073 656c 662e 5f73  .        self._s
+00042a20: 6f67 6f75 203d 2053 6f67 6f75 2829 0d0a  ogou = Sogou()..
+00042a30: 2020 2020 2020 2020 7365 6c66 2e73 6f67          self.sog
+00042a40: 6f75 203d 2073 656c 662e 5f73 6f67 6f75  ou = self._sogou
+00042a50: 2e73 6f67 6f75 5f61 7069 0d0a 2020 2020  .sogou_api..    
+00042a60: 2020 2020 7365 6c66 2e5f 7379 7354 7261      self._sysTra
+00042a70: 6e20 3d20 5379 7354 7261 6e28 290d 0a20  n = SysTran().. 
+00042a80: 2020 2020 2020 2073 656c 662e 7379 7354         self.sysT
+00042a90: 7261 6e20 3d20 7365 6c66 2e5f 7379 7354  ran = self._sysT
+00042aa0: 7261 6e2e 7379 7354 7261 6e5f 6170 690d  ran.sysTran_api.
+00042ab0: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
+00042ac0: 696c 6465 203d 2054 696c 6465 2829 0d0a  ilde = Tilde()..
+00042ad0: 2020 2020 2020 2020 7365 6c66 2e74 696c          self.til
+00042ae0: 6465 203d 2073 656c 662e 5f74 696c 6465  de = self._tilde
+00042af0: 2e74 696c 6465 5f61 7069 0d0a 2020 2020  .tilde_api..    
+00042b00: 2020 2020 7365 6c66 2e5f 7472 616e 736c      self._transl
+00042b10: 6174 6543 6f6d 203d 2054 7261 6e73 6c61  ateCom = Transla
+00042b20: 7465 436f 6d28 290d 0a20 2020 2020 2020  teCom()..       
+00042b30: 2073 656c 662e 7472 616e 736c 6174 6543   self.translateC
+00042b40: 6f6d 203d 2073 656c 662e 5f74 7261 6e73  om = self._trans
+00042b50: 6c61 7465 436f 6d2e 7472 616e 736c 6174  lateCom.translat
+00042b60: 6543 6f6d 5f61 7069 0d0a 2020 2020 2020  eCom_api..      
+00042b70: 2020 7365 6c66 2e5f 7472 616e 736c 6174    self._translat
+00042b80: 654d 6520 3d20 5472 616e 736c 6174 654d  eMe = TranslateM
+00042b90: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
+00042ba0: 662e 7472 616e 736c 6174 654d 6520 3d20  f.translateMe = 
+00042bb0: 7365 6c66 2e5f 7472 616e 736c 6174 654d  self._translateM
+00042bc0: 652e 7472 616e 736c 6174 654d 655f 6170  e.translateMe_ap
+00042bd0: 690d 0a20 2020 2020 2020 2073 656c 662e  i..        self.
+00042be0: 5f75 7469 6265 7420 3d20 5574 6962 6574  _utibet = Utibet
+00042bf0: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
+00042c00: 2e75 7469 6265 7420 3d20 7365 6c66 2e5f  .utibet = self._
+00042c10: 7574 6962 6574 2e75 7469 6265 745f 6170  utibet.utibet_ap
+00042c20: 690d 0a20 2020 2020 2020 2073 656c 662e  i..        self.
+00042c30: 5f76 6f6c 6345 6e67 696e 6520 3d20 566f  _volcEngine = Vo
+00042c40: 6c63 456e 6769 6e65 2829 0d0a 2020 2020  lcEngine()..    
+00042c50: 2020 2020 7365 6c66 2e76 6f6c 6345 6e67      self.volcEng
+00042c60: 696e 6520 3d20 7365 6c66 2e5f 766f 6c63  ine = self._volc
+00042c70: 456e 6769 6e65 2e76 6f6c 6345 6e67 696e  Engine.volcEngin
+00042c80: 655f 6170 690d 0a20 2020 2020 2020 2073  e_api..        s
+00042c90: 656c 662e 5f79 616e 6465 7820 3d20 5961  elf._yandex = Ya
+00042ca0: 6e64 6578 2829 0d0a 2020 2020 2020 2020  ndex()..        
+00042cb0: 7365 6c66 2e79 616e 6465 7820 3d20 7365  self.yandex = se
+00042cc0: 6c66 2e5f 7961 6e64 6578 2e79 616e 6465  lf._yandex.yande
+00042cd0: 785f 6170 690d 0a20 2020 2020 2020 2073  x_api..        s
+00042ce0: 656c 662e 5f79 6565 6b69 7420 3d20 5965  elf._yeekit = Ye
+00042cf0: 656b 6974 2829 0d0a 2020 2020 2020 2020  ekit()..        
+00042d00: 7365 6c66 2e79 6565 6b69 7420 3d20 7365  self.yeekit = se
+00042d10: 6c66 2e5f 7965 656b 6974 2e79 6565 6b69  lf._yeekit.yeeki
+00042d20: 745f 6170 690d 0a20 2020 2020 2020 2073  t_api..        s
+00042d30: 656c 662e 5f79 6f75 6461 6f20 3d20 596f  elf._youdao = Yo
+00042d40: 7564 616f 5633 2829 0d0a 2020 2020 2020  udaoV3()..      
+00042d50: 2020 7365 6c66 2e79 6f75 6461 6f20 3d20    self.youdao = 
+00042d60: 7365 6c66 2e5f 796f 7564 616f 2e79 6f75  self._youdao.you
+00042d70: 6461 6f5f 6170 690d 0a20 2020 2020 2020  dao_api..       
+00042d80: 2073 656c 662e 5f74 7261 6e73 6c61 746f   self._translato
+00042d90: 7273 5f64 6963 7420 3d20 7b0d 0a20 2020  rs_dict = {..   
+00042da0: 2020 2020 2020 2020 2027 616c 6962 6162           'alibab
+00042db0: 6127 3a20 7365 6c66 2e5f 616c 6962 6162  a': self._alibab
+00042dc0: 612c 2027 6170 6572 7469 756d 273a 2073  a, 'apertium': s
+00042dd0: 656c 662e 5f61 7065 7274 6975 6d2c 2027  elf._apertium, '
+00042de0: 6172 676f 7327 3a20 7365 6c66 2e5f 6172  argos': self._ar
+00042df0: 676f 732c 2027 6261 6964 7527 3a20 7365  gos, 'baidu': se
+00042e00: 6c66 2e5f 6261 6964 752c 2027 6269 6e67  lf._baidu, 'bing
+00042e10: 273a 2073 656c 662e 5f62 696e 672c 0d0a  ': self._bing,..
+00042e20: 2020 2020 2020 2020 2020 2020 2763 6169              'cai
+00042e30: 7975 6e27 3a20 7365 6c66 2e5f 6361 6979  yun': self._caiy
+00042e40: 756e 2c20 2763 6c6f 7564 5472 616e 736c  un, 'cloudTransl
+00042e50: 6174 696f 6e27 3a20 7365 6c66 2e5f 636c  ation': self._cl
+00042e60: 6f75 6454 7261 6e73 6c61 7469 6f6e 2c20  oudTranslation, 
+00042e70: 2764 6565 706c 273a 2073 656c 662e 5f64  'deepl': self._d
+00042e80: 6565 706c 2c20 2765 6c69 6127 3a20 7365  eepl, 'elia': se
+00042e90: 6c66 2e5f 656c 6961 2c20 2767 6f6f 676c  lf._elia, 'googl
+00042ea0: 6527 3a20 7365 6c66 2e5f 676f 6f67 6c65  e': self._google
+00042eb0: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+00042ec0: 6963 6962 6127 3a20 7365 6c66 2e5f 6963  iciba': self._ic
+00042ed0: 6962 612c 2027 6966 6c79 7465 6b27 3a20  iba, 'iflytek': 
+00042ee0: 7365 6c66 2e5f 6966 6c79 7465 6b2c 2027  self._iflytek, '
+00042ef0: 6966 6c79 7265 6327 3a20 7365 6c66 2e5f  iflyrec': self._
+00042f00: 6966 6c79 7265 632c 2027 6974 7261 6e73  iflyrec, 'itrans
+00042f10: 6c61 7465 273a 2073 656c 662e 5f69 7472  late': self._itr
+00042f20: 616e 736c 6174 652c 2027 6a75 6469 6327  anslate, 'judic'
+00042f30: 3a20 7365 6c66 2e5f 6a75 6469 632c 0d0a  : self._judic,..
+00042f40: 2020 2020 2020 2020 2020 2020 276c 616e              'lan
+00042f50: 6775 6167 6557 6972 6527 3a20 7365 6c66  guageWire': self
+00042f60: 2e5f 6c61 6e67 7561 6765 5769 7265 2c20  ._languageWire, 
+00042f70: 276c 696e 6776 616e 6578 273a 2073 656c  'lingvanex': sel
+00042f80: 662e 5f6c 696e 6776 616e 6578 2c20 276e  f._lingvanex, 'n
+00042f90: 6975 7472 616e 7327 3a20 7365 6c66 2e5f  iutrans': self._
+00042fa0: 6e69 7574 7261 6e73 2c20 276d 676c 6970  niutrans, 'mglip
+00042fb0: 273a 2073 656c 662e 5f6d 676c 6970 2c20  ': self._mglip, 
+00042fc0: 276d 6972 6169 273a 2073 656c 662e 5f6d  'mirai': self._m
+00042fd0: 6972 6169 2c0d 0a20 2020 2020 2020 2020  irai,..         
+00042fe0: 2020 2027 6d6f 6465 726e 4d74 273a 2073     'modernMt': s
+00042ff0: 656c 662e 5f6d 6f64 6572 6e4d 742c 2027  elf._modernMt, '
+00043000: 6d79 4d65 6d6f 7279 273a 2073 656c 662e  myMemory': self.
+00043010: 5f6d 794d 656d 6f72 792c 2027 7061 7061  _myMemory, 'papa
+00043020: 676f 273a 2073 656c 662e 5f70 6170 6167  go': self._papag
+00043030: 6f2c 2027 7171 4661 6e79 6927 3a20 7365  o, 'qqFanyi': se
+00043040: 6c66 2e5f 7171 4661 6e79 692c 2027 7171  lf._qqFanyi, 'qq
+00043050: 5472 616e 536d 6172 7427 3a20 7365 6c66  TranSmart': self
+00043060: 2e5f 7171 5472 616e 536d 6172 742c 200d  ._qqTranSmart, .
+00043070: 0a20 2020 2020 2020 2020 2020 2027 7265  .            're
+00043080: 7665 7273 6f27 3a20 7365 6c66 2e5f 7265  verso': self._re
+00043090: 7665 7273 6f2c 2027 736f 676f 7527 3a20  verso, 'sogou': 
+000430a0: 7365 6c66 2e5f 736f 676f 752c 2027 7379  self._sogou, 'sy
+000430b0: 7354 7261 6e27 3a20 7365 6c66 2e5f 7379  sTran': self._sy
+000430c0: 7354 7261 6e2c 2027 7469 6c64 6527 3a20  sTran, 'tilde': 
+000430d0: 7365 6c66 2e5f 7469 6c64 652c 2027 7472  self._tilde, 'tr
+000430e0: 616e 736c 6174 6543 6f6d 273a 2073 656c  anslateCom': sel
+000430f0: 662e 5f74 7261 6e73 6c61 7465 436f 6d2c  f._translateCom,
+00043100: 200d 0a20 2020 2020 2020 2020 2020 2027   ..            '
+00043110: 7472 616e 736c 6174 654d 6527 3a20 7365  translateMe': se
+00043120: 6c66 2e5f 7472 616e 736c 6174 654d 652c  lf._translateMe,
+00043130: 2027 7574 6962 6574 273a 2073 656c 662e   'utibet': self.
+00043140: 5f75 7469 6265 742c 2027 766f 6c63 456e  _utibet, 'volcEn
+00043150: 6769 6e65 273a 2073 656c 662e 5f76 6f6c  gine': self._vol
+00043160: 6345 6e67 696e 652c 2027 7961 6e64 6578  cEngine, 'yandex
+00043170: 273a 2073 656c 662e 5f79 616e 6465 782c  ': self._yandex,
+00043180: 2027 7965 656b 6974 273a 2073 656c 662e   'yeekit': self.
+00043190: 5f79 6565 6b69 742c 200d 0a20 2020 2020  _yeekit, ..     
+000431a0: 2020 2020 2020 2027 796f 7564 616f 273a         'youdao':
+000431b0: 2073 656c 662e 5f79 6f75 6461 6f2c 0d0a   self._youdao,..
+000431c0: 2020 2020 2020 2020 7d0d 0a20 2020 2020          }..     
+000431d0: 2020 2073 656c 662e 7472 616e 736c 6174     self.translat
+000431e0: 6f72 735f 6469 6374 203d 207b 0d0a 2020  ors_dict = {..  
+000431f0: 2020 2020 2020 2020 2020 2761 6c69 6261            'aliba
+00043200: 6261 273a 2073 656c 662e 616c 6962 6162  ba': self.alibab
+00043210: 612c 2027 6170 6572 7469 756d 273a 2073  a, 'apertium': s
+00043220: 656c 662e 6170 6572 7469 756d 2c20 2761  elf.apertium, 'a
+00043230: 7267 6f73 273a 2073 656c 662e 6172 676f  rgos': self.argo
+00043240: 732c 2027 6261 6964 7527 3a20 7365 6c66  s, 'baidu': self
+00043250: 2e62 6169 6475 2c20 2762 696e 6727 3a20  .baidu, 'bing': 
+00043260: 7365 6c66 2e62 696e 672c 0d0a 2020 2020  self.bing,..    
+00043270: 2020 2020 2020 2020 2763 6169 7975 6e27          'caiyun'
+00043280: 3a20 7365 6c66 2e63 6169 7975 6e2c 2027  : self.caiyun, '
+00043290: 636c 6f75 6454 7261 6e73 6c61 7469 6f6e  cloudTranslation
+000432a0: 273a 2073 656c 662e 636c 6f75 6454 7261  ': self.cloudTra
+000432b0: 6e73 6c61 7469 6f6e 2c20 2764 6565 706c  nslation, 'deepl
+000432c0: 273a 2073 656c 662e 6465 6570 6c2c 2027  ': self.deepl, '
+000432d0: 656c 6961 273a 2073 656c 662e 656c 6961  elia': self.elia
+000432e0: 2c20 2767 6f6f 676c 6527 3a20 7365 6c66  , 'google': self
+000432f0: 2e67 6f6f 676c 652c 0d0a 2020 2020 2020  .google,..      
+00043300: 2020 2020 2020 2769 6369 6261 273a 2073        'iciba': s
+00043310: 656c 662e 6963 6962 612c 2027 6966 6c79  elf.iciba, 'ifly
+00043320: 7465 6b27 3a20 7365 6c66 2e69 666c 7974  tek': self.iflyt
+00043330: 656b 2c20 2769 666c 7972 6563 273a 2073  ek, 'iflyrec': s
+00043340: 656c 662e 6966 6c79 7265 632c 2027 6974  elf.iflyrec, 'it
+00043350: 7261 6e73 6c61 7465 273a 2073 656c 662e  ranslate': self.
+00043360: 6974 7261 6e73 6c61 7465 2c20 276a 7564  itranslate, 'jud
+00043370: 6963 273a 2073 656c 662e 6a75 6469 632c  ic': self.judic,
+00043380: 0d0a 2020 2020 2020 2020 2020 2020 276c  ..            'l
+00043390: 616e 6775 6167 6557 6972 6527 3a20 7365  anguageWire': se
+000433a0: 6c66 2e6c 616e 6775 6167 6557 6972 652c  lf.languageWire,
+000433b0: 2027 6c69 6e67 7661 6e65 7827 3a20 7365   'lingvanex': se
+000433c0: 6c66 2e6c 696e 6776 616e 6578 2c20 276e  lf.lingvanex, 'n
+000433d0: 6975 7472 616e 7327 3a20 7365 6c66 2e6e  iutrans': self.n
+000433e0: 6975 7472 616e 732c 2027 6d67 6c69 7027  iutrans, 'mglip'
+000433f0: 3a20 7365 6c66 2e6d 676c 6970 2c20 276d  : self.mglip, 'm
+00043400: 6972 6169 273a 2073 656c 662e 6d69 7261  irai': self.mira
+00043410: 692c 0d0a 2020 2020 2020 2020 2020 2020  i,..            
+00043420: 276d 6f64 6572 6e4d 7427 3a20 7365 6c66  'modernMt': self
+00043430: 2e6d 6f64 6572 6e4d 742c 2027 6d79 4d65  .modernMt, 'myMe
+00043440: 6d6f 7279 273a 2073 656c 662e 6d79 4d65  mory': self.myMe
+00043450: 6d6f 7279 2c20 2770 6170 6167 6f27 3a20  mory, 'papago': 
+00043460: 7365 6c66 2e70 6170 6167 6f2c 2027 7171  self.papago, 'qq
+00043470: 4661 6e79 6927 3a20 7365 6c66 2e71 7146  Fanyi': self.qqF
+00043480: 616e 7969 2c20 2771 7154 7261 6e53 6d61  anyi, 'qqTranSma
+00043490: 7274 273a 2073 656c 662e 7171 5472 616e  rt': self.qqTran
+000434a0: 536d 6172 742c 0d0a 2020 2020 2020 2020  Smart,..        
+000434b0: 2020 2020 2772 6576 6572 736f 273a 2073      'reverso': s
+000434c0: 656c 662e 7265 7665 7273 6f2c 2027 736f  elf.reverso, 'so
+000434d0: 676f 7527 3a20 7365 6c66 2e73 6f67 6f75  gou': self.sogou
+000434e0: 2c20 2773 7973 5472 616e 273a 2073 656c  , 'sysTran': sel
+000434f0: 662e 7379 7354 7261 6e2c 2027 7469 6c64  f.sysTran, 'tild
+00043500: 6527 3a20 7365 6c66 2e74 696c 6465 2c20  e': self.tilde, 
+00043510: 2774 7261 6e73 6c61 7465 436f 6d27 3a20  'translateCom': 
+00043520: 7365 6c66 2e74 7261 6e73 6c61 7465 436f  self.translateCo
+00043530: 6d2c 0d0a 2020 2020 2020 2020 2020 2020  m,..            
+00043540: 2774 7261 6e73 6c61 7465 4d65 273a 2073  'translateMe': s
+00043550: 656c 662e 7472 616e 736c 6174 654d 652c  elf.translateMe,
+00043560: 2027 7574 6962 6574 273a 2073 656c 662e   'utibet': self.
+00043570: 7574 6962 6574 2c20 2776 6f6c 6345 6e67  utibet, 'volcEng
+00043580: 696e 6527 3a20 7365 6c66 2e76 6f6c 6345  ine': self.volcE
+00043590: 6e67 696e 652c 2027 7961 6e64 6578 273a  ngine, 'yandex':
+000435a0: 2073 656c 662e 7961 6e64 6578 2c20 2779   self.yandex, 'y
+000435b0: 6565 6b69 7427 3a20 7365 6c66 2e79 6565  eekit': self.yee
+000435c0: 6b69 742c 0d0a 2020 2020 2020 2020 2020  kit,..          
+000435d0: 2020 2779 6f75 6461 6f27 3a20 7365 6c66    'youdao': self
+000435e0: 2e79 6f75 6461 6f2c 0d0a 2020 2020 2020  .youdao,..      
+000435f0: 2020 7d0d 0a20 2020 2020 2020 2073 656c    }..        sel
+00043600: 662e 7472 616e 736c 6174 6f72 735f 706f  f.translators_po
+00043610: 6f6c 203d 206c 6973 7428 7365 6c66 2e74  ol = list(self.t
+00043620: 7261 6e73 6c61 746f 7273 5f64 6963 742e  ranslators_dict.
+00043630: 6b65 7973 2829 290d 0a20 2020 2020 2020  keys())..       
+00043640: 2073 656c 662e 6e6f 745f 656e 5f6c 616e   self.not_en_lan
+00043650: 6773 203d 207b 2775 7469 6265 7427 3a20  gs = {'utibet': 
+00043660: 2774 6927 2c20 276d 676c 6970 273a 2027  'ti', 'mglip': '
+00043670: 6d6f 6e27 7d0d 0a20 2020 2020 2020 2073  mon'}..        s
+00043680: 656c 662e 6e6f 745f 7a68 5f6c 616e 6773  elf.not_zh_langs
+00043690: 203d 207b 276c 616e 6775 6167 6557 6972   = {'languageWir
+000436a0: 6527 3a20 2766 7227 2c20 2774 696c 6465  e': 'fr', 'tilde
+000436b0: 273a 2027 6672 272c 2027 656c 6961 273a  ': 'fr', 'elia':
+000436c0: 2027 6672 272c 2027 6170 6572 7469 756d   'fr', 'apertium
+000436d0: 273a 2027 7370 6127 7d0d 0a20 2020 2020  ': 'spa'}..     
+000436e0: 2020 2073 656c 662e 7072 655f 6163 6365     self.pre_acce
+000436f0: 6c65 7261 7469 6f6e 5f6c 6162 656c 203d  leration_label =
+00043700: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
+00043710: 2e65 7861 6d70 6c65 5f71 7565 7279 5f74  .example_query_t
+00043720: 6578 7420 3d20 27e4 bda0 e5a5 bde3 8082  ext = '.........
+00043730: 5c6e e6ac a2e8 bf8e e4bd a0ef bc81 270d  \n............'.
+00043740: 0a20 2020 2020 2020 2073 656c 662e 7375  .        self.su
+00043750: 6363 6573 735f 7472 616e 736c 6174 6f72  ccess_translator
+00043760: 735f 706f 6f6c 203d 205b 5d0d 0a20 2020  s_pool = []..   
+00043770: 2020 2020 2073 656c 662e 6661 696c 7572       self.failur
+00043780: 655f 7472 616e 736c 6174 6f72 735f 706f  e_translators_po
+00043790: 6f6c 203d 205b 5d0d 0a0d 0a20 2020 2064  ol = []....    d
+000437a0: 6566 2074 7261 6e73 6c61 7465 5f74 6578  ef translate_tex
+000437b0: 7428 7365 6c66 2c0d 0a20 2020 2020 2020  t(self,..       
+000437c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000437d0: 7175 6572 795f 7465 7874 3a20 7374 722c  query_text: str,
+000437e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000437f0: 2020 2020 2020 2020 2074 7261 6e73 6c61           transla
+00043800: 746f 723a 2073 7472 203d 2027 6269 6e67  tor: str = 'bing
+00043810: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+00043820: 2020 2020 2020 2020 2020 2066 726f 6d5f             from_
+00043830: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
+00043840: 2761 7574 6f27 2c0d 0a20 2020 2020 2020  'auto',..       
+00043850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043860: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
+00043870: 203d 2027 656e 272c 0d0a 2020 2020 2020   = 'en',..      
+00043880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043890: 2069 665f 7573 655f 7072 6561 6363 656c   if_use_preaccel
+000438a0: 6572 6174 696f 6e3a 2062 6f6f 6c20 3d20  eration: bool = 
+000438b0: 4661 6c73 652c 0d0a 2020 2020 2020 2020  False,..        
+000438c0: 2020 2020 2020 2020 2020 2020 2020 202a                 *
+000438d0: 2a6b 7761 7267 733a 2041 7069 4b77 6172  *kwargs: ApiKwar
+000438e0: 6773 5479 7065 2c0d 0a20 2020 2020 2020  gsType,..       
+000438f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043900: 2920 2d3e 2055 6e69 6f6e 5b73 7472 2c20  ) -> Union[str, 
+00043910: 6469 6374 5d3a 0d0a 2020 2020 2020 2020  dict]:..        
+00043920: 2222 220d 0a20 2020 2020 2020 203a 7061  """..        :pa
+00043930: 7261 6d20 7175 6572 795f 7465 7874 3a20  ram query_text: 
+00043940: 7374 722c 206d 7573 742e 0d0a 2020 2020  str, must...    
+00043950: 2020 2020 3a70 6172 616d 2074 7261 6e73      :param trans
+00043960: 6c61 746f 723a 2073 7472 2c20 6465 6661  lator: str, defa
+00043970: 756c 7420 2762 696e 6727 2e0d 0a20 2020  ult 'bing'...   
+00043980: 2020 2020 203a 7061 7261 6d20 6672 6f6d       :param from
+00043990: 5f6c 616e 6775 6167 653a 2073 7472 2c20  _language: str, 
+000439a0: 6465 6661 756c 7420 2761 7574 6f27 2e0d  default 'auto'..
+000439b0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+000439c0: 746f 5f6c 616e 6775 6167 653a 2073 7472  to_language: str
+000439d0: 2c20 6465 6661 756c 7420 2765 6e27 2e0d  , default 'en'..
+000439e0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+000439f0: 6966 5f75 7365 5f70 7265 6163 6365 6c65  if_use_preaccele
+00043a00: 7261 7469 6f6e 3a20 626f 6f6c 2c20 6465  ration: bool, de
+00043a10: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
+00043a20: 2020 2020 2020 3a70 6172 616d 202a 2a6b        :param **k
+00043a30: 7761 7267 733a 0d0a 2020 2020 2020 2020  wargs:..        
+00043a40: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00043a50: 735f 6465 7461 696c 5f72 6573 756c 743a  s_detail_result:
+00043a60: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
+00043a70: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
+00043a80: 2020 2020 2020 203a 7061 7261 6d20 7072         :param pr
+00043a90: 6f66 6573 7369 6f6e 616c 5f66 6965 6c64  ofessional_field
+00043aa0: 3a20 7374 722c 2073 7570 706f 7274 2061  : str, support a
+00043ab0: 6c69 6261 6261 2829 2c20 6261 6964 7528  libaba(), baidu(
+00043ac0: 292c 2063 6169 7975 6e28 292c 2063 6c6f  ), caiyun(), clo
+00043ad0: 7564 5472 616e 736c 6174 696f 6e28 292c  udTranslation(),
+00043ae0: 2065 6c69 6128 292c 2073 7973 5472 616e   elia(), sysTran
+00043af0: 2829 2c20 796f 7564 616f 2829 2c20 766f  (), youdao(), vo
+00043b00: 6c63 456e 6769 6e65 2829 206f 6e6c 792e  lcEngine() only.
+00043b10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00043b20: 2020 3a70 6172 616d 2074 696d 656f 7574    :param timeout
+00043b30: 3a20 666c 6f61 742c 2064 6566 6175 6c74  : float, default
+00043b40: 204e 6f6e 652e 0d0a 2020 2020 2020 2020   None...        
+00043b50: 2020 2020 2020 2020 3a70 6172 616d 2070          :param p
+00043b60: 726f 7869 6573 3a20 6469 6374 2c20 6465  roxies: dict, de
+00043b70: 6661 756c 7420 4e6f 6e65 2e0d 0a20 2020  fault None...   
+00043b80: 2020 2020 2020 2020 2020 2020 203a 7061               :pa
+00043b90: 7261 6d20 736c 6565 705f 7365 636f 6e64  ram sleep_second
+00043ba0: 733a 2066 6c6f 6174 2c20 6465 6661 756c  s: float, defaul
+00043bb0: 7420 302e 0d0a 2020 2020 2020 2020 2020  t 0...          
+00043bc0: 2020 2020 2020 3a70 6172 616d 2075 7064        :param upd
+00043bd0: 6174 655f 7365 7373 696f 6e5f 6166 7465  ate_session_afte
+00043be0: 725f 6672 6571 3a20 696e 742c 2064 6566  r_freq: int, def
+00043bf0: 6175 6c74 2031 3030 302e 0d0a 2020 2020  ault 1000...    
+00043c00: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+00043c10: 616d 2075 7064 6174 655f 7365 7373 696f  am update_sessio
+00043c20: 6e5f 6166 7465 725f 7365 636f 6e64 733a  n_after_seconds:
+00043c30: 2066 6c6f 6174 2c20 6465 6661 756c 7420   float, default 
+00043c40: 3135 3030 2e0d 0a20 2020 2020 2020 2020  1500...         
+00043c50: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+00043c60: 5f75 7365 5f63 6e5f 686f 7374 3a20 626f  _use_cn_host: bo
+00043c70: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
+00043c80: 652e 2053 7570 706f 7274 2067 6f6f 676c  e. Support googl
+00043c90: 6528 292c 2062 696e 6728 2920 6f6e 6c79  e(), bing() only
+00043ca0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00043cb0: 2020 203a 7061 7261 6d20 7265 7365 745f     :param reset_
+00043cc0: 686f 7374 5f75 726c 3a20 7374 722c 2064  host_url: str, d
+00043cd0: 6566 6175 6c74 204e 6f6e 652e 2053 7570  efault None. Sup
+00043ce0: 706f 7274 2067 6f6f 676c 6528 292c 2061  port google(), a
+00043cf0: 7267 6f73 2829 2c20 7961 6e64 6578 2829  rgos(), yandex()
+00043d00: 206f 6e6c 792e 0d0a 2020 2020 2020 2020   only...        
+00043d10: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00043d20: 665f 6368 6563 6b5f 7265 7365 745f 686f  f_check_reset_ho
+00043d30: 7374 5f75 726c 3a20 626f 6f6c 2c20 6465  st_url: bool, de
+00043d40: 6661 756c 7420 5472 7565 2e20 5375 7070  fault True. Supp
+00043d50: 6f72 7420 676f 6f67 6c65 2829 2c20 7961  ort google(), ya
+00043d60: 6e64 6578 2829 206f 6e6c 792e 0d0a 2020  ndex() only...  
+00043d70: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+00043d80: 6172 616d 2069 665f 6967 6e6f 7265 5f65  aram if_ignore_e
+00043d90: 6d70 7479 5f71 7565 7279 3a20 626f 6f6c  mpty_query: bool
+00043da0: 2c20 6465 6661 756c 7420 4661 6c73 652e  , default False.
+00043db0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00043dc0: 2020 3a70 6172 616d 2069 665f 6967 6e6f    :param if_igno
+00043dd0: 7265 5f6c 696d 6974 5f6f 665f 6c65 6e67  re_limit_of_leng
+00043de0: 7468 3a20 626f 6f6c 2c20 6465 6661 756c  th: bool, defaul
+00043df0: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+00043e00: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+00043e10: 206c 696d 6974 5f6f 665f 6c65 6e67 7468   limit_of_length
+00043e20: 3a20 696e 742c 2064 6566 6175 6c74 2032  : int, default 2
+00043e30: 3030 3030 2e0d 0a20 2020 2020 2020 2020  0000...         
+00043e40: 2020 2020 2020 203a 7061 7261 6d20 6966         :param if
+00043e50: 5f73 686f 775f 7469 6d65 5f73 7461 743a  _show_time_stat:
+00043e60: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
+00043e70: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
+00043e80: 2020 2020 2020 203a 7061 7261 6d20 7368         :param sh
+00043e90: 6f77 5f74 696d 655f 7374 6174 5f70 7265  ow_time_stat_pre
+00043ea0: 6369 7369 6f6e 3a20 696e 742c 2064 6566  cision: int, def
+00043eb0: 6175 6c74 2032 2e0d 0a20 2020 2020 2020  ault 2...       
+00043ec0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+00043ed0: 6966 5f70 7269 6e74 5f77 6172 6e69 6e67  if_print_warning
+00043ee0: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+00043ef0: 5472 7565 2e0d 0a20 2020 2020 2020 2020  True...         
+00043f00: 2020 2020 2020 203a 7061 7261 6d20 6c69         :param li
+00043f10: 6e67 7661 6e65 785f 6d6f 6465 6c3a 2073  ngvanex_model: s
+00043f20: 7472 2c20 6465 6661 756c 7420 2742 3243  tr, default 'B2C
+00043f30: 272c 2063 686f 6f73 6520 6672 6f6d 2028  ', choose from (
+00043f40: 2242 3243 222c 2022 4232 4222 292e 0d0a  "B2C", "B2B")...
+00043f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043f60: 3a70 6172 616d 206d 794d 656d 6f72 795f  :param myMemory_
+00043f70: 6d6f 6465 3a20 7374 722c 2064 6566 6175  mode: str, defau
+00043f80: 6c74 2022 7765 6222 2c20 6368 6f6f 7365  lt "web", choose
+00043f90: 2066 726f 6d20 2822 7765 6222 2c20 2261   from ("web", "a
+00043fa0: 7069 2229 2e0d 0a20 2020 2020 2020 203a  pi")...        :
+00043fb0: 7265 7475 726e 3a20 7374 7220 6f72 2064  return: str or d
+00043fc0: 6963 740d 0a20 2020 2020 2020 2022 2222  ict..        """
+00043fd0: 0d0a 0d0a 2020 2020 2020 2020 6966 2074  ....        if t
+00043fe0: 7261 6e73 6c61 746f 7220 6e6f 7420 696e  ranslator not in
+00043ff0: 2073 656c 662e 7472 616e 736c 6174 6f72   self.translator
+00044000: 735f 706f 6f6c 3a0d 0a20 2020 2020 2020  s_pool:..       
+00044010: 2020 2020 2072 6169 7365 2054 7261 6e73       raise Trans
+00044020: 6c61 746f 7245 7272 6f72 0d0a 0d0a 2020  latorError....  
+00044030: 2020 2020 2020 6966 206e 6f74 2073 656c        if not sel
+00044040: 662e 7072 655f 6163 6365 6c65 7261 7469  f.pre_accelerati
+00044050: 6f6e 5f6c 6162 656c 2061 6e64 2069 665f  on_label and if_
+00044060: 7573 655f 7072 6561 6363 656c 6572 6174  use_preaccelerat
+00044070: 696f 6e3a 0d0a 2020 2020 2020 2020 2020  ion:..          
+00044080: 2020 5f20 3d20 7365 6c66 2e70 7265 6163    _ = self.preac
+00044090: 6365 6c65 7261 7465 2829 0d0a 0d0a 2020  celerate()....  
+000440a0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+000440b0: 662e 7472 616e 736c 6174 6f72 735f 6469  f.translators_di
+000440c0: 6374 5b74 7261 6e73 6c61 746f 725d 2871  ct[translator](q
+000440d0: 7565 7279 5f74 6578 743d 7175 6572 795f  uery_text=query_
+000440e0: 7465 7874 2c20 6672 6f6d 5f6c 616e 6775  text, from_langu
+000440f0: 6167 653d 6672 6f6d 5f6c 616e 6775 6167  age=from_languag
+00044100: 652c 2074 6f5f 6c61 6e67 7561 6765 3d74  e, to_language=t
+00044110: 6f5f 6c61 6e67 7561 6765 2c20 2a2a 6b77  o_language, **kw
+00044120: 6172 6773 290d 0a0d 0a20 2020 2064 6566  args)....    def
+00044130: 2074 7261 6e73 6c61 7465 5f68 746d 6c28   translate_html(
+00044140: 7365 6c66 2c0d 0a20 2020 2020 2020 2020  self,..         
+00044150: 2020 2020 2020 2020 2020 2020 2020 6874                ht
+00044160: 6d6c 5f74 6578 743a 2073 7472 2c0d 0a20  ml_text: str,.. 
+00044170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044180: 2020 2020 2020 7472 616e 736c 6174 6f72        translator
+00044190: 3a20 7374 7220 3d20 2762 696e 6727 2c0d  : str = 'bing',.
+000441a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000441b0: 2020 2020 2020 2020 6672 6f6d 5f6c 616e          from_lan
+000441c0: 6775 6167 653a 2073 7472 203d 2027 6175  guage: str = 'au
+000441d0: 746f 272c 0d0a 2020 2020 2020 2020 2020  to',..          
+000441e0: 2020 2020 2020 2020 2020 2020 2074 6f5f               to_
+000441f0: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
+00044200: 2765 6e27 2c0d 0a20 2020 2020 2020 2020  'en',..         
+00044210: 2020 2020 2020 2020 2020 2020 2020 6e5f                n_
+00044220: 6a6f 6273 3a20 696e 7420 3d20 2d31 2c0d  jobs: int = -1,.
+00044230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00044240: 2020 2020 2020 2020 6966 5f75 7365 5f70          if_use_p
+00044250: 7265 6163 6365 6c65 7261 7469 6f6e 3a20  reacceleration: 
+00044260: 626f 6f6c 203d 2046 616c 7365 2c0d 0a20  bool = False,.. 
+00044270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044280: 2020 2020 2020 2a2a 6b77 6172 6773 3a20        **kwargs: 
+00044290: 4170 694b 7761 7267 7354 7970 652c 0d0a  ApiKwargsType,..
+000442a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000442b0: 2020 2020 2020 2029 202d 3e20 7374 723a         ) -> str:
+000442c0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+000442d0: 2020 2020 2020 2054 7261 6e73 6c61 7465         Translate
+000442e0: 2074 6865 2064 6973 706c 6179 6564 2063   the displayed c
+000442f0: 6f6e 7465 6e74 206f 6620 6874 6d6c 2077  ontent of html w
+00044300: 6974 686f 7574 2063 6861 6e67 696e 6720  ithout changing 
+00044310: 7468 6520 6874 6d6c 2073 7472 7563 7475  the html structu
+00044320: 7265 2e0d 0a20 2020 2020 2020 203a 7061  re...        :pa
+00044330: 7261 6d20 6874 6d6c 5f74 6578 743a 2073  ram html_text: s
+00044340: 7472 2c20 6d75 7374 2e0d 0a20 2020 2020  tr, must...     
+00044350: 2020 203a 7061 7261 6d20 7472 616e 736c     :param transl
+00044360: 6174 6f72 3a20 7374 722c 2064 6566 6175  ator: str, defau
+00044370: 6c74 2027 6269 6e67 272e 0d0a 2020 2020  lt 'bing'...    
+00044380: 2020 2020 3a70 6172 616d 2066 726f 6d5f      :param from_
+00044390: 6c61 6e67 7561 6765 3a20 7374 722c 2064  language: str, d
+000443a0: 6566 6175 6c74 2027 6175 746f 272e 0d0a  efault 'auto'...
+000443b0: 2020 2020 2020 2020 3a70 6172 616d 2074          :param t
+000443c0: 6f5f 6c61 6e67 7561 6765 3a20 7374 722c  o_language: str,
+000443d0: 2064 6566 6175 6c74 2027 656e 272e 0d0a   default 'en'...
+000443e0: 2020 2020 2020 2020 3a70 6172 616d 206e          :param n
+000443f0: 5f6a 6f62 733a 2069 6e74 2c20 6465 6661  _jobs: int, defa
+00044400: 756c 7420 2d31 2c20 6d65 616e 7320 6f73  ult -1, means os
+00044410: 2e63 7075 5f63 6e74 2829 2e0d 0a20 2020  .cpu_cnt()...   
+00044420: 2020 2020 203a 7061 7261 6d20 6966 5f75       :param if_u
+00044430: 7365 5f70 7265 6163 6365 6c65 7261 7469  se_preaccelerati
+00044440: 6f6e 3a20 626f 6f6c 2c20 6465 6661 756c  on: bool, defaul
+00044450: 7420 4661 6c73 652e 0d0a 2020 2020 2020  t False...      
+00044460: 2020 3a70 6172 616d 202a 2a6b 7761 7267    :param **kwarg
+00044470: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+00044480: 2020 2020 3a70 6172 616d 2069 735f 6465      :param is_de
+00044490: 7461 696c 5f72 6573 756c 743a 2062 6f6f  tail_result: boo
+000444a0: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+000444b0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+000444c0: 2020 203a 7061 7261 6d20 7072 6f66 6573     :param profes
+000444d0: 7369 6f6e 616c 5f66 6965 6c64 3a20 7374  sional_field: st
+000444e0: 722c 2073 7570 706f 7274 2061 6c69 6261  r, support aliba
+000444f0: 6261 2829 2c20 6261 6964 7528 292c 2063  ba(), baidu(), c
+00044500: 6169 7975 6e28 292c 2063 6c6f 7564 5472  aiyun(), cloudTr
+00044510: 616e 736c 6174 696f 6e28 292c 2065 6c69  anslation(), eli
+00044520: 6128 292c 2073 7973 5472 616e 2829 2c20  a(), sysTran(), 
+00044530: 796f 7564 616f 2829 2c20 766f 6c63 456e  youdao(), volcEn
+00044540: 6769 6e65 2829 206f 6e6c 792e 0d0a 2020  gine() only...  
+00044550: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+00044560: 6172 616d 2074 696d 656f 7574 3a20 666c  aram timeout: fl
+00044570: 6f61 742c 2064 6566 6175 6c74 204e 6f6e  oat, default Non
+00044580: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+00044590: 2020 2020 3a70 6172 616d 2070 726f 7869      :param proxi
+000445a0: 6573 3a20 6469 6374 2c20 6465 6661 756c  es: dict, defaul
+000445b0: 7420 4e6f 6e65 2e0d 0a20 2020 2020 2020  t None...       
+000445c0: 2020 2020 2020 2020 203a 7061 7261 6d20           :param 
+000445d0: 736c 6565 705f 7365 636f 6e64 733a 2066  sleep_seconds: f
+000445e0: 6c6f 6174 2c20 6465 6661 756c 7420 302e  loat, default 0.
+000445f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00044600: 2020 3a70 6172 616d 2075 7064 6174 655f    :param update_
+00044610: 7365 7373 696f 6e5f 6166 7465 725f 6672  session_after_fr
+00044620: 6571 3a20 696e 742c 2064 6566 6175 6c74  eq: int, default
+00044630: 2031 3030 302e 0d0a 2020 2020 2020 2020   1000...        
+00044640: 2020 2020 2020 2020 3a70 6172 616d 2075          :param u
+00044650: 7064 6174 655f 7365 7373 696f 6e5f 6166  pdate_session_af
+00044660: 7465 725f 7365 636f 6e64 733a 2066 6c6f  ter_seconds: flo
+00044670: 6174 2c20 6465 6661 756c 7420 3135 3030  at, default 1500
+00044680: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00044690: 2020 203a 7061 7261 6d20 6966 5f75 7365     :param if_use
+000446a0: 5f63 6e5f 686f 7374 3a20 626f 6f6c 2c20  _cn_host: bool, 
+000446b0: 6465 6661 756c 7420 4661 6c73 652e 2053  default False. S
+000446c0: 7570 706f 7274 2067 6f6f 676c 6528 292c  upport google(),
+000446d0: 2062 696e 6728 2920 6f6e 6c79 2e0d 0a20   bing() only... 
+000446e0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+000446f0: 7061 7261 6d20 7265 7365 745f 686f 7374  param reset_host
+00044700: 5f75 726c 3a20 7374 722c 2064 6566 6175  _url: str, defau
+00044710: 6c74 204e 6f6e 652e 2053 7570 706f 7274  lt None. Support
+00044720: 2067 6f6f 676c 6528 292c 2061 7267 6f73   google(), argos
+00044730: 2829 2c20 7961 6e64 6578 2829 206f 6e6c  (), yandex() onl
+00044740: 792e 0d0a 2020 2020 2020 2020 2020 2020  y...            
+00044750: 2020 2020 3a70 6172 616d 2069 665f 6368      :param if_ch
+00044760: 6563 6b5f 7265 7365 745f 686f 7374 5f75  eck_reset_host_u
+00044770: 726c 3a20 626f 6f6c 2c20 6465 6661 756c  rl: bool, defaul
+00044780: 7420 5472 7565 2e20 5375 7070 6f72 7420  t True. Support 
+00044790: 676f 6f67 6c65 2829 2c20 7961 6e64 6578  google(), yandex
+000447a0: 2829 206f 6e6c 792e 0d0a 2020 2020 2020  () only...      
+000447b0: 2020 2020 2020 2020 2020 3a70 6172 616d            :param
+000447c0: 2069 665f 6967 6e6f 7265 5f65 6d70 7479   if_ignore_empty
+000447d0: 5f71 7565 7279 3a20 626f 6f6c 2c20 6465  _query: bool, de
+000447e0: 6661 756c 7420 4661 6c73 652e 0d0a 2020  fault False...  
+000447f0: 2020 2020 2020 2020 2020 2020 2020 3a70                :p
+00044800: 6172 616d 2069 665f 6967 6e6f 7265 5f6c  aram if_ignore_l
+00044810: 696d 6974 5f6f 665f 6c65 6e67 7468 3a20  imit_of_length: 
+00044820: 626f 6f6c 2c20 6465 6661 756c 7420 4661  bool, default Fa
+00044830: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
+00044840: 2020 2020 2020 3a70 6172 616d 206c 696d        :param lim
+00044850: 6974 5f6f 665f 6c65 6e67 7468 3a20 696e  it_of_length: in
+00044860: 742c 2064 6566 6175 6c74 2032 3030 3030  t, default 20000
+00044870: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00044880: 2020 203a 7061 7261 6d20 6966 5f73 686f     :param if_sho
+00044890: 775f 7469 6d65 5f73 7461 743a 2062 6f6f  w_time_stat: boo
+000448a0: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+000448b0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+000448c0: 2020 203a 7061 7261 6d20 7368 6f77 5f74     :param show_t
+000448d0: 696d 655f 7374 6174 5f70 7265 6369 7369  ime_stat_precisi
+000448e0: 6f6e 3a20 696e 742c 2064 6566 6175 6c74  on: int, default
+000448f0: 2032 2e0d 0a20 2020 2020 2020 2020 2020   2...           
+00044900: 2020 2020 203a 7061 7261 6d20 6966 5f70       :param if_p
+00044910: 7269 6e74 5f77 6172 6e69 6e67 3a20 626f  rint_warning: bo
+00044920: 6f6c 2c20 6465 6661 756c 7420 5472 7565  ol, default True
+00044930: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00044940: 2020 203a 7061 7261 6d20 6c69 6e67 7661     :param lingva
+00044950: 6e65 785f 6d6f 6465 6c3a 2073 7472 2c20  nex_model: str, 
+00044960: 6465 6661 756c 7420 2742 3243 272c 2063  default 'B2C', c
+00044970: 686f 6f73 6520 6672 6f6d 2028 2242 3243  hoose from ("B2C
+00044980: 222c 2022 4232 4222 292e 0d0a 2020 2020  ", "B2B")...    
+00044990: 2020 2020 2020 2020 2020 2020 3a70 6172              :par
+000449a0: 616d 206d 794d 656d 6f72 795f 6d6f 6465  am myMemory_mode
+000449b0: 3a20 7374 722c 2064 6566 6175 6c74 2022  : str, default "
+000449c0: 7765 6222 2c20 6368 6f6f 7365 2066 726f  web", choose fro
+000449d0: 6d20 2822 7765 6222 2c20 2261 7069 2229  m ("web", "api")
+000449e0: 2e0d 0a20 2020 2020 2020 203a 7265 7475  ...        :retu
+000449f0: 726e 3a20 7374 720d 0a20 2020 2020 2020  rn: str..       
+00044a00: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
+00044a10: 6966 2074 7261 6e73 6c61 746f 7220 6e6f  if translator no
+00044a20: 7420 696e 2073 656c 662e 7472 616e 736c  t in self.transl
+00044a30: 6174 6f72 735f 706f 6f6c 206f 7220 6b77  ators_pool or kw
+00044a40: 6172 6773 2e67 6574 2827 6973 5f64 6574  args.get('is_det
+00044a50: 6169 6c5f 7265 7375 6c74 272c 2046 616c  ail_result', Fal
+00044a60: 7365 2920 6f72 206e 5f6a 6f62 7320 3e20  se) or n_jobs > 
+00044a70: 7365 6c66 2e63 7075 5f63 6e74 3a0d 0a20  self.cpu_cnt:.. 
+00044a80: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00044a90: 2054 7261 6e73 6c61 746f 7245 7272 6f72   TranslatorError
+00044aa0: 0d0a 0d0a 2020 2020 2020 2020 6966 206e  ....        if n
+00044ab0: 6f74 2073 656c 662e 7072 655f 6163 6365  ot self.pre_acce
+00044ac0: 6c65 7261 7469 6f6e 5f6c 6162 656c 2061  leration_label a
+00044ad0: 6e64 2069 665f 7573 655f 7072 6561 6363  nd if_use_preacc
+00044ae0: 656c 6572 6174 696f 6e3a 0d0a 2020 2020  eleration:..    
+00044af0: 2020 2020 2020 2020 5f20 3d20 7365 6c66          _ = self
+00044b00: 2e70 7265 6163 6365 6c65 7261 7465 2829  .preaccelerate()
+00044b10: 0d0a 0d0a 2020 2020 2020 2020 6465 6620  ....        def 
+00044b20: 5f74 7261 6e73 6c61 7465 5f74 6578 7428  _translate_text(
+00044b30: 7365 6e74 656e 6365 3a20 7374 7229 202d  sentence: str) -
+00044b40: 3e20 5475 706c 655b 7374 722c 2073 7472  > Tuple[str, str
+00044b50: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
+00044b60: 7265 7475 726e 2073 656e 7465 6e63 652c  return sentence,
+00044b70: 2073 656c 662e 7472 616e 736c 6174 6f72   self.translator
+00044b80: 735f 6469 6374 5b74 7261 6e73 6c61 746f  s_dict[translato
+00044b90: 725d 2871 7565 7279 5f74 6578 743d 7365  r](query_text=se
+00044ba0: 6e74 656e 6365 2c20 6672 6f6d 5f6c 616e  ntence, from_lan
+00044bb0: 6775 6167 653d 6672 6f6d 5f6c 616e 6775  guage=from_langu
+00044bc0: 6167 652c 2074 6f5f 6c61 6e67 7561 6765  age, to_language
+00044bd0: 3d74 6f5f 6c61 6e67 7561 6765 2c20 2a2a  =to_language, **
+00044be0: 6b77 6172 6773 290d 0a0d 0a20 2020 2020  kwargs)....     
+00044bf0: 2020 2070 6174 7465 726e 203d 2072 652e     pattern = re.
+00044c00: 636f 6d70 696c 6528 2228 3f3a 5e7c 283f  compile("(?:^|(?
+00044c10: 3c3d 3e29 2928 5b5c 5c73 5c5c 535d 2a3f  <=>))([\\s\\S]*?
+00044c20: 2928 3f3a 283f 3d3c 297c 2429 2229 2020  )(?:(?=<)|$)")  
+00044c30: 2320 544f 444f 3a20 3c63 6f64 653e 3c2f  # TODO: <code></
+00044c40: 636f 6465 3e20 3c64 6976 2063 6c61 7373  code> <div class
+00044c50: 3d22 636f 6465 7465 7874 206e 6f74 7261  ="codetext notra
+00044c60: 6e73 6c61 7465 223e 0d0a 2020 2020 2020  nslate">..      
+00044c70: 2020 7365 6e74 656e 6365 5f6c 6973 7420    sentence_list 
+00044c80: 3d20 6c69 7374 2873 6574 2870 6174 7465  = list(set(patte
+00044c90: 726e 2e66 696e 6461 6c6c 2868 746d 6c5f  rn.findall(html_
+00044ca0: 7465 7874 2929 290d 0a0d 0a20 2020 2020  text)))....     
+00044cb0: 2020 206e 5f6a 6f62 7320 3d20 7365 6c66     n_jobs = self
+00044cc0: 2e63 7075 5f63 6e74 2069 6620 6e5f 6a6f  .cpu_cnt if n_jo
+00044cd0: 6273 203c 3d20 3020 656c 7365 206e 5f6a  bs <= 0 else n_j
+00044ce0: 6f62 730d 0a20 2020 2020 2020 2077 6974  obs..        wit
+00044cf0: 6820 7061 7468 6f73 2e6d 756c 7469 7072  h pathos.multipr
+00044d00: 6f63 6573 7369 6e67 2e50 726f 6365 7373  ocessing.Process
+00044d10: 506f 6f6c 286e 5f6a 6f62 7329 2061 7320  Pool(n_jobs) as 
+00044d20: 706f 6f6c 3a0d 0a20 2020 2020 2020 2020  pool:..         
+00044d30: 2020 2072 6573 756c 745f 6c69 7374 203d     result_list =
+00044d40: 2070 6f6f 6c2e 6d61 7028 5f74 7261 6e73   pool.map(_trans
+00044d50: 6c61 7465 5f74 6578 742c 2073 656e 7465  late_text, sente
+00044d60: 6e63 655f 6c69 7374 290d 0a0d 0a20 2020  nce_list)....   
+00044d70: 2020 2020 2072 6573 756c 745f 6469 6374       result_dict
+00044d80: 203d 207b 7465 7874 3a20 7473 5f74 6578   = {text: ts_tex
+00044d90: 7420 666f 7220 7465 7874 2c20 7473 5f74  t for text, ts_t
+00044da0: 6578 7420 696e 2072 6573 756c 745f 6c69  ext in result_li
+00044db0: 7374 7d0d 0a20 2020 2020 2020 205f 6765  st}..        _ge
+00044dc0: 745f 7265 7375 6c74 5f66 756e 6320 3d20  t_result_func = 
+00044dd0: 6c61 6d62 6461 206b 3a20 7265 7375 6c74  lambda k: result
+00044de0: 5f64 6963 742e 6765 7428 6b2e 6772 6f75  _dict.get(k.grou
+00044df0: 7028 3129 2c20 2727 290d 0a20 2020 2020  p(1), '')..     
+00044e00: 2020 2072 6574 7572 6e20 7061 7474 6572     return patter
+00044e10: 6e2e 7375 6228 7265 706c 3d5f 6765 745f  n.sub(repl=_get_
+00044e20: 7265 7375 6c74 5f66 756e 632c 2073 7472  result_func, str
+00044e30: 696e 673d 6874 6d6c 5f74 6578 7429 0d0a  ing=html_text)..
+00044e40: 0d0a 2020 2020 6465 6620 5f74 6573 745f  ..    def _test_
+00044e50: 7472 616e 736c 6174 6528 7365 6c66 2c20  translate(self, 
+00044e60: 5f74 733a 2073 7472 2c20 7469 6d65 6f75  _ts: str, timeou
+00044e70: 743a 204f 7074 696f 6e61 6c5b 666c 6f61  t: Optional[floa
+00044e80: 745d 203d 204e 6f6e 652c 2069 665f 7368  t] = None, if_sh
+00044e90: 6f77 5f74 696d 655f 7374 6174 3a20 626f  ow_time_stat: bo
+00044ea0: 6f6c 203d 2046 616c 7365 2920 2d3e 2073  ol = False) -> s
+00044eb0: 7472 3a0d 0a20 2020 2020 2020 2066 726f  tr:..        fro
+00044ec0: 6d5f 6c61 6e67 7561 6765 203d 2073 656c  m_language = sel
+00044ed0: 662e 6e6f 745f 7a68 5f6c 616e 6773 5b5f  f.not_zh_langs[_
+00044ee0: 7473 5d20 6966 205f 7473 2069 6e20 7365  ts] if _ts in se
+00044ef0: 6c66 2e6e 6f74 5f7a 685f 6c61 6e67 7320  lf.not_zh_langs 
+00044f00: 656c 7365 2027 6175 746f 270d 0a20 2020  else 'auto'..   
+00044f10: 2020 2020 2074 6f5f 6c61 6e67 7561 6765       to_language
+00044f20: 203d 2073 656c 662e 6e6f 745f 656e 5f6c   = self.not_en_l
+00044f30: 616e 6773 5b5f 7473 5d20 6966 205f 7473  angs[_ts] if _ts
+00044f40: 2069 6e20 7365 6c66 2e6e 6f74 5f65 6e5f   in self.not_en_
+00044f50: 6c61 6e67 7320 656c 7365 2027 656e 270d  langs else 'en'.
+00044f60: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+00044f70: 3d20 7365 6c66 2e74 7261 6e73 6c61 746f  = self.translato
+00044f80: 7273 5f64 6963 745b 5f74 735d 280d 0a20  rs_dict[_ts](.. 
+00044f90: 2020 2020 2020 2020 2020 2071 7565 7279             query
+00044fa0: 5f74 6578 743d 7365 6c66 2e65 7861 6d70  _text=self.examp
+00044fb0: 6c65 5f71 7565 7279 5f74 6578 742c 0d0a  le_query_text,..
+00044fc0: 2020 2020 2020 2020 2020 2020 7472 616e              tran
+00044fd0: 736c 6174 6f72 3d5f 7473 2c0d 0a20 2020  slator=_ts,..   
+00044fe0: 2020 2020 2020 2020 2066 726f 6d5f 6c61           from_la
+00044ff0: 6e67 7561 6765 3d66 726f 6d5f 6c61 6e67  nguage=from_lang
+00045000: 7561 6765 2c0d 0a20 2020 2020 2020 2020  uage,..         
+00045010: 2020 2074 6f5f 6c61 6e67 7561 6765 3d74     to_language=t
+00045020: 6f5f 6c61 6e67 7561 6765 2c0d 0a20 2020  o_language,..   
+00045030: 2020 2020 2020 2020 2069 665f 7072 696e           if_prin
+00045040: 745f 7761 726e 696e 673d 4661 6c73 652c  t_warning=False,
+00045050: 0d0a 2020 2020 2020 2020 2020 2020 7469  ..            ti
+00045060: 6d65 6f75 743d 7469 6d65 6f75 742c 0d0a  meout=timeout,..
+00045070: 2020 2020 2020 2020 2020 2020 6966 5f73              if_s
+00045080: 686f 775f 7469 6d65 5f73 7461 743d 6966  how_time_stat=if
+00045090: 5f73 686f 775f 7469 6d65 5f73 7461 740d  _show_time_stat.
+000450a0: 0a20 2020 2020 2020 2029 0d0a 2020 2020  .        )..    
+000450b0: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
+000450c0: 740d 0a20 2020 200d 0a20 2020 2064 6566  t..    ..    def
+000450d0: 2067 6574 5f6c 616e 6775 6167 6573 2873   get_languages(s
+000450e0: 656c 662c 2074 7261 6e73 6c61 746f 723a  elf, translator:
+000450f0: 2073 7472 203d 2027 6269 6e67 2729 3a0d   str = 'bing'):.
+00045100: 0a20 2020 2020 2020 206c 616e 6775 6167  .        languag
+00045110: 655f 6d61 7020 3d20 7365 6c66 2e5f 7472  e_map = self._tr
+00045120: 616e 736c 6174 6f72 735f 6469 6374 5b74  anslators_dict[t
+00045130: 7261 6e73 6c61 746f 725d 2e6c 616e 6775  ranslator].langu
+00045140: 6167 655f 6d61 700d 0a20 2020 2020 2020  age_map..       
+00045150: 2069 6620 6c61 6e67 7561 6765 5f6d 6170   if language_map
+00045160: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+00045170: 6574 7572 6e20 6c61 6e67 7561 6765 5f6d  eturn language_m
+00045180: 6170 0d0a 0d0a 2020 2020 2020 2020 5f20  ap....        _ 
+00045190: 3d20 7365 6c66 2e5f 7465 7374 5f74 7261  = self._test_tra
+000451a0: 6e73 6c61 7465 285f 7473 3d74 7261 6e73  nslate(_ts=trans
+000451b0: 6c61 746f 7229 0d0a 2020 2020 2020 2020  lator)..        
+000451c0: 7265 7475 726e 2073 656c 662e 5f74 7261  return self._tra
+000451d0: 6e73 6c61 746f 7273 5f64 6963 745b 7472  nslators_dict[tr
+000451e0: 616e 736c 6174 6f72 5d2e 6c61 6e67 7561  anslator].langua
+000451f0: 6765 5f6d 6170 0d0a 0d0a 2020 2020 6465  ge_map....    de
+00045200: 6620 7072 6561 6363 656c 6572 6174 6528  f preaccelerate(
+00045210: 7365 6c66 2c20 7469 6d65 6f75 743a 204f  self, timeout: O
+00045220: 7074 696f 6e61 6c5b 666c 6f61 745d 203d  ptional[float] =
+00045230: 204e 6f6e 652c 2069 665f 7368 6f77 5f74   None, if_show_t
+00045240: 696d 655f 7374 6174 3a20 626f 6f6c 203d  ime_stat: bool =
+00045250: 2054 7275 652c 202a 2a6b 7761 7267 733a   True, **kwargs:
+00045260: 2073 7472 2920 2d3e 2064 6963 743a 0d0a   str) -> dict:..
+00045270: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00045280: 7072 655f 6163 6365 6c65 7261 7469 6f6e  pre_acceleration
+00045290: 5f6c 6162 656c 203e 2030 3a0d 0a20 2020  _label > 0:..   
+000452a0: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
+000452b0: 7261 6e73 6c61 746f 7245 7272 6f72 2827  ranslatorError('
+000452c0: 5072 6561 6363 656c 6572 6174 696f 6e20  Preacceleration 
+000452d0: 6361 6e20 6f6e 6c79 2062 6520 7065 7266  can only be perf
+000452e0: 6f72 6d65 6420 6f6e 6365 2e27 290d 0a0d  ormed once.')...
+000452f0: 0a20 2020 2020 2020 2073 656c 662e 6578  .        self.ex
+00045300: 616d 706c 655f 7175 6572 795f 7465 7874  ample_query_text
+00045310: 203d 206b 7761 7267 732e 6765 7428 2765   = kwargs.get('e
+00045320: 7861 6d70 6c65 5f71 7565 7279 5f74 6578  xample_query_tex
+00045330: 7427 2c20 7365 6c66 2e65 7861 6d70 6c65  t', self.example
+00045340: 5f71 7565 7279 5f74 6578 7429 0d0a 0d0a  _query_text)....
+00045350: 2020 2020 2020 2020 7379 732e 7374 6465          sys.stde
+00045360: 7272 2e77 7269 7465 2827 5072 6561 6363  rr.write('Preacc
+00045370: 656c 6572 6174 696f 6e2d 5072 6f63 6573  eleration-Proces
+00045380: 7320 7769 6c6c 2074 616b 6520 6120 6665  s will take a fe
+00045390: 7720 6d69 6e75 7465 732e 5c6e 2729 0d0a  w minutes.\n')..
+000453a0: 2020 2020 2020 2020 7379 732e 7374 6465          sys.stde
+000453b0: 7272 2e77 7269 7465 2827 5469 7073 3a20  rr.write('Tips: 
+000453c0: 5468 6520 736d 616c 6c65 7220 6074 696d  The smaller `tim
+000453d0: 656f 7574 6020 7661 6c75 652c 2074 6865  eout` value, the
+000453e0: 2066 6577 6572 2074 7261 6e73 6c61 746f   fewer translato
+000453f0: 7273 2070 6173 7320 7468 6520 7465 7374  rs pass the test
+00045400: 2027 0d0a 2020 2020 2020 2020 2020 2020   '..            
+00045410: 2020 2020 2020 2020 2020 2020 2027 616e               'an
+00045420: 6420 7468 6520 6c65 7373 2074 696d 6520  d the less time 
+00045430: 6974 2074 616b 6573 2074 6f20 7072 6561  it takes to prea
+00045440: 6363 656c 6572 6174 652e 2048 6f77 6576  ccelerate. Howev
+00045450: 6572 2c20 7468 6520 736c 6f77 2073 7065  er, the slow spe
+00045460: 6564 206f 6620 270d 0a20 2020 2020 2020  ed of '..       
+00045470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045480: 2020 2770 7265 6163 6365 6c65 7261 7469    'preaccelerati
+00045490: 6f6e 2064 6f65 7320 6e6f 7420 6d65 616e  on does not mean
+000454a0: 2074 6865 2073 6c6f 7720 7370 6565 6420   the slow speed 
+000454b0: 6f66 206c 6174 6572 2074 7261 6e73 6c61  of later transla
+000454c0: 7469 6f6e 2e5c 6e5c 6e27 290d 0a0d 0a20  tion.\n\n').... 
+000454d0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+000454e0: 7471 646d 2e74 7164 6d28 7261 6e67 6528  tqdm.tqdm(range(
+000454f0: 6c65 6e28 7365 6c66 2e74 7261 6e73 6c61  len(self.transla
+00045500: 746f 7273 5f70 6f6f 6c29 292c 2064 6573  tors_pool)), des
+00045510: 633d 2750 7265 6163 6365 6c65 7261 7469  c='Preaccelerati
+00045520: 6f6e 2050 726f 6365 7373 272c 206e 636f  on Process', nco
+00045530: 6c73 3d38 3029 3a0d 0a20 2020 2020 2020  ls=80):..       
+00045540: 2020 2020 205f 7473 203d 2073 656c 662e       _ts = self.
+00045550: 7472 616e 736c 6174 6f72 735f 706f 6f6c  translators_pool
+00045560: 5b69 5d0d 0a20 2020 2020 2020 2020 2020  [i]..           
+00045570: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+00045580: 2020 2020 2020 205f 203d 2073 656c 662e         _ = self.
+00045590: 5f74 6573 745f 7472 616e 736c 6174 6528  _test_translate(
+000455a0: 5f74 732c 2074 696d 656f 7574 2c20 6966  _ts, timeout, if
+000455b0: 5f73 686f 775f 7469 6d65 5f73 7461 7429  _show_time_stat)
+000455c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000455d0: 2020 7365 6c66 2e73 7563 6365 7373 5f74    self.success_t
+000455e0: 7261 6e73 6c61 746f 7273 5f70 6f6f 6c2e  ranslators_pool.
+000455f0: 6170 7065 6e64 285f 7473 290d 0a20 2020  append(_ts)..   
+00045600: 2020 2020 2020 2020 2065 7863 6570 743a           except:
+00045610: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00045620: 2020 7365 6c66 2e66 6169 6c75 7265 5f74    self.failure_t
+00045630: 7261 6e73 6c61 746f 7273 5f70 6f6f 6c2e  ranslators_pool.
+00045640: 6170 7065 6e64 285f 7473 290d 0a0d 0a20  append(_ts).... 
+00045650: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00045660: 7072 655f 6163 6365 6c65 7261 7469 6f6e  pre_acceleration
+00045670: 5f6c 6162 656c 202b 3d20 310d 0a20 2020  _label += 1..   
+00045680: 2020 2020 2072 6574 7572 6e20 7b27 7375       return {'su
+00045690: 6363 6573 7327 3a20 7365 6c66 2e73 7563  ccess': self.suc
+000456a0: 6365 7373 5f74 7261 6e73 6c61 746f 7273  cess_translators
+000456b0: 5f70 6f6f 6c2c 2027 6661 696c 7572 6527  _pool, 'failure'
+000456c0: 3a20 7365 6c66 2e66 6169 6c75 7265 5f74  : self.failure_t
+000456d0: 7261 6e73 6c61 746f 7273 5f70 6f6f 6c7d  ranslators_pool}
+000456e0: 0d0a 0d0a 2020 2020 6465 6620 7370 6565  ....    def spee
+000456f0: 6474 6573 7428 7365 6c66 2c20 2a2a 6b77  dtest(self, **kw
+00045700: 6172 6773 3a20 4c69 7374 5b73 7472 5d29  args: List[str])
+00045710: 202d 3e20 4e6f 6e65 3a0d 0a20 2020 2020   -> None:..     
+00045720: 2020 2069 6620 7365 6c66 2e70 7265 5f61     if self.pre_a
+00045730: 6363 656c 6572 6174 696f 6e5f 6c61 6265  cceleration_labe
+00045740: 6c20 3c20 313a 0d0a 2020 2020 2020 2020  l < 1:..        
+00045750: 2020 2020 7261 6973 6520 5472 616e 736c      raise Transl
+00045760: 6174 6f72 4572 726f 7228 2750 7265 6163  atorError('Preac
+00045770: 6365 6c65 7261 7469 6f6e 2066 6972 7374  celeration first
+00045780: 2e27 290d 0a0d 0a20 2020 2020 2020 2074  .')....        t
+00045790: 6573 745f 7472 616e 736c 6174 6f72 735f  est_translators_
+000457a0: 706f 6f6c 203d 206b 7761 7267 732e 6765  pool = kwargs.ge
+000457b0: 7428 2774 6573 745f 7472 616e 736c 6174  t('test_translat
+000457c0: 6f72 735f 706f 6f6c 272c 2073 656c 662e  ors_pool', self.
+000457d0: 7375 6363 6573 735f 7472 616e 736c 6174  success_translat
+000457e0: 6f72 735f 706f 6f6c 290d 0a0d 0a20 2020  ors_pool)....   
+000457f0: 2020 2020 2073 7973 2e73 7464 6572 722e       sys.stderr.
+00045800: 7772 6974 6528 2753 7065 6564 5465 7374  write('SpeedTest
+00045810: 2d50 726f 6365 7373 2077 696c 6c20 7461  -Process will ta
+00045820: 6b65 2061 2066 6577 2073 6563 6f6e 6473  ke a few seconds
+00045830: 2e5c 6e5c 6e27 290d 0a20 2020 2020 2020  .\n\n')..       
+00045840: 2066 6f72 2069 2069 6e20 7471 646d 2e74   for i in tqdm.t
+00045850: 7164 6d28 7261 6e67 6528 6c65 6e28 7465  qdm(range(len(te
+00045860: 7374 5f74 7261 6e73 6c61 746f 7273 5f70  st_translators_p
+00045870: 6f6f 6c29 292c 2064 6573 633d 2753 7065  ool)), desc='Spe
+00045880: 6564 5465 7374 2050 726f 6365 7373 272c  edTest Process',
+00045890: 206e 636f 6c73 3d38 3029 3a0d 0a20 2020   ncols=80):..   
+000458a0: 2020 2020 2020 2020 205f 7473 203d 2074           _ts = t
+000458b0: 6573 745f 7472 616e 736c 6174 6f72 735f  est_translators_
+000458c0: 706f 6f6c 5b69 5d0d 0a20 2020 2020 2020  pool[i]..       
+000458d0: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+000458e0: 2020 2020 2020 2020 2020 205f 203d 2073             _ = s
+000458f0: 656c 662e 5f74 6573 745f 7472 616e 736c  elf._test_transl
+00045900: 6174 6528 5f74 732c 2074 696d 656f 7574  ate(_ts, timeout
+00045910: 3d4e 6f6e 652c 2069 665f 7368 6f77 5f74  =None, if_show_t
+00045920: 696d 655f 7374 6174 3d54 7275 6529 0d0a  ime_stat=True)..
+00045930: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+00045940: 7074 3a0d 0a20 2020 2020 2020 2020 2020  pt:..           
+00045950: 2020 2020 2070 6173 730d 0a20 2020 2020       pass..     
+00045960: 2020 2072 6574 7572 6e0d 0a0d 0a20 2020     return....   
+00045970: 2064 6566 2070 7265 6163 6365 6c65 7261   def preaccelera
+00045980: 7465 5f61 6e64 5f73 7065 6564 7465 7374  te_and_speedtest
+00045990: 2873 656c 662c 2074 696d 656f 7574 3a20  (self, timeout: 
+000459a0: 4f70 7469 6f6e 616c 5b66 6c6f 6174 5d20  Optional[float] 
+000459b0: 3d20 4e6f 6e65 2c20 2a2a 6b77 6172 6773  = None, **kwargs
+000459c0: 3a20 7374 7229 202d 3e20 6469 6374 3a0d  : str) -> dict:.
+000459d0: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+000459e0: 3d20 7365 6c66 2e70 7265 6163 6365 6c65  = self.preaccele
+000459f0: 7261 7465 2874 696d 656f 7574 3d74 696d  rate(timeout=tim
+00045a00: 656f 7574 2c20 2a2a 6b77 6172 6773 290d  eout, **kwargs).
+00045a10: 0a20 2020 2020 2020 2073 7973 2e73 7464  .        sys.std
+00045a20: 6572 722e 7772 6974 6528 275c 6e5c 6e27  err.write('\n\n'
+00045a30: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00045a40: 7370 6565 6474 6573 7428 290d 0a20 2020  speedtest()..   
+00045a50: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+00045a60: 6c74 0d0a 0d0a 0d0a 7473 7320 3d20 5472  lt......tss = Tr
+00045a70: 616e 736c 6174 6f72 7353 6572 7665 7228  anslatorsServer(
+00045a80: 290d 0a0d 0a5f 616c 6962 6162 6120 3d20  )...._alibaba = 
+00045a90: 7473 732e 5f61 6c69 6261 6261 0d0a 616c  tss._alibaba..al
+00045aa0: 6962 6162 6120 3d20 7473 732e 616c 6962  ibaba = tss.alib
+00045ab0: 6162 610d 0a5f 6170 6572 7469 756d 203d  aba.._apertium =
+00045ac0: 2074 7373 2e5f 6170 6572 7469 756d 0d0a   tss._apertium..
+00045ad0: 6170 6572 7469 756d 203d 2074 7373 2e61  apertium = tss.a
+00045ae0: 7065 7274 6975 6d0d 0a5f 6172 676f 7320  pertium.._argos 
+00045af0: 3d20 7473 732e 5f61 7267 6f73 0d0a 6172  = tss._argos..ar
+00045b00: 676f 7320 3d20 7473 732e 6172 676f 730d  gos = tss.argos.
+00045b10: 0a5f 6261 6964 7520 3d20 7473 732e 5f62  ._baidu = tss._b
+00045b20: 6169 6475 0d0a 6261 6964 7520 3d20 7473  aidu..baidu = ts
+00045b30: 732e 6261 6964 750d 0a5f 6269 6e67 203d  s.baidu.._bing =
+00045b40: 2074 7373 2e5f 6269 6e67 0d0a 6269 6e67   tss._bing..bing
+00045b50: 203d 2074 7373 2e62 696e 670d 0a5f 6361   = tss.bing.._ca
+00045b60: 6979 756e 203d 2074 7373 2e5f 6361 6979  iyun = tss._caiy
+00045b70: 756e 0d0a 6361 6979 756e 203d 2074 7373  un..caiyun = tss
+00045b80: 2e63 6169 7975 6e0d 0a5f 636c 6f75 6454  .caiyun.._cloudT
+00045b90: 7261 6e73 6c61 7469 6f6e 203d 2074 7373  ranslation = tss
+00045ba0: 2e5f 636c 6f75 6454 7261 6e73 6c61 7469  ._cloudTranslati
+00045bb0: 6f6e 0d0a 636c 6f75 6454 7261 6e73 6c61  on..cloudTransla
+00045bc0: 7469 6f6e 203d 2074 7373 2e63 6c6f 7564  tion = tss.cloud
+00045bd0: 5472 616e 736c 6174 696f 6e0d 0a5f 6465  Translation.._de
+00045be0: 6570 6c20 3d20 7473 732e 5f64 6565 706c  epl = tss._deepl
+00045bf0: 0d0a 6465 6570 6c20 3d20 7473 732e 6465  ..deepl = tss.de
+00045c00: 6570 6c0d 0a5f 656c 6961 203d 2074 7373  epl.._elia = tss
+00045c10: 2e5f 656c 6961 0d0a 656c 6961 203d 2074  ._elia..elia = t
+00045c20: 7373 2e65 6c69 610d 0a5f 676f 6f67 6c65  ss.elia.._google
+00045c30: 203d 2074 7373 2e5f 676f 6f67 6c65 0d0a   = tss._google..
+00045c40: 676f 6f67 6c65 203d 2074 7373 2e67 6f6f  google = tss.goo
+00045c50: 676c 650d 0a5f 6963 6962 6120 3d20 7473  gle.._iciba = ts
+00045c60: 732e 5f69 6369 6261 0d0a 6963 6962 6120  s._iciba..iciba 
+00045c70: 3d20 7473 732e 6963 6962 610d 0a5f 6966  = tss.iciba.._if
+00045c80: 6c79 7465 6b20 3d20 7473 732e 5f69 666c  lytek = tss._ifl
+00045c90: 7974 656b 0d0a 6966 6c79 7465 6b20 3d20  ytek..iflytek = 
+00045ca0: 7473 732e 6966 6c79 7465 6b0d 0a5f 6966  tss.iflytek.._if
+00045cb0: 6c79 7265 6320 3d20 7473 732e 5f69 666c  lyrec = tss._ifl
+00045cc0: 7972 6563 0d0a 6966 6c79 7265 6320 3d20  yrec..iflyrec = 
+00045cd0: 7473 732e 6966 6c79 7265 630d 0a5f 6974  tss.iflyrec.._it
+00045ce0: 7261 6e73 6c61 7465 203d 2074 7373 2e5f  ranslate = tss._
+00045cf0: 6974 7261 6e73 6c61 7465 0d0a 6974 7261  itranslate..itra
+00045d00: 6e73 6c61 7465 203d 2074 7373 2e69 7472  nslate = tss.itr
+00045d10: 616e 736c 6174 650d 0a5f 6a75 6469 6320  anslate.._judic 
+00045d20: 3d20 7473 732e 5f6a 7564 6963 0d0a 6a75  = tss._judic..ju
+00045d30: 6469 6320 3d20 7473 732e 6a75 6469 630d  dic = tss.judic.
+00045d40: 0a5f 6c61 6e67 7561 6765 5769 7265 203d  ._languageWire =
+00045d50: 2074 7373 2e5f 6c61 6e67 7561 6765 5769   tss._languageWi
+00045d60: 7265 0d0a 6c61 6e67 7561 6765 5769 7265  re..languageWire
+00045d70: 203d 2074 7373 2e6c 616e 6775 6167 6557   = tss.languageW
+00045d80: 6972 650d 0a5f 6c69 6e67 7661 6e65 7820  ire.._lingvanex 
+00045d90: 3d20 7473 732e 5f6c 696e 6776 616e 6578  = tss._lingvanex
+00045da0: 0d0a 6c69 6e67 7661 6e65 7820 3d20 7473  ..lingvanex = ts
+00045db0: 732e 6c69 6e67 7661 6e65 780d 0a5f 6e69  s.lingvanex.._ni
+00045dc0: 7574 7261 6e73 203d 2074 7373 2e5f 6e69  utrans = tss._ni
+00045dd0: 7574 7261 6e73 0d0a 6e69 7574 7261 6e73  utrans..niutrans
+00045de0: 203d 2074 7373 2e6e 6975 7472 616e 730d   = tss.niutrans.
+00045df0: 0a5f 6d67 6c69 7020 3d20 7473 732e 5f6d  ._mglip = tss._m
+00045e00: 676c 6970 0d0a 6d67 6c69 7020 3d20 7473  glip..mglip = ts
+00045e10: 732e 6d67 6c69 700d 0a5f 6d69 7261 6920  s.mglip.._mirai 
+00045e20: 3d20 7473 732e 5f6d 6972 6169 0d0a 6d69  = tss._mirai..mi
+00045e30: 7261 6920 3d20 7473 732e 6d69 7261 690d  rai = tss.mirai.
+00045e40: 0a5f 6d6f 6465 726e 4d74 203d 2074 7373  ._modernMt = tss
+00045e50: 2e5f 6d6f 6465 726e 4d74 0d0a 6d6f 6465  ._modernMt..mode
+00045e60: 726e 4d74 203d 2074 7373 2e6d 6f64 6572  rnMt = tss.moder
+00045e70: 6e4d 740d 0a5f 6d79 4d65 6d6f 7279 203d  nMt.._myMemory =
+00045e80: 2074 7373 2e5f 6d79 4d65 6d6f 7279 0d0a   tss._myMemory..
+00045e90: 6d79 4d65 6d6f 7279 203d 2074 7373 2e6d  myMemory = tss.m
+00045ea0: 794d 656d 6f72 790d 0a5f 7061 7061 676f  yMemory.._papago
+00045eb0: 203d 2074 7373 2e5f 7061 7061 676f 0d0a   = tss._papago..
+00045ec0: 7061 7061 676f 203d 2074 7373 2e70 6170  papago = tss.pap
+00045ed0: 6167 6f0d 0a5f 7171 4661 6e79 6920 3d20  ago.._qqFanyi = 
+00045ee0: 7473 732e 5f71 7146 616e 7969 0d0a 7171  tss._qqFanyi..qq
+00045ef0: 4661 6e79 6920 3d20 7473 732e 7171 4661  Fanyi = tss.qqFa
+00045f00: 6e79 690d 0a5f 7171 5472 616e 536d 6172  nyi.._qqTranSmar
+00045f10: 7420 3d20 7473 732e 5f71 7154 7261 6e53  t = tss._qqTranS
+00045f20: 6d61 7274 0d0a 7171 5472 616e 536d 6172  mart..qqTranSmar
+00045f30: 7420 3d20 7473 732e 7171 5472 616e 536d  t = tss.qqTranSm
+00045f40: 6172 740d 0a5f 7265 7665 7273 6f20 3d20  art.._reverso = 
+00045f50: 7473 732e 5f72 6576 6572 736f 0d0a 7265  tss._reverso..re
+00045f60: 7665 7273 6f20 3d20 7473 732e 7265 7665  verso = tss.reve
+00045f70: 7273 6f0d 0a5f 736f 676f 7520 3d20 7473  rso.._sogou = ts
+00045f80: 732e 5f73 6f67 6f75 0d0a 736f 676f 7520  s._sogou..sogou 
+00045f90: 3d20 7473 732e 736f 676f 750d 0a5f 7379  = tss.sogou.._sy
+00045fa0: 7354 7261 6e20 3d20 7473 732e 5f73 7973  sTran = tss._sys
+00045fb0: 5472 616e 0d0a 7379 7354 7261 6e20 3d20  Tran..sysTran = 
+00045fc0: 7473 732e 7379 7354 7261 6e0d 0a5f 7469  tss.sysTran.._ti
+00045fd0: 6c64 6520 3d20 7473 732e 5f74 696c 6465  lde = tss._tilde
+00045fe0: 0d0a 7469 6c64 6520 3d20 7473 732e 7469  ..tilde = tss.ti
+00045ff0: 6c64 650d 0a5f 7472 616e 736c 6174 6543  lde.._translateC
+00046000: 6f6d 203d 2074 7373 2e5f 7472 616e 736c  om = tss._transl
+00046010: 6174 6543 6f6d 0d0a 7472 616e 736c 6174  ateCom..translat
+00046020: 6543 6f6d 203d 2074 7373 2e74 7261 6e73  eCom = tss.trans
+00046030: 6c61 7465 436f 6d0d 0a5f 7472 616e 736c  lateCom.._transl
+00046040: 6174 654d 6520 3d20 7473 732e 5f74 7261  ateMe = tss._tra
+00046050: 6e73 6c61 7465 4d65 0d0a 7472 616e 736c  nslateMe..transl
+00046060: 6174 654d 6520 3d20 7473 732e 7472 616e  ateMe = tss.tran
+00046070: 736c 6174 654d 650d 0a5f 7574 6962 6574  slateMe.._utibet
+00046080: 203d 2074 7373 2e5f 7574 6962 6574 0d0a   = tss._utibet..
+00046090: 7574 6962 6574 203d 2074 7373 2e75 7469  utibet = tss.uti
+000460a0: 6265 740d 0a5f 766f 6c63 456e 6769 6e65  bet.._volcEngine
+000460b0: 203d 2074 7373 2e5f 766f 6c63 456e 6769   = tss._volcEngi
+000460c0: 6e65 0d0a 766f 6c63 456e 6769 6e65 203d  ne..volcEngine =
+000460d0: 2074 7373 2e76 6f6c 6345 6e67 696e 650d   tss.volcEngine.
+000460e0: 0a5f 7961 6e64 6578 203d 2074 7373 2e5f  ._yandex = tss._
+000460f0: 7961 6e64 6578 0d0a 7961 6e64 6578 203d  yandex..yandex =
+00046100: 2074 7373 2e79 616e 6465 780d 0a5f 7965   tss.yandex.._ye
+00046110: 656b 6974 203d 2074 7373 2e5f 7965 656b  ekit = tss._yeek
+00046120: 6974 0d0a 7965 656b 6974 203d 2074 7373  it..yeekit = tss
+00046130: 2e79 6565 6b69 740d 0a5f 796f 7564 616f  .yeekit.._youdao
+00046140: 203d 2074 7373 2e5f 796f 7564 616f 0d0a   = tss._youdao..
+00046150: 796f 7564 616f 203d 2074 7373 2e79 6f75  youdao = tss.you
+00046160: 6461 6f0d 0a0d 0a74 7261 6e73 6c61 7465  dao....translate
+00046170: 5f74 6578 7420 3d20 7473 732e 7472 616e  _text = tss.tran
+00046180: 736c 6174 655f 7465 7874 0d0a 7472 616e  slate_text..tran
+00046190: 736c 6174 655f 6874 6d6c 203d 2074 7373  slate_html = tss
+000461a0: 2e74 7261 6e73 6c61 7465 5f68 746d 6c0d  .translate_html.
+000461b0: 0a74 7261 6e73 6c61 746f 7273 5f70 6f6f  .translators_poo
+000461c0: 6c20 3d20 7473 732e 7472 616e 736c 6174  l = tss.translat
+000461d0: 6f72 735f 706f 6f6c 0d0a 6765 745f 6c61  ors_pool..get_la
+000461e0: 6e67 7561 6765 7320 3d20 7473 732e 6765  nguages = tss.ge
+000461f0: 745f 6c61 6e67 7561 6765 730d 0a0d 0a70  t_languages....p
+00046200: 7265 6163 6365 6c65 7261 7465 203d 2074  reaccelerate = t
+00046210: 7373 2e70 7265 6163 6365 6c65 7261 7465  ss.preaccelerate
+00046220: 0d0a 7370 6565 6474 6573 7420 3d20 7473  ..speedtest = ts
+00046230: 732e 7370 6565 6474 6573 740d 0a70 7265  s.speedtest..pre
+00046240: 6163 6365 6c65 7261 7465 5f61 6e64 5f73  accelerate_and_s
+00046250: 7065 6564 7465 7374 203d 2074 7373 2e70  peedtest = tss.p
+00046260: 7265 6163 6365 6c65 7261 7465 5f61 6e64  reaccelerate_and
+00046270: 5f73 7065 6564 7465 7374 0d0a 2320 7379  _speedtest..# sy
+00046280: 732e 7374 6465 7272 2e77 7269 7465 2866  s.stderr.write(f
+00046290: 2753 7570 706f 7274 2074 7261 6e73 6c61  'Support transla
+000462a0: 746f 7273 207b 7472 616e 736c 6174 6f72  tors {translator
+000462b0: 735f 706f 6f6c 7d20 6f6e 6c79 2e5c 6e27  s_pool} only.\n'
+000462c0: 290d 0a                                  )..
```

### Comparing `translators-5.8.0/translators.egg-info/PKG-INFO` & `translators-5.8.2/translators.egg-info/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 Metadata-Version: 2.1
 Name: translators
-Version: 5.8.0
+Version: 5.8.2
 Summary: Translators is a library which aims to bring free, multiple, enjoyable translation to individuals and students in Python.
 Home-page: https://github.com/uliontse/translators
 Author: UlionTse
 Author-email: uliontse@outlook.com
 License: GPLv3
 Project-URL: Source, https://github.com/UlionTse/translators
 Project-URL: Changelog, https://github.com/UlionTse/translators/blob/master/change_log.txt
 Project-URL: Documentation, https://github.com/UlionTse/translators/blob/master/README.md
-Keywords: translate,translate_text,translate_html,alibaba,apertium,argos,baidu,bing,caiyun,cloudYi,deepl,elia,google,iciba,iflytek,iflyrec,itranslate,judic,languageWire,lingvanex,mglip,mirai,modernMt,myMemory,niutrans,papago,qqFanyi,qqTranSmart,reverso,sogou,sysTran,tilde,translateCom,translateMe,utibet,volcEngine,yandex,yeekit,youdao
+Keywords: translate,translate_text,translate_html,alibaba,apertium,argos,baidu,bing,caiyun,cloudTranslation,deepl,elia,google,iciba,iflytek,iflyrec,itranslate,judic,languageWire,lingvanex,mglip,mirai,modernMt,myMemory,niutrans,papago,qqFanyi,qqTranSmart,reverso,sogou,sysTran,tilde,translateCom,translateMe,utibet,volcEngine,yandex,yeekit,youdao
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: Environment :: Web Environment
 Classifier: Intended Audience :: Developers
 Classifier: License :: OSI Approved :: GNU General Public License v3 (GPLv3)
 Classifier: Programming Language :: Python :: 3 :: Only
 Classifier: Programming Language :: Python :: 3.8
 Classifier: Programming Language :: Python :: 3.9
@@ -42,14 +42,15 @@
 **Translators** is a library which aims to bring **free, multiple, enjoyable** translation to individuals and students in Python. 
 
 - [Supported Translation Services](#supported-translation-services)
 - [Installation](#installation)
 - [Getting Started](#getting-started)
 - [Supported Languages](#supported-languages)
 - [Debug Tips](#debug-tips)
+- [Star History](#star-history)
 
 ## Supported Translation Services
 
 | ID  | Translator                                                                        | Number of Supported Languages | Advantage                                                                                   | Service                                                                                                           | Status                          |
 | --- | --------------------------------------------------------------------------------- | ----------------------------- | ------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------- | ------------------------------- |
 | 1   | [MyMemory](https://mymemory.translated.net)                                       | 330                           | support the most languages in the world                                                     | [Translated](https://translatedlabs.com/welcome), Italy                                                           | stable                          |
 | 2   | [Niutrans](https://niutrans.com/trans)                                            | 302                           | support the most languages in the world                                                     | [Northeastern University](http://english.neu.edu.cn/) / [Niutrans](https://github.com/NiuTrans), China            | /                               |
@@ -64,15 +65,15 @@
 | 11  | [Yandex](https://translate.yandex.com)                                            | 102                           | support more languages in the world, support word to emoji                                  | [Yandex](https://yandex.com/company/), Russia                                                                     | /                               |
 | 12  | [Itranslate](https://itranslate.com/webapp)                                       | 101                           | support translation of different regions but the same language, such as en-US, en-UK, en-AU | [Itranslate](https://itranslate.com/about), Austria                                                               | stable                          |
 | 13  | [Sogou](https://fanyi.sogou.com/text)                                             | 61                            | support more languages in the world                                                         | [Tencent](https://www.tencent.com/en-us/about.html), China                                                        | stable                          |
 | 14  | [ModernMt](https://www.modernmt.com/translate)                                    | 56                            | open-source, support more languages in the world                                            | [Modernmt](https://github.com/modernmt) / [Translated](https://translatedlabs.com/welcome), Italy                 | stable                          |
 | 15  | [SysTran](https://www.systran.net/translate/)                                     | 52                            | support more languages in the world                                                         | [SysTran](https://www.systran.net/about/), France                                                                 | stable                          |
 | 16  | [Apertium](https://www.apertium.org/)                                             | 45                            | open-source                                                                                 | [Apertium](https://github.com/apertium), Spain                                                                    | stable                          |
 | 17  | [Reverso](https://www.reverso.net/text-translation)                               | 42                            | popular on Mac and Iphone                                                                   | [Reverso](https://www.corporate-translation.reverso.com/about-us), France                                         | stable                          |
-| 18  | [CloudYi](https://www.cloudtranslation.com/#/translate)                           | 28                            | support main languages                                                                      | [Xiamen University](http://nlp.xmu.edu.cn/) / [CloudTranslation](https://www.cloudtranslation.com/#/about), China | stable                          |
+| 18  | [CloudTranslation](https://www.cloudtranslation.com/#/translate)                  | 28                            | support main languages                                                                      | [Xiamen University](http://nlp.xmu.edu.cn/) / [CloudTranslation](https://www.cloudtranslation.com/#/about), China | stable                          |
 | 19  | [Deepl](https://www.deepl.com/translator)                                         | 27                            | high quality to translate but response slowly                                               | [Deepl](https://jobs.deepl.com/l/en), Germany                                                                     | stable                          |
 | 20  | [QQTranSmart](https://transmart.qq.com)                                           | 22                            | support main languages                                                                      | [Tencent](https://www.tencent.com/en-us/about.html), China                                                        | stable                          |
 | 21  | [TranslateCom](https://www.translate.com/machine-translation)                     | 21                            | good at English translation                                                                 | [TranslateCom](https://www.translate.com/about-us), America                                                       | stable                          |
 | 22  | [Tilde](https://translate.tilde.com/)                                             | 21                            | good at lv, de, fr translation                                                              | [Tilde](https://tilde.com/about), Latvia                                                                          | /                               |
 | 23  | [QQFanyi](https://fanyi.qq.com)                                                   | 17                            | support main languages                                                                      | [Tencent](https://www.tencent.com/en-us/about.html), China                                                        | stable                          |
 | 24  | [Argos](https://translate.argosopentech.com)                                      | 17                            | open-source                                                                                 | [Argos](https://github.com/argosopentech) / [Libre](https://github.com/LibreTranslate), America                   | stable                          |
 | 25  | [TranslateMe](https://translateme.network/)                                       | 16                            | good at English translation                                                                 | [TranslateMe](https://translateme.network/our-team/) / [Neosus](https://neosus.net/about/), Lithuania             | /                               |
@@ -126,15 +127,15 @@
     :param query_text: str, must.
     :param translator: str, default 'bing'.
     :param from_language: str, default 'auto'.
     :param to_language: str, default 'en'.
     :param if_use_preacceleration: bool, default False.
     :param **kwargs:
             :param is_detail_result: bool, default False.
-            :param professional_field: str, default None. Support alibaba(), baidu(), caiyun(), cloudYi(), elia(), sysTran(), youdao(), volcEngine() only.
+            :param professional_field: str, default None. Support alibaba(), baidu(), caiyun(), cloudTranslation(), elia(), sysTran(), youdao(), volcEngine() only.
             :param timeout: float, default None.
             :param proxies: dict, default None.
             :param sleep_seconds: float, default 0.
             :param update_session_after_freq: int, default 1000.
             :param update_session_after_seconds: float, default 1500.
             :param if_use_cn_host: bool, default False. Support google(), bing() only.                
             :param reset_host_url: str, default None. Support google(), argos(), yandex() only.
@@ -244,21 +245,24 @@
 | Chinese(壮语)   | zyb                    |                                        |                                        |                                         |                                  |                                          |                                 |                                    |                                  |                                   |                                                      |                                       |                                           |                                              |                                             |                                                     |                                                               |                                    |                                      |
 
 ## Debug Tips
 
 ### Linux Runtime Environment
 
 1. To support javascript runtime environment, you should [download and install Node.js](https://nodejs.org/en/download/).
-2. baidu() doesn't work on Linux without desktop.
+2. Function baidu() doesn't work on Linux without desktop.
 
 ### HttpError 4xx
 
 1. Check whether you made high frequency requests, especially httperror 429.
 2. Check whether this service is provided in your region.
 3. Detail to solve [HttpError](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status) itself.
 4. [Issue me](https://github.com/UlionTse/translators/issues), thanks.
 
 ### NetworkError or ProxyError
 
 1. Check whether the network is connected correctly.
 2. Check the proxy are enabled on your computer. If it is enabled, try turning it off or otherwise. 
 
+## Star History
+
+[![Star History Chart](https://api.star-history.com/svg?repos=UlionTse/translators&type=Date)](https://star-history.com/#UlionTse/translators&Date)
```

#### html2text {}

```diff
@@ -1,16 +1,16 @@
-Metadata-Version: 2.1 Name: translators Version: 5.8.0 Summary: Translators is
+Metadata-Version: 2.1 Name: translators Version: 5.8.2 Summary: Translators is
 a library which aims to bring free, multiple, enjoyable translation to
 individuals and students in Python. Home-page: https://github.com/uliontse/
 translators Author: UlionTse Author-email: uliontse@outlook.com License: GPLv3
 Project-URL: Source, https://github.com/UlionTse/translators Project-URL:
 Changelog, https://github.com/UlionTse/translators/blob/master/change_log.txt
 Project-URL: Documentation, https://github.com/UlionTse/translators/blob/
 master/README.md Keywords:
-translate,translate_text,translate_html,alibaba,apertium,argos,baidu,bing,caiyun,cloudYi,deepl,elia,google,iciba,iflytek,iflyrec,itranslate,judic,languageWire,lingvanex,mglip,mirai,modernMt,myMemory,niutrans,papago,qqFanyi,qqTranSmart,reverso,sogou,sysTran,tilde,translateCom,translateMe,utibet,volcEngine,yandex,yeekit,youdao
+translate,translate_text,translate_html,alibaba,apertium,argos,baidu,bing,caiyun,cloudTranslation,deepl,elia,google,iciba,iflytek,iflyrec,itranslate,judic,languageWire,lingvanex,mglip,mirai,modernMt,myMemory,niutrans,papago,qqFanyi,qqTranSmart,reverso,sogou,sysTran,tilde,translateCom,translateMe,utibet,volcEngine,yandex,yeekit,youdao
 Classifier: Development Status :: 5 - Production/Stable Classifier: Environment
 :: Web Environment Classifier: Intended Audience :: Developers Classifier:
 License :: OSI Approved :: GNU General Public License v3 (GPLv3) Classifier:
 Programming Language :: Python :: 3 :: Only Classifier: Programming Language ::
 Python :: 3.8 Classifier: Programming Language :: Python :: 3.9 Classifier:
 Programming Language :: Python :: 3.10 Classifier: Programming Language ::
 Python :: 3.11 Requires-Python: >=3.8 Description-Content-Type: text/markdown
@@ -18,27 +18,28 @@
 [https://github.com/UlionTse/translators/blob/master/docs/translators_logo.png]
   [PyPI_-_Version] [Conda_-_Version] [PyPI_-_License] [PyPI_-_Python] [PyPI_-
                    Status] [PyPI_-_Wheel] [PyPI_-_Downloads]
 * * * **Translators** is a library which aims to bring **free, multiple,
 enjoyable** translation to individuals and students in Python. - [Supported
 Translation Services](#supported-translation-services) - [Installation]
 (#installation) - [Getting Started](#getting-started) - [Supported Languages]
-(#supported-languages) - [Debug Tips](#debug-tips) ## Supported Translation
-Services | ID | Translator | Number of Supported Languages | Advantage |
-Service | Status | | --- | ----------------------------------------------------
------------------------------ | ----------------------------- | ---------------
----------------------------------------------------------------------------- |
--------------------------------------------------------------------------------
----------------------------------- | ------------------------------- | | 1 |
-[MyMemory](https://mymemory.translated.net) | 330 | support the most languages
-in the world | [Translated](https://translatedlabs.com/welcome), Italy | stable
-| | 2 | [Niutrans](https://niutrans.com/trans) | 302 | support the most
-languages in the world | [Northeastern University](http://english.neu.edu.cn/
-) / [Niutrans](https://github.com/NiuTrans), China | / | | 3 | [Alibaba](https:
-//translate.alibaba.com) | 221 | support most languages, support professional
+(#supported-languages) - [Debug Tips](#debug-tips) - [Star History](#star-
+history) ## Supported Translation Services | ID | Translator | Number of
+Supported Languages | Advantage | Service | Status | | --- | ------------------
+--------------------------------------------------------------- | -------------
+---------------- | ------------------------------------------------------------
+------------------------------- | ---------------------------------------------
+-------------------------------------------------------------------- | --------
+----------------------- | | 1 | [MyMemory](https://mymemory.translated.net) |
+330 | support the most languages in the world | [Translated](https://
+translatedlabs.com/welcome), Italy | stable | | 2 | [Niutrans](https://
+niutrans.com/trans) | 302 | support the most languages in the world |
+[Northeastern University](http://english.neu.edu.cn/) / [Niutrans](https://
+github.com/NiuTrans), China | / | | 3 | [Alibaba](https://
+translate.alibaba.com) | 221 | support most languages, support professional
 field | [Alibaba](https://damo.alibaba.com/about?lang=en), China | stable | | 4
 | [Baidu](https://fanyi.baidu.com) | 201 | support most languages, support
 professional field, support classical Chinese | [Baidu](https://ir.baidu.com/
 company-overview), China | stable | | 5 | [Iciba](https://www.iciba.com/fy) |
 187 | support the most languages in the world | [Kingsoft](https://www.wps.com/
 about-us/) / [Xiaomi](https://www.mi.com/us/about/), China | stable | | 6 |
 [Iflytek](https://fanyi.xfyun.cn/console/trans/text) | 140 | support the most
@@ -65,49 +66,50 @@
 (https://translatedlabs.com/welcome), Italy | stable | | 15 | [SysTran](https:/
 /www.systran.net/translate/) | 52 | support more languages in the world |
 [SysTran](https://www.systran.net/about/), France | stable | | 16 | [Apertium]
 (https://www.apertium.org/) | 45 | open-source | [Apertium](https://github.com/
 apertium), Spain | stable | | 17 | [Reverso](https://www.reverso.net/text-
 translation) | 42 | popular on Mac and Iphone | [Reverso](https://
 www.corporate-translation.reverso.com/about-us), France | stable | | 18 |
-[CloudYi](https://www.cloudtranslation.com/#/translate) | 28 | support main
-languages | [Xiamen University](http://nlp.xmu.edu.cn/) / [CloudTranslation]
-(https://www.cloudtranslation.com/#/about), China | stable | | 19 | [Deepl]
-(https://www.deepl.com/translator) | 27 | high quality to translate but
-response slowly | [Deepl](https://jobs.deepl.com/l/en), Germany | stable | | 20
-| [QQTranSmart](https://transmart.qq.com) | 22 | support main languages |
-[Tencent](https://www.tencent.com/en-us/about.html), China | stable | | 21 |
-[TranslateCom](https://www.translate.com/machine-translation) | 21 | good at
-English translation | [TranslateCom](https://www.translate.com/about-us),
-America | stable | | 22 | [Tilde](https://translate.tilde.com/) | 21 | good at
-lv, de, fr translation | [Tilde](https://tilde.com/about), Latvia | / | | 23 |
-[QQFanyi](https://fanyi.qq.com) | 17 | support main languages | [Tencent]
-(https://www.tencent.com/en-us/about.html), China | stable | | 24 | [Argos]
-(https://translate.argosopentech.com) | 17 | open-source | [Argos](https://
-github.com/argosopentech) / [Libre](https://github.com/LibreTranslate), America
-| stable | | 25 | [TranslateMe](https://translateme.network/) | 16 | good at
-English translation | [TranslateMe](https://translateme.network/our-team/) /
-[Neosus](https://neosus.net/about/), Lithuania | / | | 26 | [Youdao](https://
-ai.youdao.com/product-fanyi-text.s) | 15 | support main languages, high quality
-| [Netease](https://ir.netease.com/company-overview/corporate-profile), China |
-stable | | 27 | [Papago](https://papago.naver.com) | 15 | good at Korean
-translation | [Naver](https://www.navercorp.com/en/naver/company), South Korea
-| stable | | 28 | [Marai](https://miraitranslate.com/trial/) | 15 | good at
-Japanese translation | [MaraiTranslate](https://miraitranslate.com/en/company/
-), Japan | / | | 29 | [Iflyrec](https://fanyi.iflyrec.com) | 12 | good at
-Chinese translation | [Iflytek](https://www.iflytek.com/en/about-us.html),
-China | stable | | 30 | [Yeekit](https://www.yeekit.com/site/translate) | 10 |
-support main languages | [CTC](https://www.ctpc.com.cn/cms/enAboutUs.htm),
-China | / | | 31 | [LanguageWire](https://www.languagewire.com/en/technology/
-languagewire-translate) | 8 | good at English translation | [LanguageWire]
-(https://www.languagewire.com/about-us), Denmark | stable | | 32 | [Caiyun]
-(https://fanyi.caiyunapp.com) | 7 | high quality to translate but response
-slowly, support professional field | [ColorfulClouds](http://caiyunapp.com/
-jobs/), China | stable | | 33 | [Elia](https://elia.eus/translator) | 6 | good
-at Basque translation | [Elhuyar](https://www.elhuyar.eus/eu/nor-gara), Spain |
+[CloudTranslation](https://www.cloudtranslation.com/#/translate) | 28 | support
+main languages | [Xiamen University](http://nlp.xmu.edu.cn/) /
+[CloudTranslation](https://www.cloudtranslation.com/#/about), China | stable |
+| 19 | [Deepl](https://www.deepl.com/translator) | 27 | high quality to
+translate but response slowly | [Deepl](https://jobs.deepl.com/l/en), Germany |
+stable | | 20 | [QQTranSmart](https://transmart.qq.com) | 22 | support main
+languages | [Tencent](https://www.tencent.com/en-us/about.html), China | stable
+| | 21 | [TranslateCom](https://www.translate.com/machine-translation) | 21 |
+good at English translation | [TranslateCom](https://www.translate.com/about-
+us), America | stable | | 22 | [Tilde](https://translate.tilde.com/) | 21 |
+good at lv, de, fr translation | [Tilde](https://tilde.com/about), Latvia | / |
+| 23 | [QQFanyi](https://fanyi.qq.com) | 17 | support main languages |
+[Tencent](https://www.tencent.com/en-us/about.html), China | stable | | 24 |
+[Argos](https://translate.argosopentech.com) | 17 | open-source | [Argos]
+(https://github.com/argosopentech) / [Libre](https://github.com/
+LibreTranslate), America | stable | | 25 | [TranslateMe](https://
+translateme.network/) | 16 | good at English translation | [TranslateMe](https:
+//translateme.network/our-team/) / [Neosus](https://neosus.net/about/),
+Lithuania | / | | 26 | [Youdao](https://ai.youdao.com/product-fanyi-text.s) |
+15 | support main languages, high quality | [Netease](https://ir.netease.com/
+company-overview/corporate-profile), China | stable | | 27 | [Papago](https://
+papago.naver.com) | 15 | good at Korean translation | [Naver](https://
+www.navercorp.com/en/naver/company), South Korea | stable | | 28 | [Marai]
+(https://miraitranslate.com/trial/) | 15 | good at Japanese translation |
+[MaraiTranslate](https://miraitranslate.com/en/company/), Japan | / | | 29 |
+[Iflyrec](https://fanyi.iflyrec.com) | 12 | good at Chinese translation |
+[Iflytek](https://www.iflytek.com/en/about-us.html), China | stable | | 30 |
+[Yeekit](https://www.yeekit.com/site/translate) | 10 | support main languages |
+[CTC](https://www.ctpc.com.cn/cms/enAboutUs.htm), China | / | | 31 |
+[LanguageWire](https://www.languagewire.com/en/technology/languagewire-
+translate) | 8 | good at English translation | [LanguageWire](https://
+www.languagewire.com/about-us), Denmark | stable | | 32 | [Caiyun](https://
+fanyi.caiyunapp.com) | 7 | high quality to translate but response slowly,
+support professional field | [ColorfulClouds](http://caiyunapp.com/jobs/),
+China | stable | | 33 | [Elia](https://elia.eus/translator) | 6 | good at
+Basque translation | [Elhuyar](https://www.elhuyar.eus/eu/nor-gara), Spain |
 stable | | 34 | [Judic](https://judic.io/en/translate) | 4 | good at European
 translation | [CrossLang](https://crosslang.com/about-us/), Belgium | stable |
 | 35 | [Mglip](http://fy.mglip.com/pc) | 3 | good at Mongolia translation |
 [Inner Mongolia University](https://www.imu.edu.cn/yw/Home.htm), China | stable
 | | 36 | [Utibet](http://mt.utibet.edu.cn/mt) | 2 | good at Tibet translation |
 [Tibet University](http://www.utibet.edu.cn/), China | stable | ## Installation
 ```sh # PYPI pip install --upgrade translators # Conda conda install -c conda-
@@ -123,16 +125,16 @@
 translator='alibaba')) ### parameters help(ts.translate_text) """
 translate_text(query_text: str, translator: str = 'bing', from_language: str =
 'auto', to_language: str = 'en', **kwargs) -> Union[str, dict] :param
 query_text: str, must. :param translator: str, default 'bing'. :param
 from_language: str, default 'auto'. :param to_language: str, default 'en'. :
 param if_use_preacceleration: bool, default False. :param **kwargs: :param
 is_detail_result: bool, default False. :param professional_field: str, default
-None. Support alibaba(), baidu(), caiyun(), cloudYi(), elia(), sysTran(),
-youdao(), volcEngine() only. :param timeout: float, default None. :param
+None. Support alibaba(), baidu(), caiyun(), cloudTranslation(), elia(), sysTran
+(), youdao(), volcEngine() only. :param timeout: float, default None. :param
 proxies: dict, default None. :param sleep_seconds: float, default 0. :param
 update_session_after_freq: int, default 1000. :param
 update_session_after_seconds: float, default 1500. :param if_use_cn_host: bool,
 default False. Support google(), bing() only. :param reset_host_url: str,
 default None. Support google(), argos(), yandex() only. :param
 if_check_reset_host_url: bool, default True. Support google(), yandex() only. :
 param if_ignore_empty_query: bool, default False. :param limit_of_length: int,
@@ -234,16 +236,18 @@
 [åè] | | | | N[å¤è] | | | | | | Chinese(ç»´å¾å°è¯­) | uy | | | | | | |
 | | Y | | | | | | | | | | | Chinese(èè¯­) | ti | | | | | | | | | Y | | | | |
 | | | | Y | | Chinese(ç½èæ) | mww | | | Y | | | | | Y | Y | | | | | | | |
 | | | Chinese(å½è¯­) | ii | | | | | | | | | | Y | | | | | | | | | | Chinese
 (èè¯­) | hmn | | | | | | | | | | | | | | Y | | | | | | Chinese(å£®è¯­) | zyb
 | | | | | | | | | | | | | | | | | | | ## Debug Tips ### Linux Runtime
 Environment 1. To support javascript runtime environment, you should [download
-and install Node.js](https://nodejs.org/en/download/). 2. baidu() doesn't work
-on Linux without desktop. ### HttpError 4xx 1. Check whether you made high
-frequency requests, especially httperror 429. 2. Check whether this service is
-provided in your region. 3. Detail to solve [HttpError](https://
+and install Node.js](https://nodejs.org/en/download/). 2. Function baidu()
+doesn't work on Linux without desktop. ### HttpError 4xx 1. Check whether you
+made high frequency requests, especially httperror 429. 2. Check whether this
+service is provided in your region. 3. Detail to solve [HttpError](https://
 developer.mozilla.org/en-US/docs/Web/HTTP/Status) itself. 4. [Issue me](https:/
 /github.com/UlionTse/translators/issues), thanks. ### NetworkError or
 ProxyError 1. Check whether the network is connected correctly. 2. Check the
 proxy are enabled on your computer. If it is enabled, try turning it off or
-otherwise.
+otherwise. ## Star History [![Star History Chart](https://api.star-history.com/
+svg?repos=UlionTse/translators&type=Date)](https://star-history.com/#UlionTse/
+translators&Date)
```

